#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_a8)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_a8) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A8 0000
        gbc.setState(0x641a, 0x4569, 0x5c60, 0x241b, 0x1cc6, 0x12be, 0x0, 0x1);
        gbc.writeMem(0x641a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4569);
        EXPECT(gbc.pc(), 0x641b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0003
        gbc.setState(0x1835, 0xfb49, 0x7ca0, 0x6c1e, 0x9b66, 0x2c55, 0x0, 0x1);
        gbc.writeMem(0x1835, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xfb49);
        EXPECT(gbc.pc(), 0x1836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0004
        gbc.setState(0x814e, 0xae8a, 0xe910, 0xe096, 0xb54c, 0xabf5, 0x0, 0x0);
        gbc.writeMem(0x814e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xae8a);
        EXPECT(gbc.pc(), 0x814f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x814e), 0xa8);
        // A8 0005
        gbc.setState(0x30ee, 0xc74, 0xe710, 0xcec2, 0xec32, 0x7fb6, 0x0, 0x1);
        gbc.writeMem(0x30ee, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc74);
        EXPECT(gbc.pc(), 0x30ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0006
        gbc.setState(0x927e, 0x150, 0x45b0, 0x12f0, 0xb135, 0xb5fb, 0x0, 0x0);
        gbc.writeMem(0x927e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x150);
        EXPECT(gbc.pc(), 0x927f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x927e), 0xa8);
        // A8 0007
        gbc.setState(0x5ee5, 0x7395, 0x3660, 0x7dbf, 0xdcd8, 0xbd74, 0x0, 0x0);
        gbc.writeMem(0x5ee5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7395);
        EXPECT(gbc.pc(), 0x5ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0008
        gbc.setState(0x912c, 0x1625, 0xb7a0, 0x7b17, 0x5318, 0x39c1, 0x1, 0x1);
        gbc.writeMem(0x912c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1625);
        EXPECT(gbc.pc(), 0x912d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912c), 0xa8);
        // A8 0009
        gbc.setState(0x810d, 0x6274, 0xb7f0, 0xfd48, 0x2cc2, 0x2bf3, 0x1, 0x0);
        gbc.writeMem(0x810d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6274);
        EXPECT(gbc.pc(), 0x810e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810d), 0xa8);
        // A8 000A
        gbc.setState(0x6b9b, 0xbef8, 0x8180, 0x761b, 0x70ad, 0x4462, 0x0, 0x0);
        gbc.writeMem(0x6b9b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbef8);
        EXPECT(gbc.pc(), 0x6b9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 000B
        gbc.setState(0x31b7, 0xd256, 0x82d0, 0x1ed9, 0x3c0, 0x9665, 0x1, 0x0);
        gbc.writeMem(0x31b7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd256);
        EXPECT(gbc.pc(), 0x31b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 000C
        gbc.setState(0xa0fc, 0xff0c, 0x3630, 0xfbc6, 0xd089, 0x352c, 0x1, 0x0);
        gbc.writeMem(0xa0fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xff0c);
        EXPECT(gbc.pc(), 0xa0fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0fc), 0xa8);
        // A8 000D
        gbc.setState(0x5aa4, 0x579b, 0x3140, 0x59ce, 0x2556, 0xd331, 0x1, 0x1);
        gbc.writeMem(0x5aa4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x579b);
        EXPECT(gbc.pc(), 0x5aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 000E
        gbc.setState(0x47c5, 0x4f05, 0xa260, 0x6e07, 0x8e53, 0x704d, 0x1, 0x1);
        gbc.writeMem(0x47c5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4f05);
        EXPECT(gbc.pc(), 0x47c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 000F
        gbc.setState(0x8a02, 0x9cad, 0x3290, 0x3536, 0xb16e, 0xd461, 0x0, 0x0);
        gbc.writeMem(0x8a02, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9cad);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a02), 0xa8);
        // A8 0010
        gbc.setState(0x5dfb, 0x3773, 0x7370, 0x3353, 0x788b, 0x4e86, 0x1, 0x0);
        gbc.writeMem(0x5dfb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3773);
        EXPECT(gbc.pc(), 0x5dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0011
        gbc.setState(0xc02f, 0x8348, 0x66e0, 0xb927, 0x9cef, 0x843e, 0x0, 0x1);
        gbc.writeMem(0xc02f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8348);
        EXPECT(gbc.pc(), 0xc030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc02f), 0xa8);
        // A8 0013
        gbc.setState(0x3879, 0xe870, 0x8790, 0xbb50, 0xdbd8, 0x4d63, 0x0, 0x1);
        gbc.writeMem(0x3879, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe870);
        EXPECT(gbc.pc(), 0x387a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0014
        gbc.setState(0x5e0c, 0xf9eb, 0x5cc0, 0xcd8f, 0x579f, 0x524c, 0x0, 0x1);
        gbc.writeMem(0x5e0c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf9eb);
        EXPECT(gbc.pc(), 0x5e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0015
        gbc.setState(0xc781, 0x7260, 0x2bd0, 0xd4b4, 0x215c, 0x615b, 0x0, 0x0);
        gbc.writeMem(0xc781, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7260);
        EXPECT(gbc.pc(), 0xc782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc781), 0xa8);
        // A8 0016
        gbc.setState(0x7a5e, 0x2c8a, 0x68e0, 0xb5bf, 0x13dc, 0x8493, 0x0, 0x0);
        gbc.writeMem(0x7a5e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2c8a);
        EXPECT(gbc.pc(), 0x7a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0017
        gbc.setState(0x1273, 0x4eda, 0xa980, 0xd1f9, 0xcdc1, 0x300d, 0x0, 0x1);
        gbc.writeMem(0x1273, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4eda);
        EXPECT(gbc.pc(), 0x1274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0018
        gbc.setState(0x83d4, 0xecfa, 0x2980, 0x5798, 0x73d0, 0x849d, 0x0, 0x0);
        gbc.writeMem(0x83d4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xecfa);
        EXPECT(gbc.pc(), 0x83d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d4), 0xa8);
        // A8 0019
        gbc.setState(0xc9e3, 0x8f9d, 0xf020, 0x5a2a, 0xaa8c, 0x1f81, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8f9d);
        EXPECT(gbc.pc(), 0xc9e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e3), 0xa8);
        // A8 001A
        gbc.setState(0x3463, 0x2629, 0x9e80, 0x2b, 0x28f5, 0x50d3, 0x1, 0x1);
        gbc.writeMem(0x3463, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2629);
        EXPECT(gbc.pc(), 0x3464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 001B
        gbc.setState(0xc084, 0x3dba, 0xe860, 0x45fc, 0xe26, 0x4485, 0x1, 0x0);
        gbc.writeMem(0xc084, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3dba);
        EXPECT(gbc.pc(), 0xc085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc084), 0xa8);
        // A8 001C
        gbc.setState(0x48bc, 0xa03f, 0xb800, 0x69c7, 0x1669, 0x3101, 0x1, 0x1);
        gbc.writeMem(0x48bc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa03f);
        EXPECT(gbc.pc(), 0x48bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 001D
        gbc.setState(0x8510, 0xd5f2, 0x7b70, 0x3327, 0x67c4, 0x4235, 0x0, 0x1);
        gbc.writeMem(0x8510, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd5f2);
        EXPECT(gbc.pc(), 0x8511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8510), 0xa8);
        // A8 001E
        gbc.setState(0x6dd6, 0xdc3f, 0x250, 0x1e17, 0x7b43, 0x276b, 0x1, 0x1);
        gbc.writeMem(0x6dd6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdc3f);
        EXPECT(gbc.pc(), 0x6dd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 001F
        gbc.setState(0x8919, 0xaef1, 0xe4b0, 0xc6a6, 0x7663, 0xca5c, 0x0, 0x0);
        gbc.writeMem(0x8919, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0x891a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8919), 0xa8);
        // A8 0020
        gbc.setState(0x4fbd, 0x8793, 0xb830, 0x962a, 0x2373, 0xf0a, 0x0, 0x1);
        gbc.writeMem(0x4fbd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8793);
        EXPECT(gbc.pc(), 0x4fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0021
        gbc.setState(0x6eab, 0x257b, 0x5840, 0xbfb5, 0x88a0, 0x6982, 0x0, 0x1);
        gbc.writeMem(0x6eab, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x257b);
        EXPECT(gbc.pc(), 0x6eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0022
        gbc.setState(0x2806, 0x3ad9, 0xfd10, 0xb4aa, 0xdbbd, 0x577d, 0x0, 0x0);
        gbc.writeMem(0x2806, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3ad9);
        EXPECT(gbc.pc(), 0x2807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0024
        gbc.setState(0x6abb, 0x8abd, 0xe830, 0x9255, 0x4603, 0xe080, 0x0, 0x1);
        gbc.writeMem(0x6abb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8abd);
        EXPECT(gbc.pc(), 0x6abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0025
        gbc.setState(0xee5f, 0x7a, 0x25f0, 0xcecc, 0x9fc9, 0x8d09, 0x1, 0x0);
        gbc.writeMem(0xee5f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7a);
        EXPECT(gbc.pc(), 0xee60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee5f), 0xa8);
        // A8 0027
        gbc.setState(0x831d, 0xd741, 0x4bf0, 0x1a89, 0x892a, 0x510, 0x0, 0x0);
        gbc.writeMem(0x831d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd741);
        EXPECT(gbc.pc(), 0x831e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831d), 0xa8);
        // A8 002A
        gbc.setState(0x226f, 0x51ca, 0x4ab0, 0x1bc7, 0xc090, 0xd093, 0x1, 0x1);
        gbc.writeMem(0x226f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x51ca);
        EXPECT(gbc.pc(), 0x2270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 002B
        gbc.setState(0x1009, 0x47c5, 0x5350, 0xb99, 0x9c5d, 0x3b76, 0x0, 0x0);
        gbc.writeMem(0x1009, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x47c5);
        EXPECT(gbc.pc(), 0x100a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 002C
        gbc.setState(0x6cb, 0x857a, 0x2900, 0xd292, 0x99ca, 0x9b6e, 0x0, 0x1);
        gbc.writeMem(0x6cb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x857a);
        EXPECT(gbc.pc(), 0x6cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 002D
        gbc.setState(0xc31a, 0x1b8, 0xf3a0, 0x7c2b, 0x729d, 0x6385, 0x1, 0x1);
        gbc.writeMem(0xc31a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1b8);
        EXPECT(gbc.pc(), 0xc31b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31a), 0xa8);
        // A8 002F
        gbc.setState(0x9f07, 0x3cdb, 0xa20, 0xdb0c, 0xe856, 0xd19, 0x1, 0x1);
        gbc.writeMem(0x9f07, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3cdb);
        EXPECT(gbc.pc(), 0x9f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f07), 0xa8);
        // A8 0030
        gbc.setState(0xdf81, 0x84b, 0x23c0, 0x64ce, 0x915c, 0xb3dc, 0x0, 0x0);
        gbc.writeMem(0xdf81, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x84b);
        EXPECT(gbc.pc(), 0xdf82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf81), 0xa8);
        // A8 0031
        gbc.setState(0x9d1d, 0xed89, 0xd4c0, 0x1663, 0xa6f6, 0xde9d, 0x0, 0x0);
        gbc.writeMem(0x9d1d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xed89);
        EXPECT(gbc.pc(), 0x9d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1d), 0xa8);
        // A8 0032
        gbc.setState(0xd272, 0xd6c, 0x5ab0, 0x91e8, 0xd468, 0x4bec, 0x1, 0x1);
        gbc.writeMem(0xd272, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd6c);
        EXPECT(gbc.pc(), 0xd273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd272), 0xa8);
        // A8 0033
        gbc.setState(0x81d1, 0xd469, 0xbf50, 0xed7, 0x7469, 0x6d01, 0x0, 0x1);
        gbc.writeMem(0x81d1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd469);
        EXPECT(gbc.pc(), 0x81d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d1), 0xa8);
        // A8 0034
        gbc.setState(0xd97e, 0xb786, 0xd40, 0x971d, 0x44ea, 0x1d46, 0x0, 0x0);
        gbc.writeMem(0xd97e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb786);
        EXPECT(gbc.pc(), 0xd97f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97e), 0xa8);
        // A8 0035
        gbc.setState(0x2b20, 0x5da1, 0xd730, 0xec6, 0x4b75, 0x2d99, 0x1, 0x0);
        gbc.writeMem(0x2b20, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5da1);
        EXPECT(gbc.pc(), 0x2b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0036
        gbc.setState(0x5cf0, 0xd1fb, 0xce70, 0xa0cf, 0x37d0, 0x21e4, 0x0, 0x0);
        gbc.writeMem(0x5cf0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd1fb);
        EXPECT(gbc.pc(), 0x5cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0037
        gbc.setState(0xe22b, 0x543d, 0xb9a0, 0x35fa, 0x5099, 0xec54, 0x0, 0x1);
        gbc.writeMem(0xe22b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x543d);
        EXPECT(gbc.pc(), 0xe22c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22b), 0xa8);
        // A8 0038
        gbc.setState(0xa846, 0xf4cd, 0x8740, 0xa9d2, 0xd3ce, 0x56d4, 0x0, 0x1);
        gbc.writeMem(0xa846, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf4cd);
        EXPECT(gbc.pc(), 0xa847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa846), 0xa8);
        // A8 0039
        gbc.setState(0x124, 0xbaec, 0xe010, 0x7c70, 0x9c10, 0x5e19, 0x1, 0x0);
        gbc.writeMem(0x124, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbaec);
        EXPECT(gbc.pc(), 0x125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 003A
        gbc.setState(0xa2a6, 0xb0d7, 0xd620, 0x9709, 0xadf6, 0x9eeb, 0x0, 0x0);
        gbc.writeMem(0xa2a6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb0d7);
        EXPECT(gbc.pc(), 0xa2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a6), 0xa8);
        // A8 003B
        gbc.setState(0x6171, 0x4709, 0xfa50, 0x8bef, 0x5aef, 0x50d2, 0x0, 0x1);
        gbc.writeMem(0x6171, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4709);
        EXPECT(gbc.pc(), 0x6172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 003C
        gbc.setState(0xc5c1, 0x3a3c, 0xad90, 0x2160, 0xefc4, 0x4fe7, 0x0, 0x1);
        gbc.writeMem(0xc5c1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3a3c);
        EXPECT(gbc.pc(), 0xc5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c1), 0xa8);
        // A8 003D
        gbc.setState(0x23be, 0x4b07, 0xfd90, 0x7064, 0x71fe, 0x4400, 0x0, 0x1);
        gbc.writeMem(0x23be, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4b07);
        EXPECT(gbc.pc(), 0x23bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 003E
        gbc.setState(0xb091, 0x81c1, 0x1900, 0xd5f0, 0xba1f, 0x4847, 0x0, 0x1);
        gbc.writeMem(0xb091, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x81c1);
        EXPECT(gbc.pc(), 0xb092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb091), 0xa8);
        // A8 003F
        gbc.setState(0x952c, 0x187c, 0xa850, 0x9b9e, 0x9043, 0xc7f2, 0x1, 0x1);
        gbc.writeMem(0x952c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x187c);
        EXPECT(gbc.pc(), 0x952d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952c), 0xa8);
        // A8 0040
        gbc.setState(0xb3e7, 0x14a6, 0x960, 0x55cd, 0x62bb, 0x6488, 0x1, 0x0);
        gbc.writeMem(0xb3e7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0xb3e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e7), 0xa8);
        // A8 0041
        gbc.setState(0x9187, 0x5b69, 0x260, 0x4bc2, 0xc85b, 0xeba0, 0x1, 0x0);
        gbc.writeMem(0x9187, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5b69);
        EXPECT(gbc.pc(), 0x9188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9187), 0xa8);
        // A8 0042
        gbc.setState(0x4df2, 0x67b7, 0x9cd0, 0xddae, 0x63fe, 0xa9e7, 0x1, 0x1);
        gbc.writeMem(0x4df2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x67b7);
        EXPECT(gbc.pc(), 0x4df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0044
        gbc.setState(0x36e, 0x24be, 0x5800, 0x6ce4, 0xc867, 0xad41, 0x0, 0x1);
        gbc.writeMem(0x36e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x24be);
        EXPECT(gbc.pc(), 0x36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0045
        gbc.setState(0x8b3c, 0x9683, 0xc750, 0xbceb, 0xe2d8, 0x9815, 0x0, 0x1);
        gbc.writeMem(0x8b3c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9683);
        EXPECT(gbc.pc(), 0x8b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3c), 0xa8);
        // A8 0046
        gbc.setState(0x9032, 0x2168, 0x6cf0, 0x4303, 0x1744, 0x544f, 0x1, 0x0);
        gbc.writeMem(0x9032, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2168);
        EXPECT(gbc.pc(), 0x9033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9032), 0xa8);
        // A8 0047
        gbc.setState(0x707d, 0xb613, 0xcf90, 0xb03b, 0x4ca8, 0x5865, 0x0, 0x1);
        gbc.writeMem(0x707d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb613);
        EXPECT(gbc.pc(), 0x707e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0048
        gbc.setState(0x4cb7, 0xccfb, 0xfd30, 0x13f6, 0xa8f8, 0x750d, 0x0, 0x1);
        gbc.writeMem(0x4cb7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xccfb);
        EXPECT(gbc.pc(), 0x4cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0049
        gbc.setState(0x9cd, 0x8602, 0xea40, 0x8dee, 0xd00c, 0xbc8c, 0x1, 0x0);
        gbc.writeMem(0x9cd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8602);
        EXPECT(gbc.pc(), 0x9ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 004B
        gbc.setState(0x957b, 0x69b3, 0xb920, 0xe840, 0x77f2, 0x6051, 0x1, 0x0);
        gbc.writeMem(0x957b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x69b3);
        EXPECT(gbc.pc(), 0x957c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957b), 0xa8);
        // A8 004D
        gbc.setState(0x6568, 0xd7f3, 0xf8d0, 0xc22f, 0x2da1, 0x7d8c, 0x0, 0x1);
        gbc.writeMem(0x6568, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd7f3);
        EXPECT(gbc.pc(), 0x6569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 004E
        gbc.setState(0x23dc, 0xc45, 0xa10, 0xa214, 0xf7d7, 0xdd10, 0x1, 0x0);
        gbc.writeMem(0x23dc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc45);
        EXPECT(gbc.pc(), 0x23dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 004F
        gbc.setState(0xe48b, 0x9e16, 0x9f20, 0x6bd4, 0xb269, 0x8f5e, 0x1, 0x1);
        gbc.writeMem(0xe48b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9e16);
        EXPECT(gbc.pc(), 0xe48c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe48b), 0xa8);
        // A8 0050
        gbc.setState(0xc3a0, 0x1567, 0xbb00, 0x5300, 0x839, 0x4565, 0x1, 0x1);
        gbc.writeMem(0xc3a0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1567);
        EXPECT(gbc.pc(), 0xc3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a0), 0xa8);
        // A8 0051
        gbc.setState(0xe0d5, 0x54a9, 0x560, 0xc58d, 0x3c95, 0xafb3, 0x1, 0x1);
        gbc.writeMem(0xe0d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x54a9);
        EXPECT(gbc.pc(), 0xe0d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d5), 0xa8);
        // A8 0052
        gbc.setState(0xa001, 0x9ec2, 0x8c30, 0x7a85, 0xe533, 0x2401, 0x0, 0x1);
        gbc.writeMem(0xa001, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9ec2);
        EXPECT(gbc.pc(), 0xa002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa001), 0xa8);
        // A8 0053
        gbc.setState(0xd1a0, 0xe09, 0xe810, 0x42f1, 0xc1f0, 0x4472, 0x0, 0x0);
        gbc.writeMem(0xd1a0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe09);
        EXPECT(gbc.pc(), 0xd1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a0), 0xa8);
        // A8 0054
        gbc.setState(0x4529, 0x4780, 0xd840, 0x6149, 0x4eaa, 0x62c, 0x1, 0x0);
        gbc.writeMem(0x4529, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4780);
        EXPECT(gbc.pc(), 0x452a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0057
        gbc.setState(0xa278, 0x6e88, 0x87a0, 0x2e6a, 0xde1d, 0x8f9d, 0x0, 0x0);
        gbc.writeMem(0xa278, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6e88);
        EXPECT(gbc.pc(), 0xa279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa278), 0xa8);
        // A8 0058
        gbc.setState(0xd04f, 0xe06f, 0x3380, 0x3a35, 0x17d8, 0x568a, 0x1, 0x1);
        gbc.writeMem(0xd04f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe06f);
        EXPECT(gbc.pc(), 0xd050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd04f), 0xa8);
        // A8 0059
        gbc.setState(0x8bd0, 0x985e, 0x7900, 0xeae2, 0xb279, 0xa5, 0x0, 0x1);
        gbc.writeMem(0x8bd0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x985e);
        EXPECT(gbc.pc(), 0x8bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd0), 0xa8);
        // A8 005A
        gbc.setState(0x1afb, 0xe355, 0x4c30, 0xf7ac, 0x1b0a, 0x1401, 0x0, 0x1);
        gbc.writeMem(0x1afb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe355);
        EXPECT(gbc.pc(), 0x1afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 005B
        gbc.setState(0x9bf2, 0x8918, 0xe770, 0x8415, 0x1a1d, 0xede, 0x0, 0x0);
        gbc.writeMem(0x9bf2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8918);
        EXPECT(gbc.pc(), 0x9bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf2), 0xa8);
        // A8 005C
        gbc.setState(0x8214, 0x3156, 0xcb50, 0xd467, 0x7c9, 0xe96, 0x0, 0x1);
        gbc.writeMem(0x8214, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3156);
        EXPECT(gbc.pc(), 0x8215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8214), 0xa8);
        // A8 005D
        gbc.setState(0xdb62, 0xa451, 0x3490, 0x5a4, 0xcd41, 0x927c, 0x1, 0x0);
        gbc.writeMem(0xdb62, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa451);
        EXPECT(gbc.pc(), 0xdb63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb62), 0xa8);
        // A8 005E
        gbc.setState(0x980c, 0xee88, 0x82a0, 0xa789, 0xd879, 0xe23e, 0x1, 0x1);
        gbc.writeMem(0x980c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xee88);
        EXPECT(gbc.pc(), 0x980d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980c), 0xa8);
        // A8 005F
        gbc.setState(0xbdb6, 0x6366, 0x6400, 0x76d6, 0xb8cf, 0x6619, 0x0, 0x1);
        gbc.writeMem(0xbdb6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6366);
        EXPECT(gbc.pc(), 0xbdb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb6), 0xa8);
        // A8 0060
        gbc.setState(0xd9fc, 0x480, 0xe9c0, 0xaf8e, 0x5152, 0x7155, 0x0, 0x0);
        gbc.writeMem(0xd9fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x480);
        EXPECT(gbc.pc(), 0xd9fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fc), 0xa8);
        // A8 0061
        gbc.setState(0xaea8, 0x7c47, 0xa800, 0x953b, 0x8936, 0x18b3, 0x1, 0x0);
        gbc.writeMem(0xaea8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7c47);
        EXPECT(gbc.pc(), 0xaea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea8), 0xa8);
        // A8 0062
        gbc.setState(0xef6d, 0xab28, 0xd30, 0x1dc6, 0x9ff2, 0x6d4, 0x0, 0x0);
        gbc.writeMem(0xef6d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xab28);
        EXPECT(gbc.pc(), 0xef6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6d), 0xa8);
        // A8 0063
        gbc.setState(0x4799, 0xa7a1, 0x56c0, 0x8955, 0xecae, 0x1f73, 0x1, 0x1);
        gbc.writeMem(0x4799, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa7a1);
        EXPECT(gbc.pc(), 0x479a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0064
        gbc.setState(0x98b2, 0x9d98, 0xdd80, 0x1864, 0x4cf2, 0xc54, 0x0, 0x0);
        gbc.writeMem(0x98b2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9d98);
        EXPECT(gbc.pc(), 0x98b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b2), 0xa8);
        // A8 0066
        gbc.setState(0x54f2, 0x3e16, 0xa090, 0x3d9e, 0x363a, 0xbb1b, 0x0, 0x0);
        gbc.writeMem(0x54f2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3e16);
        EXPECT(gbc.pc(), 0x54f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0067
        gbc.setState(0xeea3, 0x7312, 0x7030, 0x7e87, 0xea6b, 0x60b3, 0x1, 0x0);
        gbc.writeMem(0xeea3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7312);
        EXPECT(gbc.pc(), 0xeea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea3), 0xa8);
        // A8 0068
        gbc.setState(0x7038, 0x447e, 0xaf70, 0x49cf, 0x4994, 0xd094, 0x1, 0x0);
        gbc.writeMem(0x7038, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x447e);
        EXPECT(gbc.pc(), 0x7039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0069
        gbc.setState(0xae3d, 0x45b2, 0xad60, 0x8a1c, 0x416, 0x4e32, 0x0, 0x1);
        gbc.writeMem(0xae3d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x45b2);
        EXPECT(gbc.pc(), 0xae3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3d), 0xa8);
        // A8 006A
        gbc.setState(0x6d40, 0x5c8e, 0xc4e0, 0x34d, 0x4fae, 0xc553, 0x0, 0x1);
        gbc.writeMem(0x6d40, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5c8e);
        EXPECT(gbc.pc(), 0x6d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 006B
        gbc.setState(0x23b1, 0xb680, 0xbfc0, 0x477f, 0xe3e4, 0x644b, 0x0, 0x0);
        gbc.writeMem(0x23b1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb680);
        EXPECT(gbc.pc(), 0x23b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 006C
        gbc.setState(0xb335, 0x6f1, 0x5480, 0x39af, 0x14a7, 0x71df, 0x1, 0x0);
        gbc.writeMem(0xb335, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6f1);
        EXPECT(gbc.pc(), 0xb336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb335), 0xa8);
        // A8 006D
        gbc.setState(0x4e7e, 0xb49f, 0x31f0, 0xd5f8, 0x6df4, 0x2c2, 0x1, 0x1);
        gbc.writeMem(0x4e7e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb49f);
        EXPECT(gbc.pc(), 0x4e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 006E
        gbc.setState(0x7563, 0x5a21, 0x760, 0xdb53, 0x77d7, 0x8057, 0x1, 0x0);
        gbc.writeMem(0x7563, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5a21);
        EXPECT(gbc.pc(), 0x7564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 006F
        gbc.setState(0xd5fc, 0x58bb, 0x4490, 0xee7e, 0x7729, 0xeb8b, 0x0, 0x0);
        gbc.writeMem(0xd5fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x58bb);
        EXPECT(gbc.pc(), 0xd5fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5fc), 0xa8);
        // A8 0070
        gbc.setState(0x9bbc, 0xe044, 0xa130, 0x30e0, 0x5d51, 0xe121, 0x0, 0x1);
        gbc.writeMem(0x9bbc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe044);
        EXPECT(gbc.pc(), 0x9bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbc), 0xa8);
        // A8 0071
        gbc.setState(0xe228, 0x41d7, 0x3a70, 0xf932, 0xa009, 0x4cf1, 0x0, 0x0);
        gbc.writeMem(0xe228, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x41d7);
        EXPECT(gbc.pc(), 0xe229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe228), 0xa8);
        // A8 0072
        gbc.setState(0x9ff1, 0x8926, 0xb550, 0x97a4, 0x5696, 0x7ddd, 0x1, 0x1);
        gbc.writeMem(0x9ff1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8926);
        EXPECT(gbc.pc(), 0x9ff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff1), 0xa8);
        // A8 0073
        gbc.setState(0xec5, 0xcf0f, 0x8090, 0x62a9, 0xa81f, 0xd0f7, 0x1, 0x0);
        gbc.writeMem(0xec5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcf0f);
        EXPECT(gbc.pc(), 0xec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0074
        gbc.setState(0x3957, 0xa745, 0xee80, 0x9673, 0x9efa, 0xda06, 0x1, 0x1);
        gbc.writeMem(0x3957, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa745);
        EXPECT(gbc.pc(), 0x3958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0075
        gbc.setState(0xd3ed, 0xad52, 0x54c0, 0xdd3e, 0x1828, 0xd85c, 0x0, 0x0);
        gbc.writeMem(0xd3ed, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xad52);
        EXPECT(gbc.pc(), 0xd3ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ed), 0xa8);
        // A8 0076
        gbc.setState(0xb4ce, 0x10ce, 0xb1b0, 0xd972, 0xc35, 0x4cd3, 0x1, 0x1);
        gbc.writeMem(0xb4ce, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x10ce);
        EXPECT(gbc.pc(), 0xb4cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ce), 0xa8);
        // A8 0077
        gbc.setState(0xcf91, 0x6b37, 0x8460, 0x7ccc, 0xca8f, 0x7143, 0x0, 0x0);
        gbc.writeMem(0xcf91, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6b37);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf91), 0xa8);
        // A8 0078
        gbc.setState(0x6c3d, 0xfc38, 0xd310, 0x6893, 0xcbfa, 0xb3fc, 0x0, 0x0);
        gbc.writeMem(0x6c3d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfc38);
        EXPECT(gbc.pc(), 0x6c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0079
        gbc.setState(0x8701, 0xf40e, 0x38f0, 0x5873, 0xcd55, 0xbad9, 0x1, 0x0);
        gbc.writeMem(0x8701, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf40e);
        EXPECT(gbc.pc(), 0x8702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8701), 0xa8);
        // A8 007A
        gbc.setState(0xb009, 0x62b2, 0xe690, 0xf90a, 0xaa2c, 0x6317, 0x1, 0x0);
        gbc.writeMem(0xb009, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x62b2);
        EXPECT(gbc.pc(), 0xb00a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb009), 0xa8);
        // A8 007B
        gbc.setState(0x190, 0xf50e, 0x4460, 0xdd13, 0xd2cf, 0xe969, 0x1, 0x1);
        gbc.writeMem(0x190, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf50e);
        EXPECT(gbc.pc(), 0x191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 007C
        gbc.setState(0x4018, 0x572f, 0xdb00, 0x1621, 0x4e43, 0xfbc8, 0x0, 0x0);
        gbc.writeMem(0x4018, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x572f);
        EXPECT(gbc.pc(), 0x4019);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 007D
        gbc.setState(0x846, 0x1dfa, 0x4950, 0xd416, 0x4d98, 0x4229, 0x1, 0x0);
        gbc.writeMem(0x846, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1dfa);
        EXPECT(gbc.pc(), 0x847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 007E
        gbc.setState(0x7675, 0x8d60, 0x22f0, 0x2cc5, 0xc49f, 0x1571, 0x1, 0x1);
        gbc.writeMem(0x7675, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8d60);
        EXPECT(gbc.pc(), 0x7676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 007F
        gbc.setState(0xe85b, 0x5e8c, 0x8e50, 0xf065, 0x9a97, 0x8fa6, 0x0, 0x1);
        gbc.writeMem(0xe85b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5e8c);
        EXPECT(gbc.pc(), 0xe85c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe85b), 0xa8);
        // A8 0080
        gbc.setState(0xd589, 0x6a78, 0x9020, 0x1835, 0xe5fd, 0xfe78, 0x0, 0x0);
        gbc.writeMem(0xd589, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6a78);
        EXPECT(gbc.pc(), 0xd58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd589), 0xa8);
        // A8 0081
        gbc.setState(0xacf4, 0xf037, 0x99c0, 0xc3d0, 0x763f, 0x58bf, 0x0, 0x0);
        gbc.writeMem(0xacf4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf037);
        EXPECT(gbc.pc(), 0xacf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf4), 0xa8);
        // A8 0082
        gbc.setState(0xbc28, 0x19ea, 0x8c0, 0x2dba, 0xbf1e, 0xeb94, 0x1, 0x1);
        gbc.writeMem(0xbc28, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x19ea);
        EXPECT(gbc.pc(), 0xbc29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc28), 0xa8);
        // A8 0083
        gbc.setState(0xae84, 0x71d1, 0xaf60, 0x4c0a, 0x28ba, 0x2240, 0x1, 0x1);
        gbc.writeMem(0xae84, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x71d1);
        EXPECT(gbc.pc(), 0xae85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae84), 0xa8);
        // A8 0084
        gbc.setState(0x9c36, 0x74a1, 0x9730, 0xce, 0xdd5b, 0x66f4, 0x0, 0x0);
        gbc.writeMem(0x9c36, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x74a1);
        EXPECT(gbc.pc(), 0x9c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c36), 0xa8);
        // A8 0085
        gbc.setState(0x4cd4, 0x5e4d, 0x7b60, 0xa2f8, 0xb6a0, 0xf624, 0x0, 0x1);
        gbc.writeMem(0x4cd4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5e4d);
        EXPECT(gbc.pc(), 0x4cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0086
        gbc.setState(0x3f44, 0xc1df, 0x7e10, 0x4d57, 0x58d9, 0x39c1, 0x0, 0x0);
        gbc.writeMem(0x3f44, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc1df);
        EXPECT(gbc.pc(), 0x3f45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0087
        gbc.setState(0x3bc5, 0x3c13, 0xc540, 0xc742, 0x1fc1, 0xe40d, 0x0, 0x0);
        gbc.writeMem(0x3bc5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3c13);
        EXPECT(gbc.pc(), 0x3bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0088
        gbc.setState(0xb79a, 0x4599, 0xa3e0, 0x3918, 0x2b71, 0x4846, 0x0, 0x1);
        gbc.writeMem(0xb79a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4599);
        EXPECT(gbc.pc(), 0xb79b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79a), 0xa8);
        // A8 0089
        gbc.setState(0xe166, 0x6a84, 0x6530, 0x87d4, 0x21be, 0xd9aa, 0x1, 0x0);
        gbc.writeMem(0xe166, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6a84);
        EXPECT(gbc.pc(), 0xe167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe166), 0xa8);
        // A8 008A
        gbc.setState(0x9bbc, 0x8380, 0x300, 0xa453, 0x5db5, 0x1e77, 0x0, 0x1);
        gbc.writeMem(0x9bbc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8380);
        EXPECT(gbc.pc(), 0x9bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbc), 0xa8);
        // A8 008B
        gbc.setState(0x3b94, 0x629d, 0x6210, 0x17ae, 0x465e, 0xe734, 0x1, 0x1);
        gbc.writeMem(0x3b94, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x629d);
        EXPECT(gbc.pc(), 0x3b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 008D
        gbc.setState(0x3567, 0xef0a, 0x7470, 0x4fd1, 0xb9b2, 0xe80b, 0x0, 0x0);
        gbc.writeMem(0x3567, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xef0a);
        EXPECT(gbc.pc(), 0x3568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 008E
        gbc.setState(0x1d65, 0x2971, 0x6fb0, 0x2437, 0xbb90, 0x88b2, 0x0, 0x1);
        gbc.writeMem(0x1d65, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2971);
        EXPECT(gbc.pc(), 0x1d66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 008F
        gbc.setState(0x14f0, 0xb3e3, 0xaf50, 0x6995, 0x9d41, 0xaca, 0x1, 0x1);
        gbc.writeMem(0x14f0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb3e3);
        EXPECT(gbc.pc(), 0x14f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0090
        gbc.setState(0x37f4, 0x14a6, 0x8670, 0x7f7e, 0xf547, 0xf7e4, 0x0, 0x1);
        gbc.writeMem(0x37f4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0x37f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0091
        gbc.setState(0x6717, 0xf820, 0xc320, 0xf6dd, 0x15a9, 0x9e18, 0x0, 0x1);
        gbc.writeMem(0x6717, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf820);
        EXPECT(gbc.pc(), 0x6718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0092
        gbc.setState(0xab3, 0xc5c8, 0xf3c0, 0xd8d5, 0xad9d, 0x7b36, 0x1, 0x0);
        gbc.writeMem(0xab3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc5c8);
        EXPECT(gbc.pc(), 0xab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0095
        gbc.setState(0x419c, 0x166b, 0xbd0, 0x7708, 0x6814, 0x693f, 0x1, 0x1);
        gbc.writeMem(0x419c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x166b);
        EXPECT(gbc.pc(), 0x419d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0096
        gbc.setState(0xc506, 0x8ed4, 0xe8d0, 0xd2f0, 0x1120, 0x71c3, 0x0, 0x1);
        gbc.writeMem(0xc506, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8ed4);
        EXPECT(gbc.pc(), 0xc507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc506), 0xa8);
        // A8 0097
        gbc.setState(0xb492, 0xd79d, 0x3350, 0xd956, 0x487c, 0x373f, 0x0, 0x1);
        gbc.writeMem(0xb492, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd79d);
        EXPECT(gbc.pc(), 0xb493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb492), 0xa8);
        // A8 0098
        gbc.setState(0x383d, 0xde8, 0x4e20, 0x4f95, 0xc506, 0x4883, 0x1, 0x1);
        gbc.writeMem(0x383d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xde8);
        EXPECT(gbc.pc(), 0x383e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 009A
        gbc.setState(0xc804, 0x5bb0, 0xc60, 0xac99, 0xaf5a, 0xd343, 0x0, 0x0);
        gbc.writeMem(0xc804, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5bb0);
        EXPECT(gbc.pc(), 0xc805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc804), 0xa8);
        // A8 009C
        gbc.setState(0x8f89, 0x4834, 0xa7c0, 0x7516, 0x78ff, 0xe3b4, 0x0, 0x0);
        gbc.writeMem(0x8f89, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4834);
        EXPECT(gbc.pc(), 0x8f8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f89), 0xa8);
        // A8 009D
        gbc.setState(0xab93, 0x27fd, 0xdc30, 0xddf6, 0x9f47, 0x1a69, 0x0, 0x1);
        gbc.writeMem(0xab93, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x27fd);
        EXPECT(gbc.pc(), 0xab94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab93), 0xa8);
        // A8 009E
        gbc.setState(0xc50f, 0x4d2b, 0x1710, 0x9cf, 0x8907, 0x258, 0x0, 0x1);
        gbc.writeMem(0xc50f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4d2b);
        EXPECT(gbc.pc(), 0xc510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50f), 0xa8);
        // A8 009F
        gbc.setState(0x32cc, 0x8f96, 0x7b20, 0xd0cb, 0x8d9, 0x6149, 0x0, 0x1);
        gbc.writeMem(0x32cc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8f96);
        EXPECT(gbc.pc(), 0x32cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00A0
        gbc.setState(0xaea1, 0x1df9, 0x9d50, 0xbb13, 0x764, 0x91ad, 0x0, 0x1);
        gbc.writeMem(0xaea1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1df9);
        EXPECT(gbc.pc(), 0xaea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea1), 0xa8);
        // A8 00A1
        gbc.setState(0xcd8f, 0x1f62, 0xf080, 0x7b3f, 0xd901, 0x2d3d, 0x1, 0x0);
        gbc.writeMem(0xcd8f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1f62);
        EXPECT(gbc.pc(), 0xcd90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd8f), 0xa8);
        // A8 00A2
        gbc.setState(0xe787, 0x7aba, 0x3090, 0x4004, 0xf884, 0xb774, 0x1, 0x0);
        gbc.writeMem(0xe787, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7aba);
        EXPECT(gbc.pc(), 0xe788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe787), 0xa8);
        // A8 00A3
        gbc.setState(0xe1cb, 0x26c5, 0x3140, 0x6620, 0xe8e1, 0xc6e4, 0x0, 0x0);
        gbc.writeMem(0xe1cb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x26c5);
        EXPECT(gbc.pc(), 0xe1cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1cb), 0xa8);
        // A8 00A4
        gbc.setState(0xafcf, 0x6693, 0xbea0, 0x6788, 0xd925, 0xee1a, 0x1, 0x0);
        gbc.writeMem(0xafcf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6693);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafcf), 0xa8);
        // A8 00A5
        gbc.setState(0x2247, 0x3036, 0x5220, 0xaa09, 0x4a8c, 0x8750, 0x0, 0x0);
        gbc.writeMem(0x2247, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x3036);
        EXPECT(gbc.pc(), 0x2248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00A6
        gbc.setState(0x28a3, 0xb557, 0x3a50, 0xfd99, 0xee03, 0xda4e, 0x0, 0x1);
        gbc.writeMem(0x28a3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb557);
        EXPECT(gbc.pc(), 0x28a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00A7
        gbc.setState(0x43f9, 0x6550, 0x67c0, 0xdff2, 0x1665, 0x5739, 0x1, 0x1);
        gbc.writeMem(0x43f9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6550);
        EXPECT(gbc.pc(), 0x43fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00A8
        gbc.setState(0x740c, 0x5f5b, 0x8ce0, 0x96bc, 0xc4b0, 0x9eda, 0x1, 0x0);
        gbc.writeMem(0x740c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5f5b);
        EXPECT(gbc.pc(), 0x740d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00A9
        gbc.setState(0x7f54, 0x350a, 0x8ed0, 0x982a, 0x9237, 0x44f9, 0x1, 0x0);
        gbc.writeMem(0x7f54, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x350a);
        EXPECT(gbc.pc(), 0x7f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00AB
        gbc.setState(0xc308, 0x6cd1, 0xb840, 0x49f5, 0x94bc, 0xd897, 0x0, 0x0);
        gbc.writeMem(0xc308, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6cd1);
        EXPECT(gbc.pc(), 0xc309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc308), 0xa8);
        // A8 00AC
        gbc.setState(0xef6f, 0xd3e7, 0xdb90, 0x8b65, 0x144, 0x2052, 0x1, 0x1);
        gbc.writeMem(0xef6f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd3e7);
        EXPECT(gbc.pc(), 0xef70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6f), 0xa8);
        // A8 00AD
        gbc.setState(0x2058, 0x8380, 0x4c70, 0x7c59, 0x3169, 0xbc3f, 0x0, 0x0);
        gbc.writeMem(0x2058, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8380);
        EXPECT(gbc.pc(), 0x2059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00AF
        gbc.setState(0xa456, 0x2c05, 0x17a0, 0x1f35, 0x2332, 0x9f8d, 0x0, 0x1);
        gbc.writeMem(0xa456, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2c05);
        EXPECT(gbc.pc(), 0xa457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa456), 0xa8);
        // A8 00B0
        gbc.setState(0x5d47, 0xe999, 0x8d20, 0x1571, 0xe7d0, 0x1072, 0x1, 0x1);
        gbc.writeMem(0x5d47, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe999);
        EXPECT(gbc.pc(), 0x5d48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B1
        gbc.setState(0x5d20, 0x1ae3, 0xcca0, 0xf1cf, 0x9f08, 0x5de9, 0x0, 0x0);
        gbc.writeMem(0x5d20, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1ae3);
        EXPECT(gbc.pc(), 0x5d21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B2
        gbc.setState(0x48ef, 0x6ef8, 0x7a40, 0x844c, 0x5cca, 0x3695, 0x1, 0x0);
        gbc.writeMem(0x48ef, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6ef8);
        EXPECT(gbc.pc(), 0x48f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B3
        gbc.setState(0x8af6, 0xa759, 0x960, 0xd55d, 0xf7e8, 0x54d5, 0x1, 0x1);
        gbc.writeMem(0x8af6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa759);
        EXPECT(gbc.pc(), 0x8af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af6), 0xa8);
        // A8 00B4
        gbc.setState(0x7577, 0xae6d, 0x7700, 0x35a0, 0x3629, 0x30cf, 0x0, 0x1);
        gbc.writeMem(0x7577, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xae6d);
        EXPECT(gbc.pc(), 0x7578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B5
        gbc.setState(0x6c9, 0xeae0, 0x3870, 0x6cd7, 0xc038, 0x6043, 0x1, 0x1);
        gbc.writeMem(0x6c9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xeae0);
        EXPECT(gbc.pc(), 0x6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B6
        gbc.setState(0x6940, 0x5c5a, 0xdd80, 0x6ba2, 0x151c, 0x97e6, 0x0, 0x1);
        gbc.writeMem(0x6940, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0x6941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B7
        gbc.setState(0x124, 0xe316, 0x32b0, 0xc10, 0x8aa6, 0xfc99, 0x1, 0x0);
        gbc.writeMem(0x124, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe316);
        EXPECT(gbc.pc(), 0x125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00B8
        gbc.setState(0xc4d8, 0x45ea, 0x8df0, 0x55c6, 0x6e43, 0x2245, 0x0, 0x0);
        gbc.writeMem(0xc4d8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x45ea);
        EXPECT(gbc.pc(), 0xc4d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d8), 0xa8);
        // A8 00B9
        gbc.setState(0xc432, 0x916, 0xf250, 0x26ad, 0xfaad, 0xa88, 0x0, 0x1);
        gbc.writeMem(0xc432, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x916);
        EXPECT(gbc.pc(), 0xc433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc432), 0xa8);
        // A8 00BA
        gbc.setState(0x3f20, 0xa815, 0xbdf0, 0xf717, 0x80de, 0xfdfa, 0x0, 0x0);
        gbc.writeMem(0x3f20, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa815);
        EXPECT(gbc.pc(), 0x3f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00BB
        gbc.setState(0x9c6, 0x3963, 0xdcb0, 0x8f3b, 0xb9ee, 0x64c3, 0x1, 0x0);
        gbc.writeMem(0x9c6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3963);
        EXPECT(gbc.pc(), 0x9c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00BC
        gbc.setState(0xb, 0x7dfb, 0x9380, 0xe85b, 0x9f63, 0x62e3, 0x0, 0x1);
        gbc.writeMem(0xb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7dfb);
        EXPECT(gbc.pc(), 0xc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00BD
        gbc.setState(0x8d49, 0x8e22, 0x1620, 0x7f4d, 0x71fa, 0xf0a2, 0x1, 0x0);
        gbc.writeMem(0x8d49, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8e22);
        EXPECT(gbc.pc(), 0x8d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d49), 0xa8);
        // A8 00BE
        gbc.setState(0xa24d, 0xed60, 0x3d10, 0x49ed, 0xc78c, 0x8a85, 0x0, 0x1);
        gbc.writeMem(0xa24d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xed60);
        EXPECT(gbc.pc(), 0xa24e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa24d), 0xa8);
        // A8 00BF
        gbc.setState(0x6609, 0x686f, 0x6380, 0x346, 0xbb28, 0x5947, 0x0, 0x0);
        gbc.writeMem(0x6609, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x686f);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00C0
        gbc.setState(0x711d, 0xa1c6, 0x7830, 0x5052, 0x9532, 0x3b6f, 0x0, 0x1);
        gbc.writeMem(0x711d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0x711e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00C1
        gbc.setState(0xa417, 0x6c5f, 0xa340, 0x3f80, 0xcbc4, 0x73ff, 0x0, 0x1);
        gbc.writeMem(0xa417, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6c5f);
        EXPECT(gbc.pc(), 0xa418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa417), 0xa8);
        // A8 00C2
        gbc.setState(0x813e, 0xe36f, 0x5490, 0xa4ce, 0xbb9c, 0x8456, 0x1, 0x0);
        gbc.writeMem(0x813e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe36f);
        EXPECT(gbc.pc(), 0x813f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x813e), 0xa8);
        // A8 00C3
        gbc.setState(0x1b3a, 0x6b1d, 0x1890, 0x2f3d, 0xea2f, 0x30c0, 0x1, 0x0);
        gbc.writeMem(0x1b3a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6b1d);
        EXPECT(gbc.pc(), 0x1b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00C4
        gbc.setState(0x7e81, 0xd613, 0xaa70, 0x8764, 0x2f58, 0x5c1d, 0x1, 0x1);
        gbc.writeMem(0x7e81, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd613);
        EXPECT(gbc.pc(), 0x7e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00C5
        gbc.setState(0xcce5, 0xbc9f, 0x9d90, 0x2fc0, 0x4b41, 0x9aa0, 0x0, 0x0);
        gbc.writeMem(0xcce5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xbc9f);
        EXPECT(gbc.pc(), 0xcce6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce5), 0xa8);
        // A8 00C6
        gbc.setState(0xac4a, 0x3935, 0x4500, 0xf8b9, 0x29cb, 0x7df8, 0x0, 0x1);
        gbc.writeMem(0xac4a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3935);
        EXPECT(gbc.pc(), 0xac4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4a), 0xa8);
        // A8 00C7
        gbc.setState(0xc11d, 0x2293, 0x8750, 0x2799, 0x8206, 0xfc91, 0x1, 0x1);
        gbc.writeMem(0xc11d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2293);
        EXPECT(gbc.pc(), 0xc11e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11d), 0xa8);
        // A8 00C8
        gbc.setState(0x4be7, 0xbcaa, 0xd9c0, 0x6abb, 0xd73c, 0xc9d4, 0x0, 0x0);
        gbc.writeMem(0x4be7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbcaa);
        EXPECT(gbc.pc(), 0x4be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00C9
        gbc.setState(0x479c, 0xe211, 0xe650, 0xb99, 0x565b, 0xa3d, 0x1, 0x1);
        gbc.writeMem(0x479c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe211);
        EXPECT(gbc.pc(), 0x479d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00CA
        gbc.setState(0x44e8, 0xf3bc, 0xa9c0, 0xa172, 0x7742, 0xc787, 0x1, 0x0);
        gbc.writeMem(0x44e8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf3bc);
        EXPECT(gbc.pc(), 0x44e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00CB
        gbc.setState(0x9d1f, 0x5493, 0xd120, 0xddf1, 0xd5cd, 0x4371, 0x0, 0x1);
        gbc.writeMem(0x9d1f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5493);
        EXPECT(gbc.pc(), 0x9d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1f), 0xa8);
        // A8 00CC
        gbc.setState(0x4d75, 0x11db, 0xe510, 0xd87b, 0xad62, 0x4b0, 0x1, 0x0);
        gbc.writeMem(0x4d75, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x11db);
        EXPECT(gbc.pc(), 0x4d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00CD
        gbc.setState(0x14ab, 0x8663, 0xd3e0, 0x301a, 0x8527, 0x57ed, 0x1, 0x1);
        gbc.writeMem(0x14ab, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8663);
        EXPECT(gbc.pc(), 0x14ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00CE
        gbc.setState(0x5bbe, 0xe416, 0x1e10, 0xf197, 0x7827, 0xa712, 0x1, 0x1);
        gbc.writeMem(0x5bbe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe416);
        EXPECT(gbc.pc(), 0x5bbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00CF
        gbc.setState(0x252c, 0xbce8, 0x58a0, 0xea57, 0xf144, 0x444f, 0x0, 0x0);
        gbc.writeMem(0x252c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbce8);
        EXPECT(gbc.pc(), 0x252d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00D1
        gbc.setState(0xde2a, 0xfba, 0xa4f0, 0x931f, 0xa19, 0x59c1, 0x1, 0x1);
        gbc.writeMem(0xde2a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xfba);
        EXPECT(gbc.pc(), 0xde2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde2a), 0xa8);
        // A8 00D2
        gbc.setState(0x919, 0x31d4, 0x5ac0, 0x431d, 0xb00, 0xd7d3, 0x1, 0x1);
        gbc.writeMem(0x919, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x31d4);
        EXPECT(gbc.pc(), 0x91a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00D3
        gbc.setState(0x741, 0xb87f, 0x6540, 0x98eb, 0x4878, 0xedd4, 0x1, 0x0);
        gbc.writeMem(0x741, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb87f);
        EXPECT(gbc.pc(), 0x742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00D4
        gbc.setState(0xd806, 0x2ca0, 0x8c40, 0x1a0e, 0x55ac, 0xf373, 0x0, 0x1);
        gbc.writeMem(0xd806, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2ca0);
        EXPECT(gbc.pc(), 0xd807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd806), 0xa8);
        // A8 00D5
        gbc.setState(0x96a6, 0xfb2a, 0x9d50, 0x230, 0x2673, 0x4672, 0x0, 0x0);
        gbc.writeMem(0x96a6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xfb2a);
        EXPECT(gbc.pc(), 0x96a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a6), 0xa8);
        // A8 00D6
        gbc.setState(0x1b7d, 0x16fa, 0xdf00, 0xc812, 0xe4da, 0x4477, 0x1, 0x0);
        gbc.writeMem(0x1b7d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x16fa);
        EXPECT(gbc.pc(), 0x1b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00D7
        gbc.setState(0xad53, 0x6df0, 0x5ab0, 0xa639, 0x6bf3, 0x47cc, 0x1, 0x0);
        gbc.writeMem(0xad53, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6df0);
        EXPECT(gbc.pc(), 0xad54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad53), 0xa8);
        // A8 00D8
        gbc.setState(0x794f, 0x9321, 0x56e0, 0x4427, 0x6e0b, 0xd40d, 0x1, 0x0);
        gbc.writeMem(0x794f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9321);
        EXPECT(gbc.pc(), 0x7950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00D9
        gbc.setState(0xce19, 0x9998, 0x9ae0, 0xa2a, 0x167e, 0x7323, 0x0, 0x1);
        gbc.writeMem(0xce19, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9998);
        EXPECT(gbc.pc(), 0xce1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce19), 0xa8);
        // A8 00DA
        gbc.setState(0xcd82, 0x4a76, 0xa2a0, 0x8262, 0xb68e, 0xa455, 0x1, 0x1);
        gbc.writeMem(0xcd82, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4a76);
        EXPECT(gbc.pc(), 0xcd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd82), 0xa8);
        // A8 00DB
        gbc.setState(0x1184, 0x605b, 0xd320, 0xeabb, 0xf2c, 0x724d, 0x0, 0x1);
        gbc.writeMem(0x1184, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x605b);
        EXPECT(gbc.pc(), 0x1185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00DC
        gbc.setState(0x2f98, 0xcf1, 0x8460, 0x5bf5, 0x3626, 0xbc26, 0x0, 0x0);
        gbc.writeMem(0x2f98, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcf1);
        EXPECT(gbc.pc(), 0x2f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00DD
        gbc.setState(0x6448, 0x7920, 0x9fa0, 0x551b, 0x1b9, 0x3894, 0x1, 0x1);
        gbc.writeMem(0x6448, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7920);
        EXPECT(gbc.pc(), 0x6449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00DF
        gbc.setState(0x76e0, 0xd1d0, 0x9a60, 0x4042, 0x2b3a, 0x57b6, 0x0, 0x1);
        gbc.writeMem(0x76e0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd1d0);
        EXPECT(gbc.pc(), 0x76e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00E0
        gbc.setState(0xa5ae, 0xea32, 0x7550, 0x950, 0xb102, 0x807c, 0x0, 0x1);
        gbc.writeMem(0xa5ae, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xea32);
        EXPECT(gbc.pc(), 0xa5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ae), 0xa8);
        // A8 00E1
        gbc.setState(0x612, 0xe835, 0xeac0, 0xa316, 0x3cb6, 0x9b5f, 0x1, 0x1);
        gbc.writeMem(0x612, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe835);
        EXPECT(gbc.pc(), 0x613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00E2
        gbc.setState(0xc4ab, 0x5694, 0x18b0, 0x9e83, 0xb34e, 0x13fd, 0x0, 0x1);
        gbc.writeMem(0xc4ab, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5694);
        EXPECT(gbc.pc(), 0xc4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ab), 0xa8);
        // A8 00E3
        gbc.setState(0xbee1, 0x2fd2, 0x3000, 0x77, 0x34f8, 0xb6a5, 0x0, 0x0);
        gbc.writeMem(0xbee1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2fd2);
        EXPECT(gbc.pc(), 0xbee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee1), 0xa8);
        // A8 00E4
        gbc.setState(0xe361, 0x5c9e, 0x64c0, 0x5b65, 0xd200, 0x385d, 0x0, 0x1);
        gbc.writeMem(0xe361, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5c9e);
        EXPECT(gbc.pc(), 0xe362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe361), 0xa8);
        // A8 00E5
        gbc.setState(0x56fd, 0x4073, 0xf8a0, 0xcb19, 0x4dc1, 0xb807, 0x1, 0x0);
        gbc.writeMem(0x56fd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4073);
        EXPECT(gbc.pc(), 0x56fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00E7
        gbc.setState(0x9fec, 0x2ff2, 0x8b70, 0x3d35, 0x2569, 0xa65c, 0x1, 0x1);
        gbc.writeMem(0x9fec, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2ff2);
        EXPECT(gbc.pc(), 0x9fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fec), 0xa8);
        // A8 00E8
        gbc.setState(0x3324, 0x9d8a, 0xd250, 0x498e, 0x6e20, 0xb3a9, 0x0, 0x0);
        gbc.writeMem(0x3324, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9d8a);
        EXPECT(gbc.pc(), 0x3325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00E9
        gbc.setState(0x8f58, 0xb54d, 0xea90, 0x8d8a, 0x3576, 0x1a99, 0x0, 0x1);
        gbc.writeMem(0x8f58, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb54d);
        EXPECT(gbc.pc(), 0x8f59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f58), 0xa8);
        // A8 00EA
        gbc.setState(0xd1a7, 0xe64f, 0xa620, 0x5d1a, 0xd8dc, 0xdb58, 0x0, 0x1);
        gbc.writeMem(0xd1a7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe64f);
        EXPECT(gbc.pc(), 0xd1a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a7), 0xa8);
        // A8 00EB
        gbc.setState(0x4049, 0x84fe, 0x9190, 0xc7e, 0xd6f6, 0x7151, 0x0, 0x1);
        gbc.writeMem(0x4049, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x84fe);
        EXPECT(gbc.pc(), 0x404a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00EC
        gbc.setState(0x751e, 0x6832, 0xcbf0, 0x4ec0, 0x9db3, 0xadd9, 0x0, 0x1);
        gbc.writeMem(0x751e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6832);
        EXPECT(gbc.pc(), 0x751f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00ED
        gbc.setState(0xc707, 0xe1b9, 0x1ac0, 0x20ea, 0x55c8, 0xc840, 0x0, 0x1);
        gbc.writeMem(0xc707, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe1b9);
        EXPECT(gbc.pc(), 0xc708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc707), 0xa8);
        // A8 00EF
        gbc.setState(0x4fa, 0x6fb1, 0xf240, 0x612d, 0xfdb4, 0x67cc, 0x0, 0x1);
        gbc.writeMem(0x4fa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6fb1);
        EXPECT(gbc.pc(), 0x4fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00F0
        gbc.setState(0x4fdf, 0xd57c, 0x4fe0, 0xf01a, 0xc076, 0x7bd8, 0x0, 0x0);
        gbc.writeMem(0x4fdf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd57c);
        EXPECT(gbc.pc(), 0x4fe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00F1
        gbc.setState(0xe2c1, 0x3ea5, 0x60f0, 0x8817, 0x398c, 0xe1f, 0x0, 0x1);
        gbc.writeMem(0xe2c1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3ea5);
        EXPECT(gbc.pc(), 0xe2c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c1), 0xa8);
        // A8 00F2
        gbc.setState(0x2810, 0xdcac, 0xf0d0, 0xf642, 0xb6af, 0xbb12, 0x1, 0x1);
        gbc.writeMem(0x2810, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdcac);
        EXPECT(gbc.pc(), 0x2811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00F3
        gbc.setState(0x865c, 0x7b1a, 0xf920, 0xb5d1, 0x48a7, 0x34ff, 0x1, 0x1);
        gbc.writeMem(0x865c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7b1a);
        EXPECT(gbc.pc(), 0x865d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865c), 0xa8);
        // A8 00F4
        gbc.setState(0x423f, 0xa2cf, 0x8000, 0xdd3, 0x6447, 0x743f, 0x1, 0x0);
        gbc.writeMem(0x423f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa2cf);
        EXPECT(gbc.pc(), 0x4240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00F5
        gbc.setState(0xa107, 0x7ca8, 0xe50, 0x7b66, 0xe0b8, 0x38e1, 0x0, 0x1);
        gbc.writeMem(0xa107, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7ca8);
        EXPECT(gbc.pc(), 0xa108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa107), 0xa8);
        // A8 00F6
        gbc.setState(0xe1b0, 0x13ba, 0x3750, 0xa15c, 0xc22a, 0xdfc7, 0x1, 0x1);
        gbc.writeMem(0xe1b0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x13ba);
        EXPECT(gbc.pc(), 0xe1b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b0), 0xa8);
        // A8 00F7
        gbc.setState(0xee63, 0xe3f1, 0x9330, 0x2953, 0x71a1, 0x64c, 0x0, 0x0);
        gbc.writeMem(0xee63, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe3f1);
        EXPECT(gbc.pc(), 0xee64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee63), 0xa8);
        // A8 00F8
        gbc.setState(0xe352, 0x1747, 0x9db0, 0x86af, 0x1960, 0xc58e, 0x1, 0x0);
        gbc.writeMem(0xe352, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1747);
        EXPECT(gbc.pc(), 0xe353);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe352), 0xa8);
        // A8 00F9
        gbc.setState(0x6826, 0xfe5c, 0x7ba0, 0x200d, 0x873e, 0x3ed9, 0x1, 0x0);
        gbc.writeMem(0x6826, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfe5c);
        EXPECT(gbc.pc(), 0x6827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00FA
        gbc.setState(0xa2bb, 0xe77c, 0x6fe0, 0x5250, 0xa619, 0x8fc0, 0x1, 0x1);
        gbc.writeMem(0xa2bb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe77c);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bb), 0xa8);
        // A8 00FC
        gbc.setState(0x43ae, 0x8b49, 0x9d20, 0xcc36, 0x13ac, 0x5ea6, 0x0, 0x1);
        gbc.writeMem(0x43ae, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8b49);
        EXPECT(gbc.pc(), 0x43af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00FD
        gbc.setState(0x416d, 0xdf47, 0x4970, 0x9006, 0x88ce, 0x9331, 0x0, 0x0);
        gbc.writeMem(0x416d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdf47);
        EXPECT(gbc.pc(), 0x416e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 00FE
        gbc.setState(0xc0d9, 0x6f33, 0x26f0, 0x70cf, 0x9135, 0x1c03, 0x1, 0x1);
        gbc.writeMem(0xc0d9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6f33);
        EXPECT(gbc.pc(), 0xc0da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d9), 0xa8);
        // A8 00FF
        gbc.setState(0xa9fd, 0x839b, 0x1750, 0xdfe2, 0x3881, 0x3, 0x0, 0x0);
        gbc.writeMem(0xa9fd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x839b);
        EXPECT(gbc.pc(), 0xa9fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fd), 0xa8);
        // A8 0100
        gbc.setState(0x9bc1, 0xbde6, 0x5f10, 0xb0f6, 0x1996, 0x4ec9, 0x0, 0x0);
        gbc.writeMem(0x9bc1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbde6);
        EXPECT(gbc.pc(), 0x9bc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc1), 0xa8);
        // A8 0101
        gbc.setState(0x330d, 0x1032, 0x4970, 0xd8d4, 0x3be2, 0x371b, 0x0, 0x1);
        gbc.writeMem(0x330d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1032);
        EXPECT(gbc.pc(), 0x330e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0102
        gbc.setState(0x55dd, 0x6afc, 0x4dc0, 0x644d, 0xc78f, 0x4976, 0x0, 0x1);
        gbc.writeMem(0x55dd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6afc);
        EXPECT(gbc.pc(), 0x55de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0103
        gbc.setState(0xe6c, 0xfbbb, 0xc9c0, 0xb31c, 0x3bc1, 0x925a, 0x0, 0x0);
        gbc.writeMem(0xe6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfbbb);
        EXPECT(gbc.pc(), 0xe6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0104
        gbc.setState(0x4fd9, 0x2303, 0x1860, 0x4664, 0xd5, 0xdb49, 0x0, 0x1);
        gbc.writeMem(0x4fd9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2303);
        EXPECT(gbc.pc(), 0x4fda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0105
        gbc.setState(0x8d95, 0x66ee, 0x1340, 0xd57b, 0xee64, 0xffa2, 0x0, 0x0);
        gbc.writeMem(0x8d95, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x66ee);
        EXPECT(gbc.pc(), 0x8d96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d95), 0xa8);
        // A8 0106
        gbc.setState(0x37c9, 0xbcee, 0x94e0, 0xe010, 0x3c65, 0xcb92, 0x1, 0x0);
        gbc.writeMem(0x37c9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbcee);
        EXPECT(gbc.pc(), 0x37ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0108
        gbc.setState(0x3654, 0xbe66, 0x8820, 0xa06c, 0x1aa3, 0x2fbb, 0x0, 0x1);
        gbc.writeMem(0x3654, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbe66);
        EXPECT(gbc.pc(), 0x3655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0109
        gbc.setState(0x599c, 0xf606, 0x23f0, 0xde62, 0x3b3e, 0x6f31, 0x0, 0x1);
        gbc.writeMem(0x599c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf606);
        EXPECT(gbc.pc(), 0x599d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 010A
        gbc.setState(0x8670, 0x69f6, 0xf560, 0xb273, 0x571e, 0x2ed5, 0x0, 0x0);
        gbc.writeMem(0x8670, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x69f6);
        EXPECT(gbc.pc(), 0x8671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8670), 0xa8);
        // A8 010B
        gbc.setState(0x3ae9, 0x4add, 0x7450, 0xf21, 0x3629, 0x158a, 0x1, 0x1);
        gbc.writeMem(0x3ae9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4add);
        EXPECT(gbc.pc(), 0x3aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 010C
        gbc.setState(0xdecd, 0x6640, 0xe060, 0xc00, 0x7d04, 0x1530, 0x0, 0x0);
        gbc.writeMem(0xdecd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6640);
        EXPECT(gbc.pc(), 0xdece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdecd), 0xa8);
        // A8 010D
        gbc.setState(0xd38e, 0xe6ab, 0x9dc0, 0x2cee, 0xed6e, 0x1fcb, 0x0, 0x1);
        gbc.writeMem(0xd38e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe6ab);
        EXPECT(gbc.pc(), 0xd38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38e), 0xa8);
        // A8 010E
        gbc.setState(0x8db2, 0x141f, 0xb4c0, 0xe3ec, 0x795a, 0x75d9, 0x1, 0x0);
        gbc.writeMem(0x8db2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x141f);
        EXPECT(gbc.pc(), 0x8db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db2), 0xa8);
        // A8 010F
        gbc.setState(0xe048, 0x61f8, 0xdce0, 0x4cf5, 0x7bd6, 0xd4ab, 0x0, 0x1);
        gbc.writeMem(0xe048, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x61f8);
        EXPECT(gbc.pc(), 0xe049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe048), 0xa8);
        // A8 0110
        gbc.setState(0x5b, 0x6493, 0x8fa0, 0xd6e0, 0x7130, 0x41d3, 0x0, 0x0);
        gbc.writeMem(0x5b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6493);
        EXPECT(gbc.pc(), 0x5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0111
        gbc.setState(0x36a2, 0x7ea8, 0xe110, 0x342d, 0x4166, 0x9aee, 0x1, 0x1);
        gbc.writeMem(0x36a2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7ea8);
        EXPECT(gbc.pc(), 0x36a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0112
        gbc.setState(0x4235, 0x55c8, 0xeca0, 0x9d94, 0x663b, 0x258, 0x0, 0x0);
        gbc.writeMem(0x4235, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x55c8);
        EXPECT(gbc.pc(), 0x4236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0113
        gbc.setState(0x3a75, 0x3444, 0x50, 0x3ad1, 0x5d7e, 0xf8d8, 0x0, 0x0);
        gbc.writeMem(0x3a75, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3444);
        EXPECT(gbc.pc(), 0x3a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0114
        gbc.setState(0x8b75, 0x5a9f, 0x96c0, 0x2069, 0x2594, 0x9ce0, 0x1, 0x1);
        gbc.writeMem(0x8b75, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5a9f);
        EXPECT(gbc.pc(), 0x8b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b75), 0xa8);
        // A8 0115
        gbc.setState(0xc26, 0x15d5, 0x6580, 0x17f, 0xb720, 0x5b8a, 0x0, 0x1);
        gbc.writeMem(0xc26, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x15d5);
        EXPECT(gbc.pc(), 0xc27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0116
        gbc.setState(0x63bb, 0x1beb, 0x4610, 0xa419, 0xb211, 0xcfd5, 0x1, 0x1);
        gbc.writeMem(0x63bb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1beb);
        EXPECT(gbc.pc(), 0x63bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0117
        gbc.setState(0xd9cf, 0xb0b2, 0x43e0, 0xb8ab, 0x3f32, 0xae31, 0x1, 0x0);
        gbc.writeMem(0xd9cf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb0b2);
        EXPECT(gbc.pc(), 0xd9d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9cf), 0xa8);
        // A8 0118
        gbc.setState(0x60f9, 0x2862, 0x4890, 0xe01, 0x3fa0, 0x67d, 0x1, 0x0);
        gbc.writeMem(0x60f9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2862);
        EXPECT(gbc.pc(), 0x60fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0119
        gbc.setState(0x27eb, 0x2ecc, 0x18f0, 0xfe04, 0x37d, 0xca4e, 0x0, 0x1);
        gbc.writeMem(0x27eb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2ecc);
        EXPECT(gbc.pc(), 0x27ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 011A
        gbc.setState(0xda1f, 0x2821, 0x8e60, 0xc476, 0x1a58, 0xbc0a, 0x1, 0x0);
        gbc.writeMem(0xda1f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2821);
        EXPECT(gbc.pc(), 0xda20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda1f), 0xa8);
        // A8 011B
        gbc.setState(0x8c5c, 0xc711, 0x5f80, 0x9ea7, 0x7960, 0x3ee7, 0x1, 0x1);
        gbc.writeMem(0x8c5c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc711);
        EXPECT(gbc.pc(), 0x8c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c5c), 0xa8);
        // A8 011C
        gbc.setState(0x9921, 0x2ea9, 0xadb0, 0x64bb, 0x2dcf, 0x7896, 0x0, 0x1);
        gbc.writeMem(0x9921, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2ea9);
        EXPECT(gbc.pc(), 0x9922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9921), 0xa8);
        // A8 011D
        gbc.setState(0x2c36, 0x95dc, 0xfc40, 0xfc2, 0xfde8, 0xf0fd, 0x0, 0x0);
        gbc.writeMem(0x2c36, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x95dc);
        EXPECT(gbc.pc(), 0x2c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 011E
        gbc.setState(0x15cd, 0x358f, 0x6d90, 0x393e, 0x3edd, 0x4136, 0x0, 0x0);
        gbc.writeMem(0x15cd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x358f);
        EXPECT(gbc.pc(), 0x15ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 011F
        gbc.setState(0x32fe, 0x125f, 0xb0e0, 0xac62, 0x350e, 0xa9f0, 0x1, 0x0);
        gbc.writeMem(0x32fe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x125f);
        EXPECT(gbc.pc(), 0x32ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0120
        gbc.setState(0x2f29, 0x2f9d, 0xa320, 0x5474, 0x4b27, 0xca0, 0x0, 0x0);
        gbc.writeMem(0x2f29, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2f9d);
        EXPECT(gbc.pc(), 0x2f2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0122
        gbc.setState(0x836b, 0x31ed, 0xe980, 0x19c4, 0xe57f, 0x6077, 0x1, 0x1);
        gbc.writeMem(0x836b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x31ed);
        EXPECT(gbc.pc(), 0x836c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x836b), 0xa8);
        // A8 0123
        gbc.setState(0xc812, 0xd429, 0x6950, 0x5fa8, 0xe66e, 0x39ab, 0x0, 0x1);
        gbc.writeMem(0xc812, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd429);
        EXPECT(gbc.pc(), 0xc813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc812), 0xa8);
        // A8 0124
        gbc.setState(0x2c1, 0xcdb, 0x9bb0, 0x41c8, 0x39d4, 0xb2a1, 0x0, 0x1);
        gbc.writeMem(0x2c1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xcdb);
        EXPECT(gbc.pc(), 0x2c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0125
        gbc.setState(0xe311, 0x65ad, 0x7bb0, 0xea1, 0x3b5c, 0x191d, 0x0, 0x1);
        gbc.writeMem(0xe311, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x65ad);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe311), 0xa8);
        // A8 0126
        gbc.setState(0xd170, 0x31af, 0xa200, 0xc7e1, 0x94c8, 0x1733, 0x0, 0x0);
        gbc.writeMem(0xd170, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x31af);
        EXPECT(gbc.pc(), 0xd171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd170), 0xa8);
        // A8 0127
        gbc.setState(0x12c4, 0xe56e, 0x7c50, 0x425e, 0x8058, 0x2ed7, 0x1, 0x0);
        gbc.writeMem(0x12c4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe56e);
        EXPECT(gbc.pc(), 0x12c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0128
        gbc.setState(0x6c84, 0x7009, 0x6400, 0x5def, 0xfe82, 0xe97b, 0x1, 0x0);
        gbc.writeMem(0x6c84, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7009);
        EXPECT(gbc.pc(), 0x6c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0129
        gbc.setState(0xdeb4, 0x89db, 0x8640, 0xea82, 0x92a3, 0xa33d, 0x0, 0x0);
        gbc.writeMem(0xdeb4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x89db);
        EXPECT(gbc.pc(), 0xdeb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb4), 0xa8);
        // A8 012A
        gbc.setState(0x1095, 0x6aac, 0x5d90, 0xcb56, 0xaaf7, 0xd1c, 0x0, 0x0);
        gbc.writeMem(0x1095, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6aac);
        EXPECT(gbc.pc(), 0x1096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 012B
        gbc.setState(0xc59, 0x5ad0, 0x1290, 0x42, 0x5174, 0xc0bc, 0x0, 0x1);
        gbc.writeMem(0xc59, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5ad0);
        EXPECT(gbc.pc(), 0xc5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 012C
        gbc.setState(0x2bb8, 0xedcc, 0x2070, 0x2450, 0x6f1, 0x7aaf, 0x1, 0x1);
        gbc.writeMem(0x2bb8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xedcc);
        EXPECT(gbc.pc(), 0x2bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 012D
        gbc.setState(0xc1c9, 0x3031, 0x5820, 0x99dd, 0x9c24, 0x597c, 0x0, 0x1);
        gbc.writeMem(0xc1c9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3031);
        EXPECT(gbc.pc(), 0xc1ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c9), 0xa8);
        // A8 012E
        gbc.setState(0xd991, 0x811e, 0xb6e0, 0xe696, 0x8bc0, 0xc577, 0x0, 0x0);
        gbc.writeMem(0xd991, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x811e);
        EXPECT(gbc.pc(), 0xd992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd991), 0xa8);
        // A8 012F
        gbc.setState(0xadce, 0xc0ac, 0xa8b0, 0x61cf, 0x4646, 0x5629, 0x0, 0x1);
        gbc.writeMem(0xadce, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc0ac);
        EXPECT(gbc.pc(), 0xadcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadce), 0xa8);
        // A8 0131
        gbc.setState(0xa2c5, 0x68b4, 0x83f0, 0xefe0, 0x8398, 0x682c, 0x1, 0x1);
        gbc.writeMem(0xa2c5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x68b4);
        EXPECT(gbc.pc(), 0xa2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c5), 0xa8);
        // A8 0132
        gbc.setState(0x6f71, 0x5c3d, 0xdad0, 0x95ef, 0x179b, 0x2431, 0x1, 0x1);
        gbc.writeMem(0x6f71, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5c3d);
        EXPECT(gbc.pc(), 0x6f72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0133
        gbc.setState(0x95a, 0x1464, 0xf4f0, 0x9608, 0x4550, 0x8231, 0x1, 0x0);
        gbc.writeMem(0x95a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1464);
        EXPECT(gbc.pc(), 0x95b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0134
        gbc.setState(0xc979, 0x3f28, 0x3020, 0xfa55, 0xa3ed, 0xdac6, 0x0, 0x0);
        gbc.writeMem(0xc979, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3f28);
        EXPECT(gbc.pc(), 0xc97a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc979), 0xa8);
        // A8 0135
        gbc.setState(0x3645, 0xa085, 0xc9f0, 0xfee4, 0xf23d, 0xa49e, 0x0, 0x0);
        gbc.writeMem(0x3645, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa085);
        EXPECT(gbc.pc(), 0x3646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0136
        gbc.setState(0x905f, 0x6c3, 0xe8e0, 0x4467, 0xc302, 0x2aed, 0x0, 0x0);
        gbc.writeMem(0x905f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6c3);
        EXPECT(gbc.pc(), 0x9060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x905f), 0xa8);
        // A8 0137
        gbc.setState(0xb630, 0xa0c, 0x54b0, 0x5dd5, 0xd3b4, 0x48a0, 0x1, 0x1);
        gbc.writeMem(0xb630, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa0c);
        EXPECT(gbc.pc(), 0xb631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb630), 0xa8);
        // A8 0138
        gbc.setState(0x7883, 0xc3d4, 0x8eb0, 0xf67e, 0xf025, 0xb720, 0x0, 0x0);
        gbc.writeMem(0x7883, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc3d4);
        EXPECT(gbc.pc(), 0x7884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0139
        gbc.setState(0xaf6e, 0x977e, 0x2ee0, 0xb04b, 0xd5d6, 0x22ac, 0x0, 0x0);
        gbc.writeMem(0xaf6e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x977e);
        EXPECT(gbc.pc(), 0xaf6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6e), 0xa8);
        // A8 013A
        gbc.setState(0xbc2f, 0x6325, 0xe0d0, 0x9011, 0x8090, 0xe410, 0x1, 0x1);
        gbc.writeMem(0xbc2f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6325);
        EXPECT(gbc.pc(), 0xbc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2f), 0xa8);
        // A8 013B
        gbc.setState(0xbc05, 0xc05f, 0x9e50, 0x5f87, 0x8beb, 0xc735, 0x1, 0x1);
        gbc.writeMem(0xbc05, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc05f);
        EXPECT(gbc.pc(), 0xbc06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc05), 0xa8);
        // A8 013C
        gbc.setState(0x1c6, 0x8e1a, 0x14a0, 0xa080, 0xbda7, 0x66ea, 0x0, 0x0);
        gbc.writeMem(0x1c6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8e1a);
        EXPECT(gbc.pc(), 0x1c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 013E
        gbc.setState(0x9f27, 0x1003, 0x15b0, 0xde02, 0x4216, 0x54ad, 0x0, 0x1);
        gbc.writeMem(0x9f27, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1003);
        EXPECT(gbc.pc(), 0x9f28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f27), 0xa8);
        // A8 013F
        gbc.setState(0x6d91, 0x7b9e, 0x3730, 0xc610, 0x7524, 0xb3a2, 0x0, 0x0);
        gbc.writeMem(0x6d91, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7b9e);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0140
        gbc.setState(0x6afc, 0xf9af, 0x8240, 0xb8d, 0x18ca, 0xe6aa, 0x1, 0x0);
        gbc.writeMem(0x6afc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf9af);
        EXPECT(gbc.pc(), 0x6afd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0141
        gbc.setState(0xb7a, 0x5459, 0xa900, 0x2884, 0x843e, 0xe0a4, 0x1, 0x0);
        gbc.writeMem(0xb7a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5459);
        EXPECT(gbc.pc(), 0xb7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0142
        gbc.setState(0xef1, 0x4e6b, 0xf240, 0x70bf, 0x9bc1, 0xd4a8, 0x1, 0x0);
        gbc.writeMem(0xef1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4e6b);
        EXPECT(gbc.pc(), 0xef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0143
        gbc.setState(0x2998, 0xd38e, 0x13c0, 0x5c62, 0xfe12, 0x55a6, 0x0, 0x0);
        gbc.writeMem(0x2998, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd38e);
        EXPECT(gbc.pc(), 0x2999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0144
        gbc.setState(0x7ed, 0x66c4, 0x9bf0, 0x1699, 0x558c, 0x4860, 0x0, 0x1);
        gbc.writeMem(0x7ed, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x66c4);
        EXPECT(gbc.pc(), 0x7ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0145
        gbc.setState(0x74fe, 0xcbd7, 0xcee0, 0x582f, 0x353, 0xa617, 0x1, 0x0);
        gbc.writeMem(0x74fe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xcbd7);
        EXPECT(gbc.pc(), 0x74ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0146
        gbc.setState(0xd1fb, 0x8a6d, 0x53c0, 0x33d4, 0x8ed3, 0x2824, 0x1, 0x0);
        gbc.writeMem(0xd1fb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8a6d);
        EXPECT(gbc.pc(), 0xd1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fb), 0xa8);
        // A8 0147
        gbc.setState(0x4d61, 0x8a6e, 0x8ad0, 0x5b93, 0xe88d, 0x4e64, 0x0, 0x1);
        gbc.writeMem(0x4d61, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8a6e);
        EXPECT(gbc.pc(), 0x4d62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0148
        gbc.setState(0xcc9d, 0xcab4, 0x3f70, 0xe1a5, 0xe7be, 0x91ae, 0x1, 0x1);
        gbc.writeMem(0xcc9d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcab4);
        EXPECT(gbc.pc(), 0xcc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc9d), 0xa8);
        // A8 0149
        gbc.setState(0xeb62, 0xf016, 0xef80, 0xe61b, 0x2ee3, 0xbf17, 0x0, 0x1);
        gbc.writeMem(0xeb62, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf016);
        EXPECT(gbc.pc(), 0xeb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb62), 0xa8);
        // A8 014B
        gbc.setState(0x50ef, 0x61f5, 0x4e10, 0xe24, 0x6f13, 0x5e20, 0x0, 0x1);
        gbc.writeMem(0x50ef, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x61f5);
        EXPECT(gbc.pc(), 0x50f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 014C
        gbc.setState(0x866e, 0x12fe, 0x87e0, 0xd670, 0x4171, 0x24c4, 0x1, 0x1);
        gbc.writeMem(0x866e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x12fe);
        EXPECT(gbc.pc(), 0x866f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866e), 0xa8);
        // A8 014D
        gbc.setState(0x61c0, 0x83c2, 0xdb0, 0x4736, 0x925a, 0x6bad, 0x1, 0x1);
        gbc.writeMem(0x61c0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x83c2);
        EXPECT(gbc.pc(), 0x61c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 014E
        gbc.setState(0x980c, 0x3553, 0xc310, 0x59a6, 0x16f5, 0x5b5b, 0x0, 0x1);
        gbc.writeMem(0x980c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3553);
        EXPECT(gbc.pc(), 0x980d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980c), 0xa8);
        // A8 014F
        gbc.setState(0x5983, 0x422d, 0xcb60, 0xee82, 0x83a1, 0x56a9, 0x0, 0x0);
        gbc.writeMem(0x5983, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x422d);
        EXPECT(gbc.pc(), 0x5984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0150
        gbc.setState(0xe2d0, 0xa78a, 0xc170, 0x1c06, 0xb81c, 0xe8c6, 0x1, 0x1);
        gbc.writeMem(0xe2d0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa78a);
        EXPECT(gbc.pc(), 0xe2d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d0), 0xa8);
        // A8 0151
        gbc.setState(0x4d86, 0x10f3, 0x9f50, 0x4c12, 0x82dd, 0xf812, 0x0, 0x1);
        gbc.writeMem(0x4d86, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x10f3);
        EXPECT(gbc.pc(), 0x4d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0152
        gbc.setState(0xdd26, 0x985b, 0x2100, 0xd006, 0xba4d, 0x6b0e, 0x0, 0x1);
        gbc.writeMem(0xdd26, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x985b);
        EXPECT(gbc.pc(), 0xdd27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd26), 0xa8);
        // A8 0153
        gbc.setState(0x1dd2, 0xc00e, 0x10a0, 0x1ca8, 0x40df, 0xee30, 0x1, 0x1);
        gbc.writeMem(0x1dd2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc00e);
        EXPECT(gbc.pc(), 0x1dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0154
        gbc.setState(0xe842, 0x6a33, 0x860, 0x6f80, 0xecff, 0xb88d, 0x1, 0x0);
        gbc.writeMem(0xe842, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6a33);
        EXPECT(gbc.pc(), 0xe843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe842), 0xa8);
        // A8 0155
        gbc.setState(0x3660, 0xeaa4, 0x4790, 0xf54a, 0x366a, 0x5440, 0x1, 0x1);
        gbc.writeMem(0x3660, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xeaa4);
        EXPECT(gbc.pc(), 0x3661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0156
        gbc.setState(0x25a, 0x2105, 0x64d0, 0xd01e, 0x744f, 0xd61e, 0x0, 0x1);
        gbc.writeMem(0x25a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2105);
        EXPECT(gbc.pc(), 0x25b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0157
        gbc.setState(0x407b, 0xc915, 0x4500, 0x45d6, 0x6b83, 0xe824, 0x0, 0x0);
        gbc.writeMem(0x407b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc915);
        EXPECT(gbc.pc(), 0x407c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0158
        gbc.setState(0x40fc, 0xe89a, 0x3410, 0xb9b3, 0x968a, 0x867c, 0x0, 0x0);
        gbc.writeMem(0x40fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe89a);
        EXPECT(gbc.pc(), 0x40fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 015A
        gbc.setState(0xd949, 0x2720, 0x3070, 0x3801, 0xa2b5, 0x5a44, 0x0, 0x0);
        gbc.writeMem(0xd949, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2720);
        EXPECT(gbc.pc(), 0xd94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd949), 0xa8);
        // A8 015B
        gbc.setState(0x7dff, 0xc393, 0xb060, 0xb816, 0xcc70, 0xef45, 0x0, 0x0);
        gbc.writeMem(0x7dff, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc393);
        EXPECT(gbc.pc(), 0x7e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 015C
        gbc.setState(0x43d3, 0x82b3, 0xbc90, 0x9f44, 0x5c98, 0x8b52, 0x1, 0x0);
        gbc.writeMem(0x43d3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x82b3);
        EXPECT(gbc.pc(), 0x43d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 015D
        gbc.setState(0xa2d8, 0x116, 0x2f90, 0x5178, 0xe89, 0x2086, 0x1, 0x1);
        gbc.writeMem(0xa2d8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x116);
        EXPECT(gbc.pc(), 0xa2d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d8), 0xa8);
        // A8 015E
        gbc.setState(0xbfc5, 0xf979, 0x8190, 0xf651, 0x5554, 0x3cb6, 0x1, 0x1);
        gbc.writeMem(0xbfc5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf979);
        EXPECT(gbc.pc(), 0xbfc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc5), 0xa8);
        // A8 0160
        gbc.setState(0x6ae5, 0xde23, 0x33d0, 0xca04, 0xb605, 0x5750, 0x1, 0x1);
        gbc.writeMem(0x6ae5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xde23);
        EXPECT(gbc.pc(), 0x6ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0161
        gbc.setState(0xc549, 0x848e, 0xc6c0, 0xaec4, 0x8951, 0x99de, 0x1, 0x0);
        gbc.writeMem(0xc549, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x848e);
        EXPECT(gbc.pc(), 0xc54a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc549), 0xa8);
        // A8 0162
        gbc.setState(0x1b1c, 0xcb76, 0x9ca0, 0x42e1, 0x419f, 0xa467, 0x0, 0x1);
        gbc.writeMem(0x1b1c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xcb76);
        EXPECT(gbc.pc(), 0x1b1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0163
        gbc.setState(0x4c2b, 0xbd47, 0xe40, 0x46a1, 0x7237, 0xba9, 0x0, 0x1);
        gbc.writeMem(0x4c2b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbd47);
        EXPECT(gbc.pc(), 0x4c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0164
        gbc.setState(0xd166, 0x4653, 0xf1c0, 0x23f7, 0xf311, 0xc8e, 0x0, 0x0);
        gbc.writeMem(0xd166, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4653);
        EXPECT(gbc.pc(), 0xd167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd166), 0xa8);
        // A8 0165
        gbc.setState(0x41be, 0x951a, 0xb3d0, 0xdd1b, 0x3b0a, 0xef3a, 0x0, 0x1);
        gbc.writeMem(0x41be, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x951a);
        EXPECT(gbc.pc(), 0x41bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0166
        gbc.setState(0x709, 0x122d, 0xd420, 0x8c29, 0x2692, 0x3f66, 0x1, 0x0);
        gbc.writeMem(0x709, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x122d);
        EXPECT(gbc.pc(), 0x70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0167
        gbc.setState(0x6fb1, 0x5c82, 0x5ef0, 0xa2bd, 0x16a1, 0x7cdc, 0x0, 0x1);
        gbc.writeMem(0x6fb1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5c82);
        EXPECT(gbc.pc(), 0x6fb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0168
        gbc.setState(0xa9d9, 0xb735, 0x3250, 0x5a54, 0x85ba, 0x2f35, 0x0, 0x1);
        gbc.writeMem(0xa9d9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb735);
        EXPECT(gbc.pc(), 0xa9da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d9), 0xa8);
        // A8 0169
        gbc.setState(0x9616, 0x8f1f, 0x75d0, 0xb6d0, 0x399f, 0xbb56, 0x1, 0x1);
        gbc.writeMem(0x9616, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8f1f);
        EXPECT(gbc.pc(), 0x9617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9616), 0xa8);
        // A8 016A
        gbc.setState(0xd08, 0x8093, 0xa0c0, 0xb959, 0xe338, 0x86dd, 0x1, 0x0);
        gbc.writeMem(0xd08, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8093);
        EXPECT(gbc.pc(), 0xd09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 016B
        gbc.setState(0x1401, 0x82ee, 0x3330, 0xa824, 0x2be, 0x4a0d, 0x0, 0x0);
        gbc.writeMem(0x1401, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x82ee);
        EXPECT(gbc.pc(), 0x1402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 016C
        gbc.setState(0x52d, 0xeba9, 0xa3d0, 0x5035, 0xa213, 0x899, 0x1, 0x0);
        gbc.writeMem(0x52d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xeba9);
        EXPECT(gbc.pc(), 0x52e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 016E
        gbc.setState(0x8c49, 0xced5, 0x8f0, 0x9e97, 0x8dde, 0xc2a7, 0x0, 0x0);
        gbc.writeMem(0x8c49, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xced5);
        EXPECT(gbc.pc(), 0x8c4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c49), 0xa8);
        // A8 016F
        gbc.setState(0x8d25, 0x1bd0, 0x8a50, 0x583f, 0x1970, 0x8909, 0x1, 0x0);
        gbc.writeMem(0x8d25, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1bd0);
        EXPECT(gbc.pc(), 0x8d26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d25), 0xa8);
        // A8 0170
        gbc.setState(0x9e1, 0x430e, 0xa690, 0x49f5, 0x69ed, 0x6e70, 0x1, 0x0);
        gbc.writeMem(0x9e1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x430e);
        EXPECT(gbc.pc(), 0x9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0171
        gbc.setState(0xe98a, 0xe537, 0xc10, 0x8c51, 0x981c, 0xd558, 0x0, 0x0);
        gbc.writeMem(0xe98a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe537);
        EXPECT(gbc.pc(), 0xe98b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98a), 0xa8);
        // A8 0172
        gbc.setState(0x8740, 0xea6d, 0x2530, 0xc082, 0xc14f, 0x96f, 0x1, 0x0);
        gbc.writeMem(0x8740, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xea6d);
        EXPECT(gbc.pc(), 0x8741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8740), 0xa8);
        // A8 0173
        gbc.setState(0xc8c8, 0xfaa2, 0xab90, 0xa0a6, 0xebd5, 0x915, 0x1, 0x1);
        gbc.writeMem(0xc8c8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfaa2);
        EXPECT(gbc.pc(), 0xc8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c8), 0xa8);
        // A8 0174
        gbc.setState(0x820b, 0x1b53, 0xe3b0, 0x2e8f, 0xffe0, 0x9e65, 0x0, 0x1);
        gbc.writeMem(0x820b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1b53);
        EXPECT(gbc.pc(), 0x820c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x820b), 0xa8);
        // A8 0175
        gbc.setState(0x453f, 0x8b2, 0xa250, 0xff4d, 0x469b, 0xdc3f, 0x0, 0x1);
        gbc.writeMem(0x453f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8b2);
        EXPECT(gbc.pc(), 0x4540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0176
        gbc.setState(0x3abe, 0x3462, 0x2520, 0xe804, 0xf0d2, 0xc050, 0x0, 0x0);
        gbc.writeMem(0x3abe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x3462);
        EXPECT(gbc.pc(), 0x3abf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0177
        gbc.setState(0x501d, 0x1709, 0xc590, 0x6f46, 0x8e, 0xe9e9, 0x0, 0x1);
        gbc.writeMem(0x501d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1709);
        EXPECT(gbc.pc(), 0x501e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0178
        gbc.setState(0xbf02, 0x3d4b, 0xa9f0, 0x70ee, 0xf5de, 0x5975, 0x1, 0x1);
        gbc.writeMem(0xbf02, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3d4b);
        EXPECT(gbc.pc(), 0xbf03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf02), 0xa8);
        // A8 0179
        gbc.setState(0xd4fe, 0x1379, 0x7820, 0xe82f, 0xed52, 0xb145, 0x0, 0x0);
        gbc.writeMem(0xd4fe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1379);
        EXPECT(gbc.pc(), 0xd4ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4fe), 0xa8);
        // A8 017A
        gbc.setState(0xc3e6, 0xed55, 0x63b0, 0xe1b6, 0xc9db, 0x610b, 0x1, 0x1);
        gbc.writeMem(0xc3e6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xed55);
        EXPECT(gbc.pc(), 0xc3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e6), 0xa8);
        // A8 017B
        gbc.setState(0x4e59, 0x57dd, 0x4550, 0x5fd8, 0xc91d, 0xec00, 0x1, 0x0);
        gbc.writeMem(0x4e59, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x57dd);
        EXPECT(gbc.pc(), 0x4e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 017C
        gbc.setState(0xac91, 0x9543, 0x56b0, 0xf99c, 0xb275, 0xe466, 0x1, 0x0);
        gbc.writeMem(0xac91, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9543);
        EXPECT(gbc.pc(), 0xac92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac91), 0xa8);
        // A8 017D
        gbc.setState(0x9394, 0x3f6f, 0xafe0, 0xcd17, 0xa729, 0x5a04, 0x0, 0x0);
        gbc.writeMem(0x9394, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3f6f);
        EXPECT(gbc.pc(), 0x9395);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9394), 0xa8);
        // A8 017E
        gbc.setState(0x70e2, 0x44c8, 0x70, 0xf8e7, 0xb3bc, 0xd14f, 0x1, 0x0);
        gbc.writeMem(0x70e2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x44c8);
        EXPECT(gbc.pc(), 0x70e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 017F
        gbc.setState(0x38c0, 0x1b28, 0xd730, 0xb489, 0x9617, 0x7c5b, 0x1, 0x1);
        gbc.writeMem(0x38c0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1b28);
        EXPECT(gbc.pc(), 0x38c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0180
        gbc.setState(0x6f78, 0xc3c0, 0x3e20, 0x341d, 0x7778, 0xca58, 0x0, 0x1);
        gbc.writeMem(0x6f78, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc3c0);
        EXPECT(gbc.pc(), 0x6f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0181
        gbc.setState(0x398a, 0x127, 0xafc0, 0xe025, 0xa5bf, 0xd9df, 0x1, 0x1);
        gbc.writeMem(0x398a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x127);
        EXPECT(gbc.pc(), 0x398b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0182
        gbc.setState(0xe2f3, 0xafda, 0xf080, 0x21e1, 0xa86a, 0x2018, 0x0, 0x0);
        gbc.writeMem(0xe2f3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xafda);
        EXPECT(gbc.pc(), 0xe2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f3), 0xa8);
        // A8 0183
        gbc.setState(0x27d6, 0x5e86, 0x3c70, 0x96a9, 0x5759, 0x81ed, 0x1, 0x1);
        gbc.writeMem(0x27d6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5e86);
        EXPECT(gbc.pc(), 0x27d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0184
        gbc.setState(0xa3c5, 0x2768, 0xad60, 0xf439, 0x5a16, 0x8bb1, 0x1, 0x0);
        gbc.writeMem(0xa3c5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2768);
        EXPECT(gbc.pc(), 0xa3c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c5), 0xa8);
        // A8 0185
        gbc.setState(0xf3c, 0xb74e, 0x26e0, 0xa0ae, 0x8f51, 0xab31, 0x0, 0x0);
        gbc.writeMem(0xf3c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb74e);
        EXPECT(gbc.pc(), 0xf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0186
        gbc.setState(0xd990, 0x889a, 0xbfa0, 0x51aa, 0x764, 0x157, 0x0, 0x1);
        gbc.writeMem(0xd990, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x889a);
        EXPECT(gbc.pc(), 0xd991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd990), 0xa8);
        // A8 0187
        gbc.setState(0x7909, 0x3c3, 0x4300, 0xe9fb, 0xaccd, 0xa9be, 0x1, 0x0);
        gbc.writeMem(0x7909, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3c3);
        EXPECT(gbc.pc(), 0x790a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0188
        gbc.setState(0x8926, 0xfc5d, 0xb660, 0x5fee, 0x9b76, 0xa403, 0x1, 0x0);
        gbc.writeMem(0x8926, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfc5d);
        EXPECT(gbc.pc(), 0x8927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8926), 0xa8);
        // A8 0189
        gbc.setState(0xa105, 0x8ae3, 0x1930, 0x9d26, 0x7ec9, 0x7507, 0x1, 0x1);
        gbc.writeMem(0xa105, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8ae3);
        EXPECT(gbc.pc(), 0xa106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa105), 0xa8);
        // A8 018A
        gbc.setState(0xb108, 0x366f, 0x9400, 0xd198, 0xf778, 0x32dd, 0x1, 0x0);
        gbc.writeMem(0xb108, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x366f);
        EXPECT(gbc.pc(), 0xb109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb108), 0xa8);
        // A8 018B
        gbc.setState(0x824b, 0x74f3, 0x3ab0, 0xb5a9, 0xfaf4, 0xdfc6, 0x1, 0x0);
        gbc.writeMem(0x824b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x74f3);
        EXPECT(gbc.pc(), 0x824c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824b), 0xa8);
        // A8 018C
        gbc.setState(0x79ee, 0x3506, 0xd940, 0x31ce, 0xcc72, 0x75a1, 0x1, 0x1);
        gbc.writeMem(0x79ee, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3506);
        EXPECT(gbc.pc(), 0x79ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 018D
        gbc.setState(0x3df0, 0xb490, 0xcba0, 0x7755, 0xb432, 0x24e, 0x1, 0x0);
        gbc.writeMem(0x3df0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb490);
        EXPECT(gbc.pc(), 0x3df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 018E
        gbc.setState(0x107f, 0x5fb9, 0xcee0, 0x24c9, 0x2cb8, 0x5a8b, 0x0, 0x0);
        gbc.writeMem(0x107f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5fb9);
        EXPECT(gbc.pc(), 0x1080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 018F
        gbc.setState(0x2f09, 0xdfd5, 0x3e50, 0x1637, 0xb9ca, 0xd5e7, 0x0, 0x1);
        gbc.writeMem(0x2f09, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdfd5);
        EXPECT(gbc.pc(), 0x2f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0190
        gbc.setState(0xc55b, 0xe2cb, 0xc460, 0xb853, 0x7c32, 0x88e4, 0x1, 0x1);
        gbc.writeMem(0xc55b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe2cb);
        EXPECT(gbc.pc(), 0xc55c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc55b), 0xa8);
        // A8 0191
        gbc.setState(0x1b0d, 0xdf8a, 0xabe0, 0x6b99, 0x5677, 0x45a9, 0x0, 0x1);
        gbc.writeMem(0x1b0d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdf8a);
        EXPECT(gbc.pc(), 0x1b0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0192
        gbc.setState(0x3376, 0xd1e6, 0xf9a0, 0x8305, 0x617e, 0x935b, 0x0, 0x1);
        gbc.writeMem(0x3376, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd1e6);
        EXPECT(gbc.pc(), 0x3377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0193
        gbc.setState(0x64fa, 0x5d55, 0x71b0, 0xdded, 0xd10f, 0x97d9, 0x0, 0x0);
        gbc.writeMem(0x64fa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5d55);
        EXPECT(gbc.pc(), 0x64fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0194
        gbc.setState(0xd6fc, 0xedec, 0xfbf0, 0x8e2e, 0x89da, 0x1874, 0x0, 0x0);
        gbc.writeMem(0xd6fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xedec);
        EXPECT(gbc.pc(), 0xd6fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6fc), 0xa8);
        // A8 0195
        gbc.setState(0x23b9, 0x647c, 0x2a0, 0xb084, 0x3cd7, 0xf75a, 0x1, 0x1);
        gbc.writeMem(0x23b9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x647c);
        EXPECT(gbc.pc(), 0x23ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0196
        gbc.setState(0x916f, 0x74a4, 0x8480, 0x54b9, 0x5c48, 0xeca3, 0x0, 0x0);
        gbc.writeMem(0x916f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x74a4);
        EXPECT(gbc.pc(), 0x9170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916f), 0xa8);
        // A8 0197
        gbc.setState(0x7fa5, 0xcfd6, 0x7630, 0x4d46, 0x4cb7, 0xee45, 0x0, 0x1);
        gbc.writeMem(0x7fa5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcfd6);
        EXPECT(gbc.pc(), 0x7fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0198
        gbc.setState(0xab10, 0x2c21, 0x3910, 0x531f, 0xaec1, 0xf85e, 0x0, 0x1);
        gbc.writeMem(0xab10, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2c21);
        EXPECT(gbc.pc(), 0xab11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab10), 0xa8);
        // A8 0199
        gbc.setState(0xef44, 0x24dd, 0xb710, 0x1a8b, 0x7d42, 0xbc4a, 0x0, 0x1);
        gbc.writeMem(0xef44, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x24dd);
        EXPECT(gbc.pc(), 0xef45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef44), 0xa8);
        // A8 019A
        gbc.setState(0x5022, 0x872c, 0xef30, 0x6835, 0x89e7, 0xd291, 0x0, 0x0);
        gbc.writeMem(0x5022, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x872c);
        EXPECT(gbc.pc(), 0x5023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 019B
        gbc.setState(0xdaca, 0x8de, 0x69f0, 0x24c7, 0x8466, 0xe912, 0x1, 0x1);
        gbc.writeMem(0xdaca, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8de);
        EXPECT(gbc.pc(), 0xdacb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaca), 0xa8);
        // A8 019C
        gbc.setState(0xb4a3, 0x5642, 0x2d80, 0x784b, 0x9c92, 0x2e8f, 0x0, 0x0);
        gbc.writeMem(0xb4a3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5642);
        EXPECT(gbc.pc(), 0xb4a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a3), 0xa8);
        // A8 019D
        gbc.setState(0xab47, 0x917f, 0x510, 0x22e5, 0xd718, 0x3ad0, 0x0, 0x1);
        gbc.writeMem(0xab47, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x917f);
        EXPECT(gbc.pc(), 0xab48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab47), 0xa8);
        // A8 019E
        gbc.setState(0xf78, 0x5315, 0xf7a0, 0x4e1b, 0x3180, 0x1cf4, 0x1, 0x0);
        gbc.writeMem(0xf78, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5315);
        EXPECT(gbc.pc(), 0xf79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A0
        gbc.setState(0xdc78, 0xe35d, 0x4480, 0x1a72, 0xc130, 0x56f, 0x0, 0x1);
        gbc.writeMem(0xdc78, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe35d);
        EXPECT(gbc.pc(), 0xdc79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc78), 0xa8);
        // A8 01A1
        gbc.setState(0x3ef1, 0x2813, 0xc020, 0x2619, 0xc21, 0xcfbc, 0x1, 0x0);
        gbc.writeMem(0x3ef1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2813);
        EXPECT(gbc.pc(), 0x3ef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A2
        gbc.setState(0xa488, 0xcc55, 0xf920, 0x3a12, 0x268f, 0x985, 0x1, 0x1);
        gbc.writeMem(0xa488, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcc55);
        EXPECT(gbc.pc(), 0xa489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa488), 0xa8);
        // A8 01A4
        gbc.setState(0xb344, 0x2725, 0x21f0, 0xbc66, 0xc5f3, 0xd73d, 0x1, 0x1);
        gbc.writeMem(0xb344, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2725);
        EXPECT(gbc.pc(), 0xb345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb344), 0xa8);
        // A8 01A5
        gbc.setState(0x7b68, 0xebab, 0x2030, 0x4e1f, 0x9363, 0xed08, 0x1, 0x1);
        gbc.writeMem(0x7b68, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xebab);
        EXPECT(gbc.pc(), 0x7b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A6
        gbc.setState(0x7f8d, 0xc7c7, 0x7190, 0x91b6, 0x781, 0xf49d, 0x1, 0x1);
        gbc.writeMem(0x7f8d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc7c7);
        EXPECT(gbc.pc(), 0x7f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A7
        gbc.setState(0x3230, 0x20c7, 0x3f60, 0xc028, 0xe9fa, 0x1da3, 0x0, 0x0);
        gbc.writeMem(0x3230, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x20c7);
        EXPECT(gbc.pc(), 0x3231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A8
        gbc.setState(0x49da, 0xecba, 0xa530, 0x923f, 0x1dc1, 0xdfef, 0x1, 0x0);
        gbc.writeMem(0x49da, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xecba);
        EXPECT(gbc.pc(), 0x49db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01A9
        gbc.setState(0x61f4, 0xdd4f, 0x25d0, 0xca7c, 0x21c0, 0x2653, 0x0, 0x1);
        gbc.writeMem(0x61f4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdd4f);
        EXPECT(gbc.pc(), 0x61f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01AA
        gbc.setState(0x6d32, 0x5fa6, 0x1950, 0x57f3, 0xaa07, 0x62b, 0x1, 0x0);
        gbc.writeMem(0x6d32, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5fa6);
        EXPECT(gbc.pc(), 0x6d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01AB
        gbc.setState(0xc6a7, 0xfef3, 0xe210, 0x53d3, 0xf312, 0x34f, 0x1, 0x0);
        gbc.writeMem(0xc6a7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfef3);
        EXPECT(gbc.pc(), 0xc6a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a7), 0xa8);
        // A8 01AC
        gbc.setState(0xb8bf, 0x9324, 0x9120, 0xe226, 0x7bad, 0xdd32, 0x0, 0x0);
        gbc.writeMem(0xb8bf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9324);
        EXPECT(gbc.pc(), 0xb8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8bf), 0xa8);
        // A8 01AD
        gbc.setState(0xc12d, 0xcd8a, 0x6120, 0xc76d, 0x9fb, 0x3fc0, 0x0, 0x1);
        gbc.writeMem(0xc12d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcd8a);
        EXPECT(gbc.pc(), 0xc12e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12d), 0xa8);
        // A8 01AE
        gbc.setState(0x4598, 0xfe19, 0x7750, 0x1be1, 0x5e90, 0x65b3, 0x0, 0x0);
        gbc.writeMem(0x4598, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfe19);
        EXPECT(gbc.pc(), 0x4599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01AF
        gbc.setState(0x2e01, 0x9a65, 0x2130, 0xddd2, 0x1655, 0xa7e1, 0x1, 0x1);
        gbc.writeMem(0x2e01, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9a65);
        EXPECT(gbc.pc(), 0x2e02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01B0
        gbc.setState(0x9b18, 0xc97, 0xa370, 0xe2a1, 0xc5f3, 0x1609, 0x1, 0x0);
        gbc.writeMem(0x9b18, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc97);
        EXPECT(gbc.pc(), 0x9b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b18), 0xa8);
        // A8 01B1
        gbc.setState(0x173f, 0xf742, 0x1ab0, 0xf289, 0x8cdf, 0x3a5e, 0x1, 0x0);
        gbc.writeMem(0x173f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf742);
        EXPECT(gbc.pc(), 0x1740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01B2
        gbc.setState(0x1aab, 0x6e78, 0x6cb0, 0xfabd, 0x8cfb, 0x7252, 0x0, 0x1);
        gbc.writeMem(0x1aab, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6e78);
        EXPECT(gbc.pc(), 0x1aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01B3
        gbc.setState(0xab23, 0xd1e, 0x5c80, 0xcf47, 0x2456, 0x26ef, 0x0, 0x0);
        gbc.writeMem(0xab23, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0xab24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab23), 0xa8);
        // A8 01B5
        gbc.setState(0x4abd, 0xa398, 0x3830, 0xb692, 0xbc9e, 0x1024, 0x1, 0x1);
        gbc.writeMem(0x4abd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa398);
        EXPECT(gbc.pc(), 0x4abe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01B6
        gbc.setState(0x9ab8, 0x1f91, 0xca20, 0x2f76, 0x733f, 0xca0, 0x0, 0x0);
        gbc.writeMem(0x9ab8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1f91);
        EXPECT(gbc.pc(), 0x9ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab8), 0xa8);
        // A8 01B7
        gbc.setState(0x8b69, 0x77cf, 0x6490, 0x1ee3, 0xebbc, 0x661a, 0x1, 0x0);
        gbc.writeMem(0x8b69, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x77cf);
        EXPECT(gbc.pc(), 0x8b6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b69), 0xa8);
        // A8 01B8
        gbc.setState(0xa95, 0xbc4f, 0xa800, 0x20f4, 0xa17b, 0x5c42, 0x1, 0x1);
        gbc.writeMem(0xa95, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbc4f);
        EXPECT(gbc.pc(), 0xa96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01B9
        gbc.setState(0x9394, 0x857a, 0x9290, 0x6d30, 0xf6ca, 0xb629, 0x1, 0x1);
        gbc.writeMem(0x9394, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x857a);
        EXPECT(gbc.pc(), 0x9395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9394), 0xa8);
        // A8 01BB
        gbc.setState(0xe56b, 0xaec1, 0x4250, 0xc74c, 0x4a61, 0xad6a, 0x1, 0x0);
        gbc.writeMem(0xe56b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaec1);
        EXPECT(gbc.pc(), 0xe56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56b), 0xa8);
        // A8 01BC
        gbc.setState(0x5df3, 0x3daf, 0xb7f0, 0x4df9, 0x7ec2, 0x6d72, 0x1, 0x1);
        gbc.writeMem(0x5df3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3daf);
        EXPECT(gbc.pc(), 0x5df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01BD
        gbc.setState(0xc097, 0x2c3a, 0xbea0, 0x7947, 0x8ab4, 0xddb4, 0x1, 0x1);
        gbc.writeMem(0xc097, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2c3a);
        EXPECT(gbc.pc(), 0xc098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc097), 0xa8);
        // A8 01BE
        gbc.setState(0x1d54, 0x3645, 0xb3b0, 0x8bf0, 0x8805, 0x941b, 0x0, 0x1);
        gbc.writeMem(0x1d54, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3645);
        EXPECT(gbc.pc(), 0x1d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01BF
        gbc.setState(0x487f, 0xb191, 0x5a0, 0xce44, 0x186, 0x71ee, 0x1, 0x0);
        gbc.writeMem(0x487f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb191);
        EXPECT(gbc.pc(), 0x4880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C0
        gbc.setState(0xbab1, 0xbe7e, 0xbe60, 0xe30f, 0x6863, 0x42c3, 0x1, 0x0);
        gbc.writeMem(0xbab1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbe7e);
        EXPECT(gbc.pc(), 0xbab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab1), 0xa8);
        // A8 01C1
        gbc.setState(0xb10, 0xdb37, 0xf5b0, 0x7b7f, 0x3713, 0xc093, 0x1, 0x1);
        gbc.writeMem(0xb10, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdb37);
        EXPECT(gbc.pc(), 0xb11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C2
        gbc.setState(0xce9b, 0x48db, 0xaed0, 0xa301, 0x1fd2, 0x452e, 0x1, 0x0);
        gbc.writeMem(0xce9b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x48db);
        EXPECT(gbc.pc(), 0xce9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce9b), 0xa8);
        // A8 01C3
        gbc.setState(0xc01b, 0x663f, 0x3f30, 0x7359, 0x9f1e, 0xc096, 0x1, 0x0);
        gbc.writeMem(0xc01b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x663f);
        EXPECT(gbc.pc(), 0xc01c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01b), 0xa8);
        // A8 01C4
        gbc.setState(0x5ce9, 0x70ab, 0x5b40, 0xea45, 0xa5a6, 0x74d4, 0x0, 0x0);
        gbc.writeMem(0x5ce9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x70ab);
        EXPECT(gbc.pc(), 0x5cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C5
        gbc.setState(0x3b77, 0x45ba, 0x5ce0, 0x3485, 0x4fcb, 0x3803, 0x0, 0x0);
        gbc.writeMem(0x3b77, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x45ba);
        EXPECT(gbc.pc(), 0x3b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C6
        gbc.setState(0x6216, 0x548e, 0xc500, 0xe1e7, 0xc5ee, 0x1910, 0x0, 0x1);
        gbc.writeMem(0x6216, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x548e);
        EXPECT(gbc.pc(), 0x6217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C7
        gbc.setState(0x56ee, 0xfedd, 0x4f80, 0xa96c, 0xd18c, 0xdc05, 0x1, 0x0);
        gbc.writeMem(0x56ee, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfedd);
        EXPECT(gbc.pc(), 0x56ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01C9
        gbc.setState(0x14a4, 0xb98, 0x7cf0, 0x9c84, 0x986e, 0x280c, 0x0, 0x0);
        gbc.writeMem(0x14a4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb98);
        EXPECT(gbc.pc(), 0x14a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01CA
        gbc.setState(0x14b, 0x2c9a, 0xf310, 0xe600, 0xefa8, 0xa6ad, 0x0, 0x0);
        gbc.writeMem(0x14b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2c9a);
        EXPECT(gbc.pc(), 0x14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01CB
        gbc.setState(0x63a5, 0x6668, 0x26c0, 0x6ddb, 0x4ae7, 0x54aa, 0x1, 0x1);
        gbc.writeMem(0x63a5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6668);
        EXPECT(gbc.pc(), 0x63a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01CC
        gbc.setState(0xa31c, 0x526c, 0x31a0, 0xb2, 0x5397, 0x2f8a, 0x1, 0x0);
        gbc.writeMem(0xa31c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x526c);
        EXPECT(gbc.pc(), 0xa31d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa31c), 0xa8);
        // A8 01CD
        gbc.setState(0x7025, 0x94e7, 0x8d00, 0xe097, 0xa966, 0x4676, 0x0, 0x0);
        gbc.writeMem(0x7025, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x94e7);
        EXPECT(gbc.pc(), 0x7026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01CE
        gbc.setState(0xce51, 0x258, 0x4a0, 0xf53d, 0xe704, 0x98d7, 0x1, 0x1);
        gbc.writeMem(0xce51, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x258);
        EXPECT(gbc.pc(), 0xce52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce51), 0xa8);
        // A8 01CF
        gbc.setState(0x5c5c, 0x71f0, 0x4ab0, 0x4dea, 0x6df7, 0xe856, 0x0, 0x1);
        gbc.writeMem(0x5c5c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x71f0);
        EXPECT(gbc.pc(), 0x5c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01D0
        gbc.setState(0xdc54, 0x734, 0x5fb0, 0x139, 0x23e, 0x8ef, 0x0, 0x0);
        gbc.writeMem(0xdc54, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x734);
        EXPECT(gbc.pc(), 0xdc55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc54), 0xa8);
        // A8 01D1
        gbc.setState(0xbc12, 0xe9c8, 0x7e20, 0x9780, 0x9df5, 0xfccd, 0x0, 0x1);
        gbc.writeMem(0xbc12, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe9c8);
        EXPECT(gbc.pc(), 0xbc13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc12), 0xa8);
        // A8 01D2
        gbc.setState(0xe2eb, 0x4854, 0x1500, 0x9dfb, 0x930f, 0x9549, 0x0, 0x1);
        gbc.writeMem(0xe2eb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4854);
        EXPECT(gbc.pc(), 0xe2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2eb), 0xa8);
        // A8 01D3
        gbc.setState(0x56bf, 0x5420, 0xc350, 0x333f, 0xff84, 0x4e57, 0x0, 0x0);
        gbc.writeMem(0x56bf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5420);
        EXPECT(gbc.pc(), 0x56c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01D4
        gbc.setState(0xd48f, 0x70b5, 0x5020, 0x6e6f, 0xc34e, 0x2ced, 0x1, 0x0);
        gbc.writeMem(0xd48f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x70b5);
        EXPECT(gbc.pc(), 0xd490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd48f), 0xa8);
        // A8 01D5
        gbc.setState(0xd7af, 0x7b10, 0xdf30, 0x5d9e, 0xc817, 0x1426, 0x1, 0x1);
        gbc.writeMem(0xd7af, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7b10);
        EXPECT(gbc.pc(), 0xd7b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7af), 0xa8);
        // A8 01D6
        gbc.setState(0x3c93, 0x75de, 0xd40, 0xb343, 0x6904, 0x2702, 0x1, 0x1);
        gbc.writeMem(0x3c93, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x75de);
        EXPECT(gbc.pc(), 0x3c94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01D7
        gbc.setState(0xe823, 0x9ac2, 0x4e10, 0xfda7, 0xf19d, 0x694, 0x0, 0x0);
        gbc.writeMem(0xe823, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9ac2);
        EXPECT(gbc.pc(), 0xe824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe823), 0xa8);
        // A8 01D8
        gbc.setState(0x789d, 0x1ada, 0xe970, 0xc5e4, 0x8098, 0xc1db, 0x1, 0x1);
        gbc.writeMem(0x789d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1ada);
        EXPECT(gbc.pc(), 0x789e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01D9
        gbc.setState(0x5d94, 0xe196, 0x4400, 0x7678, 0x935d, 0x29c2, 0x1, 0x0);
        gbc.writeMem(0x5d94, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe196);
        EXPECT(gbc.pc(), 0x5d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01DA
        gbc.setState(0x850c, 0x33a6, 0x9440, 0x71b8, 0x2be, 0x7c0f, 0x0, 0x1);
        gbc.writeMem(0x850c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x33a6);
        EXPECT(gbc.pc(), 0x850d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850c), 0xa8);
        // A8 01DB
        gbc.setState(0x980d, 0xe2c6, 0xf970, 0x1e33, 0x33f3, 0xf49b, 0x1, 0x0);
        gbc.writeMem(0x980d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe2c6);
        EXPECT(gbc.pc(), 0x980e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980d), 0xa8);
        // A8 01DC
        gbc.setState(0x9d1a, 0x9e5c, 0xee90, 0x934c, 0xc5cb, 0xf60c, 0x1, 0x0);
        gbc.writeMem(0x9d1a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9e5c);
        EXPECT(gbc.pc(), 0x9d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1a), 0xa8);
        // A8 01DD
        gbc.setState(0x52f7, 0x23b4, 0x5b0, 0x28ac, 0xa106, 0x12b9, 0x1, 0x1);
        gbc.writeMem(0x52f7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x23b4);
        EXPECT(gbc.pc(), 0x52f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01DE
        gbc.setState(0x1cae, 0x9f08, 0x7100, 0x868f, 0x8796, 0xb072, 0x0, 0x0);
        gbc.writeMem(0x1cae, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9f08);
        EXPECT(gbc.pc(), 0x1caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01DF
        gbc.setState(0xb230, 0x1ac2, 0xa320, 0x2250, 0x51f3, 0xd146, 0x0, 0x0);
        gbc.writeMem(0xb230, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1ac2);
        EXPECT(gbc.pc(), 0xb231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb230), 0xa8);
        // A8 01E0
        gbc.setState(0x1e1c, 0xff20, 0x25c0, 0x22ec, 0x72b8, 0x2b77, 0x0, 0x1);
        gbc.writeMem(0x1e1c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xff20);
        EXPECT(gbc.pc(), 0x1e1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01E1
        gbc.setState(0x5843, 0xf621, 0x7dc0, 0x8d6b, 0x43bf, 0x82d6, 0x0, 0x0);
        gbc.writeMem(0x5843, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf621);
        EXPECT(gbc.pc(), 0x5844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01E2
        gbc.setState(0xcb2d, 0xf488, 0xd220, 0x8722, 0x1dd9, 0x8eb1, 0x1, 0x1);
        gbc.writeMem(0xcb2d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf488);
        EXPECT(gbc.pc(), 0xcb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2d), 0xa8);
        // A8 01E3
        gbc.setState(0x8b, 0x4e96, 0x85d0, 0x853, 0x8baa, 0x7f55, 0x1, 0x0);
        gbc.writeMem(0x8b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4e96);
        EXPECT(gbc.pc(), 0x8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01E4
        gbc.setState(0xc135, 0xdb2c, 0x2ec0, 0xffd4, 0x13f6, 0xb853, 0x0, 0x1);
        gbc.writeMem(0xc135, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdb2c);
        EXPECT(gbc.pc(), 0xc136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc135), 0xa8);
        // A8 01E5
        gbc.setState(0xe6b3, 0x85e4, 0x3390, 0x8f4a, 0x3d97, 0x6d1, 0x1, 0x1);
        gbc.writeMem(0xe6b3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x85e4);
        EXPECT(gbc.pc(), 0xe6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b3), 0xa8);
        // A8 01E6
        gbc.setState(0xd3de, 0x7d60, 0x5400, 0xe597, 0x6fb8, 0xa168, 0x1, 0x0);
        gbc.writeMem(0xd3de, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7d60);
        EXPECT(gbc.pc(), 0xd3df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3de), 0xa8);
        // A8 01E7
        gbc.setState(0xd66b, 0xcdc0, 0x9610, 0x5a75, 0xbcd9, 0x25c1, 0x0, 0x0);
        gbc.writeMem(0xd66b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcdc0);
        EXPECT(gbc.pc(), 0xd66c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66b), 0xa8);
        // A8 01E8
        gbc.setState(0xa7c6, 0xb437, 0x7750, 0x9541, 0x9aba, 0x1697, 0x1, 0x1);
        gbc.writeMem(0xa7c6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb437);
        EXPECT(gbc.pc(), 0xa7c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c6), 0xa8);
        // A8 01E9
        gbc.setState(0x330d, 0xae4f, 0xc440, 0x87c7, 0x9448, 0x84ae, 0x1, 0x1);
        gbc.writeMem(0x330d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xae4f);
        EXPECT(gbc.pc(), 0x330e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01EA
        gbc.setState(0x361c, 0x4af7, 0x8af0, 0xf30, 0x6082, 0xe726, 0x0, 0x0);
        gbc.writeMem(0x361c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4af7);
        EXPECT(gbc.pc(), 0x361d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01EB
        gbc.setState(0xd6bd, 0xa372, 0x2dd0, 0xedbd, 0xdb3, 0x843f, 0x0, 0x0);
        gbc.writeMem(0xd6bd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa372);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bd), 0xa8);
        // A8 01EC
        gbc.setState(0x3be0, 0xa771, 0x8700, 0x5c4, 0x9091, 0x54d4, 0x0, 0x0);
        gbc.writeMem(0x3be0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa771);
        EXPECT(gbc.pc(), 0x3be1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01ED
        gbc.setState(0x5396, 0xa6ef, 0xb4d0, 0xccf1, 0xbe43, 0x9c40, 0x0, 0x0);
        gbc.writeMem(0x5396, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa6ef);
        EXPECT(gbc.pc(), 0x5397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01EE
        gbc.setState(0x8535, 0x9690, 0xc670, 0x3123, 0xfd7e, 0xffae, 0x1, 0x0);
        gbc.writeMem(0x8535, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9690);
        EXPECT(gbc.pc(), 0x8536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8535), 0xa8);
        // A8 01EF
        gbc.setState(0x45ad, 0xdcbe, 0xa700, 0xcf2c, 0xc07e, 0x2ee2, 0x0, 0x0);
        gbc.writeMem(0x45ad, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdcbe);
        EXPECT(gbc.pc(), 0x45ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01F0
        gbc.setState(0x5a6, 0xfa0c, 0x5670, 0xf487, 0xcb51, 0x2ab7, 0x1, 0x1);
        gbc.writeMem(0x5a6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xfa0c);
        EXPECT(gbc.pc(), 0x5a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01F1
        gbc.setState(0x7cf9, 0x25f7, 0xbe80, 0xc58f, 0x2a6d, 0x667, 0x1, 0x0);
        gbc.writeMem(0x7cf9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x25f7);
        EXPECT(gbc.pc(), 0x7cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01F2
        gbc.setState(0xcd9c, 0x57a7, 0xbc40, 0x5fb8, 0x86d5, 0xee52, 0x0, 0x1);
        gbc.writeMem(0xcd9c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x57a7);
        EXPECT(gbc.pc(), 0xcd9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd9c), 0xa8);
        // A8 01F3
        gbc.setState(0x4ddf, 0x4016, 0x8300, 0x22f6, 0x44c6, 0x1b1c, 0x0, 0x1);
        gbc.writeMem(0x4ddf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4016);
        EXPECT(gbc.pc(), 0x4de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01F4
        gbc.setState(0xb563, 0x4b6f, 0xd0d0, 0x7bf0, 0xe2c7, 0x9df, 0x0, 0x0);
        gbc.writeMem(0xb563, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4b6f);
        EXPECT(gbc.pc(), 0xb564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb563), 0xa8);
        // A8 01F5
        gbc.setState(0xcafc, 0x8e97, 0x6000, 0x3414, 0x6274, 0x76ca, 0x0, 0x1);
        gbc.writeMem(0xcafc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8e97);
        EXPECT(gbc.pc(), 0xcafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafc), 0xa8);
        // A8 01F6
        gbc.setState(0x8a83, 0xb5e6, 0x8920, 0x462a, 0xbf38, 0x6b40, 0x1, 0x1);
        gbc.writeMem(0x8a83, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb5e6);
        EXPECT(gbc.pc(), 0x8a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a83), 0xa8);
        // A8 01F7
        gbc.setState(0xd7b5, 0xea36, 0xf3d0, 0x158, 0x670f, 0xcce8, 0x1, 0x0);
        gbc.writeMem(0xd7b5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xea36);
        EXPECT(gbc.pc(), 0xd7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b5), 0xa8);
        // A8 01F8
        gbc.setState(0xeddf, 0x623f, 0xae40, 0x79b8, 0x9d66, 0xb6fe, 0x0, 0x1);
        gbc.writeMem(0xeddf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x623f);
        EXPECT(gbc.pc(), 0xede0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeddf), 0xa8);
        // A8 01F9
        gbc.setState(0x3ed8, 0x94ca, 0xca40, 0x11e5, 0x4965, 0xe2d3, 0x0, 0x1);
        gbc.writeMem(0x3ed8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x94ca);
        EXPECT(gbc.pc(), 0x3ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01FA
        gbc.setState(0xc6cd, 0x85f2, 0x5260, 0xbcf4, 0xf997, 0xb991, 0x1, 0x0);
        gbc.writeMem(0xc6cd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x85f2);
        EXPECT(gbc.pc(), 0xc6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6cd), 0xa8);
        // A8 01FB
        gbc.setState(0xbe45, 0xc4ea, 0xa210, 0xea9e, 0xf686, 0x9b34, 0x0, 0x0);
        gbc.writeMem(0xbe45, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc4ea);
        EXPECT(gbc.pc(), 0xbe46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe45), 0xa8);
        // A8 01FD
        gbc.setState(0x93d8, 0x8262, 0x4920, 0xf8a8, 0x5878, 0x7202, 0x1, 0x0);
        gbc.writeMem(0x93d8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8262);
        EXPECT(gbc.pc(), 0x93d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d8), 0xa8);
        // A8 01FE
        gbc.setState(0x701f, 0xc9e3, 0x4b20, 0x49a2, 0xfea6, 0x28f9, 0x0, 0x0);
        gbc.writeMem(0x701f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc9e3);
        EXPECT(gbc.pc(), 0x7020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 01FF
        gbc.setState(0x7218, 0x626e, 0x3970, 0xf81a, 0x32e1, 0xf35f, 0x1, 0x1);
        gbc.writeMem(0x7218, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x626e);
        EXPECT(gbc.pc(), 0x7219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0200
        gbc.setState(0x1295, 0xb446, 0x9f60, 0x8510, 0xfda, 0xd4a9, 0x0, 0x1);
        gbc.writeMem(0x1295, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb446);
        EXPECT(gbc.pc(), 0x1296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0201
        gbc.setState(0x7b76, 0x959f, 0x5530, 0x107e, 0x96cd, 0x43ae, 0x1, 0x1);
        gbc.writeMem(0x7b76, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x959f);
        EXPECT(gbc.pc(), 0x7b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0202
        gbc.setState(0x2b82, 0x9634, 0x720, 0x2277, 0xc9ef, 0x3f4c, 0x1, 0x1);
        gbc.writeMem(0x2b82, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9634);
        EXPECT(gbc.pc(), 0x2b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0203
        gbc.setState(0x6896, 0x5b74, 0xa3e0, 0x9b2e, 0xcd32, 0xf83b, 0x1, 0x0);
        gbc.writeMem(0x6896, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5b74);
        EXPECT(gbc.pc(), 0x6897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0204
        gbc.setState(0x476e, 0xa5ea, 0xc140, 0xfac1, 0x86a3, 0x45c3, 0x0, 0x0);
        gbc.writeMem(0x476e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa5ea);
        EXPECT(gbc.pc(), 0x476f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0205
        gbc.setState(0x5089, 0x81c1, 0x8c70, 0xe81c, 0xc4a2, 0xcb05, 0x0, 0x1);
        gbc.writeMem(0x5089, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x81c1);
        EXPECT(gbc.pc(), 0x508a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0206
        gbc.setState(0xed98, 0xd798, 0xe2c0, 0x5aba, 0x92c9, 0x3d09, 0x0, 0x1);
        gbc.writeMem(0xed98, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd798);
        EXPECT(gbc.pc(), 0xed99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed98), 0xa8);
        // A8 0207
        gbc.setState(0xe3c4, 0x5fad, 0x68c0, 0x7be1, 0x823e, 0x40ad, 0x0, 0x0);
        gbc.writeMem(0xe3c4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5fad);
        EXPECT(gbc.pc(), 0xe3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c4), 0xa8);
        // A8 0208
        gbc.setState(0x93f7, 0xf99b, 0xa8d0, 0x9195, 0xa6e2, 0x1a42, 0x0, 0x1);
        gbc.writeMem(0x93f7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf99b);
        EXPECT(gbc.pc(), 0x93f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f7), 0xa8);
        // A8 0209
        gbc.setState(0x53c4, 0x960d, 0xa870, 0xdf17, 0xc563, 0x174, 0x1, 0x0);
        gbc.writeMem(0x53c4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x960d);
        EXPECT(gbc.pc(), 0x53c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 020A
        gbc.setState(0x6c50, 0x8075, 0xbc0, 0x6791, 0x218a, 0x37df, 0x0, 0x1);
        gbc.writeMem(0x6c50, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8075);
        EXPECT(gbc.pc(), 0x6c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 020B
        gbc.setState(0x8b88, 0x632d, 0x840, 0x6c73, 0x56f6, 0xb59, 0x1, 0x1);
        gbc.writeMem(0x8b88, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x632d);
        EXPECT(gbc.pc(), 0x8b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b88), 0xa8);
        // A8 020C
        gbc.setState(0xa391, 0xeffc, 0x6cb0, 0xf2b8, 0xc1b3, 0xf0a1, 0x1, 0x1);
        gbc.writeMem(0xa391, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xeffc);
        EXPECT(gbc.pc(), 0xa392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa391), 0xa8);
        // A8 020D
        gbc.setState(0x2872, 0xbf8e, 0xe1c0, 0x66dc, 0x1dbc, 0x9aac, 0x0, 0x1);
        gbc.writeMem(0x2872, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xbf8e);
        EXPECT(gbc.pc(), 0x2873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 020E
        gbc.setState(0xb56d, 0xa9fb, 0x1a80, 0x14bb, 0x1022, 0x7b34, 0x1, 0x1);
        gbc.writeMem(0xb56d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa9fb);
        EXPECT(gbc.pc(), 0xb56e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb56d), 0xa8);
        // A8 020F
        gbc.setState(0x760d, 0xc05d, 0x90c0, 0x4d02, 0xcdd6, 0xa760, 0x0, 0x0);
        gbc.writeMem(0x760d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc05d);
        EXPECT(gbc.pc(), 0x760e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0210
        gbc.setState(0x201e, 0xdf88, 0xbce0, 0x37b6, 0x90c7, 0xa19b, 0x0, 0x1);
        gbc.writeMem(0x201e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdf88);
        EXPECT(gbc.pc(), 0x201f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0211
        gbc.setState(0xe41c, 0x1589, 0x4f0, 0xe14e, 0xaca2, 0xd433, 0x0, 0x0);
        gbc.writeMem(0xe41c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1589);
        EXPECT(gbc.pc(), 0xe41d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41c), 0xa8);
        // A8 0212
        gbc.setState(0xe60, 0xf016, 0x30d0, 0x8b70, 0x927f, 0xb7fb, 0x1, 0x1);
        gbc.writeMem(0xe60, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf016);
        EXPECT(gbc.pc(), 0xe61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0213
        gbc.setState(0x51ce, 0x3356, 0xf720, 0xe1e, 0xd60, 0x5dbe, 0x0, 0x0);
        gbc.writeMem(0x51ce, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3356);
        EXPECT(gbc.pc(), 0x51cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0214
        gbc.setState(0xb10c, 0xa4f9, 0x5800, 0x67e4, 0xc001, 0x1d8, 0x1, 0x1);
        gbc.writeMem(0xb10c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa4f9);
        EXPECT(gbc.pc(), 0xb10d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb10c), 0xa8);
        // A8 0215
        gbc.setState(0xd852, 0xe7c, 0xc1b0, 0xe04e, 0xd9c0, 0xa53e, 0x0, 0x0);
        gbc.writeMem(0xd852, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe7c);
        EXPECT(gbc.pc(), 0xd853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd852), 0xa8);
        // A8 0216
        gbc.setState(0x5766, 0x66b6, 0xb130, 0x686a, 0x90eb, 0x3fc, 0x0, 0x1);
        gbc.writeMem(0x5766, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x66b6);
        EXPECT(gbc.pc(), 0x5767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0217
        gbc.setState(0x7f79, 0xd1e5, 0x27e0, 0x9166, 0xcacc, 0xf7a3, 0x1, 0x1);
        gbc.writeMem(0x7f79, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0x7f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0218
        gbc.setState(0x333c, 0xdd81, 0x8b0, 0xd305, 0x22f1, 0xe05, 0x0, 0x0);
        gbc.writeMem(0x333c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdd81);
        EXPECT(gbc.pc(), 0x333d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0219
        gbc.setState(0xb4f2, 0x4bd7, 0x6380, 0xe44, 0xe36d, 0xd871, 0x1, 0x0);
        gbc.writeMem(0xb4f2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4bd7);
        EXPECT(gbc.pc(), 0xb4f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f2), 0xa8);
        // A8 021A
        gbc.setState(0x52ad, 0x4ea3, 0x75f0, 0x31f3, 0x6369, 0xe73c, 0x0, 0x0);
        gbc.writeMem(0x52ad, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4ea3);
        EXPECT(gbc.pc(), 0x52ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 021C
        gbc.setState(0xc364, 0x3763, 0xa50, 0xc50b, 0x83ee, 0x2687, 0x0, 0x0);
        gbc.writeMem(0xc364, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3763);
        EXPECT(gbc.pc(), 0xc365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc364), 0xa8);
        // A8 021D
        gbc.setState(0xd1db, 0x9566, 0xfa70, 0xf0d1, 0xb14, 0x53dc, 0x1, 0x0);
        gbc.writeMem(0xd1db, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9566);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1db), 0xa8);
        // A8 021E
        gbc.setState(0xbf8a, 0x2580, 0x8700, 0x17bb, 0x96e8, 0x3f65, 0x0, 0x0);
        gbc.writeMem(0xbf8a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2580);
        EXPECT(gbc.pc(), 0xbf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8a), 0xa8);
        // A8 021F
        gbc.setState(0x3b6b, 0xa289, 0x7f50, 0xc20, 0xc6e7, 0x2aac, 0x1, 0x0);
        gbc.writeMem(0x3b6b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa289);
        EXPECT(gbc.pc(), 0x3b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0220
        gbc.setState(0x81a, 0x5739, 0x3c00, 0x650d, 0x34c0, 0xb144, 0x1, 0x0);
        gbc.writeMem(0x81a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5739);
        EXPECT(gbc.pc(), 0x81b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0221
        gbc.setState(0x9659, 0x8ba1, 0x36e0, 0xd39, 0x16bc, 0x5aae, 0x0, 0x1);
        gbc.writeMem(0x9659, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8ba1);
        EXPECT(gbc.pc(), 0x965a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9659), 0xa8);
        // A8 0222
        gbc.setState(0x539d, 0x92ef, 0xaa0, 0x165f, 0x69e3, 0x28d5, 0x1, 0x1);
        gbc.writeMem(0x539d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x92ef);
        EXPECT(gbc.pc(), 0x539e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0223
        gbc.setState(0x3a01, 0x4763, 0xef20, 0x4389, 0x7e66, 0x8b81, 0x0, 0x0);
        gbc.writeMem(0x3a01, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4763);
        EXPECT(gbc.pc(), 0x3a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0224
        gbc.setState(0x253a, 0x5cf1, 0x5680, 0xfdc1, 0xdc83, 0xdd50, 0x0, 0x0);
        gbc.writeMem(0x253a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5cf1);
        EXPECT(gbc.pc(), 0x253b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0225
        gbc.setState(0x2d38, 0x2496, 0x5c0, 0xe385, 0xe6df, 0xd82f, 0x1, 0x0);
        gbc.writeMem(0x2d38, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2496);
        EXPECT(gbc.pc(), 0x2d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0226
        gbc.setState(0x11, 0xa299, 0x70c0, 0xa87e, 0x112f, 0x54e5, 0x1, 0x0);
        gbc.writeMem(0x11, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa299);
        EXPECT(gbc.pc(), 0x12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0228
        gbc.setState(0x6f0a, 0x52e3, 0xe3c0, 0xb862, 0x7101, 0x2444, 0x0, 0x0);
        gbc.writeMem(0x6f0a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x52e3);
        EXPECT(gbc.pc(), 0x6f0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0229
        gbc.setState(0x6656, 0x4b01, 0x69c0, 0xf530, 0xc47, 0xa3e3, 0x0, 0x1);
        gbc.writeMem(0x6656, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4b01);
        EXPECT(gbc.pc(), 0x6657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 022A
        gbc.setState(0x142d, 0xf96c, 0x70a0, 0x5bd3, 0xf61b, 0xd9c3, 0x1, 0x0);
        gbc.writeMem(0x142d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf96c);
        EXPECT(gbc.pc(), 0x142e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 022B
        gbc.setState(0xb73d, 0x7df7, 0xc580, 0x3c7f, 0x1705, 0xaf1d, 0x0, 0x0);
        gbc.writeMem(0xb73d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7df7);
        EXPECT(gbc.pc(), 0xb73e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb73d), 0xa8);
        // A8 022C
        gbc.setState(0xb565, 0xe8e6, 0xd2b0, 0x2e52, 0x2912, 0xf33f, 0x0, 0x0);
        gbc.writeMem(0xb565, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe8e6);
        EXPECT(gbc.pc(), 0xb566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb565), 0xa8);
        // A8 022D
        gbc.setState(0xc07, 0x7596, 0x96f0, 0x725a, 0x8a9, 0x4524, 0x0, 0x0);
        gbc.writeMem(0xc07, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7596);
        EXPECT(gbc.pc(), 0xc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 022E
        gbc.setState(0x2cc6, 0x81f7, 0x470, 0x8c2d, 0xaba2, 0xb622, 0x0, 0x1);
        gbc.writeMem(0x2cc6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x81f7);
        EXPECT(gbc.pc(), 0x2cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 022F
        gbc.setState(0xb8f8, 0x3d69, 0x2b0, 0x98e2, 0xad4, 0xeae8, 0x1, 0x0);
        gbc.writeMem(0xb8f8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3d69);
        EXPECT(gbc.pc(), 0xb8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f8), 0xa8);
        // A8 0230
        gbc.setState(0x7b5e, 0x7c45, 0xff60, 0x6a94, 0x3e4b, 0x5521, 0x0, 0x1);
        gbc.writeMem(0x7b5e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7c45);
        EXPECT(gbc.pc(), 0x7b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0231
        gbc.setState(0xc9fc, 0x1924, 0x2a90, 0x182a, 0x4c45, 0x38dd, 0x1, 0x1);
        gbc.writeMem(0xc9fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1924);
        EXPECT(gbc.pc(), 0xc9fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9fc), 0xa8);
        // A8 0233
        gbc.setState(0xb1f2, 0x786a, 0x6a70, 0xb702, 0xddfe, 0xb12b, 0x0, 0x0);
        gbc.writeMem(0xb1f2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x786a);
        EXPECT(gbc.pc(), 0xb1f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f2), 0xa8);
        // A8 0236
        gbc.setState(0x15f7, 0xab57, 0x7d20, 0x1e04, 0xe25d, 0xaf8c, 0x1, 0x1);
        gbc.writeMem(0x15f7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xab57);
        EXPECT(gbc.pc(), 0x15f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0237
        gbc.setState(0x9d99, 0xe62e, 0x21a0, 0x7ac, 0xfb1, 0x6f62, 0x0, 0x1);
        gbc.writeMem(0x9d99, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe62e);
        EXPECT(gbc.pc(), 0x9d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d99), 0xa8);
        // A8 0238
        gbc.setState(0xb19c, 0xe7f4, 0xb010, 0x8e9a, 0x9032, 0x9521, 0x0, 0x0);
        gbc.writeMem(0xb19c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe7f4);
        EXPECT(gbc.pc(), 0xb19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19c), 0xa8);
        // A8 0239
        gbc.setState(0x1ee4, 0xb732, 0x7d70, 0x8eed, 0xe61c, 0xdb99, 0x1, 0x0);
        gbc.writeMem(0x1ee4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb732);
        EXPECT(gbc.pc(), 0x1ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 023B
        gbc.setState(0x4ecf, 0x5fb7, 0xf1a0, 0xd7d3, 0x9520, 0x9c35, 0x0, 0x1);
        gbc.writeMem(0x4ecf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5fb7);
        EXPECT(gbc.pc(), 0x4ed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 023C
        gbc.setState(0x3e8a, 0xf825, 0x73a0, 0x2960, 0x2ee2, 0xde08, 0x0, 0x0);
        gbc.writeMem(0x3e8a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf825);
        EXPECT(gbc.pc(), 0x3e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 023E
        gbc.setState(0x299e, 0x3d99, 0xd360, 0x8c34, 0xde07, 0xf6ca, 0x0, 0x1);
        gbc.writeMem(0x299e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3d99);
        EXPECT(gbc.pc(), 0x299f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 023F
        gbc.setState(0x1b80, 0xbad4, 0xee60, 0xef79, 0xf14a, 0x2862, 0x0, 0x0);
        gbc.writeMem(0x1b80, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbad4);
        EXPECT(gbc.pc(), 0x1b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0240
        gbc.setState(0x2c20, 0xc403, 0xf800, 0xef54, 0xf4e7, 0xefcb, 0x0, 0x1);
        gbc.writeMem(0x2c20, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc403);
        EXPECT(gbc.pc(), 0x2c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0241
        gbc.setState(0xa7b9, 0xb354, 0x680, 0xfbd7, 0x8e7c, 0x231d, 0x0, 0x0);
        gbc.writeMem(0xa7b9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb354);
        EXPECT(gbc.pc(), 0xa7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b9), 0xa8);
        // A8 0242
        gbc.setState(0xde49, 0x72d6, 0x7850, 0x7672, 0xa1ad, 0xb339, 0x1, 0x1);
        gbc.writeMem(0xde49, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x72d6);
        EXPECT(gbc.pc(), 0xde4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde49), 0xa8);
        // A8 0243
        gbc.setState(0x3a4f, 0xcf7f, 0x7690, 0xa039, 0x6c86, 0x6de2, 0x1, 0x1);
        gbc.writeMem(0x3a4f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcf7f);
        EXPECT(gbc.pc(), 0x3a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0244
        gbc.setState(0x3ef2, 0x67bb, 0x890, 0xe934, 0xdfe9, 0xda07, 0x0, 0x1);
        gbc.writeMem(0x3ef2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x67bb);
        EXPECT(gbc.pc(), 0x3ef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0246
        gbc.setState(0x646, 0x24ad, 0x7040, 0x9e02, 0x30f8, 0xc477, 0x0, 0x1);
        gbc.writeMem(0x646, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x24ad);
        EXPECT(gbc.pc(), 0x647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0247
        gbc.setState(0x1723, 0x7afc, 0xf1d0, 0x269, 0xd061, 0x9316, 0x1, 0x0);
        gbc.writeMem(0x1723, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7afc);
        EXPECT(gbc.pc(), 0x1724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0248
        gbc.setState(0x3bb5, 0x6aa2, 0xf120, 0xf5a6, 0x46b5, 0xe396, 0x0, 0x1);
        gbc.writeMem(0x3bb5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6aa2);
        EXPECT(gbc.pc(), 0x3bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 024A
        gbc.setState(0x3e3, 0x92e1, 0xa330, 0x6071, 0x49a5, 0x6cb, 0x0, 0x0);
        gbc.writeMem(0x3e3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x92e1);
        EXPECT(gbc.pc(), 0x3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 024B
        gbc.setState(0x2c18, 0xa9d1, 0x45a0, 0x19df, 0x3fb9, 0xc36e, 0x0, 0x0);
        gbc.writeMem(0x2c18, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa9d1);
        EXPECT(gbc.pc(), 0x2c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 024C
        gbc.setState(0xea67, 0xe896, 0x27d0, 0xb2db, 0x9f92, 0x4dda, 0x1, 0x1);
        gbc.writeMem(0xea67, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe896);
        EXPECT(gbc.pc(), 0xea68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea67), 0xa8);
        // A8 024D
        gbc.setState(0x2a7f, 0x9cbe, 0xb960, 0xa52, 0x107b, 0x628f, 0x0, 0x1);
        gbc.writeMem(0x2a7f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9cbe);
        EXPECT(gbc.pc(), 0x2a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 024E
        gbc.setState(0xdef3, 0x267f, 0xc110, 0x5168, 0xf420, 0x83d0, 0x0, 0x1);
        gbc.writeMem(0xdef3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x267f);
        EXPECT(gbc.pc(), 0xdef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef3), 0xa8);
        // A8 024F
        gbc.setState(0x32ff, 0xb43e, 0xef40, 0xdbe, 0x6f65, 0x6e49, 0x0, 0x0);
        gbc.writeMem(0x32ff, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb43e);
        EXPECT(gbc.pc(), 0x3300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0250
        gbc.setState(0xe113, 0x52e4, 0x8630, 0xa29d, 0x5bab, 0x7c0e, 0x0, 0x1);
        gbc.writeMem(0xe113, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x52e4);
        EXPECT(gbc.pc(), 0xe114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe113), 0xa8);
        // A8 0251
        gbc.setState(0x28e4, 0xa900, 0x4a70, 0x6194, 0xb376, 0xc97b, 0x0, 0x0);
        gbc.writeMem(0x28e4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa900);
        EXPECT(gbc.pc(), 0x28e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0252
        gbc.setState(0x85e5, 0x975f, 0x8550, 0x54da, 0x2a97, 0xb226, 0x1, 0x1);
        gbc.writeMem(0x85e5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x975f);
        EXPECT(gbc.pc(), 0x85e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e5), 0xa8);
        // A8 0253
        gbc.setState(0x3613, 0x60d9, 0x57b0, 0x62f4, 0xdde5, 0xa058, 0x0, 0x1);
        gbc.writeMem(0x3613, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x60d9);
        EXPECT(gbc.pc(), 0x3614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0254
        gbc.setState(0x514e, 0x4974, 0x9e30, 0xea5b, 0xdc6c, 0x53f1, 0x1, 0x0);
        gbc.writeMem(0x514e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4974);
        EXPECT(gbc.pc(), 0x514f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0255
        gbc.setState(0x17e6, 0x6368, 0x90a0, 0xcae7, 0xd3af, 0x50f0, 0x0, 0x0);
        gbc.writeMem(0x17e6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6368);
        EXPECT(gbc.pc(), 0x17e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0256
        gbc.setState(0xb793, 0xd5aa, 0x7220, 0xf4be, 0xc770, 0xdc98, 0x0, 0x0);
        gbc.writeMem(0xb793, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd5aa);
        EXPECT(gbc.pc(), 0xb794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb793), 0xa8);
        // A8 0257
        gbc.setState(0x1fa6, 0xa4cb, 0x6d70, 0x5d0, 0x49d8, 0xb2fd, 0x0, 0x1);
        gbc.writeMem(0x1fa6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa4cb);
        EXPECT(gbc.pc(), 0x1fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0258
        gbc.setState(0xce27, 0x481b, 0xdb80, 0x79cb, 0xfd4, 0x973a, 0x1, 0x1);
        gbc.writeMem(0xce27, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x481b);
        EXPECT(gbc.pc(), 0xce28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce27), 0xa8);
        // A8 0259
        gbc.setState(0xbb5e, 0xbf1c, 0x19d0, 0xf3e3, 0x3129, 0x6040, 0x0, 0x1);
        gbc.writeMem(0xbb5e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbf1c);
        EXPECT(gbc.pc(), 0xbb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb5e), 0xa8);
        // A8 025B
        gbc.setState(0x8f5, 0x585f, 0x3360, 0x7f5f, 0xcea9, 0x9d7b, 0x0, 0x1);
        gbc.writeMem(0x8f5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x585f);
        EXPECT(gbc.pc(), 0x8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 025C
        gbc.setState(0xebbf, 0x22a4, 0x3140, 0x1a06, 0x549a, 0x53dc, 0x0, 0x0);
        gbc.writeMem(0xebbf, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x22a4);
        EXPECT(gbc.pc(), 0xebc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebbf), 0xa8);
        // A8 025D
        gbc.setState(0x2aec, 0x892f, 0x3690, 0xa5c4, 0xec49, 0xb303, 0x1, 0x1);
        gbc.writeMem(0x2aec, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x892f);
        EXPECT(gbc.pc(), 0x2aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 025E
        gbc.setState(0xce71, 0x1e9b, 0x950, 0xda5e, 0xd9e3, 0xaa61, 0x0, 0x0);
        gbc.writeMem(0xce71, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1e9b);
        EXPECT(gbc.pc(), 0xce72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce71), 0xa8);
        // A8 025F
        gbc.setState(0xaf64, 0x49f4, 0xd300, 0x40e0, 0xf407, 0x53a3, 0x1, 0x1);
        gbc.writeMem(0xaf64, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x49f4);
        EXPECT(gbc.pc(), 0xaf65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf64), 0xa8);
        // A8 0260
        gbc.setState(0xdd33, 0xb7ee, 0xac70, 0x4d47, 0xec7c, 0x3987, 0x0, 0x1);
        gbc.writeMem(0xdd33, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb7ee);
        EXPECT(gbc.pc(), 0xdd34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd33), 0xa8);
        // A8 0261
        gbc.setState(0x6e34, 0xce4e, 0xb010, 0x1e1a, 0xe2d2, 0x9ca, 0x1, 0x0);
        gbc.writeMem(0x6e34, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xce4e);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0262
        gbc.setState(0x4724, 0xe5f, 0x8590, 0xf4f1, 0x4b43, 0xa7d, 0x1, 0x0);
        gbc.writeMem(0x4724, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe5f);
        EXPECT(gbc.pc(), 0x4725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0263
        gbc.setState(0x62ca, 0xe3c4, 0xac20, 0xc683, 0xbdc9, 0x7f99, 0x1, 0x0);
        gbc.writeMem(0x62ca, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe3c4);
        EXPECT(gbc.pc(), 0x62cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0264
        gbc.setState(0x9937, 0x1bb5, 0x2f80, 0x8fb6, 0xb5b8, 0xe6, 0x1, 0x0);
        gbc.writeMem(0x9937, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1bb5);
        EXPECT(gbc.pc(), 0x9938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9937), 0xa8);
        // A8 0265
        gbc.setState(0xbd82, 0x6158, 0x5380, 0x827f, 0xc77c, 0xdd85, 0x1, 0x1);
        gbc.writeMem(0xbd82, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6158);
        EXPECT(gbc.pc(), 0xbd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd82), 0xa8);
        // A8 0267
        gbc.setState(0x5c0f, 0x429, 0xa9f0, 0xf0df, 0x8282, 0xacca, 0x1, 0x0);
        gbc.writeMem(0x5c0f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x429);
        EXPECT(gbc.pc(), 0x5c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0268
        gbc.setState(0xe7dd, 0xe3e7, 0x220, 0x56aa, 0xac09, 0x9f72, 0x1, 0x0);
        gbc.writeMem(0xe7dd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe3e7);
        EXPECT(gbc.pc(), 0xe7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7dd), 0xa8);
        // A8 0269
        gbc.setState(0x93c6, 0xbfe6, 0xc3d0, 0xe0da, 0x5245, 0x44c4, 0x1, 0x0);
        gbc.writeMem(0x93c6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbfe6);
        EXPECT(gbc.pc(), 0x93c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c6), 0xa8);
        // A8 026A
        gbc.setState(0x8d6a, 0x850f, 0x1a00, 0x8037, 0x6105, 0xea62, 0x1, 0x0);
        gbc.writeMem(0x8d6a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x850f);
        EXPECT(gbc.pc(), 0x8d6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6a), 0xa8);
        // A8 026B
        gbc.setState(0x7bf5, 0x7d4f, 0x1090, 0xfd3f, 0x7991, 0x3617, 0x1, 0x0);
        gbc.writeMem(0x7bf5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7d4f);
        EXPECT(gbc.pc(), 0x7bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 026C
        gbc.setState(0x9c64, 0x7e04, 0xe480, 0x750a, 0x81c5, 0xc3d4, 0x1, 0x0);
        gbc.writeMem(0x9c64, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7e04);
        EXPECT(gbc.pc(), 0x9c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c64), 0xa8);
        // A8 026D
        gbc.setState(0xda7a, 0x6c5e, 0x3850, 0x5b16, 0x75ff, 0x7dfb, 0x0, 0x0);
        gbc.writeMem(0xda7a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6c5e);
        EXPECT(gbc.pc(), 0xda7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7a), 0xa8);
        // A8 026E
        gbc.setState(0x891e, 0x6818, 0xe1d0, 0xa3e3, 0xbe2e, 0x98d0, 0x0, 0x1);
        gbc.writeMem(0x891e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6818);
        EXPECT(gbc.pc(), 0x891f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891e), 0xa8);
        // A8 026F
        gbc.setState(0x793e, 0x1c2a, 0x8750, 0x78d0, 0xfe16, 0xa44, 0x0, 0x1);
        gbc.writeMem(0x793e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1c2a);
        EXPECT(gbc.pc(), 0x793f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0270
        gbc.setState(0xb366, 0x5c31, 0x2a10, 0x1450, 0x2689, 0xea53, 0x1, 0x1);
        gbc.writeMem(0xb366, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5c31);
        EXPECT(gbc.pc(), 0xb367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb366), 0xa8);
        // A8 0271
        gbc.setState(0xb138, 0x24ba, 0x39c0, 0x382d, 0x3018, 0xa3a0, 0x1, 0x0);
        gbc.writeMem(0xb138, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x24ba);
        EXPECT(gbc.pc(), 0xb139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb138), 0xa8);
        // A8 0272
        gbc.setState(0x9bf8, 0xead1, 0x68c0, 0xfdc2, 0x8f7c, 0xfee, 0x0, 0x1);
        gbc.writeMem(0x9bf8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xead1);
        EXPECT(gbc.pc(), 0x9bf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf8), 0xa8);
        // A8 0273
        gbc.setState(0x37cc, 0xb7f1, 0xdbd0, 0x10b4, 0xa34, 0x5ca6, 0x1, 0x0);
        gbc.writeMem(0x37cc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb7f1);
        EXPECT(gbc.pc(), 0x37cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0274
        gbc.setState(0x24d9, 0x3946, 0x5880, 0xd9f2, 0x802f, 0xc7a9, 0x0, 0x0);
        gbc.writeMem(0x24d9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3946);
        EXPECT(gbc.pc(), 0x24da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0275
        gbc.setState(0x1444, 0xe567, 0x1ba0, 0x42ba, 0x5806, 0xee99, 0x0, 0x1);
        gbc.writeMem(0x1444, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe567);
        EXPECT(gbc.pc(), 0x1445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0276
        gbc.setState(0xe19d, 0x6045, 0xe40, 0x59d0, 0xfb96, 0x2718, 0x0, 0x1);
        gbc.writeMem(0xe19d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6045);
        EXPECT(gbc.pc(), 0xe19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19d), 0xa8);
        // A8 0277
        gbc.setState(0x9a82, 0x30e9, 0xf0a0, 0xf710, 0x99a3, 0x7b12, 0x1, 0x1);
        gbc.writeMem(0x9a82, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x30e9);
        EXPECT(gbc.pc(), 0x9a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a82), 0xa8);
        // A8 0278
        gbc.setState(0x5ddb, 0x6c1c, 0xfb60, 0x627d, 0x95c, 0xf04f, 0x0, 0x0);
        gbc.writeMem(0x5ddb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6c1c);
        EXPECT(gbc.pc(), 0x5ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0279
        gbc.setState(0xe01, 0x7703, 0x91c0, 0x8b21, 0x5fea, 0xefd7, 0x0, 0x1);
        gbc.writeMem(0xe01, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7703);
        EXPECT(gbc.pc(), 0xe02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027A
        gbc.setState(0x3083, 0x8e85, 0xdb10, 0x1f6e, 0x4d28, 0x2a4c, 0x1, 0x0);
        gbc.writeMem(0x3083, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8e85);
        EXPECT(gbc.pc(), 0x3084);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027B
        gbc.setState(0x691d, 0x18bb, 0x6880, 0x5dc6, 0xbc4f, 0x856d, 0x1, 0x1);
        gbc.writeMem(0x691d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x18bb);
        EXPECT(gbc.pc(), 0x691e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027C
        gbc.setState(0x2f2f, 0x45a1, 0x77e0, 0xabc1, 0xed94, 0x4123, 0x0, 0x0);
        gbc.writeMem(0x2f2f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x45a1);
        EXPECT(gbc.pc(), 0x2f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027D
        gbc.setState(0x206c, 0x4e92, 0x1d0, 0xac35, 0xd0b4, 0xd758, 0x0, 0x0);
        gbc.writeMem(0x206c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4e92);
        EXPECT(gbc.pc(), 0x206d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027E
        gbc.setState(0x5232, 0x7325, 0xd8c0, 0xa6fa, 0x388a, 0x6d9b, 0x1, 0x1);
        gbc.writeMem(0x5232, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7325);
        EXPECT(gbc.pc(), 0x5233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 027F
        gbc.setState(0x1e02, 0x3ea7, 0x1540, 0xed6b, 0x9ec4, 0x103, 0x1, 0x0);
        gbc.writeMem(0x1e02, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3ea7);
        EXPECT(gbc.pc(), 0x1e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0280
        gbc.setState(0x5e85, 0xabe1, 0x4270, 0x9807, 0x8b87, 0x68ae, 0x0, 0x1);
        gbc.writeMem(0x5e85, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xabe1);
        EXPECT(gbc.pc(), 0x5e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0281
        gbc.setState(0x9e4a, 0x41d7, 0xf290, 0xf9d5, 0xd2bc, 0x9e67, 0x1, 0x0);
        gbc.writeMem(0x9e4a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x41d7);
        EXPECT(gbc.pc(), 0x9e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4a), 0xa8);
        // A8 0282
        gbc.setState(0xc2e8, 0x1830, 0xea20, 0x5a4e, 0x4ad2, 0x454b, 0x1, 0x0);
        gbc.writeMem(0xc2e8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1830);
        EXPECT(gbc.pc(), 0xc2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e8), 0xa8);
        // A8 0283
        gbc.setState(0x3264, 0xbde3, 0x1eb0, 0xebd2, 0xd97f, 0xd1ff, 0x1, 0x1);
        gbc.writeMem(0x3264, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbde3);
        EXPECT(gbc.pc(), 0x3265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0284
        gbc.setState(0x856, 0x7781, 0x3010, 0xad5f, 0x966a, 0x30a1, 0x0, 0x0);
        gbc.writeMem(0x856, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7781);
        EXPECT(gbc.pc(), 0x857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0285
        gbc.setState(0xc07e, 0x348a, 0x7450, 0xb95d, 0x1a83, 0xd8ff, 0x1, 0x0);
        gbc.writeMem(0xc07e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x348a);
        EXPECT(gbc.pc(), 0xc07f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07e), 0xa8);
        // A8 0286
        gbc.setState(0x9eaa, 0xc008, 0x7d70, 0x86cc, 0xa00c, 0x753c, 0x1, 0x1);
        gbc.writeMem(0x9eaa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc008);
        EXPECT(gbc.pc(), 0x9eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eaa), 0xa8);
        // A8 0287
        gbc.setState(0xfdb, 0x3c02, 0x2410, 0x2963, 0x1cdd, 0xfc70, 0x1, 0x1);
        gbc.writeMem(0xfdb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3c02);
        EXPECT(gbc.pc(), 0xfdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0288
        gbc.setState(0x2183, 0x2bb9, 0xc4e0, 0xb00e, 0xca4, 0xe35a, 0x1, 0x1);
        gbc.writeMem(0x2183, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2bb9);
        EXPECT(gbc.pc(), 0x2184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 028A
        gbc.setState(0x599d, 0x635d, 0xe4f0, 0x411, 0xae15, 0x8f1, 0x0, 0x1);
        gbc.writeMem(0x599d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x635d);
        EXPECT(gbc.pc(), 0x599e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 028B
        gbc.setState(0x7d1a, 0xd1d, 0x3ec0, 0xa24f, 0x46fa, 0xee93, 0x1, 0x1);
        gbc.writeMem(0x7d1a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd1d);
        EXPECT(gbc.pc(), 0x7d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 028C
        gbc.setState(0x8a5, 0x5a3a, 0xbb40, 0xce2a, 0xc7c5, 0xe256, 0x1, 0x0);
        gbc.writeMem(0x8a5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5a3a);
        EXPECT(gbc.pc(), 0x8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 028D
        gbc.setState(0xca73, 0xbbed, 0xd00, 0x5789, 0x3954, 0x4e83, 0x1, 0x0);
        gbc.writeMem(0xca73, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbbed);
        EXPECT(gbc.pc(), 0xca74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca73), 0xa8);
        // A8 028E
        gbc.setState(0x694f, 0x9249, 0xa390, 0x4bd2, 0x5dce, 0x9722, 0x1, 0x1);
        gbc.writeMem(0x694f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9249);
        EXPECT(gbc.pc(), 0x6950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 028F
        gbc.setState(0xb3de, 0x7755, 0x7ba0, 0x92, 0xb12f, 0x64e1, 0x1, 0x0);
        gbc.writeMem(0xb3de, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7755);
        EXPECT(gbc.pc(), 0xb3df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3de), 0xa8);
        // A8 0290
        gbc.setState(0xd0df, 0x38e5, 0xf5c0, 0xe880, 0x8e4a, 0x6897, 0x1, 0x1);
        gbc.writeMem(0xd0df, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x38e5);
        EXPECT(gbc.pc(), 0xd0e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0df), 0xa8);
        // A8 0291
        gbc.setState(0xe380, 0xc667, 0x7870, 0xce14, 0x4c0e, 0xd95c, 0x1, 0x1);
        gbc.writeMem(0xe380, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc667);
        EXPECT(gbc.pc(), 0xe381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe380), 0xa8);
        // A8 0292
        gbc.setState(0x3c4f, 0x6807, 0xe8b0, 0xf841, 0x940d, 0xc7bc, 0x1, 0x0);
        gbc.writeMem(0x3c4f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6807);
        EXPECT(gbc.pc(), 0x3c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0293
        gbc.setState(0x90db, 0x1f7c, 0x6ca0, 0x4e3, 0x8918, 0x6a83, 0x1, 0x0);
        gbc.writeMem(0x90db, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1f7c);
        EXPECT(gbc.pc(), 0x90dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90db), 0xa8);
        // A8 0294
        gbc.setState(0xdfa9, 0x535d, 0x31a0, 0xe6d7, 0x4a83, 0x5e77, 0x1, 0x0);
        gbc.writeMem(0xdfa9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x535d);
        EXPECT(gbc.pc(), 0xdfaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfa9), 0xa8);
        // A8 0295
        gbc.setState(0x7637, 0x5833, 0xed80, 0x8574, 0x4216, 0x353a, 0x0, 0x1);
        gbc.writeMem(0x7637, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5833);
        EXPECT(gbc.pc(), 0x7638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0296
        gbc.setState(0xd88f, 0x83b5, 0x7970, 0xd6be, 0x5886, 0xa392, 0x1, 0x1);
        gbc.writeMem(0xd88f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x83b5);
        EXPECT(gbc.pc(), 0xd890);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88f), 0xa8);
        // A8 0298
        gbc.setState(0x50d4, 0x81a, 0xfc70, 0x887a, 0x4cca, 0x8d28, 0x1, 0x1);
        gbc.writeMem(0x50d4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x81a);
        EXPECT(gbc.pc(), 0x50d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0299
        gbc.setState(0x5c31, 0xb032, 0xe8b0, 0x9451, 0x7116, 0x6308, 0x0, 0x1);
        gbc.writeMem(0x5c31, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb032);
        EXPECT(gbc.pc(), 0x5c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 029A
        gbc.setState(0x6bc9, 0x2405, 0x2540, 0xc910, 0xa498, 0x511b, 0x1, 0x1);
        gbc.writeMem(0x6bc9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2405);
        EXPECT(gbc.pc(), 0x6bca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 029B
        gbc.setState(0xdebb, 0x53c4, 0x1520, 0xfe71, 0xca38, 0x8225, 0x0, 0x1);
        gbc.writeMem(0xdebb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x53c4);
        EXPECT(gbc.pc(), 0xdebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebb), 0xa8);
        // A8 029C
        gbc.setState(0x21c, 0xec98, 0xeec0, 0x766e, 0x7ff1, 0x271c, 0x0, 0x0);
        gbc.writeMem(0x21c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xec98);
        EXPECT(gbc.pc(), 0x21d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 029D
        gbc.setState(0x22e, 0x42b9, 0x8a40, 0xb218, 0x3ebb, 0xa8a0, 0x0, 0x1);
        gbc.writeMem(0x22e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x42b9);
        EXPECT(gbc.pc(), 0x22f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 029E
        gbc.setState(0xa14d, 0xa92c, 0x5c60, 0xaa3f, 0x5cfe, 0xecc2, 0x0, 0x1);
        gbc.writeMem(0xa14d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa92c);
        EXPECT(gbc.pc(), 0xa14e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa14d), 0xa8);
        // A8 029F
        gbc.setState(0xccc6, 0x6b47, 0xaf10, 0x630e, 0xa14b, 0x306c, 0x1, 0x0);
        gbc.writeMem(0xccc6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6b47);
        EXPECT(gbc.pc(), 0xccc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc6), 0xa8);
        // A8 02A1
        gbc.setState(0xd21f, 0xc07d, 0xab10, 0x1f60, 0x3714, 0xf16a, 0x1, 0x0);
        gbc.writeMem(0xd21f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc07d);
        EXPECT(gbc.pc(), 0xd220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd21f), 0xa8);
        // A8 02A2
        gbc.setState(0x918, 0x20ef, 0xc480, 0x26c2, 0xe9c9, 0x6cb4, 0x0, 0x1);
        gbc.writeMem(0x918, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x20ef);
        EXPECT(gbc.pc(), 0x919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02A3
        gbc.setState(0x5183, 0x116e, 0x1a80, 0x346b, 0xe3aa, 0xb821, 0x1, 0x1);
        gbc.writeMem(0x5183, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0x5184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02A4
        gbc.setState(0xb1d, 0x451b, 0x5060, 0x52a2, 0xe52f, 0x27af, 0x0, 0x0);
        gbc.writeMem(0xb1d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x451b);
        EXPECT(gbc.pc(), 0xb1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02A5
        gbc.setState(0xeb07, 0x5267, 0x4000, 0xdfd3, 0x234, 0xe9c8, 0x0, 0x0);
        gbc.writeMem(0xeb07, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5267);
        EXPECT(gbc.pc(), 0xeb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb07), 0xa8);
        // A8 02A6
        gbc.setState(0xe738, 0xb1ec, 0xee00, 0x857c, 0xc080, 0x237c, 0x1, 0x0);
        gbc.writeMem(0xe738, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb1ec);
        EXPECT(gbc.pc(), 0xe739);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe738), 0xa8);
        // A8 02A7
        gbc.setState(0x39d5, 0x2d8c, 0x3410, 0x9552, 0x436a, 0xf64a, 0x0, 0x0);
        gbc.writeMem(0x39d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2d8c);
        EXPECT(gbc.pc(), 0x39d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02A8
        gbc.setState(0x2d56, 0x108c, 0xd0f0, 0xf5f0, 0x3e23, 0x2bb, 0x0, 0x1);
        gbc.writeMem(0x2d56, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x108c);
        EXPECT(gbc.pc(), 0x2d57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02A9
        gbc.setState(0x2592, 0x52f4, 0x1680, 0xb61e, 0x2566, 0xa3a8, 0x1, 0x0);
        gbc.writeMem(0x2592, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x52f4);
        EXPECT(gbc.pc(), 0x2593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02AA
        gbc.setState(0xe2ea, 0x22e1, 0xcd70, 0xe6ba, 0xe0e3, 0xcfe6, 0x0, 0x0);
        gbc.writeMem(0xe2ea, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x22e1);
        EXPECT(gbc.pc(), 0xe2eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ea), 0xa8);
        // A8 02AB
        gbc.setState(0x6468, 0x2cc5, 0x3e40, 0xa691, 0x7e59, 0x70d2, 0x1, 0x1);
        gbc.writeMem(0x6468, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2cc5);
        EXPECT(gbc.pc(), 0x6469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02AD
        gbc.setState(0x5286, 0xf2b9, 0x3570, 0x5cdc, 0xee47, 0xf647, 0x1, 0x1);
        gbc.writeMem(0x5286, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf2b9);
        EXPECT(gbc.pc(), 0x5287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02AF
        gbc.setState(0xd14c, 0xc2d8, 0x9440, 0x642d, 0x967d, 0x39d, 0x0, 0x1);
        gbc.writeMem(0xd14c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc2d8);
        EXPECT(gbc.pc(), 0xd14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14c), 0xa8);
        // A8 02B0
        gbc.setState(0x2759, 0xc6cf, 0x8af0, 0x9bd2, 0x992d, 0xa6d0, 0x1, 0x0);
        gbc.writeMem(0x2759, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc6cf);
        EXPECT(gbc.pc(), 0x275a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02B1
        gbc.setState(0x14ff, 0x15ff, 0x6490, 0x9af9, 0x69ef, 0x4fc3, 0x1, 0x1);
        gbc.writeMem(0x14ff, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x15ff);
        EXPECT(gbc.pc(), 0x1500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02B2
        gbc.setState(0xe1ae, 0x5c5e, 0x3920, 0x5806, 0x9fca, 0xde1f, 0x0, 0x0);
        gbc.writeMem(0xe1ae, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5c5e);
        EXPECT(gbc.pc(), 0xe1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1ae), 0xa8);
        // A8 02B3
        gbc.setState(0x72a0, 0x8b7f, 0xbac0, 0xd378, 0xd2aa, 0xb862, 0x1, 0x0);
        gbc.writeMem(0x72a0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8b7f);
        EXPECT(gbc.pc(), 0x72a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02B4
        gbc.setState(0x2047, 0x1931, 0xa830, 0x63a0, 0x7006, 0x8f93, 0x1, 0x1);
        gbc.writeMem(0x2047, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1931);
        EXPECT(gbc.pc(), 0x2048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02B5
        gbc.setState(0x8b41, 0xc586, 0x8520, 0x3a2e, 0xd6e8, 0x2336, 0x1, 0x0);
        gbc.writeMem(0x8b41, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc586);
        EXPECT(gbc.pc(), 0x8b42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b41), 0xa8);
        // A8 02B7
        gbc.setState(0x888e, 0x8b27, 0x8470, 0xfd7c, 0xacfa, 0x9b93, 0x0, 0x0);
        gbc.writeMem(0x888e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8b27);
        EXPECT(gbc.pc(), 0x888f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x888e), 0xa8);
        // A8 02B8
        gbc.setState(0x670b, 0xd448, 0x5740, 0xb063, 0xd954, 0x2024, 0x1, 0x0);
        gbc.writeMem(0x670b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd448);
        EXPECT(gbc.pc(), 0x670c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02B9
        gbc.setState(0xabc0, 0x619, 0xd690, 0xd2c8, 0x1977, 0x1ae1, 0x0, 0x1);
        gbc.writeMem(0xabc0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x619);
        EXPECT(gbc.pc(), 0xabc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc0), 0xa8);
        // A8 02BA
        gbc.setState(0x4294, 0x6d1f, 0x3b30, 0xbc2c, 0x43f0, 0x6d3c, 0x1, 0x0);
        gbc.writeMem(0x4294, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6d1f);
        EXPECT(gbc.pc(), 0x4295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02BB
        gbc.setState(0x3c58, 0x39eb, 0xf6f0, 0x189d, 0x136c, 0xfd45, 0x1, 0x1);
        gbc.writeMem(0x3c58, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x39eb);
        EXPECT(gbc.pc(), 0x3c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02BC
        gbc.setState(0x28a4, 0xfb0b, 0x69e0, 0xf7ad, 0x52b4, 0xa006, 0x1, 0x1);
        gbc.writeMem(0x28a4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfb0b);
        EXPECT(gbc.pc(), 0x28a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02BD
        gbc.setState(0x9ee9, 0xfbb0, 0xff90, 0x40c7, 0xe4c3, 0x9c99, 0x1, 0x1);
        gbc.writeMem(0x9ee9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfbb0);
        EXPECT(gbc.pc(), 0x9eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee9), 0xa8);
        // A8 02BF
        gbc.setState(0xa46c, 0x38fb, 0x64c0, 0x2235, 0x106, 0xdcec, 0x0, 0x0);
        gbc.writeMem(0xa46c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x38fb);
        EXPECT(gbc.pc(), 0xa46d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa46c), 0xa8);
        // A8 02C0
        gbc.setState(0x3a34, 0x4742, 0x89d0, 0xf9e9, 0xdced, 0x6f44, 0x1, 0x0);
        gbc.writeMem(0x3a34, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4742);
        EXPECT(gbc.pc(), 0x3a35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02C1
        gbc.setState(0xea3c, 0xeb5f, 0x7c90, 0x6126, 0xefe1, 0xb4ab, 0x1, 0x0);
        gbc.writeMem(0xea3c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xeb5f);
        EXPECT(gbc.pc(), 0xea3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea3c), 0xa8);
        // A8 02C2
        gbc.setState(0xb767, 0x713c, 0x5d30, 0xc968, 0xb169, 0x68c2, 0x1, 0x1);
        gbc.writeMem(0xb767, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x713c);
        EXPECT(gbc.pc(), 0xb768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb767), 0xa8);
        // A8 02C3
        gbc.setState(0x8e93, 0x2931, 0x42d0, 0xe598, 0x6c95, 0xe543, 0x0, 0x0);
        gbc.writeMem(0x8e93, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2931);
        EXPECT(gbc.pc(), 0x8e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e93), 0xa8);
        // A8 02C4
        gbc.setState(0xa2a1, 0x440c, 0x7590, 0x8fbe, 0xb7ef, 0x677b, 0x0, 0x1);
        gbc.writeMem(0xa2a1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x440c);
        EXPECT(gbc.pc(), 0xa2a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a1), 0xa8);
        // A8 02C5
        gbc.setState(0x94d9, 0x3234, 0xf6a0, 0xd277, 0x220, 0xcae, 0x0, 0x1);
        gbc.writeMem(0x94d9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3234);
        EXPECT(gbc.pc(), 0x94da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d9), 0xa8);
        // A8 02C6
        gbc.setState(0xdd06, 0x2d4f, 0xa960, 0x5241, 0x70e6, 0x9fc6, 0x1, 0x0);
        gbc.writeMem(0xdd06, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2d4f);
        EXPECT(gbc.pc(), 0xdd07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd06), 0xa8);
        // A8 02C8
        gbc.setState(0x9d52, 0x47e0, 0x7800, 0xf143, 0xa9f0, 0x1d87, 0x0, 0x0);
        gbc.writeMem(0x9d52, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x47e0);
        EXPECT(gbc.pc(), 0x9d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d52), 0xa8);
        // A8 02C9
        gbc.setState(0xcc5f, 0x9f8c, 0xe500, 0xdd3b, 0xd9b7, 0xf1e9, 0x0, 0x0);
        gbc.writeMem(0xcc5f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9f8c);
        EXPECT(gbc.pc(), 0xcc60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5f), 0xa8);
        // A8 02CA
        gbc.setState(0x6750, 0x5840, 0x5be0, 0x31ab, 0x1e50, 0x2c81, 0x0, 0x1);
        gbc.writeMem(0x6750, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5840);
        EXPECT(gbc.pc(), 0x6751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02CB
        gbc.setState(0x5c20, 0x14e4, 0xb470, 0x43f, 0x65ce, 0xa193, 0x1, 0x0);
        gbc.writeMem(0x5c20, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x14e4);
        EXPECT(gbc.pc(), 0x5c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02CD
        gbc.setState(0x6ed0, 0x9f58, 0x79a0, 0x5738, 0x6f21, 0xc437, 0x1, 0x1);
        gbc.writeMem(0x6ed0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9f58);
        EXPECT(gbc.pc(), 0x6ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02CE
        gbc.setState(0x115d, 0x3602, 0x7750, 0xe1fc, 0x99f6, 0xabb6, 0x0, 0x0);
        gbc.writeMem(0x115d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3602);
        EXPECT(gbc.pc(), 0x115e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02CF
        gbc.setState(0x4551, 0x1c05, 0xa480, 0xd5f4, 0x7416, 0x3d73, 0x0, 0x0);
        gbc.writeMem(0x4551, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1c05);
        EXPECT(gbc.pc(), 0x4552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D0
        gbc.setState(0x4803, 0x8a9, 0x3680, 0xb8bd, 0x1e56, 0xf7a4, 0x0, 0x0);
        gbc.writeMem(0x4803, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8a9);
        EXPECT(gbc.pc(), 0x4804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D1
        gbc.setState(0xd397, 0x315b, 0xe1f0, 0x62c4, 0x7dec, 0x1504, 0x1, 0x0);
        gbc.writeMem(0xd397, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x315b);
        EXPECT(gbc.pc(), 0xd398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd397), 0xa8);
        // A8 02D2
        gbc.setState(0x1be0, 0xf4b5, 0xfb10, 0xecac, 0x5e6a, 0x37e2, 0x1, 0x1);
        gbc.writeMem(0x1be0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf4b5);
        EXPECT(gbc.pc(), 0x1be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D3
        gbc.setState(0xdd24, 0x7f1b, 0x7bb0, 0x3038, 0x6daa, 0x225a, 0x0, 0x0);
        gbc.writeMem(0xdd24, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7f1b);
        EXPECT(gbc.pc(), 0xdd25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd24), 0xa8);
        // A8 02D4
        gbc.setState(0x6713, 0xd4cd, 0x4da0, 0x99fd, 0x8f5d, 0xff48, 0x1, 0x0);
        gbc.writeMem(0x6713, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd4cd);
        EXPECT(gbc.pc(), 0x6714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D5
        gbc.setState(0xbc92, 0xc6e0, 0x1000, 0xfd5a, 0x8509, 0x6320, 0x1, 0x0);
        gbc.writeMem(0xbc92, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc6e0);
        EXPECT(gbc.pc(), 0xbc93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc92), 0xa8);
        // A8 02D6
        gbc.setState(0xd97f, 0x5448, 0x9e70, 0x66a1, 0x2abb, 0x5bc4, 0x1, 0x0);
        gbc.writeMem(0xd97f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5448);
        EXPECT(gbc.pc(), 0xd980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97f), 0xa8);
        // A8 02D7
        gbc.setState(0x6176, 0x66c2, 0xca50, 0xbbe0, 0x46d2, 0xa548, 0x1, 0x1);
        gbc.writeMem(0x6176, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x66c2);
        EXPECT(gbc.pc(), 0x6177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D8
        gbc.setState(0x7a13, 0x8a1f, 0xfff0, 0xb2c5, 0x442, 0xca29, 0x1, 0x0);
        gbc.writeMem(0x7a13, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8a1f);
        EXPECT(gbc.pc(), 0x7a14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02D9
        gbc.setState(0x2a72, 0xaf2b, 0xf990, 0x294c, 0x46d5, 0xf8f7, 0x1, 0x1);
        gbc.writeMem(0x2a72, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaf2b);
        EXPECT(gbc.pc(), 0x2a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02DA
        gbc.setState(0xbba, 0x89e6, 0x9d70, 0x8494, 0xaef, 0xbec1, 0x0, 0x1);
        gbc.writeMem(0xbba, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x89e6);
        EXPECT(gbc.pc(), 0xbbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02DB
        gbc.setState(0x95c9, 0xbf20, 0xcba0, 0x66c0, 0x45c6, 0x83c, 0x0, 0x0);
        gbc.writeMem(0x95c9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbf20);
        EXPECT(gbc.pc(), 0x95ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c9), 0xa8);
        // A8 02DC
        gbc.setState(0x56c9, 0x3a7b, 0xe1f0, 0x963c, 0x7129, 0x576d, 0x0, 0x1);
        gbc.writeMem(0x56c9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3a7b);
        EXPECT(gbc.pc(), 0x56ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02DD
        gbc.setState(0x4fe4, 0xea8d, 0xa4d0, 0xeeff, 0xbd35, 0x6ff5, 0x1, 0x1);
        gbc.writeMem(0x4fe4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xea8d);
        EXPECT(gbc.pc(), 0x4fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02DE
        gbc.setState(0xa37b, 0x21b9, 0x6d80, 0xd961, 0x87b5, 0x7d60, 0x1, 0x0);
        gbc.writeMem(0xa37b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x21b9);
        EXPECT(gbc.pc(), 0xa37c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa37b), 0xa8);
        // A8 02DF
        gbc.setState(0x20c4, 0x931e, 0xc0b0, 0xb6c, 0xfb0d, 0xf9b6, 0x1, 0x1);
        gbc.writeMem(0x20c4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x931e);
        EXPECT(gbc.pc(), 0x20c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02E0
        gbc.setState(0xd0ff, 0xc376, 0x7f60, 0xddf5, 0xdee3, 0xaaf6, 0x0, 0x0);
        gbc.writeMem(0xd0ff, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc376);
        EXPECT(gbc.pc(), 0xd100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ff), 0xa8);
        // A8 02E2
        gbc.setState(0xe7ba, 0x789e, 0x4c10, 0x9009, 0x977a, 0xb9bf, 0x0, 0x1);
        gbc.writeMem(0xe7ba, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x789e);
        EXPECT(gbc.pc(), 0xe7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ba), 0xa8);
        // A8 02E3
        gbc.setState(0xbfc4, 0xe566, 0x3fc0, 0x9a18, 0xfa4, 0x74ed, 0x0, 0x0);
        gbc.writeMem(0xbfc4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe566);
        EXPECT(gbc.pc(), 0xbfc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc4), 0xa8);
        // A8 02E4
        gbc.setState(0x1146, 0x9eb9, 0xcf40, 0xe03f, 0x5457, 0x3427, 0x1, 0x0);
        gbc.writeMem(0x1146, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9eb9);
        EXPECT(gbc.pc(), 0x1147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02E6
        gbc.setState(0x2e4b, 0x3568, 0x2e10, 0xd784, 0x948f, 0x1118, 0x1, 0x0);
        gbc.writeMem(0x2e4b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3568);
        EXPECT(gbc.pc(), 0x2e4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02E7
        gbc.setState(0xad09, 0xe8a3, 0xe9a0, 0x2096, 0x153e, 0xfd15, 0x1, 0x0);
        gbc.writeMem(0xad09, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe8a3);
        EXPECT(gbc.pc(), 0xad0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad09), 0xa8);
        // A8 02E8
        gbc.setState(0xaa80, 0x73d5, 0x1e00, 0xae01, 0xcee5, 0x4211, 0x1, 0x1);
        gbc.writeMem(0xaa80, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x73d5);
        EXPECT(gbc.pc(), 0xaa81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa80), 0xa8);
        // A8 02E9
        gbc.setState(0xf18, 0xb5fa, 0x8cf0, 0x7d3a, 0x1fe1, 0x8f4, 0x0, 0x0);
        gbc.writeMem(0xf18, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb5fa);
        EXPECT(gbc.pc(), 0xf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02EA
        gbc.setState(0x328b, 0x60f8, 0x8740, 0x5e48, 0xf27e, 0xb3bd, 0x1, 0x0);
        gbc.writeMem(0x328b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x60f8);
        EXPECT(gbc.pc(), 0x328c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02EB
        gbc.setState(0xd7b7, 0x5912, 0x4640, 0x1b9d, 0xd0f4, 0xe488, 0x1, 0x1);
        gbc.writeMem(0xd7b7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5912);
        EXPECT(gbc.pc(), 0xd7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b7), 0xa8);
        // A8 02EC
        gbc.setState(0x8f16, 0x56d7, 0x1340, 0xfd41, 0xad75, 0xb236, 0x1, 0x0);
        gbc.writeMem(0x8f16, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x56d7);
        EXPECT(gbc.pc(), 0x8f17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f16), 0xa8);
        // A8 02ED
        gbc.setState(0xe2d5, 0xb38b, 0x4f90, 0x296e, 0x48ab, 0xd481, 0x0, 0x0);
        gbc.writeMem(0xe2d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb38b);
        EXPECT(gbc.pc(), 0xe2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d5), 0xa8);
        // A8 02EE
        gbc.setState(0x43fd, 0xe03b, 0x14b0, 0x9591, 0xa86b, 0x9bea, 0x1, 0x1);
        gbc.writeMem(0x43fd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe03b);
        EXPECT(gbc.pc(), 0x43fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02EF
        gbc.setState(0xbd21, 0x1f03, 0x8160, 0x3e35, 0xfdae, 0x5f72, 0x1, 0x1);
        gbc.writeMem(0xbd21, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1f03);
        EXPECT(gbc.pc(), 0xbd22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd21), 0xa8);
        // A8 02F0
        gbc.setState(0x890, 0x5959, 0x920, 0x7798, 0xd810, 0xd090, 0x1, 0x0);
        gbc.writeMem(0x890, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5959);
        EXPECT(gbc.pc(), 0x891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F1
        gbc.setState(0x935, 0x8a4d, 0x3d40, 0xa422, 0x3adb, 0xb849, 0x1, 0x0);
        gbc.writeMem(0x935, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8a4d);
        EXPECT(gbc.pc(), 0x936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F2
        gbc.setState(0xd80, 0xa02f, 0xe910, 0x913e, 0x74c7, 0xf63, 0x0, 0x0);
        gbc.writeMem(0xd80, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa02f);
        EXPECT(gbc.pc(), 0xd81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F4
        gbc.setState(0x71e5, 0x494c, 0x5690, 0xc56f, 0xaa67, 0x228e, 0x0, 0x0);
        gbc.writeMem(0x71e5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x494c);
        EXPECT(gbc.pc(), 0x71e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F5
        gbc.setState(0xe13e, 0x59b2, 0xf8a0, 0x9625, 0x9a03, 0xb9e2, 0x1, 0x1);
        gbc.writeMem(0xe13e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x59b2);
        EXPECT(gbc.pc(), 0xe13f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe13e), 0xa8);
        // A8 02F6
        gbc.setState(0x346d, 0xe3ff, 0xcf80, 0xb76b, 0x63fe, 0xf17e, 0x0, 0x1);
        gbc.writeMem(0x346d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe3ff);
        EXPECT(gbc.pc(), 0x346e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F7
        gbc.setState(0x87, 0xff, 0xcf80, 0x955b, 0xb2d8, 0x26d0, 0x0, 0x1);
        gbc.writeMem(0x87, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xff);
        EXPECT(gbc.pc(), 0x88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02F8
        gbc.setState(0xb567, 0x2b13, 0xd200, 0x5531, 0xa488, 0x24c6, 0x1, 0x0);
        gbc.writeMem(0xb567, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2b13);
        EXPECT(gbc.pc(), 0xb568);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb567), 0xa8);
        // A8 02F9
        gbc.setState(0x7d44, 0xbbfc, 0x3010, 0xbe2f, 0x32e2, 0xc210, 0x0, 0x0);
        gbc.writeMem(0x7d44, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbbfc);
        EXPECT(gbc.pc(), 0x7d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02FA
        gbc.setState(0xb6d1, 0xe6ad, 0xa610, 0xfadc, 0xacf4, 0x3d6c, 0x1, 0x1);
        gbc.writeMem(0xb6d1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe6ad);
        EXPECT(gbc.pc(), 0xb6d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d1), 0xa8);
        // A8 02FB
        gbc.setState(0x900, 0x177b, 0xe70, 0xf112, 0x7c00, 0xd3be, 0x0, 0x0);
        gbc.writeMem(0x900, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x177b);
        EXPECT(gbc.pc(), 0x901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02FC
        gbc.setState(0x4001, 0x12da, 0xe910, 0x4320, 0xe67e, 0xca35, 0x1, 0x0);
        gbc.writeMem(0x4001, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x12da);
        EXPECT(gbc.pc(), 0x4002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 02FD
        gbc.setState(0xb637, 0x994b, 0x8fa0, 0xfffa, 0x7d41, 0x39bf, 0x0, 0x0);
        gbc.writeMem(0xb637, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x994b);
        EXPECT(gbc.pc(), 0xb638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb637), 0xa8);
        // A8 02FF
        gbc.setState(0x9126, 0x2c0, 0xcf30, 0x54e7, 0xb8fd, 0x221c, 0x1, 0x0);
        gbc.writeMem(0x9126, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2c0);
        EXPECT(gbc.pc(), 0x9127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9126), 0xa8);
        // A8 0300
        gbc.setState(0x6f51, 0x40ec, 0x7660, 0x324, 0xf37b, 0xdffc, 0x1, 0x0);
        gbc.writeMem(0x6f51, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x40ec);
        EXPECT(gbc.pc(), 0x6f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0302
        gbc.setState(0x4f9e, 0x5352, 0xa590, 0x9704, 0xe240, 0xb43b, 0x1, 0x1);
        gbc.writeMem(0x4f9e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5352);
        EXPECT(gbc.pc(), 0x4f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0303
        gbc.setState(0x5dd, 0xcdb8, 0x5590, 0x91ff, 0x58d6, 0xc381, 0x1, 0x1);
        gbc.writeMem(0x5dd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0x5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0304
        gbc.setState(0xeaed, 0xc4f4, 0xf910, 0xd31c, 0x93fb, 0xe0e0, 0x1, 0x1);
        gbc.writeMem(0xeaed, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc4f4);
        EXPECT(gbc.pc(), 0xeaee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaed), 0xa8);
        // A8 0305
        gbc.setState(0x7b17, 0x9c05, 0x26d0, 0x441a, 0x8ae3, 0xe01, 0x1, 0x1);
        gbc.writeMem(0x7b17, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9c05);
        EXPECT(gbc.pc(), 0x7b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0306
        gbc.setState(0x40bb, 0xb3d0, 0xfa60, 0xc33e, 0xea32, 0x43af, 0x1, 0x1);
        gbc.writeMem(0x40bb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb3d0);
        EXPECT(gbc.pc(), 0x40bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0307
        gbc.setState(0x5fd0, 0x77d1, 0xf140, 0xecf2, 0x10fd, 0x9a5e, 0x0, 0x0);
        gbc.writeMem(0x5fd0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x77d1);
        EXPECT(gbc.pc(), 0x5fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0308
        gbc.setState(0xc9ba, 0x1052, 0xfcb0, 0x4732, 0x8b16, 0xdbe8, 0x1, 0x0);
        gbc.writeMem(0xc9ba, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1052);
        EXPECT(gbc.pc(), 0xc9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ba), 0xa8);
        // A8 0309
        gbc.setState(0xbc92, 0x1c5, 0x8f50, 0x4221, 0xc6ef, 0x66c3, 0x1, 0x0);
        gbc.writeMem(0xbc92, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1c5);
        EXPECT(gbc.pc(), 0xbc93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc92), 0xa8);
        // A8 030A
        gbc.setState(0x6d34, 0xa5a6, 0xe3e0, 0xef26, 0x8909, 0xdf8c, 0x0, 0x0);
        gbc.writeMem(0x6d34, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa5a6);
        EXPECT(gbc.pc(), 0x6d35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 030B
        gbc.setState(0x74c, 0x7122, 0xda80, 0x38e5, 0x9aa1, 0x1be0, 0x1, 0x0);
        gbc.writeMem(0x74c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7122);
        EXPECT(gbc.pc(), 0x74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 030C
        gbc.setState(0xea35, 0xa8b5, 0xd6a0, 0x79a1, 0x91f3, 0xc9d8, 0x0, 0x0);
        gbc.writeMem(0xea35, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa8b5);
        EXPECT(gbc.pc(), 0xea36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea35), 0xa8);
        // A8 030D
        gbc.setState(0x55bc, 0x4bcf, 0x66a0, 0x8895, 0x356b, 0x2293, 0x0, 0x0);
        gbc.writeMem(0x55bc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4bcf);
        EXPECT(gbc.pc(), 0x55bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 030E
        gbc.setState(0x40db, 0x36d2, 0x4c00, 0x6d9d, 0xa88d, 0xa8eb, 0x0, 0x0);
        gbc.writeMem(0x40db, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x36d2);
        EXPECT(gbc.pc(), 0x40dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 030F
        gbc.setState(0x9013, 0x75bc, 0xb200, 0x31c3, 0xce9a, 0xb87b, 0x1, 0x0);
        gbc.writeMem(0x9013, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x75bc);
        EXPECT(gbc.pc(), 0x9014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9013), 0xa8);
        // A8 0310
        gbc.setState(0x2fc5, 0x99f0, 0xed90, 0x78ec, 0xece, 0xa11b, 0x0, 0x1);
        gbc.writeMem(0x2fc5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x99f0);
        EXPECT(gbc.pc(), 0x2fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0311
        gbc.setState(0xd2c0, 0xfcc3, 0x1430, 0xbc7d, 0x9286, 0x2424, 0x0, 0x1);
        gbc.writeMem(0xd2c0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfcc3);
        EXPECT(gbc.pc(), 0xd2c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c0), 0xa8);
        // A8 0312
        gbc.setState(0x4faa, 0x3f92, 0xf5f0, 0xd8a8, 0xb14d, 0xc5ee, 0x0, 0x0);
        gbc.writeMem(0x4faa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3f92);
        EXPECT(gbc.pc(), 0x4fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0313
        gbc.setState(0x5bfe, 0xc01c, 0xc960, 0x10d0, 0x706f, 0x3295, 0x1, 0x1);
        gbc.writeMem(0x5bfe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc01c);
        EXPECT(gbc.pc(), 0x5bff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0314
        gbc.setState(0x1803, 0x7007, 0x8b10, 0xb32d, 0xf35f, 0x933f, 0x0, 0x1);
        gbc.writeMem(0x1803, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7007);
        EXPECT(gbc.pc(), 0x1804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0315
        gbc.setState(0xb372, 0x1fb, 0xb140, 0xaf8d, 0xd5fb, 0x6eb3, 0x1, 0x1);
        gbc.writeMem(0xb372, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0xb373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb372), 0xa8);
        // A8 0316
        gbc.setState(0xd5ef, 0x7b74, 0x56d0, 0xcbcd, 0x32e6, 0x637c, 0x0, 0x0);
        gbc.writeMem(0xd5ef, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7b74);
        EXPECT(gbc.pc(), 0xd5f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ef), 0xa8);
        // A8 0317
        gbc.setState(0x3632, 0x6774, 0x6770, 0xca7b, 0xd30b, 0x33dd, 0x1, 0x1);
        gbc.writeMem(0x3632, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6774);
        EXPECT(gbc.pc(), 0x3633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0318
        gbc.setState(0xba8b, 0x5c7a, 0x8e80, 0x8235, 0x9d3f, 0xed8f, 0x1, 0x1);
        gbc.writeMem(0xba8b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5c7a);
        EXPECT(gbc.pc(), 0xba8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba8b), 0xa8);
        // A8 0319
        gbc.setState(0xdd06, 0x4a6f, 0xb430, 0x2455, 0xe37c, 0x1a86, 0x1, 0x0);
        gbc.writeMem(0xdd06, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4a6f);
        EXPECT(gbc.pc(), 0xdd07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd06), 0xa8);
        // A8 031A
        gbc.setState(0x142e, 0x1d28, 0x2d50, 0x4830, 0x9401, 0xe086, 0x0, 0x0);
        gbc.writeMem(0x142e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1d28);
        EXPECT(gbc.pc(), 0x142f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 031C
        gbc.setState(0x76a1, 0x8eb0, 0xac30, 0x528d, 0x3143, 0x474d, 0x1, 0x0);
        gbc.writeMem(0x76a1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8eb0);
        EXPECT(gbc.pc(), 0x76a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 031D
        gbc.setState(0xe8be, 0xc8b9, 0x8d00, 0x318e, 0x1d4b, 0xff69, 0x0, 0x1);
        gbc.writeMem(0xe8be, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0xe8bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8be), 0xa8);
        // A8 031E
        gbc.setState(0xc996, 0xd83e, 0x7700, 0xcb64, 0x4142, 0x419, 0x1, 0x0);
        gbc.writeMem(0xc996, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd83e);
        EXPECT(gbc.pc(), 0xc997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc996), 0xa8);
        // A8 031F
        gbc.setState(0x12e2, 0x4fe9, 0xf8d0, 0xf641, 0xf675, 0xd558, 0x1, 0x0);
        gbc.writeMem(0x12e2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4fe9);
        EXPECT(gbc.pc(), 0x12e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0320
        gbc.setState(0x9a5b, 0xa67e, 0xdf40, 0xb26, 0x1573, 0x1fb6, 0x0, 0x0);
        gbc.writeMem(0x9a5b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa67e);
        EXPECT(gbc.pc(), 0x9a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5b), 0xa8);
        // A8 0321
        gbc.setState(0x4a09, 0x7192, 0x4130, 0x5772, 0xac9e, 0x1885, 0x1, 0x1);
        gbc.writeMem(0x4a09, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7192);
        EXPECT(gbc.pc(), 0x4a0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0322
        gbc.setState(0x90ef, 0xff68, 0x1960, 0x7874, 0x9432, 0x3d63, 0x1, 0x1);
        gbc.writeMem(0x90ef, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xff68);
        EXPECT(gbc.pc(), 0x90f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ef), 0xa8);
        // A8 0323
        gbc.setState(0x8a3f, 0x9cf3, 0x9440, 0x3aaa, 0xea15, 0x56c0, 0x0, 0x1);
        gbc.writeMem(0x8a3f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9cf3);
        EXPECT(gbc.pc(), 0x8a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3f), 0xa8);
        // A8 0324
        gbc.setState(0x7a03, 0x7953, 0x6380, 0xa896, 0xa9d3, 0xdd35, 0x1, 0x0);
        gbc.writeMem(0x7a03, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7953);
        EXPECT(gbc.pc(), 0x7a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0325
        gbc.setState(0x614b, 0xa802, 0x9fb0, 0x9156, 0xfbde, 0x7cf6, 0x1, 0x0);
        gbc.writeMem(0x614b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa802);
        EXPECT(gbc.pc(), 0x614c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0326
        gbc.setState(0x1c79, 0x4f9a, 0xe760, 0x4917, 0x1874, 0xe913, 0x1, 0x0);
        gbc.writeMem(0x1c79, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4f9a);
        EXPECT(gbc.pc(), 0x1c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0327
        gbc.setState(0xa134, 0x5031, 0xe8d0, 0x1daa, 0xa29a, 0x2d3d, 0x1, 0x0);
        gbc.writeMem(0xa134, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5031);
        EXPECT(gbc.pc(), 0xa135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa134), 0xa8);
        // A8 0328
        gbc.setState(0x5191, 0x246f, 0x4bd0, 0x953, 0x6a51, 0x8b2e, 0x0, 0x1);
        gbc.writeMem(0x5191, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x246f);
        EXPECT(gbc.pc(), 0x5192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0329
        gbc.setState(0x4eed, 0xc17d, 0x6b20, 0x735, 0x6aa5, 0xd5de, 0x1, 0x0);
        gbc.writeMem(0x4eed, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc17d);
        EXPECT(gbc.pc(), 0x4eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 032A
        gbc.setState(0x8377, 0x293c, 0x5c80, 0xc429, 0xa6c, 0xbd62, 0x0, 0x0);
        gbc.writeMem(0x8377, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x293c);
        EXPECT(gbc.pc(), 0x8378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8377), 0xa8);
        // A8 032B
        gbc.setState(0x520, 0x4168, 0x1f10, 0xbf7a, 0xdf42, 0xab17, 0x0, 0x1);
        gbc.writeMem(0x520, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4168);
        EXPECT(gbc.pc(), 0x521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 032D
        gbc.setState(0x7d79, 0xa9ed, 0xa8f0, 0xe99e, 0x4354, 0x8e36, 0x0, 0x0);
        gbc.writeMem(0x7d79, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa9ed);
        EXPECT(gbc.pc(), 0x7d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 032E
        gbc.setState(0x2db0, 0x5c0b, 0x35a0, 0x12f0, 0x4316, 0x10f8, 0x1, 0x0);
        gbc.writeMem(0x2db0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5c0b);
        EXPECT(gbc.pc(), 0x2db1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 032F
        gbc.setState(0xe82a, 0x36dc, 0xe20, 0xa43c, 0x3dbb, 0x1f76, 0x0, 0x0);
        gbc.writeMem(0xe82a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x36dc);
        EXPECT(gbc.pc(), 0xe82b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82a), 0xa8);
        // A8 0330
        gbc.setState(0x1b52, 0x20f2, 0x9e10, 0xe1e1, 0x819f, 0xa4b8, 0x1, 0x1);
        gbc.writeMem(0x1b52, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x20f2);
        EXPECT(gbc.pc(), 0x1b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0331
        gbc.setState(0xd0df, 0x1e96, 0x2d20, 0x8732, 0x308a, 0xf916, 0x1, 0x0);
        gbc.writeMem(0xd0df, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1e96);
        EXPECT(gbc.pc(), 0xd0e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0df), 0xa8);
        // A8 0332
        gbc.setState(0xab80, 0xc0df, 0xe680, 0x87b, 0x80df, 0x9f7f, 0x1, 0x1);
        gbc.writeMem(0xab80, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc0df);
        EXPECT(gbc.pc(), 0xab81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab80), 0xa8);
        // A8 0333
        gbc.setState(0x8f35, 0x538, 0xed20, 0x93eb, 0xb07e, 0x1f9, 0x0, 0x0);
        gbc.writeMem(0x8f35, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x538);
        EXPECT(gbc.pc(), 0x8f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f35), 0xa8);
        // A8 0334
        gbc.setState(0x9af9, 0x1d7b, 0xe630, 0xc5fe, 0xb26c, 0xfb23, 0x1, 0x0);
        gbc.writeMem(0x9af9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1d7b);
        EXPECT(gbc.pc(), 0x9afa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af9), 0xa8);
        // A8 0335
        gbc.setState(0xb777, 0xe205, 0x5930, 0x5c35, 0x5a2c, 0x54d4, 0x1, 0x0);
        gbc.writeMem(0xb777, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe205);
        EXPECT(gbc.pc(), 0xb778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb777), 0xa8);
        // A8 0336
        gbc.setState(0xbf65, 0x54d9, 0x9c70, 0x61fa, 0x109a, 0x753, 0x0, 0x1);
        gbc.writeMem(0xbf65, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x54d9);
        EXPECT(gbc.pc(), 0xbf66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf65), 0xa8);
        // A8 0337
        gbc.setState(0xcfb9, 0x94cf, 0xffe0, 0xc68e, 0x7b04, 0xe6aa, 0x0, 0x1);
        gbc.writeMem(0xcfb9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x94cf);
        EXPECT(gbc.pc(), 0xcfba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb9), 0xa8);
        // A8 0339
        gbc.setState(0x35d5, 0xa8fb, 0xf910, 0xfd45, 0x1703, 0x1fcb, 0x1, 0x1);
        gbc.writeMem(0x35d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa8fb);
        EXPECT(gbc.pc(), 0x35d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 033A
        gbc.setState(0xd002, 0xccd, 0x5920, 0x6df0, 0x8551, 0xd778, 0x1, 0x0);
        gbc.writeMem(0xd002, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xccd);
        EXPECT(gbc.pc(), 0xd003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd002), 0xa8);
        // A8 033B
        gbc.setState(0x6e67, 0x9e3f, 0xddf0, 0xb24b, 0xb2ce, 0x1338, 0x0, 0x0);
        gbc.writeMem(0x6e67, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9e3f);
        EXPECT(gbc.pc(), 0x6e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 033C
        gbc.setState(0xb196, 0x4870, 0x7260, 0x61fc, 0x1f7a, 0x7783, 0x1, 0x1);
        gbc.writeMem(0xb196, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4870);
        EXPECT(gbc.pc(), 0xb197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb196), 0xa8);
        // A8 033D
        gbc.setState(0x2ba0, 0x4148, 0x4e90, 0xbb5b, 0x2d9c, 0x496a, 0x0, 0x0);
        gbc.writeMem(0x2ba0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4148);
        EXPECT(gbc.pc(), 0x2ba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 033E
        gbc.setState(0x4074, 0x8528, 0x1260, 0x1e88, 0x94be, 0xc728, 0x1, 0x0);
        gbc.writeMem(0x4074, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8528);
        EXPECT(gbc.pc(), 0x4075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 033F
        gbc.setState(0x95fa, 0xe450, 0xfa60, 0x7785, 0x71f3, 0x43a7, 0x0, 0x1);
        gbc.writeMem(0x95fa, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe450);
        EXPECT(gbc.pc(), 0x95fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fa), 0xa8);
        // A8 0340
        gbc.setState(0xa301, 0xc872, 0x80f0, 0x2088, 0xe030, 0x3cc, 0x0, 0x1);
        gbc.writeMem(0xa301, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc872);
        EXPECT(gbc.pc(), 0xa302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa301), 0xa8);
        // A8 0341
        gbc.setState(0xe635, 0xbe88, 0xaf30, 0x4b36, 0x2cbd, 0x7a27, 0x1, 0x1);
        gbc.writeMem(0xe635, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0xe636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe635), 0xa8);
        // A8 0342
        gbc.setState(0xd32, 0x4aee, 0xaab0, 0x4fcb, 0x29d9, 0x706d, 0x0, 0x1);
        gbc.writeMem(0xd32, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4aee);
        EXPECT(gbc.pc(), 0xd33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0343
        gbc.setState(0x3b6d, 0x73c8, 0x880, 0x9ce0, 0x58f6, 0x75d1, 0x0, 0x1);
        gbc.writeMem(0x3b6d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x73c8);
        EXPECT(gbc.pc(), 0x3b6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0344
        gbc.setState(0xa337, 0x5049, 0xb980, 0xcbc9, 0xbbad, 0xa82e, 0x1, 0x0);
        gbc.writeMem(0xa337, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5049);
        EXPECT(gbc.pc(), 0xa338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa337), 0xa8);
        // A8 0345
        gbc.setState(0x8550, 0x4883, 0x35b0, 0xf45, 0xc76d, 0x74d5, 0x1, 0x0);
        gbc.writeMem(0x8550, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4883);
        EXPECT(gbc.pc(), 0x8551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8550), 0xa8);
        // A8 0346
        gbc.setState(0x447c, 0xba50, 0x4910, 0x97a6, 0x8f31, 0x73b5, 0x0, 0x1);
        gbc.writeMem(0x447c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xba50);
        EXPECT(gbc.pc(), 0x447d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0347
        gbc.setState(0x80a1, 0x852d, 0x2180, 0x728c, 0x78e1, 0x7cf8, 0x1, 0x0);
        gbc.writeMem(0x80a1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x852d);
        EXPECT(gbc.pc(), 0x80a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a1), 0xa8);
        // A8 0348
        gbc.setState(0x9dfd, 0x3bb, 0x4770, 0xcc69, 0xa529, 0x4a28, 0x0, 0x0);
        gbc.writeMem(0x9dfd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3bb);
        EXPECT(gbc.pc(), 0x9dfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dfd), 0xa8);
        // A8 0349
        gbc.setState(0x232e, 0xda06, 0x8f60, 0xf055, 0x86f3, 0x9af4, 0x1, 0x0);
        gbc.writeMem(0x232e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xda06);
        EXPECT(gbc.pc(), 0x232f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 034A
        gbc.setState(0xdf9c, 0x98f6, 0x5490, 0x891f, 0x76da, 0x5c54, 0x1, 0x0);
        gbc.writeMem(0xdf9c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x98f6);
        EXPECT(gbc.pc(), 0xdf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf9c), 0xa8);
        // A8 034B
        gbc.setState(0xa86f, 0xe033, 0x7510, 0x282f, 0x32f4, 0x7ffa, 0x1, 0x0);
        gbc.writeMem(0xa86f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe033);
        EXPECT(gbc.pc(), 0xa870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa86f), 0xa8);
        // A8 034C
        gbc.setState(0x9e69, 0xd25a, 0xa680, 0x6a92, 0xc8b1, 0x53d9, 0x0, 0x1);
        gbc.writeMem(0x9e69, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd25a);
        EXPECT(gbc.pc(), 0x9e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e69), 0xa8);
        // A8 034D
        gbc.setState(0x535, 0x69fe, 0xf030, 0xc702, 0x50d6, 0x67f0, 0x0, 0x1);
        gbc.writeMem(0x535, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x69fe);
        EXPECT(gbc.pc(), 0x536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 034E
        gbc.setState(0xe4ca, 0x6f8e, 0x940, 0xd5f4, 0x2373, 0xdfce, 0x1, 0x0);
        gbc.writeMem(0xe4ca, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6f8e);
        EXPECT(gbc.pc(), 0xe4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ca), 0xa8);
        // A8 034F
        gbc.setState(0x2492, 0x60a8, 0x47c0, 0xdde9, 0xf877, 0x22b2, 0x0, 0x0);
        gbc.writeMem(0x2492, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x60a8);
        EXPECT(gbc.pc(), 0x2493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0350
        gbc.setState(0xe82b, 0x6619, 0xad60, 0x43cc, 0xb4e1, 0x22b, 0x0, 0x1);
        gbc.writeMem(0xe82b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6619);
        EXPECT(gbc.pc(), 0xe82c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82b), 0xa8);
        // A8 0351
        gbc.setState(0x6d5e, 0x77d1, 0x6210, 0x4c59, 0xb27d, 0x7f2f, 0x0, 0x0);
        gbc.writeMem(0x6d5e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x77d1);
        EXPECT(gbc.pc(), 0x6d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0352
        gbc.setState(0xdc51, 0x6d19, 0x8db0, 0xab00, 0x3e73, 0x715c, 0x1, 0x0);
        gbc.writeMem(0xdc51, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6d19);
        EXPECT(gbc.pc(), 0xdc52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc51), 0xa8);
        // A8 0354
        gbc.setState(0xdf54, 0x4475, 0x86f0, 0x56ba, 0x2811, 0x911b, 0x1, 0x0);
        gbc.writeMem(0xdf54, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4475);
        EXPECT(gbc.pc(), 0xdf55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf54), 0xa8);
        // A8 0355
        gbc.setState(0xef1a, 0xd638, 0x3790, 0x96bc, 0x2aa7, 0x12d, 0x1, 0x0);
        gbc.writeMem(0xef1a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd638);
        EXPECT(gbc.pc(), 0xef1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef1a), 0xa8);
        // A8 0356
        gbc.setState(0x528b, 0x4f89, 0x58e0, 0x9d79, 0x93e9, 0x6f0, 0x0, 0x1);
        gbc.writeMem(0x528b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4f89);
        EXPECT(gbc.pc(), 0x528c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0357
        gbc.setState(0x5e5b, 0x8433, 0x8030, 0x1e9c, 0xcf22, 0xcd05, 0x0, 0x0);
        gbc.writeMem(0x5e5b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8433);
        EXPECT(gbc.pc(), 0x5e5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0358
        gbc.setState(0x510d, 0x2a29, 0x870, 0x7933, 0x29dc, 0xf7c7, 0x0, 0x1);
        gbc.writeMem(0x510d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2a29);
        EXPECT(gbc.pc(), 0x510e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0359
        gbc.setState(0x59f1, 0x26d0, 0xb8b0, 0xb3ab, 0x84e, 0xa6b8, 0x1, 0x0);
        gbc.writeMem(0x59f1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x26d0);
        EXPECT(gbc.pc(), 0x59f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 035A
        gbc.setState(0xe940, 0xb372, 0xa510, 0xb52d, 0x5756, 0xffcb, 0x0, 0x1);
        gbc.writeMem(0xe940, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb372);
        EXPECT(gbc.pc(), 0xe941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe940), 0xa8);
        // A8 035B
        gbc.setState(0xb6be, 0xefc1, 0x2850, 0x441e, 0x693e, 0x6789, 0x0, 0x0);
        gbc.writeMem(0xb6be, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xefc1);
        EXPECT(gbc.pc(), 0xb6bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6be), 0xa8);
        // A8 035C
        gbc.setState(0x3f06, 0x92f0, 0x70f0, 0xd6aa, 0x290b, 0x7d72, 0x1, 0x0);
        gbc.writeMem(0x3f06, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x92f0);
        EXPECT(gbc.pc(), 0x3f07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 035D
        gbc.setState(0xbb83, 0x4dea, 0x9910, 0x9174, 0xdfe0, 0xe414, 0x0, 0x1);
        gbc.writeMem(0xbb83, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4dea);
        EXPECT(gbc.pc(), 0xbb84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb83), 0xa8);
        // A8 035E
        gbc.setState(0xb123, 0x255a, 0x63e0, 0x3443, 0x60d5, 0x3398, 0x1, 0x1);
        gbc.writeMem(0xb123, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x255a);
        EXPECT(gbc.pc(), 0xb124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb123), 0xa8);
        // A8 035F
        gbc.setState(0xdebe, 0x79e, 0x9450, 0xe421, 0x1ea1, 0xe340, 0x1, 0x0);
        gbc.writeMem(0xdebe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x79e);
        EXPECT(gbc.pc(), 0xdebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebe), 0xa8);
        // A8 0360
        gbc.setState(0x2709, 0xeead, 0x76a0, 0xfcb6, 0x2922, 0xd1ce, 0x0, 0x1);
        gbc.writeMem(0x2709, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xeead);
        EXPECT(gbc.pc(), 0x270a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0361
        gbc.setState(0x6c9f, 0x1e25, 0x6240, 0xe4c1, 0x20c0, 0xc6c9, 0x0, 0x0);
        gbc.writeMem(0x6c9f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1e25);
        EXPECT(gbc.pc(), 0x6ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0362
        gbc.setState(0x557, 0x6bd8, 0xa760, 0xb62b, 0xe0ec, 0x384f, 0x1, 0x0);
        gbc.writeMem(0x557, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6bd8);
        EXPECT(gbc.pc(), 0x558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0363
        gbc.setState(0xa06a, 0x55a4, 0xd5b0, 0x6189, 0x554c, 0x7a2b, 0x1, 0x1);
        gbc.writeMem(0xa06a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x55a4);
        EXPECT(gbc.pc(), 0xa06b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa06a), 0xa8);
        // A8 0364
        gbc.setState(0x76e4, 0x5c72, 0x77b0, 0xe7a0, 0xff26, 0xc8f7, 0x1, 0x1);
        gbc.writeMem(0x76e4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5c72);
        EXPECT(gbc.pc(), 0x76e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0366
        gbc.setState(0x2df2, 0xfe03, 0x4ff0, 0xe02, 0x4391, 0x5026, 0x1, 0x0);
        gbc.writeMem(0x2df2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0367
        gbc.setState(0x469c, 0xbc08, 0x83f0, 0x81eb, 0x30e3, 0x5854, 0x1, 0x1);
        gbc.writeMem(0x469c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbc08);
        EXPECT(gbc.pc(), 0x469d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0368
        gbc.setState(0xd7b2, 0x4ee8, 0x3030, 0x2ea9, 0xd0fc, 0xf375, 0x0, 0x1);
        gbc.writeMem(0xd7b2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4ee8);
        EXPECT(gbc.pc(), 0xd7b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b2), 0xa8);
        // A8 0369
        gbc.setState(0x15d7, 0xddd3, 0xe490, 0x8dc8, 0x2a88, 0xfd38, 0x1, 0x1);
        gbc.writeMem(0x15d7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xddd3);
        EXPECT(gbc.pc(), 0x15d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 036A
        gbc.setState(0xea24, 0x151c, 0x3b70, 0xce25, 0x12bd, 0xdf95, 0x1, 0x0);
        gbc.writeMem(0xea24, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x151c);
        EXPECT(gbc.pc(), 0xea25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea24), 0xa8);
        // A8 036B
        gbc.setState(0x72ce, 0x3b91, 0xb830, 0x1ca5, 0xbc2e, 0x39a0, 0x1, 0x1);
        gbc.writeMem(0x72ce, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3b91);
        EXPECT(gbc.pc(), 0x72cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 036C
        gbc.setState(0x2066, 0x45c5, 0x660, 0x78a6, 0x1d93, 0xd737, 0x0, 0x0);
        gbc.writeMem(0x2066, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x45c5);
        EXPECT(gbc.pc(), 0x2067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 036D
        gbc.setState(0x57a8, 0x8bd9, 0xa9d0, 0xf472, 0xa028, 0x8b20, 0x1, 0x0);
        gbc.writeMem(0x57a8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8bd9);
        EXPECT(gbc.pc(), 0x57a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 036E
        gbc.setState(0xe4a1, 0xdf69, 0xe20, 0x10a1, 0xc2e, 0xa637, 0x0, 0x1);
        gbc.writeMem(0xe4a1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdf69);
        EXPECT(gbc.pc(), 0xe4a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a1), 0xa8);
        // A8 036F
        gbc.setState(0xe13, 0xecdc, 0xae20, 0x87cd, 0xf7d, 0x6dfb, 0x0, 0x0);
        gbc.writeMem(0xe13, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xecdc);
        EXPECT(gbc.pc(), 0xe14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0370
        gbc.setState(0x4205, 0xeb98, 0x2eb0, 0x50db, 0xe685, 0xaf82, 0x0, 0x0);
        gbc.writeMem(0x4205, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xeb98);
        EXPECT(gbc.pc(), 0x4206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0371
        gbc.setState(0x2f6e, 0x484a, 0x2e80, 0xd83c, 0x606e, 0x1682, 0x1, 0x1);
        gbc.writeMem(0x2f6e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x484a);
        EXPECT(gbc.pc(), 0x2f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0372
        gbc.setState(0x503c, 0x676c, 0x50b0, 0x9f08, 0x4d31, 0xcb70, 0x1, 0x0);
        gbc.writeMem(0x503c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x676c);
        EXPECT(gbc.pc(), 0x503d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0373
        gbc.setState(0x5c1a, 0x7f23, 0x2ec0, 0x87df, 0xa8a3, 0x6791, 0x1, 0x1);
        gbc.writeMem(0x5c1a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7f23);
        EXPECT(gbc.pc(), 0x5c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0374
        gbc.setState(0xd11, 0x1dc6, 0x3f0, 0x361a, 0x7b78, 0xea3e, 0x1, 0x1);
        gbc.writeMem(0xd11, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1dc6);
        EXPECT(gbc.pc(), 0xd12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0375
        gbc.setState(0xcf8d, 0x98cc, 0x3380, 0xd5d0, 0x9245, 0xaa54, 0x1, 0x0);
        gbc.writeMem(0xcf8d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x98cc);
        EXPECT(gbc.pc(), 0xcf8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf8d), 0xa8);
        // A8 0376
        gbc.setState(0x3bf5, 0x55f2, 0xb070, 0x8c20, 0x20a6, 0xb81f, 0x1, 0x0);
        gbc.writeMem(0x3bf5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x55f2);
        EXPECT(gbc.pc(), 0x3bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0377
        gbc.setState(0x8d9f, 0xf36f, 0xb440, 0xa75f, 0xc229, 0x1854, 0x0, 0x1);
        gbc.writeMem(0x8d9f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf36f);
        EXPECT(gbc.pc(), 0x8da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d9f), 0xa8);
        // A8 0378
        gbc.setState(0x462, 0x199c, 0x4ba0, 0x9133, 0xc6cf, 0xd64a, 0x0, 0x1);
        gbc.writeMem(0x462, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x199c);
        EXPECT(gbc.pc(), 0x463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0379
        gbc.setState(0xb15c, 0xff4, 0xa090, 0xbd8a, 0x231f, 0x40eb, 0x0, 0x1);
        gbc.writeMem(0xb15c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xff4);
        EXPECT(gbc.pc(), 0xb15d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb15c), 0xa8);
        // A8 037A
        gbc.setState(0xc9a1, 0xe075, 0x2690, 0xe51c, 0x2e20, 0xbe92, 0x0, 0x1);
        gbc.writeMem(0xc9a1, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe075);
        EXPECT(gbc.pc(), 0xc9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a1), 0xa8);
        // A8 037B
        gbc.setState(0xa538, 0x2dcc, 0xf530, 0xae50, 0xa3dc, 0x43cb, 0x0, 0x1);
        gbc.writeMem(0xa538, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2dcc);
        EXPECT(gbc.pc(), 0xa539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa538), 0xa8);
        // A8 037C
        gbc.setState(0xb11, 0xa58, 0xa940, 0xbf49, 0x59d3, 0x4575, 0x0, 0x1);
        gbc.writeMem(0xb11, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa58);
        EXPECT(gbc.pc(), 0xb12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 037D
        gbc.setState(0x33df, 0x13a4, 0x6f50, 0x619f, 0x1bf6, 0x89c9, 0x0, 0x1);
        gbc.writeMem(0x33df, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x13a4);
        EXPECT(gbc.pc(), 0x33e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 037E
        gbc.setState(0x4ca3, 0x50a, 0xb1f0, 0xc38d, 0xc18, 0x4155, 0x1, 0x1);
        gbc.writeMem(0x4ca3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x50a);
        EXPECT(gbc.pc(), 0x4ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 037F
        gbc.setState(0x54a9, 0xa135, 0x9630, 0x6f5d, 0x873c, 0xf3d5, 0x1, 0x0);
        gbc.writeMem(0x54a9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa135);
        EXPECT(gbc.pc(), 0x54aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0380
        gbc.setState(0xe2d8, 0x6d0e, 0xf290, 0x9f2b, 0x9508, 0x738c, 0x1, 0x0);
        gbc.writeMem(0xe2d8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6d0e);
        EXPECT(gbc.pc(), 0xe2d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d8), 0xa8);
        // A8 0381
        gbc.setState(0xe129, 0x6aee, 0x6cc0, 0xa75e, 0xe686, 0xb8e, 0x0, 0x1);
        gbc.writeMem(0xe129, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6aee);
        EXPECT(gbc.pc(), 0xe12a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe129), 0xa8);
        // A8 0382
        gbc.setState(0xeecb, 0x35d3, 0xcff0, 0x8854, 0x69a4, 0x54f3, 0x1, 0x0);
        gbc.writeMem(0xeecb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x35d3);
        EXPECT(gbc.pc(), 0xeecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeecb), 0xa8);
        // A8 0383
        gbc.setState(0x5237, 0xe13a, 0x9ef0, 0x1509, 0xa7e5, 0x23d3, 0x1, 0x0);
        gbc.writeMem(0x5237, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe13a);
        EXPECT(gbc.pc(), 0x5238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0385
        gbc.setState(0x4030, 0xa849, 0xc7d0, 0x726b, 0x4f7d, 0xb5b0, 0x1, 0x0);
        gbc.writeMem(0x4030, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa849);
        EXPECT(gbc.pc(), 0x4031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0386
        gbc.setState(0x90d8, 0x92c7, 0x5ff0, 0xecc7, 0x6ecf, 0x42a, 0x0, 0x0);
        gbc.writeMem(0x90d8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x92c7);
        EXPECT(gbc.pc(), 0x90d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d8), 0xa8);
        // A8 0387
        gbc.setState(0x4306, 0x31b8, 0xfd30, 0x53a4, 0x5362, 0x61ad, 0x1, 0x0);
        gbc.writeMem(0x4306, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x31b8);
        EXPECT(gbc.pc(), 0x4307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0388
        gbc.setState(0x55fb, 0xc161, 0xf700, 0x785d, 0x7c73, 0x6b55, 0x1, 0x0);
        gbc.writeMem(0x55fb, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc161);
        EXPECT(gbc.pc(), 0x55fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 038A
        gbc.setState(0x1d90, 0x29ce, 0x29d0, 0x10b5, 0x4db0, 0x6ea, 0x1, 0x1);
        gbc.writeMem(0x1d90, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x29ce);
        EXPECT(gbc.pc(), 0x1d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 038B
        gbc.setState(0xbaa4, 0xbffe, 0xd620, 0x9701, 0x3d17, 0xb4f8, 0x1, 0x1);
        gbc.writeMem(0xbaa4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbffe);
        EXPECT(gbc.pc(), 0xbaa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa4), 0xa8);
        // A8 038C
        gbc.setState(0xe3d0, 0x4c88, 0x57a0, 0xc60f, 0x435d, 0x5423, 0x1, 0x0);
        gbc.writeMem(0xe3d0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4c88);
        EXPECT(gbc.pc(), 0xe3d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d0), 0xa8);
        // A8 038D
        gbc.setState(0xb508, 0x511d, 0xda90, 0x4eba, 0x4601, 0xd467, 0x0, 0x0);
        gbc.writeMem(0xb508, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x511d);
        EXPECT(gbc.pc(), 0xb509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb508), 0xa8);
        // A8 038E
        gbc.setState(0x4f5, 0x354f, 0x410, 0x1d6e, 0xe069, 0x2271, 0x1, 0x0);
        gbc.writeMem(0x4f5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x354f);
        EXPECT(gbc.pc(), 0x4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 038F
        gbc.setState(0x4703, 0xc424, 0x8ff0, 0x49ac, 0x8103, 0x2152, 0x0, 0x0);
        gbc.writeMem(0x4703, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc424);
        EXPECT(gbc.pc(), 0x4704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0390
        gbc.setState(0x8f86, 0x8408, 0x98c0, 0xe52d, 0xa555, 0xdd91, 0x1, 0x0);
        gbc.writeMem(0x8f86, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8408);
        EXPECT(gbc.pc(), 0x8f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f86), 0xa8);
        // A8 0391
        gbc.setState(0x9be6, 0xe5b2, 0xbbf0, 0x13de, 0xaea2, 0xf4f, 0x0, 0x0);
        gbc.writeMem(0x9be6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe5b2);
        EXPECT(gbc.pc(), 0x9be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be6), 0xa8);
        // A8 0392
        gbc.setState(0x1294, 0xfc4e, 0x7a0, 0x176b, 0xaf49, 0x6915, 0x1, 0x1);
        gbc.writeMem(0x1294, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfc4e);
        EXPECT(gbc.pc(), 0x1295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0393
        gbc.setState(0x1403, 0x77e0, 0xa1e0, 0xdb6d, 0xaf6b, 0x237d, 0x1, 0x0);
        gbc.writeMem(0x1403, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x77e0);
        EXPECT(gbc.pc(), 0x1404);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0394
        gbc.setState(0x3f94, 0x3880, 0xe510, 0xfcdf, 0x5a77, 0xe189, 0x1, 0x0);
        gbc.writeMem(0x3f94, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3880);
        EXPECT(gbc.pc(), 0x3f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0395
        gbc.setState(0xce6b, 0x80bf, 0x9fd0, 0x5683, 0xd668, 0x3fb4, 0x0, 0x1);
        gbc.writeMem(0xce6b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x80bf);
        EXPECT(gbc.pc(), 0xce6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce6b), 0xa8);
        // A8 0396
        gbc.setState(0x5e98, 0xb37c, 0x8380, 0xccd1, 0xe66e, 0xa1b5, 0x0, 0x0);
        gbc.writeMem(0x5e98, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb37c);
        EXPECT(gbc.pc(), 0x5e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 0397
        gbc.setState(0xdd36, 0xf06b, 0x5b10, 0xdb39, 0x2574, 0x2500, 0x0, 0x1);
        gbc.writeMem(0xdd36, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf06b);
        EXPECT(gbc.pc(), 0xdd37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd36), 0xa8);
        // A8 0398
        gbc.setState(0x82ed, 0x8cbd, 0x7c60, 0x809a, 0x19be, 0x68d3, 0x0, 0x0);
        gbc.writeMem(0x82ed, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8cbd);
        EXPECT(gbc.pc(), 0x82ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ed), 0xa8);
        // A8 0399
        gbc.setState(0xc480, 0x195e, 0x1a0, 0x304f, 0x4494, 0x3237, 0x0, 0x1);
        gbc.writeMem(0xc480, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x195e);
        EXPECT(gbc.pc(), 0xc481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc480), 0xa8);
        // A8 039A
        gbc.setState(0x87d, 0xa0fb, 0x9f90, 0xb778, 0xe6b2, 0x25e8, 0x1, 0x1);
        gbc.writeMem(0x87d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa0fb);
        EXPECT(gbc.pc(), 0x87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 039B
        gbc.setState(0x96c2, 0x9368, 0xee0, 0xfe13, 0xcb10, 0x86df, 0x0, 0x0);
        gbc.writeMem(0x96c2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9368);
        EXPECT(gbc.pc(), 0x96c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c2), 0xa8);
        // A8 039C
        gbc.setState(0x3c59, 0x1ad4, 0x7770, 0x9fe9, 0xaa07, 0x71f6, 0x1, 0x0);
        gbc.writeMem(0x3c59, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1ad4);
        EXPECT(gbc.pc(), 0x3c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 039D
        gbc.setState(0x58c7, 0x182a, 0x7300, 0x4974, 0x87c8, 0xf984, 0x0, 0x0);
        gbc.writeMem(0x58c7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x182a);
        EXPECT(gbc.pc(), 0x58c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 039E
        gbc.setState(0x13e7, 0x7794, 0x33d0, 0x174d, 0xe3d5, 0xce72, 0x0, 0x0);
        gbc.writeMem(0x13e7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7794);
        EXPECT(gbc.pc(), 0x13e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 039F
        gbc.setState(0x23f7, 0x315a, 0xdd50, 0xd2df, 0xf040, 0x8110, 0x1, 0x1);
        gbc.writeMem(0x23f7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x315a);
        EXPECT(gbc.pc(), 0x23f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A0
        gbc.setState(0x1a9e, 0xf506, 0x4440, 0x8163, 0x61c6, 0x803d, 0x1, 0x0);
        gbc.writeMem(0x1a9e, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf506);
        EXPECT(gbc.pc(), 0x1a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A1
        gbc.setState(0x9263, 0xd858, 0xb720, 0x755a, 0x8863, 0xa403, 0x1, 0x1);
        gbc.writeMem(0x9263, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd858);
        EXPECT(gbc.pc(), 0x9264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9263), 0xa8);
        // A8 03A2
        gbc.setState(0xce5b, 0x48b8, 0x2c90, 0xb4ac, 0x46f5, 0x80dc, 0x1, 0x0);
        gbc.writeMem(0xce5b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x48b8);
        EXPECT(gbc.pc(), 0xce5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5b), 0xa8);
        // A8 03A3
        gbc.setState(0x7866, 0x55a8, 0xf1d0, 0x1eee, 0x645e, 0x235c, 0x0, 0x0);
        gbc.writeMem(0x7866, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x55a8);
        EXPECT(gbc.pc(), 0x7867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A4
        gbc.setState(0x132d, 0x98ae, 0x9830, 0xc0c2, 0x5efb, 0x5bb9, 0x1, 0x0);
        gbc.writeMem(0x132d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x98ae);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A5
        gbc.setState(0xe889, 0xf7b8, 0xc200, 0xd9de, 0x6df2, 0x7011, 0x0, 0x0);
        gbc.writeMem(0xe889, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf7b8);
        EXPECT(gbc.pc(), 0xe88a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe889), 0xa8);
        // A8 03A6
        gbc.setState(0xb01a, 0x83e0, 0x2400, 0xcf65, 0xa02b, 0x13b7, 0x1, 0x0);
        gbc.writeMem(0xb01a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x83e0);
        EXPECT(gbc.pc(), 0xb01b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01a), 0xa8);
        // A8 03A7
        gbc.setState(0x557c, 0x9aa3, 0xa20, 0xaed6, 0x73e0, 0xe04b, 0x0, 0x1);
        gbc.writeMem(0x557c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9aa3);
        EXPECT(gbc.pc(), 0x557d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A8
        gbc.setState(0x453, 0x2229, 0xda80, 0x28de, 0x6e15, 0x2dbf, 0x0, 0x1);
        gbc.writeMem(0x453, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2229);
        EXPECT(gbc.pc(), 0x454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03A9
        gbc.setState(0x7dee, 0xac39, 0x9dc0, 0x6a7e, 0xbf10, 0x1ad7, 0x1, 0x1);
        gbc.writeMem(0x7dee, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xac39);
        EXPECT(gbc.pc(), 0x7def);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03AA
        gbc.setState(0x6ca2, 0x2177, 0xe90, 0x1537, 0x795, 0x15da, 0x0, 0x0);
        gbc.writeMem(0x6ca2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2177);
        EXPECT(gbc.pc(), 0x6ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03AB
        gbc.setState(0x184b, 0x4715, 0x5270, 0x2223, 0x29b0, 0xba75, 0x0, 0x1);
        gbc.writeMem(0x184b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4715);
        EXPECT(gbc.pc(), 0x184c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03AC
        gbc.setState(0x5db2, 0x440b, 0x3b90, 0x8959, 0xff7d, 0x35f, 0x1, 0x0);
        gbc.writeMem(0x5db2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x440b);
        EXPECT(gbc.pc(), 0x5db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03AD
        gbc.setState(0xb3a2, 0xd746, 0x4a50, 0x5bea, 0x7d45, 0x89a6, 0x0, 0x0);
        gbc.writeMem(0xb3a2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd746);
        EXPECT(gbc.pc(), 0xb3a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a2), 0xa8);
        // A8 03AE
        gbc.setState(0xefc4, 0xbc0b, 0x4ec0, 0x8098, 0x8856, 0xb75c, 0x1, 0x0);
        gbc.writeMem(0xefc4, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbc0b);
        EXPECT(gbc.pc(), 0xefc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc4), 0xa8);
        // A8 03AF
        gbc.setState(0x6ec3, 0x6705, 0xb740, 0xd992, 0x85b1, 0x32cf, 0x0, 0x1);
        gbc.writeMem(0x6ec3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6705);
        EXPECT(gbc.pc(), 0x6ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03B0
        gbc.setState(0x9d89, 0x3840, 0xe6a0, 0xa55f, 0xcd3b, 0xc0f5, 0x0, 0x1);
        gbc.writeMem(0x9d89, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3840);
        EXPECT(gbc.pc(), 0x9d8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d89), 0xa8);
        // A8 03B1
        gbc.setState(0xcb30, 0x315f, 0xf870, 0x21e4, 0x8d92, 0xe20a, 0x0, 0x1);
        gbc.writeMem(0xcb30, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x315f);
        EXPECT(gbc.pc(), 0xcb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb30), 0xa8);
        // A8 03B2
        gbc.setState(0xd1d6, 0xf584, 0x8cd0, 0x60dd, 0xf18e, 0x16f9, 0x0, 0x1);
        gbc.writeMem(0xd1d6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf584);
        EXPECT(gbc.pc(), 0xd1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d6), 0xa8);
        // A8 03B3
        gbc.setState(0xdebe, 0x7eb1, 0x8610, 0x202d, 0x89d2, 0x99ac, 0x1, 0x0);
        gbc.writeMem(0xdebe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7eb1);
        EXPECT(gbc.pc(), 0xdebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebe), 0xa8);
        // A8 03B4
        gbc.setState(0xef6a, 0x74bd, 0xf720, 0xf24e, 0x7a06, 0xc11a, 0x0, 0x1);
        gbc.writeMem(0xef6a, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x74bd);
        EXPECT(gbc.pc(), 0xef6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6a), 0xa8);
        // A8 03B5
        gbc.setState(0x5027, 0x1e7d, 0x84f0, 0xc289, 0x7b98, 0xfa04, 0x0, 0x0);
        gbc.writeMem(0x5027, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1e7d);
        EXPECT(gbc.pc(), 0x5028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03B6
        gbc.setState(0x5c23, 0xc3b3, 0xf290, 0x8363, 0xfedb, 0x50f4, 0x0, 0x1);
        gbc.writeMem(0x5c23, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc3b3);
        EXPECT(gbc.pc(), 0x5c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03B7
        gbc.setState(0x1650, 0x4b25, 0x9eb0, 0xe97, 0xf6e6, 0x94c2, 0x1, 0x1);
        gbc.writeMem(0x1650, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4b25);
        EXPECT(gbc.pc(), 0x1651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03B8
        gbc.setState(0xa0e3, 0x84b6, 0xa9c0, 0x3916, 0x1883, 0xe72e, 0x1, 0x1);
        gbc.writeMem(0xa0e3, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x84b6);
        EXPECT(gbc.pc(), 0xa0e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e3), 0xa8);
        // A8 03B9
        gbc.setState(0x9813, 0xd9, 0x8310, 0xc495, 0x7a6b, 0xb018, 0x0, 0x0);
        gbc.writeMem(0x9813, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd9);
        EXPECT(gbc.pc(), 0x9814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9813), 0xa8);
        // A8 03BA
        gbc.setState(0x542c, 0x89d9, 0xc500, 0x9757, 0x6091, 0xc83b, 0x0, 0x1);
        gbc.writeMem(0x542c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x89d9);
        EXPECT(gbc.pc(), 0x542d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03BB
        gbc.setState(0xbd87, 0xe3fa, 0x9000, 0x3708, 0xa970, 0xd29f, 0x0, 0x0);
        gbc.writeMem(0xbd87, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe3fa);
        EXPECT(gbc.pc(), 0xbd88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd87), 0xa8);
        // A8 03BC
        gbc.setState(0x5f83, 0xa826, 0x8a30, 0xf995, 0x8667, 0x384c, 0x1, 0x0);
        gbc.writeMem(0x5f83, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa826);
        EXPECT(gbc.pc(), 0x5f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03BD
        gbc.setState(0xd737, 0xf2a7, 0x2ea0, 0xe875, 0x40cf, 0x40bc, 0x0, 0x1);
        gbc.writeMem(0xd737, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf2a7);
        EXPECT(gbc.pc(), 0xd738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd737), 0xa8);
        // A8 03BE
        gbc.setState(0x7ce2, 0x9758, 0xc30, 0x463d, 0x60d7, 0x6bfe, 0x1, 0x1);
        gbc.writeMem(0x7ce2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9758);
        EXPECT(gbc.pc(), 0x7ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03BF
        gbc.setState(0x38d5, 0xa652, 0xcf60, 0x3196, 0x58aa, 0x192e, 0x1, 0x1);
        gbc.writeMem(0x38d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa652);
        EXPECT(gbc.pc(), 0x38d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03C0
        gbc.setState(0x4c4d, 0xe7f1, 0x9750, 0x6be7, 0x437f, 0x938, 0x0, 0x1);
        gbc.writeMem(0x4c4d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe7f1);
        EXPECT(gbc.pc(), 0x4c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03C1
        gbc.setState(0xc171, 0x72f2, 0xf440, 0x2d21, 0x46a8, 0x856a, 0x0, 0x1);
        gbc.writeMem(0xc171, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x72f2);
        EXPECT(gbc.pc(), 0xc172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc171), 0xa8);
        // A8 03C2
        gbc.setState(0x1847, 0x52b8, 0x6260, 0xf4dc, 0x2a60, 0xcd84, 0x0, 0x0);
        gbc.writeMem(0x1847, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x52b8);
        EXPECT(gbc.pc(), 0x1848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03C3
        gbc.setState(0x7aa7, 0x4c4e, 0x4f30, 0x8147, 0x7884, 0xe3d6, 0x0, 0x1);
        gbc.writeMem(0x7aa7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4c4e);
        EXPECT(gbc.pc(), 0x7aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03C4
        gbc.setState(0x80cd, 0x1995, 0xa470, 0xfca, 0xd12b, 0xb45d, 0x1, 0x1);
        gbc.writeMem(0x80cd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1995);
        EXPECT(gbc.pc(), 0x80ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80cd), 0xa8);
        // A8 03C6
        gbc.setState(0xba02, 0x8d73, 0xbb90, 0xee1c, 0x4392, 0xabe2, 0x0, 0x1);
        gbc.writeMem(0xba02, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8d73);
        EXPECT(gbc.pc(), 0xba03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba02), 0xa8);
        // A8 03C7
        gbc.setState(0xad12, 0x64de, 0xa90, 0x2627, 0x4ef0, 0x5667, 0x0, 0x1);
        gbc.writeMem(0xad12, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x64de);
        EXPECT(gbc.pc(), 0xad13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad12), 0xa8);
        // A8 03C8
        gbc.setState(0xaadd, 0xc6be, 0x8ca0, 0x637, 0x8bab, 0xbb09, 0x1, 0x1);
        gbc.writeMem(0xaadd, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc6be);
        EXPECT(gbc.pc(), 0xaade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaadd), 0xa8);
        // A8 03C9
        gbc.setState(0xd4ce, 0x7dd9, 0x9880, 0x3625, 0xf8df, 0x1f60, 0x0, 0x0);
        gbc.writeMem(0xd4ce, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7dd9);
        EXPECT(gbc.pc(), 0xd4cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ce), 0xa8);
        // A8 03CB
        gbc.setState(0x5717, 0xc146, 0x90c0, 0x63a6, 0x2fb1, 0x49ab, 0x0, 0x0);
        gbc.writeMem(0x5717, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc146);
        EXPECT(gbc.pc(), 0x5718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03CC
        gbc.setState(0x3929, 0x673f, 0x69b0, 0x8ec4, 0xdbb2, 0x9798, 0x1, 0x0);
        gbc.writeMem(0x3929, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x673f);
        EXPECT(gbc.pc(), 0x392a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03CD
        gbc.setState(0xe0f, 0x4da5, 0xa880, 0xd5f8, 0xdd6f, 0x57ba, 0x1, 0x1);
        gbc.writeMem(0xe0f, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4da5);
        EXPECT(gbc.pc(), 0xe10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03CE
        gbc.setState(0x6de2, 0x1e61, 0x82e0, 0xbf52, 0xc5d2, 0x5bfe, 0x1, 0x0);
        gbc.writeMem(0x6de2, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1e61);
        EXPECT(gbc.pc(), 0x6de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03CF
        gbc.setState(0x6b63, 0xfb21, 0x82e0, 0xcac9, 0x6c95, 0x6225, 0x0, 0x1);
        gbc.writeMem(0x6b63, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfb21);
        EXPECT(gbc.pc(), 0x6b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D0
        gbc.setState(0x5345, 0x1ba6, 0x52c0, 0xae94, 0xf136, 0xffc8, 0x1, 0x0);
        gbc.writeMem(0x5345, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1ba6);
        EXPECT(gbc.pc(), 0x5346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D1
        gbc.setState(0x65d0, 0x88f2, 0x9250, 0x9e76, 0x876c, 0xb19, 0x1, 0x1);
        gbc.writeMem(0x65d0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x88f2);
        EXPECT(gbc.pc(), 0x65d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D2
        gbc.setState(0x7f5d, 0x76bb, 0xe840, 0x86d6, 0x357d, 0xa662, 0x1, 0x0);
        gbc.writeMem(0x7f5d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x76bb);
        EXPECT(gbc.pc(), 0x7f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D3
        gbc.setState(0xe2a5, 0x55f3, 0x11f0, 0x9153, 0x85e5, 0x94a1, 0x0, 0x1);
        gbc.writeMem(0xe2a5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x55f3);
        EXPECT(gbc.pc(), 0xe2a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a5), 0xa8);
        // A8 03D4
        gbc.setState(0x90b8, 0xe516, 0xc780, 0x1131, 0xd8a7, 0x7678, 0x0, 0x1);
        gbc.writeMem(0x90b8, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe516);
        EXPECT(gbc.pc(), 0x90b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90b8), 0xa8);
        // A8 03D5
        gbc.setState(0x7ca0, 0x6def, 0xeaa0, 0x35b2, 0x4a6b, 0x5a17, 0x1, 0x0);
        gbc.writeMem(0x7ca0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6def);
        EXPECT(gbc.pc(), 0x7ca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D6
        gbc.setState(0xd8cc, 0x48b3, 0x5af0, 0xf7fd, 0x3b4e, 0x2cff, 0x1, 0x1);
        gbc.writeMem(0xd8cc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x48b3);
        EXPECT(gbc.pc(), 0xd8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8cc), 0xa8);
        // A8 03D7
        gbc.setState(0xd14b, 0x9188, 0x6600, 0xcf1a, 0xcf10, 0x92bc, 0x0, 0x1);
        gbc.writeMem(0xd14b, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9188);
        EXPECT(gbc.pc(), 0xd14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14b), 0xa8);
        // A8 03D8
        gbc.setState(0x5345, 0x1241, 0x7990, 0xdcac, 0x7dfd, 0x3749, 0x1, 0x1);
        gbc.writeMem(0x5345, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1241);
        EXPECT(gbc.pc(), 0x5346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03D9
        gbc.setState(0xb3fc, 0x2f0d, 0xc150, 0x4cf4, 0x46b9, 0xbb63, 0x0, 0x0);
        gbc.writeMem(0xb3fc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2f0d);
        EXPECT(gbc.pc(), 0xb3fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3fc), 0xa8);
        // A8 03DA
        gbc.setState(0x63d5, 0x7d3e, 0x26e0, 0xd600, 0x3d55, 0xb4fb, 0x0, 0x1);
        gbc.writeMem(0x63d5, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7d3e);
        EXPECT(gbc.pc(), 0x63d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03DB
        gbc.setState(0x49db, 0xeaad, 0x2920, 0xa4ae, 0xbb05, 0x7b8c, 0x0, 0x1);
        gbc.writeMem(0x49db, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xeaad);
        EXPECT(gbc.pc(), 0x49dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03DC
        gbc.setState(0xe6dc, 0x605a, 0x7260, 0xc5e5, 0x4ddc, 0x2ba8, 0x1, 0x1);
        gbc.writeMem(0xe6dc, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x605a);
        EXPECT(gbc.pc(), 0xe6dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6dc), 0xa8);
        // A8 03DD
        gbc.setState(0xce44, 0x446c, 0xa0, 0x5781, 0x1879, 0x7bc7, 0x0, 0x1);
        gbc.writeMem(0xce44, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x446c);
        EXPECT(gbc.pc(), 0xce45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce44), 0xa8);
        // A8 03DE
        gbc.setState(0x6375, 0xfc36, 0x86f0, 0x5603, 0xd544, 0xde60, 0x1, 0x0);
        gbc.writeMem(0x6375, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfc36);
        EXPECT(gbc.pc(), 0x6376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03E0
        gbc.setState(0x232d, 0x2de7, 0x4d30, 0x106, 0x427f, 0x1311, 0x0, 0x0);
        gbc.writeMem(0x232d, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2de7);
        EXPECT(gbc.pc(), 0x232e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03E1
        gbc.setState(0xd420, 0xde3c, 0x3510, 0x81cb, 0xfce6, 0xd638, 0x1, 0x1);
        gbc.writeMem(0xd420, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xde3c);
        EXPECT(gbc.pc(), 0xd421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd420), 0xa8);
        // A8 03E2
        gbc.setState(0x5de6, 0x4f0b, 0x8ed0, 0x4bfb, 0x7e14, 0x1cf8, 0x1, 0x0);
        gbc.writeMem(0x5de6, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4f0b);
        EXPECT(gbc.pc(), 0x5de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03E3
        gbc.setState(0xcc59, 0x9904, 0x8160, 0x81a1, 0x30e4, 0xd2c8, 0x0, 0x0);
        gbc.writeMem(0xcc59, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9904);
        EXPECT(gbc.pc(), 0xcc5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc59), 0xa8);
        // A8 03E4
        gbc.setState(0xd843, 0x92cd, 0x140, 0xca47, 0x4b9d, 0x909, 0x1, 0x0);
        gbc.writeMem(0xd843, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x92cd);
        EXPECT(gbc.pc(), 0xd844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd843), 0xa8);
        // A8 03E5
        gbc.setState(0x4e7c, 0xf515, 0x1dc0, 0x9dc1, 0xe54b, 0x3fc0, 0x1, 0x0);
        gbc.writeMem(0x4e7c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf515);
        EXPECT(gbc.pc(), 0x4e7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A8 03E6
        gbc.setState(0xea5c, 0x5e50, 0xed70, 0x9e20, 0x42a2, 0x9faf, 0x0, 0x0);
        gbc.writeMem(0xea5c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5e50);
        EXPECT(gbc.pc(), 0xea5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5c), 0xa8);
        // A8 03E7
        gbc.setState(0x4008, 0x1470, 0x23d0, 0xf851, 0xeae0, 0xb2e5, 0x0, 0x0);
        gbc.writeMem(0x4008, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1470);
        EXPECT(gbc.pc(), 0x4009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
