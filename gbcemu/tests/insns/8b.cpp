#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_8b)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_8b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 8B 0000
        gbc.setState(0x79a8, 0x8443, 0x62b0, 0x5b38, 0x7ad9, 0x45ce, 0x0, 0x1);
        gbc.writeMem(0x79a8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8443);
        EXPECT(gbc.pc(), 0x79a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0001
        gbc.setState(0xa408, 0x74fa, 0x55a0, 0xf919, 0x7a70, 0x2a6c, 0x0, 0x0);
        gbc.writeMem(0xa408, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x74fa);
        EXPECT(gbc.pc(), 0xa409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa408), 0x8b);
        // 8B 0002
        gbc.setState(0x79f9, 0xf098, 0x11f0, 0xa5a, 0xea8, 0x8caa, 0x0, 0x0);
        gbc.writeMem(0x79f9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf098);
        EXPECT(gbc.pc(), 0x79fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0003
        gbc.setState(0x89, 0x6ed1, 0xa830, 0x1d0, 0xd3b9, 0x904c, 0x0, 0x1);
        gbc.writeMem(0x89, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6ed1);
        EXPECT(gbc.pc(), 0x8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0004
        gbc.setState(0xa85c, 0xf8e4, 0x5900, 0xd909, 0x7e2, 0x32a9, 0x0, 0x1);
        gbc.writeMem(0xa85c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf8e4);
        EXPECT(gbc.pc(), 0xa85d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85c), 0x8b);
        // 8B 0005
        gbc.setState(0x9a98, 0xcdef, 0x9970, 0x7945, 0x3339, 0x29f4, 0x1, 0x0);
        gbc.writeMem(0x9a98, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcdef);
        EXPECT(gbc.pc(), 0x9a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a98), 0x8b);
        // 8B 0006
        gbc.setState(0xc22b, 0x1991, 0xff50, 0x426a, 0x7c87, 0xdf25, 0x1, 0x1);
        gbc.writeMem(0xc22b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1991);
        EXPECT(gbc.pc(), 0xc22c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc22b), 0x8b);
        // 8B 0007
        gbc.setState(0x9e5f, 0xc722, 0x8c0, 0x549a, 0x7a83, 0x55e5, 0x0, 0x1);
        gbc.writeMem(0x9e5f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc722);
        EXPECT(gbc.pc(), 0x9e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e5f), 0x8b);
        // 8B 0008
        gbc.setState(0xdeb7, 0x43af, 0xd230, 0x85f8, 0x59d2, 0x83b6, 0x0, 0x1);
        gbc.writeMem(0xdeb7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x43af);
        EXPECT(gbc.pc(), 0xdeb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb7), 0x8b);
        // 8B 0009
        gbc.setState(0x25cc, 0x9607, 0xe950, 0x9507, 0xa23, 0xde3c, 0x0, 0x1);
        gbc.writeMem(0x25cc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9607);
        EXPECT(gbc.pc(), 0x25cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 000A
        gbc.setState(0x2ceb, 0xabc1, 0x8db0, 0x6137, 0x92a8, 0xce37, 0x0, 0x0);
        gbc.writeMem(0x2ceb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xabc1);
        EXPECT(gbc.pc(), 0x2cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 000B
        gbc.setState(0x433, 0xaaf2, 0xf500, 0xe480, 0x4729, 0x6ba4, 0x1, 0x1);
        gbc.writeMem(0x433, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xaaf2);
        EXPECT(gbc.pc(), 0x434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 000C
        gbc.setState(0x77bc, 0x5467, 0xa310, 0xaf06, 0x22e5, 0xa30a, 0x0, 0x0);
        gbc.writeMem(0x77bc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5467);
        EXPECT(gbc.pc(), 0x77bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 000D
        gbc.setState(0x6157, 0x4441, 0x37f0, 0xd10e, 0x5401, 0x6358, 0x0, 0x0);
        gbc.writeMem(0x6157, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4441);
        EXPECT(gbc.pc(), 0x6158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 000E
        gbc.setState(0x28fe, 0x772b, 0x42e0, 0x9e72, 0x1d24, 0xa6b2, 0x1, 0x0);
        gbc.writeMem(0x28fe, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x772b);
        EXPECT(gbc.pc(), 0x28ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 000F
        gbc.setState(0x3b16, 0xa3f, 0xaf20, 0x934, 0x805f, 0xe3ff, 0x1, 0x0);
        gbc.writeMem(0x3b16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa3f);
        EXPECT(gbc.pc(), 0x3b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0010
        gbc.setState(0x39ee, 0x53c2, 0x9090, 0x704d, 0x1f68, 0xc3fc, 0x0, 0x1);
        gbc.writeMem(0x39ee, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x53c2);
        EXPECT(gbc.pc(), 0x39ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0011
        gbc.setState(0xd1f, 0xb19d, 0x5280, 0xdd8, 0x9323, 0xabcb, 0x1, 0x1);
        gbc.writeMem(0xd1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb19d);
        EXPECT(gbc.pc(), 0xd20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0012
        gbc.setState(0x774f, 0xccd5, 0xe940, 0x3d0d, 0xb6af, 0x3742, 0x1, 0x0);
        gbc.writeMem(0x774f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xccd5);
        EXPECT(gbc.pc(), 0x7750);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0013
        gbc.setState(0xe1b0, 0xf08e, 0x21f0, 0x5e13, 0x48f9, 0x49f6, 0x0, 0x1);
        gbc.writeMem(0xe1b0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf08e);
        EXPECT(gbc.pc(), 0xe1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b0), 0x8b);
        // 8B 0014
        gbc.setState(0x94ae, 0x50a9, 0xd5d0, 0xfbe8, 0x9a61, 0x86af, 0x1, 0x1);
        gbc.writeMem(0x94ae, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x50a9);
        EXPECT(gbc.pc(), 0x94af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ae), 0x8b);
        // 8B 0016
        gbc.setState(0x88f5, 0xd6d9, 0xd8c0, 0xf3c0, 0xdefc, 0x3fc9, 0x0, 0x0);
        gbc.writeMem(0x88f5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd6d9);
        EXPECT(gbc.pc(), 0x88f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88f5), 0x8b);
        // 8B 0017
        gbc.setState(0x25a6, 0x215a, 0xfd10, 0x268a, 0x7602, 0x8217, 0x1, 0x0);
        gbc.writeMem(0x25a6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x215a);
        EXPECT(gbc.pc(), 0x25a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0018
        gbc.setState(0x5b1d, 0xc595, 0x53a0, 0xeae8, 0xc9c2, 0xaca1, 0x1, 0x1);
        gbc.writeMem(0x5b1d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc595);
        EXPECT(gbc.pc(), 0x5b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0019
        gbc.setState(0xee92, 0xd0d4, 0xe9f0, 0x3483, 0x315f, 0x5e37, 0x0, 0x0);
        gbc.writeMem(0xee92, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0xee93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee92), 0x8b);
        // 8B 001A
        gbc.setState(0xc5e5, 0x2ddc, 0x2e40, 0xa005, 0xa29c, 0x76c2, 0x1, 0x0);
        gbc.writeMem(0xc5e5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2ddc);
        EXPECT(gbc.pc(), 0xc5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e5), 0x8b);
        // 8B 001B
        gbc.setState(0xce28, 0xae92, 0xf840, 0x8c2d, 0x804d, 0x6e29, 0x1, 0x0);
        gbc.writeMem(0xce28, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xae92);
        EXPECT(gbc.pc(), 0xce29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce28), 0x8b);
        // 8B 001C
        gbc.setState(0x6d06, 0x1b08, 0x5180, 0xc208, 0x22a0, 0x9a32, 0x0, 0x0);
        gbc.writeMem(0x6d06, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1b08);
        EXPECT(gbc.pc(), 0x6d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 001D
        gbc.setState(0x8aa8, 0x9f45, 0x2630, 0x35a6, 0xbdb7, 0x7783, 0x0, 0x1);
        gbc.writeMem(0x8aa8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9f45);
        EXPECT(gbc.pc(), 0x8aa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa8), 0x8b);
        // 8B 001E
        gbc.setState(0x83a8, 0x241, 0xf9a0, 0x7daa, 0xd5d4, 0xc93a, 0x1, 0x1);
        gbc.writeMem(0x83a8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x241);
        EXPECT(gbc.pc(), 0x83a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a8), 0x8b);
        // 8B 001F
        gbc.setState(0xdd29, 0x941e, 0x7870, 0x8caa, 0xf64e, 0x8d0a, 0x0, 0x1);
        gbc.writeMem(0xdd29, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x941e);
        EXPECT(gbc.pc(), 0xdd2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd29), 0x8b);
        // 8B 0020
        gbc.setState(0x54b0, 0x94bc, 0x2520, 0xa049, 0x373d, 0x1821, 0x0, 0x0);
        gbc.writeMem(0x54b0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x94bc);
        EXPECT(gbc.pc(), 0x54b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0021
        gbc.setState(0x90fb, 0xee57, 0x94a0, 0xdef2, 0xdcfe, 0xaf80, 0x0, 0x1);
        gbc.writeMem(0x90fb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xee57);
        EXPECT(gbc.pc(), 0x90fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90fb), 0x8b);
        // 8B 0022
        gbc.setState(0xb81, 0xee9a, 0xff70, 0xd505, 0xf63d, 0x5c75, 0x0, 0x0);
        gbc.writeMem(0xb81, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xee9a);
        EXPECT(gbc.pc(), 0xb82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0023
        gbc.setState(0x35ce, 0x6903, 0x48c0, 0x11ad, 0x2604, 0x9c9e, 0x1, 0x0);
        gbc.writeMem(0x35ce, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6903);
        EXPECT(gbc.pc(), 0x35cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0024
        gbc.setState(0x69f6, 0x26b4, 0xe90, 0x28db, 0xf412, 0x4cfd, 0x1, 0x0);
        gbc.writeMem(0x69f6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x26b4);
        EXPECT(gbc.pc(), 0x69f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0025
        gbc.setState(0x8d4d, 0x68f0, 0xdff0, 0x70ce, 0x6a7c, 0x3fb4, 0x1, 0x1);
        gbc.writeMem(0x8d4d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x68f0);
        EXPECT(gbc.pc(), 0x8d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4d), 0x8b);
        // 8B 0026
        gbc.setState(0x3436, 0x2ad6, 0x89b0, 0x1846, 0x24ab, 0xb2a2, 0x0, 0x0);
        gbc.writeMem(0x3436, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2ad6);
        EXPECT(gbc.pc(), 0x3437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0027
        gbc.setState(0xe7b, 0xe319, 0xdf60, 0xf79, 0x8718, 0x1954, 0x1, 0x0);
        gbc.writeMem(0xe7b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe319);
        EXPECT(gbc.pc(), 0xe7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0028
        gbc.setState(0x4e19, 0xa8da, 0xcf30, 0x8d8a, 0xb753, 0xe2d8, 0x0, 0x0);
        gbc.writeMem(0x4e19, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa8da);
        EXPECT(gbc.pc(), 0x4e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0029
        gbc.setState(0x5b22, 0x426c, 0x5b80, 0x1948, 0xf710, 0xbf25, 0x1, 0x0);
        gbc.writeMem(0x5b22, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x426c);
        EXPECT(gbc.pc(), 0x5b23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 002A
        gbc.setState(0x9759, 0x861c, 0x39a0, 0x8c5, 0xbd52, 0x8c3f, 0x0, 0x1);
        gbc.writeMem(0x9759, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x861c);
        EXPECT(gbc.pc(), 0x975a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9759), 0x8b);
        // 8B 002B
        gbc.setState(0x29fa, 0xa44d, 0x4600, 0x1a1, 0x6e2b, 0x5917, 0x0, 0x1);
        gbc.writeMem(0x29fa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa44d);
        EXPECT(gbc.pc(), 0x29fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 002C
        gbc.setState(0xd62d, 0xd737, 0xdc00, 0x5a8a, 0x5775, 0xa10f, 0x1, 0x1);
        gbc.writeMem(0xd62d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd737);
        EXPECT(gbc.pc(), 0xd62e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd62d), 0x8b);
        // 8B 002D
        gbc.setState(0xbfac, 0xf5a6, 0x7b00, 0x11d5, 0x46a, 0x5b1d, 0x1, 0x1);
        gbc.writeMem(0xbfac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf5a6);
        EXPECT(gbc.pc(), 0xbfad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfac), 0x8b);
        // 8B 002E
        gbc.setState(0xbdd0, 0x9ce5, 0x9400, 0xfc6b, 0xef5f, 0x904c, 0x0, 0x1);
        gbc.writeMem(0xbdd0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9ce5);
        EXPECT(gbc.pc(), 0xbdd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd0), 0x8b);
        // 8B 002F
        gbc.setState(0xc126, 0x5bdc, 0x89e0, 0x3cf, 0x8f75, 0x2497, 0x1, 0x1);
        gbc.writeMem(0xc126, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5bdc);
        EXPECT(gbc.pc(), 0xc127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc126), 0x8b);
        // 8B 0030
        gbc.setState(0xb617, 0x4b24, 0x5a30, 0x2334, 0xc336, 0x6cf4, 0x1, 0x1);
        gbc.writeMem(0xb617, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4b24);
        EXPECT(gbc.pc(), 0xb618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb617), 0x8b);
        // 8B 0031
        gbc.setState(0xb926, 0x63bb, 0x5e40, 0x409c, 0x133c, 0x8cb4, 0x0, 0x1);
        gbc.writeMem(0xb926, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x63bb);
        EXPECT(gbc.pc(), 0xb927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb926), 0x8b);
        // 8B 0032
        gbc.setState(0xde84, 0x8f62, 0xf7f0, 0x3ee, 0x53d2, 0xdc15, 0x1, 0x0);
        gbc.writeMem(0xde84, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8f62);
        EXPECT(gbc.pc(), 0xde85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde84), 0x8b);
        // 8B 0033
        gbc.setState(0x4681, 0x28b7, 0x9c0, 0x5207, 0x7bc, 0x9afa, 0x1, 0x0);
        gbc.writeMem(0x4681, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x28b7);
        EXPECT(gbc.pc(), 0x4682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0034
        gbc.setState(0x7797, 0xba0a, 0xbea0, 0xe24e, 0xdf28, 0x70d8, 0x0, 0x0);
        gbc.writeMem(0x7797, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xba0a);
        EXPECT(gbc.pc(), 0x7798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0035
        gbc.setState(0xc71, 0x6150, 0xb2f0, 0x5f0a, 0x6d87, 0xe90b, 0x0, 0x1);
        gbc.writeMem(0xc71, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6150);
        EXPECT(gbc.pc(), 0xc72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0036
        gbc.setState(0xb221, 0xb83d, 0x720, 0xe1dd, 0x2b64, 0x4403, 0x1, 0x0);
        gbc.writeMem(0xb221, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb83d);
        EXPECT(gbc.pc(), 0xb222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb221), 0x8b);
        // 8B 0037
        gbc.setState(0xdaf0, 0xc7e4, 0x7be0, 0xfde9, 0xee9d, 0x14f0, 0x1, 0x0);
        gbc.writeMem(0xdaf0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc7e4);
        EXPECT(gbc.pc(), 0xdaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaf0), 0x8b);
        // 8B 0038
        gbc.setState(0x4efd, 0xa71d, 0x7d80, 0x3e0c, 0x489c, 0x84a1, 0x0, 0x0);
        gbc.writeMem(0x4efd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa71d);
        EXPECT(gbc.pc(), 0x4efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0039
        gbc.setState(0xb6ce, 0x685, 0xb460, 0x5bf2, 0x89ef, 0x5c6f, 0x1, 0x0);
        gbc.writeMem(0xb6ce, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x685);
        EXPECT(gbc.pc(), 0xb6cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ce), 0x8b);
        // 8B 003A
        gbc.setState(0xdea9, 0x9aae, 0xe40, 0x4bb5, 0x652d, 0x3af3, 0x0, 0x1);
        gbc.writeMem(0xdea9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9aae);
        EXPECT(gbc.pc(), 0xdeaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea9), 0x8b);
        // 8B 003B
        gbc.setState(0x2f1c, 0x13c1, 0xa320, 0xc2f1, 0x7e91, 0x5d34, 0x0, 0x1);
        gbc.writeMem(0x2f1c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x13c1);
        EXPECT(gbc.pc(), 0x2f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 003C
        gbc.setState(0xde30, 0x63fb, 0x5a80, 0xb7fc, 0x261d, 0x3b9b, 0x0, 0x1);
        gbc.writeMem(0xde30, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x63fb);
        EXPECT(gbc.pc(), 0xde31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde30), 0x8b);
        // 8B 003D
        gbc.setState(0xd011, 0x7bd6, 0xecc0, 0xf4ab, 0x3a55, 0x9700, 0x1, 0x0);
        gbc.writeMem(0xd011, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7bd6);
        EXPECT(gbc.pc(), 0xd012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd011), 0x8b);
        // 8B 003E
        gbc.setState(0x15d4, 0x5174, 0x1820, 0xadf0, 0x3992, 0xb498, 0x1, 0x0);
        gbc.writeMem(0x15d4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5174);
        EXPECT(gbc.pc(), 0x15d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 003F
        gbc.setState(0x5ba1, 0x5f74, 0x3c90, 0xfb9e, 0x659f, 0xc04d, 0x1, 0x0);
        gbc.writeMem(0x5ba1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5f74);
        EXPECT(gbc.pc(), 0x5ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0040
        gbc.setState(0x840a, 0x99a2, 0x75a0, 0x1dd3, 0xe69e, 0x5116, 0x1, 0x0);
        gbc.writeMem(0x840a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x99a2);
        EXPECT(gbc.pc(), 0x840b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x840a), 0x8b);
        // 8B 0041
        gbc.setState(0x3a75, 0x5165, 0x3160, 0x9947, 0xc4c8, 0xf5dd, 0x1, 0x0);
        gbc.writeMem(0x3a75, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5165);
        EXPECT(gbc.pc(), 0x3a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0042
        gbc.setState(0x2be8, 0xd4a5, 0xd780, 0x35b7, 0x8c84, 0xdd8d, 0x1, 0x0);
        gbc.writeMem(0x2be8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd4a5);
        EXPECT(gbc.pc(), 0x2be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0043
        gbc.setState(0xff6, 0xcbbb, 0xa580, 0x6f17, 0xcf55, 0xc2dd, 0x1, 0x1);
        gbc.writeMem(0xff6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcbbb);
        EXPECT(gbc.pc(), 0xff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0044
        gbc.setState(0x527f, 0xd494, 0x6d40, 0x63cf, 0x1b92, 0x2114, 0x0, 0x0);
        gbc.writeMem(0x527f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd494);
        EXPECT(gbc.pc(), 0x5280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0045
        gbc.setState(0xd7f8, 0xe916, 0x4b40, 0x303e, 0x9978, 0xfa6a, 0x1, 0x1);
        gbc.writeMem(0xd7f8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe916);
        EXPECT(gbc.pc(), 0xd7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f8), 0x8b);
        // 8B 0046
        gbc.setState(0x1cc9, 0xdb22, 0x98f0, 0x22cc, 0xf6a5, 0x9d09, 0x1, 0x0);
        gbc.writeMem(0x1cc9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xdb22);
        EXPECT(gbc.pc(), 0x1cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0047
        gbc.setState(0xa6d3, 0xbf31, 0x2340, 0xdf03, 0xcde0, 0xc26d, 0x1, 0x0);
        gbc.writeMem(0xa6d3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbf31);
        EXPECT(gbc.pc(), 0xa6d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d3), 0x8b);
        // 8B 0048
        gbc.setState(0x6eda, 0x57fd, 0x1c10, 0x9d64, 0x9f8d, 0xcb2e, 0x1, 0x0);
        gbc.writeMem(0x6eda, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x57fd);
        EXPECT(gbc.pc(), 0x6edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0049
        gbc.setState(0xcd73, 0x647d, 0x4bf0, 0x1785, 0x1235, 0x128a, 0x1, 0x0);
        gbc.writeMem(0xcd73, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x647d);
        EXPECT(gbc.pc(), 0xcd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd73), 0x8b);
        // 8B 004A
        gbc.setState(0xcad6, 0x3c5e, 0x46c0, 0xc3de, 0xfcc8, 0xe868, 0x1, 0x0);
        gbc.writeMem(0xcad6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0xcad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad6), 0x8b);
        // 8B 004B
        gbc.setState(0xb516, 0x9e00, 0x2b40, 0x487d, 0x5cae, 0x3173, 0x1, 0x0);
        gbc.writeMem(0xb516, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9e00);
        EXPECT(gbc.pc(), 0xb517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb516), 0x8b);
        // 8B 004C
        gbc.setState(0x3436, 0x7a5b, 0xc990, 0xad27, 0x6d23, 0x49b4, 0x0, 0x0);
        gbc.writeMem(0x3436, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7a5b);
        EXPECT(gbc.pc(), 0x3437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 004D
        gbc.setState(0x21ed, 0xedac, 0x86b0, 0x96b6, 0xfdb6, 0xab51, 0x1, 0x0);
        gbc.writeMem(0x21ed, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xedac);
        EXPECT(gbc.pc(), 0x21ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 004E
        gbc.setState(0x9141, 0xe0fc, 0xbb80, 0x46ec, 0x326a, 0x6ff2, 0x1, 0x1);
        gbc.writeMem(0x9141, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe0fc);
        EXPECT(gbc.pc(), 0x9142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9141), 0x8b);
        // 8B 004F
        gbc.setState(0x7715, 0x54a3, 0xb520, 0xe901, 0xd563, 0x97fe, 0x1, 0x1);
        gbc.writeMem(0x7715, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x54a3);
        EXPECT(gbc.pc(), 0x7716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0050
        gbc.setState(0xa869, 0x4459, 0x5f50, 0x9c5e, 0x3633, 0xcbbf, 0x0, 0x1);
        gbc.writeMem(0xa869, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4459);
        EXPECT(gbc.pc(), 0xa86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa869), 0x8b);
        // 8B 0051
        gbc.setState(0x285c, 0x5636, 0x34c0, 0xa003, 0x9884, 0x2d09, 0x0, 0x0);
        gbc.writeMem(0x285c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5636);
        EXPECT(gbc.pc(), 0x285d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0052
        gbc.setState(0x8c11, 0x6b7c, 0xa1f0, 0x16b2, 0x150, 0x2b4, 0x0, 0x1);
        gbc.writeMem(0x8c11, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6b7c);
        EXPECT(gbc.pc(), 0x8c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c11), 0x8b);
        // 8B 0053
        gbc.setState(0x609b, 0xa876, 0x2a40, 0x5bbd, 0xfd16, 0x8da, 0x1, 0x1);
        gbc.writeMem(0x609b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa876);
        EXPECT(gbc.pc(), 0x609c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0054
        gbc.setState(0x46ba, 0x906c, 0x3020, 0x9228, 0xf641, 0x3809, 0x1, 0x1);
        gbc.writeMem(0x46ba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x906c);
        EXPECT(gbc.pc(), 0x46bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0055
        gbc.setState(0x252e, 0x213e, 0x8c30, 0x546, 0xb304, 0x17d, 0x0, 0x1);
        gbc.writeMem(0x252e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x213e);
        EXPECT(gbc.pc(), 0x252f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0057
        gbc.setState(0x9118, 0x116c, 0x9c70, 0x497d, 0xefeb, 0xafa8, 0x1, 0x0);
        gbc.writeMem(0x9118, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x116c);
        EXPECT(gbc.pc(), 0x9119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9118), 0x8b);
        // 8B 0058
        gbc.setState(0x82e, 0x9c3e, 0x9e70, 0xd743, 0xc275, 0x21d1, 0x1, 0x0);
        gbc.writeMem(0x82e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9c3e);
        EXPECT(gbc.pc(), 0x82f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0059
        gbc.setState(0xeae6, 0x2ef9, 0xcbc0, 0x9b3a, 0xe30a, 0xeccc, 0x1, 0x0);
        gbc.writeMem(0xeae6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2ef9);
        EXPECT(gbc.pc(), 0xeae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae6), 0x8b);
        // 8B 005A
        gbc.setState(0xe6bb, 0x5c38, 0x4ed0, 0x6c47, 0xd55b, 0x1091, 0x1, 0x0);
        gbc.writeMem(0xe6bb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5c38);
        EXPECT(gbc.pc(), 0xe6bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bb), 0x8b);
        // 8B 005B
        gbc.setState(0x2006, 0x3, 0xc2d0, 0x2f2b, 0xa575, 0x7b13, 0x1, 0x1);
        gbc.writeMem(0x2006, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3);
        EXPECT(gbc.pc(), 0x2007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 005C
        gbc.setState(0xdc2b, 0xa8ff, 0xc0c0, 0xdb64, 0x3b89, 0x2b37, 0x1, 0x1);
        gbc.writeMem(0xdc2b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa8ff);
        EXPECT(gbc.pc(), 0xdc2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2b), 0x8b);
        // 8B 005D
        gbc.setState(0x3286, 0xee14, 0xb140, 0x5e4d, 0xf55f, 0xe681, 0x0, 0x1);
        gbc.writeMem(0x3286, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xee14);
        EXPECT(gbc.pc(), 0x3287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 005E
        gbc.setState(0xc7e1, 0xccdf, 0xbb0, 0x11e1, 0xde1d, 0xe176, 0x1, 0x1);
        gbc.writeMem(0xc7e1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xccdf);
        EXPECT(gbc.pc(), 0xc7e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e1), 0x8b);
        // 8B 005F
        gbc.setState(0x4f69, 0x6fbd, 0x5260, 0x2ca8, 0x202d, 0xf02d, 0x1, 0x0);
        gbc.writeMem(0x4f69, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6fbd);
        EXPECT(gbc.pc(), 0x4f6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0060
        gbc.setState(0x7bfb, 0x35c9, 0x3680, 0x3ec0, 0x3956, 0x69cf, 0x1, 0x0);
        gbc.writeMem(0x7bfb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x35c9);
        EXPECT(gbc.pc(), 0x7bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0061
        gbc.setState(0x965c, 0x9743, 0xb460, 0xda0c, 0x58a3, 0x8dcd, 0x0, 0x1);
        gbc.writeMem(0x965c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9743);
        EXPECT(gbc.pc(), 0x965d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965c), 0x8b);
        // 8B 0062
        gbc.setState(0x3982, 0x17e7, 0x59c0, 0xca16, 0x16ef, 0x5c01, 0x0, 0x0);
        gbc.writeMem(0x3982, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x17e7);
        EXPECT(gbc.pc(), 0x3983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0063
        gbc.setState(0xe6, 0x2e03, 0xc1d0, 0x29d0, 0x8367, 0x839e, 0x0, 0x0);
        gbc.writeMem(0xe6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2e03);
        EXPECT(gbc.pc(), 0xe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0064
        gbc.setState(0x136b, 0x83c6, 0x6680, 0x9fc1, 0xd189, 0x1008, 0x1, 0x1);
        gbc.writeMem(0x136b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x83c6);
        EXPECT(gbc.pc(), 0x136c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0065
        gbc.setState(0x5d33, 0xed7e, 0xb440, 0xefe3, 0x6fc9, 0xcc14, 0x1, 0x0);
        gbc.writeMem(0x5d33, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xed7e);
        EXPECT(gbc.pc(), 0x5d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0066
        gbc.setState(0x868e, 0xb813, 0x4430, 0xd315, 0x723d, 0x1a7f, 0x0, 0x1);
        gbc.writeMem(0x868e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb813);
        EXPECT(gbc.pc(), 0x868f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868e), 0x8b);
        // 8B 0067
        gbc.setState(0x35e6, 0x9893, 0x5df0, 0x9d98, 0x765a, 0xf87c, 0x0, 0x1);
        gbc.writeMem(0x35e6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9893);
        EXPECT(gbc.pc(), 0x35e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0068
        gbc.setState(0x7b56, 0x3ca5, 0xe3c0, 0x8e8c, 0x7454, 0x2cd5, 0x1, 0x1);
        gbc.writeMem(0x7b56, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3ca5);
        EXPECT(gbc.pc(), 0x7b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0069
        gbc.setState(0xa32b, 0x7dca, 0xc590, 0x8072, 0xb39f, 0xa74a, 0x1, 0x1);
        gbc.writeMem(0xa32b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7dca);
        EXPECT(gbc.pc(), 0xa32c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32b), 0x8b);
        // 8B 006A
        gbc.setState(0x5c77, 0x455f, 0xdb00, 0x26d4, 0x3b2e, 0x9322, 0x0, 0x1);
        gbc.writeMem(0x5c77, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x455f);
        EXPECT(gbc.pc(), 0x5c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 006B
        gbc.setState(0x3fcb, 0x67fc, 0xe9f0, 0x54ea, 0x6dc5, 0x33e9, 0x0, 0x1);
        gbc.writeMem(0x3fcb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x67fc);
        EXPECT(gbc.pc(), 0x3fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 006D
        gbc.setState(0x5de7, 0xd9f6, 0xd50, 0x6695, 0x72ad, 0xf22b, 0x0, 0x0);
        gbc.writeMem(0x5de7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd9f6);
        EXPECT(gbc.pc(), 0x5de8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 006E
        gbc.setState(0x431d, 0xdcf5, 0x89f0, 0x92ac, 0x50a, 0x2e47, 0x1, 0x1);
        gbc.writeMem(0x431d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdcf5);
        EXPECT(gbc.pc(), 0x431e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 006F
        gbc.setState(0xe180, 0x33, 0x5740, 0xfc28, 0x4f85, 0x98b6, 0x1, 0x0);
        gbc.writeMem(0xe180, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x33);
        EXPECT(gbc.pc(), 0xe181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe180), 0x8b);
        // 8B 0070
        gbc.setState(0x620d, 0xe802, 0x5a20, 0x52e0, 0xb1af, 0xdec8, 0x1, 0x0);
        gbc.writeMem(0x620d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe802);
        EXPECT(gbc.pc(), 0x620e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0071
        gbc.setState(0x45e4, 0xbaa1, 0xe390, 0x3e7d, 0x3e75, 0x202c, 0x1, 0x1);
        gbc.writeMem(0x45e4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbaa1);
        EXPECT(gbc.pc(), 0x45e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0072
        gbc.setState(0xd02e, 0xdf1f, 0xf4d0, 0x1044, 0xfc46, 0xb9c9, 0x1, 0x0);
        gbc.writeMem(0xd02e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdf1f);
        EXPECT(gbc.pc(), 0xd02f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd02e), 0x8b);
        // 8B 0073
        gbc.setState(0x76a4, 0xb3d, 0xeb10, 0x2329, 0xf854, 0x1b70, 0x1, 0x0);
        gbc.writeMem(0x76a4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb3d);
        EXPECT(gbc.pc(), 0x76a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0074
        gbc.setState(0xb46d, 0x1281, 0xb6b0, 0x94d9, 0x4ab6, 0x818, 0x1, 0x1);
        gbc.writeMem(0xb46d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1281);
        EXPECT(gbc.pc(), 0xb46e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46d), 0x8b);
        // 8B 0075
        gbc.setState(0x8f0d, 0x96b4, 0x1720, 0x1313, 0xa26b, 0xdfc3, 0x0, 0x1);
        gbc.writeMem(0x8f0d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0x8f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0d), 0x8b);
        // 8B 0076
        gbc.setState(0x7137, 0x6f7, 0x2e00, 0x72f6, 0x21de, 0x6576, 0x0, 0x1);
        gbc.writeMem(0x7137, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6f7);
        EXPECT(gbc.pc(), 0x7138);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0077
        gbc.setState(0xcc3f, 0x2da4, 0x9060, 0x842c, 0xe7ac, 0x386d, 0x0, 0x0);
        gbc.writeMem(0xcc3f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2da4);
        EXPECT(gbc.pc(), 0xcc40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3f), 0x8b);
        // 8B 0079
        gbc.setState(0xb945, 0xf5be, 0xc580, 0xcabd, 0xff14, 0x1bd0, 0x0, 0x1);
        gbc.writeMem(0xb945, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf5be);
        EXPECT(gbc.pc(), 0xb946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb945), 0x8b);
        // 8B 007A
        gbc.setState(0x66aa, 0xd3dc, 0xaf60, 0xc2cb, 0xba10, 0xde88, 0x1, 0x0);
        gbc.writeMem(0x66aa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd3dc);
        EXPECT(gbc.pc(), 0x66ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 007B
        gbc.setState(0x41c1, 0xe2d5, 0x8e80, 0xef13, 0xb92d, 0x5369, 0x0, 0x1);
        gbc.writeMem(0x41c1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe2d5);
        EXPECT(gbc.pc(), 0x41c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 007C
        gbc.setState(0xdac0, 0xfd5e, 0xc1f0, 0x1ddb, 0x18c6, 0xbe4, 0x0, 0x1);
        gbc.writeMem(0xdac0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfd5e);
        EXPECT(gbc.pc(), 0xdac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdac0), 0x8b);
        // 8B 007D
        gbc.setState(0x7d92, 0xf95d, 0xd140, 0x28f7, 0xcc99, 0xb8ff, 0x1, 0x0);
        gbc.writeMem(0x7d92, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf95d);
        EXPECT(gbc.pc(), 0x7d93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 007E
        gbc.setState(0xe7c4, 0x5289, 0x2900, 0xfee7, 0xcb18, 0xabc9, 0x1, 0x0);
        gbc.writeMem(0xe7c4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5289);
        EXPECT(gbc.pc(), 0xe7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c4), 0x8b);
        // 8B 007F
        gbc.setState(0xbffb, 0xb078, 0x3160, 0x60c0, 0xc01e, 0xad93, 0x1, 0x1);
        gbc.writeMem(0xbffb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb078);
        EXPECT(gbc.pc(), 0xbffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbffb), 0x8b);
        // 8B 0081
        gbc.setState(0x3194, 0x6b29, 0xaa80, 0xbbf9, 0xc5b2, 0xcb15, 0x1, 0x0);
        gbc.writeMem(0x3194, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6b29);
        EXPECT(gbc.pc(), 0x3195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0082
        gbc.setState(0x784c, 0xf4cb, 0x5b0, 0x8687, 0x645a, 0xa838, 0x0, 0x0);
        gbc.writeMem(0x784c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf4cb);
        EXPECT(gbc.pc(), 0x784d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0083
        gbc.setState(0x7bd9, 0x5f77, 0xbe90, 0xebf3, 0x5e33, 0x9ebf, 0x1, 0x1);
        gbc.writeMem(0x7bd9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5f77);
        EXPECT(gbc.pc(), 0x7bda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0084
        gbc.setState(0xca26, 0x18da, 0x2920, 0x7ded, 0x56ab, 0x566e, 0x1, 0x1);
        gbc.writeMem(0xca26, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x18da);
        EXPECT(gbc.pc(), 0xca27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca26), 0x8b);
        // 8B 0085
        gbc.setState(0x69f9, 0x7819, 0xa2b0, 0xf3aa, 0x88f4, 0x1e9d, 0x0, 0x1);
        gbc.writeMem(0x69f9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7819);
        EXPECT(gbc.pc(), 0x69fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0086
        gbc.setState(0x5742, 0xb039, 0xb7a0, 0x193e, 0xb66b, 0xd849, 0x0, 0x1);
        gbc.writeMem(0x5742, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb039);
        EXPECT(gbc.pc(), 0x5743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0088
        gbc.setState(0x4313, 0x700b, 0x2540, 0x6e47, 0x5b80, 0x4189, 0x0, 0x0);
        gbc.writeMem(0x4313, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x700b);
        EXPECT(gbc.pc(), 0x4314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 008A
        gbc.setState(0xb4e5, 0x9ff6, 0xb270, 0xd662, 0xc20b, 0xbe18, 0x1, 0x0);
        gbc.writeMem(0xb4e5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9ff6);
        EXPECT(gbc.pc(), 0xb4e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e5), 0x8b);
        // 8B 008B
        gbc.setState(0x14c7, 0x16dc, 0xc600, 0xfb47, 0xa212, 0xc6ac, 0x0, 0x0);
        gbc.writeMem(0x14c7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x16dc);
        EXPECT(gbc.pc(), 0x14c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 008D
        gbc.setState(0x543, 0x93f1, 0x5cc0, 0x2d6b, 0xeebb, 0xe8d3, 0x1, 0x0);
        gbc.writeMem(0x543, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x93f1);
        EXPECT(gbc.pc(), 0x544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 008E
        gbc.setState(0x9c11, 0xfc51, 0xbb50, 0x3315, 0x3756, 0x3c78, 0x0, 0x0);
        gbc.writeMem(0x9c11, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfc51);
        EXPECT(gbc.pc(), 0x9c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c11), 0x8b);
        // 8B 008F
        gbc.setState(0x7855, 0x7792, 0x3e10, 0x71d7, 0xfa1c, 0xbbcc, 0x0, 0x0);
        gbc.writeMem(0x7855, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7792);
        EXPECT(gbc.pc(), 0x7856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0090
        gbc.setState(0x8eef, 0xe936, 0x2390, 0xa71a, 0x6893, 0x185e, 0x1, 0x1);
        gbc.writeMem(0x8eef, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe936);
        EXPECT(gbc.pc(), 0x8ef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eef), 0x8b);
        // 8B 0091
        gbc.setState(0x5312, 0xdf05, 0x3ce0, 0xc068, 0xced2, 0x870d, 0x0, 0x1);
        gbc.writeMem(0x5312, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdf05);
        EXPECT(gbc.pc(), 0x5313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0092
        gbc.setState(0xad8f, 0x8139, 0x7050, 0xfe00, 0xbb14, 0x8040, 0x1, 0x0);
        gbc.writeMem(0xad8f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8139);
        EXPECT(gbc.pc(), 0xad90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8f), 0x8b);
        // 8B 0093
        gbc.setState(0x6fbb, 0x9cca, 0x6280, 0x40a, 0x14a7, 0x15b5, 0x0, 0x1);
        gbc.writeMem(0x6fbb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9cca);
        EXPECT(gbc.pc(), 0x6fbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0094
        gbc.setState(0x5947, 0x40d0, 0xdb70, 0xe5ce, 0xc13f, 0xbbaa, 0x1, 0x0);
        gbc.writeMem(0x5947, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x40d0);
        EXPECT(gbc.pc(), 0x5948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0095
        gbc.setState(0x33c4, 0x82f5, 0x9bf0, 0x951a, 0xadff, 0x78ce, 0x0, 0x1);
        gbc.writeMem(0x33c4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x82f5);
        EXPECT(gbc.pc(), 0x33c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0096
        gbc.setState(0x803e, 0x801d, 0x57e0, 0x533d, 0x6292, 0x31d9, 0x1, 0x0);
        gbc.writeMem(0x803e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x801d);
        EXPECT(gbc.pc(), 0x803f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x803e), 0x8b);
        // 8B 0097
        gbc.setState(0xe13c, 0xc5a5, 0x9a40, 0x3a97, 0x1683, 0x99bd, 0x0, 0x1);
        gbc.writeMem(0xe13c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc5a5);
        EXPECT(gbc.pc(), 0xe13d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe13c), 0x8b);
        // 8B 0098
        gbc.setState(0x88b2, 0xf8f8, 0x96e0, 0x6861, 0x21b4, 0xb7ce, 0x0, 0x1);
        gbc.writeMem(0x88b2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf8f8);
        EXPECT(gbc.pc(), 0x88b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b2), 0x8b);
        // 8B 0099
        gbc.setState(0x1952, 0xd2ae, 0xf60, 0x291c, 0x58ce, 0x7f4, 0x1, 0x0);
        gbc.writeMem(0x1952, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd2ae);
        EXPECT(gbc.pc(), 0x1953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 009A
        gbc.setState(0x5bf, 0x8448, 0x5140, 0xb666, 0x8a4e, 0xce24, 0x1, 0x1);
        gbc.writeMem(0x5bf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8448);
        EXPECT(gbc.pc(), 0x5c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 009B
        gbc.setState(0x42f1, 0x69b6, 0x6760, 0xd922, 0xdebf, 0x516f, 0x1, 0x0);
        gbc.writeMem(0x42f1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x69b6);
        EXPECT(gbc.pc(), 0x42f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 009D
        gbc.setState(0xb373, 0xbe8d, 0x17c0, 0x1120, 0xe812, 0xc3, 0x0, 0x1);
        gbc.writeMem(0xb373, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbe8d);
        EXPECT(gbc.pc(), 0xb374);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb373), 0x8b);
        // 8B 009E
        gbc.setState(0x7975, 0x7cd, 0xf070, 0xd2e6, 0xb485, 0xe7d5, 0x0, 0x1);
        gbc.writeMem(0x7975, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7cd);
        EXPECT(gbc.pc(), 0x7976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 009F
        gbc.setState(0x18a6, 0x1b2c, 0x8ff0, 0xcc5, 0x2bd5, 0x4f02, 0x0, 0x1);
        gbc.writeMem(0x18a6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1b2c);
        EXPECT(gbc.pc(), 0x18a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00A0
        gbc.setState(0xa289, 0xc323, 0xf9f0, 0xb1a2, 0xa7ff, 0x8469, 0x0, 0x1);
        gbc.writeMem(0xa289, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc323);
        EXPECT(gbc.pc(), 0xa28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa289), 0x8b);
        // 8B 00A1
        gbc.setState(0x29f2, 0xf8a1, 0x4bf0, 0x1bbc, 0x543b, 0x7d2b, 0x1, 0x0);
        gbc.writeMem(0x29f2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf8a1);
        EXPECT(gbc.pc(), 0x29f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00A2
        gbc.setState(0xda34, 0xba36, 0xa4f0, 0xf4fb, 0xea6a, 0x8134, 0x1, 0x1);
        gbc.writeMem(0xda34, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xba36);
        EXPECT(gbc.pc(), 0xda35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda34), 0x8b);
        // 8B 00A3
        gbc.setState(0xa6e6, 0x7f65, 0x12e0, 0xcd7e, 0x4f25, 0x1c53, 0x0, 0x0);
        gbc.writeMem(0xa6e6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7f65);
        EXPECT(gbc.pc(), 0xa6e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e6), 0x8b);
        // 8B 00A4
        gbc.setState(0xe8af, 0x83e0, 0x64c0, 0x7982, 0x4a8a, 0xb7d8, 0x1, 0x1);
        gbc.writeMem(0xe8af, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x83e0);
        EXPECT(gbc.pc(), 0xe8b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8af), 0x8b);
        // 8B 00A5
        gbc.setState(0x907a, 0xb915, 0x39d0, 0xe812, 0x4767, 0x6d6e, 0x1, 0x0);
        gbc.writeMem(0x907a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb915);
        EXPECT(gbc.pc(), 0x907b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x907a), 0x8b);
        // 8B 00A6
        gbc.setState(0xba8b, 0xca52, 0x6420, 0x6e0e, 0x31d4, 0x644a, 0x1, 0x0);
        gbc.writeMem(0xba8b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xca52);
        EXPECT(gbc.pc(), 0xba8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba8b), 0x8b);
        // 8B 00A7
        gbc.setState(0xb59e, 0x23ff, 0x9f80, 0xc23, 0x5727, 0xa5b3, 0x1, 0x0);
        gbc.writeMem(0xb59e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x23ff);
        EXPECT(gbc.pc(), 0xb59f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59e), 0x8b);
        // 8B 00A8
        gbc.setState(0x2735, 0x72c7, 0xc300, 0x73f8, 0x19b, 0x3768, 0x1, 0x1);
        gbc.writeMem(0x2735, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x72c7);
        EXPECT(gbc.pc(), 0x2736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00A9
        gbc.setState(0x6b93, 0xb49b, 0x4de0, 0x2850, 0xc25f, 0xab4d, 0x1, 0x1);
        gbc.writeMem(0x6b93, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0x6b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00AB
        gbc.setState(0x326, 0xaa37, 0x57d0, 0x5c3f, 0xbadc, 0xb03b, 0x1, 0x1);
        gbc.writeMem(0x326, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xaa37);
        EXPECT(gbc.pc(), 0x327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00AC
        gbc.setState(0x7faa, 0x8167, 0x5420, 0x261a, 0xe0ef, 0xe95f, 0x0, 0x1);
        gbc.writeMem(0x7faa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8167);
        EXPECT(gbc.pc(), 0x7fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00AD
        gbc.setState(0xca3e, 0xce4c, 0x3010, 0x9eb6, 0x8b92, 0x719f, 0x0, 0x0);
        gbc.writeMem(0xca3e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xce4c);
        EXPECT(gbc.pc(), 0xca3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca3e), 0x8b);
        // 8B 00AE
        gbc.setState(0x997d, 0x2caa, 0x67e0, 0x3218, 0x6cd, 0x1abc, 0x0, 0x1);
        gbc.writeMem(0x997d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2caa);
        EXPECT(gbc.pc(), 0x997e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x997d), 0x8b);
        // 8B 00AF
        gbc.setState(0xa002, 0xe485, 0x5970, 0x426a, 0x3a5d, 0x5819, 0x1, 0x0);
        gbc.writeMem(0xa002, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe485);
        EXPECT(gbc.pc(), 0xa003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa002), 0x8b);
        // 8B 00B0
        gbc.setState(0xa034, 0xdc40, 0x73f0, 0xa5ea, 0x1f6b, 0x2a2d, 0x0, 0x1);
        gbc.writeMem(0xa034, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xdc40);
        EXPECT(gbc.pc(), 0xa035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa034), 0x8b);
        // 8B 00B1
        gbc.setState(0x2c4a, 0x6feb, 0x7c10, 0xfc7, 0x6328, 0x46c6, 0x1, 0x1);
        gbc.writeMem(0x2c4a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6feb);
        EXPECT(gbc.pc(), 0x2c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00B2
        gbc.setState(0x187d, 0x43c, 0x4750, 0xf085, 0xe2d3, 0x11a9, 0x0, 0x0);
        gbc.writeMem(0x187d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x43c);
        EXPECT(gbc.pc(), 0x187e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00B4
        gbc.setState(0x31aa, 0x7fa3, 0x4640, 0x2292, 0x6a7d, 0x7d60, 0x0, 0x0);
        gbc.writeMem(0x31aa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7fa3);
        EXPECT(gbc.pc(), 0x31ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00B5
        gbc.setState(0x2569, 0x32ff, 0x2db0, 0x7f5c, 0x6775, 0xd9d9, 0x1, 0x1);
        gbc.writeMem(0x2569, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x32ff);
        EXPECT(gbc.pc(), 0x256a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00B6
        gbc.setState(0x8f67, 0xb1ae, 0x6f0, 0x4b82, 0x6409, 0xb5ef, 0x0, 0x0);
        gbc.writeMem(0x8f67, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb1ae);
        EXPECT(gbc.pc(), 0x8f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f67), 0x8b);
        // 8B 00B7
        gbc.setState(0x4a31, 0xb98f, 0xe4c0, 0xda68, 0x9209, 0x9c3c, 0x1, 0x1);
        gbc.writeMem(0x4a31, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb98f);
        EXPECT(gbc.pc(), 0x4a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00B8
        gbc.setState(0x9fdd, 0x693c, 0x2d10, 0xa3fe, 0x3305, 0x420e, 0x0, 0x0);
        gbc.writeMem(0x9fdd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x693c);
        EXPECT(gbc.pc(), 0x9fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fdd), 0x8b);
        // 8B 00B9
        gbc.setState(0x8ceb, 0xbd10, 0xf220, 0x2864, 0xd86c, 0x1df1, 0x0, 0x0);
        gbc.writeMem(0x8ceb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xbd10);
        EXPECT(gbc.pc(), 0x8cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ceb), 0x8b);
        // 8B 00BA
        gbc.setState(0x9c97, 0xb66b, 0x1da0, 0x200, 0x53c9, 0xe1e3, 0x0, 0x1);
        gbc.writeMem(0x9c97, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb66b);
        EXPECT(gbc.pc(), 0x9c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c97), 0x8b);
        // 8B 00BB
        gbc.setState(0x7494, 0x769c, 0x1010, 0xeecf, 0xc308, 0xa857, 0x0, 0x1);
        gbc.writeMem(0x7494, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x769c);
        EXPECT(gbc.pc(), 0x7495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00BC
        gbc.setState(0xbf8, 0x9771, 0xebf0, 0xd01f, 0xc79a, 0xf407, 0x0, 0x0);
        gbc.writeMem(0xbf8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9771);
        EXPECT(gbc.pc(), 0xbf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00BD
        gbc.setState(0xc463, 0x29ab, 0x2a80, 0x220d, 0x43bc, 0x8d41, 0x1, 0x1);
        gbc.writeMem(0xc463, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x29ab);
        EXPECT(gbc.pc(), 0xc464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc463), 0x8b);
        // 8B 00BE
        gbc.setState(0x699a, 0x82ce, 0x2e40, 0x7f07, 0x9451, 0x28e8, 0x1, 0x1);
        gbc.writeMem(0x699a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x82ce);
        EXPECT(gbc.pc(), 0x699b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00BF
        gbc.setState(0xb53f, 0x8c84, 0xd540, 0xbd66, 0x5639, 0xc0a5, 0x0, 0x0);
        gbc.writeMem(0xb53f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8c84);
        EXPECT(gbc.pc(), 0xb540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb53f), 0x8b);
        // 8B 00C0
        gbc.setState(0xa885, 0x8b50, 0x5b40, 0x924f, 0x7e01, 0x4da, 0x1, 0x0);
        gbc.writeMem(0xa885, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8b50);
        EXPECT(gbc.pc(), 0xa886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa885), 0x8b);
        // 8B 00C1
        gbc.setState(0xdfe, 0xac55, 0x1c60, 0x370d, 0x6fc5, 0x4aab, 0x1, 0x0);
        gbc.writeMem(0xdfe, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xac55);
        EXPECT(gbc.pc(), 0xdff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00C2
        gbc.setState(0xb004, 0xdae0, 0x530, 0x43d1, 0x5902, 0x7ced, 0x1, 0x1);
        gbc.writeMem(0xb004, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdae0);
        EXPECT(gbc.pc(), 0xb005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb004), 0x8b);
        // 8B 00C3
        gbc.setState(0x80b8, 0x1ca0, 0xc000, 0x438f, 0x9e8b, 0xdbd3, 0x1, 0x0);
        gbc.writeMem(0x80b8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1ca0);
        EXPECT(gbc.pc(), 0x80b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b8), 0x8b);
        // 8B 00C4
        gbc.setState(0xb1c1, 0xd87c, 0x7790, 0x3a74, 0xd4d, 0x979e, 0x0, 0x1);
        gbc.writeMem(0xb1c1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd87c);
        EXPECT(gbc.pc(), 0xb1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c1), 0x8b);
        // 8B 00C5
        gbc.setState(0xdee, 0xbc9f, 0x4b80, 0xb1d0, 0x772b, 0x2e43, 0x0, 0x1);
        gbc.writeMem(0xdee, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbc9f);
        EXPECT(gbc.pc(), 0xdef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00C6
        gbc.setState(0x17f2, 0x3dec, 0xd2d0, 0x6b6a, 0x5268, 0x71dd, 0x1, 0x1);
        gbc.writeMem(0x17f2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3dec);
        EXPECT(gbc.pc(), 0x17f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00C7
        gbc.setState(0xc74e, 0x97c3, 0xaf70, 0xdda7, 0xca9b, 0x815c, 0x0, 0x1);
        gbc.writeMem(0xc74e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x97c3);
        EXPECT(gbc.pc(), 0xc74f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc74e), 0x8b);
        // 8B 00C8
        gbc.setState(0x5253, 0x6287, 0x2fd0, 0xd153, 0x651a, 0x6bbd, 0x1, 0x0);
        gbc.writeMem(0x5253, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6287);
        EXPECT(gbc.pc(), 0x5254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00C9
        gbc.setState(0x3968, 0xc127, 0x6f30, 0xc20, 0x365b, 0x2980, 0x1, 0x0);
        gbc.writeMem(0x3968, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc127);
        EXPECT(gbc.pc(), 0x3969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00CA
        gbc.setState(0x7fab, 0x4cf0, 0x2790, 0x488a, 0xccda, 0x3830, 0x0, 0x0);
        gbc.writeMem(0x7fab, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4cf0);
        EXPECT(gbc.pc(), 0x7fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00CB
        gbc.setState(0x1a02, 0x62aa, 0xcd60, 0xa69f, 0x69fb, 0x1a43, 0x0, 0x1);
        gbc.writeMem(0x1a02, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x62aa);
        EXPECT(gbc.pc(), 0x1a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00CC
        gbc.setState(0x1dd8, 0x35ed, 0xcc40, 0x14db, 0xc798, 0xc855, 0x0, 0x1);
        gbc.writeMem(0x1dd8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x35ed);
        EXPECT(gbc.pc(), 0x1dd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00CD
        gbc.setState(0xf3a, 0x9186, 0x5250, 0xfa66, 0xd7c2, 0x96a1, 0x1, 0x0);
        gbc.writeMem(0xf3a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9186);
        EXPECT(gbc.pc(), 0xf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00CE
        gbc.setState(0x34cf, 0xd05, 0xb770, 0xccdc, 0x16f2, 0x76c4, 0x0, 0x1);
        gbc.writeMem(0x34cf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd05);
        EXPECT(gbc.pc(), 0x34d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00CF
        gbc.setState(0xa07, 0x80b5, 0xd200, 0x4e6d, 0xcb9d, 0x4329, 0x0, 0x1);
        gbc.writeMem(0xa07, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x80b5);
        EXPECT(gbc.pc(), 0xa08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00D0
        gbc.setState(0x3201, 0x98c9, 0x2d80, 0x2202, 0x4ad5, 0xbdfe, 0x1, 0x0);
        gbc.writeMem(0x3201, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x98c9);
        EXPECT(gbc.pc(), 0x3202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00D1
        gbc.setState(0x9be6, 0xede2, 0x17d0, 0x3f09, 0x9366, 0x4b41, 0x1, 0x0);
        gbc.writeMem(0x9be6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xede2);
        EXPECT(gbc.pc(), 0x9be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be6), 0x8b);
        // 8B 00D2
        gbc.setState(0xda5a, 0x17d9, 0xc830, 0xebd6, 0x9817, 0x19c7, 0x1, 0x0);
        gbc.writeMem(0xda5a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x17d9);
        EXPECT(gbc.pc(), 0xda5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5a), 0x8b);
        // 8B 00D3
        gbc.setState(0xa7ba, 0xe74d, 0x5d20, 0x7828, 0xfbb1, 0xbfb0, 0x1, 0x1);
        gbc.writeMem(0xa7ba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe74d);
        EXPECT(gbc.pc(), 0xa7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ba), 0x8b);
        // 8B 00D4
        gbc.setState(0x9f80, 0x5685, 0xfa50, 0x2fb4, 0xd96, 0x9e34, 0x0, 0x1);
        gbc.writeMem(0x9f80, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5685);
        EXPECT(gbc.pc(), 0x9f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f80), 0x8b);
        // 8B 00D5
        gbc.setState(0xac48, 0xb651, 0xc110, 0x874c, 0xa48b, 0xebcb, 0x0, 0x0);
        gbc.writeMem(0xac48, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb651);
        EXPECT(gbc.pc(), 0xac49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac48), 0x8b);
        // 8B 00D7
        gbc.setState(0x4ed8, 0x7368, 0x200, 0x31fb, 0x9035, 0x2117, 0x0, 0x0);
        gbc.writeMem(0x4ed8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7368);
        EXPECT(gbc.pc(), 0x4ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00D8
        gbc.setState(0x754, 0xc13, 0xcac0, 0x4702, 0x4c0, 0xf4d3, 0x0, 0x1);
        gbc.writeMem(0x754, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc13);
        EXPECT(gbc.pc(), 0x755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00D9
        gbc.setState(0x86f9, 0x56a1, 0x3620, 0x99fe, 0xfd00, 0x271b, 0x1, 0x0);
        gbc.writeMem(0x86f9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x56a1);
        EXPECT(gbc.pc(), 0x86fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f9), 0x8b);
        // 8B 00DA
        gbc.setState(0x14c9, 0xe51, 0x4920, 0x5195, 0x237f, 0xcd4d, 0x1, 0x1);
        gbc.writeMem(0x14c9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe51);
        EXPECT(gbc.pc(), 0x14ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00DB
        gbc.setState(0xbb93, 0x41e7, 0x5610, 0x6da9, 0x67ae, 0xc0dc, 0x1, 0x1);
        gbc.writeMem(0xbb93, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x41e7);
        EXPECT(gbc.pc(), 0xbb94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb93), 0x8b);
        // 8B 00DC
        gbc.setState(0xb8ca, 0x21c7, 0xeaa0, 0x1c66, 0xc45b, 0xd06a, 0x0, 0x0);
        gbc.writeMem(0xb8ca, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x21c7);
        EXPECT(gbc.pc(), 0xb8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ca), 0x8b);
        // 8B 00DD
        gbc.setState(0x8dab, 0xc4af, 0x7b40, 0xf745, 0xa4c4, 0xb48c, 0x0, 0x0);
        gbc.writeMem(0x8dab, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc4af);
        EXPECT(gbc.pc(), 0x8dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dab), 0x8b);
        // 8B 00DE
        gbc.setState(0xd776, 0x4a13, 0xf750, 0x6427, 0x7f77, 0x4165, 0x0, 0x1);
        gbc.writeMem(0xd776, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4a13);
        EXPECT(gbc.pc(), 0xd777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd776), 0x8b);
        // 8B 00DF
        gbc.setState(0xc358, 0xe520, 0x2fe0, 0x1f75, 0xc4b3, 0xc623, 0x1, 0x0);
        gbc.writeMem(0xc358, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe520);
        EXPECT(gbc.pc(), 0xc359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc358), 0x8b);
        // 8B 00E0
        gbc.setState(0x53d6, 0x20d6, 0x8a80, 0xf218, 0x3899, 0xc696, 0x1, 0x0);
        gbc.writeMem(0x53d6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x20d6);
        EXPECT(gbc.pc(), 0x53d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00E1
        gbc.setState(0xb406, 0x27f7, 0x9440, 0x1df, 0x4204, 0x153b, 0x0, 0x0);
        gbc.writeMem(0xb406, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x27f7);
        EXPECT(gbc.pc(), 0xb407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb406), 0x8b);
        // 8B 00E2
        gbc.setState(0xba7d, 0x6e24, 0x37c0, 0x9cc3, 0x32e0, 0x97dc, 0x1, 0x0);
        gbc.writeMem(0xba7d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6e24);
        EXPECT(gbc.pc(), 0xba7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7d), 0x8b);
        // 8B 00E3
        gbc.setState(0x5186, 0x1960, 0x34e0, 0xb86a, 0x3058, 0x9705, 0x0, 0x1);
        gbc.writeMem(0x5186, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1960);
        EXPECT(gbc.pc(), 0x5187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00E5
        gbc.setState(0x8031, 0x64bd, 0x6f20, 0x6c94, 0x5c4d, 0xf285, 0x1, 0x1);
        gbc.writeMem(0x8031, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x64bd);
        EXPECT(gbc.pc(), 0x8032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8031), 0x8b);
        // 8B 00E6
        gbc.setState(0xbaf6, 0x3a3c, 0xde80, 0x5498, 0xfdee, 0x63c2, 0x0, 0x0);
        gbc.writeMem(0xbaf6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3a3c);
        EXPECT(gbc.pc(), 0xbaf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf6), 0x8b);
        // 8B 00E7
        gbc.setState(0xef60, 0x8d2e, 0x4b10, 0xb87d, 0x4a9a, 0x8b37, 0x0, 0x0);
        gbc.writeMem(0xef60, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8d2e);
        EXPECT(gbc.pc(), 0xef61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef60), 0x8b);
        // 8B 00E8
        gbc.setState(0x8c28, 0x6cf2, 0x6180, 0x195e, 0x213d, 0x4386, 0x0, 0x1);
        gbc.writeMem(0x8c28, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6cf2);
        EXPECT(gbc.pc(), 0x8c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c28), 0x8b);
        // 8B 00E9
        gbc.setState(0x4605, 0xf2d9, 0x1650, 0xbc6d, 0xfc39, 0xaab9, 0x0, 0x0);
        gbc.writeMem(0x4605, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf2d9);
        EXPECT(gbc.pc(), 0x4606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00EA
        gbc.setState(0xb5c8, 0xd51b, 0x5d80, 0xc560, 0x1d9, 0x553f, 0x1, 0x0);
        gbc.writeMem(0xb5c8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd51b);
        EXPECT(gbc.pc(), 0xb5c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c8), 0x8b);
        // 8B 00EB
        gbc.setState(0x262d, 0x8296, 0xcee0, 0xc640, 0x306c, 0x383d, 0x0, 0x0);
        gbc.writeMem(0x262d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8296);
        EXPECT(gbc.pc(), 0x262e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00EC
        gbc.setState(0xcf0c, 0x92a5, 0x4840, 0xb1f6, 0x8c99, 0xe17c, 0x0, 0x1);
        gbc.writeMem(0xcf0c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x92a5);
        EXPECT(gbc.pc(), 0xcf0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0c), 0x8b);
        // 8B 00ED
        gbc.setState(0xea0c, 0xc7a5, 0x46a0, 0x793a, 0xe80b, 0x6642, 0x1, 0x1);
        gbc.writeMem(0xea0c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc7a5);
        EXPECT(gbc.pc(), 0xea0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0c), 0x8b);
        // 8B 00EE
        gbc.setState(0x9fd3, 0x89ca, 0x21d0, 0xb0d9, 0xd7ec, 0x8309, 0x1, 0x1);
        gbc.writeMem(0x9fd3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x89ca);
        EXPECT(gbc.pc(), 0x9fd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fd3), 0x8b);
        // 8B 00EF
        gbc.setState(0x7295, 0x7fb0, 0xb340, 0x60a, 0x4acc, 0xb248, 0x0, 0x1);
        gbc.writeMem(0x7295, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7fb0);
        EXPECT(gbc.pc(), 0x7296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00F0
        gbc.setState(0x32bf, 0x54a6, 0xc6d0, 0xdd3, 0xcad5, 0x3997, 0x0, 0x0);
        gbc.writeMem(0x32bf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x54a6);
        EXPECT(gbc.pc(), 0x32c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00F1
        gbc.setState(0xbe46, 0xfce, 0x30c0, 0xc967, 0xad50, 0x88ad, 0x1, 0x0);
        gbc.writeMem(0xbe46, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfce);
        EXPECT(gbc.pc(), 0xbe47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe46), 0x8b);
        // 8B 00F2
        gbc.setState(0x55e6, 0xc8ce, 0x1a90, 0x889e, 0xf23d, 0x5b9a, 0x1, 0x1);
        gbc.writeMem(0x55e6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc8ce);
        EXPECT(gbc.pc(), 0x55e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00F3
        gbc.setState(0xcec6, 0xa5dd, 0x5550, 0xbcfa, 0xa21e, 0xa3c0, 0x0, 0x1);
        gbc.writeMem(0xcec6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa5dd);
        EXPECT(gbc.pc(), 0xcec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcec6), 0x8b);
        // 8B 00F4
        gbc.setState(0xd2f1, 0x1cc8, 0xf830, 0x18d0, 0xa0e7, 0x12aa, 0x1, 0x0);
        gbc.writeMem(0xd2f1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1cc8);
        EXPECT(gbc.pc(), 0xd2f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f1), 0x8b);
        // 8B 00F5
        gbc.setState(0x64ea, 0xfaca, 0x8800, 0xe012, 0x3340, 0x5fbd, 0x0, 0x0);
        gbc.writeMem(0x64ea, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xfaca);
        EXPECT(gbc.pc(), 0x64eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 00F6
        gbc.setState(0xdfdf, 0xaf2d, 0x9fd0, 0xd955, 0xbdc1, 0x5a3a, 0x0, 0x1);
        gbc.writeMem(0xdfdf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xaf2d);
        EXPECT(gbc.pc(), 0xdfe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfdf), 0x8b);
        // 8B 00F7
        gbc.setState(0x2342, 0x1fb7, 0x4e50, 0x9d6, 0xb6a3, 0x93eb, 0x1, 0x0);
        gbc.writeMem(0x2342, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1fb7);
        EXPECT(gbc.pc(), 0x2343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 00F8
        gbc.setState(0xad51, 0x19b0, 0x1180, 0x2ae6, 0x116, 0x3f26, 0x1, 0x1);
        gbc.writeMem(0xad51, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x19b0);
        EXPECT(gbc.pc(), 0xad52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad51), 0x8b);
        // 8B 00F9
        gbc.setState(0x5558, 0x85fe, 0xa300, 0xa3a, 0xbcec, 0x340d, 0x0, 0x1);
        gbc.writeMem(0x5558, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x85fe);
        EXPECT(gbc.pc(), 0x5559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00FA
        gbc.setState(0x4b57, 0x56d4, 0xecb0, 0x1dcb, 0x6f72, 0xbed4, 0x1, 0x0);
        gbc.writeMem(0x4b57, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x56d4);
        EXPECT(gbc.pc(), 0x4b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00FB
        gbc.setState(0xee21, 0x4839, 0xe3e0, 0xfdfa, 0x88fe, 0xfdb, 0x1, 0x1);
        gbc.writeMem(0xee21, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4839);
        EXPECT(gbc.pc(), 0xee22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee21), 0x8b);
        // 8B 00FC
        gbc.setState(0x79e2, 0x8875, 0x4340, 0x1f9c, 0x94d0, 0x5861, 0x0, 0x0);
        gbc.writeMem(0x79e2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8875);
        EXPECT(gbc.pc(), 0x79e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 00FD
        gbc.setState(0x57be, 0xd1c6, 0x9630, 0x4956, 0x55af, 0xae42, 0x0, 0x0);
        gbc.writeMem(0x57be, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd1c6);
        EXPECT(gbc.pc(), 0x57bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 00FE
        gbc.setState(0xceac, 0xb18f, 0x7c0, 0x56a8, 0xbf8a, 0xa3f6, 0x1, 0x0);
        gbc.writeMem(0xceac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb18f);
        EXPECT(gbc.pc(), 0xcead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceac), 0x8b);
        // 8B 0100
        gbc.setState(0x8cb8, 0x63d, 0xfd70, 0x44fd, 0x3c7e, 0x761d, 0x0, 0x1);
        gbc.writeMem(0x8cb8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x63d);
        EXPECT(gbc.pc(), 0x8cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cb8), 0x8b);
        // 8B 0101
        gbc.setState(0x51d6, 0x91a6, 0x23d0, 0x8f1d, 0xb361, 0x5170, 0x0, 0x0);
        gbc.writeMem(0x51d6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x91a6);
        EXPECT(gbc.pc(), 0x51d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0102
        gbc.setState(0x9aa4, 0x75ac, 0xa3a0, 0xfbf5, 0xd22b, 0x6190, 0x1, 0x0);
        gbc.writeMem(0x9aa4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x75ac);
        EXPECT(gbc.pc(), 0x9aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa4), 0x8b);
        // 8B 0103
        gbc.setState(0x3682, 0x4fcc, 0xa520, 0x27e, 0x9042, 0x42f3, 0x1, 0x0);
        gbc.writeMem(0x3682, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4fcc);
        EXPECT(gbc.pc(), 0x3683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0104
        gbc.setState(0xdbd0, 0xde95, 0xd370, 0xb6ac, 0x7b42, 0x96b4, 0x0, 0x0);
        gbc.writeMem(0xdbd0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xde95);
        EXPECT(gbc.pc(), 0xdbd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd0), 0x8b);
        // 8B 0105
        gbc.setState(0x84d4, 0xb58c, 0xf810, 0x917b, 0xf64e, 0x1797, 0x0, 0x1);
        gbc.writeMem(0x84d4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb58c);
        EXPECT(gbc.pc(), 0x84d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d4), 0x8b);
        // 8B 0106
        gbc.setState(0xde90, 0xc419, 0x590, 0x6ba4, 0xf45a, 0x949f, 0x0, 0x0);
        gbc.writeMem(0xde90, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc419);
        EXPECT(gbc.pc(), 0xde91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde90), 0x8b);
        // 8B 0108
        gbc.setState(0xca4d, 0x7589, 0xc4b0, 0x6b0e, 0x6e7a, 0x2e3b, 0x0, 0x0);
        gbc.writeMem(0xca4d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7589);
        EXPECT(gbc.pc(), 0xca4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca4d), 0x8b);
        // 8B 0109
        gbc.setState(0x54d, 0xc2d3, 0x2670, 0xdfcd, 0x95c, 0x2ae, 0x1, 0x1);
        gbc.writeMem(0x54d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc2d3);
        EXPECT(gbc.pc(), 0x54e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 010A
        gbc.setState(0xd71, 0xa16a, 0x94f0, 0x100e, 0xbfb, 0x2e9a, 0x1, 0x0);
        gbc.writeMem(0xd71, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa16a);
        EXPECT(gbc.pc(), 0xd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 010B
        gbc.setState(0x72d2, 0x42e, 0xe940, 0xd9de, 0x7773, 0x7e3e, 0x0, 0x1);
        gbc.writeMem(0x72d2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x42e);
        EXPECT(gbc.pc(), 0x72d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 010C
        gbc.setState(0x443b, 0xa199, 0xd430, 0x69ac, 0x10ba, 0x5b08, 0x0, 0x0);
        gbc.writeMem(0x443b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa199);
        EXPECT(gbc.pc(), 0x443c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 010D
        gbc.setState(0x304b, 0x7b76, 0x8ed0, 0xb15b, 0xb794, 0x887f, 0x0, 0x1);
        gbc.writeMem(0x304b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7b76);
        EXPECT(gbc.pc(), 0x304c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 010E
        gbc.setState(0x6cba, 0xb7cb, 0x94e0, 0xb0ac, 0xf36e, 0xb0c7, 0x1, 0x0);
        gbc.writeMem(0x6cba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb7cb);
        EXPECT(gbc.pc(), 0x6cbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 010F
        gbc.setState(0xec82, 0xe258, 0xfde0, 0x9838, 0xe4d1, 0xca71, 0x0, 0x1);
        gbc.writeMem(0xec82, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe258);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec82), 0x8b);
        // 8B 0111
        gbc.setState(0x865a, 0xf3c3, 0x9cf0, 0xf945, 0xf30e, 0xab47, 0x1, 0x1);
        gbc.writeMem(0x865a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf3c3);
        EXPECT(gbc.pc(), 0x865b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865a), 0x8b);
        // 8B 0112
        gbc.setState(0x582b, 0xf36f, 0x7fc0, 0x982c, 0x99d3, 0xa488, 0x0, 0x1);
        gbc.writeMem(0x582b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf36f);
        EXPECT(gbc.pc(), 0x582c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0113
        gbc.setState(0x3051, 0x19d8, 0x3400, 0x61d8, 0x537d, 0xdd46, 0x1, 0x1);
        gbc.writeMem(0x3051, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x19d8);
        EXPECT(gbc.pc(), 0x3052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0114
        gbc.setState(0x307b, 0x5364, 0x9ba0, 0x7659, 0x2dff, 0xebed, 0x1, 0x0);
        gbc.writeMem(0x307b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5364);
        EXPECT(gbc.pc(), 0x307c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0115
        gbc.setState(0xd12f, 0x9a2b, 0x5600, 0xf997, 0xe666, 0x4190, 0x1, 0x1);
        gbc.writeMem(0xd12f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9a2b);
        EXPECT(gbc.pc(), 0xd130);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd12f), 0x8b);
        // 8B 0116
        gbc.setState(0xc39f, 0x9c31, 0x270, 0x884c, 0xf6f6, 0xce6e, 0x1, 0x1);
        gbc.writeMem(0xc39f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9c31);
        EXPECT(gbc.pc(), 0xc3a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39f), 0x8b);
        // 8B 0117
        gbc.setState(0x9555, 0x8468, 0x9080, 0xefe8, 0xb9a2, 0x20a9, 0x0, 0x0);
        gbc.writeMem(0x9555, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8468);
        EXPECT(gbc.pc(), 0x9556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9555), 0x8b);
        // 8B 0118
        gbc.setState(0xcbe, 0xe68c, 0x38b0, 0x93ec, 0x22fc, 0x37b9, 0x0, 0x0);
        gbc.writeMem(0xcbe, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe68c);
        EXPECT(gbc.pc(), 0xcbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0119
        gbc.setState(0xd1ea, 0x93fb, 0xa8c0, 0xcac1, 0x8704, 0x4ad7, 0x1, 0x1);
        gbc.writeMem(0xd1ea, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x93fb);
        EXPECT(gbc.pc(), 0xd1eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ea), 0x8b);
        // 8B 011A
        gbc.setState(0xa3e0, 0xaa1d, 0x3eb0, 0xb4c, 0x5552, 0x1cb2, 0x0, 0x1);
        gbc.writeMem(0xa3e0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xaa1d);
        EXPECT(gbc.pc(), 0xa3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e0), 0x8b);
        // 8B 011B
        gbc.setState(0xe05e, 0xe5d6, 0xdc30, 0x3c72, 0x7745, 0x3620, 0x0, 0x1);
        gbc.writeMem(0xe05e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe5d6);
        EXPECT(gbc.pc(), 0xe05f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe05e), 0x8b);
        // 8B 011C
        gbc.setState(0x809e, 0x9882, 0x4bd0, 0xe71f, 0xc320, 0x3c6e, 0x1, 0x0);
        gbc.writeMem(0x809e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9882);
        EXPECT(gbc.pc(), 0x809f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809e), 0x8b);
        // 8B 011D
        gbc.setState(0xe017, 0x6e16, 0xf910, 0x4d60, 0xecb, 0xe4d5, 0x1, 0x0);
        gbc.writeMem(0xe017, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6e16);
        EXPECT(gbc.pc(), 0xe018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe017), 0x8b);
        // 8B 011E
        gbc.setState(0x17c0, 0x61be, 0xbe0, 0xc401, 0x422a, 0x3936, 0x0, 0x1);
        gbc.writeMem(0x17c0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x61be);
        EXPECT(gbc.pc(), 0x17c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 011F
        gbc.setState(0x5163, 0x959d, 0x68f0, 0xb77, 0xeb27, 0xcf45, 0x1, 0x0);
        gbc.writeMem(0x5163, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x959d);
        EXPECT(gbc.pc(), 0x5164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0120
        gbc.setState(0x7e2c, 0x5da, 0xec00, 0xb4bf, 0xe97a, 0x2575, 0x1, 0x1);
        gbc.writeMem(0x7e2c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5da);
        EXPECT(gbc.pc(), 0x7e2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0121
        gbc.setState(0x2d43, 0x6740, 0xd940, 0x56c3, 0x2857, 0x67e4, 0x1, 0x0);
        gbc.writeMem(0x2d43, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6740);
        EXPECT(gbc.pc(), 0x2d44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0122
        gbc.setState(0xa436, 0x77d7, 0xb670, 0x67ae, 0x3213, 0x4063, 0x1, 0x0);
        gbc.writeMem(0xa436, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x77d7);
        EXPECT(gbc.pc(), 0xa437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa436), 0x8b);
        // 8B 0123
        gbc.setState(0x1692, 0xc692, 0xd570, 0x38e9, 0xc91f, 0x24d1, 0x1, 0x1);
        gbc.writeMem(0x1692, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc692);
        EXPECT(gbc.pc(), 0x1693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0124
        gbc.setState(0x5de2, 0xf383, 0xd880, 0xd57e, 0x46b3, 0x7760, 0x1, 0x0);
        gbc.writeMem(0x5de2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf383);
        EXPECT(gbc.pc(), 0x5de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0125
        gbc.setState(0x7f0c, 0x92e1, 0xc4c0, 0x37, 0x25f6, 0xbd42, 0x0, 0x0);
        gbc.writeMem(0x7f0c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x92e1);
        EXPECT(gbc.pc(), 0x7f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0126
        gbc.setState(0xb6c3, 0x8829, 0x26b0, 0xbc14, 0x552, 0x5954, 0x1, 0x1);
        gbc.writeMem(0xb6c3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8829);
        EXPECT(gbc.pc(), 0xb6c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c3), 0x8b);
        // 8B 0127
        gbc.setState(0x4bcf, 0x1e05, 0x6a80, 0x926f, 0x6828, 0x4590, 0x1, 0x0);
        gbc.writeMem(0x4bcf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1e05);
        EXPECT(gbc.pc(), 0x4bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0128
        gbc.setState(0xe4e8, 0xc1a5, 0xed90, 0xcccd, 0x3e21, 0x7ff9, 0x1, 0x0);
        gbc.writeMem(0xe4e8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc1a5);
        EXPECT(gbc.pc(), 0xe4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e8), 0x8b);
        // 8B 0129
        gbc.setState(0x6f7a, 0x473d, 0x4f30, 0xf6f6, 0x26b0, 0x93d6, 0x1, 0x1);
        gbc.writeMem(0x6f7a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x473d);
        EXPECT(gbc.pc(), 0x6f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 012A
        gbc.setState(0x7352, 0x1a83, 0x4de0, 0x5aa0, 0xecd3, 0xc241, 0x0, 0x0);
        gbc.writeMem(0x7352, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1a83);
        EXPECT(gbc.pc(), 0x7353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 012B
        gbc.setState(0x907e, 0x9275, 0x8ff0, 0xfd81, 0x78b9, 0xd7f0, 0x1, 0x0);
        gbc.writeMem(0x907e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9275);
        EXPECT(gbc.pc(), 0x907f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x907e), 0x8b);
        // 8B 012C
        gbc.setState(0x9fb9, 0x9c6c, 0xeed0, 0x7c66, 0x4e5e, 0x8bcf, 0x0, 0x0);
        gbc.writeMem(0x9fb9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9c6c);
        EXPECT(gbc.pc(), 0x9fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb9), 0x8b);
        // 8B 012D
        gbc.setState(0x5902, 0xac17, 0x2170, 0x23af, 0x254a, 0x353d, 0x0, 0x0);
        gbc.writeMem(0x5902, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xac17);
        EXPECT(gbc.pc(), 0x5903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 012E
        gbc.setState(0x14ca, 0xfb18, 0x1810, 0x3a98, 0xe859, 0x75f9, 0x1, 0x1);
        gbc.writeMem(0x14ca, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfb18);
        EXPECT(gbc.pc(), 0x14cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 012F
        gbc.setState(0x9183, 0x1a93, 0xc4f0, 0xc67, 0xd71b, 0x9c2f, 0x0, 0x0);
        gbc.writeMem(0x9183, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1a93);
        EXPECT(gbc.pc(), 0x9184);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9183), 0x8b);
        // 8B 0130
        gbc.setState(0x97ca, 0xe815, 0x8600, 0x2af1, 0xf9ce, 0xcc79, 0x1, 0x0);
        gbc.writeMem(0x97ca, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe815);
        EXPECT(gbc.pc(), 0x97cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ca), 0x8b);
        // 8B 0131
        gbc.setState(0x44ba, 0xd84e, 0x8ab0, 0xd4b0, 0xf9d5, 0xc9f0, 0x1, 0x0);
        gbc.writeMem(0x44ba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd84e);
        EXPECT(gbc.pc(), 0x44bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0132
        gbc.setState(0xa82c, 0xb2ec, 0x8550, 0x397a, 0x5053, 0x4d9e, 0x0, 0x0);
        gbc.writeMem(0xa82c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb2ec);
        EXPECT(gbc.pc(), 0xa82d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82c), 0x8b);
        // 8B 0133
        gbc.setState(0x8a17, 0x4330, 0x6590, 0x8a50, 0xc40c, 0xc88d, 0x0, 0x0);
        gbc.writeMem(0x8a17, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4330);
        EXPECT(gbc.pc(), 0x8a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a17), 0x8b);
        // 8B 0134
        gbc.setState(0x1f88, 0x4357, 0xa7e0, 0xf89c, 0x278c, 0xee00, 0x1, 0x0);
        gbc.writeMem(0x1f88, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4357);
        EXPECT(gbc.pc(), 0x1f89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0135
        gbc.setState(0x1905, 0x8255, 0x13b0, 0x46e1, 0x1d38, 0xc055, 0x0, 0x0);
        gbc.writeMem(0x1905, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8255);
        EXPECT(gbc.pc(), 0x1906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0136
        gbc.setState(0x2991, 0x9ac3, 0xbf10, 0xdc91, 0x8465, 0xce65, 0x0, 0x1);
        gbc.writeMem(0x2991, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9ac3);
        EXPECT(gbc.pc(), 0x2992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0137
        gbc.setState(0x637e, 0x3edd, 0x7130, 0xca54, 0xe5b0, 0xfd10, 0x1, 0x1);
        gbc.writeMem(0x637e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3edd);
        EXPECT(gbc.pc(), 0x637f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0139
        gbc.setState(0xed25, 0x210d, 0xd180, 0x6908, 0xb79e, 0xd899, 0x1, 0x0);
        gbc.writeMem(0xed25, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x210d);
        EXPECT(gbc.pc(), 0xed26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed25), 0x8b);
        // 8B 013A
        gbc.setState(0x33f3, 0xfe43, 0xb360, 0x8e2d, 0x48bd, 0xa9e0, 0x1, 0x1);
        gbc.writeMem(0x33f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfe43);
        EXPECT(gbc.pc(), 0x33f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 013B
        gbc.setState(0xec44, 0xc670, 0xbf00, 0xad31, 0xc395, 0x3ce1, 0x1, 0x0);
        gbc.writeMem(0xec44, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc670);
        EXPECT(gbc.pc(), 0xec45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec44), 0x8b);
        // 8B 013C
        gbc.setState(0xcc72, 0xbab, 0xea60, 0xf908, 0x8090, 0x1923, 0x0, 0x0);
        gbc.writeMem(0xcc72, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbab);
        EXPECT(gbc.pc(), 0xcc73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc72), 0x8b);
        // 8B 013D
        gbc.setState(0x9b36, 0x1ea7, 0xb700, 0xbff6, 0xf349, 0x4fcb, 0x0, 0x1);
        gbc.writeMem(0x9b36, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1ea7);
        EXPECT(gbc.pc(), 0x9b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b36), 0x8b);
        // 8B 013E
        gbc.setState(0x8212, 0x62a9, 0xca50, 0xe030, 0x16ba, 0x64fc, 0x0, 0x1);
        gbc.writeMem(0x8212, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x62a9);
        EXPECT(gbc.pc(), 0x8213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8212), 0x8b);
        // 8B 013F
        gbc.setState(0x219b, 0x804f, 0x1340, 0xf913, 0x1271, 0x140c, 0x1, 0x1);
        gbc.writeMem(0x219b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x804f);
        EXPECT(gbc.pc(), 0x219c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0140
        gbc.setState(0xe5dc, 0x7d8f, 0x5690, 0x93d4, 0x125, 0x2ce0, 0x1, 0x1);
        gbc.writeMem(0xe5dc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7d8f);
        EXPECT(gbc.pc(), 0xe5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5dc), 0x8b);
        // 8B 0141
        gbc.setState(0xada9, 0x26ee, 0xf7c0, 0x9241, 0xfc00, 0xb25, 0x1, 0x0);
        gbc.writeMem(0xada9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x26ee);
        EXPECT(gbc.pc(), 0xadaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada9), 0x8b);
        // 8B 0142
        gbc.setState(0x6836, 0x8746, 0x53d0, 0x3eff, 0x87ab, 0x4608, 0x1, 0x1);
        gbc.writeMem(0x6836, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8746);
        EXPECT(gbc.pc(), 0x6837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0143
        gbc.setState(0x3883, 0xfdf2, 0x11a0, 0x3cb7, 0x2d30, 0x7bdd, 0x0, 0x1);
        gbc.writeMem(0x3883, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfdf2);
        EXPECT(gbc.pc(), 0x3884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0144
        gbc.setState(0xe22e, 0x1aae, 0x37e0, 0x6517, 0x3a5c, 0x3688, 0x0, 0x0);
        gbc.writeMem(0xe22e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1aae);
        EXPECT(gbc.pc(), 0xe22f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22e), 0x8b);
        // 8B 0145
        gbc.setState(0x559e, 0x2b62, 0x1a40, 0xbed5, 0x30b1, 0x8534, 0x1, 0x0);
        gbc.writeMem(0x559e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2b62);
        EXPECT(gbc.pc(), 0x559f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0146
        gbc.setState(0x5309, 0xca0, 0xf60, 0xd951, 0xcd50, 0x3f8a, 0x0, 0x0);
        gbc.writeMem(0x5309, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xca0);
        EXPECT(gbc.pc(), 0x530a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0147
        gbc.setState(0x99c3, 0x4846, 0xe7a0, 0x8f6c, 0xb6fb, 0xbfa6, 0x0, 0x0);
        gbc.writeMem(0x99c3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4846);
        EXPECT(gbc.pc(), 0x99c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c3), 0x8b);
        // 8B 0148
        gbc.setState(0x278c, 0xd1bb, 0x47c0, 0x6d72, 0xfa51, 0x518f, 0x0, 0x0);
        gbc.writeMem(0x278c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd1bb);
        EXPECT(gbc.pc(), 0x278d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0149
        gbc.setState(0x494, 0x7a51, 0x56d0, 0x4957, 0xdc12, 0x8ff, 0x1, 0x0);
        gbc.writeMem(0x494, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7a51);
        EXPECT(gbc.pc(), 0x495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 014A
        gbc.setState(0x34b7, 0x2259, 0x3f10, 0xf747, 0x171a, 0xdee3, 0x0, 0x0);
        gbc.writeMem(0x34b7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2259);
        EXPECT(gbc.pc(), 0x34b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 014B
        gbc.setState(0xe186, 0xe53, 0x7af0, 0xcaa9, 0xf859, 0x88e9, 0x1, 0x1);
        gbc.writeMem(0xe186, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe53);
        EXPECT(gbc.pc(), 0xe187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe186), 0x8b);
        // 8B 014C
        gbc.setState(0xbe52, 0x2c61, 0x4de0, 0x6cac, 0xeb1c, 0x27f7, 0x1, 0x0);
        gbc.writeMem(0xbe52, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2c61);
        EXPECT(gbc.pc(), 0xbe53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe52), 0x8b);
        // 8B 014D
        gbc.setState(0x8105, 0x94ce, 0x6970, 0x5be8, 0xa75f, 0xf9ce, 0x0, 0x1);
        gbc.writeMem(0x8105, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x94ce);
        EXPECT(gbc.pc(), 0x8106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8105), 0x8b);
        // 8B 014E
        gbc.setState(0x2edf, 0x84a9, 0xb1a0, 0xd4ba, 0x21d8, 0x4492, 0x0, 0x0);
        gbc.writeMem(0x2edf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x84a9);
        EXPECT(gbc.pc(), 0x2ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 014F
        gbc.setState(0xdba0, 0xd8de, 0xa790, 0xafbe, 0xa247, 0x6c95, 0x0, 0x1);
        gbc.writeMem(0xdba0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd8de);
        EXPECT(gbc.pc(), 0xdba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba0), 0x8b);
        // 8B 0150
        gbc.setState(0x7043, 0xa4eb, 0x24d0, 0xc462, 0xf5d7, 0x28bf, 0x1, 0x1);
        gbc.writeMem(0x7043, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa4eb);
        EXPECT(gbc.pc(), 0x7044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0151
        gbc.setState(0x2151, 0x977d, 0xa910, 0xb89b, 0x576a, 0x264b, 0x0, 0x1);
        gbc.writeMem(0x2151, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x977d);
        EXPECT(gbc.pc(), 0x2152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0153
        gbc.setState(0x34d6, 0xf686, 0xafb0, 0x6474, 0xf664, 0x3b25, 0x0, 0x0);
        gbc.writeMem(0x34d6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf686);
        EXPECT(gbc.pc(), 0x34d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0154
        gbc.setState(0x7571, 0x5c6e, 0xe900, 0x5e14, 0x2871, 0x1a78, 0x1, 0x1);
        gbc.writeMem(0x7571, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5c6e);
        EXPECT(gbc.pc(), 0x7572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0155
        gbc.setState(0xddda, 0x8a9c, 0xe830, 0x5eee, 0xb1d2, 0xc1a, 0x0, 0x1);
        gbc.writeMem(0xddda, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8a9c);
        EXPECT(gbc.pc(), 0xdddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddda), 0x8b);
        // 8B 0156
        gbc.setState(0x2cb6, 0x6b75, 0xb300, 0xe5b3, 0x7774, 0x36f2, 0x1, 0x0);
        gbc.writeMem(0x2cb6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6b75);
        EXPECT(gbc.pc(), 0x2cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0157
        gbc.setState(0x5c9, 0xd57, 0x3d40, 0x86fe, 0xe08e, 0x3e9e, 0x0, 0x0);
        gbc.writeMem(0x5c9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd57);
        EXPECT(gbc.pc(), 0x5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0158
        gbc.setState(0xdb69, 0xcef, 0x9d50, 0x176d, 0xd2ea, 0xb036, 0x0, 0x0);
        gbc.writeMem(0xdb69, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xcef);
        EXPECT(gbc.pc(), 0xdb6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb69), 0x8b);
        // 8B 0159
        gbc.setState(0xc86, 0xa87d, 0x8290, 0x129, 0xa752, 0xd6b7, 0x0, 0x1);
        gbc.writeMem(0xc86, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa87d);
        EXPECT(gbc.pc(), 0xc87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 015A
        gbc.setState(0x75fd, 0xb452, 0x630, 0x4b3, 0x7525, 0x3af3, 0x1, 0x0);
        gbc.writeMem(0x75fd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb452);
        EXPECT(gbc.pc(), 0x75fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 015C
        gbc.setState(0x5f2b, 0x94c5, 0xd8a0, 0xfae9, 0xd37c, 0xe4b4, 0x1, 0x1);
        gbc.writeMem(0x5f2b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x94c5);
        EXPECT(gbc.pc(), 0x5f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 015D
        gbc.setState(0x4bf1, 0xc2cc, 0xd580, 0xbf6f, 0xa9cc, 0x7701, 0x0, 0x1);
        gbc.writeMem(0x4bf1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc2cc);
        EXPECT(gbc.pc(), 0x4bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 015E
        gbc.setState(0xd40, 0x55d1, 0xa4e0, 0xff35, 0xfa11, 0x141a, 0x1, 0x1);
        gbc.writeMem(0xd40, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x55d1);
        EXPECT(gbc.pc(), 0xd41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 015F
        gbc.setState(0x950f, 0x122c, 0x7c50, 0x3f8c, 0x36e0, 0x256e, 0x1, 0x1);
        gbc.writeMem(0x950f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x122c);
        EXPECT(gbc.pc(), 0x9510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950f), 0x8b);
        // 8B 0160
        gbc.setState(0xe71d, 0xe7e9, 0x96f0, 0xc9c0, 0x9628, 0x95bb, 0x0, 0x0);
        gbc.writeMem(0xe71d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe7e9);
        EXPECT(gbc.pc(), 0xe71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe71d), 0x8b);
        // 8B 0161
        gbc.setState(0xbc94, 0x131b, 0xbc0, 0xd4b9, 0x3c4d, 0xda58, 0x0, 0x1);
        gbc.writeMem(0xbc94, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x131b);
        EXPECT(gbc.pc(), 0xbc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc94), 0x8b);
        // 8B 0162
        gbc.setState(0xc074, 0xe333, 0x5fb0, 0x641e, 0xfbf3, 0x7ce9, 0x0, 0x0);
        gbc.writeMem(0xc074, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe333);
        EXPECT(gbc.pc(), 0xc075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc074), 0x8b);
        // 8B 0164
        gbc.setState(0x1f05, 0x5c2a, 0xee10, 0x76fb, 0x9365, 0xaaeb, 0x0, 0x0);
        gbc.writeMem(0x1f05, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5c2a);
        EXPECT(gbc.pc(), 0x1f06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0165
        gbc.setState(0xa848, 0x8b48, 0xbb90, 0xb9cb, 0x89f5, 0xc954, 0x1, 0x0);
        gbc.writeMem(0xa848, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8b48);
        EXPECT(gbc.pc(), 0xa849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa848), 0x8b);
        // 8B 0166
        gbc.setState(0x9fe7, 0x30de, 0xa90, 0x1d56, 0x1b64, 0x1c36, 0x1, 0x1);
        gbc.writeMem(0x9fe7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x30de);
        EXPECT(gbc.pc(), 0x9fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe7), 0x8b);
        // 8B 0167
        gbc.setState(0x37ac, 0xb8ad, 0xdec0, 0xb01, 0x3954, 0xbb8f, 0x1, 0x1);
        gbc.writeMem(0x37ac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb8ad);
        EXPECT(gbc.pc(), 0x37ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0168
        gbc.setState(0xf42, 0x691a, 0xa80, 0x7c34, 0xdc28, 0x9696, 0x0, 0x1);
        gbc.writeMem(0xf42, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x691a);
        EXPECT(gbc.pc(), 0xf43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 016A
        gbc.setState(0x201f, 0x6247, 0x3740, 0x973b, 0x5e94, 0xe05c, 0x0, 0x0);
        gbc.writeMem(0x201f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6247);
        EXPECT(gbc.pc(), 0x2020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 016B
        gbc.setState(0x1fd3, 0x167c, 0xfcc0, 0x4977, 0x6ec0, 0x1c9a, 0x0, 0x1);
        gbc.writeMem(0x1fd3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x167c);
        EXPECT(gbc.pc(), 0x1fd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 016C
        gbc.setState(0x80d3, 0xebc2, 0x7c50, 0x64f8, 0xb0d9, 0x9171, 0x1, 0x1);
        gbc.writeMem(0x80d3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xebc2);
        EXPECT(gbc.pc(), 0x80d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d3), 0x8b);
        // 8B 016D
        gbc.setState(0x79dd, 0xab71, 0x34c0, 0xe8a5, 0xf724, 0xd6d9, 0x1, 0x0);
        gbc.writeMem(0x79dd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xab71);
        EXPECT(gbc.pc(), 0x79de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 016E
        gbc.setState(0x65c9, 0xc104, 0xce60, 0x7fe8, 0x6226, 0xebd, 0x0, 0x0);
        gbc.writeMem(0x65c9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc104);
        EXPECT(gbc.pc(), 0x65ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 016F
        gbc.setState(0xc050, 0x62bb, 0x9c50, 0xddfe, 0xfe2d, 0xb69b, 0x0, 0x1);
        gbc.writeMem(0xc050, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x62bb);
        EXPECT(gbc.pc(), 0xc051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc050), 0x8b);
        // 8B 0170
        gbc.setState(0xc70f, 0xc898, 0x6720, 0x34ca, 0xa651, 0x437e, 0x0, 0x1);
        gbc.writeMem(0xc70f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc898);
        EXPECT(gbc.pc(), 0xc710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70f), 0x8b);
        // 8B 0171
        gbc.setState(0xcfd0, 0xe95a, 0xe9c0, 0xe35b, 0x6188, 0x4818, 0x0, 0x0);
        gbc.writeMem(0xcfd0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe95a);
        EXPECT(gbc.pc(), 0xcfd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd0), 0x8b);
        // 8B 0172
        gbc.setState(0x31cb, 0x5a0c, 0x4760, 0xaa89, 0xa457, 0xba91, 0x0, 0x0);
        gbc.writeMem(0x31cb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5a0c);
        EXPECT(gbc.pc(), 0x31cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0173
        gbc.setState(0x31c0, 0x467b, 0x9140, 0x1a05, 0x24bd, 0x8c52, 0x0, 0x1);
        gbc.writeMem(0x31c0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x467b);
        EXPECT(gbc.pc(), 0x31c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0174
        gbc.setState(0x49ef, 0x2862, 0x1310, 0x247, 0xa6fa, 0xcdde, 0x1, 0x0);
        gbc.writeMem(0x49ef, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2862);
        EXPECT(gbc.pc(), 0x49f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0175
        gbc.setState(0x31e4, 0x7022, 0x47a0, 0xd90f, 0x600d, 0x3e5c, 0x1, 0x1);
        gbc.writeMem(0x31e4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7022);
        EXPECT(gbc.pc(), 0x31e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0176
        gbc.setState(0x78a8, 0x7a66, 0xdaf0, 0x3016, 0xe73c, 0xc097, 0x1, 0x0);
        gbc.writeMem(0x78a8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7a66);
        EXPECT(gbc.pc(), 0x78a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0177
        gbc.setState(0xd8d7, 0x68a6, 0xa970, 0x913a, 0x71b5, 0xa599, 0x1, 0x0);
        gbc.writeMem(0xd8d7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x68a6);
        EXPECT(gbc.pc(), 0xd8d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8d7), 0x8b);
        // 8B 0178
        gbc.setState(0x17ad, 0xfa6f, 0x3fc0, 0x4514, 0x495, 0x1ef7, 0x0, 0x1);
        gbc.writeMem(0x17ad, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfa6f);
        EXPECT(gbc.pc(), 0x17ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0179
        gbc.setState(0xe821, 0x3d45, 0xad80, 0x4ea3, 0x14b7, 0x9381, 0x1, 0x1);
        gbc.writeMem(0xe821, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3d45);
        EXPECT(gbc.pc(), 0xe822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe821), 0x8b);
        // 8B 017A
        gbc.setState(0x222e, 0x1298, 0xb3b0, 0xa5cc, 0x2e4d, 0x7dec, 0x0, 0x0);
        gbc.writeMem(0x222e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1298);
        EXPECT(gbc.pc(), 0x222f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 017B
        gbc.setState(0x5f53, 0xe6a0, 0x2e40, 0x1650, 0x7ae0, 0x7750, 0x0, 0x0);
        gbc.writeMem(0x5f53, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe6a0);
        EXPECT(gbc.pc(), 0x5f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 017C
        gbc.setState(0xe92c, 0xb681, 0x80a0, 0x8ebc, 0xa216, 0x46c4, 0x0, 0x1);
        gbc.writeMem(0xe92c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb681);
        EXPECT(gbc.pc(), 0xe92d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe92c), 0x8b);
        // 8B 017D
        gbc.setState(0xdaff, 0x720c, 0xbf40, 0xd06b, 0x92c3, 0x86ff, 0x1, 0x0);
        gbc.writeMem(0xdaff, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x720c);
        EXPECT(gbc.pc(), 0xdb00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaff), 0x8b);
        // 8B 017E
        gbc.setState(0x49e5, 0x7ddb, 0xe920, 0x6382, 0xeb21, 0xf4f5, 0x0, 0x0);
        gbc.writeMem(0x49e5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7ddb);
        EXPECT(gbc.pc(), 0x49e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 017F
        gbc.setState(0xa056, 0x55d7, 0x5f20, 0xb8d0, 0x8dcf, 0xe570, 0x0, 0x1);
        gbc.writeMem(0xa056, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x55d7);
        EXPECT(gbc.pc(), 0xa057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa056), 0x8b);
        // 8B 0180
        gbc.setState(0x66b2, 0xfa9d, 0x43a0, 0x677e, 0x1b8b, 0x25bd, 0x0, 0x0);
        gbc.writeMem(0x66b2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xfa9d);
        EXPECT(gbc.pc(), 0x66b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0181
        gbc.setState(0xddf8, 0x8ca6, 0xbc40, 0x290e, 0x774d, 0x785c, 0x0, 0x0);
        gbc.writeMem(0xddf8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8ca6);
        EXPECT(gbc.pc(), 0xddf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf8), 0x8b);
        // 8B 0182
        gbc.setState(0x6eaf, 0x4fa8, 0x73c0, 0xfc95, 0x1f8a, 0x173a, 0x0, 0x0);
        gbc.writeMem(0x6eaf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4fa8);
        EXPECT(gbc.pc(), 0x6eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0183
        gbc.setState(0x23f3, 0xa25e, 0x2f10, 0xdc10, 0xabf0, 0xbf3d, 0x0, 0x1);
        gbc.writeMem(0x23f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa25e);
        EXPECT(gbc.pc(), 0x23f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0184
        gbc.setState(0x7d8a, 0x96b5, 0x9870, 0x9585, 0x44bf, 0x8230, 0x1, 0x0);
        gbc.writeMem(0x7d8a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x96b5);
        EXPECT(gbc.pc(), 0x7d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0185
        gbc.setState(0xee94, 0x5cca, 0x9e70, 0x75e3, 0xe585, 0x702c, 0x1, 0x1);
        gbc.writeMem(0xee94, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5cca);
        EXPECT(gbc.pc(), 0xee95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee94), 0x8b);
        // 8B 0187
        gbc.setState(0x697a, 0x469a, 0x5130, 0xce7, 0xee1f, 0x30f2, 0x0, 0x0);
        gbc.writeMem(0x697a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x469a);
        EXPECT(gbc.pc(), 0x697b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0189
        gbc.setState(0xd1bc, 0x99ee, 0x1870, 0x11d, 0x6a00, 0xd5ba, 0x0, 0x1);
        gbc.writeMem(0xd1bc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x99ee);
        EXPECT(gbc.pc(), 0xd1bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1bc), 0x8b);
        // 8B 018A
        gbc.setState(0x8431, 0xb526, 0xde10, 0x571f, 0xd4fa, 0xbfe, 0x0, 0x0);
        gbc.writeMem(0x8431, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb526);
        EXPECT(gbc.pc(), 0x8432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8431), 0x8b);
        // 8B 018B
        gbc.setState(0xfae, 0x6867, 0x2270, 0x20cd, 0x33f1, 0xa59f, 0x0, 0x1);
        gbc.writeMem(0xfae, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6867);
        EXPECT(gbc.pc(), 0xfaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 018C
        gbc.setState(0x9bb0, 0xfd37, 0x1c10, 0x168a, 0xdd83, 0xd171, 0x1, 0x1);
        gbc.writeMem(0x9bb0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfd37);
        EXPECT(gbc.pc(), 0x9bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb0), 0x8b);
        // 8B 018D
        gbc.setState(0x4d0b, 0x33c8, 0x2860, 0xa76e, 0x8494, 0xff7b, 0x0, 0x0);
        gbc.writeMem(0x4d0b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x33c8);
        EXPECT(gbc.pc(), 0x4d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 018E
        gbc.setState(0x6212, 0x79d3, 0xb760, 0xd51c, 0x4ba9, 0xaa29, 0x1, 0x1);
        gbc.writeMem(0x6212, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x79d3);
        EXPECT(gbc.pc(), 0x6213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 018F
        gbc.setState(0x959e, 0x910f, 0x5b40, 0x5ac3, 0x667c, 0x6226, 0x0, 0x1);
        gbc.writeMem(0x959e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x910f);
        EXPECT(gbc.pc(), 0x959f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959e), 0x8b);
        // 8B 0190
        gbc.setState(0xbb74, 0x13db, 0x8590, 0x1840, 0x3b8d, 0xc94a, 0x1, 0x1);
        gbc.writeMem(0xbb74, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x13db);
        EXPECT(gbc.pc(), 0xbb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb74), 0x8b);
        // 8B 0191
        gbc.setState(0xedde, 0x9251, 0x2430, 0x112a, 0x7416, 0xfd1d, 0x1, 0x0);
        gbc.writeMem(0xedde, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9251);
        EXPECT(gbc.pc(), 0xeddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedde), 0x8b);
        // 8B 0192
        gbc.setState(0x9a77, 0x819, 0x6a70, 0xc2f7, 0x8eb0, 0x6df2, 0x1, 0x0);
        gbc.writeMem(0x9a77, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x819);
        EXPECT(gbc.pc(), 0x9a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a77), 0x8b);
        // 8B 0193
        gbc.setState(0xbe0e, 0xa5c3, 0xd3c0, 0x7c25, 0x8a0, 0xbce5, 0x0, 0x0);
        gbc.writeMem(0xbe0e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa5c3);
        EXPECT(gbc.pc(), 0xbe0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe0e), 0x8b);
        // 8B 0194
        gbc.setState(0xdfab, 0xbb26, 0x9610, 0x162c, 0x826, 0x515f, 0x1, 0x1);
        gbc.writeMem(0xdfab, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbb26);
        EXPECT(gbc.pc(), 0xdfac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfab), 0x8b);
        // 8B 0195
        gbc.setState(0x6a, 0x4539, 0x7b0, 0x566f, 0x4d21, 0x1719, 0x1, 0x1);
        gbc.writeMem(0x6a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4539);
        EXPECT(gbc.pc(), 0x6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0196
        gbc.setState(0xc20c, 0x78bc, 0x4800, 0xd81f, 0x8aa, 0x518a, 0x0, 0x1);
        gbc.writeMem(0xc20c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x78bc);
        EXPECT(gbc.pc(), 0xc20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc20c), 0x8b);
        // 8B 0197
        gbc.setState(0x580f, 0x9669, 0x3410, 0xc7fa, 0xe490, 0xd6f9, 0x1, 0x0);
        gbc.writeMem(0x580f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9669);
        EXPECT(gbc.pc(), 0x5810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0198
        gbc.setState(0xe637, 0x9af6, 0x71a0, 0xabf2, 0x400, 0x716d, 0x1, 0x0);
        gbc.writeMem(0xe637, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9af6);
        EXPECT(gbc.pc(), 0xe638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe637), 0x8b);
        // 8B 0199
        gbc.setState(0x745b, 0x6523, 0xe290, 0x53f2, 0xf201, 0x6db5, 0x0, 0x1);
        gbc.writeMem(0x745b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6523);
        EXPECT(gbc.pc(), 0x745c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 019A
        gbc.setState(0x7ef6, 0xa698, 0x7930, 0xbaad, 0xd842, 0x719d, 0x1, 0x0);
        gbc.writeMem(0x7ef6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa698);
        EXPECT(gbc.pc(), 0x7ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 019C
        gbc.setState(0x7b2b, 0x87b2, 0x27d0, 0x875c, 0xc84a, 0xea94, 0x0, 0x0);
        gbc.writeMem(0x7b2b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x87b2);
        EXPECT(gbc.pc(), 0x7b2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 019D
        gbc.setState(0x1892, 0x81f3, 0xf820, 0xca5d, 0xa90c, 0xfccc, 0x0, 0x1);
        gbc.writeMem(0x1892, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x81f3);
        EXPECT(gbc.pc(), 0x1893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 019E
        gbc.setState(0x5924, 0xc549, 0xa4b0, 0x7c46, 0xe306, 0x890e, 0x1, 0x0);
        gbc.writeMem(0x5924, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc549);
        EXPECT(gbc.pc(), 0x5925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 019F
        gbc.setState(0xccbe, 0x163b, 0x9290, 0x24f1, 0xf17b, 0x32ab, 0x0, 0x1);
        gbc.writeMem(0xccbe, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x163b);
        EXPECT(gbc.pc(), 0xccbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbe), 0x8b);
        // 8B 01A0
        gbc.setState(0x311f, 0xfd7c, 0x4bc0, 0x5a0c, 0x90c9, 0xd8b1, 0x0, 0x1);
        gbc.writeMem(0x311f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfd7c);
        EXPECT(gbc.pc(), 0x3120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01A1
        gbc.setState(0xcb64, 0xf38c, 0x6bb0, 0x964, 0xb0d0, 0x5160, 0x0, 0x1);
        gbc.writeMem(0xcb64, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf38c);
        EXPECT(gbc.pc(), 0xcb65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb64), 0x8b);
        // 8B 01A2
        gbc.setState(0x3022, 0x41a1, 0xa800, 0x30d7, 0xbc5c, 0x79be, 0x1, 0x1);
        gbc.writeMem(0x3022, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x41a1);
        EXPECT(gbc.pc(), 0x3023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01A3
        gbc.setState(0x9f11, 0x9d33, 0xaae0, 0x2650, 0x3278, 0xd2b5, 0x0, 0x0);
        gbc.writeMem(0x9f11, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9d33);
        EXPECT(gbc.pc(), 0x9f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f11), 0x8b);
        // 8B 01A4
        gbc.setState(0x296a, 0x73b9, 0xe810, 0x9d7d, 0x39e9, 0x8d8d, 0x0, 0x1);
        gbc.writeMem(0x296a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x73b9);
        EXPECT(gbc.pc(), 0x296b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01A5
        gbc.setState(0x8a2a, 0x7aa4, 0xa710, 0xe76e, 0x5bbe, 0x65d8, 0x0, 0x1);
        gbc.writeMem(0x8a2a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7aa4);
        EXPECT(gbc.pc(), 0x8a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a2a), 0x8b);
        // 8B 01A6
        gbc.setState(0x9395, 0x7d2d, 0x49b0, 0x327d, 0x363d, 0x6d01, 0x1, 0x0);
        gbc.writeMem(0x9395, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7d2d);
        EXPECT(gbc.pc(), 0x9396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9395), 0x8b);
        // 8B 01A7
        gbc.setState(0x4ab7, 0x7083, 0x2440, 0x85b7, 0xe304, 0x1afc, 0x0, 0x0);
        gbc.writeMem(0x4ab7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7083);
        EXPECT(gbc.pc(), 0x4ab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01A8
        gbc.setState(0x1171, 0x355, 0xcc90, 0xa34a, 0x875c, 0x7da4, 0x0, 0x1);
        gbc.writeMem(0x1171, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x355);
        EXPECT(gbc.pc(), 0x1172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01A9
        gbc.setState(0xb2e2, 0x15e3, 0x6960, 0x57cf, 0x6f, 0xc12f, 0x0, 0x1);
        gbc.writeMem(0xb2e2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x15e3);
        EXPECT(gbc.pc(), 0xb2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e2), 0x8b);
        // 8B 01AA
        gbc.setState(0xb3c8, 0x9240, 0x68f0, 0xaa01, 0xbc2d, 0x4ba3, 0x1, 0x0);
        gbc.writeMem(0xb3c8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9240);
        EXPECT(gbc.pc(), 0xb3c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c8), 0x8b);
        // 8B 01AB
        gbc.setState(0xbb16, 0x9769, 0xf420, 0xd216, 0xb1ea, 0x355e, 0x0, 0x1);
        gbc.writeMem(0xbb16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9769);
        EXPECT(gbc.pc(), 0xbb17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb16), 0x8b);
        // 8B 01AC
        gbc.setState(0xa76e, 0xe5d9, 0xce60, 0x9b89, 0xf0e3, 0x445, 0x1, 0x1);
        gbc.writeMem(0xa76e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe5d9);
        EXPECT(gbc.pc(), 0xa76f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76e), 0x8b);
        // 8B 01AD
        gbc.setState(0xa903, 0xdc91, 0x31a0, 0xd6a3, 0x35b3, 0x1925, 0x1, 0x1);
        gbc.writeMem(0xa903, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xdc91);
        EXPECT(gbc.pc(), 0xa904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa903), 0x8b);
        // 8B 01AE
        gbc.setState(0x33a5, 0xf7e2, 0xb6f0, 0xb937, 0x1861, 0xe716, 0x1, 0x1);
        gbc.writeMem(0x33a5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf7e2);
        EXPECT(gbc.pc(), 0x33a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01AF
        gbc.setState(0xe6cc, 0xb9cd, 0x9170, 0x4acc, 0xba0b, 0xc81f, 0x0, 0x1);
        gbc.writeMem(0xe6cc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb9cd);
        EXPECT(gbc.pc(), 0xe6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6cc), 0x8b);
        // 8B 01B0
        gbc.setState(0x20b9, 0x5a6c, 0x4a60, 0xc1eb, 0x163d, 0x3da2, 0x1, 0x1);
        gbc.writeMem(0x20b9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5a6c);
        EXPECT(gbc.pc(), 0x20ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01B1
        gbc.setState(0xe0bf, 0x23e9, 0x7ae0, 0x6f21, 0x7fbf, 0x9b24, 0x1, 0x1);
        gbc.writeMem(0xe0bf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x23e9);
        EXPECT(gbc.pc(), 0xe0c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0bf), 0x8b);
        // 8B 01B2
        gbc.setState(0x9acd, 0x7553, 0xe5a0, 0x935c, 0x7df5, 0x90b3, 0x0, 0x1);
        gbc.writeMem(0x9acd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7553);
        EXPECT(gbc.pc(), 0x9ace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9acd), 0x8b);
        // 8B 01B3
        gbc.setState(0x21dd, 0xee65, 0x8550, 0xe34c, 0x84b4, 0xc4a, 0x1, 0x1);
        gbc.writeMem(0x21dd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xee65);
        EXPECT(gbc.pc(), 0x21de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01B4
        gbc.setState(0x4e97, 0x5d35, 0x6bc0, 0x2aa2, 0x10a4, 0xfa11, 0x1, 0x1);
        gbc.writeMem(0x4e97, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5d35);
        EXPECT(gbc.pc(), 0x4e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01B5
        gbc.setState(0xc757, 0xc12c, 0xf670, 0x5995, 0x9d22, 0xc187, 0x1, 0x1);
        gbc.writeMem(0xc757, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc12c);
        EXPECT(gbc.pc(), 0xc758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc757), 0x8b);
        // 8B 01B6
        gbc.setState(0x5cea, 0x8658, 0x7120, 0x90da, 0xcff, 0x5e19, 0x1, 0x1);
        gbc.writeMem(0x5cea, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8658);
        EXPECT(gbc.pc(), 0x5ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01B7
        gbc.setState(0x7d8a, 0x872d, 0x1d10, 0xe725, 0x6e26, 0x60c1, 0x0, 0x1);
        gbc.writeMem(0x7d8a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x872d);
        EXPECT(gbc.pc(), 0x7d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01B8
        gbc.setState(0xb0bf, 0xf494, 0xcba0, 0x89fe, 0xabdb, 0xb6be, 0x0, 0x1);
        gbc.writeMem(0xb0bf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf494);
        EXPECT(gbc.pc(), 0xb0c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0bf), 0x8b);
        // 8B 01B9
        gbc.setState(0x5e6e, 0xc559, 0xa5a0, 0x513a, 0xf8d7, 0x13cd, 0x0, 0x1);
        gbc.writeMem(0x5e6e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc559);
        EXPECT(gbc.pc(), 0x5e6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01BA
        gbc.setState(0xb991, 0x778d, 0x47d0, 0xf5f, 0xff9e, 0xce5d, 0x1, 0x1);
        gbc.writeMem(0xb991, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x778d);
        EXPECT(gbc.pc(), 0xb992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb991), 0x8b);
        // 8B 01BC
        gbc.setState(0x30c1, 0x3e7f, 0x6f00, 0xb90f, 0x4854, 0x37ac, 0x1, 0x0);
        gbc.writeMem(0x30c1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3e7f);
        EXPECT(gbc.pc(), 0x30c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01BD
        gbc.setState(0x2c2f, 0xd8ae, 0xf0e0, 0x5ae8, 0xe907, 0xe0a0, 0x1, 0x0);
        gbc.writeMem(0x2c2f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd8ae);
        EXPECT(gbc.pc(), 0x2c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01BE
        gbc.setState(0x94dd, 0x7afb, 0x2560, 0xeb45, 0x98b8, 0x9797, 0x0, 0x1);
        gbc.writeMem(0x94dd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7afb);
        EXPECT(gbc.pc(), 0x94de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94dd), 0x8b);
        // 8B 01BF
        gbc.setState(0xab0a, 0x8822, 0x4aa0, 0x730c, 0xe4e4, 0x495f, 0x1, 0x0);
        gbc.writeMem(0xab0a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8822);
        EXPECT(gbc.pc(), 0xab0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0a), 0x8b);
        // 8B 01C0
        gbc.setState(0xec72, 0xec3, 0x7f90, 0x6280, 0x9270, 0xa5be, 0x0, 0x1);
        gbc.writeMem(0xec72, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xec3);
        EXPECT(gbc.pc(), 0xec73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec72), 0x8b);
        // 8B 01C1
        gbc.setState(0x85d4, 0xa08, 0x9a20, 0x6065, 0x9ead, 0xa8ab, 0x1, 0x1);
        gbc.writeMem(0x85d4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa08);
        EXPECT(gbc.pc(), 0x85d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85d4), 0x8b);
        // 8B 01C2
        gbc.setState(0x7837, 0xc45b, 0xc630, 0x4d38, 0xf9f6, 0xf41e, 0x1, 0x1);
        gbc.writeMem(0x7837, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc45b);
        EXPECT(gbc.pc(), 0x7838);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01C4
        gbc.setState(0x6c7, 0x7fb, 0xa90, 0xf696, 0xa5c2, 0x5b7e, 0x1, 0x0);
        gbc.writeMem(0x6c7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7fb);
        EXPECT(gbc.pc(), 0x6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01C5
        gbc.setState(0x5679, 0x9, 0x42f0, 0xf06e, 0x21bd, 0xbafc, 0x1, 0x0);
        gbc.writeMem(0x5679, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9);
        EXPECT(gbc.pc(), 0x567a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01C6
        gbc.setState(0x3f93, 0x4b79, 0x3ec0, 0xb2e, 0xf89b, 0xbf25, 0x1, 0x0);
        gbc.writeMem(0x3f93, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4b79);
        EXPECT(gbc.pc(), 0x3f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01C7
        gbc.setState(0x3a9c, 0x55dd, 0x4460, 0x6441, 0xda0f, 0x3306, 0x1, 0x1);
        gbc.writeMem(0x3a9c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x55dd);
        EXPECT(gbc.pc(), 0x3a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01C8
        gbc.setState(0xa91a, 0x18ad, 0xd580, 0x2a54, 0x5857, 0xac6b, 0x0, 0x0);
        gbc.writeMem(0xa91a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x18ad);
        EXPECT(gbc.pc(), 0xa91b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa91a), 0x8b);
        // 8B 01C9
        gbc.setState(0x5171, 0x4d19, 0x51c0, 0xda93, 0x41a2, 0x8f8a, 0x0, 0x0);
        gbc.writeMem(0x5171, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4d19);
        EXPECT(gbc.pc(), 0x5172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01CA
        gbc.setState(0x43a4, 0x238d, 0xc2d0, 0x6f0e, 0x55b8, 0xd4aa, 0x0, 0x0);
        gbc.writeMem(0x43a4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x238d);
        EXPECT(gbc.pc(), 0x43a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01CB
        gbc.setState(0xcd6b, 0x329d, 0x6070, 0xf1c0, 0xd, 0x15da, 0x0, 0x0);
        gbc.writeMem(0xcd6b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x329d);
        EXPECT(gbc.pc(), 0xcd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6b), 0x8b);
        // 8B 01CC
        gbc.setState(0xb25f, 0x195c, 0xf5d0, 0x917d, 0xeca8, 0xf539, 0x0, 0x0);
        gbc.writeMem(0xb25f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x195c);
        EXPECT(gbc.pc(), 0xb260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25f), 0x8b);
        // 8B 01CD
        gbc.setState(0xa1ce, 0xcec0, 0x30e0, 0x3965, 0x282e, 0x1c39, 0x1, 0x1);
        gbc.writeMem(0xa1ce, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcec0);
        EXPECT(gbc.pc(), 0xa1cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ce), 0x8b);
        // 8B 01CE
        gbc.setState(0x8a21, 0xd611, 0x9020, 0x4fe7, 0xbab6, 0x5664, 0x1, 0x0);
        gbc.writeMem(0x8a21, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd611);
        EXPECT(gbc.pc(), 0x8a22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a21), 0x8b);
        // 8B 01CF
        gbc.setState(0x2f1b, 0x95d2, 0xb0, 0xe893, 0xae5e, 0xea15, 0x1, 0x0);
        gbc.writeMem(0x2f1b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x95d2);
        EXPECT(gbc.pc(), 0x2f1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01D1
        gbc.setState(0x9c13, 0x58b3, 0x9ed0, 0x8f88, 0x8e0d, 0x72c1, 0x1, 0x0);
        gbc.writeMem(0x9c13, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x58b3);
        EXPECT(gbc.pc(), 0x9c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c13), 0x8b);
        // 8B 01D2
        gbc.setState(0xc2fc, 0xc53b, 0x3cc0, 0x1b1b, 0xfa6b, 0x5b83, 0x0, 0x0);
        gbc.writeMem(0xc2fc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc53b);
        EXPECT(gbc.pc(), 0xc2fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2fc), 0x8b);
        // 8B 01D3
        gbc.setState(0x6a5c, 0x7ba2, 0x60, 0x7c9b, 0x658f, 0xb428, 0x1, 0x0);
        gbc.writeMem(0x6a5c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7ba2);
        EXPECT(gbc.pc(), 0x6a5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01D4
        gbc.setState(0xbca, 0x5888, 0xa440, 0x138c, 0x2375, 0xfdf1, 0x1, 0x0);
        gbc.writeMem(0xbca, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5888);
        EXPECT(gbc.pc(), 0xbcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01D5
        gbc.setState(0xaafc, 0x93f, 0x7090, 0x8ff8, 0x2099, 0x13a4, 0x0, 0x0);
        gbc.writeMem(0xaafc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x93f);
        EXPECT(gbc.pc(), 0xaafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafc), 0x8b);
        // 8B 01D6
        gbc.setState(0x27cb, 0x8317, 0x3580, 0xec9a, 0x64dc, 0x967c, 0x0, 0x0);
        gbc.writeMem(0x27cb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8317);
        EXPECT(gbc.pc(), 0x27cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01D7
        gbc.setState(0x1a41, 0xe07e, 0x4d70, 0xc726, 0xd325, 0x6732, 0x1, 0x0);
        gbc.writeMem(0x1a41, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe07e);
        EXPECT(gbc.pc(), 0x1a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01D8
        gbc.setState(0x1671, 0xfbec, 0xb410, 0x175a, 0xb618, 0x6fc9, 0x1, 0x1);
        gbc.writeMem(0x1671, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfbec);
        EXPECT(gbc.pc(), 0x1672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01D9
        gbc.setState(0x81f, 0x4ea2, 0xaa0, 0xa25a, 0x9f3f, 0xf6f5, 0x1, 0x1);
        gbc.writeMem(0x81f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4ea2);
        EXPECT(gbc.pc(), 0x820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01DA
        gbc.setState(0x6c5a, 0x4c9f, 0x45d0, 0x5672, 0xceb5, 0xed91, 0x0, 0x0);
        gbc.writeMem(0x6c5a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4c9f);
        EXPECT(gbc.pc(), 0x6c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01DB
        gbc.setState(0x3b19, 0xfb1a, 0x6590, 0x4bee, 0xde04, 0xdaa9, 0x1, 0x1);
        gbc.writeMem(0x3b19, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfb1a);
        EXPECT(gbc.pc(), 0x3b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01DC
        gbc.setState(0x2b54, 0xcf63, 0xaea0, 0x9af7, 0xd149, 0xa6c, 0x0, 0x0);
        gbc.writeMem(0x2b54, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcf63);
        EXPECT(gbc.pc(), 0x2b55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01DD
        gbc.setState(0xbe60, 0x9dc3, 0xcd20, 0x7840, 0x94c0, 0xf078, 0x0, 0x1);
        gbc.writeMem(0xbe60, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9dc3);
        EXPECT(gbc.pc(), 0xbe61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe60), 0x8b);
        // 8B 01DE
        gbc.setState(0x802e, 0x216d, 0x5c0, 0x1fa1, 0xd7c0, 0x5910, 0x0, 0x0);
        gbc.writeMem(0x802e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x216d);
        EXPECT(gbc.pc(), 0x802f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802e), 0x8b);
        // 8B 01DF
        gbc.setState(0x486e, 0xa360, 0x1ab0, 0x8c53, 0xe223, 0xbd96, 0x0, 0x1);
        gbc.writeMem(0x486e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa360);
        EXPECT(gbc.pc(), 0x486f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01E0
        gbc.setState(0x7e35, 0x791d, 0x1de0, 0x2588, 0x2108, 0x65ca, 0x0, 0x1);
        gbc.writeMem(0x7e35, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x791d);
        EXPECT(gbc.pc(), 0x7e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01E1
        gbc.setState(0xabea, 0xa87, 0x7060, 0x6328, 0xb6ee, 0xe9bf, 0x1, 0x0);
        gbc.writeMem(0xabea, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa87);
        EXPECT(gbc.pc(), 0xabeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabea), 0x8b);
        // 8B 01E2
        gbc.setState(0x4fb5, 0x8fcc, 0xd110, 0x31c9, 0x4421, 0x823d, 0x1, 0x0);
        gbc.writeMem(0x4fb5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8fcc);
        EXPECT(gbc.pc(), 0x4fb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01E3
        gbc.setState(0x179, 0xdd22, 0x59f0, 0xb84, 0x8650, 0x21f8, 0x0, 0x1);
        gbc.writeMem(0x179, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdd22);
        EXPECT(gbc.pc(), 0x17a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01E4
        gbc.setState(0xd631, 0x50b4, 0xf40, 0xda48, 0xd8f5, 0xdffe, 0x1, 0x1);
        gbc.writeMem(0xd631, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x50b4);
        EXPECT(gbc.pc(), 0xd632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd631), 0x8b);
        // 8B 01E5
        gbc.setState(0xca26, 0xe61f, 0x8720, 0x1d4a, 0x71b5, 0x846c, 0x0, 0x0);
        gbc.writeMem(0xca26, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe61f);
        EXPECT(gbc.pc(), 0xca27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca26), 0x8b);
        // 8B 01E6
        gbc.setState(0xaae2, 0x8fc0, 0xd5d0, 0xf7f8, 0xc016, 0x91c, 0x0, 0x1);
        gbc.writeMem(0xaae2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8fc0);
        EXPECT(gbc.pc(), 0xaae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae2), 0x8b);
        // 8B 01E7
        gbc.setState(0xc4e3, 0xb8d9, 0x840, 0x2fa4, 0x2836, 0xfd1f, 0x0, 0x0);
        gbc.writeMem(0xc4e3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb8d9);
        EXPECT(gbc.pc(), 0xc4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4e3), 0x8b);
        // 8B 01E8
        gbc.setState(0x9760, 0xc676, 0xe1e0, 0xcb4d, 0xb069, 0x35c, 0x1, 0x1);
        gbc.writeMem(0x9760, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc676);
        EXPECT(gbc.pc(), 0x9761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9760), 0x8b);
        // 8B 01E9
        gbc.setState(0xa99d, 0x813, 0x53c0, 0x9d36, 0x89d, 0x7540, 0x1, 0x0);
        gbc.writeMem(0xa99d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x813);
        EXPECT(gbc.pc(), 0xa99e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99d), 0x8b);
        // 8B 01EA
        gbc.setState(0xa4c2, 0xd8d3, 0x4a60, 0x84dc, 0xb743, 0xa31, 0x1, 0x1);
        gbc.writeMem(0xa4c2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd8d3);
        EXPECT(gbc.pc(), 0xa4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c2), 0x8b);
        // 8B 01EB
        gbc.setState(0xed55, 0x6723, 0xa760, 0xf803, 0x546b, 0x3115, 0x1, 0x1);
        gbc.writeMem(0xed55, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6723);
        EXPECT(gbc.pc(), 0xed56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed55), 0x8b);
        // 8B 01EC
        gbc.setState(0x6249, 0x44c5, 0xa870, 0x26, 0x8a02, 0x8160, 0x0, 0x0);
        gbc.writeMem(0x6249, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x44c5);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01ED
        gbc.setState(0x385d, 0xb4f7, 0xeac0, 0x3903, 0x7c04, 0x1a42, 0x1, 0x0);
        gbc.writeMem(0x385d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb4f7);
        EXPECT(gbc.pc(), 0x385e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01EE
        gbc.setState(0x2235, 0xad9e, 0x6860, 0x46b8, 0x167c, 0xae8d, 0x0, 0x0);
        gbc.writeMem(0x2235, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xad9e);
        EXPECT(gbc.pc(), 0x2236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01EF
        gbc.setState(0xc58d, 0x5694, 0x1390, 0xea85, 0x815b, 0x262, 0x0, 0x0);
        gbc.writeMem(0xc58d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5694);
        EXPECT(gbc.pc(), 0xc58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58d), 0x8b);
        // 8B 01F0
        gbc.setState(0x2b95, 0xdf85, 0xad60, 0x7819, 0xeeab, 0x2ed4, 0x0, 0x0);
        gbc.writeMem(0x2b95, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdf85);
        EXPECT(gbc.pc(), 0x2b96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 01F1
        gbc.setState(0x29dd, 0x88f8, 0x6e60, 0xbe2a, 0xd637, 0xc537, 0x1, 0x0);
        gbc.writeMem(0x29dd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x88f8);
        EXPECT(gbc.pc(), 0x29de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01F2
        gbc.setState(0xbb7, 0xf045, 0x6cd0, 0xd037, 0x695a, 0x40d4, 0x1, 0x0);
        gbc.writeMem(0xbb7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf045);
        EXPECT(gbc.pc(), 0xbb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01F3
        gbc.setState(0x17f6, 0xb05, 0x2d70, 0x54be, 0x7e7e, 0x27b2, 0x1, 0x0);
        gbc.writeMem(0x17f6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb05);
        EXPECT(gbc.pc(), 0x17f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01F4
        gbc.setState(0x5d67, 0x2c40, 0xaad0, 0x53d, 0x861a, 0x835b, 0x1, 0x0);
        gbc.writeMem(0x5d67, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2c40);
        EXPECT(gbc.pc(), 0x5d68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01F7
        gbc.setState(0x52, 0x5914, 0x5590, 0xbf63, 0x8463, 0xa31d, 0x0, 0x1);
        gbc.writeMem(0x52, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5914);
        EXPECT(gbc.pc(), 0x53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 01F8
        gbc.setState(0x9a67, 0x5290, 0x4810, 0xb1ba, 0x29d5, 0xa87e, 0x0, 0x1);
        gbc.writeMem(0x9a67, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5290);
        EXPECT(gbc.pc(), 0x9a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a67), 0x8b);
        // 8B 01F9
        gbc.setState(0x882e, 0x5041, 0xf370, 0x93ca, 0xed1a, 0x1847, 0x0, 0x0);
        gbc.writeMem(0x882e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5041);
        EXPECT(gbc.pc(), 0x882f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882e), 0x8b);
        // 8B 01FA
        gbc.setState(0x7859, 0x22ae, 0xc4c0, 0x2b40, 0x8467, 0xc792, 0x0, 0x0);
        gbc.writeMem(0x7859, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x22ae);
        EXPECT(gbc.pc(), 0x785a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01FB
        gbc.setState(0x5d3, 0x2000, 0x94e0, 0x1a5b, 0x6ee3, 0x2674, 0x1, 0x0);
        gbc.writeMem(0x5d3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2000);
        EXPECT(gbc.pc(), 0x5d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 01FD
        gbc.setState(0x9227, 0x96f, 0x5620, 0xe0b0, 0x31b9, 0xd0e8, 0x0, 0x1);
        gbc.writeMem(0x9227, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x96f);
        EXPECT(gbc.pc(), 0x9228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9227), 0x8b);
        // 8B 01FE
        gbc.setState(0x1d71, 0xeb21, 0x2870, 0x205d, 0x3287, 0x5f0f, 0x0, 0x1);
        gbc.writeMem(0x1d71, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xeb21);
        EXPECT(gbc.pc(), 0x1d72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 01FF
        gbc.setState(0x7c88, 0xb1c1, 0xea10, 0x69e0, 0x7a8c, 0x3a0, 0x0, 0x1);
        gbc.writeMem(0x7c88, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb1c1);
        EXPECT(gbc.pc(), 0x7c89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0200
        gbc.setState(0xe67, 0x6878, 0x10d0, 0x4d5c, 0x6998, 0x33b0, 0x1, 0x1);
        gbc.writeMem(0xe67, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6878);
        EXPECT(gbc.pc(), 0xe68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0201
        gbc.setState(0x9da8, 0x1d73, 0x6a30, 0xef49, 0x7d49, 0x9f7d, 0x1, 0x1);
        gbc.writeMem(0x9da8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1d73);
        EXPECT(gbc.pc(), 0x9da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da8), 0x8b);
        // 8B 0202
        gbc.setState(0xb00a, 0x7dd8, 0xb970, 0x1275, 0xd1bb, 0x7ad, 0x1, 0x1);
        gbc.writeMem(0xb00a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7dd8);
        EXPECT(gbc.pc(), 0xb00b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb00a), 0x8b);
        // 8B 0203
        gbc.setState(0x8a90, 0xe68, 0xd740, 0xb44c, 0x2367, 0x33a1, 0x1, 0x1);
        gbc.writeMem(0x8a90, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe68);
        EXPECT(gbc.pc(), 0x8a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a90), 0x8b);
        // 8B 0204
        gbc.setState(0x6448, 0xe58d, 0xd540, 0x8a55, 0x4c36, 0x5da6, 0x1, 0x1);
        gbc.writeMem(0x6448, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe58d);
        EXPECT(gbc.pc(), 0x6449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0205
        gbc.setState(0x767e, 0x73ba, 0x370, 0x93b1, 0xff6f, 0xd8db, 0x0, 0x0);
        gbc.writeMem(0x767e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x73ba);
        EXPECT(gbc.pc(), 0x767f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0206
        gbc.setState(0xcc23, 0xc3c2, 0xe120, 0xf3dc, 0x432, 0x1844, 0x0, 0x0);
        gbc.writeMem(0xcc23, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc3c2);
        EXPECT(gbc.pc(), 0xcc24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc23), 0x8b);
        // 8B 0207
        gbc.setState(0xe4e3, 0x4d27, 0x3400, 0xde82, 0x9718, 0x23da, 0x0, 0x1);
        gbc.writeMem(0xe4e3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4d27);
        EXPECT(gbc.pc(), 0xe4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e3), 0x8b);
        // 8B 0208
        gbc.setState(0xc664, 0x93b0, 0x3500, 0x86a1, 0xa9f8, 0x372f, 0x1, 0x0);
        gbc.writeMem(0xc664, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x93b0);
        EXPECT(gbc.pc(), 0xc665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc664), 0x8b);
        // 8B 020B
        gbc.setState(0x91db, 0x8dce, 0x4100, 0xda04, 0x7387, 0xe1fb, 0x1, 0x1);
        gbc.writeMem(0x91db, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8dce);
        EXPECT(gbc.pc(), 0x91dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91db), 0x8b);
        // 8B 020C
        gbc.setState(0xc67a, 0x5562, 0xe4a0, 0x30cd, 0x57ec, 0x6856, 0x1, 0x1);
        gbc.writeMem(0xc67a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5562);
        EXPECT(gbc.pc(), 0xc67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67a), 0x8b);
        // 8B 020D
        gbc.setState(0x3467, 0x334d, 0xa6e0, 0x5b49, 0x84a2, 0xba1d, 0x1, 0x1);
        gbc.writeMem(0x3467, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x334d);
        EXPECT(gbc.pc(), 0x3468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 020E
        gbc.setState(0x4fb9, 0xaf40, 0x5250, 0x9c1, 0xe9dd, 0xb372, 0x1, 0x0);
        gbc.writeMem(0x4fb9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xaf40);
        EXPECT(gbc.pc(), 0x4fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 020F
        gbc.setState(0x1398, 0x2b27, 0xda80, 0xbd55, 0x87d0, 0xf274, 0x0, 0x0);
        gbc.writeMem(0x1398, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2b27);
        EXPECT(gbc.pc(), 0x1399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0210
        gbc.setState(0xd000, 0xce0c, 0xb150, 0x4628, 0x3d89, 0x62b4, 0x0, 0x1);
        gbc.writeMem(0xd000, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xce0c);
        EXPECT(gbc.pc(), 0xd001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd000), 0x8b);
        // 8B 0211
        gbc.setState(0xd746, 0xcf61, 0x1850, 0x16f6, 0xc273, 0x1bb8, 0x1, 0x1);
        gbc.writeMem(0xd746, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xcf61);
        EXPECT(gbc.pc(), 0xd747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd746), 0x8b);
        // 8B 0212
        gbc.setState(0x146c, 0xee76, 0x48c0, 0xed8c, 0xb4e3, 0x9238, 0x1, 0x0);
        gbc.writeMem(0x146c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xee76);
        EXPECT(gbc.pc(), 0x146d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0213
        gbc.setState(0xde35, 0x51c9, 0x35d0, 0xa646, 0x368f, 0x3eaf, 0x1, 0x1);
        gbc.writeMem(0xde35, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x51c9);
        EXPECT(gbc.pc(), 0xde36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde35), 0x8b);
        // 8B 0214
        gbc.setState(0x776b, 0xa2db, 0x2920, 0x8a3d, 0x314, 0x70d5, 0x0, 0x1);
        gbc.writeMem(0x776b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa2db);
        EXPECT(gbc.pc(), 0x776c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0215
        gbc.setState(0xe20f, 0xb5c6, 0xa150, 0x2ad7, 0x289c, 0xbfc3, 0x1, 0x0);
        gbc.writeMem(0xe20f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb5c6);
        EXPECT(gbc.pc(), 0xe210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20f), 0x8b);
        // 8B 0217
        gbc.setState(0xd0b9, 0x8668, 0x9ee0, 0x1258, 0xb34, 0x76c0, 0x0, 0x0);
        gbc.writeMem(0xd0b9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8668);
        EXPECT(gbc.pc(), 0xd0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b9), 0x8b);
        // 8B 0218
        gbc.setState(0xb38e, 0xdf52, 0xae90, 0x66eb, 0x4858, 0xfc5b, 0x0, 0x1);
        gbc.writeMem(0xb38e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xdf52);
        EXPECT(gbc.pc(), 0xb38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb38e), 0x8b);
        // 8B 021A
        gbc.setState(0x74ba, 0x1faf, 0xf880, 0xcf56, 0x1e6a, 0x1286, 0x0, 0x1);
        gbc.writeMem(0x74ba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1faf);
        EXPECT(gbc.pc(), 0x74bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 021B
        gbc.setState(0x6bf1, 0xdf66, 0x310, 0x9097, 0x583d, 0x795a, 0x0, 0x1);
        gbc.writeMem(0x6bf1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xdf66);
        EXPECT(gbc.pc(), 0x6bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 021C
        gbc.setState(0x166, 0xcf7e, 0xe500, 0x9873, 0xad4f, 0xbb9c, 0x1, 0x1);
        gbc.writeMem(0x166, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcf7e);
        EXPECT(gbc.pc(), 0x167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 021D
        gbc.setState(0x38cf, 0xdcf9, 0x9470, 0x4512, 0xdcdf, 0x629, 0x0, 0x1);
        gbc.writeMem(0x38cf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xdcf9);
        EXPECT(gbc.pc(), 0x38d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 021E
        gbc.setState(0x5cb1, 0xac37, 0x7930, 0x7c70, 0xf93c, 0x4711, 0x1, 0x0);
        gbc.writeMem(0x5cb1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xac37);
        EXPECT(gbc.pc(), 0x5cb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 021F
        gbc.setState(0x2c19, 0x221b, 0x4390, 0xc16, 0x1c7c, 0x5231, 0x0, 0x1);
        gbc.writeMem(0x2c19, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x221b);
        EXPECT(gbc.pc(), 0x2c1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0220
        gbc.setState(0x2407, 0x9900, 0xd6e0, 0xef9f, 0xdd32, 0x30ab, 0x1, 0x0);
        gbc.writeMem(0x2407, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9900);
        EXPECT(gbc.pc(), 0x2408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0221
        gbc.setState(0x9034, 0xc119, 0xe4e0, 0x5165, 0xef0f, 0xeb74, 0x1, 0x0);
        gbc.writeMem(0x9034, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc119);
        EXPECT(gbc.pc(), 0x9035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9034), 0x8b);
        // 8B 0222
        gbc.setState(0xc973, 0x3cdc, 0xdab0, 0x765b, 0x692f, 0x1f10, 0x1, 0x0);
        gbc.writeMem(0xc973, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3cdc);
        EXPECT(gbc.pc(), 0xc974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc973), 0x8b);
        // 8B 0223
        gbc.setState(0xcee7, 0x6fbb, 0x35d0, 0xc2b5, 0xc30a, 0xe06c, 0x0, 0x1);
        gbc.writeMem(0xcee7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6fbb);
        EXPECT(gbc.pc(), 0xcee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcee7), 0x8b);
        // 8B 0224
        gbc.setState(0x1b17, 0x41d, 0xfb30, 0x684f, 0x5bb2, 0x9e28, 0x1, 0x1);
        gbc.writeMem(0x1b17, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x41d);
        EXPECT(gbc.pc(), 0x1b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0225
        gbc.setState(0x43a0, 0x894c, 0x7100, 0x29f3, 0x99db, 0x16fd, 0x0, 0x0);
        gbc.writeMem(0x43a0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x894c);
        EXPECT(gbc.pc(), 0x43a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0226
        gbc.setState(0x862f, 0x3dca, 0xd0d0, 0xe3c2, 0xa034, 0x2451, 0x0, 0x0);
        gbc.writeMem(0x862f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3dca);
        EXPECT(gbc.pc(), 0x8630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x862f), 0x8b);
        // 8B 0227
        gbc.setState(0x2331, 0x48c1, 0xc870, 0x8622, 0xb42c, 0x13b0, 0x0, 0x0);
        gbc.writeMem(0x2331, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x48c1);
        EXPECT(gbc.pc(), 0x2332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0228
        gbc.setState(0x150b, 0xc833, 0xf720, 0xf149, 0x34d7, 0xec2e, 0x1, 0x0);
        gbc.writeMem(0x150b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc833);
        EXPECT(gbc.pc(), 0x150c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0229
        gbc.setState(0x8ef8, 0x6359, 0x72d0, 0xb7c7, 0x94cb, 0x29b0, 0x0, 0x1);
        gbc.writeMem(0x8ef8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6359);
        EXPECT(gbc.pc(), 0x8ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef8), 0x8b);
        // 8B 022A
        gbc.setState(0x9b86, 0xc8a7, 0x67c0, 0xece9, 0xa5e0, 0x43d8, 0x0, 0x1);
        gbc.writeMem(0x9b86, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc8a7);
        EXPECT(gbc.pc(), 0x9b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b86), 0x8b);
        // 8B 022B
        gbc.setState(0x17b2, 0xdd53, 0x9910, 0xb558, 0x6181, 0xc1ca, 0x0, 0x0);
        gbc.writeMem(0x17b2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdd53);
        EXPECT(gbc.pc(), 0x17b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 022C
        gbc.setState(0x7528, 0x7ed, 0xdec0, 0xccc3, 0x10ec, 0xddd4, 0x1, 0x0);
        gbc.writeMem(0x7528, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7ed);
        EXPECT(gbc.pc(), 0x7529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 022D
        gbc.setState(0xcc16, 0x46db, 0x81c0, 0xb697, 0x4eac, 0x899f, 0x0, 0x1);
        gbc.writeMem(0xcc16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x46db);
        EXPECT(gbc.pc(), 0xcc17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc16), 0x8b);
        // 8B 022E
        gbc.setState(0x9dd3, 0x97c, 0x5560, 0x53ae, 0x8261, 0x7ceb, 0x0, 0x1);
        gbc.writeMem(0x9dd3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x97c);
        EXPECT(gbc.pc(), 0x9dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd3), 0x8b);
        // 8B 022F
        gbc.setState(0x2bfe, 0x229e, 0xe6c0, 0xd2ba, 0x3a77, 0x4c43, 0x0, 0x0);
        gbc.writeMem(0x2bfe, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x229e);
        EXPECT(gbc.pc(), 0x2bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0230
        gbc.setState(0xe0e9, 0x5321, 0x68a0, 0x920f, 0x452b, 0x2db8, 0x1, 0x0);
        gbc.writeMem(0xe0e9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5321);
        EXPECT(gbc.pc(), 0xe0ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e9), 0x8b);
        // 8B 0231
        gbc.setState(0x1069, 0x2bdc, 0x75e0, 0x2ee3, 0xe136, 0xfc54, 0x0, 0x0);
        gbc.writeMem(0x1069, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2bdc);
        EXPECT(gbc.pc(), 0x106a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0232
        gbc.setState(0x4e7f, 0x720e, 0xd810, 0x396, 0xbc89, 0xf70f, 0x0, 0x0);
        gbc.writeMem(0x4e7f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x720e);
        EXPECT(gbc.pc(), 0x4e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0234
        gbc.setState(0x5914, 0x129, 0x5690, 0x9402, 0x35fd, 0x773d, 0x0, 0x0);
        gbc.writeMem(0x5914, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x129);
        EXPECT(gbc.pc(), 0x5915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0235
        gbc.setState(0xef0f, 0x9180, 0x7830, 0x2671, 0xb27e, 0x6897, 0x1, 0x0);
        gbc.writeMem(0xef0f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9180);
        EXPECT(gbc.pc(), 0xef10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0f), 0x8b);
        // 8B 0236
        gbc.setState(0xcaa1, 0x9c3b, 0x7850, 0x4fc8, 0xd15f, 0x86e9, 0x0, 0x0);
        gbc.writeMem(0xcaa1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9c3b);
        EXPECT(gbc.pc(), 0xcaa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa1), 0x8b);
        // 8B 0237
        gbc.setState(0xebce, 0x833f, 0x1180, 0x49ae, 0x59, 0x8af5, 0x1, 0x0);
        gbc.writeMem(0xebce, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x833f);
        EXPECT(gbc.pc(), 0xebcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebce), 0x8b);
        // 8B 0238
        gbc.setState(0xc011, 0xe1a9, 0x3a60, 0x51f0, 0xb8b3, 0x2148, 0x1, 0x1);
        gbc.writeMem(0xc011, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe1a9);
        EXPECT(gbc.pc(), 0xc012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc011), 0x8b);
        // 8B 0239
        gbc.setState(0xe8bd, 0x8dfc, 0xb0c0, 0xd06d, 0x2088, 0xccec, 0x0, 0x0);
        gbc.writeMem(0xe8bd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8dfc);
        EXPECT(gbc.pc(), 0xe8be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8bd), 0x8b);
        // 8B 023A
        gbc.setState(0xb3d5, 0x6d64, 0x2f30, 0xdb79, 0xa852, 0xc7ba, 0x1, 0x0);
        gbc.writeMem(0xb3d5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6d64);
        EXPECT(gbc.pc(), 0xb3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d5), 0x8b);
        // 8B 023B
        gbc.setState(0xceaf, 0xccf2, 0x3ad0, 0xefad, 0x1537, 0x8ba6, 0x0, 0x1);
        gbc.writeMem(0xceaf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xccf2);
        EXPECT(gbc.pc(), 0xceb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceaf), 0x8b);
        // 8B 023C
        gbc.setState(0x9593, 0xac08, 0x2600, 0xc5c, 0x191c, 0xddae, 0x1, 0x1);
        gbc.writeMem(0x9593, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xac08);
        EXPECT(gbc.pc(), 0x9594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9593), 0x8b);
        // 8B 023D
        gbc.setState(0x65a1, 0x6ab6, 0x3420, 0x90d0, 0xa6a9, 0xc23d, 0x1, 0x0);
        gbc.writeMem(0x65a1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6ab6);
        EXPECT(gbc.pc(), 0x65a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 023F
        gbc.setState(0xed9f, 0xa0db, 0xfd70, 0xa5e9, 0x1da4, 0xf61f, 0x1, 0x0);
        gbc.writeMem(0xed9f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa0db);
        EXPECT(gbc.pc(), 0xeda0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed9f), 0x8b);
        // 8B 0240
        gbc.setState(0x82ef, 0xdd01, 0x8920, 0x99b4, 0x9df, 0x40ae, 0x0, 0x0);
        gbc.writeMem(0x82ef, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xdd01);
        EXPECT(gbc.pc(), 0x82f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ef), 0x8b);
        // 8B 0241
        gbc.setState(0x8149, 0x521d, 0x1df0, 0xa6f5, 0x7bbc, 0x6e74, 0x0, 0x0);
        gbc.writeMem(0x8149, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x521d);
        EXPECT(gbc.pc(), 0x814a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8149), 0x8b);
        // 8B 0242
        gbc.setState(0xa296, 0x7f43, 0xc050, 0xafbe, 0xe23c, 0xcb5b, 0x1, 0x0);
        gbc.writeMem(0xa296, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7f43);
        EXPECT(gbc.pc(), 0xa297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa296), 0x8b);
        // 8B 0244
        gbc.setState(0xdc98, 0x2701, 0x65d0, 0x82a8, 0xea76, 0xd6f0, 0x1, 0x0);
        gbc.writeMem(0xdc98, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2701);
        EXPECT(gbc.pc(), 0xdc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc98), 0x8b);
        // 8B 0245
        gbc.setState(0xbd18, 0x6b9b, 0x10, 0x6b23, 0x7b46, 0x103b, 0x0, 0x1);
        gbc.writeMem(0xbd18, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6b9b);
        EXPECT(gbc.pc(), 0xbd19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd18), 0x8b);
        // 8B 0246
        gbc.setState(0xaa4e, 0xcd97, 0xc130, 0xbe3b, 0x8c18, 0xb6d7, 0x0, 0x1);
        gbc.writeMem(0xaa4e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcd97);
        EXPECT(gbc.pc(), 0xaa4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa4e), 0x8b);
        // 8B 0247
        gbc.setState(0xde25, 0x933d, 0xa250, 0xb7fe, 0x6d10, 0xc4e7, 0x0, 0x0);
        gbc.writeMem(0xde25, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x933d);
        EXPECT(gbc.pc(), 0xde26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde25), 0x8b);
        // 8B 0248
        gbc.setState(0xb4b1, 0x7968, 0x1690, 0xce02, 0x9f4c, 0x693d, 0x0, 0x0);
        gbc.writeMem(0xb4b1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7968);
        EXPECT(gbc.pc(), 0xb4b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b1), 0x8b);
        // 8B 0249
        gbc.setState(0x4838, 0xb38a, 0x2e80, 0x2d44, 0xa265, 0x1dd6, 0x0, 0x0);
        gbc.writeMem(0x4838, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb38a);
        EXPECT(gbc.pc(), 0x4839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 024A
        gbc.setState(0x4ee8, 0x1142, 0x83f0, 0x8b0c, 0xbf5d, 0x2f0a, 0x1, 0x0);
        gbc.writeMem(0x4ee8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1142);
        EXPECT(gbc.pc(), 0x4ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 024B
        gbc.setState(0x5b9c, 0x88f, 0x6820, 0xb5b8, 0xaee2, 0xa8b7, 0x1, 0x0);
        gbc.writeMem(0x5b9c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x88f);
        EXPECT(gbc.pc(), 0x5b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 024C
        gbc.setState(0xc3a, 0xf93a, 0xf30, 0xd46e, 0xe91f, 0x1f15, 0x0, 0x0);
        gbc.writeMem(0xc3a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf93a);
        EXPECT(gbc.pc(), 0xc3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 024D
        gbc.setState(0xb16a, 0xe99a, 0x6df0, 0x454b, 0x27ae, 0x271d, 0x1, 0x0);
        gbc.writeMem(0xb16a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe99a);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16a), 0x8b);
        // 8B 024E
        gbc.setState(0xd216, 0xaf10, 0x7660, 0xe429, 0x8ee6, 0xf759, 0x0, 0x1);
        gbc.writeMem(0xd216, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xaf10);
        EXPECT(gbc.pc(), 0xd217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd216), 0x8b);
        // 8B 024F
        gbc.setState(0x2a5, 0x4059, 0x5cc0, 0x15b1, 0x3bb0, 0x438, 0x0, 0x1);
        gbc.writeMem(0x2a5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4059);
        EXPECT(gbc.pc(), 0x2a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0250
        gbc.setState(0x33a8, 0xa740, 0x2c10, 0xa468, 0xb1a3, 0x1e36, 0x1, 0x1);
        gbc.writeMem(0x33a8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa740);
        EXPECT(gbc.pc(), 0x33a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0251
        gbc.setState(0x8ab6, 0x82d6, 0xeab0, 0x9d8d, 0x335d, 0x78e4, 0x1, 0x1);
        gbc.writeMem(0x8ab6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x82d6);
        EXPECT(gbc.pc(), 0x8ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab6), 0x8b);
        // 8B 0253
        gbc.setState(0x1165, 0xeccb, 0xe5f0, 0xad95, 0xbef7, 0x699d, 0x1, 0x1);
        gbc.writeMem(0x1165, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xeccb);
        EXPECT(gbc.pc(), 0x1166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0254
        gbc.setState(0x7ddf, 0x68d6, 0xe500, 0x6405, 0x7204, 0xed17, 0x0, 0x1);
        gbc.writeMem(0x7ddf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x68d6);
        EXPECT(gbc.pc(), 0x7de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0255
        gbc.setState(0xcdad, 0xaaf1, 0x5160, 0x4cba, 0x657, 0xbea8, 0x0, 0x0);
        gbc.writeMem(0xcdad, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xaaf1);
        EXPECT(gbc.pc(), 0xcdae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdad), 0x8b);
        // 8B 0256
        gbc.setState(0x1197, 0x822f, 0xf310, 0x8877, 0x83d0, 0xe55f, 0x1, 0x0);
        gbc.writeMem(0x1197, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x822f);
        EXPECT(gbc.pc(), 0x1198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0257
        gbc.setState(0xcd37, 0x208a, 0xd160, 0x2f10, 0x8074, 0xfb32, 0x0, 0x0);
        gbc.writeMem(0xcd37, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x208a);
        EXPECT(gbc.pc(), 0xcd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd37), 0x8b);
        // 8B 0258
        gbc.setState(0xa12, 0xf3c0, 0x8310, 0x99da, 0x13db, 0x5b57, 0x0, 0x1);
        gbc.writeMem(0xa12, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf3c0);
        EXPECT(gbc.pc(), 0xa13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0259
        gbc.setState(0x5f28, 0x665e, 0x53a0, 0xa50c, 0x3d20, 0xb3c7, 0x1, 0x0);
        gbc.writeMem(0x5f28, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x665e);
        EXPECT(gbc.pc(), 0x5f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 025A
        gbc.setState(0x7c66, 0xfeef, 0x4a00, 0x7105, 0xeec2, 0x4ca9, 0x0, 0x1);
        gbc.writeMem(0x7c66, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfeef);
        EXPECT(gbc.pc(), 0x7c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 025B
        gbc.setState(0xdbe5, 0xbb44, 0x93f0, 0xeff3, 0x435, 0xdfde, 0x1, 0x0);
        gbc.writeMem(0xdbe5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbb44);
        EXPECT(gbc.pc(), 0xdbe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe5), 0x8b);
        // 8B 025C
        gbc.setState(0x836b, 0x423f, 0xaab0, 0x82e0, 0xdf71, 0x78ed, 0x0, 0x0);
        gbc.writeMem(0x836b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x423f);
        EXPECT(gbc.pc(), 0x836c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836b), 0x8b);
        // 8B 025D
        gbc.setState(0x1683, 0x87e5, 0x7a80, 0x26e0, 0x7c19, 0xc942, 0x0, 0x0);
        gbc.writeMem(0x1683, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x87e5);
        EXPECT(gbc.pc(), 0x1684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 025E
        gbc.setState(0xbe16, 0xf66d, 0xa6b0, 0x15bd, 0x1b6d, 0xe211, 0x1, 0x0);
        gbc.writeMem(0xbe16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf66d);
        EXPECT(gbc.pc(), 0xbe17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe16), 0x8b);
        // 8B 025F
        gbc.setState(0x11d3, 0xbe01, 0x50b0, 0xfbe6, 0x1036, 0x46ba, 0x1, 0x1);
        gbc.writeMem(0x11d3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbe01);
        EXPECT(gbc.pc(), 0x11d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0260
        gbc.setState(0x2245, 0xb88c, 0xfdf0, 0xcacc, 0x1dee, 0xdfc9, 0x1, 0x0);
        gbc.writeMem(0x2245, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb88c);
        EXPECT(gbc.pc(), 0x2246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0261
        gbc.setState(0x19be, 0x943b, 0x35b0, 0xe543, 0x84da, 0xd32b, 0x1, 0x1);
        gbc.writeMem(0x19be, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x943b);
        EXPECT(gbc.pc(), 0x19bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0262
        gbc.setState(0x637a, 0xd3ab, 0x57e0, 0x36d8, 0x4a7f, 0x6736, 0x0, 0x1);
        gbc.writeMem(0x637a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd3ab);
        EXPECT(gbc.pc(), 0x637b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0263
        gbc.setState(0xbb69, 0xd56a, 0x8e10, 0x26fd, 0xbea9, 0xbfa3, 0x1, 0x0);
        gbc.writeMem(0xbb69, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd56a);
        EXPECT(gbc.pc(), 0xbb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb69), 0x8b);
        // 8B 0264
        gbc.setState(0xd232, 0xe276, 0x8060, 0x4a99, 0x8fd9, 0x712f, 0x0, 0x1);
        gbc.writeMem(0xd232, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe276);
        EXPECT(gbc.pc(), 0xd233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd232), 0x8b);
        // 8B 0265
        gbc.setState(0x6127, 0xc392, 0x73f0, 0x82d0, 0xe60b, 0x7f5d, 0x1, 0x0);
        gbc.writeMem(0x6127, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc392);
        EXPECT(gbc.pc(), 0x6128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0266
        gbc.setState(0xc6fc, 0xcf57, 0xe6c0, 0x3e7d, 0x8667, 0x9957, 0x0, 0x1);
        gbc.writeMem(0xc6fc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcf57);
        EXPECT(gbc.pc(), 0xc6fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6fc), 0x8b);
        // 8B 0267
        gbc.setState(0xc88e, 0xe38, 0x3080, 0xcb6a, 0x4a3c, 0xde29, 0x0, 0x0);
        gbc.writeMem(0xc88e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe38);
        EXPECT(gbc.pc(), 0xc88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88e), 0x8b);
        // 8B 0268
        gbc.setState(0x2cb1, 0x31a5, 0x9a40, 0xe053, 0x6ecd, 0xa522, 0x0, 0x1);
        gbc.writeMem(0x2cb1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x31a5);
        EXPECT(gbc.pc(), 0x2cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0269
        gbc.setState(0x2500, 0x7819, 0xf130, 0x6030, 0xe233, 0xdeb1, 0x1, 0x1);
        gbc.writeMem(0x2500, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7819);
        EXPECT(gbc.pc(), 0x2501);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 026A
        gbc.setState(0xb8aa, 0xc0a2, 0x8da0, 0xd141, 0x4ca1, 0xde57, 0x1, 0x0);
        gbc.writeMem(0xb8aa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc0a2);
        EXPECT(gbc.pc(), 0xb8ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8aa), 0x8b);
        // 8B 026B
        gbc.setState(0x3988, 0xdacf, 0x4270, 0xabe7, 0x21ac, 0x6ecc, 0x1, 0x1);
        gbc.writeMem(0x3988, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xdacf);
        EXPECT(gbc.pc(), 0x3989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 026D
        gbc.setState(0x6553, 0x6523, 0x8b10, 0x1a93, 0xb79b, 0x35e6, 0x0, 0x1);
        gbc.writeMem(0x6553, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6523);
        EXPECT(gbc.pc(), 0x6554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 026E
        gbc.setState(0x7c75, 0xa44e, 0x9430, 0x4f8b, 0x1b20, 0x190d, 0x1, 0x0);
        gbc.writeMem(0x7c75, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa44e);
        EXPECT(gbc.pc(), 0x7c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 026F
        gbc.setState(0xcfb2, 0xb06e, 0x2eb0, 0x8746, 0xfc2, 0x1782, 0x0, 0x1);
        gbc.writeMem(0xcfb2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb06e);
        EXPECT(gbc.pc(), 0xcfb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb2), 0x8b);
        // 8B 0270
        gbc.setState(0xea9a, 0x7e28, 0x7a10, 0x94bc, 0x8468, 0xe617, 0x1, 0x0);
        gbc.writeMem(0xea9a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7e28);
        EXPECT(gbc.pc(), 0xea9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea9a), 0x8b);
        // 8B 0272
        gbc.setState(0xe85c, 0x6f61, 0x4340, 0x80cb, 0xdbd7, 0xfbcf, 0x0, 0x1);
        gbc.writeMem(0xe85c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6f61);
        EXPECT(gbc.pc(), 0xe85d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe85c), 0x8b);
        // 8B 0273
        gbc.setState(0x4354, 0xfd1a, 0x6a0, 0x88f7, 0x835a, 0x66ba, 0x0, 0x1);
        gbc.writeMem(0x4354, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfd1a);
        EXPECT(gbc.pc(), 0x4355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0274
        gbc.setState(0x2b26, 0x86a1, 0x5ed0, 0xcbb7, 0x50d2, 0x5550, 0x1, 0x1);
        gbc.writeMem(0x2b26, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x86a1);
        EXPECT(gbc.pc(), 0x2b27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0276
        gbc.setState(0x76cf, 0x851f, 0x51c0, 0x8bc2, 0x6d06, 0xecc6, 0x0, 0x1);
        gbc.writeMem(0x76cf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x851f);
        EXPECT(gbc.pc(), 0x76d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0277
        gbc.setState(0xaefd, 0x438f, 0x7df0, 0x11b7, 0xbb7c, 0x91f4, 0x1, 0x0);
        gbc.writeMem(0xaefd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x438f);
        EXPECT(gbc.pc(), 0xaefe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaefd), 0x8b);
        // 8B 0278
        gbc.setState(0x95aa, 0xe7e2, 0xcd50, 0x138d, 0xa0ab, 0x88f, 0x1, 0x0);
        gbc.writeMem(0x95aa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe7e2);
        EXPECT(gbc.pc(), 0x95ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95aa), 0x8b);
        // 8B 0279
        gbc.setState(0xc37e, 0xc2a1, 0x1ae0, 0x29d8, 0x6c81, 0xd0d3, 0x1, 0x1);
        gbc.writeMem(0xc37e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc2a1);
        EXPECT(gbc.pc(), 0xc37f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc37e), 0x8b);
        // 8B 027A
        gbc.setState(0x2f76, 0x57ba, 0xfc10, 0x65a3, 0x4c97, 0xe14c, 0x1, 0x0);
        gbc.writeMem(0x2f76, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x57ba);
        EXPECT(gbc.pc(), 0x2f77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 027B
        gbc.setState(0xc5e0, 0xe647, 0xbb70, 0x146b, 0xd96, 0xf4ad, 0x0, 0x0);
        gbc.writeMem(0xc5e0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe647);
        EXPECT(gbc.pc(), 0xc5e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5e0), 0x8b);
        // 8B 027C
        gbc.setState(0xd16d, 0x59d6, 0x6780, 0x9988, 0xeffc, 0xc690, 0x1, 0x0);
        gbc.writeMem(0xd16d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x59d6);
        EXPECT(gbc.pc(), 0xd16e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd16d), 0x8b);
        // 8B 027D
        gbc.setState(0xe849, 0xc4af, 0x48c0, 0x4e87, 0xff92, 0x992c, 0x1, 0x0);
        gbc.writeMem(0xe849, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc4af);
        EXPECT(gbc.pc(), 0xe84a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe849), 0x8b);
        // 8B 027E
        gbc.setState(0xbaed, 0xd003, 0xd2d0, 0x7c86, 0x652f, 0x9faf, 0x0, 0x1);
        gbc.writeMem(0xbaed, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd003);
        EXPECT(gbc.pc(), 0xbaee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaed), 0x8b);
        // 8B 027F
        gbc.setState(0x3e4a, 0xca14, 0x3b30, 0xb121, 0x481, 0x8b47, 0x1, 0x0);
        gbc.writeMem(0x3e4a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xca14);
        EXPECT(gbc.pc(), 0x3e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0280
        gbc.setState(0x78e, 0xd716, 0x32a0, 0x2a85, 0xa275, 0x8db4, 0x0, 0x0);
        gbc.writeMem(0x78e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd716);
        EXPECT(gbc.pc(), 0x78f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0281
        gbc.setState(0xa2a0, 0x82ad, 0x3220, 0xc071, 0xbc64, 0x44ce, 0x0, 0x0);
        gbc.writeMem(0xa2a0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x82ad);
        EXPECT(gbc.pc(), 0xa2a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a0), 0x8b);
        // 8B 0282
        gbc.setState(0xaf10, 0xb421, 0xdd20, 0x9e6b, 0x2f0e, 0x17f6, 0x1, 0x1);
        gbc.writeMem(0xaf10, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb421);
        EXPECT(gbc.pc(), 0xaf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf10), 0x8b);
        // 8B 0283
        gbc.setState(0xcce7, 0x8cc8, 0xcb70, 0x925, 0x8383, 0xd474, 0x1, 0x0);
        gbc.writeMem(0xcce7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8cc8);
        EXPECT(gbc.pc(), 0xcce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce7), 0x8b);
        // 8B 0284
        gbc.setState(0x9ac8, 0x4495, 0x7ce0, 0x3668, 0xb260, 0x2e29, 0x0, 0x1);
        gbc.writeMem(0x9ac8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4495);
        EXPECT(gbc.pc(), 0x9ac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac8), 0x8b);
        // 8B 0285
        gbc.setState(0xa814, 0xfdd7, 0xc510, 0x903a, 0x2846, 0x2ec3, 0x1, 0x0);
        gbc.writeMem(0xa814, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xfdd7);
        EXPECT(gbc.pc(), 0xa815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa814), 0x8b);
        // 8B 0286
        gbc.setState(0x9d1, 0xa26d, 0xcc40, 0x37d7, 0xd964, 0xc56b, 0x0, 0x0);
        gbc.writeMem(0x9d1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa26d);
        EXPECT(gbc.pc(), 0x9d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0287
        gbc.setState(0x37f3, 0x41b8, 0xf750, 0xa977, 0xf6f7, 0x789a, 0x0, 0x0);
        gbc.writeMem(0x37f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x41b8);
        EXPECT(gbc.pc(), 0x37f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0288
        gbc.setState(0x64f1, 0xbe2e, 0x4900, 0x1fed, 0x1f2a, 0xc8b9, 0x0, 0x1);
        gbc.writeMem(0x64f1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbe2e);
        EXPECT(gbc.pc(), 0x64f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0289
        gbc.setState(0x8e59, 0x9637, 0x7a00, 0x8474, 0x3a13, 0x9bed, 0x1, 0x1);
        gbc.writeMem(0x8e59, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9637);
        EXPECT(gbc.pc(), 0x8e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e59), 0x8b);
        // 8B 028A
        gbc.setState(0x585, 0xd83b, 0x9ce0, 0xe1cb, 0xcd3d, 0x183e, 0x0, 0x0);
        gbc.writeMem(0x585, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd83b);
        EXPECT(gbc.pc(), 0x586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 028B
        gbc.setState(0x9968, 0x2244, 0x64f0, 0x324b, 0xee3, 0x7b9e, 0x1, 0x0);
        gbc.writeMem(0x9968, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2244);
        EXPECT(gbc.pc(), 0x9969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9968), 0x8b);
        // 8B 028C
        gbc.setState(0x3c86, 0x9b63, 0xc400, 0x9949, 0x9e79, 0x89cd, 0x0, 0x1);
        gbc.writeMem(0x3c86, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9b63);
        EXPECT(gbc.pc(), 0x3c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 028D
        gbc.setState(0xbac2, 0x80c8, 0xc2e0, 0xde5, 0xc1f, 0x99ad, 0x1, 0x0);
        gbc.writeMem(0xbac2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x80c8);
        EXPECT(gbc.pc(), 0xbac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac2), 0x8b);
        // 8B 028E
        gbc.setState(0x7123, 0xcdab, 0x66c0, 0xe571, 0x2c54, 0x32ed, 0x0, 0x0);
        gbc.writeMem(0x7123, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcdab);
        EXPECT(gbc.pc(), 0x7124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 028F
        gbc.setState(0x942f, 0x787e, 0xa810, 0xac0f, 0x5931, 0x1169, 0x0, 0x1);
        gbc.writeMem(0x942f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x787e);
        EXPECT(gbc.pc(), 0x9430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x942f), 0x8b);
        // 8B 0290
        gbc.setState(0x6be4, 0x6702, 0xddc0, 0xc8c0, 0x7407, 0xbef, 0x1, 0x0);
        gbc.writeMem(0x6be4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6702);
        EXPECT(gbc.pc(), 0x6be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0291
        gbc.setState(0xbb70, 0xdb8, 0x79d0, 0x8a2b, 0xe70f, 0x8102, 0x0, 0x0);
        gbc.writeMem(0xbb70, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdb8);
        EXPECT(gbc.pc(), 0xbb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb70), 0x8b);
        // 8B 0292
        gbc.setState(0x4b89, 0xeac8, 0x47d0, 0xed81, 0xe6d8, 0x5c8a, 0x0, 0x1);
        gbc.writeMem(0x4b89, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xeac8);
        EXPECT(gbc.pc(), 0x4b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0293
        gbc.setState(0x3ade, 0x9bb0, 0x6880, 0x8efc, 0x6e3a, 0x8f29, 0x1, 0x1);
        gbc.writeMem(0x3ade, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9bb0);
        EXPECT(gbc.pc(), 0x3adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0294
        gbc.setState(0xa65d, 0x4962, 0xbf70, 0x5933, 0x8d08, 0x4588, 0x1, 0x0);
        gbc.writeMem(0xa65d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4962);
        EXPECT(gbc.pc(), 0xa65e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa65d), 0x8b);
        // 8B 0295
        gbc.setState(0x9dd9, 0x667e, 0xafa0, 0xcee8, 0x5d41, 0xf309, 0x1, 0x1);
        gbc.writeMem(0x9dd9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x667e);
        EXPECT(gbc.pc(), 0x9dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd9), 0x8b);
        // 8B 0296
        gbc.setState(0xd284, 0xeff8, 0xe750, 0xf4c4, 0x9d44, 0x4cda, 0x1, 0x0);
        gbc.writeMem(0xd284, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xeff8);
        EXPECT(gbc.pc(), 0xd285);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd284), 0x8b);
        // 8B 0297
        gbc.setState(0xca05, 0x4aec, 0x4b30, 0x5a32, 0xb811, 0x5212, 0x1, 0x1);
        gbc.writeMem(0xca05, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4aec);
        EXPECT(gbc.pc(), 0xca06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca05), 0x8b);
        // 8B 0298
        gbc.setState(0x5c35, 0x8552, 0xffb0, 0xc29b, 0x1b7c, 0xab54, 0x1, 0x1);
        gbc.writeMem(0x5c35, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8552);
        EXPECT(gbc.pc(), 0x5c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0299
        gbc.setState(0x5716, 0xd046, 0xa00, 0xdbea, 0xaf0b, 0xe46d, 0x1, 0x0);
        gbc.writeMem(0x5716, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd046);
        EXPECT(gbc.pc(), 0x5717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 029A
        gbc.setState(0xe016, 0xae42, 0x5c70, 0x3494, 0x1963, 0x25ba, 0x1, 0x1);
        gbc.writeMem(0xe016, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xae42);
        EXPECT(gbc.pc(), 0xe017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe016), 0x8b);
        // 8B 029B
        gbc.setState(0x2567, 0xfece, 0xff0, 0xdad9, 0x5454, 0xb77f, 0x0, 0x1);
        gbc.writeMem(0x2567, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xfece);
        EXPECT(gbc.pc(), 0x2568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 029C
        gbc.setState(0x641c, 0x92d9, 0xa3e0, 0xb1fa, 0xd20d, 0xac0e, 0x0, 0x1);
        gbc.writeMem(0x641c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x92d9);
        EXPECT(gbc.pc(), 0x641d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 029D
        gbc.setState(0x9d16, 0xa923, 0xa80, 0xc008, 0xfb0e, 0xcba4, 0x0, 0x1);
        gbc.writeMem(0x9d16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa923);
        EXPECT(gbc.pc(), 0x9d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d16), 0x8b);
        // 8B 02A0
        gbc.setState(0x52f, 0x9579, 0x8ad0, 0xd4f, 0x5138, 0x5bfb, 0x0, 0x0);
        gbc.writeMem(0x52f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9579);
        EXPECT(gbc.pc(), 0x530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02A1
        gbc.setState(0x9993, 0x3a0c, 0x4570, 0x51cd, 0x5273, 0x4cab, 0x1, 0x1);
        gbc.writeMem(0x9993, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3a0c);
        EXPECT(gbc.pc(), 0x9994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9993), 0x8b);
        // 8B 02A2
        gbc.setState(0xb8f3, 0x4251, 0xcd80, 0x8f58, 0xa6a4, 0x54ab, 0x0, 0x1);
        gbc.writeMem(0xb8f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4251);
        EXPECT(gbc.pc(), 0xb8f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f3), 0x8b);
        // 8B 02A3
        gbc.setState(0x3432, 0xd94f, 0x87a0, 0x93d2, 0xfdf9, 0xd5f8, 0x1, 0x0);
        gbc.writeMem(0x3432, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd94f);
        EXPECT(gbc.pc(), 0x3433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02A4
        gbc.setState(0x979d, 0x2c2f, 0x71a0, 0x47b8, 0x5dd6, 0x7bb9, 0x1, 0x0);
        gbc.writeMem(0x979d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2c2f);
        EXPECT(gbc.pc(), 0x979e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979d), 0x8b);
        // 8B 02A5
        gbc.setState(0x70c1, 0x8eac, 0xc020, 0xa272, 0xcb0d, 0x4295, 0x0, 0x1);
        gbc.writeMem(0x70c1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8eac);
        EXPECT(gbc.pc(), 0x70c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02A6
        gbc.setState(0xedf1, 0xc0a9, 0xdc0, 0xa0cd, 0xf2bf, 0x5341, 0x1, 0x0);
        gbc.writeMem(0xedf1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc0a9);
        EXPECT(gbc.pc(), 0xedf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf1), 0x8b);
        // 8B 02A7
        gbc.setState(0x32, 0x810b, 0x6770, 0x2e54, 0xe141, 0x8913, 0x0, 0x0);
        gbc.writeMem(0x32, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x810b);
        EXPECT(gbc.pc(), 0x33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02A8
        gbc.setState(0x9bb3, 0x2371, 0x12e0, 0x534a, 0xed9f, 0x5590, 0x1, 0x1);
        gbc.writeMem(0x9bb3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2371);
        EXPECT(gbc.pc(), 0x9bb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb3), 0x8b);
        // 8B 02A9
        gbc.setState(0x946a, 0xfa47, 0xeae0, 0x2b32, 0x1de3, 0x68ab, 0x0, 0x0);
        gbc.writeMem(0x946a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfa47);
        EXPECT(gbc.pc(), 0x946b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946a), 0x8b);
        // 8B 02AA
        gbc.setState(0x9f19, 0x530, 0x7700, 0xa8b0, 0xff0, 0x5039, 0x1, 0x0);
        gbc.writeMem(0x9f19, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x530);
        EXPECT(gbc.pc(), 0x9f1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f19), 0x8b);
        // 8B 02AB
        gbc.setState(0x959f, 0xd44e, 0x16b0, 0x778d, 0x585d, 0x7261, 0x0, 0x1);
        gbc.writeMem(0x959f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd44e);
        EXPECT(gbc.pc(), 0x95a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959f), 0x8b);
        // 8B 02AD
        gbc.setState(0x84e6, 0x15ae, 0xaa40, 0x27bc, 0x3118, 0xf83c, 0x0, 0x1);
        gbc.writeMem(0x84e6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x15ae);
        EXPECT(gbc.pc(), 0x84e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e6), 0x8b);
        // 8B 02AE
        gbc.setState(0x8a8d, 0xcbe7, 0xbac0, 0xddb9, 0x95f4, 0xc51, 0x1, 0x1);
        gbc.writeMem(0x8a8d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcbe7);
        EXPECT(gbc.pc(), 0x8a8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8d), 0x8b);
        // 8B 02AF
        gbc.setState(0x86f0, 0x281d, 0xb2f0, 0x5e46, 0x5b4a, 0xa4d9, 0x0, 0x1);
        gbc.writeMem(0x86f0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x281d);
        EXPECT(gbc.pc(), 0x86f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f0), 0x8b);
        // 8B 02B0
        gbc.setState(0x3c58, 0xae1d, 0x86b0, 0xb02c, 0x9c06, 0xc2e5, 0x1, 0x0);
        gbc.writeMem(0x3c58, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xae1d);
        EXPECT(gbc.pc(), 0x3c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02B1
        gbc.setState(0xb951, 0x8eb8, 0x1df0, 0x9507, 0xac05, 0x9157, 0x1, 0x1);
        gbc.writeMem(0xb951, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8eb8);
        EXPECT(gbc.pc(), 0xb952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb951), 0x8b);
        // 8B 02B2
        gbc.setState(0x8fa1, 0x322e, 0x73e0, 0xb3be, 0x32d, 0x822e, 0x1, 0x0);
        gbc.writeMem(0x8fa1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x322e);
        EXPECT(gbc.pc(), 0x8fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa1), 0x8b);
        // 8B 02B3
        gbc.setState(0xb4b0, 0x6a46, 0x3c80, 0x1085, 0x2a2c, 0x8ced, 0x1, 0x1);
        gbc.writeMem(0xb4b0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6a46);
        EXPECT(gbc.pc(), 0xb4b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b0), 0x8b);
        // 8B 02B4
        gbc.setState(0x1c6e, 0x9cb6, 0x4f90, 0xad9a, 0xd7f7, 0x539a, 0x0, 0x1);
        gbc.writeMem(0x1c6e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9cb6);
        EXPECT(gbc.pc(), 0x1c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02B5
        gbc.setState(0x9983, 0x718c, 0x470, 0x664d, 0x76d5, 0xb541, 0x1, 0x1);
        gbc.writeMem(0x9983, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x718c);
        EXPECT(gbc.pc(), 0x9984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9983), 0x8b);
        // 8B 02B6
        gbc.setState(0xa2b8, 0x3325, 0xc610, 0xa327, 0x5abb, 0x56ca, 0x1, 0x0);
        gbc.writeMem(0xa2b8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3325);
        EXPECT(gbc.pc(), 0xa2b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b8), 0x8b);
        // 8B 02B7
        gbc.setState(0x25d5, 0x73f5, 0x630, 0x8037, 0x2e2a, 0x6f41, 0x0, 0x1);
        gbc.writeMem(0x25d5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x73f5);
        EXPECT(gbc.pc(), 0x25d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02B8
        gbc.setState(0x258d, 0x4e58, 0x6cc0, 0x690e, 0x60f2, 0xe15b, 0x0, 0x1);
        gbc.writeMem(0x258d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4e58);
        EXPECT(gbc.pc(), 0x258e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02B9
        gbc.setState(0xcfdc, 0xc31c, 0x2890, 0xdbda, 0xb1a0, 0x8fff, 0x0, 0x1);
        gbc.writeMem(0xcfdc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc31c);
        EXPECT(gbc.pc(), 0xcfdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfdc), 0x8b);
        // 8B 02BC
        gbc.setState(0x20c5, 0xbaa7, 0xccc0, 0xe3fd, 0xcf79, 0x4e3, 0x1, 0x1);
        gbc.writeMem(0x20c5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xbaa7);
        EXPECT(gbc.pc(), 0x20c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02BD
        gbc.setState(0x5f4e, 0x5aa8, 0x7810, 0xd41e, 0x8d8e, 0xefc8, 0x0, 0x1);
        gbc.writeMem(0x5f4e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5aa8);
        EXPECT(gbc.pc(), 0x5f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02BE
        gbc.setState(0x4b99, 0x539c, 0x99f0, 0xa8a8, 0x95d, 0xd0c7, 0x0, 0x0);
        gbc.writeMem(0x4b99, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x539c);
        EXPECT(gbc.pc(), 0x4b9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02BF
        gbc.setState(0x615d, 0xbcbe, 0x2d30, 0x200, 0x3bae, 0x83fa, 0x0, 0x0);
        gbc.writeMem(0x615d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbcbe);
        EXPECT(gbc.pc(), 0x615e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C0
        gbc.setState(0x210, 0x526f, 0x9960, 0xa49f, 0xe443, 0x2016, 0x0, 0x1);
        gbc.writeMem(0x210, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x526f);
        EXPECT(gbc.pc(), 0x211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C1
        gbc.setState(0x79bb, 0x839c, 0x72e0, 0x7d19, 0x1b04, 0xd0fc, 0x1, 0x0);
        gbc.writeMem(0x79bb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x839c);
        EXPECT(gbc.pc(), 0x79bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C2
        gbc.setState(0x9eff, 0x1cc8, 0xaaf0, 0xa362, 0x1101, 0x2e5a, 0x1, 0x0);
        gbc.writeMem(0x9eff, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1cc8);
        EXPECT(gbc.pc(), 0x9f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eff), 0x8b);
        // 8B 02C3
        gbc.setState(0x112e, 0xbe4, 0xba90, 0x9bc1, 0x3444, 0x7950, 0x1, 0x0);
        gbc.writeMem(0x112e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbe4);
        EXPECT(gbc.pc(), 0x112f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C4
        gbc.setState(0x604f, 0xf470, 0x7390, 0x8499, 0x2717, 0x6cfc, 0x0, 0x0);
        gbc.writeMem(0x604f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf470);
        EXPECT(gbc.pc(), 0x6050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C5
        gbc.setState(0xa1f3, 0x8e81, 0xd1e0, 0x20ec, 0x6fa6, 0x416d, 0x0, 0x1);
        gbc.writeMem(0xa1f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8e81);
        EXPECT(gbc.pc(), 0xa1f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f3), 0x8b);
        // 8B 02C7
        gbc.setState(0xeac, 0xbf21, 0xf10, 0x9e5d, 0x8df, 0x4d9a, 0x1, 0x0);
        gbc.writeMem(0xeac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbf21);
        EXPECT(gbc.pc(), 0xead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02C8
        gbc.setState(0x96e8, 0xe151, 0xa3f0, 0x4fbc, 0x9f6f, 0x92a9, 0x1, 0x1);
        gbc.writeMem(0x96e8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe151);
        EXPECT(gbc.pc(), 0x96e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96e8), 0x8b);
        // 8B 02C9
        gbc.setState(0x7955, 0xb557, 0x7b80, 0xdd65, 0x1f8a, 0x5ce7, 0x1, 0x0);
        gbc.writeMem(0x7955, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb557);
        EXPECT(gbc.pc(), 0x7956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02CA
        gbc.setState(0x123f, 0xadd4, 0xca50, 0xbc9f, 0x743f, 0x4da6, 0x0, 0x0);
        gbc.writeMem(0x123f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xadd4);
        EXPECT(gbc.pc(), 0x1240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02CB
        gbc.setState(0x9a8c, 0x2c2f, 0xdeb0, 0xc61d, 0x58dc, 0x6e75, 0x0, 0x1);
        gbc.writeMem(0x9a8c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2c2f);
        EXPECT(gbc.pc(), 0x9a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a8c), 0x8b);
        // 8B 02CC
        gbc.setState(0x75ab, 0x1c7f, 0x9800, 0xa14e, 0xaf8e, 0xfa3b, 0x0, 0x0);
        gbc.writeMem(0x75ab, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1c7f);
        EXPECT(gbc.pc(), 0x75ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02CD
        gbc.setState(0x1119, 0xcd0a, 0xa490, 0xd3bd, 0x386f, 0x7ecb, 0x0, 0x0);
        gbc.writeMem(0x1119, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcd0a);
        EXPECT(gbc.pc(), 0x111a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02CE
        gbc.setState(0x700d, 0xc4ac, 0xe4a0, 0xd294, 0x81c5, 0x9a56, 0x1, 0x1);
        gbc.writeMem(0x700d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc4ac);
        EXPECT(gbc.pc(), 0x700e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02CF
        gbc.setState(0x7892, 0x7f5d, 0x1f40, 0xffb6, 0x124c, 0x34ee, 0x0, 0x1);
        gbc.writeMem(0x7892, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7f5d);
        EXPECT(gbc.pc(), 0x7893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02D1
        gbc.setState(0x6935, 0x5a73, 0x4970, 0x83b5, 0xa47c, 0x7c31, 0x1, 0x0);
        gbc.writeMem(0x6935, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5a73);
        EXPECT(gbc.pc(), 0x6936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02D2
        gbc.setState(0xbd5f, 0x6778, 0x43d0, 0x2889, 0xe147, 0x187b, 0x0, 0x0);
        gbc.writeMem(0xbd5f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6778);
        EXPECT(gbc.pc(), 0xbd60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5f), 0x8b);
        // 8B 02D3
        gbc.setState(0x48eb, 0xf9c5, 0x64c0, 0xb37f, 0x261e, 0x77ae, 0x0, 0x0);
        gbc.writeMem(0x48eb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf9c5);
        EXPECT(gbc.pc(), 0x48ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02D4
        gbc.setState(0xbf5e, 0x9f19, 0xd9f0, 0xcc52, 0x6232, 0xd776, 0x1, 0x0);
        gbc.writeMem(0xbf5e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9f19);
        EXPECT(gbc.pc(), 0xbf5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5e), 0x8b);
        // 8B 02D5
        gbc.setState(0x6f01, 0x9130, 0xdbd0, 0x1626, 0x737b, 0x333, 0x1, 0x0);
        gbc.writeMem(0x6f01, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9130);
        EXPECT(gbc.pc(), 0x6f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02D6
        gbc.setState(0x92c0, 0xd74f, 0xc150, 0x77fe, 0x6790, 0xc446, 0x0, 0x0);
        gbc.writeMem(0x92c0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd74f);
        EXPECT(gbc.pc(), 0x92c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c0), 0x8b);
        // 8B 02D7
        gbc.setState(0xca0f, 0xe015, 0x6d50, 0x33ea, 0xb378, 0xc67a, 0x0, 0x1);
        gbc.writeMem(0xca0f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe015);
        EXPECT(gbc.pc(), 0xca10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca0f), 0x8b);
        // 8B 02D8
        gbc.setState(0xc563, 0x4c6c, 0x8550, 0x9bc1, 0x976d, 0x46de, 0x1, 0x1);
        gbc.writeMem(0xc563, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4c6c);
        EXPECT(gbc.pc(), 0xc564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc563), 0x8b);
        // 8B 02D9
        gbc.setState(0x31b8, 0x4ff1, 0x4c30, 0x118e, 0xf064, 0x16fe, 0x1, 0x1);
        gbc.writeMem(0x31b8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4ff1);
        EXPECT(gbc.pc(), 0x31b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02DA
        gbc.setState(0x2fd9, 0x3a33, 0x2600, 0x94f0, 0xe718, 0xaad9, 0x1, 0x1);
        gbc.writeMem(0x2fd9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3a33);
        EXPECT(gbc.pc(), 0x2fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02DB
        gbc.setState(0x7bc9, 0x91ef, 0x27a0, 0xa0bf, 0x6fbf, 0xbed0, 0x0, 0x0);
        gbc.writeMem(0x7bc9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x91ef);
        EXPECT(gbc.pc(), 0x7bca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02DC
        gbc.setState(0x7cc, 0x1614, 0x3590, 0x23f6, 0xe7d2, 0x670a, 0x0, 0x0);
        gbc.writeMem(0x7cc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1614);
        EXPECT(gbc.pc(), 0x7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02DD
        gbc.setState(0xbb3f, 0xff02, 0x4d10, 0xe0bc, 0xd932, 0xa323, 0x1, 0x1);
        gbc.writeMem(0xbb3f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xff02);
        EXPECT(gbc.pc(), 0xbb40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3f), 0x8b);
        // 8B 02DE
        gbc.setState(0x895d, 0xf096, 0xe9a0, 0xd964, 0x595c, 0x24bb, 0x1, 0x1);
        gbc.writeMem(0x895d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf096);
        EXPECT(gbc.pc(), 0x895e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895d), 0x8b);
        // 8B 02DF
        gbc.setState(0x381, 0xfec9, 0x2910, 0xcdb, 0x5785, 0x111f, 0x0, 0x0);
        gbc.writeMem(0x381, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xfec9);
        EXPECT(gbc.pc(), 0x382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02E0
        gbc.setState(0xb8f3, 0xf978, 0xe2d0, 0xc31e, 0xd9bf, 0x403d, 0x0, 0x1);
        gbc.writeMem(0xb8f3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf978);
        EXPECT(gbc.pc(), 0xb8f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f3), 0x8b);
        // 8B 02E1
        gbc.setState(0x6a98, 0xb72c, 0xd2f0, 0xf8d9, 0xa968, 0x9b6f, 0x1, 0x1);
        gbc.writeMem(0x6a98, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb72c);
        EXPECT(gbc.pc(), 0x6a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02E2
        gbc.setState(0x75ac, 0x3271, 0x8c90, 0x76ad, 0x87f7, 0x769d, 0x1, 0x1);
        gbc.writeMem(0x75ac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3271);
        EXPECT(gbc.pc(), 0x75ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02E3
        gbc.setState(0x991e, 0x8eb, 0x7b10, 0xb32a, 0x6fb3, 0x36d4, 0x1, 0x0);
        gbc.writeMem(0x991e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8eb);
        EXPECT(gbc.pc(), 0x991f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991e), 0x8b);
        // 8B 02E4
        gbc.setState(0x16e5, 0x9a33, 0x98e0, 0xb56e, 0xf2a4, 0x715d, 0x0, 0x0);
        gbc.writeMem(0x16e5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9a33);
        EXPECT(gbc.pc(), 0x16e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02E5
        gbc.setState(0xbd69, 0x8fcf, 0x3f80, 0x607f, 0x1f8d, 0x57af, 0x0, 0x1);
        gbc.writeMem(0xbd69, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8fcf);
        EXPECT(gbc.pc(), 0xbd6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd69), 0x8b);
        // 8B 02E6
        gbc.setState(0x1196, 0x6f60, 0x5650, 0x6124, 0xe4a9, 0x6f09, 0x0, 0x1);
        gbc.writeMem(0x1196, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6f60);
        EXPECT(gbc.pc(), 0x1197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02E7
        gbc.setState(0xdb27, 0x9fba, 0x5020, 0x8ff9, 0x2f1, 0xf577, 0x0, 0x0);
        gbc.writeMem(0xdb27, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9fba);
        EXPECT(gbc.pc(), 0xdb28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb27), 0x8b);
        // 8B 02E8
        gbc.setState(0xe23b, 0x377a, 0x4220, 0xc61, 0x9d4e, 0xae2b, 0x0, 0x1);
        gbc.writeMem(0xe23b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x377a);
        EXPECT(gbc.pc(), 0xe23c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe23b), 0x8b);
        // 8B 02E9
        gbc.setState(0xade, 0xbede, 0x5d50, 0xd61a, 0xf990, 0xa411, 0x0, 0x0);
        gbc.writeMem(0xade, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbede);
        EXPECT(gbc.pc(), 0xadf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02EA
        gbc.setState(0x8410, 0x777c, 0xd9e0, 0x9649, 0x2435, 0xfb4d, 0x1, 0x0);
        gbc.writeMem(0x8410, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x777c);
        EXPECT(gbc.pc(), 0x8411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8410), 0x8b);
        // 8B 02EB
        gbc.setState(0xed5b, 0x50b9, 0xdba0, 0xdb66, 0xfed9, 0xce8f, 0x1, 0x1);
        gbc.writeMem(0xed5b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x50b9);
        EXPECT(gbc.pc(), 0xed5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed5b), 0x8b);
        // 8B 02EC
        gbc.setState(0x10f6, 0xe09f, 0xa7f0, 0x8d69, 0x5b37, 0xce3e, 0x1, 0x0);
        gbc.writeMem(0x10f6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe09f);
        EXPECT(gbc.pc(), 0x10f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02ED
        gbc.setState(0x7b0f, 0x3acb, 0x8560, 0x80f4, 0xc17a, 0x348b, 0x0, 0x0);
        gbc.writeMem(0x7b0f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3acb);
        EXPECT(gbc.pc(), 0x7b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02EF
        gbc.setState(0xc33, 0x4357, 0x7450, 0x42fd, 0xf2cf, 0x72c5, 0x0, 0x0);
        gbc.writeMem(0xc33, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4357);
        EXPECT(gbc.pc(), 0xc34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 02F0
        gbc.setState(0x6d3d, 0x22b0, 0x250, 0x1ecf, 0x9c9c, 0xb334, 0x0, 0x0);
        gbc.writeMem(0x6d3d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x22b0);
        EXPECT(gbc.pc(), 0x6d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02F1
        gbc.setState(0xe1e2, 0x9c7e, 0x92e0, 0xe322, 0x2d99, 0xa1fa, 0x0, 0x1);
        gbc.writeMem(0xe1e2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9c7e);
        EXPECT(gbc.pc(), 0xe1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e2), 0x8b);
        // 8B 02F2
        gbc.setState(0x2f8e, 0xc9a9, 0xd170, 0x8265, 0x1b62, 0x6270, 0x0, 0x0);
        gbc.writeMem(0x2f8e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc9a9);
        EXPECT(gbc.pc(), 0x2f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02F3
        gbc.setState(0x5cdc, 0x11d2, 0x44b0, 0x8fbd, 0x9a6, 0x7458, 0x0, 0x1);
        gbc.writeMem(0x5cdc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x11d2);
        EXPECT(gbc.pc(), 0x5cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 02F4
        gbc.setState(0xd3b0, 0x6f24, 0x9cc0, 0xaa32, 0x7bd0, 0xfbaf, 0x0, 0x0);
        gbc.writeMem(0xd3b0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6f24);
        EXPECT(gbc.pc(), 0xd3b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3b0), 0x8b);
        // 8B 02F5
        gbc.setState(0xe926, 0x6e0c, 0x66e0, 0x6542, 0x9199, 0x9b77, 0x0, 0x0);
        gbc.writeMem(0xe926, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6e0c);
        EXPECT(gbc.pc(), 0xe927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe926), 0x8b);
        // 8B 02F6
        gbc.setState(0x73de, 0x96e5, 0x1e0, 0xe4d, 0xab2f, 0x76c0, 0x0, 0x1);
        gbc.writeMem(0x73de, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x96e5);
        EXPECT(gbc.pc(), 0x73df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02F7
        gbc.setState(0xa13d, 0x357f, 0xa1d0, 0xe486, 0x34b5, 0x671b, 0x1, 0x0);
        gbc.writeMem(0xa13d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x357f);
        EXPECT(gbc.pc(), 0xa13e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa13d), 0x8b);
        // 8B 02F8
        gbc.setState(0x9414, 0x75ce, 0x9680, 0xe782, 0xa372, 0xcbe8, 0x0, 0x1);
        gbc.writeMem(0x9414, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x75ce);
        EXPECT(gbc.pc(), 0x9415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9414), 0x8b);
        // 8B 02FB
        gbc.setState(0x4873, 0x7cdc, 0x2e50, 0x12c0, 0x2e01, 0x6466, 0x0, 0x0);
        gbc.writeMem(0x4873, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7cdc);
        EXPECT(gbc.pc(), 0x4874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02FC
        gbc.setState(0x5276, 0x3ae3, 0x1770, 0xdd51, 0x5819, 0xbbf3, 0x0, 0x1);
        gbc.writeMem(0x5276, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3ae3);
        EXPECT(gbc.pc(), 0x5277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 02FD
        gbc.setState(0xb006, 0x817c, 0x3230, 0x529a, 0xeeaf, 0xa8f9, 0x0, 0x1);
        gbc.writeMem(0xb006, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x817c);
        EXPECT(gbc.pc(), 0xb007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb006), 0x8b);
        // 8B 02FE
        gbc.setState(0x75a7, 0xad0, 0xeb40, 0x15ff, 0x8760, 0x4e41, 0x1, 0x1);
        gbc.writeMem(0x75a7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xad0);
        EXPECT(gbc.pc(), 0x75a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 02FF
        gbc.setState(0x9e0f, 0x4dd8, 0x0, 0x5d20, 0x26ea, 0xdfb8, 0x1, 0x1);
        gbc.writeMem(0x9e0f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4dd8);
        EXPECT(gbc.pc(), 0x9e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e0f), 0x8b);
        // 8B 0300
        gbc.setState(0xe402, 0x2d2d, 0x81e0, 0xaded, 0xf675, 0xb443, 0x0, 0x1);
        gbc.writeMem(0xe402, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2d2d);
        EXPECT(gbc.pc(), 0xe403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe402), 0x8b);
        // 8B 0301
        gbc.setState(0xb30, 0x53fe, 0xea40, 0xf162, 0x1995, 0xbad6, 0x1, 0x1);
        gbc.writeMem(0xb30, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x53fe);
        EXPECT(gbc.pc(), 0xb31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0302
        gbc.setState(0x820d, 0xf75c, 0xe400, 0x9055, 0x5924, 0xb798, 0x0, 0x0);
        gbc.writeMem(0x820d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf75c);
        EXPECT(gbc.pc(), 0x820e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x820d), 0x8b);
        // 8B 0303
        gbc.setState(0xdce3, 0xb3a9, 0x5560, 0x7294, 0xc34e, 0xe87f, 0x1, 0x0);
        gbc.writeMem(0xdce3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb3a9);
        EXPECT(gbc.pc(), 0xdce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce3), 0x8b);
        // 8B 0304
        gbc.setState(0x6c9e, 0xf46f, 0x6ce0, 0xe7e4, 0xb988, 0x256b, 0x0, 0x0);
        gbc.writeMem(0x6c9e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf46f);
        EXPECT(gbc.pc(), 0x6c9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0305
        gbc.setState(0x3b3c, 0x2545, 0x3370, 0x785d, 0x77d9, 0xce67, 0x0, 0x0);
        gbc.writeMem(0x3b3c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2545);
        EXPECT(gbc.pc(), 0x3b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0306
        gbc.setState(0x853e, 0x5af6, 0xd370, 0x87bf, 0x62e5, 0x894, 0x0, 0x1);
        gbc.writeMem(0x853e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5af6);
        EXPECT(gbc.pc(), 0x853f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853e), 0x8b);
        // 8B 0307
        gbc.setState(0xeac2, 0xf3d, 0x9a60, 0x2366, 0x2db3, 0x510c, 0x1, 0x1);
        gbc.writeMem(0xeac2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf3d);
        EXPECT(gbc.pc(), 0xeac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac2), 0x8b);
        // 8B 0308
        gbc.setState(0x596f, 0xf4d6, 0x72c0, 0x8f00, 0x905e, 0x3f54, 0x1, 0x0);
        gbc.writeMem(0x596f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf4d6);
        EXPECT(gbc.pc(), 0x5970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0309
        gbc.setState(0x41f5, 0xdef, 0x3280, 0xd3e0, 0xa8aa, 0xf9a8, 0x0, 0x0);
        gbc.writeMem(0x41f5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdef);
        EXPECT(gbc.pc(), 0x41f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 030A
        gbc.setState(0x6065, 0x6c32, 0xdd20, 0xc723, 0x588b, 0x8e9b, 0x1, 0x0);
        gbc.writeMem(0x6065, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6c32);
        EXPECT(gbc.pc(), 0x6066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 030B
        gbc.setState(0x113, 0x27b6, 0x1c40, 0xf8dc, 0x76a2, 0xaf27, 0x0, 0x1);
        gbc.writeMem(0x113, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x27b6);
        EXPECT(gbc.pc(), 0x114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 030C
        gbc.setState(0xa53a, 0x6d8d, 0xfd0, 0x623, 0x6424, 0xafa3, 0x0, 0x0);
        gbc.writeMem(0xa53a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6d8d);
        EXPECT(gbc.pc(), 0xa53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53a), 0x8b);
        // 8B 030D
        gbc.setState(0x7fcc, 0x265, 0x8f50, 0x8ba8, 0x9cde, 0x25dd, 0x0, 0x1);
        gbc.writeMem(0x7fcc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x265);
        EXPECT(gbc.pc(), 0x7fcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 030E
        gbc.setState(0x7c9e, 0xed20, 0x870, 0x7ab8, 0xb07b, 0xfac0, 0x1, 0x1);
        gbc.writeMem(0x7c9e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xed20);
        EXPECT(gbc.pc(), 0x7c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 030F
        gbc.setState(0x3862, 0xe416, 0xaf0, 0x252c, 0x4548, 0xadee, 0x1, 0x1);
        gbc.writeMem(0x3862, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe416);
        EXPECT(gbc.pc(), 0x3863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0311
        gbc.setState(0xb110, 0x4f54, 0x65f0, 0xebfe, 0x6a33, 0xec4a, 0x1, 0x1);
        gbc.writeMem(0xb110, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4f54);
        EXPECT(gbc.pc(), 0xb111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb110), 0x8b);
        // 8B 0312
        gbc.setState(0x42fb, 0xb6ce, 0x6a0, 0x8a17, 0x3ad0, 0xd60e, 0x0, 0x1);
        gbc.writeMem(0x42fb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb6ce);
        EXPECT(gbc.pc(), 0x42fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0313
        gbc.setState(0x18b2, 0x5770, 0xc6e0, 0x435a, 0x6a6, 0x716e, 0x1, 0x1);
        gbc.writeMem(0x18b2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5770);
        EXPECT(gbc.pc(), 0x18b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0314
        gbc.setState(0xc7fa, 0x6a48, 0x64a0, 0x9e8, 0xf419, 0x7934, 0x1, 0x0);
        gbc.writeMem(0xc7fa, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6a48);
        EXPECT(gbc.pc(), 0xc7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fa), 0x8b);
        // 8B 0315
        gbc.setState(0x25fd, 0xa39e, 0xfe0, 0x61a9, 0xbfed, 0x5f2c, 0x1, 0x0);
        gbc.writeMem(0x25fd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa39e);
        EXPECT(gbc.pc(), 0x25fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0316
        gbc.setState(0x6cf, 0x57fc, 0xffa0, 0x7d98, 0xaa7d, 0x8148, 0x1, 0x1);
        gbc.writeMem(0x6cf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x57fc);
        EXPECT(gbc.pc(), 0x6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0317
        gbc.setState(0x578d, 0xc206, 0x4cf0, 0x7397, 0xa58, 0x979b, 0x1, 0x1);
        gbc.writeMem(0x578d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc206);
        EXPECT(gbc.pc(), 0x578e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0318
        gbc.setState(0xc8fd, 0x9750, 0x2640, 0xe678, 0x2adc, 0xc777, 0x0, 0x1);
        gbc.writeMem(0xc8fd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9750);
        EXPECT(gbc.pc(), 0xc8fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fd), 0x8b);
        // 8B 0319
        gbc.setState(0x503d, 0x8dc5, 0x7b90, 0x16c5, 0x21df, 0x43a2, 0x1, 0x0);
        gbc.writeMem(0x503d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8dc5);
        EXPECT(gbc.pc(), 0x503e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 031A
        gbc.setState(0x4417, 0x51e9, 0x32d0, 0xb736, 0xa140, 0xd1d1, 0x1, 0x0);
        gbc.writeMem(0x4417, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x51e9);
        EXPECT(gbc.pc(), 0x4418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 031B
        gbc.setState(0x3b4c, 0xb957, 0xc060, 0xefab, 0x845, 0x17f7, 0x1, 0x0);
        gbc.writeMem(0x3b4c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb957);
        EXPECT(gbc.pc(), 0x3b4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 031C
        gbc.setState(0x222, 0x7df3, 0x1e80, 0xcd21, 0x1c4d, 0xf4bc, 0x1, 0x1);
        gbc.writeMem(0x222, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7df3);
        EXPECT(gbc.pc(), 0x223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 031D
        gbc.setState(0x730d, 0x1bc6, 0x62f0, 0xcd93, 0xa15f, 0xbccc, 0x1, 0x0);
        gbc.writeMem(0x730d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1bc6);
        EXPECT(gbc.pc(), 0x730e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 031E
        gbc.setState(0xdbd, 0xe35d, 0x79e0, 0x7544, 0xe1e6, 0x87eb, 0x0, 0x1);
        gbc.writeMem(0xdbd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe35d);
        EXPECT(gbc.pc(), 0xdbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 031F
        gbc.setState(0xe551, 0x599f, 0xb720, 0x68d5, 0xf014, 0xb6b3, 0x1, 0x1);
        gbc.writeMem(0xe551, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x599f);
        EXPECT(gbc.pc(), 0xe552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe551), 0x8b);
        // 8B 0320
        gbc.setState(0x2b8e, 0x25ab, 0x3b40, 0x2f33, 0xcf15, 0x7e8d, 0x0, 0x0);
        gbc.writeMem(0x2b8e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x25ab);
        EXPECT(gbc.pc(), 0x2b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0321
        gbc.setState(0x83a4, 0x2d8a, 0xe690, 0x134c, 0x9b24, 0x70d9, 0x1, 0x0);
        gbc.writeMem(0x83a4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2d8a);
        EXPECT(gbc.pc(), 0x83a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a4), 0x8b);
        // 8B 0322
        gbc.setState(0xa04, 0x1722, 0xb310, 0x9587, 0x2f4b, 0x1ebb, 0x0, 0x1);
        gbc.writeMem(0xa04, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1722);
        EXPECT(gbc.pc(), 0xa05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0323
        gbc.setState(0x283f, 0xa14e, 0x8230, 0x19fa, 0x6b37, 0x902f, 0x0, 0x0);
        gbc.writeMem(0x283f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa14e);
        EXPECT(gbc.pc(), 0x2840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0324
        gbc.setState(0x9e3e, 0x5c4c, 0xd6e0, 0x1f13, 0xf68f, 0xb04c, 0x0, 0x1);
        gbc.writeMem(0x9e3e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5c4c);
        EXPECT(gbc.pc(), 0x9e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3e), 0x8b);
        // 8B 0325
        gbc.setState(0x7738, 0xaaaa, 0xb390, 0xba2d, 0x60f8, 0xa304, 0x1, 0x1);
        gbc.writeMem(0x7738, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xaaaa);
        EXPECT(gbc.pc(), 0x7739);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0326
        gbc.setState(0x97b6, 0xde5e, 0x3240, 0x9e63, 0xe6d8, 0x82f5, 0x1, 0x1);
        gbc.writeMem(0x97b6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xde5e);
        EXPECT(gbc.pc(), 0x97b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b6), 0x8b);
        // 8B 0327
        gbc.setState(0x9143, 0x4733, 0x4c20, 0x4292, 0xe753, 0x4b27, 0x1, 0x1);
        gbc.writeMem(0x9143, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4733);
        EXPECT(gbc.pc(), 0x9144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9143), 0x8b);
        // 8B 0328
        gbc.setState(0x2204, 0x9a81, 0x98a0, 0x14dd, 0x4ab2, 0x1d59, 0x1, 0x0);
        gbc.writeMem(0x2204, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9a81);
        EXPECT(gbc.pc(), 0x2205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0329
        gbc.setState(0xd460, 0x7f36, 0xc320, 0x7b74, 0x8bd4, 0xfc8e, 0x1, 0x0);
        gbc.writeMem(0xd460, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7f36);
        EXPECT(gbc.pc(), 0xd461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd460), 0x8b);
        // 8B 032A
        gbc.setState(0x7ac8, 0x8986, 0x8860, 0xf306, 0x47a4, 0xdbf4, 0x1, 0x0);
        gbc.writeMem(0x7ac8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8986);
        EXPECT(gbc.pc(), 0x7ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 032B
        gbc.setState(0x2cdd, 0x6011, 0x9da0, 0x88c1, 0xb335, 0x1795, 0x1, 0x0);
        gbc.writeMem(0x2cdd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6011);
        EXPECT(gbc.pc(), 0x2cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 032C
        gbc.setState(0x7c8e, 0x4cfc, 0xce40, 0xe602, 0x8174, 0x19d5, 0x1, 0x1);
        gbc.writeMem(0x7c8e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4cfc);
        EXPECT(gbc.pc(), 0x7c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 032D
        gbc.setState(0xda27, 0x1e22, 0xb300, 0xc111, 0x644c, 0x8dde, 0x1, 0x0);
        gbc.writeMem(0xda27, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1e22);
        EXPECT(gbc.pc(), 0xda28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda27), 0x8b);
        // 8B 032E
        gbc.setState(0x193c, 0x5d8b, 0xa190, 0xb9b8, 0x6152, 0xc411, 0x0, 0x0);
        gbc.writeMem(0x193c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5d8b);
        EXPECT(gbc.pc(), 0x193d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 032F
        gbc.setState(0x3ca7, 0xf594, 0xc5e0, 0x379, 0x3f8c, 0xbd44, 0x1, 0x1);
        gbc.writeMem(0x3ca7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf594);
        EXPECT(gbc.pc(), 0x3ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0330
        gbc.setState(0xbe70, 0x6acc, 0xd90, 0x836e, 0xf20c, 0x461b, 0x1, 0x0);
        gbc.writeMem(0xbe70, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6acc);
        EXPECT(gbc.pc(), 0xbe71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe70), 0x8b);
        // 8B 0331
        gbc.setState(0x4f3a, 0x9016, 0x1490, 0xde17, 0xb80d, 0x43cd, 0x1, 0x1);
        gbc.writeMem(0x4f3a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9016);
        EXPECT(gbc.pc(), 0x4f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0332
        gbc.setState(0x713d, 0x68a0, 0x78f0, 0x309f, 0xcfc7, 0xa42b, 0x0, 0x1);
        gbc.writeMem(0x713d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x68a0);
        EXPECT(gbc.pc(), 0x713e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0333
        gbc.setState(0x5484, 0xf8b5, 0x95f0, 0xa3d3, 0xb6f2, 0x29b5, 0x0, 0x1);
        gbc.writeMem(0x5484, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf8b5);
        EXPECT(gbc.pc(), 0x5485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0334
        gbc.setState(0xd70a, 0xcae5, 0xa610, 0x7148, 0x77d8, 0x8faf, 0x0, 0x0);
        gbc.writeMem(0xd70a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcae5);
        EXPECT(gbc.pc(), 0xd70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd70a), 0x8b);
        // 8B 0335
        gbc.setState(0xcbad, 0x1ab1, 0x3d80, 0xb6fd, 0x5964, 0xb6cf, 0x0, 0x1);
        gbc.writeMem(0xcbad, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1ab1);
        EXPECT(gbc.pc(), 0xcbae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbad), 0x8b);
        // 8B 0336
        gbc.setState(0xbe7a, 0x6be, 0xb6d0, 0xac1e, 0x623b, 0x2bec, 0x1, 0x0);
        gbc.writeMem(0xbe7a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6be);
        EXPECT(gbc.pc(), 0xbe7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7a), 0x8b);
        // 8B 0338
        gbc.setState(0x91cd, 0x5c75, 0x8380, 0x7a44, 0xda66, 0xab55, 0x0, 0x0);
        gbc.writeMem(0x91cd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5c75);
        EXPECT(gbc.pc(), 0x91ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cd), 0x8b);
        // 8B 0339
        gbc.setState(0xc304, 0xc0a6, 0x6e00, 0xe55a, 0x7829, 0xef24, 0x1, 0x0);
        gbc.writeMem(0xc304, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc0a6);
        EXPECT(gbc.pc(), 0xc305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc304), 0x8b);
        // 8B 033A
        gbc.setState(0xe598, 0xe2b6, 0x3350, 0x49f8, 0xec81, 0x4ab6, 0x1, 0x1);
        gbc.writeMem(0xe598, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe2b6);
        EXPECT(gbc.pc(), 0xe599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe598), 0x8b);
        // 8B 033B
        gbc.setState(0x4bb2, 0xe19f, 0x310, 0x1ce0, 0xa7dc, 0x7087, 0x1, 0x1);
        gbc.writeMem(0x4bb2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe19f);
        EXPECT(gbc.pc(), 0x4bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 033D
        gbc.setState(0xc29a, 0xaa89, 0x3ca0, 0x625f, 0xe5ab, 0x50fc, 0x0, 0x1);
        gbc.writeMem(0xc29a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaa89);
        EXPECT(gbc.pc(), 0xc29b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc29a), 0x8b);
        // 8B 033E
        gbc.setState(0xe3de, 0x40f, 0xb2e0, 0xe8a9, 0x330c, 0x2082, 0x1, 0x1);
        gbc.writeMem(0xe3de, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x40f);
        EXPECT(gbc.pc(), 0xe3df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3de), 0x8b);
        // 8B 033F
        gbc.setState(0x1795, 0x6bf1, 0x7a10, 0x7baa, 0xf5a2, 0x1b59, 0x0, 0x0);
        gbc.writeMem(0x1795, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6bf1);
        EXPECT(gbc.pc(), 0x1796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0340
        gbc.setState(0x7a0f, 0x5dcc, 0x93b0, 0x5000, 0xe970, 0x65ae, 0x1, 0x0);
        gbc.writeMem(0x7a0f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5dcc);
        EXPECT(gbc.pc(), 0x7a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0341
        gbc.setState(0xded9, 0x7c14, 0x7890, 0x3c5, 0x242b, 0xb7ee, 0x1, 0x1);
        gbc.writeMem(0xded9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7c14);
        EXPECT(gbc.pc(), 0xdeda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded9), 0x8b);
        // 8B 0342
        gbc.setState(0x769d, 0x1e10, 0xf850, 0x75f7, 0x7e86, 0x30ba, 0x0, 0x1);
        gbc.writeMem(0x769d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1e10);
        EXPECT(gbc.pc(), 0x769e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0343
        gbc.setState(0xd2e2, 0x103f, 0xad90, 0x78d0, 0xe7d5, 0x8433, 0x0, 0x0);
        gbc.writeMem(0xd2e2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x103f);
        EXPECT(gbc.pc(), 0xd2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e2), 0x8b);
        // 8B 0344
        gbc.setState(0x93e9, 0xdca8, 0x8840, 0xbaed, 0xb6ab, 0xa00e, 0x1, 0x0);
        gbc.writeMem(0x93e9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xdca8);
        EXPECT(gbc.pc(), 0x93ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e9), 0x8b);
        // 8B 0345
        gbc.setState(0x9ad1, 0xfe3, 0x5d90, 0xcf22, 0xbc4c, 0xffe8, 0x1, 0x1);
        gbc.writeMem(0x9ad1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xfe3);
        EXPECT(gbc.pc(), 0x9ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad1), 0x8b);
        // 8B 0346
        gbc.setState(0x1613, 0x2555, 0x8270, 0x752d, 0x2411, 0x1c60, 0x0, 0x0);
        gbc.writeMem(0x1613, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2555);
        EXPECT(gbc.pc(), 0x1614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0347
        gbc.setState(0x116e, 0x90f1, 0xcfd0, 0xd22d, 0x63a8, 0x8a0f, 0x1, 0x1);
        gbc.writeMem(0x116e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x90f1);
        EXPECT(gbc.pc(), 0x116f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0348
        gbc.setState(0x9aa3, 0x87e, 0x8970, 0xb113, 0x4b0d, 0xd3f6, 0x1, 0x0);
        gbc.writeMem(0x9aa3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x87e);
        EXPECT(gbc.pc(), 0x9aa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa3), 0x8b);
        // 8B 0349
        gbc.setState(0x5a16, 0xc982, 0x7640, 0xbe9e, 0x9418, 0x3a65, 0x1, 0x0);
        gbc.writeMem(0x5a16, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc982);
        EXPECT(gbc.pc(), 0x5a17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 034A
        gbc.setState(0x4fca, 0x5bac, 0x4420, 0x4c3c, 0x9bc6, 0xe60f, 0x0, 0x0);
        gbc.writeMem(0x4fca, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5bac);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 034B
        gbc.setState(0x2d72, 0x6fcf, 0xe470, 0x89a0, 0x17f7, 0xd65f, 0x0, 0x1);
        gbc.writeMem(0x2d72, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6fcf);
        EXPECT(gbc.pc(), 0x2d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 034C
        gbc.setState(0xcfdb, 0xeb05, 0x8490, 0xbc6f, 0x9f14, 0xa387, 0x1, 0x0);
        gbc.writeMem(0xcfdb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xeb05);
        EXPECT(gbc.pc(), 0xcfdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfdb), 0x8b);
        // 8B 034D
        gbc.setState(0xb33c, 0x65bd, 0xde60, 0xc312, 0x24d8, 0xb9a1, 0x0, 0x1);
        gbc.writeMem(0xb33c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x65bd);
        EXPECT(gbc.pc(), 0xb33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb33c), 0x8b);
        // 8B 034F
        gbc.setState(0x778d, 0xd4ae, 0xc510, 0xb9f2, 0xb2e8, 0xda65, 0x1, 0x0);
        gbc.writeMem(0x778d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd4ae);
        EXPECT(gbc.pc(), 0x778e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0350
        gbc.setState(0x3a75, 0x6bbb, 0x180, 0x4c34, 0x925d, 0x9432, 0x0, 0x1);
        gbc.writeMem(0x3a75, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6bbb);
        EXPECT(gbc.pc(), 0x3a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0351
        gbc.setState(0x6f3c, 0x75da, 0x3aa0, 0x9974, 0xfee, 0x7d71, 0x0, 0x0);
        gbc.writeMem(0x6f3c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x75da);
        EXPECT(gbc.pc(), 0x6f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0352
        gbc.setState(0x2ea5, 0xce60, 0x8700, 0x614b, 0xb62f, 0xbda, 0x0, 0x0);
        gbc.writeMem(0x2ea5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xce60);
        EXPECT(gbc.pc(), 0x2ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0353
        gbc.setState(0x231f, 0x96ea, 0x4280, 0xefe0, 0xfea1, 0x2fc, 0x0, 0x1);
        gbc.writeMem(0x231f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x96ea);
        EXPECT(gbc.pc(), 0x2320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0354
        gbc.setState(0xe902, 0xac55, 0xf6b0, 0xb437, 0x43d1, 0x96e6, 0x1, 0x1);
        gbc.writeMem(0xe902, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xac55);
        EXPECT(gbc.pc(), 0xe903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe902), 0x8b);
        // 8B 0355
        gbc.setState(0x78fc, 0x6682, 0x6be0, 0x64d2, 0x464d, 0xb742, 0x1, 0x1);
        gbc.writeMem(0x78fc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6682);
        EXPECT(gbc.pc(), 0x78fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0356
        gbc.setState(0x79cf, 0x17b2, 0xe490, 0x4d1d, 0xb893, 0x5f1b, 0x0, 0x0);
        gbc.writeMem(0x79cf, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x17b2);
        EXPECT(gbc.pc(), 0x79d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0357
        gbc.setState(0xb058, 0x750f, 0x7070, 0x8d8b, 0xafdb, 0x1aee, 0x1, 0x1);
        gbc.writeMem(0xb058, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x750f);
        EXPECT(gbc.pc(), 0xb059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb058), 0x8b);
        // 8B 0358
        gbc.setState(0x607, 0x1f57, 0x4af0, 0x7cab, 0xc78, 0xdb70, 0x0, 0x0);
        gbc.writeMem(0x607, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1f57);
        EXPECT(gbc.pc(), 0x608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0359
        gbc.setState(0xa7b3, 0x5c72, 0xbc30, 0xf74d, 0x2a63, 0x56f4, 0x0, 0x0);
        gbc.writeMem(0xa7b3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5c72);
        EXPECT(gbc.pc(), 0xa7b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7b3), 0x8b);
        // 8B 035A
        gbc.setState(0x1e1d, 0xedd7, 0xba90, 0x1cd2, 0xc209, 0x8a97, 0x0, 0x1);
        gbc.writeMem(0x1e1d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xedd7);
        EXPECT(gbc.pc(), 0x1e1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 035B
        gbc.setState(0x81fc, 0xb83e, 0x1ea0, 0xa004, 0x9546, 0x9bea, 0x1, 0x1);
        gbc.writeMem(0x81fc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb83e);
        EXPECT(gbc.pc(), 0x81fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fc), 0x8b);
        // 8B 035C
        gbc.setState(0x4582, 0x60ce, 0x77e0, 0xcc07, 0x9ede, 0x9c3e, 0x0, 0x0);
        gbc.writeMem(0x4582, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x60ce);
        EXPECT(gbc.pc(), 0x4583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 035D
        gbc.setState(0x51b1, 0xa824, 0x7180, 0x2c61, 0xce7, 0x69c5, 0x0, 0x1);
        gbc.writeMem(0x51b1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa824);
        EXPECT(gbc.pc(), 0x51b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 035E
        gbc.setState(0xef75, 0xdef5, 0xc710, 0x1d29, 0xf5b8, 0xd841, 0x0, 0x0);
        gbc.writeMem(0xef75, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdef5);
        EXPECT(gbc.pc(), 0xef76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef75), 0x8b);
        // 8B 035F
        gbc.setState(0xe852, 0x8fb3, 0xef60, 0xd84c, 0x2ee7, 0xef65, 0x0, 0x0);
        gbc.writeMem(0xe852, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8fb3);
        EXPECT(gbc.pc(), 0xe853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe852), 0x8b);
        // 8B 0360
        gbc.setState(0x8b55, 0xbb26, 0xaf50, 0xc16d, 0xb550, 0xed1a, 0x1, 0x0);
        gbc.writeMem(0x8b55, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbb26);
        EXPECT(gbc.pc(), 0x8b56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b55), 0x8b);
        // 8B 0363
        gbc.setState(0x7ef7, 0xbfba, 0x7fe0, 0x6061, 0xea6c, 0x9058, 0x0, 0x0);
        gbc.writeMem(0x7ef7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbfba);
        EXPECT(gbc.pc(), 0x7ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0364
        gbc.setState(0xc3b9, 0x3fc5, 0x6070, 0x81c, 0x3ce7, 0xecdb, 0x0, 0x1);
        gbc.writeMem(0xc3b9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3fc5);
        EXPECT(gbc.pc(), 0xc3ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3b9), 0x8b);
        // 8B 0365
        gbc.setState(0xa8f7, 0x8473, 0x1500, 0x4f88, 0xc983, 0x6a0f, 0x0, 0x0);
        gbc.writeMem(0xa8f7, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8473);
        EXPECT(gbc.pc(), 0xa8f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f7), 0x8b);
        // 8B 0366
        gbc.setState(0x74d9, 0x97c0, 0x78c0, 0xbaeb, 0xfb31, 0x1b64, 0x1, 0x1);
        gbc.writeMem(0x74d9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x97c0);
        EXPECT(gbc.pc(), 0x74da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0367
        gbc.setState(0xe1b2, 0x80fb, 0x38c0, 0x86ec, 0x4b5d, 0x1a1a, 0x0, 0x1);
        gbc.writeMem(0xe1b2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x80fb);
        EXPECT(gbc.pc(), 0xe1b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b2), 0x8b);
        // 8B 0368
        gbc.setState(0x1d27, 0x7aad, 0xaf70, 0xef33, 0x2944, 0xadd1, 0x1, 0x0);
        gbc.writeMem(0x1d27, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7aad);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0369
        gbc.setState(0x9f7f, 0xc116, 0xe330, 0x8b9b, 0x51dd, 0xfc8a, 0x1, 0x1);
        gbc.writeMem(0x9f7f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc116);
        EXPECT(gbc.pc(), 0x9f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f7f), 0x8b);
        // 8B 036A
        gbc.setState(0xa955, 0x67b1, 0xfe0, 0x9d26, 0xa5, 0xc855, 0x0, 0x1);
        gbc.writeMem(0xa955, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x67b1);
        EXPECT(gbc.pc(), 0xa956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa955), 0x8b);
        // 8B 036B
        gbc.setState(0x6bfc, 0x4678, 0x7120, 0xb073, 0xa423, 0x26ad, 0x1, 0x0);
        gbc.writeMem(0x6bfc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4678);
        EXPECT(gbc.pc(), 0x6bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 036C
        gbc.setState(0x286c, 0xa95e, 0x2610, 0x1421, 0x1e68, 0xa8ee, 0x1, 0x0);
        gbc.writeMem(0x286c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa95e);
        EXPECT(gbc.pc(), 0x286d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 036D
        gbc.setState(0x24f0, 0xcb34, 0x3510, 0xbe78, 0x5a5b, 0x1748, 0x1, 0x0);
        gbc.writeMem(0x24f0, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcb34);
        EXPECT(gbc.pc(), 0x24f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 036E
        gbc.setState(0x3b5e, 0xe42b, 0x1170, 0x932d, 0xe738, 0x102b, 0x0, 0x1);
        gbc.writeMem(0x3b5e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe42b);
        EXPECT(gbc.pc(), 0x3b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0370
        gbc.setState(0x6947, 0x63cd, 0x2950, 0x83ed, 0x54b4, 0xa474, 0x1, 0x0);
        gbc.writeMem(0x6947, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x63cd);
        EXPECT(gbc.pc(), 0x6948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0371
        gbc.setState(0x1461, 0xca92, 0x55e0, 0x8ae7, 0x3858, 0x1d16, 0x1, 0x1);
        gbc.writeMem(0x1461, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xca92);
        EXPECT(gbc.pc(), 0x1462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0372
        gbc.setState(0x766b, 0x14ed, 0xb7a0, 0xa924, 0xf846, 0x8cfd, 0x0, 0x0);
        gbc.writeMem(0x766b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x14ed);
        EXPECT(gbc.pc(), 0x766c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0373
        gbc.setState(0x25c, 0xa389, 0xb450, 0xb9e, 0xb879, 0xee18, 0x1, 0x1);
        gbc.writeMem(0x25c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa389);
        EXPECT(gbc.pc(), 0x25d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0374
        gbc.setState(0x182c, 0x981d, 0x920, 0x21d, 0x494e, 0x265f, 0x1, 0x1);
        gbc.writeMem(0x182c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x981d);
        EXPECT(gbc.pc(), 0x182d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0375
        gbc.setState(0x3bd6, 0x8254, 0x7700, 0x9206, 0xd246, 0x99f6, 0x1, 0x1);
        gbc.writeMem(0x3bd6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8254);
        EXPECT(gbc.pc(), 0x3bd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0377
        gbc.setState(0x120a, 0x339, 0x1600, 0x8f99, 0xdbe7, 0xbb34, 0x1, 0x0);
        gbc.writeMem(0x120a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x339);
        EXPECT(gbc.pc(), 0x120b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0378
        gbc.setState(0xbf8, 0x9849, 0xc790, 0x4e56, 0x8e90, 0x9d78, 0x1, 0x0);
        gbc.writeMem(0xbf8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9849);
        EXPECT(gbc.pc(), 0xbf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0379
        gbc.setState(0x6539, 0xfed, 0xf8b0, 0x9656, 0x7045, 0xafd3, 0x1, 0x0);
        gbc.writeMem(0x6539, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfed);
        EXPECT(gbc.pc(), 0x653a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 037A
        gbc.setState(0x3b4d, 0x8e20, 0x4780, 0x828c, 0x2c7f, 0x86d7, 0x0, 0x1);
        gbc.writeMem(0x3b4d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8e20);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 037B
        gbc.setState(0xb04b, 0x85bf, 0x5d80, 0xb8c4, 0xaedd, 0x2384, 0x0, 0x1);
        gbc.writeMem(0xb04b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x85bf);
        EXPECT(gbc.pc(), 0xb04c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04b), 0x8b);
        // 8B 037C
        gbc.setState(0x210b, 0x732f, 0xecf0, 0x906e, 0xe21c, 0xec4e, 0x1, 0x1);
        gbc.writeMem(0x210b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x732f);
        EXPECT(gbc.pc(), 0x210c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 037D
        gbc.setState(0xf96, 0x3a85, 0xfa90, 0x5c61, 0x591c, 0x340c, 0x1, 0x0);
        gbc.writeMem(0xf96, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3a85);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 037F
        gbc.setState(0x4bf5, 0xf861, 0xaf30, 0xc15e, 0xcdc1, 0x773d, 0x0, 0x0);
        gbc.writeMem(0x4bf5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf861);
        EXPECT(gbc.pc(), 0x4bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0380
        gbc.setState(0xba7e, 0x168c, 0xf1f0, 0xedce, 0xb35d, 0xbc9a, 0x1, 0x0);
        gbc.writeMem(0xba7e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x168c);
        EXPECT(gbc.pc(), 0xba7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7e), 0x8b);
        // 8B 0381
        gbc.setState(0x350f, 0xbe1, 0x19c0, 0x3b1e, 0xc87b, 0x562e, 0x0, 0x1);
        gbc.writeMem(0x350f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbe1);
        EXPECT(gbc.pc(), 0x3510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0382
        gbc.setState(0x15bb, 0xf738, 0x9140, 0x6432, 0x8c4e, 0x13bb, 0x1, 0x0);
        gbc.writeMem(0x15bb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf738);
        EXPECT(gbc.pc(), 0x15bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0383
        gbc.setState(0x64d9, 0xe18a, 0x2100, 0xea, 0xc720, 0xfbae, 0x0, 0x0);
        gbc.writeMem(0x64d9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe18a);
        EXPECT(gbc.pc(), 0x64da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0384
        gbc.setState(0x62b9, 0x4f17, 0x2330, 0x295, 0xec88, 0xc029, 0x1, 0x1);
        gbc.writeMem(0x62b9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4f17);
        EXPECT(gbc.pc(), 0x62ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 0385
        gbc.setState(0x559f, 0x9a9c, 0x5cc0, 0xb6ec, 0xe085, 0xb143, 0x0, 0x1);
        gbc.writeMem(0x559f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9a9c);
        EXPECT(gbc.pc(), 0x55a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0386
        gbc.setState(0xdcbb, 0x430f, 0x57b0, 0xb3d9, 0x4d48, 0x5864, 0x1, 0x0);
        gbc.writeMem(0xdcbb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0xdcbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbb), 0x8b);
        // 8B 0387
        gbc.setState(0x7c0b, 0x4763, 0x4b30, 0xf493, 0x12c8, 0xb5ed, 0x0, 0x0);
        gbc.writeMem(0x7c0b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4763);
        EXPECT(gbc.pc(), 0x7c0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0388
        gbc.setState(0x112f, 0xd734, 0xc790, 0xff25, 0xc195, 0x7021, 0x1, 0x0);
        gbc.writeMem(0x112f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd734);
        EXPECT(gbc.pc(), 0x1130);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0389
        gbc.setState(0xa319, 0x6ef5, 0xd420, 0x5424, 0xcaf2, 0x2699, 0x1, 0x0);
        gbc.writeMem(0xa319, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6ef5);
        EXPECT(gbc.pc(), 0xa31a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa319), 0x8b);
        // 8B 038A
        gbc.setState(0x18bd, 0x5997, 0x9570, 0x1531, 0xd267, 0xbb34, 0x0, 0x1);
        gbc.writeMem(0x18bd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5997);
        EXPECT(gbc.pc(), 0x18be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 038B
        gbc.setState(0x3973, 0x4f3b, 0xd270, 0x720a, 0xf374, 0xb507, 0x0, 0x1);
        gbc.writeMem(0x3973, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4f3b);
        EXPECT(gbc.pc(), 0x3974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 038C
        gbc.setState(0xd5a4, 0x229c, 0x88b0, 0xa7d7, 0xe30b, 0x21b0, 0x1, 0x1);
        gbc.writeMem(0xd5a4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x229c);
        EXPECT(gbc.pc(), 0xd5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a4), 0x8b);
        // 8B 038D
        gbc.setState(0x26ed, 0xb0f3, 0x2970, 0xc24a, 0x4792, 0x7a21, 0x1, 0x0);
        gbc.writeMem(0x26ed, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb0f3);
        EXPECT(gbc.pc(), 0x26ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 038E
        gbc.setState(0xace, 0xfbf5, 0x41d0, 0x3853, 0xb558, 0x340d, 0x0, 0x1);
        gbc.writeMem(0xace, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfbf5);
        EXPECT(gbc.pc(), 0xacf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 038F
        gbc.setState(0xba8b, 0x96e6, 0xb1b0, 0x17f4, 0x5a0, 0xad80, 0x0, 0x1);
        gbc.writeMem(0xba8b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x96e6);
        EXPECT(gbc.pc(), 0xba8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba8b), 0x8b);
        // 8B 0390
        gbc.setState(0x3a58, 0xb663, 0xddc0, 0x2c9a, 0xcb36, 0xacc6, 0x1, 0x1);
        gbc.writeMem(0x3a58, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb663);
        EXPECT(gbc.pc(), 0x3a59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0391
        gbc.setState(0xda92, 0xcbe3, 0xd3b0, 0xf35b, 0xa761, 0x8425, 0x0, 0x0);
        gbc.writeMem(0xda92, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcbe3);
        EXPECT(gbc.pc(), 0xda93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda92), 0x8b);
        // 8B 0392
        gbc.setState(0x414d, 0x897, 0xc50, 0xf67d, 0xa68e, 0x592a, 0x1, 0x1);
        gbc.writeMem(0x414d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x897);
        EXPECT(gbc.pc(), 0x414e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0393
        gbc.setState(0x6bac, 0x7ed6, 0x65d0, 0x667c, 0x5f2c, 0x9f4d, 0x0, 0x0);
        gbc.writeMem(0x6bac, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7ed6);
        EXPECT(gbc.pc(), 0x6bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 0394
        gbc.setState(0x9844, 0xedb1, 0xa330, 0x4fd2, 0x90f6, 0x8983, 0x1, 0x1);
        gbc.writeMem(0x9844, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xedb1);
        EXPECT(gbc.pc(), 0x9845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9844), 0x8b);
        // 8B 0395
        gbc.setState(0x6615, 0xf6a6, 0xddf0, 0xcaf4, 0x13f4, 0x8594, 0x0, 0x0);
        gbc.writeMem(0x6615, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf6a6);
        EXPECT(gbc.pc(), 0x6616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 0398
        gbc.setState(0x5a2a, 0xde93, 0x93c0, 0xcf87, 0xb49b, 0xaed1, 0x0, 0x0);
        gbc.writeMem(0x5a2a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xde93);
        EXPECT(gbc.pc(), 0x5a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 0399
        gbc.setState(0xc8c4, 0x14d7, 0xb9b0, 0x87c6, 0xc4d1, 0x3d55, 0x0, 0x1);
        gbc.writeMem(0xc8c4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x14d7);
        EXPECT(gbc.pc(), 0xc8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c4), 0x8b);
        // 8B 039A
        gbc.setState(0x5ca6, 0xff2, 0xdd50, 0x5fc0, 0x4e63, 0xa6fc, 0x0, 0x0);
        gbc.writeMem(0x5ca6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xff2);
        EXPECT(gbc.pc(), 0x5ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 039B
        gbc.setState(0x82e8, 0xf4a4, 0x4020, 0x16e7, 0xe278, 0xec5, 0x0, 0x1);
        gbc.writeMem(0x82e8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf4a4);
        EXPECT(gbc.pc(), 0x82e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e8), 0x8b);
        // 8B 039C
        gbc.setState(0x98f9, 0xc33c, 0x62a0, 0x6dfb, 0x11f6, 0xe211, 0x1, 0x0);
        gbc.writeMem(0x98f9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc33c);
        EXPECT(gbc.pc(), 0x98fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f9), 0x8b);
        // 8B 039D
        gbc.setState(0xe14c, 0x13b3, 0xa5e0, 0x83ac, 0xd2a, 0x62ac, 0x1, 0x0);
        gbc.writeMem(0xe14c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x13b3);
        EXPECT(gbc.pc(), 0xe14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14c), 0x8b);
        // 8B 039E
        gbc.setState(0x7ec1, 0xdb8e, 0xcce0, 0x4112, 0x17b6, 0x5ac, 0x1, 0x1);
        gbc.writeMem(0x7ec1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdb8e);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 039F
        gbc.setState(0x763d, 0xf054, 0xbc60, 0x20b0, 0xf0c6, 0xaee4, 0x0, 0x0);
        gbc.writeMem(0x763d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf054);
        EXPECT(gbc.pc(), 0x763e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03A0
        gbc.setState(0xe652, 0x174f, 0xb480, 0xc58b, 0x77dc, 0xbc11, 0x1, 0x0);
        gbc.writeMem(0xe652, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x174f);
        EXPECT(gbc.pc(), 0xe653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe652), 0x8b);
        // 8B 03A1
        gbc.setState(0x4dcb, 0xcd1a, 0xe7c0, 0x5a99, 0x49c, 0x5005, 0x0, 0x0);
        gbc.writeMem(0x4dcb, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcd1a);
        EXPECT(gbc.pc(), 0x4dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03A2
        gbc.setState(0x14ba, 0x9b38, 0x8610, 0x53a2, 0x2be2, 0xee06, 0x0, 0x0);
        gbc.writeMem(0x14ba, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9b38);
        EXPECT(gbc.pc(), 0x14bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 03A3
        gbc.setState(0xe036, 0xd1ba, 0xb460, 0xa5d7, 0x76ef, 0x8fc, 0x0, 0x0);
        gbc.writeMem(0xe036, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd1ba);
        EXPECT(gbc.pc(), 0xe037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe036), 0x8b);
        // 8B 03A4
        gbc.setState(0xb606, 0x713e, 0x6e60, 0x11db, 0x3632, 0xae5a, 0x1, 0x0);
        gbc.writeMem(0xb606, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x713e);
        EXPECT(gbc.pc(), 0xb607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb606), 0x8b);
        // 8B 03A5
        gbc.setState(0xb8c4, 0x6de2, 0xffe0, 0x11f0, 0xb049, 0x9296, 0x0, 0x0);
        gbc.writeMem(0xb8c4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6de2);
        EXPECT(gbc.pc(), 0xb8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c4), 0x8b);
        // 8B 03A6
        gbc.setState(0xba30, 0x5f41, 0xb4a0, 0x6124, 0x52d3, 0xfe32, 0x1, 0x1);
        gbc.writeMem(0xba30, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5f41);
        EXPECT(gbc.pc(), 0xba31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba30), 0x8b);
        // 8B 03A7
        gbc.setState(0x920e, 0x3741, 0x9890, 0xb725, 0xce6b, 0x536d, 0x0, 0x0);
        gbc.writeMem(0x920e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3741);
        EXPECT(gbc.pc(), 0x920f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x920e), 0x8b);
        // 8B 03A8
        gbc.setState(0x7ad6, 0x5fd5, 0xfa50, 0x5237, 0xedb5, 0xb284, 0x1, 0x0);
        gbc.writeMem(0x7ad6, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5fd5);
        EXPECT(gbc.pc(), 0x7ad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03A9
        gbc.setState(0x8a68, 0x34d8, 0x6870, 0xe187, 0xd2cd, 0x9819, 0x0, 0x0);
        gbc.writeMem(0x8a68, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x34d8);
        EXPECT(gbc.pc(), 0x8a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a68), 0x8b);
        // 8B 03AA
        gbc.setState(0x82af, 0x43df, 0x44e0, 0x3792, 0xc5f3, 0xfcba, 0x1, 0x0);
        gbc.writeMem(0x82af, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x43df);
        EXPECT(gbc.pc(), 0x82b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82af), 0x8b);
        // 8B 03AB
        gbc.setState(0x76b3, 0xda62, 0x6310, 0x8d07, 0x76f1, 0xf4f0, 0x0, 0x0);
        gbc.writeMem(0x76b3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xda62);
        EXPECT(gbc.pc(), 0x76b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 03AC
        gbc.setState(0x3875, 0xbf51, 0xf9b0, 0x36fe, 0x6301, 0x8077, 0x1, 0x0);
        gbc.writeMem(0x3875, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbf51);
        EXPECT(gbc.pc(), 0x3876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03AD
        gbc.setState(0x1c8, 0x416a, 0x6730, 0x1fd0, 0x3146, 0xf0e8, 0x1, 0x1);
        gbc.writeMem(0x1c8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x416a);
        EXPECT(gbc.pc(), 0x1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03AE
        gbc.setState(0x6d17, 0xb96d, 0x2630, 0xd5c8, 0x7638, 0xde58, 0x1, 0x0);
        gbc.writeMem(0x6d17, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb96d);
        EXPECT(gbc.pc(), 0x6d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03AF
        gbc.setState(0x2f24, 0xcda0, 0x2dc0, 0x6b16, 0x2579, 0x416b, 0x1, 0x1);
        gbc.writeMem(0x2f24, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcda0);
        EXPECT(gbc.pc(), 0x2f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03B0
        gbc.setState(0x4387, 0x8d8c, 0x2cf0, 0xee73, 0x2148, 0x3a07, 0x1, 0x0);
        gbc.writeMem(0x4387, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8d8c);
        EXPECT(gbc.pc(), 0x4388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03B1
        gbc.setState(0xcb31, 0x81c4, 0xbcd0, 0x802d, 0x47f5, 0x3440, 0x0, 0x1);
        gbc.writeMem(0xcb31, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x81c4);
        EXPECT(gbc.pc(), 0xcb32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb31), 0x8b);
        // 8B 03B2
        gbc.setState(0x2c41, 0x5f91, 0xb450, 0xe52e, 0xf80f, 0x7aac, 0x1, 0x1);
        gbc.writeMem(0x2c41, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5f91);
        EXPECT(gbc.pc(), 0x2c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03B3
        gbc.setState(0xc0b5, 0xe3f3, 0xa1e0, 0x215d, 0x4f1c, 0x2d0b, 0x0, 0x1);
        gbc.writeMem(0xc0b5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe3f3);
        EXPECT(gbc.pc(), 0xc0b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b5), 0x8b);
        // 8B 03B4
        gbc.setState(0xc221, 0x91e2, 0x85e0, 0x4061, 0xdc9c, 0xb399, 0x1, 0x1);
        gbc.writeMem(0xc221, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x91e2);
        EXPECT(gbc.pc(), 0xc222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc221), 0x8b);
        // 8B 03B5
        gbc.setState(0xcb4, 0x596e, 0xfb80, 0x6986, 0xdaea, 0x91c8, 0x0, 0x1);
        gbc.writeMem(0xcb4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x596e);
        EXPECT(gbc.pc(), 0xcb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03B6
        gbc.setState(0x3441, 0xfaa9, 0x9d20, 0x22a0, 0xead, 0x9fac, 0x0, 0x1);
        gbc.writeMem(0x3441, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfaa9);
        EXPECT(gbc.pc(), 0x3442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03B7
        gbc.setState(0x6089, 0xf336, 0x7d50, 0x58a6, 0x6ddb, 0x80a4, 0x0, 0x0);
        gbc.writeMem(0x6089, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf336);
        EXPECT(gbc.pc(), 0x608a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03B8
        gbc.setState(0x8206, 0xe43d, 0xb8b0, 0x7a77, 0xf83e, 0xd358, 0x0, 0x1);
        gbc.writeMem(0x8206, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe43d);
        EXPECT(gbc.pc(), 0x8207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8206), 0x8b);
        // 8B 03B9
        gbc.setState(0x136d, 0x4234, 0xec40, 0xc4cc, 0x8149, 0xf694, 0x0, 0x0);
        gbc.writeMem(0x136d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4234);
        EXPECT(gbc.pc(), 0x136e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03BA
        gbc.setState(0x2ec5, 0x6d78, 0x9bf0, 0x422, 0xcc46, 0xf62c, 0x0, 0x1);
        gbc.writeMem(0x2ec5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6d78);
        EXPECT(gbc.pc(), 0x2ec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03BB
        gbc.setState(0x8cf3, 0x535e, 0xcfa0, 0x9422, 0x74fd, 0xa428, 0x0, 0x1);
        gbc.writeMem(0x8cf3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x535e);
        EXPECT(gbc.pc(), 0x8cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf3), 0x8b);
        // 8B 03BC
        gbc.setState(0xc9f2, 0x8d8b, 0xe360, 0xa5b6, 0xab71, 0x3da8, 0x0, 0x0);
        gbc.writeMem(0xc9f2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8d8b);
        EXPECT(gbc.pc(), 0xc9f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f2), 0x8b);
        // 8B 03BD
        gbc.setState(0x9e1, 0x9b0, 0x9180, 0x6da9, 0xd6dc, 0x8ad8, 0x1, 0x0);
        gbc.writeMem(0x9e1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9b0);
        EXPECT(gbc.pc(), 0x9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 03BE
        gbc.setState(0x9bb9, 0x20fa, 0xac50, 0xc881, 0x652c, 0x2f01, 0x0, 0x1);
        gbc.writeMem(0x9bb9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x20fa);
        EXPECT(gbc.pc(), 0x9bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb9), 0x8b);
        // 8B 03BF
        gbc.setState(0x5009, 0xad75, 0x7830, 0xa67b, 0x5113, 0x3d52, 0x0, 0x0);
        gbc.writeMem(0x5009, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xad75);
        EXPECT(gbc.pc(), 0x500a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03C0
        gbc.setState(0xd4e3, 0x964a, 0xa660, 0x7b78, 0xca01, 0x268f, 0x1, 0x1);
        gbc.writeMem(0xd4e3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x964a);
        EXPECT(gbc.pc(), 0xd4e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e3), 0x8b);
        // 8B 03C1
        gbc.setState(0xe1d4, 0x3dc1, 0x7b40, 0x2ef3, 0xf7dd, 0x2ca5, 0x1, 0x0);
        gbc.writeMem(0xe1d4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3dc1);
        EXPECT(gbc.pc(), 0xe1d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d4), 0x8b);
        // 8B 03C2
        gbc.setState(0xd1d9, 0xdff5, 0x6ee0, 0xc4e5, 0xe71, 0x56b0, 0x1, 0x1);
        gbc.writeMem(0xd1d9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdff5);
        EXPECT(gbc.pc(), 0xd1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d9), 0x8b);
        // 8B 03C3
        gbc.setState(0x900b, 0xa777, 0xfc80, 0x7724, 0x481c, 0x175d, 0x0, 0x1);
        gbc.writeMem(0x900b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa777);
        EXPECT(gbc.pc(), 0x900c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x900b), 0x8b);
        // 8B 03C4
        gbc.setState(0xe303, 0xdfcc, 0xc750, 0xf61, 0xdf64, 0xa992, 0x1, 0x0);
        gbc.writeMem(0xe303, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xdfcc);
        EXPECT(gbc.pc(), 0xe304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe303), 0x8b);
        // 8B 03C5
        gbc.setState(0x83c3, 0xcb27, 0xe950, 0x136a, 0x143f, 0x9e57, 0x1, 0x0);
        gbc.writeMem(0x83c3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcb27);
        EXPECT(gbc.pc(), 0x83c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c3), 0x8b);
        // 8B 03C6
        gbc.setState(0x846a, 0xda3e, 0x66b0, 0x26b7, 0xba39, 0x3b30, 0x1, 0x0);
        gbc.writeMem(0x846a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xda3e);
        EXPECT(gbc.pc(), 0x846b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x846a), 0x8b);
        // 8B 03C7
        gbc.setState(0x8605, 0xf897, 0xc0, 0x9c18, 0x573e, 0xb6e, 0x0, 0x1);
        gbc.writeMem(0x8605, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf897);
        EXPECT(gbc.pc(), 0x8606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8605), 0x8b);
        // 8B 03C8
        gbc.setState(0x8ddc, 0x606d, 0x5220, 0x4b09, 0xc8ac, 0x8642, 0x1, 0x1);
        gbc.writeMem(0x8ddc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x606d);
        EXPECT(gbc.pc(), 0x8ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ddc), 0x8b);
        // 8B 03C9
        gbc.setState(0xc09f, 0xe879, 0x12f0, 0x7c41, 0xc79f, 0xa14c, 0x0, 0x1);
        gbc.writeMem(0xc09f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe879);
        EXPECT(gbc.pc(), 0xc0a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc09f), 0x8b);
        // 8B 03CA
        gbc.setState(0xb665, 0x2e2e, 0x6580, 0xdb25, 0x759, 0x10ea, 0x0, 0x1);
        gbc.writeMem(0xb665, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2e2e);
        EXPECT(gbc.pc(), 0xb666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb665), 0x8b);
        // 8B 03CB
        gbc.setState(0xa7fd, 0xf5e3, 0xb370, 0xafbf, 0x69a4, 0xf051, 0x0, 0x1);
        gbc.writeMem(0xa7fd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf5e3);
        EXPECT(gbc.pc(), 0xa7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fd), 0x8b);
        // 8B 03CC
        gbc.setState(0xc07a, 0x9879, 0x1b60, 0x3a87, 0xbc55, 0x2cfa, 0x0, 0x0);
        gbc.writeMem(0xc07a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9879);
        EXPECT(gbc.pc(), 0xc07b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07a), 0x8b);
        // 8B 03CD
        gbc.setState(0x835, 0x1581, 0xa510, 0x95b, 0x98a2, 0x85f9, 0x1, 0x0);
        gbc.writeMem(0x835, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1581);
        EXPECT(gbc.pc(), 0x836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 03CE
        gbc.setState(0xe7f2, 0x4f75, 0xb2d0, 0x80df, 0xf34, 0xd7a3, 0x1, 0x0);
        gbc.writeMem(0xe7f2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4f75);
        EXPECT(gbc.pc(), 0xe7f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f2), 0x8b);
        // 8B 03CF
        gbc.setState(0xcdc2, 0x2c0f, 0xa050, 0x10a1, 0x875d, 0xd75f, 0x1, 0x1);
        gbc.writeMem(0xcdc2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2c0f);
        EXPECT(gbc.pc(), 0xcdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc2), 0x8b);
        // 8B 03D0
        gbc.setState(0x8c34, 0x82a5, 0xdd40, 0xf573, 0xdbd6, 0x9232, 0x0, 0x0);
        gbc.writeMem(0x8c34, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x82a5);
        EXPECT(gbc.pc(), 0x8c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c34), 0x8b);
        // 8B 03D1
        gbc.setState(0x28be, 0xf5d0, 0x5c40, 0xbc83, 0x367f, 0xba8d, 0x0, 0x1);
        gbc.writeMem(0x28be, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf5d0);
        EXPECT(gbc.pc(), 0x28bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03D2
        gbc.setState(0x9ee3, 0x60cc, 0x9800, 0xc195, 0x1c56, 0x2821, 0x1, 0x0);
        gbc.writeMem(0x9ee3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x60cc);
        EXPECT(gbc.pc(), 0x9ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee3), 0x8b);
        // 8B 03D4
        gbc.setState(0x8b1c, 0x18e, 0xf690, 0xc9a9, 0x970d, 0x856f, 0x0, 0x1);
        gbc.writeMem(0x8b1c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x18e);
        EXPECT(gbc.pc(), 0x8b1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b1c), 0x8b);
        // 8B 03D5
        gbc.setState(0xe89, 0xff5f, 0xf730, 0x4187, 0xf9dd, 0x4a06, 0x0, 0x0);
        gbc.writeMem(0xe89, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xff5f);
        EXPECT(gbc.pc(), 0xe8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03D6
        gbc.setState(0xddf2, 0x6403, 0xde20, 0xf141, 0x6d64, 0x4dc3, 0x1, 0x1);
        gbc.writeMem(0xddf2, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6403);
        EXPECT(gbc.pc(), 0xddf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf2), 0x8b);
        // 8B 03D7
        gbc.setState(0xbb86, 0x5a97, 0x4af0, 0xd24f, 0xa6c9, 0x295c, 0x0, 0x0);
        gbc.writeMem(0xbb86, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5a97);
        EXPECT(gbc.pc(), 0xbb87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb86), 0x8b);
        // 8B 03D8
        gbc.setState(0xaf67, 0x7419, 0x5350, 0xf277, 0x5f6c, 0x6198, 0x0, 0x1);
        gbc.writeMem(0xaf67, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7419);
        EXPECT(gbc.pc(), 0xaf68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf67), 0x8b);
        // 8B 03D9
        gbc.setState(0xb994, 0x4a7, 0x24d0, 0x7909, 0x7f31, 0xc6af, 0x1, 0x0);
        gbc.writeMem(0xb994, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4a7);
        EXPECT(gbc.pc(), 0xb995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb994), 0x8b);
        // 8B 03DA
        gbc.setState(0x39db, 0x94eb, 0xf570, 0x2e00, 0xcf08, 0x29ae, 0x1, 0x0);
        gbc.writeMem(0x39db, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x94eb);
        EXPECT(gbc.pc(), 0x39dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03DB
        gbc.setState(0x88, 0x50d3, 0x1a00, 0xea6f, 0x57bc, 0x1561, 0x0, 0x1);
        gbc.writeMem(0x88, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x50d3);
        EXPECT(gbc.pc(), 0x89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03DC
        gbc.setState(0xabea, 0x155f, 0xc140, 0x346a, 0xf08, 0xa7e8, 0x0, 0x1);
        gbc.writeMem(0xabea, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x155f);
        EXPECT(gbc.pc(), 0xabeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabea), 0x8b);
        // 8B 03DE
        gbc.setState(0xc687, 0x44dd, 0xb5d0, 0x8a9a, 0xce0b, 0xcac1, 0x1, 0x0);
        gbc.writeMem(0xc687, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x44dd);
        EXPECT(gbc.pc(), 0xc688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc687), 0x8b);
        // 8B 03DF
        gbc.setState(0x8843, 0x3dee, 0xe640, 0xacda, 0x80c6, 0x3d81, 0x0, 0x1);
        gbc.writeMem(0x8843, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3dee);
        EXPECT(gbc.pc(), 0x8844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8843), 0x8b);
        // 8B 03E0
        gbc.setState(0x6c2e, 0x8c46, 0x79a0, 0x5186, 0xdc1, 0x4008, 0x1, 0x0);
        gbc.writeMem(0x6c2e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8c46);
        EXPECT(gbc.pc(), 0x6c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 8B 03E1
        gbc.setState(0x6b3a, 0x75c0, 0x7af0, 0xbce1, 0xbea6, 0x78b0, 0x0, 0x1);
        gbc.writeMem(0x6b3a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x75c0);
        EXPECT(gbc.pc(), 0x6b3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 8B 03E2
        gbc.setState(0x355, 0xc897, 0xc580, 0xdfbc, 0xe020, 0x2993, 0x1, 0x0);
        gbc.writeMem(0x355, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc897);
        EXPECT(gbc.pc(), 0x356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 8B 03E3
        gbc.setState(0xcfe1, 0x3d04, 0x8030, 0x3efd, 0x7e8a, 0x76d6, 0x1, 0x1);
        gbc.writeMem(0xcfe1, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3d04);
        EXPECT(gbc.pc(), 0xcfe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe1), 0x8b);
        // 8B 03E4
        gbc.setState(0xebd8, 0xc62b, 0xa460, 0xd513, 0xc810, 0x7999, 0x0, 0x1);
        gbc.writeMem(0xebd8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc62b);
        EXPECT(gbc.pc(), 0xebd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd8), 0x8b);
        // 8B 03E5
        gbc.setState(0xb9c4, 0xb467, 0x87a0, 0xf573, 0x9f5f, 0x7f5c, 0x1, 0x0);
        gbc.writeMem(0xb9c4, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb467);
        EXPECT(gbc.pc(), 0xb9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c4), 0x8b);
        // 8B 03E6
        gbc.setState(0x2b93, 0x39d8, 0x7d50, 0xa380, 0xc07a, 0xdb74, 0x0, 0x0);
        gbc.writeMem(0x2b93, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x39d8);
        EXPECT(gbc.pc(), 0x2b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 8B 03E7
        gbc.setState(0xa06f, 0x5b71, 0x3380, 0xc463, 0xe452, 0x43b4, 0x0, 0x1);
        gbc.writeMem(0xa06f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5b71);
        EXPECT(gbc.pc(), 0xa070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa06f), 0x8b);
    }
}
#endif
