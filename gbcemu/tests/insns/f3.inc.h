    TEST(gbcemu, opcode_f3) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // F3 0000
        gbc.setState(0x83df, 0x4e88, 0xddf0, 0x4f82, 0xaf0, 0x308d, 0x0, 0x1);
        gbc.writeMem(0x83df, { 0xf3 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x4e88, gbc.sp());
        EXPECT(0x83e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x83df));
        // F3 0001
        gbc.setState(0x411f, 0xf553, 0xa740, 0x5995, 0x1664, 0xdb39, 0x0, 0x1);
        gbc.writeMem(0x411f, { 0xf3 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xf553, gbc.sp());
        EXPECT(0x4120, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0002
        gbc.setState(0x8a78, 0xa61f, 0x3bf0, 0xc736, 0xbb54, 0x2d48, 0x0, 0x1);
        gbc.writeMem(0x8a78, { 0xf3 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xa61f, gbc.sp());
        EXPECT(0x8a79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8a78));
        // F3 0003
        gbc.setState(0x8bac, 0x83fa, 0x5780, 0xb269, 0x59c9, 0x1504, 0x0, 0x0);
        gbc.writeMem(0x8bac, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x83fa, gbc.sp());
        EXPECT(0x8bad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8bac));
        // F3 0005
        gbc.setState(0x1775, 0x90eb, 0x70b0, 0xcf38, 0xe352, 0x69ed, 0x1, 0x1);
        gbc.writeMem(0x1775, { 0xf3 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x90eb, gbc.sp());
        EXPECT(0x1776, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0006
        gbc.setState(0x76c, 0xbf5b, 0xd010, 0x5335, 0x3b68, 0x2c49, 0x1, 0x0);
        gbc.writeMem(0x76c, { 0xf3 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xbf5b, gbc.sp());
        EXPECT(0x76d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0007
        gbc.setState(0xb280, 0x6f75, 0x1170, 0xdfd8, 0xb20d, 0x1e0a, 0x1, 0x0);
        gbc.writeMem(0xb280, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x6f75, gbc.sp());
        EXPECT(0xb281, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb280));
        // F3 0008
        gbc.setState(0x69c7, 0x3bab, 0x4870, 0xca1f, 0xdf6f, 0xf4af, 0x0, 0x1);
        gbc.writeMem(0x69c7, { 0xf3 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x3bab, gbc.sp());
        EXPECT(0x69c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0009
        gbc.setState(0x6613, 0x90b6, 0x5570, 0x823, 0x2438, 0x8130, 0x0, 0x1);
        gbc.writeMem(0x6613, { 0xf3 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x90b6, gbc.sp());
        EXPECT(0x6614, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 000A
        gbc.setState(0x790, 0x2b2e, 0x1240, 0x9bc2, 0x897, 0xae44, 0x0, 0x0);
        gbc.writeMem(0x790, { 0xf3 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x2b2e, gbc.sp());
        EXPECT(0x791, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 000B
        gbc.setState(0x7c7c, 0xfad0, 0x76c0, 0xbd2, 0xbc7d, 0xb6e1, 0x1, 0x1);
        gbc.writeMem(0x7c7c, { 0xf3 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xfad0, gbc.sp());
        EXPECT(0x7c7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 000C
        gbc.setState(0xd19f, 0x53f3, 0xb530, 0x4b3f, 0x5a8a, 0x7b46, 0x0, 0x0);
        gbc.writeMem(0xd19f, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x53f3, gbc.sp());
        EXPECT(0xd1a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd19f));
        // F3 000D
        gbc.setState(0x124b, 0xb5e7, 0xe8b0, 0x2ae, 0xdf0e, 0x4005, 0x0, 0x0);
        gbc.writeMem(0x124b, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xb5e7, gbc.sp());
        EXPECT(0x124c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 000F
        gbc.setState(0x5657, 0x943f, 0xcd40, 0x24c7, 0xc60e, 0x7f61, 0x0, 0x0);
        gbc.writeMem(0x5657, { 0xf3 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x943f, gbc.sp());
        EXPECT(0x5658, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0010
        gbc.setState(0xa481, 0xcd42, 0x3090, 0x78e6, 0xc0be, 0x7352, 0x1, 0x0);
        gbc.writeMem(0xa481, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xcd42, gbc.sp());
        EXPECT(0xa482, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa481));
        // F3 0011
        gbc.setState(0x490a, 0xdd5d, 0xf560, 0x8492, 0x2f8, 0x4cfd, 0x1, 0x0);
        gbc.writeMem(0x490a, { 0xf3 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xdd5d, gbc.sp());
        EXPECT(0x490b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0012
        gbc.setState(0x3c43, 0x9127, 0xbea0, 0xb555, 0x85b1, 0x902a, 0x1, 0x1);
        gbc.writeMem(0x3c43, { 0xf3 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x9127, gbc.sp());
        EXPECT(0x3c44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0013
        gbc.setState(0x4651, 0xa66a, 0xde40, 0x15a5, 0xe4d4, 0x10b1, 0x1, 0x1);
        gbc.writeMem(0x4651, { 0xf3 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xa66a, gbc.sp());
        EXPECT(0x4652, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0014
        gbc.setState(0x7bce, 0x37c, 0x3020, 0x3689, 0x7724, 0x95de, 0x0, 0x0);
        gbc.writeMem(0x7bce, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x37c, gbc.sp());
        EXPECT(0x7bcf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0016
        gbc.setState(0x8887, 0x4dfb, 0x9250, 0x82a1, 0xa7b7, 0xb46a, 0x1, 0x0);
        gbc.writeMem(0x8887, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x4dfb, gbc.sp());
        EXPECT(0x8888, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8887));
        // F3 0017
        gbc.setState(0x1e3b, 0xb742, 0xd4b0, 0x1c, 0x39f9, 0xe371, 0x1, 0x1);
        gbc.writeMem(0x1e3b, { 0xf3 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xb742, gbc.sp());
        EXPECT(0x1e3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0018
        gbc.setState(0x62f0, 0x366c, 0xe670, 0xd7ad, 0x5dc6, 0xd18c, 0x1, 0x0);
        gbc.writeMem(0x62f0, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x366c, gbc.sp());
        EXPECT(0x62f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0019
        gbc.setState(0x18e5, 0xa2d5, 0x1c40, 0xeaf2, 0xf7a8, 0xb8e9, 0x0, 0x1);
        gbc.writeMem(0x18e5, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xa2d5, gbc.sp());
        EXPECT(0x18e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 001A
        gbc.setState(0xcf3, 0x31ca, 0xaf0, 0xebd5, 0x5648, 0x5cd5, 0x0, 0x1);
        gbc.writeMem(0xcf3, { 0xf3 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x31ca, gbc.sp());
        EXPECT(0xcf4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 001B
        gbc.setState(0x5491, 0x994, 0xa820, 0x2b03, 0x7010, 0xaedd, 0x0, 0x1);
        gbc.writeMem(0x5491, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x994, gbc.sp());
        EXPECT(0x5492, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 001C
        gbc.setState(0x779a, 0x422a, 0xa4a0, 0xa899, 0xd8da, 0x9b39, 0x1, 0x1);
        gbc.writeMem(0x779a, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x422a, gbc.sp());
        EXPECT(0x779b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 001D
        gbc.setState(0x65c, 0xc21d, 0x9e00, 0x3d80, 0xf344, 0xb07f, 0x1, 0x0);
        gbc.writeMem(0x65c, { 0xf3 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xc21d, gbc.sp());
        EXPECT(0x65d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 001E
        gbc.setState(0x5a9d, 0x1ffa, 0x8570, 0x2934, 0x146b, 0xdbd6, 0x0, 0x1);
        gbc.writeMem(0x5a9d, { 0xf3 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x1ffa, gbc.sp());
        EXPECT(0x5a9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 001F
        gbc.setState(0x12c6, 0xe08a, 0x93d0, 0x3f39, 0x8652, 0xd2fe, 0x1, 0x0);
        gbc.writeMem(0x12c6, { 0xf3 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe08a, gbc.sp());
        EXPECT(0x12c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0020
        gbc.setState(0xa04b, 0x2033, 0x87a0, 0x60ed, 0x7f44, 0xb718, 0x1, 0x1);
        gbc.writeMem(0xa04b, { 0xf3 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x2033, gbc.sp());
        EXPECT(0xa04c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa04b));
        // F3 0021
        gbc.setState(0xb415, 0xfad4, 0x54f0, 0x4c47, 0x6e31, 0x538f, 0x1, 0x0);
        gbc.writeMem(0xb415, { 0xf3 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xfad4, gbc.sp());
        EXPECT(0xb416, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb415));
        // F3 0022
        gbc.setState(0x35aa, 0x3ae7, 0x7270, 0xce85, 0x253, 0x828, 0x1, 0x0);
        gbc.writeMem(0x35aa, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x3ae7, gbc.sp());
        EXPECT(0x35ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0023
        gbc.setState(0x6b66, 0x1e99, 0xcde0, 0x9ef3, 0xca8, 0x31b9, 0x1, 0x1);
        gbc.writeMem(0x6b66, { 0xf3 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x1e99, gbc.sp());
        EXPECT(0x6b67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0024
        gbc.setState(0xe280, 0x4d7b, 0x24d0, 0xda54, 0x25cb, 0x76c9, 0x1, 0x1);
        gbc.writeMem(0xe280, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x4d7b, gbc.sp());
        EXPECT(0xe281, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe280));
        // F3 0025
        gbc.setState(0x18bc, 0x8fd6, 0x7290, 0xf1d9, 0x6fde, 0x5a5, 0x1, 0x0);
        gbc.writeMem(0x18bc, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x8fd6, gbc.sp());
        EXPECT(0x18bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0026
        gbc.setState(0x465a, 0x357d, 0xa980, 0xed2d, 0xc75d, 0xba1d, 0x0, 0x0);
        gbc.writeMem(0x465a, { 0xf3 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x357d, gbc.sp());
        EXPECT(0x465b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0027
        gbc.setState(0x756d, 0xf497, 0xb700, 0xd1ce, 0x97b4, 0x1c8e, 0x0, 0x1);
        gbc.writeMem(0x756d, { 0xf3 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xf497, gbc.sp());
        EXPECT(0x756e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0028
        gbc.setState(0x989a, 0x34b7, 0x9270, 0x5745, 0x9b7e, 0x151, 0x1, 0x0);
        gbc.writeMem(0x989a, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x34b7, gbc.sp());
        EXPECT(0x989b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x989a));
        // F3 0029
        gbc.setState(0x9d5c, 0xc66d, 0xf980, 0x3534, 0x7723, 0x934f, 0x1, 0x0);
        gbc.writeMem(0x9d5c, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xc66d, gbc.sp());
        EXPECT(0x9d5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9d5c));
        // F3 002A
        gbc.setState(0x11ab, 0xb87a, 0x7540, 0xbe8f, 0x9999, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x11ab, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xb87a, gbc.sp());
        EXPECT(0x11ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 002B
        gbc.setState(0xb0bd, 0x51dc, 0x42d0, 0xee27, 0xfad9, 0x7375, 0x1, 0x1);
        gbc.writeMem(0xb0bd, { 0xf3 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x51dc, gbc.sp());
        EXPECT(0xb0be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb0bd));
        // F3 002D
        gbc.setState(0x45c, 0x632e, 0x6260, 0x4242, 0x9d4b, 0x4338, 0x0, 0x0);
        gbc.writeMem(0x45c, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x632e, gbc.sp());
        EXPECT(0x45d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 002E
        gbc.setState(0x4e9d, 0x3ca1, 0x670, 0x568d, 0xd8f7, 0xb255, 0x0, 0x0);
        gbc.writeMem(0x4e9d, { 0xf3 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3ca1, gbc.sp());
        EXPECT(0x4e9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 002F
        gbc.setState(0x610d, 0xbd3b, 0x46b0, 0xd694, 0x1506, 0x833, 0x1, 0x0);
        gbc.writeMem(0x610d, { 0xf3 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xbd3b, gbc.sp());
        EXPECT(0x610e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0030
        gbc.setState(0x2e9e, 0xdb5d, 0xe570, 0x78e, 0x6a21, 0x2083, 0x0, 0x1);
        gbc.writeMem(0x2e9e, { 0xf3 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xdb5d, gbc.sp());
        EXPECT(0x2e9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0031
        gbc.setState(0x7258, 0x6721, 0xfb50, 0xf534, 0x87ec, 0x8ff5, 0x1, 0x1);
        gbc.writeMem(0x7258, { 0xf3 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x6721, gbc.sp());
        EXPECT(0x7259, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0032
        gbc.setState(0x6f4c, 0x4abf, 0xf220, 0x5dc1, 0xf08f, 0x2c80, 0x0, 0x0);
        gbc.writeMem(0x6f4c, { 0xf3 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x4abf, gbc.sp());
        EXPECT(0x6f4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0033
        gbc.setState(0x135d, 0x1d93, 0x6550, 0x4baf, 0xbbd2, 0x39b5, 0x1, 0x1);
        gbc.writeMem(0x135d, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x1d93, gbc.sp());
        EXPECT(0x135e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0034
        gbc.setState(0x3565, 0x70df, 0xe540, 0x5f6f, 0x1a14, 0x36c6, 0x1, 0x1);
        gbc.writeMem(0x3565, { 0xf3 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x70df, gbc.sp());
        EXPECT(0x3566, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0035
        gbc.setState(0xd3d0, 0x9745, 0x17f0, 0xd2a0, 0xe08f, 0x4aa4, 0x1, 0x0);
        gbc.writeMem(0xd3d0, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x9745, gbc.sp());
        EXPECT(0xd3d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd3d0));
        // F3 0036
        gbc.setState(0x5f83, 0x7d4e, 0x57b0, 0xde83, 0x2dcc, 0xe85a, 0x0, 0x0);
        gbc.writeMem(0x5f83, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7d4e, gbc.sp());
        EXPECT(0x5f84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0037
        gbc.setState(0x44ca, 0xc532, 0xfef0, 0xc210, 0x42d5, 0x6f53, 0x0, 0x1);
        gbc.writeMem(0x44ca, { 0xf3 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xc532, gbc.sp());
        EXPECT(0x44cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0038
        gbc.setState(0x3546, 0xb043, 0x1cf0, 0x7d5b, 0x9e1f, 0x505d, 0x1, 0x0);
        gbc.writeMem(0x3546, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xb043, gbc.sp());
        EXPECT(0x3547, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0039
        gbc.setState(0xbabd, 0x6114, 0x5530, 0x3024, 0x671, 0x64c4, 0x0, 0x1);
        gbc.writeMem(0xbabd, { 0xf3 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x6114, gbc.sp());
        EXPECT(0xbabe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbabd));
        // F3 003A
        gbc.setState(0x7042, 0x9707, 0xff70, 0xeb6a, 0x4bb2, 0x45c6, 0x0, 0x1);
        gbc.writeMem(0x7042, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9707, gbc.sp());
        EXPECT(0x7043, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 003C
        gbc.setState(0x8b44, 0x443e, 0x79d0, 0xfb9f, 0x238c, 0x6ec, 0x0, 0x0);
        gbc.writeMem(0x8b44, { 0xf3 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x443e, gbc.sp());
        EXPECT(0x8b45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8b44));
        // F3 003D
        gbc.setState(0x4110, 0xf954, 0x1260, 0x5b77, 0x7925, 0xa474, 0x1, 0x0);
        gbc.writeMem(0x4110, { 0xf3 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xf954, gbc.sp());
        EXPECT(0x4111, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 003E
        gbc.setState(0x3ee, 0x92b7, 0x7750, 0xead, 0x4d2, 0x989e, 0x1, 0x0);
        gbc.writeMem(0x3ee, { 0xf3 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x92b7, gbc.sp());
        EXPECT(0x3ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 003F
        gbc.setState(0x28ae, 0x9608, 0x5790, 0x9f5b, 0x3cb2, 0x86e2, 0x0, 0x0);
        gbc.writeMem(0x28ae, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x9608, gbc.sp());
        EXPECT(0x28af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0040
        gbc.setState(0x6fa2, 0x1543, 0x4a00, 0x6856, 0x24f8, 0x710c, 0x1, 0x1);
        gbc.writeMem(0x6fa2, { 0xf3 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x1543, gbc.sp());
        EXPECT(0x6fa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0041
        gbc.setState(0xbcef, 0x36a3, 0xe6f0, 0xac06, 0x53a4, 0x4f70, 0x0, 0x1);
        gbc.writeMem(0xbcef, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x36a3, gbc.sp());
        EXPECT(0xbcf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbcef));
        // F3 0042
        gbc.setState(0xe6bc, 0x78b3, 0x8ae0, 0x8df8, 0x9703, 0xc28b, 0x0, 0x1);
        gbc.writeMem(0xe6bc, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x78b3, gbc.sp());
        EXPECT(0xe6bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe6bc));
        // F3 0043
        gbc.setState(0xb41a, 0xde9f, 0xb7a0, 0x232, 0x8de5, 0x68ed, 0x0, 0x0);
        gbc.writeMem(0xb41a, { 0xf3 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xde9f, gbc.sp());
        EXPECT(0xb41b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb41a));
        // F3 0044
        gbc.setState(0xa867, 0xf853, 0x58c0, 0x556e, 0x747c, 0x510, 0x0, 0x1);
        gbc.writeMem(0xa867, { 0xf3 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xf853, gbc.sp());
        EXPECT(0xa868, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa867));
        // F3 0045
        gbc.setState(0x8678, 0x2e93, 0x6cf0, 0xe394, 0x71e1, 0x6d2b, 0x0, 0x0);
        gbc.writeMem(0x8678, { 0xf3 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x2e93, gbc.sp());
        EXPECT(0x8679, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8678));
        // F3 0046
        gbc.setState(0x5618, 0x5b30, 0x74a0, 0xf58f, 0xaf55, 0x7258, 0x1, 0x0);
        gbc.writeMem(0x5618, { 0xf3 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x5b30, gbc.sp());
        EXPECT(0x5619, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0047
        gbc.setState(0x18b6, 0x7394, 0xab90, 0x2054, 0x651c, 0xd6ae, 0x0, 0x1);
        gbc.writeMem(0x18b6, { 0xf3 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x7394, gbc.sp());
        EXPECT(0x18b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0048
        gbc.setState(0xd15b, 0xd4a9, 0xb840, 0x5bf2, 0xa0cb, 0xafc7, 0x0, 0x1);
        gbc.writeMem(0xd15b, { 0xf3 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xd4a9, gbc.sp());
        EXPECT(0xd15c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd15b));
        // F3 0049
        gbc.setState(0x8a9b, 0x3e42, 0x79e0, 0x83e9, 0xf8db, 0xe9c2, 0x0, 0x0);
        gbc.writeMem(0x8a9b, { 0xf3 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x3e42, gbc.sp());
        EXPECT(0x8a9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8a9b));
        // F3 004B
        gbc.setState(0x2586, 0x3c44, 0x7880, 0x32d8, 0x49f4, 0xba80, 0x0, 0x1);
        gbc.writeMem(0x2586, { 0xf3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x3c44, gbc.sp());
        EXPECT(0x2587, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 004C
        gbc.setState(0xc396, 0x82c8, 0xb330, 0x9535, 0x7b98, 0x3114, 0x1, 0x0);
        gbc.writeMem(0xc396, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x82c8, gbc.sp());
        EXPECT(0xc397, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc396));
        // F3 004D
        gbc.setState(0x139a, 0x9f0e, 0x2280, 0x97b6, 0x8c99, 0xf62, 0x0, 0x0);
        gbc.writeMem(0x139a, { 0xf3 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x9f0e, gbc.sp());
        EXPECT(0x139b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 004E
        gbc.setState(0xb8ab, 0xeda6, 0xb6b0, 0x1b85, 0x89b5, 0x8116, 0x1, 0x1);
        gbc.writeMem(0xb8ab, { 0xf3 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xeda6, gbc.sp());
        EXPECT(0xb8ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb8ab));
        // F3 004F
        gbc.setState(0x7bd0, 0xd5f7, 0xcb00, 0x89ef, 0x7f13, 0x4abd, 0x1, 0x0);
        gbc.writeMem(0x7bd0, { 0xf3 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xd5f7, gbc.sp());
        EXPECT(0x7bd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0050
        gbc.setState(0xbb10, 0x1108, 0x8250, 0xab1a, 0x7cfe, 0x4997, 0x0, 0x1);
        gbc.writeMem(0xbb10, { 0xf3 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1108, gbc.sp());
        EXPECT(0xbb11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbb10));
        // F3 0051
        gbc.setState(0x28a8, 0x68c6, 0xd00, 0xb62e, 0x4321, 0x52e3, 0x1, 0x1);
        gbc.writeMem(0x28a8, { 0xf3 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x68c6, gbc.sp());
        EXPECT(0x28a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0052
        gbc.setState(0xc740, 0x66da, 0x8e00, 0x4e6a, 0xef44, 0x2bee, 0x0, 0x1);
        gbc.writeMem(0xc740, { 0xf3 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x66da, gbc.sp());
        EXPECT(0xc741, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc740));
        // F3 0053
        gbc.setState(0x8ec5, 0xa48d, 0x9340, 0xe623, 0xbb89, 0x64b1, 0x1, 0x1);
        gbc.writeMem(0x8ec5, { 0xf3 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xa48d, gbc.sp());
        EXPECT(0x8ec6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8ec5));
        // F3 0054
        gbc.setState(0xab1e, 0x14ad, 0x9a20, 0x1192, 0x777b, 0x9e3b, 0x1, 0x0);
        gbc.writeMem(0xab1e, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x14ad, gbc.sp());
        EXPECT(0xab1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xab1e));
        // F3 0055
        gbc.setState(0x5d60, 0x878b, 0x1070, 0xa8b5, 0xbc2b, 0x959, 0x1, 0x0);
        gbc.writeMem(0x5d60, { 0xf3 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x878b, gbc.sp());
        EXPECT(0x5d61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0056
        gbc.setState(0x7bda, 0xbb3e, 0xace0, 0xba55, 0x8e44, 0x5086, 0x0, 0x1);
        gbc.writeMem(0x7bda, { 0xf3 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xbb3e, gbc.sp());
        EXPECT(0x7bdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0057
        gbc.setState(0x3362, 0x3717, 0x2e10, 0x535c, 0xdfed, 0xb877, 0x1, 0x0);
        gbc.writeMem(0x3362, { 0xf3 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x3717, gbc.sp());
        EXPECT(0x3363, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0058
        gbc.setState(0x8cdb, 0x9d08, 0x9990, 0xa5ed, 0x3c0f, 0x9d57, 0x1, 0x0);
        gbc.writeMem(0x8cdb, { 0xf3 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x9d08, gbc.sp());
        EXPECT(0x8cdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8cdb));
        // F3 0059
        gbc.setState(0x45fc, 0x1c78, 0x7b40, 0x37, 0x5b55, 0xb3a2, 0x1, 0x1);
        gbc.writeMem(0x45fc, { 0xf3 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x1c78, gbc.sp());
        EXPECT(0x45fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 005A
        gbc.setState(0x2da3, 0x8bea, 0xc540, 0x269b, 0xaf2d, 0x9250, 0x1, 0x0);
        gbc.writeMem(0x2da3, { 0xf3 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x8bea, gbc.sp());
        EXPECT(0x2da4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 005B
        gbc.setState(0xa0b, 0x1a4f, 0x1440, 0x9014, 0xb71, 0xb856, 0x0, 0x0);
        gbc.writeMem(0xa0b, { 0xf3 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x1a4f, gbc.sp());
        EXPECT(0xa0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 005C
        gbc.setState(0x2e08, 0x476e, 0x8610, 0xb200, 0x1fbc, 0x1eb7, 0x0, 0x1);
        gbc.writeMem(0x2e08, { 0xf3 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x476e, gbc.sp());
        EXPECT(0x2e09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 005D
        gbc.setState(0x6a12, 0x2075, 0x2400, 0x23ca, 0x86e8, 0xf567, 0x1, 0x1);
        gbc.writeMem(0x6a12, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x2075, gbc.sp());
        EXPECT(0x6a13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 005E
        gbc.setState(0x40d, 0xbf53, 0x1ed0, 0x3dd8, 0x2ac4, 0x3aaa, 0x0, 0x0);
        gbc.writeMem(0x40d, { 0xf3 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xbf53, gbc.sp());
        EXPECT(0x40e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 005F
        gbc.setState(0xb6ec, 0xd3ef, 0x1380, 0x860a, 0xfd4e, 0xf87b, 0x1, 0x1);
        gbc.writeMem(0xb6ec, { 0xf3 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xd3ef, gbc.sp());
        EXPECT(0xb6ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb6ec));
        // F3 0060
        gbc.setState(0x9596, 0xb6f1, 0x3d80, 0xdf6, 0x91a4, 0x98f9, 0x0, 0x0);
        gbc.writeMem(0x9596, { 0xf3 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xb6f1, gbc.sp());
        EXPECT(0x9597, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9596));
        // F3 0061
        gbc.setState(0xbe51, 0x2592, 0xf6a0, 0x8ee2, 0xf48f, 0x880c, 0x1, 0x1);
        gbc.writeMem(0xbe51, { 0xf3 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x2592, gbc.sp());
        EXPECT(0xbe52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe51));
        // F3 0062
        gbc.setState(0x5a9d, 0xae42, 0x2d70, 0x2cff, 0x16b2, 0x281f, 0x0, 0x1);
        gbc.writeMem(0x5a9d, { 0xf3 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xae42, gbc.sp());
        EXPECT(0x5a9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0063
        gbc.setState(0x2572, 0x973, 0x91b0, 0x659, 0x8051, 0xeca6, 0x0, 0x0);
        gbc.writeMem(0x2572, { 0xf3 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x973, gbc.sp());
        EXPECT(0x2573, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0064
        gbc.setState(0xaa72, 0x7ad3, 0xab30, 0x22, 0x1885, 0xb1f4, 0x0, 0x1);
        gbc.writeMem(0xaa72, { 0xf3 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x7ad3, gbc.sp());
        EXPECT(0xaa73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaa72));
        // F3 0065
        gbc.setState(0x5673, 0x36dd, 0xde0, 0xe80d, 0x3715, 0xab32, 0x0, 0x1);
        gbc.writeMem(0x5673, { 0xf3 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x36dd, gbc.sp());
        EXPECT(0x5674, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0066
        gbc.setState(0x7791, 0x5317, 0xf0, 0x7b48, 0x3857, 0x8238, 0x1, 0x0);
        gbc.writeMem(0x7791, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x5317, gbc.sp());
        EXPECT(0x7792, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0067
        gbc.setState(0xcf32, 0xf515, 0xda80, 0x35e4, 0xbd19, 0xf539, 0x1, 0x0);
        gbc.writeMem(0xcf32, { 0xf3 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xf515, gbc.sp());
        EXPECT(0xcf33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcf32));
        // F3 0068
        gbc.setState(0xe36d, 0x416e, 0xc300, 0xb8bf, 0x86ab, 0x6673, 0x1, 0x1);
        gbc.writeMem(0xe36d, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x416e, gbc.sp());
        EXPECT(0xe36e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe36d));
        // F3 0069
        gbc.setState(0xdb39, 0x9b0, 0x9010, 0xe47, 0x2ee4, 0xdf23, 0x1, 0x0);
        gbc.writeMem(0xdb39, { 0xf3 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x9b0, gbc.sp());
        EXPECT(0xdb3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdb39));
        // F3 006A
        gbc.setState(0x64e3, 0xda, 0x6660, 0x4d37, 0x5b20, 0xd66b, 0x0, 0x1);
        gbc.writeMem(0x64e3, { 0xf3 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xda, gbc.sp());
        EXPECT(0x64e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 006B
        gbc.setState(0x7a91, 0x7594, 0x7ed0, 0x33e5, 0x9ecc, 0xedb7, 0x0, 0x1);
        gbc.writeMem(0x7a91, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x7594, gbc.sp());
        EXPECT(0x7a92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 006C
        gbc.setState(0x21ea, 0xfb65, 0x4180, 0xea57, 0x1f0b, 0xfc3b, 0x0, 0x1);
        gbc.writeMem(0x21ea, { 0xf3 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xfb65, gbc.sp());
        EXPECT(0x21eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 006D
        gbc.setState(0x65de, 0x5a04, 0x89f0, 0xa3cd, 0x8fcd, 0xfbc8, 0x1, 0x1);
        gbc.writeMem(0x65de, { 0xf3 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x5a04, gbc.sp());
        EXPECT(0x65df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 006E
        gbc.setState(0xd48b, 0x650b, 0xc500, 0x8ae5, 0xebb1, 0xd5e4, 0x0, 0x0);
        gbc.writeMem(0xd48b, { 0xf3 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x650b, gbc.sp());
        EXPECT(0xd48c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd48b));
        // F3 006F
        gbc.setState(0x419, 0x782, 0xf850, 0x7419, 0xedf5, 0xdae0, 0x0, 0x1);
        gbc.writeMem(0x419, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x782, gbc.sp());
        EXPECT(0x41a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0070
        gbc.setState(0xd2b2, 0x8e48, 0x7460, 0xd2f1, 0x3192, 0x820a, 0x0, 0x0);
        gbc.writeMem(0xd2b2, { 0xf3 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x8e48, gbc.sp());
        EXPECT(0xd2b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd2b2));
        // F3 0071
        gbc.setState(0x71ae, 0x8e23, 0xaf60, 0x80f9, 0x412b, 0xd6f4, 0x0, 0x1);
        gbc.writeMem(0x71ae, { 0xf3 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x8e23, gbc.sp());
        EXPECT(0x71af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0072
        gbc.setState(0x2386, 0x2f86, 0x65e0, 0x1703, 0x718e, 0x803d, 0x0, 0x1);
        gbc.writeMem(0x2386, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x2f86, gbc.sp());
        EXPECT(0x2387, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0073
        gbc.setState(0xc35e, 0x2ca8, 0x7db0, 0x5400, 0xadf1, 0x71f0, 0x1, 0x0);
        gbc.writeMem(0xc35e, { 0xf3 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x2ca8, gbc.sp());
        EXPECT(0xc35f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc35e));
        // F3 0074
        gbc.setState(0x43e9, 0x994e, 0x5600, 0x765, 0xacd1, 0x61d6, 0x1, 0x1);
        gbc.writeMem(0x43e9, { 0xf3 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x994e, gbc.sp());
        EXPECT(0x43ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0075
        gbc.setState(0x882f, 0x3981, 0xffc0, 0x1a3c, 0x4678, 0x1b31, 0x1, 0x1);
        gbc.writeMem(0x882f, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x3981, gbc.sp());
        EXPECT(0x8830, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x882f));
        // F3 0076
        gbc.setState(0x210d, 0xa5, 0x3870, 0x3d06, 0x2d97, 0xa8d5, 0x1, 0x0);
        gbc.writeMem(0x210d, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xa5, gbc.sp());
        EXPECT(0x210e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0077
        gbc.setState(0x13e9, 0x60eb, 0x4670, 0x6f56, 0x2c9, 0x446, 0x1, 0x1);
        gbc.writeMem(0x13e9, { 0xf3 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x60eb, gbc.sp());
        EXPECT(0x13ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0078
        gbc.setState(0x1d4b, 0x7aaa, 0xe820, 0x14cc, 0x28db, 0xfc1b, 0x1, 0x0);
        gbc.writeMem(0x1d4b, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x7aaa, gbc.sp());
        EXPECT(0x1d4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0079
        gbc.setState(0x85fa, 0x3603, 0x6410, 0xeb7d, 0xd925, 0xbcd6, 0x1, 0x0);
        gbc.writeMem(0x85fa, { 0xf3 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x3603, gbc.sp());
        EXPECT(0x85fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x85fa));
        // F3 007A
        gbc.setState(0x62c7, 0xef94, 0x8290, 0x6963, 0xe97a, 0x9b0e, 0x1, 0x0);
        gbc.writeMem(0x62c7, { 0xf3 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xef94, gbc.sp());
        EXPECT(0x62c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 007B
        gbc.setState(0x4bb, 0x3057, 0x3ae0, 0x1f69, 0xad62, 0x4520, 0x1, 0x1);
        gbc.writeMem(0x4bb, { 0xf3 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x3057, gbc.sp());
        EXPECT(0x4bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 007C
        gbc.setState(0xb1b6, 0xe29a, 0xc5e0, 0x2428, 0xfb59, 0xc22b, 0x1, 0x1);
        gbc.writeMem(0xb1b6, { 0xf3 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe29a, gbc.sp());
        EXPECT(0xb1b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb1b6));
        // F3 007D
        gbc.setState(0x7efe, 0x5083, 0xba30, 0xc749, 0xf302, 0x15ea, 0x1, 0x0);
        gbc.writeMem(0x7efe, { 0xf3 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x5083, gbc.sp());
        EXPECT(0x7eff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 007E
        gbc.setState(0x43ba, 0x628a, 0x7810, 0x84a3, 0x93f, 0xc61d, 0x1, 0x0);
        gbc.writeMem(0x43ba, { 0xf3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x628a, gbc.sp());
        EXPECT(0x43bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 007F
        gbc.setState(0x6950, 0x8ba7, 0xa310, 0xc6da, 0x142e, 0x1ea5, 0x0, 0x0);
        gbc.writeMem(0x6950, { 0xf3 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x8ba7, gbc.sp());
        EXPECT(0x6951, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0081
        gbc.setState(0x9e49, 0xd353, 0xee60, 0xe7a5, 0x70b1, 0x5f9d, 0x1, 0x1);
        gbc.writeMem(0x9e49, { 0xf3 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xd353, gbc.sp());
        EXPECT(0x9e4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9e49));
        // F3 0083
        gbc.setState(0xb1e5, 0x1db4, 0x3290, 0x4bec, 0xa32f, 0x802a, 0x1, 0x0);
        gbc.writeMem(0xb1e5, { 0xf3 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x1db4, gbc.sp());
        EXPECT(0xb1e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb1e5));
        // F3 0084
        gbc.setState(0x878a, 0x10ac, 0x5310, 0xbbcd, 0x74ee, 0xcc46, 0x1, 0x1);
        gbc.writeMem(0x878a, { 0xf3 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x10ac, gbc.sp());
        EXPECT(0x878b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x878a));
        // F3 0085
        gbc.setState(0x9d3e, 0xead8, 0x7990, 0xfa7d, 0x35b1, 0xeb3a, 0x1, 0x1);
        gbc.writeMem(0x9d3e, { 0xf3 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xead8, gbc.sp());
        EXPECT(0x9d3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9d3e));
        // F3 0086
        gbc.setState(0x341a, 0xb1f1, 0xb220, 0x1d2e, 0xa998, 0xdb4e, 0x1, 0x0);
        gbc.writeMem(0x341a, { 0xf3 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xb1f1, gbc.sp());
        EXPECT(0x341b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0087
        gbc.setState(0x650b, 0x11ac, 0x6830, 0x33a5, 0xe3dc, 0xfa7e, 0x1, 0x1);
        gbc.writeMem(0x650b, { 0xf3 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x11ac, gbc.sp());
        EXPECT(0x650c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0088
        gbc.setState(0xb27c, 0xaa3f, 0x3e70, 0x2eca, 0xc0ab, 0x2d3e, 0x1, 0x1);
        gbc.writeMem(0xb27c, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xaa3f, gbc.sp());
        EXPECT(0xb27d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb27c));
        // F3 0089
        gbc.setState(0xcce6, 0x3ffa, 0xae50, 0xa0a4, 0xe200, 0xa24d, 0x0, 0x1);
        gbc.writeMem(0xcce6, { 0xf3 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x3ffa, gbc.sp());
        EXPECT(0xcce7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcce6));
        // F3 008A
        gbc.setState(0x618, 0x9911, 0x6290, 0xcaef, 0x78e4, 0xfc8a, 0x1, 0x0);
        gbc.writeMem(0x618, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x9911, gbc.sp());
        EXPECT(0x619, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 008B
        gbc.setState(0x7a1c, 0x9b3d, 0x3b60, 0x105e, 0xac2, 0x2dd8, 0x0, 0x0);
        gbc.writeMem(0x7a1c, { 0xf3 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x9b3d, gbc.sp());
        EXPECT(0x7a1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 008C
        gbc.setState(0x497d, 0x6157, 0xe280, 0xe967, 0x6084, 0xb441, 0x1, 0x1);
        gbc.writeMem(0x497d, { 0xf3 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x6157, gbc.sp());
        EXPECT(0x497e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 008D
        gbc.setState(0x167e, 0x4f49, 0x1dc0, 0x1593, 0x6638, 0xb69f, 0x0, 0x0);
        gbc.writeMem(0x167e, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4f49, gbc.sp());
        EXPECT(0x167f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 008E
        gbc.setState(0xd0ec, 0xa964, 0xcc20, 0xf764, 0xe369, 0x14fd, 0x0, 0x1);
        gbc.writeMem(0xd0ec, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xa964, gbc.sp());
        EXPECT(0xd0ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd0ec));
        // F3 008F
        gbc.setState(0x9c48, 0x171c, 0x75b0, 0x17f3, 0x1c1d, 0x70a9, 0x1, 0x1);
        gbc.writeMem(0x9c48, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x171c, gbc.sp());
        EXPECT(0x9c49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9c48));
        // F3 0090
        gbc.setState(0x6cc2, 0x953b, 0x5130, 0x2332, 0x6b48, 0x7777, 0x1, 0x1);
        gbc.writeMem(0x6cc2, { 0xf3 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x953b, gbc.sp());
        EXPECT(0x6cc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0091
        gbc.setState(0x8a12, 0x1fd, 0xa050, 0x7b7b, 0x339f, 0x1174, 0x0, 0x1);
        gbc.writeMem(0x8a12, { 0xf3 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x1fd, gbc.sp());
        EXPECT(0x8a13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8a12));
        // F3 0092
        gbc.setState(0x24ee, 0x1b90, 0x3a90, 0x1441, 0xc7e, 0x9d5e, 0x0, 0x0);
        gbc.writeMem(0x24ee, { 0xf3 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x1b90, gbc.sp());
        EXPECT(0x24ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0093
        gbc.setState(0xede7, 0x9916, 0x2b0, 0x9af1, 0x722c, 0x9c3c, 0x0, 0x0);
        gbc.writeMem(0xede7, { 0xf3 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x9916, gbc.sp());
        EXPECT(0xede8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xede7));
        // F3 0094
        gbc.setState(0xecd3, 0x4f3c, 0x7f80, 0xce34, 0xe507, 0x3441, 0x1, 0x1);
        gbc.writeMem(0xecd3, { 0xf3 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x4f3c, gbc.sp());
        EXPECT(0xecd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xecd3));
        // F3 0096
        gbc.setState(0xbaeb, 0x9712, 0x150, 0x228, 0xd425, 0xc648, 0x0, 0x0);
        gbc.writeMem(0xbaeb, { 0xf3 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x9712, gbc.sp());
        EXPECT(0xbaec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbaeb));
        // F3 0097
        gbc.setState(0x841a, 0xa951, 0x3e20, 0xd401, 0x3b06, 0x19f7, 0x1, 0x1);
        gbc.writeMem(0x841a, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa951, gbc.sp());
        EXPECT(0x841b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x841a));
        // F3 0098
        gbc.setState(0x9c39, 0x8c00, 0x4e10, 0xdf37, 0x6b17, 0xc728, 0x1, 0x1);
        gbc.writeMem(0x9c39, { 0xf3 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x8c00, gbc.sp());
        EXPECT(0x9c3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9c39));
        // F3 0099
        gbc.setState(0xcbe8, 0xe0cd, 0x9610, 0x9474, 0x452c, 0xe5bc, 0x1, 0x1);
        gbc.writeMem(0xcbe8, { 0xf3 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xe0cd, gbc.sp());
        EXPECT(0xcbe9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcbe8));
        // F3 009A
        gbc.setState(0x86c8, 0x8378, 0x5bd0, 0xaa6e, 0x9714, 0xe536, 0x1, 0x0);
        gbc.writeMem(0x86c8, { 0xf3 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8378, gbc.sp());
        EXPECT(0x86c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x86c8));
        // F3 009B
        gbc.setState(0xecc8, 0x74e1, 0x9c10, 0x3dd2, 0x17, 0x9c47, 0x1, 0x1);
        gbc.writeMem(0xecc8, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x74e1, gbc.sp());
        EXPECT(0xecc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xecc8));
        // F3 009C
        gbc.setState(0xb415, 0x9610, 0x3c0, 0xe89a, 0xe1ad, 0xec6, 0x0, 0x0);
        gbc.writeMem(0xb415, { 0xf3 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9610, gbc.sp());
        EXPECT(0xb416, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb415));
        // F3 009D
        gbc.setState(0xe9c3, 0xe073, 0xce20, 0xf781, 0x2ccc, 0xfd88, 0x1, 0x1);
        gbc.writeMem(0xe9c3, { 0xf3 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xe073, gbc.sp());
        EXPECT(0xe9c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe9c3));
        // F3 009E
        gbc.setState(0x4581, 0x6bfe, 0xd940, 0x200a, 0xc6b4, 0xcdad, 0x0, 0x1);
        gbc.writeMem(0x4581, { 0xf3 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x6bfe, gbc.sp());
        EXPECT(0x4582, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 009F
        gbc.setState(0xba95, 0x6b39, 0x80a0, 0xc3fc, 0x6524, 0x501a, 0x0, 0x1);
        gbc.writeMem(0xba95, { 0xf3 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x6b39, gbc.sp());
        EXPECT(0xba96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xba95));
        // F3 00A0
        gbc.setState(0xc24a, 0xd985, 0x73b0, 0xdc81, 0xe29f, 0xac3, 0x1, 0x0);
        gbc.writeMem(0xc24a, { 0xf3 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xd985, gbc.sp());
        EXPECT(0xc24b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc24a));
        // F3 00A1
        gbc.setState(0xc166, 0x1947, 0xdb30, 0x5146, 0x1d91, 0x3860, 0x1, 0x1);
        gbc.writeMem(0xc166, { 0xf3 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x1947, gbc.sp());
        EXPECT(0xc167, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc166));
        // F3 00A2
        gbc.setState(0xb6fd, 0xbd41, 0x5ba0, 0x3ef6, 0xd5e6, 0x16f4, 0x1, 0x0);
        gbc.writeMem(0xb6fd, { 0xf3 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xbd41, gbc.sp());
        EXPECT(0xb6fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb6fd));
        // F3 00A3
        gbc.setState(0xc279, 0x375e, 0x8350, 0x5587, 0x2203, 0x7f0f, 0x0, 0x0);
        gbc.writeMem(0xc279, { 0xf3 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x375e, gbc.sp());
        EXPECT(0xc27a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc279));
        // F3 00A4
        gbc.setState(0xa1da, 0x5e24, 0xa020, 0xf187, 0xd1e9, 0xf9d7, 0x0, 0x1);
        gbc.writeMem(0xa1da, { 0xf3 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x5e24, gbc.sp());
        EXPECT(0xa1db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa1da));
        // F3 00A5
        gbc.setState(0xa967, 0xb2ca, 0x9d40, 0x32fd, 0x3286, 0x6041, 0x0, 0x1);
        gbc.writeMem(0xa967, { 0xf3 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xb2ca, gbc.sp());
        EXPECT(0xa968, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa967));
        // F3 00A7
        gbc.setState(0x95cc, 0xa792, 0x4230, 0x305, 0x42f0, 0xeb3f, 0x1, 0x1);
        gbc.writeMem(0x95cc, { 0xf3 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa792, gbc.sp());
        EXPECT(0x95cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x95cc));
        // F3 00A8
        gbc.setState(0xb51b, 0xc3d4, 0xd120, 0xa0b2, 0x496c, 0xde48, 0x0, 0x1);
        gbc.writeMem(0xb51b, { 0xf3 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xc3d4, gbc.sp());
        EXPECT(0xb51c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb51b));
        // F3 00A9
        gbc.setState(0x7e24, 0xb818, 0x3e70, 0xd683, 0x40b1, 0xb1ef, 0x0, 0x1);
        gbc.writeMem(0x7e24, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xb818, gbc.sp());
        EXPECT(0x7e25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00AA
        gbc.setState(0xeaa8, 0xb9c9, 0xe240, 0x2c50, 0x8e9b, 0x8e1b, 0x0, 0x1);
        gbc.writeMem(0xeaa8, { 0xf3 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xb9c9, gbc.sp());
        EXPECT(0xeaa9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xeaa8));
        // F3 00AB
        gbc.setState(0x976b, 0x50c5, 0xd20, 0xe379, 0xf0a3, 0xc663, 0x1, 0x0);
        gbc.writeMem(0x976b, { 0xf3 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x50c5, gbc.sp());
        EXPECT(0x976c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x976b));
        // F3 00AC
        gbc.setState(0x33b8, 0x9070, 0xbfa0, 0xb70a, 0x8a4a, 0x5275, 0x1, 0x0);
        gbc.writeMem(0x33b8, { 0xf3 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x9070, gbc.sp());
        EXPECT(0x33b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00AD
        gbc.setState(0x4990, 0x7f87, 0xbc90, 0x1ab9, 0x4bd0, 0xf85e, 0x1, 0x0);
        gbc.writeMem(0x4990, { 0xf3 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x7f87, gbc.sp());
        EXPECT(0x4991, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00AE
        gbc.setState(0x71fb, 0xb64a, 0x9840, 0x954e, 0x6fb4, 0x277d, 0x0, 0x0);
        gbc.writeMem(0x71fb, { 0xf3 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xb64a, gbc.sp());
        EXPECT(0x71fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00AF
        gbc.setState(0x4ac, 0x7682, 0xb850, 0xb377, 0xb617, 0x6405, 0x0, 0x0);
        gbc.writeMem(0x4ac, { 0xf3 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x7682, gbc.sp());
        EXPECT(0x4ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00B0
        gbc.setState(0x1886, 0x5c32, 0x1950, 0x6842, 0xd7fd, 0xb8b7, 0x1, 0x1);
        gbc.writeMem(0x1886, { 0xf3 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x5c32, gbc.sp());
        EXPECT(0x1887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00B1
        gbc.setState(0x3847, 0xd1e1, 0xe500, 0x2359, 0x7b84, 0x2e90, 0x1, 0x1);
        gbc.writeMem(0x3847, { 0xf3 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xd1e1, gbc.sp());
        EXPECT(0x3848, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00B2
        gbc.setState(0x96fe, 0xc5f9, 0xdf60, 0xe8d1, 0x3c02, 0xf03c, 0x1, 0x0);
        gbc.writeMem(0x96fe, { 0xf3 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xc5f9, gbc.sp());
        EXPECT(0x96ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x96fe));
        // F3 00B3
        gbc.setState(0x638a, 0xcdfc, 0xe6d0, 0xcb0f, 0xa13c, 0x8f86, 0x0, 0x1);
        gbc.writeMem(0x638a, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xcdfc, gbc.sp());
        EXPECT(0x638b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00B4
        gbc.setState(0x8164, 0xfaf, 0x25a0, 0xba2b, 0xf00c, 0xe04, 0x1, 0x0);
        gbc.writeMem(0x8164, { 0xf3 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xfaf, gbc.sp());
        EXPECT(0x8165, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8164));
        // F3 00B5
        gbc.setState(0x7d3b, 0xa085, 0x2040, 0xb977, 0xcdc8, 0x2dec, 0x1, 0x0);
        gbc.writeMem(0x7d3b, { 0xf3 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xa085, gbc.sp());
        EXPECT(0x7d3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00B6
        gbc.setState(0xcb15, 0x34c5, 0x53c0, 0x14c, 0xa918, 0x3ff9, 0x1, 0x0);
        gbc.writeMem(0xcb15, { 0xf3 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x34c5, gbc.sp());
        EXPECT(0xcb16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcb15));
        // F3 00B7
        gbc.setState(0xf7, 0x5a24, 0x38c0, 0x44db, 0x887c, 0x1fbb, 0x0, 0x0);
        gbc.writeMem(0xf7, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5a24, gbc.sp());
        EXPECT(0xf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00B9
        gbc.setState(0xca1f, 0xdc69, 0xbe0, 0xe861, 0x2713, 0x6911, 0x1, 0x1);
        gbc.writeMem(0xca1f, { 0xf3 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xdc69, gbc.sp());
        EXPECT(0xca20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xca1f));
        // F3 00BA
        gbc.setState(0x5c09, 0x34f9, 0x55b0, 0xb4c6, 0xb7fa, 0xc3c4, 0x1, 0x0);
        gbc.writeMem(0x5c09, { 0xf3 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x34f9, gbc.sp());
        EXPECT(0x5c0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00BB
        gbc.setState(0xb8f4, 0x3b07, 0x32e0, 0x919c, 0xca13, 0xeeb7, 0x1, 0x0);
        gbc.writeMem(0xb8f4, { 0xf3 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x3b07, gbc.sp());
        EXPECT(0xb8f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb8f4));
        // F3 00BC
        gbc.setState(0xadfa, 0xee1e, 0x1cc0, 0x179c, 0x1cfd, 0x62aa, 0x1, 0x0);
        gbc.writeMem(0xadfa, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xee1e, gbc.sp());
        EXPECT(0xadfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xadfa));
        // F3 00BD
        gbc.setState(0x5ebc, 0xa13a, 0xce30, 0xd57c, 0xacd8, 0xb5b8, 0x1, 0x0);
        gbc.writeMem(0x5ebc, { 0xf3 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xa13a, gbc.sp());
        EXPECT(0x5ebd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00BE
        gbc.setState(0xcaa1, 0xb4c2, 0x44c0, 0xd0ea, 0x43be, 0x60ca, 0x1, 0x1);
        gbc.writeMem(0xcaa1, { 0xf3 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xb4c2, gbc.sp());
        EXPECT(0xcaa2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcaa1));
        // F3 00BF
        gbc.setState(0x49f4, 0xa0, 0x1020, 0x16b1, 0xda15, 0x27f3, 0x1, 0x1);
        gbc.writeMem(0x49f4, { 0xf3 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xa0, gbc.sp());
        EXPECT(0x49f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00C0
        gbc.setState(0x8c3f, 0x42ec, 0xe8a0, 0x2ca, 0x2f14, 0x661a, 0x1, 0x1);
        gbc.writeMem(0x8c3f, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x42ec, gbc.sp());
        EXPECT(0x8c40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8c3f));
        // F3 00C1
        gbc.setState(0x9534, 0x8e69, 0x2560, 0xb88e, 0x902, 0xa703, 0x1, 0x0);
        gbc.writeMem(0x9534, { 0xf3 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x8e69, gbc.sp());
        EXPECT(0x9535, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9534));
        // F3 00C2
        gbc.setState(0x8230, 0x5a66, 0xc3e0, 0xa7d5, 0x14c6, 0x710d, 0x1, 0x0);
        gbc.writeMem(0x8230, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x5a66, gbc.sp());
        EXPECT(0x8231, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8230));
        // F3 00C3
        gbc.setState(0x34bb, 0xdd38, 0x4130, 0xb4a7, 0xb0f4, 0x4158, 0x0, 0x0);
        gbc.writeMem(0x34bb, { 0xf3 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xdd38, gbc.sp());
        EXPECT(0x34bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00C4
        gbc.setState(0x3b8b, 0x4a60, 0x7270, 0xed24, 0xf26c, 0x21f4, 0x0, 0x0);
        gbc.writeMem(0x3b8b, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x4a60, gbc.sp());
        EXPECT(0x3b8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00C5
        gbc.setState(0xd339, 0xe9d3, 0x5750, 0xdbed, 0x5451, 0x177a, 0x0, 0x1);
        gbc.writeMem(0xd339, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xe9d3, gbc.sp());
        EXPECT(0xd33a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd339));
        // F3 00C6
        gbc.setState(0x2888, 0xce5, 0xf900, 0x13e5, 0xf8d9, 0x4f2e, 0x0, 0x1);
        gbc.writeMem(0x2888, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xce5, gbc.sp());
        EXPECT(0x2889, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00C7
        gbc.setState(0xd915, 0x2b1a, 0x630, 0x6a7a, 0xf06a, 0x7254, 0x1, 0x0);
        gbc.writeMem(0xd915, { 0xf3 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x2b1a, gbc.sp());
        EXPECT(0xd916, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd915));
        // F3 00C8
        gbc.setState(0x3495, 0x2afb, 0x15c0, 0xe5f8, 0x54db, 0x9e86, 0x0, 0x1);
        gbc.writeMem(0x3495, { 0xf3 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x2afb, gbc.sp());
        EXPECT(0x3496, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00C9
        gbc.setState(0x7e7c, 0x9ccf, 0xeb0, 0x312a, 0xbcc6, 0x9b6f, 0x0, 0x0);
        gbc.writeMem(0x7e7c, { 0xf3 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x9ccf, gbc.sp());
        EXPECT(0x7e7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00CA
        gbc.setState(0x8217, 0x26aa, 0xbab0, 0xe1f, 0x438e, 0x2cd0, 0x1, 0x1);
        gbc.writeMem(0x8217, { 0xf3 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x26aa, gbc.sp());
        EXPECT(0x8218, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8217));
        // F3 00CB
        gbc.setState(0xfcd, 0xcb08, 0xa320, 0x20ea, 0x3a2, 0x9b1f, 0x1, 0x1);
        gbc.writeMem(0xfcd, { 0xf3 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xcb08, gbc.sp());
        EXPECT(0xfce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00CC
        gbc.setState(0xc836, 0x3489, 0x520, 0x6dc3, 0xb126, 0xbbd, 0x1, 0x0);
        gbc.writeMem(0xc836, { 0xf3 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x3489, gbc.sp());
        EXPECT(0xc837, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc836));
        // F3 00CD
        gbc.setState(0xabb2, 0xf3f1, 0x550, 0x9f2a, 0x6f34, 0x3b70, 0x0, 0x1);
        gbc.writeMem(0xabb2, { 0xf3 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xf3f1, gbc.sp());
        EXPECT(0xabb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xabb2));
        // F3 00CE
        gbc.setState(0x1c64, 0x1a79, 0x91d0, 0x496d, 0x4f8c, 0xe83d, 0x0, 0x1);
        gbc.writeMem(0x1c64, { 0xf3 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x1a79, gbc.sp());
        EXPECT(0x1c65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00CF
        gbc.setState(0x3577, 0xf61, 0x92f0, 0x7bff, 0xac11, 0x72aa, 0x1, 0x1);
        gbc.writeMem(0x3577, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xf61, gbc.sp());
        EXPECT(0x3578, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D0
        gbc.setState(0x15a4, 0xe38, 0x5e60, 0x1977, 0xb845, 0x8607, 0x1, 0x1);
        gbc.writeMem(0x15a4, { 0xf3 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe38, gbc.sp());
        EXPECT(0x15a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00D1
        gbc.setState(0x55c4, 0x8da, 0x5390, 0x1970, 0xf5fd, 0x29bd, 0x0, 0x0);
        gbc.writeMem(0x55c4, { 0xf3 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8da, gbc.sp());
        EXPECT(0x55c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D2
        gbc.setState(0x30c8, 0x5457, 0x3660, 0x589b, 0xf544, 0x5e41, 0x0, 0x0);
        gbc.writeMem(0x30c8, { 0xf3 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x5457, gbc.sp());
        EXPECT(0x30c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00D3
        gbc.setState(0x2ac0, 0xa000, 0xc210, 0xa7ca, 0x424b, 0x964e, 0x0, 0x0);
        gbc.writeMem(0x2ac0, { 0xf3 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xa000, gbc.sp());
        EXPECT(0x2ac1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D4
        gbc.setState(0x5289, 0xa54c, 0x8db0, 0xa693, 0xbe85, 0x11d, 0x1, 0x1);
        gbc.writeMem(0x5289, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xa54c, gbc.sp());
        EXPECT(0x528a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D5
        gbc.setState(0x4b92, 0x92f8, 0x1870, 0x747e, 0x678e, 0x5ee3, 0x0, 0x1);
        gbc.writeMem(0x4b92, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x92f8, gbc.sp());
        EXPECT(0x4b93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D6
        gbc.setState(0x10db, 0x78a4, 0xb0c0, 0x5197, 0x52d9, 0x9c30, 0x0, 0x1);
        gbc.writeMem(0x10db, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x78a4, gbc.sp());
        EXPECT(0x10dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00D7
        gbc.setState(0x3270, 0x6bcc, 0x5a50, 0x5724, 0xe1d2, 0xcb9d, 0x0, 0x1);
        gbc.writeMem(0x3270, { 0xf3 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x6bcc, gbc.sp());
        EXPECT(0x3271, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D8
        gbc.setState(0x5d9, 0xa6c1, 0x4cd0, 0x55f9, 0x1695, 0xd950, 0x1, 0x1);
        gbc.writeMem(0x5d9, { 0xf3 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xa6c1, gbc.sp());
        EXPECT(0x5da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00D9
        gbc.setState(0x3780, 0x30b, 0x8910, 0x2eb0, 0x7065, 0xf853, 0x0, 0x0);
        gbc.writeMem(0x3780, { 0xf3 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x30b, gbc.sp());
        EXPECT(0x3781, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00DA
        gbc.setState(0x26be, 0x4bf1, 0x9fe0, 0x8e84, 0xc503, 0x1684, 0x0, 0x1);
        gbc.writeMem(0x26be, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x4bf1, gbc.sp());
        EXPECT(0x26bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00DB
        gbc.setState(0x8557, 0x4114, 0xd30, 0x2fb5, 0x72b2, 0x9605, 0x0, 0x0);
        gbc.writeMem(0x8557, { 0xf3 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x4114, gbc.sp());
        EXPECT(0x8558, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8557));
        // F3 00DC
        gbc.setState(0x7690, 0xad3e, 0xe090, 0x2d2d, 0x7510, 0x4d37, 0x0, 0x0);
        gbc.writeMem(0x7690, { 0xf3 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xad3e, gbc.sp());
        EXPECT(0x7691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00DD
        gbc.setState(0x3ad6, 0xc2bb, 0x4a0, 0xb28b, 0xffca, 0x511d, 0x0, 0x1);
        gbc.writeMem(0x3ad6, { 0xf3 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xc2bb, gbc.sp());
        EXPECT(0x3ad7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00DE
        gbc.setState(0xd4bc, 0x81c9, 0x3f10, 0x35e9, 0x87ca, 0x1e28, 0x1, 0x1);
        gbc.writeMem(0xd4bc, { 0xf3 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x81c9, gbc.sp());
        EXPECT(0xd4bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd4bc));
        // F3 00DF
        gbc.setState(0x8d68, 0x1854, 0x6ec0, 0xa2ac, 0x4da8, 0xbb24, 0x0, 0x0);
        gbc.writeMem(0x8d68, { 0xf3 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x1854, gbc.sp());
        EXPECT(0x8d69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8d68));
        // F3 00E0
        gbc.setState(0xb8fd, 0xc715, 0x30c0, 0xdbf6, 0x3902, 0x73bd, 0x1, 0x1);
        gbc.writeMem(0xb8fd, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc715, gbc.sp());
        EXPECT(0xb8fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb8fd));
        // F3 00E1
        gbc.setState(0x309a, 0x5136, 0x6fb0, 0x7dd8, 0x3479, 0xd7e6, 0x0, 0x0);
        gbc.writeMem(0x309a, { 0xf3 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5136, gbc.sp());
        EXPECT(0x309b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00E2
        gbc.setState(0x30ec, 0xef22, 0xf190, 0xa548, 0x31cc, 0x996f, 0x1, 0x1);
        gbc.writeMem(0x30ec, { 0xf3 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xef22, gbc.sp());
        EXPECT(0x30ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00E3
        gbc.setState(0xe7de, 0xd8fb, 0x5840, 0xc907, 0xb67e, 0xc7c6, 0x0, 0x1);
        gbc.writeMem(0xe7de, { 0xf3 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xd8fb, gbc.sp());
        EXPECT(0xe7df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe7de));
        // F3 00E4
        gbc.setState(0x55a4, 0x4fe6, 0x4790, 0x50d5, 0x3cc4, 0xb6dc, 0x1, 0x1);
        gbc.writeMem(0x55a4, { 0xf3 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x4fe6, gbc.sp());
        EXPECT(0x55a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00E5
        gbc.setState(0x5fa9, 0xc4c2, 0x65c0, 0x39fa, 0x1687, 0x88c3, 0x1, 0x0);
        gbc.writeMem(0x5fa9, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xc4c2, gbc.sp());
        EXPECT(0x5faa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00E6
        gbc.setState(0xb8a6, 0x4484, 0xacb0, 0x530e, 0x4433, 0xe6f3, 0x0, 0x0);
        gbc.writeMem(0xb8a6, { 0xf3 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4484, gbc.sp());
        EXPECT(0xb8a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb8a6));
        // F3 00E8
        gbc.setState(0x1b78, 0x1df7, 0xc3b0, 0x6d7e, 0xcb18, 0xd8d0, 0x1, 0x0);
        gbc.writeMem(0x1b78, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1df7, gbc.sp());
        EXPECT(0x1b79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00E9
        gbc.setState(0x6297, 0x4038, 0x2f60, 0xb8c8, 0x99ed, 0xe95f, 0x0, 0x0);
        gbc.writeMem(0x6297, { 0xf3 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x4038, gbc.sp());
        EXPECT(0x6298, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00EA
        gbc.setState(0x58c1, 0xbba1, 0x7590, 0x8150, 0x63fa, 0xc129, 0x1, 0x1);
        gbc.writeMem(0x58c1, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xbba1, gbc.sp());
        EXPECT(0x58c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00EB
        gbc.setState(0xa6cb, 0x794a, 0x8d60, 0x63f8, 0x7530, 0x7a43, 0x0, 0x0);
        gbc.writeMem(0xa6cb, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x794a, gbc.sp());
        EXPECT(0xa6cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa6cb));
        // F3 00EC
        gbc.setState(0x6a2e, 0xe85d, 0x2520, 0x4553, 0x5543, 0x545d, 0x0, 0x0);
        gbc.writeMem(0x6a2e, { 0xf3 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xe85d, gbc.sp());
        EXPECT(0x6a2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00ED
        gbc.setState(0xed1f, 0x8a9f, 0x2dc0, 0x4518, 0x256d, 0x52a4, 0x1, 0x1);
        gbc.writeMem(0xed1f, { 0xf3 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x8a9f, gbc.sp());
        EXPECT(0xed20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed1f));
        // F3 00EE
        gbc.setState(0xe39f, 0x2d65, 0xff70, 0xb370, 0xae4f, 0xe3ca, 0x0, 0x1);
        gbc.writeMem(0xe39f, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x2d65, gbc.sp());
        EXPECT(0xe3a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe39f));
        // F3 00EF
        gbc.setState(0x9cc9, 0xc4fa, 0x17d0, 0x8ca0, 0xfdf8, 0xed45, 0x1, 0x1);
        gbc.writeMem(0x9cc9, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xc4fa, gbc.sp());
        EXPECT(0x9cca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9cc9));
        // F3 00F0
        gbc.setState(0x25aa, 0xbd75, 0x6510, 0xee08, 0x393e, 0x935f, 0x1, 0x1);
        gbc.writeMem(0x25aa, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xbd75, gbc.sp());
        EXPECT(0x25ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00F1
        gbc.setState(0x523f, 0x1aa1, 0x96c0, 0xbff3, 0xa74e, 0x4a8b, 0x0, 0x1);
        gbc.writeMem(0x523f, { 0xf3 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x1aa1, gbc.sp());
        EXPECT(0x5240, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00F2
        gbc.setState(0x30d8, 0x159e, 0x6d40, 0x711c, 0x9d63, 0x56d3, 0x1, 0x0);
        gbc.writeMem(0x30d8, { 0xf3 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x159e, gbc.sp());
        EXPECT(0x30d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00F3
        gbc.setState(0xb2ba, 0x5209, 0xa490, 0x3aae, 0x173c, 0x5a8e, 0x0, 0x1);
        gbc.writeMem(0xb2ba, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x5209, gbc.sp());
        EXPECT(0xb2bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb2ba));
        // F3 00F4
        gbc.setState(0x7792, 0x9db9, 0x8630, 0xb28b, 0xd13d, 0xd3dd, 0x1, 0x1);
        gbc.writeMem(0x7792, { 0xf3 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x9db9, gbc.sp());
        EXPECT(0x7793, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00F5
        gbc.setState(0xe5ba, 0x488b, 0x23b0, 0xc18c, 0x920, 0x4b2a, 0x0, 0x1);
        gbc.writeMem(0xe5ba, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x488b, gbc.sp());
        EXPECT(0xe5bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe5ba));
        // F3 00F6
        gbc.setState(0x3937, 0xadac, 0x5100, 0x1eae, 0x6b20, 0xda2a, 0x0, 0x0);
        gbc.writeMem(0x3937, { 0xf3 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xadac, gbc.sp());
        EXPECT(0x3938, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 00F7
        gbc.setState(0xce7c, 0x1f2b, 0x2c80, 0x784d, 0xd70e, 0xc082, 0x1, 0x0);
        gbc.writeMem(0xce7c, { 0xf3 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1f2b, gbc.sp());
        EXPECT(0xce7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xce7c));
        // F3 00F8
        gbc.setState(0xe466, 0x1d0b, 0xf6a0, 0x229f, 0xa9da, 0xb33, 0x0, 0x1);
        gbc.writeMem(0xe466, { 0xf3 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1d0b, gbc.sp());
        EXPECT(0xe467, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe466));
        // F3 00F9
        gbc.setState(0xb4e2, 0xb0aa, 0xe7a0, 0x8852, 0x743a, 0xceab, 0x1, 0x0);
        gbc.writeMem(0xb4e2, { 0xf3 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xb0aa, gbc.sp());
        EXPECT(0xb4e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb4e2));
        // F3 00FA
        gbc.setState(0x86f, 0x2ae9, 0x2b30, 0x6bee, 0x3020, 0xf739, 0x1, 0x1);
        gbc.writeMem(0x86f, { 0xf3 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x2ae9, gbc.sp());
        EXPECT(0x870, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00FB
        gbc.setState(0x813c, 0x479f, 0x2ca0, 0x4a7e, 0x4d54, 0x29f8, 0x0, 0x1);
        gbc.writeMem(0x813c, { 0xf3 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x479f, gbc.sp());
        EXPECT(0x813d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x813c));
        // F3 00FC
        gbc.setState(0x8a8, 0xfc24, 0xdc90, 0xe3d7, 0x1f30, 0x74da, 0x1, 0x1);
        gbc.writeMem(0x8a8, { 0xf3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xfc24, gbc.sp());
        EXPECT(0x8a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 00FD
        gbc.setState(0xe728, 0xeb90, 0x3190, 0xada5, 0x97ec, 0x16d6, 0x0, 0x1);
        gbc.writeMem(0xe728, { 0xf3 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xeb90, gbc.sp());
        EXPECT(0xe729, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe728));
        // F3 00FF
        gbc.setState(0x2ee1, 0x4b3d, 0xb080, 0xe566, 0x3910, 0x26b7, 0x0, 0x0);
        gbc.writeMem(0x2ee1, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x4b3d, gbc.sp());
        EXPECT(0x2ee2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0100
        gbc.setState(0x206d, 0xdaaa, 0xf2c0, 0x9c8f, 0xf46f, 0xcb91, 0x0, 0x0);
        gbc.writeMem(0x206d, { 0xf3 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xdaaa, gbc.sp());
        EXPECT(0x206e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0102
        gbc.setState(0xa095, 0x660b, 0xf6c0, 0x228a, 0x7f8a, 0x14c8, 0x0, 0x0);
        gbc.writeMem(0xa095, { 0xf3 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x660b, gbc.sp());
        EXPECT(0xa096, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa095));
        // F3 0104
        gbc.setState(0xdd5a, 0xf1, 0x6ce0, 0x13d3, 0x9d2, 0xfe62, 0x0, 0x1);
        gbc.writeMem(0xdd5a, { 0xf3 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xf1, gbc.sp());
        EXPECT(0xdd5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdd5a));
        // F3 0105
        gbc.setState(0x7644, 0x2158, 0x4cf0, 0xf124, 0xee8, 0x3c35, 0x0, 0x0);
        gbc.writeMem(0x7644, { 0xf3 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x2158, gbc.sp());
        EXPECT(0x7645, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0106
        gbc.setState(0x6bce, 0xb00e, 0x94a0, 0xc5b2, 0xa3ee, 0x210b, 0x0, 0x0);
        gbc.writeMem(0x6bce, { 0xf3 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xb00e, gbc.sp());
        EXPECT(0x6bcf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0107
        gbc.setState(0xab66, 0x57c4, 0x81e0, 0xfccc, 0x107f, 0xa5c1, 0x0, 0x1);
        gbc.writeMem(0xab66, { 0xf3 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x57c4, gbc.sp());
        EXPECT(0xab67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xab66));
        // F3 0108
        gbc.setState(0x2690, 0x4e8d, 0x7800, 0xa78f, 0x68a6, 0xf413, 0x1, 0x1);
        gbc.writeMem(0x2690, { 0xf3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x4e8d, gbc.sp());
        EXPECT(0x2691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0109
        gbc.setState(0x7505, 0x1d78, 0x8240, 0x59e0, 0x11e7, 0x1c07, 0x0, 0x0);
        gbc.writeMem(0x7505, { 0xf3 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x1d78, gbc.sp());
        EXPECT(0x7506, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 010A
        gbc.setState(0xd475, 0x15ca, 0x5740, 0xdd97, 0x74f3, 0xb7ff, 0x1, 0x1);
        gbc.writeMem(0xd475, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x15ca, gbc.sp());
        EXPECT(0xd476, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd475));
        // F3 010B
        gbc.setState(0x2417, 0xc1f2, 0x1670, 0x6c0, 0x15a0, 0xbfcc, 0x0, 0x0);
        gbc.writeMem(0x2417, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xc1f2, gbc.sp());
        EXPECT(0x2418, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 010C
        gbc.setState(0x431f, 0x7878, 0x3b0, 0xa253, 0xd658, 0x9a86, 0x1, 0x1);
        gbc.writeMem(0x431f, { 0xf3 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7878, gbc.sp());
        EXPECT(0x4320, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 010D
        gbc.setState(0x9e7f, 0xe525, 0x8920, 0xc1d7, 0xd6ca, 0x1140, 0x1, 0x1);
        gbc.writeMem(0x9e7f, { 0xf3 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xe525, gbc.sp());
        EXPECT(0x9e80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9e7f));
        // F3 010E
        gbc.setState(0xc6cc, 0xda5d, 0xc9b0, 0x51c3, 0x9ff5, 0xbe17, 0x0, 0x1);
        gbc.writeMem(0xc6cc, { 0xf3 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xda5d, gbc.sp());
        EXPECT(0xc6cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc6cc));
        // F3 010F
        gbc.setState(0x35b2, 0xb5ef, 0xdff0, 0x7a2b, 0x2b11, 0x462c, 0x1, 0x1);
        gbc.writeMem(0x35b2, { 0xf3 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xb5ef, gbc.sp());
        EXPECT(0x35b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0110
        gbc.setState(0x120, 0xba4e, 0xf330, 0x247a, 0xf11b, 0x583, 0x1, 0x0);
        gbc.writeMem(0x120, { 0xf3 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xba4e, gbc.sp());
        EXPECT(0x121, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0111
        gbc.setState(0x4855, 0xdeec, 0x1770, 0xe634, 0x289f, 0x143, 0x1, 0x0);
        gbc.writeMem(0x4855, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xdeec, gbc.sp());
        EXPECT(0x4856, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0112
        gbc.setState(0x5d12, 0xc364, 0x5d30, 0x1a36, 0x7e9c, 0x34f6, 0x0, 0x1);
        gbc.writeMem(0x5d12, { 0xf3 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xc364, gbc.sp());
        EXPECT(0x5d13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0113
        gbc.setState(0x9ca6, 0xd73a, 0xc130, 0x6bb, 0x975c, 0x141d, 0x1, 0x0);
        gbc.writeMem(0x9ca6, { 0xf3 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xd73a, gbc.sp());
        EXPECT(0x9ca7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9ca6));
        // F3 0114
        gbc.setState(0xa55b, 0x2393, 0x9f20, 0x8785, 0xadf1, 0xa653, 0x1, 0x0);
        gbc.writeMem(0xa55b, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x2393, gbc.sp());
        EXPECT(0xa55c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa55b));
        // F3 0115
        gbc.setState(0x8646, 0x39bf, 0xe920, 0x1c6c, 0x9f50, 0x6ed4, 0x1, 0x1);
        gbc.writeMem(0x8646, { 0xf3 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x39bf, gbc.sp());
        EXPECT(0x8647, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8646));
        // F3 0116
        gbc.setState(0x79a0, 0xe138, 0xcc30, 0xb7e5, 0xf383, 0x9425, 0x1, 0x1);
        gbc.writeMem(0x79a0, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe138, gbc.sp());
        EXPECT(0x79a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0117
        gbc.setState(0x8f8c, 0xfb0c, 0x45e0, 0x6dbc, 0xe940, 0xd0, 0x0, 0x0);
        gbc.writeMem(0x8f8c, { 0xf3 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xfb0c, gbc.sp());
        EXPECT(0x8f8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8f8c));
        // F3 0118
        gbc.setState(0xaa71, 0x2370, 0x7f60, 0x52d4, 0x20a0, 0x3c39, 0x1, 0x1);
        gbc.writeMem(0xaa71, { 0xf3 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x2370, gbc.sp());
        EXPECT(0xaa72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaa71));
        // F3 0119
        gbc.setState(0x7863, 0x4539, 0x470, 0x9e8b, 0xe925, 0x8399, 0x0, 0x0);
        gbc.writeMem(0x7863, { 0xf3 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x4539, gbc.sp());
        EXPECT(0x7864, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 011A
        gbc.setState(0x757c, 0x92a5, 0xafc0, 0x419f, 0x8a44, 0xa7e5, 0x0, 0x1);
        gbc.writeMem(0x757c, { 0xf3 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x92a5, gbc.sp());
        EXPECT(0x757d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 011C
        gbc.setState(0xe567, 0xeb89, 0x7290, 0xb466, 0x4f7, 0x29b7, 0x1, 0x1);
        gbc.writeMem(0xe567, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xeb89, gbc.sp());
        EXPECT(0xe568, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe567));
        // F3 011E
        gbc.setState(0x5e17, 0x5d12, 0xfc40, 0xeeb8, 0x3f56, 0x6e6b, 0x0, 0x0);
        gbc.writeMem(0x5e17, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x5d12, gbc.sp());
        EXPECT(0x5e18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 011F
        gbc.setState(0xc333, 0xdd02, 0xbdd0, 0xcabc, 0x4097, 0x88b7, 0x0, 0x1);
        gbc.writeMem(0xc333, { 0xf3 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xdd02, gbc.sp());
        EXPECT(0xc334, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc333));
        // F3 0120
        gbc.setState(0x390, 0x959b, 0xdc80, 0x2682, 0x99, 0x9af8, 0x0, 0x1);
        gbc.writeMem(0x390, { 0xf3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x959b, gbc.sp());
        EXPECT(0x391, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0121
        gbc.setState(0x49f, 0x404f, 0xf440, 0x4f70, 0xcb51, 0x624f, 0x0, 0x1);
        gbc.writeMem(0x49f, { 0xf3 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x404f, gbc.sp());
        EXPECT(0x4a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0122
        gbc.setState(0xb38c, 0x10d0, 0x10a0, 0xacaa, 0xf6b0, 0x8b88, 0x0, 0x0);
        gbc.writeMem(0xb38c, { 0xf3 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x10d0, gbc.sp());
        EXPECT(0xb38d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb38c));
        // F3 0123
        gbc.setState(0xd76e, 0x80e6, 0xd600, 0xaf0f, 0xee53, 0x39de, 0x0, 0x0);
        gbc.writeMem(0xd76e, { 0xf3 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x80e6, gbc.sp());
        EXPECT(0xd76f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd76e));
        // F3 0124
        gbc.setState(0x8efb, 0xf06c, 0x8140, 0x7172, 0x2e4a, 0x79de, 0x0, 0x0);
        gbc.writeMem(0x8efb, { 0xf3 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xf06c, gbc.sp());
        EXPECT(0x8efc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8efb));
        // F3 0125
        gbc.setState(0x91ed, 0x5377, 0x570, 0xff21, 0x50aa, 0x6f5e, 0x0, 0x0);
        gbc.writeMem(0x91ed, { 0xf3 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x5377, gbc.sp());
        EXPECT(0x91ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x91ed));
        // F3 0126
        gbc.setState(0x9769, 0xc66, 0xc810, 0xb8a3, 0xaccb, 0x99c0, 0x0, 0x0);
        gbc.writeMem(0x9769, { 0xf3 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xc66, gbc.sp());
        EXPECT(0x976a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9769));
        // F3 0127
        gbc.setState(0xd9d1, 0x8842, 0x8e10, 0xafe2, 0x8212, 0x39d1, 0x1, 0x1);
        gbc.writeMem(0xd9d1, { 0xf3 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x8842, gbc.sp());
        EXPECT(0xd9d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd9d1));
        // F3 0128
        gbc.setState(0xba46, 0xb381, 0x18b0, 0x6796, 0xc66a, 0x8a26, 0x0, 0x1);
        gbc.writeMem(0xba46, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb381, gbc.sp());
        EXPECT(0xba47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xba46));
        // F3 0129
        gbc.setState(0x410f, 0x1bec, 0xdb80, 0x4b08, 0x27f9, 0x2900, 0x1, 0x1);
        gbc.writeMem(0x410f, { 0xf3 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x1bec, gbc.sp());
        EXPECT(0x4110, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 012A
        gbc.setState(0x9315, 0x72db, 0x59a0, 0x6c65, 0xcd87, 0xd97c, 0x1, 0x0);
        gbc.writeMem(0x9315, { 0xf3 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x72db, gbc.sp());
        EXPECT(0x9316, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9315));
        // F3 012B
        gbc.setState(0x180d, 0x38ef, 0x4f30, 0x74d1, 0x3cf7, 0xa03f, 0x1, 0x1);
        gbc.writeMem(0x180d, { 0xf3 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x38ef, gbc.sp());
        EXPECT(0x180e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 012C
        gbc.setState(0x4e79, 0xc6b3, 0xefe0, 0xc7b, 0x2afc, 0x30ae, 0x0, 0x1);
        gbc.writeMem(0x4e79, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc6b3, gbc.sp());
        EXPECT(0x4e7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 012D
        gbc.setState(0xe3e6, 0x8f5a, 0x9b10, 0xbb7d, 0xccbd, 0xe136, 0x1, 0x0);
        gbc.writeMem(0xe3e6, { 0xf3 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8f5a, gbc.sp());
        EXPECT(0xe3e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe3e6));
        // F3 012E
        gbc.setState(0x31e, 0x6bd8, 0xdf00, 0xf2d3, 0xce78, 0xbee7, 0x0, 0x0);
        gbc.writeMem(0x31e, { 0xf3 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x6bd8, gbc.sp());
        EXPECT(0x31f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 012F
        gbc.setState(0x6309, 0x4f5d, 0xc10, 0xe83d, 0xe233, 0x86a4, 0x0, 0x1);
        gbc.writeMem(0x6309, { 0xf3 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x4f5d, gbc.sp());
        EXPECT(0x630a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0130
        gbc.setState(0x4118, 0xf9cd, 0x82c0, 0x69e1, 0x3fb4, 0xfe89, 0x0, 0x0);
        gbc.writeMem(0x4118, { 0xf3 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xf9cd, gbc.sp());
        EXPECT(0x4119, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0131
        gbc.setState(0xbd22, 0xb6b1, 0xb3c0, 0x88b5, 0xaf1c, 0x59f2, 0x0, 0x0);
        gbc.writeMem(0xbd22, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xb6b1, gbc.sp());
        EXPECT(0xbd23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbd22));
        // F3 0132
        gbc.setState(0x4d06, 0x57c4, 0x3b90, 0xa44b, 0x196, 0x6970, 0x0, 0x0);
        gbc.writeMem(0x4d06, { 0xf3 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x57c4, gbc.sp());
        EXPECT(0x4d07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0133
        gbc.setState(0x556e, 0xa327, 0xb9b0, 0x8d74, 0x9e89, 0xee86, 0x1, 0x1);
        gbc.writeMem(0x556e, { 0xf3 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xa327, gbc.sp());
        EXPECT(0x556f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0134
        gbc.setState(0x9520, 0xd4fb, 0x23f0, 0x1f78, 0x5c34, 0xda2e, 0x1, 0x1);
        gbc.writeMem(0x9520, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xd4fb, gbc.sp());
        EXPECT(0x9521, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9520));
        // F3 0135
        gbc.setState(0xe565, 0x46fa, 0xfd60, 0x3da5, 0xcea9, 0x27e2, 0x1, 0x0);
        gbc.writeMem(0xe565, { 0xf3 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x46fa, gbc.sp());
        EXPECT(0xe566, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe565));
        // F3 0136
        gbc.setState(0x3898, 0x21ca, 0x5f10, 0x718e, 0x63ee, 0x4a5a, 0x1, 0x1);
        gbc.writeMem(0x3898, { 0xf3 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x21ca, gbc.sp());
        EXPECT(0x3899, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0137
        gbc.setState(0x9049, 0xf0, 0xeb70, 0xd187, 0x35da, 0xa3b3, 0x0, 0x1);
        gbc.writeMem(0x9049, { 0xf3 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xf0, gbc.sp());
        EXPECT(0x904a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9049));
        // F3 0138
        gbc.setState(0xc562, 0x6938, 0x3c10, 0xe5eb, 0xb56d, 0x806d, 0x0, 0x1);
        gbc.writeMem(0xc562, { 0xf3 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x6938, gbc.sp());
        EXPECT(0xc563, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc562));
        // F3 0139
        gbc.setState(0xb701, 0x372f, 0xede0, 0x9c83, 0xaff1, 0xdec7, 0x0, 0x0);
        gbc.writeMem(0xb701, { 0xf3 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x372f, gbc.sp());
        EXPECT(0xb702, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb701));
        // F3 013A
        gbc.setState(0x8fea, 0x3ab5, 0xa9b0, 0x4763, 0x251f, 0x3ce3, 0x1, 0x0);
        gbc.writeMem(0x8fea, { 0xf3 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x3ab5, gbc.sp());
        EXPECT(0x8feb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8fea));
        // F3 013B
        gbc.setState(0x4dd5, 0xfbea, 0xf850, 0x3572, 0xc681, 0x704e, 0x0, 0x1);
        gbc.writeMem(0x4dd5, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xfbea, gbc.sp());
        EXPECT(0x4dd6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 013C
        gbc.setState(0x6e7b, 0x7b92, 0x1e50, 0x29a1, 0x105c, 0x8e72, 0x0, 0x0);
        gbc.writeMem(0x6e7b, { 0xf3 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x7b92, gbc.sp());
        EXPECT(0x6e7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 013D
        gbc.setState(0x9eda, 0xe759, 0xb50, 0xeae0, 0x261d, 0x18d1, 0x0, 0x0);
        gbc.writeMem(0x9eda, { 0xf3 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xe759, gbc.sp());
        EXPECT(0x9edb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9eda));
        // F3 013E
        gbc.setState(0xfaa, 0xadcd, 0xf330, 0x2119, 0xe7a3, 0x566d, 0x0, 0x1);
        gbc.writeMem(0xfaa, { 0xf3 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xadcd, gbc.sp());
        EXPECT(0xfab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 013F
        gbc.setState(0xba2d, 0xb8d9, 0x9fd0, 0x6962, 0x8f89, 0xd43e, 0x0, 0x0);
        gbc.writeMem(0xba2d, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xb8d9, gbc.sp());
        EXPECT(0xba2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xba2d));
        // F3 0140
        gbc.setState(0x365e, 0xf1fa, 0xf20, 0x604d, 0xb06d, 0x3263, 0x0, 0x0);
        gbc.writeMem(0x365e, { 0xf3 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xf1fa, gbc.sp());
        EXPECT(0x365f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0141
        gbc.setState(0xcfad, 0xcd0b, 0xfa10, 0x1b46, 0x2f63, 0xa036, 0x1, 0x0);
        gbc.writeMem(0xcfad, { 0xf3 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xcd0b, gbc.sp());
        EXPECT(0xcfae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcfad));
        // F3 0142
        gbc.setState(0xac3d, 0x34f6, 0x1150, 0xab54, 0x9f2, 0x1a59, 0x0, 0x1);
        gbc.writeMem(0xac3d, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x34f6, gbc.sp());
        EXPECT(0xac3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xac3d));
        // F3 0143
        gbc.setState(0x191e, 0x2720, 0x1d70, 0x9b93, 0x672a, 0x1ad5, 0x0, 0x1);
        gbc.writeMem(0x191e, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x2720, gbc.sp());
        EXPECT(0x191f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0144
        gbc.setState(0x6b69, 0x68ed, 0xc940, 0xddda, 0x3bd0, 0x5208, 0x0, 0x1);
        gbc.writeMem(0x6b69, { 0xf3 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x68ed, gbc.sp());
        EXPECT(0x6b6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0145
        gbc.setState(0x9084, 0xa62d, 0xc040, 0x1be4, 0xfc60, 0xef9e, 0x1, 0x0);
        gbc.writeMem(0x9084, { 0xf3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xa62d, gbc.sp());
        EXPECT(0x9085, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9084));
        // F3 0146
        gbc.setState(0x18f6, 0x1ff1, 0x8f20, 0xd263, 0xa630, 0x698, 0x1, 0x0);
        gbc.writeMem(0x18f6, { 0xf3 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1ff1, gbc.sp());
        EXPECT(0x18f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0147
        gbc.setState(0x6fa6, 0xaa6a, 0x44e0, 0x2d63, 0x7f3f, 0x1487, 0x1, 0x1);
        gbc.writeMem(0x6fa6, { 0xf3 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xaa6a, gbc.sp());
        EXPECT(0x6fa7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0148
        gbc.setState(0xe2ad, 0x6b85, 0x5030, 0xefd7, 0x63e2, 0x1694, 0x1, 0x1);
        gbc.writeMem(0xe2ad, { 0xf3 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x6b85, gbc.sp());
        EXPECT(0xe2ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe2ad));
        // F3 0149
        gbc.setState(0x3720, 0xabc1, 0xf910, 0x7832, 0x4530, 0x7531, 0x0, 0x0);
        gbc.writeMem(0x3720, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xabc1, gbc.sp());
        EXPECT(0x3721, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 014A
        gbc.setState(0xd25c, 0x5823, 0x4620, 0x5b3b, 0xe480, 0xf30c, 0x1, 0x1);
        gbc.writeMem(0xd25c, { 0xf3 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x5823, gbc.sp());
        EXPECT(0xd25d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd25c));
        // F3 014C
        gbc.setState(0x9575, 0x76e9, 0x9ee0, 0x635c, 0x7f5f, 0x6164, 0x1, 0x0);
        gbc.writeMem(0x9575, { 0xf3 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x76e9, gbc.sp());
        EXPECT(0x9576, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9575));
        // F3 014D
        gbc.setState(0x7c36, 0x5a83, 0xd0, 0x661d, 0x6cf5, 0x16e3, 0x1, 0x0);
        gbc.writeMem(0x7c36, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x5a83, gbc.sp());
        EXPECT(0x7c37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 014E
        gbc.setState(0x73ae, 0x5b9b, 0x30d0, 0xbb3d, 0x755d, 0xf565, 0x0, 0x1);
        gbc.writeMem(0x73ae, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x5b9b, gbc.sp());
        EXPECT(0x73af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 014F
        gbc.setState(0x5a11, 0xecf4, 0x7c70, 0x65fd, 0x6f31, 0xd944, 0x0, 0x0);
        gbc.writeMem(0x5a11, { 0xf3 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xecf4, gbc.sp());
        EXPECT(0x5a12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0150
        gbc.setState(0x2f2a, 0x8a1e, 0x45c0, 0x5b18, 0xd390, 0xf37, 0x0, 0x0);
        gbc.writeMem(0x2f2a, { 0xf3 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x8a1e, gbc.sp());
        EXPECT(0x2f2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0151
        gbc.setState(0x5321, 0x53a9, 0x5e40, 0x883e, 0xd6f0, 0xa243, 0x1, 0x1);
        gbc.writeMem(0x5321, { 0xf3 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x53a9, gbc.sp());
        EXPECT(0x5322, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0152
        gbc.setState(0x2708, 0x3312, 0x5780, 0xb834, 0xd5e5, 0x9207, 0x0, 0x1);
        gbc.writeMem(0x2708, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x3312, gbc.sp());
        EXPECT(0x2709, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0153
        gbc.setState(0x6942, 0xc2b2, 0x88c0, 0x3a15, 0xf230, 0x4352, 0x0, 0x0);
        gbc.writeMem(0x6942, { 0xf3 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xc2b2, gbc.sp());
        EXPECT(0x6943, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0154
        gbc.setState(0xbd74, 0x8b79, 0x40c0, 0xc95e, 0x67a, 0x3fcc, 0x0, 0x0);
        gbc.writeMem(0xbd74, { 0xf3 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x8b79, gbc.sp());
        EXPECT(0xbd75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbd74));
        // F3 0155
        gbc.setState(0xbd96, 0x964e, 0xd760, 0x9f67, 0x511, 0xf77b, 0x1, 0x0);
        gbc.writeMem(0xbd96, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x964e, gbc.sp());
        EXPECT(0xbd97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbd96));
        // F3 0156
        gbc.setState(0x72df, 0xdca6, 0x2e0, 0x1491, 0xba17, 0xaeef, 0x1, 0x0);
        gbc.writeMem(0x72df, { 0xf3 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xdca6, gbc.sp());
        EXPECT(0x72e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0157
        gbc.setState(0x5d8a, 0xaa33, 0x9cc0, 0x4d89, 0x18d8, 0xa974, 0x0, 0x0);
        gbc.writeMem(0x5d8a, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xaa33, gbc.sp());
        EXPECT(0x5d8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0158
        gbc.setState(0x6d, 0x1360, 0x9230, 0xb54a, 0x1331, 0x2cfc, 0x1, 0x0);
        gbc.writeMem(0x6d, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x1360, gbc.sp());
        EXPECT(0x6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0159
        gbc.setState(0xcffd, 0x5b87, 0x5af0, 0x5912, 0x80a5, 0xbb30, 0x0, 0x0);
        gbc.writeMem(0xcffd, { 0xf3 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x5b87, gbc.sp());
        EXPECT(0xcffe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcffd));
        // F3 015A
        gbc.setState(0xcca5, 0x26ab, 0xd4d0, 0x24d3, 0xada3, 0x8b48, 0x0, 0x0);
        gbc.writeMem(0xcca5, { 0xf3 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x26ab, gbc.sp());
        EXPECT(0xcca6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcca5));
        // F3 015B
        gbc.setState(0x278, 0xf5a0, 0x9310, 0x6eb, 0x3d3, 0xc6a, 0x0, 0x1);
        gbc.writeMem(0x278, { 0xf3 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf5a0, gbc.sp());
        EXPECT(0x279, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 015C
        gbc.setState(0x8647, 0x556b, 0xabc0, 0x4fb1, 0x8fca, 0x6d88, 0x0, 0x1);
        gbc.writeMem(0x8647, { 0xf3 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x556b, gbc.sp());
        EXPECT(0x8648, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8647));
        // F3 015D
        gbc.setState(0x9665, 0x28ab, 0xc2d0, 0x176d, 0x1ce2, 0x63af, 0x0, 0x0);
        gbc.writeMem(0x9665, { 0xf3 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x28ab, gbc.sp());
        EXPECT(0x9666, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9665));
        // F3 015E
        gbc.setState(0xde88, 0xe15f, 0xa550, 0x2fc3, 0x1dbd, 0x4439, 0x0, 0x0);
        gbc.writeMem(0xde88, { 0xf3 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xe15f, gbc.sp());
        EXPECT(0xde89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xde88));
        // F3 015F
        gbc.setState(0x6b6a, 0xefe2, 0x8140, 0x4513, 0x26ae, 0x76a1, 0x1, 0x0);
        gbc.writeMem(0x6b6a, { 0xf3 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xefe2, gbc.sp());
        EXPECT(0x6b6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0160
        gbc.setState(0xb94e, 0xdc4e, 0x1710, 0xe74a, 0xfc4a, 0x6eef, 0x0, 0x0);
        gbc.writeMem(0xb94e, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xdc4e, gbc.sp());
        EXPECT(0xb94f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb94e));
        // F3 0161
        gbc.setState(0xb116, 0x24f6, 0x4720, 0x2b97, 0x96c3, 0xb36f, 0x1, 0x1);
        gbc.writeMem(0xb116, { 0xf3 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x24f6, gbc.sp());
        EXPECT(0xb117, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb116));
        // F3 0162
        gbc.setState(0xd6b4, 0x80e0, 0x3ef0, 0x27bd, 0xe3bd, 0x94c8, 0x1, 0x1);
        gbc.writeMem(0xd6b4, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x80e0, gbc.sp());
        EXPECT(0xd6b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd6b4));
        // F3 0163
        gbc.setState(0xd11e, 0x52b2, 0x7d20, 0xa85a, 0x9dad, 0xb234, 0x0, 0x1);
        gbc.writeMem(0xd11e, { 0xf3 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x52b2, gbc.sp());
        EXPECT(0xd11f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd11e));
        // F3 0164
        gbc.setState(0x2e0, 0xdde2, 0x60, 0x7c4, 0x7301, 0x7d4e, 0x1, 0x0);
        gbc.writeMem(0x2e0, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xdde2, gbc.sp());
        EXPECT(0x2e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0165
        gbc.setState(0x8777, 0x12b8, 0x2930, 0xc392, 0xa942, 0xd4d9, 0x0, 0x1);
        gbc.writeMem(0x8777, { 0xf3 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x12b8, gbc.sp());
        EXPECT(0x8778, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8777));
        // F3 0166
        gbc.setState(0x45ee, 0x3cc4, 0xe3b0, 0x9a8d, 0xfdcf, 0x688, 0x0, 0x0);
        gbc.writeMem(0x45ee, { 0xf3 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x3cc4, gbc.sp());
        EXPECT(0x45ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0167
        gbc.setState(0xb8, 0xc695, 0xa90, 0xcde2, 0xe57a, 0x8394, 0x0, 0x0);
        gbc.writeMem(0xb8, { 0xf3 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xc695, gbc.sp());
        EXPECT(0xb9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0168
        gbc.setState(0xed9e, 0xa519, 0xae80, 0xdf10, 0xf71f, 0xb06, 0x1, 0x1);
        gbc.writeMem(0xed9e, { 0xf3 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xa519, gbc.sp());
        EXPECT(0xed9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed9e));
        // F3 0169
        gbc.setState(0x343a, 0x6157, 0xb580, 0xb350, 0x3f92, 0x5913, 0x0, 0x0);
        gbc.writeMem(0x343a, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x6157, gbc.sp());
        EXPECT(0x343b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 016B
        gbc.setState(0x4839, 0xa4bf, 0x1600, 0x7ae5, 0x238d, 0x9bf3, 0x1, 0x1);
        gbc.writeMem(0x4839, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xa4bf, gbc.sp());
        EXPECT(0x483a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 016C
        gbc.setState(0xc6dc, 0x3305, 0x3280, 0xb519, 0x5319, 0x55ef, 0x1, 0x0);
        gbc.writeMem(0xc6dc, { 0xf3 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x3305, gbc.sp());
        EXPECT(0xc6dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc6dc));
        // F3 016D
        gbc.setState(0x2f2, 0x4972, 0xfda0, 0xe187, 0xac8d, 0xaddf, 0x1, 0x0);
        gbc.writeMem(0x2f2, { 0xf3 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x4972, gbc.sp());
        EXPECT(0x2f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 016E
        gbc.setState(0x4ba2, 0x2b7a, 0x5c50, 0xc988, 0x8e2a, 0xaad6, 0x1, 0x1);
        gbc.writeMem(0x4ba2, { 0xf3 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2b7a, gbc.sp());
        EXPECT(0x4ba3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0170
        gbc.setState(0x3a6c, 0x3f6a, 0xbd00, 0xc73e, 0x4791, 0x6fdc, 0x1, 0x0);
        gbc.writeMem(0x3a6c, { 0xf3 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x3f6a, gbc.sp());
        EXPECT(0x3a6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0171
        gbc.setState(0xbe55, 0xeae8, 0x7460, 0x754a, 0xcd3c, 0x6334, 0x0, 0x0);
        gbc.writeMem(0xbe55, { 0xf3 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xeae8, gbc.sp());
        EXPECT(0xbe56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe55));
        // F3 0172
        gbc.setState(0xa239, 0x2852, 0x8630, 0xdd15, 0x9530, 0x8a26, 0x0, 0x1);
        gbc.writeMem(0xa239, { 0xf3 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x2852, gbc.sp());
        EXPECT(0xa23a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa239));
        // F3 0173
        gbc.setState(0x465f, 0xd69f, 0x5dd0, 0x2bfa, 0xba60, 0xa521, 0x0, 0x0);
        gbc.writeMem(0x465f, { 0xf3 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xd69f, gbc.sp());
        EXPECT(0x4660, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0174
        gbc.setState(0x9618, 0x5787, 0x4fd0, 0x55a6, 0xff3c, 0xf42c, 0x0, 0x1);
        gbc.writeMem(0x9618, { 0xf3 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x5787, gbc.sp());
        EXPECT(0x9619, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9618));
        // F3 0175
        gbc.setState(0x81ae, 0xfffa, 0x1d90, 0x4ce6, 0x11fc, 0x7142, 0x1, 0x1);
        gbc.writeMem(0x81ae, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xfffa, gbc.sp());
        EXPECT(0x81af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x81ae));
        // F3 0176
        gbc.setState(0x9260, 0x8d8c, 0x53a0, 0x395a, 0x773, 0x15d4, 0x0, 0x1);
        gbc.writeMem(0x9260, { 0xf3 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x8d8c, gbc.sp());
        EXPECT(0x9261, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9260));
        // F3 0177
        gbc.setState(0xcf52, 0x85a1, 0x770, 0xb0e4, 0x53ba, 0x9b3a, 0x1, 0x0);
        gbc.writeMem(0xcf52, { 0xf3 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x85a1, gbc.sp());
        EXPECT(0xcf53, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcf52));
        // F3 0178
        gbc.setState(0xb434, 0x90a7, 0x8b40, 0x99b9, 0x5c12, 0x9f54, 0x1, 0x0);
        gbc.writeMem(0xb434, { 0xf3 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x90a7, gbc.sp());
        EXPECT(0xb435, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb434));
        // F3 017A
        gbc.setState(0xaffa, 0x9746, 0x3760, 0xad66, 0x886b, 0x418, 0x1, 0x0);
        gbc.writeMem(0xaffa, { 0xf3 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x9746, gbc.sp());
        EXPECT(0xaffb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaffa));
        // F3 017B
        gbc.setState(0x778, 0xdc55, 0x4970, 0x15d1, 0x64d3, 0xdc3c, 0x0, 0x1);
        gbc.writeMem(0x778, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xdc55, gbc.sp());
        EXPECT(0x779, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 017D
        gbc.setState(0x45a3, 0x58b0, 0x4af0, 0xe5d4, 0xfacb, 0x726f, 0x0, 0x0);
        gbc.writeMem(0x45a3, { 0xf3 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x58b0, gbc.sp());
        EXPECT(0x45a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 017E
        gbc.setState(0xcd2b, 0x7aab, 0xa410, 0x70bf, 0xe1ce, 0x27db, 0x0, 0x1);
        gbc.writeMem(0xcd2b, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x7aab, gbc.sp());
        EXPECT(0xcd2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcd2b));
        // F3 017F
        gbc.setState(0x6ca4, 0x9110, 0x23f0, 0x7a1, 0xf729, 0x9c2f, 0x1, 0x0);
        gbc.writeMem(0x6ca4, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x9110, gbc.sp());
        EXPECT(0x6ca5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0180
        gbc.setState(0x3f2a, 0xe528, 0x5890, 0x19f1, 0x8476, 0x9608, 0x1, 0x0);
        gbc.writeMem(0x3f2a, { 0xf3 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xe528, gbc.sp());
        EXPECT(0x3f2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0181
        gbc.setState(0xd9e7, 0x63c0, 0xff90, 0xf9d3, 0x8ced, 0xb8f7, 0x1, 0x1);
        gbc.writeMem(0xd9e7, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x63c0, gbc.sp());
        EXPECT(0xd9e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd9e7));
        // F3 0182
        gbc.setState(0x71d4, 0x1c64, 0x5620, 0x15ca, 0xdb5c, 0x3217, 0x0, 0x1);
        gbc.writeMem(0x71d4, { 0xf3 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x1c64, gbc.sp());
        EXPECT(0x71d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0183
        gbc.setState(0x5334, 0x9fc5, 0xb5f0, 0x2884, 0x9488, 0x5b36, 0x0, 0x1);
        gbc.writeMem(0x5334, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x9fc5, gbc.sp());
        EXPECT(0x5335, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0184
        gbc.setState(0xb370, 0x6cfe, 0x2b80, 0xe511, 0xfab4, 0x400d, 0x1, 0x0);
        gbc.writeMem(0xb370, { 0xf3 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6cfe, gbc.sp());
        EXPECT(0xb371, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb370));
        // F3 0185
        gbc.setState(0xdf95, 0xabe3, 0x4ab0, 0x76e3, 0xc76e, 0x42b0, 0x1, 0x0);
        gbc.writeMem(0xdf95, { 0xf3 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xabe3, gbc.sp());
        EXPECT(0xdf96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdf95));
        // F3 0186
        gbc.setState(0xb832, 0x94a5, 0xb160, 0xaba5, 0x94cc, 0xa503, 0x1, 0x1);
        gbc.writeMem(0xb832, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x94a5, gbc.sp());
        EXPECT(0xb833, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb832));
        // F3 0187
        gbc.setState(0x2efb, 0xc1d7, 0x970, 0xe10f, 0x1e94, 0x28b3, 0x0, 0x1);
        gbc.writeMem(0x2efb, { 0xf3 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xc1d7, gbc.sp());
        EXPECT(0x2efc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0188
        gbc.setState(0x5e72, 0x26bc, 0x7e10, 0x5e7f, 0x5c84, 0xfbb0, 0x0, 0x1);
        gbc.writeMem(0x5e72, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x26bc, gbc.sp());
        EXPECT(0x5e73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0189
        gbc.setState(0xa242, 0x2d41, 0xefa0, 0xd574, 0x1452, 0xb46c, 0x1, 0x1);
        gbc.writeMem(0xa242, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2d41, gbc.sp());
        EXPECT(0xa243, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa242));
        // F3 018A
        gbc.setState(0xb63b, 0x98b4, 0x4d30, 0x6c09, 0x13e3, 0x60f8, 0x0, 0x1);
        gbc.writeMem(0xb63b, { 0xf3 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x98b4, gbc.sp());
        EXPECT(0xb63c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb63b));
        // F3 018B
        gbc.setState(0x58a3, 0x3fcf, 0xb1a0, 0x16af, 0x69c7, 0xb322, 0x1, 0x1);
        gbc.writeMem(0x58a3, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x3fcf, gbc.sp());
        EXPECT(0x58a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 018C
        gbc.setState(0x5dd1, 0x60f7, 0xddd0, 0x25fd, 0xf974, 0x7696, 0x1, 0x1);
        gbc.writeMem(0x5dd1, { 0xf3 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x60f7, gbc.sp());
        EXPECT(0x5dd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 018D
        gbc.setState(0x144f, 0x3d6b, 0x6560, 0xc062, 0x2a3a, 0xd2e9, 0x0, 0x1);
        gbc.writeMem(0x144f, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x3d6b, gbc.sp());
        EXPECT(0x1450, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 018E
        gbc.setState(0xe970, 0x8ac, 0xc760, 0xec5, 0xc265, 0xd150, 0x1, 0x0);
        gbc.writeMem(0xe970, { 0xf3 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x8ac, gbc.sp());
        EXPECT(0xe971, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe970));
        // F3 018F
        gbc.setState(0xb000, 0xc663, 0x900, 0xda72, 0x1e8, 0x71eb, 0x1, 0x0);
        gbc.writeMem(0xb000, { 0xf3 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xc663, gbc.sp());
        EXPECT(0xb001, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb000));
        // F3 0190
        gbc.setState(0x6ab9, 0x668f, 0xf400, 0x6827, 0x2dab, 0x52ef, 0x1, 0x0);
        gbc.writeMem(0x6ab9, { 0xf3 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x668f, gbc.sp());
        EXPECT(0x6aba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0191
        gbc.setState(0x60b7, 0x6aa, 0xe60, 0x726d, 0xe87f, 0xcd12, 0x0, 0x1);
        gbc.writeMem(0x60b7, { 0xf3 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x6aa, gbc.sp());
        EXPECT(0x60b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0192
        gbc.setState(0x9db0, 0x5659, 0x62f0, 0xd6d5, 0x22bf, 0x33bc, 0x1, 0x1);
        gbc.writeMem(0x9db0, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x5659, gbc.sp());
        EXPECT(0x9db1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9db0));
        // F3 0193
        gbc.setState(0x5ad6, 0x9328, 0xd260, 0xc4a, 0xff85, 0x141e, 0x0, 0x0);
        gbc.writeMem(0x5ad6, { 0xf3 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x9328, gbc.sp());
        EXPECT(0x5ad7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0194
        gbc.setState(0xc7b4, 0xdc7a, 0xd060, 0x3deb, 0x556b, 0x97f2, 0x1, 0x0);
        gbc.writeMem(0xc7b4, { 0xf3 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xdc7a, gbc.sp());
        EXPECT(0xc7b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc7b4));
        // F3 0195
        gbc.setState(0xa4ab, 0xfd7e, 0x71b0, 0x3755, 0x4b9c, 0x2e75, 0x0, 0x0);
        gbc.writeMem(0xa4ab, { 0xf3 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xfd7e, gbc.sp());
        EXPECT(0xa4ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa4ab));
        // F3 0196
        gbc.setState(0x7487, 0x84f4, 0x5720, 0x666d, 0x19d4, 0x8153, 0x1, 0x0);
        gbc.writeMem(0x7487, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x84f4, gbc.sp());
        EXPECT(0x7488, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0197
        gbc.setState(0xe41a, 0xa633, 0x3420, 0xeb89, 0x9ec0, 0x2e5f, 0x0, 0x1);
        gbc.writeMem(0xe41a, { 0xf3 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xa633, gbc.sp());
        EXPECT(0xe41b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe41a));
        // F3 0198
        gbc.setState(0x9479, 0xbc83, 0x4d20, 0xb0b7, 0x6a1f, 0xf1fd, 0x1, 0x1);
        gbc.writeMem(0x9479, { 0xf3 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xbc83, gbc.sp());
        EXPECT(0x947a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9479));
        // F3 0199
        gbc.setState(0xa4ea, 0x9ff7, 0x63b0, 0xc09e, 0x46fc, 0xc692, 0x1, 0x0);
        gbc.writeMem(0xa4ea, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9ff7, gbc.sp());
        EXPECT(0xa4eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa4ea));
        // F3 019B
        gbc.setState(0x40eb, 0x4ce7, 0x8f40, 0xc2aa, 0xfc6e, 0xc7b9, 0x1, 0x0);
        gbc.writeMem(0x40eb, { 0xf3 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x4ce7, gbc.sp());
        EXPECT(0x40ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 019C
        gbc.setState(0xd774, 0x1c79, 0xaf30, 0xcc5, 0xb7f9, 0x6400, 0x1, 0x1);
        gbc.writeMem(0xd774, { 0xf3 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x1c79, gbc.sp());
        EXPECT(0xd775, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd774));
        // F3 019D
        gbc.setState(0xb57f, 0x727c, 0xfc70, 0x6f53, 0x7519, 0xfafb, 0x0, 0x1);
        gbc.writeMem(0xb57f, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x727c, gbc.sp());
        EXPECT(0xb580, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb57f));
        // F3 019E
        gbc.setState(0xbc5c, 0xae61, 0xfbf0, 0x4d46, 0x3625, 0x7e1d, 0x0, 0x1);
        gbc.writeMem(0xbc5c, { 0xf3 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xae61, gbc.sp());
        EXPECT(0xbc5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbc5c));
        // F3 019F
        gbc.setState(0xb1ad, 0xfca4, 0x4030, 0x4b3f, 0xed68, 0xb197, 0x0, 0x0);
        gbc.writeMem(0xb1ad, { 0xf3 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xfca4, gbc.sp());
        EXPECT(0xb1ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb1ad));
        // F3 01A0
        gbc.setState(0x9930, 0xc35e, 0x3f40, 0xc5f9, 0x8e11, 0x6b10, 0x0, 0x1);
        gbc.writeMem(0x9930, { 0xf3 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc35e, gbc.sp());
        EXPECT(0x9931, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9930));
        // F3 01A1
        gbc.setState(0x220f, 0x22c9, 0xa2d0, 0x38e2, 0x87b4, 0x92a0, 0x0, 0x1);
        gbc.writeMem(0x220f, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x22c9, gbc.sp());
        EXPECT(0x2210, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01A2
        gbc.setState(0x756b, 0x5c4c, 0xc0b0, 0x58c7, 0xa154, 0x4422, 0x1, 0x0);
        gbc.writeMem(0x756b, { 0xf3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x5c4c, gbc.sp());
        EXPECT(0x756c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01A3
        gbc.setState(0x98f5, 0x6b54, 0xd810, 0x2997, 0x90fa, 0xe4a7, 0x1, 0x0);
        gbc.writeMem(0x98f5, { 0xf3 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x6b54, gbc.sp());
        EXPECT(0x98f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x98f5));
        // F3 01A4
        gbc.setState(0xe0bb, 0x2328, 0xcfb0, 0x998f, 0xd4a2, 0xfc45, 0x0, 0x1);
        gbc.writeMem(0xe0bb, { 0xf3 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x2328, gbc.sp());
        EXPECT(0xe0bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe0bb));
        // F3 01A5
        gbc.setState(0x8d90, 0xdd38, 0x1770, 0x69d8, 0x7d6c, 0x554e, 0x1, 0x1);
        gbc.writeMem(0x8d90, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xdd38, gbc.sp());
        EXPECT(0x8d91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8d90));
        // F3 01A7
        gbc.setState(0x2df7, 0xd31a, 0x6370, 0xc88e, 0xa1d, 0x4e4e, 0x1, 0x1);
        gbc.writeMem(0x2df7, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xd31a, gbc.sp());
        EXPECT(0x2df8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01A8
        gbc.setState(0xa428, 0x6e3b, 0x3e60, 0xf038, 0xb24, 0x169c, 0x0, 0x1);
        gbc.writeMem(0xa428, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x6e3b, gbc.sp());
        EXPECT(0xa429, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa428));
        // F3 01A9
        gbc.setState(0x93ac, 0xee5f, 0x1830, 0x80c0, 0xf2b5, 0xfed0, 0x1, 0x1);
        gbc.writeMem(0x93ac, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xee5f, gbc.sp());
        EXPECT(0x93ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x93ac));
        // F3 01AA
        gbc.setState(0xeff0, 0x7ebe, 0x66d0, 0x9ea7, 0xb7b8, 0x6101, 0x1, 0x1);
        gbc.writeMem(0xeff0, { 0xf3 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x7ebe, gbc.sp());
        EXPECT(0xeff1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xeff0));
        // F3 01AB
        gbc.setState(0x2d72, 0x9540, 0xb9b0, 0xdbbb, 0x99d4, 0xc4cc, 0x0, 0x0);
        gbc.writeMem(0x2d72, { 0xf3 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9540, gbc.sp());
        EXPECT(0x2d73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01AC
        gbc.setState(0x1ee1, 0x2c2d, 0x0, 0x9a01, 0xd430, 0x7c7c, 0x1, 0x1);
        gbc.writeMem(0x1ee1, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x2c2d, gbc.sp());
        EXPECT(0x1ee2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01AD
        gbc.setState(0xabb1, 0x3c6d, 0xbea0, 0x747, 0x6b9a, 0x502c, 0x1, 0x0);
        gbc.writeMem(0xabb1, { 0xf3 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x3c6d, gbc.sp());
        EXPECT(0xabb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xabb1));
        // F3 01AE
        gbc.setState(0x9eaf, 0xaf44, 0xe640, 0xfb68, 0xf9bf, 0x4ab8, 0x0, 0x1);
        gbc.writeMem(0x9eaf, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xaf44, gbc.sp());
        EXPECT(0x9eb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9eaf));
        // F3 01AF
        gbc.setState(0x301, 0x6a50, 0x50a0, 0x7123, 0xd96a, 0xce61, 0x0, 0x0);
        gbc.writeMem(0x301, { 0xf3 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6a50, gbc.sp());
        EXPECT(0x302, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01B0
        gbc.setState(0x1faf, 0x9b5b, 0x3d70, 0xce40, 0x39f2, 0xee7c, 0x0, 0x0);
        gbc.writeMem(0x1faf, { 0xf3 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x9b5b, gbc.sp());
        EXPECT(0x1fb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01B1
        gbc.setState(0xdd7b, 0x1363, 0xb2f0, 0x3e25, 0x52d1, 0xf7d1, 0x0, 0x0);
        gbc.writeMem(0xdd7b, { 0xf3 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x1363, gbc.sp());
        EXPECT(0xdd7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdd7b));
        // F3 01B2
        gbc.setState(0x2372, 0x3b3c, 0xe450, 0xf40d, 0x8381, 0xb781, 0x0, 0x0);
        gbc.writeMem(0x2372, { 0xf3 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x3b3c, gbc.sp());
        EXPECT(0x2373, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01B3
        gbc.setState(0xead, 0x7423, 0x3190, 0x540c, 0x2660, 0xe8d3, 0x0, 0x1);
        gbc.writeMem(0xead, { 0xf3 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7423, gbc.sp());
        EXPECT(0xeae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01B4
        gbc.setState(0xc947, 0x161, 0xf4d0, 0x4e4f, 0x399, 0x2edf, 0x0, 0x1);
        gbc.writeMem(0xc947, { 0xf3 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x161, gbc.sp());
        EXPECT(0xc948, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc947));
        // F3 01B5
        gbc.setState(0x7407, 0x1365, 0xca40, 0x768a, 0xec56, 0xdced, 0x0, 0x1);
        gbc.writeMem(0x7407, { 0xf3 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x1365, gbc.sp());
        EXPECT(0x7408, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01B6
        gbc.setState(0x1918, 0x9dce, 0xd9e0, 0x750a, 0x8969, 0x9851, 0x1, 0x1);
        gbc.writeMem(0x1918, { 0xf3 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x9dce, gbc.sp());
        EXPECT(0x1919, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01B7
        gbc.setState(0x5b54, 0x82d6, 0xc670, 0x6718, 0x9066, 0xca9, 0x1, 0x0);
        gbc.writeMem(0x5b54, { 0xf3 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x82d6, gbc.sp());
        EXPECT(0x5b55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01B8
        gbc.setState(0x5ebf, 0x7e57, 0x7e60, 0xd586, 0x2f68, 0xd520, 0x1, 0x1);
        gbc.writeMem(0x5ebf, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x7e57, gbc.sp());
        EXPECT(0x5ec0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01B9
        gbc.setState(0x1b35, 0x4b51, 0xcf40, 0xadf5, 0xa7f8, 0x7023, 0x0, 0x0);
        gbc.writeMem(0x1b35, { 0xf3 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x4b51, gbc.sp());
        EXPECT(0x1b36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01BA
        gbc.setState(0xa6b8, 0xc7ed, 0xcfd0, 0x8577, 0xe971, 0x13b5, 0x1, 0x0);
        gbc.writeMem(0xa6b8, { 0xf3 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xc7ed, gbc.sp());
        EXPECT(0xa6b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa6b8));
        // F3 01BB
        gbc.setState(0xd036, 0x1655, 0x17e0, 0x6b3a, 0xa2dd, 0xa14a, 0x0, 0x0);
        gbc.writeMem(0xd036, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x1655, gbc.sp());
        EXPECT(0xd037, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd036));
        // F3 01BC
        gbc.setState(0x1d66, 0x1c00, 0xa6c0, 0xa371, 0x424d, 0xf54c, 0x1, 0x0);
        gbc.writeMem(0x1d66, { 0xf3 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x1c00, gbc.sp());
        EXPECT(0x1d67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01BD
        gbc.setState(0x9a2e, 0x72c0, 0x2830, 0x37f8, 0x2682, 0x4781, 0x1, 0x0);
        gbc.writeMem(0x9a2e, { 0xf3 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x72c0, gbc.sp());
        EXPECT(0x9a2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9a2e));
        // F3 01BE
        gbc.setState(0xd184, 0x4de8, 0x6ee0, 0xf0ce, 0x5413, 0xdc89, 0x1, 0x1);
        gbc.writeMem(0xd184, { 0xf3 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x4de8, gbc.sp());
        EXPECT(0xd185, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd184));
        // F3 01BF
        gbc.setState(0xe1b9, 0xb8ab, 0xe4a0, 0xc770, 0x8d1b, 0x1735, 0x1, 0x1);
        gbc.writeMem(0xe1b9, { 0xf3 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xb8ab, gbc.sp());
        EXPECT(0xe1ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe1b9));
        // F3 01C0
        gbc.setState(0x6dea, 0xaccf, 0x2d50, 0x5c76, 0x95c3, 0xe039, 0x0, 0x0);
        gbc.writeMem(0x6dea, { 0xf3 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xaccf, gbc.sp());
        EXPECT(0x6deb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01C1
        gbc.setState(0xb4d3, 0x7d78, 0xaa60, 0xa584, 0xd010, 0x1597, 0x1, 0x0);
        gbc.writeMem(0xb4d3, { 0xf3 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x7d78, gbc.sp());
        EXPECT(0xb4d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb4d3));
        // F3 01C2
        gbc.setState(0xe0ae, 0x4422, 0x1220, 0xb1fa, 0x4ce7, 0x7623, 0x1, 0x0);
        gbc.writeMem(0xe0ae, { 0xf3 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x4422, gbc.sp());
        EXPECT(0xe0af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe0ae));
        // F3 01C3
        gbc.setState(0x2f38, 0x5814, 0x19c0, 0x8b29, 0x35e0, 0xbaa3, 0x0, 0x0);
        gbc.writeMem(0x2f38, { 0xf3 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x5814, gbc.sp());
        EXPECT(0x2f39, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01C4
        gbc.setState(0x566c, 0xe896, 0x1770, 0x490a, 0x4d9f, 0x2971, 0x1, 0x0);
        gbc.writeMem(0x566c, { 0xf3 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xe896, gbc.sp());
        EXPECT(0x566d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01C5
        gbc.setState(0x9ad, 0x8996, 0x24d0, 0xe117, 0x5c3b, 0x8f88, 0x0, 0x0);
        gbc.writeMem(0x9ad, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x8996, gbc.sp());
        EXPECT(0x9ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01C6
        gbc.setState(0x97fb, 0x8727, 0xb040, 0x45e7, 0x454c, 0x2657, 0x1, 0x0);
        gbc.writeMem(0x97fb, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x8727, gbc.sp());
        EXPECT(0x97fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x97fb));
        // F3 01C7
        gbc.setState(0x6d46, 0x78d9, 0x1470, 0x3b63, 0x99df, 0xac4b, 0x0, 0x0);
        gbc.writeMem(0x6d46, { 0xf3 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x78d9, gbc.sp());
        EXPECT(0x6d47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01C8
        gbc.setState(0xabbd, 0x8ee3, 0x2310, 0xa403, 0xecbb, 0xaea4, 0x1, 0x0);
        gbc.writeMem(0xabbd, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x8ee3, gbc.sp());
        EXPECT(0xabbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xabbd));
        // F3 01C9
        gbc.setState(0xb364, 0x8b0c, 0x5770, 0x80cd, 0xf55b, 0xe347, 0x1, 0x0);
        gbc.writeMem(0xb364, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x8b0c, gbc.sp());
        EXPECT(0xb365, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb364));
        // F3 01CA
        gbc.setState(0x1fb7, 0xb75, 0x42d0, 0x2ff6, 0x5408, 0x6596, 0x0, 0x1);
        gbc.writeMem(0x1fb7, { 0xf3 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xb75, gbc.sp());
        EXPECT(0x1fb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01CB
        gbc.setState(0xdd2b, 0xd23d, 0xe270, 0x7782, 0x936f, 0x3b72, 0x0, 0x1);
        gbc.writeMem(0xdd2b, { 0xf3 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xd23d, gbc.sp());
        EXPECT(0xdd2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdd2b));
        // F3 01CC
        gbc.setState(0x317f, 0x2955, 0x21d0, 0x77f7, 0x1c10, 0xeb04, 0x1, 0x0);
        gbc.writeMem(0x317f, { 0xf3 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x2955, gbc.sp());
        EXPECT(0x3180, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01CD
        gbc.setState(0x7cc3, 0xcc04, 0x73d0, 0xe87b, 0xcd3d, 0x48a5, 0x1, 0x1);
        gbc.writeMem(0x7cc3, { 0xf3 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xcc04, gbc.sp());
        EXPECT(0x7cc4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01CE
        gbc.setState(0x7b96, 0x83a7, 0xc300, 0x1aa2, 0x584e, 0xb92, 0x0, 0x1);
        gbc.writeMem(0x7b96, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x83a7, gbc.sp());
        EXPECT(0x7b97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01CF
        gbc.setState(0x2d8a, 0x3885, 0x2040, 0x1053, 0x42f9, 0xdb0b, 0x0, 0x0);
        gbc.writeMem(0x2d8a, { 0xf3 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x3885, gbc.sp());
        EXPECT(0x2d8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01D0
        gbc.setState(0x222, 0xbcd1, 0x3fa0, 0xd33a, 0x34f2, 0x9530, 0x1, 0x1);
        gbc.writeMem(0x222, { 0xf3 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xbcd1, gbc.sp());
        EXPECT(0x223, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01D1
        gbc.setState(0xe5ae, 0xe507, 0xf850, 0xcdca, 0x1677, 0x38a, 0x0, 0x0);
        gbc.writeMem(0xe5ae, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xe507, gbc.sp());
        EXPECT(0xe5af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe5ae));
        // F3 01D2
        gbc.setState(0x8133, 0x10d5, 0xb900, 0xe344, 0x98a3, 0x706, 0x1, 0x1);
        gbc.writeMem(0x8133, { 0xf3 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x10d5, gbc.sp());
        EXPECT(0x8134, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8133));
        // F3 01D3
        gbc.setState(0x9ac3, 0xa16, 0xee20, 0xfeb4, 0x946a, 0xc08c, 0x0, 0x0);
        gbc.writeMem(0x9ac3, { 0xf3 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xa16, gbc.sp());
        EXPECT(0x9ac4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9ac3));
        // F3 01D4
        gbc.setState(0xa319, 0xcb80, 0x7550, 0x6e0a, 0xa67, 0xa915, 0x1, 0x1);
        gbc.writeMem(0xa319, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xcb80, gbc.sp());
        EXPECT(0xa31a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa319));
        // F3 01D5
        gbc.setState(0xb6b2, 0xaea1, 0xacb0, 0xbdc4, 0x6348, 0x59c4, 0x0, 0x1);
        gbc.writeMem(0xb6b2, { 0xf3 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xaea1, gbc.sp());
        EXPECT(0xb6b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb6b2));
        // F3 01D6
        gbc.setState(0x3cd7, 0xd1dd, 0x150, 0xb0e3, 0xf775, 0x3c98, 0x1, 0x1);
        gbc.writeMem(0x3cd7, { 0xf3 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xd1dd, gbc.sp());
        EXPECT(0x3cd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01D7
        gbc.setState(0x75c5, 0x5f92, 0xb0b0, 0xe62d, 0x541f, 0x13c, 0x1, 0x1);
        gbc.writeMem(0x75c5, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x5f92, gbc.sp());
        EXPECT(0x75c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01D8
        gbc.setState(0x6ada, 0x930b, 0xf8b0, 0x981b, 0xfa4e, 0x4e14, 0x1, 0x0);
        gbc.writeMem(0x6ada, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x930b, gbc.sp());
        EXPECT(0x6adb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01D9
        gbc.setState(0xcb50, 0xbf6a, 0x920, 0xae13, 0x1e3b, 0x8ca5, 0x1, 0x1);
        gbc.writeMem(0xcb50, { 0xf3 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xbf6a, gbc.sp());
        EXPECT(0xcb51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcb50));
        // F3 01DA
        gbc.setState(0x6dd1, 0x1837, 0x5740, 0xa967, 0x870b, 0xa1cb, 0x1, 0x1);
        gbc.writeMem(0x6dd1, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x1837, gbc.sp());
        EXPECT(0x6dd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01DB
        gbc.setState(0x5c21, 0xcee4, 0xc2b0, 0xc237, 0x8dfe, 0xeb15, 0x1, 0x1);
        gbc.writeMem(0x5c21, { 0xf3 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xcee4, gbc.sp());
        EXPECT(0x5c22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01DC
        gbc.setState(0x1983, 0x23bf, 0xdb90, 0x6e10, 0x7587, 0xf477, 0x1, 0x0);
        gbc.writeMem(0x1983, { 0xf3 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x23bf, gbc.sp());
        EXPECT(0x1984, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01DD
        gbc.setState(0xc73d, 0x56cc, 0x9990, 0xe048, 0xcd5d, 0xbc0, 0x1, 0x1);
        gbc.writeMem(0xc73d, { 0xf3 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x56cc, gbc.sp());
        EXPECT(0xc73e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc73d));
        // F3 01DF
        gbc.setState(0x3fcb, 0x3400, 0xbf00, 0xb6f0, 0x9833, 0xd971, 0x1, 0x1);
        gbc.writeMem(0x3fcb, { 0xf3 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x3400, gbc.sp());
        EXPECT(0x3fcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01E1
        gbc.setState(0x5893, 0xbd6c, 0xd5d0, 0xe33f, 0x73a0, 0x43b0, 0x1, 0x1);
        gbc.writeMem(0x5893, { 0xf3 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xbd6c, gbc.sp());
        EXPECT(0x5894, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01E2
        gbc.setState(0x1ec7, 0x2a04, 0xba30, 0x28b1, 0xa3b1, 0x7c89, 0x1, 0x1);
        gbc.writeMem(0x1ec7, { 0xf3 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x2a04, gbc.sp());
        EXPECT(0x1ec8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01E3
        gbc.setState(0x84fa, 0x7689, 0x7490, 0xb877, 0xa598, 0x1073, 0x0, 0x1);
        gbc.writeMem(0x84fa, { 0xf3 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x7689, gbc.sp());
        EXPECT(0x84fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x84fa));
        // F3 01E4
        gbc.setState(0x693b, 0x6d68, 0x37d0, 0x1ae5, 0x72b5, 0xe5b8, 0x1, 0x0);
        gbc.writeMem(0x693b, { 0xf3 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x6d68, gbc.sp());
        EXPECT(0x693c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01E5
        gbc.setState(0x5792, 0xfa93, 0xc1d0, 0xb24f, 0xdff7, 0xdb1, 0x0, 0x0);
        gbc.writeMem(0x5792, { 0xf3 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xfa93, gbc.sp());
        EXPECT(0x5793, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01E6
        gbc.setState(0xceaa, 0xad69, 0x83b0, 0x2db8, 0xa124, 0x24c, 0x1, 0x1);
        gbc.writeMem(0xceaa, { 0xf3 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xad69, gbc.sp());
        EXPECT(0xceab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xceaa));
        // F3 01E7
        gbc.setState(0xd00a, 0xfd5e, 0x50, 0x26bf, 0x2d0, 0x9ad3, 0x1, 0x0);
        gbc.writeMem(0xd00a, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xfd5e, gbc.sp());
        EXPECT(0xd00b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd00a));
        // F3 01E8
        gbc.setState(0xdbf9, 0x24a1, 0x23e0, 0x1174, 0x166, 0x6726, 0x0, 0x1);
        gbc.writeMem(0xdbf9, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x24a1, gbc.sp());
        EXPECT(0xdbfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdbf9));
        // F3 01EA
        gbc.setState(0xe262, 0xa5b6, 0xf320, 0xf22f, 0xd88a, 0x7265, 0x1, 0x0);
        gbc.writeMem(0xe262, { 0xf3 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xa5b6, gbc.sp());
        EXPECT(0xe263, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe262));
        // F3 01EB
        gbc.setState(0x2ff, 0x2576, 0x5460, 0x2f75, 0xa122, 0xcec8, 0x1, 0x1);
        gbc.writeMem(0x2ff, { 0xf3 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x2576, gbc.sp());
        EXPECT(0x300, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01EC
        gbc.setState(0xc47b, 0xaed6, 0x80c0, 0x6efc, 0x27e8, 0x2a04, 0x1, 0x0);
        gbc.writeMem(0xc47b, { 0xf3 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xaed6, gbc.sp());
        EXPECT(0xc47c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc47b));
        // F3 01ED
        gbc.setState(0x7606, 0x1d18, 0xeb80, 0xe4c3, 0xa146, 0x209e, 0x0, 0x0);
        gbc.writeMem(0x7606, { 0xf3 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x1d18, gbc.sp());
        EXPECT(0x7607, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01EE
        gbc.setState(0x116e, 0xde52, 0xb580, 0x73c7, 0x3c3f, 0xb76, 0x0, 0x1);
        gbc.writeMem(0x116e, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xde52, gbc.sp());
        EXPECT(0x116f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01EF
        gbc.setState(0xed96, 0x1080, 0xbdf0, 0xfb2c, 0x5d11, 0x23ba, 0x1, 0x1);
        gbc.writeMem(0xed96, { 0xf3 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x1080, gbc.sp());
        EXPECT(0xed97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed96));
        // F3 01F0
        gbc.setState(0xd3b2, 0x15d2, 0xd7e0, 0x45a2, 0xd59d, 0xe559, 0x0, 0x0);
        gbc.writeMem(0xd3b2, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x15d2, gbc.sp());
        EXPECT(0xd3b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd3b2));
        // F3 01F1
        gbc.setState(0xea81, 0x24f6, 0x8120, 0xc959, 0x4f16, 0xaff9, 0x1, 0x1);
        gbc.writeMem(0xea81, { 0xf3 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x24f6, gbc.sp());
        EXPECT(0xea82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xea81));
        // F3 01F2
        gbc.setState(0xbb96, 0x6144, 0xa230, 0xe7c5, 0x41c1, 0x9bd7, 0x0, 0x0);
        gbc.writeMem(0xbb96, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x6144, gbc.sp());
        EXPECT(0xbb97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbb96));
        // F3 01F3
        gbc.setState(0xbdf5, 0xf552, 0x49f0, 0x48f7, 0x6908, 0xcf62, 0x0, 0x1);
        gbc.writeMem(0xbdf5, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xf552, gbc.sp());
        EXPECT(0xbdf6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbdf5));
        // F3 01F4
        gbc.setState(0x93c, 0x652d, 0x38f0, 0xcc0c, 0x903, 0xdf04, 0x0, 0x0);
        gbc.writeMem(0x93c, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x652d, gbc.sp());
        EXPECT(0x93d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01F5
        gbc.setState(0xe1e9, 0x5516, 0x49c0, 0x635c, 0xfea0, 0x48a7, 0x1, 0x1);
        gbc.writeMem(0xe1e9, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x5516, gbc.sp());
        EXPECT(0xe1ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe1e9));
        // F3 01F6
        gbc.setState(0x196c, 0x3733, 0xef90, 0x700e, 0x3af5, 0xa222, 0x1, 0x0);
        gbc.writeMem(0x196c, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x3733, gbc.sp());
        EXPECT(0x196d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01F7
        gbc.setState(0x650b, 0xe713, 0xe530, 0xa133, 0x754, 0x6a3d, 0x0, 0x1);
        gbc.writeMem(0x650b, { 0xf3 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xe713, gbc.sp());
        EXPECT(0x650c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01F8
        gbc.setState(0x2458, 0x4cf4, 0x76e0, 0x6ffd, 0x7df3, 0xc7b4, 0x0, 0x1);
        gbc.writeMem(0x2458, { 0xf3 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x4cf4, gbc.sp());
        EXPECT(0x2459, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01F9
        gbc.setState(0x8001, 0xf4ef, 0x84d0, 0x1275, 0x56e3, 0xc875, 0x0, 0x1);
        gbc.writeMem(0x8001, { 0xf3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xf4ef, gbc.sp());
        EXPECT(0x8002, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8001));
        // F3 01FA
        gbc.setState(0x41e5, 0x9830, 0xb200, 0x1830, 0xb80e, 0xffdb, 0x1, 0x0);
        gbc.writeMem(0x41e5, { 0xf3 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x9830, gbc.sp());
        EXPECT(0x41e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 01FB
        gbc.setState(0x5193, 0x395, 0xfdd0, 0x807f, 0xc2f0, 0xe85c, 0x1, 0x1);
        gbc.writeMem(0x5193, { 0xf3 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x395, gbc.sp());
        EXPECT(0x5194, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 01FC
        gbc.setState(0xb433, 0xf7d3, 0x3020, 0xeba5, 0xebe9, 0x8825, 0x0, 0x0);
        gbc.writeMem(0xb433, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xf7d3, gbc.sp());
        EXPECT(0xb434, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb433));
        // F3 01FD
        gbc.setState(0xbb0f, 0xde56, 0x96b0, 0x84f2, 0xac83, 0x57df, 0x1, 0x1);
        gbc.writeMem(0xbb0f, { 0xf3 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xde56, gbc.sp());
        EXPECT(0xbb10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbb0f));
        // F3 01FE
        gbc.setState(0x9912, 0x244, 0xa8f0, 0x51f6, 0x7c70, 0xad9a, 0x1, 0x1);
        gbc.writeMem(0x9912, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x244, gbc.sp());
        EXPECT(0x9913, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9912));
        // F3 01FF
        gbc.setState(0xeeae, 0x2fe3, 0xc830, 0xaab7, 0xed39, 0xd7eb, 0x0, 0x0);
        gbc.writeMem(0xeeae, { 0xf3 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x2fe3, gbc.sp());
        EXPECT(0xeeaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xeeae));
        // F3 0200
        gbc.setState(0xd23a, 0x4e49, 0x9ba0, 0xa3ce, 0xa709, 0xe5c0, 0x1, 0x0);
        gbc.writeMem(0xd23a, { 0xf3 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x4e49, gbc.sp());
        EXPECT(0xd23b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd23a));
        // F3 0201
        gbc.setState(0x5ada, 0x4da9, 0x7160, 0x15f, 0x2947, 0x4e43, 0x0, 0x0);
        gbc.writeMem(0x5ada, { 0xf3 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x4da9, gbc.sp());
        EXPECT(0x5adb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0202
        gbc.setState(0xbf3a, 0xeebd, 0xa090, 0x48e0, 0xbfa9, 0xdec, 0x1, 0x1);
        gbc.writeMem(0xbf3a, { 0xf3 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xeebd, gbc.sp());
        EXPECT(0xbf3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbf3a));
        // F3 0203
        gbc.setState(0x8e34, 0x3046, 0xe850, 0x5476, 0xff0e, 0xdc47, 0x1, 0x0);
        gbc.writeMem(0x8e34, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x3046, gbc.sp());
        EXPECT(0x8e35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8e34));
        // F3 0204
        gbc.setState(0x978d, 0xc5b3, 0x4120, 0x27a8, 0xbdea, 0x14b9, 0x1, 0x0);
        gbc.writeMem(0x978d, { 0xf3 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xc5b3, gbc.sp());
        EXPECT(0x978e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x978d));
        // F3 0205
        gbc.setState(0x8f3b, 0xfd3d, 0x670, 0x22db, 0x1252, 0x3055, 0x0, 0x0);
        gbc.writeMem(0x8f3b, { 0xf3 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xfd3d, gbc.sp());
        EXPECT(0x8f3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8f3b));
        // F3 0206
        gbc.setState(0x9105, 0x7433, 0xca50, 0xe6be, 0x605a, 0x23d3, 0x1, 0x1);
        gbc.writeMem(0x9105, { 0xf3 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7433, gbc.sp());
        EXPECT(0x9106, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9105));
        // F3 0207
        gbc.setState(0xed70, 0xbf91, 0x3670, 0x905d, 0x9ef8, 0xed2d, 0x1, 0x1);
        gbc.writeMem(0xed70, { 0xf3 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xbf91, gbc.sp());
        EXPECT(0xed71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed70));
        // F3 0208
        gbc.setState(0xbe7, 0x4774, 0x9a50, 0x4916, 0x8472, 0xf350, 0x1, 0x0);
        gbc.writeMem(0xbe7, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x4774, gbc.sp());
        EXPECT(0xbe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0209
        gbc.setState(0xc290, 0x8071, 0x9c20, 0x52ab, 0x82ae, 0x7473, 0x1, 0x1);
        gbc.writeMem(0xc290, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x8071, gbc.sp());
        EXPECT(0xc291, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc290));
        // F3 020A
        gbc.setState(0x400d, 0xef4a, 0xde0, 0xc637, 0x977d, 0x872f, 0x0, 0x1);
        gbc.writeMem(0x400d, { 0xf3 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xef4a, gbc.sp());
        EXPECT(0x400e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 020B
        gbc.setState(0x18c1, 0x4341, 0x8500, 0xef5d, 0xe2f4, 0xbc04, 0x0, 0x0);
        gbc.writeMem(0x18c1, { 0xf3 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x4341, gbc.sp());
        EXPECT(0x18c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 020C
        gbc.setState(0x284d, 0xeafd, 0x72f0, 0x3253, 0xa5cf, 0x1c96, 0x0, 0x0);
        gbc.writeMem(0x284d, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xeafd, gbc.sp());
        EXPECT(0x284e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 020D
        gbc.setState(0x32ea, 0x161e, 0x7830, 0x5ce3, 0x40f2, 0x864c, 0x0, 0x1);
        gbc.writeMem(0x32ea, { 0xf3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x161e, gbc.sp());
        EXPECT(0x32eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 020E
        gbc.setState(0xdfca, 0xf971, 0xdab0, 0x4826, 0xb920, 0x5443, 0x0, 0x1);
        gbc.writeMem(0xdfca, { 0xf3 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xf971, gbc.sp());
        EXPECT(0xdfcb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdfca));
        // F3 020F
        gbc.setState(0x844b, 0x9fa8, 0xe50, 0xe3be, 0xfd48, 0xef25, 0x0, 0x1);
        gbc.writeMem(0x844b, { 0xf3 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x9fa8, gbc.sp());
        EXPECT(0x844c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x844b));
        // F3 0210
        gbc.setState(0x2302, 0x2f05, 0xf0a0, 0xfb6, 0x98ed, 0x5196, 0x0, 0x1);
        gbc.writeMem(0x2302, { 0xf3 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2f05, gbc.sp());
        EXPECT(0x2303, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0211
        gbc.setState(0x4216, 0xd0d4, 0x4320, 0xaca8, 0x71a2, 0x7676, 0x1, 0x1);
        gbc.writeMem(0x4216, { 0xf3 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xd0d4, gbc.sp());
        EXPECT(0x4217, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0212
        gbc.setState(0x997b, 0xca5f, 0x6b90, 0x7eb7, 0x3bb4, 0x6f72, 0x0, 0x0);
        gbc.writeMem(0x997b, { 0xf3 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xca5f, gbc.sp());
        EXPECT(0x997c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x997b));
        // F3 0213
        gbc.setState(0x5dfa, 0x5ae6, 0x6330, 0x2f58, 0xb65e, 0x4272, 0x1, 0x1);
        gbc.writeMem(0x5dfa, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x5ae6, gbc.sp());
        EXPECT(0x5dfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0214
        gbc.setState(0xe3f, 0xea18, 0x5ca0, 0x1a0a, 0x7402, 0x8038, 0x1, 0x0);
        gbc.writeMem(0xe3f, { 0xf3 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xea18, gbc.sp());
        EXPECT(0xe40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0215
        gbc.setState(0x74, 0xf443, 0xd720, 0xe46c, 0x4bc5, 0xca46, 0x1, 0x0);
        gbc.writeMem(0x74, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xf443, gbc.sp());
        EXPECT(0x75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0216
        gbc.setState(0xcb2, 0xf50c, 0xc400, 0xb902, 0x5c40, 0xcd36, 0x0, 0x0);
        gbc.writeMem(0xcb2, { 0xf3 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xf50c, gbc.sp());
        EXPECT(0xcb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0217
        gbc.setState(0x84be, 0xdc5b, 0x21e0, 0xfd3e, 0xe754, 0xf29d, 0x1, 0x0);
        gbc.writeMem(0x84be, { 0xf3 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xdc5b, gbc.sp());
        EXPECT(0x84bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x84be));
        // F3 0218
        gbc.setState(0x2132, 0x8293, 0x5cb0, 0x259b, 0xd768, 0x9862, 0x1, 0x0);
        gbc.writeMem(0x2132, { 0xf3 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x8293, gbc.sp());
        EXPECT(0x2133, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0219
        gbc.setState(0x404, 0x9886, 0x85d0, 0x6ad3, 0x6e0f, 0x32d0, 0x0, 0x1);
        gbc.writeMem(0x404, { 0xf3 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x9886, gbc.sp());
        EXPECT(0x405, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 021A
        gbc.setState(0xefd0, 0xb65c, 0xad00, 0x36f, 0xe8e0, 0x6c8d, 0x0, 0x0);
        gbc.writeMem(0xefd0, { 0xf3 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xb65c, gbc.sp());
        EXPECT(0xefd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xefd0));
        // F3 021B
        gbc.setState(0x4d4b, 0x49f5, 0xdc10, 0x351f, 0x65b5, 0x28d1, 0x0, 0x1);
        gbc.writeMem(0x4d4b, { 0xf3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x49f5, gbc.sp());
        EXPECT(0x4d4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 021C
        gbc.setState(0x7227, 0x46b3, 0xdf20, 0xd6f5, 0x9523, 0xe427, 0x1, 0x1);
        gbc.writeMem(0x7227, { 0xf3 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x46b3, gbc.sp());
        EXPECT(0x7228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 021D
        gbc.setState(0xd20, 0x18d6, 0xeda0, 0x6f7f, 0xf6dc, 0x4c17, 0x0, 0x1);
        gbc.writeMem(0xd20, { 0xf3 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x18d6, gbc.sp());
        EXPECT(0xd21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 021E
        gbc.setState(0x3648, 0x89e8, 0xc980, 0x132, 0x79a9, 0x86cf, 0x1, 0x1);
        gbc.writeMem(0x3648, { 0xf3 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x89e8, gbc.sp());
        EXPECT(0x3649, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 021F
        gbc.setState(0x493f, 0xf48f, 0x5880, 0x7cd5, 0x7e40, 0xddd8, 0x1, 0x0);
        gbc.writeMem(0x493f, { 0xf3 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xf48f, gbc.sp());
        EXPECT(0x4940, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0220
        gbc.setState(0x55e9, 0xcd28, 0xa860, 0xaeb2, 0x9284, 0x5d6, 0x0, 0x1);
        gbc.writeMem(0x55e9, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xcd28, gbc.sp());
        EXPECT(0x55ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0221
        gbc.setState(0x10a6, 0xfb4e, 0xb1a0, 0x4092, 0x7af, 0xaaaa, 0x1, 0x1);
        gbc.writeMem(0x10a6, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xfb4e, gbc.sp());
        EXPECT(0x10a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0222
        gbc.setState(0xbe95, 0x796f, 0x7520, 0x80c4, 0x650a, 0x9d1c, 0x1, 0x0);
        gbc.writeMem(0xbe95, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x796f, gbc.sp());
        EXPECT(0xbe96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe95));
        // F3 0223
        gbc.setState(0x540d, 0xd9b6, 0x2b20, 0x79f6, 0xaaf9, 0x7cd7, 0x0, 0x0);
        gbc.writeMem(0x540d, { 0xf3 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xd9b6, gbc.sp());
        EXPECT(0x540e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0225
        gbc.setState(0x43ea, 0x7af1, 0xd110, 0x8189, 0x9b0b, 0xc269, 0x0, 0x0);
        gbc.writeMem(0x43ea, { 0xf3 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x7af1, gbc.sp());
        EXPECT(0x43eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0226
        gbc.setState(0x1f6c, 0x2b2e, 0x3e10, 0x615a, 0x87fc, 0xd38b, 0x1, 0x1);
        gbc.writeMem(0x1f6c, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x2b2e, gbc.sp());
        EXPECT(0x1f6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0227
        gbc.setState(0x5e9, 0x1d28, 0xa2b0, 0x6d79, 0xa9dd, 0x17fe, 0x1, 0x0);
        gbc.writeMem(0x5e9, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x1d28, gbc.sp());
        EXPECT(0x5ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0228
        gbc.setState(0xcf4f, 0x32f2, 0x1b70, 0xa4b4, 0xecb9, 0xfb0b, 0x1, 0x1);
        gbc.writeMem(0xcf4f, { 0xf3 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x32f2, gbc.sp());
        EXPECT(0xcf50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcf4f));
        // F3 0229
        gbc.setState(0x3637, 0x8b5f, 0xe2e0, 0x8dd5, 0xcabc, 0x2867, 0x1, 0x1);
        gbc.writeMem(0x3637, { 0xf3 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x8b5f, gbc.sp());
        EXPECT(0x3638, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 022A
        gbc.setState(0xc81b, 0x2e3e, 0xad20, 0xf0f, 0xda9, 0x842c, 0x1, 0x0);
        gbc.writeMem(0xc81b, { 0xf3 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x2e3e, gbc.sp());
        EXPECT(0xc81c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc81b));
        // F3 022B
        gbc.setState(0x660c, 0xd3e5, 0x8090, 0xa50d, 0x3750, 0x95b8, 0x0, 0x1);
        gbc.writeMem(0x660c, { 0xf3 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xd3e5, gbc.sp());
        EXPECT(0x660d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 022C
        gbc.setState(0x1c37, 0xc051, 0xe630, 0xe362, 0x4590, 0xdada, 0x1, 0x1);
        gbc.writeMem(0x1c37, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xc051, gbc.sp());
        EXPECT(0x1c38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 022D
        gbc.setState(0x30de, 0x4f84, 0x2170, 0xfb33, 0x41d9, 0xab76, 0x0, 0x1);
        gbc.writeMem(0x30de, { 0xf3 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x4f84, gbc.sp());
        EXPECT(0x30df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 022E
        gbc.setState(0x3810, 0xa9ba, 0xdee0, 0xfa9e, 0x8e98, 0xdc54, 0x1, 0x1);
        gbc.writeMem(0x3810, { 0xf3 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xa9ba, gbc.sp());
        EXPECT(0x3811, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 022F
        gbc.setState(0x6aae, 0xc80f, 0x5e40, 0x8361, 0xe2fd, 0x3cb5, 0x1, 0x1);
        gbc.writeMem(0x6aae, { 0xf3 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xc80f, gbc.sp());
        EXPECT(0x6aaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0230
        gbc.setState(0xeccf, 0xd22e, 0x3ec0, 0x99b0, 0x1dde, 0xb276, 0x0, 0x0);
        gbc.writeMem(0xeccf, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xd22e, gbc.sp());
        EXPECT(0xecd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xeccf));
        // F3 0231
        gbc.setState(0xe315, 0xbb93, 0xcd30, 0xff18, 0x495, 0xa64d, 0x0, 0x0);
        gbc.writeMem(0xe315, { 0xf3 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xbb93, gbc.sp());
        EXPECT(0xe316, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe315));
        // F3 0233
        gbc.setState(0xc080, 0xc27b, 0xbdf0, 0x5815, 0x435, 0x1948, 0x1, 0x1);
        gbc.writeMem(0xc080, { 0xf3 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xc27b, gbc.sp());
        EXPECT(0xc081, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc080));
        // F3 0234
        gbc.setState(0xc725, 0xcc19, 0xb580, 0x9d8b, 0x11f, 0xc679, 0x0, 0x1);
        gbc.writeMem(0xc725, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xcc19, gbc.sp());
        EXPECT(0xc726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc725));
        // F3 0235
        gbc.setState(0x9941, 0xf3af, 0xc770, 0x5f2, 0xd4b1, 0xf5e5, 0x0, 0x0);
        gbc.writeMem(0x9941, { 0xf3 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xf3af, gbc.sp());
        EXPECT(0x9942, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9941));
        // F3 0236
        gbc.setState(0x62bf, 0x68ea, 0x5770, 0x8b82, 0x9016, 0xf739, 0x0, 0x0);
        gbc.writeMem(0x62bf, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x68ea, gbc.sp());
        EXPECT(0x62c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0237
        gbc.setState(0xc290, 0x10a2, 0x7be0, 0xd834, 0xe692, 0x96b5, 0x1, 0x1);
        gbc.writeMem(0xc290, { 0xf3 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x10a2, gbc.sp());
        EXPECT(0xc291, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc290));
        // F3 0238
        gbc.setState(0xe67f, 0x6f26, 0xfbf0, 0xbde5, 0xf993, 0x3fc9, 0x0, 0x1);
        gbc.writeMem(0xe67f, { 0xf3 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x6f26, gbc.sp());
        EXPECT(0xe680, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe67f));
        // F3 0239
        gbc.setState(0x18d8, 0x5209, 0xb3e0, 0xeab2, 0xda35, 0x5b2e, 0x0, 0x1);
        gbc.writeMem(0x18d8, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x5209, gbc.sp());
        EXPECT(0x18d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 023A
        gbc.setState(0x685a, 0x6a2c, 0x700, 0x68d4, 0xaf6d, 0x294f, 0x1, 0x1);
        gbc.writeMem(0x685a, { 0xf3 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x6a2c, gbc.sp());
        EXPECT(0x685b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 023B
        gbc.setState(0x4f7d, 0xde89, 0xc4b0, 0xe61a, 0x7e77, 0x44b8, 0x1, 0x0);
        gbc.writeMem(0x4f7d, { 0xf3 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xde89, gbc.sp());
        EXPECT(0x4f7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 023C
        gbc.setState(0x5450, 0x169f, 0xd5f0, 0x48cf, 0xb53, 0xeedd, 0x1, 0x1);
        gbc.writeMem(0x5450, { 0xf3 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x169f, gbc.sp());
        EXPECT(0x5451, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 023D
        gbc.setState(0x5153, 0x69a8, 0x4d80, 0x341c, 0xff92, 0xfd25, 0x1, 0x0);
        gbc.writeMem(0x5153, { 0xf3 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x69a8, gbc.sp());
        EXPECT(0x5154, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 023F
        gbc.setState(0xa2de, 0x136d, 0x9400, 0xdfe8, 0x17ce, 0x71a9, 0x0, 0x0);
        gbc.writeMem(0xa2de, { 0xf3 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x136d, gbc.sp());
        EXPECT(0xa2df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa2de));
        // F3 0240
        gbc.setState(0xe41a, 0x7c38, 0x1520, 0x2ec1, 0xd0c8, 0x1855, 0x1, 0x1);
        gbc.writeMem(0xe41a, { 0xf3 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x7c38, gbc.sp());
        EXPECT(0xe41b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe41a));
        // F3 0242
        gbc.setState(0x99a8, 0x6436, 0xc110, 0x702, 0x35cc, 0xf9c1, 0x0, 0x0);
        gbc.writeMem(0x99a8, { 0xf3 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x6436, gbc.sp());
        EXPECT(0x99a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x99a8));
        // F3 0243
        gbc.setState(0x1191, 0x3a44, 0x2610, 0xf1a8, 0x2932, 0xbe78, 0x1, 0x0);
        gbc.writeMem(0x1191, { 0xf3 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3a44, gbc.sp());
        EXPECT(0x1192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0244
        gbc.setState(0x27eb, 0x90f6, 0x1d60, 0x8402, 0x9abb, 0x75f8, 0x1, 0x1);
        gbc.writeMem(0x27eb, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x90f6, gbc.sp());
        EXPECT(0x27ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0245
        gbc.setState(0x40db, 0x4264, 0x220, 0xb105, 0x91a8, 0x5f50, 0x0, 0x1);
        gbc.writeMem(0x40db, { 0xf3 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x4264, gbc.sp());
        EXPECT(0x40dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0246
        gbc.setState(0x95fc, 0xa8cb, 0xe360, 0xb3d5, 0x9264, 0x6feb, 0x1, 0x0);
        gbc.writeMem(0x95fc, { 0xf3 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xa8cb, gbc.sp());
        EXPECT(0x95fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x95fc));
        // F3 0247
        gbc.setState(0xad60, 0xd973, 0xc9e0, 0x170, 0x18c6, 0xc115, 0x0, 0x0);
        gbc.writeMem(0xad60, { 0xf3 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd973, gbc.sp());
        EXPECT(0xad61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xad60));
        // F3 0248
        gbc.setState(0xd50, 0x2884, 0x7250, 0xd46d, 0x2a5d, 0x8531, 0x1, 0x1);
        gbc.writeMem(0xd50, { 0xf3 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x2884, gbc.sp());
        EXPECT(0xd51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0249
        gbc.setState(0x1f8d, 0x7a7, 0xecc0, 0x15cf, 0x23bd, 0x9179, 0x1, 0x1);
        gbc.writeMem(0x1f8d, { 0xf3 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x7a7, gbc.sp());
        EXPECT(0x1f8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 024A
        gbc.setState(0xb85f, 0x2f5e, 0xe3d0, 0x5014, 0x4a29, 0xafbf, 0x1, 0x1);
        gbc.writeMem(0xb85f, { 0xf3 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x2f5e, gbc.sp());
        EXPECT(0xb860, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb85f));
        // F3 024B
        gbc.setState(0xd6c4, 0x9e4e, 0x1dc0, 0x7680, 0xa0a7, 0x83dc, 0x1, 0x0);
        gbc.writeMem(0xd6c4, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9e4e, gbc.sp());
        EXPECT(0xd6c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd6c4));
        // F3 024C
        gbc.setState(0x39ee, 0x4b57, 0xa900, 0xe5d4, 0xd55c, 0x5ecf, 0x1, 0x1);
        gbc.writeMem(0x39ee, { 0xf3 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x4b57, gbc.sp());
        EXPECT(0x39ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 024D
        gbc.setState(0xe60, 0xf6d7, 0xb100, 0x3cb, 0xa976, 0xcd94, 0x1, 0x1);
        gbc.writeMem(0xe60, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xf6d7, gbc.sp());
        EXPECT(0xe61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 024E
        gbc.setState(0x8197, 0x21f9, 0xa860, 0xbdde, 0x6209, 0xd9eb, 0x1, 0x1);
        gbc.writeMem(0x8197, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x21f9, gbc.sp());
        EXPECT(0x8198, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8197));
        // F3 024F
        gbc.setState(0x5f3b, 0x7a2b, 0xabd0, 0xadc7, 0x9cc1, 0x893f, 0x0, 0x0);
        gbc.writeMem(0x5f3b, { 0xf3 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x7a2b, gbc.sp());
        EXPECT(0x5f3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0250
        gbc.setState(0x1f70, 0x9101, 0xcce0, 0xc005, 0x1f08, 0x3c7f, 0x0, 0x1);
        gbc.writeMem(0x1f70, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x9101, gbc.sp());
        EXPECT(0x1f71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0251
        gbc.setState(0x747a, 0x7dda, 0xc260, 0x3c26, 0x3dbf, 0xf916, 0x0, 0x1);
        gbc.writeMem(0x747a, { 0xf3 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x7dda, gbc.sp());
        EXPECT(0x747b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0252
        gbc.setState(0x702, 0x1076, 0x57b0, 0xff19, 0x5f40, 0xccf8, 0x0, 0x0);
        gbc.writeMem(0x702, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x1076, gbc.sp());
        EXPECT(0x703, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0253
        gbc.setState(0xea3, 0x4ab6, 0x8330, 0xbcc8, 0x7796, 0x443e, 0x1, 0x1);
        gbc.writeMem(0xea3, { 0xf3 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4ab6, gbc.sp());
        EXPECT(0xea4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0254
        gbc.setState(0xbe85, 0x890d, 0xfff0, 0x922a, 0xeba2, 0xdf89, 0x1, 0x0);
        gbc.writeMem(0xbe85, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x890d, gbc.sp());
        EXPECT(0xbe86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe85));
        // F3 0255
        gbc.setState(0x8bff, 0x39af, 0x2c90, 0x7b7a, 0xb1b6, 0xd5a5, 0x0, 0x1);
        gbc.writeMem(0x8bff, { 0xf3 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x39af, gbc.sp());
        EXPECT(0x8c00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8bff));
        // F3 0256
        gbc.setState(0xe7f7, 0xdd13, 0xd7d0, 0x1cc1, 0x6849, 0xab0d, 0x0, 0x0);
        gbc.writeMem(0xe7f7, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xdd13, gbc.sp());
        EXPECT(0xe7f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe7f7));
        // F3 0257
        gbc.setState(0x975d, 0x3d89, 0x99e0, 0xf718, 0xa6e1, 0x2f81, 0x1, 0x1);
        gbc.writeMem(0x975d, { 0xf3 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x3d89, gbc.sp());
        EXPECT(0x975e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x975d));
        // F3 0258
        gbc.setState(0xee51, 0x56e9, 0x7890, 0x2dd6, 0x2bb4, 0xccda, 0x1, 0x0);
        gbc.writeMem(0xee51, { 0xf3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x56e9, gbc.sp());
        EXPECT(0xee52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xee51));
        // F3 0259
        gbc.setState(0x787a, 0x7c67, 0x80c0, 0x936a, 0x6bbc, 0xd772, 0x0, 0x0);
        gbc.writeMem(0x787a, { 0xf3 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x7c67, gbc.sp());
        EXPECT(0x787b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 025A
        gbc.setState(0x721c, 0x8b2b, 0x2250, 0xfa55, 0x1ae, 0xcfbe, 0x1, 0x0);
        gbc.writeMem(0x721c, { 0xf3 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8b2b, gbc.sp());
        EXPECT(0x721d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 025B
        gbc.setState(0x6839, 0x8f9d, 0x24f0, 0xb717, 0xa4ed, 0xc232, 0x1, 0x1);
        gbc.writeMem(0x6839, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x8f9d, gbc.sp());
        EXPECT(0x683a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 025C
        gbc.setState(0x77af, 0xefea, 0xe040, 0xba18, 0x241, 0x2822, 0x1, 0x1);
        gbc.writeMem(0x77af, { 0xf3 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xefea, gbc.sp());
        EXPECT(0x77b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 025D
        gbc.setState(0xd660, 0xc7a0, 0x4c70, 0x3f6d, 0x72b0, 0x1fa8, 0x1, 0x0);
        gbc.writeMem(0xd660, { 0xf3 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xc7a0, gbc.sp());
        EXPECT(0xd661, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd660));
        // F3 025E
        gbc.setState(0x283e, 0xdbe3, 0xe10, 0xadf0, 0x8794, 0x2382, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xf3 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xdbe3, gbc.sp());
        EXPECT(0x283f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 025F
        gbc.setState(0x4973, 0x4ac7, 0xb760, 0xf4ce, 0xd150, 0x4905, 0x1, 0x1);
        gbc.writeMem(0x4973, { 0xf3 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x4ac7, gbc.sp());
        EXPECT(0x4974, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0260
        gbc.setState(0x22ce, 0x157b, 0x1610, 0x83fd, 0x3080, 0x250a, 0x0, 0x1);
        gbc.writeMem(0x22ce, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x157b, gbc.sp());
        EXPECT(0x22cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0261
        gbc.setState(0x2a0d, 0xe41, 0x5a80, 0x54a6, 0x6fa7, 0x8225, 0x1, 0x0);
        gbc.writeMem(0x2a0d, { 0xf3 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe41, gbc.sp());
        EXPECT(0x2a0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0262
        gbc.setState(0x5b50, 0xafa9, 0xa8e0, 0xbb29, 0x26fc, 0xa485, 0x1, 0x0);
        gbc.writeMem(0x5b50, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xafa9, gbc.sp());
        EXPECT(0x5b51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0263
        gbc.setState(0x7740, 0x45cf, 0x37a0, 0xca0d, 0x3e87, 0x7fb5, 0x0, 0x1);
        gbc.writeMem(0x7740, { 0xf3 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x45cf, gbc.sp());
        EXPECT(0x7741, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0264
        gbc.setState(0xe86f, 0x234f, 0x7e20, 0x1793, 0xa7d8, 0xcc6b, 0x1, 0x1);
        gbc.writeMem(0xe86f, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x234f, gbc.sp());
        EXPECT(0xe870, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe86f));
        // F3 0265
        gbc.setState(0xc191, 0xc8ad, 0xdb60, 0xfa3d, 0xc50, 0x63c5, 0x0, 0x0);
        gbc.writeMem(0xc191, { 0xf3 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xc8ad, gbc.sp());
        EXPECT(0xc192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc191));
        // F3 0266
        gbc.setState(0xb21d, 0x5b96, 0xad60, 0x1572, 0xb21b, 0x7f74, 0x0, 0x0);
        gbc.writeMem(0xb21d, { 0xf3 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x5b96, gbc.sp());
        EXPECT(0xb21e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb21d));
        // F3 0267
        gbc.setState(0xbcb9, 0xfe46, 0x2010, 0x5aa2, 0x929d, 0xeef7, 0x1, 0x0);
        gbc.writeMem(0xbcb9, { 0xf3 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xfe46, gbc.sp());
        EXPECT(0xbcba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbcb9));
        // F3 0268
        gbc.setState(0x87c8, 0x948e, 0x27f0, 0x3e94, 0x819e, 0xe5b6, 0x0, 0x1);
        gbc.writeMem(0x87c8, { 0xf3 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x948e, gbc.sp());
        EXPECT(0x87c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x87c8));
        // F3 0269
        gbc.setState(0x7bad, 0x8a23, 0x2630, 0x3cfc, 0x8eae, 0x3757, 0x1, 0x1);
        gbc.writeMem(0x7bad, { 0xf3 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x8a23, gbc.sp());
        EXPECT(0x7bae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 026A
        gbc.setState(0x3e59, 0x7848, 0xcc80, 0xdb98, 0xd72b, 0xe75a, 0x0, 0x1);
        gbc.writeMem(0x3e59, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7848, gbc.sp());
        EXPECT(0x3e5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 026B
        gbc.setState(0x22d5, 0xb61, 0x2760, 0x71ec, 0x4b8d, 0x69c1, 0x0, 0x1);
        gbc.writeMem(0x22d5, { 0xf3 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xb61, gbc.sp());
        EXPECT(0x22d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 026C
        gbc.setState(0x463a, 0x211f, 0x52a0, 0xc23d, 0xe450, 0x44e8, 0x1, 0x1);
        gbc.writeMem(0x463a, { 0xf3 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x211f, gbc.sp());
        EXPECT(0x463b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 026D
        gbc.setState(0x450a, 0xf713, 0x9c40, 0xee5c, 0xbdd, 0x4e23, 0x0, 0x0);
        gbc.writeMem(0x450a, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xf713, gbc.sp());
        EXPECT(0x450b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 026E
        gbc.setState(0xccbe, 0xded3, 0x2ad0, 0x9ffb, 0xdae7, 0x726, 0x0, 0x1);
        gbc.writeMem(0xccbe, { 0xf3 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xded3, gbc.sp());
        EXPECT(0xccbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xccbe));
        // F3 026F
        gbc.setState(0xaef9, 0xd12b, 0x4b00, 0x1db7, 0xebaf, 0x1114, 0x0, 0x1);
        gbc.writeMem(0xaef9, { 0xf3 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xd12b, gbc.sp());
        EXPECT(0xaefa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaef9));
        // F3 0270
        gbc.setState(0x974c, 0xb477, 0xe480, 0x5954, 0x9504, 0x44ad, 0x0, 0x0);
        gbc.writeMem(0x974c, { 0xf3 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xb477, gbc.sp());
        EXPECT(0x974d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x974c));
        // F3 0271
        gbc.setState(0xae2d, 0x2be0, 0xd090, 0xf8c0, 0xaf6b, 0xf1d8, 0x1, 0x1);
        gbc.writeMem(0xae2d, { 0xf3 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x2be0, gbc.sp());
        EXPECT(0xae2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xae2d));
        // F3 0273
        gbc.setState(0x7409, 0xae5d, 0x9240, 0xdf7, 0xaab9, 0x42f7, 0x0, 0x1);
        gbc.writeMem(0x7409, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xae5d, gbc.sp());
        EXPECT(0x740a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0274
        gbc.setState(0x17ea, 0x7050, 0xce60, 0x5095, 0x7e5c, 0x8260, 0x0, 0x0);
        gbc.writeMem(0x17ea, { 0xf3 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x7050, gbc.sp());
        EXPECT(0x17eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0275
        gbc.setState(0x59a4, 0x660a, 0xba0, 0x8757, 0x4d78, 0x1fd2, 0x0, 0x0);
        gbc.writeMem(0x59a4, { 0xf3 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x660a, gbc.sp());
        EXPECT(0x59a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0276
        gbc.setState(0x76db, 0xa915, 0x7e30, 0x25de, 0xdacf, 0xa9c5, 0x0, 0x0);
        gbc.writeMem(0x76db, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xa915, gbc.sp());
        EXPECT(0x76dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0277
        gbc.setState(0x3416, 0x5e5d, 0x7e70, 0x96aa, 0xa9d9, 0xd350, 0x0, 0x1);
        gbc.writeMem(0x3416, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x5e5d, gbc.sp());
        EXPECT(0x3417, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0278
        gbc.setState(0xd6eb, 0x989, 0xa2e0, 0x2395, 0x2182, 0x23d5, 0x0, 0x1);
        gbc.writeMem(0xd6eb, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x989, gbc.sp());
        EXPECT(0xd6ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd6eb));
        // F3 027A
        gbc.setState(0xab8b, 0x4476, 0xef20, 0xffa0, 0x627a, 0x912b, 0x0, 0x1);
        gbc.writeMem(0xab8b, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x4476, gbc.sp());
        EXPECT(0xab8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xab8b));
        // F3 027D
        gbc.setState(0xac3b, 0xa695, 0xf130, 0xdf47, 0xb2d8, 0x30ce, 0x0, 0x0);
        gbc.writeMem(0xac3b, { 0xf3 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xa695, gbc.sp());
        EXPECT(0xac3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xac3b));
        // F3 027E
        gbc.setState(0xd11e, 0x3cf6, 0x3bb0, 0xe610, 0xad8, 0xd468, 0x1, 0x0);
        gbc.writeMem(0xd11e, { 0xf3 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x3cf6, gbc.sp());
        EXPECT(0xd11f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd11e));
        // F3 027F
        gbc.setState(0xb915, 0x29cc, 0x5970, 0x284c, 0x1e4d, 0x8b33, 0x1, 0x0);
        gbc.writeMem(0xb915, { 0xf3 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x29cc, gbc.sp());
        EXPECT(0xb916, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb915));
        // F3 0280
        gbc.setState(0x5114, 0xddd7, 0x8c40, 0x4783, 0xc1a1, 0x5a10, 0x0, 0x1);
        gbc.writeMem(0x5114, { 0xf3 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xddd7, gbc.sp());
        EXPECT(0x5115, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0281
        gbc.setState(0x6723, 0xde79, 0xdcf0, 0xedb1, 0xd6b0, 0x38f5, 0x0, 0x0);
        gbc.writeMem(0x6723, { 0xf3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xde79, gbc.sp());
        EXPECT(0x6724, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0282
        gbc.setState(0x58d, 0x4382, 0xee90, 0xfeba, 0x884d, 0x1312, 0x0, 0x1);
        gbc.writeMem(0x58d, { 0xf3 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x4382, gbc.sp());
        EXPECT(0x58e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0283
        gbc.setState(0xd558, 0xf6f7, 0x7e10, 0x9931, 0x549e, 0x93b1, 0x1, 0x1);
        gbc.writeMem(0xd558, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xf6f7, gbc.sp());
        EXPECT(0xd559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd558));
        // F3 0284
        gbc.setState(0x446c, 0x9d9b, 0x9a70, 0xca3c, 0xc61c, 0xba1f, 0x0, 0x1);
        gbc.writeMem(0x446c, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x9d9b, gbc.sp());
        EXPECT(0x446d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0285
        gbc.setState(0xa05c, 0x67ee, 0xed40, 0xa108, 0xe729, 0x380d, 0x1, 0x0);
        gbc.writeMem(0xa05c, { 0xf3 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x67ee, gbc.sp());
        EXPECT(0xa05d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa05c));
        // F3 0286
        gbc.setState(0x3ebc, 0x17f8, 0x8c40, 0xacf2, 0xa0f0, 0x5eeb, 0x0, 0x1);
        gbc.writeMem(0x3ebc, { 0xf3 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x17f8, gbc.sp());
        EXPECT(0x3ebd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0287
        gbc.setState(0xd466, 0x1faf, 0xe1d0, 0x9471, 0xc59e, 0x22e7, 0x1, 0x0);
        gbc.writeMem(0xd466, { 0xf3 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x1faf, gbc.sp());
        EXPECT(0xd467, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd466));
        // F3 0288
        gbc.setState(0xa432, 0xfee6, 0xb0e0, 0xc643, 0x4e7b, 0x5ca7, 0x1, 0x1);
        gbc.writeMem(0xa432, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xfee6, gbc.sp());
        EXPECT(0xa433, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa432));
        // F3 0289
        gbc.setState(0xae8c, 0x5c6a, 0x1600, 0x6db9, 0x6129, 0x2694, 0x1, 0x0);
        gbc.writeMem(0xae8c, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x5c6a, gbc.sp());
        EXPECT(0xae8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xae8c));
        // F3 028A
        gbc.setState(0xa9e9, 0x42e8, 0x560, 0x94df, 0xf14b, 0xa451, 0x0, 0x0);
        gbc.writeMem(0xa9e9, { 0xf3 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x42e8, gbc.sp());
        EXPECT(0xa9ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa9e9));
        // F3 028B
        gbc.setState(0x6484, 0xa561, 0xf500, 0x65e6, 0x5d74, 0x16d0, 0x0, 0x0);
        gbc.writeMem(0x6484, { 0xf3 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xa561, gbc.sp());
        EXPECT(0x6485, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 028C
        gbc.setState(0x76aa, 0xb586, 0x8b40, 0x7ce7, 0x85ab, 0x55a6, 0x1, 0x0);
        gbc.writeMem(0x76aa, { 0xf3 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb586, gbc.sp());
        EXPECT(0x76ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 028D
        gbc.setState(0x71b1, 0x3a8a, 0xf130, 0x3625, 0x7a05, 0x7210, 0x1, 0x0);
        gbc.writeMem(0x71b1, { 0xf3 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x3a8a, gbc.sp());
        EXPECT(0x71b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 028E
        gbc.setState(0x826b, 0x9b37, 0xcc10, 0x30e4, 0x615f, 0x5dc8, 0x0, 0x1);
        gbc.writeMem(0x826b, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x9b37, gbc.sp());
        EXPECT(0x826c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x826b));
        // F3 028F
        gbc.setState(0x53ba, 0xb990, 0x34d0, 0xf00a, 0xe6be, 0xad17, 0x1, 0x1);
        gbc.writeMem(0x53ba, { 0xf3 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xb990, gbc.sp());
        EXPECT(0x53bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0290
        gbc.setState(0x1d8f, 0xf0ef, 0x50e0, 0xecc5, 0xa03c, 0x78ae, 0x1, 0x0);
        gbc.writeMem(0x1d8f, { 0xf3 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xf0ef, gbc.sp());
        EXPECT(0x1d90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0291
        gbc.setState(0x684e, 0x299a, 0x4210, 0xe7f5, 0x7781, 0x9930, 0x0, 0x0);
        gbc.writeMem(0x684e, { 0xf3 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x299a, gbc.sp());
        EXPECT(0x684f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0292
        gbc.setState(0x14da, 0x252a, 0x7030, 0x1a5e, 0x4a18, 0x511c, 0x0, 0x1);
        gbc.writeMem(0x14da, { 0xf3 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x252a, gbc.sp());
        EXPECT(0x14db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0293
        gbc.setState(0x11fe, 0x4664, 0x38c0, 0x2861, 0x9524, 0x9736, 0x0, 0x1);
        gbc.writeMem(0x11fe, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x4664, gbc.sp());
        EXPECT(0x11ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0294
        gbc.setState(0xe2c1, 0xb8ad, 0x4c50, 0x49c8, 0x50d9, 0xc78a, 0x1, 0x1);
        gbc.writeMem(0xe2c1, { 0xf3 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xb8ad, gbc.sp());
        EXPECT(0xe2c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe2c1));
        // F3 0295
        gbc.setState(0xe485, 0xd2cd, 0x2930, 0xc0b1, 0xbcc5, 0x5d9b, 0x1, 0x1);
        gbc.writeMem(0xe485, { 0xf3 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xd2cd, gbc.sp());
        EXPECT(0xe486, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe485));
        // F3 0296
        gbc.setState(0xa16c, 0xa6e1, 0x5a70, 0xbf72, 0x5b8f, 0x72d4, 0x0, 0x0);
        gbc.writeMem(0xa16c, { 0xf3 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xa6e1, gbc.sp());
        EXPECT(0xa16d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa16c));
        // F3 0297
        gbc.setState(0xb4d3, 0xb821, 0x3840, 0xa32a, 0x61fb, 0x9412, 0x1, 0x1);
        gbc.writeMem(0xb4d3, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xb821, gbc.sp());
        EXPECT(0xb4d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb4d3));
        // F3 029A
        gbc.setState(0xc8a1, 0xfab7, 0x1420, 0xf7f0, 0x3a4e, 0xe3e4, 0x0, 0x0);
        gbc.writeMem(0xc8a1, { 0xf3 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xfab7, gbc.sp());
        EXPECT(0xc8a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc8a1));
        // F3 029B
        gbc.setState(0xd580, 0x278c, 0x1130, 0xe7f, 0xb766, 0xb3fe, 0x1, 0x0);
        gbc.writeMem(0xd580, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x278c, gbc.sp());
        EXPECT(0xd581, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd580));
        // F3 029C
        gbc.setState(0x5b85, 0x2c4a, 0xdc90, 0x896b, 0x584e, 0x3c8c, 0x1, 0x0);
        gbc.writeMem(0x5b85, { 0xf3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x2c4a, gbc.sp());
        EXPECT(0x5b86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 029D
        gbc.setState(0x5a74, 0xa5f7, 0xb140, 0xa07c, 0xbf18, 0xa0bb, 0x0, 0x1);
        gbc.writeMem(0x5a74, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xa5f7, gbc.sp());
        EXPECT(0x5a75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 029F
        gbc.setState(0x8f26, 0x6195, 0x7160, 0xa857, 0x9855, 0x192f, 0x0, 0x1);
        gbc.writeMem(0x8f26, { 0xf3 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x6195, gbc.sp());
        EXPECT(0x8f27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8f26));
        // F3 02A0
        gbc.setState(0x2563, 0x64b2, 0x38f0, 0xd544, 0xa9c, 0xa843, 0x0, 0x1);
        gbc.writeMem(0x2563, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x64b2, gbc.sp());
        EXPECT(0x2564, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02A1
        gbc.setState(0x188f, 0x7022, 0x5400, 0xdece, 0xbee, 0xcdd0, 0x0, 0x1);
        gbc.writeMem(0x188f, { 0xf3 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x7022, gbc.sp());
        EXPECT(0x1890, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02A3
        gbc.setState(0x6072, 0xe535, 0xe470, 0x29a9, 0x6395, 0xb153, 0x0, 0x0);
        gbc.writeMem(0x6072, { 0xf3 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xe535, gbc.sp());
        EXPECT(0x6073, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02A4
        gbc.setState(0xa42a, 0x64fa, 0x1100, 0x2fb3, 0xc0e, 0x19d6, 0x0, 0x1);
        gbc.writeMem(0xa42a, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x64fa, gbc.sp());
        EXPECT(0xa42b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa42a));
        // F3 02A5
        gbc.setState(0xc394, 0xdb64, 0x1810, 0x6d60, 0xba5b, 0x55ed, 0x1, 0x0);
        gbc.writeMem(0xc394, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xdb64, gbc.sp());
        EXPECT(0xc395, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc394));
        // F3 02A6
        gbc.setState(0xa84b, 0xafc5, 0x84a0, 0x8887, 0xbd86, 0xf44d, 0x1, 0x1);
        gbc.writeMem(0xa84b, { 0xf3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xafc5, gbc.sp());
        EXPECT(0xa84c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa84b));
        // F3 02A7
        gbc.setState(0xb0a2, 0x9273, 0x76f0, 0xf79f, 0x1851, 0x6308, 0x1, 0x1);
        gbc.writeMem(0xb0a2, { 0xf3 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x9273, gbc.sp());
        EXPECT(0xb0a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb0a2));
        // F3 02A8
        gbc.setState(0xc060, 0x94a8, 0x8a10, 0xfbcb, 0x622a, 0xd92c, 0x1, 0x0);
        gbc.writeMem(0xc060, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x94a8, gbc.sp());
        EXPECT(0xc061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc060));
        // F3 02A9
        gbc.setState(0x10e, 0x57ab, 0x5220, 0x137e, 0x74af, 0x2ff2, 0x1, 0x0);
        gbc.writeMem(0x10e, { 0xf3 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x57ab, gbc.sp());
        EXPECT(0x10f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02AA
        gbc.setState(0x1fd2, 0xbe0, 0x8dd0, 0x9adb, 0xc1a5, 0xa3bb, 0x1, 0x0);
        gbc.writeMem(0x1fd2, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xbe0, gbc.sp());
        EXPECT(0x1fd3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02AB
        gbc.setState(0xd462, 0x5a4b, 0x8b90, 0xd5ce, 0xb098, 0xecdb, 0x0, 0x0);
        gbc.writeMem(0xd462, { 0xf3 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5a4b, gbc.sp());
        EXPECT(0xd463, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd462));
        // F3 02AC
        gbc.setState(0x2c9a, 0x6f3c, 0x350, 0x12ef, 0x2591, 0x76f3, 0x0, 0x1);
        gbc.writeMem(0x2c9a, { 0xf3 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x6f3c, gbc.sp());
        EXPECT(0x2c9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02AD
        gbc.setState(0x4988, 0xb787, 0x2160, 0x5650, 0xe6b4, 0x4c3c, 0x0, 0x1);
        gbc.writeMem(0x4988, { 0xf3 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xb787, gbc.sp());
        EXPECT(0x4989, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02AE
        gbc.setState(0x9fcb, 0x782a, 0xf440, 0x81cb, 0xaec3, 0xcb55, 0x0, 0x0);
        gbc.writeMem(0x9fcb, { 0xf3 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x782a, gbc.sp());
        EXPECT(0x9fcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9fcb));
        // F3 02AF
        gbc.setState(0x5ebc, 0xe645, 0xfc00, 0x7b4e, 0xa8bd, 0xca9, 0x1, 0x1);
        gbc.writeMem(0x5ebc, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xe645, gbc.sp());
        EXPECT(0x5ebd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02B0
        gbc.setState(0xbfd4, 0x1e7f, 0xc0d0, 0x2ea0, 0x4c95, 0x6b91, 0x1, 0x1);
        gbc.writeMem(0xbfd4, { 0xf3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x1e7f, gbc.sp());
        EXPECT(0xbfd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbfd4));
        // F3 02B2
        gbc.setState(0xb61, 0x6238, 0x8440, 0x64d2, 0xd96e, 0xc5ba, 0x1, 0x1);
        gbc.writeMem(0xb61, { 0xf3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x6238, gbc.sp());
        EXPECT(0xb62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02B3
        gbc.setState(0x7b65, 0xe4ec, 0xfab0, 0x1e3d, 0x1560, 0xcc9c, 0x1, 0x0);
        gbc.writeMem(0x7b65, { 0xf3 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xe4ec, gbc.sp());
        EXPECT(0x7b66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02B4
        gbc.setState(0xcd98, 0xa78e, 0x7720, 0xd3b4, 0xdfa3, 0xf085, 0x0, 0x0);
        gbc.writeMem(0xcd98, { 0xf3 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xa78e, gbc.sp());
        EXPECT(0xcd99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcd98));
        // F3 02B5
        gbc.setState(0xb9f7, 0xee94, 0xa480, 0xdd25, 0x7ffd, 0x69bd, 0x0, 0x1);
        gbc.writeMem(0xb9f7, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xee94, gbc.sp());
        EXPECT(0xb9f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb9f7));
        // F3 02B6
        gbc.setState(0x996b, 0xb221, 0x1d80, 0xd0f6, 0x2803, 0x5767, 0x0, 0x0);
        gbc.writeMem(0x996b, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xb221, gbc.sp());
        EXPECT(0x996c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x996b));
        // F3 02B7
        gbc.setState(0x75f9, 0x7e68, 0x6250, 0x7ac6, 0xca88, 0x4728, 0x0, 0x1);
        gbc.writeMem(0x75f9, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x7e68, gbc.sp());
        EXPECT(0x75fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02B8
        gbc.setState(0x5d15, 0xd81d, 0x2ff0, 0x126e, 0x5856, 0x576a, 0x0, 0x0);
        gbc.writeMem(0x5d15, { 0xf3 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xd81d, gbc.sp());
        EXPECT(0x5d16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02B9
        gbc.setState(0xd7f5, 0x811a, 0x6950, 0xa8af, 0xbcb2, 0x62cf, 0x1, 0x1);
        gbc.writeMem(0xd7f5, { 0xf3 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x811a, gbc.sp());
        EXPECT(0xd7f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd7f5));
        // F3 02BA
        gbc.setState(0x91ee, 0x592c, 0x61c0, 0x1341, 0xcecb, 0x285a, 0x1, 0x0);
        gbc.writeMem(0x91ee, { 0xf3 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x592c, gbc.sp());
        EXPECT(0x91ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x91ee));
        // F3 02BB
        gbc.setState(0x37d2, 0xa01a, 0x2c20, 0x65f1, 0x509e, 0xc4a1, 0x1, 0x1);
        gbc.writeMem(0x37d2, { 0xf3 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xa01a, gbc.sp());
        EXPECT(0x37d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02BC
        gbc.setState(0x8404, 0x1dd9, 0x57b0, 0x7cca, 0x1b6d, 0xa2fd, 0x0, 0x0);
        gbc.writeMem(0x8404, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x1dd9, gbc.sp());
        EXPECT(0x8405, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8404));
        // F3 02BD
        gbc.setState(0x8b60, 0x3875, 0x8310, 0xf3e9, 0x8d5e, 0x640, 0x1, 0x1);
        gbc.writeMem(0x8b60, { 0xf3 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x3875, gbc.sp());
        EXPECT(0x8b61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8b60));
        // F3 02BE
        gbc.setState(0xd19e, 0x5202, 0xec60, 0xed11, 0xd19a, 0x189c, 0x0, 0x1);
        gbc.writeMem(0xd19e, { 0xf3 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x5202, gbc.sp());
        EXPECT(0xd19f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd19e));
        // F3 02BF
        gbc.setState(0x12f9, 0x6c2, 0x6c70, 0x37f8, 0xe65c, 0x8c9b, 0x0, 0x1);
        gbc.writeMem(0x12f9, { 0xf3 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x6c2, gbc.sp());
        EXPECT(0x12fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02C0
        gbc.setState(0xe99c, 0x98e4, 0xff30, 0x1472, 0x80c5, 0xbd53, 0x0, 0x0);
        gbc.writeMem(0xe99c, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x98e4, gbc.sp());
        EXPECT(0xe99d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe99c));
        // F3 02C1
        gbc.setState(0xc087, 0x2be2, 0xa470, 0x74f5, 0xb9c9, 0x3646, 0x0, 0x1);
        gbc.writeMem(0xc087, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x2be2, gbc.sp());
        EXPECT(0xc088, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc087));
        // F3 02C2
        gbc.setState(0x5e6b, 0x50f0, 0x57c0, 0x2af7, 0x5138, 0x499, 0x1, 0x1);
        gbc.writeMem(0x5e6b, { 0xf3 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x50f0, gbc.sp());
        EXPECT(0x5e6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02C3
        gbc.setState(0x6db, 0x7100, 0xb060, 0xb1e4, 0x46ae, 0x8519, 0x0, 0x0);
        gbc.writeMem(0x6db, { 0xf3 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x7100, gbc.sp());
        EXPECT(0x6dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02C4
        gbc.setState(0xe0bb, 0xa245, 0xde20, 0xfff9, 0x4d7e, 0x295, 0x1, 0x0);
        gbc.writeMem(0xe0bb, { 0xf3 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xa245, gbc.sp());
        EXPECT(0xe0bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe0bb));
        // F3 02C5
        gbc.setState(0x7532, 0x3401, 0x67a0, 0xb6ce, 0x3174, 0x91dd, 0x1, 0x0);
        gbc.writeMem(0x7532, { 0xf3 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3401, gbc.sp());
        EXPECT(0x7533, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02C6
        gbc.setState(0xb783, 0x69bf, 0x2f90, 0x2ed0, 0x3c33, 0x24a5, 0x1, 0x1);
        gbc.writeMem(0xb783, { 0xf3 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x69bf, gbc.sp());
        EXPECT(0xb784, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb783));
        // F3 02C8
        gbc.setState(0xd203, 0x88dc, 0x96f0, 0xd46a, 0xddb4, 0x4ff7, 0x1, 0x0);
        gbc.writeMem(0xd203, { 0xf3 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x88dc, gbc.sp());
        EXPECT(0xd204, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd203));
        // F3 02C9
        gbc.setState(0xbb81, 0xdc17, 0xa0f0, 0xc4cb, 0xd55b, 0x7052, 0x0, 0x0);
        gbc.writeMem(0xbb81, { 0xf3 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xdc17, gbc.sp());
        EXPECT(0xbb82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbb81));
        // F3 02CA
        gbc.setState(0x2ae2, 0x2a7e, 0xadc0, 0x4bb3, 0xedc3, 0xdc61, 0x0, 0x0);
        gbc.writeMem(0x2ae2, { 0xf3 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2a7e, gbc.sp());
        EXPECT(0x2ae3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02CB
        gbc.setState(0x21c2, 0xe0b, 0xae00, 0x3c79, 0xf31c, 0x8bad, 0x0, 0x0);
        gbc.writeMem(0x21c2, { 0xf3 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xe0b, gbc.sp());
        EXPECT(0x21c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02CC
        gbc.setState(0x3f1b, 0x9f52, 0xfab0, 0xfeba, 0x786e, 0xce95, 0x1, 0x0);
        gbc.writeMem(0x3f1b, { 0xf3 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x9f52, gbc.sp());
        EXPECT(0x3f1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02CD
        gbc.setState(0x12dd, 0xbed0, 0xe8e0, 0xa23c, 0xe448, 0x8a4a, 0x0, 0x1);
        gbc.writeMem(0x12dd, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xbed0, gbc.sp());
        EXPECT(0x12de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02CE
        gbc.setState(0x2aa6, 0x507b, 0x2970, 0x64e7, 0xa348, 0x3a76, 0x0, 0x1);
        gbc.writeMem(0x2aa6, { 0xf3 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x507b, gbc.sp());
        EXPECT(0x2aa7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02CF
        gbc.setState(0xe02c, 0x6090, 0xec40, 0x6268, 0xf54a, 0x28a6, 0x1, 0x0);
        gbc.writeMem(0xe02c, { 0xf3 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x6090, gbc.sp());
        EXPECT(0xe02d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe02c));
        // F3 02D0
        gbc.setState(0xb62, 0xbee0, 0x4450, 0xc761, 0x41ca, 0xcb3, 0x1, 0x1);
        gbc.writeMem(0xb62, { 0xf3 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xbee0, gbc.sp());
        EXPECT(0xb63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02D1
        gbc.setState(0xb1a9, 0xd8d, 0xb190, 0xb3e1, 0x7732, 0x6438, 0x1, 0x0);
        gbc.writeMem(0xb1a9, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xd8d, gbc.sp());
        EXPECT(0xb1aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb1a9));
        // F3 02D2
        gbc.setState(0x5fb5, 0x411a, 0xcea0, 0xd655, 0x55b7, 0xec6d, 0x0, 0x1);
        gbc.writeMem(0x5fb5, { 0xf3 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x411a, gbc.sp());
        EXPECT(0x5fb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02D3
        gbc.setState(0x6abe, 0xe992, 0x86e0, 0x5ba8, 0x1166, 0xcb6f, 0x0, 0x1);
        gbc.writeMem(0x6abe, { 0xf3 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xe992, gbc.sp());
        EXPECT(0x6abf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02D4
        gbc.setState(0x9f21, 0x5443, 0x50f0, 0xa743, 0x34c5, 0x6e13, 0x0, 0x0);
        gbc.writeMem(0x9f21, { 0xf3 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x5443, gbc.sp());
        EXPECT(0x9f22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9f21));
        // F3 02D5
        gbc.setState(0xe37a, 0x6b72, 0x93b0, 0x1d69, 0x8af6, 0xf34b, 0x1, 0x1);
        gbc.writeMem(0xe37a, { 0xf3 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x6b72, gbc.sp());
        EXPECT(0xe37b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe37a));
        // F3 02D6
        gbc.setState(0x90fa, 0xeebb, 0x32e0, 0xe98a, 0xd141, 0x6902, 0x0, 0x0);
        gbc.writeMem(0x90fa, { 0xf3 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xeebb, gbc.sp());
        EXPECT(0x90fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x90fa));
        // F3 02D7
        gbc.setState(0xa83e, 0xf1f6, 0x5c10, 0xf47c, 0x99b4, 0x57b4, 0x1, 0x1);
        gbc.writeMem(0xa83e, { 0xf3 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xf1f6, gbc.sp());
        EXPECT(0xa83f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa83e));
        // F3 02D8
        gbc.setState(0x9692, 0x755b, 0x8a00, 0x430f, 0x55, 0x77c3, 0x0, 0x0);
        gbc.writeMem(0x9692, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x755b, gbc.sp());
        EXPECT(0x9693, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9692));
        // F3 02D9
        gbc.setState(0xd6b0, 0x491d, 0xeb50, 0x8088, 0xdb6b, 0x138c, 0x0, 0x1);
        gbc.writeMem(0xd6b0, { 0xf3 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x491d, gbc.sp());
        EXPECT(0xd6b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd6b0));
        // F3 02DA
        gbc.setState(0x1745, 0xb672, 0x65d0, 0x3b00, 0xcd90, 0xe7fb, 0x0, 0x0);
        gbc.writeMem(0x1745, { 0xf3 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xb672, gbc.sp());
        EXPECT(0x1746, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02DB
        gbc.setState(0xd5e2, 0x3987, 0x6c70, 0x4d2c, 0xfad4, 0x692, 0x1, 0x0);
        gbc.writeMem(0xd5e2, { 0xf3 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x3987, gbc.sp());
        EXPECT(0xd5e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd5e2));
        // F3 02DC
        gbc.setState(0xbe95, 0x335c, 0xe840, 0x697, 0x26c1, 0x9998, 0x1, 0x0);
        gbc.writeMem(0xbe95, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x335c, gbc.sp());
        EXPECT(0xbe96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe95));
        // F3 02DD
        gbc.setState(0x780f, 0x9b0, 0x3800, 0x37c6, 0x8933, 0x1f43, 0x0, 0x0);
        gbc.writeMem(0x780f, { 0xf3 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x9b0, gbc.sp());
        EXPECT(0x7810, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02DE
        gbc.setState(0x2335, 0xe637, 0xd800, 0xc3db, 0xd6e6, 0x93cc, 0x1, 0x1);
        gbc.writeMem(0x2335, { 0xf3 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xe637, gbc.sp());
        EXPECT(0x2336, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02DF
        gbc.setState(0x3c7f, 0x7ff2, 0xea30, 0x69e1, 0x939c, 0x4e90, 0x1, 0x1);
        gbc.writeMem(0x3c7f, { 0xf3 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x7ff2, gbc.sp());
        EXPECT(0x3c80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02E0
        gbc.setState(0x6b0f, 0x25dd, 0x6cf0, 0x3913, 0x73b5, 0x7a82, 0x1, 0x0);
        gbc.writeMem(0x6b0f, { 0xf3 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x25dd, gbc.sp());
        EXPECT(0x6b10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02E1
        gbc.setState(0xb00b, 0xcc81, 0x7090, 0x96c8, 0x5514, 0x5f39, 0x0, 0x0);
        gbc.writeMem(0xb00b, { 0xf3 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xcc81, gbc.sp());
        EXPECT(0xb00c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb00b));
        // F3 02E2
        gbc.setState(0x1efc, 0xefbf, 0x98e0, 0xfcf1, 0xc736, 0x3277, 0x0, 0x1);
        gbc.writeMem(0x1efc, { 0xf3 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xefbf, gbc.sp());
        EXPECT(0x1efd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02E3
        gbc.setState(0x2f4, 0x2bbc, 0xd3c0, 0x7fb3, 0x3f22, 0x6910, 0x1, 0x0);
        gbc.writeMem(0x2f4, { 0xf3 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x2bbc, gbc.sp());
        EXPECT(0x2f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02E5
        gbc.setState(0x61fc, 0xdef9, 0x7f80, 0x539, 0x14c7, 0xa39b, 0x1, 0x1);
        gbc.writeMem(0x61fc, { 0xf3 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xdef9, gbc.sp());
        EXPECT(0x61fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02E6
        gbc.setState(0x3fb4, 0x5b77, 0xaa40, 0x8398, 0x438e, 0xe60c, 0x0, 0x0);
        gbc.writeMem(0x3fb4, { 0xf3 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x5b77, gbc.sp());
        EXPECT(0x3fb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02E7
        gbc.setState(0xec64, 0xbdc0, 0xebc0, 0x543d, 0x4d4e, 0xa904, 0x0, 0x0);
        gbc.writeMem(0xec64, { 0xf3 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xbdc0, gbc.sp());
        EXPECT(0xec65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xec64));
        // F3 02E8
        gbc.setState(0x79c7, 0x839c, 0xb1b0, 0x205e, 0x5d56, 0xbc07, 0x0, 0x0);
        gbc.writeMem(0x79c7, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x839c, gbc.sp());
        EXPECT(0x79c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02E9
        gbc.setState(0xcd33, 0xd92b, 0x47d0, 0x2f2d, 0xd76c, 0x75e7, 0x1, 0x1);
        gbc.writeMem(0xcd33, { 0xf3 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xd92b, gbc.sp());
        EXPECT(0xcd34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcd33));
        // F3 02EA
        gbc.setState(0xd62, 0x4cc0, 0x53c0, 0xa0e2, 0x3fe2, 0x6daa, 0x1, 0x0);
        gbc.writeMem(0xd62, { 0xf3 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4cc0, gbc.sp());
        EXPECT(0xd63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02EB
        gbc.setState(0x3364, 0x1de, 0x4ac0, 0x808e, 0x767a, 0x10df, 0x0, 0x0);
        gbc.writeMem(0x3364, { 0xf3 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x1de, gbc.sp());
        EXPECT(0x3365, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02EC
        gbc.setState(0x8121, 0x626a, 0x6d70, 0xf691, 0xc369, 0x9b7d, 0x0, 0x0);
        gbc.writeMem(0x8121, { 0xf3 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x626a, gbc.sp());
        EXPECT(0x8122, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8121));
        // F3 02ED
        gbc.setState(0xe1c2, 0xc245, 0x5220, 0x2197, 0xe575, 0xa28, 0x0, 0x1);
        gbc.writeMem(0xe1c2, { 0xf3 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xc245, gbc.sp());
        EXPECT(0xe1c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe1c2));
        // F3 02EF
        gbc.setState(0x8362, 0xa46c, 0x8a30, 0xad9, 0x4144, 0xe361, 0x1, 0x1);
        gbc.writeMem(0x8362, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xa46c, gbc.sp());
        EXPECT(0x8363, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8362));
        // F3 02F0
        gbc.setState(0xa2a0, 0x3faa, 0xab80, 0x74d1, 0x3bdd, 0x6245, 0x0, 0x1);
        gbc.writeMem(0xa2a0, { 0xf3 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x3faa, gbc.sp());
        EXPECT(0xa2a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa2a0));
        // F3 02F1
        gbc.setState(0x83b8, 0x840c, 0x2390, 0xb6dd, 0x7da6, 0x1307, 0x0, 0x0);
        gbc.writeMem(0x83b8, { 0xf3 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x840c, gbc.sp());
        EXPECT(0x83b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x83b8));
        // F3 02F2
        gbc.setState(0x1693, 0x8f4a, 0x49d0, 0x2f11, 0xb949, 0x850a, 0x1, 0x1);
        gbc.writeMem(0x1693, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x8f4a, gbc.sp());
        EXPECT(0x1694, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02F3
        gbc.setState(0x2f8, 0x6463, 0x97f0, 0x7ded, 0xffe8, 0xd04d, 0x1, 0x0);
        gbc.writeMem(0x2f8, { 0xf3 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x6463, gbc.sp());
        EXPECT(0x2f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02F4
        gbc.setState(0x9c17, 0xc694, 0x9fe0, 0x4f80, 0xabfd, 0x5ea8, 0x1, 0x1);
        gbc.writeMem(0x9c17, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xc694, gbc.sp());
        EXPECT(0x9c18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9c17));
        // F3 02F5
        gbc.setState(0x73ef, 0xfc4f, 0x8810, 0xa786, 0x4b0e, 0xb748, 0x1, 0x0);
        gbc.writeMem(0x73ef, { 0xf3 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xfc4f, gbc.sp());
        EXPECT(0x73f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02F6
        gbc.setState(0x11f1, 0xe00b, 0xc160, 0x404b, 0x4973, 0x382f, 0x0, 0x1);
        gbc.writeMem(0x11f1, { 0xf3 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xe00b, gbc.sp());
        EXPECT(0x11f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 02F7
        gbc.setState(0xc8b6, 0x8ced, 0x9920, 0x859c, 0xfd91, 0xb131, 0x0, 0x1);
        gbc.writeMem(0xc8b6, { 0xf3 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x8ced, gbc.sp());
        EXPECT(0xc8b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc8b6));
        // F3 02F9
        gbc.setState(0x6424, 0xc02b, 0xbaf0, 0x956f, 0xa14a, 0xbb8f, 0x0, 0x1);
        gbc.writeMem(0x6424, { 0xf3 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xc02b, gbc.sp());
        EXPECT(0x6425, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02FA
        gbc.setState(0x99c6, 0xc8ac, 0xa6a0, 0x8eff, 0x7c70, 0x5496, 0x0, 0x0);
        gbc.writeMem(0x99c6, { 0xf3 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xc8ac, gbc.sp());
        EXPECT(0x99c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x99c6));
        // F3 02FC
        gbc.setState(0x7ddc, 0x38bc, 0x8890, 0x7652, 0x25cd, 0x495f, 0x0, 0x1);
        gbc.writeMem(0x7ddc, { 0xf3 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x38bc, gbc.sp());
        EXPECT(0x7ddd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 02FD
        gbc.setState(0xa9d2, 0xb38a, 0x1920, 0x3aa3, 0x90ac, 0xdcf6, 0x1, 0x0);
        gbc.writeMem(0xa9d2, { 0xf3 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xb38a, gbc.sp());
        EXPECT(0xa9d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa9d2));
        // F3 02FE
        gbc.setState(0xed2a, 0x4f72, 0x8cd0, 0x4a29, 0xc3cc, 0xa3ec, 0x0, 0x0);
        gbc.writeMem(0xed2a, { 0xf3 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x4f72, gbc.sp());
        EXPECT(0xed2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed2a));
        // F3 02FF
        gbc.setState(0xce39, 0x7e3f, 0x66e0, 0xf2ca, 0xe680, 0x5f30, 0x0, 0x1);
        gbc.writeMem(0xce39, { 0xf3 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x7e3f, gbc.sp());
        EXPECT(0xce3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xce39));
        // F3 0301
        gbc.setState(0xaa5b, 0x3a52, 0x8a80, 0xdf9e, 0x5a78, 0x6854, 0x0, 0x0);
        gbc.writeMem(0xaa5b, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x3a52, gbc.sp());
        EXPECT(0xaa5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaa5b));
        // F3 0302
        gbc.setState(0x2bf3, 0xe886, 0xc7a0, 0xa4b6, 0x481d, 0xf54, 0x1, 0x0);
        gbc.writeMem(0x2bf3, { 0xf3 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xe886, gbc.sp());
        EXPECT(0x2bf4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0304
        gbc.setState(0x1db5, 0x6364, 0x6f00, 0x968e, 0xc10, 0xfa3e, 0x0, 0x0);
        gbc.writeMem(0x1db5, { 0xf3 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x6364, gbc.sp());
        EXPECT(0x1db6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0305
        gbc.setState(0x20c1, 0x1dbe, 0xa3d0, 0xb7e, 0xc4b8, 0xb7d8, 0x0, 0x1);
        gbc.writeMem(0x20c1, { 0xf3 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x1dbe, gbc.sp());
        EXPECT(0x20c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0306
        gbc.setState(0x4d15, 0x84d2, 0x9fd0, 0xc836, 0x94bf, 0xe7c7, 0x0, 0x0);
        gbc.writeMem(0x4d15, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x84d2, gbc.sp());
        EXPECT(0x4d16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0307
        gbc.setState(0xdc2f, 0x792d, 0xe090, 0x2da8, 0x23b8, 0xdb46, 0x0, 0x1);
        gbc.writeMem(0xdc2f, { 0xf3 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x792d, gbc.sp());
        EXPECT(0xdc30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdc2f));
        // F3 0308
        gbc.setState(0x2dd, 0x5765, 0xac0, 0xe73c, 0x8cbc, 0x51e3, 0x0, 0x0);
        gbc.writeMem(0x2dd, { 0xf3 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x5765, gbc.sp());
        EXPECT(0x2de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0309
        gbc.setState(0x6f1, 0xaeec, 0x1f0, 0x20d0, 0x792e, 0xbc50, 0x1, 0x0);
        gbc.writeMem(0x6f1, { 0xf3 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xaeec, gbc.sp());
        EXPECT(0x6f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 030A
        gbc.setState(0x1da6, 0xf370, 0x3d40, 0xc846, 0xd60b, 0xc009, 0x1, 0x1);
        gbc.writeMem(0x1da6, { 0xf3 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xf370, gbc.sp());
        EXPECT(0x1da7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 030B
        gbc.setState(0x59b1, 0xb8b3, 0xf60, 0x41ea, 0x6126, 0xca82, 0x0, 0x1);
        gbc.writeMem(0x59b1, { 0xf3 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb8b3, gbc.sp());
        EXPECT(0x59b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 030C
        gbc.setState(0xa36b, 0xf2c, 0x9fc0, 0x6873, 0x6174, 0x653b, 0x1, 0x0);
        gbc.writeMem(0xa36b, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xf2c, gbc.sp());
        EXPECT(0xa36c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa36b));
        // F3 030D
        gbc.setState(0xd2e8, 0xe873, 0x31a0, 0x9bd6, 0xb8bc, 0x2c24, 0x0, 0x1);
        gbc.writeMem(0xd2e8, { 0xf3 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xe873, gbc.sp());
        EXPECT(0xd2e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd2e8));
        // F3 030E
        gbc.setState(0x22d3, 0xf172, 0xf9b0, 0xa937, 0x4aa1, 0xa1bd, 0x0, 0x0);
        gbc.writeMem(0x22d3, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xf172, gbc.sp());
        EXPECT(0x22d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 030F
        gbc.setState(0x70ab, 0xde04, 0x16e0, 0x9279, 0x2c13, 0xe1ea, 0x0, 0x0);
        gbc.writeMem(0x70ab, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xde04, gbc.sp());
        EXPECT(0x70ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0310
        gbc.setState(0x332f, 0xc37d, 0x4760, 0x3ef, 0x8dca, 0x139b, 0x0, 0x1);
        gbc.writeMem(0x332f, { 0xf3 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xc37d, gbc.sp());
        EXPECT(0x3330, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0311
        gbc.setState(0x69b8, 0x2ad3, 0x20, 0xb253, 0x5635, 0x35e8, 0x0, 0x0);
        gbc.writeMem(0x69b8, { 0xf3 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x2ad3, gbc.sp());
        EXPECT(0x69b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0312
        gbc.setState(0x1735, 0x6f97, 0x8db0, 0x5aeb, 0x2b90, 0x7e94, 0x1, 0x1);
        gbc.writeMem(0x1735, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x6f97, gbc.sp());
        EXPECT(0x1736, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0313
        gbc.setState(0x89cb, 0x9f7, 0x31a0, 0xee2b, 0x9da9, 0x8c1c, 0x0, 0x0);
        gbc.writeMem(0x89cb, { 0xf3 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x9f7, gbc.sp());
        EXPECT(0x89cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x89cb));
        // F3 0314
        gbc.setState(0xbe7d, 0x876c, 0xbbf0, 0xaae2, 0x3110, 0xb3b7, 0x1, 0x1);
        gbc.writeMem(0xbe7d, { 0xf3 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x876c, gbc.sp());
        EXPECT(0xbe7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe7d));
        // F3 0315
        gbc.setState(0xcdfa, 0x9bd8, 0xb4f0, 0xb85a, 0xf766, 0x449c, 0x0, 0x0);
        gbc.writeMem(0xcdfa, { 0xf3 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x9bd8, gbc.sp());
        EXPECT(0xcdfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcdfa));
        // F3 0316
        gbc.setState(0x607, 0x647e, 0x1880, 0x3915, 0x7211, 0xab4d, 0x1, 0x0);
        gbc.writeMem(0x607, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x647e, gbc.sp());
        EXPECT(0x608, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0317
        gbc.setState(0xb5d6, 0x7269, 0x8ae0, 0x44e4, 0xba6a, 0x2ce0, 0x0, 0x1);
        gbc.writeMem(0xb5d6, { 0xf3 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x7269, gbc.sp());
        EXPECT(0xb5d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb5d6));
        // F3 0319
        gbc.setState(0x43cb, 0x9837, 0x6670, 0xf41d, 0xa49f, 0xe6a, 0x0, 0x0);
        gbc.writeMem(0x43cb, { 0xf3 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x9837, gbc.sp());
        EXPECT(0x43cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 031A
        gbc.setState(0x82bf, 0x332e, 0xdb20, 0xe5c9, 0x5e5b, 0x14e7, 0x0, 0x1);
        gbc.writeMem(0x82bf, { 0xf3 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x332e, gbc.sp());
        EXPECT(0x82c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x82bf));
        // F3 031B
        gbc.setState(0x930a, 0xa8e9, 0x87f0, 0x85d2, 0xa651, 0x8a94, 0x0, 0x1);
        gbc.writeMem(0x930a, { 0xf3 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xa8e9, gbc.sp());
        EXPECT(0x930b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x930a));
        // F3 031C
        gbc.setState(0x2d2a, 0xef44, 0xb7c0, 0xac0b, 0x91bf, 0xed7, 0x0, 0x0);
        gbc.writeMem(0x2d2a, { 0xf3 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xef44, gbc.sp());
        EXPECT(0x2d2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 031E
        gbc.setState(0x4cb9, 0x688c, 0xbf70, 0x782f, 0xc217, 0xf9f1, 0x0, 0x0);
        gbc.writeMem(0x4cb9, { 0xf3 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x688c, gbc.sp());
        EXPECT(0x4cba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 031F
        gbc.setState(0xc933, 0xefa6, 0xb00, 0x888b, 0x62c1, 0xfd39, 0x1, 0x1);
        gbc.writeMem(0xc933, { 0xf3 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xefa6, gbc.sp());
        EXPECT(0xc934, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc933));
        // F3 0320
        gbc.setState(0xbed8, 0x266c, 0xf910, 0x836, 0x304e, 0xbfa5, 0x0, 0x1);
        gbc.writeMem(0xbed8, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x266c, gbc.sp());
        EXPECT(0xbed9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbed8));
        // F3 0321
        gbc.setState(0x9c58, 0x12b3, 0x1390, 0xbebb, 0xf180, 0xfef2, 0x0, 0x1);
        gbc.writeMem(0x9c58, { 0xf3 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x12b3, gbc.sp());
        EXPECT(0x9c59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9c58));
        // F3 0322
        gbc.setState(0x2cdc, 0x8eb2, 0xb3a0, 0xc9e5, 0xe04a, 0xd7bc, 0x0, 0x0);
        gbc.writeMem(0x2cdc, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x8eb2, gbc.sp());
        EXPECT(0x2cdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0323
        gbc.setState(0xa4f0, 0x2722, 0x7e80, 0xa7ad, 0x810b, 0x3cf5, 0x1, 0x0);
        gbc.writeMem(0xa4f0, { 0xf3 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x2722, gbc.sp());
        EXPECT(0xa4f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa4f0));
        // F3 0324
        gbc.setState(0xb58a, 0x1396, 0xd070, 0x4677, 0x9639, 0xca91, 0x1, 0x1);
        gbc.writeMem(0xb58a, { 0xf3 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x1396, gbc.sp());
        EXPECT(0xb58b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb58a));
        // F3 0325
        gbc.setState(0x45b5, 0x26be, 0xd780, 0xa651, 0x3033, 0xa513, 0x1, 0x1);
        gbc.writeMem(0x45b5, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x26be, gbc.sp());
        EXPECT(0x45b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0326
        gbc.setState(0x491c, 0xd36d, 0x9ba0, 0x22d7, 0x9ea1, 0xd666, 0x1, 0x1);
        gbc.writeMem(0x491c, { 0xf3 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd36d, gbc.sp());
        EXPECT(0x491d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0327
        gbc.setState(0xdd16, 0xaef5, 0x9a60, 0x7cd0, 0xa514, 0x41ce, 0x1, 0x0);
        gbc.writeMem(0xdd16, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xaef5, gbc.sp());
        EXPECT(0xdd17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdd16));
        // F3 0328
        gbc.setState(0x5873, 0xa569, 0xb590, 0x5eed, 0x5473, 0x918, 0x1, 0x0);
        gbc.writeMem(0x5873, { 0xf3 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xa569, gbc.sp());
        EXPECT(0x5874, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0329
        gbc.setState(0xaf9d, 0x99f7, 0xa510, 0x55d2, 0x7b41, 0x5fda, 0x0, 0x1);
        gbc.writeMem(0xaf9d, { 0xf3 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x99f7, gbc.sp());
        EXPECT(0xaf9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaf9d));
        // F3 032A
        gbc.setState(0x2478, 0xd349, 0x7d50, 0x1a5b, 0x5865, 0x644c, 0x0, 0x1);
        gbc.writeMem(0x2478, { 0xf3 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xd349, gbc.sp());
        EXPECT(0x2479, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 032B
        gbc.setState(0x2c05, 0x80f4, 0x11c0, 0x3940, 0x1aca, 0x4491, 0x0, 0x0);
        gbc.writeMem(0x2c05, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x80f4, gbc.sp());
        EXPECT(0x2c06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 032C
        gbc.setState(0xcf83, 0x55be, 0x3930, 0x2ec, 0xceac, 0x8781, 0x0, 0x1);
        gbc.writeMem(0xcf83, { 0xf3 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x55be, gbc.sp());
        EXPECT(0xcf84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcf83));
        // F3 032D
        gbc.setState(0xb988, 0xc575, 0xe450, 0xc88e, 0xdf2b, 0x6451, 0x0, 0x0);
        gbc.writeMem(0xb988, { 0xf3 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xc575, gbc.sp());
        EXPECT(0xb989, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb988));
        // F3 032E
        gbc.setState(0x3b7d, 0xde09, 0xa420, 0xacea, 0xf6b7, 0xff12, 0x0, 0x0);
        gbc.writeMem(0x3b7d, { 0xf3 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xde09, gbc.sp());
        EXPECT(0x3b7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 032F
        gbc.setState(0x207d, 0xf3fb, 0x7b30, 0x431, 0x7a99, 0x28a7, 0x1, 0x1);
        gbc.writeMem(0x207d, { 0xf3 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf3fb, gbc.sp());
        EXPECT(0x207e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0331
        gbc.setState(0x3d5e, 0xb1a5, 0xa890, 0x1222, 0x2945, 0x5326, 0x1, 0x1);
        gbc.writeMem(0x3d5e, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb1a5, gbc.sp());
        EXPECT(0x3d5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0332
        gbc.setState(0xed6b, 0xb737, 0x6700, 0x6441, 0xb25a, 0x26bc, 0x1, 0x0);
        gbc.writeMem(0xed6b, { 0xf3 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xb737, gbc.sp());
        EXPECT(0xed6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xed6b));
        // F3 0333
        gbc.setState(0x4f52, 0x2aa9, 0x7540, 0x4f2b, 0x3ccb, 0x336, 0x1, 0x0);
        gbc.writeMem(0x4f52, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x2aa9, gbc.sp());
        EXPECT(0x4f53, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0334
        gbc.setState(0x73e0, 0x3a12, 0x92c0, 0xd095, 0x6b62, 0xcf6e, 0x1, 0x1);
        gbc.writeMem(0x73e0, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x3a12, gbc.sp());
        EXPECT(0x73e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0335
        gbc.setState(0xd763, 0x3369, 0x4140, 0x6f98, 0xb1da, 0x5c2f, 0x0, 0x1);
        gbc.writeMem(0xd763, { 0xf3 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x3369, gbc.sp());
        EXPECT(0xd764, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd763));
        // F3 0336
        gbc.setState(0xba6b, 0x528c, 0x95b0, 0x373c, 0xb0f3, 0xe701, 0x0, 0x0);
        gbc.writeMem(0xba6b, { 0xf3 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x528c, gbc.sp());
        EXPECT(0xba6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xba6b));
        // F3 0337
        gbc.setState(0xb506, 0x2adc, 0xd300, 0x7eda, 0x6d2c, 0x6739, 0x1, 0x0);
        gbc.writeMem(0xb506, { 0xf3 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x2adc, gbc.sp());
        EXPECT(0xb507, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb506));
        // F3 0338
        gbc.setState(0x4cdb, 0x6c9d, 0xbfc0, 0xdad2, 0xac39, 0x7a55, 0x0, 0x1);
        gbc.writeMem(0x4cdb, { 0xf3 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x6c9d, gbc.sp());
        EXPECT(0x4cdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0339
        gbc.setState(0xa6bb, 0xa0cc, 0x45a0, 0x41fe, 0x19ff, 0x8e8c, 0x1, 0x0);
        gbc.writeMem(0xa6bb, { 0xf3 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xa0cc, gbc.sp());
        EXPECT(0xa6bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa6bb));
        // F3 033A
        gbc.setState(0x9dc9, 0x40d0, 0xd7b0, 0x533, 0xd826, 0x6868, 0x1, 0x0);
        gbc.writeMem(0x9dc9, { 0xf3 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x40d0, gbc.sp());
        EXPECT(0x9dca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9dc9));
        // F3 033B
        gbc.setState(0x418c, 0xae4f, 0xefe0, 0x216f, 0xe5f0, 0x8206, 0x1, 0x0);
        gbc.writeMem(0x418c, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xae4f, gbc.sp());
        EXPECT(0x418d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 033C
        gbc.setState(0x16a9, 0x8b8a, 0x7ab0, 0xc7ec, 0xfc7c, 0xde55, 0x1, 0x0);
        gbc.writeMem(0x16a9, { 0xf3 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x8b8a, gbc.sp());
        EXPECT(0x16aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 033D
        gbc.setState(0x73fe, 0xe8b7, 0x8dc0, 0xfb19, 0x9b3d, 0xd0a3, 0x0, 0x0);
        gbc.writeMem(0x73fe, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xe8b7, gbc.sp());
        EXPECT(0x73ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 033E
        gbc.setState(0x9150, 0x7071, 0xc3d0, 0x5ccd, 0x5bd3, 0x9bd3, 0x0, 0x1);
        gbc.writeMem(0x9150, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7071, gbc.sp());
        EXPECT(0x9151, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9150));
        // F3 033F
        gbc.setState(0x1ed6, 0x2af2, 0xbd60, 0x61a, 0x649f, 0x1b23, 0x0, 0x1);
        gbc.writeMem(0x1ed6, { 0xf3 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x2af2, gbc.sp());
        EXPECT(0x1ed7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0340
        gbc.setState(0x4d48, 0xa3b0, 0x1890, 0xb649, 0xa549, 0x94ca, 0x1, 0x0);
        gbc.writeMem(0x4d48, { 0xf3 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xa3b0, gbc.sp());
        EXPECT(0x4d49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0341
        gbc.setState(0xda3, 0x64ea, 0xa6c0, 0x6796, 0x78d8, 0xc30d, 0x0, 0x0);
        gbc.writeMem(0xda3, { 0xf3 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x64ea, gbc.sp());
        EXPECT(0xda4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0342
        gbc.setState(0x962, 0xd4aa, 0xa130, 0xb660, 0xce7b, 0xc1e0, 0x1, 0x0);
        gbc.writeMem(0x962, { 0xf3 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xd4aa, gbc.sp());
        EXPECT(0x963, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0343
        gbc.setState(0x14a1, 0x228, 0xf870, 0xf646, 0xb426, 0xa201, 0x0, 0x0);
        gbc.writeMem(0x14a1, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x228, gbc.sp());
        EXPECT(0x14a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0344
        gbc.setState(0x86b5, 0x4ec, 0x8df0, 0xc9e1, 0xb21f, 0x76aa, 0x1, 0x1);
        gbc.writeMem(0x86b5, { 0xf3 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4ec, gbc.sp());
        EXPECT(0x86b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x86b5));
        // F3 0345
        gbc.setState(0xb320, 0x6f43, 0x7130, 0xe9fe, 0x9a69, 0x6ada, 0x0, 0x1);
        gbc.writeMem(0xb320, { 0xf3 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x6f43, gbc.sp());
        EXPECT(0xb321, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb320));
        // F3 0346
        gbc.setState(0x64c, 0xb6b7, 0x49c0, 0x647c, 0xbeb7, 0xdc10, 0x1, 0x0);
        gbc.writeMem(0x64c, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xb6b7, gbc.sp());
        EXPECT(0x64d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0347
        gbc.setState(0xe10d, 0xb77f, 0x9490, 0xf3a1, 0xe352, 0xc71, 0x1, 0x0);
        gbc.writeMem(0xe10d, { 0xf3 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xb77f, gbc.sp());
        EXPECT(0xe10e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe10d));
        // F3 0348
        gbc.setState(0x1a3b, 0x336d, 0xfc90, 0xafa4, 0xb68f, 0xb664, 0x0, 0x1);
        gbc.writeMem(0x1a3b, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x336d, gbc.sp());
        EXPECT(0x1a3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0349
        gbc.setState(0x26c8, 0xc603, 0xb350, 0x3e14, 0xd1f0, 0xb10, 0x0, 0x1);
        gbc.writeMem(0x26c8, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc603, gbc.sp());
        EXPECT(0x26c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 034A
        gbc.setState(0xe87d, 0x6a4, 0xcbe0, 0x79cc, 0x2e6d, 0xb71a, 0x0, 0x1);
        gbc.writeMem(0xe87d, { 0xf3 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x6a4, gbc.sp());
        EXPECT(0xe87e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe87d));
        // F3 034B
        gbc.setState(0x6f91, 0x8816, 0xa2b0, 0x8b0b, 0xb561, 0x1a07, 0x1, 0x1);
        gbc.writeMem(0x6f91, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x8816, gbc.sp());
        EXPECT(0x6f92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 034C
        gbc.setState(0x81e8, 0xf6c6, 0x8090, 0x3c7e, 0xb0c, 0x92f6, 0x0, 0x0);
        gbc.writeMem(0x81e8, { 0xf3 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xf6c6, gbc.sp());
        EXPECT(0x81e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x81e8));
        // F3 034D
        gbc.setState(0x824e, 0x1ce5, 0x6b0, 0xe43b, 0xf9c7, 0x5394, 0x1, 0x1);
        gbc.writeMem(0x824e, { 0xf3 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1ce5, gbc.sp());
        EXPECT(0x824f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x824e));
        // F3 034E
        gbc.setState(0x7de3, 0x535, 0x4990, 0x63f3, 0xb25d, 0x10b2, 0x1, 0x1);
        gbc.writeMem(0x7de3, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x535, gbc.sp());
        EXPECT(0x7de4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 034F
        gbc.setState(0x3f2f, 0x5b5c, 0x7510, 0xa7fb, 0xee7, 0xac3d, 0x1, 0x0);
        gbc.writeMem(0x3f2f, { 0xf3 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5b5c, gbc.sp());
        EXPECT(0x3f30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0350
        gbc.setState(0x20e1, 0x89f9, 0x21e0, 0x19c, 0x7eb6, 0x3daa, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xf3 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x89f9, gbc.sp());
        EXPECT(0x20e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0351
        gbc.setState(0x4665, 0x717c, 0x7480, 0x8f34, 0xf212, 0xbf6e, 0x0, 0x1);
        gbc.writeMem(0x4665, { 0xf3 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x717c, gbc.sp());
        EXPECT(0x4666, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0352
        gbc.setState(0xa232, 0xb4ad, 0x6290, 0x24e1, 0xa88b, 0xecc9, 0x1, 0x1);
        gbc.writeMem(0xa232, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb4ad, gbc.sp());
        EXPECT(0xa233, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa232));
        // F3 0353
        gbc.setState(0x1f47, 0x12c0, 0x150, 0xa2d5, 0x9179, 0xd216, 0x1, 0x1);
        gbc.writeMem(0x1f47, { 0xf3 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x12c0, gbc.sp());
        EXPECT(0x1f48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0354
        gbc.setState(0x110e, 0x7095, 0x1c40, 0x2197, 0xa843, 0x4ecc, 0x0, 0x1);
        gbc.writeMem(0x110e, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x7095, gbc.sp());
        EXPECT(0x110f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0355
        gbc.setState(0x48a6, 0xdb89, 0xba50, 0xf099, 0xac0a, 0xaf05, 0x0, 0x0);
        gbc.writeMem(0x48a6, { 0xf3 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xdb89, gbc.sp());
        EXPECT(0x48a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0356
        gbc.setState(0xc177, 0xcc24, 0x2430, 0x8787, 0x8d85, 0x36a2, 0x1, 0x0);
        gbc.writeMem(0xc177, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xcc24, gbc.sp());
        EXPECT(0xc178, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc177));
        // F3 0357
        gbc.setState(0x137d, 0xdf7f, 0xd800, 0xb4a, 0x3659, 0x8256, 0x0, 0x0);
        gbc.writeMem(0x137d, { 0xf3 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xdf7f, gbc.sp());
        EXPECT(0x137e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0358
        gbc.setState(0x5abb, 0xad7d, 0x2ac0, 0xb82e, 0x460c, 0x1898, 0x0, 0x1);
        gbc.writeMem(0x5abb, { 0xf3 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xad7d, gbc.sp());
        EXPECT(0x5abc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0359
        gbc.setState(0x8310, 0xa02, 0x3270, 0xf480, 0xd90e, 0x5c6a, 0x1, 0x0);
        gbc.writeMem(0x8310, { 0xf3 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xa02, gbc.sp());
        EXPECT(0x8311, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8310));
        // F3 035A
        gbc.setState(0x6e7c, 0x1921, 0x3540, 0xf06, 0xc0cf, 0x8538, 0x1, 0x0);
        gbc.writeMem(0x6e7c, { 0xf3 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x1921, gbc.sp());
        EXPECT(0x6e7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 035B
        gbc.setState(0x1326, 0x91f0, 0xfd90, 0x330c, 0x1232, 0x29fc, 0x0, 0x1);
        gbc.writeMem(0x1326, { 0xf3 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x91f0, gbc.sp());
        EXPECT(0x1327, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 035C
        gbc.setState(0x4c10, 0xa4bb, 0x33a0, 0x913e, 0x9877, 0x5b63, 0x0, 0x1);
        gbc.writeMem(0x4c10, { 0xf3 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xa4bb, gbc.sp());
        EXPECT(0x4c11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 035D
        gbc.setState(0x1fb5, 0x4c21, 0xe340, 0xd282, 0x24a2, 0x9b6c, 0x1, 0x0);
        gbc.writeMem(0x1fb5, { 0xf3 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x4c21, gbc.sp());
        EXPECT(0x1fb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 035E
        gbc.setState(0x3f05, 0x3b71, 0x7c0, 0x4a17, 0x94fd, 0xf449, 0x1, 0x0);
        gbc.writeMem(0x3f05, { 0xf3 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x3b71, gbc.sp());
        EXPECT(0x3f06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 035F
        gbc.setState(0x9935, 0x99, 0x6a10, 0xeb4, 0x2eca, 0x638c, 0x1, 0x1);
        gbc.writeMem(0x9935, { 0xf3 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x99, gbc.sp());
        EXPECT(0x9936, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9935));
        // F3 0360
        gbc.setState(0x43c9, 0x9d13, 0xa940, 0x6176, 0x80df, 0x5e61, 0x1, 0x1);
        gbc.writeMem(0x43c9, { 0xf3 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x9d13, gbc.sp());
        EXPECT(0x43ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0361
        gbc.setState(0x2146, 0x67f, 0x2c10, 0x59bc, 0xe8e6, 0xc725, 0x0, 0x1);
        gbc.writeMem(0x2146, { 0xf3 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x67f, gbc.sp());
        EXPECT(0x2147, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0362
        gbc.setState(0x5ce2, 0xf043, 0x1cf0, 0xc565, 0xa9a7, 0x86b2, 0x1, 0x0);
        gbc.writeMem(0x5ce2, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xf043, gbc.sp());
        EXPECT(0x5ce3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0363
        gbc.setState(0xdb6d, 0xc686, 0x54e0, 0xbc13, 0x9dd, 0xeee8, 0x1, 0x0);
        gbc.writeMem(0xdb6d, { 0xf3 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xc686, gbc.sp());
        EXPECT(0xdb6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdb6d));
        // F3 0364
        gbc.setState(0xa329, 0x5f42, 0xc800, 0xf400, 0x5748, 0x8f7a, 0x1, 0x0);
        gbc.writeMem(0xa329, { 0xf3 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x5f42, gbc.sp());
        EXPECT(0xa32a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa329));
        // F3 0365
        gbc.setState(0x3b69, 0xbc3c, 0x1120, 0x104e, 0x1c17, 0xfcab, 0x1, 0x1);
        gbc.writeMem(0x3b69, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xbc3c, gbc.sp());
        EXPECT(0x3b6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0366
        gbc.setState(0xc23b, 0x2520, 0x7b0, 0x9fff, 0x7d8e, 0x63c4, 0x1, 0x1);
        gbc.writeMem(0xc23b, { 0xf3 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2520, gbc.sp());
        EXPECT(0xc23c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc23b));
        // F3 0367
        gbc.setState(0xb6f6, 0x82e0, 0x67b0, 0xee0, 0xe035, 0xa496, 0x1, 0x0);
        gbc.writeMem(0xb6f6, { 0xf3 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x82e0, gbc.sp());
        EXPECT(0xb6f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb6f6));
        // F3 0368
        gbc.setState(0xbc62, 0xdb8e, 0x4b60, 0xd368, 0x3a54, 0x9b33, 0x1, 0x0);
        gbc.writeMem(0xbc62, { 0xf3 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xdb8e, gbc.sp());
        EXPECT(0xbc63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbc62));
        // F3 0369
        gbc.setState(0x2ef8, 0xe835, 0xa000, 0xf0e, 0xeba1, 0x757d, 0x0, 0x1);
        gbc.writeMem(0x2ef8, { 0xf3 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe835, gbc.sp());
        EXPECT(0x2ef9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 036A
        gbc.setState(0x6b1a, 0x940e, 0xd5d0, 0xaab, 0xf9a3, 0xc3b1, 0x0, 0x1);
        gbc.writeMem(0x6b1a, { 0xf3 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x940e, gbc.sp());
        EXPECT(0x6b1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 036B
        gbc.setState(0xeea1, 0x1064, 0xb9b0, 0x40c5, 0xcaa, 0x5347, 0x1, 0x1);
        gbc.writeMem(0xeea1, { 0xf3 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1064, gbc.sp());
        EXPECT(0xeea2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xeea1));
        // F3 036C
        gbc.setState(0x9711, 0x1264, 0xaeb0, 0x5339, 0xd89f, 0x4af, 0x0, 0x0);
        gbc.writeMem(0x9711, { 0xf3 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x1264, gbc.sp());
        EXPECT(0x9712, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9711));
        // F3 036D
        gbc.setState(0x5220, 0xd, 0x5930, 0xe5f, 0x5909, 0xbc3d, 0x0, 0x1);
        gbc.writeMem(0x5220, { 0xf3 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xd, gbc.sp());
        EXPECT(0x5221, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 036E
        gbc.setState(0x2452, 0xd992, 0xa300, 0x39d9, 0x1c65, 0x3f18, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0xf3 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd992, gbc.sp());
        EXPECT(0x2453, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 036F
        gbc.setState(0xdde, 0x579d, 0xfb70, 0xdab0, 0x5c66, 0xcfe6, 0x1, 0x1);
        gbc.writeMem(0xdde, { 0xf3 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x579d, gbc.sp());
        EXPECT(0xddf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0370
        gbc.setState(0x54c7, 0x5e2, 0x9f30, 0xad21, 0x57d1, 0xc7a1, 0x0, 0x0);
        gbc.writeMem(0x54c7, { 0xf3 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x5e2, gbc.sp());
        EXPECT(0x54c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0372
        gbc.setState(0xdb12, 0x3577, 0x5890, 0x8d02, 0xc3c6, 0x37af, 0x1, 0x0);
        gbc.writeMem(0xdb12, { 0xf3 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x3577, gbc.sp());
        EXPECT(0xdb13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdb12));
        // F3 0373
        gbc.setState(0x1a83, 0xfb9c, 0xea90, 0xe5fb, 0x75db, 0xf415, 0x0, 0x1);
        gbc.writeMem(0x1a83, { 0xf3 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xfb9c, gbc.sp());
        EXPECT(0x1a84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0375
        gbc.setState(0xe03b, 0x5b44, 0xc0d0, 0x8f1e, 0x58e, 0xbab2, 0x0, 0x1);
        gbc.writeMem(0xe03b, { 0xf3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x5b44, gbc.sp());
        EXPECT(0xe03c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe03b));
        // F3 0376
        gbc.setState(0x8864, 0xabd9, 0x6340, 0x2df2, 0x56b9, 0x9bb9, 0x1, 0x0);
        gbc.writeMem(0x8864, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xabd9, gbc.sp());
        EXPECT(0x8865, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8864));
        // F3 0377
        gbc.setState(0x7bd0, 0xfd3f, 0x7300, 0x39ef, 0x294f, 0x4c67, 0x0, 0x0);
        gbc.writeMem(0x7bd0, { 0xf3 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xfd3f, gbc.sp());
        EXPECT(0x7bd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0378
        gbc.setState(0x1f80, 0x1c44, 0x3d0, 0x7cd1, 0xe903, 0x4fb, 0x0, 0x0);
        gbc.writeMem(0x1f80, { 0xf3 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x1c44, gbc.sp());
        EXPECT(0x1f81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0379
        gbc.setState(0x7edc, 0x24cd, 0xb880, 0xe34a, 0x91fc, 0x82ad, 0x0, 0x1);
        gbc.writeMem(0x7edc, { 0xf3 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x24cd, gbc.sp());
        EXPECT(0x7edd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 037A
        gbc.setState(0x5731, 0xbf35, 0x2fb0, 0x69ec, 0x1888, 0x33f, 0x0, 0x0);
        gbc.writeMem(0x5731, { 0xf3 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xbf35, gbc.sp());
        EXPECT(0x5732, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 037B
        gbc.setState(0x88d7, 0xf5a8, 0x1620, 0xd1a2, 0xb2d2, 0xed49, 0x0, 0x1);
        gbc.writeMem(0x88d7, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf5a8, gbc.sp());
        EXPECT(0x88d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x88d7));
        // F3 037C
        gbc.setState(0x7d86, 0x60c6, 0x3b60, 0x59a7, 0x5ddf, 0x21a1, 0x1, 0x0);
        gbc.writeMem(0x7d86, { 0xf3 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x60c6, gbc.sp());
        EXPECT(0x7d87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 037D
        gbc.setState(0x1dca, 0x1c1f, 0x6f30, 0x88d2, 0x3241, 0x171e, 0x0, 0x1);
        gbc.writeMem(0x1dca, { 0xf3 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x1c1f, gbc.sp());
        EXPECT(0x1dcb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 037E
        gbc.setState(0xe3a3, 0xee77, 0x24c0, 0x3190, 0x7e2e, 0xa87a, 0x1, 0x0);
        gbc.writeMem(0xe3a3, { 0xf3 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xee77, gbc.sp());
        EXPECT(0xe3a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe3a3));
        // F3 037F
        gbc.setState(0x720, 0xf71f, 0xa160, 0xdbbc, 0xdeba, 0xf860, 0x1, 0x1);
        gbc.writeMem(0x720, { 0xf3 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xf71f, gbc.sp());
        EXPECT(0x721, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0380
        gbc.setState(0x8349, 0x140a, 0x6370, 0x150d, 0x483f, 0xa04f, 0x1, 0x0);
        gbc.writeMem(0x8349, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x140a, gbc.sp());
        EXPECT(0x834a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8349));
        // F3 0381
        gbc.setState(0x5650, 0xea73, 0x4ca0, 0xfbe0, 0xc276, 0x15a5, 0x1, 0x0);
        gbc.writeMem(0x5650, { 0xf3 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xea73, gbc.sp());
        EXPECT(0x5651, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0383
        gbc.setState(0xc5ff, 0x439b, 0xc470, 0x3f49, 0x70af, 0xe019, 0x0, 0x1);
        gbc.writeMem(0xc5ff, { 0xf3 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x439b, gbc.sp());
        EXPECT(0xc600, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc5ff));
        // F3 0384
        gbc.setState(0xe91b, 0x5ed9, 0x45c0, 0x1141, 0x7333, 0xbaf1, 0x0, 0x0);
        gbc.writeMem(0xe91b, { 0xf3 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x5ed9, gbc.sp());
        EXPECT(0xe91c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe91b));
        // F3 0385
        gbc.setState(0x54ae, 0xe6aa, 0x9210, 0xed06, 0x7c24, 0x2a87, 0x0, 0x1);
        gbc.writeMem(0x54ae, { 0xf3 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xe6aa, gbc.sp());
        EXPECT(0x54af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0386
        gbc.setState(0x9d91, 0x10f5, 0x9cb0, 0x67f8, 0xcac4, 0x1378, 0x1, 0x0);
        gbc.writeMem(0x9d91, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x10f5, gbc.sp());
        EXPECT(0x9d92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9d91));
        // F3 0387
        gbc.setState(0x90d5, 0xe539, 0xb9a0, 0x54f5, 0x7ff2, 0x57f4, 0x0, 0x0);
        gbc.writeMem(0x90d5, { 0xf3 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe539, gbc.sp());
        EXPECT(0x90d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x90d5));
        // F3 0388
        gbc.setState(0x8b44, 0xd37b, 0xf800, 0xa77a, 0x2677, 0x47c3, 0x0, 0x1);
        gbc.writeMem(0x8b44, { 0xf3 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xd37b, gbc.sp());
        EXPECT(0x8b45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8b44));
        // F3 0389
        gbc.setState(0xe1e5, 0xf37f, 0x4170, 0x95f9, 0x6054, 0x3470, 0x1, 0x0);
        gbc.writeMem(0xe1e5, { 0xf3 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xf37f, gbc.sp());
        EXPECT(0xe1e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe1e5));
        // F3 038A
        gbc.setState(0x3b8a, 0x627c, 0xfe40, 0xde7a, 0xb0b1, 0x46ac, 0x0, 0x1);
        gbc.writeMem(0x3b8a, { 0xf3 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x627c, gbc.sp());
        EXPECT(0x3b8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 038B
        gbc.setState(0xa5f9, 0x2b6a, 0x9600, 0xf630, 0x6205, 0xe2de, 0x1, 0x0);
        gbc.writeMem(0xa5f9, { 0xf3 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x2b6a, gbc.sp());
        EXPECT(0xa5fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa5f9));
        // F3 038C
        gbc.setState(0x9149, 0x8261, 0x10f0, 0x5208, 0xcf45, 0x3915, 0x1, 0x0);
        gbc.writeMem(0x9149, { 0xf3 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x8261, gbc.sp());
        EXPECT(0x914a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9149));
        // F3 038D
        gbc.setState(0x53b1, 0x6d1d, 0x1190, 0xfb0b, 0x7a08, 0xd884, 0x1, 0x1);
        gbc.writeMem(0x53b1, { 0xf3 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x6d1d, gbc.sp());
        EXPECT(0x53b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 038E
        gbc.setState(0x69ff, 0x2a2, 0xe6c0, 0x1adc, 0xcdef, 0x61f6, 0x1, 0x1);
        gbc.writeMem(0x69ff, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x2a2, gbc.sp());
        EXPECT(0x6a00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 038F
        gbc.setState(0x3926, 0x8cd9, 0x37c0, 0x3b75, 0xc93e, 0x830, 0x0, 0x0);
        gbc.writeMem(0x3926, { 0xf3 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x8cd9, gbc.sp());
        EXPECT(0x3927, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0390
        gbc.setState(0x3da7, 0x6c6a, 0xc390, 0xe88b, 0x5334, 0xcf5d, 0x0, 0x0);
        gbc.writeMem(0x3da7, { 0xf3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x6c6a, gbc.sp());
        EXPECT(0x3da8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0391
        gbc.setState(0x4d0a, 0x38f2, 0x8450, 0xb02a, 0xe4a6, 0x4205, 0x1, 0x0);
        gbc.writeMem(0x4d0a, { 0xf3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x38f2, gbc.sp());
        EXPECT(0x4d0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0393
        gbc.setState(0xd6bd, 0xb960, 0x56c0, 0xc86c, 0x4e68, 0x50a3, 0x0, 0x1);
        gbc.writeMem(0xd6bd, { 0xf3 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xb960, gbc.sp());
        EXPECT(0xd6be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd6bd));
        // F3 0394
        gbc.setState(0xd951, 0xc223, 0x9b80, 0x3c79, 0x206f, 0xeb38, 0x0, 0x1);
        gbc.writeMem(0xd951, { 0xf3 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xc223, gbc.sp());
        EXPECT(0xd952, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd951));
        // F3 0395
        gbc.setState(0x5098, 0xcc49, 0xcc00, 0xc826, 0x7c87, 0x307b, 0x1, 0x0);
        gbc.writeMem(0x5098, { 0xf3 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xcc49, gbc.sp());
        EXPECT(0x5099, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0396
        gbc.setState(0x378f, 0xc238, 0x8ce0, 0xbe23, 0xb4ff, 0x3bc1, 0x1, 0x1);
        gbc.writeMem(0x378f, { 0xf3 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xc238, gbc.sp());
        EXPECT(0x3790, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 0397
        gbc.setState(0xbed0, 0xd4ba, 0x6210, 0xff44, 0x6ac0, 0xcca8, 0x1, 0x1);
        gbc.writeMem(0xbed0, { 0xf3 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xd4ba, gbc.sp());
        EXPECT(0xbed1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbed0));
        // F3 0398
        gbc.setState(0x53c2, 0xb340, 0x1e50, 0x5ba1, 0xaf8, 0x5444, 0x1, 0x1);
        gbc.writeMem(0x53c2, { 0xf3 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xb340, gbc.sp());
        EXPECT(0x53c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 0399
        gbc.setState(0x6718, 0x3837, 0xd190, 0x85f5, 0x5dde, 0xe58c, 0x0, 0x0);
        gbc.writeMem(0x6718, { 0xf3 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x3837, gbc.sp());
        EXPECT(0x6719, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 039A
        gbc.setState(0x1c04, 0x5cf, 0x7d90, 0x6785, 0xeb1e, 0x25e1, 0x0, 0x0);
        gbc.writeMem(0x1c04, { 0xf3 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x5cf, gbc.sp());
        EXPECT(0x1c05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 039B
        gbc.setState(0xd960, 0x5aa6, 0x8320, 0x48fc, 0xc606, 0x76d7, 0x0, 0x1);
        gbc.writeMem(0xd960, { 0xf3 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x5aa6, gbc.sp());
        EXPECT(0xd961, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd960));
        // F3 039D
        gbc.setState(0xabb3, 0x12b8, 0xc0f0, 0x3c8e, 0x3f25, 0x8a72, 0x0, 0x1);
        gbc.writeMem(0xabb3, { 0xf3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x12b8, gbc.sp());
        EXPECT(0xabb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xabb3));
        // F3 039E
        gbc.setState(0xdadd, 0x77e9, 0x14c0, 0x783c, 0x34b1, 0x424d, 0x1, 0x1);
        gbc.writeMem(0xdadd, { 0xf3 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x77e9, gbc.sp());
        EXPECT(0xdade, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xdadd));
        // F3 039F
        gbc.setState(0xaa79, 0x7958, 0x5a20, 0x6949, 0xf059, 0x19fc, 0x1, 0x0);
        gbc.writeMem(0xaa79, { 0xf3 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x7958, gbc.sp());
        EXPECT(0xaa7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaa79));
        // F3 03A0
        gbc.setState(0x65b0, 0xcd01, 0x3e50, 0xf2db, 0x6d88, 0xd7, 0x0, 0x1);
        gbc.writeMem(0x65b0, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xcd01, gbc.sp());
        EXPECT(0x65b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03A1
        gbc.setState(0x1aca, 0xd4b0, 0xe830, 0x5583, 0xc7a7, 0x5875, 0x1, 0x1);
        gbc.writeMem(0x1aca, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xd4b0, gbc.sp());
        EXPECT(0x1acb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03A2
        gbc.setState(0x5874, 0x7888, 0xfcd0, 0xf6a, 0xcead, 0x3f61, 0x1, 0x0);
        gbc.writeMem(0x5874, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x7888, gbc.sp());
        EXPECT(0x5875, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03A3
        gbc.setState(0xd498, 0x11b8, 0xaa90, 0xdacd, 0x3edc, 0x8d02, 0x1, 0x0);
        gbc.writeMem(0xd498, { 0xf3 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x11b8, gbc.sp());
        EXPECT(0xd499, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd498));
        // F3 03A4
        gbc.setState(0xe2a2, 0xbc82, 0x8b60, 0x1479, 0xeb5e, 0x89ca, 0x1, 0x0);
        gbc.writeMem(0xe2a2, { 0xf3 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xbc82, gbc.sp());
        EXPECT(0xe2a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe2a2));
        // F3 03A5
        gbc.setState(0x6256, 0x393e, 0x900, 0x9ea1, 0x5af9, 0xd84d, 0x0, 0x0);
        gbc.writeMem(0x6256, { 0xf3 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x393e, gbc.sp());
        EXPECT(0x6257, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03A7
        gbc.setState(0xc74c, 0x8865, 0xa820, 0xf632, 0x1ced, 0xb87f, 0x1, 0x0);
        gbc.writeMem(0xc74c, { 0xf3 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x8865, gbc.sp());
        EXPECT(0xc74d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc74c));
        // F3 03A8
        gbc.setState(0x87b4, 0xab6b, 0x5680, 0xe51, 0xc6aa, 0xa74c, 0x1, 0x0);
        gbc.writeMem(0x87b4, { 0xf3 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xab6b, gbc.sp());
        EXPECT(0x87b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x87b4));
        // F3 03A9
        gbc.setState(0x7ed7, 0x63e4, 0x7c00, 0x200a, 0x63a1, 0xed8a, 0x0, 0x0);
        gbc.writeMem(0x7ed7, { 0xf3 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x63e4, gbc.sp());
        EXPECT(0x7ed8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03AA
        gbc.setState(0xa9e9, 0xda72, 0x5f00, 0x1d02, 0x430d, 0x4c69, 0x0, 0x0);
        gbc.writeMem(0xa9e9, { 0xf3 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xda72, gbc.sp());
        EXPECT(0xa9ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa9e9));
        // F3 03AB
        gbc.setState(0xa78b, 0xd426, 0x98d0, 0x5c49, 0xcac5, 0x637c, 0x0, 0x0);
        gbc.writeMem(0xa78b, { 0xf3 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xd426, gbc.sp());
        EXPECT(0xa78c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xa78b));
        // F3 03AC
        gbc.setState(0x2094, 0x29f8, 0x63f0, 0x8493, 0xacaf, 0xc81b, 0x0, 0x0);
        gbc.writeMem(0x2094, { 0xf3 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x29f8, gbc.sp());
        EXPECT(0x2095, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03AD
        gbc.setState(0x9ed8, 0xa5c1, 0xbe30, 0x2e71, 0x7a78, 0xa329, 0x0, 0x0);
        gbc.writeMem(0x9ed8, { 0xf3 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xa5c1, gbc.sp());
        EXPECT(0x9ed9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9ed8));
        // F3 03AE
        gbc.setState(0x30e5, 0x69df, 0x5900, 0x1c08, 0xe86d, 0xb87e, 0x0, 0x0);
        gbc.writeMem(0x30e5, { 0xf3 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x69df, gbc.sp());
        EXPECT(0x30e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03AF
        gbc.setState(0x975c, 0xde2a, 0x4ad0, 0xb71c, 0x2d3f, 0x4549, 0x0, 0x0);
        gbc.writeMem(0x975c, { 0xf3 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xde2a, gbc.sp());
        EXPECT(0x975d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x975c));
        // F3 03B0
        gbc.setState(0x46e5, 0x1f53, 0x82a0, 0x240e, 0xf571, 0x3c67, 0x0, 0x0);
        gbc.writeMem(0x46e5, { 0xf3 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x1f53, gbc.sp());
        EXPECT(0x46e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03B1
        gbc.setState(0x728b, 0x33a8, 0xeff0, 0xe34d, 0xe61a, 0x601e, 0x0, 0x1);
        gbc.writeMem(0x728b, { 0xf3 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x33a8, gbc.sp());
        EXPECT(0x728c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03B3
        gbc.setState(0x90f6, 0xa7a9, 0x9a70, 0x5323, 0xe2c5, 0x36ac, 0x1, 0x0);
        gbc.writeMem(0x90f6, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xa7a9, gbc.sp());
        EXPECT(0x90f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x90f6));
        // F3 03B4
        gbc.setState(0x267f, 0x114d, 0xb4c0, 0x190b, 0x75f7, 0x5739, 0x1, 0x0);
        gbc.writeMem(0x267f, { 0xf3 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x114d, gbc.sp());
        EXPECT(0x2680, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03B5
        gbc.setState(0x55c0, 0x4fbb, 0x1d40, 0xb323, 0xeea6, 0xfbcc, 0x1, 0x0);
        gbc.writeMem(0x55c0, { 0xf3 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x4fbb, gbc.sp());
        EXPECT(0x55c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03B6
        gbc.setState(0x1e7f, 0x1921, 0xe90, 0x7eb9, 0xa744, 0xb6b1, 0x1, 0x0);
        gbc.writeMem(0x1e7f, { 0xf3 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x1921, gbc.sp());
        EXPECT(0x1e80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03B7
        gbc.setState(0x76ec, 0x2b1a, 0xeaf0, 0x7050, 0x2e4, 0x9d60, 0x1, 0x0);
        gbc.writeMem(0x76ec, { 0xf3 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x2b1a, gbc.sp());
        EXPECT(0x76ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03B8
        gbc.setState(0x88e9, 0xd07e, 0xf9a0, 0xedf, 0xf3d2, 0xbcfa, 0x0, 0x0);
        gbc.writeMem(0x88e9, { 0xf3 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd07e, gbc.sp());
        EXPECT(0x88ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x88e9));
        // F3 03B9
        gbc.setState(0x59d1, 0x5843, 0x69a0, 0x5f0b, 0x1081, 0x2a21, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0xf3 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x5843, gbc.sp());
        EXPECT(0x59d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03BA
        gbc.setState(0x9214, 0xfd4e, 0x9b00, 0x6999, 0x9401, 0xe9cc, 0x1, 0x1);
        gbc.writeMem(0x9214, { 0xf3 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xfd4e, gbc.sp());
        EXPECT(0x9215, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9214));
        // F3 03BB
        gbc.setState(0x90fe, 0xc018, 0xcd20, 0x7d86, 0xcfa5, 0x6b08, 0x1, 0x1);
        gbc.writeMem(0x90fe, { 0xf3 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc018, gbc.sp());
        EXPECT(0x90ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x90fe));
        // F3 03BC
        gbc.setState(0xaf0c, 0x43f6, 0x1000, 0x61b1, 0x72b7, 0x7b26, 0x0, 0x0);
        gbc.writeMem(0xaf0c, { 0xf3 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x43f6, gbc.sp());
        EXPECT(0xaf0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xaf0c));
        // F3 03BD
        gbc.setState(0x7db8, 0x2315, 0x8140, 0x19de, 0x277d, 0xab14, 0x0, 0x1);
        gbc.writeMem(0x7db8, { 0xf3 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x2315, gbc.sp());
        EXPECT(0x7db9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03BE
        gbc.setState(0xcb6d, 0x23a1, 0x6140, 0x57bf, 0x3f83, 0x2f14, 0x1, 0x1);
        gbc.writeMem(0xcb6d, { 0xf3 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x23a1, gbc.sp());
        EXPECT(0xcb6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcb6d));
        // F3 03BF
        gbc.setState(0xfff, 0x488, 0xa260, 0x607f, 0x880a, 0x4f24, 0x0, 0x1);
        gbc.writeMem(0xfff, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x488, gbc.sp());
        EXPECT(0x1000, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03C0
        gbc.setState(0x852b, 0x25a1, 0x1550, 0x7814, 0x340a, 0xa454, 0x0, 0x1);
        gbc.writeMem(0x852b, { 0xf3 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x25a1, gbc.sp());
        EXPECT(0x852c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x852b));
        // F3 03C1
        gbc.setState(0x6b7b, 0x23fb, 0xffa0, 0x700, 0x7c53, 0xbf9f, 0x0, 0x0);
        gbc.writeMem(0x6b7b, { 0xf3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x23fb, gbc.sp());
        EXPECT(0x6b7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03C2
        gbc.setState(0xcd04, 0x423c, 0x9a60, 0x5fe0, 0x3e52, 0x16d2, 0x1, 0x0);
        gbc.writeMem(0xcd04, { 0xf3 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x423c, gbc.sp());
        EXPECT(0xcd05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xcd04));
        // F3 03C4
        gbc.setState(0x5e3f, 0xd265, 0x9010, 0x3a18, 0xe4e2, 0xef68, 0x1, 0x0);
        gbc.writeMem(0x5e3f, { 0xf3 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xd265, gbc.sp());
        EXPECT(0x5e40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03C5
        gbc.setState(0xd883, 0xafa4, 0x3020, 0x24d6, 0xf99, 0x9a7, 0x1, 0x0);
        gbc.writeMem(0xd883, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xafa4, gbc.sp());
        EXPECT(0xd884, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd883));
        // F3 03C6
        gbc.setState(0x9a4b, 0x6acc, 0xad60, 0x2eb3, 0xf04e, 0x60b, 0x1, 0x1);
        gbc.writeMem(0x9a4b, { 0xf3 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x6acc, gbc.sp());
        EXPECT(0x9a4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x9a4b));
        // F3 03C7
        gbc.setState(0xbe07, 0x71b0, 0x3050, 0x6228, 0xc500, 0xcf0e, 0x0, 0x0);
        gbc.writeMem(0xbe07, { 0xf3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x71b0, gbc.sp());
        EXPECT(0xbe08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xbe07));
        // F3 03C8
        gbc.setState(0xd495, 0xf4e2, 0x4990, 0x37ac, 0x483, 0x3e21, 0x0, 0x0);
        gbc.writeMem(0xd495, { 0xf3 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf4e2, gbc.sp());
        EXPECT(0xd496, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd495));
        // F3 03C9
        gbc.setState(0x256d, 0x6013, 0xe370, 0xf05f, 0xca6a, 0xc474, 0x0, 0x1);
        gbc.writeMem(0x256d, { 0xf3 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x6013, gbc.sp());
        EXPECT(0x256e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03CA
        gbc.setState(0xec9, 0x73b, 0x8460, 0xf692, 0x39f7, 0x76ae, 0x0, 0x0);
        gbc.writeMem(0xec9, { 0xf3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x73b, gbc.sp());
        EXPECT(0xeca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03CB
        gbc.setState(0x409a, 0x8ce, 0xfc00, 0x1901, 0x3e6d, 0x758e, 0x1, 0x0);
        gbc.writeMem(0x409a, { 0xf3 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x8ce, gbc.sp());
        EXPECT(0x409b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03CC
        gbc.setState(0x57ff, 0xe53b, 0x25d0, 0x71c9, 0xeaa1, 0xaca0, 0x0, 0x1);
        gbc.writeMem(0x57ff, { 0xf3 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xe53b, gbc.sp());
        EXPECT(0x5800, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03CD
        gbc.setState(0x2206, 0x7ab5, 0x2d90, 0x5158, 0xfdcd, 0x5780, 0x0, 0x0);
        gbc.writeMem(0x2206, { 0xf3 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x7ab5, gbc.sp());
        EXPECT(0x2207, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03CE
        gbc.setState(0x151c, 0xaf6d, 0xd010, 0xe1fc, 0x9b59, 0x13c3, 0x0, 0x0);
        gbc.writeMem(0x151c, { 0xf3 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xaf6d, gbc.sp());
        EXPECT(0x151d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03CF
        gbc.setState(0x6816, 0xd13d, 0x2650, 0x29da, 0x2714, 0x12e3, 0x0, 0x1);
        gbc.writeMem(0x6816, { 0xf3 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xd13d, gbc.sp());
        EXPECT(0x6817, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03D0
        gbc.setState(0x8105, 0xaa8a, 0x2640, 0x1832, 0x8d3a, 0xce06, 0x1, 0x0);
        gbc.writeMem(0x8105, { 0xf3 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xaa8a, gbc.sp());
        EXPECT(0x8106, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8105));
        // F3 03D1
        gbc.setState(0xab17, 0xee6f, 0x52f0, 0xe9e7, 0x1c8f, 0xb7fc, 0x0, 0x1);
        gbc.writeMem(0xab17, { 0xf3 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xee6f, gbc.sp());
        EXPECT(0xab18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xab17));
        // F3 03D2
        gbc.setState(0x5350, 0xa0e3, 0xae80, 0xf1f, 0x4c83, 0xa605, 0x0, 0x1);
        gbc.writeMem(0x5350, { 0xf3 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xa0e3, gbc.sp());
        EXPECT(0x5351, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03D3
        gbc.setState(0x882, 0x3c2e, 0x22d0, 0xb9d0, 0x43ca, 0x2cb1, 0x0, 0x0);
        gbc.writeMem(0x882, { 0xf3 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x3c2e, gbc.sp());
        EXPECT(0x883, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03D4
        gbc.setState(0x2918, 0x35e7, 0x9ce0, 0xca64, 0xca45, 0xcccb, 0x1, 0x1);
        gbc.writeMem(0x2918, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x35e7, gbc.sp());
        EXPECT(0x2919, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03D5
        gbc.setState(0x25b1, 0xc491, 0xcad0, 0xbe02, 0xac3b, 0x6e89, 0x1, 0x1);
        gbc.writeMem(0x25b1, { 0xf3 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xc491, gbc.sp());
        EXPECT(0x25b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03D6
        gbc.setState(0x195f, 0xd334, 0x71f0, 0x211d, 0x76b6, 0x2f3a, 0x0, 0x0);
        gbc.writeMem(0x195f, { 0xf3 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xd334, gbc.sp());
        EXPECT(0x1960, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03D7
        gbc.setState(0xd82e, 0xe35a, 0xa250, 0x88d6, 0x262c, 0xb9fa, 0x1, 0x1);
        gbc.writeMem(0xd82e, { 0xf3 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xe35a, gbc.sp());
        EXPECT(0xd82f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xd82e));
        // F3 03D8
        gbc.setState(0x65f8, 0x71c5, 0x12a0, 0xdc98, 0xdb86, 0x7d62, 0x0, 0x0);
        gbc.writeMem(0x65f8, { 0xf3 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x71c5, gbc.sp());
        EXPECT(0x65f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03D9
        gbc.setState(0xb272, 0x1341, 0xd5b0, 0x43db, 0xd7be, 0xe15f, 0x0, 0x1);
        gbc.writeMem(0xb272, { 0xf3 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1341, gbc.sp());
        EXPECT(0xb273, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb272));
        // F3 03DA
        gbc.setState(0xe1f4, 0x5c5f, 0xa60, 0x3fe2, 0xa8a7, 0x2dac, 0x1, 0x0);
        gbc.writeMem(0xe1f4, { 0xf3 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x5c5f, gbc.sp());
        EXPECT(0xe1f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xe1f4));
        // F3 03DC
        gbc.setState(0xf23, 0xb7d1, 0x1690, 0x51e7, 0xb21d, 0x6dcc, 0x0, 0x1);
        gbc.writeMem(0xf23, { 0xf3 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xb7d1, gbc.sp());
        EXPECT(0xf24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03DD
        gbc.setState(0x5258, 0x5b62, 0xf190, 0xfd2, 0x9eb, 0xe869, 0x1, 0x0);
        gbc.writeMem(0x5258, { 0xf3 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x5b62, gbc.sp());
        EXPECT(0x5259, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03DE
        gbc.setState(0x5d3e, 0x5be4, 0xb1f0, 0x71fa, 0x848, 0xd807, 0x1, 0x0);
        gbc.writeMem(0x5d3e, { 0xf3 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x5be4, gbc.sp());
        EXPECT(0x5d3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03DF
        gbc.setState(0x60d7, 0xd19f, 0xb370, 0xbf6b, 0x2d6c, 0xf946, 0x0, 0x0);
        gbc.writeMem(0x60d7, { 0xf3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xd19f, gbc.sp());
        EXPECT(0x60d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03E0
        gbc.setState(0xec6c, 0x553f, 0xb850, 0x4b03, 0x3808, 0xdc7d, 0x0, 0x0);
        gbc.writeMem(0xec6c, { 0xf3 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x553f, gbc.sp());
        EXPECT(0xec6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xec6c));
        // F3 03E1
        gbc.setState(0x28c7, 0x3e29, 0xea60, 0xfedc, 0xea13, 0x32fc, 0x0, 0x1);
        gbc.writeMem(0x28c7, { 0xf3 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3e29, gbc.sp());
        EXPECT(0x28c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03E2
        gbc.setState(0xde95, 0x5232, 0x7b50, 0xf8a5, 0x3dfe, 0xcd10, 0x1, 0x0);
        gbc.writeMem(0xde95, { 0xf3 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x5232, gbc.sp());
        EXPECT(0xde96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xde95));
        // F3 03E3
        gbc.setState(0xb6b7, 0xe29f, 0x1c80, 0x34c4, 0x290, 0xd870, 0x0, 0x1);
        gbc.writeMem(0xb6b7, { 0xf3 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xe29f, gbc.sp());
        EXPECT(0xb6b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xb6b7));
        // F3 03E4
        gbc.setState(0xabe, 0x5609, 0xe820, 0x7d4c, 0xd412, 0x38a2, 0x0, 0x0);
        gbc.writeMem(0xabe, { 0xf3 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x5609, gbc.sp());
        EXPECT(0xabf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03E5
        gbc.setState(0x5609, 0xdfd6, 0xe690, 0x4ff2, 0x76bf, 0x7be0, 0x0, 0x0);
        gbc.writeMem(0x5609, { 0xf3 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xdfd6, gbc.sp());
        EXPECT(0x560a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // F3 03E6
        gbc.setState(0x34a1, 0xe586, 0x9ce0, 0x8421, 0xad41, 0x9ef0, 0x1, 0x0);
        gbc.writeMem(0x34a1, { 0xf3 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xe586, gbc.sp());
        EXPECT(0x34a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // F3 03E7
        gbc.setState(0x6dcd, 0x62e6, 0xa1e0, 0x615a, 0xf331, 0xe981, 0x1, 0x0);
        gbc.writeMem(0x6dcd, { 0xf3 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x62e6, gbc.sp());
        EXPECT(0x6dce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
    }
