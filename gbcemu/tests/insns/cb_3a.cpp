#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_3a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_3a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 3A 0000
        gbc.setState(0x16b, 0x5dc9, 0xb530, 0xe285, 0xfee6, 0xe955, 0x1, 0x0);
        gbc.writeMem(0x16b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5dc9);
        EXPECT(gbc.pc(), 0x16d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0001
        gbc.setState(0x91b6, 0x553a, 0x1390, 0x9dba, 0x1ec3, 0xdb6, 0x0, 0x0);
        gbc.writeMem(0x91b6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x553a);
        EXPECT(gbc.pc(), 0x91b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b6), 0xcb);
        EXPECT(gbc.readMem(0x91b7), 0x3a);
        // CB 3A 0002
        gbc.setState(0x5974, 0x1f17, 0xb170, 0x55b6, 0x77a8, 0x51a6, 0x0, 0x1);
        gbc.writeMem(0x5974, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1f17);
        EXPECT(gbc.pc(), 0x5976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0003
        gbc.setState(0x9c75, 0x424, 0xaf00, 0x7086, 0xf0a3, 0x9d19, 0x0, 0x0);
        gbc.writeMem(0x9c75, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x424);
        EXPECT(gbc.pc(), 0x9c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c75), 0xcb);
        EXPECT(gbc.readMem(0x9c76), 0x3a);
        // CB 3A 0004
        gbc.setState(0x3004, 0x8347, 0x8d90, 0xfaa2, 0x36b0, 0x6ca6, 0x0, 0x0);
        gbc.writeMem(0x3004, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8347);
        EXPECT(gbc.pc(), 0x3006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0005
        gbc.setState(0xd91e, 0xb454, 0x8b20, 0xf514, 0x4408, 0x67b9, 0x1, 0x0);
        gbc.writeMem(0xd91e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb454);
        EXPECT(gbc.pc(), 0xd920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91e), 0xcb);
        EXPECT(gbc.readMem(0xd91f), 0x3a);
        // CB 3A 0006
        gbc.setState(0x9e15, 0xf51d, 0xfa90, 0xc005, 0x7597, 0x9e19, 0x0, 0x1);
        gbc.writeMem(0x9e15, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf51d);
        EXPECT(gbc.pc(), 0x9e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e15), 0xcb);
        EXPECT(gbc.readMem(0x9e16), 0x3a);
        // CB 3A 0007
        gbc.setState(0x9dd2, 0x5455, 0xc3f0, 0x9299, 0x86e7, 0x4d6f, 0x0, 0x0);
        gbc.writeMem(0x9dd2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5455);
        EXPECT(gbc.pc(), 0x9dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd2), 0xcb);
        EXPECT(gbc.readMem(0x9dd3), 0x3a);
        // CB 3A 0008
        gbc.setState(0xd77, 0x23dc, 0xdf0, 0xb539, 0xb9c8, 0x12a6, 0x1, 0x0);
        gbc.writeMem(0xd77, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x23dc);
        EXPECT(gbc.pc(), 0xd79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0009
        gbc.setState(0xb850, 0x28e5, 0xcbe0, 0x4785, 0x7912, 0x1f3, 0x0, 0x1);
        gbc.writeMem(0xb850, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x28e5);
        EXPECT(gbc.pc(), 0xb852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb850), 0xcb);
        EXPECT(gbc.readMem(0xb851), 0x3a);
        // CB 3A 000A
        gbc.setState(0xed2, 0x3f02, 0xb300, 0x641a, 0xd9dc, 0x6562, 0x1, 0x1);
        gbc.writeMem(0xed2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3f02);
        EXPECT(gbc.pc(), 0xed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 000B
        gbc.setState(0x8810, 0xd045, 0xa310, 0x97c3, 0x681f, 0x31ae, 0x1, 0x1);
        gbc.writeMem(0x8810, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd045);
        EXPECT(gbc.pc(), 0x8812);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8810), 0xcb);
        EXPECT(gbc.readMem(0x8811), 0x3a);
        // CB 3A 000D
        gbc.setState(0x5ac9, 0x4ce3, 0xfcd0, 0x9267, 0x3a47, 0xa842, 0x1, 0x1);
        gbc.writeMem(0x5ac9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4ce3);
        EXPECT(gbc.pc(), 0x5acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 000E
        gbc.setState(0x59ba, 0xa356, 0x38b0, 0x2a1c, 0xbb00, 0x90f6, 0x1, 0x0);
        gbc.writeMem(0x59ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa356);
        EXPECT(gbc.pc(), 0x59bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 000F
        gbc.setState(0xd1aa, 0x4333, 0x6330, 0xe88b, 0x491c, 0xe976, 0x1, 0x1);
        gbc.writeMem(0xd1aa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4333);
        EXPECT(gbc.pc(), 0xd1ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1aa), 0xcb);
        EXPECT(gbc.readMem(0xd1ab), 0x3a);
        // CB 3A 0010
        gbc.setState(0x6d3f, 0xd352, 0x71d0, 0xbd3, 0xc143, 0x6853, 0x0, 0x0);
        gbc.writeMem(0x6d3f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd352);
        EXPECT(gbc.pc(), 0x6d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0011
        gbc.setState(0xaaeb, 0x62b4, 0x9080, 0x412d, 0x5143, 0x4e54, 0x0, 0x1);
        gbc.writeMem(0xaaeb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x62b4);
        EXPECT(gbc.pc(), 0xaaed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaeb), 0xcb);
        EXPECT(gbc.readMem(0xaaec), 0x3a);
        // CB 3A 0012
        gbc.setState(0x8be3, 0xeb5c, 0x30d0, 0xbecf, 0xcfae, 0xa6c, 0x1, 0x0);
        gbc.writeMem(0x8be3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xeb5c);
        EXPECT(gbc.pc(), 0x8be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be3), 0xcb);
        EXPECT(gbc.readMem(0x8be4), 0x3a);
        // CB 3A 0013
        gbc.setState(0x78e9, 0xa7a8, 0x83e0, 0x4f98, 0x9f33, 0xcf49, 0x1, 0x0);
        gbc.writeMem(0x78e9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa7a8);
        EXPECT(gbc.pc(), 0x78eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0014
        gbc.setState(0x559e, 0x1d6c, 0x900, 0x637a, 0x5081, 0x518c, 0x0, 0x0);
        gbc.writeMem(0x559e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1d6c);
        EXPECT(gbc.pc(), 0x55a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0015
        gbc.setState(0x9a50, 0x3d29, 0xb0c0, 0xe92c, 0x4fea, 0xaea3, 0x0, 0x1);
        gbc.writeMem(0x9a50, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3d29);
        EXPECT(gbc.pc(), 0x9a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a50), 0xcb);
        EXPECT(gbc.readMem(0x9a51), 0x3a);
        // CB 3A 0017
        gbc.setState(0x5936, 0x5af3, 0x7e70, 0x4180, 0xc001, 0xbdd3, 0x1, 0x1);
        gbc.writeMem(0x5936, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5af3);
        EXPECT(gbc.pc(), 0x5938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0018
        gbc.setState(0xc0c0, 0x301f, 0x1bb0, 0x22d2, 0xb5a0, 0x1b74, 0x1, 0x0);
        gbc.writeMem(0xc0c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x301f);
        EXPECT(gbc.pc(), 0xc0c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0c0), 0xcb);
        EXPECT(gbc.readMem(0xc0c1), 0x3a);
        // CB 3A 0019
        gbc.setState(0xc31b, 0x7514, 0x30f0, 0xf2d9, 0x725b, 0x8983, 0x0, 0x1);
        gbc.writeMem(0xc31b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7514);
        EXPECT(gbc.pc(), 0xc31d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31b), 0xcb);
        EXPECT(gbc.readMem(0xc31c), 0x3a);
        // CB 3A 001A
        gbc.setState(0x41dc, 0xd6d8, 0x5040, 0x6c9f, 0xbe31, 0x9757, 0x0, 0x0);
        gbc.writeMem(0x41dc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd6d8);
        EXPECT(gbc.pc(), 0x41de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 001B
        gbc.setState(0x6cdc, 0xa0fd, 0xc780, 0xf1c2, 0xdd6c, 0x5c17, 0x1, 0x0);
        gbc.writeMem(0x6cdc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa0fd);
        EXPECT(gbc.pc(), 0x6cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 001C
        gbc.setState(0xd9b4, 0x626a, 0x2460, 0xf17d, 0xd7a8, 0x3fca, 0x1, 0x0);
        gbc.writeMem(0xd9b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x626a);
        EXPECT(gbc.pc(), 0xd9b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b4), 0xcb);
        EXPECT(gbc.readMem(0xd9b5), 0x3a);
        // CB 3A 001D
        gbc.setState(0x7f99, 0x39b3, 0xbc70, 0x446e, 0x2e9b, 0x268b, 0x0, 0x1);
        gbc.writeMem(0x7f99, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x39b3);
        EXPECT(gbc.pc(), 0x7f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 001E
        gbc.setState(0x8531, 0x3480, 0x2860, 0x7d90, 0xecf8, 0x4d88, 0x0, 0x0);
        gbc.writeMem(0x8531, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3480);
        EXPECT(gbc.pc(), 0x8533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8531), 0xcb);
        EXPECT(gbc.readMem(0x8532), 0x3a);
        // CB 3A 001F
        gbc.setState(0x2b88, 0x5718, 0xbb20, 0xb077, 0xc1c1, 0xd30, 0x0, 0x0);
        gbc.writeMem(0x2b88, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5718);
        EXPECT(gbc.pc(), 0x2b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0020
        gbc.setState(0x379f, 0xfeb8, 0xbf40, 0x37ba, 0xe5dc, 0x32f9, 0x0, 0x0);
        gbc.writeMem(0x379f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfeb8);
        EXPECT(gbc.pc(), 0x37a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0021
        gbc.setState(0x36ec, 0x2ab5, 0x1a30, 0x6a7c, 0xb6c, 0x1dc5, 0x1, 0x0);
        gbc.writeMem(0x36ec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2ab5);
        EXPECT(gbc.pc(), 0x36ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0022
        gbc.setState(0x44c1, 0xea24, 0x54b0, 0x243e, 0x303, 0xf10f, 0x0, 0x1);
        gbc.writeMem(0x44c1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xea24);
        EXPECT(gbc.pc(), 0x44c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0023
        gbc.setState(0x549a, 0x2be, 0x8c00, 0x906f, 0xb683, 0xaae9, 0x1, 0x0);
        gbc.writeMem(0x549a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2be);
        EXPECT(gbc.pc(), 0x549c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0024
        gbc.setState(0x1782, 0xf05b, 0xb3a0, 0x41bc, 0xd72e, 0xc209, 0x0, 0x1);
        gbc.writeMem(0x1782, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf05b);
        EXPECT(gbc.pc(), 0x1784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0025
        gbc.setState(0x5f72, 0xc2e5, 0xb230, 0x1fb6, 0x57e7, 0xbd9b, 0x1, 0x1);
        gbc.writeMem(0x5f72, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc2e5);
        EXPECT(gbc.pc(), 0x5f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0026
        gbc.setState(0x1a7, 0xffdb, 0xee20, 0xe7e0, 0x952, 0x8f72, 0x0, 0x0);
        gbc.writeMem(0x1a7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xffdb);
        EXPECT(gbc.pc(), 0x1a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0028
        gbc.setState(0xcdc8, 0x813, 0x2c0, 0x2f59, 0xcc5e, 0xe46f, 0x0, 0x0);
        gbc.writeMem(0xcdc8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x813);
        EXPECT(gbc.pc(), 0xcdca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc8), 0xcb);
        EXPECT(gbc.readMem(0xcdc9), 0x3a);
        // CB 3A 0029
        gbc.setState(0x142e, 0x2f8f, 0xed80, 0x7cee, 0xef4c, 0xca60, 0x0, 0x0);
        gbc.writeMem(0x142e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2f8f);
        EXPECT(gbc.pc(), 0x1430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 002A
        gbc.setState(0x37cc, 0x608d, 0xd280, 0x6b01, 0x81a0, 0xab85, 0x0, 0x0);
        gbc.writeMem(0x37cc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x608d);
        EXPECT(gbc.pc(), 0x37ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 002C
        gbc.setState(0x4765, 0xa94f, 0x1e20, 0x398c, 0x3fd9, 0x5eff, 0x0, 0x0);
        gbc.writeMem(0x4765, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa94f);
        EXPECT(gbc.pc(), 0x4767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 002D
        gbc.setState(0x1d9, 0xe198, 0x10c0, 0xd8d, 0x6789, 0x6065, 0x0, 0x1);
        gbc.writeMem(0x1d9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe198);
        EXPECT(gbc.pc(), 0x1db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 002E
        gbc.setState(0xc30b, 0x822, 0x7b00, 0x4373, 0xaef5, 0xe982, 0x0, 0x0);
        gbc.writeMem(0xc30b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x822);
        EXPECT(gbc.pc(), 0xc30d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc30b), 0xcb);
        EXPECT(gbc.readMem(0xc30c), 0x3a);
        // CB 3A 002F
        gbc.setState(0x60d2, 0xd6d3, 0xf220, 0xbbc2, 0x43f0, 0x25c1, 0x0, 0x1);
        gbc.writeMem(0x60d2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd6d3);
        EXPECT(gbc.pc(), 0x60d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0030
        gbc.setState(0xeea7, 0x98b4, 0x8470, 0xbf30, 0x6c69, 0x2208, 0x0, 0x0);
        gbc.writeMem(0xeea7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x98b4);
        EXPECT(gbc.pc(), 0xeea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea7), 0xcb);
        EXPECT(gbc.readMem(0xeea8), 0x3a);
        // CB 3A 0031
        gbc.setState(0x4a8, 0xd378, 0x5ae0, 0x575d, 0x60dc, 0x286c, 0x1, 0x0);
        gbc.writeMem(0x4a8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd378);
        EXPECT(gbc.pc(), 0x4aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0032
        gbc.setState(0xdc6a, 0xae26, 0x7160, 0xef32, 0x3e77, 0x6ff9, 0x1, 0x0);
        gbc.writeMem(0xdc6a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xae26);
        EXPECT(gbc.pc(), 0xdc6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6a), 0xcb);
        EXPECT(gbc.readMem(0xdc6b), 0x3a);
        // CB 3A 0033
        gbc.setState(0xa6f9, 0xa533, 0xea30, 0xb829, 0x4319, 0x169b, 0x0, 0x1);
        gbc.writeMem(0xa6f9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa533);
        EXPECT(gbc.pc(), 0xa6fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f9), 0xcb);
        EXPECT(gbc.readMem(0xa6fa), 0x3a);
        // CB 3A 0034
        gbc.setState(0xe424, 0x1bd, 0xa620, 0xaab8, 0x1f33, 0x972, 0x0, 0x1);
        gbc.writeMem(0xe424, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1bd);
        EXPECT(gbc.pc(), 0xe426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe424), 0xcb);
        EXPECT(gbc.readMem(0xe425), 0x3a);
        // CB 3A 0035
        gbc.setState(0x619e, 0xfd58, 0xb520, 0x14fd, 0xf227, 0x9300, 0x1, 0x1);
        gbc.writeMem(0x619e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfd58);
        EXPECT(gbc.pc(), 0x61a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0036
        gbc.setState(0xc9e3, 0xed9a, 0xf3a0, 0x66ef, 0xd17d, 0x16af, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xed9a);
        EXPECT(gbc.pc(), 0xc9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e3), 0xcb);
        EXPECT(gbc.readMem(0xc9e4), 0x3a);
        // CB 3A 0037
        gbc.setState(0x4939, 0x90de, 0x8c10, 0x3c64, 0x1706, 0x42ea, 0x0, 0x1);
        gbc.writeMem(0x4939, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x90de);
        EXPECT(gbc.pc(), 0x493b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0038
        gbc.setState(0x3a22, 0xa1a9, 0xe720, 0x860f, 0x5515, 0x7c, 0x1, 0x1);
        gbc.writeMem(0x3a22, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa1a9);
        EXPECT(gbc.pc(), 0x3a24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0039
        gbc.setState(0x4e8, 0x5a19, 0x7110, 0x608d, 0xeee0, 0x794b, 0x0, 0x1);
        gbc.writeMem(0x4e8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5a19);
        EXPECT(gbc.pc(), 0x4ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 003A
        gbc.setState(0xb7b4, 0xba2c, 0xe870, 0x2484, 0x6ab2, 0xa8fa, 0x0, 0x1);
        gbc.writeMem(0xb7b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xba2c);
        EXPECT(gbc.pc(), 0xb7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b4), 0xcb);
        EXPECT(gbc.readMem(0xb7b5), 0x3a);
        // CB 3A 003B
        gbc.setState(0x4aba, 0x9ad3, 0xed30, 0xefe4, 0x12d4, 0x25c1, 0x1, 0x1);
        gbc.writeMem(0x4aba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9ad3);
        EXPECT(gbc.pc(), 0x4abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 003C
        gbc.setState(0x53f4, 0xc8f1, 0x1060, 0x439b, 0x201f, 0x8384, 0x1, 0x1);
        gbc.writeMem(0x53f4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc8f1);
        EXPECT(gbc.pc(), 0x53f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 003D
        gbc.setState(0x1415, 0x6b1, 0xeee0, 0x9d60, 0x8a35, 0xa0da, 0x0, 0x1);
        gbc.writeMem(0x1415, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6b1);
        EXPECT(gbc.pc(), 0x1417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 003F
        gbc.setState(0x564f, 0xdb7f, 0x4d10, 0xf4df, 0xb93a, 0xcc12, 0x0, 0x0);
        gbc.writeMem(0x564f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdb7f);
        EXPECT(gbc.pc(), 0x5651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0040
        gbc.setState(0x610, 0x133e, 0x7b20, 0x62fc, 0x96ad, 0x6b3d, 0x1, 0x0);
        gbc.writeMem(0x610, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x133e);
        EXPECT(gbc.pc(), 0x612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0041
        gbc.setState(0x9f6e, 0x97c, 0x7200, 0x42c0, 0x4884, 0x70fc, 0x1, 0x1);
        gbc.writeMem(0x9f6e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x97c);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6e), 0xcb);
        EXPECT(gbc.readMem(0x9f6f), 0x3a);
        // CB 3A 0042
        gbc.setState(0xa250, 0x58df, 0xc60, 0xb1bd, 0xd499, 0x537f, 0x1, 0x0);
        gbc.writeMem(0xa250, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x58df);
        EXPECT(gbc.pc(), 0xa252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa250), 0xcb);
        EXPECT(gbc.readMem(0xa251), 0x3a);
        // CB 3A 0044
        gbc.setState(0x4e16, 0x82bf, 0x40a0, 0x4104, 0x9629, 0xba8c, 0x0, 0x0);
        gbc.writeMem(0x4e16, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x82bf);
        EXPECT(gbc.pc(), 0x4e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0045
        gbc.setState(0x1879, 0x8cb2, 0xd830, 0x7ec9, 0xe40b, 0xdfd8, 0x1, 0x1);
        gbc.writeMem(0x1879, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8cb2);
        EXPECT(gbc.pc(), 0x187b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0046
        gbc.setState(0x86dd, 0x7480, 0xb940, 0x8b6e, 0x9990, 0x3550, 0x1, 0x1);
        gbc.writeMem(0x86dd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7480);
        EXPECT(gbc.pc(), 0x86df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86dd), 0xcb);
        EXPECT(gbc.readMem(0x86de), 0x3a);
        // CB 3A 0047
        gbc.setState(0x310b, 0xb9b2, 0x4840, 0x281e, 0x5636, 0x5a99, 0x0, 0x1);
        gbc.writeMem(0x310b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb9b2);
        EXPECT(gbc.pc(), 0x310d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0048
        gbc.setState(0x8a83, 0xbe9b, 0x5da0, 0x7d10, 0x2dc6, 0x31b0, 0x1, 0x0);
        gbc.writeMem(0x8a83, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbe9b);
        EXPECT(gbc.pc(), 0x8a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a83), 0xcb);
        EXPECT(gbc.readMem(0x8a84), 0x3a);
        // CB 3A 0049
        gbc.setState(0xcfd0, 0xd07c, 0xa1c0, 0xe255, 0xbfec, 0xc9d4, 0x1, 0x0);
        gbc.writeMem(0xcfd0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd07c);
        EXPECT(gbc.pc(), 0xcfd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd0), 0xcb);
        EXPECT(gbc.readMem(0xcfd1), 0x3a);
        // CB 3A 004A
        gbc.setState(0x39de, 0x5ca0, 0xff80, 0xe7eb, 0x4c34, 0x11bb, 0x0, 0x0);
        gbc.writeMem(0x39de, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5ca0);
        EXPECT(gbc.pc(), 0x39e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 004B
        gbc.setState(0x40eb, 0x1d71, 0x50, 0xec86, 0x6206, 0xa15e, 0x0, 0x0);
        gbc.writeMem(0x40eb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1d71);
        EXPECT(gbc.pc(), 0x40ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 004C
        gbc.setState(0xcb63, 0xc0a2, 0xabc0, 0x64c9, 0x57d9, 0x8800, 0x0, 0x0);
        gbc.writeMem(0xcb63, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc0a2);
        EXPECT(gbc.pc(), 0xcb65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb63), 0xcb);
        EXPECT(gbc.readMem(0xcb64), 0x3a);
        // CB 3A 004D
        gbc.setState(0x11d6, 0xc130, 0x64a0, 0x4a41, 0x4516, 0xe2b1, 0x1, 0x1);
        gbc.writeMem(0x11d6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc130);
        EXPECT(gbc.pc(), 0x11d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 004E
        gbc.setState(0x2c5, 0x52a0, 0x55a0, 0x5aa2, 0xe710, 0x1c17, 0x1, 0x1);
        gbc.writeMem(0x2c5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x52a0);
        EXPECT(gbc.pc(), 0x2c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 004F
        gbc.setState(0x2aa6, 0x9b49, 0x61e0, 0x824b, 0x5ca8, 0xf7be, 0x0, 0x1);
        gbc.writeMem(0x2aa6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9b49);
        EXPECT(gbc.pc(), 0x2aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0050
        gbc.setState(0xe6c, 0xed0e, 0xffd0, 0xbf35, 0x6613, 0xb394, 0x0, 0x0);
        gbc.writeMem(0xe6c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xed0e);
        EXPECT(gbc.pc(), 0xe6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0051
        gbc.setState(0x7838, 0xbccc, 0xe0b0, 0x28b7, 0xda3f, 0xe042, 0x1, 0x1);
        gbc.writeMem(0x7838, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbccc);
        EXPECT(gbc.pc(), 0x783a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0052
        gbc.setState(0x3830, 0xf153, 0xef00, 0x9f1f, 0x6547, 0x9465, 0x0, 0x1);
        gbc.writeMem(0x3830, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf153);
        EXPECT(gbc.pc(), 0x3832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0053
        gbc.setState(0x557f, 0xdcce, 0x61a0, 0x6fd2, 0x9632, 0x6590, 0x1, 0x0);
        gbc.writeMem(0x557f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdcce);
        EXPECT(gbc.pc(), 0x5581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0054
        gbc.setState(0x9062, 0x7d65, 0xa130, 0x121f, 0x9842, 0xfc41, 0x1, 0x1);
        gbc.writeMem(0x9062, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7d65);
        EXPECT(gbc.pc(), 0x9064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9062), 0xcb);
        EXPECT(gbc.readMem(0x9063), 0x3a);
        // CB 3A 0055
        gbc.setState(0xe408, 0xbf36, 0x66d0, 0x5494, 0x6f26, 0xf0b, 0x0, 0x0);
        gbc.writeMem(0xe408, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xbf36);
        EXPECT(gbc.pc(), 0xe40a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe408), 0xcb);
        EXPECT(gbc.readMem(0xe409), 0x3a);
        // CB 3A 0056
        gbc.setState(0x1c27, 0xaf1, 0x8fd0, 0x7ca3, 0xeddf, 0x2f44, 0x0, 0x1);
        gbc.writeMem(0x1c27, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaf1);
        EXPECT(gbc.pc(), 0x1c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0057
        gbc.setState(0x6187, 0x4374, 0x8f20, 0x5d31, 0x4af6, 0x9d32, 0x1, 0x1);
        gbc.writeMem(0x6187, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4374);
        EXPECT(gbc.pc(), 0x6189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0058
        gbc.setState(0xd9c9, 0x80cf, 0xce30, 0x3737, 0x36a9, 0x3d0f, 0x0, 0x1);
        gbc.writeMem(0xd9c9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x80cf);
        EXPECT(gbc.pc(), 0xd9cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c9), 0xcb);
        EXPECT(gbc.readMem(0xd9ca), 0x3a);
        // CB 3A 0059
        gbc.setState(0x5195, 0x3203, 0xb580, 0x4277, 0x30f7, 0xe075, 0x1, 0x1);
        gbc.writeMem(0x5195, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3203);
        EXPECT(gbc.pc(), 0x5197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 005A
        gbc.setState(0xb33, 0x44e1, 0xc3b0, 0xe3b8, 0x82eb, 0x2283, 0x1, 0x0);
        gbc.writeMem(0xb33, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x44e1);
        EXPECT(gbc.pc(), 0xb35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 005B
        gbc.setState(0x60e2, 0x3dc3, 0xb480, 0x9c3e, 0xe074, 0x6719, 0x1, 0x1);
        gbc.writeMem(0x60e2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3dc3);
        EXPECT(gbc.pc(), 0x60e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 005C
        gbc.setState(0x1eed, 0xd3af, 0x3c80, 0xcd39, 0x89bc, 0xf7fc, 0x1, 0x1);
        gbc.writeMem(0x1eed, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd3af);
        EXPECT(gbc.pc(), 0x1eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 005D
        gbc.setState(0x60d7, 0x87ad, 0x9aa0, 0x7309, 0x92f0, 0xcad3, 0x0, 0x1);
        gbc.writeMem(0x60d7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x87ad);
        EXPECT(gbc.pc(), 0x60d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 005E
        gbc.setState(0xb1b, 0xac20, 0x79f0, 0xaa1d, 0xbb12, 0xaf0c, 0x1, 0x0);
        gbc.writeMem(0xb1b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xac20);
        EXPECT(gbc.pc(), 0xb1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 005F
        gbc.setState(0x1190, 0x1cd6, 0xda20, 0xd497, 0x893, 0xec43, 0x1, 0x1);
        gbc.writeMem(0x1190, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1cd6);
        EXPECT(gbc.pc(), 0x1192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0061
        gbc.setState(0xa00a, 0x1f1a, 0x4b20, 0xcb16, 0xf550, 0x31b1, 0x1, 0x0);
        gbc.writeMem(0xa00a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1f1a);
        EXPECT(gbc.pc(), 0xa00c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa00a), 0xcb);
        EXPECT(gbc.readMem(0xa00b), 0x3a);
        // CB 3A 0062
        gbc.setState(0x2e2a, 0xcb8c, 0x5d30, 0xdcdc, 0x9e11, 0xfd08, 0x0, 0x0);
        gbc.writeMem(0x2e2a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcb8c);
        EXPECT(gbc.pc(), 0x2e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0063
        gbc.setState(0xaf7, 0xc692, 0xef60, 0x45f6, 0xddba, 0xa3ed, 0x0, 0x0);
        gbc.writeMem(0xaf7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc692);
        EXPECT(gbc.pc(), 0xaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0064
        gbc.setState(0x97b8, 0x19b7, 0x7dd0, 0x801c, 0xf921, 0x7255, 0x0, 0x0);
        gbc.writeMem(0x97b8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x19b7);
        EXPECT(gbc.pc(), 0x97ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b8), 0xcb);
        EXPECT(gbc.readMem(0x97b9), 0x3a);
        // CB 3A 0065
        gbc.setState(0x7117, 0x39a0, 0x4fa0, 0xf8de, 0x2ba4, 0x1e11, 0x0, 0x0);
        gbc.writeMem(0x7117, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x39a0);
        EXPECT(gbc.pc(), 0x7119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0066
        gbc.setState(0xb288, 0x504, 0xa950, 0x1e39, 0xdba7, 0xa6f7, 0x1, 0x1);
        gbc.writeMem(0xb288, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x504);
        EXPECT(gbc.pc(), 0xb28a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb288), 0xcb);
        EXPECT(gbc.readMem(0xb289), 0x3a);
        // CB 3A 0068
        gbc.setState(0xc132, 0x3034, 0x4e90, 0x663d, 0x66ba, 0x2cb9, 0x1, 0x0);
        gbc.writeMem(0xc132, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3034);
        EXPECT(gbc.pc(), 0xc134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc132), 0xcb);
        EXPECT(gbc.readMem(0xc133), 0x3a);
        // CB 3A 0069
        gbc.setState(0x7031, 0x1714, 0xb040, 0x99d4, 0x2f28, 0x47c1, 0x1, 0x1);
        gbc.writeMem(0x7031, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1714);
        EXPECT(gbc.pc(), 0x7033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 006A
        gbc.setState(0xbb04, 0xff12, 0x3410, 0x8a04, 0x3992, 0x8bde, 0x0, 0x0);
        gbc.writeMem(0xbb04, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xff12);
        EXPECT(gbc.pc(), 0xbb06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb04), 0xcb);
        EXPECT(gbc.readMem(0xbb05), 0x3a);
        // CB 3A 006B
        gbc.setState(0x4296, 0x4759, 0x1840, 0x691e, 0x1c06, 0x811e, 0x0, 0x0);
        gbc.writeMem(0x4296, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4759);
        EXPECT(gbc.pc(), 0x4298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 006C
        gbc.setState(0xc787, 0x449c, 0x9f90, 0x4f31, 0xcb0a, 0x4640, 0x1, 0x0);
        gbc.writeMem(0xc787, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x449c);
        EXPECT(gbc.pc(), 0xc789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc787), 0xcb);
        EXPECT(gbc.readMem(0xc788), 0x3a);
        // CB 3A 006D
        gbc.setState(0xed95, 0x3c52, 0xd7a0, 0xa668, 0x8501, 0x4079, 0x0, 0x1);
        gbc.writeMem(0xed95, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3c52);
        EXPECT(gbc.pc(), 0xed97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed95), 0xcb);
        EXPECT(gbc.readMem(0xed96), 0x3a);
        // CB 3A 006F
        gbc.setState(0x683e, 0x89de, 0x9800, 0xb0c, 0x731d, 0x273a, 0x1, 0x0);
        gbc.writeMem(0x683e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x89de);
        EXPECT(gbc.pc(), 0x6840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0070
        gbc.setState(0x5756, 0x6ab3, 0xb5c0, 0xabf9, 0x84fe, 0x7f8c, 0x0, 0x1);
        gbc.writeMem(0x5756, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6ab3);
        EXPECT(gbc.pc(), 0x5758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0071
        gbc.setState(0x9378, 0x3e, 0xe330, 0xf5f3, 0x9edb, 0x3f5b, 0x1, 0x1);
        gbc.writeMem(0x9378, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3e);
        EXPECT(gbc.pc(), 0x937a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9378), 0xcb);
        EXPECT(gbc.readMem(0x9379), 0x3a);
        // CB 3A 0072
        gbc.setState(0x5065, 0x71f3, 0x7c00, 0xeaa5, 0x64a2, 0x398c, 0x1, 0x0);
        gbc.writeMem(0x5065, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x71f3);
        EXPECT(gbc.pc(), 0x5067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0073
        gbc.setState(0x1265, 0x9767, 0x8600, 0xbcba, 0x18e7, 0xbe17, 0x1, 0x0);
        gbc.writeMem(0x1265, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9767);
        EXPECT(gbc.pc(), 0x1267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0074
        gbc.setState(0xa967, 0x40dc, 0x8ba0, 0x2070, 0xdf51, 0xb89c, 0x0, 0x1);
        gbc.writeMem(0xa967, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x40dc);
        EXPECT(gbc.pc(), 0xa969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa967), 0xcb);
        EXPECT(gbc.readMem(0xa968), 0x3a);
        // CB 3A 0075
        gbc.setState(0xe370, 0xbf94, 0x81c0, 0x109c, 0xaf01, 0x6b68, 0x1, 0x0);
        gbc.writeMem(0xe370, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbf94);
        EXPECT(gbc.pc(), 0xe372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe370), 0xcb);
        EXPECT(gbc.readMem(0xe371), 0x3a);
        // CB 3A 0076
        gbc.setState(0x1e53, 0x1ed5, 0x9540, 0x54e9, 0x41c0, 0x9341, 0x1, 0x1);
        gbc.writeMem(0x1e53, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1ed5);
        EXPECT(gbc.pc(), 0x1e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0077
        gbc.setState(0x881e, 0x121e, 0xc930, 0x21a8, 0xe492, 0x6866, 0x0, 0x1);
        gbc.writeMem(0x881e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x121e);
        EXPECT(gbc.pc(), 0x8820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881e), 0xcb);
        EXPECT(gbc.readMem(0x881f), 0x3a);
        // CB 3A 0079
        gbc.setState(0x1351, 0xf880, 0x2410, 0x5a74, 0x62a7, 0x3693, 0x0, 0x1);
        gbc.writeMem(0x1351, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf880);
        EXPECT(gbc.pc(), 0x1353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 007A
        gbc.setState(0x95d6, 0x822a, 0x9040, 0x1c60, 0xc1ea, 0x194b, 0x1, 0x1);
        gbc.writeMem(0x95d6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x822a);
        EXPECT(gbc.pc(), 0x95d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95d6), 0xcb);
        EXPECT(gbc.readMem(0x95d7), 0x3a);
        // CB 3A 007C
        gbc.setState(0x4d38, 0x41d0, 0x6e90, 0x749b, 0xc8b6, 0xa4e2, 0x1, 0x1);
        gbc.writeMem(0x4d38, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x41d0);
        EXPECT(gbc.pc(), 0x4d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 007D
        gbc.setState(0x85ed, 0x239b, 0xc570, 0xa5d6, 0x491d, 0x4ad6, 0x1, 0x1);
        gbc.writeMem(0x85ed, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x239b);
        EXPECT(gbc.pc(), 0x85ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ed), 0xcb);
        EXPECT(gbc.readMem(0x85ee), 0x3a);
        // CB 3A 007E
        gbc.setState(0x9cb7, 0xd0f, 0x3760, 0x481c, 0xade1, 0x9e4, 0x0, 0x0);
        gbc.writeMem(0x9cb7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd0f);
        EXPECT(gbc.pc(), 0x9cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb7), 0xcb);
        EXPECT(gbc.readMem(0x9cb8), 0x3a);
        // CB 3A 007F
        gbc.setState(0x7f37, 0xc9fe, 0x3330, 0x6f81, 0xfda3, 0x5e96, 0x0, 0x1);
        gbc.writeMem(0x7f37, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc9fe);
        EXPECT(gbc.pc(), 0x7f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0080
        gbc.setState(0x82b7, 0xb7d4, 0x55f0, 0xd417, 0xcca8, 0xe088, 0x0, 0x0);
        gbc.writeMem(0x82b7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb7d4);
        EXPECT(gbc.pc(), 0x82b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b7), 0xcb);
        EXPECT(gbc.readMem(0x82b8), 0x3a);
        // CB 3A 0081
        gbc.setState(0x9333, 0xa919, 0xab40, 0xf8d5, 0x990b, 0xe201, 0x1, 0x0);
        gbc.writeMem(0x9333, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa919);
        EXPECT(gbc.pc(), 0x9335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9333), 0xcb);
        EXPECT(gbc.readMem(0x9334), 0x3a);
        // CB 3A 0082
        gbc.setState(0xde93, 0xebb2, 0x9f50, 0xf177, 0xe248, 0x9a08, 0x1, 0x1);
        gbc.writeMem(0xde93, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xebb2);
        EXPECT(gbc.pc(), 0xde95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde93), 0xcb);
        EXPECT(gbc.readMem(0xde94), 0x3a);
        // CB 3A 0083
        gbc.setState(0x8422, 0x70e3, 0x3050, 0xba62, 0xab8c, 0xed70, 0x0, 0x1);
        gbc.writeMem(0x8422, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x70e3);
        EXPECT(gbc.pc(), 0x8424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8422), 0xcb);
        EXPECT(gbc.readMem(0x8423), 0x3a);
        // CB 3A 0084
        gbc.setState(0x4057, 0xaa56, 0xe410, 0x2727, 0xc2bb, 0x3fe4, 0x0, 0x1);
        gbc.writeMem(0x4057, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xaa56);
        EXPECT(gbc.pc(), 0x4059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0085
        gbc.setState(0x20c5, 0x9398, 0xe9b0, 0x83f1, 0x447, 0x1061, 0x1, 0x1);
        gbc.writeMem(0x20c5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9398);
        EXPECT(gbc.pc(), 0x20c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0086
        gbc.setState(0xd3d8, 0x5fa9, 0x9d90, 0x8ad, 0x80f9, 0x3efb, 0x1, 0x1);
        gbc.writeMem(0xd3d8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5fa9);
        EXPECT(gbc.pc(), 0xd3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d8), 0xcb);
        EXPECT(gbc.readMem(0xd3d9), 0x3a);
        // CB 3A 0087
        gbc.setState(0xc12f, 0xdae7, 0xa240, 0x85fa, 0xdfc7, 0xca89, 0x0, 0x1);
        gbc.writeMem(0xc12f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xdae7);
        EXPECT(gbc.pc(), 0xc131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc12f), 0xcb);
        EXPECT(gbc.readMem(0xc130), 0x3a);
        // CB 3A 0088
        gbc.setState(0x7acf, 0x92ea, 0x4cf0, 0x5fdc, 0xb515, 0x701d, 0x1, 0x1);
        gbc.writeMem(0x7acf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x92ea);
        EXPECT(gbc.pc(), 0x7ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0089
        gbc.setState(0x9d27, 0xcf73, 0x3a50, 0xa95, 0x2ab3, 0x7e05, 0x0, 0x0);
        gbc.writeMem(0x9d27, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcf73);
        EXPECT(gbc.pc(), 0x9d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d27), 0xcb);
        EXPECT(gbc.readMem(0x9d28), 0x3a);
        // CB 3A 008A
        gbc.setState(0x38ba, 0x92aa, 0xe350, 0xe85f, 0x5797, 0xd842, 0x1, 0x0);
        gbc.writeMem(0x38ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x92aa);
        EXPECT(gbc.pc(), 0x38bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 008B
        gbc.setState(0xa565, 0xed86, 0x1610, 0x578b, 0xdd2c, 0x708e, 0x0, 0x1);
        gbc.writeMem(0xa565, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xed86);
        EXPECT(gbc.pc(), 0xa567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa565), 0xcb);
        EXPECT(gbc.readMem(0xa566), 0x3a);
        // CB 3A 008C
        gbc.setState(0xb97c, 0xc8e9, 0xbaf0, 0xb869, 0x1021, 0xa459, 0x1, 0x0);
        gbc.writeMem(0xb97c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc8e9);
        EXPECT(gbc.pc(), 0xb97e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97c), 0xcb);
        EXPECT(gbc.readMem(0xb97d), 0x3a);
        // CB 3A 008D
        gbc.setState(0x1473, 0x530b, 0xcab0, 0xb7dc, 0xc50d, 0xc82b, 0x0, 0x0);
        gbc.writeMem(0x1473, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x530b);
        EXPECT(gbc.pc(), 0x1475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 008E
        gbc.setState(0x18df, 0x3349, 0xc260, 0x93e, 0x2949, 0x3b4c, 0x1, 0x0);
        gbc.writeMem(0x18df, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3349);
        EXPECT(gbc.pc(), 0x18e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 008F
        gbc.setState(0x356b, 0xae1b, 0xa210, 0x1c85, 0x39ae, 0xdea1, 0x1, 0x1);
        gbc.writeMem(0x356b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xae1b);
        EXPECT(gbc.pc(), 0x356d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0090
        gbc.setState(0x8416, 0xa43c, 0x9840, 0x546a, 0xa13e, 0x4fde, 0x1, 0x0);
        gbc.writeMem(0x8416, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa43c);
        EXPECT(gbc.pc(), 0x8418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8416), 0xcb);
        EXPECT(gbc.readMem(0x8417), 0x3a);
        // CB 3A 0091
        gbc.setState(0xd9e5, 0xa6c6, 0x58a0, 0x585e, 0xb63f, 0xd848, 0x0, 0x0);
        gbc.writeMem(0xd9e5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa6c6);
        EXPECT(gbc.pc(), 0xd9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e5), 0xcb);
        EXPECT(gbc.readMem(0xd9e6), 0x3a);
        // CB 3A 0092
        gbc.setState(0x7ec4, 0x3ec0, 0x11d0, 0xdf70, 0x5f8d, 0x28a5, 0x1, 0x1);
        gbc.writeMem(0x7ec4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3ec0);
        EXPECT(gbc.pc(), 0x7ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0093
        gbc.setState(0xb78f, 0xc053, 0x58e0, 0xc041, 0xedd6, 0x7aa8, 0x1, 0x1);
        gbc.writeMem(0xb78f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc053);
        EXPECT(gbc.pc(), 0xb791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb78f), 0xcb);
        EXPECT(gbc.readMem(0xb790), 0x3a);
        // CB 3A 0094
        gbc.setState(0x9d40, 0x543, 0x3c0, 0xc84b, 0xa477, 0xd904, 0x0, 0x1);
        gbc.writeMem(0x9d40, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x543);
        EXPECT(gbc.pc(), 0x9d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d40), 0xcb);
        EXPECT(gbc.readMem(0x9d41), 0x3a);
        // CB 3A 0095
        gbc.setState(0x77c, 0xb079, 0xb8a0, 0x7474, 0x7aec, 0x9ebc, 0x1, 0x0);
        gbc.writeMem(0x77c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb079);
        EXPECT(gbc.pc(), 0x77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0096
        gbc.setState(0xf8d, 0xfc06, 0xc820, 0xe54d, 0xde7a, 0xb43a, 0x1, 0x1);
        gbc.writeMem(0xf8d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xfc06);
        EXPECT(gbc.pc(), 0xf8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0097
        gbc.setState(0x3962, 0x43e, 0x6870, 0xfded, 0xc2d1, 0x8606, 0x1, 0x0);
        gbc.writeMem(0x3962, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x43e);
        EXPECT(gbc.pc(), 0x3964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0098
        gbc.setState(0xb27b, 0x1337, 0xfb30, 0xd2d4, 0x4c82, 0xadde, 0x0, 0x1);
        gbc.writeMem(0xb27b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1337);
        EXPECT(gbc.pc(), 0xb27d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb27b), 0xcb);
        EXPECT(gbc.readMem(0xb27c), 0x3a);
        // CB 3A 0099
        gbc.setState(0x55, 0xb73f, 0x6eb0, 0xc70f, 0x5408, 0x3525, 0x1, 0x1);
        gbc.writeMem(0x55, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb73f);
        EXPECT(gbc.pc(), 0x57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 009A
        gbc.setState(0x25f8, 0x9612, 0x85d0, 0x8dd9, 0xf58c, 0xa051, 0x1, 0x1);
        gbc.writeMem(0x25f8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9612);
        EXPECT(gbc.pc(), 0x25fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 009B
        gbc.setState(0xee15, 0xb8df, 0x3420, 0x158b, 0x5bb8, 0x5379, 0x1, 0x0);
        gbc.writeMem(0xee15, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb8df);
        EXPECT(gbc.pc(), 0xee17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee15), 0xcb);
        EXPECT(gbc.readMem(0xee16), 0x3a);
        // CB 3A 009C
        gbc.setState(0xa5ac, 0xd35e, 0xeff0, 0x835e, 0x3799, 0x7387, 0x1, 0x1);
        gbc.writeMem(0xa5ac, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd35e);
        EXPECT(gbc.pc(), 0xa5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ac), 0xcb);
        EXPECT(gbc.readMem(0xa5ad), 0x3a);
        // CB 3A 009D
        gbc.setState(0x546, 0x26b8, 0x4500, 0xdb53, 0xe6f0, 0xb01e, 0x1, 0x1);
        gbc.writeMem(0x546, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x26b8);
        EXPECT(gbc.pc(), 0x548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 009E
        gbc.setState(0x9032, 0x29dc, 0x38a0, 0xdf91, 0xea41, 0xf734, 0x0, 0x0);
        gbc.writeMem(0x9032, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x29dc);
        EXPECT(gbc.pc(), 0x9034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9032), 0xcb);
        EXPECT(gbc.readMem(0x9033), 0x3a);
        // CB 3A 009F
        gbc.setState(0x1e2e, 0x3f, 0xe3a0, 0x5f9d, 0x9611, 0x8e18, 0x1, 0x1);
        gbc.writeMem(0x1e2e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3f);
        EXPECT(gbc.pc(), 0x1e30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00A0
        gbc.setState(0xc787, 0xfba4, 0xded0, 0x68b, 0xe144, 0x2d39, 0x1, 0x1);
        gbc.writeMem(0xc787, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xfba4);
        EXPECT(gbc.pc(), 0xc789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc787), 0xcb);
        EXPECT(gbc.readMem(0xc788), 0x3a);
        // CB 3A 00A1
        gbc.setState(0x88e, 0xd42e, 0x4c80, 0x4829, 0x287d, 0xfa26, 0x1, 0x1);
        gbc.writeMem(0x88e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd42e);
        EXPECT(gbc.pc(), 0x890);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00A2
        gbc.setState(0xd46a, 0x8395, 0x21a0, 0xa634, 0xa4f1, 0x7c15, 0x1, 0x1);
        gbc.writeMem(0xd46a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8395);
        EXPECT(gbc.pc(), 0xd46c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd46a), 0xcb);
        EXPECT(gbc.readMem(0xd46b), 0x3a);
        // CB 3A 00A3
        gbc.setState(0xbaa0, 0xcca3, 0x59a0, 0x636d, 0xc6e7, 0x6ae8, 0x1, 0x0);
        gbc.writeMem(0xbaa0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcca3);
        EXPECT(gbc.pc(), 0xbaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa0), 0xcb);
        EXPECT(gbc.readMem(0xbaa1), 0x3a);
        // CB 3A 00A4
        gbc.setState(0x6efc, 0xaff4, 0x7310, 0x5fab, 0xfbb, 0x1d1b, 0x0, 0x0);
        gbc.writeMem(0x6efc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xaff4);
        EXPECT(gbc.pc(), 0x6efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00A5
        gbc.setState(0xc211, 0xc276, 0xf350, 0xe7bc, 0xd9d7, 0x447c, 0x1, 0x0);
        gbc.writeMem(0xc211, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc276);
        EXPECT(gbc.pc(), 0xc213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc211), 0xcb);
        EXPECT(gbc.readMem(0xc212), 0x3a);
        // CB 3A 00A6
        gbc.setState(0x8b2d, 0xe98d, 0x2220, 0xfdb1, 0x8993, 0xa74f, 0x1, 0x0);
        gbc.writeMem(0x8b2d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe98d);
        EXPECT(gbc.pc(), 0x8b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2d), 0xcb);
        EXPECT(gbc.readMem(0x8b2e), 0x3a);
        // CB 3A 00A7
        gbc.setState(0x5cad, 0x4034, 0xe90, 0xfd59, 0xa13e, 0x5ff4, 0x1, 0x0);
        gbc.writeMem(0x5cad, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4034);
        EXPECT(gbc.pc(), 0x5caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00A9
        gbc.setState(0xa28, 0xa91d, 0x5640, 0x6899, 0x1987, 0x8bd4, 0x0, 0x0);
        gbc.writeMem(0xa28, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa91d);
        EXPECT(gbc.pc(), 0xa2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00AA
        gbc.setState(0x8e05, 0x4ff5, 0x58b0, 0x4900, 0xe849, 0x1a52, 0x0, 0x0);
        gbc.writeMem(0x8e05, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4ff5);
        EXPECT(gbc.pc(), 0x8e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e05), 0xcb);
        EXPECT(gbc.readMem(0x8e06), 0x3a);
        // CB 3A 00AB
        gbc.setState(0x92e6, 0x7b7, 0xba70, 0x209f, 0xe5ac, 0xbf47, 0x1, 0x0);
        gbc.writeMem(0x92e6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7b7);
        EXPECT(gbc.pc(), 0x92e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e6), 0xcb);
        EXPECT(gbc.readMem(0x92e7), 0x3a);
        // CB 3A 00AC
        gbc.setState(0x7fef, 0x19c3, 0x5d30, 0x77d1, 0x8e88, 0xcd09, 0x1, 0x1);
        gbc.writeMem(0x7fef, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x19c3);
        EXPECT(gbc.pc(), 0x7ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00AE
        gbc.setState(0xe807, 0x9141, 0x8880, 0x43e4, 0x53a4, 0xe291, 0x1, 0x0);
        gbc.writeMem(0xe807, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9141);
        EXPECT(gbc.pc(), 0xe809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe807), 0xcb);
        EXPECT(gbc.readMem(0xe808), 0x3a);
        // CB 3A 00AF
        gbc.setState(0xb235, 0xac25, 0x6a0, 0x8855, 0xa43a, 0xb47d, 0x0, 0x1);
        gbc.writeMem(0xb235, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xac25);
        EXPECT(gbc.pc(), 0xb237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb235), 0xcb);
        EXPECT(gbc.readMem(0xb236), 0x3a);
        // CB 3A 00B0
        gbc.setState(0x8dc0, 0x866c, 0x3aa0, 0x8060, 0xf6b0, 0xfe75, 0x0, 0x0);
        gbc.writeMem(0x8dc0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x866c);
        EXPECT(gbc.pc(), 0x8dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc0), 0xcb);
        EXPECT(gbc.readMem(0x8dc1), 0x3a);
        // CB 3A 00B1
        gbc.setState(0x2ab5, 0xb78a, 0x8200, 0xa7d7, 0xa2b7, 0xe19, 0x0, 0x0);
        gbc.writeMem(0x2ab5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb78a);
        EXPECT(gbc.pc(), 0x2ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00B2
        gbc.setState(0xa4bc, 0xa9bc, 0x3380, 0xfd5, 0xcb31, 0x35be, 0x0, 0x1);
        gbc.writeMem(0xa4bc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa9bc);
        EXPECT(gbc.pc(), 0xa4be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bc), 0xcb);
        EXPECT(gbc.readMem(0xa4bd), 0x3a);
        // CB 3A 00B3
        gbc.setState(0x764e, 0xc243, 0x55f0, 0x680c, 0xcee1, 0xe9d6, 0x1, 0x1);
        gbc.writeMem(0x764e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc243);
        EXPECT(gbc.pc(), 0x7650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00B4
        gbc.setState(0x1a8, 0x4b7c, 0x8c80, 0x8e76, 0xaddf, 0x4a21, 0x0, 0x1);
        gbc.writeMem(0x1a8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4b7c);
        EXPECT(gbc.pc(), 0x1aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00B5
        gbc.setState(0x60b, 0x68fc, 0xa2e0, 0xf9fd, 0x8345, 0x41e7, 0x1, 0x0);
        gbc.writeMem(0x60b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x68fc);
        EXPECT(gbc.pc(), 0x60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00B6
        gbc.setState(0x89b3, 0x3c54, 0x5990, 0xd4c3, 0x7912, 0x16ad, 0x0, 0x0);
        gbc.writeMem(0x89b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3c54);
        EXPECT(gbc.pc(), 0x89b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b3), 0xcb);
        EXPECT(gbc.readMem(0x89b4), 0x3a);
        // CB 3A 00B7
        gbc.setState(0x5063, 0xdfb, 0xcf20, 0x505e, 0x6df1, 0xd9c2, 0x1, 0x0);
        gbc.writeMem(0x5063, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdfb);
        EXPECT(gbc.pc(), 0x5065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00B8
        gbc.setState(0x54fc, 0xc317, 0xc760, 0xe584, 0xcc1, 0x636a, 0x0, 0x0);
        gbc.writeMem(0x54fc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc317);
        EXPECT(gbc.pc(), 0x54fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00B9
        gbc.setState(0xb01b, 0x32dd, 0xde70, 0xaf9a, 0x1a31, 0x86cb, 0x1, 0x0);
        gbc.writeMem(0xb01b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x32dd);
        EXPECT(gbc.pc(), 0xb01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01b), 0xcb);
        EXPECT(gbc.readMem(0xb01c), 0x3a);
        // CB 3A 00BA
        gbc.setState(0x8e09, 0xebb2, 0x1310, 0xa9bb, 0x17b, 0x9afd, 0x1, 0x0);
        gbc.writeMem(0x8e09, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xebb2);
        EXPECT(gbc.pc(), 0x8e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e09), 0xcb);
        EXPECT(gbc.readMem(0x8e0a), 0x3a);
        // CB 3A 00BB
        gbc.setState(0x96e4, 0xe3d5, 0x8910, 0xe993, 0xb9c6, 0x84ef, 0x0, 0x1);
        gbc.writeMem(0x96e4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe3d5);
        EXPECT(gbc.pc(), 0x96e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96e4), 0xcb);
        EXPECT(gbc.readMem(0x96e5), 0x3a);
        // CB 3A 00BD
        gbc.setState(0x75aa, 0x1aee, 0xf720, 0xa34, 0x37c4, 0xaf07, 0x1, 0x0);
        gbc.writeMem(0x75aa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1aee);
        EXPECT(gbc.pc(), 0x75ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00BE
        gbc.setState(0xb535, 0xf216, 0x2b80, 0x45b, 0x6717, 0x64b3, 0x0, 0x0);
        gbc.writeMem(0xb535, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf216);
        EXPECT(gbc.pc(), 0xb537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb535), 0xcb);
        EXPECT(gbc.readMem(0xb536), 0x3a);
        // CB 3A 00BF
        gbc.setState(0xa1b, 0xebc7, 0x660, 0xdca3, 0x4ff, 0x50b8, 0x0, 0x0);
        gbc.writeMem(0xa1b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xebc7);
        EXPECT(gbc.pc(), 0xa1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00C0
        gbc.setState(0xb44c, 0xbec3, 0x500, 0xd524, 0x39b2, 0x3b4a, 0x1, 0x1);
        gbc.writeMem(0xb44c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbec3);
        EXPECT(gbc.pc(), 0xb44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44c), 0xcb);
        EXPECT(gbc.readMem(0xb44d), 0x3a);
        // CB 3A 00C1
        gbc.setState(0x7ef6, 0xa3e7, 0x5fb0, 0x47f0, 0x16f3, 0x94bb, 0x1, 0x0);
        gbc.writeMem(0x7ef6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa3e7);
        EXPECT(gbc.pc(), 0x7ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00C2
        gbc.setState(0xe0cd, 0x4182, 0xce40, 0x1f16, 0x2bab, 0x6142, 0x0, 0x0);
        gbc.writeMem(0xe0cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4182);
        EXPECT(gbc.pc(), 0xe0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0cd), 0xcb);
        EXPECT(gbc.readMem(0xe0ce), 0x3a);
        // CB 3A 00C3
        gbc.setState(0x9aa6, 0xe7ff, 0x3ef0, 0x38a5, 0xe368, 0xbecd, 0x0, 0x0);
        gbc.writeMem(0x9aa6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe7ff);
        EXPECT(gbc.pc(), 0x9aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa6), 0xcb);
        EXPECT(gbc.readMem(0x9aa7), 0x3a);
        // CB 3A 00C4
        gbc.setState(0xc5d2, 0x6bdb, 0x9620, 0x14b4, 0x3510, 0xbb9d, 0x0, 0x0);
        gbc.writeMem(0xc5d2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6bdb);
        EXPECT(gbc.pc(), 0xc5d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d2), 0xcb);
        EXPECT(gbc.readMem(0xc5d3), 0x3a);
        // CB 3A 00C5
        gbc.setState(0x8268, 0x14a5, 0xc280, 0xa1d9, 0xa1ae, 0xe286, 0x0, 0x1);
        gbc.writeMem(0x8268, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x14a5);
        EXPECT(gbc.pc(), 0x826a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8268), 0xcb);
        EXPECT(gbc.readMem(0x8269), 0x3a);
        // CB 3A 00C7
        gbc.setState(0xc038, 0xf98c, 0x1bc0, 0xfe6c, 0x3aac, 0x7add, 0x1, 0x0);
        gbc.writeMem(0xc038, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf98c);
        EXPECT(gbc.pc(), 0xc03a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc038), 0xcb);
        EXPECT(gbc.readMem(0xc039), 0x3a);
        // CB 3A 00C8
        gbc.setState(0xd96d, 0x2c7f, 0x9e10, 0xa711, 0x1cf2, 0xa03d, 0x1, 0x0);
        gbc.writeMem(0xd96d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2c7f);
        EXPECT(gbc.pc(), 0xd96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96d), 0xcb);
        EXPECT(gbc.readMem(0xd96e), 0x3a);
        // CB 3A 00C9
        gbc.setState(0x2bf8, 0xea44, 0xacd0, 0xb4d9, 0xb978, 0x8278, 0x0, 0x1);
        gbc.writeMem(0x2bf8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xea44);
        EXPECT(gbc.pc(), 0x2bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00CA
        gbc.setState(0x136d, 0xd9e8, 0x14c0, 0x946a, 0xe604, 0x8993, 0x0, 0x0);
        gbc.writeMem(0x136d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd9e8);
        EXPECT(gbc.pc(), 0x136f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00CB
        gbc.setState(0x5495, 0x369b, 0xc4d0, 0x568c, 0x70c1, 0xaeb0, 0x1, 0x1);
        gbc.writeMem(0x5495, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x369b);
        EXPECT(gbc.pc(), 0x5497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00CC
        gbc.setState(0x4097, 0x3619, 0x8d70, 0xfbc8, 0xf005, 0x577f, 0x1, 0x0);
        gbc.writeMem(0x4097, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3619);
        EXPECT(gbc.pc(), 0x4099);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00CD
        gbc.setState(0xa3aa, 0x1e4a, 0x3390, 0xc6b4, 0x104, 0xb1ea, 0x0, 0x1);
        gbc.writeMem(0xa3aa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1e4a);
        EXPECT(gbc.pc(), 0xa3ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3aa), 0xcb);
        EXPECT(gbc.readMem(0xa3ab), 0x3a);
        // CB 3A 00CE
        gbc.setState(0x50cd, 0xff79, 0x8960, 0x1a26, 0x3d61, 0xc88, 0x0, 0x1);
        gbc.writeMem(0x50cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xff79);
        EXPECT(gbc.pc(), 0x50cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00CF
        gbc.setState(0xc6c, 0x4cc9, 0xed0, 0x89f8, 0x663, 0x6249, 0x1, 0x1);
        gbc.writeMem(0xc6c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4cc9);
        EXPECT(gbc.pc(), 0xc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00D0
        gbc.setState(0x3481, 0xe4f6, 0x60c0, 0x494a, 0x4c1e, 0xd9d8, 0x0, 0x0);
        gbc.writeMem(0x3481, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe4f6);
        EXPECT(gbc.pc(), 0x3483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00D1
        gbc.setState(0x1ca5, 0xde27, 0x2d60, 0x8e75, 0x2687, 0x8357, 0x1, 0x1);
        gbc.writeMem(0x1ca5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xde27);
        EXPECT(gbc.pc(), 0x1ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00D2
        gbc.setState(0x5c2d, 0xac3, 0x5af0, 0x6694, 0x10ea, 0x42a6, 0x0, 0x0);
        gbc.writeMem(0x5c2d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xac3);
        EXPECT(gbc.pc(), 0x5c2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00D3
        gbc.setState(0xe810, 0x79c2, 0xc9d0, 0xb853, 0x8d22, 0xfbee, 0x1, 0x1);
        gbc.writeMem(0xe810, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x79c2);
        EXPECT(gbc.pc(), 0xe812);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe810), 0xcb);
        EXPECT(gbc.readMem(0xe811), 0x3a);
        // CB 3A 00D4
        gbc.setState(0x3302, 0x99ef, 0x4450, 0x68a2, 0x99bd, 0x5d4e, 0x0, 0x0);
        gbc.writeMem(0x3302, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x99ef);
        EXPECT(gbc.pc(), 0x3304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00D5
        gbc.setState(0x6ac8, 0xe4cf, 0xe690, 0x344c, 0xbcb6, 0x6ef1, 0x0, 0x1);
        gbc.writeMem(0x6ac8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe4cf);
        EXPECT(gbc.pc(), 0x6aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00D6
        gbc.setState(0xe6bd, 0x70e8, 0x1f70, 0x8d3a, 0x5e22, 0x217c, 0x1, 0x0);
        gbc.writeMem(0xe6bd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x70e8);
        EXPECT(gbc.pc(), 0xe6bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bd), 0xcb);
        EXPECT(gbc.readMem(0xe6be), 0x3a);
        // CB 3A 00D7
        gbc.setState(0xa93f, 0xf350, 0xec80, 0x7d95, 0xe52c, 0x19c0, 0x1, 0x0);
        gbc.writeMem(0xa93f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf350);
        EXPECT(gbc.pc(), 0xa941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93f), 0xcb);
        EXPECT(gbc.readMem(0xa940), 0x3a);
        // CB 3A 00D8
        gbc.setState(0x7ef7, 0x8d47, 0x36d0, 0x7d37, 0xed00, 0x631c, 0x1, 0x1);
        gbc.writeMem(0x7ef7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8d47);
        EXPECT(gbc.pc(), 0x7ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00D9
        gbc.setState(0x1715, 0x321d, 0x20c0, 0x374e, 0x3636, 0xc9c1, 0x1, 0x0);
        gbc.writeMem(0x1715, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x321d);
        EXPECT(gbc.pc(), 0x1717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00DA
        gbc.setState(0x5950, 0x9b8c, 0x6750, 0x5de8, 0x64e9, 0x3719, 0x0, 0x1);
        gbc.writeMem(0x5950, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9b8c);
        EXPECT(gbc.pc(), 0x5952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00DB
        gbc.setState(0x9bec, 0xb132, 0xef0, 0xfcc5, 0x6060, 0xfc73, 0x0, 0x1);
        gbc.writeMem(0x9bec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb132);
        EXPECT(gbc.pc(), 0x9bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bec), 0xcb);
        EXPECT(gbc.readMem(0x9bed), 0x3a);
        // CB 3A 00DC
        gbc.setState(0x62ea, 0xedeb, 0x4660, 0xaab9, 0x2c5d, 0x7acf, 0x0, 0x0);
        gbc.writeMem(0x62ea, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xedeb);
        EXPECT(gbc.pc(), 0x62ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00DD
        gbc.setState(0x9dc4, 0xee89, 0x60c0, 0xc3bf, 0x5e6b, 0xcc02, 0x1, 0x1);
        gbc.writeMem(0x9dc4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xee89);
        EXPECT(gbc.pc(), 0x9dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc4), 0xcb);
        EXPECT(gbc.readMem(0x9dc5), 0x3a);
        // CB 3A 00DE
        gbc.setState(0x5a63, 0xa1e8, 0x6990, 0xeffa, 0x69d5, 0x9f25, 0x0, 0x1);
        gbc.writeMem(0x5a63, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa1e8);
        EXPECT(gbc.pc(), 0x5a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00DF
        gbc.setState(0xea8e, 0x289c, 0x7a80, 0xc691, 0xbf97, 0x31e3, 0x1, 0x0);
        gbc.writeMem(0xea8e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x289c);
        EXPECT(gbc.pc(), 0xea90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8e), 0xcb);
        EXPECT(gbc.readMem(0xea8f), 0x3a);
        // CB 3A 00E0
        gbc.setState(0x2521, 0xe921, 0xe2b0, 0x51a8, 0xf9c2, 0xc2fc, 0x0, 0x1);
        gbc.writeMem(0x2521, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe921);
        EXPECT(gbc.pc(), 0x2523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00E1
        gbc.setState(0x839a, 0x199f, 0x8420, 0x9649, 0xa05, 0x262, 0x1, 0x1);
        gbc.writeMem(0x839a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x199f);
        EXPECT(gbc.pc(), 0x839c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839a), 0xcb);
        EXPECT(gbc.readMem(0x839b), 0x3a);
        // CB 3A 00E2
        gbc.setState(0x3c97, 0x1506, 0x8f80, 0xb332, 0xe1f7, 0xe778, 0x1, 0x0);
        gbc.writeMem(0x3c97, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1506);
        EXPECT(gbc.pc(), 0x3c99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00E3
        gbc.setState(0x73b5, 0x3fee, 0x8c70, 0x25a0, 0x2443, 0xdc08, 0x1, 0x0);
        gbc.writeMem(0x73b5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3fee);
        EXPECT(gbc.pc(), 0x73b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00E4
        gbc.setState(0x73d0, 0xbce2, 0xae70, 0x5b92, 0xc5fa, 0x8968, 0x1, 0x1);
        gbc.writeMem(0x73d0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbce2);
        EXPECT(gbc.pc(), 0x73d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00E5
        gbc.setState(0x95de, 0x3bab, 0x8d90, 0x7b6, 0x5f9f, 0x98d5, 0x1, 0x1);
        gbc.writeMem(0x95de, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3bab);
        EXPECT(gbc.pc(), 0x95e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95de), 0xcb);
        EXPECT(gbc.readMem(0x95df), 0x3a);
        // CB 3A 00E6
        gbc.setState(0x71da, 0x1ced, 0x9f0, 0xc020, 0xed51, 0x2537, 0x1, 0x0);
        gbc.writeMem(0x71da, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1ced);
        EXPECT(gbc.pc(), 0x71dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00E7
        gbc.setState(0xb6e1, 0xfe25, 0xac70, 0x5b75, 0x4e5b, 0xe8df, 0x0, 0x0);
        gbc.writeMem(0xb6e1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfe25);
        EXPECT(gbc.pc(), 0xb6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e1), 0xcb);
        EXPECT(gbc.readMem(0xb6e2), 0x3a);
        // CB 3A 00E8
        gbc.setState(0xa00e, 0x318c, 0x20e0, 0x3cfb, 0xa744, 0x17dc, 0x0, 0x1);
        gbc.writeMem(0xa00e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x318c);
        EXPECT(gbc.pc(), 0xa010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa00e), 0xcb);
        EXPECT(gbc.readMem(0xa00f), 0x3a);
        // CB 3A 00E9
        gbc.setState(0xcbb5, 0xd7ac, 0x6f0, 0x51de, 0x1cb3, 0x6185, 0x0, 0x0);
        gbc.writeMem(0xcbb5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd7ac);
        EXPECT(gbc.pc(), 0xcbb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb5), 0xcb);
        EXPECT(gbc.readMem(0xcbb6), 0x3a);
        // CB 3A 00EA
        gbc.setState(0x5023, 0xb73d, 0x7240, 0x339e, 0x436e, 0x12d2, 0x1, 0x0);
        gbc.writeMem(0x5023, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb73d);
        EXPECT(gbc.pc(), 0x5025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00EB
        gbc.setState(0x2fef, 0xfe18, 0x8be0, 0x8391, 0xd15f, 0x2e29, 0x1, 0x1);
        gbc.writeMem(0x2fef, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfe18);
        EXPECT(gbc.pc(), 0x2ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00EC
        gbc.setState(0x2156, 0x1917, 0x5d50, 0x871, 0x2067, 0x3569, 0x0, 0x1);
        gbc.writeMem(0x2156, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1917);
        EXPECT(gbc.pc(), 0x2158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00ED
        gbc.setState(0xa570, 0xd78, 0x45e0, 0xebb2, 0x8929, 0x606f, 0x0, 0x0);
        gbc.writeMem(0xa570, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd78);
        EXPECT(gbc.pc(), 0xa572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa570), 0xcb);
        EXPECT(gbc.readMem(0xa571), 0x3a);
        // CB 3A 00EE
        gbc.setState(0x5fdd, 0xd050, 0x38d0, 0x335c, 0x3983, 0x97ea, 0x1, 0x0);
        gbc.writeMem(0x5fdd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd050);
        EXPECT(gbc.pc(), 0x5fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00EF
        gbc.setState(0xccec, 0xa9ca, 0x73e0, 0xa6f6, 0xea7a, 0x2087, 0x0, 0x0);
        gbc.writeMem(0xccec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa9ca);
        EXPECT(gbc.pc(), 0xccee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccec), 0xcb);
        EXPECT(gbc.readMem(0xcced), 0x3a);
        // CB 3A 00F0
        gbc.setState(0x5d18, 0xaa90, 0xb400, 0xa8c6, 0x77e, 0x24f1, 0x1, 0x0);
        gbc.writeMem(0x5d18, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xaa90);
        EXPECT(gbc.pc(), 0x5d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00F1
        gbc.setState(0xcaa3, 0xfe3a, 0x17f0, 0x14d9, 0x1c7d, 0x97cf, 0x1, 0x0);
        gbc.writeMem(0xcaa3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfe3a);
        EXPECT(gbc.pc(), 0xcaa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa3), 0xcb);
        EXPECT(gbc.readMem(0xcaa4), 0x3a);
        // CB 3A 00F2
        gbc.setState(0x4391, 0x33e2, 0xd750, 0xcc43, 0x719f, 0xaf2f, 0x0, 0x1);
        gbc.writeMem(0x4391, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x33e2);
        EXPECT(gbc.pc(), 0x4393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00F3
        gbc.setState(0xa621, 0x939, 0x4ae0, 0xf693, 0x8471, 0x3cf8, 0x0, 0x0);
        gbc.writeMem(0xa621, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x939);
        EXPECT(gbc.pc(), 0xa623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa621), 0xcb);
        EXPECT(gbc.readMem(0xa622), 0x3a);
        // CB 3A 00F4
        gbc.setState(0x579c, 0x2d5e, 0x1170, 0x9275, 0x6711, 0x55c3, 0x0, 0x1);
        gbc.writeMem(0x579c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2d5e);
        EXPECT(gbc.pc(), 0x579e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00F5
        gbc.setState(0x146c, 0x3c47, 0xe580, 0xdb1e, 0x23ec, 0x43d, 0x1, 0x1);
        gbc.writeMem(0x146c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3c47);
        EXPECT(gbc.pc(), 0x146e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00F6
        gbc.setState(0x9ba2, 0x6329, 0x9bd0, 0x8db5, 0x4ea3, 0x940, 0x0, 0x0);
        gbc.writeMem(0x9ba2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6329);
        EXPECT(gbc.pc(), 0x9ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba2), 0xcb);
        EXPECT(gbc.readMem(0x9ba3), 0x3a);
        // CB 3A 00F7
        gbc.setState(0x9876, 0x5676, 0xc4a0, 0xf8df, 0xba54, 0xd3c3, 0x1, 0x0);
        gbc.writeMem(0x9876, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5676);
        EXPECT(gbc.pc(), 0x9878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9876), 0xcb);
        EXPECT(gbc.readMem(0x9877), 0x3a);
        // CB 3A 00F8
        gbc.setState(0x2286, 0x9cd7, 0xfdc0, 0xd22, 0xd523, 0x5f52, 0x1, 0x1);
        gbc.writeMem(0x2286, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9cd7);
        EXPECT(gbc.pc(), 0x2288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00F9
        gbc.setState(0x734c, 0x722f, 0x9830, 0xb194, 0x23a4, 0x565b, 0x0, 0x0);
        gbc.writeMem(0x734c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x722f);
        EXPECT(gbc.pc(), 0x734e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00FA
        gbc.setState(0xba67, 0xd6c, 0x4c0, 0x7dae, 0x72fb, 0xbe62, 0x1, 0x1);
        gbc.writeMem(0xba67, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd6c);
        EXPECT(gbc.pc(), 0xba69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba67), 0xcb);
        EXPECT(gbc.readMem(0xba68), 0x3a);
        // CB 3A 00FB
        gbc.setState(0x3af8, 0xdec3, 0x6780, 0xdb51, 0x64d9, 0x3d36, 0x1, 0x1);
        gbc.writeMem(0x3af8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xdec3);
        EXPECT(gbc.pc(), 0x3afa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 00FC
        gbc.setState(0xb3df, 0x124a, 0x84f0, 0x249d, 0xe58a, 0x88fb, 0x0, 0x1);
        gbc.writeMem(0xb3df, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x124a);
        EXPECT(gbc.pc(), 0xb3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3df), 0xcb);
        EXPECT(gbc.readMem(0xb3e0), 0x3a);
        // CB 3A 00FD
        gbc.setState(0xc22c, 0xd767, 0x5770, 0xffe2, 0x9871, 0x7d93, 0x1, 0x1);
        gbc.writeMem(0xc22c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd767);
        EXPECT(gbc.pc(), 0xc22e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc22c), 0xcb);
        EXPECT(gbc.readMem(0xc22d), 0x3a);
        // CB 3A 00FE
        gbc.setState(0x394e, 0x263b, 0x9180, 0xa805, 0x8f8a, 0x4b8, 0x1, 0x1);
        gbc.writeMem(0x394e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x263b);
        EXPECT(gbc.pc(), 0x3950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 00FF
        gbc.setState(0x14b, 0x8519, 0xaf10, 0xd751, 0x9b8, 0xb9dd, 0x0, 0x0);
        gbc.writeMem(0x14b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8519);
        EXPECT(gbc.pc(), 0x14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0100
        gbc.setState(0x7768, 0xf7dc, 0x45c0, 0xb820, 0x8fe7, 0x3043, 0x0, 0x0);
        gbc.writeMem(0x7768, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf7dc);
        EXPECT(gbc.pc(), 0x776a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0101
        gbc.setState(0x357c, 0x98e0, 0x1110, 0xe97e, 0x1e4c, 0x7a9b, 0x1, 0x0);
        gbc.writeMem(0x357c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x98e0);
        EXPECT(gbc.pc(), 0x357e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0103
        gbc.setState(0x509d, 0x6fb2, 0x5fc0, 0xa55, 0xf5e6, 0x67b4, 0x1, 0x1);
        gbc.writeMem(0x509d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6fb2);
        EXPECT(gbc.pc(), 0x509f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0104
        gbc.setState(0x5df, 0x299a, 0x6400, 0x4c7d, 0x3db6, 0xb30c, 0x1, 0x0);
        gbc.writeMem(0x5df, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x299a);
        EXPECT(gbc.pc(), 0x5e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0105
        gbc.setState(0x85de, 0xf1b5, 0xfcf0, 0x643c, 0x2b85, 0x50b5, 0x0, 0x0);
        gbc.writeMem(0x85de, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf1b5);
        EXPECT(gbc.pc(), 0x85e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85de), 0xcb);
        EXPECT(gbc.readMem(0x85df), 0x3a);
        // CB 3A 0106
        gbc.setState(0xd5ae, 0x5aad, 0x6f90, 0x220, 0x3b3d, 0x6cc4, 0x0, 0x0);
        gbc.writeMem(0xd5ae, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5aad);
        EXPECT(gbc.pc(), 0xd5b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ae), 0xcb);
        EXPECT(gbc.readMem(0xd5af), 0x3a);
        // CB 3A 0107
        gbc.setState(0xcf79, 0x112d, 0x2660, 0x27e0, 0xf11d, 0x38fd, 0x1, 0x1);
        gbc.writeMem(0xcf79, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x112d);
        EXPECT(gbc.pc(), 0xcf7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf79), 0xcb);
        EXPECT(gbc.readMem(0xcf7a), 0x3a);
        // CB 3A 0108
        gbc.setState(0x311b, 0x3e49, 0xd600, 0x1b91, 0xf125, 0x1c04, 0x0, 0x1);
        gbc.writeMem(0x311b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3e49);
        EXPECT(gbc.pc(), 0x311d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0109
        gbc.setState(0xda3f, 0x5dba, 0x23a0, 0xff95, 0x5171, 0xc221, 0x0, 0x0);
        gbc.writeMem(0xda3f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5dba);
        EXPECT(gbc.pc(), 0xda41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3f), 0xcb);
        EXPECT(gbc.readMem(0xda40), 0x3a);
        // CB 3A 010B
        gbc.setState(0xdeb4, 0xdeb7, 0x6270, 0xb128, 0x79ae, 0xa723, 0x1, 0x0);
        gbc.writeMem(0xdeb4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdeb7);
        EXPECT(gbc.pc(), 0xdeb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb4), 0xcb);
        EXPECT(gbc.readMem(0xdeb5), 0x3a);
        // CB 3A 010C
        gbc.setState(0x5860, 0xe7ef, 0x32b0, 0x49d3, 0xb0af, 0xee68, 0x1, 0x0);
        gbc.writeMem(0x5860, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe7ef);
        EXPECT(gbc.pc(), 0x5862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 010D
        gbc.setState(0x293a, 0xf02d, 0xfd30, 0x53e4, 0x8cef, 0xdbcb, 0x1, 0x1);
        gbc.writeMem(0x293a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf02d);
        EXPECT(gbc.pc(), 0x293c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 010E
        gbc.setState(0x6baa, 0x2d7, 0x53e0, 0xa0f9, 0x5b12, 0xc1d, 0x1, 0x1);
        gbc.writeMem(0x6baa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2d7);
        EXPECT(gbc.pc(), 0x6bac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 010F
        gbc.setState(0xa14b, 0xe4f2, 0xbf70, 0x5202, 0x59ba, 0x30f1, 0x1, 0x1);
        gbc.writeMem(0xa14b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe4f2);
        EXPECT(gbc.pc(), 0xa14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa14b), 0xcb);
        EXPECT(gbc.readMem(0xa14c), 0x3a);
        // CB 3A 0110
        gbc.setState(0x507d, 0x6cd7, 0xc490, 0x89dc, 0xeb6b, 0xb1a6, 0x1, 0x1);
        gbc.writeMem(0x507d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6cd7);
        EXPECT(gbc.pc(), 0x507f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0111
        gbc.setState(0x638, 0xddc2, 0x4480, 0x4f55, 0x33d, 0xd52, 0x0, 0x1);
        gbc.writeMem(0x638, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xddc2);
        EXPECT(gbc.pc(), 0x63a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0113
        gbc.setState(0xc5f7, 0x9f65, 0xb790, 0xab0f, 0xe2f6, 0xac82, 0x1, 0x1);
        gbc.writeMem(0xc5f7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9f65);
        EXPECT(gbc.pc(), 0xc5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5f7), 0xcb);
        EXPECT(gbc.readMem(0xc5f8), 0x3a);
        // CB 3A 0114
        gbc.setState(0xe12, 0x2cc9, 0xcf20, 0x7181, 0x717a, 0x59ea, 0x1, 0x1);
        gbc.writeMem(0xe12, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2cc9);
        EXPECT(gbc.pc(), 0xe14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0115
        gbc.setState(0x72eb, 0x7ab9, 0x39d0, 0x55d2, 0xe051, 0x3984, 0x0, 0x1);
        gbc.writeMem(0x72eb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7ab9);
        EXPECT(gbc.pc(), 0x72ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0116
        gbc.setState(0x48a2, 0x8567, 0x65e0, 0x55a5, 0xc32f, 0x385d, 0x1, 0x1);
        gbc.writeMem(0x48a2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8567);
        EXPECT(gbc.pc(), 0x48a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0117
        gbc.setState(0x1dd, 0x5cf0, 0xfb70, 0x8a30, 0x5215, 0xd83, 0x0, 0x0);
        gbc.writeMem(0x1dd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5cf0);
        EXPECT(gbc.pc(), 0x1df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0118
        gbc.setState(0xc7b2, 0x561, 0xc0f0, 0x2ee6, 0xcea6, 0xf5b, 0x0, 0x0);
        gbc.writeMem(0xc7b2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x561);
        EXPECT(gbc.pc(), 0xc7b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b2), 0xcb);
        EXPECT(gbc.readMem(0xc7b3), 0x3a);
        // CB 3A 0119
        gbc.setState(0x51ab, 0xf90f, 0x2490, 0xc631, 0x31d9, 0xad47, 0x1, 0x1);
        gbc.writeMem(0x51ab, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf90f);
        EXPECT(gbc.pc(), 0x51ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 011B
        gbc.setState(0x5c7e, 0x981b, 0x8650, 0xa011, 0xfa15, 0x4a6f, 0x1, 0x0);
        gbc.writeMem(0x5c7e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x981b);
        EXPECT(gbc.pc(), 0x5c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 011C
        gbc.setState(0x130a, 0x270c, 0x7810, 0xf7ad, 0x11ab, 0x6e31, 0x0, 0x0);
        gbc.writeMem(0x130a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x270c);
        EXPECT(gbc.pc(), 0x130c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 011D
        gbc.setState(0x10a7, 0xd73d, 0xad80, 0xb6e5, 0xf7d7, 0x30b2, 0x0, 0x1);
        gbc.writeMem(0x10a7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd73d);
        EXPECT(gbc.pc(), 0x10a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 011E
        gbc.setState(0x2b7f, 0xf54d, 0x2c70, 0x2470, 0x99cf, 0x3f9a, 0x0, 0x1);
        gbc.writeMem(0x2b7f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf54d);
        EXPECT(gbc.pc(), 0x2b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 011F
        gbc.setState(0x4599, 0x657e, 0xb3d0, 0xe5c6, 0xb066, 0x9516, 0x1, 0x0);
        gbc.writeMem(0x4599, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x657e);
        EXPECT(gbc.pc(), 0x459b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0120
        gbc.setState(0x74b4, 0x58a2, 0x40f0, 0xf62a, 0x7d4e, 0x9ee0, 0x0, 0x1);
        gbc.writeMem(0x74b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x58a2);
        EXPECT(gbc.pc(), 0x74b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0121
        gbc.setState(0x3527, 0xec24, 0x6b00, 0xc879, 0x23c0, 0xa297, 0x1, 0x0);
        gbc.writeMem(0x3527, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xec24);
        EXPECT(gbc.pc(), 0x3529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0122
        gbc.setState(0x2744, 0x6b81, 0x7120, 0xca91, 0x6e86, 0xf0d8, 0x1, 0x1);
        gbc.writeMem(0x2744, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6b81);
        EXPECT(gbc.pc(), 0x2746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0123
        gbc.setState(0xa1ae, 0x9491, 0x99b0, 0x66be, 0xeed6, 0xa699, 0x0, 0x1);
        gbc.writeMem(0xa1ae, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9491);
        EXPECT(gbc.pc(), 0xa1b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ae), 0xcb);
        EXPECT(gbc.readMem(0xa1af), 0x3a);
        // CB 3A 0124
        gbc.setState(0x7859, 0x65a0, 0x3d60, 0x2ed7, 0x9310, 0x9068, 0x1, 0x1);
        gbc.writeMem(0x7859, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x65a0);
        EXPECT(gbc.pc(), 0x785b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0125
        gbc.setState(0x662e, 0xb9b6, 0x6240, 0x3f65, 0x1d95, 0x26a7, 0x0, 0x1);
        gbc.writeMem(0x662e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb9b6);
        EXPECT(gbc.pc(), 0x6630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0126
        gbc.setState(0xef18, 0x8a43, 0x3970, 0x2e93, 0x8a15, 0x2333, 0x1, 0x0);
        gbc.writeMem(0xef18, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8a43);
        EXPECT(gbc.pc(), 0xef1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef18), 0xcb);
        EXPECT(gbc.readMem(0xef19), 0x3a);
        // CB 3A 0127
        gbc.setState(0x5d27, 0xbda9, 0xa0, 0x9be7, 0x1fbe, 0x8a8e, 0x1, 0x1);
        gbc.writeMem(0x5d27, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbda9);
        EXPECT(gbc.pc(), 0x5d29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0128
        gbc.setState(0x2401, 0x7935, 0x80a0, 0x9a04, 0xe854, 0x99ab, 0x0, 0x1);
        gbc.writeMem(0x2401, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7935);
        EXPECT(gbc.pc(), 0x2403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0129
        gbc.setState(0x9a46, 0x64e1, 0x8930, 0xacd1, 0x2ca1, 0xbe83, 0x1, 0x1);
        gbc.writeMem(0x9a46, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x64e1);
        EXPECT(gbc.pc(), 0x9a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a46), 0xcb);
        EXPECT(gbc.readMem(0x9a47), 0x3a);
        // CB 3A 012A
        gbc.setState(0x4570, 0x43df, 0x2ee0, 0x8e1f, 0xceda, 0x63d4, 0x1, 0x0);
        gbc.writeMem(0x4570, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x43df);
        EXPECT(gbc.pc(), 0x4572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 012B
        gbc.setState(0x6f65, 0xe53, 0x2a10, 0xa91c, 0x5079, 0x8a53, 0x0, 0x0);
        gbc.writeMem(0x6f65, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe53);
        EXPECT(gbc.pc(), 0x6f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 012C
        gbc.setState(0x753b, 0xe71f, 0x3140, 0x2963, 0xa5c2, 0x8254, 0x0, 0x1);
        gbc.writeMem(0x753b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe71f);
        EXPECT(gbc.pc(), 0x753d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 012D
        gbc.setState(0xa751, 0xc173, 0xb770, 0x8001, 0xf431, 0xb18e, 0x0, 0x1);
        gbc.writeMem(0xa751, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc173);
        EXPECT(gbc.pc(), 0xa753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa751), 0xcb);
        EXPECT(gbc.readMem(0xa752), 0x3a);
        // CB 3A 012E
        gbc.setState(0x5514, 0xa615, 0xe940, 0xd8d7, 0x50da, 0x2fbb, 0x0, 0x1);
        gbc.writeMem(0x5514, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa615);
        EXPECT(gbc.pc(), 0x5516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 012F
        gbc.setState(0x30f4, 0x5c8, 0xc5b0, 0x7974, 0xa1f4, 0x325c, 0x0, 0x0);
        gbc.writeMem(0x30f4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5c8);
        EXPECT(gbc.pc(), 0x30f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0130
        gbc.setState(0xe5a1, 0x1d6c, 0x7e80, 0x8f93, 0xb2fb, 0x72d6, 0x0, 0x1);
        gbc.writeMem(0xe5a1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1d6c);
        EXPECT(gbc.pc(), 0xe5a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a1), 0xcb);
        EXPECT(gbc.readMem(0xe5a2), 0x3a);
        // CB 3A 0131
        gbc.setState(0x584e, 0x2c0d, 0xb110, 0xc851, 0xd609, 0x6ce6, 0x1, 0x1);
        gbc.writeMem(0x584e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2c0d);
        EXPECT(gbc.pc(), 0x5850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0132
        gbc.setState(0x1456, 0x963b, 0xac10, 0x7372, 0x2de3, 0x60db, 0x0, 0x1);
        gbc.writeMem(0x1456, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x963b);
        EXPECT(gbc.pc(), 0x1458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0133
        gbc.setState(0xdf0f, 0x853, 0x3e60, 0xd05, 0x176b, 0xa5bb, 0x0, 0x0);
        gbc.writeMem(0xdf0f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x853);
        EXPECT(gbc.pc(), 0xdf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf0f), 0xcb);
        EXPECT(gbc.readMem(0xdf10), 0x3a);
        // CB 3A 0134
        gbc.setState(0x9690, 0x90f9, 0x15e0, 0x5a3b, 0x17c5, 0x82e2, 0x0, 0x1);
        gbc.writeMem(0x9690, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x90f9);
        EXPECT(gbc.pc(), 0x9692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9690), 0xcb);
        EXPECT(gbc.readMem(0x9691), 0x3a);
        // CB 3A 0135
        gbc.setState(0x141c, 0x975e, 0xa750, 0xa08f, 0x9bfb, 0x12ed, 0x0, 0x1);
        gbc.writeMem(0x141c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x975e);
        EXPECT(gbc.pc(), 0x141e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0136
        gbc.setState(0xcba3, 0x7f57, 0x3d60, 0xc480, 0xa962, 0x27a6, 0x1, 0x1);
        gbc.writeMem(0xcba3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7f57);
        EXPECT(gbc.pc(), 0xcba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba3), 0xcb);
        EXPECT(gbc.readMem(0xcba4), 0x3a);
        // CB 3A 0137
        gbc.setState(0xcf9e, 0xee06, 0x9e30, 0x6de1, 0xe6e3, 0x7405, 0x1, 0x0);
        gbc.writeMem(0xcf9e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xee06);
        EXPECT(gbc.pc(), 0xcfa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf9e), 0xcb);
        EXPECT(gbc.readMem(0xcf9f), 0x3a);
        // CB 3A 0138
        gbc.setState(0xbe2d, 0x4d5, 0x1150, 0x6f11, 0x2cff, 0xa1c7, 0x1, 0x1);
        gbc.writeMem(0xbe2d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4d5);
        EXPECT(gbc.pc(), 0xbe2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2d), 0xcb);
        EXPECT(gbc.readMem(0xbe2e), 0x3a);
        // CB 3A 0139
        gbc.setState(0x4426, 0x9b55, 0x3840, 0xc82a, 0x3fba, 0xab15, 0x0, 0x0);
        gbc.writeMem(0x4426, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9b55);
        EXPECT(gbc.pc(), 0x4428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 013A
        gbc.setState(0x78c9, 0x9ce0, 0xd1a0, 0x712d, 0x499a, 0xa95e, 0x1, 0x0);
        gbc.writeMem(0x78c9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9ce0);
        EXPECT(gbc.pc(), 0x78cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 013B
        gbc.setState(0x874a, 0xe378, 0xad80, 0x4502, 0x1516, 0xe747, 0x1, 0x1);
        gbc.writeMem(0x874a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe378);
        EXPECT(gbc.pc(), 0x874c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874a), 0xcb);
        EXPECT(gbc.readMem(0x874b), 0x3a);
        // CB 3A 013C
        gbc.setState(0x457, 0xd8b6, 0x9a00, 0x8689, 0xe6cf, 0x50c2, 0x0, 0x1);
        gbc.writeMem(0x457, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd8b6);
        EXPECT(gbc.pc(), 0x459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 013D
        gbc.setState(0x723d, 0x2495, 0xf250, 0x6d6f, 0x734c, 0x1f56, 0x0, 0x1);
        gbc.writeMem(0x723d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2495);
        EXPECT(gbc.pc(), 0x723f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 013E
        gbc.setState(0x5aba, 0xcbc0, 0xae60, 0xa6da, 0xcfe3, 0x2c61, 0x0, 0x0);
        gbc.writeMem(0x5aba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xcbc0);
        EXPECT(gbc.pc(), 0x5abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0140
        gbc.setState(0x664, 0x3dea, 0xce90, 0x270a, 0x7019, 0x3a8a, 0x1, 0x0);
        gbc.writeMem(0x664, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3dea);
        EXPECT(gbc.pc(), 0x666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0141
        gbc.setState(0xa2c9, 0x2818, 0x4460, 0xa434, 0x5e34, 0x9ff5, 0x1, 0x0);
        gbc.writeMem(0xa2c9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2818);
        EXPECT(gbc.pc(), 0xa2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c9), 0xcb);
        EXPECT(gbc.readMem(0xa2ca), 0x3a);
        // CB 3A 0142
        gbc.setState(0x9d12, 0x45df, 0xfd10, 0x4000, 0x8bd9, 0xe391, 0x1, 0x0);
        gbc.writeMem(0x9d12, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x45df);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d12), 0xcb);
        EXPECT(gbc.readMem(0x9d13), 0x3a);
        // CB 3A 0143
        gbc.setState(0x51e4, 0xe158, 0x3090, 0x5f5d, 0xe658, 0x834a, 0x0, 0x1);
        gbc.writeMem(0x51e4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe158);
        EXPECT(gbc.pc(), 0x51e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0144
        gbc.setState(0x6f2b, 0xc6b0, 0xb070, 0x86db, 0xb9e3, 0xd8d8, 0x0, 0x0);
        gbc.writeMem(0x6f2b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc6b0);
        EXPECT(gbc.pc(), 0x6f2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0145
        gbc.setState(0x9b08, 0xa2af, 0xe790, 0xae7c, 0x3e33, 0xdf5, 0x1, 0x1);
        gbc.writeMem(0x9b08, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa2af);
        EXPECT(gbc.pc(), 0x9b0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b08), 0xcb);
        EXPECT(gbc.readMem(0x9b09), 0x3a);
        // CB 3A 0146
        gbc.setState(0xeb15, 0xe06b, 0xcb30, 0x2ab6, 0x362b, 0x6367, 0x1, 0x0);
        gbc.writeMem(0xeb15, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe06b);
        EXPECT(gbc.pc(), 0xeb17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb15), 0xcb);
        EXPECT(gbc.readMem(0xeb16), 0x3a);
        // CB 3A 0147
        gbc.setState(0xdaf, 0xbb31, 0xa530, 0x8a04, 0x2567, 0xc898, 0x0, 0x0);
        gbc.writeMem(0xdaf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xbb31);
        EXPECT(gbc.pc(), 0xdb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0148
        gbc.setState(0xecdd, 0xa6d7, 0x5520, 0x3342, 0x147c, 0x3e2c, 0x1, 0x0);
        gbc.writeMem(0xecdd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa6d7);
        EXPECT(gbc.pc(), 0xecdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdd), 0xcb);
        EXPECT(gbc.readMem(0xecde), 0x3a);
        // CB 3A 0149
        gbc.setState(0x5eb5, 0x9eb7, 0x1a20, 0x2b8a, 0xcd48, 0xf7d8, 0x0, 0x1);
        gbc.writeMem(0x5eb5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9eb7);
        EXPECT(gbc.pc(), 0x5eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 014A
        gbc.setState(0x8f3f, 0xe78a, 0x15d0, 0x5c5b, 0xd78, 0xf22b, 0x1, 0x0);
        gbc.writeMem(0x8f3f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe78a);
        EXPECT(gbc.pc(), 0x8f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f3f), 0xcb);
        EXPECT(gbc.readMem(0x8f40), 0x3a);
        // CB 3A 014C
        gbc.setState(0x4c5e, 0x22b6, 0x20e0, 0xf690, 0xbffc, 0xe918, 0x0, 0x1);
        gbc.writeMem(0x4c5e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x22b6);
        EXPECT(gbc.pc(), 0x4c60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 014D
        gbc.setState(0xaaa, 0x9406, 0x7590, 0xd733, 0xcb3, 0xe974, 0x0, 0x1);
        gbc.writeMem(0xaaa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9406);
        EXPECT(gbc.pc(), 0xaac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 014E
        gbc.setState(0x5821, 0xc4be, 0xacc0, 0xb3cd, 0x2190, 0x51ef, 0x1, 0x0);
        gbc.writeMem(0x5821, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc4be);
        EXPECT(gbc.pc(), 0x5823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0150
        gbc.setState(0x126d, 0x93c6, 0x3c80, 0x66d4, 0xb6d7, 0xf88e, 0x0, 0x0);
        gbc.writeMem(0x126d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x93c6);
        EXPECT(gbc.pc(), 0x126f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0151
        gbc.setState(0x2057, 0x4665, 0xa670, 0x9cb0, 0xc2db, 0x9add, 0x0, 0x0);
        gbc.writeMem(0x2057, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4665);
        EXPECT(gbc.pc(), 0x2059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0152
        gbc.setState(0x54e8, 0x90b2, 0xd780, 0x7d8e, 0xe8c8, 0xd85c, 0x0, 0x0);
        gbc.writeMem(0x54e8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x90b2);
        EXPECT(gbc.pc(), 0x54ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0153
        gbc.setState(0xe164, 0x9307, 0x48c0, 0x2986, 0x329f, 0xade6, 0x0, 0x1);
        gbc.writeMem(0xe164, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9307);
        EXPECT(gbc.pc(), 0xe166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe164), 0xcb);
        EXPECT(gbc.readMem(0xe165), 0x3a);
        // CB 3A 0154
        gbc.setState(0x7356, 0xfb35, 0xd630, 0x39dd, 0xd129, 0x1bf8, 0x1, 0x0);
        gbc.writeMem(0x7356, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xfb35);
        EXPECT(gbc.pc(), 0x7358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0155
        gbc.setState(0x7648, 0x58c8, 0xddf0, 0xbc99, 0xa808, 0x83eb, 0x0, 0x1);
        gbc.writeMem(0x7648, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x58c8);
        EXPECT(gbc.pc(), 0x764a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0156
        gbc.setState(0x417c, 0xeba0, 0xb9f0, 0xa8bd, 0xe6d9, 0x135b, 0x0, 0x0);
        gbc.writeMem(0x417c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xeba0);
        EXPECT(gbc.pc(), 0x417e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0157
        gbc.setState(0x4007, 0x9448, 0x9990, 0x706, 0xc2f3, 0x4ee8, 0x1, 0x1);
        gbc.writeMem(0x4007, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9448);
        EXPECT(gbc.pc(), 0x4009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0158
        gbc.setState(0x7f61, 0x7375, 0x85b0, 0xf3eb, 0x8797, 0x9234, 0x0, 0x0);
        gbc.writeMem(0x7f61, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7375);
        EXPECT(gbc.pc(), 0x7f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0159
        gbc.setState(0xda94, 0xc05a, 0x7c00, 0x1a61, 0xd226, 0x1538, 0x1, 0x0);
        gbc.writeMem(0xda94, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc05a);
        EXPECT(gbc.pc(), 0xda96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda94), 0xcb);
        EXPECT(gbc.readMem(0xda95), 0x3a);
        // CB 3A 015A
        gbc.setState(0x235a, 0xf239, 0x8400, 0x9341, 0x3d7f, 0x800, 0x0, 0x1);
        gbc.writeMem(0x235a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf239);
        EXPECT(gbc.pc(), 0x235c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 015B
        gbc.setState(0x5bc5, 0xe4b6, 0x5a50, 0x70d6, 0xb558, 0x5419, 0x0, 0x1);
        gbc.writeMem(0x5bc5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe4b6);
        EXPECT(gbc.pc(), 0x5bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 015C
        gbc.setState(0x72f9, 0x1e1, 0x7400, 0x4a4c, 0x9d4e, 0xe865, 0x1, 0x1);
        gbc.writeMem(0x72f9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1e1);
        EXPECT(gbc.pc(), 0x72fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 015D
        gbc.setState(0x404, 0x1946, 0xc940, 0x5ef0, 0x7690, 0x8eb6, 0x0, 0x0);
        gbc.writeMem(0x404, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1946);
        EXPECT(gbc.pc(), 0x406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 015E
        gbc.setState(0x69a1, 0x9878, 0x2c90, 0x1761, 0x642, 0x5dc6, 0x0, 0x1);
        gbc.writeMem(0x69a1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9878);
        EXPECT(gbc.pc(), 0x69a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 015F
        gbc.setState(0x6dc0, 0xa7f2, 0x4820, 0xbbed, 0xc9d9, 0x43da, 0x1, 0x0);
        gbc.writeMem(0x6dc0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa7f2);
        EXPECT(gbc.pc(), 0x6dc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0160
        gbc.setState(0xd099, 0x96bb, 0x8e30, 0xec60, 0xf83b, 0xb2d3, 0x1, 0x0);
        gbc.writeMem(0xd099, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x96bb);
        EXPECT(gbc.pc(), 0xd09b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd099), 0xcb);
        EXPECT(gbc.readMem(0xd09a), 0x3a);
        // CB 3A 0161
        gbc.setState(0x6bf5, 0xc49c, 0x6050, 0x9704, 0x9ff5, 0xb20f, 0x1, 0x1);
        gbc.writeMem(0x6bf5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc49c);
        EXPECT(gbc.pc(), 0x6bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0162
        gbc.setState(0x55ef, 0x54c6, 0x1450, 0xfb68, 0xad91, 0x2680, 0x1, 0x1);
        gbc.writeMem(0x55ef, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x54c6);
        EXPECT(gbc.pc(), 0x55f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0163
        gbc.setState(0xd32e, 0x4719, 0xd350, 0xed3f, 0x6c93, 0x39d9, 0x0, 0x1);
        gbc.writeMem(0xd32e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4719);
        EXPECT(gbc.pc(), 0xd330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32e), 0xcb);
        EXPECT(gbc.readMem(0xd32f), 0x3a);
        // CB 3A 0164
        gbc.setState(0xe22, 0x9e56, 0x25f0, 0xb8, 0x721d, 0x4a71, 0x0, 0x1);
        gbc.writeMem(0xe22, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9e56);
        EXPECT(gbc.pc(), 0xe24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0165
        gbc.setState(0xe7f, 0xb9d8, 0xfd50, 0x80b4, 0x73c0, 0xba4e, 0x0, 0x1);
        gbc.writeMem(0xe7f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb9d8);
        EXPECT(gbc.pc(), 0xe81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0166
        gbc.setState(0x2f7e, 0xf478, 0xcbb0, 0x6c8a, 0x7e97, 0x4db5, 0x1, 0x0);
        gbc.writeMem(0x2f7e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf478);
        EXPECT(gbc.pc(), 0x2f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0167
        gbc.setState(0xd2a1, 0xe147, 0x3e40, 0xaeef, 0xdcc7, 0x31d7, 0x1, 0x0);
        gbc.writeMem(0xd2a1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe147);
        EXPECT(gbc.pc(), 0xd2a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a1), 0xcb);
        EXPECT(gbc.readMem(0xd2a2), 0x3a);
        // CB 3A 0168
        gbc.setState(0x990e, 0xd951, 0xc9c0, 0xbff8, 0xe90, 0xf475, 0x0, 0x1);
        gbc.writeMem(0x990e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd951);
        EXPECT(gbc.pc(), 0x9910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990e), 0xcb);
        EXPECT(gbc.readMem(0x990f), 0x3a);
        // CB 3A 0169
        gbc.setState(0x17e3, 0x764e, 0x2d00, 0x5f1b, 0x3b4a, 0xe54, 0x0, 0x1);
        gbc.writeMem(0x17e3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x764e);
        EXPECT(gbc.pc(), 0x17e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 016A
        gbc.setState(0x841c, 0x128c, 0xc280, 0x1bbe, 0x8e77, 0xb690, 0x1, 0x1);
        gbc.writeMem(0x841c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x128c);
        EXPECT(gbc.pc(), 0x841e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x841c), 0xcb);
        EXPECT(gbc.readMem(0x841d), 0x3a);
        // CB 3A 016B
        gbc.setState(0x9b0a, 0x8ba, 0x2b50, 0x76ff, 0x24c8, 0x81d4, 0x0, 0x1);
        gbc.writeMem(0x9b0a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8ba);
        EXPECT(gbc.pc(), 0x9b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b0a), 0xcb);
        EXPECT(gbc.readMem(0x9b0b), 0x3a);
        // CB 3A 016C
        gbc.setState(0xa0dd, 0x9455, 0x6f20, 0x2357, 0x4651, 0xa7be, 0x1, 0x1);
        gbc.writeMem(0xa0dd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9455);
        EXPECT(gbc.pc(), 0xa0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0dd), 0xcb);
        EXPECT(gbc.readMem(0xa0de), 0x3a);
        // CB 3A 016D
        gbc.setState(0x1c24, 0x3d83, 0xae50, 0x5969, 0xf9b2, 0xeeef, 0x1, 0x0);
        gbc.writeMem(0x1c24, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3d83);
        EXPECT(gbc.pc(), 0x1c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 016E
        gbc.setState(0x7867, 0xdb16, 0xbe60, 0x4a2, 0xb4ff, 0xb10b, 0x0, 0x1);
        gbc.writeMem(0x7867, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdb16);
        EXPECT(gbc.pc(), 0x7869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 016F
        gbc.setState(0x371b, 0xb3f0, 0x5720, 0xf5c4, 0xa491, 0x4994, 0x0, 0x1);
        gbc.writeMem(0x371b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb3f0);
        EXPECT(gbc.pc(), 0x371d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0170
        gbc.setState(0x8ea, 0xd231, 0x7140, 0x1ea9, 0x285, 0x1fe8, 0x1, 0x0);
        gbc.writeMem(0x8ea, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd231);
        EXPECT(gbc.pc(), 0x8ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0171
        gbc.setState(0x6e88, 0x4aac, 0x5df0, 0x8ea6, 0x8fbd, 0x891a, 0x1, 0x0);
        gbc.writeMem(0x6e88, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4aac);
        EXPECT(gbc.pc(), 0x6e8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0172
        gbc.setState(0xbd5f, 0xaf32, 0x19a0, 0xd2c4, 0xed06, 0xbe88, 0x1, 0x1);
        gbc.writeMem(0xbd5f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xaf32);
        EXPECT(gbc.pc(), 0xbd61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd5f), 0xcb);
        EXPECT(gbc.readMem(0xbd60), 0x3a);
        // CB 3A 0173
        gbc.setState(0x5aff, 0x8bd7, 0x7800, 0x8965, 0xf643, 0x53d, 0x1, 0x1);
        gbc.writeMem(0x5aff, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8bd7);
        EXPECT(gbc.pc(), 0x5b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0174
        gbc.setState(0xed22, 0xa2fe, 0x3760, 0xcbc, 0x8144, 0x902d, 0x0, 0x1);
        gbc.writeMem(0xed22, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa2fe);
        EXPECT(gbc.pc(), 0xed24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed22), 0xcb);
        EXPECT(gbc.readMem(0xed23), 0x3a);
        // CB 3A 0175
        gbc.setState(0xbb5f, 0xf81c, 0x6aa0, 0x5f05, 0xea4a, 0x7170, 0x0, 0x0);
        gbc.writeMem(0xbb5f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf81c);
        EXPECT(gbc.pc(), 0xbb61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb5f), 0xcb);
        EXPECT(gbc.readMem(0xbb60), 0x3a);
        // CB 3A 0176
        gbc.setState(0x422f, 0x66a3, 0xc130, 0xaac6, 0xbb8c, 0xc611, 0x0, 0x0);
        gbc.writeMem(0x422f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x66a3);
        EXPECT(gbc.pc(), 0x4231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0177
        gbc.setState(0x35cd, 0x5251, 0x2d70, 0x1afc, 0x5bfa, 0x9e3f, 0x1, 0x0);
        gbc.writeMem(0x35cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5251);
        EXPECT(gbc.pc(), 0x35cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0179
        gbc.setState(0xee6d, 0xa931, 0x36c0, 0x55df, 0x3ba8, 0xa29, 0x1, 0x0);
        gbc.writeMem(0xee6d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa931);
        EXPECT(gbc.pc(), 0xee6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee6d), 0xcb);
        EXPECT(gbc.readMem(0xee6e), 0x3a);
        // CB 3A 017A
        gbc.setState(0xa43f, 0xbd78, 0xbf10, 0x3bd9, 0x579e, 0xcde0, 0x1, 0x1);
        gbc.writeMem(0xa43f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbd78);
        EXPECT(gbc.pc(), 0xa441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43f), 0xcb);
        EXPECT(gbc.readMem(0xa440), 0x3a);
        // CB 3A 017B
        gbc.setState(0x86ed, 0xd50c, 0x9700, 0xb426, 0x51dd, 0x2194, 0x0, 0x1);
        gbc.writeMem(0x86ed, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd50c);
        EXPECT(gbc.pc(), 0x86ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ed), 0xcb);
        EXPECT(gbc.readMem(0x86ee), 0x3a);
        // CB 3A 017C
        gbc.setState(0x88b5, 0x73dd, 0x7620, 0xef30, 0xee3d, 0x7afe, 0x1, 0x1);
        gbc.writeMem(0x88b5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x73dd);
        EXPECT(gbc.pc(), 0x88b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b5), 0xcb);
        EXPECT(gbc.readMem(0x88b6), 0x3a);
        // CB 3A 017D
        gbc.setState(0x1460, 0x6cea, 0x49a0, 0x6286, 0x6f82, 0x7b38, 0x0, 0x0);
        gbc.writeMem(0x1460, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6cea);
        EXPECT(gbc.pc(), 0x1462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 017E
        gbc.setState(0x23cc, 0xb06a, 0x4b30, 0x36fc, 0xce99, 0x5d4e, 0x1, 0x1);
        gbc.writeMem(0x23cc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb06a);
        EXPECT(gbc.pc(), 0x23ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 017F
        gbc.setState(0x6600, 0xcb23, 0x5d10, 0x1bd0, 0xbc6d, 0x8d0a, 0x1, 0x1);
        gbc.writeMem(0x6600, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcb23);
        EXPECT(gbc.pc(), 0x6602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0180
        gbc.setState(0x63b4, 0x2ab8, 0x3f50, 0x7e65, 0xb12a, 0x1311, 0x0, 0x0);
        gbc.writeMem(0x63b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2ab8);
        EXPECT(gbc.pc(), 0x63b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0181
        gbc.setState(0xc5c0, 0xf532, 0x48c0, 0x7baf, 0xd845, 0x97ec, 0x1, 0x1);
        gbc.writeMem(0xc5c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0xc5c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c0), 0xcb);
        EXPECT(gbc.readMem(0xc5c1), 0x3a);
        // CB 3A 0182
        gbc.setState(0x95eb, 0xdbf6, 0x7120, 0x4ee6, 0xc977, 0x7542, 0x0, 0x1);
        gbc.writeMem(0x95eb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdbf6);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95eb), 0xcb);
        EXPECT(gbc.readMem(0x95ec), 0x3a);
        // CB 3A 0183
        gbc.setState(0x18cc, 0x7513, 0x33c0, 0x7af4, 0x61e7, 0xcd99, 0x1, 0x1);
        gbc.writeMem(0x18cc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7513);
        EXPECT(gbc.pc(), 0x18ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0184
        gbc.setState(0x643d, 0x36d9, 0x5240, 0x22d8, 0x5c5b, 0x93b5, 0x0, 0x0);
        gbc.writeMem(0x643d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x36d9);
        EXPECT(gbc.pc(), 0x643f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0185
        gbc.setState(0xb16a, 0x8d23, 0x7a50, 0x10d4, 0xce71, 0xc66f, 0x1, 0x0);
        gbc.writeMem(0xb16a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8d23);
        EXPECT(gbc.pc(), 0xb16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb16a), 0xcb);
        EXPECT(gbc.readMem(0xb16b), 0x3a);
        // CB 3A 0186
        gbc.setState(0x9ace, 0x46c9, 0x24b0, 0x306d, 0x9dd9, 0xee35, 0x0, 0x0);
        gbc.writeMem(0x9ace, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x46c9);
        EXPECT(gbc.pc(), 0x9ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ace), 0xcb);
        EXPECT(gbc.readMem(0x9acf), 0x3a);
        // CB 3A 0187
        gbc.setState(0xe704, 0x7a4d, 0xda20, 0xa5a5, 0xc424, 0xe26, 0x0, 0x0);
        gbc.writeMem(0xe704, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7a4d);
        EXPECT(gbc.pc(), 0xe706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe704), 0xcb);
        EXPECT(gbc.readMem(0xe705), 0x3a);
        // CB 3A 0188
        gbc.setState(0xafd, 0x4f9c, 0xafd0, 0x7d64, 0x9b3, 0x81eb, 0x1, 0x1);
        gbc.writeMem(0xafd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4f9c);
        EXPECT(gbc.pc(), 0xaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0189
        gbc.setState(0xc021, 0x7d95, 0xbee0, 0xe2be, 0xbd4d, 0x58d2, 0x1, 0x0);
        gbc.writeMem(0xc021, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7d95);
        EXPECT(gbc.pc(), 0xc023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc021), 0xcb);
        EXPECT(gbc.readMem(0xc022), 0x3a);
        // CB 3A 018A
        gbc.setState(0x196f, 0x2fea, 0x63e0, 0xdb25, 0x4da4, 0xbf5a, 0x1, 0x1);
        gbc.writeMem(0x196f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2fea);
        EXPECT(gbc.pc(), 0x1971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 018B
        gbc.setState(0xa8d0, 0x4a83, 0xdf0, 0x3920, 0x84a8, 0xd8a1, 0x1, 0x0);
        gbc.writeMem(0xa8d0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4a83);
        EXPECT(gbc.pc(), 0xa8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d0), 0xcb);
        EXPECT(gbc.readMem(0xa8d1), 0x3a);
        // CB 3A 018C
        gbc.setState(0x6644, 0xc5c, 0xd090, 0xb42a, 0x30cd, 0xe8e2, 0x0, 0x1);
        gbc.writeMem(0x6644, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc5c);
        EXPECT(gbc.pc(), 0x6646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 018D
        gbc.setState(0x1fec, 0xfdec, 0x9d10, 0xa42c, 0x2d39, 0x918a, 0x0, 0x1);
        gbc.writeMem(0x1fec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfdec);
        EXPECT(gbc.pc(), 0x1fee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 018E
        gbc.setState(0x7966, 0x9d54, 0x21c0, 0x73d3, 0x96da, 0xdc27, 0x1, 0x1);
        gbc.writeMem(0x7966, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9d54);
        EXPECT(gbc.pc(), 0x7968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 018F
        gbc.setState(0x25d6, 0x4440, 0x7060, 0x1682, 0x89d6, 0x9c76, 0x0, 0x0);
        gbc.writeMem(0x25d6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4440);
        EXPECT(gbc.pc(), 0x25d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0190
        gbc.setState(0xa71, 0xda64, 0xc0, 0x66a4, 0xc296, 0x4670, 0x0, 0x1);
        gbc.writeMem(0xa71, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xda64);
        EXPECT(gbc.pc(), 0xa73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0191
        gbc.setState(0x9c62, 0x913f, 0xe50, 0x8192, 0x22de, 0x2349, 0x1, 0x0);
        gbc.writeMem(0x9c62, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x913f);
        EXPECT(gbc.pc(), 0x9c64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c62), 0xcb);
        EXPECT(gbc.readMem(0x9c63), 0x3a);
        // CB 3A 0192
        gbc.setState(0x653f, 0x3651, 0x7750, 0xcce7, 0xaa8c, 0x1b06, 0x1, 0x1);
        gbc.writeMem(0x653f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3651);
        EXPECT(gbc.pc(), 0x6541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0193
        gbc.setState(0xa36a, 0x8b5f, 0xf1e0, 0x9473, 0x3c0a, 0x7fac, 0x0, 0x0);
        gbc.writeMem(0xa36a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8b5f);
        EXPECT(gbc.pc(), 0xa36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36a), 0xcb);
        EXPECT(gbc.readMem(0xa36b), 0x3a);
        // CB 3A 0194
        gbc.setState(0xa56, 0xbf3c, 0x2640, 0x38ef, 0xee19, 0xcba4, 0x1, 0x0);
        gbc.writeMem(0xa56, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbf3c);
        EXPECT(gbc.pc(), 0xa58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0195
        gbc.setState(0xe3fc, 0xf533, 0x1a60, 0xc9fd, 0x9b1b, 0xfe2d, 0x1, 0x0);
        gbc.writeMem(0xe3fc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf533);
        EXPECT(gbc.pc(), 0xe3fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3fc), 0xcb);
        EXPECT(gbc.readMem(0xe3fd), 0x3a);
        // CB 3A 0196
        gbc.setState(0x8d5a, 0x965b, 0xaf20, 0xa432, 0x1399, 0xd44e, 0x1, 0x0);
        gbc.writeMem(0x8d5a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x965b);
        EXPECT(gbc.pc(), 0x8d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5a), 0xcb);
        EXPECT(gbc.readMem(0x8d5b), 0x3a);
        // CB 3A 0197
        gbc.setState(0xd8df, 0x769, 0x65b0, 0xb52c, 0x5b76, 0x7452, 0x1, 0x1);
        gbc.writeMem(0xd8df, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x769);
        EXPECT(gbc.pc(), 0xd8e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8df), 0xcb);
        EXPECT(gbc.readMem(0xd8e0), 0x3a);
        // CB 3A 0198
        gbc.setState(0xeaf6, 0xdf0b, 0x4f70, 0x9dc3, 0xf578, 0x69bc, 0x1, 0x1);
        gbc.writeMem(0xeaf6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdf0b);
        EXPECT(gbc.pc(), 0xeaf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf6), 0xcb);
        EXPECT(gbc.readMem(0xeaf7), 0x3a);
        // CB 3A 0199
        gbc.setState(0x1f4a, 0xe755, 0xc10, 0x5f4e, 0x7b52, 0x613, 0x1, 0x0);
        gbc.writeMem(0x1f4a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe755);
        EXPECT(gbc.pc(), 0x1f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 019A
        gbc.setState(0x8724, 0x6b26, 0xc1d0, 0x8a5f, 0x2ebd, 0x292e, 0x0, 0x1);
        gbc.writeMem(0x8724, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6b26);
        EXPECT(gbc.pc(), 0x8726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8724), 0xcb);
        EXPECT(gbc.readMem(0x8725), 0x3a);
        // CB 3A 019B
        gbc.setState(0x31fb, 0x6443, 0x6690, 0xf966, 0x740e, 0x5018, 0x0, 0x1);
        gbc.writeMem(0x31fb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6443);
        EXPECT(gbc.pc(), 0x31fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 019C
        gbc.setState(0x61c8, 0x15a8, 0x9d30, 0xc039, 0x6735, 0x9e04, 0x1, 0x1);
        gbc.writeMem(0x61c8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x15a8);
        EXPECT(gbc.pc(), 0x61ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 019D
        gbc.setState(0xe8c8, 0x8220, 0x3520, 0xd17f, 0x4cfd, 0xf01e, 0x0, 0x0);
        gbc.writeMem(0xe8c8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x8220);
        EXPECT(gbc.pc(), 0xe8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c8), 0xcb);
        EXPECT(gbc.readMem(0xe8c9), 0x3a);
        // CB 3A 019F
        gbc.setState(0xb9b1, 0xf71b, 0xe870, 0xb359, 0x9d4a, 0x9e26, 0x1, 0x0);
        gbc.writeMem(0xb9b1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf71b);
        EXPECT(gbc.pc(), 0xb9b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b1), 0xcb);
        EXPECT(gbc.readMem(0xb9b2), 0x3a);
        // CB 3A 01A0
        gbc.setState(0x4808, 0x8e97, 0xebe0, 0x8aa9, 0xaef7, 0x4b37, 0x1, 0x0);
        gbc.writeMem(0x4808, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8e97);
        EXPECT(gbc.pc(), 0x480a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01A1
        gbc.setState(0xb9a6, 0x6f7e, 0x34e0, 0xfe9d, 0xc873, 0xf154, 0x0, 0x1);
        gbc.writeMem(0xb9a6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6f7e);
        EXPECT(gbc.pc(), 0xb9a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9a6), 0xcb);
        EXPECT(gbc.readMem(0xb9a7), 0x3a);
        // CB 3A 01A2
        gbc.setState(0xdbdb, 0x593a, 0xb170, 0xa3f7, 0x3664, 0xea8b, 0x1, 0x0);
        gbc.writeMem(0xdbdb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x593a);
        EXPECT(gbc.pc(), 0xdbdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbdb), 0xcb);
        EXPECT(gbc.readMem(0xdbdc), 0x3a);
        // CB 3A 01A3
        gbc.setState(0x2e92, 0x9bf3, 0xd680, 0x9566, 0x15a9, 0x2efb, 0x0, 0x0);
        gbc.writeMem(0x2e92, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9bf3);
        EXPECT(gbc.pc(), 0x2e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01A4
        gbc.setState(0x30d6, 0x2fe2, 0x7530, 0xa7e, 0x698c, 0xe2c7, 0x1, 0x1);
        gbc.writeMem(0x30d6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2fe2);
        EXPECT(gbc.pc(), 0x30d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01A5
        gbc.setState(0x9e6f, 0x351c, 0x200, 0x4e36, 0x361c, 0xbbcc, 0x0, 0x1);
        gbc.writeMem(0x9e6f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x351c);
        EXPECT(gbc.pc(), 0x9e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e6f), 0xcb);
        EXPECT(gbc.readMem(0x9e70), 0x3a);
        // CB 3A 01A6
        gbc.setState(0x5ed3, 0xe0f2, 0x5520, 0x3a0b, 0x1139, 0x8296, 0x0, 0x1);
        gbc.writeMem(0x5ed3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe0f2);
        EXPECT(gbc.pc(), 0x5ed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01A7
        gbc.setState(0xe89f, 0x50d2, 0x13a0, 0x936c, 0xcb57, 0x3312, 0x1, 0x1);
        gbc.writeMem(0xe89f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x50d2);
        EXPECT(gbc.pc(), 0xe8a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe89f), 0xcb);
        EXPECT(gbc.readMem(0xe8a0), 0x3a);
        // CB 3A 01A8
        gbc.setState(0x21cb, 0xc0be, 0x5850, 0xeeda, 0x4ce1, 0x1496, 0x1, 0x0);
        gbc.writeMem(0x21cb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc0be);
        EXPECT(gbc.pc(), 0x21cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01A9
        gbc.setState(0xaf76, 0xd8da, 0xc40, 0xe49d, 0x7102, 0x64bb, 0x0, 0x1);
        gbc.writeMem(0xaf76, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd8da);
        EXPECT(gbc.pc(), 0xaf78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf76), 0xcb);
        EXPECT(gbc.readMem(0xaf77), 0x3a);
        // CB 3A 01AA
        gbc.setState(0x22b2, 0xa0e7, 0x8b80, 0x1b3a, 0x9634, 0xb77a, 0x1, 0x1);
        gbc.writeMem(0x22b2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa0e7);
        EXPECT(gbc.pc(), 0x22b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01AB
        gbc.setState(0x9d51, 0x39a1, 0xef70, 0x76f7, 0x838c, 0x7361, 0x1, 0x1);
        gbc.writeMem(0x9d51, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x39a1);
        EXPECT(gbc.pc(), 0x9d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d51), 0xcb);
        EXPECT(gbc.readMem(0x9d52), 0x3a);
        // CB 3A 01AC
        gbc.setState(0x9899, 0x98fb, 0xcb40, 0x6e18, 0x48ba, 0x39b2, 0x0, 0x0);
        gbc.writeMem(0x9899, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x98fb);
        EXPECT(gbc.pc(), 0x989b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9899), 0xcb);
        EXPECT(gbc.readMem(0x989a), 0x3a);
        // CB 3A 01AD
        gbc.setState(0x5d5a, 0x354, 0xd9a0, 0xddf5, 0x619a, 0x7c76, 0x0, 0x0);
        gbc.writeMem(0x5d5a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x354);
        EXPECT(gbc.pc(), 0x5d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01AE
        gbc.setState(0x3662, 0xfb95, 0x98b0, 0xdf86, 0xbd2d, 0xe166, 0x1, 0x1);
        gbc.writeMem(0x3662, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xfb95);
        EXPECT(gbc.pc(), 0x3664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01AF
        gbc.setState(0x3a63, 0xadbf, 0x5750, 0xc575, 0x82b2, 0xe448, 0x0, 0x0);
        gbc.writeMem(0x3a63, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xadbf);
        EXPECT(gbc.pc(), 0x3a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01B0
        gbc.setState(0x236b, 0x88f8, 0x6f00, 0x67af, 0xc629, 0x6224, 0x1, 0x0);
        gbc.writeMem(0x236b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x88f8);
        EXPECT(gbc.pc(), 0x236d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01B1
        gbc.setState(0xb1ec, 0xe6d7, 0xe590, 0xb75b, 0x263e, 0xbd30, 0x1, 0x1);
        gbc.writeMem(0xb1ec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe6d7);
        EXPECT(gbc.pc(), 0xb1ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ec), 0xcb);
        EXPECT(gbc.readMem(0xb1ed), 0x3a);
        // CB 3A 01B2
        gbc.setState(0x186c, 0x5768, 0x9b00, 0x325f, 0x6df6, 0x251b, 0x1, 0x1);
        gbc.writeMem(0x186c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5768);
        EXPECT(gbc.pc(), 0x186e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01B3
        gbc.setState(0x697c, 0x7b2d, 0x6b70, 0x1066, 0x5e6a, 0xe545, 0x0, 0x1);
        gbc.writeMem(0x697c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7b2d);
        EXPECT(gbc.pc(), 0x697e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01B4
        gbc.setState(0x8b69, 0x812f, 0x99d0, 0x7162, 0x27f3, 0x621e, 0x1, 0x0);
        gbc.writeMem(0x8b69, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x812f);
        EXPECT(gbc.pc(), 0x8b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b69), 0xcb);
        EXPECT(gbc.readMem(0x8b6a), 0x3a);
        // CB 3A 01B6
        gbc.setState(0x9cb5, 0xc528, 0x91f0, 0xee00, 0x415b, 0xf4f1, 0x0, 0x1);
        gbc.writeMem(0x9cb5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc528);
        EXPECT(gbc.pc(), 0x9cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb5), 0xcb);
        EXPECT(gbc.readMem(0x9cb6), 0x3a);
        // CB 3A 01B7
        gbc.setState(0xc37c, 0xba97, 0xf140, 0x308e, 0x98ef, 0xafff, 0x1, 0x1);
        gbc.writeMem(0xc37c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xba97);
        EXPECT(gbc.pc(), 0xc37e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc37c), 0xcb);
        EXPECT(gbc.readMem(0xc37d), 0x3a);
        // CB 3A 01B8
        gbc.setState(0xf49, 0x7888, 0xa880, 0x15b, 0xef59, 0x6ae, 0x0, 0x0);
        gbc.writeMem(0xf49, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7888);
        EXPECT(gbc.pc(), 0xf4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01B9
        gbc.setState(0x4fe6, 0x957b, 0x8b60, 0x6393, 0x6c5f, 0xa187, 0x0, 0x0);
        gbc.writeMem(0x4fe6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x957b);
        EXPECT(gbc.pc(), 0x4fe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01BA
        gbc.setState(0x94c5, 0xa92b, 0xd850, 0x2fcd, 0x89a1, 0x4f01, 0x1, 0x1);
        gbc.writeMem(0x94c5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa92b);
        EXPECT(gbc.pc(), 0x94c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c5), 0xcb);
        EXPECT(gbc.readMem(0x94c6), 0x3a);
        // CB 3A 01BB
        gbc.setState(0x8642, 0x695f, 0x7590, 0x15e9, 0x4206, 0xedb0, 0x0, 0x1);
        gbc.writeMem(0x8642, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x695f);
        EXPECT(gbc.pc(), 0x8644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8642), 0xcb);
        EXPECT(gbc.readMem(0x8643), 0x3a);
        // CB 3A 01BC
        gbc.setState(0x98f1, 0xc451, 0x8b50, 0xd4cb, 0x7e57, 0xda94, 0x0, 0x1);
        gbc.writeMem(0x98f1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc451);
        EXPECT(gbc.pc(), 0x98f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f1), 0xcb);
        EXPECT(gbc.readMem(0x98f2), 0x3a);
        // CB 3A 01BE
        gbc.setState(0x5671, 0x899e, 0x2460, 0xe591, 0x551, 0xb915, 0x1, 0x0);
        gbc.writeMem(0x5671, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x899e);
        EXPECT(gbc.pc(), 0x5673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01BF
        gbc.setState(0x692b, 0x1786, 0x93a0, 0x9fe6, 0x8017, 0xeb27, 0x0, 0x0);
        gbc.writeMem(0x692b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1786);
        EXPECT(gbc.pc(), 0x692d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01C0
        gbc.setState(0x9660, 0xbf14, 0xbbe0, 0xe93e, 0x8fe5, 0x1676, 0x0, 0x0);
        gbc.writeMem(0x9660, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbf14);
        EXPECT(gbc.pc(), 0x9662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9660), 0xcb);
        EXPECT(gbc.readMem(0x9661), 0x3a);
        // CB 3A 01C1
        gbc.setState(0xd64f, 0x935, 0xdb60, 0xb6a0, 0x2827, 0x6c21, 0x0, 0x0);
        gbc.writeMem(0xd64f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x935);
        EXPECT(gbc.pc(), 0xd651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64f), 0xcb);
        EXPECT(gbc.readMem(0xd650), 0x3a);
        // CB 3A 01C2
        gbc.setState(0xd00d, 0x52ad, 0x7c10, 0xf57c, 0xbd69, 0xd90b, 0x1, 0x0);
        gbc.writeMem(0xd00d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x52ad);
        EXPECT(gbc.pc(), 0xd00f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd00d), 0xcb);
        EXPECT(gbc.readMem(0xd00e), 0x3a);
        // CB 3A 01C3
        gbc.setState(0x5d3e, 0x7b2, 0x7d90, 0xbad9, 0xecf8, 0x3929, 0x0, 0x0);
        gbc.writeMem(0x5d3e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7b2);
        EXPECT(gbc.pc(), 0x5d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01C4
        gbc.setState(0xbdf0, 0x4bf9, 0xc500, 0x39a8, 0xa8ab, 0xa37a, 0x0, 0x1);
        gbc.writeMem(0xbdf0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4bf9);
        EXPECT(gbc.pc(), 0xbdf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf0), 0xcb);
        EXPECT(gbc.readMem(0xbdf1), 0x3a);
        // CB 3A 01C5
        gbc.setState(0x85fb, 0x709, 0xe0f0, 0x413, 0xfe74, 0xe63c, 0x0, 0x0);
        gbc.writeMem(0x85fb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x709);
        EXPECT(gbc.pc(), 0x85fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85fb), 0xcb);
        EXPECT(gbc.readMem(0x85fc), 0x3a);
        // CB 3A 01C6
        gbc.setState(0xe4e3, 0x5a53, 0xa2d0, 0xa944, 0x4154, 0x92e9, 0x0, 0x0);
        gbc.writeMem(0xe4e3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5a53);
        EXPECT(gbc.pc(), 0xe4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e3), 0xcb);
        EXPECT(gbc.readMem(0xe4e4), 0x3a);
        // CB 3A 01C7
        gbc.setState(0xd6b8, 0x7fb2, 0x11f0, 0x8641, 0x2795, 0xd951, 0x0, 0x1);
        gbc.writeMem(0xd6b8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7fb2);
        EXPECT(gbc.pc(), 0xd6ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b8), 0xcb);
        EXPECT(gbc.readMem(0xd6b9), 0x3a);
        // CB 3A 01C8
        gbc.setState(0xa637, 0xcdff, 0x3fc0, 0x7dce, 0xfd45, 0xc335, 0x1, 0x0);
        gbc.writeMem(0xa637, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcdff);
        EXPECT(gbc.pc(), 0xa639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa637), 0xcb);
        EXPECT(gbc.readMem(0xa638), 0x3a);
        // CB 3A 01C9
        gbc.setState(0xec4, 0xb005, 0x2f10, 0xb470, 0xf81c, 0x6b21, 0x0, 0x0);
        gbc.writeMem(0xec4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb005);
        EXPECT(gbc.pc(), 0xec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01CA
        gbc.setState(0x198e, 0x2b82, 0x8fb0, 0x2b86, 0xccc6, 0x682c, 0x0, 0x1);
        gbc.writeMem(0x198e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2b82);
        EXPECT(gbc.pc(), 0x1990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01CB
        gbc.setState(0x752d, 0xde00, 0x4aa0, 0x2196, 0x6fdd, 0x5839, 0x0, 0x1);
        gbc.writeMem(0x752d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xde00);
        EXPECT(gbc.pc(), 0x752f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01CC
        gbc.setState(0xd1cc, 0xd6ba, 0x7700, 0xf4bd, 0x643b, 0x340b, 0x1, 0x0);
        gbc.writeMem(0xd1cc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd6ba);
        EXPECT(gbc.pc(), 0xd1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1cc), 0xcb);
        EXPECT(gbc.readMem(0xd1cd), 0x3a);
        // CB 3A 01CD
        gbc.setState(0x5199, 0x29fb, 0x1c50, 0x4b69, 0xeed4, 0x3304, 0x1, 0x0);
        gbc.writeMem(0x5199, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x29fb);
        EXPECT(gbc.pc(), 0x519b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01CE
        gbc.setState(0xc5a0, 0x21c0, 0x7d30, 0xff5a, 0x8bba, 0x5b3b, 0x0, 0x1);
        gbc.writeMem(0xc5a0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x21c0);
        EXPECT(gbc.pc(), 0xc5a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a0), 0xcb);
        EXPECT(gbc.readMem(0xc5a1), 0x3a);
        // CB 3A 01CF
        gbc.setState(0x9390, 0xa1ac, 0x8970, 0x3d57, 0x807c, 0xa403, 0x1, 0x1);
        gbc.writeMem(0x9390, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa1ac);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9390), 0xcb);
        EXPECT(gbc.readMem(0x9391), 0x3a);
        // CB 3A 01D0
        gbc.setState(0x5fd4, 0xbce8, 0x12e0, 0xf5f6, 0xcf1f, 0xb179, 0x1, 0x1);
        gbc.writeMem(0x5fd4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbce8);
        EXPECT(gbc.pc(), 0x5fd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01D1
        gbc.setState(0x693e, 0xf348, 0xcd80, 0xfd05, 0x5489, 0x927d, 0x1, 0x0);
        gbc.writeMem(0x693e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf348);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01D2
        gbc.setState(0x38c0, 0x6afa, 0x5f60, 0x71a4, 0x4417, 0x5a6a, 0x0, 0x1);
        gbc.writeMem(0x38c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6afa);
        EXPECT(gbc.pc(), 0x38c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01D3
        gbc.setState(0x125e, 0xf958, 0xaac0, 0x399, 0xb6ec, 0x1da3, 0x0, 0x0);
        gbc.writeMem(0x125e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf958);
        EXPECT(gbc.pc(), 0x1260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01D4
        gbc.setState(0xead6, 0x71c8, 0x7920, 0x5cb8, 0xa333, 0xec6a, 0x0, 0x0);
        gbc.writeMem(0xead6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x71c8);
        EXPECT(gbc.pc(), 0xead8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead6), 0xcb);
        EXPECT(gbc.readMem(0xead7), 0x3a);
        // CB 3A 01D5
        gbc.setState(0xe19e, 0xfba4, 0x66a0, 0x8cde, 0x39e7, 0x9eaf, 0x0, 0x1);
        gbc.writeMem(0xe19e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xfba4);
        EXPECT(gbc.pc(), 0xe1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe19e), 0xcb);
        EXPECT(gbc.readMem(0xe19f), 0x3a);
        // CB 3A 01D7
        gbc.setState(0xe33d, 0x2cdc, 0x2cd0, 0x3c80, 0x3ad6, 0xffe9, 0x0, 0x0);
        gbc.writeMem(0xe33d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2cdc);
        EXPECT(gbc.pc(), 0xe33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe33d), 0xcb);
        EXPECT(gbc.readMem(0xe33e), 0x3a);
        // CB 3A 01D8
        gbc.setState(0x7acf, 0xf564, 0x7af0, 0xae8f, 0x3926, 0x2bec, 0x0, 0x0);
        gbc.writeMem(0x7acf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf564);
        EXPECT(gbc.pc(), 0x7ad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01D9
        gbc.setState(0xa84f, 0x211a, 0x3c20, 0x53f4, 0x6efb, 0x1c38, 0x1, 0x0);
        gbc.writeMem(0xa84f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x211a);
        EXPECT(gbc.pc(), 0xa851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84f), 0xcb);
        EXPECT(gbc.readMem(0xa850), 0x3a);
        // CB 3A 01DA
        gbc.setState(0x7d57, 0xcb1d, 0xae30, 0xae1a, 0x361c, 0x476e, 0x1, 0x1);
        gbc.writeMem(0x7d57, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcb1d);
        EXPECT(gbc.pc(), 0x7d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01DB
        gbc.setState(0x7e5d, 0x9839, 0x6810, 0xc0f0, 0x9c79, 0x419f, 0x1, 0x0);
        gbc.writeMem(0x7e5d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9839);
        EXPECT(gbc.pc(), 0x7e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01DC
        gbc.setState(0xb9e5, 0x3b8b, 0xdba0, 0x9bd7, 0xe202, 0xa92d, 0x0, 0x1);
        gbc.writeMem(0xb9e5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3b8b);
        EXPECT(gbc.pc(), 0xb9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e5), 0xcb);
        EXPECT(gbc.readMem(0xb9e6), 0x3a);
        // CB 3A 01DE
        gbc.setState(0x9dbe, 0xc83b, 0xe270, 0x38f, 0xb143, 0xe50b, 0x1, 0x1);
        gbc.writeMem(0x9dbe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc83b);
        EXPECT(gbc.pc(), 0x9dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dbe), 0xcb);
        EXPECT(gbc.readMem(0x9dbf), 0x3a);
        // CB 3A 01DF
        gbc.setState(0xcb97, 0xf81d, 0x8810, 0x2038, 0xe53f, 0x3818, 0x0, 0x1);
        gbc.writeMem(0xcb97, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf81d);
        EXPECT(gbc.pc(), 0xcb99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb97), 0xcb);
        EXPECT(gbc.readMem(0xcb98), 0x3a);
        // CB 3A 01E0
        gbc.setState(0x9d36, 0x9104, 0x3e30, 0x2279, 0x69dc, 0x836a, 0x1, 0x1);
        gbc.writeMem(0x9d36, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9104);
        EXPECT(gbc.pc(), 0x9d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d36), 0xcb);
        EXPECT(gbc.readMem(0x9d37), 0x3a);
        // CB 3A 01E1
        gbc.setState(0x63f5, 0x82c4, 0x38a0, 0x7349, 0xdf4d, 0xb258, 0x0, 0x1);
        gbc.writeMem(0x63f5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x82c4);
        EXPECT(gbc.pc(), 0x63f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01E2
        gbc.setState(0x4773, 0x1ad3, 0xc010, 0x37d9, 0x8f63, 0xa768, 0x1, 0x1);
        gbc.writeMem(0x4773, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1ad3);
        EXPECT(gbc.pc(), 0x4775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01E3
        gbc.setState(0x157c, 0x2f69, 0xd3e0, 0x2b1f, 0x2269, 0x7988, 0x1, 0x1);
        gbc.writeMem(0x157c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2f69);
        EXPECT(gbc.pc(), 0x157e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01E4
        gbc.setState(0x8545, 0x7ff7, 0x98a0, 0xcb21, 0x10e4, 0x9387, 0x1, 0x0);
        gbc.writeMem(0x8545, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7ff7);
        EXPECT(gbc.pc(), 0x8547);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8545), 0xcb);
        EXPECT(gbc.readMem(0x8546), 0x3a);
        // CB 3A 01E5
        gbc.setState(0x5155, 0x2ee, 0x2b40, 0xf084, 0xb2f3, 0xa54d, 0x1, 0x0);
        gbc.writeMem(0x5155, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2ee);
        EXPECT(gbc.pc(), 0x5157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01E6
        gbc.setState(0xe554, 0x45e6, 0x6560, 0xe7f8, 0x38df, 0x7b4d, 0x1, 0x0);
        gbc.writeMem(0xe554, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x45e6);
        EXPECT(gbc.pc(), 0xe556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe554), 0xcb);
        EXPECT(gbc.readMem(0xe555), 0x3a);
        // CB 3A 01E7
        gbc.setState(0x908a, 0x1dd7, 0x6cf0, 0xe95f, 0x6b51, 0x7aa2, 0x1, 0x1);
        gbc.writeMem(0x908a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1dd7);
        EXPECT(gbc.pc(), 0x908c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x908a), 0xcb);
        EXPECT(gbc.readMem(0x908b), 0x3a);
        // CB 3A 01E8
        gbc.setState(0x4088, 0xedd2, 0xf160, 0x773e, 0xb020, 0xcb5b, 0x1, 0x1);
        gbc.writeMem(0x4088, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xedd2);
        EXPECT(gbc.pc(), 0x408a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01E9
        gbc.setState(0xd07c, 0x1d04, 0xe7d0, 0xe6c9, 0x8565, 0xde85, 0x1, 0x0);
        gbc.writeMem(0xd07c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1d04);
        EXPECT(gbc.pc(), 0xd07e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07c), 0xcb);
        EXPECT(gbc.readMem(0xd07d), 0x3a);
        // CB 3A 01EA
        gbc.setState(0x4b2e, 0x2d59, 0xd510, 0xdc57, 0x918, 0x996c, 0x0, 0x0);
        gbc.writeMem(0x4b2e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2d59);
        EXPECT(gbc.pc(), 0x4b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01EC
        gbc.setState(0x9c2b, 0xe693, 0x5320, 0xfc79, 0x51d9, 0xb88, 0x0, 0x1);
        gbc.writeMem(0x9c2b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe693);
        EXPECT(gbc.pc(), 0x9c2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2b), 0xcb);
        EXPECT(gbc.readMem(0x9c2c), 0x3a);
        // CB 3A 01ED
        gbc.setState(0x5603, 0xaf0f, 0xff80, 0x1da6, 0x66d6, 0xb59c, 0x0, 0x0);
        gbc.writeMem(0x5603, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0x5605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01EE
        gbc.setState(0x72e0, 0xc1b9, 0x1c20, 0x4f3a, 0xde3a, 0xf11a, 0x0, 0x0);
        gbc.writeMem(0x72e0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc1b9);
        EXPECT(gbc.pc(), 0x72e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01EF
        gbc.setState(0x8335, 0x552e, 0x8970, 0x7c8f, 0xfbd1, 0x3b53, 0x0, 0x1);
        gbc.writeMem(0x8335, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x552e);
        EXPECT(gbc.pc(), 0x8337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8335), 0xcb);
        EXPECT(gbc.readMem(0x8336), 0x3a);
        // CB 3A 01F0
        gbc.setState(0x66aa, 0xc241, 0xab0, 0x5b2b, 0x3695, 0xd974, 0x0, 0x1);
        gbc.writeMem(0x66aa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc241);
        EXPECT(gbc.pc(), 0x66ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01F1
        gbc.setState(0x836d, 0x94cc, 0x22b0, 0xcd5d, 0x82dd, 0xe8d7, 0x1, 0x1);
        gbc.writeMem(0x836d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x94cc);
        EXPECT(gbc.pc(), 0x836f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x836d), 0xcb);
        EXPECT(gbc.readMem(0x836e), 0x3a);
        // CB 3A 01F2
        gbc.setState(0xcf5a, 0x38f2, 0x4dc0, 0x2cd, 0x6d44, 0x74a8, 0x0, 0x0);
        gbc.writeMem(0xcf5a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x38f2);
        EXPECT(gbc.pc(), 0xcf5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5a), 0xcb);
        EXPECT(gbc.readMem(0xcf5b), 0x3a);
        // CB 3A 01F3
        gbc.setState(0x7d72, 0xb370, 0x3bf0, 0xb843, 0x28c1, 0xba13, 0x0, 0x0);
        gbc.writeMem(0x7d72, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb370);
        EXPECT(gbc.pc(), 0x7d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01F4
        gbc.setState(0x1f5f, 0xcb6c, 0x2ed0, 0xa979, 0x6669, 0xab9a, 0x0, 0x0);
        gbc.writeMem(0x1f5f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcb6c);
        EXPECT(gbc.pc(), 0x1f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01F5
        gbc.setState(0x38f2, 0xb93a, 0xe700, 0x5f8e, 0x66e2, 0xa78b, 0x0, 0x1);
        gbc.writeMem(0x38f2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb93a);
        EXPECT(gbc.pc(), 0x38f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01F6
        gbc.setState(0x4e18, 0x7eb0, 0x2ec0, 0x7220, 0x2342, 0x5b62, 0x0, 0x1);
        gbc.writeMem(0x4e18, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7eb0);
        EXPECT(gbc.pc(), 0x4e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01F7
        gbc.setState(0xdcc3, 0xa9e7, 0x4120, 0x66f1, 0xd0c3, 0xc587, 0x0, 0x0);
        gbc.writeMem(0xdcc3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa9e7);
        EXPECT(gbc.pc(), 0xdcc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc3), 0xcb);
        EXPECT(gbc.readMem(0xdcc4), 0x3a);
        // CB 3A 01F8
        gbc.setState(0xccd9, 0x57a7, 0xace0, 0x7292, 0x1ec9, 0xa689, 0x0, 0x1);
        gbc.writeMem(0xccd9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x57a7);
        EXPECT(gbc.pc(), 0xccdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd9), 0xcb);
        EXPECT(gbc.readMem(0xccda), 0x3a);
        // CB 3A 01F9
        gbc.setState(0xca8, 0xa156, 0xf120, 0xc875, 0xeb4a, 0x4233, 0x0, 0x1);
        gbc.writeMem(0xca8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa156);
        EXPECT(gbc.pc(), 0xcaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01FA
        gbc.setState(0x791e, 0x43a1, 0x3cd0, 0xb7c6, 0xffaa, 0xaa1a, 0x0, 0x1);
        gbc.writeMem(0x791e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x43a1);
        EXPECT(gbc.pc(), 0x7920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01FB
        gbc.setState(0x8b10, 0x949f, 0x1390, 0xce7f, 0x4629, 0x4ea3, 0x1, 0x1);
        gbc.writeMem(0x8b10, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x949f);
        EXPECT(gbc.pc(), 0x8b12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b10), 0xcb);
        EXPECT(gbc.readMem(0x8b11), 0x3a);
        // CB 3A 01FC
        gbc.setState(0x3a7e, 0x8d70, 0xe650, 0x16a7, 0x1919, 0x2c53, 0x0, 0x1);
        gbc.writeMem(0x3a7e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8d70);
        EXPECT(gbc.pc(), 0x3a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01FD
        gbc.setState(0x6e5d, 0xac1c, 0x43d0, 0xb4a8, 0x6e42, 0xa98d, 0x0, 0x1);
        gbc.writeMem(0x6e5d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xac1c);
        EXPECT(gbc.pc(), 0x6e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 01FE
        gbc.setState(0x6db3, 0x2edb, 0xc80, 0xdf8c, 0xa5dd, 0x61e5, 0x1, 0x0);
        gbc.writeMem(0x6db3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2edb);
        EXPECT(gbc.pc(), 0x6db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 01FF
        gbc.setState(0x8d9, 0xd87d, 0x9f60, 0x111e, 0xf4a3, 0x8015, 0x0, 0x1);
        gbc.writeMem(0x8d9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd87d);
        EXPECT(gbc.pc(), 0x8db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0200
        gbc.setState(0x579, 0x434c, 0xe840, 0x4a6e, 0xd3e7, 0x238c, 0x1, 0x1);
        gbc.writeMem(0x579, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x434c);
        EXPECT(gbc.pc(), 0x57b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0201
        gbc.setState(0xf6, 0x2a3a, 0x85e0, 0x791, 0x42b, 0x39b5, 0x0, 0x1);
        gbc.writeMem(0xf6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2a3a);
        EXPECT(gbc.pc(), 0xf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0202
        gbc.setState(0x1670, 0x505d, 0x15f0, 0x29e4, 0xa0cd, 0x602f, 0x1, 0x0);
        gbc.writeMem(0x1670, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x505d);
        EXPECT(gbc.pc(), 0x1672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0203
        gbc.setState(0x503e, 0xf40b, 0x1e10, 0x176b, 0x9b07, 0x2e6d, 0x0, 0x0);
        gbc.writeMem(0x503e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf40b);
        EXPECT(gbc.pc(), 0x5040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0204
        gbc.setState(0x4179, 0x3c92, 0x9d30, 0x9a47, 0x3e8a, 0xce25, 0x1, 0x0);
        gbc.writeMem(0x4179, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3c92);
        EXPECT(gbc.pc(), 0x417b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0205
        gbc.setState(0x8b68, 0x11ce, 0xc7c0, 0xb513, 0xbdd2, 0xc529, 0x1, 0x0);
        gbc.writeMem(0x8b68, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x11ce);
        EXPECT(gbc.pc(), 0x8b6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b68), 0xcb);
        EXPECT(gbc.readMem(0x8b69), 0x3a);
        // CB 3A 0206
        gbc.setState(0x5b35, 0xf2d2, 0xd2a0, 0x4f9f, 0xc010, 0x4bc5, 0x0, 0x0);
        gbc.writeMem(0x5b35, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf2d2);
        EXPECT(gbc.pc(), 0x5b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0207
        gbc.setState(0x9814, 0x6566, 0x2050, 0x1aa0, 0x97c4, 0xc102, 0x1, 0x0);
        gbc.writeMem(0x9814, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0x9816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9814), 0xcb);
        EXPECT(gbc.readMem(0x9815), 0x3a);
        // CB 3A 0208
        gbc.setState(0x2931, 0x6b53, 0xfb30, 0x7169, 0xf67f, 0x2300, 0x0, 0x1);
        gbc.writeMem(0x2931, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6b53);
        EXPECT(gbc.pc(), 0x2933);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 020A
        gbc.setState(0x59b5, 0x7e2, 0x80, 0xa07b, 0x4af0, 0x8aa8, 0x0, 0x1);
        gbc.writeMem(0x59b5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7e2);
        EXPECT(gbc.pc(), 0x59b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 020B
        gbc.setState(0x3f53, 0xa10e, 0x9ce0, 0x237c, 0x23fa, 0xc28b, 0x0, 0x0);
        gbc.writeMem(0x3f53, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa10e);
        EXPECT(gbc.pc(), 0x3f55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 020D
        gbc.setState(0x760b, 0x97b4, 0xf10, 0xafb3, 0xf252, 0x736e, 0x1, 0x1);
        gbc.writeMem(0x760b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x97b4);
        EXPECT(gbc.pc(), 0x760d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 020E
        gbc.setState(0x2b7f, 0x2006, 0x4c0, 0xf506, 0xc348, 0x5d57, 0x0, 0x1);
        gbc.writeMem(0x2b7f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2006);
        EXPECT(gbc.pc(), 0x2b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 020F
        gbc.setState(0x4f1b, 0x2585, 0xe240, 0x8791, 0x7edb, 0x67a2, 0x1, 0x0);
        gbc.writeMem(0x4f1b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2585);
        EXPECT(gbc.pc(), 0x4f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0210
        gbc.setState(0x8ccd, 0x2585, 0x1750, 0x28a, 0x98fb, 0x7d63, 0x0, 0x0);
        gbc.writeMem(0x8ccd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2585);
        EXPECT(gbc.pc(), 0x8ccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ccd), 0xcb);
        EXPECT(gbc.readMem(0x8cce), 0x3a);
        // CB 3A 0211
        gbc.setState(0x9956, 0x9ae0, 0x7f40, 0x1264, 0x5e02, 0x5d0a, 0x0, 0x0);
        gbc.writeMem(0x9956, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9ae0);
        EXPECT(gbc.pc(), 0x9958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9956), 0xcb);
        EXPECT(gbc.readMem(0x9957), 0x3a);
        // CB 3A 0212
        gbc.setState(0xc24d, 0xb5ff, 0x6bb0, 0x5092, 0x265f, 0xc45a, 0x1, 0x1);
        gbc.writeMem(0xc24d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb5ff);
        EXPECT(gbc.pc(), 0xc24f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24d), 0xcb);
        EXPECT(gbc.readMem(0xc24e), 0x3a);
        // CB 3A 0213
        gbc.setState(0x650d, 0xcdb9, 0xd760, 0xcee, 0xb1ca, 0x728a, 0x0, 0x0);
        gbc.writeMem(0x650d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcdb9);
        EXPECT(gbc.pc(), 0x650f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0214
        gbc.setState(0x2dca, 0x7c27, 0xfb80, 0x4e62, 0xab9a, 0x779d, 0x0, 0x0);
        gbc.writeMem(0x2dca, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7c27);
        EXPECT(gbc.pc(), 0x2dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0215
        gbc.setState(0x9b7c, 0x4f3a, 0xc640, 0x8e7b, 0x9dec, 0xbe3f, 0x1, 0x0);
        gbc.writeMem(0x9b7c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4f3a);
        EXPECT(gbc.pc(), 0x9b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b7c), 0xcb);
        EXPECT(gbc.readMem(0x9b7d), 0x3a);
        // CB 3A 0217
        gbc.setState(0xd5ad, 0xf802, 0x8640, 0xd0c6, 0xdf7c, 0xbc9c, 0x1, 0x0);
        gbc.writeMem(0xd5ad, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf802);
        EXPECT(gbc.pc(), 0xd5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ad), 0xcb);
        EXPECT(gbc.readMem(0xd5ae), 0x3a);
        // CB 3A 0218
        gbc.setState(0x6247, 0x66c4, 0x1c00, 0x81ee, 0x38f2, 0xaaf1, 0x1, 0x1);
        gbc.writeMem(0x6247, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x66c4);
        EXPECT(gbc.pc(), 0x6249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0219
        gbc.setState(0x2605, 0x589f, 0x54b0, 0x5c01, 0xe470, 0x7be2, 0x1, 0x1);
        gbc.writeMem(0x2605, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x589f);
        EXPECT(gbc.pc(), 0x2607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 021A
        gbc.setState(0xe5ba, 0x2560, 0x6aa0, 0x9357, 0x7174, 0x3fff, 0x1, 0x0);
        gbc.writeMem(0xe5ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2560);
        EXPECT(gbc.pc(), 0xe5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ba), 0xcb);
        EXPECT(gbc.readMem(0xe5bb), 0x3a);
        // CB 3A 021B
        gbc.setState(0x8a1e, 0x15ec, 0xbeb0, 0x967f, 0xcbe, 0x426d, 0x0, 0x0);
        gbc.writeMem(0x8a1e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x15ec);
        EXPECT(gbc.pc(), 0x8a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1e), 0xcb);
        EXPECT(gbc.readMem(0x8a1f), 0x3a);
        // CB 3A 021D
        gbc.setState(0x3bc7, 0x37ce, 0x7680, 0xeac5, 0x994d, 0xdf85, 0x1, 0x1);
        gbc.writeMem(0x3bc7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x37ce);
        EXPECT(gbc.pc(), 0x3bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 021E
        gbc.setState(0x8cd2, 0xdd7d, 0xe370, 0x8b3d, 0x4aa2, 0xae2c, 0x0, 0x1);
        gbc.writeMem(0x8cd2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdd7d);
        EXPECT(gbc.pc(), 0x8cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd2), 0xcb);
        EXPECT(gbc.readMem(0x8cd3), 0x3a);
        // CB 3A 021F
        gbc.setState(0xe692, 0x6a30, 0xd050, 0x75f7, 0xeaa1, 0xdc79, 0x1, 0x0);
        gbc.writeMem(0xe692, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6a30);
        EXPECT(gbc.pc(), 0xe694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe692), 0xcb);
        EXPECT(gbc.readMem(0xe693), 0x3a);
        // CB 3A 0220
        gbc.setState(0x26b3, 0xd0f5, 0x4d80, 0xc0ac, 0xd94a, 0x5b69, 0x1, 0x1);
        gbc.writeMem(0x26b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd0f5);
        EXPECT(gbc.pc(), 0x26b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0221
        gbc.setState(0x158a, 0xd5b4, 0x9360, 0x6d04, 0x4fee, 0xe352, 0x0, 0x1);
        gbc.writeMem(0x158a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd5b4);
        EXPECT(gbc.pc(), 0x158c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0222
        gbc.setState(0x8d99, 0x8144, 0x16b0, 0x5dbc, 0x3595, 0x6763, 0x0, 0x0);
        gbc.writeMem(0x8d99, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8144);
        EXPECT(gbc.pc(), 0x8d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d99), 0xcb);
        EXPECT(gbc.readMem(0x8d9a), 0x3a);
        // CB 3A 0223
        gbc.setState(0x1f93, 0x5b32, 0x9450, 0x766d, 0xf050, 0xdc79, 0x0, 0x0);
        gbc.writeMem(0x1f93, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5b32);
        EXPECT(gbc.pc(), 0x1f95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0224
        gbc.setState(0x1a3a, 0x858, 0x8bb0, 0x95c4, 0x2d70, 0x8993, 0x0, 0x1);
        gbc.writeMem(0x1a3a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x858);
        EXPECT(gbc.pc(), 0x1a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0225
        gbc.setState(0x362, 0x6379, 0x3480, 0xa988, 0xb331, 0xcfc0, 0x1, 0x1);
        gbc.writeMem(0x362, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6379);
        EXPECT(gbc.pc(), 0x364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0226
        gbc.setState(0x6fd, 0x5e42, 0xfb0, 0x607b, 0x70c, 0xdafe, 0x0, 0x0);
        gbc.writeMem(0x6fd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5e42);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0227
        gbc.setState(0x6cc4, 0x926, 0x20e0, 0x5ffb, 0x5afe, 0x2891, 0x0, 0x1);
        gbc.writeMem(0x6cc4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x926);
        EXPECT(gbc.pc(), 0x6cc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0228
        gbc.setState(0x33e9, 0xc3e0, 0x1330, 0x6fd6, 0x117f, 0x5b4d, 0x0, 0x0);
        gbc.writeMem(0x33e9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc3e0);
        EXPECT(gbc.pc(), 0x33eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0229
        gbc.setState(0x9048, 0x1eb8, 0x55d0, 0x3a48, 0xfca2, 0x96c7, 0x0, 0x0);
        gbc.writeMem(0x9048, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1eb8);
        EXPECT(gbc.pc(), 0x904a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9048), 0xcb);
        EXPECT(gbc.readMem(0x9049), 0x3a);
        // CB 3A 022A
        gbc.setState(0x3ba0, 0x3e32, 0xd7f0, 0x5d7e, 0x477b, 0xf77d, 0x0, 0x0);
        gbc.writeMem(0x3ba0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3e32);
        EXPECT(gbc.pc(), 0x3ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 022B
        gbc.setState(0xb440, 0xfeb2, 0xd6d0, 0xf662, 0x8e4, 0xa346, 0x0, 0x1);
        gbc.writeMem(0xb440, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfeb2);
        EXPECT(gbc.pc(), 0xb442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb440), 0xcb);
        EXPECT(gbc.readMem(0xb441), 0x3a);
        // CB 3A 022C
        gbc.setState(0x34d3, 0x2e93, 0x6530, 0xdc94, 0xf0f, 0xe2ff, 0x1, 0x1);
        gbc.writeMem(0x34d3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2e93);
        EXPECT(gbc.pc(), 0x34d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 022D
        gbc.setState(0xb569, 0x84, 0x8660, 0x11ef, 0x7b54, 0x9333, 0x0, 0x0);
        gbc.writeMem(0xb569, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x84);
        EXPECT(gbc.pc(), 0xb56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb569), 0xcb);
        EXPECT(gbc.readMem(0xb56a), 0x3a);
        // CB 3A 022E
        gbc.setState(0xa8bf, 0x2125, 0x11e0, 0xaafe, 0xe0bb, 0x2c8f, 0x0, 0x0);
        gbc.writeMem(0xa8bf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2125);
        EXPECT(gbc.pc(), 0xa8c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8bf), 0xcb);
        EXPECT(gbc.readMem(0xa8c0), 0x3a);
        // CB 3A 022F
        gbc.setState(0x9267, 0x22a6, 0xa40, 0x275a, 0xc8f8, 0x6cee, 0x0, 0x1);
        gbc.writeMem(0x9267, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x22a6);
        EXPECT(gbc.pc(), 0x9269);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9267), 0xcb);
        EXPECT(gbc.readMem(0x9268), 0x3a);
        // CB 3A 0230
        gbc.setState(0x3c19, 0x5b40, 0xdfa0, 0x6c6a, 0x5aca, 0x4e12, 0x1, 0x1);
        gbc.writeMem(0x3c19, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0x3c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0232
        gbc.setState(0xbad6, 0x350b, 0x4610, 0x8874, 0xba33, 0xba84, 0x0, 0x0);
        gbc.writeMem(0xbad6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x350b);
        EXPECT(gbc.pc(), 0xbad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad6), 0xcb);
        EXPECT(gbc.readMem(0xbad7), 0x3a);
        // CB 3A 0233
        gbc.setState(0xb0dc, 0x7e32, 0xe850, 0xc6c5, 0x748c, 0x8c6e, 0x1, 0x1);
        gbc.writeMem(0xb0dc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7e32);
        EXPECT(gbc.pc(), 0xb0de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0dc), 0xcb);
        EXPECT(gbc.readMem(0xb0dd), 0x3a);
        // CB 3A 0234
        gbc.setState(0x9c4a, 0xa0bf, 0xd940, 0x59fa, 0xbe42, 0x4640, 0x1, 0x1);
        gbc.writeMem(0x9c4a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa0bf);
        EXPECT(gbc.pc(), 0x9c4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4a), 0xcb);
        EXPECT(gbc.readMem(0x9c4b), 0x3a);
        // CB 3A 0235
        gbc.setState(0x798e, 0x9316, 0xf00, 0x2e33, 0x9730, 0x5de4, 0x0, 0x0);
        gbc.writeMem(0x798e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9316);
        EXPECT(gbc.pc(), 0x7990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0236
        gbc.setState(0x5149, 0x9eb8, 0x2af0, 0xc97b, 0x586c, 0x191f, 0x1, 0x0);
        gbc.writeMem(0x5149, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9eb8);
        EXPECT(gbc.pc(), 0x514b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0237
        gbc.setState(0xb6be, 0x2811, 0xf440, 0xd378, 0xd886, 0xfc7, 0x0, 0x0);
        gbc.writeMem(0xb6be, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2811);
        EXPECT(gbc.pc(), 0xb6c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6be), 0xcb);
        EXPECT(gbc.readMem(0xb6bf), 0x3a);
        // CB 3A 0238
        gbc.setState(0xa6b, 0xf42, 0x1c00, 0x28de, 0x9c37, 0x7c5c, 0x0, 0x1);
        gbc.writeMem(0xa6b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf42);
        EXPECT(gbc.pc(), 0xa6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 023A
        gbc.setState(0x2710, 0xa5b5, 0x73b0, 0xdc07, 0xcefa, 0x6456, 0x1, 0x1);
        gbc.writeMem(0x2710, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa5b5);
        EXPECT(gbc.pc(), 0x2712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 023B
        gbc.setState(0x77c7, 0xd627, 0x6ce0, 0xe34e, 0x7e1, 0xa78, 0x1, 0x0);
        gbc.writeMem(0x77c7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd627);
        EXPECT(gbc.pc(), 0x77c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 023C
        gbc.setState(0xc795, 0xebd3, 0x84d0, 0xb35f, 0xe718, 0xfbd6, 0x0, 0x0);
        gbc.writeMem(0xc795, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xebd3);
        EXPECT(gbc.pc(), 0xc797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc795), 0xcb);
        EXPECT(gbc.readMem(0xc796), 0x3a);
        // CB 3A 023D
        gbc.setState(0x993d, 0x990e, 0x6410, 0xa8aa, 0x6e65, 0x5175, 0x1, 0x0);
        gbc.writeMem(0x993d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x990e);
        EXPECT(gbc.pc(), 0x993f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993d), 0xcb);
        EXPECT(gbc.readMem(0x993e), 0x3a);
        // CB 3A 023F
        gbc.setState(0xb7b9, 0xc68d, 0x8be0, 0x4795, 0xd4b3, 0xc22f, 0x0, 0x1);
        gbc.writeMem(0xb7b9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xb7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b9), 0xcb);
        EXPECT(gbc.readMem(0xb7ba), 0x3a);
        // CB 3A 0240
        gbc.setState(0x6ea3, 0x75f7, 0xcf0, 0x5c2a, 0x4d6c, 0x1ed0, 0x1, 0x1);
        gbc.writeMem(0x6ea3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x75f7);
        EXPECT(gbc.pc(), 0x6ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0241
        gbc.setState(0x2ed4, 0x856d, 0x40a0, 0x811, 0xdeaf, 0x1160, 0x0, 0x1);
        gbc.writeMem(0x2ed4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x856d);
        EXPECT(gbc.pc(), 0x2ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0243
        gbc.setState(0xef59, 0x2a02, 0xe180, 0x6038, 0xbe91, 0xf859, 0x0, 0x1);
        gbc.writeMem(0xef59, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2a02);
        EXPECT(gbc.pc(), 0xef5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef59), 0xcb);
        EXPECT(gbc.readMem(0xef5a), 0x3a);
        // CB 3A 0244
        gbc.setState(0xa357, 0xebf0, 0xe2b0, 0x7c07, 0x7e99, 0x69e7, 0x0, 0x0);
        gbc.writeMem(0xa357, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xebf0);
        EXPECT(gbc.pc(), 0xa359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa357), 0xcb);
        EXPECT(gbc.readMem(0xa358), 0x3a);
        // CB 3A 0245
        gbc.setState(0x7adc, 0xd59c, 0x5aa0, 0x44c7, 0xcde1, 0xb213, 0x0, 0x0);
        gbc.writeMem(0x7adc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0x7ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0246
        gbc.setState(0x5734, 0x4ccf, 0x7d10, 0x52f9, 0xd3b4, 0x720f, 0x0, 0x0);
        gbc.writeMem(0x5734, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4ccf);
        EXPECT(gbc.pc(), 0x5736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0247
        gbc.setState(0xb43a, 0xba57, 0x4420, 0xd105, 0x3d5d, 0xfa72, 0x0, 0x0);
        gbc.writeMem(0xb43a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xba57);
        EXPECT(gbc.pc(), 0xb43c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb43a), 0xcb);
        EXPECT(gbc.readMem(0xb43b), 0x3a);
        // CB 3A 0248
        gbc.setState(0xc9b8, 0x615e, 0xc820, 0xfa12, 0x725b, 0xc64c, 0x0, 0x1);
        gbc.writeMem(0xc9b8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x615e);
        EXPECT(gbc.pc(), 0xc9ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b8), 0xcb);
        EXPECT(gbc.readMem(0xc9b9), 0x3a);
        // CB 3A 0249
        gbc.setState(0x6d50, 0x623f, 0x6d10, 0x26a, 0xeb99, 0x7e17, 0x0, 0x0);
        gbc.writeMem(0x6d50, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x623f);
        EXPECT(gbc.pc(), 0x6d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 024A
        gbc.setState(0x80d3, 0x347, 0x3920, 0xa129, 0x8be, 0xbe00, 0x0, 0x0);
        gbc.writeMem(0x80d3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x347);
        EXPECT(gbc.pc(), 0x80d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d3), 0xcb);
        EXPECT(gbc.readMem(0x80d4), 0x3a);
        // CB 3A 024B
        gbc.setState(0x123d, 0x9c59, 0xa540, 0x8c9c, 0x52b8, 0x1ba3, 0x1, 0x1);
        gbc.writeMem(0x123d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9c59);
        EXPECT(gbc.pc(), 0x123f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 024D
        gbc.setState(0x5fbe, 0x6f72, 0x57b0, 0x12a0, 0xe16c, 0x79f3, 0x1, 0x0);
        gbc.writeMem(0x5fbe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6f72);
        EXPECT(gbc.pc(), 0x5fc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 024E
        gbc.setState(0x8d10, 0xb2f, 0xf320, 0x24c8, 0xd30a, 0xce13, 0x0, 0x0);
        gbc.writeMem(0x8d10, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb2f);
        EXPECT(gbc.pc(), 0x8d12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d10), 0xcb);
        EXPECT(gbc.readMem(0x8d11), 0x3a);
        // CB 3A 024F
        gbc.setState(0x13ba, 0xcdb1, 0x1fd0, 0xd77a, 0x4bae, 0x47b3, 0x1, 0x1);
        gbc.writeMem(0x13ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xcdb1);
        EXPECT(gbc.pc(), 0x13bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0250
        gbc.setState(0xca82, 0x3609, 0xb410, 0xbe59, 0x3580, 0x62ed, 0x1, 0x1);
        gbc.writeMem(0xca82, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3609);
        EXPECT(gbc.pc(), 0xca84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca82), 0xcb);
        EXPECT(gbc.readMem(0xca83), 0x3a);
        // CB 3A 0251
        gbc.setState(0xde98, 0xd53e, 0xfb30, 0xb3a2, 0x34cc, 0x3856, 0x1, 0x0);
        gbc.writeMem(0xde98, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd53e);
        EXPECT(gbc.pc(), 0xde9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde98), 0xcb);
        EXPECT(gbc.readMem(0xde99), 0x3a);
        // CB 3A 0252
        gbc.setState(0xa857, 0xfc7, 0x3ff0, 0xc032, 0xa51b, 0xb0e6, 0x0, 0x1);
        gbc.writeMem(0xa857, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfc7);
        EXPECT(gbc.pc(), 0xa859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa857), 0xcb);
        EXPECT(gbc.readMem(0xa858), 0x3a);
        // CB 3A 0253
        gbc.setState(0x30d9, 0x9702, 0x5810, 0x50a8, 0xbc8d, 0xdb3d, 0x0, 0x1);
        gbc.writeMem(0x30d9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9702);
        EXPECT(gbc.pc(), 0x30db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0254
        gbc.setState(0x8078, 0xa68b, 0x6db0, 0x9d90, 0x2ed4, 0x52b, 0x0, 0x0);
        gbc.writeMem(0x8078, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa68b);
        EXPECT(gbc.pc(), 0x807a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8078), 0xcb);
        EXPECT(gbc.readMem(0x8079), 0x3a);
        // CB 3A 0255
        gbc.setState(0x3a58, 0x1375, 0x8d10, 0x461e, 0xf5eb, 0x4648, 0x0, 0x0);
        gbc.writeMem(0x3a58, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1375);
        EXPECT(gbc.pc(), 0x3a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0256
        gbc.setState(0x2aca, 0x18d0, 0x1cd0, 0xe7b0, 0x247f, 0x3d4c, 0x0, 0x0);
        gbc.writeMem(0x2aca, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x18d0);
        EXPECT(gbc.pc(), 0x2acc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0257
        gbc.setState(0x8970, 0x77b1, 0x5d90, 0x6272, 0x5d, 0x7ce4, 0x0, 0x1);
        gbc.writeMem(0x8970, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x77b1);
        EXPECT(gbc.pc(), 0x8972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8970), 0xcb);
        EXPECT(gbc.readMem(0x8971), 0x3a);
        // CB 3A 0258
        gbc.setState(0x17fa, 0x9038, 0xfb20, 0xbdf1, 0xe099, 0x8068, 0x1, 0x1);
        gbc.writeMem(0x17fa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9038);
        EXPECT(gbc.pc(), 0x17fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0259
        gbc.setState(0xa34b, 0xa17f, 0x2b30, 0x14ad, 0xf49b, 0x8f73, 0x1, 0x0);
        gbc.writeMem(0xa34b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa17f);
        EXPECT(gbc.pc(), 0xa34d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34b), 0xcb);
        EXPECT(gbc.readMem(0xa34c), 0x3a);
        // CB 3A 025B
        gbc.setState(0xa2ca, 0x4e1c, 0x6770, 0xb144, 0x63fa, 0x3514, 0x0, 0x0);
        gbc.writeMem(0xa2ca, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4e1c);
        EXPECT(gbc.pc(), 0xa2cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ca), 0xcb);
        EXPECT(gbc.readMem(0xa2cb), 0x3a);
        // CB 3A 025C
        gbc.setState(0x4f83, 0xb027, 0xd710, 0x1b81, 0x7757, 0x41e1, 0x1, 0x0);
        gbc.writeMem(0x4f83, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb027);
        EXPECT(gbc.pc(), 0x4f85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 025D
        gbc.setState(0x7877, 0x8c50, 0x6230, 0x64a2, 0xa185, 0x196d, 0x1, 0x0);
        gbc.writeMem(0x7877, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8c50);
        EXPECT(gbc.pc(), 0x7879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 025E
        gbc.setState(0x4dd5, 0x4210, 0x16a0, 0x1c88, 0x88fc, 0x145e, 0x0, 0x0);
        gbc.writeMem(0x4dd5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4210);
        EXPECT(gbc.pc(), 0x4dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 025F
        gbc.setState(0x1454, 0x3aca, 0xb930, 0x5317, 0xbe82, 0x7f34, 0x1, 0x1);
        gbc.writeMem(0x1454, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3aca);
        EXPECT(gbc.pc(), 0x1456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0260
        gbc.setState(0x3769, 0x2fc6, 0xa850, 0x69ab, 0xe593, 0xbe70, 0x0, 0x0);
        gbc.writeMem(0x3769, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2fc6);
        EXPECT(gbc.pc(), 0x376b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0261
        gbc.setState(0xcde8, 0x85a3, 0xed80, 0x17e1, 0x9266, 0x2061, 0x1, 0x1);
        gbc.writeMem(0xcde8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x85a3);
        EXPECT(gbc.pc(), 0xcdea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde8), 0xcb);
        EXPECT(gbc.readMem(0xcde9), 0x3a);
        // CB 3A 0262
        gbc.setState(0x7b71, 0xbba1, 0x1b00, 0x1549, 0xb182, 0x85fc, 0x0, 0x0);
        gbc.writeMem(0x7b71, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbba1);
        EXPECT(gbc.pc(), 0x7b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0263
        gbc.setState(0x9be7, 0x12cf, 0xfb50, 0x42d2, 0x15f0, 0x66c5, 0x0, 0x1);
        gbc.writeMem(0x9be7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x12cf);
        EXPECT(gbc.pc(), 0x9be9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be7), 0xcb);
        EXPECT(gbc.readMem(0x9be8), 0x3a);
        // CB 3A 0264
        gbc.setState(0xe614, 0x47a, 0x6ee0, 0x8174, 0x3efa, 0x73a6, 0x1, 0x0);
        gbc.writeMem(0xe614, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x47a);
        EXPECT(gbc.pc(), 0xe616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe614), 0xcb);
        EXPECT(gbc.readMem(0xe615), 0x3a);
        // CB 3A 0265
        gbc.setState(0x13eb, 0xdb55, 0xdc40, 0xa875, 0xc14f, 0x9b1e, 0x0, 0x0);
        gbc.writeMem(0x13eb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdb55);
        EXPECT(gbc.pc(), 0x13ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0266
        gbc.setState(0x2e67, 0x3cec, 0x6f10, 0x699b, 0xc1d3, 0xd5f7, 0x1, 0x1);
        gbc.writeMem(0x2e67, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3cec);
        EXPECT(gbc.pc(), 0x2e69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0267
        gbc.setState(0x115e, 0x282e, 0x4140, 0xa639, 0x6c2e, 0xa1ba, 0x1, 0x0);
        gbc.writeMem(0x115e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x282e);
        EXPECT(gbc.pc(), 0x1160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0268
        gbc.setState(0xdd60, 0xb543, 0x7060, 0x2aac, 0xfde7, 0xb9b9, 0x0, 0x0);
        gbc.writeMem(0xdd60, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb543);
        EXPECT(gbc.pc(), 0xdd62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd60), 0xcb);
        EXPECT(gbc.readMem(0xdd61), 0x3a);
        // CB 3A 0269
        gbc.setState(0x1ed5, 0xf7f6, 0x9390, 0x1b69, 0x43ae, 0xae05, 0x1, 0x1);
        gbc.writeMem(0x1ed5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf7f6);
        EXPECT(gbc.pc(), 0x1ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 026A
        gbc.setState(0x7fc2, 0xc3fc, 0xfcc0, 0x864, 0xb44a, 0xf0a, 0x1, 0x1);
        gbc.writeMem(0x7fc2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc3fc);
        EXPECT(gbc.pc(), 0x7fc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 026B
        gbc.setState(0x7d3c, 0x901d, 0x4910, 0x7a8d, 0x6f31, 0xeaa, 0x0, 0x1);
        gbc.writeMem(0x7d3c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x901d);
        EXPECT(gbc.pc(), 0x7d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 026D
        gbc.setState(0x9c04, 0xb138, 0x9a90, 0x41c0, 0xf8ca, 0x9fa, 0x0, 0x1);
        gbc.writeMem(0x9c04, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb138);
        EXPECT(gbc.pc(), 0x9c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c04), 0xcb);
        EXPECT(gbc.readMem(0x9c05), 0x3a);
        // CB 3A 026E
        gbc.setState(0x8191, 0xba8b, 0xd760, 0xb40c, 0x148d, 0x9ddb, 0x1, 0x1);
        gbc.writeMem(0x8191, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xba8b);
        EXPECT(gbc.pc(), 0x8193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8191), 0xcb);
        EXPECT(gbc.readMem(0x8192), 0x3a);
        // CB 3A 026F
        gbc.setState(0x866e, 0x1ba, 0x1120, 0xf0e7, 0x8a9f, 0x23fe, 0x0, 0x1);
        gbc.writeMem(0x866e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1ba);
        EXPECT(gbc.pc(), 0x8670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866e), 0xcb);
        EXPECT(gbc.readMem(0x866f), 0x3a);
        // CB 3A 0270
        gbc.setState(0x16fd, 0x4ef4, 0x4340, 0x823e, 0x43e8, 0xbcb5, 0x1, 0x0);
        gbc.writeMem(0x16fd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4ef4);
        EXPECT(gbc.pc(), 0x16ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0271
        gbc.setState(0x23d5, 0x8fdb, 0x8370, 0x50c5, 0x218d, 0xd8b1, 0x1, 0x1);
        gbc.writeMem(0x23d5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8fdb);
        EXPECT(gbc.pc(), 0x23d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0272
        gbc.setState(0xe2bc, 0x1a51, 0x4f60, 0x832c, 0xb5d3, 0xe3ca, 0x1, 0x0);
        gbc.writeMem(0xe2bc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1a51);
        EXPECT(gbc.pc(), 0xe2be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2bc), 0xcb);
        EXPECT(gbc.readMem(0xe2bd), 0x3a);
        // CB 3A 0273
        gbc.setState(0x901d, 0x2975, 0xb140, 0xe0a7, 0x5aba, 0xab35, 0x0, 0x0);
        gbc.writeMem(0x901d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2975);
        EXPECT(gbc.pc(), 0x901f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x901d), 0xcb);
        EXPECT(gbc.readMem(0x901e), 0x3a);
        // CB 3A 0274
        gbc.setState(0xbdd2, 0xffe4, 0x1b80, 0x7e4e, 0x205e, 0xc88d, 0x0, 0x1);
        gbc.writeMem(0xbdd2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xffe4);
        EXPECT(gbc.pc(), 0xbdd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd2), 0xcb);
        EXPECT(gbc.readMem(0xbdd3), 0x3a);
        // CB 3A 0275
        gbc.setState(0xd36d, 0x40de, 0x590, 0x6950, 0xe0de, 0x39f0, 0x0, 0x0);
        gbc.writeMem(0xd36d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x40de);
        EXPECT(gbc.pc(), 0xd36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36d), 0xcb);
        EXPECT(gbc.readMem(0xd36e), 0x3a);
        // CB 3A 0276
        gbc.setState(0x969a, 0xb4a7, 0x1710, 0xf036, 0xdb7d, 0xb8e7, 0x0, 0x0);
        gbc.writeMem(0x969a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb4a7);
        EXPECT(gbc.pc(), 0x969c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x969a), 0xcb);
        EXPECT(gbc.readMem(0x969b), 0x3a);
        // CB 3A 0277
        gbc.setState(0xd85d, 0xa72d, 0x34a0, 0x86fa, 0x489f, 0x281a, 0x0, 0x1);
        gbc.writeMem(0xd85d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa72d);
        EXPECT(gbc.pc(), 0xd85f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85d), 0xcb);
        EXPECT(gbc.readMem(0xd85e), 0x3a);
        // CB 3A 0278
        gbc.setState(0x444c, 0xedc5, 0xce50, 0x4884, 0x7f3c, 0x64cc, 0x1, 0x1);
        gbc.writeMem(0x444c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xedc5);
        EXPECT(gbc.pc(), 0x444e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0279
        gbc.setState(0x459e, 0x9995, 0x9a90, 0x101c, 0x36fc, 0x6b40, 0x1, 0x0);
        gbc.writeMem(0x459e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9995);
        EXPECT(gbc.pc(), 0x45a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 027A
        gbc.setState(0xc981, 0xae0c, 0xf450, 0xb163, 0xef36, 0x7b74, 0x0, 0x1);
        gbc.writeMem(0xc981, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae0c);
        EXPECT(gbc.pc(), 0xc983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc981), 0xcb);
        EXPECT(gbc.readMem(0xc982), 0x3a);
        // CB 3A 027B
        gbc.setState(0x5630, 0x83a3, 0xa6b0, 0x3285, 0x72ed, 0x5e5f, 0x0, 0x0);
        gbc.writeMem(0x5630, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x83a3);
        EXPECT(gbc.pc(), 0x5632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 027C
        gbc.setState(0x148d, 0xd5af, 0xb120, 0x385b, 0xd31d, 0xac7c, 0x0, 0x0);
        gbc.writeMem(0x148d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd5af);
        EXPECT(gbc.pc(), 0x148f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 027D
        gbc.setState(0x1895, 0xaa48, 0x1250, 0xa76f, 0xedbf, 0x9c4e, 0x1, 0x0);
        gbc.writeMem(0x1895, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xaa48);
        EXPECT(gbc.pc(), 0x1897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 027E
        gbc.setState(0xefb1, 0xce2f, 0x30e0, 0x5224, 0x5e60, 0x31be, 0x1, 0x1);
        gbc.writeMem(0xefb1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xce2f);
        EXPECT(gbc.pc(), 0xefb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb1), 0xcb);
        EXPECT(gbc.readMem(0xefb2), 0x3a);
        // CB 3A 027F
        gbc.setState(0x7357, 0xfe12, 0xffa0, 0xadc2, 0x4944, 0xaba, 0x0, 0x0);
        gbc.writeMem(0x7357, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfe12);
        EXPECT(gbc.pc(), 0x7359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0280
        gbc.setState(0xb871, 0xe5b1, 0x4b00, 0x349c, 0x723c, 0x1a52, 0x0, 0x1);
        gbc.writeMem(0xb871, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe5b1);
        EXPECT(gbc.pc(), 0xb873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb871), 0xcb);
        EXPECT(gbc.readMem(0xb872), 0x3a);
        // CB 3A 0281
        gbc.setState(0xedb8, 0xb90f, 0x590, 0x45aa, 0xe4cf, 0x1b2b, 0x1, 0x1);
        gbc.writeMem(0xedb8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb90f);
        EXPECT(gbc.pc(), 0xedba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb8), 0xcb);
        EXPECT(gbc.readMem(0xedb9), 0x3a);
        // CB 3A 0282
        gbc.setState(0x965a, 0x90e7, 0x9f90, 0x5494, 0x9f30, 0xd44, 0x0, 0x0);
        gbc.writeMem(0x965a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x90e7);
        EXPECT(gbc.pc(), 0x965c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965a), 0xcb);
        EXPECT(gbc.readMem(0x965b), 0x3a);
        // CB 3A 0283
        gbc.setState(0x874f, 0xa952, 0x9500, 0x7208, 0x71c9, 0x2bbf, 0x0, 0x1);
        gbc.writeMem(0x874f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa952);
        EXPECT(gbc.pc(), 0x8751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874f), 0xcb);
        EXPECT(gbc.readMem(0x8750), 0x3a);
        // CB 3A 0284
        gbc.setState(0xd47a, 0x18cd, 0x5ae0, 0xb49b, 0x2074, 0x87dd, 0x0, 0x0);
        gbc.writeMem(0xd47a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x18cd);
        EXPECT(gbc.pc(), 0xd47c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd47a), 0xcb);
        EXPECT(gbc.readMem(0xd47b), 0x3a);
        // CB 3A 0285
        gbc.setState(0xa31c, 0xc31f, 0x4fa0, 0x8a94, 0x9e92, 0x3f72, 0x1, 0x1);
        gbc.writeMem(0xa31c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc31f);
        EXPECT(gbc.pc(), 0xa31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa31c), 0xcb);
        EXPECT(gbc.readMem(0xa31d), 0x3a);
        // CB 3A 0286
        gbc.setState(0x366c, 0x1b, 0x7a30, 0x542f, 0x602b, 0x4662, 0x0, 0x1);
        gbc.writeMem(0x366c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1b);
        EXPECT(gbc.pc(), 0x366e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0287
        gbc.setState(0x6227, 0x85d5, 0x18c0, 0xe96c, 0xc6d5, 0x2dfc, 0x1, 0x1);
        gbc.writeMem(0x6227, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x85d5);
        EXPECT(gbc.pc(), 0x6229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0288
        gbc.setState(0x46d5, 0x1a7f, 0x4800, 0xa9f9, 0xbf45, 0x65b4, 0x0, 0x0);
        gbc.writeMem(0x46d5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1a7f);
        EXPECT(gbc.pc(), 0x46d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0289
        gbc.setState(0x3729, 0xf440, 0xd0d0, 0xa680, 0xbd5b, 0xd13f, 0x1, 0x0);
        gbc.writeMem(0x3729, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf440);
        EXPECT(gbc.pc(), 0x372b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 028A
        gbc.setState(0xc6ba, 0x873c, 0x2c10, 0x5794, 0xc0ec, 0x62e, 0x1, 0x0);
        gbc.writeMem(0xc6ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x873c);
        EXPECT(gbc.pc(), 0xc6bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ba), 0xcb);
        EXPECT(gbc.readMem(0xc6bb), 0x3a);
        // CB 3A 028B
        gbc.setState(0xd168, 0xce9c, 0x6dc0, 0xd254, 0xb182, 0x1fd5, 0x1, 0x0);
        gbc.writeMem(0xd168, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xce9c);
        EXPECT(gbc.pc(), 0xd16a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd168), 0xcb);
        EXPECT(gbc.readMem(0xd169), 0x3a);
        // CB 3A 028C
        gbc.setState(0xdf53, 0x4d1, 0xa70, 0x612f, 0x3700, 0x5bd4, 0x1, 0x0);
        gbc.writeMem(0xdf53, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4d1);
        EXPECT(gbc.pc(), 0xdf55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf53), 0xcb);
        EXPECT(gbc.readMem(0xdf54), 0x3a);
        // CB 3A 028D
        gbc.setState(0x1712, 0x4baf, 0x9120, 0x6dbd, 0x658f, 0x9955, 0x1, 0x0);
        gbc.writeMem(0x1712, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4baf);
        EXPECT(gbc.pc(), 0x1714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 028E
        gbc.setState(0x90ff, 0x2456, 0x2700, 0x4c33, 0xaf6d, 0xbff0, 0x0, 0x0);
        gbc.writeMem(0x90ff, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2456);
        EXPECT(gbc.pc(), 0x9101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ff), 0xcb);
        EXPECT(gbc.readMem(0x9100), 0x3a);
        // CB 3A 028F
        gbc.setState(0x7536, 0x2f43, 0xcc50, 0x787a, 0xb5d5, 0xd63a, 0x0, 0x1);
        gbc.writeMem(0x7536, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2f43);
        EXPECT(gbc.pc(), 0x7538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0290
        gbc.setState(0xc796, 0x8b46, 0x9a90, 0xaafc, 0xcbbc, 0xad08, 0x0, 0x1);
        gbc.writeMem(0xc796, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8b46);
        EXPECT(gbc.pc(), 0xc798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc796), 0xcb);
        EXPECT(gbc.readMem(0xc797), 0x3a);
        // CB 3A 0291
        gbc.setState(0x687f, 0xa3a7, 0xcfd0, 0x76c6, 0x444e, 0x6bea, 0x0, 0x0);
        gbc.writeMem(0x687f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa3a7);
        EXPECT(gbc.pc(), 0x6881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0292
        gbc.setState(0xb4de, 0x8fbb, 0x6a80, 0x54b9, 0xfcdd, 0x620d, 0x1, 0x0);
        gbc.writeMem(0xb4de, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8fbb);
        EXPECT(gbc.pc(), 0xb4e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4de), 0xcb);
        EXPECT(gbc.readMem(0xb4df), 0x3a);
        // CB 3A 0293
        gbc.setState(0xbb30, 0x29fd, 0xbd10, 0xdccc, 0x88ff, 0x4b95, 0x0, 0x0);
        gbc.writeMem(0xbb30, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x29fd);
        EXPECT(gbc.pc(), 0xbb32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb30), 0xcb);
        EXPECT(gbc.readMem(0xbb31), 0x3a);
        // CB 3A 0294
        gbc.setState(0x7d24, 0xe584, 0x8ac0, 0x8940, 0x3c70, 0xab51, 0x1, 0x0);
        gbc.writeMem(0x7d24, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe584);
        EXPECT(gbc.pc(), 0x7d26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0295
        gbc.setState(0x613d, 0xb987, 0x7ba0, 0x9ea9, 0xb919, 0x4643, 0x0, 0x0);
        gbc.writeMem(0x613d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb987);
        EXPECT(gbc.pc(), 0x613f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0297
        gbc.setState(0x76, 0xf41e, 0x280, 0xe3cd, 0x5cb9, 0x8d90, 0x1, 0x0);
        gbc.writeMem(0x76, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf41e);
        EXPECT(gbc.pc(), 0x78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0299
        gbc.setState(0x49cd, 0xcb17, 0x2090, 0x6110, 0xe7c7, 0x7fa3, 0x1, 0x0);
        gbc.writeMem(0x49cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcb17);
        EXPECT(gbc.pc(), 0x49cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 029A
        gbc.setState(0x1f20, 0x8005, 0xe5d0, 0xd7f0, 0xe049, 0x5fd, 0x0, 0x1);
        gbc.writeMem(0x1f20, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8005);
        EXPECT(gbc.pc(), 0x1f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 029B
        gbc.setState(0xee0e, 0x2579, 0x4ed0, 0xc915, 0xc91b, 0x9065, 0x0, 0x1);
        gbc.writeMem(0xee0e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2579);
        EXPECT(gbc.pc(), 0xee10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee0e), 0xcb);
        EXPECT(gbc.readMem(0xee0f), 0x3a);
        // CB 3A 029C
        gbc.setState(0xc7b4, 0x9f66, 0xb4b0, 0x7914, 0x2d69, 0x2c97, 0x1, 0x1);
        gbc.writeMem(0xc7b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9f66);
        EXPECT(gbc.pc(), 0xc7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b4), 0xcb);
        EXPECT(gbc.readMem(0xc7b5), 0x3a);
        // CB 3A 029D
        gbc.setState(0x6c31, 0xdd7a, 0xb180, 0xe687, 0xb44f, 0x87f9, 0x1, 0x1);
        gbc.writeMem(0x6c31, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdd7a);
        EXPECT(gbc.pc(), 0x6c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 029E
        gbc.setState(0x77ae, 0x38ca, 0x53d0, 0x78c3, 0x8c3e, 0x638, 0x0, 0x0);
        gbc.writeMem(0x77ae, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x38ca);
        EXPECT(gbc.pc(), 0x77b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 029F
        gbc.setState(0xe1e9, 0x9343, 0x9170, 0x5eae, 0x888d, 0x1523, 0x1, 0x1);
        gbc.writeMem(0xe1e9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9343);
        EXPECT(gbc.pc(), 0xe1eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e9), 0xcb);
        EXPECT(gbc.readMem(0xe1ea), 0x3a);
        // CB 3A 02A0
        gbc.setState(0x3ad1, 0xca28, 0x7390, 0x5ccf, 0x1c5f, 0x203b, 0x0, 0x1);
        gbc.writeMem(0x3ad1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xca28);
        EXPECT(gbc.pc(), 0x3ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02A1
        gbc.setState(0x8e78, 0xe579, 0xb1f0, 0xe7ef, 0xec90, 0x2dcc, 0x0, 0x0);
        gbc.writeMem(0x8e78, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe579);
        EXPECT(gbc.pc(), 0x8e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e78), 0xcb);
        EXPECT(gbc.readMem(0x8e79), 0x3a);
        // CB 3A 02A2
        gbc.setState(0xa646, 0xf255, 0xc4a0, 0xc993, 0xc7dd, 0x2151, 0x1, 0x1);
        gbc.writeMem(0xa646, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf255);
        EXPECT(gbc.pc(), 0xa648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa646), 0xcb);
        EXPECT(gbc.readMem(0xa647), 0x3a);
        // CB 3A 02A3
        gbc.setState(0x6887, 0xf56d, 0xa5d0, 0xcd72, 0xb865, 0x11c2, 0x0, 0x1);
        gbc.writeMem(0x6887, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf56d);
        EXPECT(gbc.pc(), 0x6889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02A4
        gbc.setState(0x316b, 0x1e40, 0x4740, 0xc9fc, 0x1fd, 0x4cc9, 0x1, 0x0);
        gbc.writeMem(0x316b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1e40);
        EXPECT(gbc.pc(), 0x316d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02A5
        gbc.setState(0xdfee, 0x24c3, 0xbf10, 0x704d, 0x588a, 0x7be0, 0x0, 0x1);
        gbc.writeMem(0xdfee, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x24c3);
        EXPECT(gbc.pc(), 0xdff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfee), 0xcb);
        EXPECT(gbc.readMem(0xdfef), 0x3a);
        // CB 3A 02A6
        gbc.setState(0x739c, 0xe1a6, 0xeee0, 0xba62, 0x5ea2, 0x9d65, 0x1, 0x1);
        gbc.writeMem(0x739c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe1a6);
        EXPECT(gbc.pc(), 0x739e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02A7
        gbc.setState(0x8bc2, 0x786, 0xf3f0, 0x76d1, 0x5db6, 0x7347, 0x0, 0x1);
        gbc.writeMem(0x8bc2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x786);
        EXPECT(gbc.pc(), 0x8bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bc2), 0xcb);
        EXPECT(gbc.readMem(0x8bc3), 0x3a);
        // CB 3A 02A8
        gbc.setState(0xe34b, 0x117c, 0x2b70, 0xa075, 0x7ac7, 0x5a5d, 0x1, 0x0);
        gbc.writeMem(0xe34b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x117c);
        EXPECT(gbc.pc(), 0xe34d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe34b), 0xcb);
        EXPECT(gbc.readMem(0xe34c), 0x3a);
        // CB 3A 02A9
        gbc.setState(0x143a, 0x3d48, 0x58a0, 0x311a, 0xd481, 0x34e8, 0x0, 0x1);
        gbc.writeMem(0x143a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3d48);
        EXPECT(gbc.pc(), 0x143c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02AA
        gbc.setState(0x634b, 0xcc13, 0x8010, 0xec6b, 0x20d3, 0x6698, 0x1, 0x1);
        gbc.writeMem(0x634b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcc13);
        EXPECT(gbc.pc(), 0x634d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02AB
        gbc.setState(0xde60, 0xfcc3, 0xd990, 0xee3e, 0x2636, 0x1a17, 0x0, 0x0);
        gbc.writeMem(0xde60, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfcc3);
        EXPECT(gbc.pc(), 0xde62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde60), 0xcb);
        EXPECT(gbc.readMem(0xde61), 0x3a);
        // CB 3A 02AC
        gbc.setState(0x6af2, 0x74f0, 0x96a0, 0xa96a, 0x5b03, 0xf381, 0x1, 0x1);
        gbc.writeMem(0x6af2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x74f0);
        EXPECT(gbc.pc(), 0x6af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02AD
        gbc.setState(0x3ed, 0xd531, 0x8f30, 0xfb84, 0x4826, 0x6e68, 0x0, 0x1);
        gbc.writeMem(0x3ed, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd531);
        EXPECT(gbc.pc(), 0x3ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02AE
        gbc.setState(0xa8e8, 0x5811, 0x2650, 0xc993, 0x7354, 0xdc6d, 0x0, 0x0);
        gbc.writeMem(0xa8e8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5811);
        EXPECT(gbc.pc(), 0xa8ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e8), 0xcb);
        EXPECT(gbc.readMem(0xa8e9), 0x3a);
        // CB 3A 02AF
        gbc.setState(0x78f3, 0x3e54, 0x5990, 0xcbe9, 0x4b45, 0xe740, 0x0, 0x0);
        gbc.writeMem(0x78f3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3e54);
        EXPECT(gbc.pc(), 0x78f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02B0
        gbc.setState(0x9381, 0x52c8, 0xec90, 0x63aa, 0x3979, 0x3c7, 0x0, 0x0);
        gbc.writeMem(0x9381, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x52c8);
        EXPECT(gbc.pc(), 0x9383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9381), 0xcb);
        EXPECT(gbc.readMem(0x9382), 0x3a);
        // CB 3A 02B1
        gbc.setState(0xedb, 0xf64, 0x2f60, 0x3e6d, 0x76e1, 0x8705, 0x0, 0x0);
        gbc.writeMem(0xedb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf64);
        EXPECT(gbc.pc(), 0xedd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02B2
        gbc.setState(0x4c3e, 0x3583, 0xa740, 0x6d0e, 0xee4a, 0xe7bd, 0x1, 0x0);
        gbc.writeMem(0x4c3e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3583);
        EXPECT(gbc.pc(), 0x4c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02B3
        gbc.setState(0xb5e0, 0x2fa5, 0x18f0, 0x8ceb, 0x10bd, 0xeefb, 0x1, 0x1);
        gbc.writeMem(0xb5e0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2fa5);
        EXPECT(gbc.pc(), 0xb5e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e0), 0xcb);
        EXPECT(gbc.readMem(0xb5e1), 0x3a);
        // CB 3A 02B4
        gbc.setState(0xbc4e, 0x3955, 0x18f0, 0xbf05, 0x6edf, 0xfd08, 0x0, 0x1);
        gbc.writeMem(0xbc4e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3955);
        EXPECT(gbc.pc(), 0xbc50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc4e), 0xcb);
        EXPECT(gbc.readMem(0xbc4f), 0x3a);
        // CB 3A 02B5
        gbc.setState(0x38c8, 0xe70f, 0x9530, 0xe848, 0x4b6c, 0x4530, 0x0, 0x1);
        gbc.writeMem(0x38c8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe70f);
        EXPECT(gbc.pc(), 0x38ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02B6
        gbc.setState(0xddbe, 0x1d4c, 0x95d0, 0xaec0, 0xa8dd, 0xad32, 0x1, 0x0);
        gbc.writeMem(0xddbe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1d4c);
        EXPECT(gbc.pc(), 0xddc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddbe), 0xcb);
        EXPECT(gbc.readMem(0xddbf), 0x3a);
        // CB 3A 02B7
        gbc.setState(0x94ec, 0xc38e, 0x81a0, 0xf4d, 0xd17c, 0xc87e, 0x1, 0x0);
        gbc.writeMem(0x94ec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0x94ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ec), 0xcb);
        EXPECT(gbc.readMem(0x94ed), 0x3a);
        // CB 3A 02B8
        gbc.setState(0x4dbe, 0x3543, 0x32a0, 0xb4f3, 0x35e5, 0x6ef1, 0x1, 0x0);
        gbc.writeMem(0x4dbe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3543);
        EXPECT(gbc.pc(), 0x4dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02B9
        gbc.setState(0x8dfb, 0xd571, 0xf310, 0x8172, 0xc750, 0xcb66, 0x1, 0x0);
        gbc.writeMem(0x8dfb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd571);
        EXPECT(gbc.pc(), 0x8dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dfb), 0xcb);
        EXPECT(gbc.readMem(0x8dfc), 0x3a);
        // CB 3A 02BA
        gbc.setState(0xc80c, 0x56f, 0x8e0, 0x6912, 0x4bd3, 0x2bf1, 0x1, 0x0);
        gbc.writeMem(0xc80c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x56f);
        EXPECT(gbc.pc(), 0xc80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc80c), 0xcb);
        EXPECT(gbc.readMem(0xc80d), 0x3a);
        // CB 3A 02BB
        gbc.setState(0x12a3, 0xd696, 0xa7d0, 0x4280, 0x8f5c, 0x8ea2, 0x0, 0x0);
        gbc.writeMem(0x12a3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd696);
        EXPECT(gbc.pc(), 0x12a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02BC
        gbc.setState(0x551e, 0x36af, 0x57b0, 0x3c6d, 0x61e1, 0x9a36, 0x1, 0x1);
        gbc.writeMem(0x551e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x36af);
        EXPECT(gbc.pc(), 0x5520);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02BD
        gbc.setState(0x9976, 0xfbc2, 0xa160, 0x7653, 0x5cd, 0x3afd, 0x1, 0x1);
        gbc.writeMem(0x9976, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xfbc2);
        EXPECT(gbc.pc(), 0x9978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9976), 0xcb);
        EXPECT(gbc.readMem(0x9977), 0x3a);
        // CB 3A 02BE
        gbc.setState(0x5a2a, 0xd346, 0x46a0, 0xc6b9, 0x8de7, 0xf9c, 0x1, 0x1);
        gbc.writeMem(0x5a2a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd346);
        EXPECT(gbc.pc(), 0x5a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02C0
        gbc.setState(0x49af, 0x79b, 0xca50, 0xd5a5, 0xdfe2, 0xeb80, 0x0, 0x1);
        gbc.writeMem(0x49af, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x79b);
        EXPECT(gbc.pc(), 0x49b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02C2
        gbc.setState(0x623a, 0x695d, 0x7b20, 0xad27, 0x98f1, 0x3d42, 0x0, 0x1);
        gbc.writeMem(0x623a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x695d);
        EXPECT(gbc.pc(), 0x623c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02C3
        gbc.setState(0x3819, 0x3725, 0xc8c0, 0xbc49, 0xb97b, 0xe9b3, 0x1, 0x1);
        gbc.writeMem(0x3819, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3725);
        EXPECT(gbc.pc(), 0x381b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02C4
        gbc.setState(0x7203, 0x5a11, 0xad30, 0xe249, 0x554a, 0x43e7, 0x1, 0x0);
        gbc.writeMem(0x7203, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5a11);
        EXPECT(gbc.pc(), 0x7205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02C5
        gbc.setState(0x1f81, 0x8810, 0xd1f0, 0x94bc, 0xc30, 0x7c8c, 0x0, 0x0);
        gbc.writeMem(0x1f81, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8810);
        EXPECT(gbc.pc(), 0x1f83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02C6
        gbc.setState(0xaad9, 0x2119, 0x43d0, 0xd8df, 0xeb8c, 0x6674, 0x1, 0x0);
        gbc.writeMem(0xaad9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2119);
        EXPECT(gbc.pc(), 0xaadb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad9), 0xcb);
        EXPECT(gbc.readMem(0xaada), 0x3a);
        // CB 3A 02C7
        gbc.setState(0xe3f9, 0x8130, 0xc3c0, 0xe31a, 0xb2ee, 0xc1b1, 0x0, 0x0);
        gbc.writeMem(0xe3f9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8130);
        EXPECT(gbc.pc(), 0xe3fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3f9), 0xcb);
        EXPECT(gbc.readMem(0xe3fa), 0x3a);
        // CB 3A 02C8
        gbc.setState(0xd3c1, 0x643a, 0xa840, 0x3452, 0x7180, 0xe38a, 0x1, 0x1);
        gbc.writeMem(0xd3c1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x643a);
        EXPECT(gbc.pc(), 0xd3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c1), 0xcb);
        EXPECT(gbc.readMem(0xd3c2), 0x3a);
        // CB 3A 02C9
        gbc.setState(0xa893, 0xa608, 0x2e40, 0x7f75, 0x752, 0xd142, 0x0, 0x0);
        gbc.writeMem(0xa893, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa608);
        EXPECT(gbc.pc(), 0xa895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa893), 0xcb);
        EXPECT(gbc.readMem(0xa894), 0x3a);
        // CB 3A 02CA
        gbc.setState(0x6fca, 0xd020, 0x9b00, 0x2d8b, 0x9040, 0xce1c, 0x1, 0x1);
        gbc.writeMem(0x6fca, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd020);
        EXPECT(gbc.pc(), 0x6fcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02CB
        gbc.setState(0x35b5, 0x6425, 0x87c0, 0x19b, 0xbdbf, 0x8bea, 0x1, 0x1);
        gbc.writeMem(0x35b5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6425);
        EXPECT(gbc.pc(), 0x35b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02CC
        gbc.setState(0x19b0, 0x37a3, 0xd980, 0x32d2, 0x6012, 0xaedc, 0x1, 0x1);
        gbc.writeMem(0x19b0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x37a3);
        EXPECT(gbc.pc(), 0x19b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02CD
        gbc.setState(0x55, 0x334e, 0xb5d0, 0xf6c8, 0x9e6, 0x74f, 0x0, 0x0);
        gbc.writeMem(0x55, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x334e);
        EXPECT(gbc.pc(), 0x57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02CE
        gbc.setState(0xd03e, 0xcc04, 0x48e0, 0xada6, 0x3290, 0xd2b4, 0x1, 0x0);
        gbc.writeMem(0xd03e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xcc04);
        EXPECT(gbc.pc(), 0xd040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd03e), 0xcb);
        EXPECT(gbc.readMem(0xd03f), 0x3a);
        // CB 3A 02CF
        gbc.setState(0x9d9e, 0x6ca6, 0x4590, 0xe8aa, 0x4a0b, 0x6ac1, 0x1, 0x0);
        gbc.writeMem(0x9d9e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6ca6);
        EXPECT(gbc.pc(), 0x9da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9e), 0xcb);
        EXPECT(gbc.readMem(0x9d9f), 0x3a);
        // CB 3A 02D0
        gbc.setState(0x880a, 0x6f50, 0x9a50, 0xe6a5, 0xd4e6, 0x58d0, 0x1, 0x1);
        gbc.writeMem(0x880a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6f50);
        EXPECT(gbc.pc(), 0x880c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880a), 0xcb);
        EXPECT(gbc.readMem(0x880b), 0x3a);
        // CB 3A 02D1
        gbc.setState(0x2203, 0x98af, 0xc0c0, 0x8831, 0x918b, 0xb519, 0x0, 0x1);
        gbc.writeMem(0x2203, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x98af);
        EXPECT(gbc.pc(), 0x2205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02D2
        gbc.setState(0x9b95, 0x970, 0x67f0, 0x6058, 0xc413, 0xa5e3, 0x1, 0x1);
        gbc.writeMem(0x9b95, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x970);
        EXPECT(gbc.pc(), 0x9b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b95), 0xcb);
        EXPECT(gbc.readMem(0x9b96), 0x3a);
        // CB 3A 02D3
        gbc.setState(0x4dec, 0x6de2, 0x5a0, 0xf91, 0x95e1, 0xead8, 0x1, 0x0);
        gbc.writeMem(0x4dec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6de2);
        EXPECT(gbc.pc(), 0x4dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02D4
        gbc.setState(0x4b34, 0x960f, 0x30d0, 0x7d37, 0x886a, 0x757f, 0x1, 0x0);
        gbc.writeMem(0x4b34, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x960f);
        EXPECT(gbc.pc(), 0x4b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02D5
        gbc.setState(0x127b, 0x2660, 0xa920, 0x2454, 0xc43c, 0x39a6, 0x0, 0x0);
        gbc.writeMem(0x127b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2660);
        EXPECT(gbc.pc(), 0x127d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02D6
        gbc.setState(0x535, 0xfc00, 0x800, 0x1e22, 0xcd1a, 0xa862, 0x0, 0x1);
        gbc.writeMem(0x535, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfc00);
        EXPECT(gbc.pc(), 0x537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02D7
        gbc.setState(0x795b, 0x5449, 0x9c50, 0x583c, 0xfb8e, 0x5919, 0x1, 0x1);
        gbc.writeMem(0x795b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5449);
        EXPECT(gbc.pc(), 0x795d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02D8
        gbc.setState(0x56a3, 0xdde9, 0xc470, 0xfd4b, 0x20a8, 0xf885, 0x0, 0x1);
        gbc.writeMem(0x56a3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdde9);
        EXPECT(gbc.pc(), 0x56a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02D9
        gbc.setState(0xc2df, 0xf37d, 0x1e70, 0x5f0, 0xb202, 0xf2a, 0x0, 0x0);
        gbc.writeMem(0xc2df, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf37d);
        EXPECT(gbc.pc(), 0xc2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2df), 0xcb);
        EXPECT(gbc.readMem(0xc2e0), 0x3a);
        // CB 3A 02DA
        gbc.setState(0xc529, 0xc467, 0x9920, 0xfedd, 0xc337, 0xbf03, 0x1, 0x1);
        gbc.writeMem(0xc529, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc467);
        EXPECT(gbc.pc(), 0xc52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc529), 0xcb);
        EXPECT(gbc.readMem(0xc52a), 0x3a);
        // CB 3A 02DB
        gbc.setState(0xb8f3, 0xb45a, 0xa2e0, 0xb401, 0x6695, 0x25b7, 0x1, 0x0);
        gbc.writeMem(0xb8f3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb45a);
        EXPECT(gbc.pc(), 0xb8f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f3), 0xcb);
        EXPECT(gbc.readMem(0xb8f4), 0x3a);
        // CB 3A 02DC
        gbc.setState(0x2a64, 0x609, 0x9cd0, 0x35ed, 0x35c2, 0xdeb9, 0x0, 0x1);
        gbc.writeMem(0x2a64, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x609);
        EXPECT(gbc.pc(), 0x2a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02DD
        gbc.setState(0xc65b, 0x2210, 0x7cd0, 0x3064, 0x774b, 0xe045, 0x1, 0x1);
        gbc.writeMem(0xc65b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2210);
        EXPECT(gbc.pc(), 0xc65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65b), 0xcb);
        EXPECT(gbc.readMem(0xc65c), 0x3a);
        // CB 3A 02DE
        gbc.setState(0x3ca6, 0x29c5, 0x4ba0, 0x930c, 0x4bfa, 0x78dc, 0x1, 0x0);
        gbc.writeMem(0x3ca6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x29c5);
        EXPECT(gbc.pc(), 0x3ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02DF
        gbc.setState(0xc9e6, 0xd0fc, 0xc720, 0x2066, 0xd141, 0xc2a, 0x1, 0x1);
        gbc.writeMem(0xc9e6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd0fc);
        EXPECT(gbc.pc(), 0xc9e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e6), 0xcb);
        EXPECT(gbc.readMem(0xc9e7), 0x3a);
        // CB 3A 02E0
        gbc.setState(0xd13, 0x4a9e, 0xb860, 0xdb3e, 0x25c2, 0x7541, 0x0, 0x1);
        gbc.writeMem(0xd13, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4a9e);
        EXPECT(gbc.pc(), 0xd15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02E1
        gbc.setState(0x763f, 0x5e05, 0x1120, 0xc6ee, 0xaf49, 0x5d14, 0x1, 0x0);
        gbc.writeMem(0x763f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5e05);
        EXPECT(gbc.pc(), 0x7641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02E2
        gbc.setState(0xcbe9, 0x8ce4, 0x8b70, 0x198e, 0x627f, 0x585b, 0x0, 0x1);
        gbc.writeMem(0xcbe9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8ce4);
        EXPECT(gbc.pc(), 0xcbeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe9), 0xcb);
        EXPECT(gbc.readMem(0xcbea), 0x3a);
        // CB 3A 02E3
        gbc.setState(0xe379, 0xd80b, 0xbcc0, 0xf1e6, 0xba47, 0x3a18, 0x1, 0x1);
        gbc.writeMem(0xe379, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd80b);
        EXPECT(gbc.pc(), 0xe37b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe379), 0xcb);
        EXPECT(gbc.readMem(0xe37a), 0x3a);
        // CB 3A 02E4
        gbc.setState(0x222f, 0x5fae, 0x59a0, 0xc30, 0x1ae0, 0x1d8f, 0x1, 0x1);
        gbc.writeMem(0x222f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5fae);
        EXPECT(gbc.pc(), 0x2231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02E6
        gbc.setState(0xb82, 0xad8f, 0xec00, 0x7986, 0x4291, 0xf26d, 0x1, 0x0);
        gbc.writeMem(0xb82, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xad8f);
        EXPECT(gbc.pc(), 0xb84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02E7
        gbc.setState(0xd7b0, 0xaf0d, 0x9810, 0x256a, 0xfa9b, 0xc0c3, 0x0, 0x0);
        gbc.writeMem(0xd7b0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xaf0d);
        EXPECT(gbc.pc(), 0xd7b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b0), 0xcb);
        EXPECT(gbc.readMem(0xd7b1), 0x3a);
        // CB 3A 02E8
        gbc.setState(0x2be8, 0x36f2, 0x2f80, 0x746e, 0x2d70, 0x8027, 0x0, 0x1);
        gbc.writeMem(0x2be8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x36f2);
        EXPECT(gbc.pc(), 0x2bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02E9
        gbc.setState(0x5489, 0xc7d, 0x2540, 0xf3c5, 0x132b, 0x1383, 0x0, 0x0);
        gbc.writeMem(0x5489, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc7d);
        EXPECT(gbc.pc(), 0x548b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02EA
        gbc.setState(0x718c, 0xf8a4, 0xdb20, 0xaac, 0xa0b4, 0xe617, 0x1, 0x0);
        gbc.writeMem(0x718c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf8a4);
        EXPECT(gbc.pc(), 0x718e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02EB
        gbc.setState(0xeb6, 0x673d, 0x3480, 0x8fd2, 0xee27, 0xf121, 0x0, 0x1);
        gbc.writeMem(0xeb6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x673d);
        EXPECT(gbc.pc(), 0xeb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02EC
        gbc.setState(0xe7ee, 0xe0e6, 0x4cb0, 0x7b27, 0x4d47, 0x4c87, 0x0, 0x0);
        gbc.writeMem(0xe7ee, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe0e6);
        EXPECT(gbc.pc(), 0xe7f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ee), 0xcb);
        EXPECT(gbc.readMem(0xe7ef), 0x3a);
        // CB 3A 02ED
        gbc.setState(0xee28, 0x2fac, 0xd0f0, 0xa719, 0xb381, 0xae29, 0x1, 0x0);
        gbc.writeMem(0xee28, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2fac);
        EXPECT(gbc.pc(), 0xee2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee28), 0xcb);
        EXPECT(gbc.readMem(0xee29), 0x3a);
        // CB 3A 02EE
        gbc.setState(0x42e1, 0x6fd2, 0x6910, 0xf1e, 0x4e30, 0xce26, 0x1, 0x0);
        gbc.writeMem(0x42e1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6fd2);
        EXPECT(gbc.pc(), 0x42e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02EF
        gbc.setState(0x3507, 0xa8b4, 0x9970, 0x5544, 0x4b97, 0xbff4, 0x1, 0x0);
        gbc.writeMem(0x3507, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa8b4);
        EXPECT(gbc.pc(), 0x3509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02F0
        gbc.setState(0x73bf, 0xc0b2, 0x92e0, 0xa519, 0x68d7, 0xe777, 0x1, 0x1);
        gbc.writeMem(0x73bf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc0b2);
        EXPECT(gbc.pc(), 0x73c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02F1
        gbc.setState(0x26e4, 0xfa29, 0xb2a0, 0x7b32, 0x200a, 0xede6, 0x1, 0x0);
        gbc.writeMem(0x26e4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfa29);
        EXPECT(gbc.pc(), 0x26e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02F2
        gbc.setState(0xaf6b, 0x89cf, 0x5900, 0xa119, 0x4645, 0x27d, 0x0, 0x1);
        gbc.writeMem(0xaf6b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x89cf);
        EXPECT(gbc.pc(), 0xaf6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6b), 0xcb);
        EXPECT(gbc.readMem(0xaf6c), 0x3a);
        // CB 3A 02F3
        gbc.setState(0x8d1, 0xf7d2, 0xc4a0, 0xd0cc, 0x5452, 0x2430, 0x1, 0x1);
        gbc.writeMem(0x8d1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf7d2);
        EXPECT(gbc.pc(), 0x8d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 02F5
        gbc.setState(0xac45, 0x89ee, 0x1120, 0x34d4, 0xbbb5, 0x54d1, 0x1, 0x1);
        gbc.writeMem(0xac45, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x89ee);
        EXPECT(gbc.pc(), 0xac47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac45), 0xcb);
        EXPECT(gbc.readMem(0xac46), 0x3a);
        // CB 3A 02F6
        gbc.setState(0xe4fc, 0x6bbc, 0xd900, 0xbed2, 0x47f6, 0x53f5, 0x0, 0x0);
        gbc.writeMem(0xe4fc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6bbc);
        EXPECT(gbc.pc(), 0xe4fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fc), 0xcb);
        EXPECT(gbc.readMem(0xe4fd), 0x3a);
        // CB 3A 02F7
        gbc.setState(0x60e7, 0x657b, 0x3da0, 0xf218, 0x67db, 0x2d94, 0x0, 0x1);
        gbc.writeMem(0x60e7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x657b);
        EXPECT(gbc.pc(), 0x60e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02F8
        gbc.setState(0x6aac, 0xba4b, 0x3170, 0xa906, 0xbf11, 0xa24d, 0x1, 0x0);
        gbc.writeMem(0x6aac, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xba4b);
        EXPECT(gbc.pc(), 0x6aae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02F9
        gbc.setState(0xb2a6, 0x4da7, 0xe9e0, 0x22b8, 0xb025, 0x158b, 0x0, 0x1);
        gbc.writeMem(0xb2a6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4da7);
        EXPECT(gbc.pc(), 0xb2a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a6), 0xcb);
        EXPECT(gbc.readMem(0xb2a7), 0x3a);
        // CB 3A 02FA
        gbc.setState(0xb4bf, 0xbb49, 0x83c0, 0xeff3, 0x65d8, 0x64bb, 0x1, 0x0);
        gbc.writeMem(0xb4bf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbb49);
        EXPECT(gbc.pc(), 0xb4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4bf), 0xcb);
        EXPECT(gbc.readMem(0xb4c0), 0x3a);
        // CB 3A 02FB
        gbc.setState(0x3a75, 0x605a, 0xc070, 0x2a6c, 0x7f2e, 0xc048, 0x1, 0x1);
        gbc.writeMem(0x3a75, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x605a);
        EXPECT(gbc.pc(), 0x3a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 02FC
        gbc.setState(0xadb0, 0x935e, 0xfeb0, 0x19af, 0xb14b, 0x4517, 0x0, 0x1);
        gbc.writeMem(0xadb0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x935e);
        EXPECT(gbc.pc(), 0xadb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb0), 0xcb);
        EXPECT(gbc.readMem(0xadb1), 0x3a);
        // CB 3A 02FD
        gbc.setState(0xb653, 0x71f6, 0x6210, 0xdc94, 0xbb71, 0xf8c8, 0x0, 0x0);
        gbc.writeMem(0xb653, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x71f6);
        EXPECT(gbc.pc(), 0xb655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb653), 0xcb);
        EXPECT(gbc.readMem(0xb654), 0x3a);
        // CB 3A 02FE
        gbc.setState(0xb7bb, 0xb34a, 0x8ac0, 0x6685, 0xddf2, 0xc7a0, 0x1, 0x0);
        gbc.writeMem(0xb7bb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb34a);
        EXPECT(gbc.pc(), 0xb7bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7bb), 0xcb);
        EXPECT(gbc.readMem(0xb7bc), 0x3a);
        // CB 3A 02FF
        gbc.setState(0x4542, 0xeef6, 0xb970, 0x38c6, 0x7623, 0x916e, 0x1, 0x0);
        gbc.writeMem(0x4542, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xeef6);
        EXPECT(gbc.pc(), 0x4544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0300
        gbc.setState(0x8f6d, 0xf920, 0xa820, 0xa8b, 0x8485, 0x260c, 0x0, 0x1);
        gbc.writeMem(0x8f6d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf920);
        EXPECT(gbc.pc(), 0x8f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f6d), 0xcb);
        EXPECT(gbc.readMem(0x8f6e), 0x3a);
        // CB 3A 0301
        gbc.setState(0xbeb1, 0x1a71, 0x7dd0, 0x4cf6, 0x6003, 0x8b9b, 0x0, 0x0);
        gbc.writeMem(0xbeb1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1a71);
        EXPECT(gbc.pc(), 0xbeb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb1), 0xcb);
        EXPECT(gbc.readMem(0xbeb2), 0x3a);
        // CB 3A 0302
        gbc.setState(0x81db, 0xd497, 0xf1e0, 0xf1c4, 0xdb30, 0x5651, 0x0, 0x1);
        gbc.writeMem(0x81db, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd497);
        EXPECT(gbc.pc(), 0x81dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81db), 0xcb);
        EXPECT(gbc.readMem(0x81dc), 0x3a);
        // CB 3A 0303
        gbc.setState(0xca0, 0x4a4a, 0xd8e0, 0x2125, 0x818e, 0x1175, 0x1, 0x1);
        gbc.writeMem(0xca0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4a4a);
        EXPECT(gbc.pc(), 0xca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0304
        gbc.setState(0xcdb3, 0x482d, 0x7170, 0x24ac, 0xa1e4, 0x6399, 0x0, 0x0);
        gbc.writeMem(0xcdb3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x482d);
        EXPECT(gbc.pc(), 0xcdb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdb3), 0xcb);
        EXPECT(gbc.readMem(0xcdb4), 0x3a);
        // CB 3A 0305
        gbc.setState(0xe784, 0x9105, 0xc0d0, 0xac2f, 0xeb76, 0xeaa8, 0x1, 0x1);
        gbc.writeMem(0xe784, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9105);
        EXPECT(gbc.pc(), 0xe786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe784), 0xcb);
        EXPECT(gbc.readMem(0xe785), 0x3a);
        // CB 3A 0306
        gbc.setState(0xbb9b, 0x8ea6, 0xcb60, 0xe4a7, 0x7914, 0x6130, 0x1, 0x1);
        gbc.writeMem(0xbb9b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8ea6);
        EXPECT(gbc.pc(), 0xbb9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9b), 0xcb);
        EXPECT(gbc.readMem(0xbb9c), 0x3a);
        // CB 3A 0307
        gbc.setState(0xe5f4, 0xd0, 0xa000, 0x72b2, 0x4e18, 0xb148, 0x1, 0x1);
        gbc.writeMem(0xe5f4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd0);
        EXPECT(gbc.pc(), 0xe5f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f4), 0xcb);
        EXPECT(gbc.readMem(0xe5f5), 0x3a);
        // CB 3A 0308
        gbc.setState(0xa4dc, 0x61b7, 0x15e0, 0x1621, 0x10a, 0x49d2, 0x1, 0x1);
        gbc.writeMem(0xa4dc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x61b7);
        EXPECT(gbc.pc(), 0xa4de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4dc), 0xcb);
        EXPECT(gbc.readMem(0xa4dd), 0x3a);
        // CB 3A 0309
        gbc.setState(0x1e00, 0xf2de, 0x5e60, 0x8111, 0xbdbd, 0x428b, 0x1, 0x1);
        gbc.writeMem(0x1e00, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf2de);
        EXPECT(gbc.pc(), 0x1e02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 030A
        gbc.setState(0x7061, 0x29c, 0xb8a0, 0x7fda, 0xdd04, 0xdc17, 0x0, 0x0);
        gbc.writeMem(0x7061, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x29c);
        EXPECT(gbc.pc(), 0x7063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 030B
        gbc.setState(0x20c5, 0x4aef, 0xa0e0, 0x8dd9, 0x1b6a, 0x4a0d, 0x0, 0x1);
        gbc.writeMem(0x20c5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4aef);
        EXPECT(gbc.pc(), 0x20c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 030C
        gbc.setState(0xd54b, 0x3cf2, 0x9cb0, 0xcc53, 0x12a1, 0xd95a, 0x1, 0x0);
        gbc.writeMem(0xd54b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3cf2);
        EXPECT(gbc.pc(), 0xd54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd54b), 0xcb);
        EXPECT(gbc.readMem(0xd54c), 0x3a);
        // CB 3A 030D
        gbc.setState(0xb8ac, 0xbd80, 0xc80, 0xb25c, 0xc255, 0x70a7, 0x0, 0x1);
        gbc.writeMem(0xb8ac, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xbd80);
        EXPECT(gbc.pc(), 0xb8ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ac), 0xcb);
        EXPECT(gbc.readMem(0xb8ad), 0x3a);
        // CB 3A 030E
        gbc.setState(0xd8a2, 0xc595, 0x4670, 0x6ad5, 0x924c, 0xbc1d, 0x1, 0x0);
        gbc.writeMem(0xd8a2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc595);
        EXPECT(gbc.pc(), 0xd8a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8a2), 0xcb);
        EXPECT(gbc.readMem(0xd8a3), 0x3a);
        // CB 3A 030F
        gbc.setState(0xb6, 0x80e, 0x3b20, 0x75e3, 0x565c, 0xa915, 0x0, 0x0);
        gbc.writeMem(0xb6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x80e);
        EXPECT(gbc.pc(), 0xb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0310
        gbc.setState(0x15db, 0x6b3e, 0xc160, 0x1e7, 0xe31b, 0x1789, 0x1, 0x1);
        gbc.writeMem(0x15db, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6b3e);
        EXPECT(gbc.pc(), 0x15dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0311
        gbc.setState(0x4ef2, 0x7107, 0x4c60, 0x81cc, 0x3fe, 0x3d77, 0x0, 0x1);
        gbc.writeMem(0x4ef2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7107);
        EXPECT(gbc.pc(), 0x4ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0313
        gbc.setState(0x9f1c, 0x2ec9, 0xed10, 0x224e, 0x5539, 0xb46c, 0x1, 0x1);
        gbc.writeMem(0x9f1c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2ec9);
        EXPECT(gbc.pc(), 0x9f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1c), 0xcb);
        EXPECT(gbc.readMem(0x9f1d), 0x3a);
        // CB 3A 0314
        gbc.setState(0xcd28, 0x1020, 0x5b0, 0x8744, 0xdbde, 0xbf4f, 0x0, 0x1);
        gbc.writeMem(0xcd28, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1020);
        EXPECT(gbc.pc(), 0xcd2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd28), 0xcb);
        EXPECT(gbc.readMem(0xcd29), 0x3a);
        // CB 3A 0315
        gbc.setState(0x33b4, 0xa209, 0x8ed0, 0x9662, 0x74eb, 0x8ed3, 0x1, 0x1);
        gbc.writeMem(0x33b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa209);
        EXPECT(gbc.pc(), 0x33b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0316
        gbc.setState(0x4cef, 0x6eaa, 0x530, 0xc71e, 0x4a97, 0x7318, 0x0, 0x1);
        gbc.writeMem(0x4cef, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6eaa);
        EXPECT(gbc.pc(), 0x4cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0317
        gbc.setState(0xc449, 0xba03, 0x2660, 0x4471, 0x6653, 0xdf93, 0x0, 0x0);
        gbc.writeMem(0xc449, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xba03);
        EXPECT(gbc.pc(), 0xc44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc449), 0xcb);
        EXPECT(gbc.readMem(0xc44a), 0x3a);
        // CB 3A 0318
        gbc.setState(0x40b4, 0xffd0, 0xab70, 0x715e, 0x8ac1, 0xb26f, 0x0, 0x1);
        gbc.writeMem(0x40b4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xffd0);
        EXPECT(gbc.pc(), 0x40b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0319
        gbc.setState(0x9abb, 0x4e3b, 0x3520, 0xf56c, 0x7249, 0xb309, 0x1, 0x1);
        gbc.writeMem(0x9abb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4e3b);
        EXPECT(gbc.pc(), 0x9abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abb), 0xcb);
        EXPECT(gbc.readMem(0x9abc), 0x3a);
        // CB 3A 031A
        gbc.setState(0x4831, 0x5b6e, 0xdfd0, 0xa8a9, 0x5062, 0xa0de, 0x1, 0x1);
        gbc.writeMem(0x4831, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5b6e);
        EXPECT(gbc.pc(), 0x4833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 031B
        gbc.setState(0xd4a9, 0x77b2, 0xe6e0, 0xdb47, 0x1401, 0x303f, 0x0, 0x0);
        gbc.writeMem(0xd4a9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x77b2);
        EXPECT(gbc.pc(), 0xd4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a9), 0xcb);
        EXPECT(gbc.readMem(0xd4aa), 0x3a);
        // CB 3A 031C
        gbc.setState(0x50ba, 0xf768, 0xb60, 0x8d97, 0xbbdb, 0xb74e, 0x0, 0x0);
        gbc.writeMem(0x50ba, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf768);
        EXPECT(gbc.pc(), 0x50bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 031D
        gbc.setState(0x47b3, 0x3314, 0x1410, 0x7fe7, 0x7fcf, 0x3813, 0x1, 0x0);
        gbc.writeMem(0x47b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3314);
        EXPECT(gbc.pc(), 0x47b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 031E
        gbc.setState(0xeac2, 0xf4d4, 0xd500, 0x51d8, 0x7cb1, 0xe513, 0x1, 0x1);
        gbc.writeMem(0xeac2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf4d4);
        EXPECT(gbc.pc(), 0xeac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeac2), 0xcb);
        EXPECT(gbc.readMem(0xeac3), 0x3a);
        // CB 3A 031F
        gbc.setState(0x353e, 0x24fa, 0xf7f0, 0x906d, 0xd805, 0x851a, 0x0, 0x1);
        gbc.writeMem(0x353e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x24fa);
        EXPECT(gbc.pc(), 0x3540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0320
        gbc.setState(0x4c7b, 0x999c, 0x38e0, 0x415c, 0xf8cd, 0x73d5, 0x1, 0x0);
        gbc.writeMem(0x4c7b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x999c);
        EXPECT(gbc.pc(), 0x4c7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0321
        gbc.setState(0x895b, 0x67d, 0x10f0, 0x5f97, 0x1682, 0x9b8b, 0x0, 0x0);
        gbc.writeMem(0x895b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x67d);
        EXPECT(gbc.pc(), 0x895d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x895b), 0xcb);
        EXPECT(gbc.readMem(0x895c), 0x3a);
        // CB 3A 0322
        gbc.setState(0x75, 0x3c53, 0x79f0, 0x61e3, 0x201c, 0xe924, 0x1, 0x1);
        gbc.writeMem(0x75, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3c53);
        EXPECT(gbc.pc(), 0x77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0324
        gbc.setState(0x1ef5, 0xa560, 0x4540, 0x61f9, 0x6af8, 0x4150, 0x1, 0x1);
        gbc.writeMem(0x1ef5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa560);
        EXPECT(gbc.pc(), 0x1ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0325
        gbc.setState(0x5d67, 0x8399, 0x1760, 0xd2f9, 0x4b84, 0xddf8, 0x1, 0x0);
        gbc.writeMem(0x5d67, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8399);
        EXPECT(gbc.pc(), 0x5d69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0326
        gbc.setState(0x8414, 0x89e6, 0xba80, 0xca9e, 0x53d1, 0x449e, 0x0, 0x1);
        gbc.writeMem(0x8414, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x89e6);
        EXPECT(gbc.pc(), 0x8416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8414), 0xcb);
        EXPECT(gbc.readMem(0x8415), 0x3a);
        // CB 3A 0327
        gbc.setState(0x6b9, 0x731d, 0x930, 0x782c, 0xd1c0, 0xb08c, 0x0, 0x1);
        gbc.writeMem(0x6b9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x731d);
        EXPECT(gbc.pc(), 0x6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0328
        gbc.setState(0xbc8d, 0x7a61, 0x89d0, 0xcdd6, 0xcbdd, 0x2a84, 0x0, 0x0);
        gbc.writeMem(0xbc8d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7a61);
        EXPECT(gbc.pc(), 0xbc8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8d), 0xcb);
        EXPECT(gbc.readMem(0xbc8e), 0x3a);
        // CB 3A 0329
        gbc.setState(0xa295, 0x5376, 0x2f90, 0x77e1, 0x26bb, 0xd06e, 0x0, 0x0);
        gbc.writeMem(0xa295, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5376);
        EXPECT(gbc.pc(), 0xa297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa295), 0xcb);
        EXPECT(gbc.readMem(0xa296), 0x3a);
        // CB 3A 032A
        gbc.setState(0x9653, 0x4cf9, 0xe6e0, 0x66fc, 0x299b, 0x7434, 0x0, 0x1);
        gbc.writeMem(0x9653, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4cf9);
        EXPECT(gbc.pc(), 0x9655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9653), 0xcb);
        EXPECT(gbc.readMem(0x9654), 0x3a);
        // CB 3A 032C
        gbc.setState(0xc907, 0x437c, 0x6bf0, 0x402d, 0x4122, 0x2be0, 0x0, 0x0);
        gbc.writeMem(0xc907, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x437c);
        EXPECT(gbc.pc(), 0xc909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc907), 0xcb);
        EXPECT(gbc.readMem(0xc908), 0x3a);
        // CB 3A 032D
        gbc.setState(0xf9b, 0x62ef, 0xcd0, 0xd870, 0x7c29, 0xf289, 0x1, 0x0);
        gbc.writeMem(0xf9b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x62ef);
        EXPECT(gbc.pc(), 0xf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 032E
        gbc.setState(0x1569, 0x2a9b, 0x8f00, 0x527f, 0xc8ef, 0xcbdc, 0x0, 0x0);
        gbc.writeMem(0x1569, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2a9b);
        EXPECT(gbc.pc(), 0x156b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 032F
        gbc.setState(0x7562, 0xbd4b, 0xb6c0, 0xce7b, 0x7b79, 0x6cd0, 0x1, 0x0);
        gbc.writeMem(0x7562, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbd4b);
        EXPECT(gbc.pc(), 0x7564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0330
        gbc.setState(0x5c4c, 0x117, 0x2490, 0x68d2, 0x179, 0x5573, 0x0, 0x0);
        gbc.writeMem(0x5c4c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x117);
        EXPECT(gbc.pc(), 0x5c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0331
        gbc.setState(0xddff, 0x594a, 0x28e0, 0xe997, 0x5cff, 0x3209, 0x0, 0x0);
        gbc.writeMem(0xddff, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x594a);
        EXPECT(gbc.pc(), 0xde01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddff), 0xcb);
        EXPECT(gbc.readMem(0xde00), 0x3a);
        // CB 3A 0332
        gbc.setState(0x5de, 0xcdb2, 0x79e0, 0x558c, 0xbc45, 0x1a3d, 0x1, 0x1);
        gbc.writeMem(0x5de, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcdb2);
        EXPECT(gbc.pc(), 0x5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0333
        gbc.setState(0x33b3, 0x5686, 0x6610, 0xb17b, 0x7817, 0x9e55, 0x0, 0x0);
        gbc.writeMem(0x33b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5686);
        EXPECT(gbc.pc(), 0x33b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0334
        gbc.setState(0x8e4f, 0xc6cb, 0x8d10, 0x3d19, 0xc027, 0xc49f, 0x1, 0x1);
        gbc.writeMem(0x8e4f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc6cb);
        EXPECT(gbc.pc(), 0x8e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e4f), 0xcb);
        EXPECT(gbc.readMem(0x8e50), 0x3a);
        // CB 3A 0335
        gbc.setState(0x492b, 0x2de0, 0x3f00, 0x859c, 0xacd9, 0x358c, 0x1, 0x0);
        gbc.writeMem(0x492b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2de0);
        EXPECT(gbc.pc(), 0x492d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0336
        gbc.setState(0x94c5, 0xa5ac, 0x3b00, 0xe9bd, 0xc6e6, 0x18bf, 0x0, 0x1);
        gbc.writeMem(0x94c5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa5ac);
        EXPECT(gbc.pc(), 0x94c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c5), 0xcb);
        EXPECT(gbc.readMem(0x94c6), 0x3a);
        // CB 3A 0337
        gbc.setState(0x9318, 0x8e9, 0x750, 0xc6d7, 0xf6f5, 0x9ea3, 0x1, 0x0);
        gbc.writeMem(0x9318, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8e9);
        EXPECT(gbc.pc(), 0x931a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9318), 0xcb);
        EXPECT(gbc.readMem(0x9319), 0x3a);
        // CB 3A 0338
        gbc.setState(0x8fa4, 0xc7f4, 0xe5c0, 0x5022, 0x7fe9, 0x457f, 0x1, 0x1);
        gbc.writeMem(0x8fa4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc7f4);
        EXPECT(gbc.pc(), 0x8fa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa4), 0xcb);
        EXPECT(gbc.readMem(0x8fa5), 0x3a);
        // CB 3A 0339
        gbc.setState(0xe609, 0x57f7, 0x3420, 0x90c0, 0xafa4, 0x9d40, 0x1, 0x0);
        gbc.writeMem(0xe609, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x57f7);
        EXPECT(gbc.pc(), 0xe60b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe609), 0xcb);
        EXPECT(gbc.readMem(0xe60a), 0x3a);
        // CB 3A 033A
        gbc.setState(0xe5c6, 0x6bac, 0x7c50, 0xbebd, 0xd98b, 0x9894, 0x1, 0x1);
        gbc.writeMem(0xe5c6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6bac);
        EXPECT(gbc.pc(), 0xe5c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c6), 0xcb);
        EXPECT(gbc.readMem(0xe5c7), 0x3a);
        // CB 3A 033B
        gbc.setState(0x5876, 0x3818, 0x6350, 0x4708, 0x27c, 0xf10b, 0x0, 0x1);
        gbc.writeMem(0x5876, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3818);
        EXPECT(gbc.pc(), 0x5878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 033C
        gbc.setState(0x481a, 0x7e27, 0xfc40, 0x6d19, 0xf663, 0xfb91, 0x1, 0x1);
        gbc.writeMem(0x481a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7e27);
        EXPECT(gbc.pc(), 0x481c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 033D
        gbc.setState(0xaf67, 0xd5d6, 0xf9a0, 0x875a, 0x3c5, 0x8b46, 0x1, 0x1);
        gbc.writeMem(0xaf67, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd5d6);
        EXPECT(gbc.pc(), 0xaf69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf67), 0xcb);
        EXPECT(gbc.readMem(0xaf68), 0x3a);
        // CB 3A 033F
        gbc.setState(0xa1e1, 0x14aa, 0xf590, 0xac95, 0x3702, 0x8f27, 0x0, 0x1);
        gbc.writeMem(0xa1e1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x14aa);
        EXPECT(gbc.pc(), 0xa1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1e1), 0xcb);
        EXPECT(gbc.readMem(0xa1e2), 0x3a);
        // CB 3A 0340
        gbc.setState(0x37db, 0xa3b0, 0xc880, 0x3059, 0xe3e5, 0x4e47, 0x0, 0x0);
        gbc.writeMem(0x37db, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa3b0);
        EXPECT(gbc.pc(), 0x37dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0341
        gbc.setState(0x9b4f, 0x15ae, 0x5570, 0x3ab7, 0x20b4, 0xe0c3, 0x1, 0x1);
        gbc.writeMem(0x9b4f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x15ae);
        EXPECT(gbc.pc(), 0x9b51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4f), 0xcb);
        EXPECT(gbc.readMem(0x9b50), 0x3a);
        // CB 3A 0342
        gbc.setState(0x46ec, 0x6af8, 0x43f0, 0xf89b, 0x8c7d, 0xae4a, 0x1, 0x0);
        gbc.writeMem(0x46ec, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6af8);
        EXPECT(gbc.pc(), 0x46ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0343
        gbc.setState(0xde3c, 0xfe7d, 0xe690, 0xddad, 0x1731, 0x532, 0x1, 0x0);
        gbc.writeMem(0xde3c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xfe7d);
        EXPECT(gbc.pc(), 0xde3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3c), 0xcb);
        EXPECT(gbc.readMem(0xde3d), 0x3a);
        // CB 3A 0344
        gbc.setState(0x9e41, 0xb611, 0x4cc0, 0x780c, 0xae16, 0xb870, 0x0, 0x1);
        gbc.writeMem(0x9e41, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb611);
        EXPECT(gbc.pc(), 0x9e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e41), 0xcb);
        EXPECT(gbc.readMem(0x9e42), 0x3a);
        // CB 3A 0345
        gbc.setState(0xd381, 0xa750, 0xade0, 0xc614, 0xb997, 0x9dba, 0x1, 0x0);
        gbc.writeMem(0xd381, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa750);
        EXPECT(gbc.pc(), 0xd383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd381), 0xcb);
        EXPECT(gbc.readMem(0xd382), 0x3a);
        // CB 3A 0346
        gbc.setState(0x19e6, 0x93fd, 0xbb10, 0x4941, 0x53f0, 0x4032, 0x1, 0x0);
        gbc.writeMem(0x19e6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x93fd);
        EXPECT(gbc.pc(), 0x19e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0347
        gbc.setState(0x4483, 0x3617, 0xccc0, 0xfd59, 0x649b, 0x1cea, 0x0, 0x1);
        gbc.writeMem(0x4483, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3617);
        EXPECT(gbc.pc(), 0x4485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0348
        gbc.setState(0x2ddd, 0x1972, 0x2480, 0x5f4c, 0x77, 0x5ae8, 0x0, 0x1);
        gbc.writeMem(0x2ddd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1972);
        EXPECT(gbc.pc(), 0x2ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0349
        gbc.setState(0x27a8, 0x9700, 0xc120, 0xb78d, 0x30b6, 0xa321, 0x1, 0x1);
        gbc.writeMem(0x27a8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9700);
        EXPECT(gbc.pc(), 0x27aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 034A
        gbc.setState(0x292f, 0xc9fc, 0x6bd0, 0x87d3, 0xe44f, 0x2114, 0x0, 0x0);
        gbc.writeMem(0x292f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc9fc);
        EXPECT(gbc.pc(), 0x2931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 034B
        gbc.setState(0xa634, 0xead9, 0x7d90, 0xf46e, 0x7b08, 0x80f9, 0x1, 0x0);
        gbc.writeMem(0xa634, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xead9);
        EXPECT(gbc.pc(), 0xa636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa634), 0xcb);
        EXPECT(gbc.readMem(0xa635), 0x3a);
        // CB 3A 034C
        gbc.setState(0x11e1, 0x8a1, 0xc040, 0xc63, 0xee67, 0x7b22, 0x1, 0x0);
        gbc.writeMem(0x11e1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8a1);
        EXPECT(gbc.pc(), 0x11e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 034D
        gbc.setState(0xb24a, 0x4aca, 0x4e0, 0x4cb1, 0xe8dd, 0x662d, 0x1, 0x1);
        gbc.writeMem(0xb24a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4aca);
        EXPECT(gbc.pc(), 0xb24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb24a), 0xcb);
        EXPECT(gbc.readMem(0xb24b), 0x3a);
        // CB 3A 034E
        gbc.setState(0x6f52, 0x19c1, 0xc1a0, 0xdd6, 0xa145, 0x1011, 0x1, 0x1);
        gbc.writeMem(0x6f52, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x19c1);
        EXPECT(gbc.pc(), 0x6f54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 034F
        gbc.setState(0x6ac3, 0x95aa, 0x5350, 0x8eb0, 0x4c75, 0x427f, 0x1, 0x1);
        gbc.writeMem(0x6ac3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x95aa);
        EXPECT(gbc.pc(), 0x6ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0350
        gbc.setState(0xb714, 0x44a4, 0x1b0, 0x9b93, 0x901b, 0x1a58, 0x0, 0x1);
        gbc.writeMem(0xb714, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x44a4);
        EXPECT(gbc.pc(), 0xb716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb714), 0xcb);
        EXPECT(gbc.readMem(0xb715), 0x3a);
        // CB 3A 0351
        gbc.setState(0x9d12, 0x830c, 0x50b0, 0x5338, 0x914d, 0xcaef, 0x0, 0x0);
        gbc.writeMem(0x9d12, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x830c);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d12), 0xcb);
        EXPECT(gbc.readMem(0x9d13), 0x3a);
        // CB 3A 0352
        gbc.setState(0xa347, 0xe3fe, 0x3170, 0x604d, 0xd11c, 0xb53c, 0x0, 0x0);
        gbc.writeMem(0xa347, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe3fe);
        EXPECT(gbc.pc(), 0xa349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa347), 0xcb);
        EXPECT(gbc.readMem(0xa348), 0x3a);
        // CB 3A 0353
        gbc.setState(0x8e24, 0x10e4, 0x4240, 0x7719, 0x6978, 0xbb72, 0x0, 0x0);
        gbc.writeMem(0x8e24, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x10e4);
        EXPECT(gbc.pc(), 0x8e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e24), 0xcb);
        EXPECT(gbc.readMem(0x8e25), 0x3a);
        // CB 3A 0357
        gbc.setState(0x80ad, 0x1829, 0xa4f0, 0xb198, 0x7da4, 0x2da, 0x0, 0x0);
        gbc.writeMem(0x80ad, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1829);
        EXPECT(gbc.pc(), 0x80af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ad), 0xcb);
        EXPECT(gbc.readMem(0x80ae), 0x3a);
        // CB 3A 0358
        gbc.setState(0x3b4c, 0xa594, 0xece0, 0x49e6, 0x5586, 0xda70, 0x1, 0x0);
        gbc.writeMem(0x3b4c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa594);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0359
        gbc.setState(0x77cd, 0x24ff, 0x1910, 0x5a0c, 0x8d5f, 0xb104, 0x0, 0x0);
        gbc.writeMem(0x77cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x24ff);
        EXPECT(gbc.pc(), 0x77cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 035A
        gbc.setState(0x323, 0x69d, 0xbe30, 0xc397, 0xa39a, 0x7c6c, 0x1, 0x1);
        gbc.writeMem(0x323, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x69d);
        EXPECT(gbc.pc(), 0x325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 035B
        gbc.setState(0x3c0, 0xa945, 0x900, 0xfae8, 0x4241, 0xaac9, 0x0, 0x1);
        gbc.writeMem(0x3c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa945);
        EXPECT(gbc.pc(), 0x3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 035C
        gbc.setState(0xd7f5, 0xcc88, 0x4630, 0x3fa, 0x6920, 0x324e, 0x1, 0x1);
        gbc.writeMem(0xd7f5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xcc88);
        EXPECT(gbc.pc(), 0xd7f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f5), 0xcb);
        EXPECT(gbc.readMem(0xd7f6), 0x3a);
        // CB 3A 035D
        gbc.setState(0x2f80, 0x9738, 0x840, 0xc437, 0x38b, 0x42eb, 0x0, 0x0);
        gbc.writeMem(0x2f80, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9738);
        EXPECT(gbc.pc(), 0x2f82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 035E
        gbc.setState(0xbe54, 0xc1aa, 0x1500, 0x4fe4, 0xdd82, 0x5d05, 0x0, 0x1);
        gbc.writeMem(0xbe54, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc1aa);
        EXPECT(gbc.pc(), 0xbe56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe54), 0xcb);
        EXPECT(gbc.readMem(0xbe55), 0x3a);
        // CB 3A 035F
        gbc.setState(0x4d02, 0x1e82, 0x7380, 0x9365, 0x2f6a, 0x604a, 0x1, 0x0);
        gbc.writeMem(0x4d02, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1e82);
        EXPECT(gbc.pc(), 0x4d04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0360
        gbc.setState(0xb0db, 0xb7df, 0x62e0, 0x2ed2, 0x8b23, 0x5d66, 0x1, 0x0);
        gbc.writeMem(0xb0db, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb7df);
        EXPECT(gbc.pc(), 0xb0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0db), 0xcb);
        EXPECT(gbc.readMem(0xb0dc), 0x3a);
        // CB 3A 0361
        gbc.setState(0x3dbe, 0x5774, 0x2380, 0xa70b, 0x183a, 0xc5c9, 0x1, 0x0);
        gbc.writeMem(0x3dbe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5774);
        EXPECT(gbc.pc(), 0x3dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0362
        gbc.setState(0x9617, 0x52fa, 0x7700, 0x856c, 0x6bb3, 0x6b1a, 0x0, 0x0);
        gbc.writeMem(0x9617, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x52fa);
        EXPECT(gbc.pc(), 0x9619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9617), 0xcb);
        EXPECT(gbc.readMem(0x9618), 0x3a);
        // CB 3A 0363
        gbc.setState(0x840b, 0x8bdb, 0x9d70, 0x4b6a, 0x56e9, 0xbda9, 0x0, 0x1);
        gbc.writeMem(0x840b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8bdb);
        EXPECT(gbc.pc(), 0x840d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840b), 0xcb);
        EXPECT(gbc.readMem(0x840c), 0x3a);
        // CB 3A 0364
        gbc.setState(0x21a1, 0xe393, 0x2d30, 0xd3f, 0xca4a, 0xb949, 0x0, 0x1);
        gbc.writeMem(0x21a1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe393);
        EXPECT(gbc.pc(), 0x21a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0365
        gbc.setState(0x1d72, 0xf6a0, 0x7400, 0xa5b4, 0x54d8, 0x208a, 0x0, 0x1);
        gbc.writeMem(0x1d72, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf6a0);
        EXPECT(gbc.pc(), 0x1d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0366
        gbc.setState(0xc8ae, 0x85e0, 0xb870, 0x1c39, 0xd407, 0x165d, 0x0, 0x1);
        gbc.writeMem(0xc8ae, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x85e0);
        EXPECT(gbc.pc(), 0xc8b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ae), 0xcb);
        EXPECT(gbc.readMem(0xc8af), 0x3a);
        // CB 3A 0367
        gbc.setState(0x325, 0xa620, 0x88f0, 0xc39, 0x3f16, 0xcad, 0x0, 0x0);
        gbc.writeMem(0x325, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa620);
        EXPECT(gbc.pc(), 0x327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0368
        gbc.setState(0x4f28, 0x5596, 0xa750, 0xb937, 0x83fd, 0xa2fe, 0x1, 0x0);
        gbc.writeMem(0x4f28, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5596);
        EXPECT(gbc.pc(), 0x4f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0369
        gbc.setState(0xc3d9, 0xd7cc, 0x450, 0x7b72, 0x360e, 0x9409, 0x0, 0x0);
        gbc.writeMem(0xc3d9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd7cc);
        EXPECT(gbc.pc(), 0xc3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d9), 0xcb);
        EXPECT(gbc.readMem(0xc3da), 0x3a);
        // CB 3A 036A
        gbc.setState(0x71d3, 0x314e, 0x7150, 0x7bc8, 0x5788, 0x117a, 0x0, 0x0);
        gbc.writeMem(0x71d3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x314e);
        EXPECT(gbc.pc(), 0x71d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 036B
        gbc.setState(0x24d3, 0xcdc5, 0x1640, 0xa6cd, 0xf7e2, 0x1b6f, 0x1, 0x0);
        gbc.writeMem(0x24d3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcdc5);
        EXPECT(gbc.pc(), 0x24d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 036C
        gbc.setState(0x5790, 0xa9d8, 0xd7d0, 0x7267, 0x4fe7, 0x9bef, 0x0, 0x1);
        gbc.writeMem(0x5790, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa9d8);
        EXPECT(gbc.pc(), 0x5792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 036D
        gbc.setState(0x525a, 0xca4b, 0x3430, 0x3ddf, 0x8778, 0xed29, 0x0, 0x0);
        gbc.writeMem(0x525a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xca4b);
        EXPECT(gbc.pc(), 0x525c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 036E
        gbc.setState(0x55ea, 0x5841, 0x17e0, 0x4bb1, 0x5bf5, 0x837e, 0x1, 0x1);
        gbc.writeMem(0x55ea, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5841);
        EXPECT(gbc.pc(), 0x55ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 036F
        gbc.setState(0x78c0, 0xbe9e, 0x5c40, 0x20be, 0x2d3f, 0x77df, 0x0, 0x1);
        gbc.writeMem(0x78c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbe9e);
        EXPECT(gbc.pc(), 0x78c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0370
        gbc.setState(0xbd26, 0xe914, 0x10c0, 0x65c, 0xb7cd, 0xe446, 0x0, 0x1);
        gbc.writeMem(0xbd26, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe914);
        EXPECT(gbc.pc(), 0xbd28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd26), 0xcb);
        EXPECT(gbc.readMem(0xbd27), 0x3a);
        // CB 3A 0371
        gbc.setState(0x886e, 0xb31a, 0x60f0, 0xf44a, 0x6390, 0x69cd, 0x1, 0x0);
        gbc.writeMem(0x886e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb31a);
        EXPECT(gbc.pc(), 0x8870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x886e), 0xcb);
        EXPECT(gbc.readMem(0x886f), 0x3a);
        // CB 3A 0372
        gbc.setState(0x716, 0xe8a5, 0x53d0, 0x26b2, 0xdc19, 0xced3, 0x1, 0x0);
        gbc.writeMem(0x716, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe8a5);
        EXPECT(gbc.pc(), 0x718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0373
        gbc.setState(0xdbfe, 0xde38, 0x69a0, 0x14da, 0xfffb, 0x9798, 0x0, 0x1);
        gbc.writeMem(0xdbfe, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xde38);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbfe), 0xcb);
        EXPECT(gbc.readMem(0xdbff), 0x3a);
        // CB 3A 0374
        gbc.setState(0x4f45, 0x831b, 0x2520, 0x8b9a, 0x936, 0x9db2, 0x0, 0x0);
        gbc.writeMem(0x4f45, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x831b);
        EXPECT(gbc.pc(), 0x4f47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0375
        gbc.setState(0xadf4, 0xd599, 0x190, 0xe890, 0x17a5, 0x83c5, 0x1, 0x0);
        gbc.writeMem(0xadf4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd599);
        EXPECT(gbc.pc(), 0xadf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf4), 0xcb);
        EXPECT(gbc.readMem(0xadf5), 0x3a);
        // CB 3A 0376
        gbc.setState(0xa96f, 0xa951, 0x91c0, 0xcde0, 0xe7bf, 0x5693, 0x0, 0x1);
        gbc.writeMem(0xa96f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa951);
        EXPECT(gbc.pc(), 0xa971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa96f), 0xcb);
        EXPECT(gbc.readMem(0xa970), 0x3a);
        // CB 3A 0377
        gbc.setState(0x7289, 0x96a3, 0xbe00, 0x8c45, 0x6b06, 0x6421, 0x1, 0x0);
        gbc.writeMem(0x7289, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x96a3);
        EXPECT(gbc.pc(), 0x728b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0378
        gbc.setState(0x9b20, 0x945e, 0xe6c0, 0x9809, 0x283a, 0xac90, 0x1, 0x0);
        gbc.writeMem(0x9b20, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x945e);
        EXPECT(gbc.pc(), 0x9b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b20), 0xcb);
        EXPECT(gbc.readMem(0x9b21), 0x3a);
        // CB 3A 0379
        gbc.setState(0x6558, 0x830c, 0x7180, 0x9cff, 0xdbad, 0xd8bf, 0x0, 0x0);
        gbc.writeMem(0x6558, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x830c);
        EXPECT(gbc.pc(), 0x655a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 037A
        gbc.setState(0xcda2, 0x3955, 0x6190, 0x9362, 0xb4da, 0xc04, 0x1, 0x0);
        gbc.writeMem(0xcda2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3955);
        EXPECT(gbc.pc(), 0xcda4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda2), 0xcb);
        EXPECT(gbc.readMem(0xcda3), 0x3a);
        // CB 3A 037B
        gbc.setState(0x7178, 0x92da, 0x53c0, 0xc8ea, 0xd8c7, 0xfa9b, 0x0, 0x0);
        gbc.writeMem(0x7178, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x92da);
        EXPECT(gbc.pc(), 0x717a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 037C
        gbc.setState(0xc618, 0x8191, 0x8340, 0xbd12, 0x6ddb, 0x4d9b, 0x1, 0x0);
        gbc.writeMem(0xc618, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8191);
        EXPECT(gbc.pc(), 0xc61a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc618), 0xcb);
        EXPECT(gbc.readMem(0xc619), 0x3a);
        // CB 3A 037D
        gbc.setState(0xb817, 0xee7f, 0x3110, 0x2fcd, 0xb80, 0x593a, 0x1, 0x0);
        gbc.writeMem(0xb817, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xee7f);
        EXPECT(gbc.pc(), 0xb819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb817), 0xcb);
        EXPECT(gbc.readMem(0xb818), 0x3a);
        // CB 3A 037E
        gbc.setState(0xd146, 0x7b93, 0x8cf0, 0xe574, 0xcb67, 0x76c3, 0x0, 0x1);
        gbc.writeMem(0xd146, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7b93);
        EXPECT(gbc.pc(), 0xd148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd146), 0xcb);
        EXPECT(gbc.readMem(0xd147), 0x3a);
        // CB 3A 037F
        gbc.setState(0xc7c8, 0x199c, 0xa010, 0xe8f9, 0x918e, 0x6461, 0x1, 0x1);
        gbc.writeMem(0xc7c8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x199c);
        EXPECT(gbc.pc(), 0xc7ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c8), 0xcb);
        EXPECT(gbc.readMem(0xc7c9), 0x3a);
        // CB 3A 0380
        gbc.setState(0x8bf8, 0x4b9c, 0x4c0, 0xd9f4, 0x6032, 0x67a6, 0x1, 0x1);
        gbc.writeMem(0x8bf8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4b9c);
        EXPECT(gbc.pc(), 0x8bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf8), 0xcb);
        EXPECT(gbc.readMem(0x8bf9), 0x3a);
        // CB 3A 0381
        gbc.setState(0x72d5, 0xbfc5, 0x13d0, 0x80da, 0x7d9d, 0xb963, 0x0, 0x0);
        gbc.writeMem(0x72d5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbfc5);
        EXPECT(gbc.pc(), 0x72d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0382
        gbc.setState(0x7586, 0xa6ff, 0x2bd0, 0x8831, 0xacf8, 0x66bf, 0x0, 0x0);
        gbc.writeMem(0x7586, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa6ff);
        EXPECT(gbc.pc(), 0x7588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0383
        gbc.setState(0xb164, 0xfc3, 0x4210, 0x5c0b, 0x7e17, 0x2ba5, 0x0, 0x1);
        gbc.writeMem(0xb164, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfc3);
        EXPECT(gbc.pc(), 0xb166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb164), 0xcb);
        EXPECT(gbc.readMem(0xb165), 0x3a);
        // CB 3A 0384
        gbc.setState(0xdaf3, 0xe370, 0x29f0, 0x8910, 0x9649, 0xb0e1, 0x0, 0x0);
        gbc.writeMem(0xdaf3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe370);
        EXPECT(gbc.pc(), 0xdaf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf3), 0xcb);
        EXPECT(gbc.readMem(0xdaf4), 0x3a);
        // CB 3A 0385
        gbc.setState(0x906a, 0x5a4, 0xfa00, 0x118c, 0x365d, 0xea8f, 0x0, 0x0);
        gbc.writeMem(0x906a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5a4);
        EXPECT(gbc.pc(), 0x906c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906a), 0xcb);
        EXPECT(gbc.readMem(0x906b), 0x3a);
        // CB 3A 0386
        gbc.setState(0x9f4c, 0x1910, 0xa180, 0xdd0c, 0xfcb6, 0xbdea, 0x0, 0x1);
        gbc.writeMem(0x9f4c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1910);
        EXPECT(gbc.pc(), 0x9f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4c), 0xcb);
        EXPECT(gbc.readMem(0x9f4d), 0x3a);
        // CB 3A 0387
        gbc.setState(0x9831, 0xe324, 0x9a20, 0x2de4, 0x582b, 0x39de, 0x1, 0x1);
        gbc.writeMem(0x9831, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe324);
        EXPECT(gbc.pc(), 0x9833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9831), 0xcb);
        EXPECT(gbc.readMem(0x9832), 0x3a);
        // CB 3A 0388
        gbc.setState(0x993d, 0xdd80, 0x80a0, 0xabe5, 0x9daa, 0xf3a6, 0x1, 0x1);
        gbc.writeMem(0x993d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdd80);
        EXPECT(gbc.pc(), 0x993f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993d), 0xcb);
        EXPECT(gbc.readMem(0x993e), 0x3a);
        // CB 3A 0389
        gbc.setState(0x21e9, 0x306f, 0xa060, 0x3cfc, 0x3cad, 0xde46, 0x1, 0x0);
        gbc.writeMem(0x21e9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x306f);
        EXPECT(gbc.pc(), 0x21eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 038A
        gbc.setState(0x5fb, 0x49ac, 0x6820, 0x3db5, 0xcf77, 0x5011, 0x1, 0x1);
        gbc.writeMem(0x5fb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x49ac);
        EXPECT(gbc.pc(), 0x5fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 038B
        gbc.setState(0xd812, 0xa9e, 0x6eb0, 0x77f1, 0xaa86, 0xd3ae, 0x1, 0x1);
        gbc.writeMem(0xd812, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa9e);
        EXPECT(gbc.pc(), 0xd814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd812), 0xcb);
        EXPECT(gbc.readMem(0xd813), 0x3a);
        // CB 3A 038C
        gbc.setState(0x855e, 0x618a, 0x4c00, 0xdab1, 0x763f, 0x71b1, 0x1, 0x1);
        gbc.writeMem(0x855e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x618a);
        EXPECT(gbc.pc(), 0x8560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x855e), 0xcb);
        EXPECT(gbc.readMem(0x855f), 0x3a);
        // CB 3A 038D
        gbc.setState(0x6008, 0x15, 0x5a10, 0x58c5, 0xa5af, 0x7c28, 0x1, 0x0);
        gbc.writeMem(0x6008, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x15);
        EXPECT(gbc.pc(), 0x600a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 038E
        gbc.setState(0xc34d, 0xe310, 0xb310, 0x525e, 0x81c6, 0x5d42, 0x0, 0x1);
        gbc.writeMem(0xc34d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe310);
        EXPECT(gbc.pc(), 0xc34f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34d), 0xcb);
        EXPECT(gbc.readMem(0xc34e), 0x3a);
        // CB 3A 038F
        gbc.setState(0x6352, 0x6a88, 0xeb50, 0xcdbd, 0x64d7, 0x38c0, 0x1, 0x0);
        gbc.writeMem(0x6352, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6a88);
        EXPECT(gbc.pc(), 0x6354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0390
        gbc.setState(0xcb85, 0x5937, 0x41c0, 0x5a01, 0x1bcb, 0xab22, 0x1, 0x1);
        gbc.writeMem(0xcb85, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5937);
        EXPECT(gbc.pc(), 0xcb87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb85), 0xcb);
        EXPECT(gbc.readMem(0xcb86), 0x3a);
        // CB 3A 0391
        gbc.setState(0xc44f, 0x8451, 0x57f0, 0xa7f0, 0x7605, 0x5aa5, 0x0, 0x1);
        gbc.writeMem(0xc44f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8451);
        EXPECT(gbc.pc(), 0xc451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc44f), 0xcb);
        EXPECT(gbc.readMem(0xc450), 0x3a);
        // CB 3A 0392
        gbc.setState(0x60ed, 0x3820, 0x360, 0xd6d5, 0xeabe, 0x6476, 0x0, 0x1);
        gbc.writeMem(0x60ed, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3820);
        EXPECT(gbc.pc(), 0x60ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0393
        gbc.setState(0x432b, 0xedc3, 0xa200, 0x9bc9, 0x5e9, 0x70f2, 0x0, 0x0);
        gbc.writeMem(0x432b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xedc3);
        EXPECT(gbc.pc(), 0x432d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0394
        gbc.setState(0x605a, 0xf717, 0xb30, 0xd34f, 0xccc8, 0x357f, 0x1, 0x0);
        gbc.writeMem(0x605a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf717);
        EXPECT(gbc.pc(), 0x605c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 0395
        gbc.setState(0x1c0, 0x4650, 0x7360, 0x392e, 0xb9b6, 0xd09, 0x1, 0x1);
        gbc.writeMem(0x1c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4650);
        EXPECT(gbc.pc(), 0x1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0396
        gbc.setState(0xd3bd, 0x9c8b, 0x5560, 0x35f2, 0x682, 0xbb4, 0x0, 0x1);
        gbc.writeMem(0xd3bd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9c8b);
        EXPECT(gbc.pc(), 0xd3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3bd), 0xcb);
        EXPECT(gbc.readMem(0xd3be), 0x3a);
        // CB 3A 0397
        gbc.setState(0x6d4, 0xc0dc, 0x76e0, 0x3bdf, 0x7f5f, 0xd9c9, 0x1, 0x0);
        gbc.writeMem(0x6d4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc0dc);
        EXPECT(gbc.pc(), 0x6d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0398
        gbc.setState(0x5342, 0x16a, 0xec00, 0x1c00, 0xa9a8, 0x7a83, 0x1, 0x1);
        gbc.writeMem(0x5342, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x16a);
        EXPECT(gbc.pc(), 0x5344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 0399
        gbc.setState(0x4ffd, 0xdd68, 0xfcb0, 0xb45b, 0xed5d, 0x226d, 0x0, 0x1);
        gbc.writeMem(0x4ffd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdd68);
        EXPECT(gbc.pc(), 0x4fff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 039A
        gbc.setState(0x6ed4, 0x3627, 0xfd50, 0x8b43, 0x10f1, 0x1a01, 0x0, 0x1);
        gbc.writeMem(0x6ed4, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3627);
        EXPECT(gbc.pc(), 0x6ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 039B
        gbc.setState(0xb7f8, 0x383d, 0x19c0, 0xcaa2, 0x7ad4, 0xa499, 0x0, 0x1);
        gbc.writeMem(0xb7f8, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x383d);
        EXPECT(gbc.pc(), 0xb7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f8), 0xcb);
        EXPECT(gbc.readMem(0xb7f9), 0x3a);
        // CB 3A 039C
        gbc.setState(0x3bf7, 0x1f51, 0x2e20, 0xba73, 0xa0bf, 0x1, 0x1, 0x1);
        gbc.writeMem(0x3bf7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1f51);
        EXPECT(gbc.pc(), 0x3bf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 039D
        gbc.setState(0x2c22, 0xe5a4, 0x6810, 0x159a, 0xf276, 0xa4e8, 0x1, 0x0);
        gbc.writeMem(0x2c22, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe5a4);
        EXPECT(gbc.pc(), 0x2c24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 039E
        gbc.setState(0xbc3a, 0x8521, 0xe100, 0x604a, 0x55c3, 0xb5dd, 0x1, 0x0);
        gbc.writeMem(0xbc3a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8521);
        EXPECT(gbc.pc(), 0xbc3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc3a), 0xcb);
        EXPECT(gbc.readMem(0xbc3b), 0x3a);
        // CB 3A 039F
        gbc.setState(0x11dc, 0x1b92, 0xd950, 0x17b, 0x7296, 0x42bb, 0x1, 0x0);
        gbc.writeMem(0x11dc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1b92);
        EXPECT(gbc.pc(), 0x11de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03A1
        gbc.setState(0x478d, 0xa551, 0x10c0, 0xe933, 0x8e42, 0xeab, 0x0, 0x1);
        gbc.writeMem(0x478d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa551);
        EXPECT(gbc.pc(), 0x478f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03A2
        gbc.setState(0x2329, 0x2405, 0x9580, 0x96f7, 0xb18, 0xef30, 0x1, 0x0);
        gbc.writeMem(0x2329, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2405);
        EXPECT(gbc.pc(), 0x232b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03A3
        gbc.setState(0x6c73, 0xe76b, 0x3ad0, 0xd1f3, 0x70f5, 0x6110, 0x1, 0x0);
        gbc.writeMem(0x6c73, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe76b);
        EXPECT(gbc.pc(), 0x6c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03A4
        gbc.setState(0xbe6f, 0xd341, 0x1020, 0xc1f8, 0x4bef, 0x976b, 0x0, 0x0);
        gbc.writeMem(0xbe6f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd341);
        EXPECT(gbc.pc(), 0xbe71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe6f), 0xcb);
        EXPECT(gbc.readMem(0xbe70), 0x3a);
        // CB 3A 03A5
        gbc.setState(0xc68a, 0xb77d, 0xba70, 0xda1d, 0x9311, 0xf474, 0x0, 0x0);
        gbc.writeMem(0xc68a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb77d);
        EXPECT(gbc.pc(), 0xc68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc68a), 0xcb);
        EXPECT(gbc.readMem(0xc68b), 0x3a);
        // CB 3A 03A6
        gbc.setState(0xb80e, 0xe8ce, 0x3fa0, 0x5688, 0xd613, 0x17ae, 0x0, 0x1);
        gbc.writeMem(0xb80e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe8ce);
        EXPECT(gbc.pc(), 0xb810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb80e), 0xcb);
        EXPECT(gbc.readMem(0xb80f), 0x3a);
        // CB 3A 03A7
        gbc.setState(0xb292, 0xac6d, 0x9550, 0x5e49, 0x83f0, 0x7561, 0x0, 0x1);
        gbc.writeMem(0xb292, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xac6d);
        EXPECT(gbc.pc(), 0xb294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb292), 0xcb);
        EXPECT(gbc.readMem(0xb293), 0x3a);
        // CB 3A 03A8
        gbc.setState(0x8055, 0x379a, 0x850, 0xdce1, 0xcf1b, 0xede7, 0x1, 0x0);
        gbc.writeMem(0x8055, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x379a);
        EXPECT(gbc.pc(), 0x8057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8055), 0xcb);
        EXPECT(gbc.readMem(0x8056), 0x3a);
        // CB 3A 03AA
        gbc.setState(0x2f68, 0x9f6a, 0xdfb0, 0xcd7b, 0x6631, 0x2d3d, 0x0, 0x0);
        gbc.writeMem(0x2f68, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9f6a);
        EXPECT(gbc.pc(), 0x2f6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03AB
        gbc.setState(0xaf62, 0xb9e5, 0x53d0, 0xdc05, 0xb4c5, 0xbd91, 0x0, 0x0);
        gbc.writeMem(0xaf62, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb9e5);
        EXPECT(gbc.pc(), 0xaf64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf62), 0xcb);
        EXPECT(gbc.readMem(0xaf63), 0x3a);
        // CB 3A 03AC
        gbc.setState(0x34b2, 0xb3ce, 0x6ee0, 0xfda1, 0xdbd, 0xc034, 0x0, 0x1);
        gbc.writeMem(0x34b2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb3ce);
        EXPECT(gbc.pc(), 0x34b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03AD
        gbc.setState(0xbe6, 0x40d4, 0x2a00, 0x7167, 0x441b, 0x1e19, 0x1, 0x0);
        gbc.writeMem(0xbe6, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x40d4);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03AE
        gbc.setState(0x10cf, 0xf265, 0x61b0, 0x8440, 0x56b0, 0xc68a, 0x1, 0x1);
        gbc.writeMem(0x10cf, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf265);
        EXPECT(gbc.pc(), 0x10d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03AF
        gbc.setState(0xc5fa, 0x7ef5, 0xc260, 0x233, 0x9246, 0x5394, 0x0, 0x1);
        gbc.writeMem(0xc5fa, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7ef5);
        EXPECT(gbc.pc(), 0xc5fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fa), 0xcb);
        EXPECT(gbc.readMem(0xc5fb), 0x3a);
        // CB 3A 03B0
        gbc.setState(0xa72a, 0x8669, 0x5400, 0xc31a, 0xa5e1, 0x50e2, 0x1, 0x1);
        gbc.writeMem(0xa72a, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8669);
        EXPECT(gbc.pc(), 0xa72c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa72a), 0xcb);
        EXPECT(gbc.readMem(0xa72b), 0x3a);
        // CB 3A 03B3
        gbc.setState(0x463c, 0xfd67, 0x1240, 0x764b, 0x9560, 0x8fb9, 0x0, 0x0);
        gbc.writeMem(0x463c, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfd67);
        EXPECT(gbc.pc(), 0x463e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03B4
        gbc.setState(0xaa13, 0x8a41, 0xbba0, 0xd7d7, 0x2957, 0x5066, 0x0, 0x0);
        gbc.writeMem(0xaa13, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8a41);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa13), 0xcb);
        EXPECT(gbc.readMem(0xaa14), 0x3a);
        // CB 3A 03B5
        gbc.setState(0xe334, 0x124, 0xc650, 0xef11, 0x9230, 0xff41, 0x0, 0x0);
        gbc.writeMem(0xe334, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x124);
        EXPECT(gbc.pc(), 0xe336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe334), 0xcb);
        EXPECT(gbc.readMem(0xe335), 0x3a);
        // CB 3A 03B6
        gbc.setState(0x4681, 0x4c9d, 0x4c30, 0xe388, 0xe721, 0xf60, 0x0, 0x0);
        gbc.writeMem(0x4681, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4c9d);
        EXPECT(gbc.pc(), 0x4683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03B7
        gbc.setState(0x8c23, 0x5a3e, 0x5de0, 0x7608, 0x3b17, 0xa087, 0x0, 0x0);
        gbc.writeMem(0x8c23, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5a3e);
        EXPECT(gbc.pc(), 0x8c25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c23), 0xcb);
        EXPECT(gbc.readMem(0x8c24), 0x3a);
        // CB 3A 03B8
        gbc.setState(0x5954, 0x2a1d, 0xa030, 0xf57, 0x9f12, 0xaa70, 0x0, 0x0);
        gbc.writeMem(0x5954, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2a1d);
        EXPECT(gbc.pc(), 0x5956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03B9
        gbc.setState(0xde2e, 0xbb58, 0x6d20, 0xdeab, 0xd1f4, 0x2248, 0x1, 0x1);
        gbc.writeMem(0xde2e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbb58);
        EXPECT(gbc.pc(), 0xde30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde2e), 0xcb);
        EXPECT(gbc.readMem(0xde2f), 0x3a);
        // CB 3A 03BA
        gbc.setState(0xd3d0, 0x65bc, 0x43c0, 0x708e, 0x526c, 0x561e, 0x1, 0x1);
        gbc.writeMem(0xd3d0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x65bc);
        EXPECT(gbc.pc(), 0xd3d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d0), 0xcb);
        EXPECT(gbc.readMem(0xd3d1), 0x3a);
        // CB 3A 03BB
        gbc.setState(0x38c0, 0x2d2a, 0x6e10, 0xa80b, 0x57a2, 0x6b28, 0x1, 0x1);
        gbc.writeMem(0x38c0, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2d2a);
        EXPECT(gbc.pc(), 0x38c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03BC
        gbc.setState(0xddda, 0x4091, 0x3fc0, 0x7fcd, 0x3756, 0xca7d, 0x0, 0x1);
        gbc.writeMem(0xddda, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4091);
        EXPECT(gbc.pc(), 0xdddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddda), 0xcb);
        EXPECT(gbc.readMem(0xdddb), 0x3a);
        // CB 3A 03BD
        gbc.setState(0xe580, 0xd7a3, 0x4c80, 0x405c, 0x5395, 0x853d, 0x0, 0x1);
        gbc.writeMem(0xe580, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd7a3);
        EXPECT(gbc.pc(), 0xe582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe580), 0xcb);
        EXPECT(gbc.readMem(0xe581), 0x3a);
        // CB 3A 03BF
        gbc.setState(0x6376, 0xe747, 0x8f20, 0x9197, 0xb8ef, 0x1163, 0x0, 0x1);
        gbc.writeMem(0x6376, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe747);
        EXPECT(gbc.pc(), 0x6378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03C0
        gbc.setState(0x1b9e, 0x45cc, 0x56b0, 0xcb9d, 0x7f63, 0x5f2b, 0x1, 0x0);
        gbc.writeMem(0x1b9e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x45cc);
        EXPECT(gbc.pc(), 0x1ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03C1
        gbc.setState(0x78b3, 0x564, 0xf9f0, 0x84af, 0xd635, 0xfce1, 0x1, 0x0);
        gbc.writeMem(0x78b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x564);
        EXPECT(gbc.pc(), 0x78b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03C2
        gbc.setState(0x8364, 0xcd78, 0x4dd0, 0xe6c8, 0xe45c, 0x950d, 0x0, 0x1);
        gbc.writeMem(0x8364, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcd78);
        EXPECT(gbc.pc(), 0x8366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8364), 0xcb);
        EXPECT(gbc.readMem(0x8365), 0x3a);
        // CB 3A 03C3
        gbc.setState(0xb556, 0x626b, 0x6a50, 0xf8fc, 0xd19d, 0x99e4, 0x1, 0x0);
        gbc.writeMem(0xb556, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x626b);
        EXPECT(gbc.pc(), 0xb558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb556), 0xcb);
        EXPECT(gbc.readMem(0xb557), 0x3a);
        // CB 3A 03C4
        gbc.setState(0x69cd, 0x43a3, 0x3490, 0x25da, 0x7a7, 0x9aee, 0x1, 0x1);
        gbc.writeMem(0x69cd, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x43a3);
        EXPECT(gbc.pc(), 0x69cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03C5
        gbc.setState(0xa313, 0x7516, 0x3e50, 0x165e, 0x8c32, 0xad39, 0x0, 0x0);
        gbc.writeMem(0xa313, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7516);
        EXPECT(gbc.pc(), 0xa315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa313), 0xcb);
        EXPECT(gbc.readMem(0xa314), 0x3a);
        // CB 3A 03C6
        gbc.setState(0x3ab5, 0x109b, 0xfff0, 0x4643, 0x4c1e, 0xee8a, 0x1, 0x1);
        gbc.writeMem(0x3ab5, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x109b);
        EXPECT(gbc.pc(), 0x3ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03C7
        gbc.setState(0xebe2, 0xe546, 0xe0, 0xb1fa, 0xac72, 0x93b3, 0x1, 0x0);
        gbc.writeMem(0xebe2, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe546);
        EXPECT(gbc.pc(), 0xebe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe2), 0xcb);
        EXPECT(gbc.readMem(0xebe3), 0x3a);
        // CB 3A 03C8
        gbc.setState(0x3813, 0x600a, 0x5bb0, 0x2633, 0xe0d9, 0x970d, 0x0, 0x0);
        gbc.writeMem(0x3813, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x600a);
        EXPECT(gbc.pc(), 0x3815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03C9
        gbc.setState(0xbf11, 0x430e, 0x1710, 0x5def, 0xbffc, 0x1c72, 0x1, 0x0);
        gbc.writeMem(0xbf11, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x430e);
        EXPECT(gbc.pc(), 0xbf13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf11), 0xcb);
        EXPECT(gbc.readMem(0xbf12), 0x3a);
        // CB 3A 03CA
        gbc.setState(0x4e17, 0x30b0, 0x52d0, 0xff2d, 0x56b, 0xc975, 0x0, 0x0);
        gbc.writeMem(0x4e17, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x30b0);
        EXPECT(gbc.pc(), 0x4e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03CB
        gbc.setState(0xe7b3, 0xbb95, 0x3400, 0x38f0, 0x9983, 0x24bc, 0x1, 0x1);
        gbc.writeMem(0xe7b3, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xbb95);
        EXPECT(gbc.pc(), 0xe7b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b3), 0xcb);
        EXPECT(gbc.readMem(0xe7b4), 0x3a);
        // CB 3A 03CC
        gbc.setState(0x987d, 0x7bf3, 0x46c0, 0x9a93, 0xff63, 0x5d39, 0x1, 0x0);
        gbc.writeMem(0x987d, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7bf3);
        EXPECT(gbc.pc(), 0x987f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x987d), 0xcb);
        EXPECT(gbc.readMem(0x987e), 0x3a);
        // CB 3A 03CD
        gbc.setState(0xea04, 0x271c, 0x90e0, 0x9714, 0x47a8, 0xff49, 0x1, 0x1);
        gbc.writeMem(0xea04, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x271c);
        EXPECT(gbc.pc(), 0xea06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea04), 0xcb);
        EXPECT(gbc.readMem(0xea05), 0x3a);
        // CB 3A 03CF
        gbc.setState(0xae7b, 0x8c21, 0x5750, 0xaa4b, 0xbaca, 0x9a19, 0x1, 0x0);
        gbc.writeMem(0xae7b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8c21);
        EXPECT(gbc.pc(), 0xae7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7b), 0xcb);
        EXPECT(gbc.readMem(0xae7c), 0x3a);
        // CB 3A 03D0
        gbc.setState(0x970f, 0xc234, 0x4950, 0xa83, 0x4efd, 0x4c1, 0x0, 0x0);
        gbc.writeMem(0x970f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc234);
        EXPECT(gbc.pc(), 0x9711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970f), 0xcb);
        EXPECT(gbc.readMem(0x9710), 0x3a);
        // CB 3A 03D1
        gbc.setState(0x6323, 0xed68, 0xfda0, 0xca03, 0x6eca, 0xfb77, 0x1, 0x0);
        gbc.writeMem(0x6323, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xed68);
        EXPECT(gbc.pc(), 0x6325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03D2
        gbc.setState(0x3c21, 0xd1f, 0xc9f0, 0xcc6c, 0x3a51, 0x3afb, 0x0, 0x0);
        gbc.writeMem(0x3c21, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd1f);
        EXPECT(gbc.pc(), 0x3c23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03D3
        gbc.setState(0x836b, 0xabff, 0x1d20, 0xf6f3, 0xf963, 0xdcbd, 0x1, 0x0);
        gbc.writeMem(0x836b, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xabff);
        EXPECT(gbc.pc(), 0x836d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836b), 0xcb);
        EXPECT(gbc.readMem(0x836c), 0x3a);
        // CB 3A 03D4
        gbc.setState(0x463f, 0x2839, 0x6e0, 0x8efb, 0x459e, 0xc89a, 0x0, 0x0);
        gbc.writeMem(0x463f, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2839);
        EXPECT(gbc.pc(), 0x4641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03D5
        gbc.setState(0xebc1, 0x2f6, 0x3670, 0x5b93, 0x2d97, 0x7d2d, 0x0, 0x0);
        gbc.writeMem(0xebc1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2f6);
        EXPECT(gbc.pc(), 0xebc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc1), 0xcb);
        EXPECT(gbc.readMem(0xebc2), 0x3a);
        // CB 3A 03D6
        gbc.setState(0xe3a9, 0x9727, 0xe330, 0xc1d5, 0xa8a8, 0x82a1, 0x1, 0x0);
        gbc.writeMem(0xe3a9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9727);
        EXPECT(gbc.pc(), 0xe3ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a9), 0xcb);
        EXPECT(gbc.readMem(0xe3aa), 0x3a);
        // CB 3A 03D7
        gbc.setState(0x2302, 0x4f5, 0x6c30, 0x88b6, 0x282e, 0xae6c, 0x1, 0x1);
        gbc.writeMem(0x2302, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4f5);
        EXPECT(gbc.pc(), 0x2304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03DA
        gbc.setState(0x7076, 0x74a1, 0xfc70, 0x1295, 0x6aa2, 0x3584, 0x1, 0x0);
        gbc.writeMem(0x7076, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x74a1);
        EXPECT(gbc.pc(), 0x7078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03DB
        gbc.setState(0x33a9, 0x9193, 0x3670, 0x4b0d, 0x4310, 0x7648, 0x1, 0x0);
        gbc.writeMem(0x33a9, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9193);
        EXPECT(gbc.pc(), 0x33ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03DC
        gbc.setState(0xcf7, 0xc03d, 0x3650, 0x7e53, 0x994, 0x37ca, 0x0, 0x1);
        gbc.writeMem(0xcf7, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc03d);
        EXPECT(gbc.pc(), 0xcf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03DD
        gbc.setState(0x18cc, 0x1fd9, 0x4c40, 0xf3b, 0x45cd, 0x90ba, 0x0, 0x1);
        gbc.writeMem(0x18cc, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1fd9);
        EXPECT(gbc.pc(), 0x18ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03DE
        gbc.setState(0x4f98, 0x53ac, 0x8c50, 0xdb12, 0x47d7, 0x20f1, 0x1, 0x1);
        gbc.writeMem(0x4f98, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x53ac);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03DF
        gbc.setState(0x96d1, 0x20f5, 0x1aa0, 0x12af, 0x526b, 0x98b0, 0x0, 0x1);
        gbc.writeMem(0x96d1, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x20f5);
        EXPECT(gbc.pc(), 0x96d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d1), 0xcb);
        EXPECT(gbc.readMem(0x96d2), 0x3a);
        // CB 3A 03E0
        gbc.setState(0x4b39, 0x939a, 0x6d10, 0x1f1b, 0xccc2, 0x84e3, 0x0, 0x1);
        gbc.writeMem(0x4b39, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x939a);
        EXPECT(gbc.pc(), 0x4b3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03E1
        gbc.setState(0xeb88, 0x268b, 0x2d00, 0x8b97, 0x82a5, 0xcd2c, 0x1, 0x0);
        gbc.writeMem(0xeb88, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x268b);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb88), 0xcb);
        EXPECT(gbc.readMem(0xeb89), 0x3a);
        // CB 3A 03E2
        gbc.setState(0xacfb, 0xa1e, 0x4a50, 0x3c78, 0xc2a7, 0x24e6, 0x0, 0x0);
        gbc.writeMem(0xacfb, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa1e);
        EXPECT(gbc.pc(), 0xacfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfb), 0xcb);
        EXPECT(gbc.readMem(0xacfc), 0x3a);
        // CB 3A 03E3
        gbc.setState(0xa62e, 0xdcb4, 0xd820, 0xad96, 0xa1ed, 0xa534, 0x1, 0x0);
        gbc.writeMem(0xa62e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xdcb4);
        EXPECT(gbc.pc(), 0xa630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa62e), 0xcb);
        EXPECT(gbc.readMem(0xa62f), 0x3a);
        // CB 3A 03E4
        gbc.setState(0x505e, 0x7a4c, 0xd770, 0xd0e7, 0x57a4, 0x34e, 0x0, 0x0);
        gbc.writeMem(0x505e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7a4c);
        EXPECT(gbc.pc(), 0x5060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3A 03E5
        gbc.setState(0xbe13, 0x4fea, 0xdf80, 0x4231, 0x7c3d, 0x1caa, 0x0, 0x1);
        gbc.writeMem(0xbe13, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4fea);
        EXPECT(gbc.pc(), 0xbe15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe13), 0xcb);
        EXPECT(gbc.readMem(0xbe14), 0x3a);
        // CB 3A 03E6
        gbc.setState(0x7b23, 0xc719, 0xaff0, 0xa43f, 0x5ce0, 0xef8c, 0x1, 0x1);
        gbc.writeMem(0x7b23, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc719);
        EXPECT(gbc.pc(), 0x7b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3A 03E7
        gbc.setState(0x872e, 0xa4f1, 0xdde0, 0x74e9, 0xf98e, 0xa393, 0x1, 0x0);
        gbc.writeMem(0x872e, { 0xcb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa4f1);
        EXPECT(gbc.pc(), 0x8730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x872e), 0xcb);
        EXPECT(gbc.readMem(0x872f), 0x3a);
    }
}
#endif
