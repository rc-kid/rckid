#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_f3)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_f3) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB F3 0000
        gbc.setState(0x3800, 0x17d5, 0x6a30, 0xee88, 0x2e09, 0x740d, 0x1, 0x0);
        gbc.writeMem(0x3800, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x17d5);
        EXPECT(gbc.pc(), 0x3802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0001
        gbc.setState(0xb1b5, 0xbb4, 0x18a0, 0xc7cc, 0xb634, 0x7f99, 0x0, 0x0);
        gbc.writeMem(0xb1b5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbb4);
        EXPECT(gbc.pc(), 0xb1b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b5), 0xcb);
        EXPECT(gbc.readMem(0xb1b6), 0xf3);
        // CB F3 0002
        gbc.setState(0x10d0, 0xf4c0, 0xf820, 0x12d3, 0xc123, 0xef79, 0x0, 0x0);
        gbc.writeMem(0x10d0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf4c0);
        EXPECT(gbc.pc(), 0x10d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0003
        gbc.setState(0xe08c, 0xb623, 0xa820, 0x45e8, 0xe176, 0x74ae, 0x1, 0x1);
        gbc.writeMem(0xe08c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb623);
        EXPECT(gbc.pc(), 0xe08e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe08c), 0xcb);
        EXPECT(gbc.readMem(0xe08d), 0xf3);
        // CB F3 0004
        gbc.setState(0x1017, 0x4ca3, 0xde50, 0x8cad, 0xdc6e, 0x4e62, 0x1, 0x1);
        gbc.writeMem(0x1017, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4ca3);
        EXPECT(gbc.pc(), 0x1019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0005
        gbc.setState(0x2217, 0x2766, 0x4b30, 0x974, 0x4b5e, 0xdb04, 0x1, 0x0);
        gbc.writeMem(0x2217, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2766);
        EXPECT(gbc.pc(), 0x2219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0006
        gbc.setState(0x4c6, 0xc4c2, 0x1370, 0x4898, 0x1054, 0xbebf, 0x0, 0x0);
        gbc.writeMem(0x4c6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc4c2);
        EXPECT(gbc.pc(), 0x4c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0007
        gbc.setState(0xe3a9, 0x577f, 0xa800, 0x1a29, 0x646d, 0x93c6, 0x0, 0x0);
        gbc.writeMem(0xe3a9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x577f);
        EXPECT(gbc.pc(), 0xe3ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a9), 0xcb);
        EXPECT(gbc.readMem(0xe3aa), 0xf3);
        // CB F3 0008
        gbc.setState(0x3b2f, 0x78a9, 0x24b0, 0x4735, 0x66b8, 0x407e, 0x1, 0x1);
        gbc.writeMem(0x3b2f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x78a9);
        EXPECT(gbc.pc(), 0x3b31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0009
        gbc.setState(0x7994, 0xb2bd, 0xe310, 0xe7e9, 0x1bd7, 0xd1, 0x1, 0x1);
        gbc.writeMem(0x7994, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb2bd);
        EXPECT(gbc.pc(), 0x7996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 000A
        gbc.setState(0x7a70, 0xb891, 0xbab0, 0x5f7b, 0x5969, 0x3740, 0x0, 0x1);
        gbc.writeMem(0x7a70, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb891);
        EXPECT(gbc.pc(), 0x7a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 000B
        gbc.setState(0x4c28, 0xd275, 0x6370, 0xdc59, 0x160b, 0xa128, 0x0, 0x0);
        gbc.writeMem(0x4c28, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd275);
        EXPECT(gbc.pc(), 0x4c2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 000C
        gbc.setState(0xc603, 0x43de, 0x4e00, 0x7d36, 0xb8d1, 0x99f, 0x1, 0x0);
        gbc.writeMem(0xc603, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x43de);
        EXPECT(gbc.pc(), 0xc605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc603), 0xcb);
        EXPECT(gbc.readMem(0xc604), 0xf3);
        // CB F3 000D
        gbc.setState(0xe735, 0x82d6, 0x8de0, 0x5a81, 0x17e5, 0x308f, 0x0, 0x1);
        gbc.writeMem(0xe735, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x82d6);
        EXPECT(gbc.pc(), 0xe737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe735), 0xcb);
        EXPECT(gbc.readMem(0xe736), 0xf3);
        // CB F3 000E
        gbc.setState(0xb9ee, 0xbee6, 0xcbd0, 0x96eb, 0x110a, 0xb9b1, 0x1, 0x1);
        gbc.writeMem(0xb9ee, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbee6);
        EXPECT(gbc.pc(), 0xb9f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9ee), 0xcb);
        EXPECT(gbc.readMem(0xb9ef), 0xf3);
        // CB F3 000F
        gbc.setState(0xacdb, 0x11a9, 0x56d0, 0xeada, 0x92c6, 0xd7b4, 0x0, 0x0);
        gbc.writeMem(0xacdb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x11a9);
        EXPECT(gbc.pc(), 0xacdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacdb), 0xcb);
        EXPECT(gbc.readMem(0xacdc), 0xf3);
        // CB F3 0010
        gbc.setState(0x1eea, 0x9086, 0x4600, 0x5d12, 0x3776, 0x7e15, 0x0, 0x0);
        gbc.writeMem(0x1eea, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9086);
        EXPECT(gbc.pc(), 0x1eec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0011
        gbc.setState(0x7ac5, 0x315, 0xe4c0, 0x2027, 0xd379, 0x15eb, 0x1, 0x1);
        gbc.writeMem(0x7ac5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x315);
        EXPECT(gbc.pc(), 0x7ac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0012
        gbc.setState(0x1494, 0x2f8c, 0x95f0, 0x68af, 0x2c9c, 0xe055, 0x0, 0x0);
        gbc.writeMem(0x1494, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2f8c);
        EXPECT(gbc.pc(), 0x1496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0013
        gbc.setState(0xbc68, 0x8cd1, 0x2c80, 0x2b13, 0xe03, 0xceb6, 0x0, 0x1);
        gbc.writeMem(0xbc68, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8cd1);
        EXPECT(gbc.pc(), 0xbc6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc68), 0xcb);
        EXPECT(gbc.readMem(0xbc69), 0xf3);
        // CB F3 0014
        gbc.setState(0x2bf9, 0x5fc4, 0xe3c0, 0x27a2, 0x9d5f, 0x5b5e, 0x0, 0x1);
        gbc.writeMem(0x2bf9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5fc4);
        EXPECT(gbc.pc(), 0x2bfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0016
        gbc.setState(0xc887, 0x2051, 0xbc90, 0xa663, 0x3a2d, 0x832d, 0x1, 0x1);
        gbc.writeMem(0xc887, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2051);
        EXPECT(gbc.pc(), 0xc889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc887), 0xcb);
        EXPECT(gbc.readMem(0xc888), 0xf3);
        // CB F3 0017
        gbc.setState(0xdf2d, 0x5785, 0xd530, 0x93f1, 0x6451, 0xabc3, 0x1, 0x0);
        gbc.writeMem(0xdf2d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5785);
        EXPECT(gbc.pc(), 0xdf2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2d), 0xcb);
        EXPECT(gbc.readMem(0xdf2e), 0xf3);
        // CB F3 0018
        gbc.setState(0x8f50, 0xe36b, 0xede0, 0x2a00, 0x28c, 0xd1cf, 0x1, 0x1);
        gbc.writeMem(0x8f50, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe36b);
        EXPECT(gbc.pc(), 0x8f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f50), 0xcb);
        EXPECT(gbc.readMem(0x8f51), 0xf3);
        // CB F3 0019
        gbc.setState(0x1b86, 0x48f3, 0x3940, 0xbab0, 0x1a01, 0x75e0, 0x0, 0x1);
        gbc.writeMem(0x1b86, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x48f3);
        EXPECT(gbc.pc(), 0x1b88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 001A
        gbc.setState(0xcc71, 0x1756, 0xaba0, 0x6170, 0x36ac, 0x520e, 0x1, 0x1);
        gbc.writeMem(0xcc71, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1756);
        EXPECT(gbc.pc(), 0xcc73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc71), 0xcb);
        EXPECT(gbc.readMem(0xcc72), 0xf3);
        // CB F3 001B
        gbc.setState(0x331f, 0xcf0d, 0xe10, 0x9d90, 0x96d, 0x869b, 0x0, 0x0);
        gbc.writeMem(0x331f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xcf0d);
        EXPECT(gbc.pc(), 0x3321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 001C
        gbc.setState(0x427c, 0x3f79, 0x620, 0x2d2d, 0xaaa8, 0x4f45, 0x1, 0x0);
        gbc.writeMem(0x427c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3f79);
        EXPECT(gbc.pc(), 0x427e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 001E
        gbc.setState(0x2d9b, 0xfa9e, 0x4e60, 0x2b7b, 0x9800, 0xdcec, 0x0, 0x0);
        gbc.writeMem(0x2d9b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfa9e);
        EXPECT(gbc.pc(), 0x2d9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 001F
        gbc.setState(0x9c7d, 0xa337, 0x8510, 0xed66, 0xddd8, 0xdcab, 0x0, 0x0);
        gbc.writeMem(0x9c7d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa337);
        EXPECT(gbc.pc(), 0x9c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c7d), 0xcb);
        EXPECT(gbc.readMem(0x9c7e), 0xf3);
        // CB F3 0020
        gbc.setState(0x6e4d, 0xa631, 0xdd50, 0x20d, 0x809c, 0x97bf, 0x0, 0x0);
        gbc.writeMem(0x6e4d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa631);
        EXPECT(gbc.pc(), 0x6e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0021
        gbc.setState(0x1a1b, 0xedf9, 0x6220, 0xebbe, 0xa38c, 0xee2b, 0x0, 0x1);
        gbc.writeMem(0x1a1b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xedf9);
        EXPECT(gbc.pc(), 0x1a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0022
        gbc.setState(0x6907, 0x15c0, 0xfd80, 0x32be, 0x2cb8, 0x8b00, 0x0, 0x1);
        gbc.writeMem(0x6907, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x15c0);
        EXPECT(gbc.pc(), 0x6909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0023
        gbc.setState(0x9597, 0x6d53, 0xb550, 0x357b, 0x9133, 0xa75b, 0x1, 0x1);
        gbc.writeMem(0x9597, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6d53);
        EXPECT(gbc.pc(), 0x9599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9597), 0xcb);
        EXPECT(gbc.readMem(0x9598), 0xf3);
        // CB F3 0024
        gbc.setState(0x5a0b, 0x8689, 0x9370, 0xc3ad, 0xe547, 0x69d0, 0x1, 0x0);
        gbc.writeMem(0x5a0b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8689);
        EXPECT(gbc.pc(), 0x5a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0025
        gbc.setState(0x92a0, 0x5ea7, 0x5f80, 0xacc4, 0xb72b, 0x558e, 0x1, 0x0);
        gbc.writeMem(0x92a0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5ea7);
        EXPECT(gbc.pc(), 0x92a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92a0), 0xcb);
        EXPECT(gbc.readMem(0x92a1), 0xf3);
        // CB F3 0026
        gbc.setState(0xa474, 0x7a45, 0x3660, 0x4527, 0xe899, 0xd512, 0x0, 0x1);
        gbc.writeMem(0xa474, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7a45);
        EXPECT(gbc.pc(), 0xa476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa474), 0xcb);
        EXPECT(gbc.readMem(0xa475), 0xf3);
        // CB F3 0027
        gbc.setState(0x3010, 0x2372, 0x9750, 0x6e6a, 0x2208, 0x9f2d, 0x0, 0x0);
        gbc.writeMem(0x3010, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2372);
        EXPECT(gbc.pc(), 0x3012);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0028
        gbc.setState(0x26da, 0x5de, 0xf710, 0x5029, 0x47a4, 0x6ca7, 0x1, 0x0);
        gbc.writeMem(0x26da, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5de);
        EXPECT(gbc.pc(), 0x26dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0029
        gbc.setState(0x5f28, 0x74d6, 0x9300, 0xeff, 0x6b28, 0xfcfc, 0x1, 0x0);
        gbc.writeMem(0x5f28, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x74d6);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 002A
        gbc.setState(0x5880, 0x2435, 0xa7d0, 0xfe23, 0xbc3b, 0xde15, 0x0, 0x0);
        gbc.writeMem(0x5880, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2435);
        EXPECT(gbc.pc(), 0x5882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 002B
        gbc.setState(0xaf00, 0x9141, 0xfeb0, 0xef7c, 0xe2cc, 0xac98, 0x0, 0x0);
        gbc.writeMem(0xaf00, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9141);
        EXPECT(gbc.pc(), 0xaf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf00), 0xcb);
        EXPECT(gbc.readMem(0xaf01), 0xf3);
        // CB F3 002C
        gbc.setState(0x12f7, 0xefbc, 0xd240, 0x2f09, 0x3a88, 0x4520, 0x0, 0x0);
        gbc.writeMem(0x12f7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xefbc);
        EXPECT(gbc.pc(), 0x12f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 002D
        gbc.setState(0x4e2a, 0xbbe, 0xa00, 0x609c, 0x55fd, 0xcefd, 0x1, 0x1);
        gbc.writeMem(0x4e2a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbbe);
        EXPECT(gbc.pc(), 0x4e2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 002E
        gbc.setState(0x3386, 0xd7dd, 0x6cb0, 0xfd85, 0x306, 0x3b41, 0x0, 0x1);
        gbc.writeMem(0x3386, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd7dd);
        EXPECT(gbc.pc(), 0x3388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 002F
        gbc.setState(0xd189, 0x14fb, 0xe130, 0x152c, 0x2b0f, 0x79ed, 0x0, 0x1);
        gbc.writeMem(0xd189, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x14fb);
        EXPECT(gbc.pc(), 0xd18b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd189), 0xcb);
        EXPECT(gbc.readMem(0xd18a), 0xf3);
        // CB F3 0031
        gbc.setState(0xa38e, 0x52d7, 0x43a0, 0x1235, 0x5a3e, 0xeeb9, 0x0, 0x1);
        gbc.writeMem(0xa38e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x52d7);
        EXPECT(gbc.pc(), 0xa390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38e), 0xcb);
        EXPECT(gbc.readMem(0xa38f), 0xf3);
        // CB F3 0032
        gbc.setState(0xd1c3, 0x6179, 0xbd70, 0x3122, 0x40b5, 0xc641, 0x0, 0x0);
        gbc.writeMem(0xd1c3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6179);
        EXPECT(gbc.pc(), 0xd1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1c3), 0xcb);
        EXPECT(gbc.readMem(0xd1c4), 0xf3);
        // CB F3 0033
        gbc.setState(0x48a8, 0x15b4, 0xce40, 0x4d54, 0xcfb6, 0xb41a, 0x1, 0x0);
        gbc.writeMem(0x48a8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x15b4);
        EXPECT(gbc.pc(), 0x48aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0034
        gbc.setState(0xd69a, 0x5846, 0x1c00, 0x1d8a, 0xc8c9, 0xc6cd, 0x0, 0x0);
        gbc.writeMem(0xd69a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5846);
        EXPECT(gbc.pc(), 0xd69c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69a), 0xcb);
        EXPECT(gbc.readMem(0xd69b), 0xf3);
        // CB F3 0035
        gbc.setState(0xb302, 0xc25a, 0x3a90, 0x80a6, 0xdd87, 0xf44d, 0x1, 0x0);
        gbc.writeMem(0xb302, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc25a);
        EXPECT(gbc.pc(), 0xb304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb302), 0xcb);
        EXPECT(gbc.readMem(0xb303), 0xf3);
        // CB F3 0036
        gbc.setState(0x8b6d, 0x4c61, 0x83f0, 0x8110, 0xadba, 0x1a4e, 0x0, 0x0);
        gbc.writeMem(0x8b6d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4c61);
        EXPECT(gbc.pc(), 0x8b6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b6d), 0xcb);
        EXPECT(gbc.readMem(0x8b6e), 0xf3);
        // CB F3 0037
        gbc.setState(0xe1b3, 0x198d, 0x9e50, 0xdac6, 0xfad, 0x2e2b, 0x1, 0x1);
        gbc.writeMem(0xe1b3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x198d);
        EXPECT(gbc.pc(), 0xe1b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b3), 0xcb);
        EXPECT(gbc.readMem(0xe1b4), 0xf3);
        // CB F3 0038
        gbc.setState(0x9561, 0x5589, 0x2c00, 0x55e3, 0xda5d, 0xdb18, 0x1, 0x1);
        gbc.writeMem(0x9561, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5589);
        EXPECT(gbc.pc(), 0x9563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9561), 0xcb);
        EXPECT(gbc.readMem(0x9562), 0xf3);
        // CB F3 0039
        gbc.setState(0xbd00, 0x8dc0, 0x4d20, 0xb46, 0x6bba, 0x2022, 0x0, 0x1);
        gbc.writeMem(0xbd00, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8dc0);
        EXPECT(gbc.pc(), 0xbd02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd00), 0xcb);
        EXPECT(gbc.readMem(0xbd01), 0xf3);
        // CB F3 003A
        gbc.setState(0xcd41, 0x7279, 0x10e0, 0xcee5, 0x6df0, 0x1ac1, 0x1, 0x1);
        gbc.writeMem(0xcd41, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7279);
        EXPECT(gbc.pc(), 0xcd43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd41), 0xcb);
        EXPECT(gbc.readMem(0xcd42), 0xf3);
        // CB F3 003B
        gbc.setState(0x9bc, 0x83a6, 0xe20, 0x2239, 0x93cb, 0x7059, 0x0, 0x0);
        gbc.writeMem(0x9bc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x83a6);
        EXPECT(gbc.pc(), 0x9be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 003C
        gbc.setState(0xdb72, 0x38ad, 0xa190, 0xbb7d, 0xafd1, 0xb7e, 0x0, 0x0);
        gbc.writeMem(0xdb72, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x38ad);
        EXPECT(gbc.pc(), 0xdb74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb72), 0xcb);
        EXPECT(gbc.readMem(0xdb73), 0xf3);
        // CB F3 003D
        gbc.setState(0xda66, 0xbf96, 0x9840, 0xc239, 0x281e, 0xd416, 0x0, 0x1);
        gbc.writeMem(0xda66, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbf96);
        EXPECT(gbc.pc(), 0xda68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda66), 0xcb);
        EXPECT(gbc.readMem(0xda67), 0xf3);
        // CB F3 003E
        gbc.setState(0x8a90, 0xba49, 0x26d0, 0x8a78, 0x4a84, 0x6777, 0x1, 0x1);
        gbc.writeMem(0x8a90, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xba49);
        EXPECT(gbc.pc(), 0x8a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a90), 0xcb);
        EXPECT(gbc.readMem(0x8a91), 0xf3);
        // CB F3 003F
        gbc.setState(0x13a8, 0x87d3, 0x2d70, 0x269b, 0xcd97, 0xf51f, 0x0, 0x0);
        gbc.writeMem(0x13a8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x87d3);
        EXPECT(gbc.pc(), 0x13aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0040
        gbc.setState(0x68b9, 0x73c4, 0x8f00, 0xe8d0, 0x991c, 0x49f7, 0x0, 0x1);
        gbc.writeMem(0x68b9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x73c4);
        EXPECT(gbc.pc(), 0x68bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0041
        gbc.setState(0x350c, 0x7e82, 0xa800, 0xb9ea, 0x676c, 0xcaa1, 0x0, 0x0);
        gbc.writeMem(0x350c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7e82);
        EXPECT(gbc.pc(), 0x350e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0042
        gbc.setState(0x1322, 0x36ff, 0xf7a0, 0x28c3, 0xb6c4, 0x45ad, 0x0, 0x0);
        gbc.writeMem(0x1322, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x36ff);
        EXPECT(gbc.pc(), 0x1324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0043
        gbc.setState(0x985e, 0x9e01, 0x33b0, 0x439c, 0x1ba3, 0xe6b0, 0x0, 0x0);
        gbc.writeMem(0x985e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9e01);
        EXPECT(gbc.pc(), 0x9860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985e), 0xcb);
        EXPECT(gbc.readMem(0x985f), 0xf3);
        // CB F3 0044
        gbc.setState(0xc2ce, 0x12c3, 0x9a70, 0x31e, 0x1334, 0x9273, 0x0, 0x1);
        gbc.writeMem(0xc2ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x12c3);
        EXPECT(gbc.pc(), 0xc2d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ce), 0xcb);
        EXPECT(gbc.readMem(0xc2cf), 0xf3);
        // CB F3 0045
        gbc.setState(0xdead, 0x2a2a, 0x2320, 0xb862, 0xa148, 0x1c75, 0x0, 0x1);
        gbc.writeMem(0xdead, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2a2a);
        EXPECT(gbc.pc(), 0xdeaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdead), 0xcb);
        EXPECT(gbc.readMem(0xdeae), 0xf3);
        // CB F3 0046
        gbc.setState(0x3e6, 0x51c5, 0x2830, 0xc625, 0xe9a, 0x75d4, 0x1, 0x1);
        gbc.writeMem(0x3e6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x51c5);
        EXPECT(gbc.pc(), 0x3e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0047
        gbc.setState(0xa055, 0xa179, 0x60f0, 0xca10, 0x9625, 0xa7d2, 0x0, 0x0);
        gbc.writeMem(0xa055, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa179);
        EXPECT(gbc.pc(), 0xa057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa055), 0xcb);
        EXPECT(gbc.readMem(0xa056), 0xf3);
        // CB F3 0048
        gbc.setState(0x5d4a, 0xbb37, 0xe5c0, 0x22f0, 0x10ac, 0x988f, 0x1, 0x1);
        gbc.writeMem(0x5d4a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbb37);
        EXPECT(gbc.pc(), 0x5d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0049
        gbc.setState(0x95a6, 0x7b55, 0xbe40, 0xb52, 0xbb93, 0xfa03, 0x0, 0x0);
        gbc.writeMem(0x95a6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7b55);
        EXPECT(gbc.pc(), 0x95a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a6), 0xcb);
        EXPECT(gbc.readMem(0x95a7), 0xf3);
        // CB F3 004A
        gbc.setState(0xcfb2, 0x9cb8, 0xc6b0, 0x24e2, 0x830d, 0xb896, 0x1, 0x0);
        gbc.writeMem(0xcfb2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9cb8);
        EXPECT(gbc.pc(), 0xcfb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb2), 0xcb);
        EXPECT(gbc.readMem(0xcfb3), 0xf3);
        // CB F3 004C
        gbc.setState(0xc5c8, 0xf55f, 0xdb0, 0xfda5, 0x5824, 0xfce7, 0x1, 0x1);
        gbc.writeMem(0xc5c8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf55f);
        EXPECT(gbc.pc(), 0xc5ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c8), 0xcb);
        EXPECT(gbc.readMem(0xc5c9), 0xf3);
        // CB F3 004D
        gbc.setState(0x5ef, 0x2392, 0x21b0, 0x23b6, 0x787b, 0xcd4f, 0x0, 0x1);
        gbc.writeMem(0x5ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2392);
        EXPECT(gbc.pc(), 0x5f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 004E
        gbc.setState(0xb6cb, 0xd655, 0xf940, 0x7227, 0xb954, 0x58e5, 0x1, 0x0);
        gbc.writeMem(0xb6cb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd655);
        EXPECT(gbc.pc(), 0xb6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cb), 0xcb);
        EXPECT(gbc.readMem(0xb6cc), 0xf3);
        // CB F3 004F
        gbc.setState(0x32f1, 0x23d6, 0xccf0, 0x1d5b, 0x7a78, 0x6e5, 0x1, 0x0);
        gbc.writeMem(0x32f1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x23d6);
        EXPECT(gbc.pc(), 0x32f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0050
        gbc.setState(0xdbb4, 0x3f9f, 0x58a0, 0xc8, 0xbac4, 0xb43f, 0x0, 0x0);
        gbc.writeMem(0xdbb4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3f9f);
        EXPECT(gbc.pc(), 0xdbb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb4), 0xcb);
        EXPECT(gbc.readMem(0xdbb5), 0xf3);
        // CB F3 0051
        gbc.setState(0x4e8d, 0x26bf, 0xe5a0, 0x50ac, 0xdb06, 0xe901, 0x1, 0x1);
        gbc.writeMem(0x4e8d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x26bf);
        EXPECT(gbc.pc(), 0x4e8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0052
        gbc.setState(0x3e9e, 0xe0c2, 0xf8d0, 0xb272, 0x233e, 0xc467, 0x1, 0x0);
        gbc.writeMem(0x3e9e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe0c2);
        EXPECT(gbc.pc(), 0x3ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0053
        gbc.setState(0x6ba9, 0x535, 0xecd0, 0x3b6, 0x254f, 0xc3be, 0x0, 0x0);
        gbc.writeMem(0x6ba9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x535);
        EXPECT(gbc.pc(), 0x6bab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0054
        gbc.setState(0xc4f1, 0x4001, 0x52f0, 0x892d, 0xd760, 0xe311, 0x1, 0x1);
        gbc.writeMem(0xc4f1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4001);
        EXPECT(gbc.pc(), 0xc4f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f1), 0xcb);
        EXPECT(gbc.readMem(0xc4f2), 0xf3);
        // CB F3 0055
        gbc.setState(0xe638, 0xb8b9, 0x33b0, 0x7087, 0x603f, 0x657, 0x0, 0x1);
        gbc.writeMem(0xe638, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb8b9);
        EXPECT(gbc.pc(), 0xe63a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe638), 0xcb);
        EXPECT(gbc.readMem(0xe639), 0xf3);
        // CB F3 0056
        gbc.setState(0xb2af, 0x9f3c, 0xef80, 0xc9ce, 0xa48a, 0x2910, 0x1, 0x1);
        gbc.writeMem(0xb2af, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9f3c);
        EXPECT(gbc.pc(), 0xb2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2af), 0xcb);
        EXPECT(gbc.readMem(0xb2b0), 0xf3);
        // CB F3 0057
        gbc.setState(0xa9b9, 0xe777, 0xdb50, 0x269e, 0xe5b, 0xce96, 0x1, 0x1);
        gbc.writeMem(0xa9b9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe777);
        EXPECT(gbc.pc(), 0xa9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b9), 0xcb);
        EXPECT(gbc.readMem(0xa9ba), 0xf3);
        // CB F3 0058
        gbc.setState(0x8bb5, 0xe71c, 0xfe0, 0x6485, 0xf70c, 0xa72d, 0x0, 0x0);
        gbc.writeMem(0x8bb5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe71c);
        EXPECT(gbc.pc(), 0x8bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb5), 0xcb);
        EXPECT(gbc.readMem(0x8bb6), 0xf3);
        // CB F3 0059
        gbc.setState(0x8de9, 0xf359, 0xa270, 0xe3a4, 0x295, 0x6f5, 0x1, 0x1);
        gbc.writeMem(0x8de9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf359);
        EXPECT(gbc.pc(), 0x8deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de9), 0xcb);
        EXPECT(gbc.readMem(0x8dea), 0xf3);
        // CB F3 005A
        gbc.setState(0x18c6, 0x6399, 0xfe50, 0x6789, 0x7087, 0xe1e7, 0x1, 0x0);
        gbc.writeMem(0x18c6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6399);
        EXPECT(gbc.pc(), 0x18c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 005B
        gbc.setState(0xe2f3, 0x3d74, 0xe6a0, 0xcd46, 0x66d0, 0xeb8f, 0x0, 0x1);
        gbc.writeMem(0xe2f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3d74);
        EXPECT(gbc.pc(), 0xe2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f3), 0xcb);
        EXPECT(gbc.readMem(0xe2f4), 0xf3);
        // CB F3 005C
        gbc.setState(0x5714, 0x5002, 0xb670, 0xbff5, 0xeedf, 0x9d0e, 0x1, 0x0);
        gbc.writeMem(0x5714, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5002);
        EXPECT(gbc.pc(), 0x5716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 005D
        gbc.setState(0x34f8, 0xe807, 0xd0d0, 0xd620, 0x594, 0x975b, 0x0, 0x0);
        gbc.writeMem(0x34f8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe807);
        EXPECT(gbc.pc(), 0x34fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 005E
        gbc.setState(0x83da, 0x7e0c, 0x6990, 0x4946, 0x6788, 0xa192, 0x1, 0x1);
        gbc.writeMem(0x83da, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7e0c);
        EXPECT(gbc.pc(), 0x83dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83da), 0xcb);
        EXPECT(gbc.readMem(0x83db), 0xf3);
        // CB F3 005F
        gbc.setState(0x7292, 0xa678, 0x4280, 0xb0c5, 0x5f04, 0x160b, 0x0, 0x0);
        gbc.writeMem(0x7292, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa678);
        EXPECT(gbc.pc(), 0x7294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0060
        gbc.setState(0x9474, 0x4356, 0x8170, 0x666a, 0xa73f, 0x2fb7, 0x0, 0x1);
        gbc.writeMem(0x9474, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4356);
        EXPECT(gbc.pc(), 0x9476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9474), 0xcb);
        EXPECT(gbc.readMem(0x9475), 0xf3);
        // CB F3 0061
        gbc.setState(0xbc08, 0x17d8, 0xf990, 0x71de, 0x3916, 0x7fe3, 0x1, 0x1);
        gbc.writeMem(0xbc08, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x17d8);
        EXPECT(gbc.pc(), 0xbc0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc08), 0xcb);
        EXPECT(gbc.readMem(0xbc09), 0xf3);
        // CB F3 0062
        gbc.setState(0x8ab4, 0x625, 0x9110, 0xd61f, 0x3c5d, 0xc7ad, 0x0, 0x0);
        gbc.writeMem(0x8ab4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x625);
        EXPECT(gbc.pc(), 0x8ab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab4), 0xcb);
        EXPECT(gbc.readMem(0x8ab5), 0xf3);
        // CB F3 0063
        gbc.setState(0x92f2, 0x8f4e, 0xaa30, 0xd939, 0x80db, 0x3907, 0x0, 0x1);
        gbc.writeMem(0x92f2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8f4e);
        EXPECT(gbc.pc(), 0x92f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92f2), 0xcb);
        EXPECT(gbc.readMem(0x92f3), 0xf3);
        // CB F3 0064
        gbc.setState(0x1ec7, 0x3470, 0x9100, 0xbe6d, 0xe249, 0x9282, 0x0, 0x0);
        gbc.writeMem(0x1ec7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3470);
        EXPECT(gbc.pc(), 0x1ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0066
        gbc.setState(0x5396, 0xb993, 0x6580, 0x1bd0, 0x5739, 0x8cef, 0x0, 0x1);
        gbc.writeMem(0x5396, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb993);
        EXPECT(gbc.pc(), 0x5398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0067
        gbc.setState(0xac97, 0x9d3d, 0x70d0, 0x889, 0x7a72, 0xf803, 0x1, 0x0);
        gbc.writeMem(0xac97, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9d3d);
        EXPECT(gbc.pc(), 0xac99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac97), 0xcb);
        EXPECT(gbc.readMem(0xac98), 0xf3);
        // CB F3 0069
        gbc.setState(0xd654, 0xa8ff, 0xef90, 0x54db, 0x3941, 0x7d19, 0x0, 0x1);
        gbc.writeMem(0xd654, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa8ff);
        EXPECT(gbc.pc(), 0xd656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd654), 0xcb);
        EXPECT(gbc.readMem(0xd655), 0xf3);
        // CB F3 006A
        gbc.setState(0x361d, 0x7e1c, 0x7b90, 0x8476, 0xa0af, 0x4966, 0x0, 0x1);
        gbc.writeMem(0x361d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7e1c);
        EXPECT(gbc.pc(), 0x361f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 006B
        gbc.setState(0xc920, 0x471c, 0xc290, 0x4eb3, 0xc525, 0x94a5, 0x1, 0x0);
        gbc.writeMem(0xc920, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x471c);
        EXPECT(gbc.pc(), 0xc922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc920), 0xcb);
        EXPECT(gbc.readMem(0xc921), 0xf3);
        // CB F3 006C
        gbc.setState(0xc782, 0x9a18, 0x4ff0, 0x9a49, 0xb0bc, 0x3b3f, 0x0, 0x0);
        gbc.writeMem(0xc782, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9a18);
        EXPECT(gbc.pc(), 0xc784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc782), 0xcb);
        EXPECT(gbc.readMem(0xc783), 0xf3);
        // CB F3 006D
        gbc.setState(0x3a11, 0xdd6c, 0x86f0, 0x87ae, 0x3e9b, 0x5d7, 0x1, 0x0);
        gbc.writeMem(0x3a11, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdd6c);
        EXPECT(gbc.pc(), 0x3a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 006E
        gbc.setState(0xeda, 0x4416, 0x760, 0x2b6b, 0x7e85, 0x9973, 0x0, 0x1);
        gbc.writeMem(0xeda, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4416);
        EXPECT(gbc.pc(), 0xedc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 006F
        gbc.setState(0x9f41, 0x863f, 0x3c70, 0xeb70, 0x4f28, 0x59d4, 0x0, 0x1);
        gbc.writeMem(0x9f41, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x863f);
        EXPECT(gbc.pc(), 0x9f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f41), 0xcb);
        EXPECT(gbc.readMem(0x9f42), 0xf3);
        // CB F3 0070
        gbc.setState(0xa4df, 0x36d9, 0x3680, 0xac85, 0xe7c4, 0x1343, 0x0, 0x0);
        gbc.writeMem(0xa4df, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x36d9);
        EXPECT(gbc.pc(), 0xa4e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4df), 0xcb);
        EXPECT(gbc.readMem(0xa4e0), 0xf3);
        // CB F3 0071
        gbc.setState(0x3cc0, 0x2b8f, 0x3140, 0x80b0, 0x2bab, 0xd3c1, 0x0, 0x1);
        gbc.writeMem(0x3cc0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2b8f);
        EXPECT(gbc.pc(), 0x3cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0072
        gbc.setState(0x6350, 0xee87, 0x3ae0, 0x9988, 0x1318, 0xabf8, 0x1, 0x0);
        gbc.writeMem(0x6350, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xee87);
        EXPECT(gbc.pc(), 0x6352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0073
        gbc.setState(0x32cb, 0x56ee, 0x7050, 0x5bde, 0xedb4, 0xd70e, 0x0, 0x1);
        gbc.writeMem(0x32cb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x56ee);
        EXPECT(gbc.pc(), 0x32cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0074
        gbc.setState(0x3463, 0xe5ef, 0x49d0, 0x529e, 0x325, 0xd8eb, 0x0, 0x1);
        gbc.writeMem(0x3463, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe5ef);
        EXPECT(gbc.pc(), 0x3465);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0075
        gbc.setState(0x6cc5, 0xa0a7, 0xf110, 0x5ea4, 0x5933, 0xc368, 0x1, 0x0);
        gbc.writeMem(0x6cc5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa0a7);
        EXPECT(gbc.pc(), 0x6cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0076
        gbc.setState(0x7771, 0xa32d, 0xc0d0, 0x60c7, 0x2c7a, 0xa29d, 0x1, 0x1);
        gbc.writeMem(0x7771, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa32d);
        EXPECT(gbc.pc(), 0x7773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0077
        gbc.setState(0x904d, 0x9368, 0xa480, 0x1fcb, 0x9424, 0x14bb, 0x1, 0x1);
        gbc.writeMem(0x904d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9368);
        EXPECT(gbc.pc(), 0x904f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x904d), 0xcb);
        EXPECT(gbc.readMem(0x904e), 0xf3);
        // CB F3 0078
        gbc.setState(0x7e4d, 0x1e8c, 0xc0, 0xe085, 0x64d9, 0xa023, 0x0, 0x1);
        gbc.writeMem(0x7e4d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1e8c);
        EXPECT(gbc.pc(), 0x7e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0079
        gbc.setState(0x882d, 0xd2a, 0x70b0, 0xf6cb, 0x84e3, 0x97d4, 0x0, 0x0);
        gbc.writeMem(0x882d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd2a);
        EXPECT(gbc.pc(), 0x882f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882d), 0xcb);
        EXPECT(gbc.readMem(0x882e), 0xf3);
        // CB F3 007A
        gbc.setState(0x9bed, 0x8bbe, 0x3b60, 0x432d, 0x73e0, 0xbda9, 0x1, 0x1);
        gbc.writeMem(0x9bed, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8bbe);
        EXPECT(gbc.pc(), 0x9bef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bed), 0xcb);
        EXPECT(gbc.readMem(0x9bee), 0xf3);
        // CB F3 007B
        gbc.setState(0xaae3, 0x2a81, 0x65d0, 0xc5ea, 0x68d0, 0xd076, 0x0, 0x1);
        gbc.writeMem(0xaae3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2a81);
        EXPECT(gbc.pc(), 0xaae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae3), 0xcb);
        EXPECT(gbc.readMem(0xaae4), 0xf3);
        // CB F3 007E
        gbc.setState(0x3597, 0x7079, 0x27f0, 0x3dda, 0xc22f, 0xd890, 0x0, 0x1);
        gbc.writeMem(0x3597, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7079);
        EXPECT(gbc.pc(), 0x3599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 007F
        gbc.setState(0xe0f2, 0x1fb3, 0x8600, 0x38a7, 0x8406, 0x13a4, 0x0, 0x0);
        gbc.writeMem(0xe0f2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1fb3);
        EXPECT(gbc.pc(), 0xe0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f2), 0xcb);
        EXPECT(gbc.readMem(0xe0f3), 0xf3);
        // CB F3 0080
        gbc.setState(0xbf5b, 0x713f, 0x8430, 0x695b, 0x2996, 0x926c, 0x1, 0x1);
        gbc.writeMem(0xbf5b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x713f);
        EXPECT(gbc.pc(), 0xbf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5b), 0xcb);
        EXPECT(gbc.readMem(0xbf5c), 0xf3);
        // CB F3 0081
        gbc.setState(0x4752, 0x64cf, 0x62d0, 0x24a8, 0xb605, 0xe726, 0x1, 0x1);
        gbc.writeMem(0x4752, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x64cf);
        EXPECT(gbc.pc(), 0x4754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0083
        gbc.setState(0x2390, 0xfe9e, 0x6fe0, 0x1503, 0x8db2, 0x821b, 0x0, 0x1);
        gbc.writeMem(0x2390, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfe9e);
        EXPECT(gbc.pc(), 0x2392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0084
        gbc.setState(0xd336, 0xb776, 0xe480, 0x8249, 0xb289, 0x89a4, 0x0, 0x0);
        gbc.writeMem(0xd336, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb776);
        EXPECT(gbc.pc(), 0xd338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd336), 0xcb);
        EXPECT(gbc.readMem(0xd337), 0xf3);
        // CB F3 0085
        gbc.setState(0x1b40, 0x223, 0xf7d0, 0x99f1, 0x440f, 0xde5e, 0x0, 0x0);
        gbc.writeMem(0x1b40, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x223);
        EXPECT(gbc.pc(), 0x1b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0086
        gbc.setState(0xdcb5, 0x2a49, 0x94e0, 0x21f5, 0x60f3, 0xba51, 0x1, 0x1);
        gbc.writeMem(0xdcb5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2a49);
        EXPECT(gbc.pc(), 0xdcb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb5), 0xcb);
        EXPECT(gbc.readMem(0xdcb6), 0xf3);
        // CB F3 0087
        gbc.setState(0x3402, 0xbe23, 0xbad0, 0x74a5, 0xc551, 0xb1e4, 0x1, 0x1);
        gbc.writeMem(0x3402, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbe23);
        EXPECT(gbc.pc(), 0x3404);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0088
        gbc.setState(0x2cae, 0x3a48, 0x2c70, 0x99d7, 0x2b96, 0xedea, 0x0, 0x0);
        gbc.writeMem(0x2cae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3a48);
        EXPECT(gbc.pc(), 0x2cb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0089
        gbc.setState(0xb96d, 0xca33, 0x5c50, 0xc2b, 0x3c54, 0x8567, 0x0, 0x0);
        gbc.writeMem(0xb96d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0xb96f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96d), 0xcb);
        EXPECT(gbc.readMem(0xb96e), 0xf3);
        // CB F3 008A
        gbc.setState(0x3028, 0x78ae, 0xbf90, 0xf843, 0x2ed, 0x9dfb, 0x0, 0x1);
        gbc.writeMem(0x3028, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x78ae);
        EXPECT(gbc.pc(), 0x302a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 008C
        gbc.setState(0x5e5d, 0x626f, 0x6000, 0x1fa2, 0x7e66, 0xedb, 0x1, 0x0);
        gbc.writeMem(0x5e5d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x626f);
        EXPECT(gbc.pc(), 0x5e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 008D
        gbc.setState(0xa1c7, 0xdce8, 0xd090, 0x416, 0x7979, 0x4c80, 0x0, 0x0);
        gbc.writeMem(0xa1c7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xdce8);
        EXPECT(gbc.pc(), 0xa1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c7), 0xcb);
        EXPECT(gbc.readMem(0xa1c8), 0xf3);
        // CB F3 008E
        gbc.setState(0xc650, 0x2645, 0xad20, 0xf808, 0x794d, 0x151d, 0x1, 0x1);
        gbc.writeMem(0xc650, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2645);
        EXPECT(gbc.pc(), 0xc652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc650), 0xcb);
        EXPECT(gbc.readMem(0xc651), 0xf3);
        // CB F3 008F
        gbc.setState(0xdac0, 0xb307, 0x7ac0, 0x24d0, 0x5f9b, 0xf324, 0x0, 0x1);
        gbc.writeMem(0xdac0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb307);
        EXPECT(gbc.pc(), 0xdac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac0), 0xcb);
        EXPECT(gbc.readMem(0xdac1), 0xf3);
        // CB F3 0090
        gbc.setState(0xa730, 0x1497, 0x85e0, 0xec9, 0x3b3a, 0xfcb0, 0x1, 0x1);
        gbc.writeMem(0xa730, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1497);
        EXPECT(gbc.pc(), 0xa732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa730), 0xcb);
        EXPECT(gbc.readMem(0xa731), 0xf3);
        // CB F3 0091
        gbc.setState(0x3c88, 0x859e, 0xc190, 0x8479, 0x9fa5, 0xd657, 0x1, 0x1);
        gbc.writeMem(0x3c88, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x859e);
        EXPECT(gbc.pc(), 0x3c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0092
        gbc.setState(0x1a3c, 0x1d0e, 0x5f30, 0xbee6, 0xed88, 0xbda4, 0x0, 0x0);
        gbc.writeMem(0x1a3c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1d0e);
        EXPECT(gbc.pc(), 0x1a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0093
        gbc.setState(0x1f56, 0x3047, 0x1d90, 0x9d14, 0x3863, 0xa645, 0x1, 0x0);
        gbc.writeMem(0x1f56, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3047);
        EXPECT(gbc.pc(), 0x1f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0094
        gbc.setState(0x671e, 0x23cc, 0xee00, 0xf388, 0xa3f4, 0x44d0, 0x1, 0x0);
        gbc.writeMem(0x671e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x23cc);
        EXPECT(gbc.pc(), 0x6720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0095
        gbc.setState(0xbece, 0xed0f, 0x4150, 0x3398, 0x5a61, 0xc828, 0x1, 0x1);
        gbc.writeMem(0xbece, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xed0f);
        EXPECT(gbc.pc(), 0xbed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbece), 0xcb);
        EXPECT(gbc.readMem(0xbecf), 0xf3);
        // CB F3 0096
        gbc.setState(0x3de6, 0x3ac8, 0xd420, 0x6ad8, 0xbebc, 0x1277, 0x1, 0x1);
        gbc.writeMem(0x3de6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3ac8);
        EXPECT(gbc.pc(), 0x3de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0097
        gbc.setState(0xc7b0, 0x7bb5, 0xccc0, 0xf706, 0x280c, 0x507e, 0x0, 0x0);
        gbc.writeMem(0xc7b0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7bb5);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b0), 0xcb);
        EXPECT(gbc.readMem(0xc7b1), 0xf3);
        // CB F3 0098
        gbc.setState(0x2cf1, 0x591b, 0x3f0, 0xa48b, 0xfe1a, 0x752, 0x0, 0x0);
        gbc.writeMem(0x2cf1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x591b);
        EXPECT(gbc.pc(), 0x2cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0099
        gbc.setState(0xbb42, 0x7cf5, 0x1fc0, 0xb2b6, 0xd88, 0x52c1, 0x1, 0x1);
        gbc.writeMem(0xbb42, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7cf5);
        EXPECT(gbc.pc(), 0xbb44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb42), 0xcb);
        EXPECT(gbc.readMem(0xbb43), 0xf3);
        // CB F3 009A
        gbc.setState(0xac21, 0xda7, 0x6f0, 0xd6f7, 0x9827, 0x1074, 0x0, 0x0);
        gbc.writeMem(0xac21, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xda7);
        EXPECT(gbc.pc(), 0xac23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac21), 0xcb);
        EXPECT(gbc.readMem(0xac22), 0xf3);
        // CB F3 009B
        gbc.setState(0x598b, 0x8267, 0x9300, 0xe3f5, 0x238, 0xa215, 0x0, 0x1);
        gbc.writeMem(0x598b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8267);
        EXPECT(gbc.pc(), 0x598d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 009C
        gbc.setState(0xc89f, 0x3248, 0x6970, 0xb693, 0x4c9d, 0x8f4e, 0x1, 0x0);
        gbc.writeMem(0xc89f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3248);
        EXPECT(gbc.pc(), 0xc8a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89f), 0xcb);
        EXPECT(gbc.readMem(0xc8a0), 0xf3);
        // CB F3 009D
        gbc.setState(0x8a29, 0xa452, 0x390, 0x6a7a, 0x5d5a, 0x1c28, 0x0, 0x1);
        gbc.writeMem(0x8a29, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa452);
        EXPECT(gbc.pc(), 0x8a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a29), 0xcb);
        EXPECT(gbc.readMem(0x8a2a), 0xf3);
        // CB F3 009E
        gbc.setState(0x29ea, 0xbb22, 0x4590, 0x7e56, 0x5f5d, 0x6ed5, 0x1, 0x0);
        gbc.writeMem(0x29ea, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbb22);
        EXPECT(gbc.pc(), 0x29ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 009F
        gbc.setState(0x4d87, 0xfeef, 0x1190, 0xe9da, 0xf69d, 0x5833, 0x0, 0x1);
        gbc.writeMem(0x4d87, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfeef);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00A0
        gbc.setState(0x1f9b, 0x36da, 0x3fc0, 0xca02, 0x1bc8, 0x3bcc, 0x0, 0x0);
        gbc.writeMem(0x1f9b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x36da);
        EXPECT(gbc.pc(), 0x1f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00A1
        gbc.setState(0x992d, 0x4250, 0x2610, 0x844c, 0xb9d4, 0x6382, 0x0, 0x1);
        gbc.writeMem(0x992d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4250);
        EXPECT(gbc.pc(), 0x992f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992d), 0xcb);
        EXPECT(gbc.readMem(0x992e), 0xf3);
        // CB F3 00A2
        gbc.setState(0x13ce, 0x9cda, 0xfd0, 0x6560, 0x945e, 0xfe4b, 0x0, 0x0);
        gbc.writeMem(0x13ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9cda);
        EXPECT(gbc.pc(), 0x13d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00A3
        gbc.setState(0x191e, 0x4106, 0x8b80, 0x5815, 0x6135, 0xcc6a, 0x1, 0x1);
        gbc.writeMem(0x191e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4106);
        EXPECT(gbc.pc(), 0x1920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00A4
        gbc.setState(0xa08c, 0x3d2f, 0xd0e0, 0x9af6, 0xfb2b, 0x9515, 0x0, 0x0);
        gbc.writeMem(0xa08c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3d2f);
        EXPECT(gbc.pc(), 0xa08e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08c), 0xcb);
        EXPECT(gbc.readMem(0xa08d), 0xf3);
        // CB F3 00A5
        gbc.setState(0xc359, 0xca88, 0xa60, 0x9c4e, 0xdc55, 0x6037, 0x1, 0x0);
        gbc.writeMem(0xc359, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xca88);
        EXPECT(gbc.pc(), 0xc35b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc359), 0xcb);
        EXPECT(gbc.readMem(0xc35a), 0xf3);
        // CB F3 00A6
        gbc.setState(0x59e4, 0x95e9, 0x6f80, 0x87cf, 0xe4df, 0x34a0, 0x1, 0x0);
        gbc.writeMem(0x59e4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x95e9);
        EXPECT(gbc.pc(), 0x59e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00A7
        gbc.setState(0xaceb, 0x5314, 0x7df0, 0x45e8, 0xa186, 0x3b7f, 0x1, 0x0);
        gbc.writeMem(0xaceb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5314);
        EXPECT(gbc.pc(), 0xaced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaceb), 0xcb);
        EXPECT(gbc.readMem(0xacec), 0xf3);
        // CB F3 00A8
        gbc.setState(0xadc9, 0x3648, 0x29b0, 0xff29, 0x9986, 0xb19d, 0x1, 0x0);
        gbc.writeMem(0xadc9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3648);
        EXPECT(gbc.pc(), 0xadcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc9), 0xcb);
        EXPECT(gbc.readMem(0xadca), 0xf3);
        // CB F3 00A9
        gbc.setState(0x15bb, 0x3b23, 0xba60, 0xd744, 0xb186, 0xd478, 0x0, 0x1);
        gbc.writeMem(0x15bb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3b23);
        EXPECT(gbc.pc(), 0x15bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00AA
        gbc.setState(0x5156, 0xed9, 0x3390, 0xac6a, 0x3dd5, 0x5e70, 0x1, 0x0);
        gbc.writeMem(0x5156, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xed9);
        EXPECT(gbc.pc(), 0x5158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00AB
        gbc.setState(0x6533, 0xe101, 0x6e60, 0xcd74, 0x1a07, 0x25f, 0x1, 0x0);
        gbc.writeMem(0x6533, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe101);
        EXPECT(gbc.pc(), 0x6535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00AC
        gbc.setState(0xbd3c, 0x6ff1, 0x77a0, 0x1257, 0xdf25, 0x3597, 0x1, 0x1);
        gbc.writeMem(0xbd3c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6ff1);
        EXPECT(gbc.pc(), 0xbd3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd3c), 0xcb);
        EXPECT(gbc.readMem(0xbd3d), 0xf3);
        // CB F3 00AD
        gbc.setState(0xd1f5, 0x5978, 0xc480, 0x4127, 0x3583, 0x58f6, 0x0, 0x0);
        gbc.writeMem(0xd1f5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5978);
        EXPECT(gbc.pc(), 0xd1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f5), 0xcb);
        EXPECT(gbc.readMem(0xd1f6), 0xf3);
        // CB F3 00AE
        gbc.setState(0x5a9, 0x7c1, 0xe790, 0xb617, 0x9bb8, 0xdb84, 0x1, 0x1);
        gbc.writeMem(0x5a9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7c1);
        EXPECT(gbc.pc(), 0x5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00AF
        gbc.setState(0x5574, 0x8ba3, 0x2250, 0xbc5d, 0xb1be, 0x3602, 0x0, 0x0);
        gbc.writeMem(0x5574, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8ba3);
        EXPECT(gbc.pc(), 0x5576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00B0
        gbc.setState(0xbd5, 0x29f7, 0xe080, 0x85e0, 0xb4b5, 0x4279, 0x1, 0x0);
        gbc.writeMem(0xbd5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x29f7);
        EXPECT(gbc.pc(), 0xbd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00B1
        gbc.setState(0x7c7d, 0xe6bf, 0xfa60, 0x75df, 0xbe88, 0xb749, 0x1, 0x0);
        gbc.writeMem(0x7c7d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe6bf);
        EXPECT(gbc.pc(), 0x7c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00B2
        gbc.setState(0xb585, 0x8820, 0x9a70, 0x8df3, 0xbeed, 0x7298, 0x1, 0x1);
        gbc.writeMem(0xb585, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8820);
        EXPECT(gbc.pc(), 0xb587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb585), 0xcb);
        EXPECT(gbc.readMem(0xb586), 0xf3);
        // CB F3 00B3
        gbc.setState(0x150d, 0x6b6d, 0xda60, 0x480b, 0xa0c7, 0x64d6, 0x0, 0x0);
        gbc.writeMem(0x150d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6b6d);
        EXPECT(gbc.pc(), 0x150f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00B4
        gbc.setState(0xbd6f, 0x5f80, 0xf130, 0x12d0, 0x7d2b, 0x8e95, 0x1, 0x0);
        gbc.writeMem(0xbd6f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5f80);
        EXPECT(gbc.pc(), 0xbd71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd6f), 0xcb);
        EXPECT(gbc.readMem(0xbd70), 0xf3);
        // CB F3 00B5
        gbc.setState(0x8864, 0x28b2, 0xa170, 0xf5dd, 0xb80b, 0x4bfd, 0x0, 0x1);
        gbc.writeMem(0x8864, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x28b2);
        EXPECT(gbc.pc(), 0x8866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8864), 0xcb);
        EXPECT(gbc.readMem(0x8865), 0xf3);
        // CB F3 00B7
        gbc.setState(0xae8c, 0x83a8, 0xb750, 0x1e, 0xd21e, 0xf0af, 0x1, 0x0);
        gbc.writeMem(0xae8c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x83a8);
        EXPECT(gbc.pc(), 0xae8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8c), 0xcb);
        EXPECT(gbc.readMem(0xae8d), 0xf3);
        // CB F3 00B8
        gbc.setState(0xb61e, 0xf6fe, 0x3d00, 0xc47a, 0xc48e, 0xf224, 0x0, 0x1);
        gbc.writeMem(0xb61e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf6fe);
        EXPECT(gbc.pc(), 0xb620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61e), 0xcb);
        EXPECT(gbc.readMem(0xb61f), 0xf3);
        // CB F3 00B9
        gbc.setState(0x903c, 0x78fa, 0x1b60, 0xe1bf, 0xede2, 0x2e2c, 0x1, 0x1);
        gbc.writeMem(0x903c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x78fa);
        EXPECT(gbc.pc(), 0x903e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903c), 0xcb);
        EXPECT(gbc.readMem(0x903d), 0xf3);
        // CB F3 00BA
        gbc.setState(0xb797, 0x8d59, 0x4680, 0xf35d, 0x8f09, 0xbb30, 0x0, 0x1);
        gbc.writeMem(0xb797, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8d59);
        EXPECT(gbc.pc(), 0xb799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb797), 0xcb);
        EXPECT(gbc.readMem(0xb798), 0xf3);
        // CB F3 00BB
        gbc.setState(0xa85f, 0x3c83, 0x97f0, 0x55bb, 0xd0ca, 0x78b6, 0x1, 0x0);
        gbc.writeMem(0xa85f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3c83);
        EXPECT(gbc.pc(), 0xa861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85f), 0xcb);
        EXPECT(gbc.readMem(0xa860), 0xf3);
        // CB F3 00BC
        gbc.setState(0x22fd, 0xc248, 0x7220, 0xe08a, 0xc663, 0x4056, 0x1, 0x0);
        gbc.writeMem(0x22fd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc248);
        EXPECT(gbc.pc(), 0x22ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00BD
        gbc.setState(0x1b49, 0xf1d5, 0x8e0, 0x6bcc, 0x6470, 0xbe9d, 0x1, 0x0);
        gbc.writeMem(0x1b49, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf1d5);
        EXPECT(gbc.pc(), 0x1b4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00BE
        gbc.setState(0x7371, 0x1256, 0xc90, 0x5a3d, 0xc1eb, 0xf3ab, 0x1, 0x1);
        gbc.writeMem(0x7371, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1256);
        EXPECT(gbc.pc(), 0x7373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00BF
        gbc.setState(0x4ad8, 0xc8fd, 0xd10, 0xc54a, 0x5271, 0x8b06, 0x1, 0x0);
        gbc.writeMem(0x4ad8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc8fd);
        EXPECT(gbc.pc(), 0x4ada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00C0
        gbc.setState(0x1778, 0x7737, 0xf230, 0x3451, 0x81d4, 0x81fa, 0x0, 0x0);
        gbc.writeMem(0x1778, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7737);
        EXPECT(gbc.pc(), 0x177a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00C1
        gbc.setState(0x4310, 0x64b0, 0x4420, 0xba4f, 0xcb45, 0xdf99, 0x0, 0x1);
        gbc.writeMem(0x4310, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x64b0);
        EXPECT(gbc.pc(), 0x4312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00C2
        gbc.setState(0xd5ce, 0x2f44, 0x4f20, 0x6b11, 0xfc29, 0x6836, 0x1, 0x0);
        gbc.writeMem(0xd5ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2f44);
        EXPECT(gbc.pc(), 0xd5d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ce), 0xcb);
        EXPECT(gbc.readMem(0xd5cf), 0xf3);
        // CB F3 00C3
        gbc.setState(0x1352, 0x2566, 0xfde0, 0x4fe6, 0x835d, 0x40b5, 0x1, 0x0);
        gbc.writeMem(0x1352, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2566);
        EXPECT(gbc.pc(), 0x1354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00C4
        gbc.setState(0x3b6d, 0xb1b9, 0x8370, 0x27d1, 0xfa0a, 0x2b3c, 0x1, 0x1);
        gbc.writeMem(0x3b6d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb1b9);
        EXPECT(gbc.pc(), 0x3b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00C5
        gbc.setState(0x88ed, 0xd680, 0x6ed0, 0x4d39, 0xccdc, 0xe26a, 0x0, 0x1);
        gbc.writeMem(0x88ed, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd680);
        EXPECT(gbc.pc(), 0x88ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ed), 0xcb);
        EXPECT(gbc.readMem(0x88ee), 0xf3);
        // CB F3 00C6
        gbc.setState(0x5c4c, 0x7e00, 0x6810, 0x5555, 0x4f26, 0x2dc7, 0x0, 0x1);
        gbc.writeMem(0x5c4c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7e00);
        EXPECT(gbc.pc(), 0x5c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00C7
        gbc.setState(0x56e, 0x90e0, 0x3dc0, 0xe5d0, 0x58be, 0x1f68, 0x1, 0x1);
        gbc.writeMem(0x56e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x90e0);
        EXPECT(gbc.pc(), 0x570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00C8
        gbc.setState(0x15de, 0xb327, 0x1560, 0xd2a7, 0xb275, 0x58c0, 0x1, 0x1);
        gbc.writeMem(0x15de, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb327);
        EXPECT(gbc.pc(), 0x15e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00C9
        gbc.setState(0x6cec, 0x4287, 0x7830, 0x750a, 0xa214, 0xdc59, 0x1, 0x0);
        gbc.writeMem(0x6cec, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4287);
        EXPECT(gbc.pc(), 0x6cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00CA
        gbc.setState(0x661c, 0xdae0, 0x1840, 0xc66f, 0xccdc, 0x4fc1, 0x1, 0x1);
        gbc.writeMem(0x661c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdae0);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00CB
        gbc.setState(0xe38c, 0xce4a, 0x7850, 0x76e1, 0x83ee, 0xc902, 0x1, 0x0);
        gbc.writeMem(0xe38c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xce4a);
        EXPECT(gbc.pc(), 0xe38e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38c), 0xcb);
        EXPECT(gbc.readMem(0xe38d), 0xf3);
        // CB F3 00CC
        gbc.setState(0x2ae8, 0x6bb, 0xeca0, 0x2dcf, 0x7d7c, 0x7766, 0x1, 0x1);
        gbc.writeMem(0x2ae8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6bb);
        EXPECT(gbc.pc(), 0x2aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00CD
        gbc.setState(0x600d, 0x76a0, 0x8250, 0x388b, 0xbfaf, 0xd50a, 0x1, 0x1);
        gbc.writeMem(0x600d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x76a0);
        EXPECT(gbc.pc(), 0x600f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00CE
        gbc.setState(0x4724, 0x6a88, 0x46f0, 0x1f8c, 0xcaaa, 0xcc85, 0x0, 0x1);
        gbc.writeMem(0x4724, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6a88);
        EXPECT(gbc.pc(), 0x4726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00CF
        gbc.setState(0x6f4e, 0xaa16, 0x5550, 0xaade, 0x43cb, 0x693a, 0x1, 0x0);
        gbc.writeMem(0x6f4e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xaa16);
        EXPECT(gbc.pc(), 0x6f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00D0
        gbc.setState(0x81a0, 0x2c4, 0x63a0, 0xfa4e, 0xf1a1, 0xd416, 0x1, 0x1);
        gbc.writeMem(0x81a0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2c4);
        EXPECT(gbc.pc(), 0x81a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a0), 0xcb);
        EXPECT(gbc.readMem(0x81a1), 0xf3);
        // CB F3 00D1
        gbc.setState(0xf0f, 0x69c9, 0xca30, 0xe8dd, 0x1463, 0xcb09, 0x0, 0x0);
        gbc.writeMem(0xf0f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x69c9);
        EXPECT(gbc.pc(), 0xf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00D2
        gbc.setState(0x15, 0x16da, 0x23e0, 0xf861, 0x1210, 0x10c6, 0x1, 0x0);
        gbc.writeMem(0x15, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x16da);
        EXPECT(gbc.pc(), 0x17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00D4
        gbc.setState(0xeb5, 0x6ba2, 0xf3e0, 0x40d, 0x3616, 0x8a2f, 0x1, 0x0);
        gbc.writeMem(0xeb5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6ba2);
        EXPECT(gbc.pc(), 0xeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00D5
        gbc.setState(0x30a, 0x5f82, 0x5540, 0x38d, 0x13f2, 0xd8ab, 0x1, 0x0);
        gbc.writeMem(0x30a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5f82);
        EXPECT(gbc.pc(), 0x30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00D6
        gbc.setState(0xd603, 0xc2c, 0x4c40, 0xede6, 0x5649, 0x5beb, 0x0, 0x0);
        gbc.writeMem(0xd603, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc2c);
        EXPECT(gbc.pc(), 0xd605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd603), 0xcb);
        EXPECT(gbc.readMem(0xd604), 0xf3);
        // CB F3 00D7
        gbc.setState(0x1ed5, 0xe478, 0x6d90, 0xdd59, 0xb926, 0x1391, 0x1, 0x1);
        gbc.writeMem(0x1ed5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe478);
        EXPECT(gbc.pc(), 0x1ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00D8
        gbc.setState(0x25d2, 0x2270, 0x2320, 0xbe69, 0xbc63, 0x520b, 0x0, 0x0);
        gbc.writeMem(0x25d2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2270);
        EXPECT(gbc.pc(), 0x25d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00D9
        gbc.setState(0x9c36, 0x9702, 0x8b90, 0x15b0, 0xc014, 0x50ce, 0x0, 0x1);
        gbc.writeMem(0x9c36, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9702);
        EXPECT(gbc.pc(), 0x9c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c36), 0xcb);
        EXPECT(gbc.readMem(0x9c37), 0xf3);
        // CB F3 00DA
        gbc.setState(0x8d69, 0x8116, 0x7fc0, 0xe87c, 0xe323, 0x5a9b, 0x0, 0x0);
        gbc.writeMem(0x8d69, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8116);
        EXPECT(gbc.pc(), 0x8d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d69), 0xcb);
        EXPECT(gbc.readMem(0x8d6a), 0xf3);
        // CB F3 00DB
        gbc.setState(0x97e5, 0x8d15, 0xdd70, 0xb702, 0xeb48, 0x4fe1, 0x0, 0x0);
        gbc.writeMem(0x97e5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8d15);
        EXPECT(gbc.pc(), 0x97e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97e5), 0xcb);
        EXPECT(gbc.readMem(0x97e6), 0xf3);
        // CB F3 00DC
        gbc.setState(0x7e67, 0xf78b, 0x5cc0, 0x96b8, 0x3667, 0xc760, 0x0, 0x0);
        gbc.writeMem(0x7e67, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf78b);
        EXPECT(gbc.pc(), 0x7e69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00DE
        gbc.setState(0x24d, 0x984b, 0xeb40, 0xa93f, 0x14c3, 0xbf6e, 0x0, 0x0);
        gbc.writeMem(0x24d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x984b);
        EXPECT(gbc.pc(), 0x24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00DF
        gbc.setState(0x9e25, 0x8d12, 0xdb30, 0xb45f, 0xa03d, 0xdcb4, 0x1, 0x0);
        gbc.writeMem(0x9e25, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8d12);
        EXPECT(gbc.pc(), 0x9e27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e25), 0xcb);
        EXPECT(gbc.readMem(0x9e26), 0xf3);
        // CB F3 00E0
        gbc.setState(0x1b5e, 0x41d0, 0x84b0, 0xf7a7, 0x34bd, 0xd087, 0x0, 0x0);
        gbc.writeMem(0x1b5e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x41d0);
        EXPECT(gbc.pc(), 0x1b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00E1
        gbc.setState(0x7044, 0x4c01, 0xc2a0, 0x8007, 0x3269, 0xfab9, 0x1, 0x0);
        gbc.writeMem(0x7044, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4c01);
        EXPECT(gbc.pc(), 0x7046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00E2
        gbc.setState(0x5bc8, 0x5ef5, 0x5ef0, 0x4b08, 0x8ad7, 0x3363, 0x1, 0x0);
        gbc.writeMem(0x5bc8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5ef5);
        EXPECT(gbc.pc(), 0x5bca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00E3
        gbc.setState(0x74c2, 0x336d, 0xcf50, 0xf9a9, 0x3a3, 0x2840, 0x1, 0x1);
        gbc.writeMem(0x74c2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x336d);
        EXPECT(gbc.pc(), 0x74c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00E4
        gbc.setState(0xe07d, 0x5d23, 0x4310, 0xa639, 0xf2b6, 0x15ba, 0x1, 0x0);
        gbc.writeMem(0xe07d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5d23);
        EXPECT(gbc.pc(), 0xe07f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe07d), 0xcb);
        EXPECT(gbc.readMem(0xe07e), 0xf3);
        // CB F3 00E6
        gbc.setState(0xbf5, 0x817b, 0x1c10, 0x1325, 0xc016, 0x598b, 0x1, 0x1);
        gbc.writeMem(0xbf5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x817b);
        EXPECT(gbc.pc(), 0xbf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00E7
        gbc.setState(0x50a6, 0x880c, 0x4100, 0x60fd, 0xa886, 0x35b8, 0x1, 0x0);
        gbc.writeMem(0x50a6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x880c);
        EXPECT(gbc.pc(), 0x50a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00E8
        gbc.setState(0x59c, 0xf6e9, 0x5660, 0x4a34, 0x2f9b, 0x47a2, 0x0, 0x1);
        gbc.writeMem(0x59c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf6e9);
        EXPECT(gbc.pc(), 0x59e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00E9
        gbc.setState(0xf6e, 0xab51, 0x1090, 0xcd27, 0xc826, 0xddaf, 0x1, 0x1);
        gbc.writeMem(0xf6e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xab51);
        EXPECT(gbc.pc(), 0xf70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00EA
        gbc.setState(0xd4dd, 0x3018, 0xf4f0, 0xc994, 0xb512, 0x3fc8, 0x1, 0x1);
        gbc.writeMem(0xd4dd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3018);
        EXPECT(gbc.pc(), 0xd4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4dd), 0xcb);
        EXPECT(gbc.readMem(0xd4de), 0xf3);
        // CB F3 00EB
        gbc.setState(0x6878, 0x55f4, 0xab00, 0x361f, 0x2a56, 0x8476, 0x1, 0x0);
        gbc.writeMem(0x6878, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x55f4);
        EXPECT(gbc.pc(), 0x687a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00EC
        gbc.setState(0xbd1c, 0xead3, 0xba50, 0x2908, 0xdc34, 0xdc4e, 0x1, 0x1);
        gbc.writeMem(0xbd1c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xead3);
        EXPECT(gbc.pc(), 0xbd1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd1c), 0xcb);
        EXPECT(gbc.readMem(0xbd1d), 0xf3);
        // CB F3 00ED
        gbc.setState(0x71c0, 0x76e5, 0xb750, 0x9868, 0x3295, 0xfbfe, 0x0, 0x0);
        gbc.writeMem(0x71c0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x76e5);
        EXPECT(gbc.pc(), 0x71c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00EE
        gbc.setState(0xe421, 0xcb00, 0xc700, 0x96af, 0xeeeb, 0x6daa, 0x1, 0x1);
        gbc.writeMem(0xe421, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcb00);
        EXPECT(gbc.pc(), 0xe423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe421), 0xcb);
        EXPECT(gbc.readMem(0xe422), 0xf3);
        // CB F3 00EF
        gbc.setState(0x8a55, 0x3e59, 0x6ed0, 0x3542, 0x74fc, 0xb6, 0x1, 0x1);
        gbc.writeMem(0x8a55, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3e59);
        EXPECT(gbc.pc(), 0x8a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a55), 0xcb);
        EXPECT(gbc.readMem(0x8a56), 0xf3);
        // CB F3 00F0
        gbc.setState(0x5c63, 0x232e, 0x97c0, 0x83e, 0x6ccc, 0xd2d2, 0x1, 0x0);
        gbc.writeMem(0x5c63, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x232e);
        EXPECT(gbc.pc(), 0x5c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F1
        gbc.setState(0x4689, 0xc7e, 0xc330, 0x53d2, 0x1258, 0x190b, 0x1, 0x1);
        gbc.writeMem(0x4689, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc7e);
        EXPECT(gbc.pc(), 0x468b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00F2
        gbc.setState(0xe28a, 0x71a9, 0xa9d0, 0x7b01, 0xd39b, 0xe98c, 0x1, 0x0);
        gbc.writeMem(0xe28a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x71a9);
        EXPECT(gbc.pc(), 0xe28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28a), 0xcb);
        EXPECT(gbc.readMem(0xe28b), 0xf3);
        // CB F3 00F3
        gbc.setState(0x1f3e, 0x4901, 0xfd0, 0x781c, 0xb76b, 0x2d44, 0x1, 0x0);
        gbc.writeMem(0x1f3e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4901);
        EXPECT(gbc.pc(), 0x1f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00F4
        gbc.setState(0xff6, 0x59f1, 0xa00, 0x1e4b, 0xd, 0xbed5, 0x0, 0x0);
        gbc.writeMem(0xff6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x59f1);
        EXPECT(gbc.pc(), 0xff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F5
        gbc.setState(0x470a, 0xb827, 0x2380, 0x2fdb, 0x48ef, 0x2900, 0x1, 0x0);
        gbc.writeMem(0x470a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb827);
        EXPECT(gbc.pc(), 0x470c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F6
        gbc.setState(0x6836, 0xa916, 0xaa40, 0xe1bd, 0x92ee, 0x5390, 0x0, 0x0);
        gbc.writeMem(0x6836, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa916);
        EXPECT(gbc.pc(), 0x6838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F7
        gbc.setState(0x24ec, 0x6d25, 0x8580, 0x18fa, 0x5b90, 0x62bd, 0x0, 0x1);
        gbc.writeMem(0x24ec, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6d25);
        EXPECT(gbc.pc(), 0x24ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F8
        gbc.setState(0x5393, 0x1560, 0xf8e0, 0x7045, 0x4cee, 0x7e3, 0x0, 0x1);
        gbc.writeMem(0x5393, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1560);
        EXPECT(gbc.pc(), 0x5395);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00F9
        gbc.setState(0xe339, 0xfb3e, 0x7e50, 0x6c05, 0x3c31, 0xf25f, 0x0, 0x0);
        gbc.writeMem(0xe339, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfb3e);
        EXPECT(gbc.pc(), 0xe33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe339), 0xcb);
        EXPECT(gbc.readMem(0xe33a), 0xf3);
        // CB F3 00FA
        gbc.setState(0x51aa, 0x1e50, 0xfa0, 0x4246, 0x601e, 0xc6e, 0x0, 0x1);
        gbc.writeMem(0x51aa, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1e50);
        EXPECT(gbc.pc(), 0x51ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 00FC
        gbc.setState(0xb1ae, 0x2ae8, 0xee0, 0x3754, 0x6887, 0x12e6, 0x1, 0x1);
        gbc.writeMem(0xb1ae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2ae8);
        EXPECT(gbc.pc(), 0xb1b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ae), 0xcb);
        EXPECT(gbc.readMem(0xb1af), 0xf3);
        // CB F3 00FD
        gbc.setState(0xc326, 0x2cff, 0xc590, 0xb58f, 0xd17e, 0x9420, 0x1, 0x1);
        gbc.writeMem(0xc326, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2cff);
        EXPECT(gbc.pc(), 0xc328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc326), 0xcb);
        EXPECT(gbc.readMem(0xc327), 0xf3);
        // CB F3 00FE
        gbc.setState(0x7ec0, 0x53b3, 0x6070, 0x8dd8, 0xddaf, 0x2f46, 0x1, 0x1);
        gbc.writeMem(0x7ec0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x53b3);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 00FF
        gbc.setState(0xe53, 0x9407, 0x7ef0, 0x4975, 0xb1e3, 0xe0be, 0x1, 0x0);
        gbc.writeMem(0xe53, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9407);
        EXPECT(gbc.pc(), 0xe55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0100
        gbc.setState(0x824, 0x9556, 0x16a0, 0xfae1, 0xa3d7, 0xf980, 0x1, 0x0);
        gbc.writeMem(0x824, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9556);
        EXPECT(gbc.pc(), 0x826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0101
        gbc.setState(0x5712, 0x964b, 0x6460, 0x3091, 0xf760, 0x41ab, 0x0, 0x0);
        gbc.writeMem(0x5712, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x964b);
        EXPECT(gbc.pc(), 0x5714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0102
        gbc.setState(0x7a92, 0xbf44, 0x9f00, 0x4edb, 0x8554, 0x3ece, 0x0, 0x1);
        gbc.writeMem(0x7a92, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbf44);
        EXPECT(gbc.pc(), 0x7a94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0103
        gbc.setState(0x7729, 0xf12e, 0x7f00, 0xcc54, 0xe3f8, 0x744, 0x1, 0x0);
        gbc.writeMem(0x7729, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf12e);
        EXPECT(gbc.pc(), 0x772b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0104
        gbc.setState(0xe26b, 0xc1ad, 0xbd0, 0xdbd6, 0x14af, 0x3cc3, 0x0, 0x0);
        gbc.writeMem(0xe26b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc1ad);
        EXPECT(gbc.pc(), 0xe26d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26b), 0xcb);
        EXPECT(gbc.readMem(0xe26c), 0xf3);
        // CB F3 0105
        gbc.setState(0xd268, 0xf044, 0x5d10, 0xe22a, 0x8ea, 0x79e0, 0x1, 0x1);
        gbc.writeMem(0xd268, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf044);
        EXPECT(gbc.pc(), 0xd26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd268), 0xcb);
        EXPECT(gbc.readMem(0xd269), 0xf3);
        // CB F3 0106
        gbc.setState(0xd498, 0x9d46, 0x6320, 0xf1e7, 0x5717, 0x8d31, 0x1, 0x0);
        gbc.writeMem(0xd498, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9d46);
        EXPECT(gbc.pc(), 0xd49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd498), 0xcb);
        EXPECT(gbc.readMem(0xd499), 0xf3);
        // CB F3 0107
        gbc.setState(0xd169, 0x6b00, 0xf7e0, 0x7b59, 0x5561, 0x70b4, 0x1, 0x0);
        gbc.writeMem(0xd169, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6b00);
        EXPECT(gbc.pc(), 0xd16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd169), 0xcb);
        EXPECT(gbc.readMem(0xd16a), 0xf3);
        // CB F3 0108
        gbc.setState(0x300b, 0x70ac, 0xfa40, 0x179e, 0x5a30, 0xaa8f, 0x1, 0x1);
        gbc.writeMem(0x300b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x70ac);
        EXPECT(gbc.pc(), 0x300d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0109
        gbc.setState(0x19e, 0xc524, 0x13e0, 0xe092, 0x3607, 0x7cbe, 0x0, 0x1);
        gbc.writeMem(0x19e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc524);
        EXPECT(gbc.pc(), 0x1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 010A
        gbc.setState(0x6150, 0xc29e, 0xc1d0, 0x5c27, 0xf87d, 0xd093, 0x1, 0x1);
        gbc.writeMem(0x6150, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc29e);
        EXPECT(gbc.pc(), 0x6152);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 010B
        gbc.setState(0xa05e, 0xd5e, 0x7670, 0x3ca6, 0x3e28, 0xa19a, 0x1, 0x1);
        gbc.writeMem(0xa05e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd5e);
        EXPECT(gbc.pc(), 0xa060);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05e), 0xcb);
        EXPECT(gbc.readMem(0xa05f), 0xf3);
        // CB F3 010C
        gbc.setState(0x5993, 0xcc7b, 0x44e0, 0xa53, 0x2141, 0x9302, 0x0, 0x1);
        gbc.writeMem(0x5993, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcc7b);
        EXPECT(gbc.pc(), 0x5995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 010D
        gbc.setState(0xea62, 0x15d1, 0xeac0, 0x26b8, 0x72b9, 0x5f91, 0x1, 0x0);
        gbc.writeMem(0xea62, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x15d1);
        EXPECT(gbc.pc(), 0xea64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea62), 0xcb);
        EXPECT(gbc.readMem(0xea63), 0xf3);
        // CB F3 010E
        gbc.setState(0x98d8, 0x294f, 0x5cf0, 0x770, 0x8398, 0x57bf, 0x1, 0x1);
        gbc.writeMem(0x98d8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x294f);
        EXPECT(gbc.pc(), 0x98da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d8), 0xcb);
        EXPECT(gbc.readMem(0x98d9), 0xf3);
        // CB F3 010F
        gbc.setState(0xea1a, 0x7735, 0x64e0, 0xa7b6, 0x9c66, 0x47c4, 0x1, 0x0);
        gbc.writeMem(0xea1a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7735);
        EXPECT(gbc.pc(), 0xea1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea1a), 0xcb);
        EXPECT(gbc.readMem(0xea1b), 0xf3);
        // CB F3 0111
        gbc.setState(0x9dd0, 0xb328, 0xffc0, 0xaf07, 0x628, 0x84f2, 0x1, 0x1);
        gbc.writeMem(0x9dd0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb328);
        EXPECT(gbc.pc(), 0x9dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd0), 0xcb);
        EXPECT(gbc.readMem(0x9dd1), 0xf3);
        // CB F3 0112
        gbc.setState(0x7cfc, 0x9c2, 0x7990, 0xb37f, 0x8733, 0x905f, 0x0, 0x0);
        gbc.writeMem(0x7cfc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9c2);
        EXPECT(gbc.pc(), 0x7cfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0113
        gbc.setState(0xeee1, 0x3d1, 0x39c0, 0xea90, 0xce75, 0x887e, 0x0, 0x1);
        gbc.writeMem(0xeee1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3d1);
        EXPECT(gbc.pc(), 0xeee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee1), 0xcb);
        EXPECT(gbc.readMem(0xeee2), 0xf3);
        // CB F3 0114
        gbc.setState(0xe2e0, 0x6bf, 0x61a0, 0x814e, 0xd4ae, 0x4f2, 0x1, 0x1);
        gbc.writeMem(0xe2e0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6bf);
        EXPECT(gbc.pc(), 0xe2e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e0), 0xcb);
        EXPECT(gbc.readMem(0xe2e1), 0xf3);
        // CB F3 0115
        gbc.setState(0x1378, 0xc265, 0xd3c0, 0xb741, 0x1ece, 0x2bb4, 0x0, 0x0);
        gbc.writeMem(0x1378, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc265);
        EXPECT(gbc.pc(), 0x137a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0116
        gbc.setState(0x8f42, 0x6e8f, 0xae20, 0xbfa9, 0x6a0e, 0x3c7d, 0x1, 0x0);
        gbc.writeMem(0x8f42, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6e8f);
        EXPECT(gbc.pc(), 0x8f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f42), 0xcb);
        EXPECT(gbc.readMem(0x8f43), 0xf3);
        // CB F3 0117
        gbc.setState(0xdc56, 0x600d, 0x18d0, 0xd26d, 0x2a1e, 0x6f88, 0x0, 0x1);
        gbc.writeMem(0xdc56, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x600d);
        EXPECT(gbc.pc(), 0xdc58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc56), 0xcb);
        EXPECT(gbc.readMem(0xdc57), 0xf3);
        // CB F3 0118
        gbc.setState(0x2678, 0x29b, 0xad70, 0x6d68, 0x28df, 0xdc49, 0x0, 0x1);
        gbc.writeMem(0x2678, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x29b);
        EXPECT(gbc.pc(), 0x267a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0119
        gbc.setState(0x248e, 0xcc44, 0xd3c0, 0xa244, 0xbe71, 0xdfcc, 0x1, 0x1);
        gbc.writeMem(0x248e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xcc44);
        EXPECT(gbc.pc(), 0x2490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 011A
        gbc.setState(0x4512, 0x9e3f, 0xc190, 0x2881, 0xb2e7, 0xe03a, 0x1, 0x1);
        gbc.writeMem(0x4512, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9e3f);
        EXPECT(gbc.pc(), 0x4514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 011B
        gbc.setState(0xadbe, 0x31f2, 0xd8e0, 0x3f85, 0xdb2c, 0xc0a, 0x0, 0x1);
        gbc.writeMem(0xadbe, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x31f2);
        EXPECT(gbc.pc(), 0xadc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadbe), 0xcb);
        EXPECT(gbc.readMem(0xadbf), 0xf3);
        // CB F3 011C
        gbc.setState(0x8e30, 0x4b66, 0x28b0, 0xc1c4, 0xa246, 0x15cd, 0x0, 0x0);
        gbc.writeMem(0x8e30, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4b66);
        EXPECT(gbc.pc(), 0x8e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e30), 0xcb);
        EXPECT(gbc.readMem(0x8e31), 0xf3);
        // CB F3 011D
        gbc.setState(0x8c94, 0x17cf, 0x6660, 0x4028, 0x4bf1, 0xc01c, 0x0, 0x0);
        gbc.writeMem(0x8c94, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x17cf);
        EXPECT(gbc.pc(), 0x8c96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c94), 0xcb);
        EXPECT(gbc.readMem(0x8c95), 0xf3);
        // CB F3 011E
        gbc.setState(0xd1d7, 0xa8f5, 0x5930, 0x231c, 0x1eb4, 0x353d, 0x1, 0x1);
        gbc.writeMem(0xd1d7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa8f5);
        EXPECT(gbc.pc(), 0xd1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d7), 0xcb);
        EXPECT(gbc.readMem(0xd1d8), 0xf3);
        // CB F3 011F
        gbc.setState(0xd35e, 0xed14, 0x56b0, 0x3375, 0x758, 0x4d1e, 0x0, 0x1);
        gbc.writeMem(0xd35e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xed14);
        EXPECT(gbc.pc(), 0xd360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd35e), 0xcb);
        EXPECT(gbc.readMem(0xd35f), 0xf3);
        // CB F3 0120
        gbc.setState(0xc5ad, 0xec01, 0x5920, 0x3ba7, 0x642b, 0x3b3b, 0x0, 0x0);
        gbc.writeMem(0xc5ad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xec01);
        EXPECT(gbc.pc(), 0xc5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ad), 0xcb);
        EXPECT(gbc.readMem(0xc5ae), 0xf3);
        // CB F3 0121
        gbc.setState(0x78d6, 0xd90c, 0x84b0, 0x108b, 0xb155, 0xf986, 0x1, 0x0);
        gbc.writeMem(0x78d6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd90c);
        EXPECT(gbc.pc(), 0x78d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0122
        gbc.setState(0x7dd5, 0xa34f, 0x4820, 0xb5f4, 0x2617, 0xba68, 0x1, 0x1);
        gbc.writeMem(0x7dd5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa34f);
        EXPECT(gbc.pc(), 0x7dd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0123
        gbc.setState(0xe954, 0x6be0, 0x63f0, 0xcdd9, 0x4621, 0xfe89, 0x0, 0x1);
        gbc.writeMem(0xe954, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6be0);
        EXPECT(gbc.pc(), 0xe956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe954), 0xcb);
        EXPECT(gbc.readMem(0xe955), 0xf3);
        // CB F3 0124
        gbc.setState(0x3a26, 0x8c8c, 0x55a0, 0x5412, 0x4dc5, 0xc000, 0x0, 0x0);
        gbc.writeMem(0x3a26, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8c8c);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0125
        gbc.setState(0x6f92, 0x190d, 0x9cb0, 0xe858, 0x183, 0x985b, 0x1, 0x0);
        gbc.writeMem(0x6f92, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x190d);
        EXPECT(gbc.pc(), 0x6f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0126
        gbc.setState(0x7b62, 0x1990, 0x6510, 0x7b14, 0x15b1, 0x63f3, 0x1, 0x1);
        gbc.writeMem(0x7b62, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1990);
        EXPECT(gbc.pc(), 0x7b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0127
        gbc.setState(0xde47, 0x71d6, 0x4380, 0x45c7, 0x1e0b, 0xb528, 0x1, 0x0);
        gbc.writeMem(0xde47, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x71d6);
        EXPECT(gbc.pc(), 0xde49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde47), 0xcb);
        EXPECT(gbc.readMem(0xde48), 0xf3);
        // CB F3 0128
        gbc.setState(0x7188, 0xc398, 0xcea0, 0x5139, 0x2add, 0xd748, 0x0, 0x0);
        gbc.writeMem(0x7188, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc398);
        EXPECT(gbc.pc(), 0x718a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0129
        gbc.setState(0x4d25, 0x8902, 0xbc70, 0x5734, 0xdce9, 0xd772, 0x1, 0x0);
        gbc.writeMem(0x4d25, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8902);
        EXPECT(gbc.pc(), 0x4d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 012A
        gbc.setState(0x2d90, 0xc3c4, 0x71f0, 0x47fa, 0x8799, 0xd02, 0x0, 0x0);
        gbc.writeMem(0x2d90, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc3c4);
        EXPECT(gbc.pc(), 0x2d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 012B
        gbc.setState(0x5a5c, 0x80ad, 0xdb70, 0xa99, 0x20b5, 0xf164, 0x0, 0x1);
        gbc.writeMem(0x5a5c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x5a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 012C
        gbc.setState(0x26e9, 0x9b1b, 0x1f80, 0x2184, 0x9ed, 0x1500, 0x1, 0x0);
        gbc.writeMem(0x26e9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9b1b);
        EXPECT(gbc.pc(), 0x26eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 012D
        gbc.setState(0x7d, 0x5756, 0x2b90, 0x5951, 0x7cd2, 0x7fb5, 0x1, 0x0);
        gbc.writeMem(0x7d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5756);
        EXPECT(gbc.pc(), 0x7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 012E
        gbc.setState(0xaec7, 0x8934, 0x6970, 0x111c, 0xd25, 0x27d3, 0x0, 0x1);
        gbc.writeMem(0xaec7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8934);
        EXPECT(gbc.pc(), 0xaec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec7), 0xcb);
        EXPECT(gbc.readMem(0xaec8), 0xf3);
        // CB F3 012F
        gbc.setState(0x8e0, 0xde6c, 0xf4d0, 0xd7ff, 0x8d5e, 0x25b8, 0x1, 0x1);
        gbc.writeMem(0x8e0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xde6c);
        EXPECT(gbc.pc(), 0x8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0130
        gbc.setState(0x9507, 0x1c3a, 0x5a70, 0x76d1, 0xa8ac, 0xeb02, 0x1, 0x1);
        gbc.writeMem(0x9507, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1c3a);
        EXPECT(gbc.pc(), 0x9509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9507), 0xcb);
        EXPECT(gbc.readMem(0x9508), 0xf3);
        // CB F3 0131
        gbc.setState(0x5528, 0x5aae, 0x23d0, 0xf84b, 0x87a5, 0xa168, 0x1, 0x1);
        gbc.writeMem(0x5528, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5aae);
        EXPECT(gbc.pc(), 0x552a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0132
        gbc.setState(0x8c90, 0x9b36, 0x7e0, 0x5257, 0xb77f, 0x7452, 0x1, 0x1);
        gbc.writeMem(0x8c90, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9b36);
        EXPECT(gbc.pc(), 0x8c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c90), 0xcb);
        EXPECT(gbc.readMem(0x8c91), 0xf3);
        // CB F3 0133
        gbc.setState(0xcd9f, 0x61d2, 0xf0b0, 0x6e29, 0xac68, 0x4092, 0x1, 0x1);
        gbc.writeMem(0xcd9f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x61d2);
        EXPECT(gbc.pc(), 0xcda1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9f), 0xcb);
        EXPECT(gbc.readMem(0xcda0), 0xf3);
        // CB F3 0134
        gbc.setState(0x912d, 0xd52b, 0xf3e0, 0x6386, 0x2ad9, 0xcab2, 0x0, 0x0);
        gbc.writeMem(0x912d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd52b);
        EXPECT(gbc.pc(), 0x912f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912d), 0xcb);
        EXPECT(gbc.readMem(0x912e), 0xf3);
        // CB F3 0135
        gbc.setState(0xdb41, 0x6960, 0xbf50, 0x8b65, 0xad0f, 0xb912, 0x1, 0x1);
        gbc.writeMem(0xdb41, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6960);
        EXPECT(gbc.pc(), 0xdb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb41), 0xcb);
        EXPECT(gbc.readMem(0xdb42), 0xf3);
        // CB F3 0136
        gbc.setState(0x3d55, 0x2883, 0x9990, 0x761c, 0x5d24, 0x463b, 0x1, 0x1);
        gbc.writeMem(0x3d55, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2883);
        EXPECT(gbc.pc(), 0x3d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0137
        gbc.setState(0xe447, 0x657e, 0x6240, 0xf1b0, 0x91cd, 0x3b9d, 0x1, 0x0);
        gbc.writeMem(0xe447, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x657e);
        EXPECT(gbc.pc(), 0xe449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe447), 0xcb);
        EXPECT(gbc.readMem(0xe448), 0xf3);
        // CB F3 0138
        gbc.setState(0x2482, 0x9348, 0x4420, 0x165e, 0xb580, 0x1ca2, 0x0, 0x1);
        gbc.writeMem(0x2482, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9348);
        EXPECT(gbc.pc(), 0x2484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0139
        gbc.setState(0x6c12, 0x8997, 0x4440, 0xd972, 0x94c8, 0xa9f7, 0x0, 0x0);
        gbc.writeMem(0x6c12, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8997);
        EXPECT(gbc.pc(), 0x6c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 013A
        gbc.setState(0xc2dd, 0xa377, 0xb3e0, 0x2e0d, 0x4411, 0x76fb, 0x1, 0x1);
        gbc.writeMem(0xc2dd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa377);
        EXPECT(gbc.pc(), 0xc2df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2dd), 0xcb);
        EXPECT(gbc.readMem(0xc2de), 0xf3);
        // CB F3 013B
        gbc.setState(0x30c2, 0x836d, 0xf2b0, 0x92cf, 0x4795, 0x4b33, 0x0, 0x1);
        gbc.writeMem(0x30c2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x836d);
        EXPECT(gbc.pc(), 0x30c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 013C
        gbc.setState(0x67f3, 0x666c, 0x4f90, 0x21d1, 0x7a32, 0xf860, 0x0, 0x0);
        gbc.writeMem(0x67f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x666c);
        EXPECT(gbc.pc(), 0x67f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 013D
        gbc.setState(0xc80d, 0xad60, 0x2170, 0x3ece, 0x618a, 0x7b21, 0x0, 0x0);
        gbc.writeMem(0xc80d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xad60);
        EXPECT(gbc.pc(), 0xc80f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc80d), 0xcb);
        EXPECT(gbc.readMem(0xc80e), 0xf3);
        // CB F3 013F
        gbc.setState(0xba1e, 0x5fd8, 0x9300, 0xada6, 0x1a4f, 0x3e32, 0x1, 0x1);
        gbc.writeMem(0xba1e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5fd8);
        EXPECT(gbc.pc(), 0xba20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1e), 0xcb);
        EXPECT(gbc.readMem(0xba1f), 0xf3);
        // CB F3 0140
        gbc.setState(0xaf40, 0x94e2, 0xd2c0, 0x6edc, 0x19cb, 0xc247, 0x1, 0x0);
        gbc.writeMem(0xaf40, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x94e2);
        EXPECT(gbc.pc(), 0xaf42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf40), 0xcb);
        EXPECT(gbc.readMem(0xaf41), 0xf3);
        // CB F3 0141
        gbc.setState(0x3fbf, 0x32e7, 0x580, 0xd26a, 0xaae5, 0xd1d3, 0x0, 0x1);
        gbc.writeMem(0x3fbf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x32e7);
        EXPECT(gbc.pc(), 0x3fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0142
        gbc.setState(0x1c55, 0xb21e, 0x9990, 0xf3cf, 0x6a75, 0x7a67, 0x0, 0x1);
        gbc.writeMem(0x1c55, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb21e);
        EXPECT(gbc.pc(), 0x1c57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0143
        gbc.setState(0xfe1, 0x3955, 0x2120, 0x7da1, 0xeaea, 0x524f, 0x1, 0x1);
        gbc.writeMem(0xfe1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3955);
        EXPECT(gbc.pc(), 0xfe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0144
        gbc.setState(0xcb23, 0x2e99, 0xf0a0, 0x59e1, 0x5f7a, 0xab29, 0x1, 0x0);
        gbc.writeMem(0xcb23, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2e99);
        EXPECT(gbc.pc(), 0xcb25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb23), 0xcb);
        EXPECT(gbc.readMem(0xcb24), 0xf3);
        // CB F3 0145
        gbc.setState(0xcbb1, 0xe56c, 0xc170, 0x92af, 0xa5b0, 0x2ddd, 0x0, 0x0);
        gbc.writeMem(0xcbb1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe56c);
        EXPECT(gbc.pc(), 0xcbb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbb1), 0xcb);
        EXPECT(gbc.readMem(0xcbb2), 0xf3);
        // CB F3 0146
        gbc.setState(0x3693, 0xa4c, 0xdb20, 0xc14d, 0x4b0d, 0xdae2, 0x1, 0x0);
        gbc.writeMem(0x3693, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa4c);
        EXPECT(gbc.pc(), 0x3695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0147
        gbc.setState(0x1ffd, 0x795b, 0x6570, 0x1c00, 0x358, 0xfc44, 0x1, 0x0);
        gbc.writeMem(0x1ffd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x795b);
        EXPECT(gbc.pc(), 0x1fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0148
        gbc.setState(0xa92a, 0x274, 0x13b0, 0xf29a, 0x731e, 0x6f05, 0x1, 0x1);
        gbc.writeMem(0xa92a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x274);
        EXPECT(gbc.pc(), 0xa92c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa92a), 0xcb);
        EXPECT(gbc.readMem(0xa92b), 0xf3);
        // CB F3 0149
        gbc.setState(0x5784, 0xc484, 0x42d0, 0x595e, 0xea50, 0x101, 0x1, 0x1);
        gbc.writeMem(0x5784, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc484);
        EXPECT(gbc.pc(), 0x5786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 014A
        gbc.setState(0x5ef8, 0x3de7, 0x2630, 0x6138, 0xf640, 0xe4d9, 0x0, 0x0);
        gbc.writeMem(0x5ef8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3de7);
        EXPECT(gbc.pc(), 0x5efa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 014B
        gbc.setState(0xb967, 0x3587, 0x4a80, 0x91d4, 0x1f4, 0xf5e5, 0x0, 0x0);
        gbc.writeMem(0xb967, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3587);
        EXPECT(gbc.pc(), 0xb969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb967), 0xcb);
        EXPECT(gbc.readMem(0xb968), 0xf3);
        // CB F3 014C
        gbc.setState(0xae3f, 0xebfb, 0x8ea0, 0x3a71, 0x794a, 0x5f1d, 0x1, 0x0);
        gbc.writeMem(0xae3f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xebfb);
        EXPECT(gbc.pc(), 0xae41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3f), 0xcb);
        EXPECT(gbc.readMem(0xae40), 0xf3);
        // CB F3 014D
        gbc.setState(0xc4ef, 0x637e, 0xddf0, 0xe9d1, 0xe706, 0xb701, 0x1, 0x0);
        gbc.writeMem(0xc4ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x637e);
        EXPECT(gbc.pc(), 0xc4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ef), 0xcb);
        EXPECT(gbc.readMem(0xc4f0), 0xf3);
        // CB F3 014E
        gbc.setState(0x4d58, 0x57c7, 0xfc70, 0xdd85, 0x222, 0x3da9, 0x0, 0x0);
        gbc.writeMem(0x4d58, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x57c7);
        EXPECT(gbc.pc(), 0x4d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 014F
        gbc.setState(0x451d, 0xa0d0, 0x4350, 0xbf1a, 0xd237, 0x5efa, 0x0, 0x1);
        gbc.writeMem(0x451d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa0d0);
        EXPECT(gbc.pc(), 0x451f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0150
        gbc.setState(0x4d4, 0x8342, 0x80a0, 0xbff1, 0x646e, 0x2f8, 0x0, 0x0);
        gbc.writeMem(0x4d4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8342);
        EXPECT(gbc.pc(), 0x4d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0151
        gbc.setState(0x611d, 0x65ae, 0xec30, 0xe1f1, 0x71cf, 0x8327, 0x1, 0x0);
        gbc.writeMem(0x611d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x65ae);
        EXPECT(gbc.pc(), 0x611f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0152
        gbc.setState(0xdfd1, 0x9158, 0xc710, 0xcc72, 0x5df2, 0xcbc6, 0x1, 0x1);
        gbc.writeMem(0xdfd1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9158);
        EXPECT(gbc.pc(), 0xdfd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd1), 0xcb);
        EXPECT(gbc.readMem(0xdfd2), 0xf3);
        // CB F3 0154
        gbc.setState(0x5a2a, 0xe5e6, 0x9950, 0x912a, 0xe31c, 0x5c97, 0x0, 0x1);
        gbc.writeMem(0x5a2a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe5e6);
        EXPECT(gbc.pc(), 0x5a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0155
        gbc.setState(0xbfa3, 0x5ff6, 0x64e0, 0xab64, 0xb16b, 0x54ea, 0x0, 0x0);
        gbc.writeMem(0xbfa3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5ff6);
        EXPECT(gbc.pc(), 0xbfa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa3), 0xcb);
        EXPECT(gbc.readMem(0xbfa4), 0xf3);
        // CB F3 0156
        gbc.setState(0xc969, 0x9772, 0x77b0, 0x85b5, 0x41b, 0xe00b, 0x0, 0x0);
        gbc.writeMem(0xc969, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9772);
        EXPECT(gbc.pc(), 0xc96b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc969), 0xcb);
        EXPECT(gbc.readMem(0xc96a), 0xf3);
        // CB F3 0157
        gbc.setState(0xc2f1, 0x36dd, 0x4800, 0x384e, 0x580f, 0xa43c, 0x1, 0x0);
        gbc.writeMem(0xc2f1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x36dd);
        EXPECT(gbc.pc(), 0xc2f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f1), 0xcb);
        EXPECT(gbc.readMem(0xc2f2), 0xf3);
        // CB F3 0158
        gbc.setState(0xbf76, 0x1b4e, 0xcdd0, 0x116a, 0x1eb4, 0xc07b, 0x0, 0x0);
        gbc.writeMem(0xbf76, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1b4e);
        EXPECT(gbc.pc(), 0xbf78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf76), 0xcb);
        EXPECT(gbc.readMem(0xbf77), 0xf3);
        // CB F3 0159
        gbc.setState(0xe682, 0x5d03, 0xe330, 0xbfcc, 0x2491, 0x9a23, 0x1, 0x1);
        gbc.writeMem(0xe682, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5d03);
        EXPECT(gbc.pc(), 0xe684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe682), 0xcb);
        EXPECT(gbc.readMem(0xe683), 0xf3);
        // CB F3 015A
        gbc.setState(0xc73, 0xfb93, 0xcfe0, 0xa7ea, 0x4c0c, 0x1ec8, 0x0, 0x1);
        gbc.writeMem(0xc73, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfb93);
        EXPECT(gbc.pc(), 0xc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 015B
        gbc.setState(0x4911, 0x2482, 0x15f0, 0xac0c, 0x1dee, 0xbfd2, 0x0, 0x0);
        gbc.writeMem(0x4911, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2482);
        EXPECT(gbc.pc(), 0x4913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 015C
        gbc.setState(0xcade, 0x4a81, 0xfc90, 0xef3b, 0xa81b, 0xdff2, 0x0, 0x0);
        gbc.writeMem(0xcade, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4a81);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcade), 0xcb);
        EXPECT(gbc.readMem(0xcadf), 0xf3);
        // CB F3 015D
        gbc.setState(0x1eb7, 0x2e29, 0xb240, 0xe085, 0x305c, 0x1353, 0x1, 0x0);
        gbc.writeMem(0x1eb7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2e29);
        EXPECT(gbc.pc(), 0x1eb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 015E
        gbc.setState(0x1dbc, 0x1600, 0xcca0, 0x81e5, 0xd57e, 0x1ddb, 0x0, 0x0);
        gbc.writeMem(0x1dbc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1600);
        EXPECT(gbc.pc(), 0x1dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 015F
        gbc.setState(0x1336, 0x5fba, 0x2fa0, 0x75d, 0xbc90, 0x8d44, 0x1, 0x0);
        gbc.writeMem(0x1336, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5fba);
        EXPECT(gbc.pc(), 0x1338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0161
        gbc.setState(0x563e, 0x1897, 0xe010, 0x986d, 0xcb9, 0xe7e6, 0x0, 0x0);
        gbc.writeMem(0x563e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1897);
        EXPECT(gbc.pc(), 0x5640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0162
        gbc.setState(0xe499, 0x9f75, 0x7100, 0x8b97, 0x1b77, 0x3c9f, 0x0, 0x1);
        gbc.writeMem(0xe499, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9f75);
        EXPECT(gbc.pc(), 0xe49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe499), 0xcb);
        EXPECT(gbc.readMem(0xe49a), 0xf3);
        // CB F3 0163
        gbc.setState(0x2ae1, 0x437a, 0x5510, 0xce75, 0x1989, 0xe202, 0x0, 0x1);
        gbc.writeMem(0x2ae1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x437a);
        EXPECT(gbc.pc(), 0x2ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0164
        gbc.setState(0x5ac1, 0x1074, 0x3c70, 0xd9e3, 0x53a, 0xf183, 0x0, 0x1);
        gbc.writeMem(0x5ac1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1074);
        EXPECT(gbc.pc(), 0x5ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0165
        gbc.setState(0x8b75, 0xf218, 0x46d0, 0xd3c4, 0x35fc, 0xf3f9, 0x0, 0x1);
        gbc.writeMem(0x8b75, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf218);
        EXPECT(gbc.pc(), 0x8b77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b75), 0xcb);
        EXPECT(gbc.readMem(0x8b76), 0xf3);
        // CB F3 0166
        gbc.setState(0x75e9, 0xe97a, 0x52a0, 0xe81, 0x347c, 0x755a, 0x0, 0x0);
        gbc.writeMem(0x75e9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe97a);
        EXPECT(gbc.pc(), 0x75eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0168
        gbc.setState(0x3ceb, 0xbcd0, 0x79c0, 0xe471, 0x387f, 0x83a, 0x0, 0x0);
        gbc.writeMem(0x3ceb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbcd0);
        EXPECT(gbc.pc(), 0x3ced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0169
        gbc.setState(0xed54, 0xbebf, 0x6ec0, 0xa37d, 0x7e1d, 0xa3cd, 0x1, 0x1);
        gbc.writeMem(0xed54, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbebf);
        EXPECT(gbc.pc(), 0xed56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed54), 0xcb);
        EXPECT(gbc.readMem(0xed55), 0xf3);
        // CB F3 016A
        gbc.setState(0x523d, 0x928e, 0x9430, 0xdc44, 0xcd79, 0xe6b, 0x1, 0x0);
        gbc.writeMem(0x523d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x928e);
        EXPECT(gbc.pc(), 0x523f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 016B
        gbc.setState(0xa1b0, 0x45d5, 0x95f0, 0x23ff, 0x7f7d, 0xdf5f, 0x0, 0x1);
        gbc.writeMem(0xa1b0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x45d5);
        EXPECT(gbc.pc(), 0xa1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1b0), 0xcb);
        EXPECT(gbc.readMem(0xa1b1), 0xf3);
        // CB F3 016C
        gbc.setState(0x6774, 0xbd66, 0xd1a0, 0x260c, 0x121f, 0xe5c9, 0x0, 0x1);
        gbc.writeMem(0x6774, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbd66);
        EXPECT(gbc.pc(), 0x6776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 016D
        gbc.setState(0x9249, 0x4206, 0x5e50, 0x6c3d, 0x7608, 0x5a89, 0x0, 0x0);
        gbc.writeMem(0x9249, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4206);
        EXPECT(gbc.pc(), 0x924b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9249), 0xcb);
        EXPECT(gbc.readMem(0x924a), 0xf3);
        // CB F3 016E
        gbc.setState(0x1792, 0xe65c, 0x73c0, 0x1945, 0x3e97, 0xc04c, 0x0, 0x1);
        gbc.writeMem(0x1792, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe65c);
        EXPECT(gbc.pc(), 0x1794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 016F
        gbc.setState(0x330e, 0xad2f, 0x77b0, 0x25ca, 0x518b, 0x85d5, 0x0, 0x1);
        gbc.writeMem(0x330e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xad2f);
        EXPECT(gbc.pc(), 0x3310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0170
        gbc.setState(0xca1e, 0x2bcf, 0x7ef0, 0x5576, 0x926e, 0xfeee, 0x0, 0x1);
        gbc.writeMem(0xca1e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2bcf);
        EXPECT(gbc.pc(), 0xca20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca1e), 0xcb);
        EXPECT(gbc.readMem(0xca1f), 0xf3);
        // CB F3 0171
        gbc.setState(0x3e7e, 0x6971, 0x21d0, 0x8c38, 0xc085, 0xf6c4, 0x0, 0x0);
        gbc.writeMem(0x3e7e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6971);
        EXPECT(gbc.pc(), 0x3e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0172
        gbc.setState(0x9ab9, 0xf121, 0xccf0, 0x1fbb, 0xf2a2, 0x9860, 0x1, 0x1);
        gbc.writeMem(0x9ab9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf121);
        EXPECT(gbc.pc(), 0x9abb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ab9), 0xcb);
        EXPECT(gbc.readMem(0x9aba), 0xf3);
        // CB F3 0173
        gbc.setState(0x2198, 0xc137, 0xebc0, 0x553d, 0x6a25, 0xc7f9, 0x1, 0x0);
        gbc.writeMem(0x2198, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc137);
        EXPECT(gbc.pc(), 0x219a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0174
        gbc.setState(0xb678, 0x2b84, 0x1bf0, 0x7511, 0xaec9, 0xe7d9, 0x1, 0x0);
        gbc.writeMem(0xb678, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2b84);
        EXPECT(gbc.pc(), 0xb67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb678), 0xcb);
        EXPECT(gbc.readMem(0xb679), 0xf3);
        // CB F3 0175
        gbc.setState(0xb5a6, 0x99ef, 0x170, 0xc36b, 0x8310, 0xdce8, 0x0, 0x0);
        gbc.writeMem(0xb5a6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x99ef);
        EXPECT(gbc.pc(), 0xb5a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a6), 0xcb);
        EXPECT(gbc.readMem(0xb5a7), 0xf3);
        // CB F3 0177
        gbc.setState(0x4465, 0x4d9, 0xd640, 0x5d7d, 0xe55e, 0x23d7, 0x1, 0x0);
        gbc.writeMem(0x4465, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4d9);
        EXPECT(gbc.pc(), 0x4467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0178
        gbc.setState(0x91ca, 0x3635, 0xcfc0, 0xeefe, 0x702, 0xacb5, 0x0, 0x1);
        gbc.writeMem(0x91ca, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3635);
        EXPECT(gbc.pc(), 0x91cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ca), 0xcb);
        EXPECT(gbc.readMem(0x91cb), 0xf3);
        // CB F3 0179
        gbc.setState(0x5bb5, 0xa68b, 0xe380, 0x2c81, 0xf2a6, 0xf88, 0x1, 0x0);
        gbc.writeMem(0x5bb5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa68b);
        EXPECT(gbc.pc(), 0x5bb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 017A
        gbc.setState(0x1c34, 0xb8f7, 0xe7c0, 0xa224, 0xdf77, 0xae29, 0x1, 0x0);
        gbc.writeMem(0x1c34, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb8f7);
        EXPECT(gbc.pc(), 0x1c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 017B
        gbc.setState(0x7a50, 0x7d42, 0xd6d0, 0xd073, 0x2e7d, 0x29d8, 0x1, 0x0);
        gbc.writeMem(0x7a50, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7d42);
        EXPECT(gbc.pc(), 0x7a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 017C
        gbc.setState(0x372f, 0x4a6c, 0x9cc0, 0xffae, 0x866e, 0x33ef, 0x0, 0x1);
        gbc.writeMem(0x372f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4a6c);
        EXPECT(gbc.pc(), 0x3731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 017D
        gbc.setState(0x47c, 0xf0e, 0x16c0, 0xe5c5, 0xc966, 0x2a00, 0x0, 0x1);
        gbc.writeMem(0x47c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf0e);
        EXPECT(gbc.pc(), 0x47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 017E
        gbc.setState(0x66d3, 0xa594, 0xb120, 0x5c9, 0xea11, 0x9a7d, 0x0, 0x0);
        gbc.writeMem(0x66d3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa594);
        EXPECT(gbc.pc(), 0x66d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 017F
        gbc.setState(0x38d1, 0x875e, 0xa730, 0xc544, 0xf6c, 0x9379, 0x1, 0x0);
        gbc.writeMem(0x38d1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x875e);
        EXPECT(gbc.pc(), 0x38d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0180
        gbc.setState(0x929, 0xdc96, 0x6020, 0xf68b, 0xc800, 0xd4b9, 0x1, 0x0);
        gbc.writeMem(0x929, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xdc96);
        EXPECT(gbc.pc(), 0x92b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0181
        gbc.setState(0xd40e, 0xbc61, 0x5110, 0x843b, 0x1e74, 0x829, 0x1, 0x1);
        gbc.writeMem(0xd40e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbc61);
        EXPECT(gbc.pc(), 0xd410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd40e), 0xcb);
        EXPECT(gbc.readMem(0xd40f), 0xf3);
        // CB F3 0182
        gbc.setState(0x82b, 0xc1f1, 0x2150, 0xf3d3, 0x7678, 0x6f05, 0x1, 0x1);
        gbc.writeMem(0x82b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc1f1);
        EXPECT(gbc.pc(), 0x82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0183
        gbc.setState(0xafa0, 0xe4f5, 0xb830, 0xd4c6, 0x499, 0xa45b, 0x1, 0x0);
        gbc.writeMem(0xafa0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe4f5);
        EXPECT(gbc.pc(), 0xafa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa0), 0xcb);
        EXPECT(gbc.readMem(0xafa1), 0xf3);
        // CB F3 0184
        gbc.setState(0x1a4e, 0xe2a4, 0xc470, 0x4e3f, 0x3d2c, 0x593d, 0x1, 0x1);
        gbc.writeMem(0x1a4e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe2a4);
        EXPECT(gbc.pc(), 0x1a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0185
        gbc.setState(0x693d, 0xfc7a, 0x6620, 0x98b7, 0xfb06, 0x9ef7, 0x1, 0x0);
        gbc.writeMem(0x693d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfc7a);
        EXPECT(gbc.pc(), 0x693f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0186
        gbc.setState(0x1125, 0x8616, 0x6ac0, 0xb525, 0x1c90, 0x1c62, 0x1, 0x0);
        gbc.writeMem(0x1125, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8616);
        EXPECT(gbc.pc(), 0x1127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0187
        gbc.setState(0x8749, 0xb2e3, 0x17f0, 0xf649, 0xf19e, 0x205c, 0x0, 0x1);
        gbc.writeMem(0x8749, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb2e3);
        EXPECT(gbc.pc(), 0x874b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8749), 0xcb);
        EXPECT(gbc.readMem(0x874a), 0xf3);
        // CB F3 0188
        gbc.setState(0x3a3f, 0x7789, 0x3520, 0x5cf8, 0xc60e, 0x7235, 0x1, 0x1);
        gbc.writeMem(0x3a3f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7789);
        EXPECT(gbc.pc(), 0x3a41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0189
        gbc.setState(0x2c3a, 0xe6eb, 0x4bc0, 0xc989, 0x7f2a, 0x20f0, 0x1, 0x1);
        gbc.writeMem(0x2c3a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe6eb);
        EXPECT(gbc.pc(), 0x2c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 018A
        gbc.setState(0x83c9, 0xfd12, 0x3b40, 0x633d, 0x67d0, 0x7d1b, 0x1, 0x0);
        gbc.writeMem(0x83c9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfd12);
        EXPECT(gbc.pc(), 0x83cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c9), 0xcb);
        EXPECT(gbc.readMem(0x83ca), 0xf3);
        // CB F3 018B
        gbc.setState(0x4712, 0xee05, 0x63b0, 0x80a6, 0xc192, 0xf734, 0x0, 0x0);
        gbc.writeMem(0x4712, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xee05);
        EXPECT(gbc.pc(), 0x4714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 018C
        gbc.setState(0x616, 0x2c01, 0x4ec0, 0x90ec, 0x17b4, 0x9df1, 0x0, 0x0);
        gbc.writeMem(0x616, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2c01);
        EXPECT(gbc.pc(), 0x618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 018D
        gbc.setState(0x6699, 0xedba, 0x2b40, 0x26d1, 0x5654, 0x4124, 0x1, 0x1);
        gbc.writeMem(0x6699, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xedba);
        EXPECT(gbc.pc(), 0x669b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 018E
        gbc.setState(0x745d, 0x5a9d, 0x6b40, 0x3315, 0xda9c, 0x2a56, 0x0, 0x1);
        gbc.writeMem(0x745d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5a9d);
        EXPECT(gbc.pc(), 0x745f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 018F
        gbc.setState(0x8704, 0x1a92, 0xe820, 0xb959, 0x6411, 0xa5b6, 0x1, 0x1);
        gbc.writeMem(0x8704, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1a92);
        EXPECT(gbc.pc(), 0x8706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8704), 0xcb);
        EXPECT(gbc.readMem(0x8705), 0xf3);
        // CB F3 0190
        gbc.setState(0xb05a, 0x714b, 0x890, 0x628e, 0x81, 0x240d, 0x0, 0x0);
        gbc.writeMem(0xb05a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x714b);
        EXPECT(gbc.pc(), 0xb05c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb05a), 0xcb);
        EXPECT(gbc.readMem(0xb05b), 0xf3);
        // CB F3 0191
        gbc.setState(0xde19, 0x1f2c, 0xbc0, 0x71b, 0x2ed7, 0x7af5, 0x1, 0x0);
        gbc.writeMem(0xde19, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1f2c);
        EXPECT(gbc.pc(), 0xde1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde19), 0xcb);
        EXPECT(gbc.readMem(0xde1a), 0xf3);
        // CB F3 0192
        gbc.setState(0xd2bd, 0x218e, 0xc930, 0x2d7e, 0x9f87, 0x77de, 0x0, 0x0);
        gbc.writeMem(0xd2bd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x218e);
        EXPECT(gbc.pc(), 0xd2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2bd), 0xcb);
        EXPECT(gbc.readMem(0xd2be), 0xf3);
        // CB F3 0193
        gbc.setState(0xa17c, 0xdb4e, 0xf0a0, 0x650e, 0x4b1e, 0x5a83, 0x1, 0x1);
        gbc.writeMem(0xa17c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdb4e);
        EXPECT(gbc.pc(), 0xa17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17c), 0xcb);
        EXPECT(gbc.readMem(0xa17d), 0xf3);
        // CB F3 0194
        gbc.setState(0xb0cc, 0xaf97, 0x2920, 0x8721, 0x3554, 0xc758, 0x1, 0x0);
        gbc.writeMem(0xb0cc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xaf97);
        EXPECT(gbc.pc(), 0xb0ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0cc), 0xcb);
        EXPECT(gbc.readMem(0xb0cd), 0xf3);
        // CB F3 0195
        gbc.setState(0x7a80, 0xfc87, 0xecb0, 0x84cb, 0x770e, 0x569d, 0x1, 0x1);
        gbc.writeMem(0x7a80, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfc87);
        EXPECT(gbc.pc(), 0x7a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0196
        gbc.setState(0x4cc8, 0x5c03, 0x27d0, 0x1adc, 0xa29e, 0x4777, 0x1, 0x0);
        gbc.writeMem(0x4cc8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5c03);
        EXPECT(gbc.pc(), 0x4cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0197
        gbc.setState(0x2fdf, 0x4cd8, 0xdea0, 0x615e, 0x354f, 0x96d3, 0x0, 0x0);
        gbc.writeMem(0x2fdf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4cd8);
        EXPECT(gbc.pc(), 0x2fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0198
        gbc.setState(0xcc99, 0x7843, 0xe480, 0xad01, 0x344c, 0xec39, 0x0, 0x0);
        gbc.writeMem(0xcc99, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7843);
        EXPECT(gbc.pc(), 0xcc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc99), 0xcb);
        EXPECT(gbc.readMem(0xcc9a), 0xf3);
        // CB F3 0199
        gbc.setState(0x17b, 0xf8bc, 0xd3b0, 0x138e, 0x29e5, 0xf58a, 0x1, 0x1);
        gbc.writeMem(0x17b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf8bc);
        EXPECT(gbc.pc(), 0x17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 019A
        gbc.setState(0x4d07, 0x6e56, 0x2b20, 0xd8b5, 0x32dc, 0x3584, 0x0, 0x1);
        gbc.writeMem(0x4d07, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6e56);
        EXPECT(gbc.pc(), 0x4d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 019C
        gbc.setState(0x4463, 0xd056, 0xcdf0, 0x7545, 0x6125, 0xa8aa, 0x1, 0x1);
        gbc.writeMem(0x4463, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd056);
        EXPECT(gbc.pc(), 0x4465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 019D
        gbc.setState(0xd532, 0x1b85, 0x7220, 0x61ec, 0x448, 0xe0e8, 0x1, 0x1);
        gbc.writeMem(0xd532, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1b85);
        EXPECT(gbc.pc(), 0xd534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd532), 0xcb);
        EXPECT(gbc.readMem(0xd533), 0xf3);
        // CB F3 019E
        gbc.setState(0x6668, 0x476d, 0xfe80, 0xc98, 0xce00, 0x6386, 0x1, 0x1);
        gbc.writeMem(0x6668, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x476d);
        EXPECT(gbc.pc(), 0x666a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 019F
        gbc.setState(0x6925, 0xb20a, 0x2480, 0x4975, 0xdab, 0x373e, 0x0, 0x0);
        gbc.writeMem(0x6925, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb20a);
        EXPECT(gbc.pc(), 0x6927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01A0
        gbc.setState(0x1019, 0xd1a2, 0x9220, 0x6390, 0x63bc, 0x323a, 0x0, 0x1);
        gbc.writeMem(0x1019, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd1a2);
        EXPECT(gbc.pc(), 0x101b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01A1
        gbc.setState(0xa317, 0x9d39, 0x4490, 0x7fb3, 0x2ae0, 0x693, 0x0, 0x0);
        gbc.writeMem(0xa317, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9d39);
        EXPECT(gbc.pc(), 0xa319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa317), 0xcb);
        EXPECT(gbc.readMem(0xa318), 0xf3);
        // CB F3 01A2
        gbc.setState(0x7f52, 0x4d1c, 0x7ee0, 0x8504, 0x4083, 0x78bb, 0x0, 0x0);
        gbc.writeMem(0x7f52, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4d1c);
        EXPECT(gbc.pc(), 0x7f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01A3
        gbc.setState(0x1d17, 0xa698, 0x1050, 0xa32b, 0x4eab, 0xe29d, 0x1, 0x1);
        gbc.writeMem(0x1d17, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa698);
        EXPECT(gbc.pc(), 0x1d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01A4
        gbc.setState(0xc00d, 0xaddf, 0xfc80, 0xb62b, 0xf3a1, 0xb962, 0x1, 0x0);
        gbc.writeMem(0xc00d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaddf);
        EXPECT(gbc.pc(), 0xc00f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc00d), 0xcb);
        EXPECT(gbc.readMem(0xc00e), 0xf3);
        // CB F3 01A5
        gbc.setState(0x8802, 0x9c30, 0x5c70, 0xaa78, 0x3ed8, 0xf719, 0x1, 0x0);
        gbc.writeMem(0x8802, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9c30);
        EXPECT(gbc.pc(), 0x8804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8802), 0xcb);
        EXPECT(gbc.readMem(0x8803), 0xf3);
        // CB F3 01A6
        gbc.setState(0xdddd, 0xc802, 0xcc60, 0xeadc, 0x7e5c, 0xf4a4, 0x1, 0x0);
        gbc.writeMem(0xdddd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc802);
        EXPECT(gbc.pc(), 0xdddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdddd), 0xcb);
        EXPECT(gbc.readMem(0xddde), 0xf3);
        // CB F3 01A7
        gbc.setState(0x2e37, 0xc240, 0xe420, 0x1f70, 0xc691, 0xdfd4, 0x0, 0x1);
        gbc.writeMem(0x2e37, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc240);
        EXPECT(gbc.pc(), 0x2e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01A8
        gbc.setState(0xc2d5, 0x3fe, 0x57e0, 0xb308, 0xbe9e, 0x3d02, 0x0, 0x0);
        gbc.writeMem(0xc2d5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3fe);
        EXPECT(gbc.pc(), 0xc2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d5), 0xcb);
        EXPECT(gbc.readMem(0xc2d6), 0xf3);
        // CB F3 01A9
        gbc.setState(0x867d, 0x5fa8, 0xf5b0, 0x1ca8, 0xdad, 0xf886, 0x0, 0x0);
        gbc.writeMem(0x867d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5fa8);
        EXPECT(gbc.pc(), 0x867f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x867d), 0xcb);
        EXPECT(gbc.readMem(0x867e), 0xf3);
        // CB F3 01AB
        gbc.setState(0xa3d9, 0xb43d, 0xdd10, 0x325a, 0x6122, 0x3e5e, 0x0, 0x1);
        gbc.writeMem(0xa3d9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb43d);
        EXPECT(gbc.pc(), 0xa3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d9), 0xcb);
        EXPECT(gbc.readMem(0xa3da), 0xf3);
        // CB F3 01AC
        gbc.setState(0x7cfe, 0xf1ef, 0xa820, 0x2346, 0xdd3d, 0xbd31, 0x1, 0x0);
        gbc.writeMem(0x7cfe, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf1ef);
        EXPECT(gbc.pc(), 0x7d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01AD
        gbc.setState(0x7e5a, 0xd14d, 0xe760, 0xb546, 0xcfc8, 0x61e0, 0x0, 0x1);
        gbc.writeMem(0x7e5a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd14d);
        EXPECT(gbc.pc(), 0x7e5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01AE
        gbc.setState(0xd8e2, 0x1248, 0x82b0, 0x8c2a, 0xd008, 0x7749, 0x1, 0x1);
        gbc.writeMem(0xd8e2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1248);
        EXPECT(gbc.pc(), 0xd8e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8e2), 0xcb);
        EXPECT(gbc.readMem(0xd8e3), 0xf3);
        // CB F3 01AF
        gbc.setState(0x1263, 0x7dee, 0xa10, 0xbff5, 0xde75, 0x9110, 0x1, 0x1);
        gbc.writeMem(0x1263, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7dee);
        EXPECT(gbc.pc(), 0x1265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01B1
        gbc.setState(0x72d, 0x8ef1, 0xef70, 0x220c, 0x341, 0xfd5f, 0x0, 0x1);
        gbc.writeMem(0x72d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8ef1);
        EXPECT(gbc.pc(), 0x72f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01B2
        gbc.setState(0xca2a, 0xd7a2, 0xa580, 0x9eba, 0xba3b, 0x2ca5, 0x0, 0x0);
        gbc.writeMem(0xca2a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd7a2);
        EXPECT(gbc.pc(), 0xca2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2a), 0xcb);
        EXPECT(gbc.readMem(0xca2b), 0xf3);
        // CB F3 01B3
        gbc.setState(0xcc1c, 0x345, 0x3970, 0x3e1d, 0x2b55, 0xc82f, 0x1, 0x1);
        gbc.writeMem(0xcc1c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x345);
        EXPECT(gbc.pc(), 0xcc1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc1c), 0xcb);
        EXPECT(gbc.readMem(0xcc1d), 0xf3);
        // CB F3 01B4
        gbc.setState(0xb62a, 0x7567, 0x9bf0, 0x7607, 0xaf5c, 0xb19f, 0x1, 0x0);
        gbc.writeMem(0xb62a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7567);
        EXPECT(gbc.pc(), 0xb62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb62a), 0xcb);
        EXPECT(gbc.readMem(0xb62b), 0xf3);
        // CB F3 01B5
        gbc.setState(0xe578, 0x511e, 0x93a0, 0x5b03, 0xf30a, 0x4631, 0x0, 0x0);
        gbc.writeMem(0xe578, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x511e);
        EXPECT(gbc.pc(), 0xe57a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe578), 0xcb);
        EXPECT(gbc.readMem(0xe579), 0xf3);
        // CB F3 01B6
        gbc.setState(0x7e81, 0x2e1, 0xff10, 0xc459, 0x4300, 0xba3c, 0x0, 0x0);
        gbc.writeMem(0x7e81, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2e1);
        EXPECT(gbc.pc(), 0x7e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01B7
        gbc.setState(0x6271, 0x8788, 0xec10, 0x31a, 0xef3d, 0x3c22, 0x0, 0x0);
        gbc.writeMem(0x6271, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8788);
        EXPECT(gbc.pc(), 0x6273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01B8
        gbc.setState(0x1f01, 0xc91, 0xf010, 0x46bd, 0x25c3, 0x750e, 0x0, 0x1);
        gbc.writeMem(0x1f01, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc91);
        EXPECT(gbc.pc(), 0x1f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01B9
        gbc.setState(0xb87a, 0x163d, 0xce70, 0x37b0, 0xad10, 0xaf06, 0x0, 0x1);
        gbc.writeMem(0xb87a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x163d);
        EXPECT(gbc.pc(), 0xb87c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb87a), 0xcb);
        EXPECT(gbc.readMem(0xb87b), 0xf3);
        // CB F3 01BA
        gbc.setState(0x9a55, 0x918b, 0x5dd0, 0x10ee, 0xcee4, 0x197c, 0x1, 0x1);
        gbc.writeMem(0x9a55, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x918b);
        EXPECT(gbc.pc(), 0x9a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a55), 0xcb);
        EXPECT(gbc.readMem(0x9a56), 0xf3);
        // CB F3 01BB
        gbc.setState(0x4e35, 0x22d, 0xc490, 0x4d4d, 0x3f24, 0x2a2d, 0x1, 0x0);
        gbc.writeMem(0x4e35, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x22d);
        EXPECT(gbc.pc(), 0x4e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01BC
        gbc.setState(0x5568, 0x49a7, 0x890, 0x7896, 0x92db, 0xa9e8, 0x1, 0x1);
        gbc.writeMem(0x5568, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x49a7);
        EXPECT(gbc.pc(), 0x556a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01BD
        gbc.setState(0x194d, 0xf047, 0xc20, 0x59b3, 0x30f4, 0x689e, 0x0, 0x0);
        gbc.writeMem(0x194d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf047);
        EXPECT(gbc.pc(), 0x194f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01BE
        gbc.setState(0x77ad, 0x1f25, 0x2a30, 0x6f52, 0xfa0e, 0x6370, 0x1, 0x0);
        gbc.writeMem(0x77ad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1f25);
        EXPECT(gbc.pc(), 0x77af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01BF
        gbc.setState(0xc95b, 0x7a87, 0x970, 0x6885, 0xda62, 0x2f7d, 0x0, 0x0);
        gbc.writeMem(0xc95b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7a87);
        EXPECT(gbc.pc(), 0xc95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95b), 0xcb);
        EXPECT(gbc.readMem(0xc95c), 0xf3);
        // CB F3 01C0
        gbc.setState(0x4452, 0x6601, 0x6eb0, 0x6e70, 0x6c14, 0x13de, 0x0, 0x0);
        gbc.writeMem(0x4452, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6601);
        EXPECT(gbc.pc(), 0x4454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01C1
        gbc.setState(0x8c83, 0x2479, 0xab90, 0x3351, 0xad47, 0xb94d, 0x0, 0x0);
        gbc.writeMem(0x8c83, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2479);
        EXPECT(gbc.pc(), 0x8c85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c83), 0xcb);
        EXPECT(gbc.readMem(0x8c84), 0xf3);
        // CB F3 01C3
        gbc.setState(0xc7f, 0x132c, 0x64c0, 0xc807, 0xcfe1, 0x48e4, 0x1, 0x1);
        gbc.writeMem(0xc7f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x132c);
        EXPECT(gbc.pc(), 0xc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01C4
        gbc.setState(0xbc70, 0x3d56, 0xf700, 0xaf72, 0x122e, 0xe631, 0x1, 0x0);
        gbc.writeMem(0xbc70, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3d56);
        EXPECT(gbc.pc(), 0xbc72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc70), 0xcb);
        EXPECT(gbc.readMem(0xbc71), 0xf3);
        // CB F3 01C5
        gbc.setState(0xe1d, 0xf0f9, 0x3ca0, 0x2de0, 0xb481, 0xc53d, 0x0, 0x0);
        gbc.writeMem(0xe1d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf0f9);
        EXPECT(gbc.pc(), 0xe1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01C6
        gbc.setState(0xb0ef, 0x119, 0x1940, 0x12dd, 0x3ffb, 0x946, 0x1, 0x0);
        gbc.writeMem(0xb0ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x119);
        EXPECT(gbc.pc(), 0xb0f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ef), 0xcb);
        EXPECT(gbc.readMem(0xb0f0), 0xf3);
        // CB F3 01C7
        gbc.setState(0x9e05, 0x2ab4, 0x3e20, 0x8332, 0xb07f, 0x2302, 0x1, 0x0);
        gbc.writeMem(0x9e05, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2ab4);
        EXPECT(gbc.pc(), 0x9e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e05), 0xcb);
        EXPECT(gbc.readMem(0x9e06), 0xf3);
        // CB F3 01C8
        gbc.setState(0xb71a, 0x38f, 0x2aa0, 0xb5f8, 0x572e, 0x3f82, 0x1, 0x1);
        gbc.writeMem(0xb71a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x38f);
        EXPECT(gbc.pc(), 0xb71c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb71a), 0xcb);
        EXPECT(gbc.readMem(0xb71b), 0xf3);
        // CB F3 01C9
        gbc.setState(0xd21a, 0x5a97, 0x6fd0, 0x338f, 0x4aa3, 0x5d1f, 0x1, 0x0);
        gbc.writeMem(0xd21a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5a97);
        EXPECT(gbc.pc(), 0xd21c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd21a), 0xcb);
        EXPECT(gbc.readMem(0xd21b), 0xf3);
        // CB F3 01CA
        gbc.setState(0x2441, 0xaed0, 0x80a0, 0x7dd8, 0xb4fc, 0x6f4a, 0x0, 0x1);
        gbc.writeMem(0x2441, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xaed0);
        EXPECT(gbc.pc(), 0x2443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01CB
        gbc.setState(0x98be, 0x67d5, 0x3080, 0xf22e, 0xeb9c, 0x8db0, 0x1, 0x0);
        gbc.writeMem(0x98be, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x67d5);
        EXPECT(gbc.pc(), 0x98c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98be), 0xcb);
        EXPECT(gbc.readMem(0x98bf), 0xf3);
        // CB F3 01CC
        gbc.setState(0xc544, 0x7c83, 0xdeb0, 0x3b28, 0x3d15, 0x354e, 0x1, 0x0);
        gbc.writeMem(0xc544, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7c83);
        EXPECT(gbc.pc(), 0xc546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc544), 0xcb);
        EXPECT(gbc.readMem(0xc545), 0xf3);
        // CB F3 01CD
        gbc.setState(0x36f3, 0x4205, 0x7640, 0xd0c1, 0x8f23, 0x7041, 0x0, 0x0);
        gbc.writeMem(0x36f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4205);
        EXPECT(gbc.pc(), 0x36f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01CF
        gbc.setState(0x7117, 0xe42a, 0x60a0, 0x324f, 0x7a8c, 0xd796, 0x1, 0x0);
        gbc.writeMem(0x7117, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe42a);
        EXPECT(gbc.pc(), 0x7119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01D0
        gbc.setState(0x6576, 0x4cd3, 0x9f40, 0x7f77, 0xb5db, 0x6f6, 0x1, 0x0);
        gbc.writeMem(0x6576, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4cd3);
        EXPECT(gbc.pc(), 0x6578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01D1
        gbc.setState(0x91d3, 0x409e, 0xb150, 0x1122, 0x1172, 0xd37f, 0x1, 0x0);
        gbc.writeMem(0x91d3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x409e);
        EXPECT(gbc.pc(), 0x91d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d3), 0xcb);
        EXPECT(gbc.readMem(0x91d4), 0xf3);
        // CB F3 01D2
        gbc.setState(0xedde, 0x8474, 0x8cc0, 0xbe11, 0xfce5, 0x9f8a, 0x1, 0x0);
        gbc.writeMem(0xedde, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8474);
        EXPECT(gbc.pc(), 0xede0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedde), 0xcb);
        EXPECT(gbc.readMem(0xeddf), 0xf3);
        // CB F3 01D3
        gbc.setState(0x4ca1, 0x63e4, 0xefc0, 0xef6a, 0x3bc4, 0x7a51, 0x0, 0x1);
        gbc.writeMem(0x4ca1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0x4ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01D4
        gbc.setState(0x119f, 0xf516, 0x69c0, 0x4643, 0x81a3, 0xab54, 0x0, 0x0);
        gbc.writeMem(0x119f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf516);
        EXPECT(gbc.pc(), 0x11a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01D5
        gbc.setState(0x4823, 0x6902, 0x7b90, 0xf6a2, 0x8353, 0x4fb4, 0x1, 0x0);
        gbc.writeMem(0x4823, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6902);
        EXPECT(gbc.pc(), 0x4825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01D6
        gbc.setState(0x6fdb, 0x391b, 0x8fc0, 0x869f, 0xe40f, 0x6108, 0x1, 0x0);
        gbc.writeMem(0x6fdb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x391b);
        EXPECT(gbc.pc(), 0x6fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01D7
        gbc.setState(0xaf17, 0x627f, 0x71a0, 0x7397, 0x53e7, 0xcb8d, 0x1, 0x0);
        gbc.writeMem(0xaf17, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x627f);
        EXPECT(gbc.pc(), 0xaf19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf17), 0xcb);
        EXPECT(gbc.readMem(0xaf18), 0xf3);
        // CB F3 01D8
        gbc.setState(0x897e, 0x17d0, 0x40b0, 0xb910, 0xe1d0, 0x21f5, 0x0, 0x1);
        gbc.writeMem(0x897e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x17d0);
        EXPECT(gbc.pc(), 0x8980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x897e), 0xcb);
        EXPECT(gbc.readMem(0x897f), 0xf3);
        // CB F3 01D9
        gbc.setState(0x71ba, 0x67b1, 0x5ea0, 0xc62b, 0x7d03, 0x9e3d, 0x1, 0x1);
        gbc.writeMem(0x71ba, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x67b1);
        EXPECT(gbc.pc(), 0x71bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01DA
        gbc.setState(0x5297, 0x3f41, 0xe800, 0x9e04, 0x626, 0xc17c, 0x0, 0x1);
        gbc.writeMem(0x5297, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3f41);
        EXPECT(gbc.pc(), 0x5299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01DB
        gbc.setState(0x403f, 0xef52, 0x9a10, 0x4b95, 0xdee2, 0xff0b, 0x0, 0x0);
        gbc.writeMem(0x403f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xef52);
        EXPECT(gbc.pc(), 0x4041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01DC
        gbc.setState(0xaba9, 0xaef1, 0x1b40, 0x6bad, 0x6f8f, 0x859d, 0x1, 0x1);
        gbc.writeMem(0xaba9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0xabab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaba9), 0xcb);
        EXPECT(gbc.readMem(0xabaa), 0xf3);
        // CB F3 01DD
        gbc.setState(0x1135, 0x1e22, 0x7520, 0x3a33, 0xaadf, 0x5d92, 0x0, 0x0);
        gbc.writeMem(0x1135, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1e22);
        EXPECT(gbc.pc(), 0x1137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01DE
        gbc.setState(0x16ef, 0x5015, 0xa0b0, 0x3ae8, 0x7787, 0x739c, 0x0, 0x1);
        gbc.writeMem(0x16ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5015);
        EXPECT(gbc.pc(), 0x16f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01DF
        gbc.setState(0x125, 0x53c4, 0xa7d0, 0x1f30, 0xc9db, 0x79b8, 0x0, 0x0);
        gbc.writeMem(0x125, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x53c4);
        EXPECT(gbc.pc(), 0x127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01E0
        gbc.setState(0xd15f, 0x6eab, 0xeb80, 0x383b, 0x2487, 0x568e, 0x0, 0x0);
        gbc.writeMem(0xd15f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6eab);
        EXPECT(gbc.pc(), 0xd161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15f), 0xcb);
        EXPECT(gbc.readMem(0xd160), 0xf3);
        // CB F3 01E1
        gbc.setState(0x5b0, 0xd684, 0x8670, 0x1a6c, 0x17c3, 0x73d4, 0x0, 0x0);
        gbc.writeMem(0x5b0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd684);
        EXPECT(gbc.pc(), 0x5b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01E2
        gbc.setState(0xb39a, 0x488b, 0x36e0, 0xe3b3, 0x7598, 0xc550, 0x0, 0x0);
        gbc.writeMem(0xb39a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x488b);
        EXPECT(gbc.pc(), 0xb39c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb39a), 0xcb);
        EXPECT(gbc.readMem(0xb39b), 0xf3);
        // CB F3 01E3
        gbc.setState(0xc339, 0x160a, 0x33c0, 0x8a18, 0xc12c, 0xdb43, 0x0, 0x0);
        gbc.writeMem(0xc339, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x160a);
        EXPECT(gbc.pc(), 0xc33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc339), 0xcb);
        EXPECT(gbc.readMem(0xc33a), 0xf3);
        // CB F3 01E4
        gbc.setState(0xdbad, 0x7084, 0xc4d0, 0x3d70, 0x6c2, 0x21d8, 0x0, 0x1);
        gbc.writeMem(0xdbad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7084);
        EXPECT(gbc.pc(), 0xdbaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbad), 0xcb);
        EXPECT(gbc.readMem(0xdbae), 0xf3);
        // CB F3 01E5
        gbc.setState(0xb642, 0xb0eb, 0x88f0, 0xd261, 0x3af, 0xc0b1, 0x1, 0x1);
        gbc.writeMem(0xb642, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb0eb);
        EXPECT(gbc.pc(), 0xb644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb642), 0xcb);
        EXPECT(gbc.readMem(0xb643), 0xf3);
        // CB F3 01E6
        gbc.setState(0x53d5, 0x9fe7, 0x380, 0x31bb, 0x3c49, 0x44e1, 0x1, 0x0);
        gbc.writeMem(0x53d5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9fe7);
        EXPECT(gbc.pc(), 0x53d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01E7
        gbc.setState(0xbb7d, 0xc5b9, 0xf040, 0xd481, 0x4cb8, 0xbb2b, 0x1, 0x0);
        gbc.writeMem(0xbb7d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc5b9);
        EXPECT(gbc.pc(), 0xbb7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7d), 0xcb);
        EXPECT(gbc.readMem(0xbb7e), 0xf3);
        // CB F3 01E8
        gbc.setState(0xb063, 0x393c, 0x57d0, 0xb1ca, 0x58a5, 0xe0a7, 0x1, 0x0);
        gbc.writeMem(0xb063, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x393c);
        EXPECT(gbc.pc(), 0xb065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb063), 0xcb);
        EXPECT(gbc.readMem(0xb064), 0xf3);
        // CB F3 01E9
        gbc.setState(0xcc6f, 0x98d8, 0xcc0, 0x8406, 0xf3d9, 0x517a, 0x1, 0x0);
        gbc.writeMem(0xcc6f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x98d8);
        EXPECT(gbc.pc(), 0xcc71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc6f), 0xcb);
        EXPECT(gbc.readMem(0xcc70), 0xf3);
        // CB F3 01EA
        gbc.setState(0xd872, 0x355e, 0x81c0, 0x7be2, 0xe72b, 0x9df2, 0x1, 0x0);
        gbc.writeMem(0xd872, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x355e);
        EXPECT(gbc.pc(), 0xd874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd872), 0xcb);
        EXPECT(gbc.readMem(0xd873), 0xf3);
        // CB F3 01EB
        gbc.setState(0xa972, 0x491e, 0x4510, 0x4f50, 0xf5a5, 0xc678, 0x1, 0x1);
        gbc.writeMem(0xa972, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x491e);
        EXPECT(gbc.pc(), 0xa974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa972), 0xcb);
        EXPECT(gbc.readMem(0xa973), 0xf3);
        // CB F3 01EC
        gbc.setState(0x273a, 0xeeaa, 0x7030, 0x4d79, 0x116e, 0x1617, 0x0, 0x1);
        gbc.writeMem(0x273a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xeeaa);
        EXPECT(gbc.pc(), 0x273c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01ED
        gbc.setState(0x93cd, 0x1b91, 0xc8d0, 0x2a10, 0x9947, 0x66dc, 0x1, 0x1);
        gbc.writeMem(0x93cd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1b91);
        EXPECT(gbc.pc(), 0x93cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93cd), 0xcb);
        EXPECT(gbc.readMem(0x93ce), 0xf3);
        // CB F3 01EE
        gbc.setState(0x1db0, 0xe37, 0xfc40, 0x11de, 0x51d7, 0xe05a, 0x0, 0x1);
        gbc.writeMem(0x1db0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe37);
        EXPECT(gbc.pc(), 0x1db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01EF
        gbc.setState(0x240a, 0x4d36, 0xa40, 0x3e48, 0x2471, 0x6c, 0x1, 0x1);
        gbc.writeMem(0x240a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4d36);
        EXPECT(gbc.pc(), 0x240c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01F0
        gbc.setState(0x99c2, 0x9cf4, 0x5ca0, 0xfb52, 0x908b, 0x6594, 0x1, 0x0);
        gbc.writeMem(0x99c2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9cf4);
        EXPECT(gbc.pc(), 0x99c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c2), 0xcb);
        EXPECT(gbc.readMem(0x99c3), 0xf3);
        // CB F3 01F1
        gbc.setState(0xbf74, 0x5205, 0xcbd0, 0xec92, 0xb948, 0xd851, 0x0, 0x1);
        gbc.writeMem(0xbf74, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5205);
        EXPECT(gbc.pc(), 0xbf76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf74), 0xcb);
        EXPECT(gbc.readMem(0xbf75), 0xf3);
        // CB F3 01F2
        gbc.setState(0x8f2, 0x5aa8, 0x7cb0, 0x8278, 0xd48b, 0xf060, 0x1, 0x1);
        gbc.writeMem(0x8f2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5aa8);
        EXPECT(gbc.pc(), 0x8f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01F3
        gbc.setState(0xd7b9, 0xa579, 0x5610, 0x9651, 0x796b, 0xce2, 0x0, 0x1);
        gbc.writeMem(0xd7b9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa579);
        EXPECT(gbc.pc(), 0xd7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b9), 0xcb);
        EXPECT(gbc.readMem(0xd7ba), 0xf3);
        // CB F3 01F4
        gbc.setState(0x55aa, 0x86d6, 0xc5e0, 0x1625, 0x1317, 0x328b, 0x0, 0x1);
        gbc.writeMem(0x55aa, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x86d6);
        EXPECT(gbc.pc(), 0x55ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01F5
        gbc.setState(0xb37, 0x2b2b, 0x1ee0, 0xfefa, 0x87ed, 0xa791, 0x0, 0x0);
        gbc.writeMem(0xb37, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2b2b);
        EXPECT(gbc.pc(), 0xb39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 01F6
        gbc.setState(0x44c0, 0x57fe, 0xc410, 0x3369, 0xc44d, 0xc6e6, 0x0, 0x1);
        gbc.writeMem(0x44c0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x57fe);
        EXPECT(gbc.pc(), 0x44c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01F7
        gbc.setState(0x9970, 0x60a, 0xff10, 0xf45b, 0xe1c6, 0xc8d4, 0x0, 0x1);
        gbc.writeMem(0x9970, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x60a);
        EXPECT(gbc.pc(), 0x9972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9970), 0xcb);
        EXPECT(gbc.readMem(0x9971), 0xf3);
        // CB F3 01F8
        gbc.setState(0x3c0f, 0xc707, 0x1310, 0x9b5a, 0xc7f4, 0xc298, 0x1, 0x1);
        gbc.writeMem(0x3c0f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc707);
        EXPECT(gbc.pc(), 0x3c11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01F9
        gbc.setState(0xe028, 0x914f, 0x6be0, 0xb2e6, 0x12e1, 0x7d62, 0x1, 0x0);
        gbc.writeMem(0xe028, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x914f);
        EXPECT(gbc.pc(), 0xe02a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe028), 0xcb);
        EXPECT(gbc.readMem(0xe029), 0xf3);
        // CB F3 01FA
        gbc.setState(0xb4da, 0xb5a2, 0xe190, 0xa4eb, 0x8359, 0xb927, 0x1, 0x1);
        gbc.writeMem(0xb4da, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb5a2);
        EXPECT(gbc.pc(), 0xb4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4da), 0xcb);
        EXPECT(gbc.readMem(0xb4db), 0xf3);
        // CB F3 01FB
        gbc.setState(0x4862, 0x894c, 0x2c10, 0xedc1, 0xa600, 0x72d6, 0x0, 0x0);
        gbc.writeMem(0x4862, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x894c);
        EXPECT(gbc.pc(), 0x4864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01FC
        gbc.setState(0x5d1, 0x9ef7, 0xa530, 0xa31e, 0x8d02, 0xcaf3, 0x1, 0x1);
        gbc.writeMem(0x5d1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9ef7);
        EXPECT(gbc.pc(), 0x5d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01FD
        gbc.setState(0x3a57, 0x2b31, 0xce90, 0x73ac, 0xbd3a, 0x42e9, 0x0, 0x1);
        gbc.writeMem(0x3a57, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2b31);
        EXPECT(gbc.pc(), 0x3a59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01FE
        gbc.setState(0x782c, 0x4f16, 0xff30, 0x835e, 0x79fe, 0x6fce, 0x1, 0x0);
        gbc.writeMem(0x782c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4f16);
        EXPECT(gbc.pc(), 0x782e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 01FF
        gbc.setState(0x6865, 0xd9be, 0xa3e0, 0xa1ae, 0xd28b, 0x2bbe, 0x1, 0x1);
        gbc.writeMem(0x6865, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0x6867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0200
        gbc.setState(0x8766, 0x9331, 0x3e50, 0x7f43, 0xfe64, 0xa179, 0x0, 0x0);
        gbc.writeMem(0x8766, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9331);
        EXPECT(gbc.pc(), 0x8768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8766), 0xcb);
        EXPECT(gbc.readMem(0x8767), 0xf3);
        // CB F3 0201
        gbc.setState(0x3f01, 0x7cdb, 0x1c30, 0xf21c, 0xa116, 0xd034, 0x0, 0x1);
        gbc.writeMem(0x3f01, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7cdb);
        EXPECT(gbc.pc(), 0x3f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0202
        gbc.setState(0x1210, 0x95db, 0xf4d0, 0x4b3, 0xc01, 0x1b2c, 0x0, 0x1);
        gbc.writeMem(0x1210, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x95db);
        EXPECT(gbc.pc(), 0x1212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0203
        gbc.setState(0xe580, 0xbc4d, 0xd2c0, 0x6389, 0x450d, 0xd35b, 0x1, 0x0);
        gbc.writeMem(0xe580, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbc4d);
        EXPECT(gbc.pc(), 0xe582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe580), 0xcb);
        EXPECT(gbc.readMem(0xe581), 0xf3);
        // CB F3 0204
        gbc.setState(0x455e, 0x996b, 0x4290, 0xc9ed, 0x7593, 0x7a4b, 0x0, 0x0);
        gbc.writeMem(0x455e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x996b);
        EXPECT(gbc.pc(), 0x4560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0205
        gbc.setState(0x84b0, 0xe45d, 0x2b50, 0xb2a3, 0x9369, 0x2a1a, 0x1, 0x0);
        gbc.writeMem(0x84b0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe45d);
        EXPECT(gbc.pc(), 0x84b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b0), 0xcb);
        EXPECT(gbc.readMem(0x84b1), 0xf3);
        // CB F3 0206
        gbc.setState(0x6f30, 0x5ca0, 0x2f50, 0x3224, 0xaf8, 0xe554, 0x1, 0x0);
        gbc.writeMem(0x6f30, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5ca0);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0208
        gbc.setState(0x7f76, 0x111a, 0xd280, 0x640b, 0xfc3b, 0xda95, 0x1, 0x1);
        gbc.writeMem(0x7f76, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x111a);
        EXPECT(gbc.pc(), 0x7f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0209
        gbc.setState(0x26b9, 0x360d, 0x2b80, 0x59d9, 0xee55, 0xa6b2, 0x0, 0x0);
        gbc.writeMem(0x26b9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x360d);
        EXPECT(gbc.pc(), 0x26bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 020A
        gbc.setState(0xc133, 0x95a, 0x3800, 0x6ac9, 0x224f, 0x3289, 0x0, 0x1);
        gbc.writeMem(0xc133, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x95a);
        EXPECT(gbc.pc(), 0xc135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc133), 0xcb);
        EXPECT(gbc.readMem(0xc134), 0xf3);
        // CB F3 020C
        gbc.setState(0x86b8, 0x79af, 0xd580, 0xd631, 0xe29c, 0x8506, 0x0, 0x0);
        gbc.writeMem(0x86b8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x79af);
        EXPECT(gbc.pc(), 0x86ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b8), 0xcb);
        EXPECT(gbc.readMem(0x86b9), 0xf3);
        // CB F3 020D
        gbc.setState(0xb3a2, 0xfc2b, 0x6310, 0x3177, 0xf9ff, 0xe5a8, 0x1, 0x1);
        gbc.writeMem(0xb3a2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfc2b);
        EXPECT(gbc.pc(), 0xb3a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a2), 0xcb);
        EXPECT(gbc.readMem(0xb3a3), 0xf3);
        // CB F3 020E
        gbc.setState(0xa316, 0x87e, 0x9c70, 0x9fe6, 0xd42a, 0x2a8f, 0x1, 0x0);
        gbc.writeMem(0xa316, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x87e);
        EXPECT(gbc.pc(), 0xa318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa316), 0xcb);
        EXPECT(gbc.readMem(0xa317), 0xf3);
        // CB F3 020F
        gbc.setState(0x264b, 0xe2ed, 0xf60, 0xa332, 0xb1e8, 0x2a79, 0x0, 0x1);
        gbc.writeMem(0x264b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe2ed);
        EXPECT(gbc.pc(), 0x264d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0210
        gbc.setState(0x3cd3, 0x7877, 0x8ba0, 0xb9e9, 0xd2d6, 0xadfc, 0x0, 0x1);
        gbc.writeMem(0x3cd3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7877);
        EXPECT(gbc.pc(), 0x3cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0212
        gbc.setState(0xb14, 0x49ae, 0x4740, 0x41b0, 0x7a69, 0xdfe0, 0x0, 0x0);
        gbc.writeMem(0xb14, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x49ae);
        EXPECT(gbc.pc(), 0xb16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0213
        gbc.setState(0x2, 0xd27a, 0x7130, 0xe97d, 0xc705, 0x4157, 0x0, 0x0);
        gbc.writeMem(0x2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd27a);
        EXPECT(gbc.pc(), 0x4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0215
        gbc.setState(0xda4d, 0x4031, 0x9780, 0x8b2a, 0xc4af, 0x5d5b, 0x0, 0x1);
        gbc.writeMem(0xda4d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4031);
        EXPECT(gbc.pc(), 0xda4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda4d), 0xcb);
        EXPECT(gbc.readMem(0xda4e), 0xf3);
        // CB F3 0216
        gbc.setState(0xcae1, 0xc668, 0x23f0, 0xef, 0xe32, 0xd266, 0x0, 0x0);
        gbc.writeMem(0xcae1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc668);
        EXPECT(gbc.pc(), 0xcae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae1), 0xcb);
        EXPECT(gbc.readMem(0xcae2), 0xf3);
        // CB F3 0217
        gbc.setState(0xb808, 0xa688, 0x1d80, 0x9730, 0x83f0, 0x1677, 0x1, 0x0);
        gbc.writeMem(0xb808, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa688);
        EXPECT(gbc.pc(), 0xb80a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb808), 0xcb);
        EXPECT(gbc.readMem(0xb809), 0xf3);
        // CB F3 0218
        gbc.setState(0x1a5e, 0xe31d, 0x3290, 0x3d10, 0xd67a, 0xc787, 0x0, 0x0);
        gbc.writeMem(0x1a5e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe31d);
        EXPECT(gbc.pc(), 0x1a60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 021A
        gbc.setState(0x24b, 0x2657, 0x3e90, 0x462a, 0x351e, 0x6455, 0x0, 0x1);
        gbc.writeMem(0x24b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2657);
        EXPECT(gbc.pc(), 0x24d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 021B
        gbc.setState(0xc79e, 0x2f72, 0xb820, 0x37f1, 0x96ee, 0xe287, 0x1, 0x0);
        gbc.writeMem(0xc79e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2f72);
        EXPECT(gbc.pc(), 0xc7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc79e), 0xcb);
        EXPECT(gbc.readMem(0xc79f), 0xf3);
        // CB F3 021C
        gbc.setState(0x4405, 0xefb1, 0xce40, 0xf0ca, 0xc9e7, 0xb81e, 0x1, 0x1);
        gbc.writeMem(0x4405, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xefb1);
        EXPECT(gbc.pc(), 0x4407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 021D
        gbc.setState(0xd572, 0xb3e9, 0xe750, 0x94f5, 0x804, 0x9819, 0x1, 0x0);
        gbc.writeMem(0xd572, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb3e9);
        EXPECT(gbc.pc(), 0xd574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd572), 0xcb);
        EXPECT(gbc.readMem(0xd573), 0xf3);
        // CB F3 021E
        gbc.setState(0x33ab, 0xc64e, 0xfa70, 0x21ff, 0xb708, 0xc980, 0x0, 0x1);
        gbc.writeMem(0x33ab, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc64e);
        EXPECT(gbc.pc(), 0x33ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 021F
        gbc.setState(0xa445, 0x83d1, 0xb9b0, 0x766, 0xfd9d, 0xfb50, 0x1, 0x1);
        gbc.writeMem(0xa445, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x83d1);
        EXPECT(gbc.pc(), 0xa447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa445), 0xcb);
        EXPECT(gbc.readMem(0xa446), 0xf3);
        // CB F3 0220
        gbc.setState(0xb48, 0xca1d, 0x2db0, 0xbe29, 0xa8e2, 0xde49, 0x0, 0x1);
        gbc.writeMem(0xb48, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xca1d);
        EXPECT(gbc.pc(), 0xb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0221
        gbc.setState(0x8f70, 0xbac9, 0x2470, 0x7c04, 0xbd9b, 0xf424, 0x1, 0x1);
        gbc.writeMem(0x8f70, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbac9);
        EXPECT(gbc.pc(), 0x8f72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f70), 0xcb);
        EXPECT(gbc.readMem(0x8f71), 0xf3);
        // CB F3 0222
        gbc.setState(0x566a, 0x72e7, 0x2c30, 0xdbc, 0xa10e, 0x6b0f, 0x0, 0x0);
        gbc.writeMem(0x566a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x72e7);
        EXPECT(gbc.pc(), 0x566c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0224
        gbc.setState(0x9bb3, 0x96ad, 0x3920, 0xda55, 0xd10f, 0xab17, 0x0, 0x1);
        gbc.writeMem(0x9bb3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x96ad);
        EXPECT(gbc.pc(), 0x9bb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb3), 0xcb);
        EXPECT(gbc.readMem(0x9bb4), 0xf3);
        // CB F3 0225
        gbc.setState(0xa2dc, 0xda42, 0xfa10, 0xdb27, 0xe200, 0x22a1, 0x0, 0x1);
        gbc.writeMem(0xa2dc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xda42);
        EXPECT(gbc.pc(), 0xa2de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2dc), 0xcb);
        EXPECT(gbc.readMem(0xa2dd), 0xf3);
        // CB F3 0226
        gbc.setState(0xc660, 0xc2c4, 0x6550, 0xd73a, 0x4d89, 0x259d, 0x0, 0x1);
        gbc.writeMem(0xc660, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc2c4);
        EXPECT(gbc.pc(), 0xc662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc660), 0xcb);
        EXPECT(gbc.readMem(0xc661), 0xf3);
        // CB F3 0227
        gbc.setState(0xec71, 0x83f, 0x7f50, 0x8233, 0x7e96, 0xfba7, 0x0, 0x1);
        gbc.writeMem(0xec71, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x83f);
        EXPECT(gbc.pc(), 0xec73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec71), 0xcb);
        EXPECT(gbc.readMem(0xec72), 0xf3);
        // CB F3 0229
        gbc.setState(0xdfe0, 0xc2ef, 0xeb40, 0x4f1e, 0xdb6f, 0xdd75, 0x0, 0x0);
        gbc.writeMem(0xdfe0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc2ef);
        EXPECT(gbc.pc(), 0xdfe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe0), 0xcb);
        EXPECT(gbc.readMem(0xdfe1), 0xf3);
        // CB F3 022B
        gbc.setState(0xbf06, 0xdf00, 0xa0e0, 0x4263, 0x13d7, 0x533d, 0x1, 0x0);
        gbc.writeMem(0xbf06, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdf00);
        EXPECT(gbc.pc(), 0xbf08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf06), 0xcb);
        EXPECT(gbc.readMem(0xbf07), 0xf3);
        // CB F3 022C
        gbc.setState(0x1a2b, 0x1a9a, 0x47d0, 0x1ccc, 0xc66d, 0xa247, 0x1, 0x1);
        gbc.writeMem(0x1a2b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1a9a);
        EXPECT(gbc.pc(), 0x1a2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 022D
        gbc.setState(0x5db8, 0xb310, 0x2170, 0x766e, 0xb628, 0x9b54, 0x0, 0x1);
        gbc.writeMem(0x5db8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb310);
        EXPECT(gbc.pc(), 0x5dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 022E
        gbc.setState(0x73b9, 0x6080, 0xcc00, 0xc64c, 0x7aa8, 0x6336, 0x0, 0x0);
        gbc.writeMem(0x73b9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6080);
        EXPECT(gbc.pc(), 0x73bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 022F
        gbc.setState(0x74ae, 0xe1de, 0x7da0, 0xa635, 0xad8f, 0x7393, 0x0, 0x1);
        gbc.writeMem(0x74ae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe1de);
        EXPECT(gbc.pc(), 0x74b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0230
        gbc.setState(0xbddd, 0x24f7, 0x9ea0, 0x4ccb, 0x7cf2, 0xcc28, 0x0, 0x0);
        gbc.writeMem(0xbddd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x24f7);
        EXPECT(gbc.pc(), 0xbddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddd), 0xcb);
        EXPECT(gbc.readMem(0xbdde), 0xf3);
        // CB F3 0231
        gbc.setState(0xcc8a, 0x623c, 0x9b60, 0x33cf, 0xaa9f, 0xf8b0, 0x1, 0x1);
        gbc.writeMem(0xcc8a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x623c);
        EXPECT(gbc.pc(), 0xcc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8a), 0xcb);
        EXPECT(gbc.readMem(0xcc8b), 0xf3);
        // CB F3 0232
        gbc.setState(0x9700, 0x3428, 0xac30, 0x2b60, 0x37e2, 0xc594, 0x1, 0x1);
        gbc.writeMem(0x9700, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3428);
        EXPECT(gbc.pc(), 0x9702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9700), 0xcb);
        EXPECT(gbc.readMem(0x9701), 0xf3);
        // CB F3 0233
        gbc.setState(0xcb81, 0xc724, 0x8370, 0x9095, 0x8160, 0x4da7, 0x1, 0x0);
        gbc.writeMem(0xcb81, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc724);
        EXPECT(gbc.pc(), 0xcb83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb81), 0xcb);
        EXPECT(gbc.readMem(0xcb82), 0xf3);
        // CB F3 0234
        gbc.setState(0x5a57, 0x6112, 0x5240, 0xcbd4, 0xa919, 0xcdf, 0x1, 0x0);
        gbc.writeMem(0x5a57, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6112);
        EXPECT(gbc.pc(), 0x5a59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0235
        gbc.setState(0xda8, 0xdb1b, 0x56f0, 0x3311, 0x8b4f, 0x7274, 0x1, 0x1);
        gbc.writeMem(0xda8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xdb1b);
        EXPECT(gbc.pc(), 0xdaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0236
        gbc.setState(0x113d, 0x8240, 0x50f0, 0x8a57, 0x7957, 0x4d62, 0x1, 0x0);
        gbc.writeMem(0x113d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8240);
        EXPECT(gbc.pc(), 0x113f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0237
        gbc.setState(0x695d, 0x5fe8, 0xe8a0, 0xbed7, 0xe58c, 0x7763, 0x1, 0x1);
        gbc.writeMem(0x695d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5fe8);
        EXPECT(gbc.pc(), 0x695f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0238
        gbc.setState(0xa095, 0x2899, 0x8620, 0xc745, 0x57fb, 0x9e94, 0x0, 0x1);
        gbc.writeMem(0xa095, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2899);
        EXPECT(gbc.pc(), 0xa097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa095), 0xcb);
        EXPECT(gbc.readMem(0xa096), 0xf3);
        // CB F3 0239
        gbc.setState(0x2d38, 0x9c48, 0xbf40, 0x5b98, 0xf90e, 0xd7b, 0x0, 0x1);
        gbc.writeMem(0x2d38, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9c48);
        EXPECT(gbc.pc(), 0x2d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 023A
        gbc.setState(0x44d5, 0xda7f, 0x9000, 0x3752, 0xc03a, 0x5295, 0x0, 0x0);
        gbc.writeMem(0x44d5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xda7f);
        EXPECT(gbc.pc(), 0x44d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 023B
        gbc.setState(0xe6bf, 0xcab0, 0xfd40, 0xe105, 0xf31b, 0xafee, 0x0, 0x1);
        gbc.writeMem(0xe6bf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcab0);
        EXPECT(gbc.pc(), 0xe6c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bf), 0xcb);
        EXPECT(gbc.readMem(0xe6c0), 0xf3);
        // CB F3 023C
        gbc.setState(0x9c46, 0x95d9, 0x7820, 0xf646, 0x8d07, 0x1467, 0x1, 0x0);
        gbc.writeMem(0x9c46, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x95d9);
        EXPECT(gbc.pc(), 0x9c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c46), 0xcb);
        EXPECT(gbc.readMem(0x9c47), 0xf3);
        // CB F3 023D
        gbc.setState(0x3dd, 0xa659, 0xf140, 0xc46d, 0x9831, 0xaec, 0x0, 0x0);
        gbc.writeMem(0x3dd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa659);
        EXPECT(gbc.pc(), 0x3df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 023E
        gbc.setState(0x4c5e, 0x38e9, 0x9110, 0xb160, 0x1089, 0x54d1, 0x1, 0x0);
        gbc.writeMem(0x4c5e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x38e9);
        EXPECT(gbc.pc(), 0x4c60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 023F
        gbc.setState(0x72b7, 0x7ebd, 0x4260, 0xf351, 0xf001, 0xc7ab, 0x1, 0x1);
        gbc.writeMem(0x72b7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7ebd);
        EXPECT(gbc.pc(), 0x72b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0240
        gbc.setState(0x54dd, 0xedd8, 0x7680, 0xc0af, 0xd9c4, 0xa8bb, 0x0, 0x1);
        gbc.writeMem(0x54dd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xedd8);
        EXPECT(gbc.pc(), 0x54df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0241
        gbc.setState(0xc06, 0xf172, 0xfe60, 0x8284, 0xb8a8, 0x454e, 0x1, 0x0);
        gbc.writeMem(0xc06, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0xc08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0242
        gbc.setState(0x7557, 0x5465, 0xf6b0, 0xc67e, 0x8ac2, 0x6e84, 0x1, 0x0);
        gbc.writeMem(0x7557, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5465);
        EXPECT(gbc.pc(), 0x7559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0243
        gbc.setState(0x17a6, 0xd00f, 0x1730, 0x9d14, 0x3a8a, 0xb518, 0x0, 0x1);
        gbc.writeMem(0x17a6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd00f);
        EXPECT(gbc.pc(), 0x17a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0244
        gbc.setState(0x2eff, 0x9911, 0xbd0, 0x3718, 0xd912, 0xfd6d, 0x0, 0x0);
        gbc.writeMem(0x2eff, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9911);
        EXPECT(gbc.pc(), 0x2f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0245
        gbc.setState(0x98b, 0xff4d, 0x90d0, 0xddd4, 0xd6f5, 0xe511, 0x1, 0x0);
        gbc.writeMem(0x98b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xff4d);
        EXPECT(gbc.pc(), 0x98d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0246
        gbc.setState(0x5fdf, 0x2df5, 0x9af0, 0x8f06, 0xba84, 0xa187, 0x1, 0x0);
        gbc.writeMem(0x5fdf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2df5);
        EXPECT(gbc.pc(), 0x5fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0247
        gbc.setState(0xdfcd, 0x47d3, 0xd50, 0x6146, 0xe7ae, 0x68af, 0x0, 0x1);
        gbc.writeMem(0xdfcd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x47d3);
        EXPECT(gbc.pc(), 0xdfcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfcd), 0xcb);
        EXPECT(gbc.readMem(0xdfce), 0xf3);
        // CB F3 0248
        gbc.setState(0x7fc2, 0x7c7e, 0x9e40, 0xe7ff, 0x13c0, 0xd9b2, 0x1, 0x0);
        gbc.writeMem(0x7fc2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7c7e);
        EXPECT(gbc.pc(), 0x7fc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0249
        gbc.setState(0xe036, 0x8e4f, 0xe920, 0xdaf8, 0x2e08, 0xad04, 0x0, 0x0);
        gbc.writeMem(0xe036, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8e4f);
        EXPECT(gbc.pc(), 0xe038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe036), 0xcb);
        EXPECT(gbc.readMem(0xe037), 0xf3);
        // CB F3 024A
        gbc.setState(0x76d1, 0x533c, 0x4210, 0x5441, 0xd84e, 0x9285, 0x0, 0x0);
        gbc.writeMem(0x76d1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x533c);
        EXPECT(gbc.pc(), 0x76d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 024B
        gbc.setState(0xba07, 0x16e, 0xbf60, 0x9d78, 0xa18e, 0xebc8, 0x0, 0x1);
        gbc.writeMem(0xba07, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x16e);
        EXPECT(gbc.pc(), 0xba09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba07), 0xcb);
        EXPECT(gbc.readMem(0xba08), 0xf3);
        // CB F3 024C
        gbc.setState(0x7b4b, 0xfb0a, 0xcd50, 0x390b, 0x2a87, 0x7005, 0x0, 0x0);
        gbc.writeMem(0x7b4b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfb0a);
        EXPECT(gbc.pc(), 0x7b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 024D
        gbc.setState(0xcba0, 0x84f2, 0xe6f0, 0x7945, 0x48c9, 0x82d5, 0x0, 0x1);
        gbc.writeMem(0xcba0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x84f2);
        EXPECT(gbc.pc(), 0xcba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba0), 0xcb);
        EXPECT(gbc.readMem(0xcba1), 0xf3);
        // CB F3 024E
        gbc.setState(0xbfdb, 0xcdf4, 0x7630, 0xd334, 0x1ea4, 0xa579, 0x0, 0x0);
        gbc.writeMem(0xbfdb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcdf4);
        EXPECT(gbc.pc(), 0xbfdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdb), 0xcb);
        EXPECT(gbc.readMem(0xbfdc), 0xf3);
        // CB F3 0250
        gbc.setState(0xea8f, 0xd4ad, 0x9e00, 0x36b4, 0x71bc, 0x6794, 0x1, 0x0);
        gbc.writeMem(0xea8f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd4ad);
        EXPECT(gbc.pc(), 0xea91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea8f), 0xcb);
        EXPECT(gbc.readMem(0xea90), 0xf3);
        // CB F3 0251
        gbc.setState(0x3c55, 0x7386, 0xef90, 0x2496, 0x5f04, 0x192b, 0x1, 0x1);
        gbc.writeMem(0x3c55, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7386);
        EXPECT(gbc.pc(), 0x3c57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0253
        gbc.setState(0xc0df, 0xfb4b, 0xeb30, 0x39fe, 0xfc76, 0x509b, 0x1, 0x0);
        gbc.writeMem(0xc0df, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfb4b);
        EXPECT(gbc.pc(), 0xc0e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0df), 0xcb);
        EXPECT(gbc.readMem(0xc0e0), 0xf3);
        // CB F3 0254
        gbc.setState(0x9454, 0x3bed, 0x8f10, 0x921f, 0x5e05, 0x6299, 0x1, 0x0);
        gbc.writeMem(0x9454, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3bed);
        EXPECT(gbc.pc(), 0x9456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9454), 0xcb);
        EXPECT(gbc.readMem(0x9455), 0xf3);
        // CB F3 0255
        gbc.setState(0x1e60, 0xacfe, 0x7be0, 0x536c, 0x8221, 0x721e, 0x1, 0x1);
        gbc.writeMem(0x1e60, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xacfe);
        EXPECT(gbc.pc(), 0x1e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0256
        gbc.setState(0xdfa9, 0x19cc, 0x1d0, 0xd5c6, 0x2dd2, 0xd9f6, 0x0, 0x1);
        gbc.writeMem(0xdfa9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x19cc);
        EXPECT(gbc.pc(), 0xdfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa9), 0xcb);
        EXPECT(gbc.readMem(0xdfaa), 0xf3);
        // CB F3 0257
        gbc.setState(0xb895, 0x3040, 0x7fc0, 0xee5e, 0x7b62, 0xbf82, 0x1, 0x0);
        gbc.writeMem(0xb895, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3040);
        EXPECT(gbc.pc(), 0xb897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb895), 0xcb);
        EXPECT(gbc.readMem(0xb896), 0xf3);
        // CB F3 0258
        gbc.setState(0xacb1, 0xd28, 0x88a0, 0x61bf, 0x22ec, 0x21b1, 0x0, 0x1);
        gbc.writeMem(0xacb1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd28);
        EXPECT(gbc.pc(), 0xacb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacb1), 0xcb);
        EXPECT(gbc.readMem(0xacb2), 0xf3);
        // CB F3 0259
        gbc.setState(0xe91b, 0x6a0a, 0x8ee0, 0x9f70, 0x2841, 0x3260, 0x1, 0x0);
        gbc.writeMem(0xe91b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6a0a);
        EXPECT(gbc.pc(), 0xe91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91b), 0xcb);
        EXPECT(gbc.readMem(0xe91c), 0xf3);
        // CB F3 025A
        gbc.setState(0x3f60, 0xde14, 0xfd00, 0x4e7c, 0xfcb8, 0xae56, 0x0, 0x1);
        gbc.writeMem(0x3f60, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xde14);
        EXPECT(gbc.pc(), 0x3f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 025B
        gbc.setState(0x6e01, 0xb84d, 0xbc80, 0x3c80, 0xbb57, 0xe743, 0x0, 0x0);
        gbc.writeMem(0x6e01, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb84d);
        EXPECT(gbc.pc(), 0x6e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 025C
        gbc.setState(0x4e27, 0xc3a4, 0x2d60, 0x1233, 0x2d3d, 0x74, 0x0, 0x1);
        gbc.writeMem(0x4e27, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc3a4);
        EXPECT(gbc.pc(), 0x4e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 025D
        gbc.setState(0xc796, 0x8a92, 0xf430, 0x582d, 0xe14b, 0x4e6d, 0x1, 0x1);
        gbc.writeMem(0xc796, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8a92);
        EXPECT(gbc.pc(), 0xc798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc796), 0xcb);
        EXPECT(gbc.readMem(0xc797), 0xf3);
        // CB F3 025E
        gbc.setState(0x8012, 0x90a1, 0x5460, 0xe1f0, 0x66d7, 0x557a, 0x0, 0x1);
        gbc.writeMem(0x8012, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x90a1);
        EXPECT(gbc.pc(), 0x8014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8012), 0xcb);
        EXPECT(gbc.readMem(0x8013), 0xf3);
        // CB F3 0260
        gbc.setState(0x4e53, 0x86a4, 0x79e0, 0xe6a9, 0x451d, 0xc7a9, 0x1, 0x1);
        gbc.writeMem(0x4e53, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x86a4);
        EXPECT(gbc.pc(), 0x4e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0262
        gbc.setState(0xcbc6, 0xc10e, 0x70a0, 0x3cef, 0x3300, 0xd194, 0x1, 0x0);
        gbc.writeMem(0xcbc6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc10e);
        EXPECT(gbc.pc(), 0xcbc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc6), 0xcb);
        EXPECT(gbc.readMem(0xcbc7), 0xf3);
        // CB F3 0263
        gbc.setState(0x4905, 0x9406, 0x4200, 0x75fd, 0xdef3, 0xa766, 0x1, 0x1);
        gbc.writeMem(0x4905, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9406);
        EXPECT(gbc.pc(), 0x4907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0264
        gbc.setState(0xa6c7, 0x907c, 0x1340, 0xda27, 0x17ed, 0x343d, 0x1, 0x1);
        gbc.writeMem(0xa6c7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x907c);
        EXPECT(gbc.pc(), 0xa6c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c7), 0xcb);
        EXPECT(gbc.readMem(0xa6c8), 0xf3);
        // CB F3 0265
        gbc.setState(0xb9d6, 0x289d, 0x7dd0, 0xb171, 0x36f5, 0x6893, 0x0, 0x1);
        gbc.writeMem(0xb9d6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x289d);
        EXPECT(gbc.pc(), 0xb9d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d6), 0xcb);
        EXPECT(gbc.readMem(0xb9d7), 0xf3);
        // CB F3 0266
        gbc.setState(0x980f, 0xf05b, 0xb100, 0x1da0, 0x7f94, 0x4462, 0x0, 0x1);
        gbc.writeMem(0x980f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf05b);
        EXPECT(gbc.pc(), 0x9811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980f), 0xcb);
        EXPECT(gbc.readMem(0x9810), 0xf3);
        // CB F3 0267
        gbc.setState(0xb5f0, 0x8289, 0xf340, 0x8101, 0x3fa3, 0xcdcd, 0x0, 0x0);
        gbc.writeMem(0xb5f0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8289);
        EXPECT(gbc.pc(), 0xb5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f0), 0xcb);
        EXPECT(gbc.readMem(0xb5f1), 0xf3);
        // CB F3 0268
        gbc.setState(0x4988, 0x4913, 0xa400, 0xbcba, 0x65a4, 0x3650, 0x0, 0x1);
        gbc.writeMem(0x4988, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4913);
        EXPECT(gbc.pc(), 0x498a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 026A
        gbc.setState(0xac96, 0xde24, 0xba30, 0xac88, 0x5328, 0x7741, 0x1, 0x0);
        gbc.writeMem(0xac96, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xde24);
        EXPECT(gbc.pc(), 0xac98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac96), 0xcb);
        EXPECT(gbc.readMem(0xac97), 0xf3);
        // CB F3 026C
        gbc.setState(0xbd7c, 0xd98e, 0xc8a0, 0xa34c, 0xc05d, 0xab34, 0x1, 0x1);
        gbc.writeMem(0xbd7c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd98e);
        EXPECT(gbc.pc(), 0xbd7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd7c), 0xcb);
        EXPECT(gbc.readMem(0xbd7d), 0xf3);
        // CB F3 026D
        gbc.setState(0xc96c, 0xc3eb, 0xdc60, 0xf486, 0x508b, 0x636a, 0x0, 0x0);
        gbc.writeMem(0xc96c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc3eb);
        EXPECT(gbc.pc(), 0xc96e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc96c), 0xcb);
        EXPECT(gbc.readMem(0xc96d), 0xf3);
        // CB F3 026E
        gbc.setState(0x8711, 0x460f, 0x2b40, 0x208f, 0x749d, 0xf46f, 0x1, 0x0);
        gbc.writeMem(0x8711, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x460f);
        EXPECT(gbc.pc(), 0x8713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8711), 0xcb);
        EXPECT(gbc.readMem(0x8712), 0xf3);
        // CB F3 026F
        gbc.setState(0x6aaf, 0x74de, 0x8f90, 0xdb73, 0xad3a, 0x4fd0, 0x1, 0x1);
        gbc.writeMem(0x6aaf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x74de);
        EXPECT(gbc.pc(), 0x6ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0270
        gbc.setState(0x869d, 0xa482, 0x24e0, 0xef34, 0xa923, 0xdd0f, 0x1, 0x0);
        gbc.writeMem(0x869d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa482);
        EXPECT(gbc.pc(), 0x869f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x869d), 0xcb);
        EXPECT(gbc.readMem(0x869e), 0xf3);
        // CB F3 0271
        gbc.setState(0x188d, 0xfa1b, 0xcb40, 0xfbbc, 0x408b, 0x72cf, 0x1, 0x1);
        gbc.writeMem(0x188d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0x188f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0272
        gbc.setState(0x26d5, 0x5b01, 0xba80, 0x34ed, 0x73cf, 0xb01e, 0x0, 0x1);
        gbc.writeMem(0x26d5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5b01);
        EXPECT(gbc.pc(), 0x26d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0273
        gbc.setState(0x622e, 0xa651, 0x65c0, 0x97d4, 0xfe5a, 0x3e7e, 0x1, 0x1);
        gbc.writeMem(0x622e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa651);
        EXPECT(gbc.pc(), 0x6230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0274
        gbc.setState(0x645d, 0x96ef, 0x3780, 0xf8f7, 0x3524, 0xd4f1, 0x1, 0x0);
        gbc.writeMem(0x645d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x96ef);
        EXPECT(gbc.pc(), 0x645f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0275
        gbc.setState(0x838e, 0x840f, 0xeef0, 0x7f86, 0x54e7, 0x7904, 0x0, 0x1);
        gbc.writeMem(0x838e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x840f);
        EXPECT(gbc.pc(), 0x8390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x838e), 0xcb);
        EXPECT(gbc.readMem(0x838f), 0xf3);
        // CB F3 0276
        gbc.setState(0xeb70, 0x13ad, 0xdf70, 0xa540, 0x2e5f, 0x5dd, 0x1, 0x0);
        gbc.writeMem(0xeb70, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x13ad);
        EXPECT(gbc.pc(), 0xeb72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb70), 0xcb);
        EXPECT(gbc.readMem(0xeb71), 0xf3);
        // CB F3 0277
        gbc.setState(0x736d, 0x3c1d, 0xeb50, 0x2004, 0x9e31, 0x2dbb, 0x1, 0x0);
        gbc.writeMem(0x736d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3c1d);
        EXPECT(gbc.pc(), 0x736f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0278
        gbc.setState(0xe51b, 0xb475, 0x9000, 0xa60a, 0x51e4, 0x7df5, 0x1, 0x1);
        gbc.writeMem(0xe51b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb475);
        EXPECT(gbc.pc(), 0xe51d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51b), 0xcb);
        EXPECT(gbc.readMem(0xe51c), 0xf3);
        // CB F3 0279
        gbc.setState(0x3807, 0xd514, 0xc7d0, 0x3de7, 0x6c91, 0xf18e, 0x0, 0x1);
        gbc.writeMem(0x3807, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd514);
        EXPECT(gbc.pc(), 0x3809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 027A
        gbc.setState(0xa5c5, 0x4706, 0xb940, 0x89e2, 0x3f5, 0x2767, 0x1, 0x0);
        gbc.writeMem(0xa5c5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4706);
        EXPECT(gbc.pc(), 0xa5c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5c5), 0xcb);
        EXPECT(gbc.readMem(0xa5c6), 0xf3);
        // CB F3 027B
        gbc.setState(0x46a0, 0xbdfc, 0xe6f0, 0x461e, 0xecb5, 0xc5ff, 0x0, 0x1);
        gbc.writeMem(0x46a0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbdfc);
        EXPECT(gbc.pc(), 0x46a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 027D
        gbc.setState(0x413f, 0x83db, 0x7990, 0x6894, 0xc972, 0x43f3, 0x1, 0x0);
        gbc.writeMem(0x413f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x83db);
        EXPECT(gbc.pc(), 0x4141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 027E
        gbc.setState(0xeb21, 0xc30c, 0xd00, 0xfe9, 0x7bbe, 0x101a, 0x1, 0x0);
        gbc.writeMem(0xeb21, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc30c);
        EXPECT(gbc.pc(), 0xeb23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb21), 0xcb);
        EXPECT(gbc.readMem(0xeb22), 0xf3);
        // CB F3 027F
        gbc.setState(0x557b, 0xdb1e, 0x10f0, 0xdb84, 0x2f79, 0xdf2e, 0x1, 0x1);
        gbc.writeMem(0x557b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xdb1e);
        EXPECT(gbc.pc(), 0x557d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0280
        gbc.setState(0x9f59, 0x119c, 0x98e0, 0x301d, 0xbad8, 0xf6cd, 0x1, 0x1);
        gbc.writeMem(0x9f59, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x119c);
        EXPECT(gbc.pc(), 0x9f5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f59), 0xcb);
        EXPECT(gbc.readMem(0x9f5a), 0xf3);
        // CB F3 0281
        gbc.setState(0x54cc, 0xe18e, 0x4580, 0x6228, 0x5374, 0xeda9, 0x0, 0x1);
        gbc.writeMem(0x54cc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe18e);
        EXPECT(gbc.pc(), 0x54ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0282
        gbc.setState(0x3455, 0x699c, 0x2ca0, 0xcf5b, 0x916d, 0xa67e, 0x1, 0x1);
        gbc.writeMem(0x3455, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x699c);
        EXPECT(gbc.pc(), 0x3457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0283
        gbc.setState(0x1aed, 0xed65, 0xf060, 0x9c63, 0xcd08, 0x22fc, 0x0, 0x0);
        gbc.writeMem(0x1aed, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xed65);
        EXPECT(gbc.pc(), 0x1aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0285
        gbc.setState(0x794b, 0xa5b1, 0xc660, 0xdf10, 0xd5d6, 0xd36b, 0x1, 0x0);
        gbc.writeMem(0x794b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa5b1);
        EXPECT(gbc.pc(), 0x794d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0286
        gbc.setState(0x8873, 0xe055, 0x6c20, 0xb21e, 0xcea5, 0xab4b, 0x0, 0x0);
        gbc.writeMem(0x8873, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe055);
        EXPECT(gbc.pc(), 0x8875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8873), 0xcb);
        EXPECT(gbc.readMem(0x8874), 0xf3);
        // CB F3 0287
        gbc.setState(0xd76b, 0x4f62, 0xcc50, 0x8c91, 0xf2a3, 0x51b5, 0x1, 0x1);
        gbc.writeMem(0xd76b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4f62);
        EXPECT(gbc.pc(), 0xd76d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd76b), 0xcb);
        EXPECT(gbc.readMem(0xd76c), 0xf3);
        // CB F3 0288
        gbc.setState(0xfad, 0xaf83, 0x7ee0, 0x9533, 0xaec7, 0x700c, 0x1, 0x0);
        gbc.writeMem(0xfad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaf83);
        EXPECT(gbc.pc(), 0xfaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0289
        gbc.setState(0xb4ba, 0x1106, 0xb100, 0x4fec, 0xbb3d, 0xd528, 0x0, 0x0);
        gbc.writeMem(0xb4ba, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1106);
        EXPECT(gbc.pc(), 0xb4bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ba), 0xcb);
        EXPECT(gbc.readMem(0xb4bb), 0xf3);
        // CB F3 028A
        gbc.setState(0x9a46, 0xbf3d, 0xad0, 0x207b, 0x5c5, 0x9ef9, 0x1, 0x0);
        gbc.writeMem(0x9a46, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbf3d);
        EXPECT(gbc.pc(), 0x9a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a46), 0xcb);
        EXPECT(gbc.readMem(0x9a47), 0xf3);
        // CB F3 028B
        gbc.setState(0x9c85, 0x8847, 0xf490, 0xd949, 0xb147, 0xa37b, 0x1, 0x1);
        gbc.writeMem(0x9c85, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8847);
        EXPECT(gbc.pc(), 0x9c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c85), 0xcb);
        EXPECT(gbc.readMem(0x9c86), 0xf3);
        // CB F3 028C
        gbc.setState(0x1370, 0xa1a, 0x4040, 0x8a59, 0x884d, 0xc825, 0x1, 0x0);
        gbc.writeMem(0x1370, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa1a);
        EXPECT(gbc.pc(), 0x1372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 028D
        gbc.setState(0x4881, 0xd6f0, 0x76e0, 0x686b, 0xba32, 0x990c, 0x1, 0x1);
        gbc.writeMem(0x4881, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd6f0);
        EXPECT(gbc.pc(), 0x4883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 028E
        gbc.setState(0x4fe6, 0x23ae, 0x8df0, 0xb65c, 0x5507, 0xce64, 0x1, 0x1);
        gbc.writeMem(0x4fe6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x23ae);
        EXPECT(gbc.pc(), 0x4fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 028F
        gbc.setState(0xc0a, 0x7574, 0x41b0, 0xc92c, 0x5080, 0xfdb9, 0x1, 0x0);
        gbc.writeMem(0xc0a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7574);
        EXPECT(gbc.pc(), 0xc0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0290
        gbc.setState(0x2f9f, 0x33e0, 0x2710, 0xfe68, 0x9cf9, 0xeac6, 0x0, 0x1);
        gbc.writeMem(0x2f9f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x33e0);
        EXPECT(gbc.pc(), 0x2fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0291
        gbc.setState(0x92ed, 0xf660, 0xd470, 0xf5c4, 0x8ac0, 0x2009, 0x1, 0x1);
        gbc.writeMem(0x92ed, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf660);
        EXPECT(gbc.pc(), 0x92ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ed), 0xcb);
        EXPECT(gbc.readMem(0x92ee), 0xf3);
        // CB F3 0292
        gbc.setState(0xca91, 0xcb78, 0x160, 0x974a, 0x683d, 0x4ec9, 0x0, 0x1);
        gbc.writeMem(0xca91, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcb78);
        EXPECT(gbc.pc(), 0xca93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca91), 0xcb);
        EXPECT(gbc.readMem(0xca92), 0xf3);
        // CB F3 0293
        gbc.setState(0xefda, 0x6e3b, 0x4b90, 0x9ad2, 0x412e, 0xdc7e, 0x1, 0x1);
        gbc.writeMem(0xefda, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0xefdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefda), 0xcb);
        EXPECT(gbc.readMem(0xefdb), 0xf3);
        // CB F3 0294
        gbc.setState(0x689a, 0x6232, 0x29d0, 0x1186, 0x5f0c, 0x1eee, 0x1, 0x1);
        gbc.writeMem(0x689a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6232);
        EXPECT(gbc.pc(), 0x689c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0295
        gbc.setState(0x82fe, 0xb372, 0x2700, 0x3a98, 0x8aab, 0x6281, 0x1, 0x1);
        gbc.writeMem(0x82fe, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb372);
        EXPECT(gbc.pc(), 0x8300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82fe), 0xcb);
        EXPECT(gbc.readMem(0x82ff), 0xf3);
        // CB F3 0296
        gbc.setState(0x2a2a, 0x5c70, 0xbdd0, 0x3c19, 0xe2a8, 0x1d7c, 0x0, 0x1);
        gbc.writeMem(0x2a2a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5c70);
        EXPECT(gbc.pc(), 0x2a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0297
        gbc.setState(0x4f4b, 0x7dea, 0x3c00, 0xc8b9, 0x4142, 0xb9d1, 0x0, 0x1);
        gbc.writeMem(0x4f4b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7dea);
        EXPECT(gbc.pc(), 0x4f4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0298
        gbc.setState(0xc7e7, 0x6e72, 0x6ff0, 0xc633, 0xe05b, 0x3680, 0x1, 0x1);
        gbc.writeMem(0xc7e7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6e72);
        EXPECT(gbc.pc(), 0xc7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e7), 0xcb);
        EXPECT(gbc.readMem(0xc7e8), 0xf3);
        // CB F3 0299
        gbc.setState(0x7d57, 0x19b4, 0x3e90, 0xd81f, 0x5322, 0x1b8a, 0x1, 0x0);
        gbc.writeMem(0x7d57, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x19b4);
        EXPECT(gbc.pc(), 0x7d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 029B
        gbc.setState(0xcfbd, 0x6b02, 0xe090, 0x24fc, 0xa1cc, 0x9698, 0x0, 0x1);
        gbc.writeMem(0xcfbd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0xcfbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfbd), 0xcb);
        EXPECT(gbc.readMem(0xcfbe), 0xf3);
        // CB F3 029C
        gbc.setState(0xd330, 0xf471, 0x1d0, 0x9a7d, 0xb23f, 0x738, 0x0, 0x1);
        gbc.writeMem(0xd330, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf471);
        EXPECT(gbc.pc(), 0xd332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd330), 0xcb);
        EXPECT(gbc.readMem(0xd331), 0xf3);
        // CB F3 029D
        gbc.setState(0x1fab, 0xdc82, 0x63f0, 0x7106, 0x6ef8, 0xeaf2, 0x1, 0x1);
        gbc.writeMem(0x1fab, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdc82);
        EXPECT(gbc.pc(), 0x1fad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 029E
        gbc.setState(0x3809, 0x2616, 0x80d0, 0x87c1, 0x5197, 0x8580, 0x1, 0x0);
        gbc.writeMem(0x3809, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2616);
        EXPECT(gbc.pc(), 0x380b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 029F
        gbc.setState(0x80c1, 0x1459, 0xb610, 0x18e8, 0x71a0, 0xebd0, 0x1, 0x1);
        gbc.writeMem(0x80c1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1459);
        EXPECT(gbc.pc(), 0x80c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c1), 0xcb);
        EXPECT(gbc.readMem(0x80c2), 0xf3);
        // CB F3 02A0
        gbc.setState(0x7543, 0xe032, 0xcec0, 0x3bc5, 0x6a71, 0x8b51, 0x0, 0x0);
        gbc.writeMem(0x7543, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe032);
        EXPECT(gbc.pc(), 0x7545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02A1
        gbc.setState(0xcf8, 0xf014, 0x9cf0, 0x71de, 0xcea, 0x351f, 0x0, 0x1);
        gbc.writeMem(0xcf8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf014);
        EXPECT(gbc.pc(), 0xcfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02A2
        gbc.setState(0x4914, 0xb31a, 0x5710, 0xbca, 0x8d55, 0x9be5, 0x0, 0x1);
        gbc.writeMem(0x4914, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb31a);
        EXPECT(gbc.pc(), 0x4916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02A3
        gbc.setState(0xb0a9, 0x7a62, 0x5cf0, 0x2209, 0x6b58, 0x5de9, 0x0, 0x0);
        gbc.writeMem(0xb0a9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7a62);
        EXPECT(gbc.pc(), 0xb0ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a9), 0xcb);
        EXPECT(gbc.readMem(0xb0aa), 0xf3);
        // CB F3 02A4
        gbc.setState(0xca04, 0x8632, 0xeaa0, 0x9be0, 0x1d2f, 0x87f9, 0x1, 0x1);
        gbc.writeMem(0xca04, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8632);
        EXPECT(gbc.pc(), 0xca06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca04), 0xcb);
        EXPECT(gbc.readMem(0xca05), 0xf3);
        // CB F3 02A5
        gbc.setState(0x2684, 0x7c41, 0x4030, 0x6a1a, 0xed9a, 0x53f9, 0x0, 0x0);
        gbc.writeMem(0x2684, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7c41);
        EXPECT(gbc.pc(), 0x2686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02A6
        gbc.setState(0xdd85, 0x7638, 0x1c10, 0xa754, 0xaca8, 0xb29c, 0x0, 0x1);
        gbc.writeMem(0xdd85, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7638);
        EXPECT(gbc.pc(), 0xdd87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd85), 0xcb);
        EXPECT(gbc.readMem(0xdd86), 0xf3);
        // CB F3 02A8
        gbc.setState(0x42a7, 0xf31d, 0xd4a0, 0x86d5, 0x5571, 0xd476, 0x1, 0x1);
        gbc.writeMem(0x42a7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf31d);
        EXPECT(gbc.pc(), 0x42a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02A9
        gbc.setState(0x48ae, 0xc40, 0x1170, 0xffae, 0x204b, 0xbe5e, 0x0, 0x0);
        gbc.writeMem(0x48ae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc40);
        EXPECT(gbc.pc(), 0x48b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02AA
        gbc.setState(0x3c09, 0x35f8, 0xdf40, 0x862d, 0x7bd3, 0xbc09, 0x1, 0x0);
        gbc.writeMem(0x3c09, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x35f8);
        EXPECT(gbc.pc(), 0x3c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02AB
        gbc.setState(0xa66c, 0x93d5, 0xd40, 0xd42c, 0xa471, 0xad17, 0x0, 0x1);
        gbc.writeMem(0xa66c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x93d5);
        EXPECT(gbc.pc(), 0xa66e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66c), 0xcb);
        EXPECT(gbc.readMem(0xa66d), 0xf3);
        // CB F3 02AC
        gbc.setState(0xc0a8, 0x7c42, 0x4f00, 0x2026, 0xe68d, 0x6891, 0x1, 0x0);
        gbc.writeMem(0xc0a8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7c42);
        EXPECT(gbc.pc(), 0xc0aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a8), 0xcb);
        EXPECT(gbc.readMem(0xc0a9), 0xf3);
        // CB F3 02AD
        gbc.setState(0xbb3f, 0x8230, 0xd4e0, 0xcaf, 0x4f5, 0xce9d, 0x0, 0x0);
        gbc.writeMem(0xbb3f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8230);
        EXPECT(gbc.pc(), 0xbb41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3f), 0xcb);
        EXPECT(gbc.readMem(0xbb40), 0xf3);
        // CB F3 02AE
        gbc.setState(0x9638, 0xa703, 0xa330, 0x9daf, 0x7274, 0x23bd, 0x1, 0x0);
        gbc.writeMem(0x9638, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa703);
        EXPECT(gbc.pc(), 0x963a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9638), 0xcb);
        EXPECT(gbc.readMem(0x9639), 0xf3);
        // CB F3 02AF
        gbc.setState(0x43a3, 0x7c02, 0x40c0, 0x8edb, 0x8b91, 0xd6d2, 0x1, 0x1);
        gbc.writeMem(0x43a3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7c02);
        EXPECT(gbc.pc(), 0x43a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02B0
        gbc.setState(0x578d, 0x8e1d, 0xd660, 0xd715, 0x79e9, 0xfe0, 0x0, 0x1);
        gbc.writeMem(0x578d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8e1d);
        EXPECT(gbc.pc(), 0x578f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02B1
        gbc.setState(0xcc48, 0x193c, 0x8fa0, 0x70d8, 0xacb7, 0xdca5, 0x0, 0x1);
        gbc.writeMem(0xcc48, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x193c);
        EXPECT(gbc.pc(), 0xcc4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc48), 0xcb);
        EXPECT(gbc.readMem(0xcc49), 0xf3);
        // CB F3 02B3
        gbc.setState(0xbf03, 0x7ef5, 0xa790, 0x1423, 0xe4a6, 0x889f, 0x1, 0x0);
        gbc.writeMem(0xbf03, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7ef5);
        EXPECT(gbc.pc(), 0xbf05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf03), 0xcb);
        EXPECT(gbc.readMem(0xbf04), 0xf3);
        // CB F3 02B4
        gbc.setState(0x1057, 0x7539, 0xad0, 0xdc5f, 0xf14a, 0xa60b, 0x0, 0x0);
        gbc.writeMem(0x1057, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7539);
        EXPECT(gbc.pc(), 0x1059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02B5
        gbc.setState(0x4ec0, 0x90b7, 0xb6d0, 0x495d, 0x2d50, 0x50e4, 0x1, 0x1);
        gbc.writeMem(0x4ec0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x90b7);
        EXPECT(gbc.pc(), 0x4ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02B6
        gbc.setState(0xa8e0, 0x1a6f, 0xe560, 0x2a16, 0x9a30, 0x8f11, 0x1, 0x1);
        gbc.writeMem(0xa8e0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1a6f);
        EXPECT(gbc.pc(), 0xa8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e0), 0xcb);
        EXPECT(gbc.readMem(0xa8e1), 0xf3);
        // CB F3 02B7
        gbc.setState(0x3a7b, 0x4dce, 0x2020, 0x32b, 0xa8b9, 0x3c54, 0x0, 0x1);
        gbc.writeMem(0x3a7b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4dce);
        EXPECT(gbc.pc(), 0x3a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02B8
        gbc.setState(0x7e74, 0xf4c, 0x7290, 0xdd2d, 0x1846, 0xe2ea, 0x0, 0x0);
        gbc.writeMem(0x7e74, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf4c);
        EXPECT(gbc.pc(), 0x7e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02B9
        gbc.setState(0xcd7a, 0x45a9, 0xbe30, 0x8609, 0x48ab, 0xdd6d, 0x1, 0x1);
        gbc.writeMem(0xcd7a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x45a9);
        EXPECT(gbc.pc(), 0xcd7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd7a), 0xcb);
        EXPECT(gbc.readMem(0xcd7b), 0xf3);
        // CB F3 02BA
        gbc.setState(0x3699, 0x392f, 0xac30, 0x246e, 0xb919, 0x9735, 0x0, 0x1);
        gbc.writeMem(0x3699, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x392f);
        EXPECT(gbc.pc(), 0x369b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02BB
        gbc.setState(0xa2c5, 0x6e60, 0x3cb0, 0x8174, 0x7956, 0x890c, 0x0, 0x1);
        gbc.writeMem(0xa2c5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6e60);
        EXPECT(gbc.pc(), 0xa2c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c5), 0xcb);
        EXPECT(gbc.readMem(0xa2c6), 0xf3);
        // CB F3 02BC
        gbc.setState(0x9019, 0x3222, 0x8fa0, 0x2431, 0x1a51, 0x58b7, 0x0, 0x1);
        gbc.writeMem(0x9019, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3222);
        EXPECT(gbc.pc(), 0x901b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9019), 0xcb);
        EXPECT(gbc.readMem(0x901a), 0xf3);
        // CB F3 02BD
        gbc.setState(0x4ffd, 0xc219, 0xe0f0, 0x1689, 0x163, 0x798b, 0x1, 0x0);
        gbc.writeMem(0x4ffd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc219);
        EXPECT(gbc.pc(), 0x4fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02BE
        gbc.setState(0x3970, 0xd6c3, 0x6ab0, 0x90b7, 0x2baf, 0xc379, 0x1, 0x0);
        gbc.writeMem(0x3970, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd6c3);
        EXPECT(gbc.pc(), 0x3972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02BF
        gbc.setState(0x5f0c, 0x39bf, 0x33f0, 0x8b37, 0xa6b9, 0x2ba4, 0x0, 0x1);
        gbc.writeMem(0x5f0c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x39bf);
        EXPECT(gbc.pc(), 0x5f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02C0
        gbc.setState(0x4f86, 0xdf9e, 0xbdc0, 0xdb78, 0x53a8, 0xf0fa, 0x1, 0x0);
        gbc.writeMem(0x4f86, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdf9e);
        EXPECT(gbc.pc(), 0x4f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02C1
        gbc.setState(0xd532, 0xef07, 0x7850, 0x5838, 0x33eb, 0x9560, 0x1, 0x1);
        gbc.writeMem(0xd532, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xef07);
        EXPECT(gbc.pc(), 0xd534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd532), 0xcb);
        EXPECT(gbc.readMem(0xd533), 0xf3);
        // CB F3 02C2
        gbc.setState(0x9e22, 0x4eaf, 0x19f0, 0x24db, 0x6e1d, 0x2c09, 0x0, 0x1);
        gbc.writeMem(0x9e22, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4eaf);
        EXPECT(gbc.pc(), 0x9e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e22), 0xcb);
        EXPECT(gbc.readMem(0x9e23), 0xf3);
        // CB F3 02C3
        gbc.setState(0x5da8, 0x1353, 0x14f0, 0xa860, 0xf429, 0xa962, 0x0, 0x1);
        gbc.writeMem(0x5da8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1353);
        EXPECT(gbc.pc(), 0x5daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02C4
        gbc.setState(0x8eed, 0x2f17, 0xbb20, 0xb139, 0x696b, 0x6b02, 0x0, 0x0);
        gbc.writeMem(0x8eed, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2f17);
        EXPECT(gbc.pc(), 0x8eef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eed), 0xcb);
        EXPECT(gbc.readMem(0x8eee), 0xf3);
        // CB F3 02C5
        gbc.setState(0xcba7, 0xa919, 0xa3b0, 0x4d1f, 0xc625, 0xa23e, 0x0, 0x0);
        gbc.writeMem(0xcba7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa919);
        EXPECT(gbc.pc(), 0xcba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba7), 0xcb);
        EXPECT(gbc.readMem(0xcba8), 0xf3);
        // CB F3 02C6
        gbc.setState(0x9a2, 0x649, 0xba20, 0x4b2b, 0xe25c, 0x4fe9, 0x1, 0x0);
        gbc.writeMem(0x9a2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x649);
        EXPECT(gbc.pc(), 0x9a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02C7
        gbc.setState(0x6b9e, 0x58e, 0xb6f0, 0x683b, 0x77fc, 0xfe35, 0x1, 0x1);
        gbc.writeMem(0x6b9e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x58e);
        EXPECT(gbc.pc(), 0x6ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02C8
        gbc.setState(0xb8cb, 0xfbcc, 0xdc70, 0x43f4, 0xa86a, 0x5002, 0x0, 0x1);
        gbc.writeMem(0xb8cb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfbcc);
        EXPECT(gbc.pc(), 0xb8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8cb), 0xcb);
        EXPECT(gbc.readMem(0xb8cc), 0xf3);
        // CB F3 02CA
        gbc.setState(0xb573, 0xb4d5, 0x3c30, 0xb5ca, 0x1991, 0xf342, 0x0, 0x0);
        gbc.writeMem(0xb573, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb4d5);
        EXPECT(gbc.pc(), 0xb575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb573), 0xcb);
        EXPECT(gbc.readMem(0xb574), 0xf3);
        // CB F3 02CB
        gbc.setState(0x8077, 0x355e, 0xbd00, 0x9aac, 0xa413, 0xaecc, 0x1, 0x1);
        gbc.writeMem(0x8077, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x355e);
        EXPECT(gbc.pc(), 0x8079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8077), 0xcb);
        EXPECT(gbc.readMem(0x8078), 0xf3);
        // CB F3 02CC
        gbc.setState(0x541e, 0x7fe3, 0x2910, 0x9367, 0x6f62, 0xf980, 0x0, 0x0);
        gbc.writeMem(0x541e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7fe3);
        EXPECT(gbc.pc(), 0x5420);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02CD
        gbc.setState(0x30ce, 0x26a6, 0xe990, 0xa65d, 0xd634, 0xb287, 0x1, 0x1);
        gbc.writeMem(0x30ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x26a6);
        EXPECT(gbc.pc(), 0x30d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02CE
        gbc.setState(0x99e8, 0xe4a3, 0x7c70, 0x6f81, 0xd3bb, 0xf72d, 0x0, 0x0);
        gbc.writeMem(0x99e8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe4a3);
        EXPECT(gbc.pc(), 0x99ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99e8), 0xcb);
        EXPECT(gbc.readMem(0x99e9), 0xf3);
        // CB F3 02CF
        gbc.setState(0x429a, 0x4d07, 0x2030, 0x1ff8, 0x5112, 0xba4, 0x0, 0x0);
        gbc.writeMem(0x429a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4d07);
        EXPECT(gbc.pc(), 0x429c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02D0
        gbc.setState(0xda8c, 0x6d8, 0x4b30, 0xf5f7, 0x166a, 0xb6b, 0x0, 0x1);
        gbc.writeMem(0xda8c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6d8);
        EXPECT(gbc.pc(), 0xda8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8c), 0xcb);
        EXPECT(gbc.readMem(0xda8d), 0xf3);
        // CB F3 02D1
        gbc.setState(0x44df, 0xb2ec, 0x57d0, 0x100f, 0xaf93, 0x8a0d, 0x0, 0x1);
        gbc.writeMem(0x44df, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb2ec);
        EXPECT(gbc.pc(), 0x44e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02D2
        gbc.setState(0x77f3, 0xd4e8, 0x2bb0, 0x7514, 0xdad2, 0x8cdf, 0x1, 0x0);
        gbc.writeMem(0x77f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd4e8);
        EXPECT(gbc.pc(), 0x77f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02D3
        gbc.setState(0xe1d, 0x819d, 0xd0d0, 0x5dfd, 0x1654, 0x2d24, 0x1, 0x1);
        gbc.writeMem(0xe1d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x819d);
        EXPECT(gbc.pc(), 0xe1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02D4
        gbc.setState(0xd7cd, 0xca18, 0x51f0, 0xee04, 0x9e3a, 0xa88, 0x0, 0x1);
        gbc.writeMem(0xd7cd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xca18);
        EXPECT(gbc.pc(), 0xd7cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7cd), 0xcb);
        EXPECT(gbc.readMem(0xd7ce), 0xf3);
        // CB F3 02D5
        gbc.setState(0xec6c, 0x95ff, 0x19d0, 0x1884, 0x82d0, 0xe686, 0x0, 0x0);
        gbc.writeMem(0xec6c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x95ff);
        EXPECT(gbc.pc(), 0xec6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec6c), 0xcb);
        EXPECT(gbc.readMem(0xec6d), 0xf3);
        // CB F3 02D6
        gbc.setState(0x945c, 0x8bf7, 0xaaf0, 0x7b81, 0xc211, 0x3bd1, 0x0, 0x1);
        gbc.writeMem(0x945c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8bf7);
        EXPECT(gbc.pc(), 0x945e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945c), 0xcb);
        EXPECT(gbc.readMem(0x945d), 0xf3);
        // CB F3 02D7
        gbc.setState(0x982a, 0x6b77, 0xde90, 0x3dad, 0x2519, 0xc3b8, 0x0, 0x1);
        gbc.writeMem(0x982a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6b77);
        EXPECT(gbc.pc(), 0x982c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x982a), 0xcb);
        EXPECT(gbc.readMem(0x982b), 0xf3);
        // CB F3 02D8
        gbc.setState(0xd2eb, 0x811b, 0x510, 0xc306, 0xd47d, 0x716, 0x1, 0x1);
        gbc.writeMem(0xd2eb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x811b);
        EXPECT(gbc.pc(), 0xd2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2eb), 0xcb);
        EXPECT(gbc.readMem(0xd2ec), 0xf3);
        // CB F3 02D9
        gbc.setState(0xa111, 0x8f55, 0x240, 0x8bc4, 0x60fd, 0x830e, 0x1, 0x0);
        gbc.writeMem(0xa111, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8f55);
        EXPECT(gbc.pc(), 0xa113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa111), 0xcb);
        EXPECT(gbc.readMem(0xa112), 0xf3);
        // CB F3 02DA
        gbc.setState(0x685e, 0x9b70, 0x6520, 0xbb7f, 0x8f7b, 0x94d7, 0x0, 0x0);
        gbc.writeMem(0x685e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9b70);
        EXPECT(gbc.pc(), 0x6860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02DB
        gbc.setState(0xcce1, 0x369c, 0xe940, 0x56a7, 0x9ebe, 0x5d00, 0x0, 0x1);
        gbc.writeMem(0xcce1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x369c);
        EXPECT(gbc.pc(), 0xcce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce1), 0xcb);
        EXPECT(gbc.readMem(0xcce2), 0xf3);
        // CB F3 02DC
        gbc.setState(0x1513, 0x316c, 0xb8d0, 0xff84, 0xf0f9, 0x7005, 0x0, 0x1);
        gbc.writeMem(0x1513, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x316c);
        EXPECT(gbc.pc(), 0x1515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02DD
        gbc.setState(0x63bd, 0x26cb, 0xcb10, 0x327b, 0x7962, 0x8e16, 0x1, 0x1);
        gbc.writeMem(0x63bd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x26cb);
        EXPECT(gbc.pc(), 0x63bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02DE
        gbc.setState(0x620, 0xb633, 0x87b0, 0xa687, 0x9628, 0x621f, 0x0, 0x1);
        gbc.writeMem(0x620, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb633);
        EXPECT(gbc.pc(), 0x622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02DF
        gbc.setState(0x7870, 0x990, 0xbe00, 0x3f41, 0xd59d, 0x6a64, 0x1, 0x0);
        gbc.writeMem(0x7870, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x990);
        EXPECT(gbc.pc(), 0x7872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02E0
        gbc.setState(0x2c6b, 0xfbe1, 0x8970, 0xbecc, 0x98d9, 0x4817, 0x0, 0x1);
        gbc.writeMem(0x2c6b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfbe1);
        EXPECT(gbc.pc(), 0x2c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02E1
        gbc.setState(0x76c2, 0x9f48, 0x85e0, 0x6f23, 0xe0e2, 0xad0, 0x1, 0x1);
        gbc.writeMem(0x76c2, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9f48);
        EXPECT(gbc.pc(), 0x76c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02E2
        gbc.setState(0xb878, 0x4b09, 0xbca0, 0xef06, 0x302c, 0x36b1, 0x1, 0x1);
        gbc.writeMem(0xb878, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4b09);
        EXPECT(gbc.pc(), 0xb87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb878), 0xcb);
        EXPECT(gbc.readMem(0xb879), 0xf3);
        // CB F3 02E3
        gbc.setState(0x5f0d, 0x5077, 0x3630, 0x4347, 0xa111, 0xb56e, 0x1, 0x1);
        gbc.writeMem(0x5f0d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5077);
        EXPECT(gbc.pc(), 0x5f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02E4
        gbc.setState(0x35f7, 0xdc2e, 0x6c20, 0x604a, 0x33bd, 0xa401, 0x0, 0x0);
        gbc.writeMem(0x35f7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdc2e);
        EXPECT(gbc.pc(), 0x35f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02E6
        gbc.setState(0xaffd, 0xe88, 0x4c90, 0xf024, 0xf34c, 0x2671, 0x0, 0x0);
        gbc.writeMem(0xaffd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe88);
        EXPECT(gbc.pc(), 0xafff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaffd), 0xcb);
        EXPECT(gbc.readMem(0xaffe), 0xf3);
        // CB F3 02E7
        gbc.setState(0xb02b, 0xd8e7, 0x2f10, 0x3d9, 0x8d95, 0x4aa8, 0x0, 0x0);
        gbc.writeMem(0xb02b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd8e7);
        EXPECT(gbc.pc(), 0xb02d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02b), 0xcb);
        EXPECT(gbc.readMem(0xb02c), 0xf3);
        // CB F3 02E8
        gbc.setState(0x70db, 0x3759, 0x46a0, 0x45a9, 0xe6b, 0xe4bd, 0x0, 0x0);
        gbc.writeMem(0x70db, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3759);
        EXPECT(gbc.pc(), 0x70dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02E9
        gbc.setState(0xcd17, 0x1107, 0xbf00, 0x1e7d, 0xec27, 0xa5ae, 0x1, 0x1);
        gbc.writeMem(0xcd17, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1107);
        EXPECT(gbc.pc(), 0xcd19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd17), 0xcb);
        EXPECT(gbc.readMem(0xcd18), 0xf3);
        // CB F3 02EA
        gbc.setState(0xb558, 0xe81c, 0x4770, 0xe4eb, 0xfc8c, 0xf4d0, 0x1, 0x1);
        gbc.writeMem(0xb558, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe81c);
        EXPECT(gbc.pc(), 0xb55a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb558), 0xcb);
        EXPECT(gbc.readMem(0xb559), 0xf3);
        // CB F3 02EC
        gbc.setState(0x9f1b, 0xca2b, 0x4910, 0x1398, 0x5f51, 0x492a, 0x0, 0x1);
        gbc.writeMem(0x9f1b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xca2b);
        EXPECT(gbc.pc(), 0x9f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1b), 0xcb);
        EXPECT(gbc.readMem(0x9f1c), 0xf3);
        // CB F3 02ED
        gbc.setState(0xc83e, 0x7360, 0xa160, 0x67d1, 0x148b, 0x6a9b, 0x1, 0x0);
        gbc.writeMem(0xc83e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7360);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83e), 0xcb);
        EXPECT(gbc.readMem(0xc83f), 0xf3);
        // CB F3 02EE
        gbc.setState(0x3019, 0x535d, 0x6e20, 0x1bd8, 0x1938, 0x7f46, 0x1, 0x1);
        gbc.writeMem(0x3019, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x535d);
        EXPECT(gbc.pc(), 0x301b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02EF
        gbc.setState(0x86a3, 0x45d7, 0x37d0, 0xb62a, 0xc739, 0xda0b, 0x1, 0x0);
        gbc.writeMem(0x86a3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x45d7);
        EXPECT(gbc.pc(), 0x86a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a3), 0xcb);
        EXPECT(gbc.readMem(0x86a4), 0xf3);
        // CB F3 02F0
        gbc.setState(0x601f, 0x6bee, 0x610, 0xcc48, 0x12bf, 0xf511, 0x0, 0x1);
        gbc.writeMem(0x601f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6bee);
        EXPECT(gbc.pc(), 0x6021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02F1
        gbc.setState(0x824e, 0x5e9e, 0x84b0, 0xca8e, 0x8a70, 0xa860, 0x1, 0x1);
        gbc.writeMem(0x824e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5e9e);
        EXPECT(gbc.pc(), 0x8250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824e), 0xcb);
        EXPECT(gbc.readMem(0x824f), 0xf3);
        // CB F3 02F2
        gbc.setState(0xd9c3, 0xb73, 0x8b30, 0x18e1, 0xf9ee, 0xf64, 0x1, 0x0);
        gbc.writeMem(0xd9c3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb73);
        EXPECT(gbc.pc(), 0xd9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c3), 0xcb);
        EXPECT(gbc.readMem(0xd9c4), 0xf3);
        // CB F3 02F3
        gbc.setState(0x4c69, 0x6662, 0xed60, 0x552d, 0x7002, 0x972e, 0x0, 0x0);
        gbc.writeMem(0x4c69, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6662);
        EXPECT(gbc.pc(), 0x4c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02F4
        gbc.setState(0x5deb, 0x8439, 0x7ef0, 0x858d, 0xa7ff, 0x45af, 0x0, 0x0);
        gbc.writeMem(0x5deb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8439);
        EXPECT(gbc.pc(), 0x5ded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02F5
        gbc.setState(0xa99f, 0x2375, 0x6b20, 0xc608, 0x7868, 0x299f, 0x0, 0x1);
        gbc.writeMem(0xa99f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2375);
        EXPECT(gbc.pc(), 0xa9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99f), 0xcb);
        EXPECT(gbc.readMem(0xa9a0), 0xf3);
        // CB F3 02F7
        gbc.setState(0x2404, 0x9b51, 0xaa20, 0x9696, 0x2a, 0x8301, 0x0, 0x0);
        gbc.writeMem(0x2404, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9b51);
        EXPECT(gbc.pc(), 0x2406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02F8
        gbc.setState(0x5e17, 0x9b01, 0x2bd0, 0x2b30, 0x55f3, 0x6752, 0x1, 0x1);
        gbc.writeMem(0x5e17, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9b01);
        EXPECT(gbc.pc(), 0x5e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02F9
        gbc.setState(0x4310, 0x1b6e, 0x1b90, 0xd5a0, 0xe516, 0xfe56, 0x1, 0x1);
        gbc.writeMem(0x4310, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1b6e);
        EXPECT(gbc.pc(), 0x4312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02FA
        gbc.setState(0x1a53, 0xbd3d, 0xb0e0, 0x29b3, 0xff75, 0x84a3, 0x1, 0x1);
        gbc.writeMem(0x1a53, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbd3d);
        EXPECT(gbc.pc(), 0x1a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02FB
        gbc.setState(0xaa54, 0x6a59, 0xc220, 0x1eec, 0x976d, 0x3d5b, 0x1, 0x0);
        gbc.writeMem(0xaa54, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6a59);
        EXPECT(gbc.pc(), 0xaa56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa54), 0xcb);
        EXPECT(gbc.readMem(0xaa55), 0xf3);
        // CB F3 02FC
        gbc.setState(0x5759, 0x3632, 0x3710, 0xf7bc, 0x37b0, 0xab80, 0x0, 0x0);
        gbc.writeMem(0x5759, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3632);
        EXPECT(gbc.pc(), 0x575b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 02FD
        gbc.setState(0x54ca, 0x99da, 0xe7a0, 0xb581, 0x88ef, 0x4855, 0x0, 0x1);
        gbc.writeMem(0x54ca, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x99da);
        EXPECT(gbc.pc(), 0x54cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 02FE
        gbc.setState(0xe47b, 0xbbcf, 0xada0, 0x884, 0x3170, 0xaf5e, 0x0, 0x0);
        gbc.writeMem(0xe47b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbbcf);
        EXPECT(gbc.pc(), 0xe47d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47b), 0xcb);
        EXPECT(gbc.readMem(0xe47c), 0xf3);
        // CB F3 02FF
        gbc.setState(0xb6c4, 0x78fa, 0x1190, 0xcbb0, 0xf95d, 0xcd46, 0x1, 0x1);
        gbc.writeMem(0xb6c4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x78fa);
        EXPECT(gbc.pc(), 0xb6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c4), 0xcb);
        EXPECT(gbc.readMem(0xb6c5), 0xf3);
        // CB F3 0300
        gbc.setState(0x68ea, 0x98a4, 0xa090, 0x7534, 0xb44e, 0xfce, 0x0, 0x0);
        gbc.writeMem(0x68ea, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x98a4);
        EXPECT(gbc.pc(), 0x68ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0301
        gbc.setState(0x9cff, 0xf14b, 0xce60, 0xc6ef, 0x3fe8, 0xd04a, 0x1, 0x0);
        gbc.writeMem(0x9cff, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf14b);
        EXPECT(gbc.pc(), 0x9d01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cff), 0xcb);
        EXPECT(gbc.readMem(0x9d00), 0xf3);
        // CB F3 0302
        gbc.setState(0xab8b, 0x5a3, 0x5280, 0x9de6, 0x3279, 0x4088, 0x0, 0x0);
        gbc.writeMem(0xab8b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5a3);
        EXPECT(gbc.pc(), 0xab8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8b), 0xcb);
        EXPECT(gbc.readMem(0xab8c), 0xf3);
        // CB F3 0303
        gbc.setState(0x8fe5, 0x3bfa, 0x9ec0, 0x1ed6, 0xfb00, 0x1e56, 0x0, 0x1);
        gbc.writeMem(0x8fe5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3bfa);
        EXPECT(gbc.pc(), 0x8fe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe5), 0xcb);
        EXPECT(gbc.readMem(0x8fe6), 0xf3);
        // CB F3 0304
        gbc.setState(0xcfaf, 0xb0af, 0x3990, 0x19b6, 0x1d0c, 0x5fc8, 0x1, 0x1);
        gbc.writeMem(0xcfaf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb0af);
        EXPECT(gbc.pc(), 0xcfb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfaf), 0xcb);
        EXPECT(gbc.readMem(0xcfb0), 0xf3);
        // CB F3 0305
        gbc.setState(0x6f07, 0xccfd, 0x94c0, 0xa82, 0xa53d, 0x570c, 0x1, 0x1);
        gbc.writeMem(0x6f07, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xccfd);
        EXPECT(gbc.pc(), 0x6f09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0306
        gbc.setState(0x9f3, 0xe6b7, 0x36f0, 0x563, 0x28a1, 0xeb31, 0x0, 0x0);
        gbc.writeMem(0x9f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe6b7);
        EXPECT(gbc.pc(), 0x9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0307
        gbc.setState(0xcbc4, 0xbf64, 0x5540, 0xb92f, 0x2582, 0x4e82, 0x0, 0x1);
        gbc.writeMem(0xcbc4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xbf64);
        EXPECT(gbc.pc(), 0xcbc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc4), 0xcb);
        EXPECT(gbc.readMem(0xcbc5), 0xf3);
        // CB F3 0308
        gbc.setState(0x9bba, 0x390c, 0xfd00, 0x9ad4, 0x5b6, 0xab34, 0x1, 0x1);
        gbc.writeMem(0x9bba, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x390c);
        EXPECT(gbc.pc(), 0x9bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bba), 0xcb);
        EXPECT(gbc.readMem(0x9bbb), 0xf3);
        // CB F3 0309
        gbc.setState(0x40f5, 0x426e, 0xcb50, 0xaa83, 0x8954, 0x358b, 0x1, 0x0);
        gbc.writeMem(0x40f5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x426e);
        EXPECT(gbc.pc(), 0x40f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 030B
        gbc.setState(0x3d72, 0x28a, 0x9050, 0x1a6f, 0xed09, 0x6f87, 0x1, 0x0);
        gbc.writeMem(0x3d72, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x28a);
        EXPECT(gbc.pc(), 0x3d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 030C
        gbc.setState(0x531b, 0xd67c, 0xcdb0, 0x28de, 0xb36d, 0xab97, 0x1, 0x1);
        gbc.writeMem(0x531b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd67c);
        EXPECT(gbc.pc(), 0x531d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 030D
        gbc.setState(0xda9e, 0xbe38, 0xd0d0, 0xb3f6, 0xdc35, 0x123d, 0x0, 0x0);
        gbc.writeMem(0xda9e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xbe38);
        EXPECT(gbc.pc(), 0xdaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda9e), 0xcb);
        EXPECT(gbc.readMem(0xda9f), 0xf3);
        // CB F3 030E
        gbc.setState(0x119, 0xdc4a, 0x35f0, 0xc77d, 0x7537, 0x84dd, 0x1, 0x1);
        gbc.writeMem(0x119, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdc4a);
        EXPECT(gbc.pc(), 0x11b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 030F
        gbc.setState(0x6de0, 0x652, 0x44f0, 0xfe61, 0xf121, 0x9ce6, 0x1, 0x0);
        gbc.writeMem(0x6de0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x652);
        EXPECT(gbc.pc(), 0x6de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0310
        gbc.setState(0x7484, 0x5422, 0x8510, 0x69af, 0x9ee0, 0xef61, 0x1, 0x1);
        gbc.writeMem(0x7484, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5422);
        EXPECT(gbc.pc(), 0x7486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0311
        gbc.setState(0x8a9c, 0xe9d5, 0x3910, 0xb537, 0x2bd9, 0xe37f, 0x0, 0x0);
        gbc.writeMem(0x8a9c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe9d5);
        EXPECT(gbc.pc(), 0x8a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9c), 0xcb);
        EXPECT(gbc.readMem(0x8a9d), 0xf3);
        // CB F3 0312
        gbc.setState(0xda40, 0xc719, 0xf3a0, 0x17f8, 0x804a, 0x5619, 0x0, 0x1);
        gbc.writeMem(0xda40, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc719);
        EXPECT(gbc.pc(), 0xda42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda40), 0xcb);
        EXPECT(gbc.readMem(0xda41), 0xf3);
        // CB F3 0313
        gbc.setState(0x2685, 0xb28c, 0xf710, 0x8c5d, 0x426e, 0x5628, 0x1, 0x1);
        gbc.writeMem(0x2685, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb28c);
        EXPECT(gbc.pc(), 0x2687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0314
        gbc.setState(0x1e6, 0x4713, 0xc40, 0xd0d1, 0xca6e, 0x38b5, 0x1, 0x1);
        gbc.writeMem(0x1e6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4713);
        EXPECT(gbc.pc(), 0x1e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0315
        gbc.setState(0xcf9b, 0xdb9d, 0x6540, 0xe2ae, 0x4c01, 0x8266, 0x0, 0x1);
        gbc.writeMem(0xcf9b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xdb9d);
        EXPECT(gbc.pc(), 0xcf9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf9b), 0xcb);
        EXPECT(gbc.readMem(0xcf9c), 0xf3);
        // CB F3 0316
        gbc.setState(0xc3f3, 0xf097, 0x9b90, 0x7bf7, 0x3664, 0xdc3e, 0x1, 0x0);
        gbc.writeMem(0xc3f3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf097);
        EXPECT(gbc.pc(), 0xc3f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3f3), 0xcb);
        EXPECT(gbc.readMem(0xc3f4), 0xf3);
        // CB F3 0317
        gbc.setState(0xd2bd, 0x79da, 0x92d0, 0xfe0e, 0x931b, 0x26e, 0x1, 0x1);
        gbc.writeMem(0xd2bd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x79da);
        EXPECT(gbc.pc(), 0xd2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2bd), 0xcb);
        EXPECT(gbc.readMem(0xd2be), 0xf3);
        // CB F3 0318
        gbc.setState(0xe613, 0x14b, 0xce90, 0x1d56, 0xb643, 0xbfac, 0x1, 0x1);
        gbc.writeMem(0xe613, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x14b);
        EXPECT(gbc.pc(), 0xe615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe613), 0xcb);
        EXPECT(gbc.readMem(0xe614), 0xf3);
        // CB F3 0319
        gbc.setState(0x19a1, 0xda33, 0x7f00, 0x886d, 0x89f4, 0x4710, 0x1, 0x0);
        gbc.writeMem(0x19a1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xda33);
        EXPECT(gbc.pc(), 0x19a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 031A
        gbc.setState(0x4515, 0xa516, 0xd8b0, 0x5046, 0x4a9c, 0x637b, 0x0, 0x1);
        gbc.writeMem(0x4515, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa516);
        EXPECT(gbc.pc(), 0x4517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 031B
        gbc.setState(0xd3b5, 0xf305, 0x66d0, 0xd989, 0x181c, 0xbe16, 0x1, 0x1);
        gbc.writeMem(0xd3b5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf305);
        EXPECT(gbc.pc(), 0xd3b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3b5), 0xcb);
        EXPECT(gbc.readMem(0xd3b6), 0xf3);
        // CB F3 031C
        gbc.setState(0xd375, 0x8f84, 0xe700, 0xcc67, 0x2e2c, 0xb3a3, 0x0, 0x1);
        gbc.writeMem(0xd375, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8f84);
        EXPECT(gbc.pc(), 0xd377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd375), 0xcb);
        EXPECT(gbc.readMem(0xd376), 0xf3);
        // CB F3 031D
        gbc.setState(0xbd58, 0x33d3, 0x1eb0, 0xed26, 0x8983, 0xfdc7, 0x0, 0x1);
        gbc.writeMem(0xbd58, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x33d3);
        EXPECT(gbc.pc(), 0xbd5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd58), 0xcb);
        EXPECT(gbc.readMem(0xbd59), 0xf3);
        // CB F3 031E
        gbc.setState(0xeedf, 0x8d41, 0x6600, 0x30be, 0x8cb0, 0x2218, 0x0, 0x0);
        gbc.writeMem(0xeedf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8d41);
        EXPECT(gbc.pc(), 0xeee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeedf), 0xcb);
        EXPECT(gbc.readMem(0xeee0), 0xf3);
        // CB F3 031F
        gbc.setState(0x7080, 0xe7d2, 0x2890, 0xb525, 0x6486, 0xdc5a, 0x1, 0x0);
        gbc.writeMem(0x7080, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe7d2);
        EXPECT(gbc.pc(), 0x7082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0320
        gbc.setState(0x2c41, 0x99b3, 0x8b20, 0xd677, 0xc9b8, 0xa5af, 0x0, 0x1);
        gbc.writeMem(0x2c41, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x99b3);
        EXPECT(gbc.pc(), 0x2c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0321
        gbc.setState(0x5a8a, 0x5c66, 0x5050, 0x9202, 0x421, 0xa75b, 0x0, 0x1);
        gbc.writeMem(0x5a8a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5c66);
        EXPECT(gbc.pc(), 0x5a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0322
        gbc.setState(0xe09, 0x6a0d, 0x7d70, 0x13b9, 0xf5c0, 0x283a, 0x1, 0x1);
        gbc.writeMem(0xe09, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6a0d);
        EXPECT(gbc.pc(), 0xe0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0323
        gbc.setState(0xe3d7, 0xac12, 0xef80, 0x2f2c, 0x9b1c, 0x9b33, 0x1, 0x1);
        gbc.writeMem(0xe3d7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xac12);
        EXPECT(gbc.pc(), 0xe3d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d7), 0xcb);
        EXPECT(gbc.readMem(0xe3d8), 0xf3);
        // CB F3 0324
        gbc.setState(0x9865, 0xa743, 0xafc0, 0x447c, 0xd6a6, 0x1347, 0x0, 0x0);
        gbc.writeMem(0x9865, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa743);
        EXPECT(gbc.pc(), 0x9867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9865), 0xcb);
        EXPECT(gbc.readMem(0x9866), 0xf3);
        // CB F3 0325
        gbc.setState(0xe829, 0x55d0, 0x8b40, 0xc862, 0xf0db, 0x4dc4, 0x0, 0x1);
        gbc.writeMem(0xe829, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x55d0);
        EXPECT(gbc.pc(), 0xe82b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe829), 0xcb);
        EXPECT(gbc.readMem(0xe82a), 0xf3);
        // CB F3 0326
        gbc.setState(0x5ca4, 0x5d74, 0x7240, 0x7605, 0xef12, 0xb495, 0x1, 0x0);
        gbc.writeMem(0x5ca4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5d74);
        EXPECT(gbc.pc(), 0x5ca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0327
        gbc.setState(0x978b, 0x92d5, 0x9eb0, 0xe753, 0xfc68, 0x4e85, 0x1, 0x0);
        gbc.writeMem(0x978b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x92d5);
        EXPECT(gbc.pc(), 0x978d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978b), 0xcb);
        EXPECT(gbc.readMem(0x978c), 0xf3);
        // CB F3 0328
        gbc.setState(0x2add, 0xcdf9, 0xb460, 0xa680, 0x29f9, 0x1352, 0x0, 0x0);
        gbc.writeMem(0x2add, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcdf9);
        EXPECT(gbc.pc(), 0x2adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0329
        gbc.setState(0xde35, 0x98dc, 0x93d0, 0x8705, 0x5e9a, 0xb034, 0x0, 0x1);
        gbc.writeMem(0xde35, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x98dc);
        EXPECT(gbc.pc(), 0xde37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde35), 0xcb);
        EXPECT(gbc.readMem(0xde36), 0xf3);
        // CB F3 032A
        gbc.setState(0x3829, 0xc3c1, 0x20c0, 0xf584, 0x46fc, 0x1d65, 0x0, 0x0);
        gbc.writeMem(0x3829, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc3c1);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 032B
        gbc.setState(0x3f, 0xc16, 0xb3d0, 0xd8e0, 0xea75, 0x186f, 0x1, 0x0);
        gbc.writeMem(0x3f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc16);
        EXPECT(gbc.pc(), 0x41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 032C
        gbc.setState(0xe5d3, 0xa5ba, 0xd550, 0x8b59, 0x7730, 0xe5e8, 0x0, 0x1);
        gbc.writeMem(0xe5d3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa5ba);
        EXPECT(gbc.pc(), 0xe5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d3), 0xcb);
        EXPECT(gbc.readMem(0xe5d4), 0xf3);
        // CB F3 032E
        gbc.setState(0x9a39, 0x4b3a, 0x5f0, 0x5373, 0x300f, 0xe600, 0x0, 0x1);
        gbc.writeMem(0x9a39, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4b3a);
        EXPECT(gbc.pc(), 0x9a3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a39), 0xcb);
        EXPECT(gbc.readMem(0x9a3a), 0xf3);
        // CB F3 032F
        gbc.setState(0xce0d, 0xbd05, 0xda80, 0xb2ee, 0xdedf, 0xfac5, 0x1, 0x1);
        gbc.writeMem(0xce0d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbd05);
        EXPECT(gbc.pc(), 0xce0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce0d), 0xcb);
        EXPECT(gbc.readMem(0xce0e), 0xf3);
        // CB F3 0330
        gbc.setState(0x4721, 0x349e, 0xe10, 0x558c, 0xb99, 0x2199, 0x1, 0x0);
        gbc.writeMem(0x4721, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x349e);
        EXPECT(gbc.pc(), 0x4723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0331
        gbc.setState(0x658, 0x5f8d, 0x1770, 0xa371, 0x260, 0xeb7e, 0x1, 0x0);
        gbc.writeMem(0x658, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5f8d);
        EXPECT(gbc.pc(), 0x65a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0332
        gbc.setState(0x5c3a, 0xec9c, 0xa8b0, 0x9083, 0x52ec, 0xa800, 0x1, 0x0);
        gbc.writeMem(0x5c3a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xec9c);
        EXPECT(gbc.pc(), 0x5c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0333
        gbc.setState(0xad02, 0x58b5, 0xbcc0, 0xfe7f, 0xef61, 0x8f3e, 0x0, 0x1);
        gbc.writeMem(0xad02, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x58b5);
        EXPECT(gbc.pc(), 0xad04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad02), 0xcb);
        EXPECT(gbc.readMem(0xad03), 0xf3);
        // CB F3 0334
        gbc.setState(0x3827, 0x943c, 0xc410, 0x62d2, 0x722b, 0x895d, 0x0, 0x1);
        gbc.writeMem(0x3827, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x943c);
        EXPECT(gbc.pc(), 0x3829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0335
        gbc.setState(0x356b, 0x1836, 0x3450, 0xea8a, 0x7480, 0xdbfa, 0x0, 0x1);
        gbc.writeMem(0x356b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1836);
        EXPECT(gbc.pc(), 0x356d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0336
        gbc.setState(0xf6e, 0xe1c9, 0x8b0, 0xf9a4, 0x10d2, 0xf100, 0x0, 0x0);
        gbc.writeMem(0xf6e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe1c9);
        EXPECT(gbc.pc(), 0xf70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0337
        gbc.setState(0xeed3, 0x212e, 0xc5b0, 0x1f41, 0xc448, 0xdaba, 0x0, 0x1);
        gbc.writeMem(0xeed3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x212e);
        EXPECT(gbc.pc(), 0xeed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed3), 0xcb);
        EXPECT(gbc.readMem(0xeed4), 0xf3);
        // CB F3 0338
        gbc.setState(0xc386, 0xded9, 0xf2a0, 0xb47, 0x8692, 0xd64e, 0x1, 0x0);
        gbc.writeMem(0xc386, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xded9);
        EXPECT(gbc.pc(), 0xc388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc386), 0xcb);
        EXPECT(gbc.readMem(0xc387), 0xf3);
        // CB F3 0339
        gbc.setState(0xec24, 0xd12e, 0xcd80, 0x7f1c, 0xaebf, 0x266, 0x0, 0x1);
        gbc.writeMem(0xec24, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd12e);
        EXPECT(gbc.pc(), 0xec26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec24), 0xcb);
        EXPECT(gbc.readMem(0xec25), 0xf3);
        // CB F3 033A
        gbc.setState(0x940a, 0x67d3, 0x73d0, 0x3300, 0xb99e, 0x920c, 0x0, 0x0);
        gbc.writeMem(0x940a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x67d3);
        EXPECT(gbc.pc(), 0x940c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940a), 0xcb);
        EXPECT(gbc.readMem(0x940b), 0xf3);
        // CB F3 033B
        gbc.setState(0x739c, 0x613e, 0x91d0, 0xd700, 0x46f3, 0x21fd, 0x0, 0x0);
        gbc.writeMem(0x739c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x613e);
        EXPECT(gbc.pc(), 0x739e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 033C
        gbc.setState(0x9cae, 0x36c, 0x78b0, 0xaecd, 0xd4c1, 0x4e0b, 0x1, 0x1);
        gbc.writeMem(0x9cae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x36c);
        EXPECT(gbc.pc(), 0x9cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cae), 0xcb);
        EXPECT(gbc.readMem(0x9caf), 0xf3);
        // CB F3 033D
        gbc.setState(0xe0c5, 0x9653, 0xce60, 0xf61b, 0xfe9c, 0x392c, 0x1, 0x0);
        gbc.writeMem(0xe0c5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9653);
        EXPECT(gbc.pc(), 0xe0c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c5), 0xcb);
        EXPECT(gbc.readMem(0xe0c6), 0xf3);
        // CB F3 033E
        gbc.setState(0xbb2d, 0x807c, 0x8ae0, 0x79b4, 0x999f, 0xff70, 0x0, 0x1);
        gbc.writeMem(0xbb2d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x807c);
        EXPECT(gbc.pc(), 0xbb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2d), 0xcb);
        EXPECT(gbc.readMem(0xbb2e), 0xf3);
        // CB F3 033F
        gbc.setState(0x822c, 0x9441, 0xbe40, 0xda62, 0x399a, 0x9ea6, 0x0, 0x0);
        gbc.writeMem(0x822c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9441);
        EXPECT(gbc.pc(), 0x822e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x822c), 0xcb);
        EXPECT(gbc.readMem(0x822d), 0xf3);
        // CB F3 0340
        gbc.setState(0x26ef, 0x6511, 0x9350, 0x8f22, 0xa19a, 0x4738, 0x1, 0x1);
        gbc.writeMem(0x26ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6511);
        EXPECT(gbc.pc(), 0x26f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0341
        gbc.setState(0x2730, 0xa140, 0x90, 0x3247, 0x359a, 0x5ca9, 0x0, 0x1);
        gbc.writeMem(0x2730, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa140);
        EXPECT(gbc.pc(), 0x2732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0342
        gbc.setState(0x6f31, 0x92ce, 0x28f0, 0x401b, 0xf1b7, 0x38a, 0x0, 0x0);
        gbc.writeMem(0x6f31, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x92ce);
        EXPECT(gbc.pc(), 0x6f33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0343
        gbc.setState(0xa628, 0xebf4, 0x7430, 0x6358, 0x808d, 0x5732, 0x1, 0x1);
        gbc.writeMem(0xa628, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xebf4);
        EXPECT(gbc.pc(), 0xa62a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa628), 0xcb);
        EXPECT(gbc.readMem(0xa629), 0xf3);
        // CB F3 0344
        gbc.setState(0x95bf, 0x8956, 0xbfd0, 0x3c8e, 0x3889, 0xfb77, 0x0, 0x0);
        gbc.writeMem(0x95bf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8956);
        EXPECT(gbc.pc(), 0x95c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95bf), 0xcb);
        EXPECT(gbc.readMem(0x95c0), 0xf3);
        // CB F3 0345
        gbc.setState(0xb31c, 0x47ef, 0xe870, 0xe972, 0x4e9e, 0xf0ac, 0x0, 0x1);
        gbc.writeMem(0xb31c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x47ef);
        EXPECT(gbc.pc(), 0xb31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb31c), 0xcb);
        EXPECT(gbc.readMem(0xb31d), 0xf3);
        // CB F3 0346
        gbc.setState(0x134f, 0xda75, 0x55f0, 0x5254, 0xec63, 0xdd4d, 0x1, 0x0);
        gbc.writeMem(0x134f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xda75);
        EXPECT(gbc.pc(), 0x1351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0347
        gbc.setState(0x201e, 0x1ab1, 0x6300, 0x65d, 0x3904, 0x9496, 0x0, 0x1);
        gbc.writeMem(0x201e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1ab1);
        EXPECT(gbc.pc(), 0x2020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0348
        gbc.setState(0x1825, 0x204c, 0x7990, 0xa26, 0xbe35, 0x1892, 0x0, 0x1);
        gbc.writeMem(0x1825, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x204c);
        EXPECT(gbc.pc(), 0x1827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0349
        gbc.setState(0x3aa7, 0xd737, 0xbb40, 0x522f, 0xc69, 0x5138, 0x1, 0x1);
        gbc.writeMem(0x3aa7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd737);
        EXPECT(gbc.pc(), 0x3aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 034A
        gbc.setState(0x1d, 0x5b3e, 0x67b0, 0xde82, 0x605, 0x33d6, 0x0, 0x1);
        gbc.writeMem(0x1d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5b3e);
        EXPECT(gbc.pc(), 0x1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 034C
        gbc.setState(0x5bd0, 0x9d89, 0xeb80, 0x8a6c, 0xdfaa, 0xb44, 0x1, 0x1);
        gbc.writeMem(0x5bd0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9d89);
        EXPECT(gbc.pc(), 0x5bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 034D
        gbc.setState(0x332c, 0xcf3, 0x3b80, 0xe0da, 0x5ba9, 0x2be6, 0x0, 0x1);
        gbc.writeMem(0x332c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xcf3);
        EXPECT(gbc.pc(), 0x332e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 034E
        gbc.setState(0x4e11, 0x2feb, 0xb8f0, 0x9f5b, 0x8f13, 0xd6cc, 0x0, 0x1);
        gbc.writeMem(0x4e11, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2feb);
        EXPECT(gbc.pc(), 0x4e13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 034F
        gbc.setState(0x52c3, 0x82c2, 0xedc0, 0x594a, 0xa665, 0x2d60, 0x1, 0x0);
        gbc.writeMem(0x52c3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x82c2);
        EXPECT(gbc.pc(), 0x52c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0350
        gbc.setState(0x2bd, 0xd1, 0x2640, 0x7b26, 0x6cfc, 0xdb78, 0x0, 0x1);
        gbc.writeMem(0x2bd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd1);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0351
        gbc.setState(0x74d7, 0xbe10, 0x130, 0xf57b, 0x5bc, 0x6f96, 0x0, 0x1);
        gbc.writeMem(0x74d7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xbe10);
        EXPECT(gbc.pc(), 0x74d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0352
        gbc.setState(0x3f8c, 0xd971, 0x8350, 0x45f8, 0xe439, 0x2026, 0x0, 0x0);
        gbc.writeMem(0x3f8c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd971);
        EXPECT(gbc.pc(), 0x3f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0353
        gbc.setState(0x6259, 0x173d, 0x8f70, 0x94aa, 0xc9aa, 0xf656, 0x0, 0x1);
        gbc.writeMem(0x6259, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x173d);
        EXPECT(gbc.pc(), 0x625b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0354
        gbc.setState(0x8a75, 0x151e, 0x7e00, 0xdee8, 0xf08d, 0x80c2, 0x1, 0x1);
        gbc.writeMem(0x8a75, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x151e);
        EXPECT(gbc.pc(), 0x8a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a75), 0xcb);
        EXPECT(gbc.readMem(0x8a76), 0xf3);
        // CB F3 0355
        gbc.setState(0x1bc5, 0xa2eb, 0x3850, 0x95d9, 0x3218, 0xf749, 0x0, 0x0);
        gbc.writeMem(0x1bc5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa2eb);
        EXPECT(gbc.pc(), 0x1bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0356
        gbc.setState(0x77d3, 0x7cf1, 0xf1c0, 0xe373, 0x13a2, 0x6b48, 0x1, 0x0);
        gbc.writeMem(0x77d3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7cf1);
        EXPECT(gbc.pc(), 0x77d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0357
        gbc.setState(0x4915, 0x776d, 0x280, 0x44e, 0xe3f1, 0x6cc4, 0x0, 0x0);
        gbc.writeMem(0x4915, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x776d);
        EXPECT(gbc.pc(), 0x4917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0358
        gbc.setState(0xdfa5, 0x141f, 0x1d20, 0x2ed9, 0xbd60, 0xbab3, 0x1, 0x1);
        gbc.writeMem(0xdfa5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x141f);
        EXPECT(gbc.pc(), 0xdfa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfa5), 0xcb);
        EXPECT(gbc.readMem(0xdfa6), 0xf3);
        // CB F3 0359
        gbc.setState(0x6d7a, 0x4228, 0x2320, 0x6598, 0x77d4, 0x8c52, 0x1, 0x0);
        gbc.writeMem(0x6d7a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4228);
        EXPECT(gbc.pc(), 0x6d7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 035A
        gbc.setState(0x16ef, 0xa04e, 0xbff0, 0x45cb, 0x95ba, 0x4795, 0x0, 0x1);
        gbc.writeMem(0x16ef, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa04e);
        EXPECT(gbc.pc(), 0x16f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 035B
        gbc.setState(0xa7a0, 0x8852, 0xc780, 0xda4b, 0xc12c, 0x30f4, 0x1, 0x0);
        gbc.writeMem(0xa7a0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8852);
        EXPECT(gbc.pc(), 0xa7a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a0), 0xcb);
        EXPECT(gbc.readMem(0xa7a1), 0xf3);
        // CB F3 035C
        gbc.setState(0xaa99, 0xf152, 0x93a0, 0xa662, 0x868, 0xb515, 0x0, 0x0);
        gbc.writeMem(0xaa99, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf152);
        EXPECT(gbc.pc(), 0xaa9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa99), 0xcb);
        EXPECT(gbc.readMem(0xaa9a), 0xf3);
        // CB F3 035D
        gbc.setState(0x79bd, 0x3b7, 0xaba0, 0x22da, 0xda82, 0x3ddb, 0x0, 0x1);
        gbc.writeMem(0x79bd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3b7);
        EXPECT(gbc.pc(), 0x79bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 035E
        gbc.setState(0x31ca, 0x1f2d, 0x1e20, 0xd6ef, 0xedf2, 0x3693, 0x0, 0x1);
        gbc.writeMem(0x31ca, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1f2d);
        EXPECT(gbc.pc(), 0x31cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 035F
        gbc.setState(0x76e, 0x2188, 0x9a20, 0xb6ce, 0x5616, 0x894a, 0x1, 0x1);
        gbc.writeMem(0x76e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2188);
        EXPECT(gbc.pc(), 0x770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0360
        gbc.setState(0x1004, 0x8ec, 0xaaf0, 0x766, 0x6529, 0xad7, 0x0, 0x1);
        gbc.writeMem(0x1004, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8ec);
        EXPECT(gbc.pc(), 0x1006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0361
        gbc.setState(0x86bc, 0xf782, 0x66c0, 0xe950, 0x67bb, 0x6709, 0x0, 0x0);
        gbc.writeMem(0x86bc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf782);
        EXPECT(gbc.pc(), 0x86be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86bc), 0xcb);
        EXPECT(gbc.readMem(0x86bd), 0xf3);
        // CB F3 0362
        gbc.setState(0x10ce, 0x7ef5, 0x6e30, 0xf825, 0x2a6c, 0x98fc, 0x0, 0x1);
        gbc.writeMem(0x10ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7ef5);
        EXPECT(gbc.pc(), 0x10d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0363
        gbc.setState(0x7db1, 0xb372, 0xf3e0, 0x83ee, 0xcd82, 0x225, 0x0, 0x1);
        gbc.writeMem(0x7db1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb372);
        EXPECT(gbc.pc(), 0x7db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0364
        gbc.setState(0xe9d8, 0x1da7, 0x89c0, 0x14d2, 0xb02e, 0x6a3a, 0x0, 0x1);
        gbc.writeMem(0xe9d8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1da7);
        EXPECT(gbc.pc(), 0xe9da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d8), 0xcb);
        EXPECT(gbc.readMem(0xe9d9), 0xf3);
        // CB F3 0365
        gbc.setState(0x8f75, 0x7c19, 0x6fd0, 0x17ce, 0x1d94, 0x1e55, 0x0, 0x0);
        gbc.writeMem(0x8f75, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7c19);
        EXPECT(gbc.pc(), 0x8f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f75), 0xcb);
        EXPECT(gbc.readMem(0x8f76), 0xf3);
        // CB F3 0366
        gbc.setState(0x31c, 0x89a2, 0xc220, 0x9c6a, 0x79eb, 0x531e, 0x1, 0x1);
        gbc.writeMem(0x31c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x89a2);
        EXPECT(gbc.pc(), 0x31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0367
        gbc.setState(0x2e3b, 0xbd57, 0x7b10, 0x2b6, 0x21be, 0x3e0d, 0x0, 0x1);
        gbc.writeMem(0x2e3b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xbd57);
        EXPECT(gbc.pc(), 0x2e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0368
        gbc.setState(0x1a45, 0xf11, 0xf490, 0x5e3e, 0x6d97, 0x9a04, 0x1, 0x1);
        gbc.writeMem(0x1a45, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf11);
        EXPECT(gbc.pc(), 0x1a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0369
        gbc.setState(0xbe40, 0x3620, 0x7ae0, 0x3244, 0xf99e, 0xb00f, 0x1, 0x1);
        gbc.writeMem(0xbe40, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3620);
        EXPECT(gbc.pc(), 0xbe42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe40), 0xcb);
        EXPECT(gbc.readMem(0xbe41), 0xf3);
        // CB F3 036A
        gbc.setState(0x3ed0, 0x4dd2, 0xe800, 0x3cca, 0x8b63, 0x348f, 0x0, 0x0);
        gbc.writeMem(0x3ed0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4dd2);
        EXPECT(gbc.pc(), 0x3ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 036B
        gbc.setState(0x6a0a, 0x5f3e, 0x8510, 0x8903, 0x86de, 0x16c9, 0x1, 0x0);
        gbc.writeMem(0x6a0a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5f3e);
        EXPECT(gbc.pc(), 0x6a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 036C
        gbc.setState(0x81c1, 0xe640, 0x4b40, 0x6e79, 0x65c5, 0x2f71, 0x0, 0x1);
        gbc.writeMem(0x81c1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe640);
        EXPECT(gbc.pc(), 0x81c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c1), 0xcb);
        EXPECT(gbc.readMem(0x81c2), 0xf3);
        // CB F3 036D
        gbc.setState(0x2825, 0x9770, 0x66a0, 0xa4ab, 0x22e1, 0xdb15, 0x0, 0x0);
        gbc.writeMem(0x2825, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9770);
        EXPECT(gbc.pc(), 0x2827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 036E
        gbc.setState(0xba7, 0x9a89, 0xe2a0, 0xfbd1, 0xea99, 0xe22e, 0x0, 0x0);
        gbc.writeMem(0xba7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9a89);
        EXPECT(gbc.pc(), 0xba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 036F
        gbc.setState(0xed9c, 0x9a91, 0xd5c0, 0xd177, 0x6973, 0x701a, 0x0, 0x1);
        gbc.writeMem(0xed9c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9a91);
        EXPECT(gbc.pc(), 0xed9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9c), 0xcb);
        EXPECT(gbc.readMem(0xed9d), 0xf3);
        // CB F3 0370
        gbc.setState(0x442d, 0x2b2c, 0xeb80, 0xee2e, 0xeae0, 0xb89c, 0x1, 0x1);
        gbc.writeMem(0x442d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2b2c);
        EXPECT(gbc.pc(), 0x442f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0371
        gbc.setState(0x6351, 0xe27, 0xcc90, 0x307e, 0x4cb7, 0xb519, 0x0, 0x0);
        gbc.writeMem(0x6351, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe27);
        EXPECT(gbc.pc(), 0x6353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0372
        gbc.setState(0x625d, 0xd180, 0x7f60, 0x30ec, 0xda36, 0xf4, 0x1, 0x0);
        gbc.writeMem(0x625d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd180);
        EXPECT(gbc.pc(), 0x625f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0373
        gbc.setState(0x8c35, 0x90fa, 0xac40, 0x7ac, 0x2e9a, 0xba79, 0x0, 0x1);
        gbc.writeMem(0x8c35, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x90fa);
        EXPECT(gbc.pc(), 0x8c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c35), 0xcb);
        EXPECT(gbc.readMem(0x8c36), 0xf3);
        // CB F3 0374
        gbc.setState(0x5faf, 0x4a52, 0xadd0, 0x7710, 0x95ae, 0x44c0, 0x0, 0x0);
        gbc.writeMem(0x5faf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4a52);
        EXPECT(gbc.pc(), 0x5fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0375
        gbc.setState(0x7490, 0x43ea, 0xbf0, 0xf8f3, 0x3784, 0x13b8, 0x0, 0x0);
        gbc.writeMem(0x7490, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x43ea);
        EXPECT(gbc.pc(), 0x7492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0376
        gbc.setState(0x9cde, 0x6b81, 0x7bc0, 0xe2c3, 0x6ee5, 0xedcd, 0x0, 0x1);
        gbc.writeMem(0x9cde, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6b81);
        EXPECT(gbc.pc(), 0x9ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cde), 0xcb);
        EXPECT(gbc.readMem(0x9cdf), 0xf3);
        // CB F3 0377
        gbc.setState(0xd634, 0xaeae, 0x4890, 0x94ff, 0xe858, 0x41bb, 0x0, 0x0);
        gbc.writeMem(0xd634, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xaeae);
        EXPECT(gbc.pc(), 0xd636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd634), 0xcb);
        EXPECT(gbc.readMem(0xd635), 0xf3);
        // CB F3 0378
        gbc.setState(0x5ffc, 0xb674, 0x2570, 0x6e3b, 0x1357, 0xcb4, 0x1, 0x0);
        gbc.writeMem(0x5ffc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb674);
        EXPECT(gbc.pc(), 0x5ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0379
        gbc.setState(0x4502, 0x915b, 0xea20, 0x6a6d, 0x657c, 0x32dd, 0x0, 0x0);
        gbc.writeMem(0x4502, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x915b);
        EXPECT(gbc.pc(), 0x4504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 037A
        gbc.setState(0x297a, 0x505a, 0x9bf0, 0xa13f, 0xbe1c, 0x7ecf, 0x0, 0x0);
        gbc.writeMem(0x297a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x505a);
        EXPECT(gbc.pc(), 0x297c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 037B
        gbc.setState(0x5b29, 0xffed, 0xfa30, 0x1a06, 0x6126, 0xae45, 0x0, 0x1);
        gbc.writeMem(0x5b29, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xffed);
        EXPECT(gbc.pc(), 0x5b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 037C
        gbc.setState(0x8ad, 0x31b, 0x7bf0, 0xa45f, 0xae64, 0x1cfc, 0x0, 0x0);
        gbc.writeMem(0x8ad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x31b);
        EXPECT(gbc.pc(), 0x8af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 037E
        gbc.setState(0xb030, 0x1719, 0x6ac0, 0xf4a, 0xa101, 0x1761, 0x1, 0x0);
        gbc.writeMem(0xb030, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1719);
        EXPECT(gbc.pc(), 0xb032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb030), 0xcb);
        EXPECT(gbc.readMem(0xb031), 0xf3);
        // CB F3 037F
        gbc.setState(0x7ecf, 0x245b, 0x66d0, 0x6822, 0x7e58, 0x4a2, 0x0, 0x0);
        gbc.writeMem(0x7ecf, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x245b);
        EXPECT(gbc.pc(), 0x7ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0380
        gbc.setState(0xe221, 0x259c, 0x4c10, 0x8e86, 0xcf59, 0xc70a, 0x0, 0x1);
        gbc.writeMem(0xe221, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x259c);
        EXPECT(gbc.pc(), 0xe223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe221), 0xcb);
        EXPECT(gbc.readMem(0xe222), 0xf3);
        // CB F3 0381
        gbc.setState(0x14d8, 0x7554, 0x2dd0, 0xf990, 0xc211, 0x6088, 0x0, 0x0);
        gbc.writeMem(0x14d8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7554);
        EXPECT(gbc.pc(), 0x14da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 0382
        gbc.setState(0xbb59, 0x83d7, 0x4030, 0xb07c, 0x1dc5, 0x5992, 0x1, 0x1);
        gbc.writeMem(0xbb59, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x83d7);
        EXPECT(gbc.pc(), 0xbb5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb59), 0xcb);
        EXPECT(gbc.readMem(0xbb5a), 0xf3);
        // CB F3 0383
        gbc.setState(0xb352, 0xe5ab, 0xe3f0, 0xa687, 0x24d3, 0x8033, 0x1, 0x0);
        gbc.writeMem(0xb352, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe5ab);
        EXPECT(gbc.pc(), 0xb354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb352), 0xcb);
        EXPECT(gbc.readMem(0xb353), 0xf3);
        // CB F3 0384
        gbc.setState(0xbea6, 0xee1e, 0xa410, 0x76db, 0xbf72, 0xad80, 0x0, 0x0);
        gbc.writeMem(0xbea6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xee1e);
        EXPECT(gbc.pc(), 0xbea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbea6), 0xcb);
        EXPECT(gbc.readMem(0xbea7), 0xf3);
        // CB F3 0385
        gbc.setState(0xc7d0, 0x2493, 0xf680, 0x9464, 0xda5c, 0x42d5, 0x1, 0x1);
        gbc.writeMem(0xc7d0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2493);
        EXPECT(gbc.pc(), 0xc7d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d0), 0xcb);
        EXPECT(gbc.readMem(0xc7d1), 0xf3);
        // CB F3 0386
        gbc.setState(0x6fcb, 0x1a30, 0x9140, 0x8ea9, 0xa80d, 0x3a11, 0x1, 0x0);
        gbc.writeMem(0x6fcb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1a30);
        EXPECT(gbc.pc(), 0x6fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0387
        gbc.setState(0xda24, 0x1fa9, 0x7830, 0x2fbb, 0x8a15, 0xa83c, 0x1, 0x0);
        gbc.writeMem(0xda24, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1fa9);
        EXPECT(gbc.pc(), 0xda26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda24), 0xcb);
        EXPECT(gbc.readMem(0xda25), 0xf3);
        // CB F3 0388
        gbc.setState(0x9b1c, 0x4896, 0xa9e0, 0xc411, 0x9cc2, 0x63c6, 0x1, 0x0);
        gbc.writeMem(0x9b1c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4896);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0xf3);
        // CB F3 0389
        gbc.setState(0x69fc, 0x906f, 0x4750, 0xaad6, 0xa4aa, 0x32e5, 0x1, 0x1);
        gbc.writeMem(0x69fc, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x906f);
        EXPECT(gbc.pc(), 0x69fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 038A
        gbc.setState(0xb1be, 0xa3fb, 0x4400, 0x52af, 0xfae3, 0xef62, 0x0, 0x1);
        gbc.writeMem(0xb1be, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa3fb);
        EXPECT(gbc.pc(), 0xb1c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1be), 0xcb);
        EXPECT(gbc.readMem(0xb1bf), 0xf3);
        // CB F3 038B
        gbc.setState(0x631f, 0xba52, 0x22e0, 0x3cba, 0x123e, 0x3ae4, 0x1, 0x0);
        gbc.writeMem(0x631f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xba52);
        EXPECT(gbc.pc(), 0x6321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 038C
        gbc.setState(0x3615, 0x4f6c, 0xf550, 0xe9b1, 0xf935, 0x70e2, 0x1, 0x0);
        gbc.writeMem(0x3615, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4f6c);
        EXPECT(gbc.pc(), 0x3617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 038D
        gbc.setState(0x4644, 0xa7b1, 0xcd30, 0xb710, 0x8090, 0x1cd9, 0x0, 0x1);
        gbc.writeMem(0x4644, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa7b1);
        EXPECT(gbc.pc(), 0x4646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 038E
        gbc.setState(0xb8eb, 0x47c7, 0x6c40, 0x1197, 0x50d0, 0xb270, 0x1, 0x0);
        gbc.writeMem(0xb8eb, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x47c7);
        EXPECT(gbc.pc(), 0xb8ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8eb), 0xcb);
        EXPECT(gbc.readMem(0xb8ec), 0xf3);
        // CB F3 038F
        gbc.setState(0xaf19, 0x6bb, 0xba0, 0x4089, 0xadd4, 0x7ee4, 0x0, 0x1);
        gbc.writeMem(0xaf19, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6bb);
        EXPECT(gbc.pc(), 0xaf1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf19), 0xcb);
        EXPECT(gbc.readMem(0xaf1a), 0xf3);
        // CB F3 0390
        gbc.setState(0xa401, 0xc17e, 0xabb0, 0x9ec1, 0x559c, 0x4205, 0x1, 0x0);
        gbc.writeMem(0xa401, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc17e);
        EXPECT(gbc.pc(), 0xa403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa401), 0xcb);
        EXPECT(gbc.readMem(0xa402), 0xf3);
        // CB F3 0391
        gbc.setState(0xd13e, 0xdd65, 0x9a70, 0xff64, 0xf0df, 0x9eb8, 0x1, 0x1);
        gbc.writeMem(0xd13e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdd65);
        EXPECT(gbc.pc(), 0xd140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13e), 0xcb);
        EXPECT(gbc.readMem(0xd13f), 0xf3);
        // CB F3 0392
        gbc.setState(0x983e, 0x1105, 0xa020, 0xdffb, 0x5608, 0x65fe, 0x0, 0x1);
        gbc.writeMem(0x983e, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1105);
        EXPECT(gbc.pc(), 0x9840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983e), 0xcb);
        EXPECT(gbc.readMem(0x983f), 0xf3);
        // CB F3 0393
        gbc.setState(0xee41, 0x3998, 0xe10, 0x3166, 0x69fa, 0x32f9, 0x1, 0x1);
        gbc.writeMem(0xee41, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3998);
        EXPECT(gbc.pc(), 0xee43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee41), 0xcb);
        EXPECT(gbc.readMem(0xee42), 0xf3);
        // CB F3 0394
        gbc.setState(0xa0e3, 0xb624, 0xf450, 0x882b, 0x9628, 0x6af, 0x0, 0x0);
        gbc.writeMem(0xa0e3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb624);
        EXPECT(gbc.pc(), 0xa0e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e3), 0xcb);
        EXPECT(gbc.readMem(0xa0e4), 0xf3);
        // CB F3 0395
        gbc.setState(0x249b, 0xe4a5, 0xebc0, 0x3f70, 0x75cc, 0xf32f, 0x1, 0x1);
        gbc.writeMem(0x249b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe4a5);
        EXPECT(gbc.pc(), 0x249d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 0396
        gbc.setState(0xb6fd, 0x375b, 0x84d0, 0x5be8, 0x6f92, 0x6165, 0x1, 0x0);
        gbc.writeMem(0xb6fd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x375b);
        EXPECT(gbc.pc(), 0xb6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6fd), 0xcb);
        EXPECT(gbc.readMem(0xb6fe), 0xf3);
        // CB F3 0397
        gbc.setState(0x9f13, 0x826b, 0x8840, 0xe463, 0x7bf0, 0xdba4, 0x1, 0x0);
        gbc.writeMem(0x9f13, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x826b);
        EXPECT(gbc.pc(), 0x9f15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f13), 0xcb);
        EXPECT(gbc.readMem(0x9f14), 0xf3);
        // CB F3 0398
        gbc.setState(0x9340, 0x4a10, 0xb700, 0x8e88, 0x8f75, 0x4195, 0x0, 0x0);
        gbc.writeMem(0x9340, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0x9342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9340), 0xcb);
        EXPECT(gbc.readMem(0x9341), 0xf3);
        // CB F3 0399
        gbc.setState(0x6ed7, 0xb1c, 0x2de0, 0x2036, 0x4477, 0x8b1, 0x1, 0x0);
        gbc.writeMem(0x6ed7, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb1c);
        EXPECT(gbc.pc(), 0x6ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 039A
        gbc.setState(0xfb1, 0xa4db, 0xbc50, 0xf59e, 0x9c65, 0x9e60, 0x1, 0x1);
        gbc.writeMem(0xfb1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa4db);
        EXPECT(gbc.pc(), 0xfb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 039B
        gbc.setState(0x665a, 0xce2d, 0xe1d0, 0x8a1f, 0x9fdb, 0xa4b0, 0x0, 0x1);
        gbc.writeMem(0x665a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xce2d);
        EXPECT(gbc.pc(), 0x665c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 039C
        gbc.setState(0x6bb9, 0x2c0e, 0xb740, 0xbdf2, 0x287b, 0x15fb, 0x0, 0x1);
        gbc.writeMem(0x6bb9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2c0e);
        EXPECT(gbc.pc(), 0x6bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 039D
        gbc.setState(0xb3b1, 0x79f3, 0x610, 0xb19d, 0xc9e6, 0x3a0e, 0x1, 0x0);
        gbc.writeMem(0xb3b1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x79f3);
        EXPECT(gbc.pc(), 0xb3b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3b1), 0xcb);
        EXPECT(gbc.readMem(0xb3b2), 0xf3);
        // CB F3 039E
        gbc.setState(0xd80a, 0x40a6, 0x4580, 0x36d0, 0xf520, 0x5a0c, 0x0, 0x0);
        gbc.writeMem(0xd80a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x40a6);
        EXPECT(gbc.pc(), 0xd80c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd80a), 0xcb);
        EXPECT(gbc.readMem(0xd80b), 0xf3);
        // CB F3 039F
        gbc.setState(0xc15f, 0x1b6d, 0xd590, 0xfd2, 0x31f2, 0xfdd3, 0x1, 0x1);
        gbc.writeMem(0xc15f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1b6d);
        EXPECT(gbc.pc(), 0xc161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc15f), 0xcb);
        EXPECT(gbc.readMem(0xc160), 0xf3);
        // CB F3 03A0
        gbc.setState(0x338, 0x1b22, 0x58f0, 0x4e66, 0x23c5, 0x3362, 0x1, 0x0);
        gbc.writeMem(0x338, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1b22);
        EXPECT(gbc.pc(), 0x33a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03A1
        gbc.setState(0x2d04, 0x6f81, 0x8330, 0xa2b1, 0xb797, 0x7e3b, 0x0, 0x0);
        gbc.writeMem(0x2d04, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6f81);
        EXPECT(gbc.pc(), 0x2d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03A2
        gbc.setState(0xebf4, 0xc20c, 0xc2c0, 0x7df6, 0x86cc, 0xe618, 0x0, 0x1);
        gbc.writeMem(0xebf4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xc20c);
        EXPECT(gbc.pc(), 0xebf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf4), 0xcb);
        EXPECT(gbc.readMem(0xebf5), 0xf3);
        // CB F3 03A3
        gbc.setState(0xe6ce, 0xbb9b, 0x1de0, 0x2232, 0x144c, 0x8deb, 0x1, 0x1);
        gbc.writeMem(0xe6ce, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbb9b);
        EXPECT(gbc.pc(), 0xe6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ce), 0xcb);
        EXPECT(gbc.readMem(0xe6cf), 0xf3);
        // CB F3 03A4
        gbc.setState(0x57e6, 0xa1f4, 0x9130, 0xa250, 0x8619, 0x961b, 0x1, 0x1);
        gbc.writeMem(0x57e6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa1f4);
        EXPECT(gbc.pc(), 0x57e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03A5
        gbc.setState(0x69e1, 0x6a55, 0x2d00, 0x67de, 0x12ba, 0x761e, 0x0, 0x1);
        gbc.writeMem(0x69e1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6a55);
        EXPECT(gbc.pc(), 0x69e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03A6
        gbc.setState(0x66c3, 0xf10a, 0xb380, 0xde61, 0x6905, 0xee25, 0x0, 0x0);
        gbc.writeMem(0x66c3, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf10a);
        EXPECT(gbc.pc(), 0x66c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03A7
        gbc.setState(0xb85c, 0x8d7f, 0x84f0, 0x28, 0x9559, 0x7c48, 0x1, 0x0);
        gbc.writeMem(0xb85c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8d7f);
        EXPECT(gbc.pc(), 0xb85e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85c), 0xcb);
        EXPECT(gbc.readMem(0xb85d), 0xf3);
        // CB F3 03A8
        gbc.setState(0x17c4, 0xa953, 0xf60, 0xf0ac, 0x5f34, 0xc126, 0x1, 0x0);
        gbc.writeMem(0x17c4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa953);
        EXPECT(gbc.pc(), 0x17c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03A9
        gbc.setState(0x5901, 0x753e, 0xafa0, 0x46eb, 0xc6dd, 0x28c7, 0x1, 0x0);
        gbc.writeMem(0x5901, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x753e);
        EXPECT(gbc.pc(), 0x5903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03AA
        gbc.setState(0xb211, 0x8fea, 0xfda0, 0x52ba, 0x2167, 0x3152, 0x0, 0x1);
        gbc.writeMem(0xb211, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8fea);
        EXPECT(gbc.pc(), 0xb213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb211), 0xcb);
        EXPECT(gbc.readMem(0xb212), 0xf3);
        // CB F3 03AC
        gbc.setState(0x615, 0xc7a3, 0x7380, 0x8e3, 0x9b77, 0x8799, 0x1, 0x0);
        gbc.writeMem(0x615, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc7a3);
        EXPECT(gbc.pc(), 0x617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03AD
        gbc.setState(0x6b81, 0xe117, 0x1610, 0xe65c, 0x8ed4, 0x461f, 0x0, 0x0);
        gbc.writeMem(0x6b81, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe117);
        EXPECT(gbc.pc(), 0x6b83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03AE
        gbc.setState(0x7335, 0x565e, 0x2200, 0xce9a, 0x567d, 0x5b19, 0x0, 0x0);
        gbc.writeMem(0x7335, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x565e);
        EXPECT(gbc.pc(), 0x7337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03AF
        gbc.setState(0xb18d, 0xa483, 0x6e70, 0xd29c, 0x1504, 0xd05f, 0x1, 0x1);
        gbc.writeMem(0xb18d, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa483);
        EXPECT(gbc.pc(), 0xb18f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb18d), 0xcb);
        EXPECT(gbc.readMem(0xb18e), 0xf3);
        // CB F3 03B0
        gbc.setState(0x1ff6, 0xf91e, 0x2bf0, 0x2438, 0x2ced, 0x3dfd, 0x1, 0x1);
        gbc.writeMem(0x1ff6, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf91e);
        EXPECT(gbc.pc(), 0x1ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03B2
        gbc.setState(0x72ee, 0x671d, 0x2900, 0x563a, 0xb98f, 0xfc5b, 0x0, 0x1);
        gbc.writeMem(0x72ee, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x671d);
        EXPECT(gbc.pc(), 0x72f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03B3
        gbc.setState(0xeb9b, 0x5bf8, 0x3080, 0xa526, 0xcd52, 0x6b9a, 0x0, 0x0);
        gbc.writeMem(0xeb9b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5bf8);
        EXPECT(gbc.pc(), 0xeb9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb9b), 0xcb);
        EXPECT(gbc.readMem(0xeb9c), 0xf3);
        // CB F3 03B4
        gbc.setState(0x4f46, 0x4767, 0x9e50, 0xda31, 0x3fe, 0xb1d1, 0x0, 0x1);
        gbc.writeMem(0x4f46, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4767);
        EXPECT(gbc.pc(), 0x4f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03B5
        gbc.setState(0xb230, 0x4f30, 0xa8e0, 0xfdb4, 0x1273, 0x1b9a, 0x0, 0x1);
        gbc.writeMem(0xb230, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4f30);
        EXPECT(gbc.pc(), 0xb232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb230), 0xcb);
        EXPECT(gbc.readMem(0xb231), 0xf3);
        // CB F3 03B6
        gbc.setState(0xc49a, 0x60ee, 0x2810, 0x1c0a, 0x5efa, 0x837d, 0x1, 0x0);
        gbc.writeMem(0xc49a, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x60ee);
        EXPECT(gbc.pc(), 0xc49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc49a), 0xcb);
        EXPECT(gbc.readMem(0xc49b), 0xf3);
        // CB F3 03B7
        gbc.setState(0x1c3c, 0x61b8, 0x3ae0, 0x5682, 0xd9b6, 0x504a, 0x0, 0x1);
        gbc.writeMem(0x1c3c, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x61b8);
        EXPECT(gbc.pc(), 0x1c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03B8
        gbc.setState(0x539, 0xd94b, 0xdc60, 0xc443, 0xdf87, 0xb0e0, 0x1, 0x1);
        gbc.writeMem(0x539, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd94b);
        EXPECT(gbc.pc(), 0x53b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03B9
        gbc.setState(0xc529, 0x7d0d, 0x8030, 0x5d73, 0x4ebf, 0x954e, 0x1, 0x0);
        gbc.writeMem(0xc529, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7d0d);
        EXPECT(gbc.pc(), 0xc52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc529), 0xcb);
        EXPECT(gbc.readMem(0xc52a), 0xf3);
        // CB F3 03BA
        gbc.setState(0x2703, 0xb061, 0x8200, 0x664d, 0xdf16, 0xd81e, 0x0, 0x1);
        gbc.writeMem(0x2703, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb061);
        EXPECT(gbc.pc(), 0x2705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03BB
        gbc.setState(0xa1ee, 0x642, 0x210, 0x6a98, 0x7956, 0x15af, 0x0, 0x0);
        gbc.writeMem(0xa1ee, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x642);
        EXPECT(gbc.pc(), 0xa1f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ee), 0xcb);
        EXPECT(gbc.readMem(0xa1ef), 0xf3);
        // CB F3 03BC
        gbc.setState(0xc7df, 0xf5e7, 0xb1f0, 0x97d3, 0x1a4a, 0x4c63, 0x1, 0x0);
        gbc.writeMem(0xc7df, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf5e7);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7df), 0xcb);
        EXPECT(gbc.readMem(0xc7e0), 0xf3);
        // CB F3 03BD
        gbc.setState(0x94ae, 0xd794, 0xc20, 0xf5bb, 0xb881, 0x458, 0x1, 0x1);
        gbc.writeMem(0x94ae, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd794);
        EXPECT(gbc.pc(), 0x94b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ae), 0xcb);
        EXPECT(gbc.readMem(0x94af), 0xf3);
        // CB F3 03BE
        gbc.setState(0x5dea, 0xb98, 0x1fd0, 0xc255, 0xecc0, 0xf8ba, 0x1, 0x1);
        gbc.writeMem(0x5dea, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb98);
        EXPECT(gbc.pc(), 0x5dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03BF
        gbc.setState(0x80c5, 0xe6e, 0xbe70, 0x53c, 0x8a53, 0x6194, 0x1, 0x1);
        gbc.writeMem(0x80c5, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe6e);
        EXPECT(gbc.pc(), 0x80c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c5), 0xcb);
        EXPECT(gbc.readMem(0x80c6), 0xf3);
        // CB F3 03C0
        gbc.setState(0xce90, 0x588d, 0x49d0, 0x1c06, 0xb453, 0x290b, 0x0, 0x0);
        gbc.writeMem(0xce90, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x588d);
        EXPECT(gbc.pc(), 0xce92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce90), 0xcb);
        EXPECT(gbc.readMem(0xce91), 0xf3);
        // CB F3 03C1
        gbc.setState(0x5246, 0x988, 0xc0, 0xe5c3, 0xa271, 0x3c5a, 0x1, 0x1);
        gbc.writeMem(0x5246, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x988);
        EXPECT(gbc.pc(), 0x5248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03C2
        gbc.setState(0x7879, 0x1a31, 0x13b0, 0xc9e9, 0x41d7, 0x543c, 0x0, 0x1);
        gbc.writeMem(0x7879, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1a31);
        EXPECT(gbc.pc(), 0x787b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03C4
        gbc.setState(0x2b05, 0xb0e9, 0xe200, 0xce89, 0x32c9, 0xde7c, 0x0, 0x0);
        gbc.writeMem(0x2b05, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb0e9);
        EXPECT(gbc.pc(), 0x2b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03C5
        gbc.setState(0x931f, 0xb181, 0xe7d0, 0x9e7f, 0xa6d2, 0xa873, 0x1, 0x1);
        gbc.writeMem(0x931f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb181);
        EXPECT(gbc.pc(), 0x9321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931f), 0xcb);
        EXPECT(gbc.readMem(0x9320), 0xf3);
        // CB F3 03C6
        gbc.setState(0xee, 0x2e82, 0x2270, 0xd24c, 0xc378, 0x51d, 0x1, 0x1);
        gbc.writeMem(0xee, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2e82);
        EXPECT(gbc.pc(), 0xf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03C7
        gbc.setState(0xdffa, 0xdde, 0x8990, 0xa7d7, 0x390, 0x755f, 0x1, 0x1);
        gbc.writeMem(0xdffa, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdde);
        EXPECT(gbc.pc(), 0xdffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdffa), 0xcb);
        EXPECT(gbc.readMem(0xdffb), 0xf3);
        // CB F3 03C8
        gbc.setState(0x88f0, 0x6c1f, 0xa520, 0x76c6, 0x135d, 0x2997, 0x1, 0x1);
        gbc.writeMem(0x88f0, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6c1f);
        EXPECT(gbc.pc(), 0x88f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f0), 0xcb);
        EXPECT(gbc.readMem(0x88f1), 0xf3);
        // CB F3 03C9
        gbc.setState(0xb4c1, 0x4dab, 0x1770, 0x865e, 0x2b1f, 0x7d96, 0x0, 0x1);
        gbc.writeMem(0xb4c1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4dab);
        EXPECT(gbc.pc(), 0xb4c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c1), 0xcb);
        EXPECT(gbc.readMem(0xb4c2), 0xf3);
        // CB F3 03CA
        gbc.setState(0xc75, 0x5f54, 0xe930, 0x30bb, 0x3bbe, 0x2132, 0x1, 0x0);
        gbc.writeMem(0xc75, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5f54);
        EXPECT(gbc.pc(), 0xc77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03CB
        gbc.setState(0x373f, 0xc316, 0x7200, 0xcf4a, 0xbe18, 0xa7e8, 0x0, 0x1);
        gbc.writeMem(0x373f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc316);
        EXPECT(gbc.pc(), 0x3741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03CC
        gbc.setState(0xb501, 0x9e82, 0xe7e0, 0xe6bf, 0xe9aa, 0x675c, 0x1, 0x0);
        gbc.writeMem(0xb501, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9e82);
        EXPECT(gbc.pc(), 0xb503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb501), 0xcb);
        EXPECT(gbc.readMem(0xb502), 0xf3);
        // CB F3 03CD
        gbc.setState(0x1111, 0xc235, 0x95a0, 0x9fa0, 0x32b6, 0x4a83, 0x1, 0x1);
        gbc.writeMem(0x1111, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc235);
        EXPECT(gbc.pc(), 0x1113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03CE
        gbc.setState(0xcd99, 0x33fa, 0xae50, 0x8f72, 0x25ef, 0x364b, 0x1, 0x0);
        gbc.writeMem(0xcd99, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x33fa);
        EXPECT(gbc.pc(), 0xcd9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd99), 0xcb);
        EXPECT(gbc.readMem(0xcd9a), 0xf3);
        // CB F3 03CF
        gbc.setState(0x755, 0xe74b, 0xd6c0, 0x755d, 0x7c0b, 0xef9c, 0x0, 0x0);
        gbc.writeMem(0x755, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe74b);
        EXPECT(gbc.pc(), 0x757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03D0
        gbc.setState(0xca4, 0xaf6b, 0x6a10, 0xef7d, 0xc304, 0xf32c, 0x0, 0x0);
        gbc.writeMem(0xca4, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xaf6b);
        EXPECT(gbc.pc(), 0xca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03D1
        gbc.setState(0x5a8, 0x5a9d, 0xdcb0, 0xb2e6, 0xf10b, 0xdd42, 0x0, 0x0);
        gbc.writeMem(0x5a8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5a9d);
        EXPECT(gbc.pc(), 0x5aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03D2
        gbc.setState(0x5588, 0xa021, 0x1170, 0x9730, 0xd1dd, 0x331a, 0x0, 0x0);
        gbc.writeMem(0x5588, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa021);
        EXPECT(gbc.pc(), 0x558a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03D3
        gbc.setState(0xbd, 0x7898, 0x780, 0x596, 0xbcd, 0x112c, 0x1, 0x0);
        gbc.writeMem(0xbd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7898);
        EXPECT(gbc.pc(), 0xbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03D4
        gbc.setState(0xb0ad, 0xc967, 0xd5d0, 0x66e2, 0xc6e5, 0x3d1e, 0x1, 0x0);
        gbc.writeMem(0xb0ad, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc967);
        EXPECT(gbc.pc(), 0xb0af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ad), 0xcb);
        EXPECT(gbc.readMem(0xb0ae), 0xf3);
        // CB F3 03D6
        gbc.setState(0xd977, 0x2e48, 0x1ce0, 0x9be2, 0x163e, 0x7958, 0x0, 0x1);
        gbc.writeMem(0xd977, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2e48);
        EXPECT(gbc.pc(), 0xd979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd977), 0xcb);
        EXPECT(gbc.readMem(0xd978), 0xf3);
        // CB F3 03D7
        gbc.setState(0x72ee, 0x883, 0x89c0, 0x222d, 0x1304, 0x1585, 0x0, 0x1);
        gbc.writeMem(0x72ee, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x883);
        EXPECT(gbc.pc(), 0x72f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03D8
        gbc.setState(0x72cd, 0x177f, 0x60, 0xc74, 0xc53b, 0x8137, 0x1, 0x1);
        gbc.writeMem(0x72cd, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x177f);
        EXPECT(gbc.pc(), 0x72cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03D9
        gbc.setState(0x8b7b, 0x54d1, 0x55f0, 0x838c, 0xb318, 0xca17, 0x0, 0x1);
        gbc.writeMem(0x8b7b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x54d1);
        EXPECT(gbc.pc(), 0x8b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b7b), 0xcb);
        EXPECT(gbc.readMem(0x8b7c), 0xf3);
        // CB F3 03DA
        gbc.setState(0x61f, 0x70fe, 0x5f90, 0x755b, 0x3bb, 0x3093, 0x0, 0x1);
        gbc.writeMem(0x61f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x70fe);
        EXPECT(gbc.pc(), 0x621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03DB
        gbc.setState(0x5c26, 0xa08f, 0xb650, 0xeaa, 0xfa46, 0x34ee, 0x0, 0x0);
        gbc.writeMem(0x5c26, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa08f);
        EXPECT(gbc.pc(), 0x5c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03DC
        gbc.setState(0x1af8, 0x2625, 0x8140, 0x99c5, 0xd5ce, 0x109d, 0x0, 0x0);
        gbc.writeMem(0x1af8, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2625);
        EXPECT(gbc.pc(), 0x1afa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03DD
        gbc.setState(0x5296, 0x16e5, 0x9b20, 0x82c1, 0x40c0, 0x5a4e, 0x0, 0x1);
        gbc.writeMem(0x5296, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x16e5);
        EXPECT(gbc.pc(), 0x5298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03DE
        gbc.setState(0xc32f, 0xb34a, 0x2100, 0x7731, 0xe7fc, 0xc118, 0x1, 0x0);
        gbc.writeMem(0xc32f, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb34a);
        EXPECT(gbc.pc(), 0xc331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc32f), 0xcb);
        EXPECT(gbc.readMem(0xc330), 0xf3);
        // CB F3 03DF
        gbc.setState(0xf81, 0xcbac, 0x9690, 0x6fc1, 0x8aa, 0xddaf, 0x0, 0x0);
        gbc.writeMem(0xf81, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcbac);
        EXPECT(gbc.pc(), 0xf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03E1
        gbc.setState(0xe74b, 0x585a, 0xdab0, 0xd2ea, 0x941f, 0x88ab, 0x0, 0x1);
        gbc.writeMem(0xe74b, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x585a);
        EXPECT(gbc.pc(), 0xe74d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe74b), 0xcb);
        EXPECT(gbc.readMem(0xe74c), 0xf3);
        // CB F3 03E2
        gbc.setState(0x1368, 0x52ca, 0x9e40, 0xd7cd, 0x2ff3, 0x9ca9, 0x0, 0x1);
        gbc.writeMem(0x1368, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x52ca);
        EXPECT(gbc.pc(), 0x136a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F3 03E3
        gbc.setState(0x9411, 0x4fb8, 0x2800, 0x1d2a, 0xb5a7, 0xa700, 0x1, 0x1);
        gbc.writeMem(0x9411, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4fb8);
        EXPECT(gbc.pc(), 0x9413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9411), 0xcb);
        EXPECT(gbc.readMem(0x9412), 0xf3);
        // CB F3 03E4
        gbc.setState(0xb3f1, 0xf717, 0xacf0, 0xee22, 0x9410, 0x33f3, 0x1, 0x0);
        gbc.writeMem(0xb3f1, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf717);
        EXPECT(gbc.pc(), 0xb3f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f1), 0xcb);
        EXPECT(gbc.readMem(0xb3f2), 0xf3);
        // CB F3 03E5
        gbc.setState(0x1737, 0xacc7, 0x7b0, 0x36aa, 0xb4c2, 0xce91, 0x0, 0x1);
        gbc.writeMem(0x1737, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xacc7);
        EXPECT(gbc.pc(), 0x1739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03E6
        gbc.setState(0x11fa, 0xf065, 0x4050, 0xeeaf, 0x8358, 0x14bd, 0x1, 0x0);
        gbc.writeMem(0x11fa, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf065);
        EXPECT(gbc.pc(), 0x11fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F3 03E7
        gbc.setState(0xbb9, 0x5802, 0x2060, 0x210d, 0x9526, 0x7b86, 0x1, 0x0);
        gbc.writeMem(0xbb9, { 0xcb, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5802);
        EXPECT(gbc.pc(), 0xbbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
