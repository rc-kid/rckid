    TEST(gbcemu, opcode_cb_4e) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 4E 0000
        gbc.setState(0x3638, 0x89d3, 0xe50, 0xe8f7, 0x7b25, 0x1771, 0x1, 0x1);
        gbc.writeMem(0x1771, { 0x15 });
        gbc.writeMem(0x3638, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x89d3);
        EXPECT(gbc.pc(), 0x363a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0001
        gbc.setState(0x6fec, 0x7d92, 0x55d0, 0xfaa, 0xdf5d, 0xb98a, 0x1, 0x0);
        gbc.writeMem(0x6fec, { 0xcb, 0x4e });
        gbc.writeMem(0xb98a, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0x6fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98a), 0xd6);
        // CB 4E 0002
        gbc.setState(0x7e50, 0x4d56, 0x5390, 0x9ac7, 0x7e6c, 0xa007, 0x1, 0x0);
        gbc.writeMem(0x7e50, { 0xcb, 0x4e });
        gbc.writeMem(0xa007, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4d56);
        EXPECT(gbc.pc(), 0x7e52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa007), 0x6);
        // CB 4E 0003
        gbc.setState(0x8d6e, 0x3bf0, 0x3af0, 0x26aa, 0xce0c, 0x777b, 0x0, 0x1);
        gbc.writeMem(0x777b, { 0x3 });
        gbc.writeMem(0x8d6e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3bf0);
        EXPECT(gbc.pc(), 0x8d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d6e), 0xcb);
        EXPECT(gbc.readMem(0x8d6f), 0x4e);
        // CB 4E 0004
        gbc.setState(0xb66, 0x4220, 0x7d30, 0x2ce6, 0x822, 0x5337, 0x0, 0x1);
        gbc.writeMem(0xb66, { 0xcb, 0x4e });
        gbc.writeMem(0x5337, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4220);
        EXPECT(gbc.pc(), 0xb68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0005
        gbc.setState(0xabae, 0xbbb3, 0xbfa0, 0xfeb4, 0x466b, 0xf546, 0x1, 0x1);
        gbc.writeMem(0xabae, { 0xcb, 0x4e });
        gbc.writeMem(0xf546, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbbb3);
        EXPECT(gbc.pc(), 0xabb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabae), 0xcb);
        EXPECT(gbc.readMem(0xabaf), 0x4e);
        EXPECT(gbc.readMem(0xf546), 0x27);
        // CB 4E 0006
        gbc.setState(0x6f94, 0xa36d, 0x9d80, 0xa099, 0x35d9, 0x8fe1, 0x0, 0x1);
        gbc.writeMem(0x6f94, { 0xcb, 0x4e });
        gbc.writeMem(0x8fe1, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa36d);
        EXPECT(gbc.pc(), 0x6f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe1), 0x23);
        // CB 4E 0007
        gbc.setState(0xe925, 0x104d, 0xf6a0, 0xa7f9, 0x3c4b, 0xe44, 0x0, 0x1);
        gbc.writeMem(0xe44, { 0x8 });
        gbc.writeMem(0xe925, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x104d);
        EXPECT(gbc.pc(), 0xe927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe925), 0xcb);
        EXPECT(gbc.readMem(0xe926), 0x4e);
        // CB 4E 0009
        gbc.setState(0xed42, 0x7ff, 0x4780, 0x4973, 0xb4e8, 0xfa4e, 0x0, 0x0);
        gbc.writeMem(0xed42, { 0xcb, 0x4e });
        gbc.writeMem(0xfa4e, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7ff);
        EXPECT(gbc.pc(), 0xed44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed42), 0xcb);
        EXPECT(gbc.readMem(0xed43), 0x4e);
        EXPECT(gbc.readMem(0xfa4e), 0xde);
        // CB 4E 000A
        gbc.setState(0xa52b, 0xed44, 0xdb10, 0xe67c, 0xa89d, 0xc4ab, 0x0, 0x0);
        gbc.writeMem(0xa52b, { 0xcb, 0x4e });
        gbc.writeMem(0xc4ab, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xed44);
        EXPECT(gbc.pc(), 0xa52d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52b), 0xcb);
        EXPECT(gbc.readMem(0xa52c), 0x4e);
        EXPECT(gbc.readMem(0xc4ab), 0x6d);
        // CB 4E 000B
        gbc.setState(0x9ecf, 0xf7fe, 0xdb70, 0x3738, 0x17a3, 0x650d, 0x1, 0x0);
        gbc.writeMem(0x650d, { 0x4a });
        gbc.writeMem(0x9ecf, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf7fe);
        EXPECT(gbc.pc(), 0x9ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ecf), 0xcb);
        EXPECT(gbc.readMem(0x9ed0), 0x4e);
        // CB 4E 000C
        gbc.setState(0xa145, 0xf59d, 0xc0, 0x7d3b, 0x6386, 0x58e4, 0x1, 0x0);
        gbc.writeMem(0x58e4, { 0x4 });
        gbc.writeMem(0xa145, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf59d);
        EXPECT(gbc.pc(), 0xa147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa145), 0xcb);
        EXPECT(gbc.readMem(0xa146), 0x4e);
        // CB 4E 000D
        gbc.setState(0x22ac, 0x43c, 0x9fb0, 0x921c, 0xbfd6, 0x2037, 0x0, 0x0);
        gbc.writeMem(0x2037, { 0x1d });
        gbc.writeMem(0x22ac, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x43c);
        EXPECT(gbc.pc(), 0x22ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 000E
        gbc.setState(0x9f19, 0xb87b, 0x2f60, 0x3d1f, 0xeae1, 0xdb4f, 0x0, 0x1);
        gbc.writeMem(0x9f19, { 0xcb, 0x4e });
        gbc.writeMem(0xdb4f, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb87b);
        EXPECT(gbc.pc(), 0x9f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f19), 0xcb);
        EXPECT(gbc.readMem(0x9f1a), 0x4e);
        EXPECT(gbc.readMem(0xdb4f), 0xb5);
        // CB 4E 000F
        gbc.setState(0x28c4, 0x4c40, 0xc170, 0xa5b6, 0xb94b, 0xebf5, 0x1, 0x1);
        gbc.writeMem(0x28c4, { 0xcb, 0x4e });
        gbc.writeMem(0xebf5, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4c40);
        EXPECT(gbc.pc(), 0x28c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf5), 0x80);
        // CB 4E 0010
        gbc.setState(0x66a5, 0x99f3, 0xa7e0, 0xf842, 0x1702, 0xada9, 0x0, 0x1);
        gbc.writeMem(0x66a5, { 0xcb, 0x4e });
        gbc.writeMem(0xada9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x99f3);
        EXPECT(gbc.pc(), 0x66a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada9), 0x7f);
        // CB 4E 0011
        gbc.setState(0xde5e, 0xff15, 0xd890, 0xa140, 0x6d4, 0x9dc2, 0x0, 0x0);
        gbc.writeMem(0x9dc2, { 0x5 });
        gbc.writeMem(0xde5e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xff15);
        EXPECT(gbc.pc(), 0xde60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc2), 0x5);
        EXPECT(gbc.readMem(0xde5e), 0xcb);
        EXPECT(gbc.readMem(0xde5f), 0x4e);
        // CB 4E 0012
        gbc.setState(0x5f28, 0x100d, 0x3d10, 0x9f18, 0xe24d, 0xf401, 0x1, 0x1);
        gbc.writeMem(0x5f28, { 0xcb, 0x4e });
        gbc.writeMem(0xf401, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x100d);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf401), 0x16);
        // CB 4E 0013
        gbc.setState(0x4d57, 0x8549, 0x9240, 0x27e7, 0xd41b, 0x5ce3, 0x1, 0x0);
        gbc.writeMem(0x4d57, { 0xcb, 0x4e });
        gbc.writeMem(0x5ce3, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8549);
        EXPECT(gbc.pc(), 0x4d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0014
        gbc.setState(0x47c0, 0x7711, 0xdc30, 0x69fc, 0x5fe2, 0xbfdf, 0x0, 0x0);
        gbc.writeMem(0x47c0, { 0xcb, 0x4e });
        gbc.writeMem(0xbfdf, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7711);
        EXPECT(gbc.pc(), 0x47c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdf), 0x52);
        // CB 4E 0016
        gbc.setState(0xd3ba, 0xd2c0, 0xbb50, 0x2c5e, 0x88ff, 0xd4be, 0x1, 0x0);
        gbc.writeMem(0xd3ba, { 0xcb, 0x4e });
        gbc.writeMem(0xd4be, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd2c0);
        EXPECT(gbc.pc(), 0xd3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ba), 0xcb);
        EXPECT(gbc.readMem(0xd3bb), 0x4e);
        EXPECT(gbc.readMem(0xd4be), 0xd3);
        // CB 4E 0017
        gbc.setState(0x6efb, 0xd980, 0x9a10, 0xd363, 0x8efa, 0x275b, 0x0, 0x0);
        gbc.writeMem(0x275b, { 0x43 });
        gbc.writeMem(0x6efb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd980);
        EXPECT(gbc.pc(), 0x6efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0018
        gbc.setState(0xe74a, 0x4ef4, 0x3a20, 0x2ab2, 0xdc43, 0x6a95, 0x0, 0x1);
        gbc.writeMem(0x6a95, { 0x4b });
        gbc.writeMem(0xe74a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4ef4);
        EXPECT(gbc.pc(), 0xe74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74a), 0xcb);
        EXPECT(gbc.readMem(0xe74b), 0x4e);
        // CB 4E 0019
        gbc.setState(0x69d6, 0xc628, 0x4d30, 0x95a4, 0x35ce, 0x8f5d, 0x0, 0x1);
        gbc.writeMem(0x69d6, { 0xcb, 0x4e });
        gbc.writeMem(0x8f5d, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc628);
        EXPECT(gbc.pc(), 0x69d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5d), 0x8a);
        // CB 4E 001A
        gbc.setState(0xc44a, 0xd65d, 0x5180, 0xd01b, 0xf4bb, 0x87f4, 0x0, 0x1);
        gbc.writeMem(0x87f4, { 0x6c });
        gbc.writeMem(0xc44a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd65d);
        EXPECT(gbc.pc(), 0xc44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87f4), 0x6c);
        EXPECT(gbc.readMem(0xc44a), 0xcb);
        EXPECT(gbc.readMem(0xc44b), 0x4e);
        // CB 4E 001B
        gbc.setState(0xec27, 0xceb4, 0x7550, 0xab67, 0xd349, 0x532d, 0x1, 0x0);
        gbc.writeMem(0x532d, { 0xbf });
        gbc.writeMem(0xec27, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xceb4);
        EXPECT(gbc.pc(), 0xec29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec27), 0xcb);
        EXPECT(gbc.readMem(0xec28), 0x4e);
        // CB 4E 001C
        gbc.setState(0xecf1, 0xd2a1, 0x7bc0, 0xaf43, 0x90b5, 0x2005, 0x1, 0x0);
        gbc.writeMem(0x2005, { 0x4b });
        gbc.writeMem(0xecf1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd2a1);
        EXPECT(gbc.pc(), 0xecf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf1), 0xcb);
        EXPECT(gbc.readMem(0xecf2), 0x4e);
        // CB 4E 001D
        gbc.setState(0x3307, 0x3dd8, 0xeb00, 0x3373, 0xf3a6, 0xff17, 0x0, 0x0);
        gbc.writeMem(0x3307, { 0xcb, 0x4e });
        gbc.writeMem(0xff17, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3dd8);
        EXPECT(gbc.pc(), 0x3309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff17), 0x9);
        // CB 4E 001E
        gbc.setState(0x1c50, 0x25d2, 0x65d0, 0xe3f6, 0xc6fa, 0x5110, 0x0, 0x1);
        gbc.writeMem(0x1c50, { 0xcb, 0x4e });
        gbc.writeMem(0x5110, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x25d2);
        EXPECT(gbc.pc(), 0x1c52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 001F
        gbc.setState(0x3b05, 0xc084, 0x9090, 0xd367, 0x75cc, 0x844a, 0x0, 0x0);
        gbc.writeMem(0x3b05, { 0xcb, 0x4e });
        gbc.writeMem(0x844a, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc084);
        EXPECT(gbc.pc(), 0x3b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x844a), 0xc4);
        // CB 4E 0020
        gbc.setState(0x3208, 0x7a52, 0xfde0, 0x2297, 0xc624, 0x2c0c, 0x1, 0x0);
        gbc.writeMem(0x2c0c, { 0x6e });
        gbc.writeMem(0x3208, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7a52);
        EXPECT(gbc.pc(), 0x320a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0021
        gbc.setState(0x2355, 0xb7e4, 0x60b0, 0xf0c, 0x7986, 0xe2c0, 0x1, 0x0);
        gbc.writeMem(0x2355, { 0xcb, 0x4e });
        gbc.writeMem(0xe2c0, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0x2357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c0), 0x31);
        // CB 4E 0022
        gbc.setState(0xe1d0, 0xd513, 0xe940, 0x2822, 0xda3c, 0x4c7, 0x0, 0x0);
        gbc.writeMem(0x4c7, { 0xf0 });
        gbc.writeMem(0xe1d0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd513);
        EXPECT(gbc.pc(), 0xe1d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1d0), 0xcb);
        EXPECT(gbc.readMem(0xe1d1), 0x4e);
        // CB 4E 0023
        gbc.setState(0xe730, 0xbd79, 0x7380, 0x2dda, 0x1667, 0x14d6, 0x1, 0x1);
        gbc.writeMem(0x14d6, { 0xa });
        gbc.writeMem(0xe730, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbd79);
        EXPECT(gbc.pc(), 0xe732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe730), 0xcb);
        EXPECT(gbc.readMem(0xe731), 0x4e);
        // CB 4E 0024
        gbc.setState(0x5345, 0xaabc, 0x2af0, 0x375d, 0x3e03, 0xcc2, 0x0, 0x1);
        gbc.writeMem(0xcc2, { 0x91 });
        gbc.writeMem(0x5345, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xaabc);
        EXPECT(gbc.pc(), 0x5347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0026
        gbc.setState(0xa6c5, 0x9a12, 0x3790, 0xe044, 0x2353, 0xfdde, 0x0, 0x1);
        gbc.writeMem(0xa6c5, { 0xcb, 0x4e });
        gbc.writeMem(0xfdde, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9a12);
        EXPECT(gbc.pc(), 0xa6c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c5), 0xcb);
        EXPECT(gbc.readMem(0xa6c6), 0x4e);
        EXPECT(gbc.readMem(0xfdde), 0x3e);
        // CB 4E 0027
        gbc.setState(0xa6, 0x83d5, 0x7de0, 0xda2, 0xcc22, 0xcbfe, 0x1, 0x1);
        gbc.writeMem(0xa6, { 0xcb, 0x4e });
        gbc.writeMem(0xcbfe, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x83d5);
        EXPECT(gbc.pc(), 0xa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0x20);
        // CB 4E 0028
        gbc.setState(0x9f2f, 0x1b2, 0xb0b0, 0x741d, 0xbc46, 0xdab6, 0x0, 0x0);
        gbc.writeMem(0x9f2f, { 0xcb, 0x4e });
        gbc.writeMem(0xdab6, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1b2);
        EXPECT(gbc.pc(), 0x9f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f2f), 0xcb);
        EXPECT(gbc.readMem(0x9f30), 0x4e);
        EXPECT(gbc.readMem(0xdab6), 0xb);
        // CB 4E 0029
        gbc.setState(0xb036, 0xe752, 0x5000, 0xdab4, 0xb7a4, 0xda08, 0x1, 0x1);
        gbc.writeMem(0xb036, { 0xcb, 0x4e });
        gbc.writeMem(0xda08, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe752);
        EXPECT(gbc.pc(), 0xb038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb036), 0xcb);
        EXPECT(gbc.readMem(0xb037), 0x4e);
        EXPECT(gbc.readMem(0xda08), 0xcb);
        // CB 4E 002A
        gbc.setState(0xcc51, 0xe2b, 0x57c0, 0x6a98, 0xd83d, 0xacc3, 0x1, 0x0);
        gbc.writeMem(0xacc3, { 0x7f });
        gbc.writeMem(0xcc51, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe2b);
        EXPECT(gbc.pc(), 0xcc53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc3), 0x7f);
        EXPECT(gbc.readMem(0xcc51), 0xcb);
        EXPECT(gbc.readMem(0xcc52), 0x4e);
        // CB 4E 002C
        gbc.setState(0x55e2, 0xdb71, 0x8490, 0x9eff, 0xebe5, 0xd66, 0x0, 0x0);
        gbc.writeMem(0xd66, { 0x57 });
        gbc.writeMem(0x55e2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xdb71);
        EXPECT(gbc.pc(), 0x55e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 002D
        gbc.setState(0x57ec, 0xf3bf, 0x7370, 0xc380, 0xb5d8, 0x98b0, 0x0, 0x0);
        gbc.writeMem(0x57ec, { 0xcb, 0x4e });
        gbc.writeMem(0x98b0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf3bf);
        EXPECT(gbc.pc(), 0x57ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b0), 0x3);
        // CB 4E 002F
        gbc.setState(0xcf2c, 0xed41, 0x7b50, 0xd9dc, 0x21c9, 0x4217, 0x0, 0x0);
        gbc.writeMem(0x4217, { 0x6a });
        gbc.writeMem(0xcf2c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xed41);
        EXPECT(gbc.pc(), 0xcf2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2c), 0xcb);
        EXPECT(gbc.readMem(0xcf2d), 0x4e);
        // CB 4E 0030
        gbc.setState(0x51ba, 0x4854, 0x69c0, 0xd566, 0xa035, 0xd10d, 0x0, 0x0);
        gbc.writeMem(0x51ba, { 0xcb, 0x4e });
        gbc.writeMem(0xd10d, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4854);
        EXPECT(gbc.pc(), 0x51bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10d), 0x38);
        // CB 4E 0031
        gbc.setState(0x2f56, 0x8119, 0x14c0, 0xd2b, 0x7e7f, 0xefce, 0x0, 0x0);
        gbc.writeMem(0x2f56, { 0xcb, 0x4e });
        gbc.writeMem(0xefce, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8119);
        EXPECT(gbc.pc(), 0x2f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefce), 0xd7);
        // CB 4E 0032
        gbc.setState(0x5350, 0x86ce, 0xd660, 0x595c, 0x1399, 0xd5df, 0x1, 0x1);
        gbc.writeMem(0x5350, { 0xcb, 0x4e });
        gbc.writeMem(0xd5df, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x86ce);
        EXPECT(gbc.pc(), 0x5352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5df), 0x42);
        // CB 4E 0033
        gbc.setState(0x78c3, 0x967f, 0x5410, 0x6ac4, 0x418a, 0x53d6, 0x0, 0x0);
        gbc.writeMem(0x53d6, { 0x1b });
        gbc.writeMem(0x78c3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x967f);
        EXPECT(gbc.pc(), 0x78c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0034
        gbc.setState(0xbee2, 0xb3f, 0xc430, 0xe38a, 0x9e37, 0x76e4, 0x0, 0x1);
        gbc.writeMem(0x76e4, { 0x4c });
        gbc.writeMem(0xbee2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb3f);
        EXPECT(gbc.pc(), 0xbee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbee2), 0xcb);
        EXPECT(gbc.readMem(0xbee3), 0x4e);
        // CB 4E 0035
        gbc.setState(0xafd6, 0xc0ef, 0x5a60, 0x23ac, 0xfe58, 0xa000, 0x1, 0x0);
        gbc.writeMem(0xa000, { 0xf7 });
        gbc.writeMem(0xafd6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0xafd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa000), 0xf7);
        EXPECT(gbc.readMem(0xafd6), 0xcb);
        EXPECT(gbc.readMem(0xafd7), 0x4e);
        // CB 4E 0036
        gbc.setState(0xc947, 0x49f, 0x6360, 0xcf75, 0xb21c, 0x3b5f, 0x0, 0x1);
        gbc.writeMem(0x3b5f, { 0x6a });
        gbc.writeMem(0xc947, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x49f);
        EXPECT(gbc.pc(), 0xc949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc947), 0xcb);
        EXPECT(gbc.readMem(0xc948), 0x4e);
        // CB 4E 0037
        gbc.setState(0xd5f1, 0x5319, 0xed40, 0xa3f2, 0xb48f, 0xd3d4, 0x0, 0x0);
        gbc.writeMem(0xd3d4, { 0xb6 });
        gbc.writeMem(0xd5f1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5319);
        EXPECT(gbc.pc(), 0xd5f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d4), 0xb6);
        EXPECT(gbc.readMem(0xd5f1), 0xcb);
        EXPECT(gbc.readMem(0xd5f2), 0x4e);
        // CB 4E 0038
        gbc.setState(0x9a4a, 0x39b1, 0xbf00, 0x3438, 0x4e91, 0x9545, 0x0, 0x1);
        gbc.writeMem(0x9545, { 0x59 });
        gbc.writeMem(0x9a4a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x39b1);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9545), 0x59);
        EXPECT(gbc.readMem(0x9a4a), 0xcb);
        EXPECT(gbc.readMem(0x9a4b), 0x4e);
        // CB 4E 0039
        gbc.setState(0x5a2b, 0x4ae0, 0xa9f0, 0x3deb, 0x91f9, 0xbffa, 0x0, 0x0);
        gbc.writeMem(0x5a2b, { 0xcb, 0x4e });
        gbc.writeMem(0xbffa, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4ae0);
        EXPECT(gbc.pc(), 0x5a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbffa), 0xc);
        // CB 4E 003A
        gbc.setState(0x4425, 0xd446, 0x7150, 0xfcc1, 0x5557, 0x4f4f, 0x1, 0x1);
        gbc.writeMem(0x4425, { 0xcb, 0x4e });
        gbc.writeMem(0x4f4f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd446);
        EXPECT(gbc.pc(), 0x4427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 003B
        gbc.setState(0xd460, 0x9526, 0x9fa0, 0xd71e, 0x5b0f, 0xd0ef, 0x0, 0x1);
        gbc.writeMem(0xd0ef, { 0xec });
        gbc.writeMem(0xd460, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9526);
        EXPECT(gbc.pc(), 0xd462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ef), 0xec);
        EXPECT(gbc.readMem(0xd460), 0xcb);
        EXPECT(gbc.readMem(0xd461), 0x4e);
        // CB 4E 003C
        gbc.setState(0x8a88, 0x461d, 0x7db0, 0xca6, 0xd582, 0x1dbb, 0x1, 0x0);
        gbc.writeMem(0x1dbb, { 0xb4 });
        gbc.writeMem(0x8a88, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x461d);
        EXPECT(gbc.pc(), 0x8a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a88), 0xcb);
        EXPECT(gbc.readMem(0x8a89), 0x4e);
        // CB 4E 003D
        gbc.setState(0xef40, 0xa774, 0xb7c0, 0xc632, 0xe997, 0x7d08, 0x0, 0x0);
        gbc.writeMem(0x7d08, { 0x2c });
        gbc.writeMem(0xef40, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa774);
        EXPECT(gbc.pc(), 0xef42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef40), 0xcb);
        EXPECT(gbc.readMem(0xef41), 0x4e);
        // CB 4E 003E
        gbc.setState(0x634, 0x671a, 0xd4a0, 0x4524, 0x3832, 0x1886, 0x1, 0x1);
        gbc.writeMem(0x634, { 0xcb, 0x4e });
        gbc.writeMem(0x1886, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x671a);
        EXPECT(gbc.pc(), 0x636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 003F
        gbc.setState(0x8aeb, 0x8be5, 0x43d0, 0x2664, 0x4fad, 0xd476, 0x1, 0x0);
        gbc.writeMem(0x8aeb, { 0xcb, 0x4e });
        gbc.writeMem(0xd476, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8be5);
        EXPECT(gbc.pc(), 0x8aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aeb), 0xcb);
        EXPECT(gbc.readMem(0x8aec), 0x4e);
        EXPECT(gbc.readMem(0xd476), 0xef);
        // CB 4E 0040
        gbc.setState(0xd777, 0x90f5, 0xcbc0, 0xd5e7, 0x8d42, 0xa30f, 0x1, 0x0);
        gbc.writeMem(0xa30f, { 0x15 });
        gbc.writeMem(0xd777, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x90f5);
        EXPECT(gbc.pc(), 0xd779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30f), 0x15);
        EXPECT(gbc.readMem(0xd777), 0xcb);
        EXPECT(gbc.readMem(0xd778), 0x4e);
        // CB 4E 0041
        gbc.setState(0x54c9, 0xf6fb, 0xa250, 0x775e, 0x2ffe, 0x7ab9, 0x0, 0x0);
        gbc.writeMem(0x54c9, { 0xcb, 0x4e });
        gbc.writeMem(0x7ab9, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf6fb);
        EXPECT(gbc.pc(), 0x54cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0042
        gbc.setState(0x50af, 0xf336, 0x2700, 0x27d7, 0xe364, 0xa362, 0x0, 0x0);
        gbc.writeMem(0x50af, { 0xcb, 0x4e });
        gbc.writeMem(0xa362, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf336);
        EXPECT(gbc.pc(), 0x50b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa362), 0x72);
        // CB 4E 0043
        gbc.setState(0xa563, 0x5a73, 0x4000, 0x1404, 0xd0c5, 0x8400, 0x0, 0x1);
        gbc.writeMem(0x8400, { 0x90 });
        gbc.writeMem(0xa563, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5a73);
        EXPECT(gbc.pc(), 0xa565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8400), 0x90);
        EXPECT(gbc.readMem(0xa563), 0xcb);
        EXPECT(gbc.readMem(0xa564), 0x4e);
        // CB 4E 0044
        gbc.setState(0x582e, 0xbf93, 0x9420, 0x5a14, 0x979f, 0xc40, 0x0, 0x1);
        gbc.writeMem(0xc40, { 0xfe });
        gbc.writeMem(0x582e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbf93);
        EXPECT(gbc.pc(), 0x5830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0045
        gbc.setState(0x7490, 0xcde8, 0xea30, 0x461c, 0x94ae, 0x69a7, 0x1, 0x0);
        gbc.writeMem(0x69a7, { 0x3e });
        gbc.writeMem(0x7490, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcde8);
        EXPECT(gbc.pc(), 0x7492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0046
        gbc.setState(0x1f0d, 0xfdd3, 0xab60, 0x3b72, 0x4fb6, 0x2571, 0x0, 0x0);
        gbc.writeMem(0x1f0d, { 0xcb, 0x4e });
        gbc.writeMem(0x2571, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfdd3);
        EXPECT(gbc.pc(), 0x1f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0047
        gbc.setState(0xc657, 0xbd, 0x4970, 0x9a8e, 0x67fd, 0x2a65, 0x1, 0x0);
        gbc.writeMem(0x2a65, { 0x3d });
        gbc.writeMem(0xc657, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbd);
        EXPECT(gbc.pc(), 0xc659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc657), 0xcb);
        EXPECT(gbc.readMem(0xc658), 0x4e);
        // CB 4E 0048
        gbc.setState(0xc92f, 0xc9a4, 0x7880, 0x7608, 0x1d70, 0x369, 0x0, 0x0);
        gbc.writeMem(0x369, { 0xd });
        gbc.writeMem(0xc92f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc9a4);
        EXPECT(gbc.pc(), 0xc931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc92f), 0xcb);
        EXPECT(gbc.readMem(0xc930), 0x4e);
        // CB 4E 0049
        gbc.setState(0x61f0, 0x8672, 0x2450, 0xa30f, 0xb825, 0xf166, 0x1, 0x0);
        gbc.writeMem(0x61f0, { 0xcb, 0x4e });
        gbc.writeMem(0xf166, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8672);
        EXPECT(gbc.pc(), 0x61f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf166), 0x8b);
        // CB 4E 004A
        gbc.setState(0x30ea, 0x4033, 0x58b0, 0x7640, 0x2aae, 0x9459, 0x0, 0x0);
        gbc.writeMem(0x30ea, { 0xcb, 0x4e });
        gbc.writeMem(0x9459, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4033);
        EXPECT(gbc.pc(), 0x30ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9459), 0xe5);
        // CB 4E 004B
        gbc.setState(0x184b, 0x62a9, 0xe8c0, 0x7701, 0xee26, 0x34d0, 0x0, 0x1);
        gbc.writeMem(0x184b, { 0xcb, 0x4e });
        gbc.writeMem(0x34d0, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x62a9);
        EXPECT(gbc.pc(), 0x184d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 004D
        gbc.setState(0xac, 0x9c7d, 0xa370, 0x45db, 0xbbde, 0xb586, 0x1, 0x0);
        gbc.writeMem(0xac, { 0xcb, 0x4e });
        gbc.writeMem(0xb586, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9c7d);
        EXPECT(gbc.pc(), 0xae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb586), 0x2);
        // CB 4E 004E
        gbc.setState(0xcf9e, 0x6cde, 0xfdc0, 0xdf82, 0x7417, 0x555a, 0x0, 0x0);
        gbc.writeMem(0x555a, { 0x1f });
        gbc.writeMem(0xcf9e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6cde);
        EXPECT(gbc.pc(), 0xcfa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf9e), 0xcb);
        EXPECT(gbc.readMem(0xcf9f), 0x4e);
        // CB 4E 004F
        gbc.setState(0x74ba, 0x2584, 0x730, 0x4c6e, 0x7b86, 0x7935, 0x1, 0x0);
        gbc.writeMem(0x74ba, { 0xcb, 0x4e });
        gbc.writeMem(0x7935, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2584);
        EXPECT(gbc.pc(), 0x74bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0050
        gbc.setState(0xa725, 0x3ecf, 0xc40, 0x7794, 0x7f7d, 0x1109, 0x1, 0x0);
        gbc.writeMem(0x1109, { 0x7 });
        gbc.writeMem(0xa725, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3ecf);
        EXPECT(gbc.pc(), 0xa727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa725), 0xcb);
        EXPECT(gbc.readMem(0xa726), 0x4e);
        // CB 4E 0051
        gbc.setState(0xde7c, 0xb8e9, 0xdf20, 0xfcde, 0x376b, 0xd29d, 0x1, 0x1);
        gbc.writeMem(0xd29d, { 0x65 });
        gbc.writeMem(0xde7c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb8e9);
        EXPECT(gbc.pc(), 0xde7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29d), 0x65);
        EXPECT(gbc.readMem(0xde7c), 0xcb);
        EXPECT(gbc.readMem(0xde7d), 0x4e);
        // CB 4E 0052
        gbc.setState(0x7825, 0x9fb2, 0x4690, 0x50fe, 0xb260, 0xe65d, 0x1, 0x0);
        gbc.writeMem(0x7825, { 0xcb, 0x4e });
        gbc.writeMem(0xe65d, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9fb2);
        EXPECT(gbc.pc(), 0x7827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe65d), 0x38);
        // CB 4E 0053
        gbc.setState(0x5a9c, 0x334a, 0x55c0, 0xcd00, 0x4899, 0xecbe, 0x1, 0x1);
        gbc.writeMem(0x5a9c, { 0xcb, 0x4e });
        gbc.writeMem(0xecbe, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x334a);
        EXPECT(gbc.pc(), 0x5a9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbe), 0xae);
        // CB 4E 0054
        gbc.setState(0x3cca, 0x2710, 0xf330, 0x9866, 0x6172, 0xbde0, 0x1, 0x1);
        gbc.writeMem(0x3cca, { 0xcb, 0x4e });
        gbc.writeMem(0xbde0, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2710);
        EXPECT(gbc.pc(), 0x3ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde0), 0x61);
        // CB 4E 0055
        gbc.setState(0x925c, 0x201b, 0x9150, 0x4f30, 0x5fed, 0xa82b, 0x1, 0x1);
        gbc.writeMem(0x925c, { 0xcb, 0x4e });
        gbc.writeMem(0xa82b, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x201b);
        EXPECT(gbc.pc(), 0x925e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x925c), 0xcb);
        EXPECT(gbc.readMem(0x925d), 0x4e);
        EXPECT(gbc.readMem(0xa82b), 0xc8);
        // CB 4E 0057
        gbc.setState(0x858c, 0xf5a4, 0x8910, 0x5e47, 0xd6d, 0x59c7, 0x1, 0x1);
        gbc.writeMem(0x59c7, { 0x90 });
        gbc.writeMem(0x858c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf5a4);
        EXPECT(gbc.pc(), 0x858e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858c), 0xcb);
        EXPECT(gbc.readMem(0x858d), 0x4e);
        // CB 4E 0058
        gbc.setState(0x9390, 0x1280, 0x29e0, 0x838, 0x90cb, 0x2e4f, 0x0, 0x0);
        gbc.writeMem(0x2e4f, { 0x9c });
        gbc.writeMem(0x9390, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1280);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9390), 0xcb);
        EXPECT(gbc.readMem(0x9391), 0x4e);
        // CB 4E 005A
        gbc.setState(0x70e4, 0x3dd8, 0x1ea0, 0x85f2, 0x1c48, 0x5ced, 0x0, 0x1);
        gbc.writeMem(0x5ced, { 0x88 });
        gbc.writeMem(0x70e4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3dd8);
        EXPECT(gbc.pc(), 0x70e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 005B
        gbc.setState(0x85e5, 0x776c, 0x900, 0x633e, 0x6b95, 0xd1cd, 0x1, 0x0);
        gbc.writeMem(0x85e5, { 0xcb, 0x4e });
        gbc.writeMem(0xd1cd, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x776c);
        EXPECT(gbc.pc(), 0x85e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e5), 0xcb);
        EXPECT(gbc.readMem(0x85e6), 0x4e);
        EXPECT(gbc.readMem(0xd1cd), 0xec);
        // CB 4E 005C
        gbc.setState(0x328c, 0xaee, 0xa1a0, 0x2c8b, 0x3bb, 0x7280, 0x0, 0x1);
        gbc.writeMem(0x328c, { 0xcb, 0x4e });
        gbc.writeMem(0x7280, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xaee);
        EXPECT(gbc.pc(), 0x328e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 005D
        gbc.setState(0x9e05, 0x3f96, 0xc350, 0xd33a, 0xc938, 0x9ccd, 0x1, 0x0);
        gbc.writeMem(0x9ccd, { 0xd8 });
        gbc.writeMem(0x9e05, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3f96);
        EXPECT(gbc.pc(), 0x9e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccd), 0xd8);
        EXPECT(gbc.readMem(0x9e05), 0xcb);
        EXPECT(gbc.readMem(0x9e06), 0x4e);
        // CB 4E 005E
        gbc.setState(0x80e5, 0xc39, 0x3ef0, 0xee37, 0x71fa, 0xe987, 0x1, 0x1);
        gbc.writeMem(0x80e5, { 0xcb, 0x4e });
        gbc.writeMem(0xe987, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc39);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e5), 0xcb);
        EXPECT(gbc.readMem(0x80e6), 0x4e);
        EXPECT(gbc.readMem(0xe987), 0x5);
        // CB 4E 005F
        gbc.setState(0x461c, 0x2e58, 0x9520, 0x93e2, 0x8fcc, 0x1af1, 0x1, 0x0);
        gbc.writeMem(0x1af1, { 0xb1 });
        gbc.writeMem(0x461c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2e58);
        EXPECT(gbc.pc(), 0x461e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0060
        gbc.setState(0xa2c7, 0x8aec, 0xd7b0, 0xdddd, 0x4299, 0x1de8, 0x0, 0x1);
        gbc.writeMem(0x1de8, { 0x58 });
        gbc.writeMem(0xa2c7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8aec);
        EXPECT(gbc.pc(), 0xa2c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c7), 0xcb);
        EXPECT(gbc.readMem(0xa2c8), 0x4e);
        // CB 4E 0061
        gbc.setState(0x31e3, 0x8e7e, 0xee40, 0x3abf, 0x88b4, 0x3aa7, 0x1, 0x0);
        gbc.writeMem(0x31e3, { 0xcb, 0x4e });
        gbc.writeMem(0x3aa7, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8e7e);
        EXPECT(gbc.pc(), 0x31e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0062
        gbc.setState(0xd788, 0x7247, 0x4470, 0xd483, 0x2879, 0x75f6, 0x0, 0x1);
        gbc.writeMem(0x75f6, { 0xb9 });
        gbc.writeMem(0xd788, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7247);
        EXPECT(gbc.pc(), 0xd78a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd788), 0xcb);
        EXPECT(gbc.readMem(0xd789), 0x4e);
        // CB 4E 0063
        gbc.setState(0xeae7, 0x4677, 0x9350, 0x7e82, 0x6fc4, 0x4376, 0x0, 0x1);
        gbc.writeMem(0x4376, { 0x13 });
        gbc.writeMem(0xeae7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4677);
        EXPECT(gbc.pc(), 0xeae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae7), 0xcb);
        EXPECT(gbc.readMem(0xeae8), 0x4e);
        // CB 4E 0064
        gbc.setState(0x52a4, 0x1d29, 0x86a0, 0x7759, 0x9963, 0x446f, 0x0, 0x1);
        gbc.writeMem(0x446f, { 0x80 });
        gbc.writeMem(0x52a4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1d29);
        EXPECT(gbc.pc(), 0x52a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0065
        gbc.setState(0x553b, 0x33b7, 0xdf80, 0x3f55, 0xc47c, 0x8c7c, 0x0, 0x0);
        gbc.writeMem(0x553b, { 0xcb, 0x4e });
        gbc.writeMem(0x8c7c, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x33b7);
        EXPECT(gbc.pc(), 0x553d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7c), 0x5c);
        // CB 4E 0066
        gbc.setState(0x8281, 0xc2d0, 0x2ca0, 0x916d, 0xd23f, 0x7cf1, 0x1, 0x1);
        gbc.writeMem(0x7cf1, { 0x5a });
        gbc.writeMem(0x8281, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc2d0);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8281), 0xcb);
        EXPECT(gbc.readMem(0x8282), 0x4e);
        // CB 4E 0067
        gbc.setState(0x88a3, 0x44b6, 0x5370, 0xcabb, 0x354c, 0x22c2, 0x0, 0x0);
        gbc.writeMem(0x22c2, { 0xaa });
        gbc.writeMem(0x88a3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x44b6);
        EXPECT(gbc.pc(), 0x88a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a3), 0xcb);
        EXPECT(gbc.readMem(0x88a4), 0x4e);
        // CB 4E 0068
        gbc.setState(0x374f, 0x9bd7, 0x9dd0, 0xb94, 0x5568, 0x54ef, 0x1, 0x0);
        gbc.writeMem(0x374f, { 0xcb, 0x4e });
        gbc.writeMem(0x54ef, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9bd7);
        EXPECT(gbc.pc(), 0x3751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0069
        gbc.setState(0x1b6, 0x2423, 0xd390, 0x325, 0xac04, 0x27b0, 0x1, 0x1);
        gbc.writeMem(0x1b6, { 0xcb, 0x4e });
        gbc.writeMem(0x27b0, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2423);
        EXPECT(gbc.pc(), 0x1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 006A
        gbc.setState(0xc2d3, 0x6d88, 0x83f0, 0x25c4, 0x16c5, 0x62d2, 0x0, 0x1);
        gbc.writeMem(0x62d2, { 0xf0 });
        gbc.writeMem(0xc2d3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6d88);
        EXPECT(gbc.pc(), 0xc2d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d3), 0xcb);
        EXPECT(gbc.readMem(0xc2d4), 0x4e);
        // CB 4E 006B
        gbc.setState(0x1841, 0xbef2, 0xd520, 0x6650, 0x337, 0xdc48, 0x1, 0x0);
        gbc.writeMem(0x1841, { 0xcb, 0x4e });
        gbc.writeMem(0xdc48, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbef2);
        EXPECT(gbc.pc(), 0x1843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc48), 0x47);
        // CB 4E 006C
        gbc.setState(0x7295, 0x610c, 0xd5e0, 0x4370, 0x288, 0x99f8, 0x1, 0x0);
        gbc.writeMem(0x7295, { 0xcb, 0x4e });
        gbc.writeMem(0x99f8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x610c);
        EXPECT(gbc.pc(), 0x7297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f8), 0x4d);
        // CB 4E 006D
        gbc.setState(0xe946, 0x6e3b, 0x3b30, 0xff5e, 0x8701, 0xfb63, 0x0, 0x0);
        gbc.writeMem(0xe946, { 0xcb, 0x4e });
        gbc.writeMem(0xfb63, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0xe948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe946), 0xcb);
        EXPECT(gbc.readMem(0xe947), 0x4e);
        EXPECT(gbc.readMem(0xfb63), 0x3e);
        // CB 4E 006E
        gbc.setState(0x3cf2, 0x2faa, 0xee90, 0x99a0, 0xbc92, 0x58a8, 0x1, 0x0);
        gbc.writeMem(0x3cf2, { 0xcb, 0x4e });
        gbc.writeMem(0x58a8, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2faa);
        EXPECT(gbc.pc(), 0x3cf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 006F
        gbc.setState(0xc361, 0x52fa, 0x610, 0xa35e, 0xda55, 0x3ee8, 0x1, 0x0);
        gbc.writeMem(0x3ee8, { 0x4c });
        gbc.writeMem(0xc361, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x52fa);
        EXPECT(gbc.pc(), 0xc363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc361), 0xcb);
        EXPECT(gbc.readMem(0xc362), 0x4e);
        // CB 4E 0070
        gbc.setState(0x5482, 0x3abf, 0x7cd0, 0x78e3, 0xdf82, 0xa9b6, 0x1, 0x0);
        gbc.writeMem(0x5482, { 0xcb, 0x4e });
        gbc.writeMem(0xa9b6, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3abf);
        EXPECT(gbc.pc(), 0x5484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b6), 0xef);
        // CB 4E 0072
        gbc.setState(0xbac3, 0xdd42, 0xdb80, 0xaa9a, 0xb2d2, 0x13a1, 0x0, 0x0);
        gbc.writeMem(0x13a1, { 0xc0 });
        gbc.writeMem(0xbac3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdd42);
        EXPECT(gbc.pc(), 0xbac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac3), 0xcb);
        EXPECT(gbc.readMem(0xbac4), 0x4e);
        // CB 4E 0073
        gbc.setState(0xe454, 0xd931, 0xa300, 0x7a85, 0x133d, 0x8d9e, 0x0, 0x1);
        gbc.writeMem(0x8d9e, { 0xbc });
        gbc.writeMem(0xe454, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd931);
        EXPECT(gbc.pc(), 0xe456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d9e), 0xbc);
        EXPECT(gbc.readMem(0xe454), 0xcb);
        EXPECT(gbc.readMem(0xe455), 0x4e);
        // CB 4E 0074
        gbc.setState(0xd56, 0xebc8, 0x3bf0, 0x39f0, 0x4e1f, 0x3b18, 0x1, 0x0);
        gbc.writeMem(0xd56, { 0xcb, 0x4e });
        gbc.writeMem(0x3b18, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xebc8);
        EXPECT(gbc.pc(), 0xd58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0075
        gbc.setState(0xc427, 0x2cc7, 0xd520, 0xae7f, 0xb, 0x106f, 0x1, 0x1);
        gbc.writeMem(0x106f, { 0x8f });
        gbc.writeMem(0xc427, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2cc7);
        EXPECT(gbc.pc(), 0xc429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc427), 0xcb);
        EXPECT(gbc.readMem(0xc428), 0x4e);
        // CB 4E 0076
        gbc.setState(0x9aa5, 0xf81d, 0x5fa0, 0xa55, 0x2adf, 0xc3eb, 0x0, 0x1);
        gbc.writeMem(0x9aa5, { 0xcb, 0x4e });
        gbc.writeMem(0xc3eb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf81d);
        EXPECT(gbc.pc(), 0x9aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa5), 0xcb);
        EXPECT(gbc.readMem(0x9aa6), 0x4e);
        EXPECT(gbc.readMem(0xc3eb), 0xf9);
        // CB 4E 0077
        gbc.setState(0xb069, 0xcc57, 0x6f90, 0x4107, 0x6ee0, 0x21aa, 0x0, 0x0);
        gbc.writeMem(0x21aa, { 0x84 });
        gbc.writeMem(0xb069, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcc57);
        EXPECT(gbc.pc(), 0xb06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb069), 0xcb);
        EXPECT(gbc.readMem(0xb06a), 0x4e);
        // CB 4E 0078
        gbc.setState(0x4fd6, 0x1a82, 0xd2f0, 0x7fcd, 0x1c48, 0x8c2c, 0x0, 0x0);
        gbc.writeMem(0x4fd6, { 0xcb, 0x4e });
        gbc.writeMem(0x8c2c, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1a82);
        EXPECT(gbc.pc(), 0x4fd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2c), 0x6d);
        // CB 4E 0079
        gbc.setState(0x908, 0xcee1, 0xd520, 0xf3f9, 0x8f62, 0x7f9a, 0x0, 0x0);
        gbc.writeMem(0x908, { 0xcb, 0x4e });
        gbc.writeMem(0x7f9a, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcee1);
        EXPECT(gbc.pc(), 0x90a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 007A
        gbc.setState(0x4966, 0x8cf7, 0xf720, 0x994b, 0x89c, 0x5cb2, 0x1, 0x1);
        gbc.writeMem(0x4966, { 0xcb, 0x4e });
        gbc.writeMem(0x5cb2, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8cf7);
        EXPECT(gbc.pc(), 0x4968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 007B
        gbc.setState(0xa726, 0xcca9, 0x4940, 0xe6b0, 0x3ea7, 0xd72, 0x0, 0x1);
        gbc.writeMem(0xd72, { 0xde });
        gbc.writeMem(0xa726, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xcca9);
        EXPECT(gbc.pc(), 0xa728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa726), 0xcb);
        EXPECT(gbc.readMem(0xa727), 0x4e);
        // CB 4E 007D
        gbc.setState(0x75f6, 0x185c, 0x8a0, 0x6a04, 0xce3d, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x6634, { 0x6d });
        gbc.writeMem(0x75f6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x185c);
        EXPECT(gbc.pc(), 0x75f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 007E
        gbc.setState(0xc466, 0x637, 0x2c80, 0xe201, 0x2d36, 0xd2ec, 0x0, 0x0);
        gbc.writeMem(0xc466, { 0xcb, 0x4e });
        gbc.writeMem(0xd2ec, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x637);
        EXPECT(gbc.pc(), 0xc468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc466), 0xcb);
        EXPECT(gbc.readMem(0xc467), 0x4e);
        EXPECT(gbc.readMem(0xd2ec), 0xdf);
        // CB 4E 007F
        gbc.setState(0x823c, 0x8510, 0xab10, 0x6b04, 0x14a9, 0x594f, 0x1, 0x0);
        gbc.writeMem(0x594f, { 0x68 });
        gbc.writeMem(0x823c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8510);
        EXPECT(gbc.pc(), 0x823e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x823c), 0xcb);
        EXPECT(gbc.readMem(0x823d), 0x4e);
        // CB 4E 0080
        gbc.setState(0x895c, 0x84e5, 0xce60, 0x116a, 0x620d, 0x2518, 0x1, 0x1);
        gbc.writeMem(0x2518, { 0x78 });
        gbc.writeMem(0x895c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x84e5);
        EXPECT(gbc.pc(), 0x895e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x895c), 0xcb);
        EXPECT(gbc.readMem(0x895d), 0x4e);
        // CB 4E 0081
        gbc.setState(0xe40c, 0xbe53, 0xece0, 0xe579, 0x98ed, 0x1acf, 0x1, 0x1);
        gbc.writeMem(0x1acf, { 0x89 });
        gbc.writeMem(0xe40c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbe53);
        EXPECT(gbc.pc(), 0xe40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40c), 0xcb);
        EXPECT(gbc.readMem(0xe40d), 0x4e);
        // CB 4E 0082
        gbc.setState(0x249c, 0xa11c, 0x99c0, 0x895e, 0x5e1, 0x3c7c, 0x0, 0x1);
        gbc.writeMem(0x249c, { 0xcb, 0x4e });
        gbc.writeMem(0x3c7c, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa11c);
        EXPECT(gbc.pc(), 0x249e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0083
        gbc.setState(0xb0a, 0xb862, 0xd5c0, 0x2310, 0x2e04, 0xdec, 0x0, 0x1);
        gbc.writeMem(0xb0a, { 0xcb, 0x4e });
        gbc.writeMem(0xdec, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb862);
        EXPECT(gbc.pc(), 0xb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0084
        gbc.setState(0x336d, 0x5ed6, 0x7d70, 0x4f95, 0x2d64, 0x5e0e, 0x0, 0x1);
        gbc.writeMem(0x336d, { 0xcb, 0x4e });
        gbc.writeMem(0x5e0e, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5ed6);
        EXPECT(gbc.pc(), 0x336f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0085
        gbc.setState(0xb60d, 0x2c92, 0xc340, 0xa38c, 0xa9e5, 0x1d42, 0x1, 0x0);
        gbc.writeMem(0x1d42, { 0x46 });
        gbc.writeMem(0xb60d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2c92);
        EXPECT(gbc.pc(), 0xb60f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb60d), 0xcb);
        EXPECT(gbc.readMem(0xb60e), 0x4e);
        // CB 4E 0086
        gbc.setState(0xb173, 0x7bb3, 0x9400, 0x8888, 0x4fc2, 0x93f0, 0x1, 0x0);
        gbc.writeMem(0x93f0, { 0x45 });
        gbc.writeMem(0xb173, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7bb3);
        EXPECT(gbc.pc(), 0xb175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f0), 0x45);
        EXPECT(gbc.readMem(0xb173), 0xcb);
        EXPECT(gbc.readMem(0xb174), 0x4e);
        // CB 4E 0088
        gbc.setState(0x6260, 0x5569, 0x85e0, 0xee4f, 0x94d2, 0x4cd1, 0x1, 0x0);
        gbc.writeMem(0x4cd1, { 0xa6 });
        gbc.writeMem(0x6260, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5569);
        EXPECT(gbc.pc(), 0x6262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0089
        gbc.setState(0xd419, 0xaa43, 0xe3b0, 0xdfb6, 0x798d, 0xccdd, 0x0, 0x1);
        gbc.writeMem(0xccdd, { 0x5f });
        gbc.writeMem(0xd419, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xaa43);
        EXPECT(gbc.pc(), 0xd41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccdd), 0x5f);
        EXPECT(gbc.readMem(0xd419), 0xcb);
        EXPECT(gbc.readMem(0xd41a), 0x4e);
        // CB 4E 008A
        gbc.setState(0xb59, 0x43c2, 0x85e0, 0xeb06, 0xca31, 0x1476, 0x0, 0x1);
        gbc.writeMem(0xb59, { 0xcb, 0x4e });
        gbc.writeMem(0x1476, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x43c2);
        EXPECT(gbc.pc(), 0xb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 008B
        gbc.setState(0x789c, 0xd562, 0x2ec0, 0x7d2b, 0x211, 0x764a, 0x0, 0x0);
        gbc.writeMem(0x764a, { 0x91 });
        gbc.writeMem(0x789c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd562);
        EXPECT(gbc.pc(), 0x789e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 008D
        gbc.setState(0x56bb, 0x89fa, 0x8f90, 0xe4b4, 0x6e20, 0x7595, 0x1, 0x1);
        gbc.writeMem(0x56bb, { 0xcb, 0x4e });
        gbc.writeMem(0x7595, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x89fa);
        EXPECT(gbc.pc(), 0x56bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 008E
        gbc.setState(0xea72, 0x13af, 0xe520, 0xe670, 0xb210, 0x4f2a, 0x1, 0x0);
        gbc.writeMem(0x4f2a, { 0x31 });
        gbc.writeMem(0xea72, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x13af);
        EXPECT(gbc.pc(), 0xea74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea72), 0xcb);
        EXPECT(gbc.readMem(0xea73), 0x4e);
        // CB 4E 008F
        gbc.setState(0x3c3f, 0xa751, 0x90f0, 0xa1b6, 0xc9e6, 0xd852, 0x0, 0x1);
        gbc.writeMem(0x3c3f, { 0xcb, 0x4e });
        gbc.writeMem(0xd852, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa751);
        EXPECT(gbc.pc(), 0x3c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd852), 0x85);
        // CB 4E 0090
        gbc.setState(0xbeab, 0xd1a, 0xedd0, 0xdea2, 0x850b, 0x43dd, 0x0, 0x1);
        gbc.writeMem(0x43dd, { 0xd4 });
        gbc.writeMem(0xbeab, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd1a);
        EXPECT(gbc.pc(), 0xbead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeab), 0xcb);
        EXPECT(gbc.readMem(0xbeac), 0x4e);
        // CB 4E 0091
        gbc.setState(0x9ebe, 0x720b, 0xc680, 0x3a90, 0x62c2, 0x26d5, 0x1, 0x1);
        gbc.writeMem(0x26d5, { 0xf0 });
        gbc.writeMem(0x9ebe, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x720b);
        EXPECT(gbc.pc(), 0x9ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ebe), 0xcb);
        EXPECT(gbc.readMem(0x9ebf), 0x4e);
        // CB 4E 0092
        gbc.setState(0x22ca, 0x91b1, 0x8180, 0xb513, 0xab2, 0x5f73, 0x1, 0x0);
        gbc.writeMem(0x22ca, { 0xcb, 0x4e });
        gbc.writeMem(0x5f73, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x91b1);
        EXPECT(gbc.pc(), 0x22cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0093
        gbc.setState(0x1a11, 0xdebe, 0xef30, 0x7c93, 0xc6b3, 0x104e, 0x0, 0x1);
        gbc.writeMem(0x104e, { 0xe9 });
        gbc.writeMem(0x1a11, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdebe);
        EXPECT(gbc.pc(), 0x1a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0094
        gbc.setState(0x5352, 0xd075, 0x8640, 0x6d69, 0x4e14, 0xdcc2, 0x0, 0x1);
        gbc.writeMem(0x5352, { 0xcb, 0x4e });
        gbc.writeMem(0xdcc2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd075);
        EXPECT(gbc.pc(), 0x5354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc2), 0x4d);
        // CB 4E 0095
        gbc.setState(0x6e0b, 0x67ce, 0xb0f0, 0xee9, 0x2374, 0x854b, 0x1, 0x1);
        gbc.writeMem(0x6e0b, { 0xcb, 0x4e });
        gbc.writeMem(0x854b, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x67ce);
        EXPECT(gbc.pc(), 0x6e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x854b), 0xe3);
        // CB 4E 0096
        gbc.setState(0x4916, 0xc20d, 0x3320, 0x101b, 0xd330, 0x3e4e, 0x0, 0x1);
        gbc.writeMem(0x3e4e, { 0x4b });
        gbc.writeMem(0x4916, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc20d);
        EXPECT(gbc.pc(), 0x4918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0097
        gbc.setState(0xc613, 0x37f4, 0x7c20, 0x5cc1, 0xf45b, 0xc729, 0x0, 0x1);
        gbc.writeMem(0xc613, { 0xcb, 0x4e });
        gbc.writeMem(0xc729, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x37f4);
        EXPECT(gbc.pc(), 0xc615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc613), 0xcb);
        EXPECT(gbc.readMem(0xc614), 0x4e);
        EXPECT(gbc.readMem(0xc729), 0xbb);
        // CB 4E 0098
        gbc.setState(0x519, 0xf4e9, 0xec30, 0xcbb, 0x5073, 0xf2, 0x0, 0x0);
        gbc.writeMem(0xf2, { 0xd4 });
        gbc.writeMem(0x519, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf4e9);
        EXPECT(gbc.pc(), 0x51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0099
        gbc.setState(0x8ca5, 0x3f67, 0x9a0, 0xce6e, 0x6d1b, 0xe63f, 0x0, 0x1);
        gbc.writeMem(0x8ca5, { 0xcb, 0x4e });
        gbc.writeMem(0xe63f, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3f67);
        EXPECT(gbc.pc(), 0x8ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca5), 0xcb);
        EXPECT(gbc.readMem(0x8ca6), 0x4e);
        EXPECT(gbc.readMem(0xe63f), 0x6e);
        // CB 4E 009A
        gbc.setState(0xd65, 0xff5e, 0x2fd0, 0xf281, 0x288, 0x204b, 0x1, 0x0);
        gbc.writeMem(0xd65, { 0xcb, 0x4e });
        gbc.writeMem(0x204b, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xff5e);
        EXPECT(gbc.pc(), 0xd67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 009B
        gbc.setState(0x29ad, 0xab6c, 0x9910, 0x2f40, 0xcfd5, 0x8926, 0x0, 0x1);
        gbc.writeMem(0x29ad, { 0xcb, 0x4e });
        gbc.writeMem(0x8926, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x29af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8926), 0xfa);
        // CB 4E 009C
        gbc.setState(0x259e, 0x4496, 0xb010, 0xef92, 0xe6f9, 0xf2ee, 0x0, 0x1);
        gbc.writeMem(0x259e, { 0xcb, 0x4e });
        gbc.writeMem(0xf2ee, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4496);
        EXPECT(gbc.pc(), 0x25a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf2ee), 0x45);
        // CB 4E 009D
        gbc.setState(0x4f95, 0xb8a0, 0xe8f0, 0xa408, 0x7746, 0x60db, 0x0, 0x1);
        gbc.writeMem(0x4f95, { 0xcb, 0x4e });
        gbc.writeMem(0x60db, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb8a0);
        EXPECT(gbc.pc(), 0x4f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 009E
        gbc.setState(0xbc9, 0xda95, 0x2d50, 0x5d01, 0xac37, 0x15f0, 0x0, 0x0);
        gbc.writeMem(0xbc9, { 0xcb, 0x4e });
        gbc.writeMem(0x15f0, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xda95);
        EXPECT(gbc.pc(), 0xbcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 009F
        gbc.setState(0x5475, 0xa867, 0x6800, 0xf238, 0xd051, 0xe684, 0x0, 0x1);
        gbc.writeMem(0x5475, { 0xcb, 0x4e });
        gbc.writeMem(0xe684, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa867);
        EXPECT(gbc.pc(), 0x5477);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe684), 0xe8);
        // CB 4E 00A0
        gbc.setState(0xde8e, 0x3ce, 0xa6f0, 0x2624, 0xbee6, 0xb8b6, 0x1, 0x1);
        gbc.writeMem(0xb8b6, { 0x12 });
        gbc.writeMem(0xde8e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3ce);
        EXPECT(gbc.pc(), 0xde90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b6), 0x12);
        EXPECT(gbc.readMem(0xde8e), 0xcb);
        EXPECT(gbc.readMem(0xde8f), 0x4e);
        // CB 4E 00A1
        gbc.setState(0xaeae, 0x50a, 0xdb70, 0x9710, 0x4770, 0x9082, 0x0, 0x1);
        gbc.writeMem(0x9082, { 0xbc });
        gbc.writeMem(0xaeae, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x50a);
        EXPECT(gbc.pc(), 0xaeb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9082), 0xbc);
        EXPECT(gbc.readMem(0xaeae), 0xcb);
        EXPECT(gbc.readMem(0xaeaf), 0x4e);
        // CB 4E 00A2
        gbc.setState(0x9401, 0xc7d6, 0xe680, 0x927f, 0xf6c0, 0xb6f1, 0x1, 0x1);
        gbc.writeMem(0x9401, { 0xcb, 0x4e });
        gbc.writeMem(0xb6f1, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc7d6);
        EXPECT(gbc.pc(), 0x9403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9401), 0xcb);
        EXPECT(gbc.readMem(0x9402), 0x4e);
        EXPECT(gbc.readMem(0xb6f1), 0x93);
        // CB 4E 00A3
        gbc.setState(0x9227, 0x6597, 0xcbf0, 0x656f, 0xaff9, 0x17, 0x1, 0x1);
        gbc.writeMem(0x17, { 0x86 });
        gbc.writeMem(0x9227, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6597);
        EXPECT(gbc.pc(), 0x9229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9227), 0xcb);
        EXPECT(gbc.readMem(0x9228), 0x4e);
        // CB 4E 00A4
        gbc.setState(0xab77, 0x58df, 0x7270, 0x7b47, 0x6c94, 0x515a, 0x0, 0x1);
        gbc.writeMem(0x515a, { 0xd3 });
        gbc.writeMem(0xab77, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x58df);
        EXPECT(gbc.pc(), 0xab79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab77), 0xcb);
        EXPECT(gbc.readMem(0xab78), 0x4e);
        // CB 4E 00A5
        gbc.setState(0x20b4, 0xfe14, 0xf50, 0x1edd, 0x9e44, 0x9c46, 0x0, 0x0);
        gbc.writeMem(0x20b4, { 0xcb, 0x4e });
        gbc.writeMem(0x9c46, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfe14);
        EXPECT(gbc.pc(), 0x20b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c46), 0x46);
        // CB 4E 00A6
        gbc.setState(0x4644, 0x496b, 0x1d80, 0x4688, 0x8319, 0xb032, 0x1, 0x1);
        gbc.writeMem(0x4644, { 0xcb, 0x4e });
        gbc.writeMem(0xb032, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x496b);
        EXPECT(gbc.pc(), 0x4646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb032), 0x7f);
        // CB 4E 00A7
        gbc.setState(0x617a, 0x72fb, 0xe3f0, 0xc3ea, 0x2387, 0x4778, 0x0, 0x1);
        gbc.writeMem(0x4778, { 0x58 });
        gbc.writeMem(0x617a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x72fb);
        EXPECT(gbc.pc(), 0x617c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00A8
        gbc.setState(0x121e, 0x7a4b, 0x8c80, 0x7585, 0x4558, 0xe5e7, 0x0, 0x0);
        gbc.writeMem(0x121e, { 0xcb, 0x4e });
        gbc.writeMem(0xe5e7, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7a4b);
        EXPECT(gbc.pc(), 0x1220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5e7), 0x7d);
        // CB 4E 00A9
        gbc.setState(0x3f54, 0x6f8b, 0x8400, 0x4122, 0x770b, 0x4ec2, 0x0, 0x0);
        gbc.writeMem(0x3f54, { 0xcb, 0x4e });
        gbc.writeMem(0x4ec2, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6f8b);
        EXPECT(gbc.pc(), 0x3f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00AA
        gbc.setState(0xc7b5, 0xc17c, 0x1c90, 0x75, 0xbc59, 0x4589, 0x0, 0x0);
        gbc.writeMem(0x4589, { 0x9 });
        gbc.writeMem(0xc7b5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc17c);
        EXPECT(gbc.pc(), 0xc7b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b5), 0xcb);
        EXPECT(gbc.readMem(0xc7b6), 0x4e);
        // CB 4E 00AB
        gbc.setState(0xc6c8, 0x7b4f, 0xd4c0, 0x8c0b, 0x51ad, 0xa085, 0x1, 0x0);
        gbc.writeMem(0xa085, { 0xe8 });
        gbc.writeMem(0xc6c8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7b4f);
        EXPECT(gbc.pc(), 0xc6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa085), 0xe8);
        EXPECT(gbc.readMem(0xc6c8), 0xcb);
        EXPECT(gbc.readMem(0xc6c9), 0x4e);
        // CB 4E 00AC
        gbc.setState(0xa86a, 0x13e2, 0x9920, 0xc531, 0xccf7, 0x9ade, 0x0, 0x0);
        gbc.writeMem(0x9ade, { 0xbc });
        gbc.writeMem(0xa86a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x13e2);
        EXPECT(gbc.pc(), 0xa86c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ade), 0xbc);
        EXPECT(gbc.readMem(0xa86a), 0xcb);
        EXPECT(gbc.readMem(0xa86b), 0x4e);
        // CB 4E 00AD
        gbc.setState(0x6d77, 0xbcb5, 0x2ea0, 0x2f3c, 0xe014, 0x45fc, 0x1, 0x0);
        gbc.writeMem(0x45fc, { 0xd3 });
        gbc.writeMem(0x6d77, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbcb5);
        EXPECT(gbc.pc(), 0x6d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00AF
        gbc.setState(0xb5b2, 0x3831, 0xf910, 0xd239, 0x5b0, 0x3c38, 0x1, 0x1);
        gbc.writeMem(0x3c38, { 0xb2 });
        gbc.writeMem(0xb5b2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3831);
        EXPECT(gbc.pc(), 0xb5b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b2), 0xcb);
        EXPECT(gbc.readMem(0xb5b3), 0x4e);
        // CB 4E 00B0
        gbc.setState(0x950c, 0xa967, 0xdb00, 0xf6e7, 0xeca6, 0x9e2b, 0x0, 0x0);
        gbc.writeMem(0x950c, { 0xcb, 0x4e });
        gbc.writeMem(0x9e2b, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa967);
        EXPECT(gbc.pc(), 0x950e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950c), 0xcb);
        EXPECT(gbc.readMem(0x950d), 0x4e);
        EXPECT(gbc.readMem(0x9e2b), 0x3d);
        // CB 4E 00B2
        gbc.setState(0xba5d, 0x832e, 0x5ac0, 0x7b3f, 0x6fee, 0x4b9f, 0x1, 0x0);
        gbc.writeMem(0x4b9f, { 0x93 });
        gbc.writeMem(0xba5d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x832e);
        EXPECT(gbc.pc(), 0xba5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5d), 0xcb);
        EXPECT(gbc.readMem(0xba5e), 0x4e);
        // CB 4E 00B3
        gbc.setState(0xa77d, 0xc5f0, 0xf8a0, 0x5234, 0x5735, 0x683f, 0x0, 0x0);
        gbc.writeMem(0x683f, { 0x6e });
        gbc.writeMem(0xa77d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc5f0);
        EXPECT(gbc.pc(), 0xa77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77d), 0xcb);
        EXPECT(gbc.readMem(0xa77e), 0x4e);
        // CB 4E 00B4
        gbc.setState(0x5cc, 0xf1e0, 0xfb0, 0x9205, 0xa5db, 0x60a9, 0x1, 0x0);
        gbc.writeMem(0x5cc, { 0xcb, 0x4e });
        gbc.writeMem(0x60a9, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf1e0);
        EXPECT(gbc.pc(), 0x5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00B5
        gbc.setState(0xa171, 0xd3ba, 0x8bf0, 0xe0c0, 0x10b5, 0xa1e8, 0x0, 0x1);
        gbc.writeMem(0xa171, { 0xcb, 0x4e });
        gbc.writeMem(0xa1e8, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd3ba);
        EXPECT(gbc.pc(), 0xa173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa171), 0xcb);
        EXPECT(gbc.readMem(0xa172), 0x4e);
        EXPECT(gbc.readMem(0xa1e8), 0x89);
        // CB 4E 00B6
        gbc.setState(0xdc7d, 0x1536, 0x26a0, 0x5fc5, 0x4829, 0xae33, 0x0, 0x0);
        gbc.writeMem(0xae33, { 0x13 });
        gbc.writeMem(0xdc7d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1536);
        EXPECT(gbc.pc(), 0xdc7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae33), 0x13);
        EXPECT(gbc.readMem(0xdc7d), 0xcb);
        EXPECT(gbc.readMem(0xdc7e), 0x4e);
        // CB 4E 00B7
        gbc.setState(0xd542, 0xa783, 0x1240, 0xaca5, 0x5c43, 0x32b4, 0x0, 0x1);
        gbc.writeMem(0x32b4, { 0x79 });
        gbc.writeMem(0xd542, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa783);
        EXPECT(gbc.pc(), 0xd544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd542), 0xcb);
        EXPECT(gbc.readMem(0xd543), 0x4e);
        // CB 4E 00B8
        gbc.setState(0xc4b6, 0xac85, 0x2820, 0xa062, 0xdf53, 0x9864, 0x0, 0x0);
        gbc.writeMem(0x9864, { 0x9 });
        gbc.writeMem(0xc4b6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xac85);
        EXPECT(gbc.pc(), 0xc4b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9864), 0x9);
        EXPECT(gbc.readMem(0xc4b6), 0xcb);
        EXPECT(gbc.readMem(0xc4b7), 0x4e);
        // CB 4E 00B9
        gbc.setState(0xc43a, 0x2058, 0x7890, 0xa289, 0xa328, 0xf9dd, 0x1, 0x0);
        gbc.writeMem(0xc43a, { 0xcb, 0x4e });
        gbc.writeMem(0xf9dd, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2058);
        EXPECT(gbc.pc(), 0xc43c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc43a), 0xcb);
        EXPECT(gbc.readMem(0xc43b), 0x4e);
        EXPECT(gbc.readMem(0xf9dd), 0x1);
        // CB 4E 00BA
        gbc.setState(0xb4e8, 0x7ef8, 0xe050, 0xc5bf, 0xb193, 0xb41a, 0x1, 0x0);
        gbc.writeMem(0xb41a, { 0x60 });
        gbc.writeMem(0xb4e8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7ef8);
        EXPECT(gbc.pc(), 0xb4ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb41a), 0x60);
        EXPECT(gbc.readMem(0xb4e8), 0xcb);
        EXPECT(gbc.readMem(0xb4e9), 0x4e);
        // CB 4E 00BB
        gbc.setState(0x2b4c, 0x5e7e, 0xeea0, 0xeb04, 0x73b6, 0x7c15, 0x1, 0x1);
        gbc.writeMem(0x2b4c, { 0xcb, 0x4e });
        gbc.writeMem(0x7c15, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5e7e);
        EXPECT(gbc.pc(), 0x2b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00BC
        gbc.setState(0x20ff, 0x2c07, 0xf840, 0xbf2e, 0xb54a, 0x8698, 0x0, 0x0);
        gbc.writeMem(0x20ff, { 0xcb, 0x4e });
        gbc.writeMem(0x8698, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2c07);
        EXPECT(gbc.pc(), 0x2101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8698), 0xf0);
        // CB 4E 00BD
        gbc.setState(0xb4f2, 0x6bf6, 0x2370, 0x6b67, 0xbad3, 0xe477, 0x1, 0x1);
        gbc.writeMem(0xb4f2, { 0xcb, 0x4e });
        gbc.writeMem(0xe477, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6bf6);
        EXPECT(gbc.pc(), 0xb4f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f2), 0xcb);
        EXPECT(gbc.readMem(0xb4f3), 0x4e);
        EXPECT(gbc.readMem(0xe477), 0x54);
        // CB 4E 00BE
        gbc.setState(0x372c, 0x64ba, 0x5d80, 0x30f, 0x127, 0xa333, 0x1, 0x1);
        gbc.writeMem(0x372c, { 0xcb, 0x4e });
        gbc.writeMem(0xa333, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x64ba);
        EXPECT(gbc.pc(), 0x372e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa333), 0x28);
        // CB 4E 00BF
        gbc.setState(0x1a5b, 0xefca, 0x4cd0, 0x2462, 0x9c0, 0x523b, 0x0, 0x1);
        gbc.writeMem(0x1a5b, { 0xcb, 0x4e });
        gbc.writeMem(0x523b, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xefca);
        EXPECT(gbc.pc(), 0x1a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00C0
        gbc.setState(0xa3d8, 0x9fb4, 0x9c20, 0xba61, 0x48e2, 0x3b9e, 0x0, 0x1);
        gbc.writeMem(0x3b9e, { 0xe6 });
        gbc.writeMem(0xa3d8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9fb4);
        EXPECT(gbc.pc(), 0xa3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d8), 0xcb);
        EXPECT(gbc.readMem(0xa3d9), 0x4e);
        // CB 4E 00C1
        gbc.setState(0xb664, 0xb990, 0x4db0, 0x8539, 0x9385, 0xb92c, 0x1, 0x1);
        gbc.writeMem(0xb664, { 0xcb, 0x4e });
        gbc.writeMem(0xb92c, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb990);
        EXPECT(gbc.pc(), 0xb666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb664), 0xcb);
        EXPECT(gbc.readMem(0xb665), 0x4e);
        EXPECT(gbc.readMem(0xb92c), 0xec);
        // CB 4E 00C2
        gbc.setState(0x60bb, 0x70ec, 0xc80, 0xc777, 0xc46a, 0xaa7d, 0x1, 0x0);
        gbc.writeMem(0x60bb, { 0xcb, 0x4e });
        gbc.writeMem(0xaa7d, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x70ec);
        EXPECT(gbc.pc(), 0x60bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7d), 0xb9);
        // CB 4E 00C3
        gbc.setState(0xa35a, 0x1a0a, 0x9760, 0x237c, 0xed10, 0xbb5e, 0x0, 0x1);
        gbc.writeMem(0xa35a, { 0xcb, 0x4e });
        gbc.writeMem(0xbb5e, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1a0a);
        EXPECT(gbc.pc(), 0xa35c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35a), 0xcb);
        EXPECT(gbc.readMem(0xa35b), 0x4e);
        EXPECT(gbc.readMem(0xbb5e), 0x5d);
        // CB 4E 00C4
        gbc.setState(0x8f7b, 0x76f, 0xca0, 0xa17c, 0x1a0d, 0x660a, 0x0, 0x1);
        gbc.writeMem(0x660a, { 0xf9 });
        gbc.writeMem(0x8f7b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x76f);
        EXPECT(gbc.pc(), 0x8f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f7b), 0xcb);
        EXPECT(gbc.readMem(0x8f7c), 0x4e);
        // CB 4E 00C5
        gbc.setState(0xb3a, 0xa6, 0x5920, 0x35af, 0xfaff, 0x2b9d, 0x1, 0x0);
        gbc.writeMem(0xb3a, { 0xcb, 0x4e });
        gbc.writeMem(0x2b9d, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa6);
        EXPECT(gbc.pc(), 0xb3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00C6
        gbc.setState(0x7478, 0x2261, 0x50c0, 0xa249, 0xb07f, 0x963f, 0x1, 0x1);
        gbc.writeMem(0x7478, { 0xcb, 0x4e });
        gbc.writeMem(0x963f, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2261);
        EXPECT(gbc.pc(), 0x747a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963f), 0x9a);
        // CB 4E 00C7
        gbc.setState(0x3e0f, 0xd651, 0x18e0, 0xb0e9, 0x3958, 0xd614, 0x1, 0x1);
        gbc.writeMem(0x3e0f, { 0xcb, 0x4e });
        gbc.writeMem(0xd614, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd651);
        EXPECT(gbc.pc(), 0x3e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd614), 0x7e);
        // CB 4E 00C8
        gbc.setState(0x608d, 0x1920, 0xabb0, 0x4237, 0x1d06, 0x7ab7, 0x0, 0x0);
        gbc.writeMem(0x608d, { 0xcb, 0x4e });
        gbc.writeMem(0x7ab7, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1920);
        EXPECT(gbc.pc(), 0x608f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00C9
        gbc.setState(0xdb72, 0x3676, 0x2d30, 0x6e64, 0x1f6c, 0x31a6, 0x0, 0x1);
        gbc.writeMem(0x31a6, { 0xd7 });
        gbc.writeMem(0xdb72, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3676);
        EXPECT(gbc.pc(), 0xdb74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb72), 0xcb);
        EXPECT(gbc.readMem(0xdb73), 0x4e);
        // CB 4E 00CA
        gbc.setState(0xe4c1, 0xf8f4, 0x9660, 0xb63e, 0x66c4, 0x3b19, 0x1, 0x1);
        gbc.writeMem(0x3b19, { 0x5d });
        gbc.writeMem(0xe4c1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf8f4);
        EXPECT(gbc.pc(), 0xe4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c1), 0xcb);
        EXPECT(gbc.readMem(0xe4c2), 0x4e);
        // CB 4E 00CB
        gbc.setState(0xaf0a, 0xa444, 0x9390, 0x629b, 0x5f86, 0x4527, 0x0, 0x0);
        gbc.writeMem(0x4527, { 0xc8 });
        gbc.writeMem(0xaf0a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa444);
        EXPECT(gbc.pc(), 0xaf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf0a), 0xcb);
        EXPECT(gbc.readMem(0xaf0b), 0x4e);
        // CB 4E 00CC
        gbc.setState(0xe1af, 0x3a04, 0xb210, 0x30e7, 0x2847, 0x65de, 0x1, 0x0);
        gbc.writeMem(0x65de, { 0x4a });
        gbc.writeMem(0xe1af, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3a04);
        EXPECT(gbc.pc(), 0xe1b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1af), 0xcb);
        EXPECT(gbc.readMem(0xe1b0), 0x4e);
        // CB 4E 00CD
        gbc.setState(0x49e7, 0x84eb, 0x4c60, 0x5990, 0x6704, 0xb221, 0x1, 0x0);
        gbc.writeMem(0x49e7, { 0xcb, 0x4e });
        gbc.writeMem(0xb221, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x84eb);
        EXPECT(gbc.pc(), 0x49e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb221), 0x1a);
        // CB 4E 00CE
        gbc.setState(0x73e5, 0xb75b, 0x9550, 0xa648, 0xbc78, 0x9567, 0x1, 0x1);
        gbc.writeMem(0x73e5, { 0xcb, 0x4e });
        gbc.writeMem(0x9567, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb75b);
        EXPECT(gbc.pc(), 0x73e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9567), 0x9b);
        // CB 4E 00CF
        gbc.setState(0x1875, 0x21bc, 0x32f0, 0xc759, 0x4cf8, 0x9608, 0x1, 0x0);
        gbc.writeMem(0x1875, { 0xcb, 0x4e });
        gbc.writeMem(0x9608, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x21bc);
        EXPECT(gbc.pc(), 0x1877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9608), 0xdd);
        // CB 4E 00D0
        gbc.setState(0x42, 0x47a5, 0xc740, 0x18ea, 0xdc9a, 0xb19e, 0x0, 0x0);
        gbc.writeMem(0x42, { 0xcb, 0x4e });
        gbc.writeMem(0xb19e, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x47a5);
        EXPECT(gbc.pc(), 0x44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19e), 0x9d);
        // CB 4E 00D1
        gbc.setState(0x7fe0, 0x545, 0xe020, 0x4c96, 0xe424, 0x78a6, 0x1, 0x1);
        gbc.writeMem(0x78a6, { 0x72 });
        gbc.writeMem(0x7fe0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x545);
        EXPECT(gbc.pc(), 0x7fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00D2
        gbc.setState(0x448b, 0x8435, 0xfa90, 0x5471, 0x67f9, 0xef05, 0x1, 0x1);
        gbc.writeMem(0x448b, { 0xcb, 0x4e });
        gbc.writeMem(0xef05, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8435);
        EXPECT(gbc.pc(), 0x448d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef05), 0xfa);
        // CB 4E 00D3
        gbc.setState(0x26e3, 0x662c, 0xd810, 0x31a3, 0xaf30, 0x44d2, 0x1, 0x0);
        gbc.writeMem(0x26e3, { 0xcb, 0x4e });
        gbc.writeMem(0x44d2, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x662c);
        EXPECT(gbc.pc(), 0x26e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00D4
        gbc.setState(0x3b2d, 0xc214, 0x3450, 0xcf9d, 0x57f0, 0x47e3, 0x1, 0x0);
        gbc.writeMem(0x3b2d, { 0xcb, 0x4e });
        gbc.writeMem(0x47e3, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc214);
        EXPECT(gbc.pc(), 0x3b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00D5
        gbc.setState(0xc149, 0x3fd4, 0x4880, 0x1b27, 0x408d, 0xa7d6, 0x0, 0x1);
        gbc.writeMem(0xa7d6, { 0x65 });
        gbc.writeMem(0xc149, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3fd4);
        EXPECT(gbc.pc(), 0xc14b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d6), 0x65);
        EXPECT(gbc.readMem(0xc149), 0xcb);
        EXPECT(gbc.readMem(0xc14a), 0x4e);
        // CB 4E 00D6
        gbc.setState(0x7f16, 0x88f6, 0x9010, 0xf2e0, 0xf869, 0x6609, 0x0, 0x0);
        gbc.writeMem(0x6609, { 0x87 });
        gbc.writeMem(0x7f16, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x88f6);
        EXPECT(gbc.pc(), 0x7f18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00D7
        gbc.setState(0x979, 0x487, 0xe20, 0xd959, 0xfba6, 0x3aa1, 0x1, 0x0);
        gbc.writeMem(0x979, { 0xcb, 0x4e });
        gbc.writeMem(0x3aa1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x487);
        EXPECT(gbc.pc(), 0x97b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00D8
        gbc.setState(0x2b32, 0x824a, 0xfb40, 0x6a30, 0xf32d, 0xb64e, 0x1, 0x0);
        gbc.writeMem(0x2b32, { 0xcb, 0x4e });
        gbc.writeMem(0xb64e, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x824a);
        EXPECT(gbc.pc(), 0x2b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb64e), 0x76);
        // CB 4E 00DA
        gbc.setState(0xae2, 0x999d, 0xce40, 0xfcaa, 0xecc8, 0x26fd, 0x0, 0x1);
        gbc.writeMem(0xae2, { 0xcb, 0x4e });
        gbc.writeMem(0x26fd, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x999d);
        EXPECT(gbc.pc(), 0xae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00DB
        gbc.setState(0xab5a, 0x5f7b, 0x5960, 0x6f39, 0x8d8f, 0x7631, 0x1, 0x1);
        gbc.writeMem(0x7631, { 0x7a });
        gbc.writeMem(0xab5a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5f7b);
        EXPECT(gbc.pc(), 0xab5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5a), 0xcb);
        EXPECT(gbc.readMem(0xab5b), 0x4e);
        // CB 4E 00DC
        gbc.setState(0x3cde, 0x9438, 0x12f0, 0x6920, 0x9632, 0x9805, 0x1, 0x0);
        gbc.writeMem(0x3cde, { 0xcb, 0x4e });
        gbc.writeMem(0x9805, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9438);
        EXPECT(gbc.pc(), 0x3ce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9805), 0xaf);
        // CB 4E 00DD
        gbc.setState(0xc8b5, 0xb66b, 0x2120, 0xc969, 0xa2a3, 0xee2c, 0x1, 0x1);
        gbc.writeMem(0xc8b5, { 0xcb, 0x4e });
        gbc.writeMem(0xee2c, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb66b);
        EXPECT(gbc.pc(), 0xc8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b5), 0xcb);
        EXPECT(gbc.readMem(0xc8b6), 0x4e);
        EXPECT(gbc.readMem(0xee2c), 0x58);
        // CB 4E 00DE
        gbc.setState(0x3099, 0x7761, 0xa9e0, 0xad05, 0x7362, 0x77c3, 0x1, 0x0);
        gbc.writeMem(0x3099, { 0xcb, 0x4e });
        gbc.writeMem(0x77c3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7761);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00DF
        gbc.setState(0x57ae, 0xcaeb, 0x4f30, 0xb62e, 0xe2d9, 0xe166, 0x1, 0x0);
        gbc.writeMem(0x57ae, { 0xcb, 0x4e });
        gbc.writeMem(0xe166, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xcaeb);
        EXPECT(gbc.pc(), 0x57b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe166), 0x29);
        // CB 4E 00E0
        gbc.setState(0xccfc, 0xaf3f, 0x84a0, 0x8eb7, 0x534e, 0xfc0d, 0x1, 0x1);
        gbc.writeMem(0xccfc, { 0xcb, 0x4e });
        gbc.writeMem(0xfc0d, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaf3f);
        EXPECT(gbc.pc(), 0xccfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfc), 0xcb);
        EXPECT(gbc.readMem(0xccfd), 0x4e);
        EXPECT(gbc.readMem(0xfc0d), 0xee);
        // CB 4E 00E1
        gbc.setState(0x7be6, 0xd1c3, 0xee00, 0xf0f7, 0xa5ac, 0x7809, 0x1, 0x0);
        gbc.writeMem(0x7809, { 0x74 });
        gbc.writeMem(0x7be6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd1c3);
        EXPECT(gbc.pc(), 0x7be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00E2
        gbc.setState(0x9b4b, 0x182, 0xa450, 0xa61c, 0xec7a, 0x860a, 0x0, 0x1);
        gbc.writeMem(0x860a, { 0x3e });
        gbc.writeMem(0x9b4b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x182);
        EXPECT(gbc.pc(), 0x9b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860a), 0x3e);
        EXPECT(gbc.readMem(0x9b4b), 0xcb);
        EXPECT(gbc.readMem(0x9b4c), 0x4e);
        // CB 4E 00E3
        gbc.setState(0xfe3, 0xb88b, 0xb090, 0xadeb, 0xcde6, 0x3a19, 0x0, 0x1);
        gbc.writeMem(0xfe3, { 0xcb, 0x4e });
        gbc.writeMem(0x3a19, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb88b);
        EXPECT(gbc.pc(), 0xfe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00E4
        gbc.setState(0x3c4e, 0x7f4, 0x2c20, 0x9c3, 0x7171, 0x8aea, 0x1, 0x1);
        gbc.writeMem(0x3c4e, { 0xcb, 0x4e });
        gbc.writeMem(0x8aea, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7f4);
        EXPECT(gbc.pc(), 0x3c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aea), 0x6b);
        // CB 4E 00E5
        gbc.setState(0xe9cc, 0x48bf, 0x4bc0, 0x1616, 0xab2d, 0x26e4, 0x0, 0x1);
        gbc.writeMem(0x26e4, { 0x68 });
        gbc.writeMem(0xe9cc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x48bf);
        EXPECT(gbc.pc(), 0xe9ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9cc), 0xcb);
        EXPECT(gbc.readMem(0xe9cd), 0x4e);
        // CB 4E 00E6
        gbc.setState(0x131d, 0xbe3e, 0x5b90, 0x1567, 0x1b8c, 0x41d4, 0x0, 0x0);
        gbc.writeMem(0x131d, { 0xcb, 0x4e });
        gbc.writeMem(0x41d4, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbe3e);
        EXPECT(gbc.pc(), 0x131f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00E7
        gbc.setState(0x77eb, 0xa90, 0xb2d0, 0x653, 0x5a3e, 0x55da, 0x0, 0x1);
        gbc.writeMem(0x55da, { 0xb2 });
        gbc.writeMem(0x77eb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa90);
        EXPECT(gbc.pc(), 0x77ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 00E8
        gbc.setState(0xee77, 0xc574, 0x6f50, 0x3e9c, 0x204, 0x9035, 0x0, 0x0);
        gbc.writeMem(0x9035, { 0xa0 });
        gbc.writeMem(0xee77, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc574);
        EXPECT(gbc.pc(), 0xee79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9035), 0xa0);
        EXPECT(gbc.readMem(0xee77), 0xcb);
        EXPECT(gbc.readMem(0xee78), 0x4e);
        // CB 4E 00E9
        gbc.setState(0x8b93, 0x1253, 0x7890, 0x48e4, 0x1702, 0x693c, 0x0, 0x0);
        gbc.writeMem(0x693c, { 0x7f });
        gbc.writeMem(0x8b93, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1253);
        EXPECT(gbc.pc(), 0x8b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b93), 0xcb);
        EXPECT(gbc.readMem(0x8b94), 0x4e);
        // CB 4E 00EA
        gbc.setState(0x7465, 0x6d38, 0x7b90, 0x3cd8, 0xd3e2, 0xa7c2, 0x0, 0x0);
        gbc.writeMem(0x7465, { 0xcb, 0x4e });
        gbc.writeMem(0xa7c2, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6d38);
        EXPECT(gbc.pc(), 0x7467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c2), 0x20);
        // CB 4E 00EB
        gbc.setState(0xbd10, 0x1bf3, 0xa8f0, 0xa01, 0xfec3, 0xf7aa, 0x0, 0x1);
        gbc.writeMem(0xbd10, { 0xcb, 0x4e });
        gbc.writeMem(0xf7aa, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1bf3);
        EXPECT(gbc.pc(), 0xbd12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd10), 0xcb);
        EXPECT(gbc.readMem(0xbd11), 0x4e);
        EXPECT(gbc.readMem(0xf7aa), 0x9c);
        // CB 4E 00EC
        gbc.setState(0xbb9f, 0xa412, 0x4a10, 0xb9b0, 0x6177, 0x9c1c, 0x1, 0x0);
        gbc.writeMem(0x9c1c, { 0x38 });
        gbc.writeMem(0xbb9f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa412);
        EXPECT(gbc.pc(), 0xbba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1c), 0x38);
        EXPECT(gbc.readMem(0xbb9f), 0xcb);
        EXPECT(gbc.readMem(0xbba0), 0x4e);
        // CB 4E 00EE
        gbc.setState(0x552b, 0xbab8, 0x4af0, 0x558c, 0xd68d, 0xca80, 0x1, 0x1);
        gbc.writeMem(0x552b, { 0xcb, 0x4e });
        gbc.writeMem(0xca80, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbab8);
        EXPECT(gbc.pc(), 0x552d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca80), 0x3);
        // CB 4E 00EF
        gbc.setState(0x6c63, 0x36fa, 0x1800, 0x4ec5, 0xc060, 0xbac2, 0x1, 0x0);
        gbc.writeMem(0x6c63, { 0xcb, 0x4e });
        gbc.writeMem(0xbac2, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x36fa);
        EXPECT(gbc.pc(), 0x6c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac2), 0xc4);
        // CB 4E 00F0
        gbc.setState(0x82d9, 0xd645, 0xace0, 0x51e6, 0xe0e2, 0x15cd, 0x1, 0x0);
        gbc.writeMem(0x15cd, { 0xa3 });
        gbc.writeMem(0x82d9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd645);
        EXPECT(gbc.pc(), 0x82db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d9), 0xcb);
        EXPECT(gbc.readMem(0x82da), 0x4e);
        // CB 4E 00F1
        gbc.setState(0xd90b, 0xa835, 0x3320, 0xfa43, 0x2625, 0x6efe, 0x1, 0x0);
        gbc.writeMem(0x6efe, { 0xfd });
        gbc.writeMem(0xd90b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa835);
        EXPECT(gbc.pc(), 0xd90d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90b), 0xcb);
        EXPECT(gbc.readMem(0xd90c), 0x4e);
        // CB 4E 00F2
        gbc.setState(0x5c63, 0xba28, 0xcee0, 0x5304, 0x878b, 0x2aff, 0x1, 0x0);
        gbc.writeMem(0x2aff, { 0xfa });
        gbc.writeMem(0x5c63, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xba28);
        EXPECT(gbc.pc(), 0x5c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00F3
        gbc.setState(0x270b, 0xe2ba, 0xe1e0, 0xaf93, 0x999d, 0x50f1, 0x1, 0x0);
        gbc.writeMem(0x270b, { 0xcb, 0x4e });
        gbc.writeMem(0x50f1, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe2ba);
        EXPECT(gbc.pc(), 0x270d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00F4
        gbc.setState(0x22e4, 0x12dd, 0x8a20, 0xa6aa, 0x7f50, 0x7fc4, 0x0, 0x0);
        gbc.writeMem(0x22e4, { 0xcb, 0x4e });
        gbc.writeMem(0x7fc4, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x12dd);
        EXPECT(gbc.pc(), 0x22e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00F5
        gbc.setState(0xef90, 0x9cad, 0x7d90, 0x1fbe, 0x12f2, 0x6ab6, 0x1, 0x1);
        gbc.writeMem(0x6ab6, { 0xcd });
        gbc.writeMem(0xef90, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9cad);
        EXPECT(gbc.pc(), 0xef92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef90), 0xcb);
        EXPECT(gbc.readMem(0xef91), 0x4e);
        // CB 4E 00F7
        gbc.setState(0xd9ae, 0xdf75, 0x3970, 0x4704, 0x2061, 0xeabb, 0x1, 0x1);
        gbc.writeMem(0xd9ae, { 0xcb, 0x4e });
        gbc.writeMem(0xeabb, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdf75);
        EXPECT(gbc.pc(), 0xd9b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ae), 0xcb);
        EXPECT(gbc.readMem(0xd9af), 0x4e);
        EXPECT(gbc.readMem(0xeabb), 0xca);
        // CB 4E 00F8
        gbc.setState(0x4925, 0x2a3a, 0x3420, 0xc8b, 0x12da, 0x4f2b, 0x0, 0x0);
        gbc.writeMem(0x4925, { 0xcb, 0x4e });
        gbc.writeMem(0x4f2b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2a3a);
        EXPECT(gbc.pc(), 0x4927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 00F9
        gbc.setState(0x3995, 0xb918, 0xf3f0, 0xd741, 0xfe2f, 0xb816, 0x1, 0x0);
        gbc.writeMem(0x3995, { 0xcb, 0x4e });
        gbc.writeMem(0xb816, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb918);
        EXPECT(gbc.pc(), 0x3997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb816), 0xc9);
        // CB 4E 00FA
        gbc.setState(0x950a, 0x7a3c, 0xc8b0, 0x4377, 0x5e53, 0x2813, 0x1, 0x1);
        gbc.writeMem(0x2813, { 0x40 });
        gbc.writeMem(0x950a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7a3c);
        EXPECT(gbc.pc(), 0x950c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950a), 0xcb);
        EXPECT(gbc.readMem(0x950b), 0x4e);
        // CB 4E 00FB
        gbc.setState(0xd439, 0xd94, 0x9690, 0x3869, 0x1c8a, 0x5535, 0x0, 0x0);
        gbc.writeMem(0x5535, { 0xef });
        gbc.writeMem(0xd439, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd94);
        EXPECT(gbc.pc(), 0xd43b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd439), 0xcb);
        EXPECT(gbc.readMem(0xd43a), 0x4e);
        // CB 4E 00FC
        gbc.setState(0x5fdb, 0x5c4f, 0xcf40, 0xde13, 0x1cf0, 0x8764, 0x0, 0x0);
        gbc.writeMem(0x5fdb, { 0xcb, 0x4e });
        gbc.writeMem(0x8764, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5c4f);
        EXPECT(gbc.pc(), 0x5fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8764), 0x47);
        // CB 4E 00FD
        gbc.setState(0xe3c4, 0x579b, 0x7d30, 0x92bf, 0xae53, 0x599d, 0x0, 0x0);
        gbc.writeMem(0x599d, { 0x24 });
        gbc.writeMem(0xe3c4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x579b);
        EXPECT(gbc.pc(), 0xe3c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c4), 0xcb);
        EXPECT(gbc.readMem(0xe3c5), 0x4e);
        // CB 4E 00FE
        gbc.setState(0xa2b1, 0x533d, 0x6d0, 0xeed0, 0xfbaf, 0x6945, 0x0, 0x1);
        gbc.writeMem(0x6945, { 0xd2 });
        gbc.writeMem(0xa2b1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x533d);
        EXPECT(gbc.pc(), 0xa2b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b1), 0xcb);
        EXPECT(gbc.readMem(0xa2b2), 0x4e);
        // CB 4E 00FF
        gbc.setState(0x34c9, 0xd92, 0x24d0, 0xd8e8, 0x16cf, 0x1567, 0x0, 0x1);
        gbc.writeMem(0x1567, { 0x7 });
        gbc.writeMem(0x34c9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd92);
        EXPECT(gbc.pc(), 0x34cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0101
        gbc.setState(0x7af7, 0x1f, 0xff10, 0xfa2, 0xb90a, 0x4461, 0x0, 0x1);
        gbc.writeMem(0x4461, { 0xdb });
        gbc.writeMem(0x7af7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1f);
        EXPECT(gbc.pc(), 0x7af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0102
        gbc.setState(0x941f, 0xb151, 0x79c0, 0x507e, 0xb7eb, 0x3a80, 0x1, 0x1);
        gbc.writeMem(0x3a80, { 0xc1 });
        gbc.writeMem(0x941f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb151);
        EXPECT(gbc.pc(), 0x9421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x941f), 0xcb);
        EXPECT(gbc.readMem(0x9420), 0x4e);
        // CB 4E 0103
        gbc.setState(0x3016, 0xa55a, 0x6f30, 0xacb1, 0xce68, 0x4518, 0x0, 0x1);
        gbc.writeMem(0x3016, { 0xcb, 0x4e });
        gbc.writeMem(0x4518, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa55a);
        EXPECT(gbc.pc(), 0x3018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0104
        gbc.setState(0x9dbb, 0x883b, 0x79c0, 0xcaba, 0xc3fe, 0xadf2, 0x0, 0x0);
        gbc.writeMem(0x9dbb, { 0xcb, 0x4e });
        gbc.writeMem(0xadf2, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x883b);
        EXPECT(gbc.pc(), 0x9dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dbb), 0xcb);
        EXPECT(gbc.readMem(0x9dbc), 0x4e);
        EXPECT(gbc.readMem(0xadf2), 0x7b);
        // CB 4E 0105
        gbc.setState(0x8350, 0x5f44, 0x5790, 0x6136, 0x50dd, 0x79ce, 0x1, 0x0);
        gbc.writeMem(0x79ce, { 0x81 });
        gbc.writeMem(0x8350, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5f44);
        EXPECT(gbc.pc(), 0x8352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8350), 0xcb);
        EXPECT(gbc.readMem(0x8351), 0x4e);
        // CB 4E 0106
        gbc.setState(0xa659, 0x88ab, 0x2860, 0x9dc, 0x2f19, 0x376e, 0x1, 0x1);
        gbc.writeMem(0x376e, { 0xd8 });
        gbc.writeMem(0xa659, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x88ab);
        EXPECT(gbc.pc(), 0xa65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa659), 0xcb);
        EXPECT(gbc.readMem(0xa65a), 0x4e);
        // CB 4E 0107
        gbc.setState(0x387f, 0x8ee7, 0xc340, 0xae48, 0x2ee0, 0x3bfe, 0x0, 0x0);
        gbc.writeMem(0x387f, { 0xcb, 0x4e });
        gbc.writeMem(0x3bfe, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8ee7);
        EXPECT(gbc.pc(), 0x3881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0108
        gbc.setState(0xacf3, 0x4c87, 0xd390, 0x2dbe, 0x95ff, 0xd50a, 0x0, 0x1);
        gbc.writeMem(0xacf3, { 0xcb, 0x4e });
        gbc.writeMem(0xd50a, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4c87);
        EXPECT(gbc.pc(), 0xacf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacf3), 0xcb);
        EXPECT(gbc.readMem(0xacf4), 0x4e);
        EXPECT(gbc.readMem(0xd50a), 0xd5);
        // CB 4E 0109
        gbc.setState(0x6e54, 0x8346, 0xd570, 0xae97, 0x6be8, 0x9ad0, 0x0, 0x1);
        gbc.writeMem(0x6e54, { 0xcb, 0x4e });
        gbc.writeMem(0x9ad0, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8346);
        EXPECT(gbc.pc(), 0x6e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad0), 0x2b);
        // CB 4E 010A
        gbc.setState(0x2acd, 0x75aa, 0x1510, 0x20aa, 0xee02, 0x521a, 0x0, 0x0);
        gbc.writeMem(0x2acd, { 0xcb, 0x4e });
        gbc.writeMem(0x521a, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x75aa);
        EXPECT(gbc.pc(), 0x2acf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 010B
        gbc.setState(0x7222, 0xacb7, 0x6470, 0x687, 0x4d3a, 0xb16e, 0x0, 0x0);
        gbc.writeMem(0x7222, { 0xcb, 0x4e });
        gbc.writeMem(0xb16e, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xacb7);
        EXPECT(gbc.pc(), 0x7224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16e), 0x38);
        // CB 4E 010C
        gbc.setState(0xe852, 0xc188, 0xb860, 0x8b30, 0x8c9e, 0x6401, 0x1, 0x1);
        gbc.writeMem(0x6401, { 0xa5 });
        gbc.writeMem(0xe852, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc188);
        EXPECT(gbc.pc(), 0xe854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe852), 0xcb);
        EXPECT(gbc.readMem(0xe853), 0x4e);
        // CB 4E 010D
        gbc.setState(0xa249, 0x5378, 0x8b20, 0xdbd3, 0x5e54, 0xdbdc, 0x0, 0x1);
        gbc.writeMem(0xa249, { 0xcb, 0x4e });
        gbc.writeMem(0xdbdc, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5378);
        EXPECT(gbc.pc(), 0xa24b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa249), 0xcb);
        EXPECT(gbc.readMem(0xa24a), 0x4e);
        EXPECT(gbc.readMem(0xdbdc), 0x72);
        // CB 4E 010E
        gbc.setState(0x7966, 0x5b71, 0xe860, 0x200f, 0xfdcd, 0xec4e, 0x1, 0x0);
        gbc.writeMem(0x7966, { 0xcb, 0x4e });
        gbc.writeMem(0xec4e, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5b71);
        EXPECT(gbc.pc(), 0x7968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec4e), 0xdf);
        // CB 4E 010F
        gbc.setState(0xd5e3, 0xfab7, 0x3430, 0xafb3, 0x66e4, 0x376c, 0x1, 0x1);
        gbc.writeMem(0x376c, { 0xd0 });
        gbc.writeMem(0xd5e3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfab7);
        EXPECT(gbc.pc(), 0xd5e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e3), 0xcb);
        EXPECT(gbc.readMem(0xd5e4), 0x4e);
        // CB 4E 0110
        gbc.setState(0x46e2, 0x79f0, 0x96f0, 0x9b59, 0x6c9f, 0x5e90, 0x1, 0x0);
        gbc.writeMem(0x46e2, { 0xcb, 0x4e });
        gbc.writeMem(0x5e90, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x79f0);
        EXPECT(gbc.pc(), 0x46e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0111
        gbc.setState(0xd3e6, 0xf974, 0xf490, 0x191b, 0xea61, 0x8bea, 0x1, 0x0);
        gbc.writeMem(0x8bea, { 0xd6 });
        gbc.writeMem(0xd3e6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf974);
        EXPECT(gbc.pc(), 0xd3e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bea), 0xd6);
        EXPECT(gbc.readMem(0xd3e6), 0xcb);
        EXPECT(gbc.readMem(0xd3e7), 0x4e);
        // CB 4E 0112
        gbc.setState(0xe713, 0x4297, 0xa710, 0x52b8, 0x468b, 0x10f2, 0x1, 0x0);
        gbc.writeMem(0x10f2, { 0xde });
        gbc.writeMem(0xe713, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4297);
        EXPECT(gbc.pc(), 0xe715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe713), 0xcb);
        EXPECT(gbc.readMem(0xe714), 0x4e);
        // CB 4E 0113
        gbc.setState(0x72f3, 0x9e88, 0x6020, 0x57, 0x3c42, 0x1ea4, 0x0, 0x1);
        gbc.writeMem(0x1ea4, { 0x62 });
        gbc.writeMem(0x72f3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9e88);
        EXPECT(gbc.pc(), 0x72f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0114
        gbc.setState(0x2def, 0x3c60, 0x690, 0x80c6, 0xf38f, 0x5322, 0x0, 0x0);
        gbc.writeMem(0x2def, { 0xcb, 0x4e });
        gbc.writeMem(0x5322, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3c60);
        EXPECT(gbc.pc(), 0x2df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0115
        gbc.setState(0xca6, 0xdf8a, 0x6700, 0xeff4, 0xb126, 0x39eb, 0x1, 0x1);
        gbc.writeMem(0xca6, { 0xcb, 0x4e });
        gbc.writeMem(0x39eb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdf8a);
        EXPECT(gbc.pc(), 0xca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0116
        gbc.setState(0x8942, 0x3287, 0x1340, 0xb701, 0x1139, 0x3ca, 0x0, 0x1);
        gbc.writeMem(0x3ca, { 0x71 });
        gbc.writeMem(0x8942, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3287);
        EXPECT(gbc.pc(), 0x8944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8942), 0xcb);
        EXPECT(gbc.readMem(0x8943), 0x4e);
        // CB 4E 0117
        gbc.setState(0x192e, 0xf904, 0x2f20, 0x1ab1, 0x4ad8, 0x6e6, 0x1, 0x0);
        gbc.writeMem(0x6e6, { 0x2 });
        gbc.writeMem(0x192e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf904);
        EXPECT(gbc.pc(), 0x1930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0118
        gbc.setState(0x81ba, 0x842e, 0x5270, 0x9397, 0xa171, 0x91a6, 0x0, 0x1);
        gbc.writeMem(0x81ba, { 0xcb, 0x4e });
        gbc.writeMem(0x91a6, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x842e);
        EXPECT(gbc.pc(), 0x81bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ba), 0xcb);
        EXPECT(gbc.readMem(0x81bb), 0x4e);
        EXPECT(gbc.readMem(0x91a6), 0x10);
        // CB 4E 011A
        gbc.setState(0xce1c, 0x39ec, 0x5710, 0x49f3, 0xe9d8, 0x809d, 0x1, 0x1);
        gbc.writeMem(0x809d, { 0x5f });
        gbc.writeMem(0xce1c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x39ec);
        EXPECT(gbc.pc(), 0xce1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809d), 0x5f);
        EXPECT(gbc.readMem(0xce1c), 0xcb);
        EXPECT(gbc.readMem(0xce1d), 0x4e);
        // CB 4E 011B
        gbc.setState(0x5391, 0x1d6e, 0x6040, 0x1d15, 0x17f0, 0xb789, 0x0, 0x1);
        gbc.writeMem(0x5391, { 0xcb, 0x4e });
        gbc.writeMem(0xb789, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1d6e);
        EXPECT(gbc.pc(), 0x5393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb789), 0x96);
        // CB 4E 011C
        gbc.setState(0xc745, 0x74ad, 0x5ce0, 0x9981, 0xb339, 0xcbb, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0xbd });
        gbc.writeMem(0xc745, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x74ad);
        EXPECT(gbc.pc(), 0xc747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc745), 0xcb);
        EXPECT(gbc.readMem(0xc746), 0x4e);
        // CB 4E 011D
        gbc.setState(0xeb5d, 0x1b7f, 0x7640, 0xed5, 0xfb3c, 0xe0e4, 0x0, 0x1);
        gbc.writeMem(0xe0e4, { 0x13 });
        gbc.writeMem(0xeb5d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1b7f);
        EXPECT(gbc.pc(), 0xeb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e4), 0x13);
        EXPECT(gbc.readMem(0xeb5d), 0xcb);
        EXPECT(gbc.readMem(0xeb5e), 0x4e);
        // CB 4E 011E
        gbc.setState(0x38dc, 0xb553, 0x2d70, 0x578b, 0xb40, 0xd524, 0x0, 0x1);
        gbc.writeMem(0x38dc, { 0xcb, 0x4e });
        gbc.writeMem(0xd524, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb553);
        EXPECT(gbc.pc(), 0x38de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd524), 0x2);
        // CB 4E 011F
        gbc.setState(0x25cb, 0xc1b5, 0x47e0, 0xcf41, 0x4756, 0x84f1, 0x1, 0x1);
        gbc.writeMem(0x25cb, { 0xcb, 0x4e });
        gbc.writeMem(0x84f1, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc1b5);
        EXPECT(gbc.pc(), 0x25cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f1), 0xde);
        // CB 4E 0120
        gbc.setState(0xcdc7, 0x858, 0x5290, 0x327c, 0xf630, 0x8f47, 0x0, 0x1);
        gbc.writeMem(0x8f47, { 0x92 });
        gbc.writeMem(0xcdc7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x858);
        EXPECT(gbc.pc(), 0xcdc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f47), 0x92);
        EXPECT(gbc.readMem(0xcdc7), 0xcb);
        EXPECT(gbc.readMem(0xcdc8), 0x4e);
        // CB 4E 0121
        gbc.setState(0x8dbc, 0x2ed9, 0xe0f0, 0x581c, 0x6df2, 0x35c4, 0x0, 0x1);
        gbc.writeMem(0x35c4, { 0x7b });
        gbc.writeMem(0x8dbc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2ed9);
        EXPECT(gbc.pc(), 0x8dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dbc), 0xcb);
        EXPECT(gbc.readMem(0x8dbd), 0x4e);
        // CB 4E 0122
        gbc.setState(0x8285, 0x147a, 0x9d10, 0xf7bf, 0x42bf, 0xd1d3, 0x1, 0x0);
        gbc.writeMem(0x8285, { 0xcb, 0x4e });
        gbc.writeMem(0xd1d3, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x147a);
        EXPECT(gbc.pc(), 0x8287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8285), 0xcb);
        EXPECT(gbc.readMem(0x8286), 0x4e);
        EXPECT(gbc.readMem(0xd1d3), 0x64);
        // CB 4E 0123
        gbc.setState(0x67db, 0xc6ea, 0x72c0, 0x7c1e, 0x8261, 0x4411, 0x0, 0x0);
        gbc.writeMem(0x4411, { 0x29 });
        gbc.writeMem(0x67db, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc6ea);
        EXPECT(gbc.pc(), 0x67dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0124
        gbc.setState(0x3cd3, 0x52f6, 0xf2e0, 0xacb1, 0xd589, 0x5b62, 0x0, 0x0);
        gbc.writeMem(0x3cd3, { 0xcb, 0x4e });
        gbc.writeMem(0x5b62, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x52f6);
        EXPECT(gbc.pc(), 0x3cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0125
        gbc.setState(0xa57b, 0xc937, 0x3630, 0x1cd4, 0x99d3, 0x47a8, 0x0, 0x1);
        gbc.writeMem(0x47a8, { 0x98 });
        gbc.writeMem(0xa57b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc937);
        EXPECT(gbc.pc(), 0xa57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa57b), 0xcb);
        EXPECT(gbc.readMem(0xa57c), 0x4e);
        // CB 4E 0126
        gbc.setState(0xe884, 0x66ad, 0x5ce0, 0xd85e, 0x7a8f, 0xf6bc, 0x1, 0x0);
        gbc.writeMem(0xe884, { 0xcb, 0x4e });
        gbc.writeMem(0xf6bc, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x66ad);
        EXPECT(gbc.pc(), 0xe886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe884), 0xcb);
        EXPECT(gbc.readMem(0xe885), 0x4e);
        EXPECT(gbc.readMem(0xf6bc), 0xf2);
        // CB 4E 0127
        gbc.setState(0x2f2b, 0xc200, 0xd7d0, 0x68a4, 0xb179, 0x61d3, 0x1, 0x1);
        gbc.writeMem(0x2f2b, { 0xcb, 0x4e });
        gbc.writeMem(0x61d3, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc200);
        EXPECT(gbc.pc(), 0x2f2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0128
        gbc.setState(0xa197, 0xdfe6, 0x9620, 0xda06, 0xef27, 0x6b20, 0x1, 0x0);
        gbc.writeMem(0x6b20, { 0xfb });
        gbc.writeMem(0xa197, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xdfe6);
        EXPECT(gbc.pc(), 0xa199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa197), 0xcb);
        EXPECT(gbc.readMem(0xa198), 0x4e);
        // CB 4E 0129
        gbc.setState(0x5157, 0xa602, 0x17f0, 0xabd8, 0x88a7, 0xedb2, 0x0, 0x1);
        gbc.writeMem(0x5157, { 0xcb, 0x4e });
        gbc.writeMem(0xedb2, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa602);
        EXPECT(gbc.pc(), 0x5159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb2), 0x24);
        // CB 4E 012A
        gbc.setState(0xcbb8, 0x38ef, 0xa120, 0xac19, 0xf4de, 0x90ca, 0x0, 0x0);
        gbc.writeMem(0x90ca, { 0x54 });
        gbc.writeMem(0xcbb8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x38ef);
        EXPECT(gbc.pc(), 0xcbba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ca), 0x54);
        EXPECT(gbc.readMem(0xcbb8), 0xcb);
        EXPECT(gbc.readMem(0xcbb9), 0x4e);
        // CB 4E 012B
        gbc.setState(0x793, 0xa746, 0x9f30, 0x7ab6, 0xe706, 0x5356, 0x0, 0x0);
        gbc.writeMem(0x793, { 0xcb, 0x4e });
        gbc.writeMem(0x5356, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa746);
        EXPECT(gbc.pc(), 0x795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 012C
        gbc.setState(0xb800, 0x2459, 0x7800, 0x274, 0xba4b, 0x57de, 0x0, 0x1);
        gbc.writeMem(0x57de, { 0xb8 });
        gbc.writeMem(0xb800, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2459);
        EXPECT(gbc.pc(), 0xb802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb800), 0xcb);
        EXPECT(gbc.readMem(0xb801), 0x4e);
        // CB 4E 012D
        gbc.setState(0xc3ee, 0x8160, 0x4460, 0x8466, 0xb881, 0x5b26, 0x1, 0x1);
        gbc.writeMem(0x5b26, { 0x47 });
        gbc.writeMem(0xc3ee, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8160);
        EXPECT(gbc.pc(), 0xc3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ee), 0xcb);
        EXPECT(gbc.readMem(0xc3ef), 0x4e);
        // CB 4E 012E
        gbc.setState(0xca2d, 0xe5b3, 0xbd40, 0x3780, 0xf3ca, 0xcd2b, 0x1, 0x1);
        gbc.writeMem(0xca2d, { 0xcb, 0x4e });
        gbc.writeMem(0xcd2b, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe5b3);
        EXPECT(gbc.pc(), 0xca2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2d), 0xcb);
        EXPECT(gbc.readMem(0xca2e), 0x4e);
        EXPECT(gbc.readMem(0xcd2b), 0xe2);
        // CB 4E 012F
        gbc.setState(0xc95c, 0xa707, 0xf7e0, 0xfe35, 0x8fb0, 0xa4e9, 0x1, 0x0);
        gbc.writeMem(0xa4e9, { 0x4b });
        gbc.writeMem(0xc95c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa707);
        EXPECT(gbc.pc(), 0xc95e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e9), 0x4b);
        EXPECT(gbc.readMem(0xc95c), 0xcb);
        EXPECT(gbc.readMem(0xc95d), 0x4e);
        // CB 4E 0130
        gbc.setState(0x6dc6, 0x2e75, 0x29d0, 0x58b1, 0xef82, 0x58ee, 0x0, 0x1);
        gbc.writeMem(0x58ee, { 0x29 });
        gbc.writeMem(0x6dc6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2e75);
        EXPECT(gbc.pc(), 0x6dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0131
        gbc.setState(0x967e, 0x29bf, 0xc370, 0x7c2, 0x3293, 0x26ce, 0x1, 0x1);
        gbc.writeMem(0x26ce, { 0x7e });
        gbc.writeMem(0x967e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x29bf);
        EXPECT(gbc.pc(), 0x9680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x967e), 0xcb);
        EXPECT(gbc.readMem(0x967f), 0x4e);
        // CB 4E 0132
        gbc.setState(0x5cb0, 0x6fce, 0x9290, 0xbde9, 0x5bbf, 0x820e, 0x1, 0x1);
        gbc.writeMem(0x5cb0, { 0xcb, 0x4e });
        gbc.writeMem(0x820e, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6fce);
        EXPECT(gbc.pc(), 0x5cb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x820e), 0xfc);
        // CB 4E 0133
        gbc.setState(0xa50f, 0xa22b, 0x86b0, 0x3952, 0x2c51, 0x58e9, 0x1, 0x1);
        gbc.writeMem(0x58e9, { 0x83 });
        gbc.writeMem(0xa50f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa22b);
        EXPECT(gbc.pc(), 0xa511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50f), 0xcb);
        EXPECT(gbc.readMem(0xa510), 0x4e);
        // CB 4E 0134
        gbc.setState(0x9a50, 0x7806, 0x6440, 0x5782, 0x8537, 0x9d96, 0x0, 0x1);
        gbc.writeMem(0x9a50, { 0xcb, 0x4e });
        gbc.writeMem(0x9d96, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7806);
        EXPECT(gbc.pc(), 0x9a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a50), 0xcb);
        EXPECT(gbc.readMem(0x9a51), 0x4e);
        EXPECT(gbc.readMem(0x9d96), 0xa3);
        // CB 4E 0135
        gbc.setState(0x9db0, 0xd874, 0x5f60, 0x1bda, 0xdeb5, 0x289a, 0x1, 0x0);
        gbc.writeMem(0x289a, { 0xba });
        gbc.writeMem(0x9db0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd874);
        EXPECT(gbc.pc(), 0x9db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db0), 0xcb);
        EXPECT(gbc.readMem(0x9db1), 0x4e);
        // CB 4E 0136
        gbc.setState(0xb101, 0x1449, 0x1830, 0x4b3b, 0x7335, 0xade7, 0x0, 0x0);
        gbc.writeMem(0xade7, { 0x2a });
        gbc.writeMem(0xb101, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1449);
        EXPECT(gbc.pc(), 0xb103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade7), 0x2a);
        EXPECT(gbc.readMem(0xb101), 0xcb);
        EXPECT(gbc.readMem(0xb102), 0x4e);
        // CB 4E 0137
        gbc.setState(0xa282, 0x6a6b, 0xc520, 0x3c42, 0xea36, 0x8914, 0x0, 0x0);
        gbc.writeMem(0x8914, { 0x38 });
        gbc.writeMem(0xa282, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6a6b);
        EXPECT(gbc.pc(), 0xa284);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8914), 0x38);
        EXPECT(gbc.readMem(0xa282), 0xcb);
        EXPECT(gbc.readMem(0xa283), 0x4e);
        // CB 4E 0138
        gbc.setState(0x7e38, 0xe056, 0xa520, 0x3718, 0xd4e5, 0x33dd, 0x1, 0x1);
        gbc.writeMem(0x33dd, { 0xa });
        gbc.writeMem(0x7e38, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe056);
        EXPECT(gbc.pc(), 0x7e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 013A
        gbc.setState(0xebb6, 0x9911, 0xc80, 0x44d6, 0x800d, 0x7f02, 0x1, 0x0);
        gbc.writeMem(0x7f02, { 0x2 });
        gbc.writeMem(0xebb6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9911);
        EXPECT(gbc.pc(), 0xebb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb6), 0xcb);
        EXPECT(gbc.readMem(0xebb7), 0x4e);
        // CB 4E 013B
        gbc.setState(0x358, 0xb346, 0x5460, 0xcfaa, 0x72a2, 0xfa99, 0x0, 0x0);
        gbc.writeMem(0x358, { 0xcb, 0x4e });
        gbc.writeMem(0xfa99, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb346);
        EXPECT(gbc.pc(), 0x35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa99), 0xba);
        // CB 4E 013C
        gbc.setState(0x9679, 0x5538, 0xab40, 0x3aca, 0x8fef, 0x3cf5, 0x1, 0x1);
        gbc.writeMem(0x3cf5, { 0x84 });
        gbc.writeMem(0x9679, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5538);
        EXPECT(gbc.pc(), 0x967b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9679), 0xcb);
        EXPECT(gbc.readMem(0x967a), 0x4e);
        // CB 4E 013D
        gbc.setState(0x62df, 0xba12, 0xa150, 0x8827, 0x6456, 0xdcf5, 0x0, 0x0);
        gbc.writeMem(0x62df, { 0xcb, 0x4e });
        gbc.writeMem(0xdcf5, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xba12);
        EXPECT(gbc.pc(), 0x62e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf5), 0x5e);
        // CB 4E 013E
        gbc.setState(0x772b, 0xbfce, 0xcc50, 0xec8, 0xbdcb, 0x4fe2, 0x1, 0x0);
        gbc.writeMem(0x4fe2, { 0x63 });
        gbc.writeMem(0x772b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbfce);
        EXPECT(gbc.pc(), 0x772d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 013F
        gbc.setState(0xdcce, 0x489a, 0xbb0, 0x48dc, 0x59d4, 0x322c, 0x1, 0x1);
        gbc.writeMem(0x322c, { 0x29 });
        gbc.writeMem(0xdcce, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x489a);
        EXPECT(gbc.pc(), 0xdcd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcce), 0xcb);
        EXPECT(gbc.readMem(0xdccf), 0x4e);
        // CB 4E 0140
        gbc.setState(0x74b0, 0x5352, 0xe70, 0xb439, 0x65cc, 0x755e, 0x0, 0x0);
        gbc.writeMem(0x74b0, { 0xcb, 0x4e });
        gbc.writeMem(0x755e, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5352);
        EXPECT(gbc.pc(), 0x74b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0141
        gbc.setState(0x70b, 0x597c, 0xaaa0, 0xebca, 0xfb86, 0x6a2b, 0x0, 0x1);
        gbc.writeMem(0x70b, { 0xcb, 0x4e });
        gbc.writeMem(0x6a2b, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x597c);
        EXPECT(gbc.pc(), 0x70d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0142
        gbc.setState(0x59b6, 0x96f0, 0x2e20, 0x4d46, 0x3dea, 0xe989, 0x0, 0x1);
        gbc.writeMem(0x59b6, { 0xcb, 0x4e });
        gbc.writeMem(0xe989, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x96f0);
        EXPECT(gbc.pc(), 0x59b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe989), 0x7b);
        // CB 4E 0143
        gbc.setState(0x43bf, 0x5f, 0x1ab0, 0x5772, 0xf084, 0xd18a, 0x0, 0x0);
        gbc.writeMem(0x43bf, { 0xcb, 0x4e });
        gbc.writeMem(0xd18a, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5f);
        EXPECT(gbc.pc(), 0x43c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd18a), 0x8d);
        // CB 4E 0144
        gbc.setState(0x5225, 0xc116, 0x1580, 0x80a1, 0x29bc, 0xd515, 0x1, 0x1);
        gbc.writeMem(0x5225, { 0xcb, 0x4e });
        gbc.writeMem(0xd515, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc116);
        EXPECT(gbc.pc(), 0x5227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd515), 0x23);
        // CB 4E 0145
        gbc.setState(0xd216, 0x5cc0, 0x21b0, 0x2f48, 0xb02, 0xe926, 0x1, 0x0);
        gbc.writeMem(0xd216, { 0xcb, 0x4e });
        gbc.writeMem(0xe926, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5cc0);
        EXPECT(gbc.pc(), 0xd218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd216), 0xcb);
        EXPECT(gbc.readMem(0xd217), 0x4e);
        EXPECT(gbc.readMem(0xe926), 0x12);
        // CB 4E 0146
        gbc.setState(0x6aad, 0x2920, 0x53b0, 0xa876, 0x1354, 0x8693, 0x1, 0x1);
        gbc.writeMem(0x6aad, { 0xcb, 0x4e });
        gbc.writeMem(0x8693, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2920);
        EXPECT(gbc.pc(), 0x6aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8693), 0xa5);
        // CB 4E 0147
        gbc.setState(0xdc3f, 0x8e41, 0xca0, 0x1e9c, 0x6044, 0x689d, 0x1, 0x0);
        gbc.writeMem(0x689d, { 0x4e });
        gbc.writeMem(0xdc3f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8e41);
        EXPECT(gbc.pc(), 0xdc41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc3f), 0xcb);
        EXPECT(gbc.readMem(0xdc40), 0x4e);
        // CB 4E 0148
        gbc.setState(0x7c67, 0x21bb, 0x92a0, 0xd5a6, 0x673d, 0x8f2, 0x0, 0x1);
        gbc.writeMem(0x8f2, { 0x4f });
        gbc.writeMem(0x7c67, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x21bb);
        EXPECT(gbc.pc(), 0x7c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0149
        gbc.setState(0xb822, 0x53e3, 0x2a60, 0xffb1, 0xe24f, 0x922b, 0x1, 0x0);
        gbc.writeMem(0x922b, { 0xab });
        gbc.writeMem(0xb822, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x53e3);
        EXPECT(gbc.pc(), 0xb824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922b), 0xab);
        EXPECT(gbc.readMem(0xb822), 0xcb);
        EXPECT(gbc.readMem(0xb823), 0x4e);
        // CB 4E 014A
        gbc.setState(0x619b, 0x3845, 0x2c50, 0x2b71, 0xde3b, 0x896b, 0x0, 0x0);
        gbc.writeMem(0x619b, { 0xcb, 0x4e });
        gbc.writeMem(0x896b, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3845);
        EXPECT(gbc.pc(), 0x619d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x896b), 0x43);
        // CB 4E 014B
        gbc.setState(0x12f7, 0x1879, 0x20c0, 0x46b1, 0x9baf, 0xaf72, 0x0, 0x1);
        gbc.writeMem(0x12f7, { 0xcb, 0x4e });
        gbc.writeMem(0xaf72, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1879);
        EXPECT(gbc.pc(), 0x12f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf72), 0x73);
        // CB 4E 014C
        gbc.setState(0x8c91, 0xa80d, 0xe970, 0xbed0, 0xb6a6, 0xa46c, 0x1, 0x1);
        gbc.writeMem(0x8c91, { 0xcb, 0x4e });
        gbc.writeMem(0xa46c, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa80d);
        EXPECT(gbc.pc(), 0x8c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c91), 0xcb);
        EXPECT(gbc.readMem(0x8c92), 0x4e);
        EXPECT(gbc.readMem(0xa46c), 0x8e);
        // CB 4E 014D
        gbc.setState(0xc15e, 0xb7b0, 0x9e30, 0x50c1, 0x245f, 0xdd38, 0x0, 0x1);
        gbc.writeMem(0xc15e, { 0xcb, 0x4e });
        gbc.writeMem(0xdd38, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb7b0);
        EXPECT(gbc.pc(), 0xc160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc15e), 0xcb);
        EXPECT(gbc.readMem(0xc15f), 0x4e);
        EXPECT(gbc.readMem(0xdd38), 0xd);
        // CB 4E 014E
        gbc.setState(0x6d90, 0x76d3, 0xf8a0, 0x9eb9, 0xd4c7, 0xaf12, 0x0, 0x0);
        gbc.writeMem(0x6d90, { 0xcb, 0x4e });
        gbc.writeMem(0xaf12, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x76d3);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf12), 0x4);
        // CB 4E 014F
        gbc.setState(0x16e2, 0x4186, 0x7f00, 0xf6cf, 0xa371, 0x8615, 0x0, 0x0);
        gbc.writeMem(0x16e2, { 0xcb, 0x4e });
        gbc.writeMem(0x8615, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4186);
        EXPECT(gbc.pc(), 0x16e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8615), 0xb0);
        // CB 4E 0150
        gbc.setState(0x57e3, 0x8d72, 0x5270, 0x2a31, 0xfeb8, 0xe93e, 0x0, 0x0);
        gbc.writeMem(0x57e3, { 0xcb, 0x4e });
        gbc.writeMem(0xe93e, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8d72);
        EXPECT(gbc.pc(), 0x57e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe93e), 0x15);
        // CB 4E 0151
        gbc.setState(0xa956, 0x55e9, 0x36d0, 0x8077, 0xa49, 0x195b, 0x0, 0x1);
        gbc.writeMem(0x195b, { 0x28 });
        gbc.writeMem(0xa956, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x55e9);
        EXPECT(gbc.pc(), 0xa958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa956), 0xcb);
        EXPECT(gbc.readMem(0xa957), 0x4e);
        // CB 4E 0152
        gbc.setState(0x6dba, 0xa7bb, 0xed20, 0x75e9, 0xa7a6, 0x4091, 0x0, 0x0);
        gbc.writeMem(0x4091, { 0xe7 });
        gbc.writeMem(0x6dba, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa7bb);
        EXPECT(gbc.pc(), 0x6dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0153
        gbc.setState(0xe2c6, 0xa6e1, 0x28c0, 0xaf5e, 0xab4f, 0x7d66, 0x1, 0x1);
        gbc.writeMem(0x7d66, { 0xbc });
        gbc.writeMem(0xe2c6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa6e1);
        EXPECT(gbc.pc(), 0xe2c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c6), 0xcb);
        EXPECT(gbc.readMem(0xe2c7), 0x4e);
        // CB 4E 0154
        gbc.setState(0xaced, 0x7d72, 0x16c0, 0x11bb, 0xd41b, 0xff05, 0x1, 0x1);
        gbc.writeMem(0xaced, { 0xcb, 0x4e });
        gbc.writeMem(0xff05, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7d72);
        EXPECT(gbc.pc(), 0xacef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaced), 0xcb);
        EXPECT(gbc.readMem(0xacee), 0x4e);
        EXPECT(gbc.readMem(0xff05), 0x83);
        // CB 4E 0155
        gbc.setState(0x5f64, 0xfa5e, 0x5f10, 0xc6f6, 0x3e22, 0x4b5e, 0x1, 0x0);
        gbc.writeMem(0x4b5e, { 0xcc });
        gbc.writeMem(0x5f64, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfa5e);
        EXPECT(gbc.pc(), 0x5f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0156
        gbc.setState(0x416b, 0x266d, 0xebe0, 0x1953, 0xe6ad, 0x1a87, 0x0, 0x1);
        gbc.writeMem(0x1a87, { 0x51 });
        gbc.writeMem(0x416b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x266d);
        EXPECT(gbc.pc(), 0x416d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0157
        gbc.setState(0xa6e4, 0x1f5f, 0xc220, 0xdba, 0x6b22, 0x4fa9, 0x0, 0x1);
        gbc.writeMem(0x4fa9, { 0x40 });
        gbc.writeMem(0xa6e4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1f5f);
        EXPECT(gbc.pc(), 0xa6e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e4), 0xcb);
        EXPECT(gbc.readMem(0xa6e5), 0x4e);
        // CB 4E 0158
        gbc.setState(0xa65c, 0xfe37, 0x5210, 0x2742, 0xff61, 0xecc7, 0x1, 0x0);
        gbc.writeMem(0xa65c, { 0xcb, 0x4e });
        gbc.writeMem(0xecc7, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfe37);
        EXPECT(gbc.pc(), 0xa65e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa65c), 0xcb);
        EXPECT(gbc.readMem(0xa65d), 0x4e);
        EXPECT(gbc.readMem(0xecc7), 0x15);
        // CB 4E 0159
        gbc.setState(0x63c2, 0x9ed0, 0xda40, 0xc4cd, 0x6d2b, 0x86fb, 0x1, 0x1);
        gbc.writeMem(0x63c2, { 0xcb, 0x4e });
        gbc.writeMem(0x86fb, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9ed0);
        EXPECT(gbc.pc(), 0x63c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fb), 0x79);
        // CB 4E 015A
        gbc.setState(0x2c27, 0xb506, 0x1850, 0xf34a, 0x1cba, 0x288f, 0x0, 0x0);
        gbc.writeMem(0x288f, { 0xb4 });
        gbc.writeMem(0x2c27, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb506);
        EXPECT(gbc.pc(), 0x2c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 015B
        gbc.setState(0xaba, 0x6046, 0x190, 0x49ff, 0xf4a4, 0x41cd, 0x0, 0x0);
        gbc.writeMem(0xaba, { 0xcb, 0x4e });
        gbc.writeMem(0x41cd, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6046);
        EXPECT(gbc.pc(), 0xabc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 015D
        gbc.setState(0x2c69, 0xaad7, 0xed30, 0xc1f1, 0x1cec, 0xc266, 0x0, 0x1);
        gbc.writeMem(0x2c69, { 0xcb, 0x4e });
        gbc.writeMem(0xc266, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xaad7);
        EXPECT(gbc.pc(), 0x2c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc266), 0xa8);
        // CB 4E 015E
        gbc.setState(0x65d7, 0xee3, 0x4c40, 0x8867, 0xf075, 0x75d7, 0x0, 0x1);
        gbc.writeMem(0x65d7, { 0xcb, 0x4e });
        gbc.writeMem(0x75d7, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xee3);
        EXPECT(gbc.pc(), 0x65d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 015F
        gbc.setState(0x9805, 0xa90c, 0x1110, 0x61fe, 0x736e, 0x97fc, 0x0, 0x0);
        gbc.writeMem(0x97fc, { 0xae });
        gbc.writeMem(0x9805, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa90c);
        EXPECT(gbc.pc(), 0x9807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97fc), 0xae);
        EXPECT(gbc.readMem(0x9805), 0xcb);
        EXPECT(gbc.readMem(0x9806), 0x4e);
        // CB 4E 0160
        gbc.setState(0xb51a, 0x9ced, 0x8cb0, 0x5c83, 0xb431, 0xfb65, 0x0, 0x1);
        gbc.writeMem(0xb51a, { 0xcb, 0x4e });
        gbc.writeMem(0xfb65, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9ced);
        EXPECT(gbc.pc(), 0xb51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51a), 0xcb);
        EXPECT(gbc.readMem(0xb51b), 0x4e);
        EXPECT(gbc.readMem(0xfb65), 0x97);
        // CB 4E 0161
        gbc.setState(0x7b5f, 0x654, 0x4930, 0xcbcf, 0x183a, 0xdb81, 0x1, 0x0);
        gbc.writeMem(0x7b5f, { 0xcb, 0x4e });
        gbc.writeMem(0xdb81, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x654);
        EXPECT(gbc.pc(), 0x7b61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb81), 0x1e);
        // CB 4E 0162
        gbc.setState(0x6bc, 0x64d0, 0xe660, 0x5bb0, 0xff43, 0x37d6, 0x1, 0x1);
        gbc.writeMem(0x6bc, { 0xcb, 0x4e });
        gbc.writeMem(0x37d6, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x64d0);
        EXPECT(gbc.pc(), 0x6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0163
        gbc.setState(0xa190, 0x7907, 0x4a40, 0x1e84, 0x2643, 0xbe3a, 0x0, 0x0);
        gbc.writeMem(0xa190, { 0xcb, 0x4e });
        gbc.writeMem(0xbe3a, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7907);
        EXPECT(gbc.pc(), 0xa192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa190), 0xcb);
        EXPECT(gbc.readMem(0xa191), 0x4e);
        EXPECT(gbc.readMem(0xbe3a), 0x4);
        // CB 4E 0164
        gbc.setState(0x108a, 0x4b7, 0xbab0, 0xbfdd, 0xd52b, 0xaf, 0x1, 0x1);
        gbc.writeMem(0xaf, { 0x54 });
        gbc.writeMem(0x108a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4b7);
        EXPECT(gbc.pc(), 0x108c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0165
        gbc.setState(0x9970, 0x31d7, 0xaf20, 0x88fe, 0xcead, 0x167a, 0x0, 0x1);
        gbc.writeMem(0x167a, { 0xc1 });
        gbc.writeMem(0x9970, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x31d7);
        EXPECT(gbc.pc(), 0x9972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9970), 0xcb);
        EXPECT(gbc.readMem(0x9971), 0x4e);
        // CB 4E 0166
        gbc.setState(0x2756, 0x3059, 0xfee0, 0xf193, 0xc94f, 0xe937, 0x1, 0x1);
        gbc.writeMem(0x2756, { 0xcb, 0x4e });
        gbc.writeMem(0xe937, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3059);
        EXPECT(gbc.pc(), 0x2758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe937), 0x52);
        // CB 4E 0167
        gbc.setState(0xe26, 0x63fb, 0x8270, 0x91df, 0x7b80, 0x14d0, 0x0, 0x0);
        gbc.writeMem(0xe26, { 0xcb, 0x4e });
        gbc.writeMem(0x14d0, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x63fb);
        EXPECT(gbc.pc(), 0xe28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0168
        gbc.setState(0xaecd, 0x7fba, 0x54e0, 0xad72, 0x73c5, 0x539, 0x1, 0x0);
        gbc.writeMem(0x539, { 0xac });
        gbc.writeMem(0xaecd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7fba);
        EXPECT(gbc.pc(), 0xaecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaecd), 0xcb);
        EXPECT(gbc.readMem(0xaece), 0x4e);
        // CB 4E 0169
        gbc.setState(0x6370, 0x75f1, 0x7220, 0xefe6, 0x4473, 0x13d8, 0x1, 0x1);
        gbc.writeMem(0x13d8, { 0x0 });
        gbc.writeMem(0x6370, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x75f1);
        EXPECT(gbc.pc(), 0x6372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 016A
        gbc.setState(0x779b, 0xf55c, 0xb2c0, 0xb731, 0xa86b, 0x74a5, 0x1, 0x1);
        gbc.writeMem(0x74a5, { 0x87 });
        gbc.writeMem(0x779b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf55c);
        EXPECT(gbc.pc(), 0x779d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 016B
        gbc.setState(0x5090, 0x642, 0x1990, 0x7012, 0x7f85, 0x797b, 0x1, 0x0);
        gbc.writeMem(0x5090, { 0xcb, 0x4e });
        gbc.writeMem(0x797b, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x642);
        EXPECT(gbc.pc(), 0x5092);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 016C
        gbc.setState(0x72dc, 0xb0db, 0x2330, 0x1762, 0x526c, 0x8abe, 0x0, 0x0);
        gbc.writeMem(0x72dc, { 0xcb, 0x4e });
        gbc.writeMem(0x8abe, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb0db);
        EXPECT(gbc.pc(), 0x72de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8abe), 0xc5);
        // CB 4E 016D
        gbc.setState(0xb66, 0x251, 0x6b10, 0x9e20, 0x5383, 0xc8fa, 0x1, 0x0);
        gbc.writeMem(0xb66, { 0xcb, 0x4e });
        gbc.writeMem(0xc8fa, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x251);
        EXPECT(gbc.pc(), 0xb68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fa), 0xb7);
        // CB 4E 016E
        gbc.setState(0xbc19, 0x958e, 0x61c0, 0x3bbc, 0x3ff8, 0x9d4b, 0x0, 0x0);
        gbc.writeMem(0x9d4b, { 0x6c });
        gbc.writeMem(0xbc19, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x958e);
        EXPECT(gbc.pc(), 0xbc1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4b), 0x6c);
        EXPECT(gbc.readMem(0xbc19), 0xcb);
        EXPECT(gbc.readMem(0xbc1a), 0x4e);
        // CB 4E 016F
        gbc.setState(0xf3, 0xdeec, 0x2f30, 0x582c, 0x8293, 0x4f7e, 0x1, 0x1);
        gbc.writeMem(0xf3, { 0xcb, 0x4e });
        gbc.writeMem(0x4f7e, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0xf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0170
        gbc.setState(0xa845, 0xe6d7, 0x7590, 0x47e3, 0x11c6, 0x6f4b, 0x0, 0x1);
        gbc.writeMem(0x6f4b, { 0x1e });
        gbc.writeMem(0xa845, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe6d7);
        EXPECT(gbc.pc(), 0xa847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa845), 0xcb);
        EXPECT(gbc.readMem(0xa846), 0x4e);
        // CB 4E 0171
        gbc.setState(0x9fef, 0x587b, 0x6d80, 0x9b21, 0xdd1c, 0xed20, 0x1, 0x0);
        gbc.writeMem(0x9fef, { 0xcb, 0x4e });
        gbc.writeMem(0xed20, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x587b);
        EXPECT(gbc.pc(), 0x9ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fef), 0xcb);
        EXPECT(gbc.readMem(0x9ff0), 0x4e);
        EXPECT(gbc.readMem(0xed20), 0xd0);
        // CB 4E 0172
        gbc.setState(0x5dcd, 0xbffa, 0x7290, 0x2a68, 0x1158, 0x14bf, 0x0, 0x0);
        gbc.writeMem(0x14bf, { 0x71 });
        gbc.writeMem(0x5dcd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xbffa);
        EXPECT(gbc.pc(), 0x5dcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0173
        gbc.setState(0x6072, 0x6e7d, 0x1220, 0x8b90, 0x102f, 0xf11e, 0x1, 0x0);
        gbc.writeMem(0x6072, { 0xcb, 0x4e });
        gbc.writeMem(0xf11e, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x6074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf11e), 0x95);
        // CB 4E 0174
        gbc.setState(0x3fcf, 0x16af, 0xe040, 0xda96, 0x1f73, 0x9977, 0x1, 0x1);
        gbc.writeMem(0x3fcf, { 0xcb, 0x4e });
        gbc.writeMem(0x9977, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x16af);
        EXPECT(gbc.pc(), 0x3fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9977), 0x14);
        // CB 4E 0175
        gbc.setState(0x2c5, 0x5b56, 0x5f40, 0xe4ac, 0xc3cf, 0x9352, 0x1, 0x1);
        gbc.writeMem(0x2c5, { 0xcb, 0x4e });
        gbc.writeMem(0x9352, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5b56);
        EXPECT(gbc.pc(), 0x2c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9352), 0xec);
        // CB 4E 0176
        gbc.setState(0x2c13, 0xa8d2, 0x86b0, 0x9c50, 0x4010, 0x2bfd, 0x0, 0x1);
        gbc.writeMem(0x2bfd, { 0x4e });
        gbc.writeMem(0x2c13, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa8d2);
        EXPECT(gbc.pc(), 0x2c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0177
        gbc.setState(0x86ab, 0xb27b, 0xce60, 0x24cd, 0x252b, 0x7cae, 0x0, 0x1);
        gbc.writeMem(0x7cae, { 0xd2 });
        gbc.writeMem(0x86ab, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb27b);
        EXPECT(gbc.pc(), 0x86ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ab), 0xcb);
        EXPECT(gbc.readMem(0x86ac), 0x4e);
        // CB 4E 0178
        gbc.setState(0xab74, 0x241a, 0xb0a0, 0xec7d, 0x4301, 0xffb8, 0x0, 0x0);
        gbc.writeMem(0xab74, { 0xcb, 0x4e });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x241a);
        EXPECT(gbc.pc(), 0xab76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab74), 0xcb);
        EXPECT(gbc.readMem(0xab75), 0x4e);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // CB 4E 0179
        gbc.setState(0x9ddf, 0xf347, 0x7020, 0xe4c8, 0x8081, 0x1ce0, 0x0, 0x1);
        gbc.writeMem(0x1ce0, { 0x62 });
        gbc.writeMem(0x9ddf, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf347);
        EXPECT(gbc.pc(), 0x9de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ddf), 0xcb);
        EXPECT(gbc.readMem(0x9de0), 0x4e);
        // CB 4E 017A
        gbc.setState(0x7f29, 0xd41e, 0xf700, 0x770d, 0x6787, 0xafe0, 0x1, 0x0);
        gbc.writeMem(0x7f29, { 0xcb, 0x4e });
        gbc.writeMem(0xafe0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd41e);
        EXPECT(gbc.pc(), 0x7f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe0), 0xb3);
        // CB 4E 017B
        gbc.setState(0x1744, 0x14f6, 0x3de0, 0xf1c3, 0x920c, 0x26c, 0x0, 0x1);
        gbc.writeMem(0x26c, { 0x9d });
        gbc.writeMem(0x1744, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x14f6);
        EXPECT(gbc.pc(), 0x1746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 017C
        gbc.setState(0x2ba5, 0x160a, 0x20c0, 0xa9a1, 0xcaab, 0xb648, 0x0, 0x0);
        gbc.writeMem(0x2ba5, { 0xcb, 0x4e });
        gbc.writeMem(0xb648, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x160a);
        EXPECT(gbc.pc(), 0x2ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb648), 0x80);
        // CB 4E 017D
        gbc.setState(0xa16a, 0xa5c2, 0xfac0, 0xa96e, 0xe7bc, 0x1602, 0x1, 0x1);
        gbc.writeMem(0x1602, { 0x49 });
        gbc.writeMem(0xa16a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa5c2);
        EXPECT(gbc.pc(), 0xa16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16a), 0xcb);
        EXPECT(gbc.readMem(0xa16b), 0x4e);
        // CB 4E 017E
        gbc.setState(0x197e, 0x7b45, 0x3f30, 0xd6df, 0x7020, 0xd2e7, 0x1, 0x0);
        gbc.writeMem(0x197e, { 0xcb, 0x4e });
        gbc.writeMem(0xd2e7, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7b45);
        EXPECT(gbc.pc(), 0x1980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e7), 0x58);
        // CB 4E 017F
        gbc.setState(0xab99, 0xdf37, 0x55f0, 0x9d53, 0x9a19, 0xf775, 0x1, 0x0);
        gbc.writeMem(0xab99, { 0xcb, 0x4e });
        gbc.writeMem(0xf775, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdf37);
        EXPECT(gbc.pc(), 0xab9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab99), 0xcb);
        EXPECT(gbc.readMem(0xab9a), 0x4e);
        EXPECT(gbc.readMem(0xf775), 0xaf);
        // CB 4E 0180
        gbc.setState(0xd3b4, 0x2d1f, 0x94a0, 0x54c2, 0xc0b6, 0xdcc3, 0x0, 0x0);
        gbc.writeMem(0xd3b4, { 0xcb, 0x4e });
        gbc.writeMem(0xdcc3, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2d1f);
        EXPECT(gbc.pc(), 0xd3b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b4), 0xcb);
        EXPECT(gbc.readMem(0xd3b5), 0x4e);
        EXPECT(gbc.readMem(0xdcc3), 0xed);
        // CB 4E 0181
        gbc.setState(0x6cf0, 0x31c3, 0xa3e0, 0xfc79, 0xdd43, 0x274d, 0x1, 0x0);
        gbc.writeMem(0x274d, { 0x29 });
        gbc.writeMem(0x6cf0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x31c3);
        EXPECT(gbc.pc(), 0x6cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0182
        gbc.setState(0xc793, 0x96de, 0xffe0, 0xcf0b, 0x6e85, 0x1e32, 0x0, 0x0);
        gbc.writeMem(0x1e32, { 0xa });
        gbc.writeMem(0xc793, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x96de);
        EXPECT(gbc.pc(), 0xc795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc793), 0xcb);
        EXPECT(gbc.readMem(0xc794), 0x4e);
        // CB 4E 0183
        gbc.setState(0x9f11, 0x912c, 0x8130, 0xe931, 0xc3a3, 0xa987, 0x0, 0x0);
        gbc.writeMem(0x9f11, { 0xcb, 0x4e });
        gbc.writeMem(0xa987, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x912c);
        EXPECT(gbc.pc(), 0x9f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f11), 0xcb);
        EXPECT(gbc.readMem(0x9f12), 0x4e);
        EXPECT(gbc.readMem(0xa987), 0xbc);
        // CB 4E 0184
        gbc.setState(0x72dc, 0xa6bb, 0x34b0, 0xa458, 0x5d98, 0x1ca6, 0x1, 0x0);
        gbc.writeMem(0x1ca6, { 0xa8 });
        gbc.writeMem(0x72dc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa6bb);
        EXPECT(gbc.pc(), 0x72de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0185
        gbc.setState(0x41fd, 0xbea2, 0xac90, 0x3768, 0x137e, 0xa37, 0x1, 0x1);
        gbc.writeMem(0xa37, { 0x6d });
        gbc.writeMem(0x41fd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xbea2);
        EXPECT(gbc.pc(), 0x41ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0186
        gbc.setState(0x6172, 0xfa01, 0x3650, 0x3891, 0x4d, 0x705, 0x1, 0x0);
        gbc.writeMem(0x705, { 0x27 });
        gbc.writeMem(0x6172, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfa01);
        EXPECT(gbc.pc(), 0x6174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0187
        gbc.setState(0xea7c, 0x5521, 0xfb70, 0x4edb, 0x1a7, 0x3d53, 0x0, 0x0);
        gbc.writeMem(0x3d53, { 0x63 });
        gbc.writeMem(0xea7c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5521);
        EXPECT(gbc.pc(), 0xea7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea7c), 0xcb);
        EXPECT(gbc.readMem(0xea7d), 0x4e);
        // CB 4E 0188
        gbc.setState(0x8e71, 0x63af, 0x4760, 0x6533, 0xd3a, 0xbbf7, 0x0, 0x0);
        gbc.writeMem(0x8e71, { 0xcb, 0x4e });
        gbc.writeMem(0xbbf7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x63af);
        EXPECT(gbc.pc(), 0x8e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e71), 0xcb);
        EXPECT(gbc.readMem(0x8e72), 0x4e);
        EXPECT(gbc.readMem(0xbbf7), 0x1b);
        // CB 4E 0189
        gbc.setState(0x2429, 0x786e, 0x96b0, 0x353d, 0x24f7, 0x71a9, 0x0, 0x1);
        gbc.writeMem(0x2429, { 0xcb, 0x4e });
        gbc.writeMem(0x71a9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x786e);
        EXPECT(gbc.pc(), 0x242b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 018A
        gbc.setState(0x2111, 0x8f3d, 0x750, 0x1ba0, 0x3005, 0xf9d3, 0x1, 0x0);
        gbc.writeMem(0x2111, { 0xcb, 0x4e });
        gbc.writeMem(0xf9d3, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8f3d);
        EXPECT(gbc.pc(), 0x2113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9d3), 0xc2);
        // CB 4E 018B
        gbc.setState(0x80c8, 0x5ef7, 0xd70, 0x574d, 0xe343, 0xdd89, 0x0, 0x1);
        gbc.writeMem(0x80c8, { 0xcb, 0x4e });
        gbc.writeMem(0xdd89, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5ef7);
        EXPECT(gbc.pc(), 0x80ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c8), 0xcb);
        EXPECT(gbc.readMem(0x80c9), 0x4e);
        EXPECT(gbc.readMem(0xdd89), 0x25);
        // CB 4E 018C
        gbc.setState(0x132c, 0xc246, 0x85f0, 0xb658, 0xad73, 0xc389, 0x1, 0x1);
        gbc.writeMem(0x132c, { 0xcb, 0x4e });
        gbc.writeMem(0xc389, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc246);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc389), 0xc3);
        // CB 4E 018D
        gbc.setState(0xe0af, 0x7c43, 0x81c0, 0xffc2, 0x7cec, 0x4557, 0x1, 0x0);
        gbc.writeMem(0x4557, { 0x3 });
        gbc.writeMem(0xe0af, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7c43);
        EXPECT(gbc.pc(), 0xe0b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0af), 0xcb);
        EXPECT(gbc.readMem(0xe0b0), 0x4e);
        // CB 4E 018E
        gbc.setState(0x7ddd, 0x8730, 0x5cd0, 0x9c23, 0xd990, 0x235e, 0x1, 0x1);
        gbc.writeMem(0x235e, { 0x8d });
        gbc.writeMem(0x7ddd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8730);
        EXPECT(gbc.pc(), 0x7ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 018F
        gbc.setState(0x9354, 0xb15b, 0xbb90, 0xf12, 0xee1e, 0x6027, 0x0, 0x0);
        gbc.writeMem(0x6027, { 0x67 });
        gbc.writeMem(0x9354, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb15b);
        EXPECT(gbc.pc(), 0x9356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9354), 0xcb);
        EXPECT(gbc.readMem(0x9355), 0x4e);
        // CB 4E 0190
        gbc.setState(0xc636, 0x2632, 0x8e00, 0xe448, 0x2916, 0x1d37, 0x0, 0x1);
        gbc.writeMem(0x1d37, { 0x1b });
        gbc.writeMem(0xc636, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2632);
        EXPECT(gbc.pc(), 0xc638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc636), 0xcb);
        EXPECT(gbc.readMem(0xc637), 0x4e);
        // CB 4E 0191
        gbc.setState(0x719d, 0xc2e2, 0x6aa0, 0xcf6d, 0x88ba, 0x41da, 0x1, 0x0);
        gbc.writeMem(0x41da, { 0xe2 });
        gbc.writeMem(0x719d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc2e2);
        EXPECT(gbc.pc(), 0x719f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0192
        gbc.setState(0x6f1e, 0x19cd, 0x3a90, 0x518c, 0xb58, 0x561b, 0x0, 0x0);
        gbc.writeMem(0x561b, { 0xcb });
        gbc.writeMem(0x6f1e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x19cd);
        EXPECT(gbc.pc(), 0x6f20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0193
        gbc.setState(0x5def, 0x7f33, 0x5ed0, 0x3089, 0x7937, 0x7f38, 0x1, 0x0);
        gbc.writeMem(0x5def, { 0xcb, 0x4e });
        gbc.writeMem(0x7f38, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7f33);
        EXPECT(gbc.pc(), 0x5df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0194
        gbc.setState(0x518f, 0x3b3c, 0x4de0, 0xc256, 0xbd91, 0xc936, 0x1, 0x1);
        gbc.writeMem(0x518f, { 0xcb, 0x4e });
        gbc.writeMem(0xc936, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3b3c);
        EXPECT(gbc.pc(), 0x5191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc936), 0xd7);
        // CB 4E 0195
        gbc.setState(0x9259, 0xb433, 0xa700, 0xe9af, 0x105d, 0x35b4, 0x0, 0x1);
        gbc.writeMem(0x35b4, { 0xd9 });
        gbc.writeMem(0x9259, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb433);
        EXPECT(gbc.pc(), 0x925b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9259), 0xcb);
        EXPECT(gbc.readMem(0x925a), 0x4e);
        // CB 4E 0196
        gbc.setState(0x1a63, 0x6ad7, 0x980, 0x2b53, 0x98b0, 0xfa55, 0x0, 0x0);
        gbc.writeMem(0x1a63, { 0xcb, 0x4e });
        gbc.writeMem(0xfa55, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6ad7);
        EXPECT(gbc.pc(), 0x1a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa55), 0x3e);
        // CB 4E 0197
        gbc.setState(0x9a36, 0x247e, 0x7b90, 0x18dc, 0x61e6, 0xc688, 0x0, 0x1);
        gbc.writeMem(0x9a36, { 0xcb, 0x4e });
        gbc.writeMem(0xc688, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x247e);
        EXPECT(gbc.pc(), 0x9a38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a36), 0xcb);
        EXPECT(gbc.readMem(0x9a37), 0x4e);
        EXPECT(gbc.readMem(0xc688), 0x38);
        // CB 4E 0199
        gbc.setState(0x8d76, 0xc1ea, 0x4780, 0x5a4f, 0xd961, 0x59c5, 0x0, 0x1);
        gbc.writeMem(0x59c5, { 0xcc });
        gbc.writeMem(0x8d76, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc1ea);
        EXPECT(gbc.pc(), 0x8d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d76), 0xcb);
        EXPECT(gbc.readMem(0x8d77), 0x4e);
        // CB 4E 019A
        gbc.setState(0x18ac, 0xaab4, 0x6810, 0x4906, 0x3014, 0xd82e, 0x0, 0x1);
        gbc.writeMem(0x18ac, { 0xcb, 0x4e });
        gbc.writeMem(0xd82e, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xaab4);
        EXPECT(gbc.pc(), 0x18ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd82e), 0xea);
        // CB 4E 019B
        gbc.setState(0x8fc9, 0xfee0, 0x9a40, 0x6ccd, 0x9dd2, 0x1420, 0x1, 0x1);
        gbc.writeMem(0x1420, { 0x9c });
        gbc.writeMem(0x8fc9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfee0);
        EXPECT(gbc.pc(), 0x8fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc9), 0xcb);
        EXPECT(gbc.readMem(0x8fca), 0x4e);
        // CB 4E 019C
        gbc.setState(0x93be, 0x7142, 0x93d0, 0x958f, 0x955f, 0x77f, 0x1, 0x1);
        gbc.writeMem(0x77f, { 0x9 });
        gbc.writeMem(0x93be, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7142);
        EXPECT(gbc.pc(), 0x93c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93be), 0xcb);
        EXPECT(gbc.readMem(0x93bf), 0x4e);
        // CB 4E 019D
        gbc.setState(0x1d0c, 0xf356, 0x1e90, 0xad66, 0xc337, 0xc924, 0x1, 0x0);
        gbc.writeMem(0x1d0c, { 0xcb, 0x4e });
        gbc.writeMem(0xc924, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf356);
        EXPECT(gbc.pc(), 0x1d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc924), 0xb2);
        // CB 4E 019E
        gbc.setState(0xdbcb, 0x11a9, 0x2c80, 0xe239, 0x4b2a, 0xa39f, 0x1, 0x1);
        gbc.writeMem(0xa39f, { 0x82 });
        gbc.writeMem(0xdbcb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x11a9);
        EXPECT(gbc.pc(), 0xdbcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa39f), 0x82);
        EXPECT(gbc.readMem(0xdbcb), 0xcb);
        EXPECT(gbc.readMem(0xdbcc), 0x4e);
        // CB 4E 019F
        gbc.setState(0xe99, 0xe731, 0x75a0, 0x7ce4, 0xcc7a, 0x6a2c, 0x1, 0x0);
        gbc.writeMem(0xe99, { 0xcb, 0x4e });
        gbc.writeMem(0x6a2c, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe731);
        EXPECT(gbc.pc(), 0xe9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01A0
        gbc.setState(0xbaff, 0xe78f, 0xf8e0, 0xa192, 0x3756, 0x3555, 0x1, 0x0);
        gbc.writeMem(0x3555, { 0xc5 });
        gbc.writeMem(0xbaff, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe78f);
        EXPECT(gbc.pc(), 0xbb01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaff), 0xcb);
        EXPECT(gbc.readMem(0xbb00), 0x4e);
        // CB 4E 01A1
        gbc.setState(0x3003, 0xe476, 0xf380, 0xf326, 0xcd53, 0x471b, 0x0, 0x0);
        gbc.writeMem(0x3003, { 0xcb, 0x4e });
        gbc.writeMem(0x471b, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe476);
        EXPECT(gbc.pc(), 0x3005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01A2
        gbc.setState(0xa399, 0xa4d5, 0xbfe0, 0x8507, 0x3850, 0xb4af, 0x0, 0x0);
        gbc.writeMem(0xa399, { 0xcb, 0x4e });
        gbc.writeMem(0xb4af, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa4d5);
        EXPECT(gbc.pc(), 0xa39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa399), 0xcb);
        EXPECT(gbc.readMem(0xa39a), 0x4e);
        EXPECT(gbc.readMem(0xb4af), 0x19);
        // CB 4E 01A3
        gbc.setState(0xbaf5, 0x8d80, 0xd3c0, 0xf1dd, 0xc649, 0x9433, 0x0, 0x0);
        gbc.writeMem(0x9433, { 0xd4 });
        gbc.writeMem(0xbaf5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8d80);
        EXPECT(gbc.pc(), 0xbaf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9433), 0xd4);
        EXPECT(gbc.readMem(0xbaf5), 0xcb);
        EXPECT(gbc.readMem(0xbaf6), 0x4e);
        // CB 4E 01A4
        gbc.setState(0x8776, 0x332, 0x14f0, 0x99f7, 0x1d03, 0xb96d, 0x1, 0x1);
        gbc.writeMem(0x8776, { 0xcb, 0x4e });
        gbc.writeMem(0xb96d, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x332);
        EXPECT(gbc.pc(), 0x8778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8776), 0xcb);
        EXPECT(gbc.readMem(0x8777), 0x4e);
        EXPECT(gbc.readMem(0xb96d), 0x8a);
        // CB 4E 01A6
        gbc.setState(0xcd6b, 0x1a9d, 0xc2c0, 0xf801, 0xf2f7, 0x1cfd, 0x1, 0x1);
        gbc.writeMem(0x1cfd, { 0x33 });
        gbc.writeMem(0xcd6b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1a9d);
        EXPECT(gbc.pc(), 0xcd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6b), 0xcb);
        EXPECT(gbc.readMem(0xcd6c), 0x4e);
        // CB 4E 01A7
        gbc.setState(0xb5ff, 0x3375, 0x21f0, 0xc817, 0x9127, 0xc242, 0x1, 0x0);
        gbc.writeMem(0xb5ff, { 0xcb, 0x4e });
        gbc.writeMem(0xc242, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3375);
        EXPECT(gbc.pc(), 0xb601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ff), 0xcb);
        EXPECT(gbc.readMem(0xb600), 0x4e);
        EXPECT(gbc.readMem(0xc242), 0xab);
        // CB 4E 01A8
        gbc.setState(0x3866, 0xe7bd, 0x72c0, 0x9233, 0xd75a, 0x5937, 0x0, 0x0);
        gbc.writeMem(0x3866, { 0xcb, 0x4e });
        gbc.writeMem(0x5937, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe7bd);
        EXPECT(gbc.pc(), 0x3868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01A9
        gbc.setState(0x951a, 0x9bed, 0xcba0, 0x62c2, 0x42cf, 0x7bb1, 0x1, 0x1);
        gbc.writeMem(0x7bb1, { 0x79 });
        gbc.writeMem(0x951a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9bed);
        EXPECT(gbc.pc(), 0x951c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951a), 0xcb);
        EXPECT(gbc.readMem(0x951b), 0x4e);
        // CB 4E 01AA
        gbc.setState(0x4416, 0xf7ca, 0x8990, 0x4ab9, 0xf46, 0x8e7e, 0x1, 0x0);
        gbc.writeMem(0x4416, { 0xcb, 0x4e });
        gbc.writeMem(0x8e7e, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf7ca);
        EXPECT(gbc.pc(), 0x4418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e7e), 0x2f);
        // CB 4E 01AB
        gbc.setState(0x8df0, 0x3dc9, 0xafa0, 0xcb81, 0x8c1f, 0x4f0a, 0x1, 0x0);
        gbc.writeMem(0x4f0a, { 0x2b });
        gbc.writeMem(0x8df0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3dc9);
        EXPECT(gbc.pc(), 0x8df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df0), 0xcb);
        EXPECT(gbc.readMem(0x8df1), 0x4e);
        // CB 4E 01AC
        gbc.setState(0x1a42, 0xca43, 0xf320, 0x831c, 0xc2cc, 0x4e46, 0x1, 0x1);
        gbc.writeMem(0x1a42, { 0xcb, 0x4e });
        gbc.writeMem(0x4e46, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xca43);
        EXPECT(gbc.pc(), 0x1a44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01AD
        gbc.setState(0xec59, 0x5b17, 0x5c70, 0xf17f, 0x4d65, 0x636c, 0x0, 0x1);
        gbc.writeMem(0x636c, { 0xb });
        gbc.writeMem(0xec59, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5b17);
        EXPECT(gbc.pc(), 0xec5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec59), 0xcb);
        EXPECT(gbc.readMem(0xec5a), 0x4e);
        // CB 4E 01AF
        gbc.setState(0xc189, 0x4df2, 0xfc60, 0x80a1, 0xf0c7, 0x1e94, 0x1, 0x0);
        gbc.writeMem(0x1e94, { 0x34 });
        gbc.writeMem(0xc189, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4df2);
        EXPECT(gbc.pc(), 0xc18b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc189), 0xcb);
        EXPECT(gbc.readMem(0xc18a), 0x4e);
        // CB 4E 01B0
        gbc.setState(0x2d40, 0x9c8, 0x2e30, 0xd055, 0x2f6, 0xe266, 0x0, 0x0);
        gbc.writeMem(0x2d40, { 0xcb, 0x4e });
        gbc.writeMem(0xe266, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9c8);
        EXPECT(gbc.pc(), 0x2d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe266), 0xcd);
        // CB 4E 01B1
        gbc.setState(0xecdf, 0x6b61, 0x2130, 0x2404, 0x6181, 0xb793, 0x1, 0x1);
        gbc.writeMem(0xb793, { 0xe });
        gbc.writeMem(0xecdf, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6b61);
        EXPECT(gbc.pc(), 0xece1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb793), 0xe);
        EXPECT(gbc.readMem(0xecdf), 0xcb);
        EXPECT(gbc.readMem(0xece0), 0x4e);
        // CB 4E 01B2
        gbc.setState(0x9d62, 0x79e9, 0x4260, 0x56bd, 0xf0f3, 0x30c3, 0x0, 0x0);
        gbc.writeMem(0x30c3, { 0xa5 });
        gbc.writeMem(0x9d62, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x79e9);
        EXPECT(gbc.pc(), 0x9d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d62), 0xcb);
        EXPECT(gbc.readMem(0x9d63), 0x4e);
        // CB 4E 01B3
        gbc.setState(0x3783, 0x84dd, 0x3d30, 0x2bdd, 0x832e, 0x2f7b, 0x1, 0x1);
        gbc.writeMem(0x2f7b, { 0xb1 });
        gbc.writeMem(0x3783, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x84dd);
        EXPECT(gbc.pc(), 0x3785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01B4
        gbc.setState(0xeb82, 0x2808, 0x86d0, 0xc23b, 0x9976, 0x2356, 0x0, 0x1);
        gbc.writeMem(0x2356, { 0xd6 });
        gbc.writeMem(0xeb82, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2808);
        EXPECT(gbc.pc(), 0xeb84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb82), 0xcb);
        EXPECT(gbc.readMem(0xeb83), 0x4e);
        // CB 4E 01B5
        gbc.setState(0xd789, 0x826c, 0xb460, 0xd6c, 0x94aa, 0x2bbf, 0x0, 0x1);
        gbc.writeMem(0x2bbf, { 0xd6 });
        gbc.writeMem(0xd789, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x826c);
        EXPECT(gbc.pc(), 0xd78b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd789), 0xcb);
        EXPECT(gbc.readMem(0xd78a), 0x4e);
        // CB 4E 01B6
        gbc.setState(0xfde, 0x50a2, 0x61b0, 0x4acf, 0xb31d, 0xd3d9, 0x1, 0x1);
        gbc.writeMem(0xfde, { 0xcb, 0x4e });
        gbc.writeMem(0xd3d9, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0xfe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3d9), 0x9b);
        // CB 4E 01B7
        gbc.setState(0xb65b, 0xd2bd, 0xedf0, 0x6e65, 0x2436, 0x5cfd, 0x1, 0x0);
        gbc.writeMem(0x5cfd, { 0xc6 });
        gbc.writeMem(0xb65b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd2bd);
        EXPECT(gbc.pc(), 0xb65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb65b), 0xcb);
        EXPECT(gbc.readMem(0xb65c), 0x4e);
        // CB 4E 01B8
        gbc.setState(0xd63b, 0x4895, 0x4f30, 0xd9b0, 0x6878, 0x6108, 0x0, 0x0);
        gbc.writeMem(0x6108, { 0x5c });
        gbc.writeMem(0xd63b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4895);
        EXPECT(gbc.pc(), 0xd63d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63b), 0xcb);
        EXPECT(gbc.readMem(0xd63c), 0x4e);
        // CB 4E 01B9
        gbc.setState(0xddc2, 0xdc2f, 0x8e20, 0xf365, 0x69c3, 0xf9a5, 0x0, 0x0);
        gbc.writeMem(0xddc2, { 0xcb, 0x4e });
        gbc.writeMem(0xf9a5, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdc2f);
        EXPECT(gbc.pc(), 0xddc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc2), 0xcb);
        EXPECT(gbc.readMem(0xddc3), 0x4e);
        EXPECT(gbc.readMem(0xf9a5), 0x6d);
        // CB 4E 01BA
        gbc.setState(0xadf3, 0xf02c, 0x3500, 0x6696, 0x6c3a, 0x39a1, 0x0, 0x0);
        gbc.writeMem(0x39a1, { 0xdc });
        gbc.writeMem(0xadf3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf02c);
        EXPECT(gbc.pc(), 0xadf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf3), 0xcb);
        EXPECT(gbc.readMem(0xadf4), 0x4e);
        // CB 4E 01BB
        gbc.setState(0x2d16, 0xf8bd, 0x6960, 0x54fd, 0xbdd9, 0xe958, 0x0, 0x0);
        gbc.writeMem(0x2d16, { 0xcb, 0x4e });
        gbc.writeMem(0xe958, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf8bd);
        EXPECT(gbc.pc(), 0x2d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe958), 0x54);
        // CB 4E 01BC
        gbc.setState(0xb967, 0xde03, 0xf440, 0xc3b9, 0xe6f6, 0x8988, 0x0, 0x0);
        gbc.writeMem(0x8988, { 0xf0 });
        gbc.writeMem(0xb967, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xde03);
        EXPECT(gbc.pc(), 0xb969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8988), 0xf0);
        EXPECT(gbc.readMem(0xb967), 0xcb);
        EXPECT(gbc.readMem(0xb968), 0x4e);
        // CB 4E 01BD
        gbc.setState(0xbbe8, 0xebd1, 0x29c0, 0xc1ed, 0xe514, 0x7a92, 0x1, 0x0);
        gbc.writeMem(0x7a92, { 0xf1 });
        gbc.writeMem(0xbbe8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xebd1);
        EXPECT(gbc.pc(), 0xbbea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe8), 0xcb);
        EXPECT(gbc.readMem(0xbbe9), 0x4e);
        // CB 4E 01BE
        gbc.setState(0x8db3, 0xc881, 0x690, 0x956d, 0x87d0, 0x252f, 0x1, 0x0);
        gbc.writeMem(0x252f, { 0x89 });
        gbc.writeMem(0x8db3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc881);
        EXPECT(gbc.pc(), 0x8db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db3), 0xcb);
        EXPECT(gbc.readMem(0x8db4), 0x4e);
        // CB 4E 01BF
        gbc.setState(0x329e, 0x52a6, 0x6cd0, 0xd8e3, 0x5ca4, 0x1ee1, 0x0, 0x0);
        gbc.writeMem(0x1ee1, { 0x1d });
        gbc.writeMem(0x329e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x52a6);
        EXPECT(gbc.pc(), 0x32a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01C0
        gbc.setState(0xb221, 0x2bf9, 0x8810, 0x8549, 0x8e0f, 0xbf67, 0x0, 0x0);
        gbc.writeMem(0xb221, { 0xcb, 0x4e });
        gbc.writeMem(0xbf67, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2bf9);
        EXPECT(gbc.pc(), 0xb223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb221), 0xcb);
        EXPECT(gbc.readMem(0xb222), 0x4e);
        EXPECT(gbc.readMem(0xbf67), 0xdf);
        // CB 4E 01C1
        gbc.setState(0xd6e, 0xb1c9, 0x92d0, 0x144f, 0x2a48, 0x774c, 0x1, 0x1);
        gbc.writeMem(0xd6e, { 0xcb, 0x4e });
        gbc.writeMem(0x774c, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb1c9);
        EXPECT(gbc.pc(), 0xd70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01C2
        gbc.setState(0xc5d8, 0xad29, 0x9960, 0x6e6b, 0x43b3, 0x59a9, 0x0, 0x0);
        gbc.writeMem(0x59a9, { 0xfd });
        gbc.writeMem(0xc5d8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xad29);
        EXPECT(gbc.pc(), 0xc5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d8), 0xcb);
        EXPECT(gbc.readMem(0xc5d9), 0x4e);
        // CB 4E 01C3
        gbc.setState(0xc21, 0x6118, 0xad0, 0xd617, 0xd38, 0x4c83, 0x1, 0x1);
        gbc.writeMem(0xc21, { 0xcb, 0x4e });
        gbc.writeMem(0x4c83, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6118);
        EXPECT(gbc.pc(), 0xc23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01C5
        gbc.setState(0xbe3, 0x8cb, 0x4cb0, 0xa3bd, 0xb285, 0xf06b, 0x1, 0x0);
        gbc.writeMem(0xbe3, { 0xcb, 0x4e });
        gbc.writeMem(0xf06b, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8cb);
        EXPECT(gbc.pc(), 0xbe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf06b), 0x59);
        // CB 4E 01C6
        gbc.setState(0xef16, 0xe71, 0x7240, 0x1e17, 0xb856, 0xd14f, 0x1, 0x0);
        gbc.writeMem(0xd14f, { 0x73 });
        gbc.writeMem(0xef16, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe71);
        EXPECT(gbc.pc(), 0xef18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14f), 0x73);
        EXPECT(gbc.readMem(0xef16), 0xcb);
        EXPECT(gbc.readMem(0xef17), 0x4e);
        // CB 4E 01C7
        gbc.setState(0x7f86, 0xf57d, 0x1050, 0x7ee3, 0x5b65, 0xac8d, 0x1, 0x0);
        gbc.writeMem(0x7f86, { 0xcb, 0x4e });
        gbc.writeMem(0xac8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf57d);
        EXPECT(gbc.pc(), 0x7f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8d), 0xaa);
        // CB 4E 01C8
        gbc.setState(0x790e, 0xd503, 0xaa30, 0xa11, 0x7878, 0x761e, 0x0, 0x1);
        gbc.writeMem(0x761e, { 0x82 });
        gbc.writeMem(0x790e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd503);
        EXPECT(gbc.pc(), 0x7910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01C9
        gbc.setState(0x2416, 0xdba1, 0x11b0, 0xb14e, 0x1d7c, 0xffee, 0x1, 0x0);
        gbc.writeMem(0x2416, { 0xcb, 0x4e });
        gbc.writeMem(0xffee, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdba1);
        EXPECT(gbc.pc(), 0x2418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffee), 0xca);
        // CB 4E 01CA
        gbc.setState(0x2f3d, 0xa349, 0xc970, 0x13f, 0x7084, 0x8a23, 0x1, 0x1);
        gbc.writeMem(0x2f3d, { 0xcb, 0x4e });
        gbc.writeMem(0x8a23, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa349);
        EXPECT(gbc.pc(), 0x2f3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a23), 0xad);
        // CB 4E 01CB
        gbc.setState(0xb228, 0xce85, 0x2ee0, 0xddcb, 0xb0b7, 0x7e37, 0x1, 0x1);
        gbc.writeMem(0x7e37, { 0xc2 });
        gbc.writeMem(0xb228, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xce85);
        EXPECT(gbc.pc(), 0xb22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb228), 0xcb);
        EXPECT(gbc.readMem(0xb229), 0x4e);
        // CB 4E 01CC
        gbc.setState(0xd3b5, 0xd0f3, 0x5e80, 0x789f, 0x897, 0xfebd, 0x1, 0x1);
        gbc.writeMem(0xd3b5, { 0xcb, 0x4e });
        gbc.writeMem(0xfebd, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd0f3);
        EXPECT(gbc.pc(), 0xd3b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b5), 0xcb);
        EXPECT(gbc.readMem(0xd3b6), 0x4e);
        EXPECT(gbc.readMem(0xfebd), 0x63);
        // CB 4E 01CD
        gbc.setState(0xb1a9, 0x5d14, 0xc800, 0x835a, 0xcb, 0x69dc, 0x0, 0x1);
        gbc.writeMem(0x69dc, { 0x90 });
        gbc.writeMem(0xb1a9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5d14);
        EXPECT(gbc.pc(), 0xb1ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a9), 0xcb);
        EXPECT(gbc.readMem(0xb1aa), 0x4e);
        // CB 4E 01CE
        gbc.setState(0x5456, 0xbac5, 0x6c70, 0xd240, 0x6a5f, 0xfa2f, 0x1, 0x0);
        gbc.writeMem(0x5456, { 0xcb, 0x4e });
        gbc.writeMem(0xfa2f, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbac5);
        EXPECT(gbc.pc(), 0x5458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa2f), 0xe2);
        // CB 4E 01CF
        gbc.setState(0x9b05, 0x8f6, 0xd6f0, 0x6927, 0x96aa, 0x8b09, 0x0, 0x1);
        gbc.writeMem(0x8b09, { 0xdb });
        gbc.writeMem(0x9b05, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8f6);
        EXPECT(gbc.pc(), 0x9b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b09), 0xdb);
        EXPECT(gbc.readMem(0x9b05), 0xcb);
        EXPECT(gbc.readMem(0x9b06), 0x4e);
        // CB 4E 01D0
        gbc.setState(0xdec1, 0xd743, 0x8230, 0x78eb, 0x67d, 0xb2c8, 0x0, 0x0);
        gbc.writeMem(0xb2c8, { 0x7a });
        gbc.writeMem(0xdec1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd743);
        EXPECT(gbc.pc(), 0xdec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c8), 0x7a);
        EXPECT(gbc.readMem(0xdec1), 0xcb);
        EXPECT(gbc.readMem(0xdec2), 0x4e);
        // CB 4E 01D1
        gbc.setState(0x33a3, 0x192b, 0x6190, 0x4cd1, 0x84fd, 0x6545, 0x1, 0x1);
        gbc.writeMem(0x33a3, { 0xcb, 0x4e });
        gbc.writeMem(0x6545, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x192b);
        EXPECT(gbc.pc(), 0x33a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01D2
        gbc.setState(0x95ab, 0x3d74, 0xe400, 0x7237, 0xb3ca, 0xbf2, 0x0, 0x1);
        gbc.writeMem(0xbf2, { 0x18 });
        gbc.writeMem(0x95ab, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3d74);
        EXPECT(gbc.pc(), 0x95ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ab), 0xcb);
        EXPECT(gbc.readMem(0x95ac), 0x4e);
        // CB 4E 01D3
        gbc.setState(0xb102, 0xb03b, 0x9c60, 0x4d75, 0x2fbe, 0xf49d, 0x0, 0x1);
        gbc.writeMem(0xb102, { 0xcb, 0x4e });
        gbc.writeMem(0xf49d, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb03b);
        EXPECT(gbc.pc(), 0xb104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb102), 0xcb);
        EXPECT(gbc.readMem(0xb103), 0x4e);
        EXPECT(gbc.readMem(0xf49d), 0x1e);
        // CB 4E 01D6
        gbc.setState(0x77e, 0x7557, 0x8ec0, 0x2fd6, 0xf03d, 0x5c37, 0x0, 0x1);
        gbc.writeMem(0x77e, { 0xcb, 0x4e });
        gbc.writeMem(0x5c37, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7557);
        EXPECT(gbc.pc(), 0x780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01D7
        gbc.setState(0xbc9e, 0x30a0, 0x2ef0, 0x8e14, 0x8840, 0xdf5, 0x1, 0x0);
        gbc.writeMem(0xdf5, { 0x13 });
        gbc.writeMem(0xbc9e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x30a0);
        EXPECT(gbc.pc(), 0xbca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc9e), 0xcb);
        EXPECT(gbc.readMem(0xbc9f), 0x4e);
        // CB 4E 01D8
        gbc.setState(0xde86, 0x25bd, 0x5330, 0x23db, 0xd971, 0xd305, 0x1, 0x1);
        gbc.writeMem(0xd305, { 0xa7 });
        gbc.writeMem(0xde86, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x25bd);
        EXPECT(gbc.pc(), 0xde88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd305), 0xa7);
        EXPECT(gbc.readMem(0xde86), 0xcb);
        EXPECT(gbc.readMem(0xde87), 0x4e);
        // CB 4E 01D9
        gbc.setState(0x4ae3, 0xaad1, 0xc400, 0xd6a5, 0x836f, 0x1ff6, 0x1, 0x1);
        gbc.writeMem(0x1ff6, { 0x35 });
        gbc.writeMem(0x4ae3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xaad1);
        EXPECT(gbc.pc(), 0x4ae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01DA
        gbc.setState(0xa386, 0xc0fe, 0xbbf0, 0x5765, 0x6b47, 0x127a, 0x0, 0x1);
        gbc.writeMem(0x127a, { 0x50 });
        gbc.writeMem(0xa386, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc0fe);
        EXPECT(gbc.pc(), 0xa388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa386), 0xcb);
        EXPECT(gbc.readMem(0xa387), 0x4e);
        // CB 4E 01DB
        gbc.setState(0x807c, 0x67fa, 0x38a0, 0x4d9f, 0x95c0, 0xa40a, 0x0, 0x0);
        gbc.writeMem(0x807c, { 0xcb, 0x4e });
        gbc.writeMem(0xa40a, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x67fa);
        EXPECT(gbc.pc(), 0x807e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807c), 0xcb);
        EXPECT(gbc.readMem(0x807d), 0x4e);
        EXPECT(gbc.readMem(0xa40a), 0xee);
        // CB 4E 01DC
        gbc.setState(0x892f, 0x5ee8, 0xe390, 0xd493, 0x66fc, 0xd8d5, 0x1, 0x0);
        gbc.writeMem(0x892f, { 0xcb, 0x4e });
        gbc.writeMem(0xd8d5, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5ee8);
        EXPECT(gbc.pc(), 0x8931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x892f), 0xcb);
        EXPECT(gbc.readMem(0x8930), 0x4e);
        EXPECT(gbc.readMem(0xd8d5), 0xde);
        // CB 4E 01DD
        gbc.setState(0x39df, 0x6aa4, 0x5f10, 0x87d, 0xe8d8, 0x1205, 0x0, 0x1);
        gbc.writeMem(0x1205, { 0x69 });
        gbc.writeMem(0x39df, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6aa4);
        EXPECT(gbc.pc(), 0x39e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01DE
        gbc.setState(0x840b, 0xab6c, 0x3b60, 0x5721, 0x8f35, 0x7f0b, 0x0, 0x1);
        gbc.writeMem(0x7f0b, { 0xe9 });
        gbc.writeMem(0x840b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x840d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840b), 0xcb);
        EXPECT(gbc.readMem(0x840c), 0x4e);
        // CB 4E 01DF
        gbc.setState(0x6a08, 0x4efd, 0x4760, 0x2007, 0x55a8, 0x3784, 0x1, 0x0);
        gbc.writeMem(0x3784, { 0x33 });
        gbc.writeMem(0x6a08, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4efd);
        EXPECT(gbc.pc(), 0x6a0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01E0
        gbc.setState(0x1614, 0xe7c, 0xca60, 0x2998, 0xa6bb, 0x2b35, 0x0, 0x0);
        gbc.writeMem(0x1614, { 0xcb, 0x4e });
        gbc.writeMem(0x2b35, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe7c);
        EXPECT(gbc.pc(), 0x1616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01E1
        gbc.setState(0xcf16, 0x21c6, 0x36f0, 0xeacf, 0xa828, 0x10c8, 0x0, 0x1);
        gbc.writeMem(0x10c8, { 0xae });
        gbc.writeMem(0xcf16, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x21c6);
        EXPECT(gbc.pc(), 0xcf18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf16), 0xcb);
        EXPECT(gbc.readMem(0xcf17), 0x4e);
        // CB 4E 01E3
        gbc.setState(0xc018, 0x1b1f, 0x1c90, 0x39df, 0x6390, 0x3a70, 0x0, 0x0);
        gbc.writeMem(0x3a70, { 0x8f });
        gbc.writeMem(0xc018, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1b1f);
        EXPECT(gbc.pc(), 0xc01a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc018), 0xcb);
        EXPECT(gbc.readMem(0xc019), 0x4e);
        // CB 4E 01E4
        gbc.setState(0x57a3, 0x41ff, 0xf490, 0xc754, 0x3092, 0x260a, 0x0, 0x0);
        gbc.writeMem(0x260a, { 0xd2 });
        gbc.writeMem(0x57a3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x41ff);
        EXPECT(gbc.pc(), 0x57a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01E5
        gbc.setState(0xd4a7, 0x71f, 0xdf60, 0xe5f7, 0x8622, 0x69c, 0x1, 0x0);
        gbc.writeMem(0x69c, { 0x6a });
        gbc.writeMem(0xd4a7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x71f);
        EXPECT(gbc.pc(), 0xd4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a7), 0xcb);
        EXPECT(gbc.readMem(0xd4a8), 0x4e);
        // CB 4E 01E6
        gbc.setState(0x5074, 0x382a, 0xa700, 0x6c98, 0x2486, 0x3385, 0x0, 0x1);
        gbc.writeMem(0x3385, { 0xa5 });
        gbc.writeMem(0x5074, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x382a);
        EXPECT(gbc.pc(), 0x5076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01E7
        gbc.setState(0xae1c, 0xf3eb, 0x81d0, 0xeb39, 0xc40d, 0xa0ba, 0x1, 0x1);
        gbc.writeMem(0xa0ba, { 0xc5 });
        gbc.writeMem(0xae1c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf3eb);
        EXPECT(gbc.pc(), 0xae1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ba), 0xc5);
        EXPECT(gbc.readMem(0xae1c), 0xcb);
        EXPECT(gbc.readMem(0xae1d), 0x4e);
        // CB 4E 01E8
        gbc.setState(0x266f, 0xb8f9, 0x1070, 0x4bef, 0x9c38, 0x6e06, 0x0, 0x1);
        gbc.writeMem(0x266f, { 0xcb, 0x4e });
        gbc.writeMem(0x6e06, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb8f9);
        EXPECT(gbc.pc(), 0x2671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01E9
        gbc.setState(0xbfec, 0x58e0, 0x2eb0, 0xedc1, 0x81c0, 0x9167, 0x1, 0x1);
        gbc.writeMem(0x9167, { 0x39 });
        gbc.writeMem(0xbfec, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x58e0);
        EXPECT(gbc.pc(), 0xbfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9167), 0x39);
        EXPECT(gbc.readMem(0xbfec), 0xcb);
        EXPECT(gbc.readMem(0xbfed), 0x4e);
        // CB 4E 01EA
        gbc.setState(0xbace, 0xea0b, 0x780, 0x812d, 0x41f4, 0x2ebc, 0x0, 0x1);
        gbc.writeMem(0x2ebc, { 0xb4 });
        gbc.writeMem(0xbace, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xea0b);
        EXPECT(gbc.pc(), 0xbad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbace), 0xcb);
        EXPECT(gbc.readMem(0xbacf), 0x4e);
        // CB 4E 01EB
        gbc.setState(0xd5b7, 0xe5d9, 0x8760, 0xef3b, 0x7872, 0x52b1, 0x0, 0x0);
        gbc.writeMem(0x52b1, { 0x22 });
        gbc.writeMem(0xd5b7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe5d9);
        EXPECT(gbc.pc(), 0xd5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b7), 0xcb);
        EXPECT(gbc.readMem(0xd5b8), 0x4e);
        // CB 4E 01EC
        gbc.setState(0x2ca7, 0x2ccb, 0x4610, 0x864, 0xf937, 0xa39c, 0x0, 0x1);
        gbc.writeMem(0x2ca7, { 0xcb, 0x4e });
        gbc.writeMem(0xa39c, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2ccb);
        EXPECT(gbc.pc(), 0x2ca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa39c), 0x73);
        // CB 4E 01ED
        gbc.setState(0xd6d7, 0x7ebf, 0xd150, 0x228a, 0xfbc0, 0x3845, 0x0, 0x0);
        gbc.writeMem(0x3845, { 0x65 });
        gbc.writeMem(0xd6d7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7ebf);
        EXPECT(gbc.pc(), 0xd6d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d7), 0xcb);
        EXPECT(gbc.readMem(0xd6d8), 0x4e);
        // CB 4E 01EE
        gbc.setState(0xa97e, 0xb465, 0x58c0, 0x6717, 0x6be5, 0xfc72, 0x0, 0x0);
        gbc.writeMem(0xa97e, { 0xcb, 0x4e });
        gbc.writeMem(0xfc72, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb465);
        EXPECT(gbc.pc(), 0xa980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa97e), 0xcb);
        EXPECT(gbc.readMem(0xa97f), 0x4e);
        EXPECT(gbc.readMem(0xfc72), 0x1d);
        // CB 4E 01EF
        gbc.setState(0x9375, 0xcd78, 0xee60, 0x5c9a, 0x4552, 0x690e, 0x1, 0x0);
        gbc.writeMem(0x690e, { 0x38 });
        gbc.writeMem(0x9375, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xcd78);
        EXPECT(gbc.pc(), 0x9377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9375), 0xcb);
        EXPECT(gbc.readMem(0x9376), 0x4e);
        // CB 4E 01F0
        gbc.setState(0x8f7, 0xad40, 0x1020, 0x97f1, 0xd6f9, 0x5b79, 0x0, 0x0);
        gbc.writeMem(0x8f7, { 0xcb, 0x4e });
        gbc.writeMem(0x5b79, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xad40);
        EXPECT(gbc.pc(), 0x8f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01F1
        gbc.setState(0x4e3c, 0x188f, 0x3030, 0x2896, 0x43f0, 0xe3fe, 0x0, 0x0);
        gbc.writeMem(0x4e3c, { 0xcb, 0x4e });
        gbc.writeMem(0xe3fe, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x188f);
        EXPECT(gbc.pc(), 0x4e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3fe), 0xd4);
        // CB 4E 01F2
        gbc.setState(0x299b, 0x7d80, 0x7a70, 0x1179, 0xfcd4, 0xe888, 0x1, 0x0);
        gbc.writeMem(0x299b, { 0xcb, 0x4e });
        gbc.writeMem(0xe888, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7d80);
        EXPECT(gbc.pc(), 0x299d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe888), 0xbd);
        // CB 4E 01F3
        gbc.setState(0x84a2, 0x19b6, 0xa310, 0x68f9, 0xa5a4, 0xd6e6, 0x1, 0x1);
        gbc.writeMem(0x84a2, { 0xcb, 0x4e });
        gbc.writeMem(0xd6e6, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x19b6);
        EXPECT(gbc.pc(), 0x84a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a2), 0xcb);
        EXPECT(gbc.readMem(0x84a3), 0x4e);
        EXPECT(gbc.readMem(0xd6e6), 0x23);
        // CB 4E 01F4
        gbc.setState(0x7bed, 0x5dd0, 0xa5c0, 0x564e, 0x38ea, 0x467f, 0x0, 0x0);
        gbc.writeMem(0x467f, { 0x8a });
        gbc.writeMem(0x7bed, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5dd0);
        EXPECT(gbc.pc(), 0x7bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 01F5
        gbc.setState(0x410a, 0x475e, 0xf4f0, 0xb06b, 0xe97, 0x6206, 0x1, 0x1);
        gbc.writeMem(0x410a, { 0xcb, 0x4e });
        gbc.writeMem(0x6206, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x475e);
        EXPECT(gbc.pc(), 0x410c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01F7
        gbc.setState(0xb0de, 0x15bb, 0x860, 0x2f3a, 0x399b, 0x6d0, 0x0, 0x1);
        gbc.writeMem(0x6d0, { 0x1e });
        gbc.writeMem(0xb0de, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x15bb);
        EXPECT(gbc.pc(), 0xb0e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0de), 0xcb);
        EXPECT(gbc.readMem(0xb0df), 0x4e);
        // CB 4E 01F8
        gbc.setState(0xba9b, 0x26aa, 0x7710, 0xf6ad, 0x512b, 0x50e4, 0x0, 0x1);
        gbc.writeMem(0x50e4, { 0xe8 });
        gbc.writeMem(0xba9b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x26aa);
        EXPECT(gbc.pc(), 0xba9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba9b), 0xcb);
        EXPECT(gbc.readMem(0xba9c), 0x4e);
        // CB 4E 01F9
        gbc.setState(0xc695, 0xfdd0, 0xe790, 0x2c4, 0x696c, 0xf92a, 0x0, 0x1);
        gbc.writeMem(0xc695, { 0xcb, 0x4e });
        gbc.writeMem(0xf92a, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfdd0);
        EXPECT(gbc.pc(), 0xc697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc695), 0xcb);
        EXPECT(gbc.readMem(0xc696), 0x4e);
        EXPECT(gbc.readMem(0xf92a), 0x94);
        // CB 4E 01FA
        gbc.setState(0x320a, 0x5a47, 0x43c0, 0x3a8e, 0x1ebc, 0xc909, 0x0, 0x1);
        gbc.writeMem(0x320a, { 0xcb, 0x4e });
        gbc.writeMem(0xc909, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5a47);
        EXPECT(gbc.pc(), 0x320c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc909), 0x3a);
        // CB 4E 01FB
        gbc.setState(0x5902, 0xcab, 0xedb0, 0x5d85, 0x941b, 0x2bb8, 0x1, 0x0);
        gbc.writeMem(0x2bb8, { 0x8d });
        gbc.writeMem(0x5902, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xcab);
        EXPECT(gbc.pc(), 0x5904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01FC
        gbc.setState(0x813f, 0x7c3f, 0x6db0, 0x54cd, 0xfc99, 0x778f, 0x1, 0x0);
        gbc.writeMem(0x778f, { 0x5b });
        gbc.writeMem(0x813f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7c3f);
        EXPECT(gbc.pc(), 0x8141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x813f), 0xcb);
        EXPECT(gbc.readMem(0x8140), 0x4e);
        // CB 4E 01FD
        gbc.setState(0xdf4, 0x9551, 0xec30, 0x3b6f, 0x377d, 0xe1d1, 0x0, 0x1);
        gbc.writeMem(0xdf4, { 0xcb, 0x4e });
        gbc.writeMem(0xe1d1, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9551);
        EXPECT(gbc.pc(), 0xdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d1), 0xe);
        // CB 4E 01FE
        gbc.setState(0x6fb3, 0xe242, 0x6f90, 0x4756, 0x4850, 0x5748, 0x1, 0x1);
        gbc.writeMem(0x5748, { 0x50 });
        gbc.writeMem(0x6fb3, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe242);
        EXPECT(gbc.pc(), 0x6fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 01FF
        gbc.setState(0xbf39, 0xa9f5, 0xc1b0, 0x3c38, 0x1e96, 0xaf88, 0x1, 0x0);
        gbc.writeMem(0xaf88, { 0x41 });
        gbc.writeMem(0xbf39, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa9f5);
        EXPECT(gbc.pc(), 0xbf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf88), 0x41);
        EXPECT(gbc.readMem(0xbf39), 0xcb);
        EXPECT(gbc.readMem(0xbf3a), 0x4e);
        // CB 4E 0200
        gbc.setState(0xb4c6, 0xb561, 0xd9b0, 0x809, 0xb0ab, 0xd203, 0x1, 0x1);
        gbc.writeMem(0xb4c6, { 0xcb, 0x4e });
        gbc.writeMem(0xd203, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb561);
        EXPECT(gbc.pc(), 0xb4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c6), 0xcb);
        EXPECT(gbc.readMem(0xb4c7), 0x4e);
        EXPECT(gbc.readMem(0xd203), 0x6b);
        // CB 4E 0201
        gbc.setState(0x2e7d, 0x2643, 0x2350, 0x9272, 0x9853, 0xf93c, 0x0, 0x1);
        gbc.writeMem(0x2e7d, { 0xcb, 0x4e });
        gbc.writeMem(0xf93c, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2643);
        EXPECT(gbc.pc(), 0x2e7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf93c), 0x4a);
        // CB 4E 0202
        gbc.setState(0x3f28, 0xa8dc, 0xdee0, 0xba35, 0xa968, 0x72a1, 0x1, 0x0);
        gbc.writeMem(0x3f28, { 0xcb, 0x4e });
        gbc.writeMem(0x72a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa8dc);
        EXPECT(gbc.pc(), 0x3f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0204
        gbc.setState(0x198, 0x1bcd, 0xb730, 0xd2eb, 0x2b13, 0xef42, 0x1, 0x0);
        gbc.writeMem(0x198, { 0xcb, 0x4e });
        gbc.writeMem(0xef42, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1bcd);
        EXPECT(gbc.pc(), 0x19a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef42), 0x79);
        // CB 4E 0205
        gbc.setState(0xebe4, 0x7588, 0x5140, 0xd2fc, 0xcd2a, 0x2808, 0x1, 0x1);
        gbc.writeMem(0x2808, { 0xf8 });
        gbc.writeMem(0xebe4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7588);
        EXPECT(gbc.pc(), 0xebe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe4), 0xcb);
        EXPECT(gbc.readMem(0xebe5), 0x4e);
        // CB 4E 0206
        gbc.setState(0x832c, 0x335e, 0x3310, 0x8b5c, 0xb33f, 0xfb05, 0x1, 0x1);
        gbc.writeMem(0x832c, { 0xcb, 0x4e });
        gbc.writeMem(0xfb05, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x335e);
        EXPECT(gbc.pc(), 0x832e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x832c), 0xcb);
        EXPECT(gbc.readMem(0x832d), 0x4e);
        EXPECT(gbc.readMem(0xfb05), 0xe3);
        // CB 4E 0207
        gbc.setState(0x885c, 0x660e, 0x3180, 0xa6c1, 0x1042, 0x6e91, 0x1, 0x0);
        gbc.writeMem(0x6e91, { 0x36 });
        gbc.writeMem(0x885c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x660e);
        EXPECT(gbc.pc(), 0x885e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885c), 0xcb);
        EXPECT(gbc.readMem(0x885d), 0x4e);
        // CB 4E 0208
        gbc.setState(0x9cb, 0x5f44, 0x1c90, 0x44f2, 0x8000, 0xda01, 0x0, 0x1);
        gbc.writeMem(0x9cb, { 0xcb, 0x4e });
        gbc.writeMem(0xda01, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5f44);
        EXPECT(gbc.pc(), 0x9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda01), 0x8b);
        // CB 4E 0209
        gbc.setState(0x62cf, 0x5a1, 0xa090, 0x75ed, 0x9c65, 0x663d, 0x0, 0x0);
        gbc.writeMem(0x62cf, { 0xcb, 0x4e });
        gbc.writeMem(0x663d, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5a1);
        EXPECT(gbc.pc(), 0x62d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 020A
        gbc.setState(0xf8e, 0xc289, 0x1230, 0x257f, 0xc53f, 0x3295, 0x1, 0x1);
        gbc.writeMem(0xf8e, { 0xcb, 0x4e });
        gbc.writeMem(0x3295, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc289);
        EXPECT(gbc.pc(), 0xf90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 020B
        gbc.setState(0xce8e, 0x9eb2, 0xae10, 0x1500, 0x49a7, 0x47b0, 0x1, 0x0);
        gbc.writeMem(0x47b0, { 0x6e });
        gbc.writeMem(0xce8e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9eb2);
        EXPECT(gbc.pc(), 0xce90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce8e), 0xcb);
        EXPECT(gbc.readMem(0xce8f), 0x4e);
        // CB 4E 020C
        gbc.setState(0xa0d5, 0xfd78, 0x72a0, 0xf303, 0x322d, 0x752e, 0x0, 0x1);
        gbc.writeMem(0x752e, { 0xa9 });
        gbc.writeMem(0xa0d5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfd78);
        EXPECT(gbc.pc(), 0xa0d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d5), 0xcb);
        EXPECT(gbc.readMem(0xa0d6), 0x4e);
        // CB 4E 020D
        gbc.setState(0xdbaa, 0x3aa6, 0xf360, 0xbec1, 0x9114, 0x762b, 0x0, 0x1);
        gbc.writeMem(0x762b, { 0x27 });
        gbc.writeMem(0xdbaa, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3aa6);
        EXPECT(gbc.pc(), 0xdbac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbaa), 0xcb);
        EXPECT(gbc.readMem(0xdbab), 0x4e);
        // CB 4E 020E
        gbc.setState(0x4275, 0xad1a, 0x18c0, 0x170d, 0xf3b8, 0x54de, 0x1, 0x0);
        gbc.writeMem(0x4275, { 0xcb, 0x4e });
        gbc.writeMem(0x54de, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xad1a);
        EXPECT(gbc.pc(), 0x4277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 020F
        gbc.setState(0xeeed, 0x700c, 0xfa40, 0xf5b7, 0x19c6, 0xc986, 0x0, 0x0);
        gbc.writeMem(0xc986, { 0x3e });
        gbc.writeMem(0xeeed, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x700c);
        EXPECT(gbc.pc(), 0xeeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc986), 0x3e);
        EXPECT(gbc.readMem(0xeeed), 0xcb);
        EXPECT(gbc.readMem(0xeeee), 0x4e);
        // CB 4E 0210
        gbc.setState(0x7381, 0xa201, 0x9d00, 0x5483, 0x6550, 0xa106, 0x0, 0x0);
        gbc.writeMem(0x7381, { 0xcb, 0x4e });
        gbc.writeMem(0xa106, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa201);
        EXPECT(gbc.pc(), 0x7383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa106), 0x8f);
        // CB 4E 0211
        gbc.setState(0x42d8, 0x159c, 0xf180, 0xee21, 0x716d, 0xd7b7, 0x0, 0x1);
        gbc.writeMem(0x42d8, { 0xcb, 0x4e });
        gbc.writeMem(0xd7b7, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x159c);
        EXPECT(gbc.pc(), 0x42da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b7), 0x2b);
        // CB 4E 0212
        gbc.setState(0xdaba, 0x8dac, 0x6120, 0x4903, 0x6770, 0xa8f5, 0x1, 0x0);
        gbc.writeMem(0xa8f5, { 0x8f });
        gbc.writeMem(0xdaba, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8dac);
        EXPECT(gbc.pc(), 0xdabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f5), 0x8f);
        EXPECT(gbc.readMem(0xdaba), 0xcb);
        EXPECT(gbc.readMem(0xdabb), 0x4e);
        // CB 4E 0213
        gbc.setState(0x740b, 0x94fd, 0xf750, 0x5c3f, 0x7e67, 0xe0aa, 0x0, 0x0);
        gbc.writeMem(0x740b, { 0xcb, 0x4e });
        gbc.writeMem(0xe0aa, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x94fd);
        EXPECT(gbc.pc(), 0x740d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0aa), 0xbf);
        // CB 4E 0215
        gbc.setState(0x993f, 0xa2b6, 0xfe50, 0xbb75, 0x8704, 0x6ebd, 0x1, 0x0);
        gbc.writeMem(0x6ebd, { 0xed });
        gbc.writeMem(0x993f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa2b6);
        EXPECT(gbc.pc(), 0x9941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993f), 0xcb);
        EXPECT(gbc.readMem(0x9940), 0x4e);
        // CB 4E 0216
        gbc.setState(0x64f1, 0xef08, 0x86c0, 0xf320, 0xfef6, 0x7111, 0x1, 0x0);
        gbc.writeMem(0x64f1, { 0xcb, 0x4e });
        gbc.writeMem(0x7111, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xef08);
        EXPECT(gbc.pc(), 0x64f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0217
        gbc.setState(0x46, 0xb755, 0x940, 0x1cc1, 0x77f1, 0x3227, 0x1, 0x0);
        gbc.writeMem(0x46, { 0xcb, 0x4e });
        gbc.writeMem(0x3227, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb755);
        EXPECT(gbc.pc(), 0x48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0218
        gbc.setState(0xd6c8, 0xfeb2, 0xca50, 0xd686, 0xe983, 0x18f9, 0x1, 0x1);
        gbc.writeMem(0x18f9, { 0x79 });
        gbc.writeMem(0xd6c8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfeb2);
        EXPECT(gbc.pc(), 0xd6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c8), 0xcb);
        EXPECT(gbc.readMem(0xd6c9), 0x4e);
        // CB 4E 0219
        gbc.setState(0x61ab, 0x9a34, 0xf5e0, 0x6ec6, 0xdd14, 0x2d72, 0x1, 0x0);
        gbc.writeMem(0x2d72, { 0xc3 });
        gbc.writeMem(0x61ab, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9a34);
        EXPECT(gbc.pc(), 0x61ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 021A
        gbc.setState(0xaf1d, 0x870, 0xec40, 0xf030, 0x695a, 0x1751, 0x1, 0x0);
        gbc.writeMem(0x1751, { 0xb });
        gbc.writeMem(0xaf1d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x870);
        EXPECT(gbc.pc(), 0xaf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf1d), 0xcb);
        EXPECT(gbc.readMem(0xaf1e), 0x4e);
        // CB 4E 021B
        gbc.setState(0xa111, 0x1b9b, 0xbeb0, 0x2406, 0x9f4, 0x238e, 0x1, 0x1);
        gbc.writeMem(0x238e, { 0x3c });
        gbc.writeMem(0xa111, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1b9b);
        EXPECT(gbc.pc(), 0xa113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa111), 0xcb);
        EXPECT(gbc.readMem(0xa112), 0x4e);
        // CB 4E 021C
        gbc.setState(0x396e, 0xa7bd, 0xe9b0, 0x266e, 0x9533, 0xb801, 0x1, 0x0);
        gbc.writeMem(0x396e, { 0xcb, 0x4e });
        gbc.writeMem(0xb801, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa7bd);
        EXPECT(gbc.pc(), 0x3970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb801), 0x79);
        // CB 4E 021D
        gbc.setState(0x2cf1, 0x2c53, 0x9af0, 0xc7f8, 0x59f7, 0x604e, 0x1, 0x0);
        gbc.writeMem(0x2cf1, { 0xcb, 0x4e });
        gbc.writeMem(0x604e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2c53);
        EXPECT(gbc.pc(), 0x2cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 021E
        gbc.setState(0x1514, 0xd216, 0xa50, 0x2511, 0x3616, 0x3bb6, 0x1, 0x1);
        gbc.writeMem(0x1514, { 0xcb, 0x4e });
        gbc.writeMem(0x3bb6, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd216);
        EXPECT(gbc.pc(), 0x1516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 021F
        gbc.setState(0x446f, 0xf865, 0xfd10, 0xff6a, 0xec32, 0xcb26, 0x0, 0x0);
        gbc.writeMem(0x446f, { 0xcb, 0x4e });
        gbc.writeMem(0xcb26, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf865);
        EXPECT(gbc.pc(), 0x4471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb26), 0xac);
        // CB 4E 0220
        gbc.setState(0x3ced, 0x69f6, 0xfea0, 0xbab4, 0x80f3, 0xee85, 0x0, 0x0);
        gbc.writeMem(0x3ced, { 0xcb, 0x4e });
        gbc.writeMem(0xee85, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x69f6);
        EXPECT(gbc.pc(), 0x3cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee85), 0xae);
        // CB 4E 0221
        gbc.setState(0x7c7e, 0x411a, 0x6e40, 0x1691, 0xcc3a, 0xccf1, 0x0, 0x1);
        gbc.writeMem(0x7c7e, { 0xcb, 0x4e });
        gbc.writeMem(0xccf1, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x411a);
        EXPECT(gbc.pc(), 0x7c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf1), 0x9c);
        // CB 4E 0222
        gbc.setState(0x3442, 0xa94c, 0xffe0, 0x536f, 0xaaa2, 0xebac, 0x0, 0x1);
        gbc.writeMem(0x3442, { 0xcb, 0x4e });
        gbc.writeMem(0xebac, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa94c);
        EXPECT(gbc.pc(), 0x3444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebac), 0x3b);
        // CB 4E 0224
        gbc.setState(0xe890, 0x29, 0x71c0, 0xcae4, 0x2a23, 0xbbd5, 0x0, 0x1);
        gbc.writeMem(0xbbd5, { 0x24 });
        gbc.writeMem(0xe890, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x29);
        EXPECT(gbc.pc(), 0xe892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd5), 0x24);
        EXPECT(gbc.readMem(0xe890), 0xcb);
        EXPECT(gbc.readMem(0xe891), 0x4e);
        // CB 4E 0225
        gbc.setState(0xce7e, 0x5bc9, 0x4ef0, 0x7997, 0x447f, 0x4874, 0x1, 0x1);
        gbc.writeMem(0x4874, { 0x7 });
        gbc.writeMem(0xce7e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5bc9);
        EXPECT(gbc.pc(), 0xce80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7e), 0xcb);
        EXPECT(gbc.readMem(0xce7f), 0x4e);
        // CB 4E 0226
        gbc.setState(0x3fac, 0x702c, 0xdbb0, 0xbb0, 0xb70e, 0x6c7b, 0x0, 0x0);
        gbc.writeMem(0x3fac, { 0xcb, 0x4e });
        gbc.writeMem(0x6c7b, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x702c);
        EXPECT(gbc.pc(), 0x3fae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0227
        gbc.setState(0xcca1, 0x47e0, 0x6980, 0xc25c, 0x81dd, 0xc042, 0x1, 0x0);
        gbc.writeMem(0xc042, { 0xb7 });
        gbc.writeMem(0xcca1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x47e0);
        EXPECT(gbc.pc(), 0xcca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc042), 0xb7);
        EXPECT(gbc.readMem(0xcca1), 0xcb);
        EXPECT(gbc.readMem(0xcca2), 0x4e);
        // CB 4E 0228
        gbc.setState(0x8d10, 0xaae6, 0x4640, 0xa7ad, 0x9387, 0x3bcb, 0x1, 0x0);
        gbc.writeMem(0x3bcb, { 0x84 });
        gbc.writeMem(0x8d10, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaae6);
        EXPECT(gbc.pc(), 0x8d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d10), 0xcb);
        EXPECT(gbc.readMem(0x8d11), 0x4e);
        // CB 4E 0229
        gbc.setState(0x425d, 0x4bfb, 0xaba0, 0x2c95, 0xb6eb, 0x8eb7, 0x0, 0x1);
        gbc.writeMem(0x425d, { 0xcb, 0x4e });
        gbc.writeMem(0x8eb7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4bfb);
        EXPECT(gbc.pc(), 0x425f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb7), 0xf5);
        // CB 4E 022A
        gbc.setState(0x1093, 0xf041, 0x99c0, 0xfa23, 0x24a, 0x8e02, 0x1, 0x1);
        gbc.writeMem(0x1093, { 0xcb, 0x4e });
        gbc.writeMem(0x8e02, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf041);
        EXPECT(gbc.pc(), 0x1095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e02), 0xb7);
        // CB 4E 022B
        gbc.setState(0x5c71, 0x7fe4, 0x47b0, 0x886d, 0xde8c, 0x63d3, 0x0, 0x1);
        gbc.writeMem(0x5c71, { 0xcb, 0x4e });
        gbc.writeMem(0x63d3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7fe4);
        EXPECT(gbc.pc(), 0x5c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 022C
        gbc.setState(0x21a4, 0xa368, 0x1890, 0xfbd9, 0xe945, 0xdbb8, 0x1, 0x0);
        gbc.writeMem(0x21a4, { 0xcb, 0x4e });
        gbc.writeMem(0xdbb8, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa368);
        EXPECT(gbc.pc(), 0x21a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbb8), 0xe8);
        // CB 4E 022D
        gbc.setState(0x39a0, 0xd00b, 0x7c00, 0xb5e2, 0x4a3b, 0x46de, 0x1, 0x0);
        gbc.writeMem(0x39a0, { 0xcb, 0x4e });
        gbc.writeMem(0x46de, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd00b);
        EXPECT(gbc.pc(), 0x39a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 022E
        gbc.setState(0x53e7, 0x38b9, 0x5fa0, 0x307e, 0x24a1, 0xe1f0, 0x0, 0x1);
        gbc.writeMem(0x53e7, { 0xcb, 0x4e });
        gbc.writeMem(0xe1f0, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x38b9);
        EXPECT(gbc.pc(), 0x53e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f0), 0xd6);
        // CB 4E 022F
        gbc.setState(0xbbd0, 0x9ea2, 0xade0, 0x535d, 0x95e3, 0x5a9b, 0x1, 0x0);
        gbc.writeMem(0x5a9b, { 0x71 });
        gbc.writeMem(0xbbd0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9ea2);
        EXPECT(gbc.pc(), 0xbbd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd0), 0xcb);
        EXPECT(gbc.readMem(0xbbd1), 0x4e);
        // CB 4E 0230
        gbc.setState(0x8409, 0x5ebb, 0xa450, 0x17a5, 0x1caf, 0xf7be, 0x1, 0x0);
        gbc.writeMem(0x8409, { 0xcb, 0x4e });
        gbc.writeMem(0xf7be, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5ebb);
        EXPECT(gbc.pc(), 0x840b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8409), 0xcb);
        EXPECT(gbc.readMem(0x840a), 0x4e);
        EXPECT(gbc.readMem(0xf7be), 0x9f);
        // CB 4E 0231
        gbc.setState(0xc740, 0x9f24, 0x5020, 0x78f4, 0x3819, 0x64ca, 0x0, 0x0);
        gbc.writeMem(0x64ca, { 0x39 });
        gbc.writeMem(0xc740, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9f24);
        EXPECT(gbc.pc(), 0xc742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc740), 0xcb);
        EXPECT(gbc.readMem(0xc741), 0x4e);
        // CB 4E 0232
        gbc.setState(0xb1d8, 0x66ae, 0x2db0, 0xbf48, 0x597e, 0xf06f, 0x1, 0x1);
        gbc.writeMem(0xb1d8, { 0xcb, 0x4e });
        gbc.writeMem(0xf06f, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x66ae);
        EXPECT(gbc.pc(), 0xb1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1d8), 0xcb);
        EXPECT(gbc.readMem(0xb1d9), 0x4e);
        EXPECT(gbc.readMem(0xf06f), 0x50);
        // CB 4E 0233
        gbc.setState(0x92fe, 0x4ad2, 0xef80, 0xbb12, 0xb7e1, 0xebe, 0x0, 0x0);
        gbc.writeMem(0xebe, { 0xdd });
        gbc.writeMem(0x92fe, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4ad2);
        EXPECT(gbc.pc(), 0x9300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92fe), 0xcb);
        EXPECT(gbc.readMem(0x92ff), 0x4e);
        // CB 4E 0234
        gbc.setState(0x3817, 0x1d1b, 0x4d60, 0x59a6, 0x27f0, 0x63af, 0x1, 0x1);
        gbc.writeMem(0x3817, { 0xcb, 0x4e });
        gbc.writeMem(0x63af, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1d1b);
        EXPECT(gbc.pc(), 0x3819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0235
        gbc.setState(0xc681, 0x462d, 0xa8b0, 0x67b2, 0xa0fb, 0xc699, 0x1, 0x0);
        gbc.writeMem(0xc681, { 0xcb, 0x4e });
        gbc.writeMem(0xc699, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x462d);
        EXPECT(gbc.pc(), 0xc683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc681), 0xcb);
        EXPECT(gbc.readMem(0xc682), 0x4e);
        EXPECT(gbc.readMem(0xc699), 0x37);
        // CB 4E 0236
        gbc.setState(0xe341, 0xe249, 0x26e0, 0xe2ac, 0xdccc, 0x9869, 0x1, 0x1);
        gbc.writeMem(0x9869, { 0xe2 });
        gbc.writeMem(0xe341, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe249);
        EXPECT(gbc.pc(), 0xe343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9869), 0xe2);
        EXPECT(gbc.readMem(0xe341), 0xcb);
        EXPECT(gbc.readMem(0xe342), 0x4e);
        // CB 4E 0237
        gbc.setState(0x1713, 0xfd0a, 0x9250, 0xfe8d, 0x308e, 0x1a5e, 0x0, 0x0);
        gbc.writeMem(0x1713, { 0xcb, 0x4e });
        gbc.writeMem(0x1a5e, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfd0a);
        EXPECT(gbc.pc(), 0x1715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0238
        gbc.setState(0xeeeb, 0x1374, 0x10, 0x21c9, 0x970f, 0xd025, 0x0, 0x0);
        gbc.writeMem(0xd025, { 0x3d });
        gbc.writeMem(0xeeeb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1374);
        EXPECT(gbc.pc(), 0xeeed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd025), 0x3d);
        EXPECT(gbc.readMem(0xeeeb), 0xcb);
        EXPECT(gbc.readMem(0xeeec), 0x4e);
        // CB 4E 0239
        gbc.setState(0x6dc9, 0xa6ad, 0x7ff0, 0x5e0a, 0xca23, 0xac1f, 0x1, 0x0);
        gbc.writeMem(0x6dc9, { 0xcb, 0x4e });
        gbc.writeMem(0xac1f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa6ad);
        EXPECT(gbc.pc(), 0x6dcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac1f), 0x9f);
        // CB 4E 023A
        gbc.setState(0xef57, 0x51be, 0x4fd0, 0x5534, 0x2ab5, 0x18ce, 0x1, 0x1);
        gbc.writeMem(0x18ce, { 0x3c });
        gbc.writeMem(0xef57, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x51be);
        EXPECT(gbc.pc(), 0xef59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef57), 0xcb);
        EXPECT(gbc.readMem(0xef58), 0x4e);
        // CB 4E 023C
        gbc.setState(0xc392, 0xad88, 0xa30, 0x8427, 0xbc36, 0x9e8d, 0x1, 0x1);
        gbc.writeMem(0x9e8d, { 0xcf });
        gbc.writeMem(0xc392, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xad88);
        EXPECT(gbc.pc(), 0xc394);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8d), 0xcf);
        EXPECT(gbc.readMem(0xc392), 0xcb);
        EXPECT(gbc.readMem(0xc393), 0x4e);
        // CB 4E 023D
        gbc.setState(0x9ed1, 0x77dc, 0xdc60, 0xe5f5, 0xa9b8, 0x3681, 0x1, 0x1);
        gbc.writeMem(0x3681, { 0xb7 });
        gbc.writeMem(0x9ed1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x77dc);
        EXPECT(gbc.pc(), 0x9ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed1), 0xcb);
        EXPECT(gbc.readMem(0x9ed2), 0x4e);
        // CB 4E 023E
        gbc.setState(0x36cc, 0x2362, 0xe50, 0x3576, 0x56f5, 0xc034, 0x1, 0x1);
        gbc.writeMem(0x36cc, { 0xcb, 0x4e });
        gbc.writeMem(0xc034, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2362);
        EXPECT(gbc.pc(), 0x36ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc034), 0x7e);
        // CB 4E 023F
        gbc.setState(0x35c8, 0xc31e, 0xa870, 0x9279, 0x15e, 0xf428, 0x1, 0x1);
        gbc.writeMem(0x35c8, { 0xcb, 0x4e });
        gbc.writeMem(0xf428, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc31e);
        EXPECT(gbc.pc(), 0x35ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf428), 0x1d);
        // CB 4E 0241
        gbc.setState(0x239c, 0xdb36, 0x4540, 0x3d19, 0xac60, 0xc013, 0x1, 0x0);
        gbc.writeMem(0x239c, { 0xcb, 0x4e });
        gbc.writeMem(0xc013, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdb36);
        EXPECT(gbc.pc(), 0x239e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc013), 0xf);
        // CB 4E 0242
        gbc.setState(0x9750, 0x1352, 0x4130, 0x9e47, 0xbe1b, 0x6ee1, 0x0, 0x1);
        gbc.writeMem(0x6ee1, { 0xef });
        gbc.writeMem(0x9750, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1352);
        EXPECT(gbc.pc(), 0x9752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9750), 0xcb);
        EXPECT(gbc.readMem(0x9751), 0x4e);
        // CB 4E 0244
        gbc.setState(0x43c9, 0x893c, 0x33a0, 0xb1c7, 0xbbc, 0x48b1, 0x1, 0x0);
        gbc.writeMem(0x43c9, { 0xcb, 0x4e });
        gbc.writeMem(0x48b1, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x893c);
        EXPECT(gbc.pc(), 0x43cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0245
        gbc.setState(0xc914, 0xb4dd, 0x5200, 0xb286, 0x37d4, 0x9e50, 0x0, 0x0);
        gbc.writeMem(0x9e50, { 0xb9 });
        gbc.writeMem(0xc914, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb4dd);
        EXPECT(gbc.pc(), 0xc916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e50), 0xb9);
        EXPECT(gbc.readMem(0xc914), 0xcb);
        EXPECT(gbc.readMem(0xc915), 0x4e);
        // CB 4E 0246
        gbc.setState(0xbfbd, 0xb80c, 0x4ba0, 0x5d88, 0xd644, 0x6314, 0x1, 0x1);
        gbc.writeMem(0x6314, { 0xb8 });
        gbc.writeMem(0xbfbd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb80c);
        EXPECT(gbc.pc(), 0xbfbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfbd), 0xcb);
        EXPECT(gbc.readMem(0xbfbe), 0x4e);
        // CB 4E 0247
        gbc.setState(0x1d5e, 0x1504, 0x5b20, 0xd7f3, 0xde2, 0x73a3, 0x0, 0x0);
        gbc.writeMem(0x1d5e, { 0xcb, 0x4e });
        gbc.writeMem(0x73a3, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1504);
        EXPECT(gbc.pc(), 0x1d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0248
        gbc.setState(0x5fdd, 0x39c1, 0x4b70, 0xef52, 0xf18f, 0x1d64, 0x1, 0x0);
        gbc.writeMem(0x1d64, { 0x7f });
        gbc.writeMem(0x5fdd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x39c1);
        EXPECT(gbc.pc(), 0x5fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0249
        gbc.setState(0xa35b, 0x2c8a, 0x5ad0, 0xf340, 0x6dfc, 0x8b30, 0x0, 0x1);
        gbc.writeMem(0x8b30, { 0xef });
        gbc.writeMem(0xa35b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2c8a);
        EXPECT(gbc.pc(), 0xa35d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b30), 0xef);
        EXPECT(gbc.readMem(0xa35b), 0xcb);
        EXPECT(gbc.readMem(0xa35c), 0x4e);
        // CB 4E 024A
        gbc.setState(0xbcc2, 0x6f99, 0xad10, 0xbf35, 0x8dda, 0x4e50, 0x0, 0x0);
        gbc.writeMem(0x4e50, { 0x93 });
        gbc.writeMem(0xbcc2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6f99);
        EXPECT(gbc.pc(), 0xbcc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc2), 0xcb);
        EXPECT(gbc.readMem(0xbcc3), 0x4e);
        // CB 4E 024B
        gbc.setState(0xa626, 0x3612, 0x7d30, 0x19f2, 0xa233, 0xcd39, 0x1, 0x0);
        gbc.writeMem(0xa626, { 0xcb, 0x4e });
        gbc.writeMem(0xcd39, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3612);
        EXPECT(gbc.pc(), 0xa628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa626), 0xcb);
        EXPECT(gbc.readMem(0xa627), 0x4e);
        EXPECT(gbc.readMem(0xcd39), 0x9d);
        // CB 4E 024C
        gbc.setState(0x48f1, 0xae7f, 0xa4e0, 0x7239, 0xa54d, 0x23b6, 0x0, 0x1);
        gbc.writeMem(0x23b6, { 0x56 });
        gbc.writeMem(0x48f1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xae7f);
        EXPECT(gbc.pc(), 0x48f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 024D
        gbc.setState(0xc203, 0x3d12, 0xee30, 0x969f, 0xbd97, 0xc085, 0x0, 0x0);
        gbc.writeMem(0xc085, { 0x43 });
        gbc.writeMem(0xc203, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3d12);
        EXPECT(gbc.pc(), 0xc205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc085), 0x43);
        EXPECT(gbc.readMem(0xc203), 0xcb);
        EXPECT(gbc.readMem(0xc204), 0x4e);
        // CB 4E 024E
        gbc.setState(0xe077, 0xbf59, 0xe980, 0xbd41, 0xca8e, 0x655a, 0x0, 0x0);
        gbc.writeMem(0x655a, { 0xf5 });
        gbc.writeMem(0xe077, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbf59);
        EXPECT(gbc.pc(), 0xe079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe077), 0xcb);
        EXPECT(gbc.readMem(0xe078), 0x4e);
        // CB 4E 024F
        gbc.setState(0xeb37, 0x86dd, 0x78a0, 0x5b67, 0xc5e4, 0xe6f8, 0x0, 0x1);
        gbc.writeMem(0xe6f8, { 0x4f });
        gbc.writeMem(0xeb37, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x86dd);
        EXPECT(gbc.pc(), 0xeb39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f8), 0x4f);
        EXPECT(gbc.readMem(0xeb37), 0xcb);
        EXPECT(gbc.readMem(0xeb38), 0x4e);
        // CB 4E 0250
        gbc.setState(0xa62d, 0x5b09, 0x3cd0, 0xedd0, 0x1d4d, 0x5935, 0x0, 0x0);
        gbc.writeMem(0x5935, { 0x2f });
        gbc.writeMem(0xa62d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5b09);
        EXPECT(gbc.pc(), 0xa62f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa62d), 0xcb);
        EXPECT(gbc.readMem(0xa62e), 0x4e);
        // CB 4E 0251
        gbc.setState(0x1610, 0xc1f0, 0x7750, 0xc618, 0x5523, 0x9030, 0x0, 0x1);
        gbc.writeMem(0x1610, { 0xcb, 0x4e });
        gbc.writeMem(0x9030, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc1f0);
        EXPECT(gbc.pc(), 0x1612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9030), 0xb6);
        // CB 4E 0253
        gbc.setState(0xb420, 0x888b, 0x68c0, 0x47a3, 0xb354, 0xfe2e, 0x0, 0x0);
        gbc.writeMem(0xb420, { 0xcb, 0x4e });
        gbc.writeMem(0xfe2e, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x888b);
        EXPECT(gbc.pc(), 0xb422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb420), 0xcb);
        EXPECT(gbc.readMem(0xb421), 0x4e);
        EXPECT(gbc.readMem(0xfe2e), 0x5f);
        // CB 4E 0254
        gbc.setState(0x5110, 0x3a66, 0x7e60, 0xe802, 0x3e00, 0x6724, 0x0, 0x1);
        gbc.writeMem(0x5110, { 0xcb, 0x4e });
        gbc.writeMem(0x6724, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3a66);
        EXPECT(gbc.pc(), 0x5112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0255
        gbc.setState(0x5210, 0x1390, 0x20c0, 0x252, 0x9e2d, 0x2559, 0x0, 0x0);
        gbc.writeMem(0x2559, { 0xf0 });
        gbc.writeMem(0x5210, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1390);
        EXPECT(gbc.pc(), 0x5212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0256
        gbc.setState(0x6f08, 0x9e06, 0x35e0, 0x8190, 0xac7d, 0x36a8, 0x1, 0x1);
        gbc.writeMem(0x36a8, { 0xc1 });
        gbc.writeMem(0x6f08, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9e06);
        EXPECT(gbc.pc(), 0x6f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0258
        gbc.setState(0x9166, 0x20eb, 0xfa0, 0x307, 0xe678, 0x193c, 0x0, 0x1);
        gbc.writeMem(0x193c, { 0xb4 });
        gbc.writeMem(0x9166, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x20eb);
        EXPECT(gbc.pc(), 0x9168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9166), 0xcb);
        EXPECT(gbc.readMem(0x9167), 0x4e);
        // CB 4E 0259
        gbc.setState(0x899, 0x968c, 0xae60, 0x40ed, 0x58e6, 0x93f4, 0x0, 0x1);
        gbc.writeMem(0x899, { 0xcb, 0x4e });
        gbc.writeMem(0x93f4, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x968c);
        EXPECT(gbc.pc(), 0x89b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f4), 0xe7);
        // CB 4E 025C
        gbc.setState(0xd1ec, 0x1c3, 0x9ff0, 0x424f, 0xb7d7, 0x396a, 0x0, 0x1);
        gbc.writeMem(0x396a, { 0x6b });
        gbc.writeMem(0xd1ec, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1c3);
        EXPECT(gbc.pc(), 0xd1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ec), 0xcb);
        EXPECT(gbc.readMem(0xd1ed), 0x4e);
        // CB 4E 025D
        gbc.setState(0xbf86, 0xd3fa, 0x8d70, 0x4630, 0xc68a, 0xba87, 0x0, 0x0);
        gbc.writeMem(0xba87, { 0x8c });
        gbc.writeMem(0xbf86, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0xbf88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba87), 0x8c);
        EXPECT(gbc.readMem(0xbf86), 0xcb);
        EXPECT(gbc.readMem(0xbf87), 0x4e);
        // CB 4E 025E
        gbc.setState(0x8297, 0xb288, 0x9500, 0x42b8, 0xdfb4, 0x785c, 0x0, 0x1);
        gbc.writeMem(0x785c, { 0x82 });
        gbc.writeMem(0x8297, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb288);
        EXPECT(gbc.pc(), 0x8299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8297), 0xcb);
        EXPECT(gbc.readMem(0x8298), 0x4e);
        // CB 4E 025F
        gbc.setState(0x9b56, 0xeea2, 0xb850, 0xa29e, 0xb5d, 0xc8, 0x1, 0x0);
        gbc.writeMem(0xc8, { 0x2 });
        gbc.writeMem(0x9b56, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xeea2);
        EXPECT(gbc.pc(), 0x9b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b56), 0xcb);
        EXPECT(gbc.readMem(0x9b57), 0x4e);
        // CB 4E 0260
        gbc.setState(0x923c, 0x1ba5, 0x60e0, 0x53ee, 0x6e4f, 0x6f5b, 0x0, 0x0);
        gbc.writeMem(0x6f5b, { 0xda });
        gbc.writeMem(0x923c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1ba5);
        EXPECT(gbc.pc(), 0x923e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923c), 0xcb);
        EXPECT(gbc.readMem(0x923d), 0x4e);
        // CB 4E 0261
        gbc.setState(0x753d, 0x8b2, 0x6420, 0x3c70, 0x7d27, 0xf9a2, 0x1, 0x1);
        gbc.writeMem(0x753d, { 0xcb, 0x4e });
        gbc.writeMem(0xf9a2, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8b2);
        EXPECT(gbc.pc(), 0x753f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9a2), 0x2);
        // CB 4E 0262
        gbc.setState(0xcd30, 0x1c83, 0x5450, 0x53fb, 0xd13f, 0x8363, 0x0, 0x0);
        gbc.writeMem(0x8363, { 0x31 });
        gbc.writeMem(0xcd30, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1c83);
        EXPECT(gbc.pc(), 0xcd32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8363), 0x31);
        EXPECT(gbc.readMem(0xcd30), 0xcb);
        EXPECT(gbc.readMem(0xcd31), 0x4e);
        // CB 4E 0263
        gbc.setState(0x7118, 0x3e82, 0xfcb0, 0xf90a, 0xffd0, 0xa4c4, 0x1, 0x0);
        gbc.writeMem(0x7118, { 0xcb, 0x4e });
        gbc.writeMem(0xa4c4, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3e82);
        EXPECT(gbc.pc(), 0x711a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4c4), 0x26);
        // CB 4E 0264
        gbc.setState(0x3ec5, 0x32f2, 0xcde0, 0x1d4f, 0x770e, 0xff2e, 0x1, 0x1);
        gbc.writeMem(0x3ec5, { 0xcb, 0x4e });
        gbc.writeMem(0xff2e, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x32f2);
        EXPECT(gbc.pc(), 0x3ec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2e), 0x86);
        // CB 4E 0266
        gbc.setState(0x527a, 0x787c, 0x49d0, 0xc23d, 0xbd54, 0x4abd, 0x1, 0x1);
        gbc.writeMem(0x4abd, { 0x62 });
        gbc.writeMem(0x527a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x787c);
        EXPECT(gbc.pc(), 0x527c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0267
        gbc.setState(0xed01, 0x8f26, 0xca60, 0x660c, 0xde7c, 0xf79f, 0x0, 0x0);
        gbc.writeMem(0xed01, { 0xcb, 0x4e });
        gbc.writeMem(0xf79f, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8f26);
        EXPECT(gbc.pc(), 0xed03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed01), 0xcb);
        EXPECT(gbc.readMem(0xed02), 0x4e);
        EXPECT(gbc.readMem(0xf79f), 0x70);
        // CB 4E 0268
        gbc.setState(0x7967, 0xf39a, 0x1ea0, 0x44a4, 0x1683, 0x2dde, 0x0, 0x0);
        gbc.writeMem(0x2dde, { 0xe2 });
        gbc.writeMem(0x7967, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf39a);
        EXPECT(gbc.pc(), 0x7969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0269
        gbc.setState(0x8325, 0x3c07, 0xda00, 0xf5de, 0x777d, 0x573f, 0x1, 0x1);
        gbc.writeMem(0x573f, { 0xab });
        gbc.writeMem(0x8325, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3c07);
        EXPECT(gbc.pc(), 0x8327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8325), 0xcb);
        EXPECT(gbc.readMem(0x8326), 0x4e);
        // CB 4E 026A
        gbc.setState(0x970f, 0x5531, 0xac60, 0x7818, 0x74d3, 0xfcbe, 0x1, 0x0);
        gbc.writeMem(0x970f, { 0xcb, 0x4e });
        gbc.writeMem(0xfcbe, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5531);
        EXPECT(gbc.pc(), 0x9711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970f), 0xcb);
        EXPECT(gbc.readMem(0x9710), 0x4e);
        EXPECT(gbc.readMem(0xfcbe), 0xa8);
        // CB 4E 026B
        gbc.setState(0x3d04, 0xdefe, 0x9910, 0x7408, 0x8a8, 0xcc10, 0x0, 0x1);
        gbc.writeMem(0x3d04, { 0xcb, 0x4e });
        gbc.writeMem(0xcc10, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdefe);
        EXPECT(gbc.pc(), 0x3d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc10), 0x5f);
        // CB 4E 026C
        gbc.setState(0x8cdc, 0x778b, 0xa3a0, 0x4c8a, 0x3c14, 0x4a45, 0x1, 0x0);
        gbc.writeMem(0x4a45, { 0x24 });
        gbc.writeMem(0x8cdc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x778b);
        EXPECT(gbc.pc(), 0x8cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cdc), 0xcb);
        EXPECT(gbc.readMem(0x8cdd), 0x4e);
        // CB 4E 026D
        gbc.setState(0x5b8a, 0xd50f, 0x9610, 0x915b, 0x1013, 0xfc7c, 0x1, 0x1);
        gbc.writeMem(0x5b8a, { 0xcb, 0x4e });
        gbc.writeMem(0xfc7c, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd50f);
        EXPECT(gbc.pc(), 0x5b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc7c), 0x69);
        // CB 4E 026E
        gbc.setState(0x2a44, 0x81ed, 0x8f60, 0x65b7, 0x6783, 0x5b94, 0x0, 0x0);
        gbc.writeMem(0x2a44, { 0xcb, 0x4e });
        gbc.writeMem(0x5b94, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x81ed);
        EXPECT(gbc.pc(), 0x2a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 026F
        gbc.setState(0x7b87, 0x77f5, 0x8de0, 0x17f5, 0x3bd5, 0xc769, 0x0, 0x0);
        gbc.writeMem(0x7b87, { 0xcb, 0x4e });
        gbc.writeMem(0xc769, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x77f5);
        EXPECT(gbc.pc(), 0x7b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc769), 0xa6);
        // CB 4E 0270
        gbc.setState(0xee30, 0x8a8, 0xa540, 0x6bab, 0xf320, 0x3534, 0x1, 0x1);
        gbc.writeMem(0x3534, { 0x75 });
        gbc.writeMem(0xee30, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8a8);
        EXPECT(gbc.pc(), 0xee32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee30), 0xcb);
        EXPECT(gbc.readMem(0xee31), 0x4e);
        // CB 4E 0271
        gbc.setState(0x7c9e, 0x72c4, 0xece0, 0x5c76, 0x56cb, 0x4b08, 0x1, 0x1);
        gbc.writeMem(0x4b08, { 0xf8 });
        gbc.writeMem(0x7c9e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x72c4);
        EXPECT(gbc.pc(), 0x7ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0272
        gbc.setState(0xa6ed, 0x9e71, 0x29a0, 0xd3cb, 0x79da, 0xfd0e, 0x0, 0x0);
        gbc.writeMem(0xa6ed, { 0xcb, 0x4e });
        gbc.writeMem(0xfd0e, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9e71);
        EXPECT(gbc.pc(), 0xa6ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ed), 0xcb);
        EXPECT(gbc.readMem(0xa6ee), 0x4e);
        EXPECT(gbc.readMem(0xfd0e), 0x9c);
        // CB 4E 0273
        gbc.setState(0x1c93, 0x429b, 0xb90, 0xc3ae, 0xfa89, 0xd1a0, 0x1, 0x1);
        gbc.writeMem(0x1c93, { 0xcb, 0x4e });
        gbc.writeMem(0xd1a0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x429b);
        EXPECT(gbc.pc(), 0x1c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1a0), 0x0);
        // CB 4E 0274
        gbc.setState(0x8b6f, 0xb6f4, 0xda60, 0x34af, 0xf287, 0x2f06, 0x1, 0x1);
        gbc.writeMem(0x2f06, { 0x65 });
        gbc.writeMem(0x8b6f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb6f4);
        EXPECT(gbc.pc(), 0x8b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b6f), 0xcb);
        EXPECT(gbc.readMem(0x8b70), 0x4e);
        // CB 4E 0275
        gbc.setState(0x7d04, 0x5418, 0xfb40, 0x176e, 0xd67e, 0x45c, 0x0, 0x1);
        gbc.writeMem(0x45c, { 0x8f });
        gbc.writeMem(0x7d04, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5418);
        EXPECT(gbc.pc(), 0x7d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0277
        gbc.setState(0xa824, 0x6011, 0x2d30, 0xf346, 0x197, 0xc9eb, 0x0, 0x0);
        gbc.writeMem(0xa824, { 0xcb, 0x4e });
        gbc.writeMem(0xc9eb, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6011);
        EXPECT(gbc.pc(), 0xa826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa824), 0xcb);
        EXPECT(gbc.readMem(0xa825), 0x4e);
        EXPECT(gbc.readMem(0xc9eb), 0x26);
        // CB 4E 0278
        gbc.setState(0xbe76, 0x1539, 0xb480, 0x9cf4, 0x6098, 0x82bf, 0x0, 0x0);
        gbc.writeMem(0x82bf, { 0xe0 });
        gbc.writeMem(0xbe76, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1539);
        EXPECT(gbc.pc(), 0xbe78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bf), 0xe0);
        EXPECT(gbc.readMem(0xbe76), 0xcb);
        EXPECT(gbc.readMem(0xbe77), 0x4e);
        // CB 4E 0279
        gbc.setState(0xbd32, 0x5866, 0xf4f0, 0xb5d4, 0xbcc0, 0x2b16, 0x1, 0x0);
        gbc.writeMem(0x2b16, { 0x6b });
        gbc.writeMem(0xbd32, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5866);
        EXPECT(gbc.pc(), 0xbd34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd32), 0xcb);
        EXPECT(gbc.readMem(0xbd33), 0x4e);
        // CB 4E 027A
        gbc.setState(0xdc82, 0xe2a9, 0x9150, 0x5f13, 0xa305, 0x5ed, 0x1, 0x0);
        gbc.writeMem(0x5ed, { 0xb8 });
        gbc.writeMem(0xdc82, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe2a9);
        EXPECT(gbc.pc(), 0xdc84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc82), 0xcb);
        EXPECT(gbc.readMem(0xdc83), 0x4e);
        // CB 4E 027B
        gbc.setState(0x13d5, 0x7439, 0x8570, 0x83e, 0x8471, 0x718d, 0x1, 0x1);
        gbc.writeMem(0x13d5, { 0xcb, 0x4e });
        gbc.writeMem(0x718d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7439);
        EXPECT(gbc.pc(), 0x13d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 027C
        gbc.setState(0xb2f1, 0x1d05, 0x670, 0x9877, 0xb5ee, 0x3439, 0x0, 0x1);
        gbc.writeMem(0x3439, { 0x23 });
        gbc.writeMem(0xb2f1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1d05);
        EXPECT(gbc.pc(), 0xb2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f1), 0xcb);
        EXPECT(gbc.readMem(0xb2f2), 0x4e);
        // CB 4E 027D
        gbc.setState(0x7630, 0xa3c0, 0x4380, 0x9c2b, 0x959, 0x6f70, 0x0, 0x0);
        gbc.writeMem(0x6f70, { 0xc2 });
        gbc.writeMem(0x7630, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa3c0);
        EXPECT(gbc.pc(), 0x7632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 027E
        gbc.setState(0xa627, 0xf7d4, 0x8610, 0x900, 0x85f6, 0x9ac5, 0x0, 0x1);
        gbc.writeMem(0x9ac5, { 0x6e });
        gbc.writeMem(0xa627, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf7d4);
        EXPECT(gbc.pc(), 0xa629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac5), 0x6e);
        EXPECT(gbc.readMem(0xa627), 0xcb);
        EXPECT(gbc.readMem(0xa628), 0x4e);
        // CB 4E 0280
        gbc.setState(0xdbd2, 0xd663, 0xe120, 0x8900, 0x242b, 0x79b1, 0x0, 0x0);
        gbc.writeMem(0x79b1, { 0x37 });
        gbc.writeMem(0xdbd2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd663);
        EXPECT(gbc.pc(), 0xdbd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd2), 0xcb);
        EXPECT(gbc.readMem(0xdbd3), 0x4e);
        // CB 4E 0281
        gbc.setState(0x8005, 0x6bd9, 0x7c90, 0x2af1, 0x9555, 0xbb85, 0x0, 0x0);
        gbc.writeMem(0x8005, { 0xcb, 0x4e });
        gbc.writeMem(0xbb85, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6bd9);
        EXPECT(gbc.pc(), 0x8007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8005), 0xcb);
        EXPECT(gbc.readMem(0x8006), 0x4e);
        EXPECT(gbc.readMem(0xbb85), 0x16);
        // CB 4E 0282
        gbc.setState(0xec0, 0x742f, 0x8cc0, 0x59e6, 0x1ccf, 0x80ae, 0x1, 0x0);
        gbc.writeMem(0xec0, { 0xcb, 0x4e });
        gbc.writeMem(0x80ae, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x742f);
        EXPECT(gbc.pc(), 0xec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ae), 0xe9);
        // CB 4E 0283
        gbc.setState(0xca0f, 0x78e3, 0x4f0, 0xa0fc, 0x1b6b, 0xc89c, 0x1, 0x1);
        gbc.writeMem(0xc89c, { 0xe4 });
        gbc.writeMem(0xca0f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x78e3);
        EXPECT(gbc.pc(), 0xca11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89c), 0xe4);
        EXPECT(gbc.readMem(0xca0f), 0xcb);
        EXPECT(gbc.readMem(0xca10), 0x4e);
        // CB 4E 0284
        gbc.setState(0x86c2, 0x6bb4, 0x81b0, 0xee2a, 0x1c3c, 0xefb1, 0x1, 0x1);
        gbc.writeMem(0x86c2, { 0xcb, 0x4e });
        gbc.writeMem(0xefb1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6bb4);
        EXPECT(gbc.pc(), 0x86c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c2), 0xcb);
        EXPECT(gbc.readMem(0x86c3), 0x4e);
        EXPECT(gbc.readMem(0xefb1), 0x5a);
        // CB 4E 0285
        gbc.setState(0xce9d, 0xee79, 0x5620, 0x7594, 0xd024, 0x2c28, 0x0, 0x0);
        gbc.writeMem(0x2c28, { 0x0 });
        gbc.writeMem(0xce9d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xee79);
        EXPECT(gbc.pc(), 0xce9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce9d), 0xcb);
        EXPECT(gbc.readMem(0xce9e), 0x4e);
        // CB 4E 0286
        gbc.setState(0xea11, 0x3fcd, 0x1260, 0x2fb3, 0x6802, 0x8a48, 0x1, 0x0);
        gbc.writeMem(0x8a48, { 0xd0 });
        gbc.writeMem(0xea11, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3fcd);
        EXPECT(gbc.pc(), 0xea13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a48), 0xd0);
        EXPECT(gbc.readMem(0xea11), 0xcb);
        EXPECT(gbc.readMem(0xea12), 0x4e);
        // CB 4E 0287
        gbc.setState(0xa1bf, 0x334, 0x7610, 0x2698, 0xdbb1, 0xcccf, 0x1, 0x1);
        gbc.writeMem(0xa1bf, { 0xcb, 0x4e });
        gbc.writeMem(0xcccf, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x334);
        EXPECT(gbc.pc(), 0xa1c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1bf), 0xcb);
        EXPECT(gbc.readMem(0xa1c0), 0x4e);
        EXPECT(gbc.readMem(0xcccf), 0x4e);
        // CB 4E 0288
        gbc.setState(0xe6cb, 0x3e99, 0xd640, 0xc405, 0x5f32, 0xcd87, 0x1, 0x0);
        gbc.writeMem(0xcd87, { 0x44 });
        gbc.writeMem(0xe6cb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3e99);
        EXPECT(gbc.pc(), 0xe6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd87), 0x44);
        EXPECT(gbc.readMem(0xe6cb), 0xcb);
        EXPECT(gbc.readMem(0xe6cc), 0x4e);
        // CB 4E 0289
        gbc.setState(0x7406, 0x8d73, 0x7200, 0xf77c, 0x744c, 0x2d0f, 0x1, 0x0);
        gbc.writeMem(0x2d0f, { 0xeb });
        gbc.writeMem(0x7406, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8d73);
        EXPECT(gbc.pc(), 0x7408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 028A
        gbc.setState(0x89b7, 0x90d6, 0x72d0, 0xa436, 0x8c30, 0xf74, 0x1, 0x0);
        gbc.writeMem(0xf74, { 0xe3 });
        gbc.writeMem(0x89b7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x90d6);
        EXPECT(gbc.pc(), 0x89b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b7), 0xcb);
        EXPECT(gbc.readMem(0x89b8), 0x4e);
        // CB 4E 028B
        gbc.setState(0x69bd, 0xac0e, 0x4fc0, 0x3358, 0x5a64, 0x2db3, 0x1, 0x1);
        gbc.writeMem(0x2db3, { 0x36 });
        gbc.writeMem(0x69bd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xac0e);
        EXPECT(gbc.pc(), 0x69bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 028C
        gbc.setState(0xef97, 0x6c05, 0x8e00, 0x3879, 0x61e5, 0x5a04, 0x0, 0x1);
        gbc.writeMem(0x5a04, { 0xde });
        gbc.writeMem(0xef97, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6c05);
        EXPECT(gbc.pc(), 0xef99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef97), 0xcb);
        EXPECT(gbc.readMem(0xef98), 0x4e);
        // CB 4E 028D
        gbc.setState(0x79bf, 0x15e, 0xd630, 0x8b13, 0x1dea, 0xec18, 0x1, 0x1);
        gbc.writeMem(0x79bf, { 0xcb, 0x4e });
        gbc.writeMem(0xec18, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x15e);
        EXPECT(gbc.pc(), 0x79c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec18), 0xf0);
        // CB 4E 028E
        gbc.setState(0x291d, 0xee92, 0x79c0, 0x7fc6, 0x1f48, 0x8af0, 0x0, 0x1);
        gbc.writeMem(0x291d, { 0xcb, 0x4e });
        gbc.writeMem(0x8af0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xee92);
        EXPECT(gbc.pc(), 0x291f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af0), 0x40);
        // CB 4E 028F
        gbc.setState(0x6998, 0x6, 0xc3f0, 0x53af, 0xe04c, 0xd2a5, 0x0, 0x0);
        gbc.writeMem(0x6998, { 0xcb, 0x4e });
        gbc.writeMem(0xd2a5, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6);
        EXPECT(gbc.pc(), 0x699a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a5), 0xc0);
        // CB 4E 0290
        gbc.setState(0x8f9e, 0xcee8, 0xee90, 0x9a3e, 0xf0e, 0xc04c, 0x0, 0x0);
        gbc.writeMem(0x8f9e, { 0xcb, 0x4e });
        gbc.writeMem(0xc04c, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcee8);
        EXPECT(gbc.pc(), 0x8fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f9e), 0xcb);
        EXPECT(gbc.readMem(0x8f9f), 0x4e);
        EXPECT(gbc.readMem(0xc04c), 0x37);
        // CB 4E 0291
        gbc.setState(0x5a80, 0xb40a, 0x3a70, 0x929a, 0xade7, 0x7ff2, 0x1, 0x0);
        gbc.writeMem(0x5a80, { 0xcb, 0x4e });
        gbc.writeMem(0x7ff2, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb40a);
        EXPECT(gbc.pc(), 0x5a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0292
        gbc.setState(0x113, 0x6f25, 0xa8c0, 0x51f6, 0x74ba, 0xdb41, 0x1, 0x1);
        gbc.writeMem(0x113, { 0xcb, 0x4e });
        gbc.writeMem(0xdb41, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6f25);
        EXPECT(gbc.pc(), 0x115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb41), 0xfc);
        // CB 4E 0293
        gbc.setState(0xc0be, 0xc4d7, 0xd280, 0xebb1, 0x5490, 0x5b71, 0x0, 0x1);
        gbc.writeMem(0x5b71, { 0x2a });
        gbc.writeMem(0xc0be, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc4d7);
        EXPECT(gbc.pc(), 0xc0c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0be), 0xcb);
        EXPECT(gbc.readMem(0xc0bf), 0x4e);
        // CB 4E 0294
        gbc.setState(0x6c43, 0xfe19, 0xcd60, 0x375a, 0x5d76, 0x2a31, 0x0, 0x1);
        gbc.writeMem(0x2a31, { 0x27 });
        gbc.writeMem(0x6c43, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfe19);
        EXPECT(gbc.pc(), 0x6c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0295
        gbc.setState(0xddc, 0xcd11, 0xe690, 0x71a9, 0x982a, 0xb07, 0x0, 0x1);
        gbc.writeMem(0xb07, { 0xe9 });
        gbc.writeMem(0xddc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xcd11);
        EXPECT(gbc.pc(), 0xdde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0296
        gbc.setState(0x25ab, 0x4f47, 0x23d0, 0x49ea, 0x260f, 0x9115, 0x0, 0x1);
        gbc.writeMem(0x25ab, { 0xcb, 0x4e });
        gbc.writeMem(0x9115, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4f47);
        EXPECT(gbc.pc(), 0x25ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9115), 0xe5);
        // CB 4E 0297
        gbc.setState(0xcc77, 0x140f, 0x8d0, 0x3cf1, 0xd32c, 0xcca5, 0x1, 0x1);
        gbc.writeMem(0xcc77, { 0xcb, 0x4e });
        gbc.writeMem(0xcca5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x140f);
        EXPECT(gbc.pc(), 0xcc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc77), 0xcb);
        EXPECT(gbc.readMem(0xcc78), 0x4e);
        EXPECT(gbc.readMem(0xcca5), 0xbd);
        // CB 4E 0298
        gbc.setState(0xfc9, 0xa4ea, 0xd210, 0xc18e, 0x9faa, 0x21eb, 0x1, 0x1);
        gbc.writeMem(0xfc9, { 0xcb, 0x4e });
        gbc.writeMem(0x21eb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa4ea);
        EXPECT(gbc.pc(), 0xfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0299
        gbc.setState(0x89e8, 0x8dc7, 0x6bd0, 0x6908, 0x799, 0x5df7, 0x0, 0x1);
        gbc.writeMem(0x5df7, { 0x8f });
        gbc.writeMem(0x89e8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8dc7);
        EXPECT(gbc.pc(), 0x89ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e8), 0xcb);
        EXPECT(gbc.readMem(0x89e9), 0x4e);
        // CB 4E 029A
        gbc.setState(0xc6f9, 0xb7f2, 0xb650, 0xae63, 0x20c8, 0x8eb5, 0x1, 0x0);
        gbc.writeMem(0x8eb5, { 0xbe });
        gbc.writeMem(0xc6f9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb7f2);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb5), 0xbe);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0x4e);
        // CB 4E 029B
        gbc.setState(0x427c, 0xb200, 0xa80, 0x37f1, 0x3ad5, 0xcab7, 0x0, 0x1);
        gbc.writeMem(0x427c, { 0xcb, 0x4e });
        gbc.writeMem(0xcab7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb200);
        EXPECT(gbc.pc(), 0x427e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab7), 0xb1);
        // CB 4E 029C
        gbc.setState(0x1721, 0x18b2, 0x1080, 0xbcd8, 0xbc69, 0x4de0, 0x0, 0x0);
        gbc.writeMem(0x1721, { 0xcb, 0x4e });
        gbc.writeMem(0x4de0, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x18b2);
        EXPECT(gbc.pc(), 0x1723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 029D
        gbc.setState(0x21af, 0xda33, 0x2a40, 0x3394, 0xb8cd, 0x4e, 0x0, 0x1);
        gbc.writeMem(0x4e, { 0x5e });
        gbc.writeMem(0x21af, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xda33);
        EXPECT(gbc.pc(), 0x21b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 029F
        gbc.setState(0xda6a, 0x3882, 0xc680, 0x8787, 0xd45, 0xde28, 0x1, 0x1);
        gbc.writeMem(0xda6a, { 0xcb, 0x4e });
        gbc.writeMem(0xde28, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3882);
        EXPECT(gbc.pc(), 0xda6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda6a), 0xcb);
        EXPECT(gbc.readMem(0xda6b), 0x4e);
        EXPECT(gbc.readMem(0xde28), 0x2f);
        // CB 4E 02A0
        gbc.setState(0x5b4b, 0x83ac, 0x7ce0, 0x484a, 0x9fde, 0xb3a0, 0x0, 0x1);
        gbc.writeMem(0x5b4b, { 0xcb, 0x4e });
        gbc.writeMem(0xb3a0, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x83ac);
        EXPECT(gbc.pc(), 0x5b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a0), 0x49);
        // CB 4E 02A1
        gbc.setState(0x7a89, 0xdc16, 0x3c50, 0x9f71, 0x8438, 0xa6ff, 0x0, 0x0);
        gbc.writeMem(0x7a89, { 0xcb, 0x4e });
        gbc.writeMem(0xa6ff, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdc16);
        EXPECT(gbc.pc(), 0x7a8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6ff), 0x84);
        // CB 4E 02A3
        gbc.setState(0xe6cc, 0x6c83, 0x9400, 0x3947, 0x2e72, 0x1748, 0x0, 0x1);
        gbc.writeMem(0x1748, { 0xa2 });
        gbc.writeMem(0xe6cc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6c83);
        EXPECT(gbc.pc(), 0xe6ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6cc), 0xcb);
        EXPECT(gbc.readMem(0xe6cd), 0x4e);
        // CB 4E 02A4
        gbc.setState(0x6d23, 0xa4d, 0x2a60, 0x91b5, 0xdd7e, 0xbbfa, 0x1, 0x0);
        gbc.writeMem(0x6d23, { 0xcb, 0x4e });
        gbc.writeMem(0xbbfa, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa4d);
        EXPECT(gbc.pc(), 0x6d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbfa), 0x14);
        // CB 4E 02A5
        gbc.setState(0xd0d4, 0xd068, 0x7700, 0x7271, 0x37b0, 0x4071, 0x0, 0x0);
        gbc.writeMem(0x4071, { 0xb4 });
        gbc.writeMem(0xd0d4, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd068);
        EXPECT(gbc.pc(), 0xd0d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d4), 0xcb);
        EXPECT(gbc.readMem(0xd0d5), 0x4e);
        // CB 4E 02A6
        gbc.setState(0x396c, 0x657, 0x1a50, 0xeea3, 0xe6c3, 0xd0e3, 0x0, 0x1);
        gbc.writeMem(0x396c, { 0xcb, 0x4e });
        gbc.writeMem(0xd0e3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x657);
        EXPECT(gbc.pc(), 0x396e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e3), 0x4f);
        // CB 4E 02A7
        gbc.setState(0x57f9, 0x84d2, 0x26a0, 0x5b12, 0x52c7, 0xe606, 0x0, 0x1);
        gbc.writeMem(0x57f9, { 0xcb, 0x4e });
        gbc.writeMem(0xe606, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x84d2);
        EXPECT(gbc.pc(), 0x57fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe606), 0xb0);
        // CB 4E 02A8
        gbc.setState(0x1d10, 0x73b7, 0x4330, 0x5dac, 0xae75, 0xb642, 0x1, 0x0);
        gbc.writeMem(0x1d10, { 0xcb, 0x4e });
        gbc.writeMem(0xb642, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x73b7);
        EXPECT(gbc.pc(), 0x1d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb642), 0x26);
        // CB 4E 02A9
        gbc.setState(0x740e, 0xba0b, 0x6cb0, 0x4b10, 0x3313, 0x745a, 0x1, 0x0);
        gbc.writeMem(0x740e, { 0xcb, 0x4e });
        gbc.writeMem(0x745a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xba0b);
        EXPECT(gbc.pc(), 0x7410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02AA
        gbc.setState(0x9d3d, 0xa2f0, 0x8cf0, 0x88b7, 0x86af, 0x8e1c, 0x1, 0x1);
        gbc.writeMem(0x8e1c, { 0x56 });
        gbc.writeMem(0x9d3d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa2f0);
        EXPECT(gbc.pc(), 0x9d3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e1c), 0x56);
        EXPECT(gbc.readMem(0x9d3d), 0xcb);
        EXPECT(gbc.readMem(0x9d3e), 0x4e);
        // CB 4E 02AB
        gbc.setState(0xbce1, 0x7703, 0xe640, 0x1abf, 0xf82c, 0x22f1, 0x1, 0x0);
        gbc.writeMem(0x22f1, { 0xc8 });
        gbc.writeMem(0xbce1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7703);
        EXPECT(gbc.pc(), 0xbce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce1), 0xcb);
        EXPECT(gbc.readMem(0xbce2), 0x4e);
        // CB 4E 02AC
        gbc.setState(0xbb01, 0xde38, 0x3770, 0xda46, 0x5fa8, 0x2f5b, 0x1, 0x0);
        gbc.writeMem(0x2f5b, { 0xfa });
        gbc.writeMem(0xbb01, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xde38);
        EXPECT(gbc.pc(), 0xbb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb01), 0xcb);
        EXPECT(gbc.readMem(0xbb02), 0x4e);
        // CB 4E 02AD
        gbc.setState(0x8834, 0x807a, 0x4500, 0x69a4, 0x3c61, 0x41f, 0x0, 0x0);
        gbc.writeMem(0x41f, { 0xf5 });
        gbc.writeMem(0x8834, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x807a);
        EXPECT(gbc.pc(), 0x8836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8834), 0xcb);
        EXPECT(gbc.readMem(0x8835), 0x4e);
        // CB 4E 02AE
        gbc.setState(0x234e, 0xf3d9, 0xb590, 0x6eb9, 0xd721, 0x40ac, 0x1, 0x1);
        gbc.writeMem(0x234e, { 0xcb, 0x4e });
        gbc.writeMem(0x40ac, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf3d9);
        EXPECT(gbc.pc(), 0x2350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02AF
        gbc.setState(0xc1, 0xb59c, 0xbae0, 0xaa90, 0xf27b, 0xcff0, 0x1, 0x1);
        gbc.writeMem(0xc1, { 0xcb, 0x4e });
        gbc.writeMem(0xcff0, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb59c);
        EXPECT(gbc.pc(), 0xc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff0), 0x4b);
        // CB 4E 02B0
        gbc.setState(0x3093, 0x5d10, 0x1c30, 0xfd27, 0xc39, 0xa2dd, 0x1, 0x0);
        gbc.writeMem(0x3093, { 0xcb, 0x4e });
        gbc.writeMem(0xa2dd, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5d10);
        EXPECT(gbc.pc(), 0x3095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2dd), 0x3d);
        // CB 4E 02B1
        gbc.setState(0x47f1, 0x2af9, 0xe8a0, 0xefd0, 0x308b, 0xf444, 0x1, 0x1);
        gbc.writeMem(0x47f1, { 0xcb, 0x4e });
        gbc.writeMem(0xf444, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2af9);
        EXPECT(gbc.pc(), 0x47f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf444), 0x7c);
        // CB 4E 02B2
        gbc.setState(0x2700, 0xf70e, 0x5470, 0x4f7b, 0x5e68, 0x1bf4, 0x0, 0x1);
        gbc.writeMem(0x1bf4, { 0x10 });
        gbc.writeMem(0x2700, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf70e);
        EXPECT(gbc.pc(), 0x2702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02B3
        gbc.setState(0x72b7, 0xcaaf, 0x6510, 0xc089, 0x389c, 0x3e38, 0x0, 0x1);
        gbc.writeMem(0x3e38, { 0x7f });
        gbc.writeMem(0x72b7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x72b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02B4
        gbc.setState(0x7f06, 0x16fd, 0x2600, 0xb5df, 0x11b3, 0xb74d, 0x1, 0x1);
        gbc.writeMem(0x7f06, { 0xcb, 0x4e });
        gbc.writeMem(0xb74d, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x16fd);
        EXPECT(gbc.pc(), 0x7f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb74d), 0xd9);
        // CB 4E 02B5
        gbc.setState(0xcb91, 0x43b9, 0x57d0, 0xd2d5, 0xf033, 0x926f, 0x1, 0x0);
        gbc.writeMem(0x926f, { 0xef });
        gbc.writeMem(0xcb91, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x43b9);
        EXPECT(gbc.pc(), 0xcb93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926f), 0xef);
        EXPECT(gbc.readMem(0xcb91), 0xcb);
        EXPECT(gbc.readMem(0xcb92), 0x4e);
        // CB 4E 02B6
        gbc.setState(0xc4a2, 0xd338, 0x7e00, 0x8b7b, 0xe2f, 0x7ba2, 0x1, 0x1);
        gbc.writeMem(0x7ba2, { 0x3 });
        gbc.writeMem(0xc4a2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd338);
        EXPECT(gbc.pc(), 0xc4a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a2), 0xcb);
        EXPECT(gbc.readMem(0xc4a3), 0x4e);
        // CB 4E 02B7
        gbc.setState(0x797f, 0xab49, 0x8640, 0xbfcd, 0x1c28, 0x6f34, 0x1, 0x0);
        gbc.writeMem(0x6f34, { 0x15 });
        gbc.writeMem(0x797f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xab49);
        EXPECT(gbc.pc(), 0x7981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02B8
        gbc.setState(0xee3b, 0xcffe, 0x6ca0, 0xef8e, 0xcb67, 0xb72c, 0x1, 0x1);
        gbc.writeMem(0xb72c, { 0xbf });
        gbc.writeMem(0xee3b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcffe);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72c), 0xbf);
        EXPECT(gbc.readMem(0xee3b), 0xcb);
        EXPECT(gbc.readMem(0xee3c), 0x4e);
        // CB 4E 02B9
        gbc.setState(0xe38a, 0x23a9, 0x3ae0, 0xea04, 0x3b61, 0xd6c, 0x1, 0x1);
        gbc.writeMem(0xd6c, { 0xec });
        gbc.writeMem(0xe38a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x23a9);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38a), 0xcb);
        EXPECT(gbc.readMem(0xe38b), 0x4e);
        // CB 4E 02BA
        gbc.setState(0x36fe, 0xfe43, 0x4400, 0xf38f, 0x6cf9, 0x830c, 0x0, 0x1);
        gbc.writeMem(0x36fe, { 0xcb, 0x4e });
        gbc.writeMem(0x830c, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfe43);
        EXPECT(gbc.pc(), 0x3700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x830c), 0x8e);
        // CB 4E 02BB
        gbc.setState(0x28dc, 0x1aac, 0x76b0, 0x2d8d, 0xa97b, 0xfaa2, 0x0, 0x1);
        gbc.writeMem(0x28dc, { 0xcb, 0x4e });
        gbc.writeMem(0xfaa2, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1aac);
        EXPECT(gbc.pc(), 0x28de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfaa2), 0xdb);
        // CB 4E 02BC
        gbc.setState(0x5d84, 0xa3a, 0x4f0, 0x1891, 0x8b28, 0x7868, 0x1, 0x1);
        gbc.writeMem(0x5d84, { 0xcb, 0x4e });
        gbc.writeMem(0x7868, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa3a);
        EXPECT(gbc.pc(), 0x5d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02BD
        gbc.setState(0x602e, 0x21a4, 0xb8d0, 0x5894, 0xa74a, 0x3fca, 0x1, 0x0);
        gbc.writeMem(0x3fca, { 0x2b });
        gbc.writeMem(0x602e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0x6030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02BE
        gbc.setState(0xead9, 0xdda7, 0xda40, 0x780e, 0x7e5c, 0x9593, 0x0, 0x1);
        gbc.writeMem(0x9593, { 0xda });
        gbc.writeMem(0xead9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdda7);
        EXPECT(gbc.pc(), 0xeadb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9593), 0xda);
        EXPECT(gbc.readMem(0xead9), 0xcb);
        EXPECT(gbc.readMem(0xeada), 0x4e);
        // CB 4E 02C0
        gbc.setState(0xeed2, 0x382, 0x4310, 0x8d08, 0xe306, 0x3da4, 0x1, 0x0);
        gbc.writeMem(0x3da4, { 0xe0 });
        gbc.writeMem(0xeed2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x382);
        EXPECT(gbc.pc(), 0xeed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed2), 0xcb);
        EXPECT(gbc.readMem(0xeed3), 0x4e);
        // CB 4E 02C1
        gbc.setState(0x984d, 0xfaf4, 0x50a0, 0xf5cd, 0xf06f, 0x25de, 0x1, 0x0);
        gbc.writeMem(0x25de, { 0x5f });
        gbc.writeMem(0x984d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfaf4);
        EXPECT(gbc.pc(), 0x984f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984d), 0xcb);
        EXPECT(gbc.readMem(0x984e), 0x4e);
        // CB 4E 02C3
        gbc.setState(0xef9c, 0xbf23, 0x29a0, 0xa71c, 0x1fda, 0xae03, 0x0, 0x0);
        gbc.writeMem(0xae03, { 0x74 });
        gbc.writeMem(0xef9c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbf23);
        EXPECT(gbc.pc(), 0xef9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae03), 0x74);
        EXPECT(gbc.readMem(0xef9c), 0xcb);
        EXPECT(gbc.readMem(0xef9d), 0x4e);
        // CB 4E 02C5
        gbc.setState(0x31f4, 0x1c2c, 0x6920, 0x75ac, 0x2bc1, 0x523e, 0x0, 0x0);
        gbc.writeMem(0x31f4, { 0xcb, 0x4e });
        gbc.writeMem(0x523e, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1c2c);
        EXPECT(gbc.pc(), 0x31f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02C6
        gbc.setState(0x80a2, 0x1bd7, 0x25e0, 0xb1f4, 0x12b0, 0xd8ee, 0x1, 0x0);
        gbc.writeMem(0x80a2, { 0xcb, 0x4e });
        gbc.writeMem(0xd8ee, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1bd7);
        EXPECT(gbc.pc(), 0x80a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a2), 0xcb);
        EXPECT(gbc.readMem(0x80a3), 0x4e);
        EXPECT(gbc.readMem(0xd8ee), 0x41);
        // CB 4E 02C7
        gbc.setState(0x6c5b, 0x4f1, 0xd390, 0x3c2d, 0x90f4, 0xbcf6, 0x0, 0x0);
        gbc.writeMem(0x6c5b, { 0xcb, 0x4e });
        gbc.writeMem(0xbcf6, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4f1);
        EXPECT(gbc.pc(), 0x6c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf6), 0xda);
        // CB 4E 02C9
        gbc.setState(0x9236, 0xae65, 0x7e90, 0xe1be, 0xe990, 0x6015, 0x0, 0x0);
        gbc.writeMem(0x6015, { 0x1d });
        gbc.writeMem(0x9236, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xae65);
        EXPECT(gbc.pc(), 0x9238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9236), 0xcb);
        EXPECT(gbc.readMem(0x9237), 0x4e);
        // CB 4E 02CA
        gbc.setState(0x5d8, 0x9daa, 0x77a0, 0xae1b, 0xf42a, 0x8235, 0x0, 0x0);
        gbc.writeMem(0x5d8, { 0xcb, 0x4e });
        gbc.writeMem(0x8235, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9daa);
        EXPECT(gbc.pc(), 0x5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8235), 0x48);
        // CB 4E 02CC
        gbc.setState(0xa3e9, 0x2b42, 0x72d0, 0x626c, 0xe678, 0xb021, 0x1, 0x1);
        gbc.writeMem(0xa3e9, { 0xcb, 0x4e });
        gbc.writeMem(0xb021, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2b42);
        EXPECT(gbc.pc(), 0xa3eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3e9), 0xcb);
        EXPECT(gbc.readMem(0xa3ea), 0x4e);
        EXPECT(gbc.readMem(0xb021), 0x68);
        // CB 4E 02CD
        gbc.setState(0xc4bc, 0x1c07, 0x3720, 0x248f, 0x73c7, 0x3fa9, 0x1, 0x1);
        gbc.writeMem(0x3fa9, { 0xc7 });
        gbc.writeMem(0xc4bc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1c07);
        EXPECT(gbc.pc(), 0xc4be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4bc), 0xcb);
        EXPECT(gbc.readMem(0xc4bd), 0x4e);
        // CB 4E 02CE
        gbc.setState(0xc28a, 0x430f, 0x1b10, 0x88cc, 0xac64, 0x5ff4, 0x0, 0x1);
        gbc.writeMem(0x5ff4, { 0x51 });
        gbc.writeMem(0xc28a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0xc28c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28a), 0xcb);
        EXPECT(gbc.readMem(0xc28b), 0x4e);
        // CB 4E 02CF
        gbc.setState(0x61d1, 0x3f96, 0x340, 0xf80e, 0xce64, 0xd7a7, 0x0, 0x0);
        gbc.writeMem(0x61d1, { 0xcb, 0x4e });
        gbc.writeMem(0xd7a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3f96);
        EXPECT(gbc.pc(), 0x61d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a7), 0xfb);
        // CB 4E 02D0
        gbc.setState(0x3041, 0xb6e9, 0xfce0, 0x8e42, 0xf810, 0xde99, 0x1, 0x0);
        gbc.writeMem(0x3041, { 0xcb, 0x4e });
        gbc.writeMem(0xde99, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb6e9);
        EXPECT(gbc.pc(), 0x3043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde99), 0xf9);
        // CB 4E 02D1
        gbc.setState(0xa689, 0xc7fe, 0xdb80, 0xdf41, 0x4bc1, 0x7ffe, 0x1, 0x0);
        gbc.writeMem(0x7ffe, { 0x33 });
        gbc.writeMem(0xa689, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc7fe);
        EXPECT(gbc.pc(), 0xa68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa689), 0xcb);
        EXPECT(gbc.readMem(0xa68a), 0x4e);
        // CB 4E 02D2
        gbc.setState(0x5620, 0x58a2, 0xd360, 0x7d1a, 0x51eb, 0x36fb, 0x0, 0x0);
        gbc.writeMem(0x36fb, { 0x3d });
        gbc.writeMem(0x5620, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x58a2);
        EXPECT(gbc.pc(), 0x5622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02D3
        gbc.setState(0xe30, 0x8a95, 0xd2b0, 0x86bb, 0xafec, 0xabe2, 0x1, 0x1);
        gbc.writeMem(0xe30, { 0xcb, 0x4e });
        gbc.writeMem(0xabe2, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8a95);
        EXPECT(gbc.pc(), 0xe32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe2), 0x77);
        // CB 4E 02D4
        gbc.setState(0xd231, 0xb6ad, 0xff00, 0x890c, 0xaeef, 0x8561, 0x0, 0x1);
        gbc.writeMem(0x8561, { 0xe3 });
        gbc.writeMem(0xd231, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb6ad);
        EXPECT(gbc.pc(), 0xd233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8561), 0xe3);
        EXPECT(gbc.readMem(0xd231), 0xcb);
        EXPECT(gbc.readMem(0xd232), 0x4e);
        // CB 4E 02D5
        gbc.setState(0xb2f5, 0x3be2, 0x3cd0, 0xcc1d, 0x621d, 0x288, 0x1, 0x1);
        gbc.writeMem(0x288, { 0x85 });
        gbc.writeMem(0xb2f5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3be2);
        EXPECT(gbc.pc(), 0xb2f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f5), 0xcb);
        EXPECT(gbc.readMem(0xb2f6), 0x4e);
        // CB 4E 02D6
        gbc.setState(0xbc2e, 0x9d2f, 0x2820, 0xe78e, 0x1ed3, 0xc406, 0x0, 0x0);
        gbc.writeMem(0xbc2e, { 0xcb, 0x4e });
        gbc.writeMem(0xc406, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9d2f);
        EXPECT(gbc.pc(), 0xbc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2e), 0xcb);
        EXPECT(gbc.readMem(0xbc2f), 0x4e);
        EXPECT(gbc.readMem(0xc406), 0x67);
        // CB 4E 02D7
        gbc.setState(0x110d, 0x8dc8, 0x99d0, 0xdfa0, 0xb927, 0x4f3e, 0x1, 0x1);
        gbc.writeMem(0x110d, { 0xcb, 0x4e });
        gbc.writeMem(0x4f3e, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8dc8);
        EXPECT(gbc.pc(), 0x110f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02D8
        gbc.setState(0x858f, 0xf8c3, 0x5570, 0xbd1d, 0x8812, 0x64e8, 0x1, 0x1);
        gbc.writeMem(0x64e8, { 0x69 });
        gbc.writeMem(0x858f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf8c3);
        EXPECT(gbc.pc(), 0x8591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858f), 0xcb);
        EXPECT(gbc.readMem(0x8590), 0x4e);
        // CB 4E 02D9
        gbc.setState(0x2504, 0xe6d1, 0xc90, 0xa0e7, 0x4d38, 0x449, 0x0, 0x0);
        gbc.writeMem(0x449, { 0x2c });
        gbc.writeMem(0x2504, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe6d1);
        EXPECT(gbc.pc(), 0x2506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02DA
        gbc.setState(0x4daa, 0x4c99, 0xb200, 0xcb0d, 0x19d, 0xa9ce, 0x0, 0x0);
        gbc.writeMem(0x4daa, { 0xcb, 0x4e });
        gbc.writeMem(0xa9ce, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4c99);
        EXPECT(gbc.pc(), 0x4dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ce), 0xa4);
        // CB 4E 02DB
        gbc.setState(0xd13c, 0x211a, 0xbf40, 0x3ef0, 0xa3ec, 0xe573, 0x0, 0x1);
        gbc.writeMem(0xd13c, { 0xcb, 0x4e });
        gbc.writeMem(0xe573, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x211a);
        EXPECT(gbc.pc(), 0xd13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13c), 0xcb);
        EXPECT(gbc.readMem(0xd13d), 0x4e);
        EXPECT(gbc.readMem(0xe573), 0x6f);
        // CB 4E 02DC
        gbc.setState(0xd947, 0xb734, 0x6450, 0x6d9, 0xa7b8, 0x7229, 0x0, 0x0);
        gbc.writeMem(0x7229, { 0x8 });
        gbc.writeMem(0xd947, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb734);
        EXPECT(gbc.pc(), 0xd949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd947), 0xcb);
        EXPECT(gbc.readMem(0xd948), 0x4e);
        // CB 4E 02DD
        gbc.setState(0xcf2d, 0xe829, 0xbe40, 0x940e, 0x78c3, 0x1678, 0x0, 0x0);
        gbc.writeMem(0x1678, { 0x9a });
        gbc.writeMem(0xcf2d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe829);
        EXPECT(gbc.pc(), 0xcf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf2d), 0xcb);
        EXPECT(gbc.readMem(0xcf2e), 0x4e);
        // CB 4E 02DE
        gbc.setState(0x3ddf, 0xd177, 0x4160, 0xbed0, 0xa7c8, 0x5166, 0x1, 0x1);
        gbc.writeMem(0x3ddf, { 0xcb, 0x4e });
        gbc.writeMem(0x5166, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd177);
        EXPECT(gbc.pc(), 0x3de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02DF
        gbc.setState(0xad25, 0xed99, 0xb0b0, 0xdc10, 0x3094, 0x9199, 0x1, 0x1);
        gbc.writeMem(0x9199, { 0x8d });
        gbc.writeMem(0xad25, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xed99);
        EXPECT(gbc.pc(), 0xad27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9199), 0x8d);
        EXPECT(gbc.readMem(0xad25), 0xcb);
        EXPECT(gbc.readMem(0xad26), 0x4e);
        // CB 4E 02E0
        gbc.setState(0x7c6c, 0xbd47, 0x8d30, 0xd28f, 0xf026, 0x2d13, 0x1, 0x1);
        gbc.writeMem(0x2d13, { 0x71 });
        gbc.writeMem(0x7c6c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbd47);
        EXPECT(gbc.pc(), 0x7c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02E1
        gbc.setState(0x9677, 0xa4a8, 0x8c80, 0x50ea, 0xfe7a, 0x69bf, 0x1, 0x1);
        gbc.writeMem(0x69bf, { 0x28 });
        gbc.writeMem(0x9677, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa4a8);
        EXPECT(gbc.pc(), 0x9679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9677), 0xcb);
        EXPECT(gbc.readMem(0x9678), 0x4e);
        // CB 4E 02E2
        gbc.setState(0x6d23, 0xf70, 0x9150, 0xe763, 0x579f, 0x7e8a, 0x0, 0x1);
        gbc.writeMem(0x6d23, { 0xcb, 0x4e });
        gbc.writeMem(0x7e8a, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf70);
        EXPECT(gbc.pc(), 0x6d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02E3
        gbc.setState(0x6fe0, 0xb3a2, 0xc420, 0x7cd9, 0x64db, 0xb7fd, 0x1, 0x1);
        gbc.writeMem(0x6fe0, { 0xcb, 0x4e });
        gbc.writeMem(0xb7fd, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb3a2);
        EXPECT(gbc.pc(), 0x6fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7fd), 0x45);
        // CB 4E 02E4
        gbc.setState(0x2727, 0x2a46, 0xbe60, 0x809c, 0xc882, 0xae59, 0x1, 0x1);
        gbc.writeMem(0x2727, { 0xcb, 0x4e });
        gbc.writeMem(0xae59, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x2729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae59), 0xf7);
        // CB 4E 02E5
        gbc.setState(0x3915, 0x4af1, 0x3680, 0x9de, 0x82c8, 0xc7c7, 0x0, 0x1);
        gbc.writeMem(0x3915, { 0xcb, 0x4e });
        gbc.writeMem(0xc7c7, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4af1);
        EXPECT(gbc.pc(), 0x3917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c7), 0xd1);
        // CB 4E 02E6
        gbc.setState(0x863d, 0x2290, 0x2910, 0xe66c, 0xabcb, 0x1b22, 0x1, 0x0);
        gbc.writeMem(0x1b22, { 0xb8 });
        gbc.writeMem(0x863d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2290);
        EXPECT(gbc.pc(), 0x863f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863d), 0xcb);
        EXPECT(gbc.readMem(0x863e), 0x4e);
        // CB 4E 02E8
        gbc.setState(0xa0b2, 0xd4c5, 0x840, 0xac1b, 0x2145, 0xb827, 0x0, 0x0);
        gbc.writeMem(0xa0b2, { 0xcb, 0x4e });
        gbc.writeMem(0xb827, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd4c5);
        EXPECT(gbc.pc(), 0xa0b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b2), 0xcb);
        EXPECT(gbc.readMem(0xa0b3), 0x4e);
        EXPECT(gbc.readMem(0xb827), 0xf5);
        // CB 4E 02E9
        gbc.setState(0x6ae0, 0xaa7f, 0xe8a0, 0x5bbd, 0xad86, 0x4609, 0x1, 0x0);
        gbc.writeMem(0x4609, { 0x7d });
        gbc.writeMem(0x6ae0, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xaa7f);
        EXPECT(gbc.pc(), 0x6ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02EA
        gbc.setState(0x801f, 0xc496, 0x48f0, 0xe291, 0x86c0, 0xf463, 0x1, 0x1);
        gbc.writeMem(0x801f, { 0xcb, 0x4e });
        gbc.writeMem(0xf463, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc496);
        EXPECT(gbc.pc(), 0x8021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801f), 0xcb);
        EXPECT(gbc.readMem(0x8020), 0x4e);
        EXPECT(gbc.readMem(0xf463), 0x1f);
        // CB 4E 02EC
        gbc.setState(0x399f, 0xf3ce, 0x72d0, 0x71cb, 0xae1f, 0xe233, 0x1, 0x0);
        gbc.writeMem(0x399f, { 0xcb, 0x4e });
        gbc.writeMem(0xe233, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf3ce);
        EXPECT(gbc.pc(), 0x39a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe233), 0x3c);
        // CB 4E 02EE
        gbc.setState(0xb735, 0xbef4, 0x4040, 0xaf5a, 0x8081, 0xd1a, 0x0, 0x1);
        gbc.writeMem(0xd1a, { 0x44 });
        gbc.writeMem(0xb735, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbef4);
        EXPECT(gbc.pc(), 0xb737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb735), 0xcb);
        EXPECT(gbc.readMem(0xb736), 0x4e);
        // CB 4E 02EF
        gbc.setState(0xd20d, 0x7032, 0xd510, 0x8cc, 0xf314, 0x2eb1, 0x0, 0x0);
        gbc.writeMem(0x2eb1, { 0x8a });
        gbc.writeMem(0xd20d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0xd20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd20d), 0xcb);
        EXPECT(gbc.readMem(0xd20e), 0x4e);
        // CB 4E 02F0
        gbc.setState(0x8a11, 0x20f5, 0xaab0, 0xd02e, 0xcc16, 0x455d, 0x0, 0x0);
        gbc.writeMem(0x455d, { 0x29 });
        gbc.writeMem(0x8a11, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x20f5);
        EXPECT(gbc.pc(), 0x8a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a11), 0xcb);
        EXPECT(gbc.readMem(0x8a12), 0x4e);
        // CB 4E 02F2
        gbc.setState(0x64f2, 0x4998, 0x3660, 0x69d5, 0xd769, 0xc94e, 0x0, 0x0);
        gbc.writeMem(0x64f2, { 0xcb, 0x4e });
        gbc.writeMem(0xc94e, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4998);
        EXPECT(gbc.pc(), 0x64f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94e), 0x5b);
        // CB 4E 02F3
        gbc.setState(0xbc34, 0xf234, 0x4a0, 0x4450, 0x3a9e, 0xe1, 0x0, 0x1);
        gbc.writeMem(0xe1, { 0xba });
        gbc.writeMem(0xbc34, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf234);
        EXPECT(gbc.pc(), 0xbc36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc34), 0xcb);
        EXPECT(gbc.readMem(0xbc35), 0x4e);
        // CB 4E 02F4
        gbc.setState(0x5059, 0x4644, 0x48f0, 0x6263, 0xed81, 0xbeca, 0x0, 0x1);
        gbc.writeMem(0x5059, { 0xcb, 0x4e });
        gbc.writeMem(0xbeca, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4644);
        EXPECT(gbc.pc(), 0x505b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeca), 0x96);
        // CB 4E 02F5
        gbc.setState(0x7e8a, 0x22f2, 0x50e0, 0x9935, 0x765, 0xa54d, 0x1, 0x0);
        gbc.writeMem(0x7e8a, { 0xcb, 0x4e });
        gbc.writeMem(0xa54d, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x22f2);
        EXPECT(gbc.pc(), 0x7e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa54d), 0xd3);
        // CB 4E 02F6
        gbc.setState(0x4987, 0x33de, 0x2360, 0x496c, 0x21f2, 0xa07, 0x1, 0x0);
        gbc.writeMem(0xa07, { 0x6f });
        gbc.writeMem(0x4987, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x33de);
        EXPECT(gbc.pc(), 0x4989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 02F7
        gbc.setState(0x80e2, 0xce1a, 0xb140, 0x8d88, 0x5026, 0x6d7a, 0x1, 0x1);
        gbc.writeMem(0x6d7a, { 0x23 });
        gbc.writeMem(0x80e2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xce1a);
        EXPECT(gbc.pc(), 0x80e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e2), 0xcb);
        EXPECT(gbc.readMem(0x80e3), 0x4e);
        // CB 4E 02F9
        gbc.setState(0x13ee, 0xbd89, 0x7a80, 0xa669, 0xbe55, 0xc15f, 0x0, 0x0);
        gbc.writeMem(0x13ee, { 0xcb, 0x4e });
        gbc.writeMem(0xc15f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbd89);
        EXPECT(gbc.pc(), 0x13f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15f), 0x4c);
        // CB 4E 02FA
        gbc.setState(0x27fd, 0x4eab, 0x74d0, 0x17b3, 0xb29f, 0x28c8, 0x0, 0x0);
        gbc.writeMem(0x27fd, { 0xcb, 0x4e });
        gbc.writeMem(0x28c8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4eab);
        EXPECT(gbc.pc(), 0x27ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02FB
        gbc.setState(0xea60, 0x8ade, 0xc690, 0x688f, 0xf490, 0xe833, 0x0, 0x0);
        gbc.writeMem(0xe833, { 0xbc });
        gbc.writeMem(0xea60, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8ade);
        EXPECT(gbc.pc(), 0xea62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe833), 0xbc);
        EXPECT(gbc.readMem(0xea60), 0xcb);
        EXPECT(gbc.readMem(0xea61), 0x4e);
        // CB 4E 02FC
        gbc.setState(0x2b6a, 0x892b, 0x9f30, 0x543b, 0x9d17, 0x6831, 0x0, 0x0);
        gbc.writeMem(0x2b6a, { 0xcb, 0x4e });
        gbc.writeMem(0x6831, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x892b);
        EXPECT(gbc.pc(), 0x2b6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 02FD
        gbc.setState(0xea82, 0x8514, 0xca30, 0xec38, 0xcfab, 0xfe9c, 0x0, 0x0);
        gbc.writeMem(0xea82, { 0xcb, 0x4e });
        gbc.writeMem(0xfe9c, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8514);
        EXPECT(gbc.pc(), 0xea84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea82), 0xcb);
        EXPECT(gbc.readMem(0xea83), 0x4e);
        EXPECT(gbc.readMem(0xfe9c), 0x92);
        // CB 4E 02FE
        gbc.setState(0xc5df, 0xa711, 0xf7a0, 0x40ef, 0xd811, 0x5ecc, 0x1, 0x1);
        gbc.writeMem(0x5ecc, { 0xc2 });
        gbc.writeMem(0xc5df, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa711);
        EXPECT(gbc.pc(), 0xc5e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5df), 0xcb);
        EXPECT(gbc.readMem(0xc5e0), 0x4e);
        // CB 4E 02FF
        gbc.setState(0xcb0d, 0xf8e, 0x5690, 0xe24, 0x2565, 0x2196, 0x0, 0x1);
        gbc.writeMem(0x2196, { 0xad });
        gbc.writeMem(0xcb0d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf8e);
        EXPECT(gbc.pc(), 0xcb0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb0d), 0xcb);
        EXPECT(gbc.readMem(0xcb0e), 0x4e);
        // CB 4E 0300
        gbc.setState(0x47db, 0x2fa8, 0x8950, 0x942a, 0x3559, 0xe520, 0x1, 0x0);
        gbc.writeMem(0x47db, { 0xcb, 0x4e });
        gbc.writeMem(0xe520, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2fa8);
        EXPECT(gbc.pc(), 0x47dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe520), 0x1);
        // CB 4E 0301
        gbc.setState(0xd56d, 0x3ed8, 0x8a40, 0xee93, 0xd6a, 0x6e3b, 0x1, 0x0);
        gbc.writeMem(0x6e3b, { 0x88 });
        gbc.writeMem(0xd56d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3ed8);
        EXPECT(gbc.pc(), 0xd56f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56d), 0xcb);
        EXPECT(gbc.readMem(0xd56e), 0x4e);
        // CB 4E 0302
        gbc.setState(0x1e4, 0x1781, 0x5a70, 0x2802, 0xfad7, 0xa98b, 0x1, 0x1);
        gbc.writeMem(0x1e4, { 0xcb, 0x4e });
        gbc.writeMem(0xa98b, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1781);
        EXPECT(gbc.pc(), 0x1e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98b), 0x59);
        // CB 4E 0304
        gbc.setState(0x2e2e, 0x2316, 0x8310, 0x55fc, 0xc997, 0x16fe, 0x1, 0x1);
        gbc.writeMem(0x16fe, { 0x76 });
        gbc.writeMem(0x2e2e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2316);
        EXPECT(gbc.pc(), 0x2e30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0305
        gbc.setState(0x4807, 0xcb0b, 0xd330, 0xa4ca, 0x51c, 0xc58c, 0x1, 0x0);
        gbc.writeMem(0x4807, { 0xcb, 0x4e });
        gbc.writeMem(0xc58c, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcb0b);
        EXPECT(gbc.pc(), 0x4809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58c), 0xc);
        // CB 4E 0306
        gbc.setState(0x606a, 0xa252, 0xf5d0, 0x2247, 0x27b5, 0xe3b9, 0x1, 0x1);
        gbc.writeMem(0x606a, { 0xcb, 0x4e });
        gbc.writeMem(0xe3b9, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa252);
        EXPECT(gbc.pc(), 0x606c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3b9), 0x7e);
        // CB 4E 0307
        gbc.setState(0xe102, 0xf8ca, 0xb710, 0xa720, 0x8f22, 0x9616, 0x0, 0x0);
        gbc.writeMem(0x9616, { 0x32 });
        gbc.writeMem(0xe102, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf8ca);
        EXPECT(gbc.pc(), 0xe104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9616), 0x32);
        EXPECT(gbc.readMem(0xe102), 0xcb);
        EXPECT(gbc.readMem(0xe103), 0x4e);
        // CB 4E 0308
        gbc.setState(0xa83d, 0xd145, 0xfd00, 0xd36d, 0xff7e, 0xfb34, 0x0, 0x0);
        gbc.writeMem(0xa83d, { 0xcb, 0x4e });
        gbc.writeMem(0xfb34, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd145);
        EXPECT(gbc.pc(), 0xa83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa83d), 0xcb);
        EXPECT(gbc.readMem(0xa83e), 0x4e);
        EXPECT(gbc.readMem(0xfb34), 0x41);
        // CB 4E 0309
        gbc.setState(0x763c, 0x97e3, 0x5f30, 0x720a, 0xcd18, 0x8f37, 0x1, 0x0);
        gbc.writeMem(0x763c, { 0xcb, 0x4e });
        gbc.writeMem(0x8f37, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x97e3);
        EXPECT(gbc.pc(), 0x763e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f37), 0x1d);
        // CB 4E 030A
        gbc.setState(0x59bb, 0x965e, 0xf350, 0xb6ea, 0x6ee0, 0xea93, 0x0, 0x1);
        gbc.writeMem(0x59bb, { 0xcb, 0x4e });
        gbc.writeMem(0xea93, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x965e);
        EXPECT(gbc.pc(), 0x59bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea93), 0x29);
        // CB 4E 030B
        gbc.setState(0xd0ae, 0x3627, 0x6dd0, 0xa4b6, 0xfa95, 0x6b01, 0x1, 0x1);
        gbc.writeMem(0x6b01, { 0x53 });
        gbc.writeMem(0xd0ae, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3627);
        EXPECT(gbc.pc(), 0xd0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0ae), 0xcb);
        EXPECT(gbc.readMem(0xd0af), 0x4e);
        // CB 4E 030C
        gbc.setState(0x8566, 0x3b94, 0x1810, 0x1cc4, 0x1b58, 0xb117, 0x0, 0x0);
        gbc.writeMem(0x8566, { 0xcb, 0x4e });
        gbc.writeMem(0xb117, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3b94);
        EXPECT(gbc.pc(), 0x8568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8566), 0xcb);
        EXPECT(gbc.readMem(0x8567), 0x4e);
        EXPECT(gbc.readMem(0xb117), 0x40);
        // CB 4E 030D
        gbc.setState(0x89cb, 0x6c48, 0x35a0, 0xb4db, 0x7cf3, 0x3134, 0x1, 0x0);
        gbc.writeMem(0x3134, { 0xb2 });
        gbc.writeMem(0x89cb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6c48);
        EXPECT(gbc.pc(), 0x89cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cb), 0xcb);
        EXPECT(gbc.readMem(0x89cc), 0x4e);
        // CB 4E 030F
        gbc.setState(0xc7bb, 0xde35, 0x8090, 0x100c, 0x85c7, 0x178a, 0x1, 0x0);
        gbc.writeMem(0x178a, { 0xc6 });
        gbc.writeMem(0xc7bb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xde35);
        EXPECT(gbc.pc(), 0xc7bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7bb), 0xcb);
        EXPECT(gbc.readMem(0xc7bc), 0x4e);
        // CB 4E 0310
        gbc.setState(0xba37, 0x9646, 0xe120, 0x5054, 0x338e, 0x4fbc, 0x0, 0x1);
        gbc.writeMem(0x4fbc, { 0xfc });
        gbc.writeMem(0xba37, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9646);
        EXPECT(gbc.pc(), 0xba39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba37), 0xcb);
        EXPECT(gbc.readMem(0xba38), 0x4e);
        // CB 4E 0311
        gbc.setState(0xd3ad, 0x940e, 0x8880, 0x7da2, 0xc4f2, 0x49a1, 0x0, 0x1);
        gbc.writeMem(0x49a1, { 0x2f });
        gbc.writeMem(0xd3ad, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x940e);
        EXPECT(gbc.pc(), 0xd3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ad), 0xcb);
        EXPECT(gbc.readMem(0xd3ae), 0x4e);
        // CB 4E 0312
        gbc.setState(0x346f, 0x5fc4, 0xfd50, 0xa895, 0xd86d, 0xdb8c, 0x1, 0x0);
        gbc.writeMem(0x346f, { 0xcb, 0x4e });
        gbc.writeMem(0xdb8c, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5fc4);
        EXPECT(gbc.pc(), 0x3471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8c), 0x42);
        // CB 4E 0313
        gbc.setState(0x933d, 0x9549, 0x14c0, 0x2317, 0xfe94, 0xfcb9, 0x1, 0x0);
        gbc.writeMem(0x933d, { 0xcb, 0x4e });
        gbc.writeMem(0xfcb9, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9549);
        EXPECT(gbc.pc(), 0x933f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x933d), 0xcb);
        EXPECT(gbc.readMem(0x933e), 0x4e);
        EXPECT(gbc.readMem(0xfcb9), 0x5e);
        // CB 4E 0314
        gbc.setState(0x1c81, 0x634e, 0x1010, 0x90c3, 0x16ea, 0x13b4, 0x0, 0x1);
        gbc.writeMem(0x13b4, { 0xe6 });
        gbc.writeMem(0x1c81, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x634e);
        EXPECT(gbc.pc(), 0x1c83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0316
        gbc.setState(0xded2, 0x6385, 0xe990, 0xc68d, 0x7bb7, 0x563b, 0x1, 0x0);
        gbc.writeMem(0x563b, { 0xc3 });
        gbc.writeMem(0xded2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6385);
        EXPECT(gbc.pc(), 0xded4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xded2), 0xcb);
        EXPECT(gbc.readMem(0xded3), 0x4e);
        // CB 4E 0318
        gbc.setState(0x4b7c, 0x1a9, 0xbf70, 0x32ca, 0x654a, 0x99cc, 0x1, 0x1);
        gbc.writeMem(0x4b7c, { 0xcb, 0x4e });
        gbc.writeMem(0x99cc, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1a9);
        EXPECT(gbc.pc(), 0x4b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99cc), 0xea);
        // CB 4E 0319
        gbc.setState(0xc33e, 0x3853, 0x8d60, 0x350e, 0x8068, 0x10d1, 0x1, 0x1);
        gbc.writeMem(0x10d1, { 0x6d });
        gbc.writeMem(0xc33e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3853);
        EXPECT(gbc.pc(), 0xc340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33e), 0xcb);
        EXPECT(gbc.readMem(0xc33f), 0x4e);
        // CB 4E 031A
        gbc.setState(0xa7b2, 0x5cad, 0x83c0, 0x2179, 0xd9b6, 0x9566, 0x1, 0x0);
        gbc.writeMem(0x9566, { 0xdd });
        gbc.writeMem(0xa7b2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5cad);
        EXPECT(gbc.pc(), 0xa7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9566), 0xdd);
        EXPECT(gbc.readMem(0xa7b2), 0xcb);
        EXPECT(gbc.readMem(0xa7b3), 0x4e);
        // CB 4E 031C
        gbc.setState(0x60ca, 0x58a3, 0x4b30, 0x756a, 0xed85, 0xea8a, 0x0, 0x0);
        gbc.writeMem(0x60ca, { 0xcb, 0x4e });
        gbc.writeMem(0xea8a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x58a3);
        EXPECT(gbc.pc(), 0x60cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8a), 0x1b);
        // CB 4E 031D
        gbc.setState(0x66f0, 0x1441, 0x130, 0xe9f9, 0x5945, 0x9a04, 0x0, 0x1);
        gbc.writeMem(0x66f0, { 0xcb, 0x4e });
        gbc.writeMem(0x9a04, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1441);
        EXPECT(gbc.pc(), 0x66f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a04), 0x62);
        // CB 4E 031E
        gbc.setState(0x62ae, 0x9f2e, 0x5890, 0x28b2, 0x5f5e, 0x8404, 0x1, 0x1);
        gbc.writeMem(0x62ae, { 0xcb, 0x4e });
        gbc.writeMem(0x8404, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9f2e);
        EXPECT(gbc.pc(), 0x62b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8404), 0x2);
        // CB 4E 031F
        gbc.setState(0xebbd, 0x8538, 0xb810, 0xd7fa, 0xd375, 0x6167, 0x0, 0x1);
        gbc.writeMem(0x6167, { 0x27 });
        gbc.writeMem(0xebbd, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8538);
        EXPECT(gbc.pc(), 0xebbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebbd), 0xcb);
        EXPECT(gbc.readMem(0xebbe), 0x4e);
        // CB 4E 0320
        gbc.setState(0xcb05, 0x91a1, 0x1880, 0x2670, 0xf08b, 0x5d45, 0x0, 0x1);
        gbc.writeMem(0x5d45, { 0x98 });
        gbc.writeMem(0xcb05, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x91a1);
        EXPECT(gbc.pc(), 0xcb07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb05), 0xcb);
        EXPECT(gbc.readMem(0xcb06), 0x4e);
        // CB 4E 0321
        gbc.setState(0x37f2, 0x4c23, 0x4220, 0xfa5e, 0x56e3, 0x3cc6, 0x1, 0x0);
        gbc.writeMem(0x37f2, { 0xcb, 0x4e });
        gbc.writeMem(0x3cc6, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4c23);
        EXPECT(gbc.pc(), 0x37f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0322
        gbc.setState(0x608f, 0x6cb3, 0xcc40, 0x7f98, 0xda9, 0xb423, 0x0, 0x1);
        gbc.writeMem(0x608f, { 0xcb, 0x4e });
        gbc.writeMem(0xb423, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6cb3);
        EXPECT(gbc.pc(), 0x6091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb423), 0x43);
        // CB 4E 0323
        gbc.setState(0x23ec, 0xcf90, 0x9f50, 0x3ac6, 0xd5e4, 0x6999, 0x0, 0x0);
        gbc.writeMem(0x23ec, { 0xcb, 0x4e });
        gbc.writeMem(0x6999, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcf90);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0324
        gbc.setState(0x2073, 0xc1ec, 0x6300, 0xfac5, 0x4e98, 0xfba7, 0x0, 0x1);
        gbc.writeMem(0x2073, { 0xcb, 0x4e });
        gbc.writeMem(0xfba7, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc1ec);
        EXPECT(gbc.pc(), 0x2075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfba7), 0xaf);
        // CB 4E 0325
        gbc.setState(0xe946, 0xc93c, 0x22a0, 0x3f76, 0xea5e, 0x97b3, 0x1, 0x0);
        gbc.writeMem(0x97b3, { 0xf3 });
        gbc.writeMem(0xe946, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc93c);
        EXPECT(gbc.pc(), 0xe948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97b3), 0xf3);
        EXPECT(gbc.readMem(0xe946), 0xcb);
        EXPECT(gbc.readMem(0xe947), 0x4e);
        // CB 4E 0326
        gbc.setState(0x870, 0x2658, 0xa50, 0xed6e, 0xfc51, 0xbb30, 0x0, 0x0);
        gbc.writeMem(0x870, { 0xcb, 0x4e });
        gbc.writeMem(0xbb30, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2658);
        EXPECT(gbc.pc(), 0x872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb30), 0xcf);
        // CB 4E 0327
        gbc.setState(0xa54, 0x2e3e, 0xa3b0, 0x2149, 0x5b2f, 0x798f, 0x0, 0x0);
        gbc.writeMem(0xa54, { 0xcb, 0x4e });
        gbc.writeMem(0x798f, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2e3e);
        EXPECT(gbc.pc(), 0xa56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0328
        gbc.setState(0xedb2, 0x689b, 0xe090, 0x9dee, 0x6d71, 0x6545, 0x1, 0x1);
        gbc.writeMem(0x6545, { 0x4c });
        gbc.writeMem(0xedb2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x689b);
        EXPECT(gbc.pc(), 0xedb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb2), 0xcb);
        EXPECT(gbc.readMem(0xedb3), 0x4e);
        // CB 4E 0329
        gbc.setState(0xb533, 0x9f8c, 0xfa00, 0x21c8, 0x56a4, 0x726f, 0x0, 0x0);
        gbc.writeMem(0x726f, { 0xf4 });
        gbc.writeMem(0xb533, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9f8c);
        EXPECT(gbc.pc(), 0xb535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb533), 0xcb);
        EXPECT(gbc.readMem(0xb534), 0x4e);
        // CB 4E 032A
        gbc.setState(0x43e7, 0x9a9a, 0x7490, 0x3b08, 0x62be, 0x50dc, 0x1, 0x1);
        gbc.writeMem(0x43e7, { 0xcb, 0x4e });
        gbc.writeMem(0x50dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9a9a);
        EXPECT(gbc.pc(), 0x43e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 032B
        gbc.setState(0x8c2, 0x9414, 0x4d30, 0xbeb5, 0x2d55, 0x92f4, 0x0, 0x0);
        gbc.writeMem(0x8c2, { 0xcb, 0x4e });
        gbc.writeMem(0x92f4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9414);
        EXPECT(gbc.pc(), 0x8c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92f4), 0x7f);
        // CB 4E 032D
        gbc.setState(0xe314, 0x2bf4, 0xb50, 0x403a, 0x63a7, 0x3c62, 0x1, 0x0);
        gbc.writeMem(0x3c62, { 0xe3 });
        gbc.writeMem(0xe314, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2bf4);
        EXPECT(gbc.pc(), 0xe316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe314), 0xcb);
        EXPECT(gbc.readMem(0xe315), 0x4e);
        // CB 4E 032E
        gbc.setState(0xcaef, 0xad49, 0xa910, 0xe949, 0x2efb, 0x8322, 0x0, 0x0);
        gbc.writeMem(0x8322, { 0x75 });
        gbc.writeMem(0xcaef, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xad49);
        EXPECT(gbc.pc(), 0xcaf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8322), 0x75);
        EXPECT(gbc.readMem(0xcaef), 0xcb);
        EXPECT(gbc.readMem(0xcaf0), 0x4e);
        // CB 4E 032F
        gbc.setState(0x184c, 0xd979, 0x6610, 0x8934, 0x415f, 0x2e65, 0x0, 0x1);
        gbc.writeMem(0x184c, { 0xcb, 0x4e });
        gbc.writeMem(0x2e65, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd979);
        EXPECT(gbc.pc(), 0x184e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0330
        gbc.setState(0x930f, 0x92a3, 0xc690, 0xc4d1, 0xe775, 0x7c13, 0x0, 0x0);
        gbc.writeMem(0x7c13, { 0xca });
        gbc.writeMem(0x930f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x92a3);
        EXPECT(gbc.pc(), 0x9311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930f), 0xcb);
        EXPECT(gbc.readMem(0x9310), 0x4e);
        // CB 4E 0331
        gbc.setState(0xd3ad, 0x5cd2, 0xdd30, 0x8537, 0x9eb8, 0x76d9, 0x0, 0x1);
        gbc.writeMem(0x76d9, { 0xea });
        gbc.writeMem(0xd3ad, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5cd2);
        EXPECT(gbc.pc(), 0xd3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ad), 0xcb);
        EXPECT(gbc.readMem(0xd3ae), 0x4e);
        // CB 4E 0332
        gbc.setState(0xd139, 0x2c0, 0xca90, 0x20c6, 0xa62, 0x60b5, 0x1, 0x0);
        gbc.writeMem(0x60b5, { 0xac });
        gbc.writeMem(0xd139, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2c0);
        EXPECT(gbc.pc(), 0xd13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd139), 0xcb);
        EXPECT(gbc.readMem(0xd13a), 0x4e);
        // CB 4E 0333
        gbc.setState(0x1c54, 0x5d52, 0x3090, 0x128f, 0x5c2, 0xf9d0, 0x1, 0x1);
        gbc.writeMem(0x1c54, { 0xcb, 0x4e });
        gbc.writeMem(0xf9d0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5d52);
        EXPECT(gbc.pc(), 0x1c56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9d0), 0x3f);
        // CB 4E 0334
        gbc.setState(0x998d, 0x4402, 0xacd0, 0xd308, 0x1f7d, 0x4d70, 0x0, 0x0);
        gbc.writeMem(0x4d70, { 0x24 });
        gbc.writeMem(0x998d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4402);
        EXPECT(gbc.pc(), 0x998f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x998d), 0xcb);
        EXPECT(gbc.readMem(0x998e), 0x4e);
        // CB 4E 0335
        gbc.setState(0x34fb, 0x41b0, 0xd850, 0xc439, 0x2cfd, 0x55a0, 0x1, 0x0);
        gbc.writeMem(0x34fb, { 0xcb, 0x4e });
        gbc.writeMem(0x55a0, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x41b0);
        EXPECT(gbc.pc(), 0x34fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0336
        gbc.setState(0xa8de, 0xe517, 0xa420, 0x6cdb, 0x8f5e, 0x6d0b, 0x0, 0x0);
        gbc.writeMem(0x6d0b, { 0x39 });
        gbc.writeMem(0xa8de, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe517);
        EXPECT(gbc.pc(), 0xa8e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8de), 0xcb);
        EXPECT(gbc.readMem(0xa8df), 0x4e);
        // CB 4E 0337
        gbc.setState(0xc419, 0xffba, 0x6bd0, 0x2bbc, 0x7508, 0x23c5, 0x0, 0x1);
        gbc.writeMem(0x23c5, { 0xff });
        gbc.writeMem(0xc419, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xffba);
        EXPECT(gbc.pc(), 0xc41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc419), 0xcb);
        EXPECT(gbc.readMem(0xc41a), 0x4e);
        // CB 4E 0338
        gbc.setState(0xa3e6, 0x7f4, 0xdcc0, 0xb669, 0x5788, 0x833e, 0x0, 0x1);
        gbc.writeMem(0x833e, { 0x33 });
        gbc.writeMem(0xa3e6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7f4);
        EXPECT(gbc.pc(), 0xa3e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x833e), 0x33);
        EXPECT(gbc.readMem(0xa3e6), 0xcb);
        EXPECT(gbc.readMem(0xa3e7), 0x4e);
        // CB 4E 0339
        gbc.setState(0x2e3b, 0x29ce, 0xbb0, 0x84c3, 0x2422, 0x1ebd, 0x1, 0x1);
        gbc.writeMem(0x1ebd, { 0x20 });
        gbc.writeMem(0x2e3b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x29ce);
        EXPECT(gbc.pc(), 0x2e3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 033A
        gbc.setState(0x56b5, 0xad6e, 0x2030, 0x7b1c, 0x941c, 0x700e, 0x1, 0x0);
        gbc.writeMem(0x56b5, { 0xcb, 0x4e });
        gbc.writeMem(0x700e, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xad6e);
        EXPECT(gbc.pc(), 0x56b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 033C
        gbc.setState(0x5624, 0x7a61, 0x20b0, 0x279e, 0x6822, 0xea71, 0x1, 0x0);
        gbc.writeMem(0x5624, { 0xcb, 0x4e });
        gbc.writeMem(0xea71, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7a61);
        EXPECT(gbc.pc(), 0x5626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea71), 0xf7);
        // CB 4E 033D
        gbc.setState(0x8bc8, 0x72e2, 0x97e0, 0xd9a, 0x3b47, 0x61da, 0x0, 0x1);
        gbc.writeMem(0x61da, { 0x4e });
        gbc.writeMem(0x8bc8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x72e2);
        EXPECT(gbc.pc(), 0x8bca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc8), 0xcb);
        EXPECT(gbc.readMem(0x8bc9), 0x4e);
        // CB 4E 033E
        gbc.setState(0x990a, 0xd5c, 0xd520, 0x8483, 0xa08f, 0xa178, 0x0, 0x1);
        gbc.writeMem(0x990a, { 0xcb, 0x4e });
        gbc.writeMem(0xa178, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd5c);
        EXPECT(gbc.pc(), 0x990c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990a), 0xcb);
        EXPECT(gbc.readMem(0x990b), 0x4e);
        EXPECT(gbc.readMem(0xa178), 0x36);
        // CB 4E 033F
        gbc.setState(0xd6f7, 0xdcb6, 0xb0e0, 0xa01d, 0xc2c8, 0xa101, 0x1, 0x0);
        gbc.writeMem(0xa101, { 0x8c });
        gbc.writeMem(0xd6f7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdcb6);
        EXPECT(gbc.pc(), 0xd6f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa101), 0x8c);
        EXPECT(gbc.readMem(0xd6f7), 0xcb);
        EXPECT(gbc.readMem(0xd6f8), 0x4e);
        // CB 4E 0340
        gbc.setState(0xb2d0, 0x9c62, 0xf180, 0xcfdf, 0x8fd6, 0xdfda, 0x1, 0x0);
        gbc.writeMem(0xb2d0, { 0xcb, 0x4e });
        gbc.writeMem(0xdfda, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9c62);
        EXPECT(gbc.pc(), 0xb2d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d0), 0xcb);
        EXPECT(gbc.readMem(0xb2d1), 0x4e);
        EXPECT(gbc.readMem(0xdfda), 0x3b);
        // CB 4E 0341
        gbc.setState(0xea2, 0x7c63, 0xe560, 0x1d1c, 0x3055, 0x8909, 0x0, 0x0);
        gbc.writeMem(0xea2, { 0xcb, 0x4e });
        gbc.writeMem(0x8909, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7c63);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8909), 0xb5);
        // CB 4E 0342
        gbc.setState(0xc885, 0x5295, 0xbb90, 0x3b40, 0x5c13, 0x391c, 0x1, 0x1);
        gbc.writeMem(0x391c, { 0xf });
        gbc.writeMem(0xc885, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5295);
        EXPECT(gbc.pc(), 0xc887);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc885), 0xcb);
        EXPECT(gbc.readMem(0xc886), 0x4e);
        // CB 4E 0343
        gbc.setState(0x24e6, 0xb93f, 0xba10, 0x2e52, 0xb6bb, 0x4f6e, 0x1, 0x1);
        gbc.writeMem(0x24e6, { 0xcb, 0x4e });
        gbc.writeMem(0x4f6e, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb93f);
        EXPECT(gbc.pc(), 0x24e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0344
        gbc.setState(0x19f7, 0xb853, 0x4390, 0x9a79, 0x1777, 0x6c78, 0x1, 0x1);
        gbc.writeMem(0x19f7, { 0xcb, 0x4e });
        gbc.writeMem(0x6c78, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb853);
        EXPECT(gbc.pc(), 0x19f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0345
        gbc.setState(0xb92d, 0xc55b, 0xea0, 0x59ec, 0x7b42, 0x4376, 0x1, 0x1);
        gbc.writeMem(0x4376, { 0x13 });
        gbc.writeMem(0xb92d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc55b);
        EXPECT(gbc.pc(), 0xb92f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92d), 0xcb);
        EXPECT(gbc.readMem(0xb92e), 0x4e);
        // CB 4E 0346
        gbc.setState(0xd7b9, 0x939e, 0x4a0, 0xbe6a, 0xe23f, 0x8bba, 0x1, 0x0);
        gbc.writeMem(0x8bba, { 0x29 });
        gbc.writeMem(0xd7b9, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x939e);
        EXPECT(gbc.pc(), 0xd7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bba), 0x29);
        EXPECT(gbc.readMem(0xd7b9), 0xcb);
        EXPECT(gbc.readMem(0xd7ba), 0x4e);
        // CB 4E 0347
        gbc.setState(0x4fd1, 0x271f, 0x42a0, 0xe69b, 0x5fd1, 0x3387, 0x0, 0x0);
        gbc.writeMem(0x3387, { 0x55 });
        gbc.writeMem(0x4fd1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x271f);
        EXPECT(gbc.pc(), 0x4fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0348
        gbc.setState(0x1ef2, 0xa6d2, 0xd2b0, 0xa5ba, 0x5fac, 0x78b6, 0x1, 0x0);
        gbc.writeMem(0x1ef2, { 0xcb, 0x4e });
        gbc.writeMem(0x78b6, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa6d2);
        EXPECT(gbc.pc(), 0x1ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0349
        gbc.setState(0x2796, 0xe9ed, 0xe090, 0xf998, 0xdd72, 0x201f, 0x1, 0x1);
        gbc.writeMem(0x201f, { 0x39 });
        gbc.writeMem(0x2796, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe9ed);
        EXPECT(gbc.pc(), 0x2798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 034A
        gbc.setState(0x725b, 0xf98, 0x5fb0, 0x9e9, 0x88c, 0xccc4, 0x1, 0x0);
        gbc.writeMem(0x725b, { 0xcb, 0x4e });
        gbc.writeMem(0xccc4, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf98);
        EXPECT(gbc.pc(), 0x725d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc4), 0x65);
        // CB 4E 034B
        gbc.setState(0x988b, 0xdbf7, 0x3c80, 0x27da, 0x711e, 0x8cd, 0x1, 0x1);
        gbc.writeMem(0x8cd, { 0xce });
        gbc.writeMem(0x988b, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdbf7);
        EXPECT(gbc.pc(), 0x988d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x988b), 0xcb);
        EXPECT(gbc.readMem(0x988c), 0x4e);
        // CB 4E 034D
        gbc.setState(0x4eaf, 0xac6f, 0x3860, 0x3abd, 0x8c2b, 0x4fcd, 0x0, 0x0);
        gbc.writeMem(0x4eaf, { 0xcb, 0x4e });
        gbc.writeMem(0x4fcd, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xac6f);
        EXPECT(gbc.pc(), 0x4eb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 034E
        gbc.setState(0x67b2, 0x1170, 0xba70, 0x2595, 0xa973, 0xfa1c, 0x1, 0x0);
        gbc.writeMem(0x67b2, { 0xcb, 0x4e });
        gbc.writeMem(0xfa1c, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1170);
        EXPECT(gbc.pc(), 0x67b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa1c), 0x5b);
        // CB 4E 034F
        gbc.setState(0x218f, 0xb2ee, 0x8c80, 0xe326, 0x4751, 0x4032, 0x1, 0x0);
        gbc.writeMem(0x218f, { 0xcb, 0x4e });
        gbc.writeMem(0x4032, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb2ee);
        EXPECT(gbc.pc(), 0x2191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0351
        gbc.setState(0x4728, 0x6355, 0x92e0, 0xfee, 0x8c4e, 0x390d, 0x0, 0x1);
        gbc.writeMem(0x390d, { 0x36 });
        gbc.writeMem(0x4728, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6355);
        EXPECT(gbc.pc(), 0x472a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0352
        gbc.setState(0xc07e, 0x2aab, 0xeeb0, 0x8b95, 0xd891, 0xee97, 0x1, 0x1);
        gbc.writeMem(0xc07e, { 0xcb, 0x4e });
        gbc.writeMem(0xee97, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2aab);
        EXPECT(gbc.pc(), 0xc080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc07e), 0xcb);
        EXPECT(gbc.readMem(0xc07f), 0x4e);
        EXPECT(gbc.readMem(0xee97), 0x23);
        // CB 4E 0353
        gbc.setState(0xb891, 0x7433, 0xed0, 0x3e88, 0xcc8f, 0x76f3, 0x0, 0x1);
        gbc.writeMem(0x76f3, { 0x9e });
        gbc.writeMem(0xb891, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7433);
        EXPECT(gbc.pc(), 0xb893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb891), 0xcb);
        EXPECT(gbc.readMem(0xb892), 0x4e);
        // CB 4E 0354
        gbc.setState(0x6816, 0xab58, 0x840, 0x9680, 0xb328, 0xbd58, 0x1, 0x0);
        gbc.writeMem(0x6816, { 0xcb, 0x4e });
        gbc.writeMem(0xbd58, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xab58);
        EXPECT(gbc.pc(), 0x6818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd58), 0x33);
        // CB 4E 0355
        gbc.setState(0x862e, 0xe657, 0x830, 0x87ab, 0x2342, 0x9d4a, 0x1, 0x1);
        gbc.writeMem(0x862e, { 0xcb, 0x4e });
        gbc.writeMem(0x9d4a, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe657);
        EXPECT(gbc.pc(), 0x8630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x862e), 0xcb);
        EXPECT(gbc.readMem(0x862f), 0x4e);
        EXPECT(gbc.readMem(0x9d4a), 0x6d);
        // CB 4E 0356
        gbc.setState(0x2fda, 0x592b, 0x9820, 0x61ae, 0xa043, 0x2bc8, 0x0, 0x0);
        gbc.writeMem(0x2bc8, { 0xe2 });
        gbc.writeMem(0x2fda, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x592b);
        EXPECT(gbc.pc(), 0x2fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0357
        gbc.setState(0x669a, 0xf27, 0xf530, 0x6b4e, 0x3f9f, 0xd394, 0x1, 0x1);
        gbc.writeMem(0x669a, { 0xcb, 0x4e });
        gbc.writeMem(0xd394, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf27);
        EXPECT(gbc.pc(), 0x669c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd394), 0xd8);
        // CB 4E 0358
        gbc.setState(0x92aa, 0x609, 0x1a30, 0xb7c3, 0xeb59, 0x61ab, 0x0, 0x1);
        gbc.writeMem(0x61ab, { 0x86 });
        gbc.writeMem(0x92aa, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x609);
        EXPECT(gbc.pc(), 0x92ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92aa), 0xcb);
        EXPECT(gbc.readMem(0x92ab), 0x4e);
        // CB 4E 0359
        gbc.setState(0xe3d7, 0x4c09, 0x1bc0, 0x6b49, 0x4831, 0x23bf, 0x0, 0x0);
        gbc.writeMem(0x23bf, { 0x64 });
        gbc.writeMem(0xe3d7, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4c09);
        EXPECT(gbc.pc(), 0xe3d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d7), 0xcb);
        EXPECT(gbc.readMem(0xe3d8), 0x4e);
        // CB 4E 035A
        gbc.setState(0x2fd9, 0xc245, 0x7100, 0xd9a1, 0x5121, 0x73d6, 0x0, 0x0);
        gbc.writeMem(0x2fd9, { 0xcb, 0x4e });
        gbc.writeMem(0x73d6, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc245);
        EXPECT(gbc.pc(), 0x2fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 035B
        gbc.setState(0x3ef5, 0xeb0f, 0x1ef0, 0x42df, 0xb3ba, 0xb275, 0x1, 0x1);
        gbc.writeMem(0x3ef5, { 0xcb, 0x4e });
        gbc.writeMem(0xb275, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xeb0f);
        EXPECT(gbc.pc(), 0x3ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb275), 0xb);
        // CB 4E 035C
        gbc.setState(0x293a, 0x204d, 0x3450, 0xb481, 0x890e, 0x9e7b, 0x1, 0x1);
        gbc.writeMem(0x293a, { 0xcb, 0x4e });
        gbc.writeMem(0x9e7b, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x204d);
        EXPECT(gbc.pc(), 0x293c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e7b), 0x74);
        // CB 4E 035D
        gbc.setState(0x3b0a, 0x1014, 0xb3f0, 0xbffc, 0xe62c, 0x5b89, 0x1, 0x0);
        gbc.writeMem(0x3b0a, { 0xcb, 0x4e });
        gbc.writeMem(0x5b89, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1014);
        EXPECT(gbc.pc(), 0x3b0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 035E
        gbc.setState(0x6eec, 0x33b0, 0xeb70, 0xd39, 0x8981, 0xac81, 0x0, 0x0);
        gbc.writeMem(0x6eec, { 0xcb, 0x4e });
        gbc.writeMem(0xac81, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x33b0);
        EXPECT(gbc.pc(), 0x6eee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac81), 0x27);
        // CB 4E 035F
        gbc.setState(0xc610, 0x1f11, 0xb940, 0xe6c4, 0xbe14, 0x3f58, 0x0, 0x1);
        gbc.writeMem(0x3f58, { 0x1f });
        gbc.writeMem(0xc610, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1f11);
        EXPECT(gbc.pc(), 0xc612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc610), 0xcb);
        EXPECT(gbc.readMem(0xc611), 0x4e);
        // CB 4E 0360
        gbc.setState(0x91b6, 0x55ad, 0x9830, 0x5435, 0xf625, 0xca6e, 0x0, 0x1);
        gbc.writeMem(0x91b6, { 0xcb, 0x4e });
        gbc.writeMem(0xca6e, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x55ad);
        EXPECT(gbc.pc(), 0x91b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b6), 0xcb);
        EXPECT(gbc.readMem(0x91b7), 0x4e);
        EXPECT(gbc.readMem(0xca6e), 0xda);
        // CB 4E 0361
        gbc.setState(0x98d, 0x2e52, 0xea00, 0x5c09, 0xa84, 0x7c96, 0x1, 0x0);
        gbc.writeMem(0x98d, { 0xcb, 0x4e });
        gbc.writeMem(0x7c96, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2e52);
        EXPECT(gbc.pc(), 0x98f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0362
        gbc.setState(0xbd4e, 0x56f4, 0x4c00, 0xf822, 0x9112, 0x626c, 0x0, 0x0);
        gbc.writeMem(0x626c, { 0x23 });
        gbc.writeMem(0xbd4e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x56f4);
        EXPECT(gbc.pc(), 0xbd50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4e), 0xcb);
        EXPECT(gbc.readMem(0xbd4f), 0x4e);
        // CB 4E 0363
        gbc.setState(0x7975, 0xe0f3, 0x8010, 0xbdb4, 0x3d56, 0x3005, 0x0, 0x1);
        gbc.writeMem(0x3005, { 0xc3 });
        gbc.writeMem(0x7975, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe0f3);
        EXPECT(gbc.pc(), 0x7977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0364
        gbc.setState(0x6f43, 0xe61e, 0xebe0, 0xf233, 0x44ef, 0x6207, 0x1, 0x0);
        gbc.writeMem(0x6207, { 0xae });
        gbc.writeMem(0x6f43, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe61e);
        EXPECT(gbc.pc(), 0x6f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0366
        gbc.setState(0xdd34, 0x38a7, 0xd1f0, 0x5e9f, 0x1468, 0xc8c6, 0x0, 0x0);
        gbc.writeMem(0xc8c6, { 0xfa });
        gbc.writeMem(0xdd34, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x38a7);
        EXPECT(gbc.pc(), 0xdd36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c6), 0xfa);
        EXPECT(gbc.readMem(0xdd34), 0xcb);
        EXPECT(gbc.readMem(0xdd35), 0x4e);
        // CB 4E 0367
        gbc.setState(0x597, 0xf696, 0xea00, 0x26bc, 0xb0ab, 0x3be6, 0x1, 0x0);
        gbc.writeMem(0x597, { 0xcb, 0x4e });
        gbc.writeMem(0x3be6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf696);
        EXPECT(gbc.pc(), 0x599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0368
        gbc.setState(0xeb96, 0xf9e, 0x37c0, 0x2051, 0x7581, 0xb83b, 0x1, 0x1);
        gbc.writeMem(0xb83b, { 0xf });
        gbc.writeMem(0xeb96, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf9e);
        EXPECT(gbc.pc(), 0xeb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83b), 0xf);
        EXPECT(gbc.readMem(0xeb96), 0xcb);
        EXPECT(gbc.readMem(0xeb97), 0x4e);
        // CB 4E 0369
        gbc.setState(0x77fb, 0x3e0d, 0x13c0, 0x3ad8, 0xebfa, 0x6122, 0x0, 0x0);
        gbc.writeMem(0x6122, { 0x49 });
        gbc.writeMem(0x77fb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3e0d);
        EXPECT(gbc.pc(), 0x77fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 036A
        gbc.setState(0x1404, 0xf288, 0xb4c0, 0xe8fd, 0x63f, 0xde86, 0x1, 0x1);
        gbc.writeMem(0x1404, { 0xcb, 0x4e });
        gbc.writeMem(0xde86, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf288);
        EXPECT(gbc.pc(), 0x1406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde86), 0x9f);
        // CB 4E 036B
        gbc.setState(0x1a17, 0xa4ec, 0xf3d0, 0x9436, 0x553d, 0xe7d8, 0x1, 0x0);
        gbc.writeMem(0x1a17, { 0xcb, 0x4e });
        gbc.writeMem(0xe7d8, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa4ec);
        EXPECT(gbc.pc(), 0x1a19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7d8), 0x75);
        // CB 4E 036C
        gbc.setState(0xcdf, 0xbc33, 0x9b00, 0x3db9, 0x6458, 0x1f45, 0x1, 0x0);
        gbc.writeMem(0xcdf, { 0xcb, 0x4e });
        gbc.writeMem(0x1f45, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbc33);
        EXPECT(gbc.pc(), 0xce1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 036D
        gbc.setState(0xdc8c, 0x4868, 0x85d0, 0x236, 0x39eb, 0x3722, 0x1, 0x1);
        gbc.writeMem(0x3722, { 0xdc });
        gbc.writeMem(0xdc8c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4868);
        EXPECT(gbc.pc(), 0xdc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc8c), 0xcb);
        EXPECT(gbc.readMem(0xdc8d), 0x4e);
        // CB 4E 036E
        gbc.setState(0x853d, 0xafd5, 0x2d90, 0x6add, 0xe765, 0x9440, 0x0, 0x0);
        gbc.writeMem(0x853d, { 0xcb, 0x4e });
        gbc.writeMem(0x9440, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xafd5);
        EXPECT(gbc.pc(), 0x853f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853d), 0xcb);
        EXPECT(gbc.readMem(0x853e), 0x4e);
        EXPECT(gbc.readMem(0x9440), 0x4f);
        // CB 4E 036F
        gbc.setState(0x1ecd, 0x60d8, 0x1400, 0x992c, 0x6a86, 0xb0f3, 0x0, 0x0);
        gbc.writeMem(0x1ecd, { 0xcb, 0x4e });
        gbc.writeMem(0xb0f3, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x60d8);
        EXPECT(gbc.pc(), 0x1ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f3), 0x8e);
        // CB 4E 0370
        gbc.setState(0xa417, 0x6584, 0x3b70, 0x9253, 0xa7fd, 0xa7c1, 0x0, 0x1);
        gbc.writeMem(0xa417, { 0xcb, 0x4e });
        gbc.writeMem(0xa7c1, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6584);
        EXPECT(gbc.pc(), 0xa419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa417), 0xcb);
        EXPECT(gbc.readMem(0xa418), 0x4e);
        EXPECT(gbc.readMem(0xa7c1), 0x7);
        // CB 4E 0371
        gbc.setState(0xe5b2, 0xeee9, 0x4990, 0xa9d, 0x1233, 0x8c2c, 0x0, 0x0);
        gbc.writeMem(0x8c2c, { 0x6d });
        gbc.writeMem(0xe5b2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeee9);
        EXPECT(gbc.pc(), 0xe5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2c), 0x6d);
        EXPECT(gbc.readMem(0xe5b2), 0xcb);
        EXPECT(gbc.readMem(0xe5b3), 0x4e);
        // CB 4E 0373
        gbc.setState(0x67c1, 0xeb9e, 0xae80, 0x4221, 0x656, 0x7cc3, 0x1, 0x0);
        gbc.writeMem(0x67c1, { 0xcb, 0x4e });
        gbc.writeMem(0x7cc3, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xeb9e);
        EXPECT(gbc.pc(), 0x67c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0374
        gbc.setState(0xe91a, 0xeb68, 0x1ea0, 0x122f, 0xf594, 0x45cd, 0x0, 0x0);
        gbc.writeMem(0x45cd, { 0x2f });
        gbc.writeMem(0xe91a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeb68);
        EXPECT(gbc.pc(), 0xe91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91a), 0xcb);
        EXPECT(gbc.readMem(0xe91b), 0x4e);
        // CB 4E 0375
        gbc.setState(0x5366, 0xe426, 0xb9b0, 0xad84, 0xca23, 0xf56e, 0x0, 0x0);
        gbc.writeMem(0x5366, { 0xcb, 0x4e });
        gbc.writeMem(0xf56e, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe426);
        EXPECT(gbc.pc(), 0x5368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf56e), 0xbf);
        // CB 4E 0376
        gbc.setState(0xcc95, 0x7e48, 0x13a0, 0xbbe3, 0x7b23, 0x3c68, 0x1, 0x0);
        gbc.writeMem(0x3c68, { 0xbb });
        gbc.writeMem(0xcc95, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7e48);
        EXPECT(gbc.pc(), 0xcc97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc95), 0xcb);
        EXPECT(gbc.readMem(0xcc96), 0x4e);
        // CB 4E 0377
        gbc.setState(0x2c33, 0xc684, 0x11b0, 0xd9ee, 0x91eb, 0x1bc4, 0x0, 0x1);
        gbc.writeMem(0x1bc4, { 0xc });
        gbc.writeMem(0x2c33, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc684);
        EXPECT(gbc.pc(), 0x2c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0379
        gbc.setState(0x5b61, 0x2453, 0x3a00, 0x13f8, 0xdce1, 0xcd3c, 0x0, 0x0);
        gbc.writeMem(0x5b61, { 0xcb, 0x4e });
        gbc.writeMem(0xcd3c, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2453);
        EXPECT(gbc.pc(), 0x5b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3c), 0xd0);
        // CB 4E 037A
        gbc.setState(0x992, 0xb6d2, 0xf420, 0x8bc1, 0x6428, 0x37df, 0x0, 0x1);
        gbc.writeMem(0x992, { 0xcb, 0x4e });
        gbc.writeMem(0x37df, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb6d2);
        EXPECT(gbc.pc(), 0x994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 037B
        gbc.setState(0xa257, 0xf5f1, 0x73a0, 0x3f1b, 0x7b6b, 0x4548, 0x1, 0x0);
        gbc.writeMem(0x4548, { 0x56 });
        gbc.writeMem(0xa257, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf5f1);
        EXPECT(gbc.pc(), 0xa259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa257), 0xcb);
        EXPECT(gbc.readMem(0xa258), 0x4e);
        // CB 4E 037C
        gbc.setState(0x98f7, 0xa1a6, 0xc2a0, 0x310f, 0x1ff1, 0xee06, 0x0, 0x0);
        gbc.writeMem(0x98f7, { 0xcb, 0x4e });
        gbc.writeMem(0xee06, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa1a6);
        EXPECT(gbc.pc(), 0x98f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f7), 0xcb);
        EXPECT(gbc.readMem(0x98f8), 0x4e);
        EXPECT(gbc.readMem(0xee06), 0xfd);
        // CB 4E 037D
        gbc.setState(0x6b06, 0x7d99, 0xd320, 0x20cf, 0xf897, 0xaa7, 0x0, 0x1);
        gbc.writeMem(0xaa7, { 0xce });
        gbc.writeMem(0x6b06, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7d99);
        EXPECT(gbc.pc(), 0x6b08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 037E
        gbc.setState(0x1adc, 0x7f81, 0xf420, 0x66f3, 0x3cbc, 0x15cf, 0x0, 0x1);
        gbc.writeMem(0x15cf, { 0xe5 });
        gbc.writeMem(0x1adc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7f81);
        EXPECT(gbc.pc(), 0x1ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 037F
        gbc.setState(0x95d2, 0xcdf, 0xfba0, 0xd85f, 0xed21, 0x5187, 0x1, 0x0);
        gbc.writeMem(0x5187, { 0xd5 });
        gbc.writeMem(0x95d2, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xcdf);
        EXPECT(gbc.pc(), 0x95d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d2), 0xcb);
        EXPECT(gbc.readMem(0x95d3), 0x4e);
        // CB 4E 0380
        gbc.setState(0xee80, 0xb94d, 0xfb60, 0x2af8, 0xf137, 0xef18, 0x0, 0x0);
        gbc.writeMem(0xee80, { 0xcb, 0x4e });
        gbc.writeMem(0xef18, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb94d);
        EXPECT(gbc.pc(), 0xee82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee80), 0xcb);
        EXPECT(gbc.readMem(0xee81), 0x4e);
        EXPECT(gbc.readMem(0xef18), 0xb);
        // CB 4E 0381
        gbc.setState(0x547a, 0x3c7c, 0xa7c0, 0x65dc, 0x3b9b, 0x358a, 0x0, 0x1);
        gbc.writeMem(0x358a, { 0x9f });
        gbc.writeMem(0x547a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3c7c);
        EXPECT(gbc.pc(), 0x547c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0382
        gbc.setState(0x463c, 0xeba8, 0x8450, 0x7508, 0xced9, 0xb362, 0x0, 0x1);
        gbc.writeMem(0x463c, { 0xcb, 0x4e });
        gbc.writeMem(0xb362, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xeba8);
        EXPECT(gbc.pc(), 0x463e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb362), 0x32);
        // CB 4E 0383
        gbc.setState(0xa564, 0x73f6, 0xb670, 0xd37a, 0x8f1f, 0x5452, 0x1, 0x0);
        gbc.writeMem(0x5452, { 0xd9 });
        gbc.writeMem(0xa564, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x73f6);
        EXPECT(gbc.pc(), 0xa566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa564), 0xcb);
        EXPECT(gbc.readMem(0xa565), 0x4e);
        // CB 4E 0384
        gbc.setState(0x893b, 0xda53, 0xf4b0, 0xf332, 0xca1b, 0xe4cd, 0x1, 0x0);
        gbc.writeMem(0x893b, { 0xcb, 0x4e });
        gbc.writeMem(0xe4cd, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xda53);
        EXPECT(gbc.pc(), 0x893d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893b), 0xcb);
        EXPECT(gbc.readMem(0x893c), 0x4e);
        EXPECT(gbc.readMem(0xe4cd), 0x6);
        // CB 4E 0386
        gbc.setState(0x6fd, 0x9fa6, 0x5220, 0x31c2, 0xca13, 0x4f9b, 0x1, 0x1);
        gbc.writeMem(0x6fd, { 0xcb, 0x4e });
        gbc.writeMem(0x4f9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9fa6);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0387
        gbc.setState(0x55de, 0xb16, 0xa140, 0xe0e2, 0xdbd5, 0xf39d, 0x1, 0x1);
        gbc.writeMem(0x55de, { 0xcb, 0x4e });
        gbc.writeMem(0xf39d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb16);
        EXPECT(gbc.pc(), 0x55e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf39d), 0x54);
        // CB 4E 0388
        gbc.setState(0x403c, 0xca57, 0x2440, 0x35c5, 0x3dae, 0x216d, 0x1, 0x1);
        gbc.writeMem(0x216d, { 0x11 });
        gbc.writeMem(0x403c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xca57);
        EXPECT(gbc.pc(), 0x403e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0389
        gbc.setState(0x5b4d, 0xbdc3, 0x4750, 0x6bb1, 0xb3af, 0x14f9, 0x0, 0x0);
        gbc.writeMem(0x14f9, { 0xa0 });
        gbc.writeMem(0x5b4d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbdc3);
        EXPECT(gbc.pc(), 0x5b4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 038A
        gbc.setState(0xdd6a, 0x93d5, 0x9390, 0x5b54, 0x4082, 0x3cbc, 0x0, 0x0);
        gbc.writeMem(0x3cbc, { 0x60 });
        gbc.writeMem(0xdd6a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x93d5);
        EXPECT(gbc.pc(), 0xdd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd6a), 0xcb);
        EXPECT(gbc.readMem(0xdd6b), 0x4e);
        // CB 4E 038B
        gbc.setState(0x8650, 0x18d4, 0x8f30, 0x8bb7, 0xa22d, 0x7812, 0x0, 0x1);
        gbc.writeMem(0x7812, { 0x8d });
        gbc.writeMem(0x8650, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x18d4);
        EXPECT(gbc.pc(), 0x8652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8650), 0xcb);
        EXPECT(gbc.readMem(0x8651), 0x4e);
        // CB 4E 038C
        gbc.setState(0x9610, 0xc9d6, 0x3420, 0xeea0, 0xdf03, 0x86e9, 0x0, 0x0);
        gbc.writeMem(0x86e9, { 0xfb });
        gbc.writeMem(0x9610, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc9d6);
        EXPECT(gbc.pc(), 0x9612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e9), 0xfb);
        EXPECT(gbc.readMem(0x9610), 0xcb);
        EXPECT(gbc.readMem(0x9611), 0x4e);
        // CB 4E 038D
        gbc.setState(0xcfd1, 0xa379, 0xd670, 0xa261, 0x439d, 0x2d34, 0x1, 0x1);
        gbc.writeMem(0x2d34, { 0x24 });
        gbc.writeMem(0xcfd1, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0xcfd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd1), 0xcb);
        EXPECT(gbc.readMem(0xcfd2), 0x4e);
        // CB 4E 038E
        gbc.setState(0x3fc8, 0xf5b4, 0x9880, 0xcec3, 0xafa2, 0x2b04, 0x1, 0x1);
        gbc.writeMem(0x2b04, { 0x45 });
        gbc.writeMem(0x3fc8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf5b4);
        EXPECT(gbc.pc(), 0x3fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 038F
        gbc.setState(0x64ef, 0x3fea, 0xe840, 0xb33e, 0x35eb, 0x604, 0x1, 0x0);
        gbc.writeMem(0x604, { 0x4e });
        gbc.writeMem(0x64ef, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3fea);
        EXPECT(gbc.pc(), 0x64f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0390
        gbc.setState(0x25ba, 0x4fd4, 0x20e0, 0x5529, 0x8e32, 0x3f2c, 0x0, 0x0);
        gbc.writeMem(0x25ba, { 0xcb, 0x4e });
        gbc.writeMem(0x3f2c, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4fd4);
        EXPECT(gbc.pc(), 0x25bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0391
        gbc.setState(0x5b4d, 0x6bb5, 0xeb40, 0xc6d9, 0x110c, 0xd4c4, 0x0, 0x0);
        gbc.writeMem(0x5b4d, { 0xcb, 0x4e });
        gbc.writeMem(0xd4c4, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6bb5);
        EXPECT(gbc.pc(), 0x5b4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c4), 0x3b);
        // CB 4E 0392
        gbc.setState(0xd2c8, 0x4bfc, 0x6c50, 0xb80c, 0x569a, 0xb190, 0x0, 0x1);
        gbc.writeMem(0xb190, { 0xc3 });
        gbc.writeMem(0xd2c8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4bfc);
        EXPECT(gbc.pc(), 0xd2ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb190), 0xc3);
        EXPECT(gbc.readMem(0xd2c8), 0xcb);
        EXPECT(gbc.readMem(0xd2c9), 0x4e);
        // CB 4E 0393
        gbc.setState(0xe0f8, 0x9683, 0xd5f0, 0xf620, 0xba69, 0xaa43, 0x0, 0x0);
        gbc.writeMem(0xaa43, { 0x3 });
        gbc.writeMem(0xe0f8, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9683);
        EXPECT(gbc.pc(), 0xe0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa43), 0x3);
        EXPECT(gbc.readMem(0xe0f8), 0xcb);
        EXPECT(gbc.readMem(0xe0f9), 0x4e);
        // CB 4E 0394
        gbc.setState(0xa972, 0x68ff, 0x7520, 0xe2d2, 0x4198, 0xe4e1, 0x1, 0x1);
        gbc.writeMem(0xa972, { 0xcb, 0x4e });
        gbc.writeMem(0xe4e1, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x68ff);
        EXPECT(gbc.pc(), 0xa974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa972), 0xcb);
        EXPECT(gbc.readMem(0xa973), 0x4e);
        EXPECT(gbc.readMem(0xe4e1), 0x7);
        // CB 4E 0395
        gbc.setState(0x492c, 0xf65, 0x5340, 0x114, 0x3adf, 0x6662, 0x1, 0x1);
        gbc.writeMem(0x492c, { 0xcb, 0x4e });
        gbc.writeMem(0x6662, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf65);
        EXPECT(gbc.pc(), 0x492e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 0396
        gbc.setState(0x526e, 0x88cb, 0x1030, 0xf01c, 0xff86, 0x799b, 0x1, 0x1);
        gbc.writeMem(0x526e, { 0xcb, 0x4e });
        gbc.writeMem(0x799b, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x88cb);
        EXPECT(gbc.pc(), 0x5270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0397
        gbc.setState(0x19bf, 0xe33e, 0x8300, 0xdff5, 0x7252, 0x871c, 0x0, 0x1);
        gbc.writeMem(0x19bf, { 0xcb, 0x4e });
        gbc.writeMem(0x871c, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe33e);
        EXPECT(gbc.pc(), 0x19c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x871c), 0x69);
        // CB 4E 0398
        gbc.setState(0x14b0, 0x4d4f, 0xca50, 0xf2b0, 0x1abf, 0x429c, 0x0, 0x1);
        gbc.writeMem(0x14b0, { 0xcb, 0x4e });
        gbc.writeMem(0x429c, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4d4f);
        EXPECT(gbc.pc(), 0x14b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 0399
        gbc.setState(0x8d6c, 0x8d53, 0x11f0, 0xb7c3, 0xe1f3, 0x8c3c, 0x1, 0x1);
        gbc.writeMem(0x8c3c, { 0xb8 });
        gbc.writeMem(0x8d6c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8d53);
        EXPECT(gbc.pc(), 0x8d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3c), 0xb8);
        EXPECT(gbc.readMem(0x8d6c), 0xcb);
        EXPECT(gbc.readMem(0x8d6d), 0x4e);
        // CB 4E 039A
        gbc.setState(0x7b21, 0x4b0d, 0x7730, 0x309d, 0xa54, 0x238c, 0x0, 0x0);
        gbc.writeMem(0x238c, { 0xff });
        gbc.writeMem(0x7b21, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0x7b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 039B
        gbc.setState(0xc021, 0xa18e, 0xcc00, 0x9d6c, 0x4744, 0xa6b5, 0x0, 0x0);
        gbc.writeMem(0xa6b5, { 0xb7 });
        gbc.writeMem(0xc021, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa18e);
        EXPECT(gbc.pc(), 0xc023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b5), 0xb7);
        EXPECT(gbc.readMem(0xc021), 0xcb);
        EXPECT(gbc.readMem(0xc022), 0x4e);
        // CB 4E 039C
        gbc.setState(0x3ff9, 0x6dfe, 0x8e80, 0x86d5, 0xe7f0, 0x816e, 0x1, 0x1);
        gbc.writeMem(0x3ff9, { 0xcb, 0x4e });
        gbc.writeMem(0x816e, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6dfe);
        EXPECT(gbc.pc(), 0x3ffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816e), 0x11);
        // CB 4E 039D
        gbc.setState(0xc05, 0x9910, 0x2fc0, 0xcc6e, 0xd159, 0x9318, 0x1, 0x0);
        gbc.writeMem(0xc05, { 0xcb, 0x4e });
        gbc.writeMem(0x9318, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9910);
        EXPECT(gbc.pc(), 0xc07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9318), 0x42);
        // CB 4E 039E
        gbc.setState(0xb36d, 0x68c9, 0x3f40, 0xb390, 0x897d, 0xe491, 0x0, 0x1);
        gbc.writeMem(0xb36d, { 0xcb, 0x4e });
        gbc.writeMem(0xe491, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x68c9);
        EXPECT(gbc.pc(), 0xb36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb36d), 0xcb);
        EXPECT(gbc.readMem(0xb36e), 0x4e);
        EXPECT(gbc.readMem(0xe491), 0x58);
        // CB 4E 039F
        gbc.setState(0xb344, 0x7278, 0xfac0, 0x4c9f, 0xb089, 0xe132, 0x1, 0x1);
        gbc.writeMem(0xb344, { 0xcb, 0x4e });
        gbc.writeMem(0xe132, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7278);
        EXPECT(gbc.pc(), 0xb346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb344), 0xcb);
        EXPECT(gbc.readMem(0xb345), 0x4e);
        EXPECT(gbc.readMem(0xe132), 0x79);
        // CB 4E 03A0
        gbc.setState(0xce5d, 0xdaf0, 0xc460, 0xfcfd, 0x5d88, 0x47de, 0x1, 0x0);
        gbc.writeMem(0x47de, { 0x90 });
        gbc.writeMem(0xce5d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xdaf0);
        EXPECT(gbc.pc(), 0xce5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5d), 0xcb);
        EXPECT(gbc.readMem(0xce5e), 0x4e);
        // CB 4E 03A1
        gbc.setState(0x6601, 0xed37, 0xd3f0, 0x707b, 0xe59d, 0xe065, 0x0, 0x1);
        gbc.writeMem(0x6601, { 0xcb, 0x4e });
        gbc.writeMem(0xe065, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xed37);
        EXPECT(gbc.pc(), 0x6603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe065), 0x2c);
        // CB 4E 03A2
        gbc.setState(0x486f, 0x3e57, 0x3920, 0x6c15, 0xb52d, 0xbbbb, 0x1, 0x1);
        gbc.writeMem(0x486f, { 0xcb, 0x4e });
        gbc.writeMem(0xbbbb, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3e57);
        EXPECT(gbc.pc(), 0x4871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbb), 0xde);
        // CB 4E 03A3
        gbc.setState(0x35b3, 0x1d14, 0x1ae0, 0x27ba, 0xbcc, 0xae7d, 0x0, 0x0);
        gbc.writeMem(0x35b3, { 0xcb, 0x4e });
        gbc.writeMem(0xae7d, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1d14);
        EXPECT(gbc.pc(), 0x35b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7d), 0x42);
        // CB 4E 03A4
        gbc.setState(0x6c7d, 0xda0e, 0x89a0, 0x9b26, 0x1535, 0x6a88, 0x0, 0x0);
        gbc.writeMem(0x6a88, { 0xb8 });
        gbc.writeMem(0x6c7d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xda0e);
        EXPECT(gbc.pc(), 0x6c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03A5
        gbc.setState(0x26a3, 0x3a6, 0x8b20, 0x3d20, 0x3a9, 0x77b8, 0x1, 0x0);
        gbc.writeMem(0x26a3, { 0xcb, 0x4e });
        gbc.writeMem(0x77b8, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3a6);
        EXPECT(gbc.pc(), 0x26a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03A6
        gbc.setState(0x8044, 0x8d8b, 0x54e0, 0x1870, 0x6d99, 0xeed7, 0x0, 0x0);
        gbc.writeMem(0x8044, { 0xcb, 0x4e });
        gbc.writeMem(0xeed7, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8d8b);
        EXPECT(gbc.pc(), 0x8046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8044), 0xcb);
        EXPECT(gbc.readMem(0x8045), 0x4e);
        EXPECT(gbc.readMem(0xeed7), 0xe1);
        // CB 4E 03A7
        gbc.setState(0xef9d, 0x89c8, 0xe8f0, 0x4e4, 0xca59, 0xa231, 0x0, 0x0);
        gbc.writeMem(0xa231, { 0x76 });
        gbc.writeMem(0xef9d, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x89c8);
        EXPECT(gbc.pc(), 0xef9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa231), 0x76);
        EXPECT(gbc.readMem(0xef9d), 0xcb);
        EXPECT(gbc.readMem(0xef9e), 0x4e);
        // CB 4E 03A8
        gbc.setState(0xb9bc, 0xa506, 0xa760, 0xcbbe, 0x1534, 0x22a9, 0x0, 0x1);
        gbc.writeMem(0x22a9, { 0xa1 });
        gbc.writeMem(0xb9bc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa506);
        EXPECT(gbc.pc(), 0xb9be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bc), 0xcb);
        EXPECT(gbc.readMem(0xb9bd), 0x4e);
        // CB 4E 03A9
        gbc.setState(0x59a5, 0xef7e, 0xc440, 0xcfa7, 0x7bd7, 0x170a, 0x1, 0x1);
        gbc.writeMem(0x170a, { 0x7f });
        gbc.writeMem(0x59a5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xef7e);
        EXPECT(gbc.pc(), 0x59a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03AA
        gbc.setState(0x89f5, 0xcae2, 0x9ce0, 0xfd48, 0x5a71, 0x1902, 0x0, 0x0);
        gbc.writeMem(0x1902, { 0xb1 });
        gbc.writeMem(0x89f5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcae2);
        EXPECT(gbc.pc(), 0x89f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f5), 0xcb);
        EXPECT(gbc.readMem(0x89f6), 0x4e);
        // CB 4E 03AB
        gbc.setState(0xb852, 0x5722, 0xdd50, 0xff74, 0x3def, 0x2f33, 0x1, 0x1);
        gbc.writeMem(0x2f33, { 0xbd });
        gbc.writeMem(0xb852, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5722);
        EXPECT(gbc.pc(), 0xb854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb852), 0xcb);
        EXPECT(gbc.readMem(0xb853), 0x4e);
        // CB 4E 03AC
        gbc.setState(0x8aaa, 0x3f1a, 0x120, 0x9ebd, 0x95e6, 0x65e, 0x0, 0x1);
        gbc.writeMem(0x65e, { 0x5c });
        gbc.writeMem(0x8aaa, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3f1a);
        EXPECT(gbc.pc(), 0x8aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aaa), 0xcb);
        EXPECT(gbc.readMem(0x8aab), 0x4e);
        // CB 4E 03AD
        gbc.setState(0xc9fc, 0x10a7, 0x6cc0, 0xa09d, 0x17d4, 0xa44a, 0x0, 0x0);
        gbc.writeMem(0xa44a, { 0x6e });
        gbc.writeMem(0xc9fc, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x10a7);
        EXPECT(gbc.pc(), 0xc9fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44a), 0x6e);
        EXPECT(gbc.readMem(0xc9fc), 0xcb);
        EXPECT(gbc.readMem(0xc9fd), 0x4e);
        // CB 4E 03AE
        gbc.setState(0x1b68, 0xfffe, 0xc850, 0x4cf8, 0xf0ac, 0xa0b5, 0x0, 0x1);
        gbc.writeMem(0x1b68, { 0xcb, 0x4e });
        gbc.writeMem(0xa0b5, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xfffe);
        EXPECT(gbc.pc(), 0x1b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b5), 0x8b);
        // CB 4E 03AF
        gbc.setState(0x3c96, 0x8404, 0xa0d0, 0xc9a2, 0xdebd, 0x8c82, 0x1, 0x0);
        gbc.writeMem(0x3c96, { 0xcb, 0x4e });
        gbc.writeMem(0x8c82, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8404);
        EXPECT(gbc.pc(), 0x3c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c82), 0x8e);
        // CB 4E 03B0
        gbc.setState(0x6961, 0xf899, 0x6e30, 0x973f, 0x37f8, 0xcfe3, 0x1, 0x1);
        gbc.writeMem(0x6961, { 0xcb, 0x4e });
        gbc.writeMem(0xcfe3, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf899);
        EXPECT(gbc.pc(), 0x6963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe3), 0xfa);
        // CB 4E 03B1
        gbc.setState(0xc8d6, 0x94a9, 0x8f70, 0x28ef, 0x33b0, 0x393e, 0x0, 0x1);
        gbc.writeMem(0x393e, { 0xdc });
        gbc.writeMem(0xc8d6, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x94a9);
        EXPECT(gbc.pc(), 0xc8d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8d6), 0xcb);
        EXPECT(gbc.readMem(0xc8d7), 0x4e);
        // CB 4E 03B2
        gbc.setState(0x8ba5, 0x9875, 0xd4b0, 0x49ac, 0xdcfd, 0x35b5, 0x0, 0x1);
        gbc.writeMem(0x35b5, { 0x93 });
        gbc.writeMem(0x8ba5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9875);
        EXPECT(gbc.pc(), 0x8ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba5), 0xcb);
        EXPECT(gbc.readMem(0x8ba6), 0x4e);
        // CB 4E 03B3
        gbc.setState(0x137c, 0x7860, 0xe2e0, 0x4a3b, 0xc6a7, 0xdd7d, 0x1, 0x1);
        gbc.writeMem(0x137c, { 0xcb, 0x4e });
        gbc.writeMem(0xdd7d, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7860);
        EXPECT(gbc.pc(), 0x137e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd7d), 0x99);
        // CB 4E 03B4
        gbc.setState(0x472a, 0x1f4, 0xfe70, 0x1958, 0x4ef2, 0xd6bc, 0x0, 0x1);
        gbc.writeMem(0x472a, { 0xcb, 0x4e });
        gbc.writeMem(0xd6bc, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1f4);
        EXPECT(gbc.pc(), 0x472c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6bc), 0x23);
        // CB 4E 03B5
        gbc.setState(0x60a5, 0x473f, 0xd030, 0x131a, 0x79bf, 0x1049, 0x1, 0x0);
        gbc.writeMem(0x1049, { 0xa1 });
        gbc.writeMem(0x60a5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x473f);
        EXPECT(gbc.pc(), 0x60a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 03B6
        gbc.setState(0x3197, 0x8054, 0x6360, 0x4769, 0x2598, 0xc65d, 0x1, 0x1);
        gbc.writeMem(0x3197, { 0xcb, 0x4e });
        gbc.writeMem(0xc65d, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8054);
        EXPECT(gbc.pc(), 0x3199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65d), 0xa3);
        // CB 4E 03B7
        gbc.setState(0xd6ac, 0xf655, 0xc3b0, 0x45e5, 0x5b8, 0xdd4a, 0x1, 0x1);
        gbc.writeMem(0xd6ac, { 0xcb, 0x4e });
        gbc.writeMem(0xdd4a, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf655);
        EXPECT(gbc.pc(), 0xd6ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ac), 0xcb);
        EXPECT(gbc.readMem(0xd6ad), 0x4e);
        EXPECT(gbc.readMem(0xdd4a), 0x66);
        // CB 4E 03B8
        gbc.setState(0x49f0, 0xca15, 0x23e0, 0x354c, 0x39c0, 0x79e6, 0x0, 0x0);
        gbc.writeMem(0x49f0, { 0xcb, 0x4e });
        gbc.writeMem(0x79e6, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xca15);
        EXPECT(gbc.pc(), 0x49f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03BA
        gbc.setState(0x5b0a, 0xca8b, 0xb7f0, 0x9253, 0x1e51, 0xee78, 0x1, 0x0);
        gbc.writeMem(0x5b0a, { 0xcb, 0x4e });
        gbc.writeMem(0xee78, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xca8b);
        EXPECT(gbc.pc(), 0x5b0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee78), 0xf2);
        // CB 4E 03BB
        gbc.setState(0x90a3, 0x36bf, 0xdf20, 0x1f3a, 0x4ef8, 0xbea0, 0x1, 0x1);
        gbc.writeMem(0x90a3, { 0xcb, 0x4e });
        gbc.writeMem(0xbea0, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x36bf);
        EXPECT(gbc.pc(), 0x90a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a3), 0xcb);
        EXPECT(gbc.readMem(0x90a4), 0x4e);
        EXPECT(gbc.readMem(0xbea0), 0x6c);
        // CB 4E 03BC
        gbc.setState(0x750f, 0x7dbe, 0x2240, 0x3556, 0x251e, 0xc59a, 0x0, 0x0);
        gbc.writeMem(0x750f, { 0xcb, 0x4e });
        gbc.writeMem(0xc59a, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7dbe);
        EXPECT(gbc.pc(), 0x7511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59a), 0x9a);
        // CB 4E 03BD
        gbc.setState(0x1b45, 0x595a, 0x4f90, 0x3ebd, 0xf724, 0x8c5f, 0x0, 0x0);
        gbc.writeMem(0x1b45, { 0xcb, 0x4e });
        gbc.writeMem(0x8c5f, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x595a);
        EXPECT(gbc.pc(), 0x1b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5f), 0x8a);
        // CB 4E 03BE
        gbc.setState(0xca02, 0xcf9f, 0xf1a0, 0x21b1, 0x599, 0x5ddb, 0x0, 0x0);
        gbc.writeMem(0x5ddb, { 0xb3 });
        gbc.writeMem(0xca02, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcf9f);
        EXPECT(gbc.pc(), 0xca04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca02), 0xcb);
        EXPECT(gbc.readMem(0xca03), 0x4e);
        // CB 4E 03BF
        gbc.setState(0xd8ba, 0x4e9a, 0xc2e0, 0xe068, 0xaa6f, 0x10b1, 0x0, 0x0);
        gbc.writeMem(0x10b1, { 0x62 });
        gbc.writeMem(0xd8ba, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4e9a);
        EXPECT(gbc.pc(), 0xd8bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ba), 0xcb);
        EXPECT(gbc.readMem(0xd8bb), 0x4e);
        // CB 4E 03C0
        gbc.setState(0xc131, 0x73c7, 0xb1a0, 0x9198, 0xbf7a, 0xfe43, 0x0, 0x0);
        gbc.writeMem(0xc131, { 0xcb, 0x4e });
        gbc.writeMem(0xfe43, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x73c7);
        EXPECT(gbc.pc(), 0xc133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc131), 0xcb);
        EXPECT(gbc.readMem(0xc132), 0x4e);
        EXPECT(gbc.readMem(0xfe43), 0x61);
        // CB 4E 03C1
        gbc.setState(0xcf59, 0x38ee, 0xded0, 0xeca1, 0xbe76, 0xf938, 0x0, 0x0);
        gbc.writeMem(0xcf59, { 0xcb, 0x4e });
        gbc.writeMem(0xf938, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x38ee);
        EXPECT(gbc.pc(), 0xcf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf59), 0xcb);
        EXPECT(gbc.readMem(0xcf5a), 0x4e);
        EXPECT(gbc.readMem(0xf938), 0xb5);
        // CB 4E 03C2
        gbc.setState(0x20a1, 0x8f15, 0x9910, 0xbe31, 0x886, 0xc34d, 0x0, 0x1);
        gbc.writeMem(0x20a1, { 0xcb, 0x4e });
        gbc.writeMem(0xc34d, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8f15);
        EXPECT(gbc.pc(), 0x20a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34d), 0x2b);
        // CB 4E 03C3
        gbc.setState(0x98d1, 0xa2a2, 0xab20, 0x66e7, 0x4c83, 0xf141, 0x1, 0x0);
        gbc.writeMem(0x98d1, { 0xcb, 0x4e });
        gbc.writeMem(0xf141, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa2a2);
        EXPECT(gbc.pc(), 0x98d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d1), 0xcb);
        EXPECT(gbc.readMem(0x98d2), 0x4e);
        EXPECT(gbc.readMem(0xf141), 0x34);
        // CB 4E 03C4
        gbc.setState(0x9d7b, 0xc7e8, 0xf0e0, 0xed7d, 0xa7d7, 0xf1fc, 0x1, 0x0);
        gbc.writeMem(0x9d7b, { 0xcb, 0x4e });
        gbc.writeMem(0xf1fc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc7e8);
        EXPECT(gbc.pc(), 0x9d7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7b), 0xcb);
        EXPECT(gbc.readMem(0x9d7c), 0x4e);
        EXPECT(gbc.readMem(0xf1fc), 0x1b);
        // CB 4E 03C5
        gbc.setState(0x9015, 0xb152, 0x3bb0, 0x3d1d, 0xb887, 0xffa9, 0x1, 0x0);
        gbc.writeMem(0x9015, { 0xcb, 0x4e });
        gbc.writeMem(0xffa9, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb152);
        EXPECT(gbc.pc(), 0x9017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9015), 0xcb);
        EXPECT(gbc.readMem(0x9016), 0x4e);
        EXPECT(gbc.readMem(0xffa9), 0x61);
        // CB 4E 03C6
        gbc.setState(0xb3b7, 0x8577, 0xc980, 0x4bd5, 0x42cb, 0xe3e9, 0x0, 0x1);
        gbc.writeMem(0xb3b7, { 0xcb, 0x4e });
        gbc.writeMem(0xe3e9, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8577);
        EXPECT(gbc.pc(), 0xb3b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b7), 0xcb);
        EXPECT(gbc.readMem(0xb3b8), 0x4e);
        EXPECT(gbc.readMem(0xe3e9), 0x50);
        // CB 4E 03C7
        gbc.setState(0x295c, 0xc975, 0x760, 0xbd23, 0x6bab, 0x4397, 0x1, 0x1);
        gbc.writeMem(0x295c, { 0xcb, 0x4e });
        gbc.writeMem(0x4397, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc975);
        EXPECT(gbc.pc(), 0x295e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03C9
        gbc.setState(0x16f7, 0x7a8e, 0xf2b0, 0x2f2b, 0xfbb6, 0xed61, 0x1, 0x1);
        gbc.writeMem(0x16f7, { 0xcb, 0x4e });
        gbc.writeMem(0xed61, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7a8e);
        EXPECT(gbc.pc(), 0x16f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed61), 0xdc);
        // CB 4E 03CA
        gbc.setState(0x152c, 0x511, 0xc40, 0xa702, 0x7c7a, 0x19ee, 0x0, 0x1);
        gbc.writeMem(0x152c, { 0xcb, 0x4e });
        gbc.writeMem(0x19ee, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x511);
        EXPECT(gbc.pc(), 0x152e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03CB
        gbc.setState(0xd625, 0xc72, 0x5030, 0x8c60, 0xb5fd, 0x3e5, 0x0, 0x0);
        gbc.writeMem(0x3e5, { 0x7d });
        gbc.writeMem(0xd625, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc72);
        EXPECT(gbc.pc(), 0xd627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd625), 0xcb);
        EXPECT(gbc.readMem(0xd626), 0x4e);
        // CB 4E 03CC
        gbc.setState(0x55be, 0x3972, 0xeb70, 0x560, 0xe342, 0x251a, 0x1, 0x1);
        gbc.writeMem(0x251a, { 0xcd });
        gbc.writeMem(0x55be, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3972);
        EXPECT(gbc.pc(), 0x55c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 03CD
        gbc.setState(0x531a, 0xf59c, 0x1ab0, 0x1316, 0xb22e, 0x2cd1, 0x0, 0x1);
        gbc.writeMem(0x2cd1, { 0x31 });
        gbc.writeMem(0x531a, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf59c);
        EXPECT(gbc.pc(), 0x531c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 03CE
        gbc.setState(0xe22c, 0x234a, 0x8110, 0x9017, 0x90b8, 0x5d4e, 0x1, 0x0);
        gbc.writeMem(0x5d4e, { 0xaf });
        gbc.writeMem(0xe22c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x234a);
        EXPECT(gbc.pc(), 0xe22e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe22c), 0xcb);
        EXPECT(gbc.readMem(0xe22d), 0x4e);
        // CB 4E 03CF
        gbc.setState(0x5ea1, 0x56be, 0x8b60, 0x793e, 0xb430, 0xc539, 0x1, 0x0);
        gbc.writeMem(0x5ea1, { 0xcb, 0x4e });
        gbc.writeMem(0xc539, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x56be);
        EXPECT(gbc.pc(), 0x5ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc539), 0xdd);
        // CB 4E 03D0
        gbc.setState(0xd632, 0x937a, 0x5300, 0x17e5, 0x3762, 0x814c, 0x1, 0x0);
        gbc.writeMem(0x814c, { 0x8f });
        gbc.writeMem(0xd632, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x937a);
        EXPECT(gbc.pc(), 0xd634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x814c), 0x8f);
        EXPECT(gbc.readMem(0xd632), 0xcb);
        EXPECT(gbc.readMem(0xd633), 0x4e);
        // CB 4E 03D1
        gbc.setState(0x5a96, 0x506b, 0x6c90, 0x15ba, 0xf9e, 0xabed, 0x0, 0x0);
        gbc.writeMem(0x5a96, { 0xcb, 0x4e });
        gbc.writeMem(0xabed, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x506b);
        EXPECT(gbc.pc(), 0x5a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabed), 0x4a);
        // CB 4E 03D2
        gbc.setState(0xae6e, 0x1bb2, 0x8660, 0xc17d, 0xee06, 0xbda, 0x0, 0x0);
        gbc.writeMem(0xbda, { 0x75 });
        gbc.writeMem(0xae6e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1bb2);
        EXPECT(gbc.pc(), 0xae70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6e), 0xcb);
        EXPECT(gbc.readMem(0xae6f), 0x4e);
        // CB 4E 03D3
        gbc.setState(0x9876, 0x9106, 0x160, 0xe505, 0x7ba0, 0x87c4, 0x1, 0x1);
        gbc.writeMem(0x87c4, { 0x58 });
        gbc.writeMem(0x9876, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9106);
        EXPECT(gbc.pc(), 0x9878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c4), 0x58);
        EXPECT(gbc.readMem(0x9876), 0xcb);
        EXPECT(gbc.readMem(0x9877), 0x4e);
        // CB 4E 03D4
        gbc.setState(0x1bc7, 0x6144, 0x1400, 0xd407, 0xdd70, 0x95b4, 0x0, 0x1);
        gbc.writeMem(0x1bc7, { 0xcb, 0x4e });
        gbc.writeMem(0x95b4, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6144);
        EXPECT(gbc.pc(), 0x1bc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b4), 0x7d);
        // CB 4E 03D5
        gbc.setState(0xb8ab, 0x2511, 0xd9f0, 0xa5dd, 0x9e95, 0x3c66, 0x1, 0x0);
        gbc.writeMem(0x3c66, { 0xd });
        gbc.writeMem(0xb8ab, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2511);
        EXPECT(gbc.pc(), 0xb8ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ab), 0xcb);
        EXPECT(gbc.readMem(0xb8ac), 0x4e);
        // CB 4E 03D6
        gbc.setState(0x953a, 0x1c1e, 0xf2a0, 0xc258, 0xb31, 0xa627, 0x1, 0x1);
        gbc.writeMem(0x953a, { 0xcb, 0x4e });
        gbc.writeMem(0xa627, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1c1e);
        EXPECT(gbc.pc(), 0x953c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x953a), 0xcb);
        EXPECT(gbc.readMem(0x953b), 0x4e);
        EXPECT(gbc.readMem(0xa627), 0xa);
        // CB 4E 03D7
        gbc.setState(0xf28, 0x8d3c, 0x86d0, 0xff81, 0x294, 0xfa06, 0x0, 0x1);
        gbc.writeMem(0xf28, { 0xcb, 0x4e });
        gbc.writeMem(0xfa06, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8d3c);
        EXPECT(gbc.pc(), 0xf2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa06), 0xe0);
        // CB 4E 03D9
        gbc.setState(0xd2bb, 0x2fd8, 0x82e0, 0x8d82, 0x470, 0x29af, 0x0, 0x0);
        gbc.writeMem(0x29af, { 0x22 });
        gbc.writeMem(0xd2bb, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2fd8);
        EXPECT(gbc.pc(), 0xd2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2bb), 0xcb);
        EXPECT(gbc.readMem(0xd2bc), 0x4e);
        // CB 4E 03DA
        gbc.setState(0xc41c, 0x5dba, 0x82a0, 0xf0a8, 0x28c5, 0xc6e5, 0x1, 0x0);
        gbc.writeMem(0xc41c, { 0xcb, 0x4e });
        gbc.writeMem(0xc6e5, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5dba);
        EXPECT(gbc.pc(), 0xc41e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc41c), 0xcb);
        EXPECT(gbc.readMem(0xc41d), 0x4e);
        EXPECT(gbc.readMem(0xc6e5), 0x92);
        // CB 4E 03DB
        gbc.setState(0xa897, 0x3aea, 0x4260, 0x6471, 0x1ef2, 0x445a, 0x1, 0x0);
        gbc.writeMem(0x445a, { 0xe2 });
        gbc.writeMem(0xa897, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3aea);
        EXPECT(gbc.pc(), 0xa899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa897), 0xcb);
        EXPECT(gbc.readMem(0xa898), 0x4e);
        // CB 4E 03DC
        gbc.setState(0xd5ce, 0xf80e, 0x7a60, 0x929d, 0x4d48, 0x7d7c, 0x0, 0x1);
        gbc.writeMem(0x7d7c, { 0x71 });
        gbc.writeMem(0xd5ce, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf80e);
        EXPECT(gbc.pc(), 0xd5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ce), 0xcb);
        EXPECT(gbc.readMem(0xd5cf), 0x4e);
        // CB 4E 03DE
        gbc.setState(0xb7d5, 0xbc78, 0x2780, 0x567f, 0x8202, 0x1b4e, 0x0, 0x0);
        gbc.writeMem(0x1b4e, { 0xb7 });
        gbc.writeMem(0xb7d5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbc78);
        EXPECT(gbc.pc(), 0xb7d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d5), 0xcb);
        EXPECT(gbc.readMem(0xb7d6), 0x4e);
        // CB 4E 03DF
        gbc.setState(0x9aa, 0xbd0a, 0x6d20, 0x776, 0x6277, 0xd342, 0x0, 0x0);
        gbc.writeMem(0x9aa, { 0xcb, 0x4e });
        gbc.writeMem(0xd342, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbd0a);
        EXPECT(gbc.pc(), 0x9ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd342), 0xf2);
        // CB 4E 03E0
        gbc.setState(0x60a1, 0x93f, 0x3090, 0xf270, 0xc5cc, 0xf8e7, 0x1, 0x1);
        gbc.writeMem(0x60a1, { 0xcb, 0x4e });
        gbc.writeMem(0xf8e7, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x93f);
        EXPECT(gbc.pc(), 0x60a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8e7), 0xa3);
        // CB 4E 03E1
        gbc.setState(0x1655, 0xcad5, 0xd7a0, 0x3a10, 0xd5a3, 0x2bc4, 0x1, 0x1);
        gbc.writeMem(0x1655, { 0xcb, 0x4e });
        gbc.writeMem(0x2bc4, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcad5);
        EXPECT(gbc.pc(), 0x1657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03E2
        gbc.setState(0xaf6e, 0x795, 0xcc30, 0x2a57, 0x8d6f, 0x6bb, 0x1, 0x0);
        gbc.writeMem(0x6bb, { 0xc7 });
        gbc.writeMem(0xaf6e, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x795);
        EXPECT(gbc.pc(), 0xaf70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf6e), 0xcb);
        EXPECT(gbc.readMem(0xaf6f), 0x4e);
        // CB 4E 03E3
        gbc.setState(0xb6e5, 0x93ca, 0x55e0, 0x8244, 0xa164, 0x448c, 0x0, 0x0);
        gbc.writeMem(0x448c, { 0x4a });
        gbc.writeMem(0xb6e5, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x93ca);
        EXPECT(gbc.pc(), 0xb6e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e5), 0xcb);
        EXPECT(gbc.readMem(0xb6e6), 0x4e);
        // CB 4E 03E4
        gbc.setState(0x3000, 0x608f, 0xc630, 0x12ba, 0xee3, 0x6a59, 0x0, 0x0);
        gbc.writeMem(0x3000, { 0xcb, 0x4e });
        gbc.writeMem(0x6a59, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x608f);
        EXPECT(gbc.pc(), 0x3002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4E 03E5
        gbc.setState(0x3f43, 0x895b, 0xb840, 0xd39f, 0xbd25, 0x21f7, 0x1, 0x0);
        gbc.writeMem(0x21f7, { 0x7f });
        gbc.writeMem(0x3f43, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x895b);
        EXPECT(gbc.pc(), 0x3f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4E 03E6
        gbc.setState(0x8b2c, 0x3440, 0x2f80, 0x95e9, 0x4a88, 0x511b, 0x0, 0x1);
        gbc.writeMem(0x511b, { 0x49 });
        gbc.writeMem(0x8b2c, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3440);
        EXPECT(gbc.pc(), 0x8b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b2c), 0xcb);
        EXPECT(gbc.readMem(0x8b2d), 0x4e);
        // CB 4E 03E7
        gbc.setState(0x459f, 0x9a5, 0x8ad0, 0x41c8, 0xd7fc, 0x43ba, 0x0, 0x1);
        gbc.writeMem(0x43ba, { 0x13 });
        gbc.writeMem(0x459f, { 0xcb, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9a5);
        EXPECT(gbc.pc(), 0x45a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
