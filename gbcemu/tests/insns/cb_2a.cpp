#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_2a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_2a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 2A 0000
        gbc.setState(0x3dba, 0xd81a, 0xf10, 0xd3a4, 0xa08b, 0x5e85, 0x0, 0x0);
        gbc.writeMem(0x3dba, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd81a);
        EXPECT(gbc.pc(), 0x3dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0001
        gbc.setState(0x9a79, 0xb760, 0xa430, 0xc10d, 0x8bae, 0x598d, 0x0, 0x0);
        gbc.writeMem(0x9a79, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb760);
        EXPECT(gbc.pc(), 0x9a7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a79), 0xcb);
        EXPECT(gbc.readMem(0x9a7a), 0x2a);
        // CB 2A 0002
        gbc.setState(0xed42, 0x987b, 0x7850, 0xf692, 0x1923, 0x2ce5, 0x0, 0x1);
        gbc.writeMem(0xed42, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x987b);
        EXPECT(gbc.pc(), 0xed44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed42), 0xcb);
        EXPECT(gbc.readMem(0xed43), 0x2a);
        // CB 2A 0003
        gbc.setState(0x8d3a, 0x7df6, 0x720, 0xc1fa, 0xa9d3, 0x4d45, 0x0, 0x1);
        gbc.writeMem(0x8d3a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7df6);
        EXPECT(gbc.pc(), 0x8d3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d3a), 0xcb);
        EXPECT(gbc.readMem(0x8d3b), 0x2a);
        // CB 2A 0004
        gbc.setState(0xa052, 0xb3d4, 0xc20, 0x9c7, 0xe5a6, 0xe75b, 0x1, 0x0);
        gbc.writeMem(0xa052, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb3d4);
        EXPECT(gbc.pc(), 0xa054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa052), 0xcb);
        EXPECT(gbc.readMem(0xa053), 0x2a);
        // CB 2A 0005
        gbc.setState(0xa8c5, 0x370e, 0xa010, 0xe882, 0xfdb2, 0xc36, 0x0, 0x0);
        gbc.writeMem(0xa8c5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x370e);
        EXPECT(gbc.pc(), 0xa8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c5), 0xcb);
        EXPECT(gbc.readMem(0xa8c6), 0x2a);
        // CB 2A 0006
        gbc.setState(0x63a6, 0x1fa, 0x8ef0, 0xb132, 0x6f38, 0x747a, 0x0, 0x1);
        gbc.writeMem(0x63a6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1fa);
        EXPECT(gbc.pc(), 0x63a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0007
        gbc.setState(0x771f, 0x45f8, 0x41f0, 0xa7e5, 0xb409, 0xb34, 0x1, 0x1);
        gbc.writeMem(0x771f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x45f8);
        EXPECT(gbc.pc(), 0x7721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0008
        gbc.setState(0x46f, 0xc660, 0x8fb0, 0xacca, 0xe9b3, 0x343b, 0x0, 0x1);
        gbc.writeMem(0x46f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc660);
        EXPECT(gbc.pc(), 0x471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0009
        gbc.setState(0x54d3, 0x60f9, 0x5dc0, 0xb833, 0xed46, 0x2e1b, 0x1, 0x1);
        gbc.writeMem(0x54d3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x60f9);
        EXPECT(gbc.pc(), 0x54d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 000A
        gbc.setState(0xd5f8, 0x6ec4, 0xe410, 0xa0ca, 0x1381, 0x2d36, 0x0, 0x1);
        gbc.writeMem(0xd5f8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6ec4);
        EXPECT(gbc.pc(), 0xd5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f8), 0xcb);
        EXPECT(gbc.readMem(0xd5f9), 0x2a);
        // CB 2A 000B
        gbc.setState(0x5567, 0x6cd1, 0xf300, 0xa5c, 0x5636, 0xb322, 0x0, 0x0);
        gbc.writeMem(0x5567, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6cd1);
        EXPECT(gbc.pc(), 0x5569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 000C
        gbc.setState(0x4490, 0xfe03, 0x4c50, 0xd6bc, 0x2f1d, 0xdcde, 0x1, 0x0);
        gbc.writeMem(0x4490, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0x4492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 000D
        gbc.setState(0xbf61, 0x10d5, 0x4b20, 0xdd70, 0xf1c8, 0xeba3, 0x1, 0x0);
        gbc.writeMem(0xbf61, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x10d5);
        EXPECT(gbc.pc(), 0xbf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf61), 0xcb);
        EXPECT(gbc.readMem(0xbf62), 0x2a);
        // CB 2A 000E
        gbc.setState(0xf81, 0x3e8f, 0xebe0, 0x92de, 0x7473, 0xee12, 0x0, 0x0);
        gbc.writeMem(0xf81, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3e8f);
        EXPECT(gbc.pc(), 0xf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 000F
        gbc.setState(0x464, 0xf4e7, 0xb220, 0x9e60, 0x2861, 0xe10a, 0x0, 0x1);
        gbc.writeMem(0x464, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf4e7);
        EXPECT(gbc.pc(), 0x466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0010
        gbc.setState(0x39b0, 0x9bf0, 0xf940, 0xaf8e, 0xc8a4, 0xba67, 0x0, 0x1);
        gbc.writeMem(0x39b0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9bf0);
        EXPECT(gbc.pc(), 0x39b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0011
        gbc.setState(0x1c07, 0x481c, 0xbd00, 0xf423, 0xae49, 0x6157, 0x1, 0x0);
        gbc.writeMem(0x1c07, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x481c);
        EXPECT(gbc.pc(), 0x1c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0012
        gbc.setState(0xeb08, 0x4330, 0x1ee0, 0x2ef5, 0xde64, 0x4f1b, 0x1, 0x0);
        gbc.writeMem(0xeb08, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4330);
        EXPECT(gbc.pc(), 0xeb0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb08), 0xcb);
        EXPECT(gbc.readMem(0xeb09), 0x2a);
        // CB 2A 0013
        gbc.setState(0xe114, 0xd3a6, 0x1f50, 0x4647, 0x9b8, 0xfc13, 0x0, 0x1);
        gbc.writeMem(0xe114, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd3a6);
        EXPECT(gbc.pc(), 0xe116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe114), 0xcb);
        EXPECT(gbc.readMem(0xe115), 0x2a);
        // CB 2A 0014
        gbc.setState(0x8875, 0xc719, 0x6400, 0x3404, 0xd415, 0xf34, 0x1, 0x0);
        gbc.writeMem(0x8875, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc719);
        EXPECT(gbc.pc(), 0x8877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8875), 0xcb);
        EXPECT(gbc.readMem(0x8876), 0x2a);
        // CB 2A 0015
        gbc.setState(0x265d, 0xc68f, 0x2a30, 0xad81, 0xf273, 0x4c12, 0x0, 0x1);
        gbc.writeMem(0x265d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc68f);
        EXPECT(gbc.pc(), 0x265f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0016
        gbc.setState(0x6aed, 0x64f5, 0x3b00, 0xee95, 0x8a42, 0xb747, 0x0, 0x1);
        gbc.writeMem(0x6aed, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x64f5);
        EXPECT(gbc.pc(), 0x6aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0017
        gbc.setState(0x103b, 0x1a26, 0xc40, 0xeee0, 0xf12c, 0x1a06, 0x1, 0x0);
        gbc.writeMem(0x103b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1a26);
        EXPECT(gbc.pc(), 0x103d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0018
        gbc.setState(0x9671, 0xb888, 0xd6d0, 0x3d17, 0xf0e8, 0x85b7, 0x1, 0x0);
        gbc.writeMem(0x9671, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb888);
        EXPECT(gbc.pc(), 0x9673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9671), 0xcb);
        EXPECT(gbc.readMem(0x9672), 0x2a);
        // CB 2A 001A
        gbc.setState(0x75ed, 0x898, 0x1900, 0x818, 0x9e67, 0x5e5b, 0x1, 0x0);
        gbc.writeMem(0x75ed, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x898);
        EXPECT(gbc.pc(), 0x75ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 001B
        gbc.setState(0x4f4d, 0x24fe, 0xb860, 0x2f76, 0x9075, 0x20ad, 0x1, 0x0);
        gbc.writeMem(0x4f4d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x24fe);
        EXPECT(gbc.pc(), 0x4f4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 001C
        gbc.setState(0x29d2, 0xed1d, 0x32f0, 0xb006, 0x64ee, 0xeea9, 0x1, 0x0);
        gbc.writeMem(0x29d2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xed1d);
        EXPECT(gbc.pc(), 0x29d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 001D
        gbc.setState(0xb706, 0x4388, 0x5e30, 0x2306, 0xacc2, 0x6d12, 0x0, 0x0);
        gbc.writeMem(0xb706, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4388);
        EXPECT(gbc.pc(), 0xb708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb706), 0xcb);
        EXPECT(gbc.readMem(0xb707), 0x2a);
        // CB 2A 001E
        gbc.setState(0xcbad, 0x3a26, 0xb1b0, 0xa0a2, 0xc1b4, 0xb7ce, 0x0, 0x0);
        gbc.writeMem(0xcbad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3a26);
        EXPECT(gbc.pc(), 0xcbaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbad), 0xcb);
        EXPECT(gbc.readMem(0xcbae), 0x2a);
        // CB 2A 001F
        gbc.setState(0x8e07, 0xb65f, 0xb420, 0x8a7c, 0xfaab, 0x51b5, 0x1, 0x0);
        gbc.writeMem(0x8e07, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb65f);
        EXPECT(gbc.pc(), 0x8e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e07), 0xcb);
        EXPECT(gbc.readMem(0x8e08), 0x2a);
        // CB 2A 0020
        gbc.setState(0x80ca, 0xf0e5, 0x2530, 0x6292, 0x1ec7, 0xae59, 0x0, 0x1);
        gbc.writeMem(0x80ca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf0e5);
        EXPECT(gbc.pc(), 0x80cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ca), 0xcb);
        EXPECT(gbc.readMem(0x80cb), 0x2a);
        // CB 2A 0021
        gbc.setState(0xbf7d, 0xd225, 0xa050, 0x1236, 0x710e, 0xb32a, 0x1, 0x0);
        gbc.writeMem(0xbf7d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd225);
        EXPECT(gbc.pc(), 0xbf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf7d), 0xcb);
        EXPECT(gbc.readMem(0xbf7e), 0x2a);
        // CB 2A 0022
        gbc.setState(0x1eda, 0x160b, 0x4220, 0x384e, 0x1088, 0x7be0, 0x0, 0x1);
        gbc.writeMem(0x1eda, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x160b);
        EXPECT(gbc.pc(), 0x1edc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0023
        gbc.setState(0x22eb, 0xf5c4, 0xe720, 0x4244, 0xf968, 0x9c42, 0x0, 0x0);
        gbc.writeMem(0x22eb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf5c4);
        EXPECT(gbc.pc(), 0x22ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0024
        gbc.setState(0xa847, 0x5588, 0x6980, 0x9df5, 0xa70c, 0x8b5e, 0x1, 0x0);
        gbc.writeMem(0xa847, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5588);
        EXPECT(gbc.pc(), 0xa849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa847), 0xcb);
        EXPECT(gbc.readMem(0xa848), 0x2a);
        // CB 2A 0025
        gbc.setState(0xa364, 0xb95d, 0x3960, 0xdd9d, 0xc215, 0x8fe6, 0x0, 0x1);
        gbc.writeMem(0xa364, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb95d);
        EXPECT(gbc.pc(), 0xa366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa364), 0xcb);
        EXPECT(gbc.readMem(0xa365), 0x2a);
        // CB 2A 0026
        gbc.setState(0x67f1, 0x507b, 0xd220, 0x9e92, 0x72d9, 0x1b64, 0x0, 0x0);
        gbc.writeMem(0x67f1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x507b);
        EXPECT(gbc.pc(), 0x67f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0028
        gbc.setState(0x2981, 0x9bf9, 0xbf90, 0x9210, 0xb8f6, 0x23ec, 0x0, 0x1);
        gbc.writeMem(0x2981, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9bf9);
        EXPECT(gbc.pc(), 0x2983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0029
        gbc.setState(0xcc5b, 0x5d4b, 0xb560, 0x5ec8, 0xa287, 0x852d, 0x1, 0x1);
        gbc.writeMem(0xcc5b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5d4b);
        EXPECT(gbc.pc(), 0xcc5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5b), 0xcb);
        EXPECT(gbc.readMem(0xcc5c), 0x2a);
        // CB 2A 002A
        gbc.setState(0xdf3e, 0x416, 0x7490, 0x43b2, 0x8d, 0xefdd, 0x0, 0x0);
        gbc.writeMem(0xdf3e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x416);
        EXPECT(gbc.pc(), 0xdf40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf3e), 0xcb);
        EXPECT(gbc.readMem(0xdf3f), 0x2a);
        // CB 2A 002B
        gbc.setState(0x6586, 0xda14, 0x7f30, 0xa8f0, 0x4133, 0xc3e6, 0x0, 0x1);
        gbc.writeMem(0x6586, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xda14);
        EXPECT(gbc.pc(), 0x6588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 002C
        gbc.setState(0x1809, 0xa86d, 0x930, 0x2579, 0x2730, 0x55cd, 0x0, 0x1);
        gbc.writeMem(0x1809, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa86d);
        EXPECT(gbc.pc(), 0x180b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 002D
        gbc.setState(0xe052, 0x354c, 0x7c0, 0x422e, 0xde9, 0xcdd3, 0x1, 0x0);
        gbc.writeMem(0xe052, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x354c);
        EXPECT(gbc.pc(), 0xe054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe052), 0xcb);
        EXPECT(gbc.readMem(0xe053), 0x2a);
        // CB 2A 002E
        gbc.setState(0xdda4, 0x4d98, 0x4b60, 0xc338, 0x416c, 0x5761, 0x0, 0x0);
        gbc.writeMem(0xdda4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4d98);
        EXPECT(gbc.pc(), 0xdda6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda4), 0xcb);
        EXPECT(gbc.readMem(0xdda5), 0x2a);
        // CB 2A 002F
        gbc.setState(0x5bd2, 0x9860, 0xd510, 0x4138, 0x540b, 0xbc5c, 0x1, 0x0);
        gbc.writeMem(0x5bd2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9860);
        EXPECT(gbc.pc(), 0x5bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0030
        gbc.setState(0xcca, 0x3035, 0x3d0, 0x8395, 0xd549, 0xe765, 0x0, 0x0);
        gbc.writeMem(0xcca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3035);
        EXPECT(gbc.pc(), 0xccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0031
        gbc.setState(0x170a, 0x246, 0x7ca0, 0xf807, 0x2a29, 0xe4d8, 0x0, 0x1);
        gbc.writeMem(0x170a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x246);
        EXPECT(gbc.pc(), 0x170c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0032
        gbc.setState(0x1e37, 0xe3cd, 0xec10, 0x5bdd, 0x59fc, 0x9b0, 0x1, 0x0);
        gbc.writeMem(0x1e37, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe3cd);
        EXPECT(gbc.pc(), 0x1e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0033
        gbc.setState(0x8ac4, 0xaae1, 0x4740, 0xbb0b, 0x5a90, 0x7b4d, 0x1, 0x0);
        gbc.writeMem(0x8ac4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xaae1);
        EXPECT(gbc.pc(), 0x8ac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac4), 0xcb);
        EXPECT(gbc.readMem(0x8ac5), 0x2a);
        // CB 2A 0034
        gbc.setState(0x3ec6, 0xd766, 0xfcd0, 0x6f3c, 0xee02, 0x4a20, 0x0, 0x1);
        gbc.writeMem(0x3ec6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd766);
        EXPECT(gbc.pc(), 0x3ec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0036
        gbc.setState(0x684e, 0x2a3e, 0x2970, 0x74a8, 0xc899, 0x45fb, 0x0, 0x1);
        gbc.writeMem(0x684e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2a3e);
        EXPECT(gbc.pc(), 0x6850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0037
        gbc.setState(0xba83, 0x7b7e, 0xd140, 0x52ad, 0xce57, 0x84a4, 0x0, 0x1);
        gbc.writeMem(0xba83, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7b7e);
        EXPECT(gbc.pc(), 0xba85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba83), 0xcb);
        EXPECT(gbc.readMem(0xba84), 0x2a);
        // CB 2A 0038
        gbc.setState(0x7963, 0xb3e8, 0xbc30, 0x1aac, 0x6320, 0x92f5, 0x1, 0x1);
        gbc.writeMem(0x7963, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb3e8);
        EXPECT(gbc.pc(), 0x7965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0039
        gbc.setState(0x4986, 0x862e, 0x54c0, 0x80e3, 0xe16d, 0x789, 0x0, 0x0);
        gbc.writeMem(0x4986, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x862e);
        EXPECT(gbc.pc(), 0x4988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 003A
        gbc.setState(0x177f, 0x9f9b, 0xd1d0, 0xd341, 0x3ce5, 0x7515, 0x1, 0x1);
        gbc.writeMem(0x177f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9f9b);
        EXPECT(gbc.pc(), 0x1781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 003B
        gbc.setState(0x1ff1, 0xdaa0, 0x5490, 0xaac9, 0xa817, 0xfec3, 0x0, 0x1);
        gbc.writeMem(0x1ff1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdaa0);
        EXPECT(gbc.pc(), 0x1ff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 003C
        gbc.setState(0x6fea, 0x3487, 0xaec0, 0xbb57, 0xc38d, 0x9caf, 0x1, 0x1);
        gbc.writeMem(0x6fea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3487);
        EXPECT(gbc.pc(), 0x6fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 003D
        gbc.setState(0xdbb7, 0x492a, 0x93c0, 0x874e, 0xee8b, 0x7a6, 0x0, 0x1);
        gbc.writeMem(0xdbb7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x492a);
        EXPECT(gbc.pc(), 0xdbb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb7), 0xcb);
        EXPECT(gbc.readMem(0xdbb8), 0x2a);
        // CB 2A 003E
        gbc.setState(0xd5e8, 0xe66b, 0x8e90, 0x371c, 0x7ae1, 0xaf3, 0x1, 0x1);
        gbc.writeMem(0xd5e8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe66b);
        EXPECT(gbc.pc(), 0xd5ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e8), 0xcb);
        EXPECT(gbc.readMem(0xd5e9), 0x2a);
        // CB 2A 003F
        gbc.setState(0xcf79, 0xef78, 0xa7b0, 0xfa0c, 0x219d, 0x8346, 0x1, 0x0);
        gbc.writeMem(0xcf79, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xef78);
        EXPECT(gbc.pc(), 0xcf7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf79), 0xcb);
        EXPECT(gbc.readMem(0xcf7a), 0x2a);
        // CB 2A 0040
        gbc.setState(0xba09, 0xd7df, 0xb0b0, 0x74d3, 0xa617, 0x7aac, 0x1, 0x0);
        gbc.writeMem(0xba09, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd7df);
        EXPECT(gbc.pc(), 0xba0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba09), 0xcb);
        EXPECT(gbc.readMem(0xba0a), 0x2a);
        // CB 2A 0041
        gbc.setState(0x3821, 0xb41c, 0xa330, 0x7df0, 0x2c90, 0xd0d9, 0x1, 0x0);
        gbc.writeMem(0x3821, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb41c);
        EXPECT(gbc.pc(), 0x3823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0042
        gbc.setState(0xe09c, 0x2f95, 0x1b10, 0x3eb9, 0xf1c5, 0xdf93, 0x0, 0x0);
        gbc.writeMem(0xe09c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2f95);
        EXPECT(gbc.pc(), 0xe09e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe09c), 0xcb);
        EXPECT(gbc.readMem(0xe09d), 0x2a);
        // CB 2A 0043
        gbc.setState(0x3108, 0xe311, 0x60, 0x7785, 0xceed, 0x2bf9, 0x0, 0x0);
        gbc.writeMem(0x3108, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe311);
        EXPECT(gbc.pc(), 0x310a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0044
        gbc.setState(0x78db, 0x49d1, 0xa6a0, 0x5d09, 0x195e, 0x78c1, 0x0, 0x0);
        gbc.writeMem(0x78db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x49d1);
        EXPECT(gbc.pc(), 0x78dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0045
        gbc.setState(0x24e6, 0xa60f, 0x5c60, 0xe0a1, 0xd987, 0xbfeb, 0x0, 0x1);
        gbc.writeMem(0x24e6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa60f);
        EXPECT(gbc.pc(), 0x24e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0046
        gbc.setState(0x8e3b, 0x3ad6, 0x99c0, 0xd70f, 0xb25d, 0x2eda, 0x0, 0x1);
        gbc.writeMem(0x8e3b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3ad6);
        EXPECT(gbc.pc(), 0x8e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3b), 0xcb);
        EXPECT(gbc.readMem(0x8e3c), 0x2a);
        // CB 2A 0047
        gbc.setState(0xec2a, 0xe6f, 0x1ee0, 0xa316, 0x8954, 0x1b03, 0x1, 0x0);
        gbc.writeMem(0xec2a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xe6f);
        EXPECT(gbc.pc(), 0xec2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec2a), 0xcb);
        EXPECT(gbc.readMem(0xec2b), 0x2a);
        // CB 2A 0048
        gbc.setState(0xc94c, 0xeaa, 0xcf80, 0x6223, 0x9fb9, 0xda7d, 0x0, 0x1);
        gbc.writeMem(0xc94c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xeaa);
        EXPECT(gbc.pc(), 0xc94e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc94c), 0xcb);
        EXPECT(gbc.readMem(0xc94d), 0x2a);
        // CB 2A 0049
        gbc.setState(0xb73d, 0x19f8, 0xaa30, 0x9742, 0x8823, 0xc3ce, 0x1, 0x1);
        gbc.writeMem(0xb73d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x19f8);
        EXPECT(gbc.pc(), 0xb73f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb73d), 0xcb);
        EXPECT(gbc.readMem(0xb73e), 0x2a);
        // CB 2A 004A
        gbc.setState(0xc7df, 0xf746, 0x7c10, 0xc40f, 0x6b0a, 0x101a, 0x1, 0x1);
        gbc.writeMem(0xc7df, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf746);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7df), 0xcb);
        EXPECT(gbc.readMem(0xc7e0), 0x2a);
        // CB 2A 004B
        gbc.setState(0x17cc, 0xbfba, 0x3210, 0xe7b9, 0x34ff, 0x906c, 0x1, 0x0);
        gbc.writeMem(0x17cc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbfba);
        EXPECT(gbc.pc(), 0x17ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 004C
        gbc.setState(0x1c87, 0xdab, 0x4e50, 0x9e2b, 0x3423, 0x5fe5, 0x1, 0x1);
        gbc.writeMem(0x1c87, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0x1c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 004D
        gbc.setState(0x6bc3, 0xd643, 0x5430, 0xc00b, 0x5a29, 0x5999, 0x1, 0x1);
        gbc.writeMem(0x6bc3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd643);
        EXPECT(gbc.pc(), 0x6bc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 004E
        gbc.setState(0x3e36, 0xf3aa, 0xd140, 0xff7d, 0xb46e, 0x32c6, 0x0, 0x1);
        gbc.writeMem(0x3e36, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf3aa);
        EXPECT(gbc.pc(), 0x3e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 004F
        gbc.setState(0x1a75, 0x8a56, 0xba20, 0x3933, 0x18e2, 0x4232, 0x0, 0x0);
        gbc.writeMem(0x1a75, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8a56);
        EXPECT(gbc.pc(), 0x1a77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0050
        gbc.setState(0x8f4d, 0xdeed, 0x3c10, 0x5d91, 0x7ac4, 0xcfba, 0x1, 0x0);
        gbc.writeMem(0x8f4d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xdeed);
        EXPECT(gbc.pc(), 0x8f4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f4d), 0xcb);
        EXPECT(gbc.readMem(0x8f4e), 0x2a);
        // CB 2A 0051
        gbc.setState(0xc48b, 0xde5e, 0x5640, 0x4c34, 0x714a, 0x5310, 0x0, 0x1);
        gbc.writeMem(0xc48b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xde5e);
        EXPECT(gbc.pc(), 0xc48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48b), 0xcb);
        EXPECT(gbc.readMem(0xc48c), 0x2a);
        // CB 2A 0052
        gbc.setState(0x5fb0, 0xa379, 0x4850, 0x272d, 0x4eec, 0x2492, 0x0, 0x0);
        gbc.writeMem(0x5fb0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0x5fb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0053
        gbc.setState(0x54cf, 0x7f1f, 0x1180, 0x3e59, 0x579b, 0x458b, 0x0, 0x1);
        gbc.writeMem(0x54cf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7f1f);
        EXPECT(gbc.pc(), 0x54d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0054
        gbc.setState(0x1c88, 0x2ca5, 0x9ee0, 0x277e, 0x55ad, 0x3d2a, 0x0, 0x1);
        gbc.writeMem(0x1c88, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2ca5);
        EXPECT(gbc.pc(), 0x1c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0055
        gbc.setState(0x1d88, 0x5a1a, 0xc880, 0x6367, 0x6ca6, 0x51bc, 0x1, 0x0);
        gbc.writeMem(0x1d88, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5a1a);
        EXPECT(gbc.pc(), 0x1d8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0057
        gbc.setState(0xcfe8, 0xa223, 0x39b0, 0x9bb4, 0xe987, 0x12b7, 0x1, 0x0);
        gbc.writeMem(0xcfe8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa223);
        EXPECT(gbc.pc(), 0xcfea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe8), 0xcb);
        EXPECT(gbc.readMem(0xcfe9), 0x2a);
        // CB 2A 0058
        gbc.setState(0x3a29, 0x1a2a, 0x9920, 0x9ba7, 0x6742, 0x1436, 0x0, 0x0);
        gbc.writeMem(0x3a29, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1a2a);
        EXPECT(gbc.pc(), 0x3a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0059
        gbc.setState(0x5e, 0xa70d, 0xfd30, 0xfbb7, 0x9ce6, 0xe264, 0x1, 0x0);
        gbc.writeMem(0x5e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa70d);
        EXPECT(gbc.pc(), 0x60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 005A
        gbc.setState(0xbd57, 0x7531, 0x1a50, 0xcefd, 0x649b, 0xbbce, 0x0, 0x0);
        gbc.writeMem(0xbd57, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7531);
        EXPECT(gbc.pc(), 0xbd59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd57), 0xcb);
        EXPECT(gbc.readMem(0xbd58), 0x2a);
        // CB 2A 005B
        gbc.setState(0x8c32, 0x8e55, 0x8420, 0x3fba, 0x6baa, 0xd655, 0x0, 0x1);
        gbc.writeMem(0x8c32, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8e55);
        EXPECT(gbc.pc(), 0x8c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c32), 0xcb);
        EXPECT(gbc.readMem(0x8c33), 0x2a);
        // CB 2A 005C
        gbc.setState(0x12a1, 0x312e, 0x7af0, 0x9, 0xcbdf, 0x7f6a, 0x1, 0x0);
        gbc.writeMem(0x12a1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x312e);
        EXPECT(gbc.pc(), 0x12a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 005D
        gbc.setState(0x2e01, 0xff93, 0x6240, 0x86cd, 0x75a2, 0x51bf, 0x0, 0x0);
        gbc.writeMem(0x2e01, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xff93);
        EXPECT(gbc.pc(), 0x2e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 005E
        gbc.setState(0x85b7, 0x2701, 0x1330, 0xcf85, 0xfeaa, 0x7522, 0x0, 0x0);
        gbc.writeMem(0x85b7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2701);
        EXPECT(gbc.pc(), 0x85b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b7), 0xcb);
        EXPECT(gbc.readMem(0x85b8), 0x2a);
        // CB 2A 005F
        gbc.setState(0xb6c, 0xc1f2, 0xa0d0, 0xe046, 0x252b, 0x3aea, 0x0, 0x0);
        gbc.writeMem(0xb6c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc1f2);
        EXPECT(gbc.pc(), 0xb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0061
        gbc.setState(0x4d9c, 0x3618, 0x3d20, 0xcc6, 0x3014, 0xc4a8, 0x0, 0x1);
        gbc.writeMem(0x4d9c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3618);
        EXPECT(gbc.pc(), 0x4d9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0062
        gbc.setState(0xccaa, 0x75e, 0xa830, 0x9e2a, 0xca1e, 0x548a, 0x0, 0x0);
        gbc.writeMem(0xccaa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x75e);
        EXPECT(gbc.pc(), 0xccac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccaa), 0xcb);
        EXPECT(gbc.readMem(0xccab), 0x2a);
        // CB 2A 0063
        gbc.setState(0x1ff9, 0x9545, 0x1320, 0x8b66, 0xd33d, 0xd45e, 0x1, 0x0);
        gbc.writeMem(0x1ff9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9545);
        EXPECT(gbc.pc(), 0x1ffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0064
        gbc.setState(0xc9b1, 0x1716, 0x6810, 0x79dc, 0x6404, 0xaf98, 0x0, 0x1);
        gbc.writeMem(0xc9b1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1716);
        EXPECT(gbc.pc(), 0xc9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b1), 0xcb);
        EXPECT(gbc.readMem(0xc9b2), 0x2a);
        // CB 2A 0065
        gbc.setState(0x2858, 0xd60, 0x36b0, 0x3887, 0x44d1, 0x6c72, 0x0, 0x0);
        gbc.writeMem(0x2858, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd60);
        EXPECT(gbc.pc(), 0x285a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0066
        gbc.setState(0xb1b, 0xb378, 0x2600, 0xb618, 0x363a, 0x94ca, 0x1, 0x0);
        gbc.writeMem(0xb1b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb378);
        EXPECT(gbc.pc(), 0xb1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0067
        gbc.setState(0x70b3, 0x8659, 0x70, 0x936c, 0xd2f7, 0xf74d, 0x0, 0x0);
        gbc.writeMem(0x70b3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8659);
        EXPECT(gbc.pc(), 0x70b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0068
        gbc.setState(0x5ad, 0x672f, 0x16d0, 0x8efa, 0x9abe, 0xf555, 0x0, 0x1);
        gbc.writeMem(0x5ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x672f);
        EXPECT(gbc.pc(), 0x5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0069
        gbc.setState(0xdfc5, 0xcba6, 0xd5b0, 0xf50e, 0x8c8c, 0x69b1, 0x0, 0x1);
        gbc.writeMem(0xdfc5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcba6);
        EXPECT(gbc.pc(), 0xdfc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc5), 0xcb);
        EXPECT(gbc.readMem(0xdfc6), 0x2a);
        // CB 2A 006B
        gbc.setState(0xa3e5, 0x8068, 0x45d0, 0x7266, 0xf4ee, 0x53f9, 0x1, 0x1);
        gbc.writeMem(0xa3e5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8068);
        EXPECT(gbc.pc(), 0xa3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e5), 0xcb);
        EXPECT(gbc.readMem(0xa3e6), 0x2a);
        // CB 2A 006C
        gbc.setState(0x808c, 0x96ac, 0x6e90, 0x5346, 0xe317, 0x7982, 0x0, 0x0);
        gbc.writeMem(0x808c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x96ac);
        EXPECT(gbc.pc(), 0x808e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808c), 0xcb);
        EXPECT(gbc.readMem(0x808d), 0x2a);
        // CB 2A 006D
        gbc.setState(0xcc73, 0xe3db, 0x8590, 0x18ef, 0x414d, 0x417, 0x0, 0x0);
        gbc.writeMem(0xcc73, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe3db);
        EXPECT(gbc.pc(), 0xcc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc73), 0xcb);
        EXPECT(gbc.readMem(0xcc74), 0x2a);
        // CB 2A 006E
        gbc.setState(0x4638, 0x1127, 0xdeb0, 0xd554, 0xd1eb, 0x6061, 0x1, 0x1);
        gbc.writeMem(0x4638, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1127);
        EXPECT(gbc.pc(), 0x463a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0070
        gbc.setState(0xc802, 0xdff5, 0xab60, 0xb3aa, 0x661c, 0x92c1, 0x0, 0x1);
        gbc.writeMem(0xc802, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdff5);
        EXPECT(gbc.pc(), 0xc804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc802), 0xcb);
        EXPECT(gbc.readMem(0xc803), 0x2a);
        // CB 2A 0071
        gbc.setState(0x4fc9, 0x1220, 0x4830, 0x403d, 0x1afc, 0x5ac1, 0x1, 0x1);
        gbc.writeMem(0x4fc9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1220);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0072
        gbc.setState(0x859e, 0xa7e9, 0x4a80, 0x8a2b, 0x7911, 0xcec8, 0x1, 0x0);
        gbc.writeMem(0x859e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa7e9);
        EXPECT(gbc.pc(), 0x85a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x859e), 0xcb);
        EXPECT(gbc.readMem(0x859f), 0x2a);
        // CB 2A 0073
        gbc.setState(0x2d58, 0xcc7b, 0xfa60, 0x187b, 0xa668, 0x23a4, 0x0, 0x0);
        gbc.writeMem(0x2d58, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcc7b);
        EXPECT(gbc.pc(), 0x2d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0074
        gbc.setState(0x7990, 0xccc7, 0x7e40, 0xf579, 0xbd93, 0xe4c7, 0x0, 0x0);
        gbc.writeMem(0x7990, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xccc7);
        EXPECT(gbc.pc(), 0x7992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0075
        gbc.setState(0xa3af, 0x8f3d, 0x28f0, 0x2b6, 0x88dd, 0x23b5, 0x1, 0x0);
        gbc.writeMem(0xa3af, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8f3d);
        EXPECT(gbc.pc(), 0xa3b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3af), 0xcb);
        EXPECT(gbc.readMem(0xa3b0), 0x2a);
        // CB 2A 0076
        gbc.setState(0x6171, 0x4b5, 0x82e0, 0xaa74, 0x63e8, 0x1777, 0x0, 0x1);
        gbc.writeMem(0x6171, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4b5);
        EXPECT(gbc.pc(), 0x6173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0077
        gbc.setState(0x713a, 0xa7ed, 0x8030, 0x2d7b, 0xd376, 0x2588, 0x0, 0x0);
        gbc.writeMem(0x713a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa7ed);
        EXPECT(gbc.pc(), 0x713c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0078
        gbc.setState(0xadd4, 0xaa0e, 0x8940, 0xdc27, 0x487a, 0x3ecc, 0x0, 0x1);
        gbc.writeMem(0xadd4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xaa0e);
        EXPECT(gbc.pc(), 0xadd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd4), 0xcb);
        EXPECT(gbc.readMem(0xadd5), 0x2a);
        // CB 2A 0079
        gbc.setState(0x3687, 0xfb4a, 0x8dd0, 0xd4e7, 0x11f7, 0x8e4c, 0x1, 0x1);
        gbc.writeMem(0x3687, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfb4a);
        EXPECT(gbc.pc(), 0x3689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 007A
        gbc.setState(0x4cfc, 0x1cf3, 0x23f0, 0xa489, 0x4073, 0xa0b6, 0x1, 0x1);
        gbc.writeMem(0x4cfc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1cf3);
        EXPECT(gbc.pc(), 0x4cfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 007B
        gbc.setState(0x8b3d, 0xa8eb, 0xdcd0, 0x7c30, 0x68d5, 0x41e6, 0x0, 0x1);
        gbc.writeMem(0x8b3d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa8eb);
        EXPECT(gbc.pc(), 0x8b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3d), 0xcb);
        EXPECT(gbc.readMem(0x8b3e), 0x2a);
        // CB 2A 007C
        gbc.setState(0x64ba, 0x62e, 0xbbd0, 0x26aa, 0xd202, 0xf68, 0x0, 0x1);
        gbc.writeMem(0x64ba, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x62e);
        EXPECT(gbc.pc(), 0x64bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 007D
        gbc.setState(0x3c5a, 0x6b8e, 0x1940, 0x8e78, 0x6076, 0xe0f5, 0x0, 0x1);
        gbc.writeMem(0x3c5a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6b8e);
        EXPECT(gbc.pc(), 0x3c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 007E
        gbc.setState(0xce87, 0x596, 0x9990, 0x7e1f, 0xff46, 0xcd20, 0x1, 0x0);
        gbc.writeMem(0xce87, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x596);
        EXPECT(gbc.pc(), 0xce89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce87), 0xcb);
        EXPECT(gbc.readMem(0xce88), 0x2a);
        // CB 2A 007F
        gbc.setState(0x137d, 0x6287, 0x1840, 0x6b60, 0x92bb, 0xb889, 0x1, 0x1);
        gbc.writeMem(0x137d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6287);
        EXPECT(gbc.pc(), 0x137f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0080
        gbc.setState(0xdcef, 0xe192, 0xbb60, 0x3c18, 0xd24d, 0x3269, 0x0, 0x1);
        gbc.writeMem(0xdcef, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe192);
        EXPECT(gbc.pc(), 0xdcf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcef), 0xcb);
        EXPECT(gbc.readMem(0xdcf0), 0x2a);
        // CB 2A 0081
        gbc.setState(0xcc6f, 0x80f0, 0xcc60, 0xb0f8, 0xd206, 0x157c, 0x1, 0x1);
        gbc.writeMem(0xcc6f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x80f0);
        EXPECT(gbc.pc(), 0xcc71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc6f), 0xcb);
        EXPECT(gbc.readMem(0xcc70), 0x2a);
        // CB 2A 0082
        gbc.setState(0x38cc, 0x5615, 0xdf10, 0xb38c, 0xcc74, 0x7f51, 0x1, 0x0);
        gbc.writeMem(0x38cc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5615);
        EXPECT(gbc.pc(), 0x38ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0083
        gbc.setState(0x99f3, 0xc2e8, 0x65d0, 0x462e, 0x3f54, 0xb1a1, 0x0, 0x0);
        gbc.writeMem(0x99f3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc2e8);
        EXPECT(gbc.pc(), 0x99f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99f3), 0xcb);
        EXPECT(gbc.readMem(0x99f4), 0x2a);
        // CB 2A 0084
        gbc.setState(0xed0f, 0x7cc0, 0x5f10, 0x9335, 0x3486, 0x5059, 0x0, 0x1);
        gbc.writeMem(0xed0f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7cc0);
        EXPECT(gbc.pc(), 0xed11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0f), 0xcb);
        EXPECT(gbc.readMem(0xed10), 0x2a);
        // CB 2A 0085
        gbc.setState(0xcdc4, 0x36af, 0x65b0, 0x2cd6, 0x38cf, 0x939b, 0x1, 0x0);
        gbc.writeMem(0xcdc4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x36af);
        EXPECT(gbc.pc(), 0xcdc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc4), 0xcb);
        EXPECT(gbc.readMem(0xcdc5), 0x2a);
        // CB 2A 0086
        gbc.setState(0x71d2, 0x586f, 0xd640, 0x4adb, 0x8139, 0xf4c, 0x1, 0x1);
        gbc.writeMem(0x71d2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x586f);
        EXPECT(gbc.pc(), 0x71d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0087
        gbc.setState(0x74b3, 0x17e1, 0x3a80, 0x88d6, 0x6866, 0x7bd, 0x0, 0x1);
        gbc.writeMem(0x74b3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x17e1);
        EXPECT(gbc.pc(), 0x74b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0088
        gbc.setState(0x86d5, 0x2a55, 0xf9a0, 0x8320, 0x2a2c, 0x5d63, 0x1, 0x1);
        gbc.writeMem(0x86d5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2a55);
        EXPECT(gbc.pc(), 0x86d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d5), 0xcb);
        EXPECT(gbc.readMem(0x86d6), 0x2a);
        // CB 2A 0089
        gbc.setState(0xc5d9, 0xcf0c, 0xfc10, 0xb232, 0xef98, 0xffe3, 0x1, 0x1);
        gbc.writeMem(0xc5d9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xcf0c);
        EXPECT(gbc.pc(), 0xc5db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d9), 0xcb);
        EXPECT(gbc.readMem(0xc5da), 0x2a);
        // CB 2A 008A
        gbc.setState(0xbe34, 0x1f6f, 0x9610, 0x132a, 0x4ea3, 0xcede, 0x0, 0x0);
        gbc.writeMem(0xbe34, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1f6f);
        EXPECT(gbc.pc(), 0xbe36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe34), 0xcb);
        EXPECT(gbc.readMem(0xbe35), 0x2a);
        // CB 2A 008B
        gbc.setState(0xe541, 0x20bb, 0x58d0, 0xfd34, 0xf610, 0xb3a8, 0x1, 0x0);
        gbc.writeMem(0xe541, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x20bb);
        EXPECT(gbc.pc(), 0xe543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe541), 0xcb);
        EXPECT(gbc.readMem(0xe542), 0x2a);
        // CB 2A 008C
        gbc.setState(0x87b6, 0xfb6, 0x870, 0x6e71, 0x38a2, 0x482e, 0x1, 0x0);
        gbc.writeMem(0x87b6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfb6);
        EXPECT(gbc.pc(), 0x87b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b6), 0xcb);
        EXPECT(gbc.readMem(0x87b7), 0x2a);
        // CB 2A 008D
        gbc.setState(0x6389, 0x6267, 0xfa80, 0x76f3, 0xaed7, 0x25d, 0x1, 0x1);
        gbc.writeMem(0x6389, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6267);
        EXPECT(gbc.pc(), 0x638b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 008E
        gbc.setState(0x97e0, 0x43bf, 0xc560, 0x6942, 0x3815, 0xa481, 0x1, 0x1);
        gbc.writeMem(0x97e0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x43bf);
        EXPECT(gbc.pc(), 0x97e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e0), 0xcb);
        EXPECT(gbc.readMem(0x97e1), 0x2a);
        // CB 2A 008F
        gbc.setState(0x3d17, 0xded, 0x6480, 0xd9bc, 0x3347, 0x371a, 0x1, 0x1);
        gbc.writeMem(0x3d17, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xded);
        EXPECT(gbc.pc(), 0x3d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0090
        gbc.setState(0xd771, 0x37f5, 0x1e90, 0xafe6, 0x1fe6, 0xe5ec, 0x0, 0x0);
        gbc.writeMem(0xd771, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x37f5);
        EXPECT(gbc.pc(), 0xd773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd771), 0xcb);
        EXPECT(gbc.readMem(0xd772), 0x2a);
        // CB 2A 0091
        gbc.setState(0xb429, 0x27bd, 0x7710, 0x8305, 0x9f58, 0xd58f, 0x0, 0x1);
        gbc.writeMem(0xb429, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x27bd);
        EXPECT(gbc.pc(), 0xb42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb429), 0xcb);
        EXPECT(gbc.readMem(0xb42a), 0x2a);
        // CB 2A 0092
        gbc.setState(0xde09, 0xdbff, 0x8820, 0x5430, 0xb39b, 0x6601, 0x0, 0x1);
        gbc.writeMem(0xde09, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdbff);
        EXPECT(gbc.pc(), 0xde0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde09), 0xcb);
        EXPECT(gbc.readMem(0xde0a), 0x2a);
        // CB 2A 0093
        gbc.setState(0x1775, 0x874c, 0xa3e0, 0x5c30, 0xe861, 0x6cbb, 0x0, 0x1);
        gbc.writeMem(0x1775, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x874c);
        EXPECT(gbc.pc(), 0x1777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0094
        gbc.setState(0x7fcb, 0x470c, 0xf150, 0xecb7, 0xc454, 0x4f0e, 0x1, 0x1);
        gbc.writeMem(0x7fcb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x470c);
        EXPECT(gbc.pc(), 0x7fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0095
        gbc.setState(0x9337, 0x6533, 0xb000, 0xc89, 0x76c4, 0x91f4, 0x0, 0x0);
        gbc.writeMem(0x9337, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6533);
        EXPECT(gbc.pc(), 0x9339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9337), 0xcb);
        EXPECT(gbc.readMem(0x9338), 0x2a);
        // CB 2A 0096
        gbc.setState(0x20bc, 0xe006, 0x21b0, 0x9a2b, 0xb72a, 0x3506, 0x0, 0x1);
        gbc.writeMem(0x20bc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe006);
        EXPECT(gbc.pc(), 0x20be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0097
        gbc.setState(0xce5a, 0x437c, 0x6ce0, 0xdba6, 0xf93f, 0xe435, 0x0, 0x0);
        gbc.writeMem(0xce5a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x437c);
        EXPECT(gbc.pc(), 0xce5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce5a), 0xcb);
        EXPECT(gbc.readMem(0xce5b), 0x2a);
        // CB 2A 0098
        gbc.setState(0x9903, 0x76e0, 0xc030, 0xdf0c, 0x4c95, 0x651f, 0x0, 0x0);
        gbc.writeMem(0x9903, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x76e0);
        EXPECT(gbc.pc(), 0x9905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9903), 0xcb);
        EXPECT(gbc.readMem(0x9904), 0x2a);
        // CB 2A 0099
        gbc.setState(0x5d2d, 0x5bb3, 0x470, 0x8102, 0x94fb, 0x5af3, 0x1, 0x0);
        gbc.writeMem(0x5d2d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5bb3);
        EXPECT(gbc.pc(), 0x5d2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 009A
        gbc.setState(0x9d44, 0x93cc, 0x4a80, 0x6256, 0xde78, 0x21dd, 0x1, 0x0);
        gbc.writeMem(0x9d44, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x93cc);
        EXPECT(gbc.pc(), 0x9d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d44), 0xcb);
        EXPECT(gbc.readMem(0x9d45), 0x2a);
        // CB 2A 009C
        gbc.setState(0xb272, 0xaa6, 0xb810, 0xcc04, 0x6392, 0x126e, 0x0, 0x1);
        gbc.writeMem(0xb272, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xaa6);
        EXPECT(gbc.pc(), 0xb274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb272), 0xcb);
        EXPECT(gbc.readMem(0xb273), 0x2a);
        // CB 2A 009D
        gbc.setState(0x646e, 0x6511, 0x4e70, 0xb20f, 0x5821, 0x121b, 0x1, 0x0);
        gbc.writeMem(0x646e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6511);
        EXPECT(gbc.pc(), 0x6470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 009E
        gbc.setState(0x5b93, 0x7af4, 0x440, 0x3850, 0x5d25, 0xcfba, 0x0, 0x0);
        gbc.writeMem(0x5b93, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7af4);
        EXPECT(gbc.pc(), 0x5b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 009F
        gbc.setState(0x5d8f, 0xc605, 0xf190, 0xe779, 0x3996, 0xd6e7, 0x0, 0x1);
        gbc.writeMem(0x5d8f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc605);
        EXPECT(gbc.pc(), 0x5d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00A0
        gbc.setState(0x6fdd, 0x4a11, 0x81f0, 0x87a9, 0xdda7, 0x6a90, 0x1, 0x0);
        gbc.writeMem(0x6fdd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4a11);
        EXPECT(gbc.pc(), 0x6fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00A2
        gbc.setState(0x8263, 0x6bc2, 0x5800, 0x6620, 0x8af3, 0x62cc, 0x0, 0x1);
        gbc.writeMem(0x8263, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6bc2);
        EXPECT(gbc.pc(), 0x8265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8263), 0xcb);
        EXPECT(gbc.readMem(0x8264), 0x2a);
        // CB 2A 00A3
        gbc.setState(0x5cf9, 0x661, 0x7d0, 0xe31d, 0x7431, 0x6e14, 0x0, 0x1);
        gbc.writeMem(0x5cf9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x661);
        EXPECT(gbc.pc(), 0x5cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00A4
        gbc.setState(0x9414, 0xe095, 0x1060, 0xf1e5, 0x2c9c, 0x6da6, 0x1, 0x1);
        gbc.writeMem(0x9414, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe095);
        EXPECT(gbc.pc(), 0x9416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9414), 0xcb);
        EXPECT(gbc.readMem(0x9415), 0x2a);
        // CB 2A 00A5
        gbc.setState(0x8aea, 0x72b2, 0x9510, 0x4825, 0xda4e, 0x9513, 0x1, 0x1);
        gbc.writeMem(0x8aea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x72b2);
        EXPECT(gbc.pc(), 0x8aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aea), 0xcb);
        EXPECT(gbc.readMem(0x8aeb), 0x2a);
        // CB 2A 00A6
        gbc.setState(0xafce, 0xd5f6, 0xdda0, 0x6a07, 0x3158, 0xf818, 0x1, 0x1);
        gbc.writeMem(0xafce, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd5f6);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafce), 0xcb);
        EXPECT(gbc.readMem(0xafcf), 0x2a);
        // CB 2A 00A7
        gbc.setState(0x6478, 0x2c2e, 0x89b0, 0xd105, 0x8319, 0x6638, 0x0, 0x1);
        gbc.writeMem(0x6478, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2c2e);
        EXPECT(gbc.pc(), 0x647a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00A8
        gbc.setState(0x24eb, 0xd540, 0x60f0, 0x4e94, 0x2d88, 0x3d6a, 0x1, 0x1);
        gbc.writeMem(0x24eb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd540);
        EXPECT(gbc.pc(), 0x24ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00A9
        gbc.setState(0x4574, 0x8a7f, 0x6e40, 0xec3, 0x2852, 0x5b0f, 0x1, 0x1);
        gbc.writeMem(0x4574, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8a7f);
        EXPECT(gbc.pc(), 0x4576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00AA
        gbc.setState(0xc979, 0xf7e3, 0xbde0, 0xf55d, 0xad86, 0x584e, 0x1, 0x0);
        gbc.writeMem(0xc979, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf7e3);
        EXPECT(gbc.pc(), 0xc97b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc979), 0xcb);
        EXPECT(gbc.readMem(0xc97a), 0x2a);
        // CB 2A 00AB
        gbc.setState(0x8924, 0xccd, 0x6970, 0x7548, 0x670e, 0x2c63, 0x0, 0x1);
        gbc.writeMem(0x8924, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xccd);
        EXPECT(gbc.pc(), 0x8926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8924), 0xcb);
        EXPECT(gbc.readMem(0x8925), 0x2a);
        // CB 2A 00AC
        gbc.setState(0x146, 0xb209, 0x32a0, 0x68c5, 0x7b97, 0x7958, 0x0, 0x0);
        gbc.writeMem(0x146, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb209);
        EXPECT(gbc.pc(), 0x148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00AD
        gbc.setState(0x5cee, 0xa87b, 0x7050, 0x20fb, 0x1909, 0x7a4c, 0x1, 0x1);
        gbc.writeMem(0x5cee, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa87b);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00AE
        gbc.setState(0x9bd2, 0xee1f, 0x9c20, 0xe558, 0xea35, 0xd56f, 0x1, 0x0);
        gbc.writeMem(0x9bd2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xee1f);
        EXPECT(gbc.pc(), 0x9bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd2), 0xcb);
        EXPECT(gbc.readMem(0x9bd3), 0x2a);
        // CB 2A 00AF
        gbc.setState(0x6318, 0x7558, 0x6c30, 0x307f, 0x24e4, 0xdafd, 0x1, 0x0);
        gbc.writeMem(0x6318, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7558);
        EXPECT(gbc.pc(), 0x631a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00B0
        gbc.setState(0x1d29, 0x4416, 0x2f50, 0x24c, 0x7587, 0x9a86, 0x0, 0x1);
        gbc.writeMem(0x1d29, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4416);
        EXPECT(gbc.pc(), 0x1d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00B1
        gbc.setState(0xbbf1, 0x1ba2, 0x3d50, 0x1a0b, 0xd746, 0x8c49, 0x0, 0x1);
        gbc.writeMem(0xbbf1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0xbbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbf1), 0xcb);
        EXPECT(gbc.readMem(0xbbf2), 0x2a);
        // CB 2A 00B2
        gbc.setState(0x6610, 0xac50, 0x7480, 0x207e, 0xae2, 0x16ba, 0x1, 0x1);
        gbc.writeMem(0x6610, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xac50);
        EXPECT(gbc.pc(), 0x6612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00B3
        gbc.setState(0xbe7b, 0x89af, 0x7020, 0xfb12, 0x29cd, 0x30ba, 0x0, 0x1);
        gbc.writeMem(0xbe7b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x89af);
        EXPECT(gbc.pc(), 0xbe7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe7b), 0xcb);
        EXPECT(gbc.readMem(0xbe7c), 0x2a);
        // CB 2A 00B4
        gbc.setState(0xb31d, 0xed20, 0xd970, 0x85da, 0x3ff3, 0x3963, 0x0, 0x0);
        gbc.writeMem(0xb31d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xed20);
        EXPECT(gbc.pc(), 0xb31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb31d), 0xcb);
        EXPECT(gbc.readMem(0xb31e), 0x2a);
        // CB 2A 00B5
        gbc.setState(0x11d1, 0x7dd0, 0xd960, 0xc651, 0xfa7a, 0x48dd, 0x1, 0x0);
        gbc.writeMem(0x11d1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7dd0);
        EXPECT(gbc.pc(), 0x11d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00B6
        gbc.setState(0x5245, 0xea63, 0x3e90, 0xb6f9, 0x9a7f, 0x1ca5, 0x0, 0x0);
        gbc.writeMem(0x5245, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xea63);
        EXPECT(gbc.pc(), 0x5247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00B7
        gbc.setState(0xec2c, 0xa2c3, 0xaee0, 0x96d2, 0x817d, 0x3cc0, 0x0, 0x0);
        gbc.writeMem(0xec2c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa2c3);
        EXPECT(gbc.pc(), 0xec2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec2c), 0xcb);
        EXPECT(gbc.readMem(0xec2d), 0x2a);
        // CB 2A 00B8
        gbc.setState(0x2d06, 0xe7f1, 0xda40, 0xa1b0, 0x9fd9, 0xae8e, 0x1, 0x0);
        gbc.writeMem(0x2d06, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe7f1);
        EXPECT(gbc.pc(), 0x2d08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00B9
        gbc.setState(0x8499, 0x6e9c, 0x8250, 0x11cd, 0x6c94, 0x6069, 0x0, 0x0);
        gbc.writeMem(0x8499, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6e9c);
        EXPECT(gbc.pc(), 0x849b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8499), 0xcb);
        EXPECT(gbc.readMem(0x849a), 0x2a);
        // CB 2A 00BA
        gbc.setState(0xb5a6, 0xf6bd, 0x2320, 0x8c8d, 0x52be, 0x490b, 0x1, 0x0);
        gbc.writeMem(0xb5a6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf6bd);
        EXPECT(gbc.pc(), 0xb5a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a6), 0xcb);
        EXPECT(gbc.readMem(0xb5a7), 0x2a);
        // CB 2A 00BB
        gbc.setState(0xb476, 0xf194, 0x8ef0, 0x137f, 0x7646, 0x338e, 0x0, 0x0);
        gbc.writeMem(0xb476, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf194);
        EXPECT(gbc.pc(), 0xb478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb476), 0xcb);
        EXPECT(gbc.readMem(0xb477), 0x2a);
        // CB 2A 00BC
        gbc.setState(0xa094, 0xe9cb, 0x3560, 0x3585, 0x75f1, 0x2c5a, 0x0, 0x1);
        gbc.writeMem(0xa094, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe9cb);
        EXPECT(gbc.pc(), 0xa096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa094), 0xcb);
        EXPECT(gbc.readMem(0xa095), 0x2a);
        // CB 2A 00BD
        gbc.setState(0x3a0d, 0x8a49, 0xcf40, 0xc3dc, 0x54c5, 0xdf62, 0x1, 0x1);
        gbc.writeMem(0x3a0d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8a49);
        EXPECT(gbc.pc(), 0x3a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00BE
        gbc.setState(0xa616, 0x2f08, 0x1600, 0xec92, 0xf18b, 0xac7, 0x0, 0x0);
        gbc.writeMem(0xa616, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2f08);
        EXPECT(gbc.pc(), 0xa618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa616), 0xcb);
        EXPECT(gbc.readMem(0xa617), 0x2a);
        // CB 2A 00BF
        gbc.setState(0xc29f, 0x3f05, 0x4810, 0x7fa1, 0xd0b0, 0x1729, 0x1, 0x0);
        gbc.writeMem(0xc29f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3f05);
        EXPECT(gbc.pc(), 0xc2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc29f), 0xcb);
        EXPECT(gbc.readMem(0xc2a0), 0x2a);
        // CB 2A 00C0
        gbc.setState(0xa792, 0x30eb, 0x40b0, 0x5177, 0xa137, 0x31bb, 0x1, 0x0);
        gbc.writeMem(0xa792, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x30eb);
        EXPECT(gbc.pc(), 0xa794);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa792), 0xcb);
        EXPECT(gbc.readMem(0xa793), 0x2a);
        // CB 2A 00C1
        gbc.setState(0xdf82, 0x8277, 0xe8f0, 0xcd2, 0x1f8c, 0xecb5, 0x0, 0x1);
        gbc.writeMem(0xdf82, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8277);
        EXPECT(gbc.pc(), 0xdf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf82), 0xcb);
        EXPECT(gbc.readMem(0xdf83), 0x2a);
        // CB 2A 00C2
        gbc.setState(0x4a05, 0xe798, 0x1870, 0x77bf, 0x6841, 0xbb46, 0x1, 0x1);
        gbc.writeMem(0x4a05, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe798);
        EXPECT(gbc.pc(), 0x4a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00C3
        gbc.setState(0x2ed7, 0xcb5f, 0x6370, 0x7bbb, 0xd50a, 0xefa2, 0x0, 0x1);
        gbc.writeMem(0x2ed7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcb5f);
        EXPECT(gbc.pc(), 0x2ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00C4
        gbc.setState(0x8753, 0x518b, 0x5970, 0x48a1, 0x7d42, 0x683e, 0x1, 0x1);
        gbc.writeMem(0x8753, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x518b);
        EXPECT(gbc.pc(), 0x8755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8753), 0xcb);
        EXPECT(gbc.readMem(0x8754), 0x2a);
        // CB 2A 00C5
        gbc.setState(0xa749, 0x9c94, 0x9fa0, 0xe6e, 0x294f, 0x554c, 0x1, 0x0);
        gbc.writeMem(0xa749, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9c94);
        EXPECT(gbc.pc(), 0xa74b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa749), 0xcb);
        EXPECT(gbc.readMem(0xa74a), 0x2a);
        // CB 2A 00C6
        gbc.setState(0x57bd, 0x748c, 0x2b0, 0xcd23, 0x1718, 0x3445, 0x0, 0x0);
        gbc.writeMem(0x57bd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x748c);
        EXPECT(gbc.pc(), 0x57bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00C7
        gbc.setState(0x6b88, 0xbb61, 0x6640, 0xde86, 0xeaa1, 0xb48c, 0x0, 0x1);
        gbc.writeMem(0x6b88, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbb61);
        EXPECT(gbc.pc(), 0x6b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00C8
        gbc.setState(0x3660, 0x81dc, 0x2c90, 0xd33a, 0x271e, 0x44cc, 0x0, 0x0);
        gbc.writeMem(0x3660, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x81dc);
        EXPECT(gbc.pc(), 0x3662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00C9
        gbc.setState(0x64c1, 0x9d74, 0x1680, 0x5a03, 0x5c19, 0x996a, 0x0, 0x0);
        gbc.writeMem(0x64c1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9d74);
        EXPECT(gbc.pc(), 0x64c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00CA
        gbc.setState(0x1b1a, 0x66ba, 0xc4e0, 0x1eaf, 0xe810, 0x5fbd, 0x1, 0x0);
        gbc.writeMem(0x1b1a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x66ba);
        EXPECT(gbc.pc(), 0x1b1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00CB
        gbc.setState(0x26f1, 0x25e6, 0x2f20, 0x562c, 0x7e95, 0x28e7, 0x0, 0x0);
        gbc.writeMem(0x26f1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x25e6);
        EXPECT(gbc.pc(), 0x26f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00CC
        gbc.setState(0xe4fd, 0x100, 0xb5c0, 0x10cc, 0x1105, 0xed27, 0x1, 0x0);
        gbc.writeMem(0xe4fd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x100);
        EXPECT(gbc.pc(), 0xe4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fd), 0xcb);
        EXPECT(gbc.readMem(0xe4fe), 0x2a);
        // CB 2A 00CD
        gbc.setState(0xc0fa, 0x331f, 0x8ff0, 0x7bdf, 0x5e76, 0xe94b, 0x0, 0x1);
        gbc.writeMem(0xc0fa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x331f);
        EXPECT(gbc.pc(), 0xc0fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0fa), 0xcb);
        EXPECT(gbc.readMem(0xc0fb), 0x2a);
        // CB 2A 00CE
        gbc.setState(0xc87e, 0xa8ec, 0xe4e0, 0x2c93, 0x305a, 0xe6e3, 0x0, 0x1);
        gbc.writeMem(0xc87e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa8ec);
        EXPECT(gbc.pc(), 0xc880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc87e), 0xcb);
        EXPECT(gbc.readMem(0xc87f), 0x2a);
        // CB 2A 00CF
        gbc.setState(0x4ad0, 0x8ffd, 0x74b0, 0x4352, 0xc905, 0xae56, 0x0, 0x0);
        gbc.writeMem(0x4ad0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8ffd);
        EXPECT(gbc.pc(), 0x4ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00D0
        gbc.setState(0x5fe9, 0x84c2, 0x40a0, 0xa9d5, 0x4acd, 0x6185, 0x0, 0x1);
        gbc.writeMem(0x5fe9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x84c2);
        EXPECT(gbc.pc(), 0x5feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D1
        gbc.setState(0x3162, 0x50ba, 0xadf0, 0xe7ae, 0xfa5d, 0x24f4, 0x1, 0x0);
        gbc.writeMem(0x3162, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x50ba);
        EXPECT(gbc.pc(), 0x3164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D2
        gbc.setState(0x472c, 0xc696, 0x7350, 0x4708, 0x2dd, 0xdf13, 0x0, 0x1);
        gbc.writeMem(0x472c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc696);
        EXPECT(gbc.pc(), 0x472e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D3
        gbc.setState(0xdbdb, 0x8f4, 0xdb0, 0x5bd7, 0x1f0d, 0xaeb7, 0x0, 0x0);
        gbc.writeMem(0xdbdb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8f4);
        EXPECT(gbc.pc(), 0xdbdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbdb), 0xcb);
        EXPECT(gbc.readMem(0xdbdc), 0x2a);
        // CB 2A 00D5
        gbc.setState(0x4452, 0x5ea7, 0x8b90, 0xbed, 0x8254, 0xcd23, 0x0, 0x1);
        gbc.writeMem(0x4452, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5ea7);
        EXPECT(gbc.pc(), 0x4454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D6
        gbc.setState(0x124c, 0xb7b6, 0xebc0, 0x81, 0x4269, 0xa9d9, 0x0, 0x0);
        gbc.writeMem(0x124c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb7b6);
        EXPECT(gbc.pc(), 0x124e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D7
        gbc.setState(0xc4ae, 0x3deb, 0x7ae0, 0x3eb5, 0x2b37, 0x97d9, 0x0, 0x1);
        gbc.writeMem(0xc4ae, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3deb);
        EXPECT(gbc.pc(), 0xc4b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ae), 0xcb);
        EXPECT(gbc.readMem(0xc4af), 0x2a);
        // CB 2A 00D8
        gbc.setState(0x57db, 0xcc64, 0x2f70, 0xc9a5, 0x429d, 0x789b, 0x0, 0x0);
        gbc.writeMem(0x57db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xcc64);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00D9
        gbc.setState(0x2107, 0x7ed4, 0x90, 0xea8a, 0x82bf, 0xa196, 0x1, 0x0);
        gbc.writeMem(0x2107, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7ed4);
        EXPECT(gbc.pc(), 0x2109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00DA
        gbc.setState(0x67be, 0x5d75, 0x7fb0, 0x4e73, 0x8776, 0x8ebf, 0x1, 0x0);
        gbc.writeMem(0x67be, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5d75);
        EXPECT(gbc.pc(), 0x67c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00DB
        gbc.setState(0x8561, 0xdf62, 0x62f0, 0xb5c8, 0x6b89, 0x270b, 0x0, 0x1);
        gbc.writeMem(0x8561, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdf62);
        EXPECT(gbc.pc(), 0x8563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8561), 0xcb);
        EXPECT(gbc.readMem(0x8562), 0x2a);
        // CB 2A 00DC
        gbc.setState(0xeab5, 0x1f09, 0xa400, 0x7495, 0x3f87, 0xb760, 0x0, 0x1);
        gbc.writeMem(0xeab5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1f09);
        EXPECT(gbc.pc(), 0xeab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeab5), 0xcb);
        EXPECT(gbc.readMem(0xeab6), 0x2a);
        // CB 2A 00DE
        gbc.setState(0x61a5, 0x98a, 0x8d30, 0x2e25, 0xba6b, 0xa1a4, 0x0, 0x1);
        gbc.writeMem(0x61a5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x98a);
        EXPECT(gbc.pc(), 0x61a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00DF
        gbc.setState(0xe531, 0x81ef, 0x27d0, 0xb4a6, 0x62b6, 0x184f, 0x0, 0x0);
        gbc.writeMem(0xe531, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x81ef);
        EXPECT(gbc.pc(), 0xe533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe531), 0xcb);
        EXPECT(gbc.readMem(0xe532), 0x2a);
        // CB 2A 00E0
        gbc.setState(0x6280, 0xeb1f, 0x5200, 0xc3aa, 0xb4a1, 0xd279, 0x1, 0x1);
        gbc.writeMem(0x6280, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xeb1f);
        EXPECT(gbc.pc(), 0x6282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00E1
        gbc.setState(0x8cc, 0xb06c, 0x9290, 0x1e04, 0xea03, 0x86cb, 0x1, 0x0);
        gbc.writeMem(0x8cc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb06c);
        EXPECT(gbc.pc(), 0x8ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00E2
        gbc.setState(0xd58c, 0xf729, 0x9680, 0xfc08, 0x44, 0xf43e, 0x0, 0x0);
        gbc.writeMem(0xd58c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf729);
        EXPECT(gbc.pc(), 0xd58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd58c), 0xcb);
        EXPECT(gbc.readMem(0xd58d), 0x2a);
        // CB 2A 00E3
        gbc.setState(0x924d, 0x6274, 0xb980, 0x39ee, 0x5bf7, 0x3b5e, 0x0, 0x0);
        gbc.writeMem(0x924d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6274);
        EXPECT(gbc.pc(), 0x924f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x924d), 0xcb);
        EXPECT(gbc.readMem(0x924e), 0x2a);
        // CB 2A 00E4
        gbc.setState(0xb378, 0xb9eb, 0x2650, 0x4ea3, 0x3fcc, 0xb80b, 0x1, 0x0);
        gbc.writeMem(0xb378, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb9eb);
        EXPECT(gbc.pc(), 0xb37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb378), 0xcb);
        EXPECT(gbc.readMem(0xb379), 0x2a);
        // CB 2A 00E5
        gbc.setState(0xeca0, 0xc774, 0x1320, 0x1dd3, 0x6d09, 0xfe, 0x0, 0x1);
        gbc.writeMem(0xeca0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc774);
        EXPECT(gbc.pc(), 0xeca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca0), 0xcb);
        EXPECT(gbc.readMem(0xeca1), 0x2a);
        // CB 2A 00E6
        gbc.setState(0x9772, 0x3918, 0x7540, 0x2055, 0x22b3, 0x64c2, 0x0, 0x1);
        gbc.writeMem(0x9772, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3918);
        EXPECT(gbc.pc(), 0x9774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9772), 0xcb);
        EXPECT(gbc.readMem(0x9773), 0x2a);
        // CB 2A 00E7
        gbc.setState(0x5fbf, 0x1b54, 0xd8b0, 0xa067, 0xcddb, 0xa4ba, 0x0, 0x0);
        gbc.writeMem(0x5fbf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1b54);
        EXPECT(gbc.pc(), 0x5fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00E8
        gbc.setState(0x3e2e, 0x1502, 0xb1e0, 0x724f, 0x29d1, 0xfa8a, 0x0, 0x0);
        gbc.writeMem(0x3e2e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1502);
        EXPECT(gbc.pc(), 0x3e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00E9
        gbc.setState(0xc78, 0xbdc6, 0x1a50, 0x8a99, 0x81a4, 0xb60, 0x0, 0x1);
        gbc.writeMem(0xc78, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbdc6);
        EXPECT(gbc.pc(), 0xc7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00EA
        gbc.setState(0x1dc5, 0xaf64, 0x49d0, 0xd8ea, 0x597a, 0x7548, 0x0, 0x1);
        gbc.writeMem(0x1dc5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xaf64);
        EXPECT(gbc.pc(), 0x1dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00EB
        gbc.setState(0xc24, 0x71ad, 0x2b10, 0x9501, 0x278f, 0x854b, 0x0, 0x0);
        gbc.writeMem(0xc24, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x71ad);
        EXPECT(gbc.pc(), 0xc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00EC
        gbc.setState(0xc83d, 0x7b17, 0x95b0, 0x7e38, 0x1da2, 0x7bc4, 0x0, 0x1);
        gbc.writeMem(0xc83d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7b17);
        EXPECT(gbc.pc(), 0xc83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc83d), 0xcb);
        EXPECT(gbc.readMem(0xc83e), 0x2a);
        // CB 2A 00ED
        gbc.setState(0xb31, 0x555e, 0xf750, 0xf1, 0x8968, 0xe18b, 0x0, 0x0);
        gbc.writeMem(0xb31, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x555e);
        EXPECT(gbc.pc(), 0xb33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00EE
        gbc.setState(0xaa6c, 0x66b5, 0xa940, 0x26e7, 0x902a, 0xa18a, 0x1, 0x0);
        gbc.writeMem(0xaa6c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x66b5);
        EXPECT(gbc.pc(), 0xaa6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa6c), 0xcb);
        EXPECT(gbc.readMem(0xaa6d), 0x2a);
        // CB 2A 00EF
        gbc.setState(0x6ee4, 0x6872, 0x6090, 0xd20b, 0xe985, 0xb61, 0x0, 0x0);
        gbc.writeMem(0x6ee4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6872);
        EXPECT(gbc.pc(), 0x6ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00F1
        gbc.setState(0x680f, 0x84ac, 0xb290, 0x2fee, 0xa538, 0x82da, 0x1, 0x0);
        gbc.writeMem(0x680f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x84ac);
        EXPECT(gbc.pc(), 0x6811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00F2
        gbc.setState(0x913, 0xc6c3, 0xd6e0, 0xe060, 0xf460, 0x5ad1, 0x1, 0x1);
        gbc.writeMem(0x913, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc6c3);
        EXPECT(gbc.pc(), 0x915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00F3
        gbc.setState(0xd5ba, 0x4f85, 0x800, 0x4cfe, 0x554c, 0xf9fb, 0x1, 0x0);
        gbc.writeMem(0xd5ba, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4f85);
        EXPECT(gbc.pc(), 0xd5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ba), 0xcb);
        EXPECT(gbc.readMem(0xd5bb), 0x2a);
        // CB 2A 00F4
        gbc.setState(0x751, 0xff57, 0x9d0, 0x80c7, 0x6222, 0x1ee4, 0x1, 0x1);
        gbc.writeMem(0x751, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xff57);
        EXPECT(gbc.pc(), 0x753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00F5
        gbc.setState(0x7d33, 0xddcf, 0xa7d0, 0xdd37, 0x51c7, 0x861f, 0x1, 0x1);
        gbc.writeMem(0x7d33, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xddcf);
        EXPECT(gbc.pc(), 0x7d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00F6
        gbc.setState(0xd263, 0x8ea, 0x28b0, 0xa3f3, 0xa5d8, 0x7150, 0x1, 0x0);
        gbc.writeMem(0xd263, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8ea);
        EXPECT(gbc.pc(), 0xd265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd263), 0xcb);
        EXPECT(gbc.readMem(0xd264), 0x2a);
        // CB 2A 00F7
        gbc.setState(0x301f, 0xb974, 0xd5d0, 0x3853, 0x8b4f, 0xdd53, 0x0, 0x1);
        gbc.writeMem(0x301f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb974);
        EXPECT(gbc.pc(), 0x3021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00F8
        gbc.setState(0xe445, 0xad6a, 0x3860, 0xa108, 0xcdb7, 0x32b1, 0x1, 0x0);
        gbc.writeMem(0xe445, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xad6a);
        EXPECT(gbc.pc(), 0xe447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe445), 0xcb);
        EXPECT(gbc.readMem(0xe446), 0x2a);
        // CB 2A 00F9
        gbc.setState(0x58f3, 0x421e, 0xb00, 0xf882, 0xc5c, 0x1459, 0x1, 0x0);
        gbc.writeMem(0x58f3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x421e);
        EXPECT(gbc.pc(), 0x58f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00FA
        gbc.setState(0x9521, 0x6298, 0x4f30, 0xae92, 0x4b64, 0xbd79, 0x1, 0x0);
        gbc.writeMem(0x9521, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6298);
        EXPECT(gbc.pc(), 0x9523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9521), 0xcb);
        EXPECT(gbc.readMem(0x9522), 0x2a);
        // CB 2A 00FB
        gbc.setState(0x4fab, 0x870, 0xb440, 0x88b, 0x4dde, 0xb1df, 0x0, 0x0);
        gbc.writeMem(0x4fab, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x870);
        EXPECT(gbc.pc(), 0x4fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 00FC
        gbc.setState(0x871f, 0x9f42, 0xff80, 0xcc67, 0x99a4, 0x5034, 0x1, 0x0);
        gbc.writeMem(0x871f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9f42);
        EXPECT(gbc.pc(), 0x8721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871f), 0xcb);
        EXPECT(gbc.readMem(0x8720), 0x2a);
        // CB 2A 00FD
        gbc.setState(0x8c34, 0xc79b, 0x4090, 0x68b9, 0x9f5e, 0x255c, 0x0, 0x1);
        gbc.writeMem(0x8c34, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc79b);
        EXPECT(gbc.pc(), 0x8c36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c34), 0xcb);
        EXPECT(gbc.readMem(0x8c35), 0x2a);
        // CB 2A 00FE
        gbc.setState(0x7acb, 0xfe8b, 0x8d60, 0x751a, 0x6c9c, 0x3a08, 0x0, 0x1);
        gbc.writeMem(0x7acb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfe8b);
        EXPECT(gbc.pc(), 0x7acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 00FF
        gbc.setState(0xcf84, 0xaee3, 0x7500, 0x4eca, 0x822d, 0x27c2, 0x0, 0x1);
        gbc.writeMem(0xcf84, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xaee3);
        EXPECT(gbc.pc(), 0xcf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf84), 0xcb);
        EXPECT(gbc.readMem(0xcf85), 0x2a);
        // CB 2A 0101
        gbc.setState(0x3825, 0x5019, 0xf760, 0x6260, 0xc9e3, 0x19dd, 0x1, 0x1);
        gbc.writeMem(0x3825, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5019);
        EXPECT(gbc.pc(), 0x3827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0102
        gbc.setState(0xe19c, 0x320a, 0x90e0, 0x2fd7, 0xb250, 0xd081, 0x0, 0x0);
        gbc.writeMem(0xe19c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x320a);
        EXPECT(gbc.pc(), 0xe19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19c), 0xcb);
        EXPECT(gbc.readMem(0xe19d), 0x2a);
        // CB 2A 0103
        gbc.setState(0x4a4d, 0x7f82, 0xe00, 0xf870, 0x88e2, 0x27c9, 0x1, 0x0);
        gbc.writeMem(0x4a4d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7f82);
        EXPECT(gbc.pc(), 0x4a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0104
        gbc.setState(0x6619, 0x8794, 0x6100, 0x83cf, 0xfd94, 0x9284, 0x0, 0x1);
        gbc.writeMem(0x6619, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8794);
        EXPECT(gbc.pc(), 0x661b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0105
        gbc.setState(0x9f5d, 0xe9, 0x98b0, 0x9d15, 0x77ab, 0xc60a, 0x0, 0x0);
        gbc.writeMem(0x9f5d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe9);
        EXPECT(gbc.pc(), 0x9f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f5d), 0xcb);
        EXPECT(gbc.readMem(0x9f5e), 0x2a);
        // CB 2A 0106
        gbc.setState(0xd3f6, 0x15d0, 0x4ef0, 0xbc09, 0xb35e, 0x4406, 0x1, 0x0);
        gbc.writeMem(0xd3f6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x15d0);
        EXPECT(gbc.pc(), 0xd3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f6), 0xcb);
        EXPECT(gbc.readMem(0xd3f7), 0x2a);
        // CB 2A 0107
        gbc.setState(0x3e21, 0xed2c, 0x58f0, 0x7f43, 0x2e36, 0x53d3, 0x0, 0x1);
        gbc.writeMem(0x3e21, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xed2c);
        EXPECT(gbc.pc(), 0x3e23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0108
        gbc.setState(0xe5ec, 0xceee, 0xe1e0, 0xb174, 0x47d8, 0xa92e, 0x0, 0x0);
        gbc.writeMem(0xe5ec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0xe5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ec), 0xcb);
        EXPECT(gbc.readMem(0xe5ed), 0x2a);
        // CB 2A 0109
        gbc.setState(0x9137, 0x6e67, 0xeb30, 0x173a, 0x6359, 0x468e, 0x0, 0x0);
        gbc.writeMem(0x9137, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6e67);
        EXPECT(gbc.pc(), 0x9139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9137), 0xcb);
        EXPECT(gbc.readMem(0x9138), 0x2a);
        // CB 2A 010A
        gbc.setState(0x2b61, 0xd421, 0xae00, 0x93dc, 0x214a, 0x6a4a, 0x0, 0x0);
        gbc.writeMem(0x2b61, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd421);
        EXPECT(gbc.pc(), 0x2b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 010B
        gbc.setState(0xe998, 0xf65a, 0x9230, 0x25b7, 0xb3a5, 0x6eaa, 0x1, 0x1);
        gbc.writeMem(0xe998, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf65a);
        EXPECT(gbc.pc(), 0xe99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe998), 0xcb);
        EXPECT(gbc.readMem(0xe999), 0x2a);
        // CB 2A 010C
        gbc.setState(0x14fe, 0xcf84, 0xcf80, 0x937e, 0xe486, 0x86a, 0x1, 0x1);
        gbc.writeMem(0x14fe, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xcf84);
        EXPECT(gbc.pc(), 0x1500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 010D
        gbc.setState(0x202f, 0xd36e, 0xb280, 0x77d9, 0x83cc, 0x9b0a, 0x1, 0x0);
        gbc.writeMem(0x202f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd36e);
        EXPECT(gbc.pc(), 0x2031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 010E
        gbc.setState(0x6966, 0xc7aa, 0x69b0, 0x2e30, 0x5a57, 0x2288, 0x0, 0x1);
        gbc.writeMem(0x6966, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc7aa);
        EXPECT(gbc.pc(), 0x6968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 010F
        gbc.setState(0xaad0, 0xeaff, 0xd340, 0x183d, 0xbf2d, 0x8d3d, 0x0, 0x1);
        gbc.writeMem(0xaad0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xeaff);
        EXPECT(gbc.pc(), 0xaad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad0), 0xcb);
        EXPECT(gbc.readMem(0xaad1), 0x2a);
        // CB 2A 0110
        gbc.setState(0x8939, 0x1b1, 0x58e0, 0x1f98, 0x2c4c, 0x8a76, 0x0, 0x0);
        gbc.writeMem(0x8939, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1b1);
        EXPECT(gbc.pc(), 0x893b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8939), 0xcb);
        EXPECT(gbc.readMem(0x893a), 0x2a);
        // CB 2A 0111
        gbc.setState(0x1ae6, 0x8fb4, 0x1f10, 0x7dde, 0xc3c0, 0xf005, 0x1, 0x0);
        gbc.writeMem(0x1ae6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8fb4);
        EXPECT(gbc.pc(), 0x1ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0112
        gbc.setState(0x7942, 0x81ff, 0x36d0, 0x8c67, 0x3a0c, 0xfce, 0x0, 0x0);
        gbc.writeMem(0x7942, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x81ff);
        EXPECT(gbc.pc(), 0x7944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0113
        gbc.setState(0x7d0c, 0xe650, 0x2db0, 0xecca, 0xa4a, 0x9633, 0x1, 0x0);
        gbc.writeMem(0x7d0c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe650);
        EXPECT(gbc.pc(), 0x7d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0114
        gbc.setState(0x2aa5, 0x2d28, 0x6430, 0x114a, 0x7f2a, 0x8823, 0x1, 0x0);
        gbc.writeMem(0x2aa5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2d28);
        EXPECT(gbc.pc(), 0x2aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0116
        gbc.setState(0xef64, 0xb566, 0x85d0, 0xb4dd, 0xcfbf, 0xfb85, 0x0, 0x1);
        gbc.writeMem(0xef64, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb566);
        EXPECT(gbc.pc(), 0xef66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef64), 0xcb);
        EXPECT(gbc.readMem(0xef65), 0x2a);
        // CB 2A 0117
        gbc.setState(0xa071, 0x637b, 0xa890, 0xcf21, 0x82c3, 0x6db, 0x1, 0x0);
        gbc.writeMem(0xa071, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x637b);
        EXPECT(gbc.pc(), 0xa073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa071), 0xcb);
        EXPECT(gbc.readMem(0xa072), 0x2a);
        // CB 2A 0118
        gbc.setState(0xbf38, 0xe1b9, 0xfb70, 0x4d15, 0x9c68, 0xe980, 0x1, 0x1);
        gbc.writeMem(0xbf38, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe1b9);
        EXPECT(gbc.pc(), 0xbf3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf38), 0xcb);
        EXPECT(gbc.readMem(0xbf39), 0x2a);
        // CB 2A 0119
        gbc.setState(0xd743, 0x54c1, 0xfbe0, 0xdbb4, 0x9cc8, 0x5828, 0x0, 0x1);
        gbc.writeMem(0xd743, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x54c1);
        EXPECT(gbc.pc(), 0xd745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd743), 0xcb);
        EXPECT(gbc.readMem(0xd744), 0x2a);
        // CB 2A 011A
        gbc.setState(0x2e1, 0xd, 0x93e0, 0x928b, 0xd8c9, 0xf8f5, 0x0, 0x1);
        gbc.writeMem(0x2e1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd);
        EXPECT(gbc.pc(), 0x2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 011B
        gbc.setState(0xc4a, 0xc280, 0x2940, 0xe06d, 0x9d94, 0x12aa, 0x1, 0x0);
        gbc.writeMem(0xc4a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc280);
        EXPECT(gbc.pc(), 0xc4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 011C
        gbc.setState(0x44d, 0xfa3a, 0xbb00, 0x1b21, 0x1f78, 0x8545, 0x1, 0x1);
        gbc.writeMem(0x44d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfa3a);
        EXPECT(gbc.pc(), 0x44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 011D
        gbc.setState(0x2bbc, 0xe2e2, 0xbae0, 0xe57, 0x5ca4, 0xfef2, 0x0, 0x1);
        gbc.writeMem(0x2bbc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe2e2);
        EXPECT(gbc.pc(), 0x2bbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 011E
        gbc.setState(0x7ac3, 0x78d7, 0x9980, 0x1863, 0xd8f, 0x7fe5, 0x1, 0x1);
        gbc.writeMem(0x7ac3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x78d7);
        EXPECT(gbc.pc(), 0x7ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0120
        gbc.setState(0xb8e4, 0xf50c, 0x4c0, 0xe010, 0x2294, 0x6e43, 0x1, 0x1);
        gbc.writeMem(0xb8e4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf50c);
        EXPECT(gbc.pc(), 0xb8e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e4), 0xcb);
        EXPECT(gbc.readMem(0xb8e5), 0x2a);
        // CB 2A 0121
        gbc.setState(0x7060, 0x85db, 0xb0d0, 0xbc5, 0x5f41, 0x2882, 0x1, 0x0);
        gbc.writeMem(0x7060, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x85db);
        EXPECT(gbc.pc(), 0x7062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0122
        gbc.setState(0xaeb4, 0xc539, 0xbd0, 0xfd56, 0x7ea1, 0xe933, 0x0, 0x0);
        gbc.writeMem(0xaeb4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc539);
        EXPECT(gbc.pc(), 0xaeb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb4), 0xcb);
        EXPECT(gbc.readMem(0xaeb5), 0x2a);
        // CB 2A 0123
        gbc.setState(0x776c, 0x6959, 0xf2b0, 0xa466, 0x23d6, 0x6e92, 0x1, 0x1);
        gbc.writeMem(0x776c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6959);
        EXPECT(gbc.pc(), 0x776e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0124
        gbc.setState(0x268c, 0xd44, 0x1f10, 0xa5c8, 0x37fe, 0x569b, 0x1, 0x0);
        gbc.writeMem(0x268c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd44);
        EXPECT(gbc.pc(), 0x268e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0125
        gbc.setState(0x8cde, 0x9931, 0x9a60, 0x5c8c, 0x1c, 0xc08d, 0x0, 0x0);
        gbc.writeMem(0x8cde, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9931);
        EXPECT(gbc.pc(), 0x8ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cde), 0xcb);
        EXPECT(gbc.readMem(0x8cdf), 0x2a);
        // CB 2A 0126
        gbc.setState(0x5f6b, 0x1ca3, 0x28b0, 0xbe0e, 0xde2b, 0x1c62, 0x0, 0x1);
        gbc.writeMem(0x5f6b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1ca3);
        EXPECT(gbc.pc(), 0x5f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0127
        gbc.setState(0x6221, 0x8bca, 0x41d0, 0x54a1, 0x5e4e, 0x2002, 0x0, 0x0);
        gbc.writeMem(0x6221, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8bca);
        EXPECT(gbc.pc(), 0x6223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0128
        gbc.setState(0xa758, 0xa0b2, 0x9ad0, 0xf44b, 0x2a32, 0x8031, 0x1, 0x1);
        gbc.writeMem(0xa758, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa0b2);
        EXPECT(gbc.pc(), 0xa75a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa758), 0xcb);
        EXPECT(gbc.readMem(0xa759), 0x2a);
        // CB 2A 0129
        gbc.setState(0xb90, 0xa772, 0x7c0, 0xe41e, 0xc0f5, 0xb224, 0x1, 0x0);
        gbc.writeMem(0xb90, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa772);
        EXPECT(gbc.pc(), 0xb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 012A
        gbc.setState(0xb829, 0xefd2, 0x5a20, 0xea6d, 0x3771, 0x6cd6, 0x1, 0x0);
        gbc.writeMem(0xb829, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xefd2);
        EXPECT(gbc.pc(), 0xb82b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb829), 0xcb);
        EXPECT(gbc.readMem(0xb82a), 0x2a);
        // CB 2A 012B
        gbc.setState(0x1121, 0x40d4, 0xea10, 0xa37, 0x530e, 0x4f57, 0x0, 0x1);
        gbc.writeMem(0x1121, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x40d4);
        EXPECT(gbc.pc(), 0x1123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 012C
        gbc.setState(0xd1fb, 0x9b29, 0xd0b0, 0xfbf6, 0xf0ae, 0xf5e2, 0x0, 0x1);
        gbc.writeMem(0xd1fb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9b29);
        EXPECT(gbc.pc(), 0xd1fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fb), 0xcb);
        EXPECT(gbc.readMem(0xd1fc), 0x2a);
        // CB 2A 012D
        gbc.setState(0x5ab0, 0x292e, 0x72b0, 0x5009, 0x2518, 0xc302, 0x1, 0x1);
        gbc.writeMem(0x5ab0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x292e);
        EXPECT(gbc.pc(), 0x5ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 012E
        gbc.setState(0x6560, 0xa841, 0xb100, 0x2f86, 0xb268, 0x77da, 0x1, 0x0);
        gbc.writeMem(0x6560, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa841);
        EXPECT(gbc.pc(), 0x6562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 012F
        gbc.setState(0x25fe, 0x56ba, 0x6e50, 0x79cb, 0x6e09, 0xc904, 0x0, 0x1);
        gbc.writeMem(0x25fe, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x56ba);
        EXPECT(gbc.pc(), 0x2600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0130
        gbc.setState(0x99e0, 0x3452, 0xee60, 0xe7ec, 0xde48, 0xc3d6, 0x0, 0x0);
        gbc.writeMem(0x99e0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3452);
        EXPECT(gbc.pc(), 0x99e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e0), 0xcb);
        EXPECT(gbc.readMem(0x99e1), 0x2a);
        // CB 2A 0131
        gbc.setState(0xda02, 0xe84e, 0x14a0, 0x54bc, 0xee7f, 0xed25, 0x0, 0x0);
        gbc.writeMem(0xda02, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe84e);
        EXPECT(gbc.pc(), 0xda04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda02), 0xcb);
        EXPECT(gbc.readMem(0xda03), 0x2a);
        // CB 2A 0132
        gbc.setState(0x4040, 0xffe4, 0x35b0, 0x97f9, 0xec81, 0xbc00, 0x0, 0x0);
        gbc.writeMem(0x4040, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xffe4);
        EXPECT(gbc.pc(), 0x4042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0133
        gbc.setState(0x49bf, 0x180, 0x6b0, 0x1742, 0x9eae, 0x5036, 0x1, 0x1);
        gbc.writeMem(0x49bf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x180);
        EXPECT(gbc.pc(), 0x49c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0134
        gbc.setState(0x777, 0x8a6f, 0x3e90, 0xc5fc, 0x9031, 0xa604, 0x0, 0x1);
        gbc.writeMem(0x777, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8a6f);
        EXPECT(gbc.pc(), 0x779);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0135
        gbc.setState(0x1553, 0x91e4, 0xa3d0, 0x308f, 0xac4a, 0xcfd5, 0x1, 0x1);
        gbc.writeMem(0x1553, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x91e4);
        EXPECT(gbc.pc(), 0x1555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0136
        gbc.setState(0x252b, 0x2e6c, 0x5260, 0xfbe8, 0x6fcc, 0x1ee1, 0x0, 0x1);
        gbc.writeMem(0x252b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2e6c);
        EXPECT(gbc.pc(), 0x252d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0137
        gbc.setState(0x9d1d, 0xfb64, 0x3260, 0x5598, 0x24ad, 0x69c8, 0x1, 0x0);
        gbc.writeMem(0x9d1d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfb64);
        EXPECT(gbc.pc(), 0x9d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1d), 0xcb);
        EXPECT(gbc.readMem(0x9d1e), 0x2a);
        // CB 2A 0138
        gbc.setState(0x6e6f, 0xd7da, 0xc10, 0x926a, 0xc04, 0xd014, 0x1, 0x0);
        gbc.writeMem(0x6e6f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd7da);
        EXPECT(gbc.pc(), 0x6e71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0139
        gbc.setState(0xd294, 0x3e5, 0x7010, 0xc946, 0x8c13, 0xd2a, 0x0, 0x1);
        gbc.writeMem(0xd294, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3e5);
        EXPECT(gbc.pc(), 0xd296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd294), 0xcb);
        EXPECT(gbc.readMem(0xd295), 0x2a);
        // CB 2A 013A
        gbc.setState(0x1922, 0x21ac, 0x3c90, 0x11f9, 0xeb96, 0xbd43, 0x0, 0x1);
        gbc.writeMem(0x1922, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x21ac);
        EXPECT(gbc.pc(), 0x1924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 013B
        gbc.setState(0x2d58, 0x5741, 0xd630, 0x3a17, 0x8734, 0xc172, 0x0, 0x1);
        gbc.writeMem(0x2d58, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5741);
        EXPECT(gbc.pc(), 0x2d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 013C
        gbc.setState(0x1df2, 0x68e2, 0x7af0, 0x3c3f, 0x3d22, 0x3c8d, 0x1, 0x0);
        gbc.writeMem(0x1df2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x68e2);
        EXPECT(gbc.pc(), 0x1df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 013D
        gbc.setState(0x30ff, 0xfc7e, 0x7e50, 0x4616, 0x5583, 0x259a, 0x1, 0x0);
        gbc.writeMem(0x30ff, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xfc7e);
        EXPECT(gbc.pc(), 0x3101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 013E
        gbc.setState(0x38fa, 0x89b4, 0x7f60, 0x4d2b, 0x66dc, 0xf852, 0x1, 0x0);
        gbc.writeMem(0x38fa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x89b4);
        EXPECT(gbc.pc(), 0x38fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 013F
        gbc.setState(0x8ee5, 0xcc3b, 0x4b80, 0xf285, 0xb580, 0xcb39, 0x1, 0x0);
        gbc.writeMem(0x8ee5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcc3b);
        EXPECT(gbc.pc(), 0x8ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee5), 0xcb);
        EXPECT(gbc.readMem(0x8ee6), 0x2a);
        // CB 2A 0141
        gbc.setState(0x1dd2, 0x1fac, 0x3960, 0xc8c9, 0xa5b7, 0xf191, 0x1, 0x0);
        gbc.writeMem(0x1dd2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1fac);
        EXPECT(gbc.pc(), 0x1dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0142
        gbc.setState(0xc2c9, 0x8201, 0xd140, 0xf7da, 0x5b8a, 0x1120, 0x0, 0x0);
        gbc.writeMem(0xc2c9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8201);
        EXPECT(gbc.pc(), 0xc2cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c9), 0xcb);
        EXPECT(gbc.readMem(0xc2ca), 0x2a);
        // CB 2A 0143
        gbc.setState(0x39ca, 0xcf66, 0x2bf0, 0x3a7, 0xef9d, 0x1220, 0x0, 0x1);
        gbc.writeMem(0x39ca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcf66);
        EXPECT(gbc.pc(), 0x39cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0144
        gbc.setState(0x7ac5, 0x7ff6, 0xa3f0, 0xd713, 0xc533, 0xfb90, 0x1, 0x1);
        gbc.writeMem(0x7ac5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7ff6);
        EXPECT(gbc.pc(), 0x7ac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0145
        gbc.setState(0xc72d, 0xecaa, 0x2390, 0xa740, 0x82c1, 0x89bc, 0x1, 0x0);
        gbc.writeMem(0xc72d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xecaa);
        EXPECT(gbc.pc(), 0xc72f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc72d), 0xcb);
        EXPECT(gbc.readMem(0xc72e), 0x2a);
        // CB 2A 0146
        gbc.setState(0xbb48, 0xdb2e, 0x2c80, 0xa09a, 0x6cb6, 0xc194, 0x0, 0x0);
        gbc.writeMem(0xbb48, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xdb2e);
        EXPECT(gbc.pc(), 0xbb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb48), 0xcb);
        EXPECT(gbc.readMem(0xbb49), 0x2a);
        // CB 2A 0147
        gbc.setState(0x7ce8, 0xee35, 0xc50, 0x75d0, 0xcb9b, 0xd0d, 0x1, 0x0);
        gbc.writeMem(0x7ce8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xee35);
        EXPECT(gbc.pc(), 0x7cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0148
        gbc.setState(0xddcb, 0x9a5f, 0xe2d0, 0xf41f, 0x91d8, 0xe37c, 0x1, 0x1);
        gbc.writeMem(0xddcb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9a5f);
        EXPECT(gbc.pc(), 0xddcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddcb), 0xcb);
        EXPECT(gbc.readMem(0xddcc), 0x2a);
        // CB 2A 0149
        gbc.setState(0xbc1a, 0xe9e8, 0x22d0, 0x99ec, 0x7be3, 0xbe95, 0x1, 0x1);
        gbc.writeMem(0xbc1a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe9e8);
        EXPECT(gbc.pc(), 0xbc1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc1a), 0xcb);
        EXPECT(gbc.readMem(0xbc1b), 0x2a);
        // CB 2A 014A
        gbc.setState(0xe6ae, 0x5464, 0x8650, 0x3d2e, 0x4a15, 0x1066, 0x0, 0x0);
        gbc.writeMem(0xe6ae, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5464);
        EXPECT(gbc.pc(), 0xe6b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ae), 0xcb);
        EXPECT(gbc.readMem(0xe6af), 0x2a);
        // CB 2A 014B
        gbc.setState(0xcdb4, 0x56e4, 0x2020, 0xea9a, 0xde01, 0x5867, 0x1, 0x1);
        gbc.writeMem(0xcdb4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x56e4);
        EXPECT(gbc.pc(), 0xcdb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdb4), 0xcb);
        EXPECT(gbc.readMem(0xcdb5), 0x2a);
        // CB 2A 014C
        gbc.setState(0xba52, 0x6d94, 0x1200, 0xe963, 0x3374, 0x1713, 0x0, 0x0);
        gbc.writeMem(0xba52, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6d94);
        EXPECT(gbc.pc(), 0xba54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba52), 0xcb);
        EXPECT(gbc.readMem(0xba53), 0x2a);
        // CB 2A 014D
        gbc.setState(0x21f7, 0x97e3, 0x67a0, 0xf19e, 0xcb7e, 0xabd1, 0x1, 0x0);
        gbc.writeMem(0x21f7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x97e3);
        EXPECT(gbc.pc(), 0x21f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 014E
        gbc.setState(0x7a45, 0x3699, 0x3190, 0x859f, 0x73b0, 0x2f11, 0x1, 0x1);
        gbc.writeMem(0x7a45, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3699);
        EXPECT(gbc.pc(), 0x7a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 014F
        gbc.setState(0xc84e, 0xe1b, 0xf620, 0x932d, 0x6832, 0x31a, 0x0, 0x0);
        gbc.writeMem(0xc84e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe1b);
        EXPECT(gbc.pc(), 0xc850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84e), 0xcb);
        EXPECT(gbc.readMem(0xc84f), 0x2a);
        // CB 2A 0150
        gbc.setState(0xa366, 0x6164, 0x67b0, 0xb5a8, 0x3596, 0x2b0d, 0x1, 0x0);
        gbc.writeMem(0xa366, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6164);
        EXPECT(gbc.pc(), 0xa368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa366), 0xcb);
        EXPECT(gbc.readMem(0xa367), 0x2a);
        // CB 2A 0151
        gbc.setState(0x5ad, 0xad1a, 0x3500, 0x22be, 0x3b0c, 0x2b73, 0x1, 0x0);
        gbc.writeMem(0x5ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xad1a);
        EXPECT(gbc.pc(), 0x5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0152
        gbc.setState(0xb1a6, 0x96f0, 0x2830, 0x32c5, 0xd5d7, 0x5f50, 0x0, 0x1);
        gbc.writeMem(0xb1a6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x96f0);
        EXPECT(gbc.pc(), 0xb1a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a6), 0xcb);
        EXPECT(gbc.readMem(0xb1a7), 0x2a);
        // CB 2A 0153
        gbc.setState(0x41c7, 0x2f8b, 0xce50, 0xc939, 0xd2fe, 0x512f, 0x0, 0x1);
        gbc.writeMem(0x41c7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2f8b);
        EXPECT(gbc.pc(), 0x41c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0154
        gbc.setState(0x42b8, 0xdb77, 0x43a0, 0xb32, 0xa423, 0xa4f2, 0x0, 0x0);
        gbc.writeMem(0x42b8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdb77);
        EXPECT(gbc.pc(), 0x42ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0155
        gbc.setState(0x13d7, 0xc119, 0x1c60, 0x190d, 0xfe0e, 0x41b4, 0x0, 0x1);
        gbc.writeMem(0x13d7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc119);
        EXPECT(gbc.pc(), 0x13d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0156
        gbc.setState(0x3711, 0x3cd0, 0xd7a0, 0x83a2, 0xe708, 0x621f, 0x0, 0x0);
        gbc.writeMem(0x3711, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3cd0);
        EXPECT(gbc.pc(), 0x3713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0157
        gbc.setState(0x90df, 0x7238, 0xa80, 0x8449, 0xe80b, 0xc6af, 0x0, 0x1);
        gbc.writeMem(0x90df, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7238);
        EXPECT(gbc.pc(), 0x90e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90df), 0xcb);
        EXPECT(gbc.readMem(0x90e0), 0x2a);
        // CB 2A 0158
        gbc.setState(0x70d3, 0x238f, 0xffc0, 0xb5f5, 0xa46d, 0x77b7, 0x0, 0x0);
        gbc.writeMem(0x70d3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x238f);
        EXPECT(gbc.pc(), 0x70d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0159
        gbc.setState(0x3971, 0x33ed, 0x3dc0, 0x5f2d, 0x969c, 0xd3aa, 0x1, 0x1);
        gbc.writeMem(0x3971, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x33ed);
        EXPECT(gbc.pc(), 0x3973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 015A
        gbc.setState(0xe2ea, 0xb3e0, 0xd120, 0xcca7, 0xdea1, 0x3276, 0x0, 0x1);
        gbc.writeMem(0xe2ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb3e0);
        EXPECT(gbc.pc(), 0xe2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ea), 0xcb);
        EXPECT(gbc.readMem(0xe2eb), 0x2a);
        // CB 2A 015B
        gbc.setState(0xe1c7, 0x6687, 0x25e0, 0x3bd7, 0xb919, 0x945d, 0x0, 0x0);
        gbc.writeMem(0xe1c7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6687);
        EXPECT(gbc.pc(), 0xe1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c7), 0xcb);
        EXPECT(gbc.readMem(0xe1c8), 0x2a);
        // CB 2A 015C
        gbc.setState(0x57c4, 0x9528, 0x5a10, 0x798, 0x2dab, 0xd5f8, 0x0, 0x0);
        gbc.writeMem(0x57c4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9528);
        EXPECT(gbc.pc(), 0x57c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 015D
        gbc.setState(0x1142, 0x6c44, 0x4860, 0x60f9, 0x9a55, 0x133a, 0x0, 0x0);
        gbc.writeMem(0x1142, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6c44);
        EXPECT(gbc.pc(), 0x1144);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 015E
        gbc.setState(0x6dd5, 0xc26c, 0x99f0, 0x9fff, 0x69b5, 0xa126, 0x1, 0x0);
        gbc.writeMem(0x6dd5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc26c);
        EXPECT(gbc.pc(), 0x6dd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 015F
        gbc.setState(0x46e, 0x1656, 0x7920, 0x4c0, 0xa1be, 0x1228, 0x1, 0x1);
        gbc.writeMem(0x46e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1656);
        EXPECT(gbc.pc(), 0x470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0160
        gbc.setState(0xc13e, 0xe1c7, 0x16c0, 0x1659, 0x21ce, 0xc0a3, 0x1, 0x1);
        gbc.writeMem(0xc13e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe1c7);
        EXPECT(gbc.pc(), 0xc140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc13e), 0xcb);
        EXPECT(gbc.readMem(0xc13f), 0x2a);
        // CB 2A 0161
        gbc.setState(0x692e, 0x77d6, 0x9870, 0x1cce, 0xae55, 0x94b8, 0x1, 0x1);
        gbc.writeMem(0x692e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x77d6);
        EXPECT(gbc.pc(), 0x6930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0162
        gbc.setState(0x2666, 0xd090, 0x7350, 0x336c, 0x5c73, 0xdd5d, 0x0, 0x0);
        gbc.writeMem(0x2666, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd090);
        EXPECT(gbc.pc(), 0x2668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0163
        gbc.setState(0x4e8a, 0x12bc, 0x7b00, 0x60a9, 0xd5a9, 0xa5d9, 0x0, 0x1);
        gbc.writeMem(0x4e8a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x12bc);
        EXPECT(gbc.pc(), 0x4e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0164
        gbc.setState(0x898d, 0x3a37, 0xde60, 0xf7a3, 0x8bce, 0xf453, 0x1, 0x0);
        gbc.writeMem(0x898d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3a37);
        EXPECT(gbc.pc(), 0x898f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898d), 0xcb);
        EXPECT(gbc.readMem(0x898e), 0x2a);
        // CB 2A 0165
        gbc.setState(0x6eaa, 0xb618, 0xcbf0, 0x3d0d, 0x6896, 0x4288, 0x0, 0x1);
        gbc.writeMem(0x6eaa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb618);
        EXPECT(gbc.pc(), 0x6eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0166
        gbc.setState(0x6fad, 0xb88e, 0x23e0, 0x15f3, 0xe0ef, 0x5573, 0x0, 0x1);
        gbc.writeMem(0x6fad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb88e);
        EXPECT(gbc.pc(), 0x6faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0167
        gbc.setState(0x108e, 0xaafe, 0x9eb0, 0x805d, 0xe3e, 0x14e9, 0x1, 0x1);
        gbc.writeMem(0x108e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaafe);
        EXPECT(gbc.pc(), 0x1090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0168
        gbc.setState(0x26cc, 0x2fb2, 0xa930, 0xd6, 0x7cd8, 0x20e5, 0x1, 0x0);
        gbc.writeMem(0x26cc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2fb2);
        EXPECT(gbc.pc(), 0x26ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0169
        gbc.setState(0xe8a9, 0x9571, 0x1c0, 0xb3d3, 0xa2c, 0x14fd, 0x0, 0x0);
        gbc.writeMem(0xe8a9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9571);
        EXPECT(gbc.pc(), 0xe8ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8a9), 0xcb);
        EXPECT(gbc.readMem(0xe8aa), 0x2a);
        // CB 2A 016A
        gbc.setState(0x762c, 0xb98c, 0xa0, 0x70a, 0xde26, 0x1055, 0x1, 0x0);
        gbc.writeMem(0x762c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb98c);
        EXPECT(gbc.pc(), 0x762e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 016B
        gbc.setState(0xadf8, 0xca1, 0xd880, 0x2bc9, 0x1b9f, 0x9642, 0x0, 0x1);
        gbc.writeMem(0xadf8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xca1);
        EXPECT(gbc.pc(), 0xadfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf8), 0xcb);
        EXPECT(gbc.readMem(0xadf9), 0x2a);
        // CB 2A 016C
        gbc.setState(0x1391, 0x9cbd, 0x3ba0, 0x3e6d, 0xcd28, 0x6482, 0x1, 0x1);
        gbc.writeMem(0x1391, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9cbd);
        EXPECT(gbc.pc(), 0x1393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 016D
        gbc.setState(0xc489, 0x5f4e, 0xccc0, 0x73a2, 0x134a, 0xb433, 0x0, 0x1);
        gbc.writeMem(0xc489, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5f4e);
        EXPECT(gbc.pc(), 0xc48b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc489), 0xcb);
        EXPECT(gbc.readMem(0xc48a), 0x2a);
        // CB 2A 016E
        gbc.setState(0xe654, 0xac62, 0xcea0, 0x6289, 0x689a, 0x1740, 0x0, 0x1);
        gbc.writeMem(0xe654, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xac62);
        EXPECT(gbc.pc(), 0xe656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe654), 0xcb);
        EXPECT(gbc.readMem(0xe655), 0x2a);
        // CB 2A 016F
        gbc.setState(0xb46b, 0x3b6e, 0x4c10, 0x71a5, 0x5117, 0x9bec, 0x1, 0x0);
        gbc.writeMem(0xb46b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3b6e);
        EXPECT(gbc.pc(), 0xb46d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46b), 0xcb);
        EXPECT(gbc.readMem(0xb46c), 0x2a);
        // CB 2A 0170
        gbc.setState(0x23f, 0x5bc7, 0xa000, 0xcf39, 0xf865, 0xa417, 0x1, 0x0);
        gbc.writeMem(0x23f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5bc7);
        EXPECT(gbc.pc(), 0x241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0172
        gbc.setState(0x6f35, 0x388c, 0x2c00, 0x3d56, 0xe921, 0x2410, 0x1, 0x1);
        gbc.writeMem(0x6f35, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x388c);
        EXPECT(gbc.pc(), 0x6f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0173
        gbc.setState(0x89b4, 0xc6c0, 0x3870, 0x1a44, 0xae8, 0x5f82, 0x0, 0x1);
        gbc.writeMem(0x89b4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc6c0);
        EXPECT(gbc.pc(), 0x89b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89b4), 0xcb);
        EXPECT(gbc.readMem(0x89b5), 0x2a);
        // CB 2A 0174
        gbc.setState(0x78aa, 0x6, 0xa650, 0x3c0f, 0x6351, 0x537c, 0x1, 0x0);
        gbc.writeMem(0x78aa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6);
        EXPECT(gbc.pc(), 0x78ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0175
        gbc.setState(0x6a9f, 0xc126, 0x33d0, 0x445a, 0xa35, 0xcf1a, 0x1, 0x1);
        gbc.writeMem(0x6a9f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc126);
        EXPECT(gbc.pc(), 0x6aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0176
        gbc.setState(0xeb9c, 0xe2d6, 0xb070, 0xf29, 0x2cdb, 0x5bf2, 0x0, 0x0);
        gbc.writeMem(0xeb9c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe2d6);
        EXPECT(gbc.pc(), 0xeb9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb9c), 0xcb);
        EXPECT(gbc.readMem(0xeb9d), 0x2a);
        // CB 2A 0177
        gbc.setState(0x3a9d, 0xaffc, 0x6580, 0xb026, 0xcaf3, 0xd713, 0x1, 0x0);
        gbc.writeMem(0x3a9d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xaffc);
        EXPECT(gbc.pc(), 0x3a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0178
        gbc.setState(0x830f, 0xddb4, 0x6e60, 0x932, 0x65af, 0xcac0, 0x1, 0x0);
        gbc.writeMem(0x830f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xddb4);
        EXPECT(gbc.pc(), 0x8311);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x830f), 0xcb);
        EXPECT(gbc.readMem(0x8310), 0x2a);
        // CB 2A 0179
        gbc.setState(0xa4ee, 0x4ee1, 0x7c30, 0x5102, 0x8602, 0xd98f, 0x0, 0x0);
        gbc.writeMem(0xa4ee, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4ee1);
        EXPECT(gbc.pc(), 0xa4f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ee), 0xcb);
        EXPECT(gbc.readMem(0xa4ef), 0x2a);
        // CB 2A 017A
        gbc.setState(0xd651, 0x342c, 0x43f0, 0xd39a, 0x3ab5, 0x4cf2, 0x1, 0x0);
        gbc.writeMem(0xd651, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x342c);
        EXPECT(gbc.pc(), 0xd653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd651), 0xcb);
        EXPECT(gbc.readMem(0xd652), 0x2a);
        // CB 2A 017B
        gbc.setState(0x7971, 0x6eb0, 0x8f10, 0xe92e, 0x6ac3, 0x5004, 0x0, 0x0);
        gbc.writeMem(0x7971, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6eb0);
        EXPECT(gbc.pc(), 0x7973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 017C
        gbc.setState(0xd481, 0x7afc, 0x8c10, 0x9c8a, 0x4f76, 0x7b49, 0x1, 0x1);
        gbc.writeMem(0xd481, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7afc);
        EXPECT(gbc.pc(), 0xd483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd481), 0xcb);
        EXPECT(gbc.readMem(0xd482), 0x2a);
        // CB 2A 017D
        gbc.setState(0x66f8, 0x712b, 0xe320, 0x76b5, 0xdbb0, 0xe645, 0x0, 0x1);
        gbc.writeMem(0x66f8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x712b);
        EXPECT(gbc.pc(), 0x66fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 017E
        gbc.setState(0x3ec6, 0x8107, 0x9ca0, 0xf744, 0x7984, 0xf56, 0x1, 0x0);
        gbc.writeMem(0x3ec6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8107);
        EXPECT(gbc.pc(), 0x3ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 017F
        gbc.setState(0x4036, 0x80f9, 0xb790, 0x6b87, 0xf038, 0xea7f, 0x1, 0x1);
        gbc.writeMem(0x4036, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x80f9);
        EXPECT(gbc.pc(), 0x4038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0180
        gbc.setState(0x7601, 0x83be, 0xfc80, 0x5f3f, 0x93a8, 0xa36a, 0x0, 0x0);
        gbc.writeMem(0x7601, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x83be);
        EXPECT(gbc.pc(), 0x7603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0181
        gbc.setState(0x1d2e, 0xad82, 0x4f10, 0x8f0, 0x79ec, 0x5441, 0x0, 0x0);
        gbc.writeMem(0x1d2e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x1d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0182
        gbc.setState(0xb9f0, 0x1d9, 0x25d0, 0x3149, 0xa409, 0x952b, 0x0, 0x0);
        gbc.writeMem(0xb9f0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1d9);
        EXPECT(gbc.pc(), 0xb9f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f0), 0xcb);
        EXPECT(gbc.readMem(0xb9f1), 0x2a);
        // CB 2A 0183
        gbc.setState(0x2a00, 0x73e9, 0x6490, 0xfe2a, 0xb20f, 0x8b2b, 0x0, 0x1);
        gbc.writeMem(0x2a00, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x73e9);
        EXPECT(gbc.pc(), 0x2a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0184
        gbc.setState(0xc821, 0xc75f, 0x1560, 0x4a3b, 0x9436, 0x9aed, 0x0, 0x1);
        gbc.writeMem(0xc821, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc75f);
        EXPECT(gbc.pc(), 0xc823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc821), 0xcb);
        EXPECT(gbc.readMem(0xc822), 0x2a);
        // CB 2A 0185
        gbc.setState(0xc3a0, 0x1c13, 0x6a60, 0xb66b, 0x8d84, 0x9951, 0x0, 0x1);
        gbc.writeMem(0xc3a0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1c13);
        EXPECT(gbc.pc(), 0xc3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a0), 0xcb);
        EXPECT(gbc.readMem(0xc3a1), 0x2a);
        // CB 2A 0187
        gbc.setState(0x4344, 0x1a92, 0x7e10, 0x542f, 0xf564, 0xe62c, 0x0, 0x1);
        gbc.writeMem(0x4344, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1a92);
        EXPECT(gbc.pc(), 0x4346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0188
        gbc.setState(0x9a32, 0x3e40, 0xfb00, 0x2304, 0xd15, 0x4209, 0x1, 0x1);
        gbc.writeMem(0x9a32, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3e40);
        EXPECT(gbc.pc(), 0x9a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a32), 0xcb);
        EXPECT(gbc.readMem(0x9a33), 0x2a);
        // CB 2A 0189
        gbc.setState(0xccf9, 0xdf4c, 0xb2a0, 0x19df, 0x63ba, 0xf1bb, 0x0, 0x0);
        gbc.writeMem(0xccf9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdf4c);
        EXPECT(gbc.pc(), 0xccfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccf9), 0xcb);
        EXPECT(gbc.readMem(0xccfa), 0x2a);
        // CB 2A 018A
        gbc.setState(0x1807, 0x207b, 0xb220, 0xf0d3, 0x920a, 0x887, 0x1, 0x1);
        gbc.writeMem(0x1807, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x207b);
        EXPECT(gbc.pc(), 0x1809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 018C
        gbc.setState(0x820, 0x245d, 0x9550, 0x107c, 0x674a, 0x7e36, 0x1, 0x1);
        gbc.writeMem(0x820, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x245d);
        EXPECT(gbc.pc(), 0x822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 018D
        gbc.setState(0x613b, 0x8dd8, 0x86f0, 0x4834, 0x79d, 0xf2c5, 0x0, 0x0);
        gbc.writeMem(0x613b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8dd8);
        EXPECT(gbc.pc(), 0x613d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 018E
        gbc.setState(0x9cca, 0x385d, 0x1140, 0xf88b, 0x2a6a, 0xea21, 0x1, 0x1);
        gbc.writeMem(0x9cca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x385d);
        EXPECT(gbc.pc(), 0x9ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cca), 0xcb);
        EXPECT(gbc.readMem(0x9ccb), 0x2a);
        // CB 2A 018F
        gbc.setState(0xac23, 0xec5c, 0x3140, 0xd3c3, 0xe281, 0xf19a, 0x0, 0x0);
        gbc.writeMem(0xac23, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xec5c);
        EXPECT(gbc.pc(), 0xac25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac23), 0xcb);
        EXPECT(gbc.readMem(0xac24), 0x2a);
        // CB 2A 0190
        gbc.setState(0xeb31, 0xff9b, 0x45d0, 0x7cb2, 0x4816, 0xbeaa, 0x1, 0x0);
        gbc.writeMem(0xeb31, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xff9b);
        EXPECT(gbc.pc(), 0xeb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb31), 0xcb);
        EXPECT(gbc.readMem(0xeb32), 0x2a);
        // CB 2A 0191
        gbc.setState(0x7dc2, 0xc9c1, 0x8a10, 0xf300, 0xaba4, 0x8693, 0x0, 0x0);
        gbc.writeMem(0x7dc2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc9c1);
        EXPECT(gbc.pc(), 0x7dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0192
        gbc.setState(0x4346, 0x26f8, 0xcc40, 0xc730, 0xafa9, 0xf746, 0x1, 0x0);
        gbc.writeMem(0x4346, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x26f8);
        EXPECT(gbc.pc(), 0x4348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0193
        gbc.setState(0x4746, 0x2f55, 0x3cc0, 0x5ded, 0x6fa8, 0x9c0f, 0x1, 0x1);
        gbc.writeMem(0x4746, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2f55);
        EXPECT(gbc.pc(), 0x4748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0195
        gbc.setState(0xd181, 0x260f, 0x54c0, 0xfbee, 0xf2ae, 0xa14f, 0x1, 0x0);
        gbc.writeMem(0xd181, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x260f);
        EXPECT(gbc.pc(), 0xd183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd181), 0xcb);
        EXPECT(gbc.readMem(0xd182), 0x2a);
        // CB 2A 0196
        gbc.setState(0xdb1b, 0xaf53, 0x5c0, 0x2727, 0xbff4, 0x6421, 0x1, 0x1);
        gbc.writeMem(0xdb1b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xaf53);
        EXPECT(gbc.pc(), 0xdb1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb1b), 0xcb);
        EXPECT(gbc.readMem(0xdb1c), 0x2a);
        // CB 2A 0197
        gbc.setState(0x5a02, 0xa457, 0x37c0, 0x6c11, 0x9607, 0xf62b, 0x0, 0x0);
        gbc.writeMem(0x5a02, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa457);
        EXPECT(gbc.pc(), 0x5a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0198
        gbc.setState(0xb3c6, 0xdc58, 0x3890, 0xa513, 0x8ea6, 0x8ae9, 0x0, 0x1);
        gbc.writeMem(0xb3c6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xdc58);
        EXPECT(gbc.pc(), 0xb3c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c6), 0xcb);
        EXPECT(gbc.readMem(0xb3c7), 0x2a);
        // CB 2A 0199
        gbc.setState(0x1bf2, 0x25c, 0xfc10, 0x4683, 0x76ae, 0x94d9, 0x1, 0x0);
        gbc.writeMem(0x1bf2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x25c);
        EXPECT(gbc.pc(), 0x1bf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 019A
        gbc.setState(0x40dc, 0xbcc, 0x370, 0xb5f, 0x86d5, 0x9ffc, 0x1, 0x1);
        gbc.writeMem(0x40dc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbcc);
        EXPECT(gbc.pc(), 0x40de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 019B
        gbc.setState(0x6cc2, 0x566c, 0x60c0, 0x447a, 0x3e18, 0xcc0a, 0x0, 0x0);
        gbc.writeMem(0x6cc2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x566c);
        EXPECT(gbc.pc(), 0x6cc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 019C
        gbc.setState(0xb805, 0x4477, 0x4e70, 0x4d25, 0x8016, 0x28a8, 0x1, 0x0);
        gbc.writeMem(0xb805, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4477);
        EXPECT(gbc.pc(), 0xb807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb805), 0xcb);
        EXPECT(gbc.readMem(0xb806), 0x2a);
        // CB 2A 019D
        gbc.setState(0x7454, 0xc17e, 0xcd10, 0x7de, 0xe824, 0x4b2c, 0x1, 0x1);
        gbc.writeMem(0x7454, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc17e);
        EXPECT(gbc.pc(), 0x7456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 019E
        gbc.setState(0xe475, 0x58cb, 0x54a0, 0xfd8e, 0x45b0, 0x5970, 0x0, 0x1);
        gbc.writeMem(0xe475, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x58cb);
        EXPECT(gbc.pc(), 0xe477);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe475), 0xcb);
        EXPECT(gbc.readMem(0xe476), 0x2a);
        // CB 2A 019F
        gbc.setState(0x6391, 0x2972, 0xbbb0, 0xa02e, 0xd55a, 0x4524, 0x0, 0x1);
        gbc.writeMem(0x6391, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2972);
        EXPECT(gbc.pc(), 0x6393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01A0
        gbc.setState(0xc387, 0x51b8, 0x14a0, 0xdbb4, 0x3484, 0x70f6, 0x1, 0x0);
        gbc.writeMem(0xc387, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x51b8);
        EXPECT(gbc.pc(), 0xc389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc387), 0xcb);
        EXPECT(gbc.readMem(0xc388), 0x2a);
        // CB 2A 01A1
        gbc.setState(0xbf72, 0xe64d, 0x9720, 0xe7e2, 0x7cda, 0x8211, 0x1, 0x0);
        gbc.writeMem(0xbf72, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe64d);
        EXPECT(gbc.pc(), 0xbf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf72), 0xcb);
        EXPECT(gbc.readMem(0xbf73), 0x2a);
        // CB 2A 01A2
        gbc.setState(0x9769, 0xba06, 0x2870, 0x7650, 0x7252, 0xbfc1, 0x0, 0x0);
        gbc.writeMem(0x9769, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xba06);
        EXPECT(gbc.pc(), 0x976b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9769), 0xcb);
        EXPECT(gbc.readMem(0x976a), 0x2a);
        // CB 2A 01A3
        gbc.setState(0x1c9e, 0x75b8, 0x4620, 0x51d7, 0x75fb, 0xc65b, 0x1, 0x0);
        gbc.writeMem(0x1c9e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x75b8);
        EXPECT(gbc.pc(), 0x1ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01A4
        gbc.setState(0xdb21, 0x2d3e, 0x91e0, 0xd759, 0x38d, 0xeb36, 0x1, 0x1);
        gbc.writeMem(0xdb21, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2d3e);
        EXPECT(gbc.pc(), 0xdb23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb21), 0xcb);
        EXPECT(gbc.readMem(0xdb22), 0x2a);
        // CB 2A 01A5
        gbc.setState(0x3012, 0x6cb7, 0x20b0, 0xc754, 0xd4d7, 0x9fd0, 0x0, 0x0);
        gbc.writeMem(0x3012, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6cb7);
        EXPECT(gbc.pc(), 0x3014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01A6
        gbc.setState(0x52c1, 0xcb, 0x4650, 0x37f9, 0x149, 0x59ca, 0x1, 0x1);
        gbc.writeMem(0x52c1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcb);
        EXPECT(gbc.pc(), 0x52c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01A7
        gbc.setState(0xc145, 0xa1e7, 0xa550, 0x2791, 0x864f, 0x1116, 0x1, 0x0);
        gbc.writeMem(0xc145, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa1e7);
        EXPECT(gbc.pc(), 0xc147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc145), 0xcb);
        EXPECT(gbc.readMem(0xc146), 0x2a);
        // CB 2A 01A8
        gbc.setState(0xaed8, 0x8d2, 0xc2e0, 0xdcc7, 0xa9d8, 0x7881, 0x1, 0x1);
        gbc.writeMem(0xaed8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8d2);
        EXPECT(gbc.pc(), 0xaeda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed8), 0xcb);
        EXPECT(gbc.readMem(0xaed9), 0x2a);
        // CB 2A 01AA
        gbc.setState(0x92f5, 0x78c7, 0xcba0, 0x9465, 0x1b01, 0xbc50, 0x0, 0x0);
        gbc.writeMem(0x92f5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x78c7);
        EXPECT(gbc.pc(), 0x92f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92f5), 0xcb);
        EXPECT(gbc.readMem(0x92f6), 0x2a);
        // CB 2A 01AB
        gbc.setState(0x235b, 0x615a, 0x7da0, 0xfcff, 0xd0ac, 0xded8, 0x1, 0x0);
        gbc.writeMem(0x235b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x615a);
        EXPECT(gbc.pc(), 0x235d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01AC
        gbc.setState(0x41c, 0x73b6, 0xa200, 0x2ab2, 0xf95f, 0xc043, 0x0, 0x1);
        gbc.writeMem(0x41c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x73b6);
        EXPECT(gbc.pc(), 0x41e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01AF
        gbc.setState(0x7e9d, 0x2b64, 0x5bb0, 0xd246, 0xb5d7, 0x2b7d, 0x0, 0x1);
        gbc.writeMem(0x7e9d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2b64);
        EXPECT(gbc.pc(), 0x7e9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01B0
        gbc.setState(0x47ff, 0xfd99, 0x610, 0xa5f0, 0xaeb, 0xc005, 0x0, 0x0);
        gbc.writeMem(0x47ff, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfd99);
        EXPECT(gbc.pc(), 0x4801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01B1
        gbc.setState(0x6b8f, 0xf7cc, 0x1940, 0x3e69, 0x80ad, 0x288b, 0x1, 0x0);
        gbc.writeMem(0x6b8f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf7cc);
        EXPECT(gbc.pc(), 0x6b91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01B2
        gbc.setState(0x2122, 0xde44, 0xa910, 0xedcd, 0xb0d6, 0x36ea, 0x0, 0x0);
        gbc.writeMem(0x2122, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xde44);
        EXPECT(gbc.pc(), 0x2124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01B3
        gbc.setState(0x73e, 0xfc9a, 0x3ce0, 0x8886, 0x75b0, 0xc9b5, 0x0, 0x0);
        gbc.writeMem(0x73e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xfc9a);
        EXPECT(gbc.pc(), 0x740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01B4
        gbc.setState(0xd052, 0xc15a, 0xb820, 0x50ed, 0xb7fc, 0x5662, 0x0, 0x1);
        gbc.writeMem(0xd052, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc15a);
        EXPECT(gbc.pc(), 0xd054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd052), 0xcb);
        EXPECT(gbc.readMem(0xd053), 0x2a);
        // CB 2A 01B5
        gbc.setState(0xbc5d, 0x13e8, 0xa790, 0x8773, 0x31dc, 0x3956, 0x0, 0x1);
        gbc.writeMem(0xbc5d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x13e8);
        EXPECT(gbc.pc(), 0xbc5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5d), 0xcb);
        EXPECT(gbc.readMem(0xbc5e), 0x2a);
        // CB 2A 01B6
        gbc.setState(0x4f23, 0xebe0, 0x6220, 0xd11e, 0x97d2, 0xa20d, 0x1, 0x0);
        gbc.writeMem(0x4f23, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xebe0);
        EXPECT(gbc.pc(), 0x4f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01B7
        gbc.setState(0xe5fa, 0x8ef9, 0xd600, 0xb4f5, 0x38c, 0x2e8d, 0x0, 0x0);
        gbc.writeMem(0xe5fa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8ef9);
        EXPECT(gbc.pc(), 0xe5fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5fa), 0xcb);
        EXPECT(gbc.readMem(0xe5fb), 0x2a);
        // CB 2A 01B8
        gbc.setState(0xa84d, 0xa29b, 0xb6c0, 0x8019, 0xa4b9, 0x6257, 0x0, 0x1);
        gbc.writeMem(0xa84d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa29b);
        EXPECT(gbc.pc(), 0xa84f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84d), 0xcb);
        EXPECT(gbc.readMem(0xa84e), 0x2a);
        // CB 2A 01B9
        gbc.setState(0x4d50, 0x8e4a, 0xd490, 0x7073, 0x1c84, 0xffe, 0x0, 0x0);
        gbc.writeMem(0x4d50, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8e4a);
        EXPECT(gbc.pc(), 0x4d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01BA
        gbc.setState(0x89b7, 0x8a9a, 0xc440, 0x2f6b, 0x4e32, 0x485c, 0x1, 0x0);
        gbc.writeMem(0x89b7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8a9a);
        EXPECT(gbc.pc(), 0x89b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89b7), 0xcb);
        EXPECT(gbc.readMem(0x89b8), 0x2a);
        // CB 2A 01BB
        gbc.setState(0xa96, 0xe6db, 0xe260, 0x2f71, 0xe052, 0x26d1, 0x1, 0x0);
        gbc.writeMem(0xa96, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe6db);
        EXPECT(gbc.pc(), 0xa98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01BC
        gbc.setState(0x9126, 0x248d, 0x81a0, 0xfd33, 0x5a13, 0x4c18, 0x1, 0x1);
        gbc.writeMem(0x9126, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x248d);
        EXPECT(gbc.pc(), 0x9128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9126), 0xcb);
        EXPECT(gbc.readMem(0x9127), 0x2a);
        // CB 2A 01BD
        gbc.setState(0x2ed3, 0x9287, 0x440, 0x1867, 0x1adf, 0x61, 0x1, 0x0);
        gbc.writeMem(0x2ed3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9287);
        EXPECT(gbc.pc(), 0x2ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01BE
        gbc.setState(0x93ab, 0x91ce, 0x3fa0, 0x153c, 0x367, 0x5d14, 0x1, 0x0);
        gbc.writeMem(0x93ab, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x91ce);
        EXPECT(gbc.pc(), 0x93ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ab), 0xcb);
        EXPECT(gbc.readMem(0x93ac), 0x2a);
        // CB 2A 01BF
        gbc.setState(0x1309, 0x1652, 0x7000, 0x5445, 0x3c8e, 0xc08b, 0x0, 0x0);
        gbc.writeMem(0x1309, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1652);
        EXPECT(gbc.pc(), 0x130b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01C0
        gbc.setState(0x932f, 0x8d9d, 0xfae0, 0x5b1, 0x11b5, 0x1814, 0x0, 0x0);
        gbc.writeMem(0x932f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8d9d);
        EXPECT(gbc.pc(), 0x9331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0xcb);
        EXPECT(gbc.readMem(0x9330), 0x2a);
        // CB 2A 01C1
        gbc.setState(0xac12, 0x899a, 0x4510, 0x36bb, 0xb84d, 0xc0cb, 0x1, 0x1);
        gbc.writeMem(0xac12, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x899a);
        EXPECT(gbc.pc(), 0xac14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac12), 0xcb);
        EXPECT(gbc.readMem(0xac13), 0x2a);
        // CB 2A 01C2
        gbc.setState(0xcbad, 0x17e2, 0xc2b0, 0x14e6, 0x3ebe, 0xfaba, 0x1, 0x0);
        gbc.writeMem(0xcbad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x17e2);
        EXPECT(gbc.pc(), 0xcbaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbad), 0xcb);
        EXPECT(gbc.readMem(0xcbae), 0x2a);
        // CB 2A 01C3
        gbc.setState(0x39db, 0x3877, 0xcc00, 0x3f1b, 0x7a0f, 0x780a, 0x0, 0x1);
        gbc.writeMem(0x39db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3877);
        EXPECT(gbc.pc(), 0x39dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01C4
        gbc.setState(0x5a76, 0x23f2, 0x1970, 0x624e, 0x5a7f, 0x46c3, 0x1, 0x1);
        gbc.writeMem(0x5a76, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x23f2);
        EXPECT(gbc.pc(), 0x5a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01C6
        gbc.setState(0xd077, 0xdd4e, 0x2b00, 0x3aca, 0xdb24, 0x3877, 0x1, 0x1);
        gbc.writeMem(0xd077, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdd4e);
        EXPECT(gbc.pc(), 0xd079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd077), 0xcb);
        EXPECT(gbc.readMem(0xd078), 0x2a);
        // CB 2A 01C7
        gbc.setState(0xa08c, 0x343f, 0x9c70, 0xf685, 0x15a4, 0xb66c, 0x1, 0x1);
        gbc.writeMem(0xa08c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x343f);
        EXPECT(gbc.pc(), 0xa08e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa08c), 0xcb);
        EXPECT(gbc.readMem(0xa08d), 0x2a);
        // CB 2A 01C8
        gbc.setState(0xa1c7, 0x7e67, 0x76a0, 0xdc05, 0xe76, 0x527c, 0x1, 0x0);
        gbc.writeMem(0xa1c7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7e67);
        EXPECT(gbc.pc(), 0xa1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c7), 0xcb);
        EXPECT(gbc.readMem(0xa1c8), 0x2a);
        // CB 2A 01C9
        gbc.setState(0xbf18, 0xc42c, 0xf6a0, 0xcfc1, 0xc64f, 0xbc67, 0x0, 0x0);
        gbc.writeMem(0xbf18, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc42c);
        EXPECT(gbc.pc(), 0xbf1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf18), 0xcb);
        EXPECT(gbc.readMem(0xbf19), 0x2a);
        // CB 2A 01CA
        gbc.setState(0x6da4, 0x2ac5, 0x20, 0x14fa, 0x386c, 0xba70, 0x0, 0x0);
        gbc.writeMem(0x6da4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2ac5);
        EXPECT(gbc.pc(), 0x6da6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01CB
        gbc.setState(0x2faa, 0x331b, 0xf40, 0x547c, 0xdad7, 0xe381, 0x1, 0x1);
        gbc.writeMem(0x2faa, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x331b);
        EXPECT(gbc.pc(), 0x2fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01CC
        gbc.setState(0x1f92, 0xf20d, 0xb690, 0xc089, 0x83df, 0x5615, 0x0, 0x0);
        gbc.writeMem(0x1f92, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf20d);
        EXPECT(gbc.pc(), 0x1f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01CD
        gbc.setState(0x12, 0x927f, 0xdfb0, 0x7af1, 0x8c1e, 0x1ed2, 0x0, 0x1);
        gbc.writeMem(0x12, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x927f);
        EXPECT(gbc.pc(), 0x14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01CE
        gbc.setState(0x3d28, 0xded2, 0xfcf0, 0x87f6, 0xc506, 0xa14a, 0x1, 0x1);
        gbc.writeMem(0x3d28, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xded2);
        EXPECT(gbc.pc(), 0x3d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01CF
        gbc.setState(0x9bb, 0xe775, 0xe830, 0x2341, 0x817e, 0x44f2, 0x0, 0x0);
        gbc.writeMem(0x9bb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe775);
        EXPECT(gbc.pc(), 0x9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01D0
        gbc.setState(0x965, 0x80f, 0x4890, 0xc9ea, 0x32d, 0xf696, 0x0, 0x1);
        gbc.writeMem(0x965, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x80f);
        EXPECT(gbc.pc(), 0x967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01D1
        gbc.setState(0xd3ed, 0xfb, 0x7830, 0xcc8e, 0x5a70, 0x78b9, 0x0, 0x0);
        gbc.writeMem(0xd3ed, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfb);
        EXPECT(gbc.pc(), 0xd3ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ed), 0xcb);
        EXPECT(gbc.readMem(0xd3ee), 0x2a);
        // CB 2A 01D2
        gbc.setState(0x2af5, 0x4d0a, 0x92d0, 0xaca7, 0x6263, 0x1b0e, 0x0, 0x1);
        gbc.writeMem(0x2af5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4d0a);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01D3
        gbc.setState(0xc2d6, 0xa80e, 0x500, 0xc3d7, 0x926e, 0x8854, 0x1, 0x0);
        gbc.writeMem(0xc2d6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa80e);
        EXPECT(gbc.pc(), 0xc2d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d6), 0xcb);
        EXPECT(gbc.readMem(0xc2d7), 0x2a);
        // CB 2A 01D4
        gbc.setState(0xd07b, 0xfa9a, 0x6c70, 0x52c2, 0x33bb, 0x8408, 0x1, 0x0);
        gbc.writeMem(0xd07b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfa9a);
        EXPECT(gbc.pc(), 0xd07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07b), 0xcb);
        EXPECT(gbc.readMem(0xd07c), 0x2a);
        // CB 2A 01D5
        gbc.setState(0x6843, 0x1696, 0x24a0, 0x2333, 0x1179, 0x6ada, 0x1, 0x0);
        gbc.writeMem(0x6843, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1696);
        EXPECT(gbc.pc(), 0x6845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01D6
        gbc.setState(0xed71, 0x3b19, 0xbbc0, 0xd703, 0x440a, 0x477c, 0x0, 0x1);
        gbc.writeMem(0xed71, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3b19);
        EXPECT(gbc.pc(), 0xed73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed71), 0xcb);
        EXPECT(gbc.readMem(0xed72), 0x2a);
        // CB 2A 01D7
        gbc.setState(0xe9f7, 0x8d86, 0xe650, 0x4808, 0x2e58, 0x40b1, 0x1, 0x0);
        gbc.writeMem(0xe9f7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8d86);
        EXPECT(gbc.pc(), 0xe9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f7), 0xcb);
        EXPECT(gbc.readMem(0xe9f8), 0x2a);
        // CB 2A 01D8
        gbc.setState(0x8ff5, 0xeb4e, 0xeb90, 0xb37c, 0x1045, 0xcbcd, 0x0, 0x1);
        gbc.writeMem(0x8ff5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeb4e);
        EXPECT(gbc.pc(), 0x8ff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff5), 0xcb);
        EXPECT(gbc.readMem(0x8ff6), 0x2a);
        // CB 2A 01D9
        gbc.setState(0x3554, 0xe08b, 0x5170, 0x5a92, 0x2e99, 0x7542, 0x0, 0x0);
        gbc.writeMem(0x3554, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe08b);
        EXPECT(gbc.pc(), 0x3556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01DA
        gbc.setState(0xbcfc, 0x2508, 0x5f30, 0xdf55, 0x4971, 0x23b5, 0x0, 0x0);
        gbc.writeMem(0xbcfc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0xbcfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcfc), 0xcb);
        EXPECT(gbc.readMem(0xbcfd), 0x2a);
        // CB 2A 01DB
        gbc.setState(0xcdcb, 0x2cef, 0x2f0, 0x103, 0x6d07, 0xd12c, 0x1, 0x0);
        gbc.writeMem(0xcdcb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2cef);
        EXPECT(gbc.pc(), 0xcdcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdcb), 0xcb);
        EXPECT(gbc.readMem(0xcdcc), 0x2a);
        // CB 2A 01DC
        gbc.setState(0xe71, 0x5e28, 0x5ef0, 0x8fc7, 0xe806, 0x7ca2, 0x0, 0x1);
        gbc.writeMem(0xe71, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5e28);
        EXPECT(gbc.pc(), 0xe73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01DD
        gbc.setState(0x6fa4, 0xd111, 0x550, 0xebbe, 0x98b4, 0x2fd6, 0x0, 0x1);
        gbc.writeMem(0x6fa4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd111);
        EXPECT(gbc.pc(), 0x6fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01DE
        gbc.setState(0x26af, 0xf8b8, 0x5a20, 0xac93, 0x5586, 0x430d, 0x0, 0x1);
        gbc.writeMem(0x26af, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf8b8);
        EXPECT(gbc.pc(), 0x26b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01DF
        gbc.setState(0x9fe7, 0x62bd, 0x1cc0, 0xb1a6, 0xf7e6, 0x34bd, 0x0, 0x0);
        gbc.writeMem(0x9fe7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x62bd);
        EXPECT(gbc.pc(), 0x9fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fe7), 0xcb);
        EXPECT(gbc.readMem(0x9fe8), 0x2a);
        // CB 2A 01E0
        gbc.setState(0x8662, 0x9b3d, 0xc580, 0x79fb, 0x965, 0x2533, 0x0, 0x1);
        gbc.writeMem(0x8662, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9b3d);
        EXPECT(gbc.pc(), 0x8664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8662), 0xcb);
        EXPECT(gbc.readMem(0x8663), 0x2a);
        // CB 2A 01E1
        gbc.setState(0x7be7, 0xb09c, 0x2a0, 0xa55f, 0x353d, 0x8aa2, 0x0, 0x1);
        gbc.writeMem(0x7be7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb09c);
        EXPECT(gbc.pc(), 0x7be9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01E2
        gbc.setState(0x56fc, 0x4f60, 0xfad0, 0xce38, 0x52c7, 0x7724, 0x0, 0x0);
        gbc.writeMem(0x56fc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4f60);
        EXPECT(gbc.pc(), 0x56fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01E3
        gbc.setState(0xd784, 0xa56, 0x45a0, 0x4d5b, 0xa597, 0xd93e, 0x1, 0x0);
        gbc.writeMem(0xd784, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa56);
        EXPECT(gbc.pc(), 0xd786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd784), 0xcb);
        EXPECT(gbc.readMem(0xd785), 0x2a);
        // CB 2A 01E4
        gbc.setState(0x71e4, 0xaf17, 0x47c0, 0x482c, 0x7a09, 0x3c40, 0x1, 0x0);
        gbc.writeMem(0x71e4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xaf17);
        EXPECT(gbc.pc(), 0x71e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01E5
        gbc.setState(0x2edd, 0x2359, 0x5b60, 0xc4f6, 0x7449, 0x9e2b, 0x1, 0x0);
        gbc.writeMem(0x2edd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2359);
        EXPECT(gbc.pc(), 0x2edf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01E6
        gbc.setState(0xd4ec, 0x9a69, 0xdf40, 0x21c, 0x4273, 0x6da3, 0x1, 0x0);
        gbc.writeMem(0xd4ec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a69);
        EXPECT(gbc.pc(), 0xd4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ec), 0xcb);
        EXPECT(gbc.readMem(0xd4ed), 0x2a);
        // CB 2A 01E7
        gbc.setState(0x28da, 0x95df, 0xc740, 0x4e4c, 0xe6ad, 0x3adf, 0x0, 0x0);
        gbc.writeMem(0x28da, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x95df);
        EXPECT(gbc.pc(), 0x28dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01E8
        gbc.setState(0xb0ad, 0x89ed, 0x6690, 0x6c48, 0x1c4e, 0x3519, 0x0, 0x1);
        gbc.writeMem(0xb0ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x89ed);
        EXPECT(gbc.pc(), 0xb0af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ad), 0xcb);
        EXPECT(gbc.readMem(0xb0ae), 0x2a);
        // CB 2A 01E9
        gbc.setState(0x7346, 0x929e, 0xcd30, 0x77cf, 0x960f, 0xfb7b, 0x1, 0x1);
        gbc.writeMem(0x7346, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x929e);
        EXPECT(gbc.pc(), 0x7348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01EA
        gbc.setState(0xafd5, 0x6263, 0xe020, 0xa209, 0xb1f5, 0x963b, 0x0, 0x1);
        gbc.writeMem(0xafd5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6263);
        EXPECT(gbc.pc(), 0xafd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd5), 0xcb);
        EXPECT(gbc.readMem(0xafd6), 0x2a);
        // CB 2A 01EB
        gbc.setState(0x44fd, 0x499a, 0x24f0, 0x2891, 0x4516, 0x736d, 0x0, 0x0);
        gbc.writeMem(0x44fd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x499a);
        EXPECT(gbc.pc(), 0x44ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01EC
        gbc.setState(0x389f, 0x7959, 0x4930, 0x6e18, 0x46a6, 0x98e5, 0x0, 0x1);
        gbc.writeMem(0x389f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7959);
        EXPECT(gbc.pc(), 0x38a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01ED
        gbc.setState(0x8997, 0xb49b, 0x1500, 0xf63e, 0x9c35, 0xe7d5, 0x0, 0x1);
        gbc.writeMem(0x8997, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0x8999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8997), 0xcb);
        EXPECT(gbc.readMem(0x8998), 0x2a);
        // CB 2A 01EE
        gbc.setState(0x85c2, 0x72fd, 0xed00, 0x843e, 0x9176, 0xba52, 0x1, 0x1);
        gbc.writeMem(0x85c2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x72fd);
        EXPECT(gbc.pc(), 0x85c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c2), 0xcb);
        EXPECT(gbc.readMem(0x85c3), 0x2a);
        // CB 2A 01EF
        gbc.setState(0x1eea, 0xabbc, 0xe530, 0x7f77, 0x987, 0xe3b7, 0x1, 0x0);
        gbc.writeMem(0x1eea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xabbc);
        EXPECT(gbc.pc(), 0x1eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01F0
        gbc.setState(0x5818, 0x4c84, 0xac10, 0xc728, 0x5b8d, 0x4db4, 0x0, 0x0);
        gbc.writeMem(0x5818, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4c84);
        EXPECT(gbc.pc(), 0x581a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01F1
        gbc.setState(0x84d5, 0xb49e, 0x9800, 0x1de1, 0x86ea, 0x949e, 0x0, 0x1);
        gbc.writeMem(0x84d5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb49e);
        EXPECT(gbc.pc(), 0x84d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d5), 0xcb);
        EXPECT(gbc.readMem(0x84d6), 0x2a);
        // CB 2A 01F2
        gbc.setState(0x646f, 0xa936, 0xd6c0, 0x3d7f, 0xbd3, 0x6857, 0x0, 0x0);
        gbc.writeMem(0x646f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa936);
        EXPECT(gbc.pc(), 0x6471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01F3
        gbc.setState(0xad4, 0xd4ed, 0xde90, 0x8371, 0x939e, 0xa7dc, 0x1, 0x1);
        gbc.writeMem(0xad4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd4ed);
        EXPECT(gbc.pc(), 0xad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01F4
        gbc.setState(0xf13, 0x7bf, 0xe4c0, 0x9b25, 0x4693, 0xa930, 0x1, 0x0);
        gbc.writeMem(0xf13, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7bf);
        EXPECT(gbc.pc(), 0xf15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01F5
        gbc.setState(0x1567, 0x58be, 0xfa0, 0x5cec, 0xb0d3, 0x1f3e, 0x1, 0x1);
        gbc.writeMem(0x1567, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x58be);
        EXPECT(gbc.pc(), 0x1569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01F6
        gbc.setState(0x4eaf, 0x7239, 0x7e10, 0x81ad, 0x72a4, 0x1937, 0x1, 0x1);
        gbc.writeMem(0x4eaf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7239);
        EXPECT(gbc.pc(), 0x4eb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01F7
        gbc.setState(0xee34, 0x9c90, 0x4a70, 0x6339, 0xfc39, 0xe645, 0x0, 0x1);
        gbc.writeMem(0xee34, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9c90);
        EXPECT(gbc.pc(), 0xee36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee34), 0xcb);
        EXPECT(gbc.readMem(0xee35), 0x2a);
        // CB 2A 01F8
        gbc.setState(0x53e3, 0x5605, 0xc980, 0xa905, 0xa1cb, 0xdd22, 0x1, 0x0);
        gbc.writeMem(0x53e3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5605);
        EXPECT(gbc.pc(), 0x53e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01F9
        gbc.setState(0x4229, 0xd209, 0x45b0, 0xb676, 0x621a, 0x21c, 0x0, 0x1);
        gbc.writeMem(0x4229, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd209);
        EXPECT(gbc.pc(), 0x422b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01FA
        gbc.setState(0x9124, 0x9e14, 0xedf0, 0x9cf, 0x470, 0x33de, 0x1, 0x0);
        gbc.writeMem(0x9124, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9e14);
        EXPECT(gbc.pc(), 0x9126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9124), 0xcb);
        EXPECT(gbc.readMem(0x9125), 0x2a);
        // CB 2A 01FB
        gbc.setState(0x5d46, 0xf8f4, 0x4150, 0x9689, 0x8093, 0xb7ae, 0x0, 0x1);
        gbc.writeMem(0x5d46, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf8f4);
        EXPECT(gbc.pc(), 0x5d48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01FC
        gbc.setState(0x57ad, 0xa71b, 0x3560, 0xb180, 0xbd3c, 0xb815, 0x0, 0x1);
        gbc.writeMem(0x57ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa71b);
        EXPECT(gbc.pc(), 0x57af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 01FD
        gbc.setState(0xf16, 0x40e1, 0x6840, 0x1bc7, 0x46e3, 0x99d9, 0x1, 0x0);
        gbc.writeMem(0xf16, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x40e1);
        EXPECT(gbc.pc(), 0xf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01FE
        gbc.setState(0x1958, 0xf1ff, 0x9c00, 0x3a84, 0x9005, 0x2a32, 0x0, 0x0);
        gbc.writeMem(0x1958, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf1ff);
        EXPECT(gbc.pc(), 0x195a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 01FF
        gbc.setState(0xb730, 0x86f7, 0x90, 0x869c, 0x225b, 0xc973, 0x0, 0x1);
        gbc.writeMem(0xb730, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x86f7);
        EXPECT(gbc.pc(), 0xb732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb730), 0xcb);
        EXPECT(gbc.readMem(0xb731), 0x2a);
        // CB 2A 0200
        gbc.setState(0x7976, 0x6f0c, 0x190, 0x9409, 0xcfeb, 0xd02, 0x1, 0x0);
        gbc.writeMem(0x7976, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6f0c);
        EXPECT(gbc.pc(), 0x7978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0201
        gbc.setState(0xe18b, 0x8949, 0x5340, 0x51ff, 0x66e9, 0x6970, 0x1, 0x1);
        gbc.writeMem(0xe18b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8949);
        EXPECT(gbc.pc(), 0xe18d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe18b), 0xcb);
        EXPECT(gbc.readMem(0xe18c), 0x2a);
        // CB 2A 0202
        gbc.setState(0x6950, 0x6726, 0x63e0, 0x5754, 0x4893, 0x1c96, 0x0, 0x0);
        gbc.writeMem(0x6950, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6726);
        EXPECT(gbc.pc(), 0x6952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0203
        gbc.setState(0x3a2, 0x305d, 0x8970, 0xd791, 0x5b1c, 0xead0, 0x1, 0x1);
        gbc.writeMem(0x3a2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x305d);
        EXPECT(gbc.pc(), 0x3a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0204
        gbc.setState(0xabba, 0xfae4, 0x64d0, 0x1812, 0x6863, 0xb58, 0x1, 0x1);
        gbc.writeMem(0xabba, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xfae4);
        EXPECT(gbc.pc(), 0xabbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabba), 0xcb);
        EXPECT(gbc.readMem(0xabbb), 0x2a);
        // CB 2A 0205
        gbc.setState(0xcc4f, 0x76d3, 0xd7b0, 0x199d, 0x1d4c, 0x36c4, 0x0, 0x0);
        gbc.writeMem(0xcc4f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x76d3);
        EXPECT(gbc.pc(), 0xcc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4f), 0xcb);
        EXPECT(gbc.readMem(0xcc50), 0x2a);
        // CB 2A 0206
        gbc.setState(0xce37, 0x5aa6, 0x5100, 0xcf95, 0x4b8, 0x7b65, 0x0, 0x0);
        gbc.writeMem(0xce37, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5aa6);
        EXPECT(gbc.pc(), 0xce39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce37), 0xcb);
        EXPECT(gbc.readMem(0xce38), 0x2a);
        // CB 2A 0207
        gbc.setState(0x67c6, 0xc8a0, 0x7560, 0x5cd0, 0xf8f5, 0xd883, 0x0, 0x1);
        gbc.writeMem(0x67c6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc8a0);
        EXPECT(gbc.pc(), 0x67c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0208
        gbc.setState(0x2511, 0x85f9, 0x4a70, 0xd139, 0x8063, 0xba7c, 0x0, 0x0);
        gbc.writeMem(0x2511, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x85f9);
        EXPECT(gbc.pc(), 0x2513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0209
        gbc.setState(0x952f, 0xc658, 0xbde0, 0xa6af, 0x2a7, 0x4d83, 0x0, 0x1);
        gbc.writeMem(0x952f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc658);
        EXPECT(gbc.pc(), 0x9531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952f), 0xcb);
        EXPECT(gbc.readMem(0x9530), 0x2a);
        // CB 2A 020A
        gbc.setState(0x5ee7, 0x3429, 0xb830, 0xf259, 0x99b9, 0xd9a0, 0x1, 0x1);
        gbc.writeMem(0x5ee7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3429);
        EXPECT(gbc.pc(), 0x5ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 020B
        gbc.setState(0x2463, 0xc7ef, 0xd5f0, 0x2619, 0xdd3b, 0x23d4, 0x0, 0x0);
        gbc.writeMem(0x2463, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc7ef);
        EXPECT(gbc.pc(), 0x2465);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 020C
        gbc.setState(0x5da0, 0x539, 0x41f0, 0x3a03, 0x804c, 0xdbbc, 0x1, 0x0);
        gbc.writeMem(0x5da0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x539);
        EXPECT(gbc.pc(), 0x5da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 020D
        gbc.setState(0x1bb1, 0xbb5a, 0x85f0, 0xf7b9, 0x2d8e, 0xaaa4, 0x0, 0x0);
        gbc.writeMem(0x1bb1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbb5a);
        EXPECT(gbc.pc(), 0x1bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 020E
        gbc.setState(0xbe4d, 0x73eb, 0xac70, 0xb1f6, 0xe7b9, 0x6f87, 0x0, 0x0);
        gbc.writeMem(0xbe4d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x73eb);
        EXPECT(gbc.pc(), 0xbe4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe4d), 0xcb);
        EXPECT(gbc.readMem(0xbe4e), 0x2a);
        // CB 2A 020F
        gbc.setState(0x4e91, 0x3bff, 0x6a0, 0x7bac, 0xf57e, 0x4b6, 0x0, 0x0);
        gbc.writeMem(0x4e91, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3bff);
        EXPECT(gbc.pc(), 0x4e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0210
        gbc.setState(0x8976, 0x1f1b, 0xa290, 0xbf7e, 0xdf7e, 0x30a6, 0x1, 0x1);
        gbc.writeMem(0x8976, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1f1b);
        EXPECT(gbc.pc(), 0x8978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8976), 0xcb);
        EXPECT(gbc.readMem(0x8977), 0x2a);
        // CB 2A 0211
        gbc.setState(0xcd6e, 0xebff, 0x4f40, 0x38bf, 0x1220, 0x7f06, 0x1, 0x1);
        gbc.writeMem(0xcd6e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xebff);
        EXPECT(gbc.pc(), 0xcd70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6e), 0xcb);
        EXPECT(gbc.readMem(0xcd6f), 0x2a);
        // CB 2A 0212
        gbc.setState(0x6d09, 0x4022, 0xdda0, 0x1a2a, 0xde62, 0x8221, 0x0, 0x0);
        gbc.writeMem(0x6d09, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4022);
        EXPECT(gbc.pc(), 0x6d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0213
        gbc.setState(0x5408, 0xdf36, 0x6bd0, 0x7df1, 0x263a, 0xe311, 0x1, 0x0);
        gbc.writeMem(0x5408, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xdf36);
        EXPECT(gbc.pc(), 0x540a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0214
        gbc.setState(0x5378, 0x300b, 0x6160, 0x10f4, 0xd493, 0x267f, 0x0, 0x1);
        gbc.writeMem(0x5378, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x300b);
        EXPECT(gbc.pc(), 0x537a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0215
        gbc.setState(0x3b9c, 0x63d, 0x2ac0, 0x9b4e, 0x1c32, 0x3b25, 0x1, 0x1);
        gbc.writeMem(0x3b9c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x63d);
        EXPECT(gbc.pc(), 0x3b9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0216
        gbc.setState(0x464b, 0x3c18, 0xc7d0, 0x447d, 0xb85a, 0x8d18, 0x1, 0x0);
        gbc.writeMem(0x464b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3c18);
        EXPECT(gbc.pc(), 0x464d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0217
        gbc.setState(0x652c, 0x649a, 0x43e0, 0x84cf, 0x7b9b, 0x27d0, 0x1, 0x1);
        gbc.writeMem(0x652c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x649a);
        EXPECT(gbc.pc(), 0x652e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0218
        gbc.setState(0x5c03, 0xd7a8, 0xd230, 0x3185, 0xb5e7, 0x552d, 0x1, 0x1);
        gbc.writeMem(0x5c03, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd7a8);
        EXPECT(gbc.pc(), 0x5c05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0219
        gbc.setState(0x8e4c, 0xa8ec, 0xcd30, 0xfef7, 0x44ee, 0x6eee, 0x1, 0x1);
        gbc.writeMem(0x8e4c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa8ec);
        EXPECT(gbc.pc(), 0x8e4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e4c), 0xcb);
        EXPECT(gbc.readMem(0x8e4d), 0x2a);
        // CB 2A 021A
        gbc.setState(0xba39, 0x8c17, 0x1220, 0xbdc2, 0xa352, 0xc098, 0x0, 0x0);
        gbc.writeMem(0xba39, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8c17);
        EXPECT(gbc.pc(), 0xba3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba39), 0xcb);
        EXPECT(gbc.readMem(0xba3a), 0x2a);
        // CB 2A 021B
        gbc.setState(0x9004, 0x2d82, 0x8eb0, 0x6891, 0x27ce, 0x713a, 0x0, 0x1);
        gbc.writeMem(0x9004, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2d82);
        EXPECT(gbc.pc(), 0x9006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9004), 0xcb);
        EXPECT(gbc.readMem(0x9005), 0x2a);
        // CB 2A 021C
        gbc.setState(0x11e1, 0x2452, 0x3790, 0x2a43, 0x4575, 0xf250, 0x0, 0x1);
        gbc.writeMem(0x11e1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2452);
        EXPECT(gbc.pc(), 0x11e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 021D
        gbc.setState(0x9900, 0x1d53, 0x4660, 0xfa6c, 0x310e, 0x3a3b, 0x0, 0x1);
        gbc.writeMem(0x9900, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1d53);
        EXPECT(gbc.pc(), 0x9902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9900), 0xcb);
        EXPECT(gbc.readMem(0x9901), 0x2a);
        // CB 2A 021E
        gbc.setState(0x10db, 0xa237, 0x8c30, 0x569e, 0x1671, 0x24d1, 0x1, 0x1);
        gbc.writeMem(0x10db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa237);
        EXPECT(gbc.pc(), 0x10dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 021F
        gbc.setState(0xa6b6, 0x7a64, 0x4350, 0x3822, 0xcd44, 0x5cbd, 0x1, 0x1);
        gbc.writeMem(0xa6b6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7a64);
        EXPECT(gbc.pc(), 0xa6b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b6), 0xcb);
        EXPECT(gbc.readMem(0xa6b7), 0x2a);
        // CB 2A 0220
        gbc.setState(0xc44c, 0x243b, 0x9240, 0x324e, 0xdd3a, 0xa8c1, 0x1, 0x0);
        gbc.writeMem(0xc44c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x243b);
        EXPECT(gbc.pc(), 0xc44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc44c), 0xcb);
        EXPECT(gbc.readMem(0xc44d), 0x2a);
        // CB 2A 0221
        gbc.setState(0x77fc, 0x7d08, 0x4390, 0x80ed, 0x2a46, 0x896e, 0x1, 0x0);
        gbc.writeMem(0x77fc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7d08);
        EXPECT(gbc.pc(), 0x77fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0222
        gbc.setState(0xbd28, 0xa974, 0x4e50, 0xb9a1, 0x1000, 0xbe16, 0x0, 0x0);
        gbc.writeMem(0xbd28, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa974);
        EXPECT(gbc.pc(), 0xbd2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd28), 0xcb);
        EXPECT(gbc.readMem(0xbd29), 0x2a);
        // CB 2A 0223
        gbc.setState(0x5031, 0x1d5, 0x9c0, 0xf2d5, 0x93ec, 0x4a45, 0x1, 0x1);
        gbc.writeMem(0x5031, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1d5);
        EXPECT(gbc.pc(), 0x5033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0224
        gbc.setState(0x4c1e, 0xe1e1, 0x8a80, 0x36c1, 0x55fc, 0xecb8, 0x1, 0x1);
        gbc.writeMem(0x4c1e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe1e1);
        EXPECT(gbc.pc(), 0x4c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0225
        gbc.setState(0x52ea, 0x4c5b, 0x1d0, 0xf133, 0x1388, 0xba70, 0x0, 0x0);
        gbc.writeMem(0x52ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4c5b);
        EXPECT(gbc.pc(), 0x52ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0226
        gbc.setState(0xaa75, 0xeca4, 0x59c0, 0x4400, 0x6dff, 0x7ff4, 0x0, 0x0);
        gbc.writeMem(0xaa75, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xeca4);
        EXPECT(gbc.pc(), 0xaa77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa75), 0xcb);
        EXPECT(gbc.readMem(0xaa76), 0x2a);
        // CB 2A 0227
        gbc.setState(0x8e1c, 0x5ed8, 0x7b70, 0x14aa, 0xacd0, 0x16b3, 0x0, 0x1);
        gbc.writeMem(0x8e1c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5ed8);
        EXPECT(gbc.pc(), 0x8e1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1c), 0xcb);
        EXPECT(gbc.readMem(0x8e1d), 0x2a);
        // CB 2A 0229
        gbc.setState(0xaf9a, 0x8ec0, 0x4a20, 0x6a2d, 0xfc62, 0x88e9, 0x0, 0x0);
        gbc.writeMem(0xaf9a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8ec0);
        EXPECT(gbc.pc(), 0xaf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9a), 0xcb);
        EXPECT(gbc.readMem(0xaf9b), 0x2a);
        // CB 2A 022A
        gbc.setState(0x4c42, 0xe206, 0x7fc0, 0xd9df, 0x2f1c, 0xe13, 0x0, 0x1);
        gbc.writeMem(0x4c42, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe206);
        EXPECT(gbc.pc(), 0x4c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 022B
        gbc.setState(0xd088, 0x1bb, 0x2f50, 0x75a0, 0xff1f, 0xb776, 0x1, 0x0);
        gbc.writeMem(0xd088, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1bb);
        EXPECT(gbc.pc(), 0xd08a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd088), 0xcb);
        EXPECT(gbc.readMem(0xd089), 0x2a);
        // CB 2A 022C
        gbc.setState(0xac74, 0x6293, 0x8b0, 0x633f, 0x9330, 0x6b31, 0x0, 0x0);
        gbc.writeMem(0xac74, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6293);
        EXPECT(gbc.pc(), 0xac76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac74), 0xcb);
        EXPECT(gbc.readMem(0xac75), 0x2a);
        // CB 2A 022D
        gbc.setState(0xd3ea, 0xb5ae, 0xf9e0, 0x9b87, 0xdec7, 0x463c, 0x1, 0x1);
        gbc.writeMem(0xd3ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb5ae);
        EXPECT(gbc.pc(), 0xd3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ea), 0xcb);
        EXPECT(gbc.readMem(0xd3eb), 0x2a);
        // CB 2A 022E
        gbc.setState(0x26a2, 0xe3e5, 0xddc0, 0xac53, 0x963, 0xab71, 0x1, 0x0);
        gbc.writeMem(0x26a2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe3e5);
        EXPECT(gbc.pc(), 0x26a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 022F
        gbc.setState(0x2815, 0x5d9f, 0xbad0, 0xbeb, 0x7256, 0x2aae, 0x1, 0x0);
        gbc.writeMem(0x2815, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5d9f);
        EXPECT(gbc.pc(), 0x2817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0230
        gbc.setState(0x63eb, 0xf4eb, 0x8190, 0xadf2, 0x9ed2, 0xa79b, 0x0, 0x0);
        gbc.writeMem(0x63eb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf4eb);
        EXPECT(gbc.pc(), 0x63ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0231
        gbc.setState(0x1df, 0x4a61, 0x5270, 0xd1b7, 0xaa3a, 0xd5ca, 0x0, 0x1);
        gbc.writeMem(0x1df, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4a61);
        EXPECT(gbc.pc(), 0x1e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0232
        gbc.setState(0xefb, 0x4825, 0x9f20, 0x7ce0, 0x1bac, 0x8590, 0x0, 0x1);
        gbc.writeMem(0xefb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4825);
        EXPECT(gbc.pc(), 0xefd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0233
        gbc.setState(0x684d, 0x5adc, 0x98b0, 0x6453, 0xbdcc, 0xeedc, 0x1, 0x1);
        gbc.writeMem(0x684d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5adc);
        EXPECT(gbc.pc(), 0x684f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0235
        gbc.setState(0xb867, 0x567b, 0xbea0, 0x92a2, 0x4441, 0x29c2, 0x0, 0x1);
        gbc.writeMem(0xb867, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x567b);
        EXPECT(gbc.pc(), 0xb869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb867), 0xcb);
        EXPECT(gbc.readMem(0xb868), 0x2a);
        // CB 2A 0236
        gbc.setState(0x96f, 0x1a17, 0x18f0, 0x8b59, 0x19cf, 0x28fd, 0x1, 0x1);
        gbc.writeMem(0x96f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1a17);
        EXPECT(gbc.pc(), 0x971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0237
        gbc.setState(0x7f10, 0x1242, 0xff90, 0x8710, 0xd59e, 0x9b6d, 0x0, 0x1);
        gbc.writeMem(0x7f10, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1242);
        EXPECT(gbc.pc(), 0x7f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0238
        gbc.setState(0x7831, 0x571, 0xf460, 0x2659, 0xec73, 0xa5e0, 0x1, 0x0);
        gbc.writeMem(0x7831, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x571);
        EXPECT(gbc.pc(), 0x7833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0239
        gbc.setState(0xc5e3, 0x95d, 0xeaa0, 0x1bcb, 0xe706, 0x90c9, 0x0, 0x1);
        gbc.writeMem(0xc5e3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x95d);
        EXPECT(gbc.pc(), 0xc5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5e3), 0xcb);
        EXPECT(gbc.readMem(0xc5e4), 0x2a);
        // CB 2A 023A
        gbc.setState(0x89fd, 0x8511, 0xf780, 0x4cc, 0xfdac, 0xfc5e, 0x0, 0x1);
        gbc.writeMem(0x89fd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8511);
        EXPECT(gbc.pc(), 0x89ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89fd), 0xcb);
        EXPECT(gbc.readMem(0x89fe), 0x2a);
        // CB 2A 023B
        gbc.setState(0x29ed, 0x9ae7, 0x27d0, 0xaea2, 0x77c9, 0x3b84, 0x1, 0x1);
        gbc.writeMem(0x29ed, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9ae7);
        EXPECT(gbc.pc(), 0x29ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 023C
        gbc.setState(0x820d, 0x96f2, 0xe950, 0x82f8, 0x14d1, 0xf2ab, 0x0, 0x0);
        gbc.writeMem(0x820d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x96f2);
        EXPECT(gbc.pc(), 0x820f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x820d), 0xcb);
        EXPECT(gbc.readMem(0x820e), 0x2a);
        // CB 2A 023D
        gbc.setState(0xa88a, 0x6601, 0xf0f0, 0x5401, 0x508, 0x9a65, 0x0, 0x1);
        gbc.writeMem(0xa88a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6601);
        EXPECT(gbc.pc(), 0xa88c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa88a), 0xcb);
        EXPECT(gbc.readMem(0xa88b), 0x2a);
        // CB 2A 023E
        gbc.setState(0x9fff, 0x71f1, 0xa3e0, 0xb8c7, 0x4969, 0x7d3b, 0x0, 0x0);
        gbc.writeMem(0x9fff, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x71f1);
        EXPECT(gbc.pc(), 0xa001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fff), 0xcb);
        EXPECT(gbc.readMem(0xa000), 0x2a);
        // CB 2A 023F
        gbc.setState(0xc1fc, 0xd81b, 0x6bd0, 0xc2b, 0x2929, 0xd76e, 0x1, 0x0);
        gbc.writeMem(0xc1fc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd81b);
        EXPECT(gbc.pc(), 0xc1fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1fc), 0xcb);
        EXPECT(gbc.readMem(0xc1fd), 0x2a);
        // CB 2A 0240
        gbc.setState(0x2afc, 0xc4eb, 0x7c10, 0xd4cf, 0x6b6b, 0x531, 0x1, 0x0);
        gbc.writeMem(0x2afc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc4eb);
        EXPECT(gbc.pc(), 0x2afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0241
        gbc.setState(0x2f88, 0x2858, 0x20e0, 0x8986, 0x95cb, 0x4e65, 0x0, 0x1);
        gbc.writeMem(0x2f88, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2858);
        EXPECT(gbc.pc(), 0x2f8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0242
        gbc.setState(0x64f4, 0x4076, 0x430, 0x9c9e, 0x45a9, 0x15dd, 0x1, 0x0);
        gbc.writeMem(0x64f4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4076);
        EXPECT(gbc.pc(), 0x64f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0243
        gbc.setState(0x897f, 0x3687, 0x15b0, 0xc023, 0xbe75, 0x67a, 0x1, 0x0);
        gbc.writeMem(0x897f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3687);
        EXPECT(gbc.pc(), 0x8981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x897f), 0xcb);
        EXPECT(gbc.readMem(0x8980), 0x2a);
        // CB 2A 0244
        gbc.setState(0xcbcd, 0x6e9e, 0x2020, 0xb503, 0x851d, 0xca04, 0x1, 0x0);
        gbc.writeMem(0xcbcd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6e9e);
        EXPECT(gbc.pc(), 0xcbcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbcd), 0xcb);
        EXPECT(gbc.readMem(0xcbce), 0x2a);
        // CB 2A 0245
        gbc.setState(0x29df, 0x1e1a, 0xb730, 0x8ca9, 0x8e32, 0x21ef, 0x1, 0x1);
        gbc.writeMem(0x29df, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1e1a);
        EXPECT(gbc.pc(), 0x29e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0246
        gbc.setState(0xafa1, 0x1e0e, 0x5880, 0x45ff, 0xd2fb, 0xea79, 0x1, 0x1);
        gbc.writeMem(0xafa1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1e0e);
        EXPECT(gbc.pc(), 0xafa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa1), 0xcb);
        EXPECT(gbc.readMem(0xafa2), 0x2a);
        // CB 2A 0247
        gbc.setState(0x9a1e, 0x4706, 0xc5e0, 0xa914, 0xca44, 0x4f05, 0x0, 0x1);
        gbc.writeMem(0x9a1e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4706);
        EXPECT(gbc.pc(), 0x9a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a1e), 0xcb);
        EXPECT(gbc.readMem(0x9a1f), 0x2a);
        // CB 2A 0248
        gbc.setState(0x307b, 0x823c, 0x3870, 0x5fc6, 0x2655, 0x253d, 0x0, 0x1);
        gbc.writeMem(0x307b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x823c);
        EXPECT(gbc.pc(), 0x307d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0249
        gbc.setState(0x1786, 0x9a03, 0x6a70, 0x9ee8, 0xc8e4, 0x3be5, 0x0, 0x1);
        gbc.writeMem(0x1786, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9a03);
        EXPECT(gbc.pc(), 0x1788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 024A
        gbc.setState(0x9d80, 0x4f2d, 0xdf40, 0x2254, 0xc3d9, 0x4a6b, 0x1, 0x1);
        gbc.writeMem(0x9d80, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4f2d);
        EXPECT(gbc.pc(), 0x9d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d80), 0xcb);
        EXPECT(gbc.readMem(0x9d81), 0x2a);
        // CB 2A 024B
        gbc.setState(0x86f5, 0xf0ee, 0x8630, 0x6187, 0x251a, 0x7107, 0x1, 0x1);
        gbc.writeMem(0x86f5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf0ee);
        EXPECT(gbc.pc(), 0x86f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f5), 0xcb);
        EXPECT(gbc.readMem(0x86f6), 0x2a);
        // CB 2A 024C
        gbc.setState(0x1f48, 0x77ca, 0x5e70, 0xc3a3, 0xe844, 0xcbc5, 0x0, 0x1);
        gbc.writeMem(0x1f48, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x77ca);
        EXPECT(gbc.pc(), 0x1f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 024D
        gbc.setState(0xa581, 0xdd44, 0x69b0, 0x9533, 0xe449, 0x2c5c, 0x1, 0x0);
        gbc.writeMem(0xa581, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdd44);
        EXPECT(gbc.pc(), 0xa583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa581), 0xcb);
        EXPECT(gbc.readMem(0xa582), 0x2a);
        // CB 2A 024E
        gbc.setState(0x59ac, 0x962f, 0x3180, 0x56f6, 0xf0e5, 0x3a73, 0x1, 0x0);
        gbc.writeMem(0x59ac, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x962f);
        EXPECT(gbc.pc(), 0x59ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0250
        gbc.setState(0xe606, 0x175b, 0x1160, 0x4904, 0xc298, 0xfdb3, 0x1, 0x1);
        gbc.writeMem(0xe606, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x175b);
        EXPECT(gbc.pc(), 0xe608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe606), 0xcb);
        EXPECT(gbc.readMem(0xe607), 0x2a);
        // CB 2A 0251
        gbc.setState(0x2b6c, 0x6979, 0x8910, 0x7e9a, 0xb74e, 0x8064, 0x1, 0x1);
        gbc.writeMem(0x2b6c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6979);
        EXPECT(gbc.pc(), 0x2b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0252
        gbc.setState(0x35e6, 0xb94d, 0xede0, 0x87e5, 0x84df, 0x719e, 0x1, 0x1);
        gbc.writeMem(0x35e6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb94d);
        EXPECT(gbc.pc(), 0x35e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0253
        gbc.setState(0xb790, 0x9441, 0x5bd0, 0x495e, 0x3625, 0x4342, 0x0, 0x1);
        gbc.writeMem(0xb790, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9441);
        EXPECT(gbc.pc(), 0xb792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb790), 0xcb);
        EXPECT(gbc.readMem(0xb791), 0x2a);
        // CB 2A 0255
        gbc.setState(0x84e7, 0x184b, 0x16f0, 0x70c7, 0x98b5, 0xb354, 0x1, 0x0);
        gbc.writeMem(0x84e7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x184b);
        EXPECT(gbc.pc(), 0x84e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e7), 0xcb);
        EXPECT(gbc.readMem(0x84e8), 0x2a);
        // CB 2A 0256
        gbc.setState(0x9033, 0x9995, 0xce60, 0x294c, 0xbab9, 0x392f, 0x1, 0x1);
        gbc.writeMem(0x9033, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9995);
        EXPECT(gbc.pc(), 0x9035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9033), 0xcb);
        EXPECT(gbc.readMem(0x9034), 0x2a);
        // CB 2A 0257
        gbc.setState(0x9f54, 0xecd0, 0xa100, 0xb265, 0xdb66, 0x9b3d, 0x0, 0x1);
        gbc.writeMem(0x9f54, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xecd0);
        EXPECT(gbc.pc(), 0x9f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f54), 0xcb);
        EXPECT(gbc.readMem(0x9f55), 0x2a);
        // CB 2A 0258
        gbc.setState(0xb646, 0x1b10, 0xea20, 0xedb7, 0x6656, 0xdcfb, 0x1, 0x1);
        gbc.writeMem(0xb646, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1b10);
        EXPECT(gbc.pc(), 0xb648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb646), 0xcb);
        EXPECT(gbc.readMem(0xb647), 0x2a);
        // CB 2A 0259
        gbc.setState(0x42d4, 0xba33, 0x7070, 0xd93, 0x5422, 0xbe4b, 0x1, 0x0);
        gbc.writeMem(0x42d4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xba33);
        EXPECT(gbc.pc(), 0x42d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 025A
        gbc.setState(0x8a4b, 0xb58c, 0x16c0, 0xd745, 0xfec5, 0xfa13, 0x1, 0x1);
        gbc.writeMem(0x8a4b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb58c);
        EXPECT(gbc.pc(), 0x8a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4b), 0xcb);
        EXPECT(gbc.readMem(0x8a4c), 0x2a);
        // CB 2A 025B
        gbc.setState(0x342c, 0x5a7a, 0x3270, 0xe900, 0x4c7a, 0x457d, 0x0, 0x0);
        gbc.writeMem(0x342c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5a7a);
        EXPECT(gbc.pc(), 0x342e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 025C
        gbc.setState(0x5d47, 0x3a2f, 0x310, 0x2eec, 0xc653, 0x7201, 0x0, 0x0);
        gbc.writeMem(0x5d47, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3a2f);
        EXPECT(gbc.pc(), 0x5d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 025D
        gbc.setState(0x8995, 0x4c03, 0xfdb0, 0xfe47, 0x344c, 0xdf68, 0x0, 0x1);
        gbc.writeMem(0x8995, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4c03);
        EXPECT(gbc.pc(), 0x8997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8995), 0xcb);
        EXPECT(gbc.readMem(0x8996), 0x2a);
        // CB 2A 025E
        gbc.setState(0x39db, 0x68b4, 0xffc0, 0x4f90, 0x9ebb, 0xe54a, 0x1, 0x0);
        gbc.writeMem(0x39db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x68b4);
        EXPECT(gbc.pc(), 0x39dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 025F
        gbc.setState(0x76b4, 0x1089, 0x5030, 0x426e, 0xe507, 0x9145, 0x1, 0x1);
        gbc.writeMem(0x76b4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1089);
        EXPECT(gbc.pc(), 0x76b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0260
        gbc.setState(0xde9, 0xaef9, 0xda70, 0x12a1, 0xcb0d, 0xe3d, 0x1, 0x1);
        gbc.writeMem(0xde9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xaef9);
        EXPECT(gbc.pc(), 0xdeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0261
        gbc.setState(0xe934, 0x833f, 0x540, 0x4928, 0xa800, 0xc749, 0x0, 0x1);
        gbc.writeMem(0xe934, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x833f);
        EXPECT(gbc.pc(), 0xe936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe934), 0xcb);
        EXPECT(gbc.readMem(0xe935), 0x2a);
        // CB 2A 0262
        gbc.setState(0x2fd, 0xed46, 0xfd50, 0xc90e, 0x4cf, 0x8818, 0x1, 0x0);
        gbc.writeMem(0x2fd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xed46);
        EXPECT(gbc.pc(), 0x2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0263
        gbc.setState(0x2823, 0xe6d8, 0x2390, 0x8813, 0xdd8a, 0xe683, 0x1, 0x1);
        gbc.writeMem(0x2823, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe6d8);
        EXPECT(gbc.pc(), 0x2825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0264
        gbc.setState(0x9bce, 0x8e6b, 0x3db0, 0x192f, 0xb6e3, 0xc1bd, 0x1, 0x0);
        gbc.writeMem(0x9bce, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8e6b);
        EXPECT(gbc.pc(), 0x9bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bce), 0xcb);
        EXPECT(gbc.readMem(0x9bcf), 0x2a);
        // CB 2A 0265
        gbc.setState(0x3de7, 0x33ea, 0xe6d0, 0x5092, 0x570d, 0x932, 0x1, 0x0);
        gbc.writeMem(0x3de7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x33ea);
        EXPECT(gbc.pc(), 0x3de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0266
        gbc.setState(0x150e, 0x2a7, 0xc9b0, 0xc059, 0x458a, 0x7295, 0x1, 0x1);
        gbc.writeMem(0x150e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2a7);
        EXPECT(gbc.pc(), 0x1510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0267
        gbc.setState(0x1b83, 0x46b6, 0x20e0, 0xb20d, 0x28b4, 0xe87e, 0x0, 0x0);
        gbc.writeMem(0x1b83, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x46b6);
        EXPECT(gbc.pc(), 0x1b85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0268
        gbc.setState(0x7669, 0x789f, 0x90d0, 0x4530, 0xe292, 0x5b12, 0x0, 0x0);
        gbc.writeMem(0x7669, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x789f);
        EXPECT(gbc.pc(), 0x766b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0269
        gbc.setState(0x7c74, 0xb14f, 0xd7b0, 0xa6e2, 0xe0ff, 0x5c82, 0x0, 0x0);
        gbc.writeMem(0x7c74, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb14f);
        EXPECT(gbc.pc(), 0x7c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 026A
        gbc.setState(0xdd7a, 0x4465, 0x1d80, 0x1d47, 0xaab6, 0x4ee8, 0x0, 0x0);
        gbc.writeMem(0xdd7a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4465);
        EXPECT(gbc.pc(), 0xdd7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd7a), 0xcb);
        EXPECT(gbc.readMem(0xdd7b), 0x2a);
        // CB 2A 026B
        gbc.setState(0x66e8, 0x4dea, 0x6c40, 0xa22d, 0xb769, 0xca4b, 0x0, 0x1);
        gbc.writeMem(0x66e8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4dea);
        EXPECT(gbc.pc(), 0x66ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 026C
        gbc.setState(0x8f66, 0x5c14, 0x9370, 0x57b, 0x8272, 0x13b8, 0x1, 0x1);
        gbc.writeMem(0x8f66, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5c14);
        EXPECT(gbc.pc(), 0x8f68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f66), 0xcb);
        EXPECT(gbc.readMem(0x8f67), 0x2a);
        // CB 2A 026D
        gbc.setState(0x762c, 0xebe1, 0xc090, 0x5418, 0xb2be, 0x4bf5, 0x1, 0x1);
        gbc.writeMem(0x762c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xebe1);
        EXPECT(gbc.pc(), 0x762e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 026E
        gbc.setState(0x151f, 0x7685, 0x8b60, 0xe70a, 0x1c1c, 0x900b, 0x0, 0x0);
        gbc.writeMem(0x151f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7685);
        EXPECT(gbc.pc(), 0x1521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 026F
        gbc.setState(0x1ec5, 0xe33e, 0x4260, 0x7c24, 0xc321, 0xf3b8, 0x0, 0x1);
        gbc.writeMem(0x1ec5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe33e);
        EXPECT(gbc.pc(), 0x1ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0271
        gbc.setState(0xbfc9, 0xbea2, 0x8650, 0x101d, 0xdd2c, 0x1f09, 0x1, 0x1);
        gbc.writeMem(0xbfc9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbea2);
        EXPECT(gbc.pc(), 0xbfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc9), 0xcb);
        EXPECT(gbc.readMem(0xbfca), 0x2a);
        // CB 2A 0272
        gbc.setState(0xeb9d, 0x2c3c, 0xddf0, 0x7012, 0xc7f8, 0x20cc, 0x1, 0x1);
        gbc.writeMem(0xeb9d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2c3c);
        EXPECT(gbc.pc(), 0xeb9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb9d), 0xcb);
        EXPECT(gbc.readMem(0xeb9e), 0x2a);
        // CB 2A 0273
        gbc.setState(0x3870, 0x65, 0xc750, 0xffa0, 0x9893, 0xf463, 0x0, 0x0);
        gbc.writeMem(0x3870, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x65);
        EXPECT(gbc.pc(), 0x3872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0274
        gbc.setState(0xee63, 0xeb1a, 0xcd20, 0xab90, 0x9653, 0x704b, 0x0, 0x0);
        gbc.writeMem(0xee63, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xeb1a);
        EXPECT(gbc.pc(), 0xee65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee63), 0xcb);
        EXPECT(gbc.readMem(0xee64), 0x2a);
        // CB 2A 0275
        gbc.setState(0xc275, 0xe0cc, 0x7880, 0xd9cd, 0xa7f7, 0x5f8a, 0x0, 0x1);
        gbc.writeMem(0xc275, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe0cc);
        EXPECT(gbc.pc(), 0xc277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc275), 0xcb);
        EXPECT(gbc.readMem(0xc276), 0x2a);
        // CB 2A 0277
        gbc.setState(0x6b6f, 0xd0db, 0x9b10, 0xe3a2, 0x63cf, 0xf796, 0x0, 0x0);
        gbc.writeMem(0x6b6f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd0db);
        EXPECT(gbc.pc(), 0x6b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0278
        gbc.setState(0x3a8c, 0xb69d, 0xe7b0, 0x1cd9, 0xb27f, 0xa1f8, 0x0, 0x0);
        gbc.writeMem(0x3a8c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb69d);
        EXPECT(gbc.pc(), 0x3a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0279
        gbc.setState(0x2db4, 0x1e8b, 0x2610, 0x9caa, 0x22bc, 0xf6f5, 0x0, 0x0);
        gbc.writeMem(0x2db4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1e8b);
        EXPECT(gbc.pc(), 0x2db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 027B
        gbc.setState(0x82ee, 0x55b9, 0x5cf0, 0x800f, 0x55b6, 0x5b1a, 0x0, 0x0);
        gbc.writeMem(0x82ee, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x55b9);
        EXPECT(gbc.pc(), 0x82f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ee), 0xcb);
        EXPECT(gbc.readMem(0x82ef), 0x2a);
        // CB 2A 027C
        gbc.setState(0xef8a, 0x3abb, 0x54b0, 0xdb2a, 0xdc8e, 0xacec, 0x1, 0x1);
        gbc.writeMem(0xef8a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3abb);
        EXPECT(gbc.pc(), 0xef8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8a), 0xcb);
        EXPECT(gbc.readMem(0xef8b), 0x2a);
        // CB 2A 027D
        gbc.setState(0xb385, 0x659b, 0x4a90, 0x25e4, 0x1c96, 0xb4d5, 0x0, 0x1);
        gbc.writeMem(0xb385, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x659b);
        EXPECT(gbc.pc(), 0xb387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb385), 0xcb);
        EXPECT(gbc.readMem(0xb386), 0x2a);
        // CB 2A 027E
        gbc.setState(0x856e, 0xcb2f, 0xc030, 0x1b75, 0x48c0, 0x1b6b, 0x0, 0x0);
        gbc.writeMem(0x856e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcb2f);
        EXPECT(gbc.pc(), 0x8570);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856e), 0xcb);
        EXPECT(gbc.readMem(0x856f), 0x2a);
        // CB 2A 027F
        gbc.setState(0xb7f8, 0x148d, 0xaee0, 0x2ca9, 0xda32, 0x50e8, 0x0, 0x1);
        gbc.writeMem(0xb7f8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x148d);
        EXPECT(gbc.pc(), 0xb7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f8), 0xcb);
        EXPECT(gbc.readMem(0xb7f9), 0x2a);
        // CB 2A 0280
        gbc.setState(0xd158, 0x2dc1, 0xc160, 0x69c2, 0xefb, 0x8a6, 0x1, 0x1);
        gbc.writeMem(0xd158, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2dc1);
        EXPECT(gbc.pc(), 0xd15a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd158), 0xcb);
        EXPECT(gbc.readMem(0xd159), 0x2a);
        // CB 2A 0281
        gbc.setState(0x35ad, 0x5217, 0x5190, 0x6cb2, 0x203b, 0x717, 0x1, 0x1);
        gbc.writeMem(0x35ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5217);
        EXPECT(gbc.pc(), 0x35af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0282
        gbc.setState(0x71bd, 0x147e, 0x9670, 0xdd70, 0xb5e1, 0x2321, 0x0, 0x1);
        gbc.writeMem(0x71bd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x147e);
        EXPECT(gbc.pc(), 0x71bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0283
        gbc.setState(0xae79, 0x7140, 0x5520, 0xec9, 0x2e9b, 0x9c7a, 0x0, 0x1);
        gbc.writeMem(0xae79, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7140);
        EXPECT(gbc.pc(), 0xae7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae79), 0xcb);
        EXPECT(gbc.readMem(0xae7a), 0x2a);
        // CB 2A 0284
        gbc.setState(0xba5a, 0x5b4b, 0x6450, 0x34f2, 0xea3b, 0xc00a, 0x1, 0x0);
        gbc.writeMem(0xba5a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5b4b);
        EXPECT(gbc.pc(), 0xba5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5a), 0xcb);
        EXPECT(gbc.readMem(0xba5b), 0x2a);
        // CB 2A 0285
        gbc.setState(0x6606, 0x225a, 0xd9a0, 0x3921, 0x8563, 0x276c, 0x0, 0x0);
        gbc.writeMem(0x6606, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x225a);
        EXPECT(gbc.pc(), 0x6608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0286
        gbc.setState(0xcfcd, 0x11a, 0xab30, 0x8453, 0xf6ac, 0x5f84, 0x1, 0x0);
        gbc.writeMem(0xcfcd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x11a);
        EXPECT(gbc.pc(), 0xcfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfcd), 0xcb);
        EXPECT(gbc.readMem(0xcfce), 0x2a);
        // CB 2A 0288
        gbc.setState(0xd703, 0x8c90, 0x2860, 0x170, 0x8264, 0xd902, 0x0, 0x1);
        gbc.writeMem(0xd703, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8c90);
        EXPECT(gbc.pc(), 0xd705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd703), 0xcb);
        EXPECT(gbc.readMem(0xd704), 0x2a);
        // CB 2A 0289
        gbc.setState(0xdf52, 0x4013, 0x12b0, 0x9745, 0x2cb8, 0x916a, 0x0, 0x0);
        gbc.writeMem(0xdf52, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4013);
        EXPECT(gbc.pc(), 0xdf54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf52), 0xcb);
        EXPECT(gbc.readMem(0xdf53), 0x2a);
        // CB 2A 028A
        gbc.setState(0x7712, 0x2f99, 0xdf0, 0x1d24, 0x3d37, 0x8dbe, 0x1, 0x0);
        gbc.writeMem(0x7712, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2f99);
        EXPECT(gbc.pc(), 0x7714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 028B
        gbc.setState(0x1787, 0x9c58, 0x63a0, 0xb4de, 0x7a5f, 0x84f0, 0x1, 0x1);
        gbc.writeMem(0x1787, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9c58);
        EXPECT(gbc.pc(), 0x1789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 028C
        gbc.setState(0x256, 0x4210, 0x9400, 0x4c48, 0x3521, 0x40ad, 0x1, 0x1);
        gbc.writeMem(0x256, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4210);
        EXPECT(gbc.pc(), 0x258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 028D
        gbc.setState(0xd3c9, 0x9dc5, 0x54a0, 0x48f5, 0x3fdd, 0xbe1c, 0x0, 0x0);
        gbc.writeMem(0xd3c9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9dc5);
        EXPECT(gbc.pc(), 0xd3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c9), 0xcb);
        EXPECT(gbc.readMem(0xd3ca), 0x2a);
        // CB 2A 028E
        gbc.setState(0x969a, 0x247, 0x8aa0, 0xc412, 0xaa18, 0x7fc9, 0x1, 0x0);
        gbc.writeMem(0x969a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x247);
        EXPECT(gbc.pc(), 0x969c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x969a), 0xcb);
        EXPECT(gbc.readMem(0x969b), 0x2a);
        // CB 2A 028F
        gbc.setState(0x734, 0x3213, 0x2320, 0x95b2, 0x72c3, 0x2936, 0x1, 0x0);
        gbc.writeMem(0x734, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3213);
        EXPECT(gbc.pc(), 0x736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0291
        gbc.setState(0x2578, 0x2d2a, 0x1130, 0x1f26, 0x5d08, 0x6fc7, 0x0, 0x0);
        gbc.writeMem(0x2578, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2d2a);
        EXPECT(gbc.pc(), 0x257a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0292
        gbc.setState(0xd1dd, 0x196c, 0x47b0, 0x955c, 0xc2a, 0xb14c, 0x0, 0x0);
        gbc.writeMem(0xd1dd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x196c);
        EXPECT(gbc.pc(), 0xd1df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1dd), 0xcb);
        EXPECT(gbc.readMem(0xd1de), 0x2a);
        // CB 2A 0293
        gbc.setState(0x6b6a, 0x6f2b, 0xacc0, 0xe9e8, 0xcecf, 0xee76, 0x1, 0x1);
        gbc.writeMem(0x6b6a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6f2b);
        EXPECT(gbc.pc(), 0x6b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0294
        gbc.setState(0x1033, 0x7421, 0xca70, 0x710, 0xf756, 0x9d63, 0x1, 0x0);
        gbc.writeMem(0x1033, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7421);
        EXPECT(gbc.pc(), 0x1035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0295
        gbc.setState(0x7f6f, 0x5825, 0xba90, 0x33f5, 0xea0, 0x2014, 0x0, 0x0);
        gbc.writeMem(0x7f6f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5825);
        EXPECT(gbc.pc(), 0x7f71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0296
        gbc.setState(0x40a, 0xefbd, 0x88f0, 0xa004, 0xa8d9, 0x3038, 0x1, 0x1);
        gbc.writeMem(0x40a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xefbd);
        EXPECT(gbc.pc(), 0x40c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0297
        gbc.setState(0x974a, 0x891d, 0x830, 0xbae5, 0x44d1, 0x945e, 0x1, 0x0);
        gbc.writeMem(0x974a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x891d);
        EXPECT(gbc.pc(), 0x974c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x974a), 0xcb);
        EXPECT(gbc.readMem(0x974b), 0x2a);
        // CB 2A 0298
        gbc.setState(0x684f, 0x5244, 0xec40, 0x1f05, 0x9ff0, 0x493c, 0x0, 0x0);
        gbc.writeMem(0x684f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5244);
        EXPECT(gbc.pc(), 0x6851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0299
        gbc.setState(0x45, 0x5181, 0x6970, 0xc939, 0x5d8, 0xb8b6, 0x1, 0x1);
        gbc.writeMem(0x45, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5181);
        EXPECT(gbc.pc(), 0x47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 029A
        gbc.setState(0x80a2, 0xa05a, 0xf170, 0xdd86, 0x930c, 0x3ea3, 0x0, 0x0);
        gbc.writeMem(0x80a2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa05a);
        EXPECT(gbc.pc(), 0x80a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a2), 0xcb);
        EXPECT(gbc.readMem(0x80a3), 0x2a);
        // CB 2A 029C
        gbc.setState(0x2cee, 0x9e99, 0x5a50, 0xffc0, 0xafad, 0xfc49, 0x1, 0x1);
        gbc.writeMem(0x2cee, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9e99);
        EXPECT(gbc.pc(), 0x2cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 029D
        gbc.setState(0xbef0, 0x3a35, 0x10, 0x8e1c, 0x3893, 0xfab3, 0x0, 0x1);
        gbc.writeMem(0xbef0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3a35);
        EXPECT(gbc.pc(), 0xbef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef0), 0xcb);
        EXPECT(gbc.readMem(0xbef1), 0x2a);
        // CB 2A 029E
        gbc.setState(0x822c, 0x5690, 0x9300, 0xd08b, 0xb2a5, 0x9388, 0x1, 0x0);
        gbc.writeMem(0x822c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5690);
        EXPECT(gbc.pc(), 0x822e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x822c), 0xcb);
        EXPECT(gbc.readMem(0x822d), 0x2a);
        // CB 2A 029F
        gbc.setState(0x68b5, 0x5b50, 0xd070, 0x4539, 0x3a2c, 0xae2f, 0x0, 0x1);
        gbc.writeMem(0x68b5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5b50);
        EXPECT(gbc.pc(), 0x68b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02A0
        gbc.setState(0xd84, 0x87ae, 0xc3f0, 0x8c69, 0xe571, 0xad52, 0x1, 0x1);
        gbc.writeMem(0xd84, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x87ae);
        EXPECT(gbc.pc(), 0xd86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02A1
        gbc.setState(0x72ec, 0xeb18, 0x1190, 0xaf9d, 0x86d4, 0x2c6a, 0x1, 0x1);
        gbc.writeMem(0x72ec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xeb18);
        EXPECT(gbc.pc(), 0x72ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02A2
        gbc.setState(0xd641, 0xf6d3, 0xf4c0, 0x4f18, 0x34c7, 0xb838, 0x0, 0x1);
        gbc.writeMem(0xd641, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf6d3);
        EXPECT(gbc.pc(), 0xd643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd641), 0xcb);
        EXPECT(gbc.readMem(0xd642), 0x2a);
        // CB 2A 02A3
        gbc.setState(0xe1e5, 0x1fc8, 0xcb0, 0xcd2b, 0x7cc0, 0xe0d9, 0x1, 0x0);
        gbc.writeMem(0xe1e5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1fc8);
        EXPECT(gbc.pc(), 0xe1e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e5), 0xcb);
        EXPECT(gbc.readMem(0xe1e6), 0x2a);
        // CB 2A 02A4
        gbc.setState(0x3c9b, 0x2161, 0x4800, 0xf324, 0xdbb, 0x4274, 0x0, 0x0);
        gbc.writeMem(0x3c9b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2161);
        EXPECT(gbc.pc(), 0x3c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02A5
        gbc.setState(0x93c9, 0x44f2, 0x15f0, 0x2aa3, 0x3ee1, 0x49df, 0x1, 0x0);
        gbc.writeMem(0x93c9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x44f2);
        EXPECT(gbc.pc(), 0x93cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c9), 0xcb);
        EXPECT(gbc.readMem(0x93ca), 0x2a);
        // CB 2A 02A6
        gbc.setState(0xb713, 0xaa7f, 0xf440, 0x9905, 0xe245, 0xf19d, 0x0, 0x1);
        gbc.writeMem(0xb713, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xaa7f);
        EXPECT(gbc.pc(), 0xb715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb713), 0xcb);
        EXPECT(gbc.readMem(0xb714), 0x2a);
        // CB 2A 02A7
        gbc.setState(0xb222, 0x2039, 0x1600, 0xbc4d, 0x433a, 0x8ce0, 0x0, 0x1);
        gbc.writeMem(0xb222, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2039);
        EXPECT(gbc.pc(), 0xb224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb222), 0xcb);
        EXPECT(gbc.readMem(0xb223), 0x2a);
        // CB 2A 02A8
        gbc.setState(0x68cf, 0xd1af, 0x5860, 0x98ed, 0x6199, 0xfbc2, 0x1, 0x0);
        gbc.writeMem(0x68cf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd1af);
        EXPECT(gbc.pc(), 0x68d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02A9
        gbc.setState(0xd421, 0x9f2d, 0x3630, 0x3ac5, 0x9c7e, 0xc466, 0x1, 0x0);
        gbc.writeMem(0xd421, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9f2d);
        EXPECT(gbc.pc(), 0xd423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd421), 0xcb);
        EXPECT(gbc.readMem(0xd422), 0x2a);
        // CB 2A 02AA
        gbc.setState(0xd61b, 0xf863, 0xeb50, 0x9707, 0xd75c, 0xef71, 0x0, 0x1);
        gbc.writeMem(0xd61b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf863);
        EXPECT(gbc.pc(), 0xd61d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61b), 0xcb);
        EXPECT(gbc.readMem(0xd61c), 0x2a);
        // CB 2A 02AB
        gbc.setState(0x4bc4, 0xbded, 0xc260, 0x556a, 0x1558, 0xf5b7, 0x0, 0x1);
        gbc.writeMem(0x4bc4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbded);
        EXPECT(gbc.pc(), 0x4bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02AC
        gbc.setState(0x27eb, 0x3cbe, 0x5990, 0xae39, 0x82c5, 0xd34c, 0x0, 0x1);
        gbc.writeMem(0x27eb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3cbe);
        EXPECT(gbc.pc(), 0x27ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02AD
        gbc.setState(0xd4f9, 0x287f, 0x6920, 0xe22a, 0x22bb, 0x9bcc, 0x0, 0x0);
        gbc.writeMem(0xd4f9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x287f);
        EXPECT(gbc.pc(), 0xd4fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f9), 0xcb);
        EXPECT(gbc.readMem(0xd4fa), 0x2a);
        // CB 2A 02AE
        gbc.setState(0x176d, 0x4818, 0x4040, 0xf8ed, 0x88ef, 0xdd54, 0x1, 0x1);
        gbc.writeMem(0x176d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4818);
        EXPECT(gbc.pc(), 0x176f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02AF
        gbc.setState(0x4395, 0xf604, 0xaa00, 0x1b8e, 0x9dd0, 0x8bb2, 0x0, 0x1);
        gbc.writeMem(0x4395, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf604);
        EXPECT(gbc.pc(), 0x4397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02B1
        gbc.setState(0xb7c0, 0x6c5b, 0x8b70, 0xe65c, 0x440f, 0x3203, 0x1, 0x0);
        gbc.writeMem(0xb7c0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6c5b);
        EXPECT(gbc.pc(), 0xb7c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c0), 0xcb);
        EXPECT(gbc.readMem(0xb7c1), 0x2a);
        // CB 2A 02B3
        gbc.setState(0x9a18, 0x2aa2, 0x440, 0xb0f6, 0x1967, 0xe4f, 0x0, 0x1);
        gbc.writeMem(0x9a18, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2aa2);
        EXPECT(gbc.pc(), 0x9a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a18), 0xcb);
        EXPECT(gbc.readMem(0x9a19), 0x2a);
        // CB 2A 02B4
        gbc.setState(0xddc7, 0x73da, 0x76f0, 0x7026, 0x19ac, 0x8895, 0x1, 0x1);
        gbc.writeMem(0xddc7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x73da);
        EXPECT(gbc.pc(), 0xddc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc7), 0xcb);
        EXPECT(gbc.readMem(0xddc8), 0x2a);
        // CB 2A 02B5
        gbc.setState(0x3762, 0x6e37, 0xcb90, 0x9705, 0x3539, 0x906f, 0x1, 0x0);
        gbc.writeMem(0x3762, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6e37);
        EXPECT(gbc.pc(), 0x3764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02B6
        gbc.setState(0xbfc0, 0x9b68, 0x1c60, 0x17e4, 0x3d7f, 0x9a16, 0x1, 0x1);
        gbc.writeMem(0xbfc0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9b68);
        EXPECT(gbc.pc(), 0xbfc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc0), 0xcb);
        EXPECT(gbc.readMem(0xbfc1), 0x2a);
        // CB 2A 02B7
        gbc.setState(0xbe72, 0x4c6, 0x52e0, 0x999d, 0xb53e, 0x60ec, 0x1, 0x0);
        gbc.writeMem(0xbe72, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4c6);
        EXPECT(gbc.pc(), 0xbe74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe72), 0xcb);
        EXPECT(gbc.readMem(0xbe73), 0x2a);
        // CB 2A 02B8
        gbc.setState(0xc8db, 0x2981, 0x1f00, 0x55c0, 0xd70c, 0x976f, 0x1, 0x0);
        gbc.writeMem(0xc8db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2981);
        EXPECT(gbc.pc(), 0xc8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8db), 0xcb);
        EXPECT(gbc.readMem(0xc8dc), 0x2a);
        // CB 2A 02B9
        gbc.setState(0x3b2b, 0xa34, 0xcd0, 0xf7db, 0x35c6, 0x7763, 0x1, 0x1);
        gbc.writeMem(0x3b2b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa34);
        EXPECT(gbc.pc(), 0x3b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02BA
        gbc.setState(0x5bc5, 0x940c, 0x80f0, 0xdc50, 0x48fb, 0x5708, 0x0, 0x1);
        gbc.writeMem(0x5bc5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x940c);
        EXPECT(gbc.pc(), 0x5bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02BB
        gbc.setState(0xe0d1, 0xf6c1, 0x1e80, 0x9af4, 0xaf41, 0xec88, 0x1, 0x0);
        gbc.writeMem(0xe0d1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf6c1);
        EXPECT(gbc.pc(), 0xe0d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d1), 0xcb);
        EXPECT(gbc.readMem(0xe0d2), 0x2a);
        // CB 2A 02BC
        gbc.setState(0x4cbb, 0x4724, 0x1ac0, 0x1c0, 0x260e, 0xa74d, 0x1, 0x1);
        gbc.writeMem(0x4cbb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4724);
        EXPECT(gbc.pc(), 0x4cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02BD
        gbc.setState(0x53db, 0xb52d, 0x9e0, 0xa60, 0xc1f0, 0xe9ac, 0x1, 0x0);
        gbc.writeMem(0x53db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb52d);
        EXPECT(gbc.pc(), 0x53dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02BE
        gbc.setState(0xb292, 0x9eb5, 0xf530, 0x5794, 0xd80c, 0x8bc, 0x0, 0x0);
        gbc.writeMem(0xb292, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9eb5);
        EXPECT(gbc.pc(), 0xb294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb292), 0xcb);
        EXPECT(gbc.readMem(0xb293), 0x2a);
        // CB 2A 02BF
        gbc.setState(0x55c2, 0x92ed, 0x1120, 0x650c, 0x7efa, 0x3bf, 0x0, 0x1);
        gbc.writeMem(0x55c2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x92ed);
        EXPECT(gbc.pc(), 0x55c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02C0
        gbc.setState(0x91bd, 0xb78c, 0xba50, 0x2f2c, 0x54d0, 0xff79, 0x0, 0x0);
        gbc.writeMem(0x91bd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb78c);
        EXPECT(gbc.pc(), 0x91bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91bd), 0xcb);
        EXPECT(gbc.readMem(0x91be), 0x2a);
        // CB 2A 02C1
        gbc.setState(0x810a, 0xd200, 0x3070, 0xccd1, 0x9b3, 0xdef5, 0x1, 0x1);
        gbc.writeMem(0x810a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd200);
        EXPECT(gbc.pc(), 0x810c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x810a), 0xcb);
        EXPECT(gbc.readMem(0x810b), 0x2a);
        // CB 2A 02C2
        gbc.setState(0x4594, 0xc5f7, 0xd460, 0x24ed, 0x7be6, 0xcffb, 0x1, 0x0);
        gbc.writeMem(0x4594, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc5f7);
        EXPECT(gbc.pc(), 0x4596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02C3
        gbc.setState(0x8c0d, 0x3eab, 0xe1a0, 0x9f80, 0xbbdb, 0xe73b, 0x0, 0x1);
        gbc.writeMem(0x8c0d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3eab);
        EXPECT(gbc.pc(), 0x8c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c0d), 0xcb);
        EXPECT(gbc.readMem(0x8c0e), 0x2a);
        // CB 2A 02C4
        gbc.setState(0xed3d, 0xf1e9, 0x3950, 0xd578, 0x2346, 0x7ad3, 0x0, 0x0);
        gbc.writeMem(0xed3d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf1e9);
        EXPECT(gbc.pc(), 0xed3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed3d), 0xcb);
        EXPECT(gbc.readMem(0xed3e), 0x2a);
        // CB 2A 02C5
        gbc.setState(0xe52a, 0x9a53, 0x6d60, 0x4414, 0x3477, 0x730c, 0x0, 0x0);
        gbc.writeMem(0xe52a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9a53);
        EXPECT(gbc.pc(), 0xe52c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe52a), 0xcb);
        EXPECT(gbc.readMem(0xe52b), 0x2a);
        // CB 2A 02C6
        gbc.setState(0x9cd8, 0x7a6d, 0x3630, 0x1974, 0x22a0, 0xd33f, 0x0, 0x1);
        gbc.writeMem(0x9cd8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7a6d);
        EXPECT(gbc.pc(), 0x9cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd8), 0xcb);
        EXPECT(gbc.readMem(0x9cd9), 0x2a);
        // CB 2A 02C7
        gbc.setState(0xb4d2, 0x6725, 0x9c70, 0xe43b, 0xa4a3, 0x5fb9, 0x1, 0x0);
        gbc.writeMem(0xb4d2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6725);
        EXPECT(gbc.pc(), 0xb4d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d2), 0xcb);
        EXPECT(gbc.readMem(0xb4d3), 0x2a);
        // CB 2A 02C8
        gbc.setState(0x155e, 0x71ff, 0x5820, 0x461f, 0xd1d8, 0x7648, 0x1, 0x1);
        gbc.writeMem(0x155e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x71ff);
        EXPECT(gbc.pc(), 0x1560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02C9
        gbc.setState(0x15b2, 0xa58, 0x7420, 0x29cb, 0x4f03, 0xa71, 0x0, 0x1);
        gbc.writeMem(0x15b2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa58);
        EXPECT(gbc.pc(), 0x15b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02CA
        gbc.setState(0x3b2f, 0x5d04, 0xde60, 0x7fa1, 0xc06d, 0x57d4, 0x0, 0x0);
        gbc.writeMem(0x3b2f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5d04);
        EXPECT(gbc.pc(), 0x3b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02CB
        gbc.setState(0x6e0b, 0xd99, 0x3960, 0x3c17, 0x5504, 0x41f, 0x1, 0x0);
        gbc.writeMem(0x6e0b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd99);
        EXPECT(gbc.pc(), 0x6e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02CC
        gbc.setState(0x9492, 0xe255, 0x3eb0, 0xc893, 0x8a7f, 0xf5fc, 0x0, 0x1);
        gbc.writeMem(0x9492, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe255);
        EXPECT(gbc.pc(), 0x9494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9492), 0xcb);
        EXPECT(gbc.readMem(0x9493), 0x2a);
        // CB 2A 02CD
        gbc.setState(0x9e2f, 0xafa6, 0x8dd0, 0x4625, 0xae25, 0xec1f, 0x0, 0x1);
        gbc.writeMem(0x9e2f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xafa6);
        EXPECT(gbc.pc(), 0x9e31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2f), 0xcb);
        EXPECT(gbc.readMem(0x9e30), 0x2a);
        // CB 2A 02CE
        gbc.setState(0xed48, 0x30f, 0x6e10, 0x6cc3, 0xbc5f, 0x2b36, 0x1, 0x1);
        gbc.writeMem(0xed48, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x30f);
        EXPECT(gbc.pc(), 0xed4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed48), 0xcb);
        EXPECT(gbc.readMem(0xed49), 0x2a);
        // CB 2A 02CF
        gbc.setState(0x237c, 0x410b, 0x940, 0xe51, 0xc23c, 0xc459, 0x1, 0x0);
        gbc.writeMem(0x237c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x410b);
        EXPECT(gbc.pc(), 0x237e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02D0
        gbc.setState(0x15b7, 0xd1eb, 0xf5f0, 0x66ef, 0x354f, 0xae1e, 0x1, 0x0);
        gbc.writeMem(0x15b7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd1eb);
        EXPECT(gbc.pc(), 0x15b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02D1
        gbc.setState(0x1298, 0x5dfa, 0x92c0, 0xec5, 0x5d6, 0x6316, 0x0, 0x1);
        gbc.writeMem(0x1298, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5dfa);
        EXPECT(gbc.pc(), 0x129a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02D2
        gbc.setState(0x6691, 0x5020, 0x8ed0, 0xa90b, 0xada0, 0x36a, 0x1, 0x0);
        gbc.writeMem(0x6691, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5020);
        EXPECT(gbc.pc(), 0x6693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02D3
        gbc.setState(0xe878, 0x9dfa, 0xe9b0, 0x33bf, 0xb05b, 0x6062, 0x1, 0x1);
        gbc.writeMem(0xe878, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9dfa);
        EXPECT(gbc.pc(), 0xe87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe878), 0xcb);
        EXPECT(gbc.readMem(0xe879), 0x2a);
        // CB 2A 02D4
        gbc.setState(0x4890, 0xf623, 0x90e0, 0x8c82, 0x7d5b, 0xdee5, 0x1, 0x1);
        gbc.writeMem(0x4890, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf623);
        EXPECT(gbc.pc(), 0x4892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02D6
        gbc.setState(0x775f, 0xcc43, 0xa990, 0xfede, 0x9e9d, 0x3eac, 0x1, 0x0);
        gbc.writeMem(0x775f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xcc43);
        EXPECT(gbc.pc(), 0x7761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02D8
        gbc.setState(0x975a, 0xe554, 0xf330, 0x8023, 0x5562, 0x188c, 0x1, 0x0);
        gbc.writeMem(0x975a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe554);
        EXPECT(gbc.pc(), 0x975c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975a), 0xcb);
        EXPECT(gbc.readMem(0x975b), 0x2a);
        // CB 2A 02D9
        gbc.setState(0x1a5d, 0x6e39, 0x27b0, 0x5817, 0xa389, 0x6496, 0x1, 0x1);
        gbc.writeMem(0x1a5d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6e39);
        EXPECT(gbc.pc(), 0x1a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02DA
        gbc.setState(0xc4a0, 0x8219, 0x3730, 0xd6c1, 0xada4, 0x4c36, 0x1, 0x0);
        gbc.writeMem(0xc4a0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8219);
        EXPECT(gbc.pc(), 0xc4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4a0), 0xcb);
        EXPECT(gbc.readMem(0xc4a1), 0x2a);
        // CB 2A 02DB
        gbc.setState(0x49cd, 0x699e, 0x3ef0, 0x22e0, 0xa3d4, 0x8b2, 0x1, 0x0);
        gbc.writeMem(0x49cd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x699e);
        EXPECT(gbc.pc(), 0x49cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02DC
        gbc.setState(0x91cb, 0x6be2, 0xa420, 0xe5e9, 0x1557, 0xceeb, 0x0, 0x0);
        gbc.writeMem(0x91cb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6be2);
        EXPECT(gbc.pc(), 0x91cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91cb), 0xcb);
        EXPECT(gbc.readMem(0x91cc), 0x2a);
        // CB 2A 02DD
        gbc.setState(0xefbd, 0x19bc, 0xf850, 0x9e90, 0x898f, 0xe1e1, 0x0, 0x1);
        gbc.writeMem(0xefbd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x19bc);
        EXPECT(gbc.pc(), 0xefbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefbd), 0xcb);
        EXPECT(gbc.readMem(0xefbe), 0x2a);
        // CB 2A 02DF
        gbc.setState(0xb0c, 0x8ebe, 0x5bb0, 0x3f1a, 0x8cef, 0x6c15, 0x0, 0x0);
        gbc.writeMem(0xb0c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8ebe);
        EXPECT(gbc.pc(), 0xb0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02E1
        gbc.setState(0x95f1, 0x97e7, 0x9250, 0x5174, 0xb1b8, 0x7a6b, 0x0, 0x1);
        gbc.writeMem(0x95f1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x97e7);
        EXPECT(gbc.pc(), 0x95f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f1), 0xcb);
        EXPECT(gbc.readMem(0x95f2), 0x2a);
        // CB 2A 02E2
        gbc.setState(0x76c8, 0x9e31, 0x88f0, 0x85a2, 0x224f, 0x9007, 0x1, 0x0);
        gbc.writeMem(0x76c8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9e31);
        EXPECT(gbc.pc(), 0x76ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02E3
        gbc.setState(0x2a2f, 0x2bc8, 0x4d60, 0x38f, 0x6f6d, 0x59af, 0x0, 0x0);
        gbc.writeMem(0x2a2f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2bc8);
        EXPECT(gbc.pc(), 0x2a31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02E4
        gbc.setState(0xb577, 0x4e6c, 0x15a0, 0x86fa, 0xcda4, 0xef5d, 0x0, 0x0);
        gbc.writeMem(0xb577, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4e6c);
        EXPECT(gbc.pc(), 0xb579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb577), 0xcb);
        EXPECT(gbc.readMem(0xb578), 0x2a);
        // CB 2A 02E5
        gbc.setState(0x9215, 0xec57, 0xc510, 0xe9d, 0x2636, 0x9773, 0x1, 0x1);
        gbc.writeMem(0x9215, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0x9217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9215), 0xcb);
        EXPECT(gbc.readMem(0x9216), 0x2a);
        // CB 2A 02E7
        gbc.setState(0x98bc, 0x98cf, 0xc0e0, 0xbd90, 0x63af, 0x1238, 0x1, 0x0);
        gbc.writeMem(0x98bc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x98cf);
        EXPECT(gbc.pc(), 0x98be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98bc), 0xcb);
        EXPECT(gbc.readMem(0x98bd), 0x2a);
        // CB 2A 02E8
        gbc.setState(0xea28, 0x45e7, 0xa400, 0x578e, 0x95e4, 0xbe2f, 0x1, 0x1);
        gbc.writeMem(0xea28, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x45e7);
        EXPECT(gbc.pc(), 0xea2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea28), 0xcb);
        EXPECT(gbc.readMem(0xea29), 0x2a);
        // CB 2A 02E9
        gbc.setState(0x5d33, 0x7925, 0x28d0, 0x7f7a, 0x7698, 0xe778, 0x1, 0x1);
        gbc.writeMem(0x5d33, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7925);
        EXPECT(gbc.pc(), 0x5d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02EA
        gbc.setState(0xc93b, 0x7eda, 0x3b10, 0x48d1, 0xfd4e, 0xa5c5, 0x0, 0x0);
        gbc.writeMem(0xc93b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7eda);
        EXPECT(gbc.pc(), 0xc93d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93b), 0xcb);
        EXPECT(gbc.readMem(0xc93c), 0x2a);
        // CB 2A 02EB
        gbc.setState(0x5f5a, 0x95b5, 0xdd00, 0xe0d5, 0x6be3, 0xa3c2, 0x0, 0x1);
        gbc.writeMem(0x5f5a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x95b5);
        EXPECT(gbc.pc(), 0x5f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02EC
        gbc.setState(0x2d13, 0x1b7e, 0x3f30, 0x1d36, 0x3db9, 0x645a, 0x1, 0x0);
        gbc.writeMem(0x2d13, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1b7e);
        EXPECT(gbc.pc(), 0x2d15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02ED
        gbc.setState(0x7cd8, 0x980a, 0x7b90, 0xad98, 0x661b, 0xa42e, 0x1, 0x0);
        gbc.writeMem(0x7cd8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x980a);
        EXPECT(gbc.pc(), 0x7cda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02EE
        gbc.setState(0x56a5, 0x2c9a, 0x7080, 0x5f27, 0xf7af, 0x6aa9, 0x1, 0x0);
        gbc.writeMem(0x56a5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2c9a);
        EXPECT(gbc.pc(), 0x56a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02EF
        gbc.setState(0x7455, 0x4149, 0x3920, 0x1a8d, 0xd356, 0x22b8, 0x0, 0x0);
        gbc.writeMem(0x7455, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4149);
        EXPECT(gbc.pc(), 0x7457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02F0
        gbc.setState(0x299f, 0x59a, 0x7da0, 0x4cf1, 0x695a, 0x3654, 0x0, 0x0);
        gbc.writeMem(0x299f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x59a);
        EXPECT(gbc.pc(), 0x29a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02F1
        gbc.setState(0x79d3, 0x98c6, 0x52a0, 0x3eb3, 0xb8e1, 0x3a9f, 0x1, 0x0);
        gbc.writeMem(0x79d3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x98c6);
        EXPECT(gbc.pc(), 0x79d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02F3
        gbc.setState(0x406f, 0x22f1, 0xc310, 0x696f, 0x6266, 0xb82f, 0x1, 0x0);
        gbc.writeMem(0x406f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x22f1);
        EXPECT(gbc.pc(), 0x4071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02F4
        gbc.setState(0x595, 0x4c92, 0x4480, 0xc3b8, 0x6fd1, 0x12cc, 0x0, 0x0);
        gbc.writeMem(0x595, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4c92);
        EXPECT(gbc.pc(), 0x597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02F5
        gbc.setState(0x5080, 0x2562, 0xbb60, 0x5b91, 0xdcd, 0xb17b, 0x1, 0x0);
        gbc.writeMem(0x5080, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2562);
        EXPECT(gbc.pc(), 0x5082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02F6
        gbc.setState(0x58dd, 0x9313, 0xca00, 0x8cab, 0xf111, 0xfe5, 0x1, 0x0);
        gbc.writeMem(0x58dd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9313);
        EXPECT(gbc.pc(), 0x58df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02F7
        gbc.setState(0xe86f, 0xb3e9, 0x8d80, 0xb25e, 0x10be, 0xd6d6, 0x1, 0x0);
        gbc.writeMem(0xe86f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb3e9);
        EXPECT(gbc.pc(), 0xe871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86f), 0xcb);
        EXPECT(gbc.readMem(0xe870), 0x2a);
        // CB 2A 02F8
        gbc.setState(0x98e6, 0x3be4, 0x4c10, 0x7128, 0xb2c5, 0xf272, 0x0, 0x0);
        gbc.writeMem(0x98e6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3be4);
        EXPECT(gbc.pc(), 0x98e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e6), 0xcb);
        EXPECT(gbc.readMem(0x98e7), 0x2a);
        // CB 2A 02F9
        gbc.setState(0xef46, 0xf9ba, 0x9440, 0xacb, 0xf9fe, 0x688e, 0x0, 0x1);
        gbc.writeMem(0xef46, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf9ba);
        EXPECT(gbc.pc(), 0xef48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef46), 0xcb);
        EXPECT(gbc.readMem(0xef47), 0x2a);
        // CB 2A 02FA
        gbc.setState(0x3bc3, 0x2d4f, 0x9cb0, 0x1ac1, 0xb34c, 0xf057, 0x0, 0x0);
        gbc.writeMem(0x3bc3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2d4f);
        EXPECT(gbc.pc(), 0x3bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 02FB
        gbc.setState(0x8af, 0x5254, 0xb7f0, 0x6b19, 0x8899, 0xbe5f, 0x1, 0x1);
        gbc.writeMem(0x8af, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5254);
        EXPECT(gbc.pc(), 0x8b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 02FC
        gbc.setState(0x431a, 0x443f, 0x8300, 0x29b5, 0x35bb, 0x270a, 0x0, 0x1);
        gbc.writeMem(0x431a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x443f);
        EXPECT(gbc.pc(), 0x431c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0300
        gbc.setState(0x1d1c, 0x15da, 0xf120, 0xabc2, 0x2398, 0xc71e, 0x0, 0x0);
        gbc.writeMem(0x1d1c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x15da);
        EXPECT(gbc.pc(), 0x1d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0302
        gbc.setState(0xd50a, 0x50d, 0xd350, 0xb06f, 0xb6cd, 0x5b96, 0x1, 0x1);
        gbc.writeMem(0xd50a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x50d);
        EXPECT(gbc.pc(), 0xd50c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd50a), 0xcb);
        EXPECT(gbc.readMem(0xd50b), 0x2a);
        // CB 2A 0303
        gbc.setState(0x3d6f, 0x637e, 0x8f00, 0x8391, 0x338b, 0xd10c, 0x1, 0x0);
        gbc.writeMem(0x3d6f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x637e);
        EXPECT(gbc.pc(), 0x3d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0304
        gbc.setState(0x83f, 0x2431, 0xaf0, 0x548a, 0x658e, 0xf01b, 0x1, 0x1);
        gbc.writeMem(0x83f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2431);
        EXPECT(gbc.pc(), 0x841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0305
        gbc.setState(0x158a, 0x23db, 0x2f00, 0xd05d, 0x5285, 0x4a2f, 0x0, 0x0);
        gbc.writeMem(0x158a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x23db);
        EXPECT(gbc.pc(), 0x158c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0306
        gbc.setState(0xcb35, 0xa94a, 0xb120, 0x50ff, 0xe944, 0x2e4d, 0x0, 0x1);
        gbc.writeMem(0xcb35, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa94a);
        EXPECT(gbc.pc(), 0xcb37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb35), 0xcb);
        EXPECT(gbc.readMem(0xcb36), 0x2a);
        // CB 2A 0307
        gbc.setState(0x4d01, 0x5f6c, 0x7920, 0x3258, 0x38b9, 0x88f9, 0x0, 0x0);
        gbc.writeMem(0x4d01, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5f6c);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0308
        gbc.setState(0xa1b1, 0xbc81, 0x9550, 0xbe6e, 0x817f, 0x43c3, 0x0, 0x0);
        gbc.writeMem(0xa1b1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbc81);
        EXPECT(gbc.pc(), 0xa1b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1b1), 0xcb);
        EXPECT(gbc.readMem(0xa1b2), 0x2a);
        // CB 2A 0309
        gbc.setState(0xbf13, 0x95f7, 0xf520, 0x54cc, 0xf48a, 0x8f25, 0x1, 0x1);
        gbc.writeMem(0xbf13, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x95f7);
        EXPECT(gbc.pc(), 0xbf15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf13), 0xcb);
        EXPECT(gbc.readMem(0xbf14), 0x2a);
        // CB 2A 030A
        gbc.setState(0xa54a, 0xaef1, 0x4fd0, 0xa140, 0x400e, 0xa8ef, 0x0, 0x1);
        gbc.writeMem(0xa54a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0xa54c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa54a), 0xcb);
        EXPECT(gbc.readMem(0xa54b), 0x2a);
        // CB 2A 030B
        gbc.setState(0x9cc5, 0x6226, 0x3ca0, 0x1de6, 0xc43f, 0xf63b, 0x1, 0x1);
        gbc.writeMem(0x9cc5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6226);
        EXPECT(gbc.pc(), 0x9cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cc5), 0xcb);
        EXPECT(gbc.readMem(0x9cc6), 0x2a);
        // CB 2A 030C
        gbc.setState(0x6728, 0xa81, 0x9340, 0x85ba, 0x40aa, 0xc0d5, 0x0, 0x0);
        gbc.writeMem(0x6728, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa81);
        EXPECT(gbc.pc(), 0x672a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 030D
        gbc.setState(0xbf6a, 0xe83b, 0xdad0, 0x5926, 0x215, 0x51ee, 0x1, 0x1);
        gbc.writeMem(0xbf6a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe83b);
        EXPECT(gbc.pc(), 0xbf6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6a), 0xcb);
        EXPECT(gbc.readMem(0xbf6b), 0x2a);
        // CB 2A 030E
        gbc.setState(0x7482, 0xe1a1, 0xbed0, 0x1479, 0x77db, 0x4d52, 0x0, 0x0);
        gbc.writeMem(0x7482, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe1a1);
        EXPECT(gbc.pc(), 0x7484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 030F
        gbc.setState(0xed79, 0x7743, 0x2f50, 0x6224, 0x959f, 0x85a3, 0x0, 0x1);
        gbc.writeMem(0xed79, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7743);
        EXPECT(gbc.pc(), 0xed7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed79), 0xcb);
        EXPECT(gbc.readMem(0xed7a), 0x2a);
        // CB 2A 0310
        gbc.setState(0xd6f8, 0xd560, 0xe90, 0x7c27, 0xf36, 0x1072, 0x0, 0x1);
        gbc.writeMem(0xd6f8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd560);
        EXPECT(gbc.pc(), 0xd6fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f8), 0xcb);
        EXPECT(gbc.readMem(0xd6f9), 0x2a);
        // CB 2A 0311
        gbc.setState(0xba89, 0x41e2, 0x1c60, 0x6a62, 0x1441, 0xdce7, 0x1, 0x1);
        gbc.writeMem(0xba89, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x41e2);
        EXPECT(gbc.pc(), 0xba8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba89), 0xcb);
        EXPECT(gbc.readMem(0xba8a), 0x2a);
        // CB 2A 0312
        gbc.setState(0x44e6, 0xa048, 0x3590, 0xee83, 0x29a1, 0xec8f, 0x1, 0x0);
        gbc.writeMem(0x44e6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa048);
        EXPECT(gbc.pc(), 0x44e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0313
        gbc.setState(0xad6a, 0x4db2, 0x31c0, 0x64d6, 0x9146, 0xe64e, 0x1, 0x1);
        gbc.writeMem(0xad6a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4db2);
        EXPECT(gbc.pc(), 0xad6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad6a), 0xcb);
        EXPECT(gbc.readMem(0xad6b), 0x2a);
        // CB 2A 0314
        gbc.setState(0x2807, 0x7097, 0x1810, 0xd851, 0x4610, 0xc01d, 0x0, 0x0);
        gbc.writeMem(0x2807, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7097);
        EXPECT(gbc.pc(), 0x2809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0315
        gbc.setState(0x3b91, 0x718f, 0xaa30, 0x610b, 0x4c8d, 0x73aa, 0x1, 0x1);
        gbc.writeMem(0x3b91, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x718f);
        EXPECT(gbc.pc(), 0x3b93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0316
        gbc.setState(0x5a7a, 0x5f06, 0x19d0, 0x56f5, 0xb5fa, 0x87a5, 0x0, 0x1);
        gbc.writeMem(0x5a7a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5f06);
        EXPECT(gbc.pc(), 0x5a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0317
        gbc.setState(0x6586, 0x54cc, 0x18b0, 0xf95f, 0x7909, 0x73d2, 0x1, 0x1);
        gbc.writeMem(0x6586, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x54cc);
        EXPECT(gbc.pc(), 0x6588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0318
        gbc.setState(0x6e1, 0xefab, 0xf9e0, 0xe25d, 0x69d6, 0xb4d, 0x0, 0x0);
        gbc.writeMem(0x6e1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xefab);
        EXPECT(gbc.pc(), 0x6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0319
        gbc.setState(0xbce1, 0xef57, 0x4930, 0xb03f, 0xbb2d, 0x63cf, 0x0, 0x1);
        gbc.writeMem(0xbce1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xef57);
        EXPECT(gbc.pc(), 0xbce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce1), 0xcb);
        EXPECT(gbc.readMem(0xbce2), 0x2a);
        // CB 2A 031A
        gbc.setState(0xcf05, 0x96c8, 0x1d70, 0xfd75, 0x1533, 0x1d6, 0x1, 0x0);
        gbc.writeMem(0xcf05, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x96c8);
        EXPECT(gbc.pc(), 0xcf07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf05), 0xcb);
        EXPECT(gbc.readMem(0xcf06), 0x2a);
        // CB 2A 031B
        gbc.setState(0x771a, 0x95b4, 0xd4a0, 0xe62, 0xf39b, 0x68a4, 0x1, 0x1);
        gbc.writeMem(0x771a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x95b4);
        EXPECT(gbc.pc(), 0x771c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 031C
        gbc.setState(0x2816, 0x3120, 0x7220, 0xc168, 0xcc4, 0xd50f, 0x0, 0x1);
        gbc.writeMem(0x2816, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3120);
        EXPECT(gbc.pc(), 0x2818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 031D
        gbc.setState(0x305, 0xdf86, 0x57e0, 0xd552, 0x72bc, 0x728c, 0x1, 0x0);
        gbc.writeMem(0x305, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdf86);
        EXPECT(gbc.pc(), 0x307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 031E
        gbc.setState(0x3543, 0x6e12, 0x49c0, 0x69dc, 0xce87, 0x7d11, 0x0, 0x1);
        gbc.writeMem(0x3543, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6e12);
        EXPECT(gbc.pc(), 0x3545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0320
        gbc.setState(0x3d0a, 0xa6fa, 0x8910, 0x688e, 0xb700, 0xb5ae, 0x1, 0x0);
        gbc.writeMem(0x3d0a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa6fa);
        EXPECT(gbc.pc(), 0x3d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0321
        gbc.setState(0x3b6b, 0xfd5, 0xbc90, 0x68d2, 0x82d9, 0x9d83, 0x0, 0x0);
        gbc.writeMem(0x3b6b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfd5);
        EXPECT(gbc.pc(), 0x3b6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0322
        gbc.setState(0x9877, 0x8c62, 0x88c0, 0x33b, 0xb8b0, 0xffcb, 0x0, 0x1);
        gbc.writeMem(0x9877, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8c62);
        EXPECT(gbc.pc(), 0x9879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9877), 0xcb);
        EXPECT(gbc.readMem(0x9878), 0x2a);
        // CB 2A 0323
        gbc.setState(0x7fd4, 0x2044, 0xd0, 0x8570, 0x8113, 0xf01e, 0x0, 0x1);
        gbc.writeMem(0x7fd4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2044);
        EXPECT(gbc.pc(), 0x7fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0324
        gbc.setState(0x82d0, 0x1d71, 0xa840, 0x5e95, 0xef95, 0x37f9, 0x0, 0x1);
        gbc.writeMem(0x82d0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1d71);
        EXPECT(gbc.pc(), 0x82d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d0), 0xcb);
        EXPECT(gbc.readMem(0x82d1), 0x2a);
        // CB 2A 0325
        gbc.setState(0x57db, 0x4c62, 0x1f80, 0xc476, 0xce7a, 0x648f, 0x0, 0x1);
        gbc.writeMem(0x57db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4c62);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0326
        gbc.setState(0x2455, 0xbbfb, 0x4930, 0x30fe, 0x512e, 0xb9ca, 0x1, 0x1);
        gbc.writeMem(0x2455, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbbfb);
        EXPECT(gbc.pc(), 0x2457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0327
        gbc.setState(0xefbd, 0x8b73, 0x33d0, 0xbe16, 0x64ff, 0x77d3, 0x1, 0x0);
        gbc.writeMem(0xefbd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8b73);
        EXPECT(gbc.pc(), 0xefbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefbd), 0xcb);
        EXPECT(gbc.readMem(0xefbe), 0x2a);
        // CB 2A 0328
        gbc.setState(0x98ad, 0x932b, 0x6760, 0x68ff, 0xe9a0, 0xb63f, 0x0, 0x0);
        gbc.writeMem(0x98ad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x932b);
        EXPECT(gbc.pc(), 0x98af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ad), 0xcb);
        EXPECT(gbc.readMem(0x98ae), 0x2a);
        // CB 2A 0329
        gbc.setState(0x9c1f, 0xb21, 0xbec0, 0x4ada, 0x5ee, 0x6c8f, 0x1, 0x0);
        gbc.writeMem(0x9c1f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb21);
        EXPECT(gbc.pc(), 0x9c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1f), 0xcb);
        EXPECT(gbc.readMem(0x9c20), 0x2a);
        // CB 2A 032A
        gbc.setState(0x3732, 0xbac4, 0xd7d0, 0x5f09, 0x5f9d, 0xbe6e, 0x1, 0x0);
        gbc.writeMem(0x3732, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbac4);
        EXPECT(gbc.pc(), 0x3734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 032B
        gbc.setState(0x2ccb, 0x3b94, 0x3630, 0x82fe, 0xed41, 0xb6e2, 0x0, 0x0);
        gbc.writeMem(0x2ccb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3b94);
        EXPECT(gbc.pc(), 0x2ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 032C
        gbc.setState(0xaa13, 0xf91e, 0x5810, 0xd48f, 0x4420, 0x5ae8, 0x0, 0x1);
        gbc.writeMem(0xaa13, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf91e);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa13), 0xcb);
        EXPECT(gbc.readMem(0xaa14), 0x2a);
        // CB 2A 032D
        gbc.setState(0x3711, 0x1c1a, 0xb1b0, 0x76fa, 0x9775, 0x4c14, 0x1, 0x1);
        gbc.writeMem(0x3711, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1c1a);
        EXPECT(gbc.pc(), 0x3713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 032E
        gbc.setState(0xdb0f, 0x8628, 0xd820, 0x9385, 0x424a, 0x8ff7, 0x0, 0x0);
        gbc.writeMem(0xdb0f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8628);
        EXPECT(gbc.pc(), 0xdb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0f), 0xcb);
        EXPECT(gbc.readMem(0xdb10), 0x2a);
        // CB 2A 032F
        gbc.setState(0x7fae, 0x7134, 0xffc0, 0xdd83, 0x1126, 0xb725, 0x0, 0x1);
        gbc.writeMem(0x7fae, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7134);
        EXPECT(gbc.pc(), 0x7fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0330
        gbc.setState(0xed32, 0xacef, 0x7660, 0x6d46, 0xb7a6, 0xab1e, 0x1, 0x1);
        gbc.writeMem(0xed32, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xacef);
        EXPECT(gbc.pc(), 0xed34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed32), 0xcb);
        EXPECT(gbc.readMem(0xed33), 0x2a);
        // CB 2A 0331
        gbc.setState(0xc112, 0xf59e, 0x6fe0, 0xecd2, 0x2784, 0x7a5f, 0x1, 0x1);
        gbc.writeMem(0xc112, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0xc114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc112), 0xcb);
        EXPECT(gbc.readMem(0xc113), 0x2a);
        // CB 2A 0332
        gbc.setState(0xaddc, 0x8f94, 0xa5f0, 0x9044, 0xe34f, 0x35c6, 0x0, 0x0);
        gbc.writeMem(0xaddc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8f94);
        EXPECT(gbc.pc(), 0xadde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaddc), 0xcb);
        EXPECT(gbc.readMem(0xaddd), 0x2a);
        // CB 2A 0333
        gbc.setState(0x4eec, 0xd5ed, 0xfa40, 0xb888, 0xd0ac, 0xe84, 0x1, 0x0);
        gbc.writeMem(0x4eec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd5ed);
        EXPECT(gbc.pc(), 0x4eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0334
        gbc.setState(0xdc9f, 0x4661, 0x2030, 0xec8f, 0xbab0, 0x1fbb, 0x0, 0x1);
        gbc.writeMem(0xdc9f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4661);
        EXPECT(gbc.pc(), 0xdca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc9f), 0xcb);
        EXPECT(gbc.readMem(0xdca0), 0x2a);
        // CB 2A 0335
        gbc.setState(0xe2a8, 0x1c0b, 0x1620, 0x3d0d, 0xd3e, 0xaba8, 0x1, 0x1);
        gbc.writeMem(0xe2a8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x1c0b);
        EXPECT(gbc.pc(), 0xe2aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a8), 0xcb);
        EXPECT(gbc.readMem(0xe2a9), 0x2a);
        // CB 2A 0336
        gbc.setState(0x17ea, 0x8e94, 0x10b0, 0xd8f1, 0x80, 0xe370, 0x0, 0x0);
        gbc.writeMem(0x17ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8e94);
        EXPECT(gbc.pc(), 0x17ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0337
        gbc.setState(0x9a1b, 0x92f3, 0x7220, 0x5241, 0xc01c, 0xb7f3, 0x0, 0x0);
        gbc.writeMem(0x9a1b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x92f3);
        EXPECT(gbc.pc(), 0x9a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a1b), 0xcb);
        EXPECT(gbc.readMem(0x9a1c), 0x2a);
        // CB 2A 0338
        gbc.setState(0x1920, 0xcc80, 0xaa0, 0x41dd, 0xb142, 0xc3dc, 0x1, 0x0);
        gbc.writeMem(0x1920, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcc80);
        EXPECT(gbc.pc(), 0x1922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 033A
        gbc.setState(0xc9ea, 0x294a, 0x3fb0, 0xf5d8, 0x7b8c, 0xc20c, 0x0, 0x0);
        gbc.writeMem(0xc9ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x294a);
        EXPECT(gbc.pc(), 0xc9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9ea), 0xcb);
        EXPECT(gbc.readMem(0xc9eb), 0x2a);
        // CB 2A 033B
        gbc.setState(0xb0d5, 0x8a95, 0x2f0, 0xa1da, 0x483d, 0x353d, 0x0, 0x0);
        gbc.writeMem(0xb0d5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8a95);
        EXPECT(gbc.pc(), 0xb0d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0d5), 0xcb);
        EXPECT(gbc.readMem(0xb0d6), 0x2a);
        // CB 2A 033C
        gbc.setState(0x93a6, 0x91c3, 0xde00, 0xdf38, 0xed1e, 0xc1fd, 0x0, 0x1);
        gbc.writeMem(0x93a6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x91c3);
        EXPECT(gbc.pc(), 0x93a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a6), 0xcb);
        EXPECT(gbc.readMem(0x93a7), 0x2a);
        // CB 2A 033D
        gbc.setState(0x45d5, 0xb261, 0xdfe0, 0x3571, 0x8d0c, 0x3994, 0x1, 0x0);
        gbc.writeMem(0x45d5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb261);
        EXPECT(gbc.pc(), 0x45d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 033E
        gbc.setState(0x7a29, 0xd22b, 0x2230, 0xc55d, 0x5779, 0xe243, 0x1, 0x1);
        gbc.writeMem(0x7a29, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd22b);
        EXPECT(gbc.pc(), 0x7a2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 033F
        gbc.setState(0x1e12, 0xd070, 0x6ff0, 0x855c, 0xdb3e, 0x6a6e, 0x1, 0x1);
        gbc.writeMem(0x1e12, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd070);
        EXPECT(gbc.pc(), 0x1e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0340
        gbc.setState(0x39ea, 0xb9d4, 0xbe90, 0x5f5e, 0x7829, 0x3f49, 0x1, 0x1);
        gbc.writeMem(0x39ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb9d4);
        EXPECT(gbc.pc(), 0x39ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0341
        gbc.setState(0xe55f, 0x23f8, 0xa610, 0x3023, 0x7bd0, 0xf323, 0x1, 0x0);
        gbc.writeMem(0xe55f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x23f8);
        EXPECT(gbc.pc(), 0xe561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe55f), 0xcb);
        EXPECT(gbc.readMem(0xe560), 0x2a);
        // CB 2A 0342
        gbc.setState(0x1dda, 0x21f0, 0xcb60, 0xed32, 0xa2d4, 0xf4c3, 0x0, 0x0);
        gbc.writeMem(0x1dda, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x21f0);
        EXPECT(gbc.pc(), 0x1ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0343
        gbc.setState(0xd943, 0xde21, 0xa0c0, 0x449, 0x7b83, 0x6794, 0x0, 0x0);
        gbc.writeMem(0xd943, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xde21);
        EXPECT(gbc.pc(), 0xd945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd943), 0xcb);
        EXPECT(gbc.readMem(0xd944), 0x2a);
        // CB 2A 0344
        gbc.setState(0xc547, 0x2053, 0xffb0, 0xe687, 0xc12a, 0xd3fa, 0x0, 0x1);
        gbc.writeMem(0xc547, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2053);
        EXPECT(gbc.pc(), 0xc549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc547), 0xcb);
        EXPECT(gbc.readMem(0xc548), 0x2a);
        // CB 2A 0345
        gbc.setState(0xae99, 0x8e8b, 0xc2d0, 0x3e23, 0x1835, 0x354d, 0x0, 0x1);
        gbc.writeMem(0xae99, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8e8b);
        EXPECT(gbc.pc(), 0xae9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae99), 0xcb);
        EXPECT(gbc.readMem(0xae9a), 0x2a);
        // CB 2A 0346
        gbc.setState(0x82ca, 0xc1ff, 0x5bf0, 0x7edf, 0x8811, 0xd6e0, 0x0, 0x1);
        gbc.writeMem(0x82ca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc1ff);
        EXPECT(gbc.pc(), 0x82cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ca), 0xcb);
        EXPECT(gbc.readMem(0x82cb), 0x2a);
        // CB 2A 0347
        gbc.setState(0x5289, 0x27cb, 0x8f00, 0x44bc, 0x49f7, 0xf344, 0x0, 0x1);
        gbc.writeMem(0x5289, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x27cb);
        EXPECT(gbc.pc(), 0x528b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0348
        gbc.setState(0x2375, 0xcbcf, 0xd700, 0x2f13, 0x23fe, 0x5629, 0x1, 0x0);
        gbc.writeMem(0x2375, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcbcf);
        EXPECT(gbc.pc(), 0x2377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 034A
        gbc.setState(0xa436, 0xed95, 0x29c0, 0xe747, 0x41b0, 0x5b16, 0x1, 0x0);
        gbc.writeMem(0xa436, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xed95);
        EXPECT(gbc.pc(), 0xa438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa436), 0xcb);
        EXPECT(gbc.readMem(0xa437), 0x2a);
        // CB 2A 034B
        gbc.setState(0x84b6, 0xb7e8, 0x1ea0, 0x9d92, 0x824f, 0xbbcd, 0x1, 0x0);
        gbc.writeMem(0x84b6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb7e8);
        EXPECT(gbc.pc(), 0x84b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b6), 0xcb);
        EXPECT(gbc.readMem(0x84b7), 0x2a);
        // CB 2A 034C
        gbc.setState(0x9f0e, 0x613b, 0xebe0, 0x6056, 0x87c4, 0x26d6, 0x0, 0x0);
        gbc.writeMem(0x9f0e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x613b);
        EXPECT(gbc.pc(), 0x9f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0e), 0xcb);
        EXPECT(gbc.readMem(0x9f0f), 0x2a);
        // CB 2A 034D
        gbc.setState(0x8abe, 0x551c, 0xcd30, 0x73b3, 0xb7fa, 0x7921, 0x1, 0x1);
        gbc.writeMem(0x8abe, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x551c);
        EXPECT(gbc.pc(), 0x8ac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8abe), 0xcb);
        EXPECT(gbc.readMem(0x8abf), 0x2a);
        // CB 2A 034E
        gbc.setState(0xdf91, 0x4d31, 0xf2f0, 0x7ad, 0x1fc9, 0xfe34, 0x0, 0x0);
        gbc.writeMem(0xdf91, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4d31);
        EXPECT(gbc.pc(), 0xdf93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf91), 0xcb);
        EXPECT(gbc.readMem(0xdf92), 0x2a);
        // CB 2A 034F
        gbc.setState(0x41e2, 0xba27, 0x95f0, 0xae6f, 0xcb10, 0x77d5, 0x1, 0x1);
        gbc.writeMem(0x41e2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xba27);
        EXPECT(gbc.pc(), 0x41e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0351
        gbc.setState(0xd172, 0x2c90, 0x7c0, 0x3e0d, 0x5290, 0xd81f, 0x1, 0x1);
        gbc.writeMem(0xd172, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2c90);
        EXPECT(gbc.pc(), 0xd174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd172), 0xcb);
        EXPECT(gbc.readMem(0xd173), 0x2a);
        // CB 2A 0352
        gbc.setState(0xbdd, 0x570a, 0xbf60, 0x8c24, 0x9571, 0xff90, 0x1, 0x1);
        gbc.writeMem(0xbdd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x570a);
        EXPECT(gbc.pc(), 0xbdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0353
        gbc.setState(0x241, 0x6fe7, 0xee00, 0xbba, 0xb16c, 0x47d9, 0x0, 0x1);
        gbc.writeMem(0x241, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6fe7);
        EXPECT(gbc.pc(), 0x243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0354
        gbc.setState(0x7cbe, 0x3d78, 0xe900, 0x4a4b, 0xa574, 0xd1a9, 0x1, 0x0);
        gbc.writeMem(0x7cbe, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3d78);
        EXPECT(gbc.pc(), 0x7cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0355
        gbc.setState(0x807c, 0x7a64, 0x7a60, 0x7424, 0x3785, 0x7716, 0x0, 0x0);
        gbc.writeMem(0x807c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7a64);
        EXPECT(gbc.pc(), 0x807e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807c), 0xcb);
        EXPECT(gbc.readMem(0x807d), 0x2a);
        // CB 2A 0356
        gbc.setState(0xb297, 0xa43f, 0xef40, 0x2f6b, 0x400c, 0xb838, 0x1, 0x0);
        gbc.writeMem(0xb297, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa43f);
        EXPECT(gbc.pc(), 0xb299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb297), 0xcb);
        EXPECT(gbc.readMem(0xb298), 0x2a);
        // CB 2A 0357
        gbc.setState(0xbdfe, 0xfbdd, 0x73d0, 0xbce9, 0x35dd, 0xe494, 0x0, 0x0);
        gbc.writeMem(0xbdfe, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfbdd);
        EXPECT(gbc.pc(), 0xbe00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdfe), 0xcb);
        EXPECT(gbc.readMem(0xbdff), 0x2a);
        // CB 2A 0359
        gbc.setState(0xcb3a, 0x620c, 0xf4e0, 0xc5ef, 0x6c4, 0xa0bc, 0x1, 0x0);
        gbc.writeMem(0xcb3a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x620c);
        EXPECT(gbc.pc(), 0xcb3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3a), 0xcb);
        EXPECT(gbc.readMem(0xcb3b), 0x2a);
        // CB 2A 035A
        gbc.setState(0xeead, 0xa4bf, 0x1c80, 0x4a64, 0xf809, 0x7f10, 0x0, 0x0);
        gbc.writeMem(0xeead, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa4bf);
        EXPECT(gbc.pc(), 0xeeaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeead), 0xcb);
        EXPECT(gbc.readMem(0xeeae), 0x2a);
        // CB 2A 035B
        gbc.setState(0x3f2f, 0xa342, 0x5e0, 0xfbf4, 0x952, 0x4f9a, 0x0, 0x0);
        gbc.writeMem(0x3f2f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa342);
        EXPECT(gbc.pc(), 0x3f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 035D
        gbc.setState(0x322e, 0x7d0c, 0xd7f0, 0xfdc6, 0x585a, 0xf37c, 0x0, 0x1);
        gbc.writeMem(0x322e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7d0c);
        EXPECT(gbc.pc(), 0x3230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 035E
        gbc.setState(0xb094, 0x8f1d, 0x2690, 0x4b63, 0x89d, 0xbb27, 0x1, 0x1);
        gbc.writeMem(0xb094, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8f1d);
        EXPECT(gbc.pc(), 0xb096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb094), 0xcb);
        EXPECT(gbc.readMem(0xb095), 0x2a);
        // CB 2A 035F
        gbc.setState(0xb394, 0x9fb9, 0xc980, 0xdd45, 0x69ab, 0x19c3, 0x1, 0x1);
        gbc.writeMem(0xb394, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9fb9);
        EXPECT(gbc.pc(), 0xb396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb394), 0xcb);
        EXPECT(gbc.readMem(0xb395), 0x2a);
        // CB 2A 0360
        gbc.setState(0xe429, 0xb09c, 0x4630, 0xa067, 0xbe98, 0xc260, 0x1, 0x0);
        gbc.writeMem(0xe429, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb09c);
        EXPECT(gbc.pc(), 0xe42b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe429), 0xcb);
        EXPECT(gbc.readMem(0xe42a), 0x2a);
        // CB 2A 0361
        gbc.setState(0x73bc, 0x856f, 0x2120, 0x5edf, 0xfd7d, 0x7ed7, 0x0, 0x0);
        gbc.writeMem(0x73bc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0x73be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0362
        gbc.setState(0xc622, 0x8045, 0x7480, 0x46ff, 0xeaa9, 0x8d93, 0x1, 0x0);
        gbc.writeMem(0xc622, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8045);
        EXPECT(gbc.pc(), 0xc624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc622), 0xcb);
        EXPECT(gbc.readMem(0xc623), 0x2a);
        // CB 2A 0363
        gbc.setState(0x4e60, 0x3ffe, 0xbdf0, 0x88b2, 0x7952, 0x2060, 0x0, 0x0);
        gbc.writeMem(0x4e60, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3ffe);
        EXPECT(gbc.pc(), 0x4e62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0364
        gbc.setState(0xe40a, 0x8145, 0x450, 0xee6c, 0xc738, 0x70cb, 0x0, 0x0);
        gbc.writeMem(0xe40a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8145);
        EXPECT(gbc.pc(), 0xe40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe40a), 0xcb);
        EXPECT(gbc.readMem(0xe40b), 0x2a);
        // CB 2A 0365
        gbc.setState(0xc0e6, 0xa6fe, 0x2560, 0xd498, 0x478f, 0xd3df, 0x1, 0x0);
        gbc.writeMem(0xc0e6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa6fe);
        EXPECT(gbc.pc(), 0xc0e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0e6), 0xcb);
        EXPECT(gbc.readMem(0xc0e7), 0x2a);
        // CB 2A 0366
        gbc.setState(0x61c3, 0x22e6, 0x24c0, 0xc903, 0x3268, 0xf997, 0x1, 0x0);
        gbc.writeMem(0x61c3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x22e6);
        EXPECT(gbc.pc(), 0x61c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0367
        gbc.setState(0xd219, 0x42b5, 0x2040, 0x1555, 0xc345, 0x2ca7, 0x0, 0x1);
        gbc.writeMem(0xd219, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x42b5);
        EXPECT(gbc.pc(), 0xd21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd219), 0xcb);
        EXPECT(gbc.readMem(0xd21a), 0x2a);
        // CB 2A 0368
        gbc.setState(0x4185, 0x4d2e, 0xaac0, 0x11bb, 0xfc45, 0x9a21, 0x0, 0x1);
        gbc.writeMem(0x4185, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4d2e);
        EXPECT(gbc.pc(), 0x4187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0369
        gbc.setState(0xd6be, 0x112d, 0xd90, 0xb007, 0xcc4a, 0xca38, 0x1, 0x0);
        gbc.writeMem(0xd6be, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x112d);
        EXPECT(gbc.pc(), 0xd6c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6be), 0xcb);
        EXPECT(gbc.readMem(0xd6bf), 0x2a);
        // CB 2A 036A
        gbc.setState(0xbdec, 0xfda9, 0x1570, 0xe929, 0x36bd, 0x9e55, 0x1, 0x0);
        gbc.writeMem(0xbdec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xfda9);
        EXPECT(gbc.pc(), 0xbdee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdec), 0xcb);
        EXPECT(gbc.readMem(0xbded), 0x2a);
        // CB 2A 036B
        gbc.setState(0xc6a, 0xbc9f, 0xbeb0, 0xff12, 0x47e, 0xe200, 0x1, 0x0);
        gbc.writeMem(0xc6a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbc9f);
        EXPECT(gbc.pc(), 0xc6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 036D
        gbc.setState(0xaadd, 0xc8e3, 0xf360, 0xb210, 0x5e4e, 0xa0de, 0x0, 0x0);
        gbc.writeMem(0xaadd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc8e3);
        EXPECT(gbc.pc(), 0xaadf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaadd), 0xcb);
        EXPECT(gbc.readMem(0xaade), 0x2a);
        // CB 2A 036F
        gbc.setState(0xe92a, 0x3ea1, 0x4dd0, 0xd450, 0x835b, 0x8606, 0x1, 0x0);
        gbc.writeMem(0xe92a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3ea1);
        EXPECT(gbc.pc(), 0xe92c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe92a), 0xcb);
        EXPECT(gbc.readMem(0xe92b), 0x2a);
        // CB 2A 0370
        gbc.setState(0x3a0, 0x2966, 0xc020, 0x7ae3, 0x1a64, 0x7cb1, 0x0, 0x0);
        gbc.writeMem(0x3a0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2966);
        EXPECT(gbc.pc(), 0x3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0371
        gbc.setState(0x5b64, 0xf13b, 0x8650, 0x694f, 0xaf29, 0x4076, 0x0, 0x1);
        gbc.writeMem(0x5b64, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf13b);
        EXPECT(gbc.pc(), 0x5b66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0372
        gbc.setState(0xbbec, 0x668f, 0x8bb0, 0xded6, 0xf40b, 0xf9d5, 0x1, 0x1);
        gbc.writeMem(0xbbec, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x668f);
        EXPECT(gbc.pc(), 0xbbee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbec), 0xcb);
        EXPECT(gbc.readMem(0xbbed), 0x2a);
        // CB 2A 0373
        gbc.setState(0x1438, 0xe91, 0x5df0, 0x545d, 0x4727, 0x7e4e, 0x0, 0x0);
        gbc.writeMem(0x1438, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe91);
        EXPECT(gbc.pc(), 0x143a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0374
        gbc.setState(0x2824, 0xf957, 0x4f20, 0x74d9, 0xbd65, 0x6e20, 0x1, 0x1);
        gbc.writeMem(0x2824, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf957);
        EXPECT(gbc.pc(), 0x2826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0375
        gbc.setState(0xa0bb, 0x6489, 0x7f00, 0x8251, 0x3f0c, 0xd2c4, 0x0, 0x1);
        gbc.writeMem(0xa0bb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6489);
        EXPECT(gbc.pc(), 0xa0bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0bb), 0xcb);
        EXPECT(gbc.readMem(0xa0bc), 0x2a);
        // CB 2A 0376
        gbc.setState(0x2106, 0x9d85, 0xd7c0, 0x81fe, 0xea22, 0x5fb5, 0x0, 0x1);
        gbc.writeMem(0x2106, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9d85);
        EXPECT(gbc.pc(), 0x2108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0377
        gbc.setState(0x875, 0xc521, 0x4590, 0xe811, 0x814e, 0x806d, 0x0, 0x0);
        gbc.writeMem(0x875, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc521);
        EXPECT(gbc.pc(), 0x877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0378
        gbc.setState(0xd9b2, 0x919a, 0xbad0, 0xc954, 0xd98f, 0x3859, 0x1, 0x1);
        gbc.writeMem(0xd9b2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x919a);
        EXPECT(gbc.pc(), 0xd9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b2), 0xcb);
        EXPECT(gbc.readMem(0xd9b3), 0x2a);
        // CB 2A 0379
        gbc.setState(0x541b, 0xc340, 0xc480, 0x8e9b, 0x8009, 0xe7cf, 0x1, 0x1);
        gbc.writeMem(0x541b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc340);
        EXPECT(gbc.pc(), 0x541d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 037A
        gbc.setState(0x552d, 0xa957, 0x84e0, 0x7f0d, 0x2a94, 0x5217, 0x0, 0x1);
        gbc.writeMem(0x552d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa957);
        EXPECT(gbc.pc(), 0x552f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 037B
        gbc.setState(0x64d9, 0xe549, 0x8d20, 0x9a70, 0x177f, 0xd215, 0x0, 0x1);
        gbc.writeMem(0x64d9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe549);
        EXPECT(gbc.pc(), 0x64db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 037C
        gbc.setState(0xba76, 0x6e72, 0x25c0, 0xfb1d, 0x3713, 0xf26, 0x1, 0x1);
        gbc.writeMem(0xba76, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6e72);
        EXPECT(gbc.pc(), 0xba78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba76), 0xcb);
        EXPECT(gbc.readMem(0xba77), 0x2a);
        // CB 2A 037D
        gbc.setState(0x3631, 0x7004, 0x2cf0, 0xaca8, 0x9f31, 0x5b44, 0x1, 0x1);
        gbc.writeMem(0x3631, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7004);
        EXPECT(gbc.pc(), 0x3633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 037E
        gbc.setState(0x8f86, 0x63ca, 0x9100, 0xbc8f, 0x8cd5, 0x66b5, 0x0, 0x1);
        gbc.writeMem(0x8f86, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x63ca);
        EXPECT(gbc.pc(), 0x8f88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f86), 0xcb);
        EXPECT(gbc.readMem(0x8f87), 0x2a);
        // CB 2A 037F
        gbc.setState(0xaaac, 0xc1af, 0xb4c0, 0x5ae4, 0x7374, 0x2861, 0x1, 0x0);
        gbc.writeMem(0xaaac, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc1af);
        EXPECT(gbc.pc(), 0xaaae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaac), 0xcb);
        EXPECT(gbc.readMem(0xaaad), 0x2a);
        // CB 2A 0380
        gbc.setState(0xd62a, 0xb82f, 0xbb10, 0x6a38, 0x4564, 0xfe6e, 0x1, 0x0);
        gbc.writeMem(0xd62a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb82f);
        EXPECT(gbc.pc(), 0xd62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd62a), 0xcb);
        EXPECT(gbc.readMem(0xd62b), 0x2a);
        // CB 2A 0381
        gbc.setState(0x7f3c, 0xc1da, 0x32e0, 0xe8f9, 0xfcd7, 0xfe9c, 0x1, 0x1);
        gbc.writeMem(0x7f3c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc1da);
        EXPECT(gbc.pc(), 0x7f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0382
        gbc.setState(0xbe57, 0xdbf9, 0xf450, 0x3981, 0xebcd, 0xbd10, 0x0, 0x0);
        gbc.writeMem(0xbe57, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdbf9);
        EXPECT(gbc.pc(), 0xbe59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe57), 0xcb);
        EXPECT(gbc.readMem(0xbe58), 0x2a);
        // CB 2A 0383
        gbc.setState(0x6123, 0xbbac, 0x6040, 0xd53, 0xee38, 0x399, 0x0, 0x1);
        gbc.writeMem(0x6123, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbbac);
        EXPECT(gbc.pc(), 0x6125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0384
        gbc.setState(0x96c5, 0x5356, 0x5f60, 0xf688, 0xffee, 0xa33e, 0x0, 0x0);
        gbc.writeMem(0x96c5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5356);
        EXPECT(gbc.pc(), 0x96c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c5), 0xcb);
        EXPECT(gbc.readMem(0x96c6), 0x2a);
        // CB 2A 0385
        gbc.setState(0xe928, 0xe7c7, 0x35f0, 0x244c, 0x89db, 0xf00e, 0x1, 0x1);
        gbc.writeMem(0xe928, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe7c7);
        EXPECT(gbc.pc(), 0xe92a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe928), 0xcb);
        EXPECT(gbc.readMem(0xe929), 0x2a);
        // CB 2A 0386
        gbc.setState(0xb82b, 0x1fb8, 0xe310, 0xe6f5, 0xee4d, 0xe12d, 0x0, 0x0);
        gbc.writeMem(0xb82b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1fb8);
        EXPECT(gbc.pc(), 0xb82d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb82b), 0xcb);
        EXPECT(gbc.readMem(0xb82c), 0x2a);
        // CB 2A 0387
        gbc.setState(0x64a1, 0x69af, 0xc930, 0x82c3, 0x6a25, 0x7684, 0x0, 0x0);
        gbc.writeMem(0x64a1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x69af);
        EXPECT(gbc.pc(), 0x64a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0388
        gbc.setState(0x6d63, 0x19ee, 0xd950, 0xc163, 0x85c0, 0x5109, 0x0, 0x1);
        gbc.writeMem(0x6d63, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x19ee);
        EXPECT(gbc.pc(), 0x6d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0389
        gbc.setState(0xac87, 0x9916, 0x2e20, 0x2409, 0x44c6, 0x99d9, 0x1, 0x0);
        gbc.writeMem(0xac87, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9916);
        EXPECT(gbc.pc(), 0xac89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac87), 0xcb);
        EXPECT(gbc.readMem(0xac88), 0x2a);
        // CB 2A 038A
        gbc.setState(0xca0f, 0x14e5, 0x4670, 0xefc0, 0xde1, 0x629a, 0x1, 0x1);
        gbc.writeMem(0xca0f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x14e5);
        EXPECT(gbc.pc(), 0xca11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0f), 0xcb);
        EXPECT(gbc.readMem(0xca10), 0x2a);
        // CB 2A 038C
        gbc.setState(0x9b8e, 0xe97, 0x2470, 0x16ce, 0xd97f, 0xc11e, 0x1, 0x0);
        gbc.writeMem(0x9b8e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe97);
        EXPECT(gbc.pc(), 0x9b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b8e), 0xcb);
        EXPECT(gbc.readMem(0x9b8f), 0x2a);
        // CB 2A 038D
        gbc.setState(0x7b74, 0xd549, 0x7790, 0x9a7, 0x3bd4, 0xf423, 0x1, 0x0);
        gbc.writeMem(0x7b74, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd549);
        EXPECT(gbc.pc(), 0x7b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 038E
        gbc.setState(0x3512, 0x301c, 0xdd60, 0xe466, 0xe9a9, 0x5e67, 0x1, 0x1);
        gbc.writeMem(0x3512, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x301c);
        EXPECT(gbc.pc(), 0x3514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 038F
        gbc.setState(0x6e9b, 0xc4e8, 0xda40, 0xeac4, 0x646b, 0xf8f6, 0x0, 0x1);
        gbc.writeMem(0x6e9b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc4e8);
        EXPECT(gbc.pc(), 0x6e9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0390
        gbc.setState(0xde3b, 0x3546, 0x7850, 0xdf69, 0x28a5, 0x7205, 0x1, 0x0);
        gbc.writeMem(0xde3b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3546);
        EXPECT(gbc.pc(), 0xde3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde3b), 0xcb);
        EXPECT(gbc.readMem(0xde3c), 0x2a);
        // CB 2A 0391
        gbc.setState(0x3a40, 0x40dc, 0xc6c0, 0x951, 0x7178, 0xdd72, 0x0, 0x0);
        gbc.writeMem(0x3a40, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x40dc);
        EXPECT(gbc.pc(), 0x3a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 0392
        gbc.setState(0xed21, 0x9305, 0xfa10, 0x9f0d, 0x8a8, 0xd582, 0x0, 0x1);
        gbc.writeMem(0xed21, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9305);
        EXPECT(gbc.pc(), 0xed23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed21), 0xcb);
        EXPECT(gbc.readMem(0xed22), 0x2a);
        // CB 2A 0393
        gbc.setState(0xddff, 0x3ffe, 0xab40, 0xfe16, 0x3f35, 0x19d3, 0x0, 0x0);
        gbc.writeMem(0xddff, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3ffe);
        EXPECT(gbc.pc(), 0xde01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddff), 0xcb);
        EXPECT(gbc.readMem(0xde00), 0x2a);
        // CB 2A 0394
        gbc.setState(0xd7f3, 0x7ba3, 0x7ce0, 0x950, 0x123e, 0x1f34, 0x0, 0x1);
        gbc.writeMem(0xd7f3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7ba3);
        EXPECT(gbc.pc(), 0xd7f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f3), 0xcb);
        EXPECT(gbc.readMem(0xd7f4), 0x2a);
        // CB 2A 0395
        gbc.setState(0xcd30, 0xf53e, 0xb660, 0x207c, 0xcca2, 0x766b, 0x0, 0x0);
        gbc.writeMem(0xcd30, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf53e);
        EXPECT(gbc.pc(), 0xcd32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd30), 0xcb);
        EXPECT(gbc.readMem(0xcd31), 0x2a);
        // CB 2A 0396
        gbc.setState(0x78fd, 0x81ea, 0xe30, 0x4398, 0x82a9, 0x1952, 0x0, 0x0);
        gbc.writeMem(0x78fd, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x81ea);
        EXPECT(gbc.pc(), 0x78ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0397
        gbc.setState(0x2003, 0xda2d, 0x8790, 0x6d83, 0x3ea1, 0x1b2a, 0x0, 0x1);
        gbc.writeMem(0x2003, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xda2d);
        EXPECT(gbc.pc(), 0x2005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 0398
        gbc.setState(0xc662, 0x8ac5, 0x59c0, 0x5087, 0x3451, 0x7328, 0x1, 0x0);
        gbc.writeMem(0xc662, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8ac5);
        EXPECT(gbc.pc(), 0xc664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc662), 0xcb);
        EXPECT(gbc.readMem(0xc663), 0x2a);
        // CB 2A 0399
        gbc.setState(0x9db, 0x8363, 0x55d0, 0x7521, 0x4756, 0x1914, 0x1, 0x0);
        gbc.writeMem(0x9db, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8363);
        EXPECT(gbc.pc(), 0x9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 039A
        gbc.setState(0x83ca, 0xd577, 0x94a0, 0x1d33, 0x9f82, 0x2e14, 0x1, 0x0);
        gbc.writeMem(0x83ca, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd577);
        EXPECT(gbc.pc(), 0x83cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ca), 0xcb);
        EXPECT(gbc.readMem(0x83cb), 0x2a);
        // CB 2A 039B
        gbc.setState(0xe8b4, 0x4600, 0x55f0, 0x63cc, 0xba33, 0xb98c, 0x1, 0x1);
        gbc.writeMem(0xe8b4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4600);
        EXPECT(gbc.pc(), 0xe8b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b4), 0xcb);
        EXPECT(gbc.readMem(0xe8b5), 0x2a);
        // CB 2A 039C
        gbc.setState(0x4a56, 0x7d25, 0x4fd0, 0x27c7, 0xfed7, 0xe6cf, 0x0, 0x1);
        gbc.writeMem(0x4a56, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7d25);
        EXPECT(gbc.pc(), 0x4a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 039D
        gbc.setState(0x26b, 0x9dfe, 0x3be0, 0x3a8d, 0x2883, 0x3d8f, 0x1, 0x1);
        gbc.writeMem(0x26b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9dfe);
        EXPECT(gbc.pc(), 0x26d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 039E
        gbc.setState(0xe384, 0x29a5, 0x5590, 0xd9bb, 0xeeec, 0x59de, 0x1, 0x1);
        gbc.writeMem(0xe384, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x29a5);
        EXPECT(gbc.pc(), 0xe386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe384), 0xcb);
        EXPECT(gbc.readMem(0xe385), 0x2a);
        // CB 2A 039F
        gbc.setState(0x13ea, 0x68ef, 0x91b0, 0x9d77, 0x86ca, 0xa53e, 0x1, 0x0);
        gbc.writeMem(0x13ea, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x68ef);
        EXPECT(gbc.pc(), 0x13ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03A0
        gbc.setState(0xd0b3, 0x1638, 0xb7d0, 0xb867, 0x879d, 0xe0aa, 0x1, 0x1);
        gbc.writeMem(0xd0b3, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1638);
        EXPECT(gbc.pc(), 0xd0b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b3), 0xcb);
        EXPECT(gbc.readMem(0xd0b4), 0x2a);
        // CB 2A 03A1
        gbc.setState(0x70ff, 0x487d, 0x9be0, 0x7d1e, 0x67e4, 0x5886, 0x1, 0x0);
        gbc.writeMem(0x70ff, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x487d);
        EXPECT(gbc.pc(), 0x7101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03A2
        gbc.setState(0xafad, 0xb206, 0x96f0, 0x680e, 0x547f, 0x8837, 0x1, 0x1);
        gbc.writeMem(0xafad, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb206);
        EXPECT(gbc.pc(), 0xafaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafad), 0xcb);
        EXPECT(gbc.readMem(0xafae), 0x2a);
        // CB 2A 03A4
        gbc.setState(0xb206, 0xa7cb, 0x4e30, 0x1cdf, 0xa3de, 0x6adc, 0x1, 0x0);
        gbc.writeMem(0xb206, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa7cb);
        EXPECT(gbc.pc(), 0xb208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb206), 0xcb);
        EXPECT(gbc.readMem(0xb207), 0x2a);
        // CB 2A 03A5
        gbc.setState(0xcb98, 0x2a9d, 0xe9a0, 0x90a9, 0xfd4, 0xa956, 0x1, 0x1);
        gbc.writeMem(0xcb98, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2a9d);
        EXPECT(gbc.pc(), 0xcb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb98), 0xcb);
        EXPECT(gbc.readMem(0xcb99), 0x2a);
        // CB 2A 03A6
        gbc.setState(0x15bc, 0x7569, 0x7e90, 0xed85, 0xec6d, 0x946d, 0x0, 0x0);
        gbc.writeMem(0x15bc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7569);
        EXPECT(gbc.pc(), 0x15be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03A7
        gbc.setState(0xa2e2, 0x31a9, 0x2960, 0xb592, 0x9f3b, 0x4997, 0x1, 0x0);
        gbc.writeMem(0xa2e2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x31a9);
        EXPECT(gbc.pc(), 0xa2e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e2), 0xcb);
        EXPECT(gbc.readMem(0xa2e3), 0x2a);
        // CB 2A 03A8
        gbc.setState(0x1e65, 0xfe03, 0x2b80, 0xd36f, 0x143a, 0x565, 0x1, 0x0);
        gbc.writeMem(0x1e65, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0x1e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03A9
        gbc.setState(0xd9c7, 0x1860, 0xf810, 0x11b0, 0xbfd0, 0x500f, 0x0, 0x1);
        gbc.writeMem(0xd9c7, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1860);
        EXPECT(gbc.pc(), 0xd9c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c7), 0xcb);
        EXPECT(gbc.readMem(0xd9c8), 0x2a);
        // CB 2A 03AA
        gbc.setState(0xda16, 0xcd48, 0x97b0, 0x749f, 0x147b, 0xe91e, 0x0, 0x1);
        gbc.writeMem(0xda16, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xcd48);
        EXPECT(gbc.pc(), 0xda18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda16), 0xcb);
        EXPECT(gbc.readMem(0xda17), 0x2a);
        // CB 2A 03AB
        gbc.setState(0x90a2, 0xd58b, 0xc5e0, 0xac71, 0x2343, 0xceea, 0x0, 0x1);
        gbc.writeMem(0x90a2, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd58b);
        EXPECT(gbc.pc(), 0x90a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90a2), 0xcb);
        EXPECT(gbc.readMem(0x90a3), 0x2a);
        // CB 2A 03AC
        gbc.setState(0xea84, 0x2965, 0x5f00, 0x19e7, 0x7ada, 0xd135, 0x0, 0x0);
        gbc.writeMem(0xea84, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2965);
        EXPECT(gbc.pc(), 0xea86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea84), 0xcb);
        EXPECT(gbc.readMem(0xea85), 0x2a);
        // CB 2A 03AD
        gbc.setState(0x10be, 0x3b9, 0x5880, 0xc279, 0x3593, 0x1658, 0x0, 0x1);
        gbc.writeMem(0x10be, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3b9);
        EXPECT(gbc.pc(), 0x10c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03AE
        gbc.setState(0x6387, 0x9743, 0xf080, 0x1bf5, 0xf9ba, 0x46ac, 0x0, 0x1);
        gbc.writeMem(0x6387, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9743);
        EXPECT(gbc.pc(), 0x6389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03AF
        gbc.setState(0x14ac, 0xb508, 0xd020, 0x3829, 0xa1b, 0xd8ba, 0x1, 0x1);
        gbc.writeMem(0x14ac, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb508);
        EXPECT(gbc.pc(), 0x14ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03B0
        gbc.setState(0xa4fb, 0x2cd6, 0x2170, 0xe6ab, 0xe741, 0xd3d4, 0x0, 0x0);
        gbc.writeMem(0xa4fb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2cd6);
        EXPECT(gbc.pc(), 0xa4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4fb), 0xcb);
        EXPECT(gbc.readMem(0xa4fc), 0x2a);
        // CB 2A 03B1
        gbc.setState(0x4f42, 0x2fb7, 0x2490, 0x4a2e, 0x967b, 0x49c4, 0x0, 0x1);
        gbc.writeMem(0x4f42, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2fb7);
        EXPECT(gbc.pc(), 0x4f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03B2
        gbc.setState(0x982c, 0x6295, 0x66f0, 0xdfbd, 0xf27b, 0x7602, 0x1, 0x0);
        gbc.writeMem(0x982c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6295);
        EXPECT(gbc.pc(), 0x982e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982c), 0xcb);
        EXPECT(gbc.readMem(0x982d), 0x2a);
        // CB 2A 03B3
        gbc.setState(0x6450, 0x7b3a, 0xa190, 0xbbe3, 0x8b0f, 0x6f5c, 0x1, 0x0);
        gbc.writeMem(0x6450, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7b3a);
        EXPECT(gbc.pc(), 0x6452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03B4
        gbc.setState(0xc316, 0xa0fb, 0x5170, 0x85a3, 0xe47b, 0x2b18, 0x1, 0x0);
        gbc.writeMem(0xc316, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa0fb);
        EXPECT(gbc.pc(), 0xc318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc316), 0xcb);
        EXPECT(gbc.readMem(0xc317), 0x2a);
        // CB 2A 03B5
        gbc.setState(0x8954, 0x7172, 0xd940, 0x8be1, 0x505e, 0x1abd, 0x0, 0x0);
        gbc.writeMem(0x8954, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7172);
        EXPECT(gbc.pc(), 0x8956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8954), 0xcb);
        EXPECT(gbc.readMem(0x8955), 0x2a);
        // CB 2A 03B6
        gbc.setState(0x4f0, 0x9135, 0xd7c0, 0x7e46, 0x997b, 0xb46e, 0x0, 0x1);
        gbc.writeMem(0x4f0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9135);
        EXPECT(gbc.pc(), 0x4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03B7
        gbc.setState(0x597b, 0x8726, 0x8a10, 0x83fa, 0x2884, 0x6142, 0x0, 0x0);
        gbc.writeMem(0x597b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8726);
        EXPECT(gbc.pc(), 0x597d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03B8
        gbc.setState(0xbf5, 0x49de, 0xb9a0, 0xfa46, 0xb208, 0x7a0d, 0x1, 0x1);
        gbc.writeMem(0xbf5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x49de);
        EXPECT(gbc.pc(), 0xbf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03B9
        gbc.setState(0x763a, 0xff1a, 0x5fd0, 0x86f9, 0xc6c3, 0xaff8, 0x0, 0x1);
        gbc.writeMem(0x763a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xff1a);
        EXPECT(gbc.pc(), 0x763c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03BA
        gbc.setState(0x5a69, 0x5fd6, 0x4e20, 0x6e6, 0xde42, 0x6264, 0x0, 0x1);
        gbc.writeMem(0x5a69, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5fd6);
        EXPECT(gbc.pc(), 0x5a6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03BB
        gbc.setState(0x3c10, 0xfa13, 0x66f0, 0x753c, 0x8f50, 0x28a5, 0x1, 0x0);
        gbc.writeMem(0x3c10, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfa13);
        EXPECT(gbc.pc(), 0x3c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03BC
        gbc.setState(0xbda5, 0x1f20, 0xf960, 0xa540, 0x73db, 0x99f9, 0x1, 0x0);
        gbc.writeMem(0xbda5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1f20);
        EXPECT(gbc.pc(), 0xbda7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda5), 0xcb);
        EXPECT(gbc.readMem(0xbda6), 0x2a);
        // CB 2A 03BD
        gbc.setState(0x6c45, 0x5cd8, 0xe3d0, 0x62c, 0x2ae8, 0xca3b, 0x0, 0x1);
        gbc.writeMem(0x6c45, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5cd8);
        EXPECT(gbc.pc(), 0x6c47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03BE
        gbc.setState(0x389c, 0xc229, 0xe140, 0x5681, 0xdddf, 0x4e70, 0x0, 0x1);
        gbc.writeMem(0x389c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc229);
        EXPECT(gbc.pc(), 0x389e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03BF
        gbc.setState(0x66f6, 0xe9c1, 0xb7f0, 0xf725, 0x79ba, 0xa106, 0x0, 0x0);
        gbc.writeMem(0x66f6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe9c1);
        EXPECT(gbc.pc(), 0x66f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03C0
        gbc.setState(0x26c9, 0x9579, 0x92d0, 0x6c55, 0x3c49, 0x8ecd, 0x0, 0x1);
        gbc.writeMem(0x26c9, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9579);
        EXPECT(gbc.pc(), 0x26cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03C1
        gbc.setState(0x4a3f, 0x62fd, 0x8e60, 0x9216, 0x562c, 0x5680, 0x1, 0x0);
        gbc.writeMem(0x4a3f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x62fd);
        EXPECT(gbc.pc(), 0x4a41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03C2
        gbc.setState(0xe068, 0x1a3c, 0xb2f0, 0x6f90, 0x1df9, 0xefd6, 0x1, 0x0);
        gbc.writeMem(0xe068, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1a3c);
        EXPECT(gbc.pc(), 0xe06a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe068), 0xcb);
        EXPECT(gbc.readMem(0xe069), 0x2a);
        // CB 2A 03C3
        gbc.setState(0x551a, 0xf490, 0xc1f0, 0xaeae, 0xea7a, 0x7849, 0x0, 0x0);
        gbc.writeMem(0x551a, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf490);
        EXPECT(gbc.pc(), 0x551c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03C4
        gbc.setState(0xeda0, 0xdb46, 0xa9b0, 0x75c3, 0x89a3, 0x5b87, 0x1, 0x1);
        gbc.writeMem(0xeda0, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdb46);
        EXPECT(gbc.pc(), 0xeda2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeda0), 0xcb);
        EXPECT(gbc.readMem(0xeda1), 0x2a);
        // CB 2A 03C5
        gbc.setState(0x4913, 0x618d, 0x7000, 0x4f16, 0xbf79, 0x9219, 0x1, 0x0);
        gbc.writeMem(0x4913, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x618d);
        EXPECT(gbc.pc(), 0x4915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03C6
        gbc.setState(0xb024, 0xc93f, 0xf800, 0x8336, 0x621, 0x39c7, 0x0, 0x1);
        gbc.writeMem(0xb024, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc93f);
        EXPECT(gbc.pc(), 0xb026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb024), 0xcb);
        EXPECT(gbc.readMem(0xb025), 0x2a);
        // CB 2A 03C7
        gbc.setState(0xd74b, 0x5f35, 0x61b0, 0xc182, 0x8f90, 0x9f93, 0x1, 0x1);
        gbc.writeMem(0xd74b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5f35);
        EXPECT(gbc.pc(), 0xd74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74b), 0xcb);
        EXPECT(gbc.readMem(0xd74c), 0x2a);
        // CB 2A 03C9
        gbc.setState(0x3b4b, 0x6d44, 0xfa10, 0x1146, 0xacdf, 0x6f52, 0x0, 0x1);
        gbc.writeMem(0x3b4b, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6d44);
        EXPECT(gbc.pc(), 0x3b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03CA
        gbc.setState(0x7be8, 0xbc84, 0x9e70, 0xb39e, 0xa1aa, 0x3881, 0x1, 0x0);
        gbc.writeMem(0x7be8, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbc84);
        EXPECT(gbc.pc(), 0x7bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03CB
        gbc.setState(0xe15, 0x4b30, 0xff60, 0xdbda, 0xf9ed, 0x9d1f, 0x1, 0x0);
        gbc.writeMem(0xe15, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4b30);
        EXPECT(gbc.pc(), 0xe17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03CC
        gbc.setState(0x6a56, 0xf474, 0xb7b0, 0x1e72, 0x5983, 0xf8d, 0x0, 0x1);
        gbc.writeMem(0x6a56, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf474);
        EXPECT(gbc.pc(), 0x6a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03CD
        gbc.setState(0x286d, 0x2690, 0x9ca0, 0x1a6f, 0xe56c, 0xe3e3, 0x0, 0x0);
        gbc.writeMem(0x286d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2690);
        EXPECT(gbc.pc(), 0x286f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03CE
        gbc.setState(0x91cb, 0x76a9, 0x5700, 0xc9cb, 0x3e49, 0xbb85, 0x1, 0x0);
        gbc.writeMem(0x91cb, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x76a9);
        EXPECT(gbc.pc(), 0x91cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cb), 0xcb);
        EXPECT(gbc.readMem(0x91cc), 0x2a);
        // CB 2A 03CF
        gbc.setState(0xb26d, 0x785b, 0xed60, 0xc051, 0x45b4, 0x5394, 0x1, 0x1);
        gbc.writeMem(0xb26d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x785b);
        EXPECT(gbc.pc(), 0xb26f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb26d), 0xcb);
        EXPECT(gbc.readMem(0xb26e), 0x2a);
        // CB 2A 03D0
        gbc.setState(0x5142, 0xa1f, 0x1bb0, 0x43b7, 0x8759, 0xbfd2, 0x1, 0x1);
        gbc.writeMem(0x5142, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa1f);
        EXPECT(gbc.pc(), 0x5144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03D1
        gbc.setState(0x564d, 0xdce2, 0xdc40, 0xc86f, 0x767e, 0xc8f, 0x1, 0x1);
        gbc.writeMem(0x564d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdce2);
        EXPECT(gbc.pc(), 0x564f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03D2
        gbc.setState(0x4cf, 0xa8f0, 0x9ff0, 0x939d, 0x4f87, 0x562b, 0x0, 0x1);
        gbc.writeMem(0x4cf, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa8f0);
        EXPECT(gbc.pc(), 0x4d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03D3
        gbc.setState(0xec12, 0xf63a, 0x2aa0, 0xe75d, 0xb698, 0x44be, 0x1, 0x1);
        gbc.writeMem(0xec12, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf63a);
        EXPECT(gbc.pc(), 0xec14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec12), 0xcb);
        EXPECT(gbc.readMem(0xec13), 0x2a);
        // CB 2A 03D4
        gbc.setState(0x32e5, 0x3be4, 0xb580, 0xb049, 0x9a3, 0x51eb, 0x0, 0x1);
        gbc.writeMem(0x32e5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3be4);
        EXPECT(gbc.pc(), 0x32e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03D5
        gbc.setState(0xe361, 0x79bd, 0xce40, 0x8bcf, 0xf1d7, 0x3ecb, 0x1, 0x1);
        gbc.writeMem(0xe361, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x79bd);
        EXPECT(gbc.pc(), 0xe363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe361), 0xcb);
        EXPECT(gbc.readMem(0xe362), 0x2a);
        // CB 2A 03D6
        gbc.setState(0x69e1, 0xc2eb, 0x1de0, 0x8df7, 0xdc92, 0x15ea, 0x0, 0x0);
        gbc.writeMem(0x69e1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc2eb);
        EXPECT(gbc.pc(), 0x69e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03D7
        gbc.setState(0xe416, 0x5ca, 0x72b0, 0x5808, 0x923f, 0xec02, 0x1, 0x1);
        gbc.writeMem(0xe416, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5ca);
        EXPECT(gbc.pc(), 0xe418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe416), 0xcb);
        EXPECT(gbc.readMem(0xe417), 0x2a);
        // CB 2A 03D8
        gbc.setState(0x54e4, 0x1e73, 0xc6e0, 0x61d0, 0x5516, 0xf7ed, 0x1, 0x0);
        gbc.writeMem(0x54e4, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1e73);
        EXPECT(gbc.pc(), 0x54e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03D9
        gbc.setState(0x9a79, 0xfde, 0xeb30, 0xf053, 0x6b70, 0xd0a0, 0x0, 0x0);
        gbc.writeMem(0x9a79, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfde);
        EXPECT(gbc.pc(), 0x9a7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a79), 0xcb);
        EXPECT(gbc.readMem(0x9a7a), 0x2a);
        // CB 2A 03DA
        gbc.setState(0xc02d, 0x4057, 0x6460, 0x3a0, 0x4226, 0x8816, 0x0, 0x0);
        gbc.writeMem(0xc02d, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4057);
        EXPECT(gbc.pc(), 0xc02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc02d), 0xcb);
        EXPECT(gbc.readMem(0xc02e), 0x2a);
        // CB 2A 03DB
        gbc.setState(0x9e16, 0x601f, 0xa070, 0x6b96, 0x7433, 0xedbf, 0x0, 0x1);
        gbc.writeMem(0x9e16, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x601f);
        EXPECT(gbc.pc(), 0x9e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e16), 0xcb);
        EXPECT(gbc.readMem(0x9e17), 0x2a);
        // CB 2A 03DC
        gbc.setState(0xed5, 0x8649, 0xc40, 0xbf33, 0x7726, 0xb574, 0x0, 0x0);
        gbc.writeMem(0xed5, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8649);
        EXPECT(gbc.pc(), 0xed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03DD
        gbc.setState(0x2c53, 0x5c54, 0xdb90, 0x9a72, 0x68c, 0xc78f, 0x1, 0x0);
        gbc.writeMem(0x2c53, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5c54);
        EXPECT(gbc.pc(), 0x2c55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03DE
        gbc.setState(0x25c6, 0xec1f, 0x7e30, 0xb665, 0x5ba8, 0xdcc2, 0x0, 0x1);
        gbc.writeMem(0x25c6, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xec1f);
        EXPECT(gbc.pc(), 0x25c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03DF
        gbc.setState(0xd68f, 0x3f24, 0x1890, 0x9d46, 0xa461, 0x3269, 0x0, 0x0);
        gbc.writeMem(0xd68f, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3f24);
        EXPECT(gbc.pc(), 0xd691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd68f), 0xcb);
        EXPECT(gbc.readMem(0xd690), 0x2a);
        // CB 2A 03E0
        gbc.setState(0xae8c, 0x84d5, 0x1990, 0x6f2c, 0x6d76, 0x91f6, 0x1, 0x1);
        gbc.writeMem(0xae8c, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x84d5);
        EXPECT(gbc.pc(), 0xae8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8c), 0xcb);
        EXPECT(gbc.readMem(0xae8d), 0x2a);
        // CB 2A 03E1
        gbc.setState(0xd48e, 0x8d3a, 0xac40, 0xe4a2, 0xe8c7, 0xddbd, 0x0, 0x0);
        gbc.writeMem(0xd48e, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8d3a);
        EXPECT(gbc.pc(), 0xd490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd48e), 0xcb);
        EXPECT(gbc.readMem(0xd48f), 0x2a);
        // CB 2A 03E2
        gbc.setState(0x6112, 0xaac4, 0x3e50, 0x6dbb, 0x4d89, 0x2dd0, 0x1, 0x1);
        gbc.writeMem(0x6112, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xaac4);
        EXPECT(gbc.pc(), 0x6114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03E3
        gbc.setState(0x7280, 0x2b8, 0x6280, 0xad90, 0x977c, 0x26d8, 0x1, 0x0);
        gbc.writeMem(0x7280, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x7282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03E4
        gbc.setState(0xe530, 0x85c0, 0x31c0, 0x6095, 0x9571, 0x8158, 0x1, 0x1);
        gbc.writeMem(0xe530, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x85c0);
        EXPECT(gbc.pc(), 0xe532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe530), 0xcb);
        EXPECT(gbc.readMem(0xe531), 0x2a);
        // CB 2A 03E5
        gbc.setState(0x1383, 0x8ee7, 0x2d00, 0x4d2c, 0xb875, 0x6096, 0x0, 0x0);
        gbc.writeMem(0x1383, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8ee7);
        EXPECT(gbc.pc(), 0x1385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2A 03E6
        gbc.setState(0x67dc, 0x444c, 0x7130, 0xacd4, 0xe32c, 0x3ef1, 0x1, 0x0);
        gbc.writeMem(0x67dc, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x444c);
        EXPECT(gbc.pc(), 0x67de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2A 03E7
        gbc.setState(0x21e1, 0x718d, 0xa4e0, 0xedd9, 0xa0e9, 0x1798, 0x1, 0x1);
        gbc.writeMem(0x21e1, { 0xcb, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x718d);
        EXPECT(gbc.pc(), 0x21e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
