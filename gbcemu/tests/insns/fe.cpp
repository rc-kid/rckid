#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_fe)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_fe) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // FE 0001
        gbc.setState(0xe8fb, 0x7ae3, 0x5de0, 0x9dc, 0x2653, 0x78ae, 0x0, 0x1);
        gbc.writeMem(0xe8fb, { 0xfe, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7ae3);
        EXPECT(gbc.pc(), 0xe8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8fb), 0xfe);
        EXPECT(gbc.readMem(0xe8fc), 0xe9);
        // FE 0002
        gbc.setState(0x17de, 0xbdb9, 0xf6b0, 0x6eb, 0x805b, 0xe394, 0x0, 0x1);
        gbc.writeMem(0x17de, { 0xfe, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbdb9);
        EXPECT(gbc.pc(), 0x17e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0003
        gbc.setState(0xceaa, 0xcd17, 0xd330, 0x8bd9, 0xc924, 0xac57, 0x0, 0x0);
        gbc.writeMem(0xceaa, { 0xfe, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcd17);
        EXPECT(gbc.pc(), 0xceac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceaa), 0xfe);
        EXPECT(gbc.readMem(0xceab), 0xe7);
        // FE 0004
        gbc.setState(0x4a50, 0xd447, 0x88a0, 0x66ab, 0x7012, 0xc316, 0x1, 0x0);
        gbc.writeMem(0x4a50, { 0xfe, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd447);
        EXPECT(gbc.pc(), 0x4a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0005
        gbc.setState(0x838e, 0xdee8, 0xfda0, 0x6cf6, 0x808b, 0xdf95, 0x0, 0x0);
        gbc.writeMem(0x838e, { 0xfe, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xdee8);
        EXPECT(gbc.pc(), 0x8390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x838e), 0xfe);
        EXPECT(gbc.readMem(0x838f), 0xc7);
        // FE 0006
        gbc.setState(0x7c36, 0x8f53, 0xb930, 0x3a52, 0xcc45, 0xd6e5, 0x0, 0x0);
        gbc.writeMem(0x7c36, { 0xfe, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8f53);
        EXPECT(gbc.pc(), 0x7c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0007
        gbc.setState(0x7d0a, 0xe0b6, 0xeeb0, 0x5a27, 0x223d, 0xf2c, 0x0, 0x1);
        gbc.writeMem(0x7d0a, { 0xfe, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe0b6);
        EXPECT(gbc.pc(), 0x7d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0009
        gbc.setState(0xd06f, 0xaa89, 0xd50, 0x348, 0x9085, 0x2925, 0x0, 0x0);
        gbc.writeMem(0xd06f, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xaa89);
        EXPECT(gbc.pc(), 0xd071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd06f), 0xfe);
        EXPECT(gbc.readMem(0xd070), 0x53);
        // FE 000A
        gbc.setState(0x8f33, 0xf615, 0x2a00, 0xc175, 0x8d39, 0x8195, 0x1, 0x0);
        gbc.writeMem(0x8f33, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf615);
        EXPECT(gbc.pc(), 0x8f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f33), 0xfe);
        EXPECT(gbc.readMem(0x8f34), 0x88);
        // FE 000B
        gbc.setState(0xa494, 0xff53, 0xbbf0, 0x4c2d, 0x1de3, 0x60a2, 0x0, 0x1);
        gbc.writeMem(0xa494, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xff53);
        EXPECT(gbc.pc(), 0xa496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa494), 0xfe);
        EXPECT(gbc.readMem(0xa495), 0x5a);
        // FE 000C
        gbc.setState(0xc5c1, 0xa0c4, 0x4e70, 0x2eda, 0x2ba6, 0x978c, 0x1, 0x1);
        gbc.writeMem(0xc5c1, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa0c4);
        EXPECT(gbc.pc(), 0xc5c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c1), 0xfe);
        EXPECT(gbc.readMem(0xc5c2), 0x38);
        // FE 000D
        gbc.setState(0x5b87, 0x482a, 0x1fc0, 0xcd7a, 0xc09b, 0x23cb, 0x0, 0x0);
        gbc.writeMem(0x5b87, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x482a);
        EXPECT(gbc.pc(), 0x5b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 000E
        gbc.setState(0x6400, 0x27d6, 0x56b0, 0xd129, 0x56ef, 0x3915, 0x0, 0x0);
        gbc.writeMem(0x6400, { 0xfe, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x27d6);
        EXPECT(gbc.pc(), 0x6402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 000F
        gbc.setState(0x3130, 0x2b03, 0x1660, 0x2c85, 0xd890, 0xce1e, 0x0, 0x1);
        gbc.writeMem(0x3130, { 0xfe, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2b03);
        EXPECT(gbc.pc(), 0x3132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0010
        gbc.setState(0x2b3e, 0x16ae, 0x7bc0, 0xe73e, 0x4848, 0xd8a1, 0x0, 0x0);
        gbc.writeMem(0x2b3e, { 0xfe, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x16ae);
        EXPECT(gbc.pc(), 0x2b40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0011
        gbc.setState(0xac, 0x6490, 0x5a10, 0x1790, 0x368a, 0x85a6, 0x1, 0x1);
        gbc.writeMem(0xac, { 0xfe, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6490);
        EXPECT(gbc.pc(), 0xae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0012
        gbc.setState(0x961c, 0xdd6b, 0x7050, 0x29e4, 0xbbd, 0x853b, 0x0, 0x0);
        gbc.writeMem(0x961c, { 0xfe, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdd6b);
        EXPECT(gbc.pc(), 0x961e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961c), 0xfe);
        EXPECT(gbc.readMem(0x961d), 0xd);
        // FE 0013
        gbc.setState(0x77cc, 0xad5c, 0x60a0, 0xec6c, 0x37d0, 0xc326, 0x1, 0x1);
        gbc.writeMem(0x77cc, { 0xfe, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xad5c);
        EXPECT(gbc.pc(), 0x77ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0014
        gbc.setState(0xa80, 0xe929, 0xd120, 0x65ab, 0xa719, 0xc8bd, 0x1, 0x0);
        gbc.writeMem(0xa80, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe929);
        EXPECT(gbc.pc(), 0xa82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0015
        gbc.setState(0xc882, 0x666f, 0xa5e0, 0xf662, 0x1cc6, 0xd906, 0x0, 0x0);
        gbc.writeMem(0xc882, { 0xfe, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x666f);
        EXPECT(gbc.pc(), 0xc884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc882), 0xfe);
        EXPECT(gbc.readMem(0xc883), 0x6e);
        // FE 0016
        gbc.setState(0x54c3, 0x3c33, 0xdab0, 0xd56a, 0x1028, 0xf02b, 0x1, 0x0);
        gbc.writeMem(0x54c3, { 0xfe, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3c33);
        EXPECT(gbc.pc(), 0x54c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0017
        gbc.setState(0x6f85, 0x607f, 0xa420, 0x2bb, 0xf90e, 0x6c19, 0x0, 0x1);
        gbc.writeMem(0x6f85, { 0xfe, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x607f);
        EXPECT(gbc.pc(), 0x6f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0018
        gbc.setState(0x231b, 0x54f4, 0x9e70, 0x42a, 0x9576, 0xb564, 0x0, 0x1);
        gbc.writeMem(0x231b, { 0xfe, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x54f4);
        EXPECT(gbc.pc(), 0x231d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0019
        gbc.setState(0x2496, 0x5c51, 0x6e70, 0x2fa0, 0xfd8c, 0xf1d2, 0x0, 0x0);
        gbc.writeMem(0x2496, { 0xfe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5c51);
        EXPECT(gbc.pc(), 0x2498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 001B
        gbc.setState(0x9d79, 0x1e1e, 0xc570, 0x24b4, 0xa908, 0x4147, 0x0, 0x0);
        gbc.writeMem(0x9d79, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1e1e);
        EXPECT(gbc.pc(), 0x9d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d79), 0xfe);
        EXPECT(gbc.readMem(0x9d7a), 0x6d);
        // FE 001C
        gbc.setState(0x5d78, 0x4cad, 0xf760, 0xd8ea, 0xf27b, 0x5e06, 0x1, 0x1);
        gbc.writeMem(0x5d78, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4cad);
        EXPECT(gbc.pc(), 0x5d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 001D
        gbc.setState(0x9b2a, 0xc272, 0x1d10, 0xd4da, 0x5da6, 0xe36, 0x0, 0x0);
        gbc.writeMem(0x9b2a, { 0xfe, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc272);
        EXPECT(gbc.pc(), 0x9b2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b2a), 0xfe);
        EXPECT(gbc.readMem(0x9b2b), 0xa5);
        // FE 001E
        gbc.setState(0xa4de, 0x3dc6, 0xce40, 0xb3cf, 0xaf29, 0x7947, 0x1, 0x0);
        gbc.writeMem(0xa4de, { 0xfe, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3dc6);
        EXPECT(gbc.pc(), 0xa4e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4de), 0xfe);
        EXPECT(gbc.readMem(0xa4df), 0x4f);
        // FE 001F
        gbc.setState(0xee50, 0x321, 0x4e0, 0xe38c, 0xf69b, 0xaa9, 0x1, 0x0);
        gbc.writeMem(0xee50, { 0xfe, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x321);
        EXPECT(gbc.pc(), 0xee52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee50), 0xfe);
        EXPECT(gbc.readMem(0xee51), 0x34);
        // FE 0020
        gbc.setState(0x1ef3, 0xd78, 0xdec0, 0x2bbd, 0xfe7, 0x8098, 0x1, 0x1);
        gbc.writeMem(0x1ef3, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd78);
        EXPECT(gbc.pc(), 0x1ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0021
        gbc.setState(0xb98, 0xcaba, 0xe050, 0xc9bf, 0xe0d8, 0x5e09, 0x1, 0x1);
        gbc.writeMem(0xb98, { 0xfe, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xcaba);
        EXPECT(gbc.pc(), 0xb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0022
        gbc.setState(0x4615, 0xadb2, 0x43e0, 0x63d0, 0x44c7, 0xfaaa, 0x0, 0x0);
        gbc.writeMem(0x4615, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xadb2);
        EXPECT(gbc.pc(), 0x4617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0023
        gbc.setState(0xb3f6, 0xca43, 0x6370, 0x2feb, 0xfc7b, 0x320b, 0x0, 0x0);
        gbc.writeMem(0xb3f6, { 0xfe, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xca43);
        EXPECT(gbc.pc(), 0xb3f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f6), 0xfe);
        EXPECT(gbc.readMem(0xb3f7), 0x70);
        // FE 0024
        gbc.setState(0x884a, 0x597e, 0x50b0, 0xd274, 0xc3e1, 0x9818, 0x1, 0x0);
        gbc.writeMem(0x884a, { 0xfe, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x597e);
        EXPECT(gbc.pc(), 0x884c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884a), 0xfe);
        EXPECT(gbc.readMem(0x884b), 0xc3);
        // FE 0025
        gbc.setState(0x1bad, 0x4fcf, 0xa800, 0x456e, 0xc046, 0x670d, 0x1, 0x0);
        gbc.writeMem(0x1bad, { 0xfe, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4fcf);
        EXPECT(gbc.pc(), 0x1baf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0026
        gbc.setState(0x942b, 0xb5be, 0xcc0, 0x3f58, 0x8d0b, 0x9ff0, 0x1, 0x0);
        gbc.writeMem(0x942b, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb5be);
        EXPECT(gbc.pc(), 0x942d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x942b), 0xfe);
        EXPECT(gbc.readMem(0x942c), 0xb1);
        // FE 0027
        gbc.setState(0x227, 0xe0d9, 0xed80, 0xdd9a, 0x137d, 0x9083, 0x0, 0x0);
        gbc.writeMem(0x227, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe0d9);
        EXPECT(gbc.pc(), 0x229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0028
        gbc.setState(0x3705, 0x692, 0x9880, 0x973d, 0xb93b, 0x31e, 0x0, 0x0);
        gbc.writeMem(0x3705, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x692);
        EXPECT(gbc.pc(), 0x3707);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0029
        gbc.setState(0x6420, 0xf1d2, 0x77e0, 0xd400, 0xe120, 0xc7b7, 0x0, 0x0);
        gbc.writeMem(0x6420, { 0xfe, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf1d2);
        EXPECT(gbc.pc(), 0x6422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 002A
        gbc.setState(0xd5a9, 0x806d, 0xc0b0, 0x9a5e, 0x9f3, 0x4958, 0x0, 0x0);
        gbc.writeMem(0xd5a9, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x806d);
        EXPECT(gbc.pc(), 0xd5ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a9), 0xfe);
        EXPECT(gbc.readMem(0xd5aa), 0x78);
        // FE 002B
        gbc.setState(0x5445, 0x358c, 0x7cc0, 0xb5b2, 0x2abd, 0x3ad6, 0x0, 0x0);
        gbc.writeMem(0x5445, { 0xfe, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x358c);
        EXPECT(gbc.pc(), 0x5447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 002D
        gbc.setState(0xb1b9, 0x798e, 0xb560, 0x5728, 0xcbd4, 0xd953, 0x1, 0x1);
        gbc.writeMem(0xb1b9, { 0xfe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x798e);
        EXPECT(gbc.pc(), 0xb1bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b9), 0xfe);
        EXPECT(gbc.readMem(0xb1ba), 0xaf);
        // FE 002E
        gbc.setState(0x4341, 0x7cbb, 0x1ce0, 0x7672, 0x23c1, 0xbfd8, 0x0, 0x1);
        gbc.writeMem(0x4341, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7cbb);
        EXPECT(gbc.pc(), 0x4343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 002F
        gbc.setState(0x484f, 0xabaa, 0xad40, 0x9393, 0xd39, 0x1b3d, 0x1, 0x0);
        gbc.writeMem(0x484f, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xabaa);
        EXPECT(gbc.pc(), 0x4851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0030
        gbc.setState(0x414d, 0x8304, 0x5290, 0x649d, 0x9297, 0x9e8c, 0x1, 0x0);
        gbc.writeMem(0x414d, { 0xfe, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8304);
        EXPECT(gbc.pc(), 0x414f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0031
        gbc.setState(0x6a95, 0x6698, 0x3bd0, 0xb22e, 0xc627, 0x3294, 0x1, 0x0);
        gbc.writeMem(0x6a95, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6698);
        EXPECT(gbc.pc(), 0x6a97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0032
        gbc.setState(0xcdaf, 0xffe1, 0x9880, 0xe17e, 0xd55e, 0x2a9f, 0x0, 0x1);
        gbc.writeMem(0xcdaf, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xffe1);
        EXPECT(gbc.pc(), 0xcdb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdaf), 0xfe);
        EXPECT(gbc.readMem(0xcdb0), 0x5a);
        // FE 0033
        gbc.setState(0x98e6, 0x44c7, 0xe0, 0xb295, 0xfdbf, 0x8cb0, 0x1, 0x0);
        gbc.writeMem(0x98e6, { 0xfe, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x44c7);
        EXPECT(gbc.pc(), 0x98e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e6), 0xfe);
        EXPECT(gbc.readMem(0x98e7), 0xbd);
        // FE 0034
        gbc.setState(0xa90c, 0xc01, 0x8090, 0xaabe, 0x254d, 0x3e85, 0x0, 0x1);
        gbc.writeMem(0xa90c, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc01);
        EXPECT(gbc.pc(), 0xa90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa90c), 0xfe);
        EXPECT(gbc.readMem(0xa90d), 0x32);
        // FE 0036
        gbc.setState(0x53b4, 0xd1a9, 0x6470, 0x734d, 0xee57, 0x64ee, 0x1, 0x0);
        gbc.writeMem(0x53b4, { 0xfe, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd1a9);
        EXPECT(gbc.pc(), 0x53b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0037
        gbc.setState(0xdf4, 0x11cc, 0x8c30, 0x3b15, 0x186, 0x56e9, 0x0, 0x1);
        gbc.writeMem(0xdf4, { 0xfe, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x11cc);
        EXPECT(gbc.pc(), 0xdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0038
        gbc.setState(0x587d, 0x2a24, 0xfac0, 0x5766, 0xe90f, 0xc471, 0x0, 0x0);
        gbc.writeMem(0x587d, { 0xfe, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2a24);
        EXPECT(gbc.pc(), 0x587f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0039
        gbc.setState(0xcbe, 0xf472, 0x1260, 0x9349, 0xcf68, 0x6b7c, 0x1, 0x0);
        gbc.writeMem(0xcbe, { 0xfe, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf472);
        EXPECT(gbc.pc(), 0xcc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 003A
        gbc.setState(0x10b1, 0x2953, 0x120, 0xb2d4, 0x4c44, 0xdcae, 0x0, 0x1);
        gbc.writeMem(0x10b1, { 0xfe, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2953);
        EXPECT(gbc.pc(), 0x10b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 003B
        gbc.setState(0x1ec4, 0x1b5b, 0x2130, 0x3674, 0x7345, 0xaa09, 0x0, 0x0);
        gbc.writeMem(0x1ec4, { 0xfe, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1b5b);
        EXPECT(gbc.pc(), 0x1ec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 003C
        gbc.setState(0x4ec2, 0x192a, 0x8ab0, 0x5bd6, 0x6022, 0x82b5, 0x0, 0x1);
        gbc.writeMem(0x4ec2, { 0xfe, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x192a);
        EXPECT(gbc.pc(), 0x4ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 003D
        gbc.setState(0x74b7, 0x4d2f, 0xda50, 0xaf6d, 0xaf2a, 0x60d6, 0x1, 0x0);
        gbc.writeMem(0x74b7, { 0xfe, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4d2f);
        EXPECT(gbc.pc(), 0x74b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 003E
        gbc.setState(0xa6d3, 0x110, 0xfa30, 0x4514, 0x765b, 0xd920, 0x1, 0x1);
        gbc.writeMem(0xa6d3, { 0xfe, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x110);
        EXPECT(gbc.pc(), 0xa6d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d3), 0xfe);
        EXPECT(gbc.readMem(0xa6d4), 0x92);
        // FE 003F
        gbc.setState(0xc2a3, 0xdc75, 0x4db0, 0xef4d, 0x3bf4, 0xd5f9, 0x0, 0x1);
        gbc.writeMem(0xc2a3, { 0xfe, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdc75);
        EXPECT(gbc.pc(), 0xc2a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a3), 0xfe);
        EXPECT(gbc.readMem(0xc2a4), 0xc2);
        // FE 0040
        gbc.setState(0xe994, 0x988b, 0xcda0, 0x15a0, 0x8c56, 0x5497, 0x0, 0x0);
        gbc.writeMem(0xe994, { 0xfe, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x988b);
        EXPECT(gbc.pc(), 0xe996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe994), 0xfe);
        EXPECT(gbc.readMem(0xe995), 0x61);
        // FE 0041
        gbc.setState(0xcf85, 0x1d09, 0x4d10, 0xa93d, 0x2d11, 0xf3cb, 0x1, 0x1);
        gbc.writeMem(0xcf85, { 0xfe, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1d09);
        EXPECT(gbc.pc(), 0xcf87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf85), 0xfe);
        EXPECT(gbc.readMem(0xcf86), 0x2f);
        // FE 0042
        gbc.setState(0xbfdd, 0x518b, 0x5530, 0x6105, 0xf7ea, 0xb351, 0x0, 0x0);
        gbc.writeMem(0xbfdd, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x518b);
        EXPECT(gbc.pc(), 0xbfdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdd), 0xfe);
        EXPECT(gbc.readMem(0xbfde), 0xaa);
        // FE 0043
        gbc.setState(0x6b27, 0x6e52, 0x6e00, 0x1a75, 0x1cca, 0x1c81, 0x1, 0x0);
        gbc.writeMem(0x6b27, { 0xfe, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6e52);
        EXPECT(gbc.pc(), 0x6b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0044
        gbc.setState(0xef30, 0x6ebd, 0x4e60, 0xf15a, 0x94fa, 0xebd, 0x1, 0x0);
        gbc.writeMem(0xef30, { 0xfe, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6ebd);
        EXPECT(gbc.pc(), 0xef32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef30), 0xfe);
        EXPECT(gbc.readMem(0xef31), 0x31);
        // FE 0045
        gbc.setState(0x3403, 0xda94, 0xd530, 0x5e3b, 0x2b46, 0x7967, 0x1, 0x1);
        gbc.writeMem(0x3403, { 0xfe, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xda94);
        EXPECT(gbc.pc(), 0x3405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0046
        gbc.setState(0x6e78, 0x9e4f, 0x6330, 0xfe09, 0x55eb, 0x8f6e, 0x0, 0x1);
        gbc.writeMem(0x6e78, { 0xfe, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9e4f);
        EXPECT(gbc.pc(), 0x6e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0047
        gbc.setState(0x3fd9, 0x9d7d, 0x9280, 0xb15b, 0xd269, 0x730d, 0x1, 0x0);
        gbc.writeMem(0x3fd9, { 0xfe, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9d7d);
        EXPECT(gbc.pc(), 0x3fdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0048
        gbc.setState(0xc7c4, 0x1235, 0x7660, 0x9835, 0xc085, 0xd085, 0x0, 0x0);
        gbc.writeMem(0xc7c4, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1235);
        EXPECT(gbc.pc(), 0xc7c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c4), 0xfe);
        EXPECT(gbc.readMem(0xc7c5), 0x5f);
        // FE 0049
        gbc.setState(0xbe8a, 0xedba, 0x7bd0, 0x5885, 0x6528, 0xc134, 0x0, 0x0);
        gbc.writeMem(0xbe8a, { 0xfe, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xedba);
        EXPECT(gbc.pc(), 0xbe8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe8a), 0xfe);
        EXPECT(gbc.readMem(0xbe8b), 0xdf);
        // FE 004A
        gbc.setState(0xdfe3, 0xf310, 0x7af0, 0xaa3a, 0xf027, 0x2f48, 0x1, 0x1);
        gbc.writeMem(0xdfe3, { 0xfe, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf310);
        EXPECT(gbc.pc(), 0xdfe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe3), 0xfe);
        EXPECT(gbc.readMem(0xdfe4), 0x91);
        // FE 004B
        gbc.setState(0x4c83, 0x3470, 0x5a40, 0x237c, 0x4c39, 0xe2aa, 0x1, 0x1);
        gbc.writeMem(0x4c83, { 0xfe, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3470);
        EXPECT(gbc.pc(), 0x4c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 004C
        gbc.setState(0x5147, 0x5e30, 0xb940, 0x3a23, 0xd76d, 0x1cce, 0x1, 0x1);
        gbc.writeMem(0x5147, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5e30);
        EXPECT(gbc.pc(), 0x5149);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 004D
        gbc.setState(0x3909, 0x42a9, 0xc8b0, 0xaae5, 0xe745, 0xeb65, 0x1, 0x1);
        gbc.writeMem(0x3909, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x42a9);
        EXPECT(gbc.pc(), 0x390b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 004E
        gbc.setState(0x8cd2, 0x5db2, 0x5af0, 0x2541, 0xc138, 0x639e, 0x0, 0x1);
        gbc.writeMem(0x8cd2, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5db2);
        EXPECT(gbc.pc(), 0x8cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd2), 0xfe);
        EXPECT(gbc.readMem(0x8cd3), 0x38);
        // FE 0050
        gbc.setState(0x63f8, 0x1a6, 0xa740, 0xb6fb, 0x9e5e, 0xe86, 0x1, 0x1);
        gbc.writeMem(0x63f8, { 0xfe, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1a6);
        EXPECT(gbc.pc(), 0x63fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0051
        gbc.setState(0xd17b, 0x3208, 0xb660, 0xb06c, 0x9d49, 0x60f1, 0x1, 0x0);
        gbc.writeMem(0xd17b, { 0xfe, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3208);
        EXPECT(gbc.pc(), 0xd17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd17b), 0xfe);
        EXPECT(gbc.readMem(0xd17c), 0xed);
        // FE 0052
        gbc.setState(0xa715, 0x40e2, 0x21c0, 0xd8be, 0xc076, 0x78b6, 0x0, 0x0);
        gbc.writeMem(0xa715, { 0xfe, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x40e2);
        EXPECT(gbc.pc(), 0xa717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa715), 0xfe);
        EXPECT(gbc.readMem(0xa716), 0x2f);
        // FE 0053
        gbc.setState(0xc07f, 0x8a05, 0xad00, 0x73a, 0xd2c7, 0x8ffa, 0x0, 0x1);
        gbc.writeMem(0xc07f, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8a05);
        EXPECT(gbc.pc(), 0xc081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07f), 0xfe);
        EXPECT(gbc.readMem(0xc080), 0x60);
        // FE 0054
        gbc.setState(0xe692, 0x3db6, 0xe880, 0xecee, 0xe3d1, 0x209c, 0x1, 0x1);
        gbc.writeMem(0xe692, { 0xfe, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3db6);
        EXPECT(gbc.pc(), 0xe694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe692), 0xfe);
        EXPECT(gbc.readMem(0xe693), 0x46);
        // FE 0056
        gbc.setState(0x36dc, 0xc3d1, 0x740, 0x6fb8, 0x1f8d, 0x10ca, 0x1, 0x0);
        gbc.writeMem(0x36dc, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc3d1);
        EXPECT(gbc.pc(), 0x36de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0057
        gbc.setState(0x1417, 0xb162, 0xa2f0, 0xd4b6, 0x1a83, 0xe825, 0x1, 0x0);
        gbc.writeMem(0x1417, { 0xfe, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb162);
        EXPECT(gbc.pc(), 0x1419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0058
        gbc.setState(0x5a84, 0xecb3, 0xeaa0, 0xe5df, 0x988, 0x75d8, 0x1, 0x0);
        gbc.writeMem(0x5a84, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xecb3);
        EXPECT(gbc.pc(), 0x5a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 005A
        gbc.setState(0xb5f3, 0xcc30, 0x9860, 0x7848, 0x4b21, 0xbf7c, 0x1, 0x1);
        gbc.writeMem(0xb5f3, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcc30);
        EXPECT(gbc.pc(), 0xb5f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f3), 0xfe);
        EXPECT(gbc.readMem(0xb5f4), 0x58);
        // FE 005B
        gbc.setState(0xb9ad, 0x4948, 0x2350, 0xdb53, 0x5721, 0xc38f, 0x0, 0x1);
        gbc.writeMem(0xb9ad, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4948);
        EXPECT(gbc.pc(), 0xb9af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9ad), 0xfe);
        EXPECT(gbc.readMem(0xb9ae), 0x69);
        // FE 005C
        gbc.setState(0x17aa, 0x25fa, 0x5d0, 0xa7c8, 0xcf27, 0x6cd1, 0x1, 0x0);
        gbc.writeMem(0x17aa, { 0xfe, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x25fa);
        EXPECT(gbc.pc(), 0x17ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 005D
        gbc.setState(0x40eb, 0x993b, 0x18a0, 0x33cd, 0x5de4, 0x800b, 0x1, 0x0);
        gbc.writeMem(0x40eb, { 0xfe, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x993b);
        EXPECT(gbc.pc(), 0x40ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 005E
        gbc.setState(0x1c8a, 0x4fd2, 0xdea0, 0x9957, 0xfdb, 0x331e, 0x1, 0x1);
        gbc.writeMem(0x1c8a, { 0xfe, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4fd2);
        EXPECT(gbc.pc(), 0x1c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 005F
        gbc.setState(0x2934, 0x8e64, 0x440, 0x535c, 0xb490, 0x2a50, 0x1, 0x1);
        gbc.writeMem(0x2934, { 0xfe, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8e64);
        EXPECT(gbc.pc(), 0x2936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0060
        gbc.setState(0x4ffc, 0xf495, 0x960, 0xa033, 0xd6d2, 0x89ab, 0x0, 0x1);
        gbc.writeMem(0x4ffc, { 0xfe, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf495);
        EXPECT(gbc.pc(), 0x4ffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0061
        gbc.setState(0xbcc0, 0xf292, 0x7a0, 0x57a0, 0x1df6, 0xbd28, 0x0, 0x1);
        gbc.writeMem(0xbcc0, { 0xfe, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf292);
        EXPECT(gbc.pc(), 0xbcc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc0), 0xfe);
        EXPECT(gbc.readMem(0xbcc1), 0xcb);
        // FE 0062
        gbc.setState(0xb2a3, 0x65c2, 0xafa0, 0xd50, 0xb387, 0xfc97, 0x1, 0x0);
        gbc.writeMem(0xb2a3, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x65c2);
        EXPECT(gbc.pc(), 0xb2a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a3), 0xfe);
        EXPECT(gbc.readMem(0xb2a4), 0xd9);
        // FE 0063
        gbc.setState(0xd19a, 0x60fa, 0x6710, 0x9c46, 0x5cc8, 0x8e71, 0x0, 0x1);
        gbc.writeMem(0xd19a, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x60fa);
        EXPECT(gbc.pc(), 0xd19c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19a), 0xfe);
        EXPECT(gbc.readMem(0xd19b), 0xcd);
        // FE 0064
        gbc.setState(0xe399, 0x4ea0, 0xfc90, 0xcc07, 0x9cb9, 0x241a, 0x1, 0x1);
        gbc.writeMem(0xe399, { 0xfe, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4ea0);
        EXPECT(gbc.pc(), 0xe39b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe399), 0xfe);
        EXPECT(gbc.readMem(0xe39a), 0xb8);
        // FE 0066
        gbc.setState(0xb104, 0x4cfb, 0x83b0, 0xe2ac, 0x9c06, 0x1f46, 0x0, 0x1);
        gbc.writeMem(0xb104, { 0xfe, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4cfb);
        EXPECT(gbc.pc(), 0xb106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb104), 0xfe);
        EXPECT(gbc.readMem(0xb105), 0x4d);
        // FE 0067
        gbc.setState(0x634e, 0x2ce7, 0x8b50, 0x637, 0xdc1a, 0x804c, 0x0, 0x0);
        gbc.writeMem(0x634e, { 0xfe, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2ce7);
        EXPECT(gbc.pc(), 0x6350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0068
        gbc.setState(0x7aba, 0x1a8f, 0xf330, 0x3ef7, 0xcac6, 0x93d4, 0x0, 0x0);
        gbc.writeMem(0x7aba, { 0xfe, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1a8f);
        EXPECT(gbc.pc(), 0x7abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0069
        gbc.setState(0x3836, 0x4517, 0x8e60, 0xc758, 0xd68e, 0xe62e, 0x0, 0x1);
        gbc.writeMem(0x3836, { 0xfe, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4517);
        EXPECT(gbc.pc(), 0x3838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 006A
        gbc.setState(0x5bfc, 0x126b, 0xbe40, 0xc4bb, 0x6133, 0x2b3, 0x0, 0x0);
        gbc.writeMem(0x5bfc, { 0xfe, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x126b);
        EXPECT(gbc.pc(), 0x5bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 006B
        gbc.setState(0x1485, 0xf0ef, 0xc180, 0x2a06, 0xbe9, 0xf069, 0x0, 0x1);
        gbc.writeMem(0x1485, { 0xfe, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf0ef);
        EXPECT(gbc.pc(), 0x1487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 006C
        gbc.setState(0xd241, 0xd5e1, 0x5bd0, 0x27d4, 0x1a34, 0x99b6, 0x1, 0x1);
        gbc.writeMem(0xd241, { 0xfe, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd5e1);
        EXPECT(gbc.pc(), 0xd243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd241), 0xfe);
        EXPECT(gbc.readMem(0xd242), 0xb2);
        // FE 006D
        gbc.setState(0xd1a9, 0x3137, 0xa4c0, 0xe2c4, 0x7413, 0x7bd9, 0x1, 0x1);
        gbc.writeMem(0xd1a9, { 0xfe, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3137);
        EXPECT(gbc.pc(), 0xd1ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a9), 0xfe);
        EXPECT(gbc.readMem(0xd1aa), 0x84);
        // FE 006E
        gbc.setState(0x8d71, 0x97e3, 0xe7d0, 0xb79c, 0x2961, 0x8a5, 0x0, 0x0);
        gbc.writeMem(0x8d71, { 0xfe, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x97e3);
        EXPECT(gbc.pc(), 0x8d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d71), 0xfe);
        EXPECT(gbc.readMem(0x8d72), 0x4);
        // FE 006F
        gbc.setState(0x77a7, 0x6c5f, 0x7e30, 0xbe11, 0x9d06, 0x4281, 0x0, 0x0);
        gbc.writeMem(0x77a7, { 0xfe, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6c5f);
        EXPECT(gbc.pc(), 0x77a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0070
        gbc.setState(0x7365, 0x180c, 0xa3e0, 0x8809, 0xa36b, 0x283c, 0x1, 0x1);
        gbc.writeMem(0x7365, { 0xfe, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x180c);
        EXPECT(gbc.pc(), 0x7367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0071
        gbc.setState(0x82bb, 0xf1bb, 0xf120, 0x3170, 0xf1ca, 0x2a21, 0x1, 0x0);
        gbc.writeMem(0x82bb, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf1bb);
        EXPECT(gbc.pc(), 0x82bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bb), 0xfe);
        EXPECT(gbc.readMem(0x82bc), 0xd9);
        // FE 0072
        gbc.setState(0x85d3, 0x6573, 0x18c0, 0xced2, 0x7137, 0x229e, 0x0, 0x0);
        gbc.writeMem(0x85d3, { 0xfe, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6573);
        EXPECT(gbc.pc(), 0x85d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d3), 0xfe);
        EXPECT(gbc.readMem(0x85d4), 0xd);
        // FE 0073
        gbc.setState(0xdee2, 0x9645, 0x3930, 0x49e3, 0xe96f, 0xf125, 0x0, 0x0);
        gbc.writeMem(0xdee2, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9645);
        EXPECT(gbc.pc(), 0xdee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdee2), 0xfe);
        EXPECT(gbc.readMem(0xdee3), 0x98);
        // FE 0074
        gbc.setState(0xbfe9, 0xce5d, 0xcc70, 0x9be9, 0xcf9c, 0x9431, 0x0, 0x0);
        gbc.writeMem(0xbfe9, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xce5d);
        EXPECT(gbc.pc(), 0xbfeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe9), 0xfe);
        EXPECT(gbc.readMem(0xbfea), 0x10);
        // FE 0075
        gbc.setState(0x9522, 0x3783, 0xd130, 0x28a4, 0xa2bb, 0xde29, 0x0, 0x1);
        gbc.writeMem(0x9522, { 0xfe, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3783);
        EXPECT(gbc.pc(), 0x9524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9522), 0xfe);
        EXPECT(gbc.readMem(0x9523), 0xac);
        // FE 0076
        gbc.setState(0xdafa, 0x89d6, 0x3a90, 0x99a8, 0xf007, 0xdfdc, 0x0, 0x1);
        gbc.writeMem(0xdafa, { 0xfe, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x89d6);
        EXPECT(gbc.pc(), 0xdafc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdafa), 0xfe);
        EXPECT(gbc.readMem(0xdafb), 0x71);
        // FE 0077
        gbc.setState(0xdfbf, 0x2651, 0x6e0, 0x4cd7, 0x5b8e, 0xc6f0, 0x1, 0x0);
        gbc.writeMem(0xdfbf, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2651);
        EXPECT(gbc.pc(), 0xdfc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfbf), 0xfe);
        EXPECT(gbc.readMem(0xdfc0), 0x82);
        // FE 0078
        gbc.setState(0x2e88, 0x23a1, 0x3b40, 0x4a29, 0xcf7e, 0x9684, 0x0, 0x0);
        gbc.writeMem(0x2e88, { 0xfe, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x23a1);
        EXPECT(gbc.pc(), 0x2e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0079
        gbc.setState(0xcfc4, 0xc04a, 0xee80, 0xb9a, 0x5c31, 0x4fe7, 0x0, 0x0);
        gbc.writeMem(0xcfc4, { 0xfe, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc04a);
        EXPECT(gbc.pc(), 0xcfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc4), 0xfe);
        EXPECT(gbc.readMem(0xcfc5), 0x3d);
        // FE 007A
        gbc.setState(0x39f9, 0x6454, 0x26d0, 0xee9b, 0x77b2, 0x4d4f, 0x0, 0x1);
        gbc.writeMem(0x39f9, { 0xfe, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6454);
        EXPECT(gbc.pc(), 0x39fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 007B
        gbc.setState(0x44ba, 0xd1ff, 0xfad0, 0xe7f9, 0x1068, 0xc61, 0x1, 0x1);
        gbc.writeMem(0x44ba, { 0xfe, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd1ff);
        EXPECT(gbc.pc(), 0x44bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 007C
        gbc.setState(0x7169, 0xb4b9, 0x500, 0x74c1, 0x616b, 0x2b35, 0x0, 0x0);
        gbc.writeMem(0x7169, { 0xfe, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb4b9);
        EXPECT(gbc.pc(), 0x716b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 007D
        gbc.setState(0x3b87, 0xaa7f, 0x4e50, 0x873e, 0x778b, 0xa2f8, 0x1, 0x0);
        gbc.writeMem(0x3b87, { 0xfe, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xaa7f);
        EXPECT(gbc.pc(), 0x3b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 007E
        gbc.setState(0x85c3, 0xd31e, 0xa8e0, 0x94da, 0xf644, 0x5296, 0x0, 0x0);
        gbc.writeMem(0x85c3, { 0xfe, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd31e);
        EXPECT(gbc.pc(), 0x85c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85c3), 0xfe);
        EXPECT(gbc.readMem(0x85c4), 0x72);
        // FE 007F
        gbc.setState(0x2b0, 0x4dbb, 0xbf30, 0x4513, 0x9de5, 0xf552, 0x1, 0x1);
        gbc.writeMem(0x2b0, { 0xfe, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4dbb);
        EXPECT(gbc.pc(), 0x2b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0080
        gbc.setState(0x7d14, 0x6d15, 0x9490, 0xc73e, 0xf65, 0x80b0, 0x1, 0x0);
        gbc.writeMem(0x7d14, { 0xfe, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6d15);
        EXPECT(gbc.pc(), 0x7d16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0081
        gbc.setState(0x25e7, 0x3846, 0xb410, 0xa3e0, 0xed2c, 0x8ed9, 0x1, 0x0);
        gbc.writeMem(0x25e7, { 0xfe, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3846);
        EXPECT(gbc.pc(), 0x25e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0082
        gbc.setState(0xe38c, 0xae14, 0x4510, 0xdce5, 0xd90b, 0x2ccb, 0x1, 0x1);
        gbc.writeMem(0xe38c, { 0xfe, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xae14);
        EXPECT(gbc.pc(), 0xe38e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38c), 0xfe);
        EXPECT(gbc.readMem(0xe38d), 0x6a);
        // FE 0083
        gbc.setState(0x759f, 0xb23c, 0xfc30, 0xcaab, 0x21e5, 0x82ba, 0x0, 0x1);
        gbc.writeMem(0x759f, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb23c);
        EXPECT(gbc.pc(), 0x75a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0084
        gbc.setState(0x993c, 0x8c6d, 0x31a0, 0x86ce, 0x32d9, 0xbea6, 0x0, 0x1);
        gbc.writeMem(0x993c, { 0xfe, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8c6d);
        EXPECT(gbc.pc(), 0x993e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993c), 0xfe);
        EXPECT(gbc.readMem(0x993d), 0x5d);
        // FE 0085
        gbc.setState(0x6417, 0x6e59, 0x7fc0, 0xd070, 0xb7c, 0x6176, 0x0, 0x0);
        gbc.writeMem(0x6417, { 0xfe, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6e59);
        EXPECT(gbc.pc(), 0x6419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0086
        gbc.setState(0x4052, 0x9a48, 0x8a40, 0x299c, 0xc615, 0xd5b7, 0x1, 0x1);
        gbc.writeMem(0x4052, { 0xfe, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9a48);
        EXPECT(gbc.pc(), 0x4054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0087
        gbc.setState(0xb4d6, 0xf48b, 0x71c0, 0xf120, 0x728b, 0xff2f, 0x0, 0x0);
        gbc.writeMem(0xb4d6, { 0xfe, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf48b);
        EXPECT(gbc.pc(), 0xb4d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d6), 0xfe);
        EXPECT(gbc.readMem(0xb4d7), 0x33);
        // FE 0088
        gbc.setState(0xa20, 0xe02e, 0xf0a0, 0xc326, 0xbe9e, 0x5d05, 0x0, 0x0);
        gbc.writeMem(0xa20, { 0xfe, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe02e);
        EXPECT(gbc.pc(), 0xa22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0089
        gbc.setState(0x4f9f, 0xeee6, 0xb6a0, 0xaeb3, 0xfe0, 0xebb0, 0x0, 0x1);
        gbc.writeMem(0x4f9f, { 0xfe, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xeee6);
        EXPECT(gbc.pc(), 0x4fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 008A
        gbc.setState(0x5b11, 0xe45b, 0x8490, 0x29e3, 0x8c74, 0x20a0, 0x1, 0x1);
        gbc.writeMem(0x5b11, { 0xfe, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe45b);
        EXPECT(gbc.pc(), 0x5b13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 008B
        gbc.setState(0xe12e, 0xe162, 0x8d20, 0x28c, 0x3aee, 0x2619, 0x1, 0x1);
        gbc.writeMem(0xe12e, { 0xfe, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe162);
        EXPECT(gbc.pc(), 0xe130);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe12e), 0xfe);
        EXPECT(gbc.readMem(0xe12f), 0x8f);
        // FE 008C
        gbc.setState(0xa6e8, 0x3c6e, 0xe740, 0x8cb3, 0xffb6, 0x6925, 0x1, 0x1);
        gbc.writeMem(0xa6e8, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3c6e);
        EXPECT(gbc.pc(), 0xa6ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e8), 0xfe);
        EXPECT(gbc.readMem(0xa6e9), 0x80);
        // FE 008D
        gbc.setState(0x8ad, 0x1915, 0x6280, 0x198d, 0x32b, 0x138, 0x0, 0x1);
        gbc.writeMem(0x8ad, { 0xfe, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1915);
        EXPECT(gbc.pc(), 0x8af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 008E
        gbc.setState(0x85ee, 0x50c0, 0x9460, 0xe916, 0x3d5c, 0x3768, 0x1, 0x0);
        gbc.writeMem(0x85ee, { 0xfe, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x50c0);
        EXPECT(gbc.pc(), 0x85f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ee), 0xfe);
        EXPECT(gbc.readMem(0x85ef), 0xd3);
        // FE 008F
        gbc.setState(0x3f36, 0xaaae, 0xf8f0, 0xe40e, 0x1588, 0x6f23, 0x0, 0x1);
        gbc.writeMem(0x3f36, { 0xfe, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaaae);
        EXPECT(gbc.pc(), 0x3f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0090
        gbc.setState(0x6df0, 0x1428, 0xaaa0, 0x266a, 0xa94e, 0x86db, 0x1, 0x0);
        gbc.writeMem(0x6df0, { 0xfe, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1428);
        EXPECT(gbc.pc(), 0x6df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0091
        gbc.setState(0x88c8, 0x726d, 0x6820, 0xa80b, 0xe606, 0xd1df, 0x0, 0x0);
        gbc.writeMem(0x88c8, { 0xfe, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x726d);
        EXPECT(gbc.pc(), 0x88ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c8), 0xfe);
        EXPECT(gbc.readMem(0x88c9), 0x11);
        // FE 0092
        gbc.setState(0xa9d4, 0x80f7, 0xdca0, 0x2d2f, 0x7ff1, 0x35d4, 0x1, 0x1);
        gbc.writeMem(0xa9d4, { 0xfe, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x80f7);
        EXPECT(gbc.pc(), 0xa9d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d4), 0xfe);
        EXPECT(gbc.readMem(0xa9d5), 0x14);
        // FE 0093
        gbc.setState(0xdcc3, 0xf060, 0xad10, 0xc23b, 0xb77d, 0xe4a4, 0x1, 0x1);
        gbc.writeMem(0xdcc3, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf060);
        EXPECT(gbc.pc(), 0xdcc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc3), 0xfe);
        EXPECT(gbc.readMem(0xdcc4), 0x78);
        // FE 0094
        gbc.setState(0x71f8, 0x51df, 0xc2c0, 0x8c29, 0xbdf1, 0x39f0, 0x1, 0x1);
        gbc.writeMem(0x71f8, { 0xfe, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x51df);
        EXPECT(gbc.pc(), 0x71fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0095
        gbc.setState(0x77a, 0x91d1, 0x6b50, 0x45a3, 0xea72, 0xb164, 0x0, 0x0);
        gbc.writeMem(0x77a, { 0xfe, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x91d1);
        EXPECT(gbc.pc(), 0x77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0096
        gbc.setState(0x2880, 0x87db, 0xd2d0, 0x5920, 0xe075, 0x1cd3, 0x1, 0x0);
        gbc.writeMem(0x2880, { 0xfe, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x87db);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0097
        gbc.setState(0xd046, 0x5762, 0x4a40, 0x2712, 0x28a6, 0x30a9, 0x1, 0x0);
        gbc.writeMem(0xd046, { 0xfe, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5762);
        EXPECT(gbc.pc(), 0xd048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd046), 0xfe);
        EXPECT(gbc.readMem(0xd047), 0x31);
        // FE 0098
        gbc.setState(0x9a81, 0x4e43, 0x1310, 0x979e, 0x52f3, 0x84e0, 0x1, 0x1);
        gbc.writeMem(0x9a81, { 0xfe, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4e43);
        EXPECT(gbc.pc(), 0x9a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a81), 0xfe);
        EXPECT(gbc.readMem(0x9a82), 0x41);
        // FE 0099
        gbc.setState(0x3a02, 0x1da7, 0xaa10, 0x9f94, 0x5099, 0xf47a, 0x1, 0x0);
        gbc.writeMem(0x3a02, { 0xfe, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1da7);
        EXPECT(gbc.pc(), 0x3a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 009A
        gbc.setState(0x2711, 0x662a, 0x6c80, 0xd0b4, 0x7454, 0xfa98, 0x1, 0x1);
        gbc.writeMem(0x2711, { 0xfe, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x662a);
        EXPECT(gbc.pc(), 0x2713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 009B
        gbc.setState(0xc0e9, 0x6fc4, 0xdd10, 0xa770, 0x5f86, 0x6220, 0x0, 0x0);
        gbc.writeMem(0xc0e9, { 0xfe, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6fc4);
        EXPECT(gbc.pc(), 0xc0eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e9), 0xfe);
        EXPECT(gbc.readMem(0xc0ea), 0xbe);
        // FE 009C
        gbc.setState(0xa75, 0x9548, 0x6940, 0xeba6, 0x6a05, 0xa621, 0x0, 0x0);
        gbc.writeMem(0xa75, { 0xfe, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9548);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 009D
        gbc.setState(0x27cb, 0x4377, 0x11a0, 0x13fb, 0x7f8c, 0x5ef8, 0x0, 0x0);
        gbc.writeMem(0x27cb, { 0xfe, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4377);
        EXPECT(gbc.pc(), 0x27cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 009E
        gbc.setState(0x2543, 0x356b, 0x1520, 0xdd4a, 0x6bb0, 0x3e80, 0x1, 0x0);
        gbc.writeMem(0x2543, { 0xfe, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x356b);
        EXPECT(gbc.pc(), 0x2545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 009F
        gbc.setState(0x712f, 0x3ce3, 0x560, 0x8e24, 0x6d14, 0xbccd, 0x1, 0x0);
        gbc.writeMem(0x712f, { 0xfe, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3ce3);
        EXPECT(gbc.pc(), 0x7131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00A0
        gbc.setState(0x8fc5, 0xd989, 0xf310, 0xdf79, 0x5af6, 0xf628, 0x0, 0x0);
        gbc.writeMem(0x8fc5, { 0xfe, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd989);
        EXPECT(gbc.pc(), 0x8fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc5), 0xfe);
        EXPECT(gbc.readMem(0x8fc6), 0x3b);
        // FE 00A1
        gbc.setState(0x7be4, 0x5060, 0x7960, 0x72d7, 0x4d60, 0x2fbe, 0x1, 0x0);
        gbc.writeMem(0x7be4, { 0xfe, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5060);
        EXPECT(gbc.pc(), 0x7be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00A2
        gbc.setState(0x41fa, 0xd0d4, 0x7f00, 0x1cc2, 0x4312, 0x63ef, 0x1, 0x0);
        gbc.writeMem(0x41fa, { 0xfe, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0x41fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00A3
        gbc.setState(0x7e3c, 0x2416, 0xa110, 0x7f19, 0xda00, 0x9356, 0x0, 0x0);
        gbc.writeMem(0x7e3c, { 0xfe, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2416);
        EXPECT(gbc.pc(), 0x7e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00A4
        gbc.setState(0x82c8, 0xdc89, 0x4440, 0xfec7, 0x7a5e, 0x5812, 0x1, 0x1);
        gbc.writeMem(0x82c8, { 0xfe, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdc89);
        EXPECT(gbc.pc(), 0x82ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82c8), 0xfe);
        EXPECT(gbc.readMem(0x82c9), 0xd4);
        // FE 00A5
        gbc.setState(0x9bbd, 0xc517, 0x75a0, 0xf6c5, 0x7c97, 0x10ea, 0x1, 0x0);
        gbc.writeMem(0x9bbd, { 0xfe, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc517);
        EXPECT(gbc.pc(), 0x9bbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbd), 0xfe);
        EXPECT(gbc.readMem(0x9bbe), 0x3f);
        // FE 00A6
        gbc.setState(0x5a30, 0x2b38, 0x6bc0, 0x7d32, 0x5dcf, 0x2a88, 0x1, 0x0);
        gbc.writeMem(0x5a30, { 0xfe, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2b38);
        EXPECT(gbc.pc(), 0x5a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00A7
        gbc.setState(0x16f8, 0xf07e, 0xaf80, 0xfd59, 0xfae0, 0x289, 0x1, 0x0);
        gbc.writeMem(0x16f8, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf07e);
        EXPECT(gbc.pc(), 0x16fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00A8
        gbc.setState(0x76ae, 0x8b1e, 0xf30, 0x3317, 0x1426, 0xeebf, 0x0, 0x0);
        gbc.writeMem(0x76ae, { 0xfe, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8b1e);
        EXPECT(gbc.pc(), 0x76b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00A9
        gbc.setState(0xd818, 0xade2, 0xfff0, 0xbacc, 0x98bc, 0x4b96, 0x0, 0x0);
        gbc.writeMem(0xd818, { 0xfe, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xade2);
        EXPECT(gbc.pc(), 0xd81a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd818), 0xfe);
        EXPECT(gbc.readMem(0xd819), 0x33);
        // FE 00AA
        gbc.setState(0xe03, 0x7430, 0xde0, 0xc77a, 0x94e1, 0xdf94, 0x0, 0x0);
        gbc.writeMem(0xe03, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7430);
        EXPECT(gbc.pc(), 0xe05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00AB
        gbc.setState(0x8479, 0x92c3, 0x6340, 0x6c6f, 0x5ede, 0x1159, 0x1, 0x1);
        gbc.writeMem(0x8479, { 0xfe, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x92c3);
        EXPECT(gbc.pc(), 0x847b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8479), 0xfe);
        EXPECT(gbc.readMem(0x847a), 0x9e);
        // FE 00AC
        gbc.setState(0x2ece, 0xc386, 0x8760, 0x88ea, 0x5be, 0xf503, 0x0, 0x0);
        gbc.writeMem(0x2ece, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc386);
        EXPECT(gbc.pc(), 0x2ed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00AE
        gbc.setState(0xb3e0, 0x7777, 0x86f0, 0x19f8, 0x4275, 0x4a05, 0x1, 0x1);
        gbc.writeMem(0xb3e0, { 0xfe, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7777);
        EXPECT(gbc.pc(), 0xb3e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e0), 0xfe);
        EXPECT(gbc.readMem(0xb3e1), 0x96);
        // FE 00AF
        gbc.setState(0x74b0, 0xf40f, 0x69c0, 0xabc4, 0x1da5, 0xd2d7, 0x0, 0x1);
        gbc.writeMem(0x74b0, { 0xfe, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf40f);
        EXPECT(gbc.pc(), 0x74b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00B0
        gbc.setState(0x1bbe, 0x5b40, 0x23b0, 0xc131, 0x3444, 0xaf97, 0x1, 0x0);
        gbc.writeMem(0x1bbe, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0x1bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00B1
        gbc.setState(0x9a2a, 0xc2a9, 0x6d30, 0x3d9c, 0x7a8d, 0x2adf, 0x0, 0x1);
        gbc.writeMem(0x9a2a, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc2a9);
        EXPECT(gbc.pc(), 0x9a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a2a), 0xfe);
        EXPECT(gbc.readMem(0x9a2b), 0x88);
        // FE 00B2
        gbc.setState(0xac41, 0x4f54, 0x3440, 0x1abd, 0x9ed3, 0x4f10, 0x1, 0x0);
        gbc.writeMem(0xac41, { 0xfe, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4f54);
        EXPECT(gbc.pc(), 0xac43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac41), 0xfe);
        EXPECT(gbc.readMem(0xac42), 0x83);
        // FE 00B3
        gbc.setState(0xbca8, 0x2d8b, 0xb930, 0x9a0b, 0xbd2f, 0x86b, 0x1, 0x1);
        gbc.writeMem(0xbca8, { 0xfe, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2d8b);
        EXPECT(gbc.pc(), 0xbcaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca8), 0xfe);
        EXPECT(gbc.readMem(0xbca9), 0x25);
        // FE 00B5
        gbc.setState(0x254, 0xb04f, 0xa380, 0xcba0, 0x632a, 0x6d7, 0x0, 0x0);
        gbc.writeMem(0x254, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb04f);
        EXPECT(gbc.pc(), 0x256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00B6
        gbc.setState(0x4fed, 0xe32a, 0x3220, 0x9c23, 0x85db, 0x3ccb, 0x0, 0x0);
        gbc.writeMem(0x4fed, { 0xfe, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe32a);
        EXPECT(gbc.pc(), 0x4fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00B7
        gbc.setState(0x75ac, 0x548f, 0x8170, 0x88bf, 0xf74, 0x539d, 0x0, 0x0);
        gbc.writeMem(0x75ac, { 0xfe, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x548f);
        EXPECT(gbc.pc(), 0x75ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00B8
        gbc.setState(0x9715, 0x3840, 0xfc20, 0xc3d5, 0xb8e2, 0x4739, 0x0, 0x0);
        gbc.writeMem(0x9715, { 0xfe, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3840);
        EXPECT(gbc.pc(), 0x9717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9715), 0xfe);
        EXPECT(gbc.readMem(0x9716), 0xdd);
        // FE 00B9
        gbc.setState(0x4d60, 0x550b, 0x7ca0, 0x7c9b, 0x3ee0, 0xf022, 0x1, 0x1);
        gbc.writeMem(0x4d60, { 0xfe, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x550b);
        EXPECT(gbc.pc(), 0x4d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00BA
        gbc.setState(0xa484, 0x3585, 0x26b0, 0x1882, 0x10cc, 0xb613, 0x1, 0x1);
        gbc.writeMem(0xa484, { 0xfe, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3585);
        EXPECT(gbc.pc(), 0xa486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa484), 0xfe);
        EXPECT(gbc.readMem(0xa485), 0x73);
        // FE 00BB
        gbc.setState(0xb8af, 0x6cbe, 0x730, 0xf9b, 0x3aa1, 0x384, 0x0, 0x0);
        gbc.writeMem(0xb8af, { 0xfe, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6cbe);
        EXPECT(gbc.pc(), 0xb8b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8af), 0xfe);
        EXPECT(gbc.readMem(0xb8b0), 0x87);
        // FE 00BC
        gbc.setState(0x14ed, 0x12af, 0xdcc0, 0x8bff, 0xd476, 0x6930, 0x0, 0x0);
        gbc.writeMem(0x14ed, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x12af);
        EXPECT(gbc.pc(), 0x14ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00BD
        gbc.setState(0xca7a, 0x8fa5, 0x6590, 0x835, 0xd1d3, 0x94fb, 0x0, 0x1);
        gbc.writeMem(0xca7a, { 0xfe, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8fa5);
        EXPECT(gbc.pc(), 0xca7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca7a), 0xfe);
        EXPECT(gbc.readMem(0xca7b), 0x30);
        // FE 00BE
        gbc.setState(0x6d06, 0x40a0, 0x820, 0x96bb, 0x9a9, 0x85a7, 0x1, 0x0);
        gbc.writeMem(0x6d06, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x40a0);
        EXPECT(gbc.pc(), 0x6d08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00C0
        gbc.setState(0xb3f, 0xf14a, 0xbc60, 0x5205, 0x65e8, 0x2cc2, 0x0, 0x1);
        gbc.writeMem(0xb3f, { 0xfe, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf14a);
        EXPECT(gbc.pc(), 0xb41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00C1
        gbc.setState(0x6de2, 0x1f78, 0x9a70, 0x5a60, 0x2d9b, 0xcd7f, 0x1, 0x0);
        gbc.writeMem(0x6de2, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1f78);
        EXPECT(gbc.pc(), 0x6de4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00C2
        gbc.setState(0xac5d, 0xcfcd, 0x6b70, 0x500f, 0xc666, 0x36ae, 0x1, 0x1);
        gbc.writeMem(0xac5d, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcfcd);
        EXPECT(gbc.pc(), 0xac5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5d), 0xfe);
        EXPECT(gbc.readMem(0xac5e), 0x82);
        // FE 00C3
        gbc.setState(0x7219, 0xd1d3, 0x7030, 0x18c2, 0xc5b, 0x6eae, 0x0, 0x1);
        gbc.writeMem(0x7219, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd1d3);
        EXPECT(gbc.pc(), 0x721b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00C5
        gbc.setState(0x58db, 0x6772, 0x840, 0xddb6, 0x354e, 0xf128, 0x1, 0x0);
        gbc.writeMem(0x58db, { 0xfe, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6772);
        EXPECT(gbc.pc(), 0x58dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00C7
        gbc.setState(0x3a50, 0xf504, 0xdd70, 0x912d, 0x48d7, 0x54f7, 0x1, 0x1);
        gbc.writeMem(0x3a50, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf504);
        EXPECT(gbc.pc(), 0x3a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00C8
        gbc.setState(0x747f, 0x75f1, 0xa380, 0xc213, 0x73f7, 0x6a5, 0x0, 0x0);
        gbc.writeMem(0x747f, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x75f1);
        EXPECT(gbc.pc(), 0x7481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00C9
        gbc.setState(0xee57, 0xb7ce, 0x2860, 0xecb9, 0xcc79, 0x1ae, 0x0, 0x1);
        gbc.writeMem(0xee57, { 0xfe, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb7ce);
        EXPECT(gbc.pc(), 0xee59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee57), 0xfe);
        EXPECT(gbc.readMem(0xee58), 0x9c);
        // FE 00CA
        gbc.setState(0xaf22, 0x23be, 0x8a20, 0x3dd5, 0xbf7a, 0x59d, 0x1, 0x1);
        gbc.writeMem(0xaf22, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x23be);
        EXPECT(gbc.pc(), 0xaf24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf22), 0xfe);
        EXPECT(gbc.readMem(0xaf23), 0xcd);
        // FE 00CB
        gbc.setState(0x36ac, 0x6fc7, 0x2500, 0x5468, 0x20e2, 0x80d2, 0x1, 0x0);
        gbc.writeMem(0x36ac, { 0xfe, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6fc7);
        EXPECT(gbc.pc(), 0x36ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00CC
        gbc.setState(0xdece, 0x74b, 0x51c0, 0x787e, 0x46ba, 0x1df8, 0x0, 0x0);
        gbc.writeMem(0xdece, { 0xfe, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x74b);
        EXPECT(gbc.pc(), 0xded0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdece), 0xfe);
        EXPECT(gbc.readMem(0xdecf), 0x8e);
        // FE 00CD
        gbc.setState(0x659a, 0xcaaf, 0x3ad0, 0xe7b9, 0xbe6a, 0x7228, 0x0, 0x1);
        gbc.writeMem(0x659a, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x659c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00CE
        gbc.setState(0x23b3, 0x5bf2, 0xd270, 0xd28a, 0x6cfe, 0xe214, 0x1, 0x0);
        gbc.writeMem(0x23b3, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5bf2);
        EXPECT(gbc.pc(), 0x23b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00CF
        gbc.setState(0xcd19, 0xac1d, 0xb460, 0x6a8c, 0x331a, 0x4c, 0x0, 0x0);
        gbc.writeMem(0xcd19, { 0xfe, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xac1d);
        EXPECT(gbc.pc(), 0xcd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd19), 0xfe);
        EXPECT(gbc.readMem(0xcd1a), 0x7d);
        // FE 00D0
        gbc.setState(0x128, 0xb45, 0xcb70, 0x4226, 0xf959, 0xd923, 0x0, 0x0);
        gbc.writeMem(0x128, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb45);
        EXPECT(gbc.pc(), 0x12a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00D1
        gbc.setState(0xd2f9, 0x93f7, 0x4d30, 0xb20e, 0xf3f4, 0xdc43, 0x1, 0x0);
        gbc.writeMem(0xd2f9, { 0xfe, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x93f7);
        EXPECT(gbc.pc(), 0xd2fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f9), 0xfe);
        EXPECT(gbc.readMem(0xd2fa), 0x29);
        // FE 00D2
        gbc.setState(0xa803, 0x194e, 0xad30, 0xa40d, 0xa5a5, 0xbda2, 0x0, 0x0);
        gbc.writeMem(0xa803, { 0xfe, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x194e);
        EXPECT(gbc.pc(), 0xa805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa803), 0xfe);
        EXPECT(gbc.readMem(0xa804), 0xf1);
        // FE 00D4
        gbc.setState(0xe4a9, 0x8e12, 0x5510, 0x5ef2, 0x26a8, 0x479, 0x1, 0x1);
        gbc.writeMem(0xe4a9, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8e12);
        EXPECT(gbc.pc(), 0xe4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a9), 0xfe);
        EXPECT(gbc.readMem(0xe4aa), 0x9b);
        // FE 00D5
        gbc.setState(0x28e6, 0x2ddb, 0x6a00, 0x8d90, 0xbbac, 0x6dcb, 0x1, 0x1);
        gbc.writeMem(0x28e6, { 0xfe, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2ddb);
        EXPECT(gbc.pc(), 0x28e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00D6
        gbc.setState(0x96e0, 0xfbd0, 0x6210, 0x4b7e, 0x47a2, 0x1496, 0x0, 0x1);
        gbc.writeMem(0x96e0, { 0xfe, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfbd0);
        EXPECT(gbc.pc(), 0x96e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96e0), 0xfe);
        EXPECT(gbc.readMem(0x96e1), 0xf1);
        // FE 00D7
        gbc.setState(0x89ea, 0xd63, 0xd990, 0x37a6, 0x48d4, 0x2537, 0x1, 0x1);
        gbc.writeMem(0x89ea, { 0xfe, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd63);
        EXPECT(gbc.pc(), 0x89ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ea), 0xfe);
        EXPECT(gbc.readMem(0x89eb), 0x43);
        // FE 00D8
        gbc.setState(0x10d1, 0x89e8, 0xb420, 0x4ddc, 0xaf18, 0x44ef, 0x0, 0x1);
        gbc.writeMem(0x10d1, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x89e8);
        EXPECT(gbc.pc(), 0x10d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00D9
        gbc.setState(0x7a1e, 0x751c, 0x90, 0xff18, 0x2772, 0x3da5, 0x0, 0x0);
        gbc.writeMem(0x7a1e, { 0xfe, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x751c);
        EXPECT(gbc.pc(), 0x7a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00DA
        gbc.setState(0x801a, 0x3e61, 0x1990, 0x4a4e, 0x36b9, 0x96a1, 0x0, 0x0);
        gbc.writeMem(0x801a, { 0xfe, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3e61);
        EXPECT(gbc.pc(), 0x801c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801a), 0xfe);
        EXPECT(gbc.readMem(0x801b), 0x5d);
        // FE 00DB
        gbc.setState(0x1179, 0xc171, 0x2ca0, 0xff0f, 0xa505, 0x8577, 0x1, 0x1);
        gbc.writeMem(0x1179, { 0xfe, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc171);
        EXPECT(gbc.pc(), 0x117b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00DD
        gbc.setState(0x5c90, 0xffac, 0x14e0, 0xb968, 0x6860, 0x4406, 0x1, 0x1);
        gbc.writeMem(0x5c90, { 0xfe, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xffac);
        EXPECT(gbc.pc(), 0x5c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00DE
        gbc.setState(0xae14, 0xbaac, 0x7080, 0x3c5c, 0xc8a8, 0xd999, 0x0, 0x0);
        gbc.writeMem(0xae14, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbaac);
        EXPECT(gbc.pc(), 0xae16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae14), 0xfe);
        EXPECT(gbc.readMem(0xae15), 0x9b);
        // FE 00DF
        gbc.setState(0x261b, 0x7c24, 0x73b0, 0x4cfa, 0xcbfa, 0xbc6a, 0x1, 0x1);
        gbc.writeMem(0x261b, { 0xfe, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7c24);
        EXPECT(gbc.pc(), 0x261d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00E0
        gbc.setState(0xe9c7, 0x63d2, 0xd410, 0xcd1d, 0x103c, 0xe274, 0x1, 0x0);
        gbc.writeMem(0xe9c7, { 0xfe, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x63d2);
        EXPECT(gbc.pc(), 0xe9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c7), 0xfe);
        EXPECT(gbc.readMem(0xe9c8), 0xcf);
        // FE 00E1
        gbc.setState(0xb7e8, 0x717, 0x3b60, 0xa0ca, 0xf9f0, 0x3c30, 0x0, 0x1);
        gbc.writeMem(0xb7e8, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x717);
        EXPECT(gbc.pc(), 0xb7ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7e8), 0xfe);
        EXPECT(gbc.readMem(0xb7e9), 0xea);
        // FE 00E2
        gbc.setState(0x85, 0xecad, 0xc9f0, 0xe77f, 0x717d, 0xa8f6, 0x1, 0x1);
        gbc.writeMem(0x85, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xecad);
        EXPECT(gbc.pc(), 0x87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00E3
        gbc.setState(0x9a49, 0xd27d, 0xa4f0, 0xf887, 0x12af, 0x2c04, 0x1, 0x0);
        gbc.writeMem(0x9a49, { 0xfe, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd27d);
        EXPECT(gbc.pc(), 0x9a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a49), 0xfe);
        EXPECT(gbc.readMem(0x9a4a), 0xbf);
        // FE 00E4
        gbc.setState(0xe163, 0x4d3, 0xfb90, 0xe1a9, 0x544e, 0x3556, 0x0, 0x0);
        gbc.writeMem(0xe163, { 0xfe, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4d3);
        EXPECT(gbc.pc(), 0xe165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe163), 0xfe);
        EXPECT(gbc.readMem(0xe164), 0xed);
        // FE 00E5
        gbc.setState(0xe1d5, 0x5010, 0xe250, 0xebc7, 0x744, 0xd0f6, 0x0, 0x1);
        gbc.writeMem(0xe1d5, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5010);
        EXPECT(gbc.pc(), 0xe1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d5), 0xfe);
        EXPECT(gbc.readMem(0xe1d6), 0xea);
        // FE 00E6
        gbc.setState(0xc870, 0xb3bc, 0x7cf0, 0x6a17, 0xa869, 0x242c, 0x0, 0x0);
        gbc.writeMem(0xc870, { 0xfe, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb3bc);
        EXPECT(gbc.pc(), 0xc872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc870), 0xfe);
        EXPECT(gbc.readMem(0xc871), 0xd4);
        // FE 00E7
        gbc.setState(0x9fd8, 0x6e80, 0x5040, 0x4396, 0x47fc, 0x43ed, 0x1, 0x1);
        gbc.writeMem(0x9fd8, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6e80);
        EXPECT(gbc.pc(), 0x9fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fd8), 0xfe);
        EXPECT(gbc.readMem(0x9fd9), 0xaa);
        // FE 00E8
        gbc.setState(0xda28, 0xbe9e, 0xce0, 0x704d, 0xc7d8, 0x85b5, 0x0, 0x1);
        gbc.writeMem(0xda28, { 0xfe, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbe9e);
        EXPECT(gbc.pc(), 0xda2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda28), 0xfe);
        EXPECT(gbc.readMem(0xda29), 0x25);
        // FE 00E9
        gbc.setState(0x7d6c, 0x862b, 0xb720, 0x708, 0x1477, 0xc5ec, 0x1, 0x1);
        gbc.writeMem(0x7d6c, { 0xfe, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x862b);
        EXPECT(gbc.pc(), 0x7d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00EB
        gbc.setState(0xc53e, 0x365e, 0x68b0, 0x23e5, 0xa8ce, 0x17a, 0x0, 0x1);
        gbc.writeMem(0xc53e, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x365e);
        EXPECT(gbc.pc(), 0xc540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc53e), 0xfe);
        EXPECT(gbc.readMem(0xc53f), 0xf6);
        // FE 00EC
        gbc.setState(0x40f7, 0xe383, 0x6950, 0xb5dc, 0xac8d, 0x1b5a, 0x0, 0x0);
        gbc.writeMem(0x40f7, { 0xfe, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe383);
        EXPECT(gbc.pc(), 0x40f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00ED
        gbc.setState(0xdbca, 0xf641, 0x2840, 0x27a8, 0xc8e2, 0xb756, 0x0, 0x0);
        gbc.writeMem(0xdbca, { 0xfe, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf641);
        EXPECT(gbc.pc(), 0xdbcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbca), 0xfe);
        EXPECT(gbc.readMem(0xdbcb), 0x11);
        // FE 00EE
        gbc.setState(0x2c7c, 0x46f3, 0xecf0, 0xc7bd, 0x5ccf, 0x3042, 0x0, 0x1);
        gbc.writeMem(0x2c7c, { 0xfe, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x46f3);
        EXPECT(gbc.pc(), 0x2c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00EF
        gbc.setState(0x58ae, 0xa8f2, 0x100, 0x6a4c, 0x236d, 0x6bf5, 0x0, 0x0);
        gbc.writeMem(0x58ae, { 0xfe, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa8f2);
        EXPECT(gbc.pc(), 0x58b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00F0
        gbc.setState(0xc9d0, 0x779d, 0x1260, 0xa559, 0xd321, 0xeedd, 0x0, 0x0);
        gbc.writeMem(0xc9d0, { 0xfe, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x779d);
        EXPECT(gbc.pc(), 0xc9d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d0), 0xfe);
        EXPECT(gbc.readMem(0xc9d1), 0x2);
        // FE 00F1
        gbc.setState(0xbda2, 0x2abf, 0xd920, 0x3513, 0x77e0, 0x33ee, 0x1, 0x1);
        gbc.writeMem(0xbda2, { 0xfe, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2abf);
        EXPECT(gbc.pc(), 0xbda4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda2), 0xfe);
        EXPECT(gbc.readMem(0xbda3), 0xa9);
        // FE 00F2
        gbc.setState(0x7f5d, 0xe88f, 0x5e90, 0x16d0, 0x1eab, 0xe133, 0x1, 0x1);
        gbc.writeMem(0x7f5d, { 0xfe, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe88f);
        EXPECT(gbc.pc(), 0x7f5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00F3
        gbc.setState(0x9913, 0x8f6, 0x85b0, 0x140b, 0xda56, 0x3bf9, 0x0, 0x1);
        gbc.writeMem(0x9913, { 0xfe, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8f6);
        EXPECT(gbc.pc(), 0x9915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9913), 0xfe);
        EXPECT(gbc.readMem(0x9914), 0x51);
        // FE 00F4
        gbc.setState(0xc7dc, 0x5d70, 0x7790, 0xdbf9, 0xc3de, 0xb9ad, 0x0, 0x0);
        gbc.writeMem(0xc7dc, { 0xfe, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5d70);
        EXPECT(gbc.pc(), 0xc7de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7dc), 0xfe);
        EXPECT(gbc.readMem(0xc7dd), 0x85);
        // FE 00F5
        gbc.setState(0x5478, 0xbcc1, 0x2d60, 0xe8a3, 0x36e, 0x1143, 0x0, 0x1);
        gbc.writeMem(0x5478, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbcc1);
        EXPECT(gbc.pc(), 0x547a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 00F6
        gbc.setState(0x3b1f, 0x7e1f, 0x98b0, 0xe92f, 0xd67c, 0xcd71, 0x1, 0x1);
        gbc.writeMem(0x3b1f, { 0xfe, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7e1f);
        EXPECT(gbc.pc(), 0x3b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00F7
        gbc.setState(0xc11c, 0x84f3, 0xfd40, 0xd42d, 0x2ffb, 0x2cb8, 0x1, 0x0);
        gbc.writeMem(0xc11c, { 0xfe, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x84f3);
        EXPECT(gbc.pc(), 0xc11e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11c), 0xfe);
        EXPECT(gbc.readMem(0xc11d), 0x7f);
        // FE 00F8
        gbc.setState(0xb966, 0xe670, 0x8d90, 0x79dc, 0x9a6b, 0x16ce, 0x0, 0x0);
        gbc.writeMem(0xb966, { 0xfe, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe670);
        EXPECT(gbc.pc(), 0xb968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb966), 0xfe);
        EXPECT(gbc.readMem(0xb967), 0x55);
        // FE 00F9
        gbc.setState(0xd0bf, 0x3b63, 0x39b0, 0x692e, 0xf48e, 0xb9a6, 0x1, 0x0);
        gbc.writeMem(0xd0bf, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3b63);
        EXPECT(gbc.pc(), 0xd0c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0bf), 0xfe);
        EXPECT(gbc.readMem(0xd0c0), 0x24);
        // FE 00FA
        gbc.setState(0xeb94, 0x45b9, 0x3290, 0xaca9, 0xaa96, 0x5a7b, 0x1, 0x0);
        gbc.writeMem(0xeb94, { 0xfe, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x45b9);
        EXPECT(gbc.pc(), 0xeb96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb94), 0xfe);
        EXPECT(gbc.readMem(0xeb95), 0xd2);
        // FE 00FB
        gbc.setState(0x7326, 0x1259, 0xdbb0, 0x89c0, 0x4608, 0x6fce, 0x1, 0x0);
        gbc.writeMem(0x7326, { 0xfe, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1259);
        EXPECT(gbc.pc(), 0x7328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 00FC
        gbc.setState(0xc1ad, 0x57b1, 0x2af0, 0x7529, 0x15d, 0xe0fd, 0x1, 0x1);
        gbc.writeMem(0xc1ad, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x57b1);
        EXPECT(gbc.pc(), 0xc1af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ad), 0xfe);
        EXPECT(gbc.readMem(0xc1ae), 0xf7);
        // FE 00FD
        gbc.setState(0x6ede, 0x6fb1, 0xc3e0, 0xe9bc, 0xc2b0, 0x5c02, 0x1, 0x0);
        gbc.writeMem(0x6ede, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6fb1);
        EXPECT(gbc.pc(), 0x6ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 00FE
        gbc.setState(0x4e3e, 0x2b35, 0xc00, 0xa1e3, 0xaf30, 0xe30b, 0x1, 0x0);
        gbc.writeMem(0x4e3e, { 0xfe, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2b35);
        EXPECT(gbc.pc(), 0x4e40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 00FF
        gbc.setState(0x1012, 0x595e, 0xd80, 0x54d, 0x9a6d, 0xb81a, 0x0, 0x1);
        gbc.writeMem(0x1012, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x595e);
        EXPECT(gbc.pc(), 0x1014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0100
        gbc.setState(0xaca6, 0x3462, 0xf7e0, 0xcc59, 0xa735, 0x1004, 0x0, 0x1);
        gbc.writeMem(0xaca6, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3462);
        EXPECT(gbc.pc(), 0xaca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca6), 0xfe);
        EXPECT(gbc.readMem(0xaca7), 0xd8);
        // FE 0101
        gbc.setState(0x7dee, 0x5263, 0x87f0, 0x7a16, 0x68cf, 0xb026, 0x0, 0x0);
        gbc.writeMem(0x7dee, { 0xfe, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5263);
        EXPECT(gbc.pc(), 0x7df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0102
        gbc.setState(0xb76d, 0x9f45, 0xa510, 0x9f6d, 0x3966, 0x88d6, 0x1, 0x1);
        gbc.writeMem(0xb76d, { 0xfe, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9f45);
        EXPECT(gbc.pc(), 0xb76f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb76d), 0xfe);
        EXPECT(gbc.readMem(0xb76e), 0xfa);
        // FE 0103
        gbc.setState(0x3a4f, 0x52d1, 0x71a0, 0x769f, 0x7357, 0x2244, 0x0, 0x1);
        gbc.writeMem(0x3a4f, { 0xfe, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x52d1);
        EXPECT(gbc.pc(), 0x3a51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0104
        gbc.setState(0x2415, 0x8da8, 0x26f0, 0x227c, 0x61bc, 0x4e2e, 0x0, 0x0);
        gbc.writeMem(0x2415, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8da8);
        EXPECT(gbc.pc(), 0x2417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0105
        gbc.setState(0xd92, 0x15a4, 0x4720, 0x25e6, 0xf16d, 0x4ef7, 0x1, 0x1);
        gbc.writeMem(0xd92, { 0xfe, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x15a4);
        EXPECT(gbc.pc(), 0xd94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0106
        gbc.setState(0x3a61, 0x61e6, 0x5a60, 0xf97a, 0xe5fb, 0x260b, 0x1, 0x0);
        gbc.writeMem(0x3a61, { 0xfe, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x61e6);
        EXPECT(gbc.pc(), 0x3a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0107
        gbc.setState(0x5af0, 0x28e3, 0xbe90, 0x21b, 0xc09c, 0xf618, 0x1, 0x0);
        gbc.writeMem(0x5af0, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x28e3);
        EXPECT(gbc.pc(), 0x5af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0108
        gbc.setState(0xbc64, 0x9600, 0x4f20, 0xa44e, 0x506c, 0x2141, 0x1, 0x1);
        gbc.writeMem(0xbc64, { 0xfe, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9600);
        EXPECT(gbc.pc(), 0xbc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc64), 0xfe);
        EXPECT(gbc.readMem(0xbc65), 0xb8);
        // FE 0109
        gbc.setState(0x222e, 0xa556, 0x51d0, 0xe5d1, 0xdd8a, 0xf4d7, 0x1, 0x0);
        gbc.writeMem(0x222e, { 0xfe, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa556);
        EXPECT(gbc.pc(), 0x2230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 010A
        gbc.setState(0xe34c, 0x6d3f, 0xedc0, 0x5cff, 0x7bbb, 0x654a, 0x1, 0x1);
        gbc.writeMem(0xe34c, { 0xfe, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6d3f);
        EXPECT(gbc.pc(), 0xe34e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe34c), 0xfe);
        EXPECT(gbc.readMem(0xe34d), 0xd5);
        // FE 010B
        gbc.setState(0x374c, 0x390d, 0xd590, 0x718b, 0x6bec, 0x8359, 0x1, 0x1);
        gbc.writeMem(0x374c, { 0xfe, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x390d);
        EXPECT(gbc.pc(), 0x374e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 010C
        gbc.setState(0x183, 0x26a1, 0x3640, 0x5c4e, 0x62a7, 0x604e, 0x0, 0x0);
        gbc.writeMem(0x183, { 0xfe, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x26a1);
        EXPECT(gbc.pc(), 0x185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 010D
        gbc.setState(0x6ba5, 0x13e8, 0x46b0, 0x8b37, 0x687a, 0xf9bd, 0x0, 0x0);
        gbc.writeMem(0x6ba5, { 0xfe, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x13e8);
        EXPECT(gbc.pc(), 0x6ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 010E
        gbc.setState(0xdc7b, 0xc260, 0xc810, 0xaf26, 0x87d0, 0xd2fa, 0x0, 0x0);
        gbc.writeMem(0xdc7b, { 0xfe, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc260);
        EXPECT(gbc.pc(), 0xdc7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7b), 0xfe);
        EXPECT(gbc.readMem(0xdc7c), 0x21);
        // FE 010F
        gbc.setState(0x4904, 0x20f8, 0xfa40, 0x251c, 0xdc2d, 0xc60b, 0x1, 0x1);
        gbc.writeMem(0x4904, { 0xfe, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x20f8);
        EXPECT(gbc.pc(), 0x4906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0110
        gbc.setState(0xae5d, 0x658c, 0x92b0, 0xd1a5, 0x797e, 0x113c, 0x1, 0x0);
        gbc.writeMem(0xae5d, { 0xfe, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x658c);
        EXPECT(gbc.pc(), 0xae5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae5d), 0xfe);
        EXPECT(gbc.readMem(0xae5e), 0xb4);
        // FE 0111
        gbc.setState(0xbf3, 0x915e, 0xb480, 0x4185, 0x8444, 0x2ddf, 0x0, 0x0);
        gbc.writeMem(0xbf3, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x915e);
        EXPECT(gbc.pc(), 0xbf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0112
        gbc.setState(0xc813, 0x68d0, 0x2ee0, 0xf66b, 0xd3df, 0x534c, 0x0, 0x0);
        gbc.writeMem(0xc813, { 0xfe, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x68d0);
        EXPECT(gbc.pc(), 0xc815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc813), 0xfe);
        EXPECT(gbc.readMem(0xc814), 0x17);
        // FE 0113
        gbc.setState(0x6439, 0xa95e, 0x2d50, 0x2f24, 0x4173, 0xa434, 0x0, 0x1);
        gbc.writeMem(0x6439, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa95e);
        EXPECT(gbc.pc(), 0x643b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0114
        gbc.setState(0x7f41, 0x9b06, 0xbc80, 0x60a, 0x7e1f, 0x702d, 0x0, 0x1);
        gbc.writeMem(0x7f41, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9b06);
        EXPECT(gbc.pc(), 0x7f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0115
        gbc.setState(0x1506, 0xe6e7, 0x6040, 0x1d8b, 0x28a1, 0x11d2, 0x0, 0x1);
        gbc.writeMem(0x1506, { 0xfe, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe6e7);
        EXPECT(gbc.pc(), 0x1508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0116
        gbc.setState(0x45ef, 0x36bd, 0x1830, 0xa7a0, 0xaf49, 0x81fd, 0x1, 0x0);
        gbc.writeMem(0x45ef, { 0xfe, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x36bd);
        EXPECT(gbc.pc(), 0x45f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0117
        gbc.setState(0x1d96, 0x3537, 0xec30, 0xd035, 0x67a3, 0x4335, 0x1, 0x1);
        gbc.writeMem(0x1d96, { 0xfe, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3537);
        EXPECT(gbc.pc(), 0x1d98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0119
        gbc.setState(0x76ec, 0xf8ff, 0xc810, 0xa5db, 0xfa07, 0x9ac5, 0x1, 0x0);
        gbc.writeMem(0x76ec, { 0xfe, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf8ff);
        EXPECT(gbc.pc(), 0x76ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 011A
        gbc.setState(0xb9bd, 0xc63c, 0xc630, 0x1b72, 0xc68, 0x6981, 0x0, 0x0);
        gbc.writeMem(0xb9bd, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc63c);
        EXPECT(gbc.pc(), 0xb9bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9bd), 0xfe);
        EXPECT(gbc.readMem(0xb9be), 0xf9);
        // FE 011B
        gbc.setState(0x8a83, 0xc57a, 0x2030, 0x42c9, 0x6892, 0x3021, 0x0, 0x0);
        gbc.writeMem(0x8a83, { 0xfe, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc57a);
        EXPECT(gbc.pc(), 0x8a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a83), 0xfe);
        EXPECT(gbc.readMem(0x8a84), 0xe4);
        // FE 011C
        gbc.setState(0x98de, 0x1c0d, 0xc890, 0xdd3c, 0x8463, 0x36e, 0x0, 0x0);
        gbc.writeMem(0x98de, { 0xfe, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1c0d);
        EXPECT(gbc.pc(), 0x98e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98de), 0xfe);
        EXPECT(gbc.readMem(0x98df), 0x7b);
        // FE 011D
        gbc.setState(0x578a, 0xdbe, 0xc690, 0xf887, 0x84a2, 0xfd19, 0x0, 0x0);
        gbc.writeMem(0x578a, { 0xfe, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdbe);
        EXPECT(gbc.pc(), 0x578c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 011E
        gbc.setState(0xd13b, 0xbad4, 0x5540, 0xebd4, 0x2ccf, 0xa6f, 0x0, 0x0);
        gbc.writeMem(0xd13b, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbad4);
        EXPECT(gbc.pc(), 0xd13d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13b), 0xfe);
        EXPECT(gbc.readMem(0xd13c), 0xcd);
        // FE 0120
        gbc.setState(0xbca0, 0x1211, 0xe0d0, 0x7c40, 0x4a96, 0xc877, 0x0, 0x1);
        gbc.writeMem(0xbca0, { 0xfe, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1211);
        EXPECT(gbc.pc(), 0xbca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca0), 0xfe);
        EXPECT(gbc.readMem(0xbca1), 0x85);
        // FE 0121
        gbc.setState(0x3b05, 0xe95e, 0x2050, 0xdbd6, 0x4f7a, 0x53b9, 0x0, 0x1);
        gbc.writeMem(0x3b05, { 0xfe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe95e);
        EXPECT(gbc.pc(), 0x3b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0122
        gbc.setState(0x5c75, 0xc82c, 0x3440, 0xf72f, 0xef2, 0xd892, 0x1, 0x0);
        gbc.writeMem(0x5c75, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc82c);
        EXPECT(gbc.pc(), 0x5c77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0123
        gbc.setState(0x9f26, 0x9aaa, 0xd210, 0xd22e, 0xb21c, 0xfad7, 0x0, 0x0);
        gbc.writeMem(0x9f26, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9aaa);
        EXPECT(gbc.pc(), 0x9f28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f26), 0xfe);
        EXPECT(gbc.readMem(0x9f27), 0x90);
        // FE 0124
        gbc.setState(0xd7b0, 0xfe4e, 0x7df0, 0xb641, 0xcfca, 0x2734, 0x1, 0x1);
        gbc.writeMem(0xd7b0, { 0xfe, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xfe4e);
        EXPECT(gbc.pc(), 0xd7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b0), 0xfe);
        EXPECT(gbc.readMem(0xd7b1), 0x89);
        // FE 0125
        gbc.setState(0x44a2, 0x7471, 0x6930, 0x5cb2, 0x45d4, 0x4de8, 0x1, 0x0);
        gbc.writeMem(0x44a2, { 0xfe, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7471);
        EXPECT(gbc.pc(), 0x44a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0126
        gbc.setState(0x7e40, 0xc2b2, 0xc970, 0xeea7, 0xeace, 0xd163, 0x0, 0x0);
        gbc.writeMem(0x7e40, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc2b2);
        EXPECT(gbc.pc(), 0x7e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0127
        gbc.setState(0xe324, 0xed79, 0x2dd0, 0x96cd, 0x525, 0x7301, 0x0, 0x0);
        gbc.writeMem(0xe324, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xed79);
        EXPECT(gbc.pc(), 0xe326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe324), 0xfe);
        EXPECT(gbc.readMem(0xe325), 0x69);
        // FE 0128
        gbc.setState(0x5fcb, 0x8073, 0xec0, 0xdeb5, 0xa1e9, 0xca14, 0x1, 0x1);
        gbc.writeMem(0x5fcb, { 0xfe, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8073);
        EXPECT(gbc.pc(), 0x5fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0129
        gbc.setState(0xb2a6, 0x4a6, 0x1a30, 0xf0a0, 0x55e9, 0x170e, 0x0, 0x1);
        gbc.writeMem(0xb2a6, { 0xfe, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4a6);
        EXPECT(gbc.pc(), 0xb2a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a6), 0xfe);
        EXPECT(gbc.readMem(0xb2a7), 0x3);
        // FE 012A
        gbc.setState(0x1cb6, 0xf135, 0x4d50, 0x4684, 0xaa18, 0x723e, 0x1, 0x1);
        gbc.writeMem(0x1cb6, { 0xfe, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf135);
        EXPECT(gbc.pc(), 0x1cb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 012B
        gbc.setState(0xc65e, 0xb9b9, 0x1ef0, 0x7dc8, 0x7cce, 0xacb1, 0x1, 0x1);
        gbc.writeMem(0xc65e, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb9b9);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65e), 0xfe);
        EXPECT(gbc.readMem(0xc65f), 0xcd);
        // FE 012C
        gbc.setState(0xc3c3, 0x5541, 0xd400, 0x6cef, 0x14ca, 0xdf19, 0x1, 0x0);
        gbc.writeMem(0xc3c3, { 0xfe, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5541);
        EXPECT(gbc.pc(), 0xc3c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c3), 0xfe);
        EXPECT(gbc.readMem(0xc3c4), 0x54);
        // FE 012D
        gbc.setState(0x281, 0x1570, 0x7070, 0xadf, 0xc677, 0x91cd, 0x0, 0x1);
        gbc.writeMem(0x281, { 0xfe, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1570);
        EXPECT(gbc.pc(), 0x283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 012E
        gbc.setState(0x5f78, 0xc218, 0x6280, 0x197b, 0x4433, 0x88b8, 0x0, 0x1);
        gbc.writeMem(0x5f78, { 0xfe, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc218);
        EXPECT(gbc.pc(), 0x5f7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 012F
        gbc.setState(0x36d5, 0x94c8, 0x1a80, 0xb158, 0x4619, 0xb76a, 0x0, 0x0);
        gbc.writeMem(0x36d5, { 0xfe, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x94c8);
        EXPECT(gbc.pc(), 0x36d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0130
        gbc.setState(0x3d47, 0x20b8, 0xb7b0, 0xdcc5, 0x8946, 0xdbca, 0x1, 0x1);
        gbc.writeMem(0x3d47, { 0xfe, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x20b8);
        EXPECT(gbc.pc(), 0x3d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0131
        gbc.setState(0x130f, 0xed54, 0xebc0, 0xa4f, 0xdc8c, 0xb7db, 0x0, 0x1);
        gbc.writeMem(0x130f, { 0xfe, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xed54);
        EXPECT(gbc.pc(), 0x1311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0132
        gbc.setState(0x785d, 0xb798, 0x97f0, 0xfb4a, 0x14a, 0xac3f, 0x0, 0x0);
        gbc.writeMem(0x785d, { 0xfe, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb798);
        EXPECT(gbc.pc(), 0x785f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0133
        gbc.setState(0x7d92, 0x1de5, 0x9f90, 0x7782, 0xeec, 0x2f34, 0x1, 0x1);
        gbc.writeMem(0x7d92, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1de5);
        EXPECT(gbc.pc(), 0x7d94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0134
        gbc.setState(0x41c2, 0xfc85, 0x84d0, 0x4955, 0xa1d5, 0x6844, 0x1, 0x0);
        gbc.writeMem(0x41c2, { 0xfe, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfc85);
        EXPECT(gbc.pc(), 0x41c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0135
        gbc.setState(0xe53f, 0xaa9a, 0x4f70, 0x6d8d, 0x5003, 0x4bbc, 0x0, 0x1);
        gbc.writeMem(0xe53f, { 0xfe, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xaa9a);
        EXPECT(gbc.pc(), 0xe541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe53f), 0xfe);
        EXPECT(gbc.readMem(0xe540), 0x3b);
        // FE 0136
        gbc.setState(0x1169, 0xa209, 0x50c0, 0x8800, 0x97b7, 0xab58, 0x1, 0x0);
        gbc.writeMem(0x1169, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa209);
        EXPECT(gbc.pc(), 0x116b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0137
        gbc.setState(0xcb5, 0x2bc4, 0xb1a0, 0xa147, 0x9015, 0x3312, 0x1, 0x1);
        gbc.writeMem(0xcb5, { 0xfe, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2bc4);
        EXPECT(gbc.pc(), 0xcb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0138
        gbc.setState(0xc2a4, 0xfdab, 0x36c0, 0x8bc7, 0x4260, 0x9fc2, 0x0, 0x1);
        gbc.writeMem(0xc2a4, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xfdab);
        EXPECT(gbc.pc(), 0xc2a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a4), 0xfe);
        EXPECT(gbc.readMem(0xc2a5), 0x82);
        // FE 0139
        gbc.setState(0xc509, 0xde6e, 0xa7b0, 0xe938, 0x4e38, 0xe41, 0x1, 0x1);
        gbc.writeMem(0xc509, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xde6e);
        EXPECT(gbc.pc(), 0xc50b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc509), 0xfe);
        EXPECT(gbc.readMem(0xc50a), 0xf9);
        // FE 013A
        gbc.setState(0x1c84, 0x23a8, 0xb2c0, 0x1c0c, 0x1ef3, 0xaf3f, 0x0, 0x1);
        gbc.writeMem(0x1c84, { 0xfe, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x23a8);
        EXPECT(gbc.pc(), 0x1c86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 013B
        gbc.setState(0x2af5, 0x5d93, 0xbfe0, 0xf3be, 0x4b84, 0x76bd, 0x1, 0x0);
        gbc.writeMem(0x2af5, { 0xfe, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5d93);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 013C
        gbc.setState(0xb110, 0x6133, 0xb0e0, 0xc2a3, 0x42d2, 0x1497, 0x1, 0x0);
        gbc.writeMem(0xb110, { 0xfe, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6133);
        EXPECT(gbc.pc(), 0xb112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb110), 0xfe);
        EXPECT(gbc.readMem(0xb111), 0x67);
        // FE 013D
        gbc.setState(0x1929, 0x4d86, 0xabd0, 0x216e, 0xd735, 0x9c80, 0x0, 0x0);
        gbc.writeMem(0x1929, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4d86);
        EXPECT(gbc.pc(), 0x192b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 013E
        gbc.setState(0x44af, 0x3aa4, 0x35a0, 0xff0b, 0x5e38, 0x6505, 0x0, 0x0);
        gbc.writeMem(0x44af, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3aa4);
        EXPECT(gbc.pc(), 0x44b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 013F
        gbc.setState(0x4eb4, 0x875a, 0x4300, 0x6c6c, 0x16f7, 0x98f3, 0x0, 0x1);
        gbc.writeMem(0x4eb4, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0x4eb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0140
        gbc.setState(0x59d7, 0x20f8, 0x8210, 0xb7c5, 0x5b4b, 0x4d0c, 0x1, 0x1);
        gbc.writeMem(0x59d7, { 0xfe, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x20f8);
        EXPECT(gbc.pc(), 0x59d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0141
        gbc.setState(0x6227, 0xbef3, 0x6cc0, 0xad61, 0x66a0, 0xa2cb, 0x1, 0x1);
        gbc.writeMem(0x6227, { 0xfe, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xbef3);
        EXPECT(gbc.pc(), 0x6229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0142
        gbc.setState(0xd032, 0x2800, 0x3000, 0xa3ed, 0xe737, 0xdb1d, 0x0, 0x1);
        gbc.writeMem(0xd032, { 0xfe, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2800);
        EXPECT(gbc.pc(), 0xd034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd032), 0xfe);
        EXPECT(gbc.readMem(0xd033), 0x68);
        // FE 0143
        gbc.setState(0x81f6, 0x1318, 0x3fe0, 0xd3a2, 0xc862, 0xb2d0, 0x1, 0x0);
        gbc.writeMem(0x81f6, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1318);
        EXPECT(gbc.pc(), 0x81f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81f6), 0xfe);
        EXPECT(gbc.readMem(0x81f7), 0xb0);
        // FE 0144
        gbc.setState(0x44e6, 0x68e9, 0x64a0, 0x6022, 0xc4a1, 0xc3cc, 0x1, 0x0);
        gbc.writeMem(0x44e6, { 0xfe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x68e9);
        EXPECT(gbc.pc(), 0x44e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0145
        gbc.setState(0xad80, 0x64ba, 0x1110, 0x72a2, 0xa6e, 0x4b6a, 0x1, 0x0);
        gbc.writeMem(0xad80, { 0xfe, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x64ba);
        EXPECT(gbc.pc(), 0xad82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad80), 0xfe);
        EXPECT(gbc.readMem(0xad81), 0x1b);
        // FE 0148
        gbc.setState(0x93fc, 0xd01c, 0x7330, 0xd9aa, 0x351e, 0xf3b7, 0x1, 0x1);
        gbc.writeMem(0x93fc, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd01c);
        EXPECT(gbc.pc(), 0x93fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93fc), 0xfe);
        EXPECT(gbc.readMem(0x93fd), 0x81);
        // FE 014A
        gbc.setState(0x1977, 0xe422, 0xcda0, 0x346b, 0x4112, 0xb3cc, 0x0, 0x0);
        gbc.writeMem(0x1977, { 0xfe, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe422);
        EXPECT(gbc.pc(), 0x1979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 014B
        gbc.setState(0xa5db, 0x2a1, 0x3130, 0xbef3, 0x86b3, 0x8481, 0x1, 0x1);
        gbc.writeMem(0xa5db, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2a1);
        EXPECT(gbc.pc(), 0xa5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5db), 0xfe);
        EXPECT(gbc.readMem(0xa5dc), 0xe5);
        // FE 014C
        gbc.setState(0x9e0e, 0x7d21, 0xfe20, 0x7572, 0x4a38, 0x4b57, 0x0, 0x1);
        gbc.writeMem(0x9e0e, { 0xfe, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7d21);
        EXPECT(gbc.pc(), 0x9e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e0e), 0xfe);
        EXPECT(gbc.readMem(0x9e0f), 0xb8);
        // FE 014D
        gbc.setState(0xe0e3, 0x4207, 0x9750, 0x27f7, 0xd1fb, 0xafb9, 0x1, 0x0);
        gbc.writeMem(0xe0e3, { 0xfe, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4207);
        EXPECT(gbc.pc(), 0xe0e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e3), 0xfe);
        EXPECT(gbc.readMem(0xe0e4), 0x13);
        // FE 014E
        gbc.setState(0x264a, 0x165d, 0x43c0, 0xe5c7, 0x86cf, 0x745b, 0x1, 0x1);
        gbc.writeMem(0x264a, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x165d);
        EXPECT(gbc.pc(), 0x264c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 014F
        gbc.setState(0x557, 0x5684, 0xf520, 0xacf4, 0x1ab9, 0x9b23, 0x0, 0x0);
        gbc.writeMem(0x557, { 0xfe, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5684);
        EXPECT(gbc.pc(), 0x559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0150
        gbc.setState(0xca4d, 0x9a70, 0xd6e0, 0xbbeb, 0xd01a, 0x753, 0x0, 0x0);
        gbc.writeMem(0xca4d, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0xca4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca4d), 0xfe);
        EXPECT(gbc.readMem(0xca4e), 0x60);
        // FE 0151
        gbc.setState(0x2ce5, 0x208d, 0x9d30, 0xbbef, 0x2c6, 0x9cc0, 0x0, 0x0);
        gbc.writeMem(0x2ce5, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x208d);
        EXPECT(gbc.pc(), 0x2ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0152
        gbc.setState(0xd8d0, 0xdd63, 0xf9f0, 0x1879, 0xd7d8, 0x2524, 0x0, 0x1);
        gbc.writeMem(0xd8d0, { 0xfe, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdd63);
        EXPECT(gbc.pc(), 0xd8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d0), 0xfe);
        EXPECT(gbc.readMem(0xd8d1), 0x4d);
        // FE 0153
        gbc.setState(0x6b7a, 0x221e, 0xdc20, 0xcab4, 0x31ea, 0x243d, 0x1, 0x1);
        gbc.writeMem(0x6b7a, { 0xfe, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x221e);
        EXPECT(gbc.pc(), 0x6b7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0154
        gbc.setState(0x995c, 0x9a05, 0x4970, 0x1be, 0xd30f, 0x3ec8, 0x0, 0x0);
        gbc.writeMem(0x995c, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9a05);
        EXPECT(gbc.pc(), 0x995e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x995c), 0xfe);
        EXPECT(gbc.readMem(0x995d), 0xa1);
        // FE 0155
        gbc.setState(0xe133, 0xfe58, 0x17f0, 0xa488, 0xc590, 0xf42c, 0x0, 0x1);
        gbc.writeMem(0xe133, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfe58);
        EXPECT(gbc.pc(), 0xe135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe133), 0xfe);
        EXPECT(gbc.readMem(0xe134), 0x19);
        // FE 0156
        gbc.setState(0x7ed9, 0xbf6c, 0xa590, 0x2e6a, 0xcfd9, 0xd15e, 0x1, 0x1);
        gbc.writeMem(0x7ed9, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbf6c);
        EXPECT(gbc.pc(), 0x7edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0157
        gbc.setState(0x1837, 0x862b, 0x67c0, 0xc52c, 0xa143, 0xa48b, 0x0, 0x0);
        gbc.writeMem(0x1837, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x862b);
        EXPECT(gbc.pc(), 0x1839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0158
        gbc.setState(0xdf52, 0x8e71, 0x8ce0, 0xedbd, 0x1496, 0xd4af, 0x1, 0x1);
        gbc.writeMem(0xdf52, { 0xfe, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8e71);
        EXPECT(gbc.pc(), 0xdf54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf52), 0xfe);
        EXPECT(gbc.readMem(0xdf53), 0xc5);
        // FE 0159
        gbc.setState(0x5eec, 0x7ab3, 0x9d90, 0x70f, 0x2a2f, 0x48bb, 0x1, 0x0);
        gbc.writeMem(0x5eec, { 0xfe, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7ab3);
        EXPECT(gbc.pc(), 0x5eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 015A
        gbc.setState(0x13fa, 0xba27, 0xed30, 0x9cec, 0x1175, 0x6a71, 0x0, 0x1);
        gbc.writeMem(0x13fa, { 0xfe, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xba27);
        EXPECT(gbc.pc(), 0x13fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 015B
        gbc.setState(0x7d7, 0xc10c, 0x450, 0x8cd8, 0x8e04, 0x345c, 0x1, 0x0);
        gbc.writeMem(0x7d7, { 0xfe, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc10c);
        EXPECT(gbc.pc(), 0x7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 015C
        gbc.setState(0xed46, 0xc399, 0xcd40, 0x7ef7, 0xed67, 0xe85d, 0x1, 0x1);
        gbc.writeMem(0xed46, { 0xfe, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc399);
        EXPECT(gbc.pc(), 0xed48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed46), 0xfe);
        EXPECT(gbc.readMem(0xed47), 0x8c);
        // FE 015D
        gbc.setState(0x9fb0, 0xbe5d, 0x9d0, 0xcc17, 0x8cae, 0x755, 0x0, 0x1);
        gbc.writeMem(0x9fb0, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xbe5d);
        EXPECT(gbc.pc(), 0x9fb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb0), 0xfe);
        EXPECT(gbc.readMem(0x9fb1), 0xea);
        // FE 015E
        gbc.setState(0xdab8, 0xefee, 0xe780, 0x3fd0, 0x225e, 0x80, 0x1, 0x0);
        gbc.writeMem(0xdab8, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xefee);
        EXPECT(gbc.pc(), 0xdaba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab8), 0xfe);
        EXPECT(gbc.readMem(0xdab9), 0xa1);
        // FE 015F
        gbc.setState(0x7582, 0x23ce, 0x1e50, 0x1b88, 0x602a, 0x6196, 0x0, 0x1);
        gbc.writeMem(0x7582, { 0xfe, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x23ce);
        EXPECT(gbc.pc(), 0x7584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0160
        gbc.setState(0x9395, 0x4839, 0x3910, 0xc6d6, 0xadd0, 0x8389, 0x0, 0x1);
        gbc.writeMem(0x9395, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4839);
        EXPECT(gbc.pc(), 0x9397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9395), 0xfe);
        EXPECT(gbc.readMem(0x9396), 0xa1);
        // FE 0161
        gbc.setState(0x4002, 0xe155, 0xbad0, 0x5603, 0xad5b, 0x9e09, 0x0, 0x0);
        gbc.writeMem(0x4002, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe155);
        EXPECT(gbc.pc(), 0x4004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0162
        gbc.setState(0x9323, 0xf3fe, 0x5760, 0x470b, 0xc779, 0xefb4, 0x1, 0x1);
        gbc.writeMem(0x9323, { 0xfe, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf3fe);
        EXPECT(gbc.pc(), 0x9325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9323), 0xfe);
        EXPECT(gbc.readMem(0x9324), 0xba);
        // FE 0163
        gbc.setState(0x71f5, 0xb7f7, 0xca10, 0x2a99, 0x7f7d, 0x8f30, 0x1, 0x0);
        gbc.writeMem(0x71f5, { 0xfe, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb7f7);
        EXPECT(gbc.pc(), 0x71f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0164
        gbc.setState(0x3397, 0x87a3, 0x76a0, 0x1962, 0x23de, 0xaac3, 0x1, 0x1);
        gbc.writeMem(0x3397, { 0xfe, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x87a3);
        EXPECT(gbc.pc(), 0x3399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0165
        gbc.setState(0x9a19, 0x8ca5, 0x9720, 0xab99, 0x55fc, 0xed09, 0x1, 0x1);
        gbc.writeMem(0x9a19, { 0xfe, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8ca5);
        EXPECT(gbc.pc(), 0x9a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a19), 0xfe);
        EXPECT(gbc.readMem(0x9a1a), 0xb9);
        // FE 0167
        gbc.setState(0xc489, 0xe601, 0x8e70, 0xf65, 0xd4f6, 0xe080, 0x0, 0x1);
        gbc.writeMem(0xc489, { 0xfe, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe601);
        EXPECT(gbc.pc(), 0xc48b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc489), 0xfe);
        EXPECT(gbc.readMem(0xc48a), 0xc5);
        // FE 0168
        gbc.setState(0x4341, 0x617d, 0x75e0, 0x8a03, 0x455f, 0x324e, 0x1, 0x0);
        gbc.writeMem(0x4341, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x617d);
        EXPECT(gbc.pc(), 0x4343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0169
        gbc.setState(0xbad0, 0x8b0e, 0x3120, 0xb43e, 0x62c4, 0x7ef5, 0x1, 0x0);
        gbc.writeMem(0xbad0, { 0xfe, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8b0e);
        EXPECT(gbc.pc(), 0xbad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad0), 0xfe);
        EXPECT(gbc.readMem(0xbad1), 0x4);
        // FE 016A
        gbc.setState(0x843e, 0xde61, 0xfd30, 0xe122, 0x36ba, 0xfebd, 0x1, 0x0);
        gbc.writeMem(0x843e, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xde61);
        EXPECT(gbc.pc(), 0x8440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843e), 0xfe);
        EXPECT(gbc.readMem(0x843f), 0x53);
        // FE 016B
        gbc.setState(0x1946, 0x260a, 0xdeb0, 0xded8, 0x7704, 0x91aa, 0x1, 0x1);
        gbc.writeMem(0x1946, { 0xfe, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x260a);
        EXPECT(gbc.pc(), 0x1948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 016C
        gbc.setState(0xe539, 0xfb24, 0xdf80, 0x9244, 0xf4bc, 0x3df, 0x0, 0x0);
        gbc.writeMem(0xe539, { 0xfe, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb24);
        EXPECT(gbc.pc(), 0xe53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe539), 0xfe);
        EXPECT(gbc.readMem(0xe53a), 0x25);
        // FE 016D
        gbc.setState(0x16d4, 0x441e, 0xf0, 0x44d9, 0x9f4d, 0xb78f, 0x1, 0x1);
        gbc.writeMem(0x16d4, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x441e);
        EXPECT(gbc.pc(), 0x16d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 016E
        gbc.setState(0x6694, 0x8c1e, 0x7e30, 0x48b1, 0xf040, 0x4600, 0x1, 0x0);
        gbc.writeMem(0x6694, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8c1e);
        EXPECT(gbc.pc(), 0x6696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 016F
        gbc.setState(0x7153, 0xb8fd, 0x3830, 0xebd7, 0x70a2, 0xf61, 0x1, 0x1);
        gbc.writeMem(0x7153, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0x7155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0170
        gbc.setState(0xb4a0, 0xf193, 0xc3d0, 0x40a3, 0x458c, 0x2228, 0x1, 0x1);
        gbc.writeMem(0xb4a0, { 0xfe, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf193);
        EXPECT(gbc.pc(), 0xb4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a0), 0xfe);
        EXPECT(gbc.readMem(0xb4a1), 0x7a);
        // FE 0171
        gbc.setState(0xb8ff, 0x7b0, 0xbbb0, 0x8943, 0xf4da, 0x5c63, 0x0, 0x1);
        gbc.writeMem(0xb8ff, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7b0);
        EXPECT(gbc.pc(), 0xb901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ff), 0xfe);
        EXPECT(gbc.readMem(0xb900), 0xf7);
        // FE 0172
        gbc.setState(0x3155, 0x6085, 0x9060, 0xd38f, 0x3884, 0xe601, 0x1, 0x0);
        gbc.writeMem(0x3155, { 0xfe, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6085);
        EXPECT(gbc.pc(), 0x3157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0174
        gbc.setState(0x35fd, 0x61e2, 0xbea0, 0x2bc7, 0x4e7f, 0x2aa3, 0x0, 0x1);
        gbc.writeMem(0x35fd, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x61e2);
        EXPECT(gbc.pc(), 0x35ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0175
        gbc.setState(0x18e8, 0x5525, 0xd440, 0x9216, 0x7eec, 0xc0e2, 0x1, 0x1);
        gbc.writeMem(0x18e8, { 0xfe, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5525);
        EXPECT(gbc.pc(), 0x18ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0176
        gbc.setState(0x496d, 0x3f40, 0x3c60, 0x6b39, 0x2a21, 0xd581, 0x1, 0x0);
        gbc.writeMem(0x496d, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3f40);
        EXPECT(gbc.pc(), 0x496f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0177
        gbc.setState(0x5f1f, 0x11ff, 0xa710, 0x2c2, 0xceea, 0x89cd, 0x1, 0x0);
        gbc.writeMem(0x5f1f, { 0xfe, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x11ff);
        EXPECT(gbc.pc(), 0x5f21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0178
        gbc.setState(0x59b2, 0x8fbc, 0x7910, 0x790b, 0xe8cb, 0x2236, 0x1, 0x1);
        gbc.writeMem(0x59b2, { 0xfe, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8fbc);
        EXPECT(gbc.pc(), 0x59b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0179
        gbc.setState(0x1f5e, 0x383d, 0xe910, 0xfa3c, 0xd41c, 0x732d, 0x1, 0x1);
        gbc.writeMem(0x1f5e, { 0xfe, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x383d);
        EXPECT(gbc.pc(), 0x1f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 017A
        gbc.setState(0xa53b, 0xdda4, 0xba00, 0x6610, 0x1e80, 0x668b, 0x1, 0x0);
        gbc.writeMem(0xa53b, { 0xfe, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xdda4);
        EXPECT(gbc.pc(), 0xa53d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53b), 0xfe);
        EXPECT(gbc.readMem(0xa53c), 0x29);
        // FE 017B
        gbc.setState(0xcbb4, 0xe54c, 0x36e0, 0xf0ed, 0x410c, 0xc1c1, 0x1, 0x1);
        gbc.writeMem(0xcbb4, { 0xfe, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe54c);
        EXPECT(gbc.pc(), 0xcbb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbb4), 0xfe);
        EXPECT(gbc.readMem(0xcbb5), 0xfa);
        // FE 017C
        gbc.setState(0x3cb7, 0xcb1b, 0xc20, 0xcc22, 0xb82b, 0xc31d, 0x0, 0x1);
        gbc.writeMem(0x3cb7, { 0xfe, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcb1b);
        EXPECT(gbc.pc(), 0x3cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 017D
        gbc.setState(0x93d, 0xae74, 0xd890, 0xfcfb, 0x64ff, 0xfbaa, 0x0, 0x1);
        gbc.writeMem(0x93d, { 0xfe, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xae74);
        EXPECT(gbc.pc(), 0x93f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 017E
        gbc.setState(0x86b1, 0xbc3c, 0x57d0, 0x7f37, 0x9ac9, 0xa23, 0x0, 0x0);
        gbc.writeMem(0x86b1, { 0xfe, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbc3c);
        EXPECT(gbc.pc(), 0x86b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b1), 0xfe);
        EXPECT(gbc.readMem(0x86b2), 0xb7);
        // FE 017F
        gbc.setState(0x8e33, 0x14d3, 0xf400, 0xa6af, 0xa94d, 0xdd93, 0x0, 0x0);
        gbc.writeMem(0x8e33, { 0xfe, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x14d3);
        EXPECT(gbc.pc(), 0x8e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e33), 0xfe);
        EXPECT(gbc.readMem(0x8e34), 0x8);
        // FE 0180
        gbc.setState(0x6607, 0xe73b, 0x4820, 0xf6c8, 0xc509, 0x7b5a, 0x0, 0x0);
        gbc.writeMem(0x6607, { 0xfe, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe73b);
        EXPECT(gbc.pc(), 0x6609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0181
        gbc.setState(0x29dc, 0x9a3a, 0x7c10, 0xd8e2, 0xb262, 0x741e, 0x0, 0x0);
        gbc.writeMem(0x29dc, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9a3a);
        EXPECT(gbc.pc(), 0x29de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0182
        gbc.setState(0x54ac, 0x1083, 0xbe20, 0x569a, 0xe6dd, 0xaf38, 0x0, 0x0);
        gbc.writeMem(0x54ac, { 0xfe, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1083);
        EXPECT(gbc.pc(), 0x54ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0183
        gbc.setState(0xd6cb, 0xccd9, 0x5a10, 0xd8fb, 0xbcd7, 0x5bf2, 0x1, 0x0);
        gbc.writeMem(0xd6cb, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xccd9);
        EXPECT(gbc.pc(), 0xd6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6cb), 0xfe);
        EXPECT(gbc.readMem(0xd6cc), 0xb0);
        // FE 0184
        gbc.setState(0xb283, 0x2511, 0xcfe0, 0x332c, 0xdcca, 0xb9cf, 0x0, 0x0);
        gbc.writeMem(0xb283, { 0xfe, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2511);
        EXPECT(gbc.pc(), 0xb285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb283), 0xfe);
        EXPECT(gbc.readMem(0xb284), 0xdf);
        // FE 0186
        gbc.setState(0x2071, 0xa7b8, 0x52e0, 0xe68f, 0xc0e2, 0x6a16, 0x1, 0x0);
        gbc.writeMem(0x2071, { 0xfe, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa7b8);
        EXPECT(gbc.pc(), 0x2073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0187
        gbc.setState(0xcb7c, 0xb697, 0x8910, 0x127e, 0x9781, 0x8b69, 0x1, 0x0);
        gbc.writeMem(0xcb7c, { 0xfe, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb697);
        EXPECT(gbc.pc(), 0xcb7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0xfe);
        EXPECT(gbc.readMem(0xcb7d), 0x16);
        // FE 0188
        gbc.setState(0x2be9, 0x1f0c, 0x7f10, 0xd029, 0x23f8, 0x5e4f, 0x0, 0x0);
        gbc.writeMem(0x2be9, { 0xfe, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1f0c);
        EXPECT(gbc.pc(), 0x2beb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0189
        gbc.setState(0xb40a, 0x3bf6, 0x9aa0, 0x72eb, 0x64d0, 0x69bc, 0x1, 0x0);
        gbc.writeMem(0xb40a, { 0xfe, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3bf6);
        EXPECT(gbc.pc(), 0xb40c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb40a), 0xfe);
        EXPECT(gbc.readMem(0xb40b), 0xa6);
        // FE 018A
        gbc.setState(0xbf46, 0x81cf, 0xd930, 0xf312, 0xfae3, 0x270e, 0x0, 0x0);
        gbc.writeMem(0xbf46, { 0xfe, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x81cf);
        EXPECT(gbc.pc(), 0xbf48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf46), 0xfe);
        EXPECT(gbc.readMem(0xbf47), 0xe0);
        // FE 018B
        gbc.setState(0xb2cd, 0x57b8, 0xaac0, 0xcdc1, 0x8ea2, 0x7368, 0x1, 0x1);
        gbc.writeMem(0xb2cd, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x57b8);
        EXPECT(gbc.pc(), 0xb2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cd), 0xfe);
        EXPECT(gbc.readMem(0xb2ce), 0x9b);
        // FE 018C
        gbc.setState(0x4d18, 0x922c, 0x910, 0xabbb, 0xfc63, 0x10c1, 0x0, 0x1);
        gbc.writeMem(0x4d18, { 0xfe, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x922c);
        EXPECT(gbc.pc(), 0x4d1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 018D
        gbc.setState(0x10e9, 0x463f, 0xa8c0, 0xe13c, 0x6d2f, 0xd188, 0x1, 0x0);
        gbc.writeMem(0x10e9, { 0xfe, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x463f);
        EXPECT(gbc.pc(), 0x10eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 018E
        gbc.setState(0x6290, 0x5deb, 0x5c80, 0x717e, 0xa126, 0x192c, 0x0, 0x0);
        gbc.writeMem(0x6290, { 0xfe, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5deb);
        EXPECT(gbc.pc(), 0x6292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 018F
        gbc.setState(0x799f, 0x30b2, 0xfc00, 0xc4ba, 0xaa9a, 0xc5f1, 0x1, 0x0);
        gbc.writeMem(0x799f, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x30b2);
        EXPECT(gbc.pc(), 0x79a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0190
        gbc.setState(0xa095, 0x9752, 0x2e60, 0x817c, 0xbdb3, 0x24d6, 0x1, 0x0);
        gbc.writeMem(0xa095, { 0xfe, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9752);
        EXPECT(gbc.pc(), 0xa097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa095), 0xfe);
        EXPECT(gbc.readMem(0xa096), 0xd6);
        // FE 0191
        gbc.setState(0xeca2, 0x2529, 0xc7b0, 0xe898, 0x86d2, 0xacb1, 0x0, 0x1);
        gbc.writeMem(0xeca2, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2529);
        EXPECT(gbc.pc(), 0xeca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca2), 0xfe);
        EXPECT(gbc.readMem(0xeca3), 0x98);
        // FE 0192
        gbc.setState(0xeba0, 0xd05c, 0x8e50, 0xbd78, 0x22c4, 0x4e00, 0x1, 0x1);
        gbc.writeMem(0xeba0, { 0xfe, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd05c);
        EXPECT(gbc.pc(), 0xeba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba0), 0xfe);
        EXPECT(gbc.readMem(0xeba1), 0x8a);
        // FE 0193
        gbc.setState(0x639f, 0xfa20, 0x1fa0, 0x776e, 0x4946, 0xab9c, 0x1, 0x1);
        gbc.writeMem(0x639f, { 0xfe, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfa20);
        EXPECT(gbc.pc(), 0x63a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0194
        gbc.setState(0x81f6, 0xd1d3, 0x72c0, 0x9e5e, 0x49, 0xbb8e, 0x0, 0x1);
        gbc.writeMem(0x81f6, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd1d3);
        EXPECT(gbc.pc(), 0x81f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81f6), 0xfe);
        EXPECT(gbc.readMem(0x81f7), 0xb0);
        // FE 0195
        gbc.setState(0xd21b, 0xd246, 0x3360, 0x60c, 0x3d2f, 0xee32, 0x0, 0x1);
        gbc.writeMem(0xd21b, { 0xfe, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd246);
        EXPECT(gbc.pc(), 0xd21d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd21b), 0xfe);
        EXPECT(gbc.readMem(0xd21c), 0x1c);
        // FE 0196
        gbc.setState(0x80a1, 0x19f4, 0x64d0, 0x1da6, 0x2264, 0x3f30, 0x0, 0x1);
        gbc.writeMem(0x80a1, { 0xfe, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x19f4);
        EXPECT(gbc.pc(), 0x80a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a1), 0xfe);
        EXPECT(gbc.readMem(0x80a2), 0xe7);
        // FE 0197
        gbc.setState(0x64a1, 0x73be, 0x8cf0, 0xd2ea, 0x6344, 0x9a01, 0x0, 0x1);
        gbc.writeMem(0x64a1, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x73be);
        EXPECT(gbc.pc(), 0x64a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0198
        gbc.setState(0xb523, 0x9d60, 0x3fc0, 0xbc13, 0xca09, 0xc25d, 0x0, 0x1);
        gbc.writeMem(0xb523, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9d60);
        EXPECT(gbc.pc(), 0xb525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb523), 0xfe);
        EXPECT(gbc.readMem(0xb524), 0x10);
        // FE 0199
        gbc.setState(0x2be1, 0x3b12, 0xe930, 0x5530, 0x3720, 0x1d8a, 0x0, 0x0);
        gbc.writeMem(0x2be1, { 0xfe, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3b12);
        EXPECT(gbc.pc(), 0x2be3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 019A
        gbc.setState(0x692, 0xba6f, 0x5a10, 0x6394, 0x1a98, 0xdefb, 0x1, 0x0);
        gbc.writeMem(0x692, { 0xfe, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xba6f);
        EXPECT(gbc.pc(), 0x694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 019B
        gbc.setState(0xb2c5, 0x72f5, 0x75a0, 0xb7f5, 0xf1c7, 0x5e3b, 0x1, 0x1);
        gbc.writeMem(0xb2c5, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x72f5);
        EXPECT(gbc.pc(), 0xb2c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c5), 0xfe);
        EXPECT(gbc.readMem(0xb2c6), 0x38);
        // FE 019C
        gbc.setState(0x7e7d, 0x6ceb, 0x7850, 0x6728, 0xf61b, 0xf77c, 0x1, 0x0);
        gbc.writeMem(0x7e7d, { 0xfe, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6ceb);
        EXPECT(gbc.pc(), 0x7e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 019D
        gbc.setState(0x6a, 0x8d90, 0xfd0, 0x405, 0x6aad, 0x3cac, 0x1, 0x1);
        gbc.writeMem(0x6a, { 0xfe, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8d90);
        EXPECT(gbc.pc(), 0x6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 019E
        gbc.setState(0xd9dc, 0x1a9d, 0x2930, 0x9d35, 0x334d, 0xdd8a, 0x1, 0x1);
        gbc.writeMem(0xd9dc, { 0xfe, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1a9d);
        EXPECT(gbc.pc(), 0xd9de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9dc), 0xfe);
        EXPECT(gbc.readMem(0xd9dd), 0x3c);
        // FE 019F
        gbc.setState(0x4b3d, 0x8ee9, 0x98d0, 0xa5d6, 0x8086, 0x56df, 0x1, 0x1);
        gbc.writeMem(0x4b3d, { 0xfe, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8ee9);
        EXPECT(gbc.pc(), 0x4b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01A0
        gbc.setState(0x2a9a, 0x91e2, 0x9d30, 0x6055, 0x678a, 0x40a2, 0x1, 0x0);
        gbc.writeMem(0x2a9a, { 0xfe, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x91e2);
        EXPECT(gbc.pc(), 0x2a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01A1
        gbc.setState(0x5989, 0x2248, 0x6730, 0xca9a, 0x898c, 0x6f52, 0x0, 0x1);
        gbc.writeMem(0x5989, { 0xfe, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2248);
        EXPECT(gbc.pc(), 0x598b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01A2
        gbc.setState(0x3645, 0x621d, 0x930, 0xb328, 0x9388, 0x3682, 0x0, 0x1);
        gbc.writeMem(0x3645, { 0xfe, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x621d);
        EXPECT(gbc.pc(), 0x3647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01A4
        gbc.setState(0x1db7, 0x6be9, 0x2250, 0x5f73, 0xd0c5, 0x35df, 0x0, 0x1);
        gbc.writeMem(0x1db7, { 0xfe, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6be9);
        EXPECT(gbc.pc(), 0x1db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01A5
        gbc.setState(0xbe86, 0xa2aa, 0x9a60, 0xeefa, 0x7183, 0xbba2, 0x0, 0x0);
        gbc.writeMem(0xbe86, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa2aa);
        EXPECT(gbc.pc(), 0xbe88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe86), 0xfe);
        EXPECT(gbc.readMem(0xbe87), 0x53);
        // FE 01A6
        gbc.setState(0x1320, 0x5e2a, 0xcfb0, 0xfbcc, 0x678f, 0x602c, 0x1, 0x0);
        gbc.writeMem(0x1320, { 0xfe, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5e2a);
        EXPECT(gbc.pc(), 0x1322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01A7
        gbc.setState(0x4e88, 0x488, 0x1f10, 0xa9bc, 0x8d6d, 0x7ec5, 0x0, 0x1);
        gbc.writeMem(0x4e88, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x488);
        EXPECT(gbc.pc(), 0x4e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01A8
        gbc.setState(0xced7, 0xe4f5, 0x7bd0, 0x37b1, 0x4daf, 0x677a, 0x0, 0x1);
        gbc.writeMem(0xced7, { 0xfe, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe4f5);
        EXPECT(gbc.pc(), 0xced9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced7), 0xfe);
        EXPECT(gbc.readMem(0xced8), 0xc);
        // FE 01A9
        gbc.setState(0x286d, 0xbc1c, 0x4d80, 0xd899, 0xcd08, 0xf6dc, 0x0, 0x0);
        gbc.writeMem(0x286d, { 0xfe, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbc1c);
        EXPECT(gbc.pc(), 0x286f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01AA
        gbc.setState(0xed3, 0x376a, 0xf4c0, 0x821a, 0x919d, 0x34c9, 0x0, 0x1);
        gbc.writeMem(0xed3, { 0xfe, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x376a);
        EXPECT(gbc.pc(), 0xed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01AB
        gbc.setState(0x39c9, 0x60c9, 0xfb60, 0x7215, 0x230d, 0xaa3e, 0x0, 0x1);
        gbc.writeMem(0x39c9, { 0xfe, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x60c9);
        EXPECT(gbc.pc(), 0x39cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01AC
        gbc.setState(0xd0ec, 0x5163, 0xec90, 0x85e1, 0x9b3c, 0x817a, 0x0, 0x0);
        gbc.writeMem(0xd0ec, { 0xfe, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5163);
        EXPECT(gbc.pc(), 0xd0ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ec), 0xfe);
        EXPECT(gbc.readMem(0xd0ed), 0xdd);
        // FE 01AD
        gbc.setState(0x1d93, 0x4ea7, 0xdec0, 0xcc54, 0x84ad, 0x6581, 0x0, 0x0);
        gbc.writeMem(0x1d93, { 0xfe, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4ea7);
        EXPECT(gbc.pc(), 0x1d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01AE
        gbc.setState(0x913f, 0x9995, 0x28c0, 0x14e5, 0xfe68, 0xb955, 0x0, 0x0);
        gbc.writeMem(0x913f, { 0xfe, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9995);
        EXPECT(gbc.pc(), 0x9141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x913f), 0xfe);
        EXPECT(gbc.readMem(0x9140), 0x16);
        // FE 01AF
        gbc.setState(0xbf5e, 0x2a42, 0xd210, 0xda71, 0x29f2, 0xaf77, 0x1, 0x1);
        gbc.writeMem(0xbf5e, { 0xfe, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2a42);
        EXPECT(gbc.pc(), 0xbf60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5e), 0xfe);
        EXPECT(gbc.readMem(0xbf5f), 0x7a);
        // FE 01B0
        gbc.setState(0x73e1, 0x630d, 0xab0, 0x32c2, 0xe67a, 0x4d1e, 0x1, 0x1);
        gbc.writeMem(0x73e1, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x630d);
        EXPECT(gbc.pc(), 0x73e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01B1
        gbc.setState(0x2e3f, 0x7490, 0x47e0, 0x35b5, 0xecd9, 0x9973, 0x1, 0x1);
        gbc.writeMem(0x2e3f, { 0xfe, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7490);
        EXPECT(gbc.pc(), 0x2e41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01B2
        gbc.setState(0x288d, 0x35cc, 0xcd80, 0x7f25, 0x63e7, 0x6c62, 0x0, 0x0);
        gbc.writeMem(0x288d, { 0xfe, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x35cc);
        EXPECT(gbc.pc(), 0x288f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01B3
        gbc.setState(0x8db5, 0xc6e4, 0x7650, 0xa52, 0x8a2b, 0xcc62, 0x1, 0x1);
        gbc.writeMem(0x8db5, { 0xfe, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc6e4);
        EXPECT(gbc.pc(), 0x8db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db5), 0xfe);
        EXPECT(gbc.readMem(0x8db6), 0x51);
        // FE 01B4
        gbc.setState(0xa588, 0x10c5, 0xfd60, 0x381, 0xb1d4, 0xeed3, 0x1, 0x1);
        gbc.writeMem(0xa588, { 0xfe, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x10c5);
        EXPECT(gbc.pc(), 0xa58a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa588), 0xfe);
        EXPECT(gbc.readMem(0xa589), 0x41);
        // FE 01B5
        gbc.setState(0xa99c, 0x99fd, 0x1f30, 0x242f, 0x5e7, 0x4eaa, 0x1, 0x0);
        gbc.writeMem(0xa99c, { 0xfe, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x99fd);
        EXPECT(gbc.pc(), 0xa99e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99c), 0xfe);
        EXPECT(gbc.readMem(0xa99d), 0x7f);
        // FE 01B6
        gbc.setState(0x4a69, 0x9cd5, 0x7a80, 0x37d5, 0x9f5c, 0x4809, 0x1, 0x0);
        gbc.writeMem(0x4a69, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0x4a6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01B7
        gbc.setState(0x90ae, 0xaf1f, 0xc640, 0xe234, 0xadc3, 0xcc5e, 0x0, 0x1);
        gbc.writeMem(0x90ae, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xaf1f);
        EXPECT(gbc.pc(), 0x90b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ae), 0xfe);
        EXPECT(gbc.readMem(0x90af), 0x82);
        // FE 01B8
        gbc.setState(0x7add, 0x992b, 0x2aa0, 0x19c, 0x1b12, 0x1185, 0x1, 0x1);
        gbc.writeMem(0x7add, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x992b);
        EXPECT(gbc.pc(), 0x7adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01B9
        gbc.setState(0x451f, 0x6d95, 0x74f0, 0x8298, 0xd55, 0xf499, 0x0, 0x1);
        gbc.writeMem(0x451f, { 0xfe, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6d95);
        EXPECT(gbc.pc(), 0x4521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01BA
        gbc.setState(0x991f, 0xeca7, 0x72d0, 0x223f, 0x4ca9, 0xc9cc, 0x0, 0x0);
        gbc.writeMem(0x991f, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xeca7);
        EXPECT(gbc.pc(), 0x9921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991f), 0xfe);
        EXPECT(gbc.readMem(0x9920), 0x5a);
        // FE 01BB
        gbc.setState(0x1e6d, 0x8756, 0x61f0, 0xa76a, 0x807a, 0x696b, 0x0, 0x1);
        gbc.writeMem(0x1e6d, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8756);
        EXPECT(gbc.pc(), 0x1e6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01BC
        gbc.setState(0xe421, 0x238b, 0x2ce0, 0x1a12, 0xaa1b, 0x7456, 0x1, 0x1);
        gbc.writeMem(0xe421, { 0xfe, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x238b);
        EXPECT(gbc.pc(), 0xe423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe421), 0xfe);
        EXPECT(gbc.readMem(0xe422), 0x76);
        // FE 01BE
        gbc.setState(0x7f48, 0x8f86, 0x5d50, 0x4db6, 0xa930, 0x478a, 0x0, 0x1);
        gbc.writeMem(0x7f48, { 0xfe, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8f86);
        EXPECT(gbc.pc(), 0x7f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01BF
        gbc.setState(0x700b, 0x523a, 0x79b0, 0xfbd8, 0x30ab, 0x53da, 0x0, 0x0);
        gbc.writeMem(0x700b, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x523a);
        EXPECT(gbc.pc(), 0x700d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01C0
        gbc.setState(0x7ec0, 0x2b3f, 0xc260, 0xe413, 0x6a6, 0x6aca, 0x0, 0x1);
        gbc.writeMem(0x7ec0, { 0xfe, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2b3f);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01C1
        gbc.setState(0x2557, 0x5248, 0xedd0, 0xe17e, 0x967a, 0x957c, 0x1, 0x1);
        gbc.writeMem(0x2557, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5248);
        EXPECT(gbc.pc(), 0x2559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01C2
        gbc.setState(0xe78a, 0xfe93, 0xe630, 0x5809, 0x37ba, 0xd7ad, 0x0, 0x1);
        gbc.writeMem(0xe78a, { 0xfe, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfe93);
        EXPECT(gbc.pc(), 0xe78c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78a), 0xfe);
        EXPECT(gbc.readMem(0xe78b), 0x71);
        // FE 01C3
        gbc.setState(0xdc9, 0xd070, 0xd890, 0x8cd3, 0x2e29, 0x236c, 0x1, 0x0);
        gbc.writeMem(0xdc9, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd070);
        EXPECT(gbc.pc(), 0xdcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01C4
        gbc.setState(0x2a09, 0xae59, 0xdb30, 0xb5f0, 0x4a68, 0xb99e, 0x1, 0x1);
        gbc.writeMem(0x2a09, { 0xfe, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xae59);
        EXPECT(gbc.pc(), 0x2a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01C5
        gbc.setState(0x533c, 0x3e3a, 0x60e0, 0xfbdf, 0x11d2, 0xd47b, 0x0, 0x0);
        gbc.writeMem(0x533c, { 0xfe, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3e3a);
        EXPECT(gbc.pc(), 0x533e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 01C6
        gbc.setState(0xc8ac, 0xb771, 0xb3a0, 0x63aa, 0x696b, 0xa8dc, 0x1, 0x1);
        gbc.writeMem(0xc8ac, { 0xfe, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb771);
        EXPECT(gbc.pc(), 0xc8ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8ac), 0xfe);
        EXPECT(gbc.readMem(0xc8ad), 0xb5);
        // FE 01C7
        gbc.setState(0x9bda, 0xff26, 0x9f90, 0xad57, 0xffa, 0xd35d, 0x0, 0x1);
        gbc.writeMem(0x9bda, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xff26);
        EXPECT(gbc.pc(), 0x9bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bda), 0xfe);
        EXPECT(gbc.readMem(0x9bdb), 0x80);
        // FE 01C8
        gbc.setState(0xeb71, 0x2074, 0x82e0, 0x4a7d, 0x7a80, 0x25d1, 0x1, 0x0);
        gbc.writeMem(0xeb71, { 0xfe, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2074);
        EXPECT(gbc.pc(), 0xeb73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb71), 0xfe);
        EXPECT(gbc.readMem(0xeb72), 0x52);
        // FE 01C9
        gbc.setState(0xa5a5, 0x89e2, 0x9080, 0xe741, 0xb1db, 0x1c5a, 0x1, 0x0);
        gbc.writeMem(0xa5a5, { 0xfe, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x89e2);
        EXPECT(gbc.pc(), 0xa5a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a5), 0xfe);
        EXPECT(gbc.readMem(0xa5a6), 0x57);
        // FE 01CA
        gbc.setState(0x41ab, 0xc0f9, 0xef40, 0x3609, 0x36d7, 0x4ae1, 0x1, 0x1);
        gbc.writeMem(0x41ab, { 0xfe, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc0f9);
        EXPECT(gbc.pc(), 0x41ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01CC
        gbc.setState(0x239f, 0x2bcc, 0x6c50, 0x8fe1, 0x9f8f, 0x2688, 0x1, 0x0);
        gbc.writeMem(0x239f, { 0xfe, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2bcc);
        EXPECT(gbc.pc(), 0x23a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01CD
        gbc.setState(0xdc77, 0xb87b, 0x9700, 0xbcb0, 0x9383, 0xc1aa, 0x1, 0x1);
        gbc.writeMem(0xdc77, { 0xfe, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb87b);
        EXPECT(gbc.pc(), 0xdc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc77), 0xfe);
        EXPECT(gbc.readMem(0xdc78), 0xe);
        // FE 01CE
        gbc.setState(0x51f5, 0x4421, 0xf870, 0x983c, 0x5061, 0xfcf8, 0x0, 0x0);
        gbc.writeMem(0x51f5, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4421);
        EXPECT(gbc.pc(), 0x51f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01CF
        gbc.setState(0x4671, 0x9584, 0x8c80, 0x60, 0x8f06, 0x2ec, 0x1, 0x1);
        gbc.writeMem(0x4671, { 0xfe, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9584);
        EXPECT(gbc.pc(), 0x4673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01D0
        gbc.setState(0x165f, 0xd3f2, 0xc560, 0xb7d4, 0xe57e, 0x6894, 0x1, 0x0);
        gbc.writeMem(0x165f, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd3f2);
        EXPECT(gbc.pc(), 0x1661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01D1
        gbc.setState(0xd707, 0x71eb, 0xd3a0, 0x238a, 0xb03c, 0xd15b, 0x1, 0x1);
        gbc.writeMem(0xd707, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x71eb);
        EXPECT(gbc.pc(), 0xd709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd707), 0xfe);
        EXPECT(gbc.readMem(0xd708), 0xe5);
        // FE 01D2
        gbc.setState(0x44d1, 0x1eb4, 0xe3a0, 0x9064, 0xbca0, 0xf940, 0x0, 0x0);
        gbc.writeMem(0x44d1, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1eb4);
        EXPECT(gbc.pc(), 0x44d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01D3
        gbc.setState(0xfd5, 0x4b35, 0xda80, 0x3605, 0xb9ec, 0x3fcc, 0x0, 0x1);
        gbc.writeMem(0xfd5, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4b35);
        EXPECT(gbc.pc(), 0xfd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01D4
        gbc.setState(0x8945, 0xc0f2, 0x6840, 0x740c, 0x89af, 0xf8f2, 0x1, 0x0);
        gbc.writeMem(0x8945, { 0xfe, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc0f2);
        EXPECT(gbc.pc(), 0x8947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8945), 0xfe);
        EXPECT(gbc.readMem(0x8946), 0xa7);
        // FE 01D5
        gbc.setState(0x7126, 0xe02e, 0x17c0, 0x226e, 0x799, 0x1bfa, 0x0, 0x0);
        gbc.writeMem(0x7126, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe02e);
        EXPECT(gbc.pc(), 0x7128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01D6
        gbc.setState(0x84d2, 0xfbec, 0x1870, 0xe771, 0xce83, 0x73c6, 0x1, 0x0);
        gbc.writeMem(0x84d2, { 0xfe, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfbec);
        EXPECT(gbc.pc(), 0x84d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d2), 0xfe);
        EXPECT(gbc.readMem(0x84d3), 0x3f);
        // FE 01D7
        gbc.setState(0xe99d, 0xcb2c, 0x9010, 0x93fd, 0xfe9c, 0x7220, 0x1, 0x1);
        gbc.writeMem(0xe99d, { 0xfe, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcb2c);
        EXPECT(gbc.pc(), 0xe99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99d), 0xfe);
        EXPECT(gbc.readMem(0xe99e), 0x48);
        // FE 01D8
        gbc.setState(0xe33b, 0xd21f, 0x8140, 0x8f76, 0x7222, 0x8cab, 0x0, 0x1);
        gbc.writeMem(0xe33b, { 0xfe, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd21f);
        EXPECT(gbc.pc(), 0xe33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe33b), 0xfe);
        EXPECT(gbc.readMem(0xe33c), 0x21);
        // FE 01D9
        gbc.setState(0x1dcf, 0x1a80, 0x9990, 0x4bcc, 0xfa58, 0x9d23, 0x1, 0x1);
        gbc.writeMem(0x1dcf, { 0xfe, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1a80);
        EXPECT(gbc.pc(), 0x1dd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01DA
        gbc.setState(0xa5f2, 0x4999, 0xc940, 0xd65d, 0x350f, 0x35, 0x0, 0x0);
        gbc.writeMem(0xa5f2, { 0xfe, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4999);
        EXPECT(gbc.pc(), 0xa5f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f2), 0xfe);
        EXPECT(gbc.readMem(0xa5f3), 0xcc);
        // FE 01DB
        gbc.setState(0x115f, 0x9cfa, 0xa90, 0x94cb, 0x4424, 0x370, 0x0, 0x1);
        gbc.writeMem(0x115f, { 0xfe, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9cfa);
        EXPECT(gbc.pc(), 0x1161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01DC
        gbc.setState(0xbfc3, 0x32c, 0x9340, 0x2b7, 0x60d8, 0xfb86, 0x0, 0x1);
        gbc.writeMem(0xbfc3, { 0xfe, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x32c);
        EXPECT(gbc.pc(), 0xbfc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc3), 0xfe);
        EXPECT(gbc.readMem(0xbfc4), 0x89);
        // FE 01DD
        gbc.setState(0x7b18, 0xe0b5, 0x3130, 0x7605, 0xa661, 0x9f34, 0x1, 0x1);
        gbc.writeMem(0x7b18, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe0b5);
        EXPECT(gbc.pc(), 0x7b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01DE
        gbc.setState(0xe7b2, 0xb8b2, 0xa2d0, 0x79f0, 0x547b, 0xd712, 0x1, 0x1);
        gbc.writeMem(0xe7b2, { 0xfe, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb8b2);
        EXPECT(gbc.pc(), 0xe7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b2), 0xfe);
        EXPECT(gbc.readMem(0xe7b3), 0x20);
        // FE 01DF
        gbc.setState(0x1cc9, 0x7b95, 0x1ad0, 0xcb32, 0x6314, 0x2d9c, 0x0, 0x1);
        gbc.writeMem(0x1cc9, { 0xfe, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7b95);
        EXPECT(gbc.pc(), 0x1ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01E0
        gbc.setState(0x6928, 0x3b88, 0x2a10, 0x1d09, 0x10b7, 0x5679, 0x1, 0x0);
        gbc.writeMem(0x6928, { 0xfe, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3b88);
        EXPECT(gbc.pc(), 0x692a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01E1
        gbc.setState(0x84e3, 0x1de9, 0x2c80, 0x664c, 0x847c, 0x791c, 0x1, 0x1);
        gbc.writeMem(0x84e3, { 0xfe, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1de9);
        EXPECT(gbc.pc(), 0x84e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e3), 0xfe);
        EXPECT(gbc.readMem(0x84e4), 0xfb);
        // FE 01E2
        gbc.setState(0x7e38, 0xc729, 0xce30, 0x2c5e, 0x66fd, 0xeb4c, 0x1, 0x0);
        gbc.writeMem(0x7e38, { 0xfe, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc729);
        EXPECT(gbc.pc(), 0x7e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01E3
        gbc.setState(0x87d8, 0xba2e, 0x9ff0, 0x1d5c, 0x223f, 0xee1e, 0x1, 0x0);
        gbc.writeMem(0x87d8, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xba2e);
        EXPECT(gbc.pc(), 0x87da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d8), 0xfe);
        EXPECT(gbc.readMem(0x87d9), 0x60);
        // FE 01E4
        gbc.setState(0x5c80, 0x6cf5, 0x9540, 0xb042, 0xaae3, 0xebc0, 0x0, 0x0);
        gbc.writeMem(0x5c80, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6cf5);
        EXPECT(gbc.pc(), 0x5c82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01E5
        gbc.setState(0x7a14, 0x1864, 0x2e30, 0x2dd2, 0xc679, 0xfd3, 0x0, 0x0);
        gbc.writeMem(0x7a14, { 0xfe, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1864);
        EXPECT(gbc.pc(), 0x7a16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01E6
        gbc.setState(0x9f05, 0xf140, 0x34d0, 0xb9a5, 0x33c9, 0x7ec7, 0x0, 0x1);
        gbc.writeMem(0x9f05, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf140);
        EXPECT(gbc.pc(), 0x9f07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f05), 0xfe);
        EXPECT(gbc.readMem(0x9f06), 0x27);
        // FE 01E7
        gbc.setState(0xa4c7, 0x196e, 0x6020, 0x6c2a, 0x6ab5, 0x431a, 0x1, 0x1);
        gbc.writeMem(0xa4c7, { 0xfe, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x196e);
        EXPECT(gbc.pc(), 0xa4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c7), 0xfe);
        EXPECT(gbc.readMem(0xa4c8), 0x47);
        // FE 01E8
        gbc.setState(0xd40a, 0xa15a, 0x6f50, 0xa167, 0x229f, 0xc94a, 0x0, 0x0);
        gbc.writeMem(0xd40a, { 0xfe, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa15a);
        EXPECT(gbc.pc(), 0xd40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd40a), 0xfe);
        EXPECT(gbc.readMem(0xd40b), 0x13);
        // FE 01E9
        gbc.setState(0x4b44, 0xdd12, 0xb630, 0x2cad, 0x51c1, 0x1dd6, 0x0, 0x1);
        gbc.writeMem(0x4b44, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdd12);
        EXPECT(gbc.pc(), 0x4b46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01EA
        gbc.setState(0xbf21, 0xcbf3, 0x7440, 0x2f7b, 0x5b42, 0x2382, 0x0, 0x1);
        gbc.writeMem(0xbf21, { 0xfe, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcbf3);
        EXPECT(gbc.pc(), 0xbf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf21), 0xfe);
        EXPECT(gbc.readMem(0xbf22), 0x5b);
        // FE 01EB
        gbc.setState(0x2943, 0x66f6, 0xa200, 0x40ea, 0xd226, 0x3649, 0x1, 0x1);
        gbc.writeMem(0x2943, { 0xfe, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x66f6);
        EXPECT(gbc.pc(), 0x2945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01EC
        gbc.setState(0x86f0, 0x7c22, 0x2a00, 0x3b35, 0xe8a, 0x600d, 0x0, 0x0);
        gbc.writeMem(0x86f0, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7c22);
        EXPECT(gbc.pc(), 0x86f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f0), 0xfe);
        EXPECT(gbc.readMem(0x86f1), 0xb);
        // FE 01ED
        gbc.setState(0x4f6a, 0x749a, 0xa230, 0xb385, 0x3ee9, 0x4fe1, 0x1, 0x0);
        gbc.writeMem(0x4f6a, { 0xfe, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x749a);
        EXPECT(gbc.pc(), 0x4f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01EE
        gbc.setState(0xbe9b, 0x83b2, 0x3900, 0x91d1, 0x8e46, 0x2963, 0x0, 0x1);
        gbc.writeMem(0xbe9b, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x83b2);
        EXPECT(gbc.pc(), 0xbe9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9b), 0xfe);
        EXPECT(gbc.readMem(0xbe9c), 0x69);
        // FE 01EF
        gbc.setState(0xc350, 0x33d3, 0x9ad0, 0x1b25, 0xa29, 0x8238, 0x1, 0x0);
        gbc.writeMem(0xc350, { 0xfe, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x33d3);
        EXPECT(gbc.pc(), 0xc352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc350), 0xfe);
        EXPECT(gbc.readMem(0xc351), 0x30);
        // FE 01F0
        gbc.setState(0x9ca6, 0x3580, 0xc090, 0xf24f, 0x978, 0xe4a, 0x0, 0x0);
        gbc.writeMem(0x9ca6, { 0xfe, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3580);
        EXPECT(gbc.pc(), 0x9ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca6), 0xfe);
        EXPECT(gbc.readMem(0x9ca7), 0xe6);
        // FE 01F1
        gbc.setState(0x50d, 0x73ff, 0xadf0, 0xf852, 0xdf45, 0x21a1, 0x1, 0x0);
        gbc.writeMem(0x50d, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x73ff);
        EXPECT(gbc.pc(), 0x50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01F2
        gbc.setState(0xefdf, 0xe812, 0x79b0, 0x6395, 0xa27f, 0x455, 0x0, 0x1);
        gbc.writeMem(0xefdf, { 0xfe, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe812);
        EXPECT(gbc.pc(), 0xefe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefdf), 0xfe);
        EXPECT(gbc.readMem(0xefe0), 0xad);
        // FE 01F3
        gbc.setState(0x128d, 0x892e, 0x5b00, 0x3f3a, 0x5f84, 0xc20e, 0x0, 0x1);
        gbc.writeMem(0x128d, { 0xfe, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x892e);
        EXPECT(gbc.pc(), 0x128f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01F4
        gbc.setState(0xb320, 0xc9fb, 0xb5f0, 0xf0cc, 0x4e03, 0xc992, 0x0, 0x0);
        gbc.writeMem(0xb320, { 0xfe, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc9fb);
        EXPECT(gbc.pc(), 0xb322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb320), 0xfe);
        EXPECT(gbc.readMem(0xb321), 0x7d);
        // FE 01F5
        gbc.setState(0xa585, 0xc9ac, 0x4c30, 0xf850, 0x9752, 0xc91f, 0x0, 0x1);
        gbc.writeMem(0xa585, { 0xfe, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc9ac);
        EXPECT(gbc.pc(), 0xa587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa585), 0xfe);
        EXPECT(gbc.readMem(0xa586), 0xd3);
        // FE 01F6
        gbc.setState(0x2a26, 0x3206, 0xf3c0, 0xe48b, 0x73db, 0xea6c, 0x1, 0x1);
        gbc.writeMem(0x2a26, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3206);
        EXPECT(gbc.pc(), 0x2a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01F7
        gbc.setState(0x1403, 0xd5b3, 0x6fd0, 0xe1aa, 0xe6a6, 0x2332, 0x0, 0x1);
        gbc.writeMem(0x1403, { 0xfe, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd5b3);
        EXPECT(gbc.pc(), 0x1405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 01F8
        gbc.setState(0x314b, 0x35ec, 0x8a40, 0xc7cd, 0x374d, 0x37b4, 0x1, 0x0);
        gbc.writeMem(0x314b, { 0xfe, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x35ec);
        EXPECT(gbc.pc(), 0x314d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01FA
        gbc.setState(0x27ed, 0xaa0d, 0x8c90, 0x5c17, 0x72b9, 0xb7ee, 0x1, 0x1);
        gbc.writeMem(0x27ed, { 0xfe, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xaa0d);
        EXPECT(gbc.pc(), 0x27ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 01FB
        gbc.setState(0xcd48, 0x6758, 0xf740, 0xadd5, 0x43ba, 0x8935, 0x0, 0x0);
        gbc.writeMem(0xcd48, { 0xfe, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6758);
        EXPECT(gbc.pc(), 0xcd4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd48), 0xfe);
        EXPECT(gbc.readMem(0xcd49), 0xb4);
        // FE 01FC
        gbc.setState(0x1cd7, 0xd3da, 0x1f80, 0xb95e, 0x234a, 0xde30, 0x0, 0x0);
        gbc.writeMem(0x1cd7, { 0xfe, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd3da);
        EXPECT(gbc.pc(), 0x1cd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 01FD
        gbc.setState(0xdea3, 0x120b, 0x3600, 0x2477, 0xeb97, 0x1f56, 0x0, 0x1);
        gbc.writeMem(0xdea3, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x120b);
        EXPECT(gbc.pc(), 0xdea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea3), 0xfe);
        EXPECT(gbc.readMem(0xdea4), 0x69);
        // FE 01FE
        gbc.setState(0x982d, 0xe296, 0xf3a0, 0x7b60, 0x58e0, 0x5051, 0x1, 0x0);
        gbc.writeMem(0x982d, { 0xfe, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe296);
        EXPECT(gbc.pc(), 0x982f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982d), 0xfe);
        EXPECT(gbc.readMem(0x982e), 0xef);
        // FE 01FF
        gbc.setState(0x5d82, 0x66ab, 0x54b0, 0x7666, 0xc074, 0x63d3, 0x1, 0x0);
        gbc.writeMem(0x5d82, { 0xfe, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x66ab);
        EXPECT(gbc.pc(), 0x5d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0200
        gbc.setState(0xb9ac, 0x7f31, 0x66a0, 0x8ef7, 0x2d07, 0x8a8e, 0x0, 0x0);
        gbc.writeMem(0xb9ac, { 0xfe, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7f31);
        EXPECT(gbc.pc(), 0xb9ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9ac), 0xfe);
        EXPECT(gbc.readMem(0xb9ad), 0xb6);
        // FE 0201
        gbc.setState(0x2b6, 0x1945, 0x850, 0x9c38, 0x5b48, 0x807e, 0x0, 0x1);
        gbc.writeMem(0x2b6, { 0xfe, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1945);
        EXPECT(gbc.pc(), 0x2b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0202
        gbc.setState(0xc04f, 0x6f48, 0xee0, 0xd2a3, 0x2da3, 0xa356, 0x0, 0x1);
        gbc.writeMem(0xc04f, { 0xfe, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6f48);
        EXPECT(gbc.pc(), 0xc051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc04f), 0xfe);
        EXPECT(gbc.readMem(0xc050), 0xdc);
        // FE 0203
        gbc.setState(0x453f, 0x47d3, 0x1130, 0x6f, 0x1627, 0x1076, 0x1, 0x0);
        gbc.writeMem(0x453f, { 0xfe, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x47d3);
        EXPECT(gbc.pc(), 0x4541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0204
        gbc.setState(0xd500, 0x3fea, 0xc1e0, 0xc043, 0xde63, 0xde05, 0x0, 0x0);
        gbc.writeMem(0xd500, { 0xfe, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3fea);
        EXPECT(gbc.pc(), 0xd502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd500), 0xfe);
        EXPECT(gbc.readMem(0xd501), 0x8a);
        // FE 0205
        gbc.setState(0xcb06, 0xbf32, 0x9d0, 0xd21d, 0x91f3, 0x3bb9, 0x1, 0x1);
        gbc.writeMem(0xcb06, { 0xfe, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbf32);
        EXPECT(gbc.pc(), 0xcb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb06), 0xfe);
        EXPECT(gbc.readMem(0xcb07), 0xf);
        // FE 0206
        gbc.setState(0xa133, 0x5778, 0xc440, 0x994e, 0x8580, 0xfd3f, 0x0, 0x1);
        gbc.writeMem(0xa133, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5778);
        EXPECT(gbc.pc(), 0xa135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa133), 0xfe);
        EXPECT(gbc.readMem(0xa134), 0x81);
        // FE 0207
        gbc.setState(0xbc6f, 0x606b, 0xf280, 0xb414, 0xc038, 0x39a4, 0x1, 0x1);
        gbc.writeMem(0xbc6f, { 0xfe, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x606b);
        EXPECT(gbc.pc(), 0xbc71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6f), 0xfe);
        EXPECT(gbc.readMem(0xbc70), 0x66);
        // FE 0208
        gbc.setState(0x89b0, 0xc459, 0x1ba0, 0x6238, 0xd8c5, 0x4423, 0x0, 0x1);
        gbc.writeMem(0x89b0, { 0xfe, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc459);
        EXPECT(gbc.pc(), 0x89b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b0), 0xfe);
        EXPECT(gbc.readMem(0x89b1), 0x33);
        // FE 0209
        gbc.setState(0x3c93, 0xf15f, 0x7100, 0x34d2, 0x1351, 0x7dc4, 0x1, 0x0);
        gbc.writeMem(0x3c93, { 0xfe, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf15f);
        EXPECT(gbc.pc(), 0x3c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 020A
        gbc.setState(0xa3ce, 0x2fa3, 0xfa40, 0xb9d8, 0x3351, 0xcb01, 0x0, 0x0);
        gbc.writeMem(0xa3ce, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2fa3);
        EXPECT(gbc.pc(), 0xa3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ce), 0xfe);
        EXPECT(gbc.readMem(0xa3cf), 0x69);
        // FE 020B
        gbc.setState(0xdc74, 0xe17d, 0x5f70, 0x123f, 0x77bd, 0x12d5, 0x1, 0x0);
        gbc.writeMem(0xdc74, { 0xfe, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe17d);
        EXPECT(gbc.pc(), 0xdc76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc74), 0xfe);
        EXPECT(gbc.readMem(0xdc75), 0x4b);
        // FE 020C
        gbc.setState(0xd7a5, 0xffea, 0x1ff0, 0x81b9, 0xdeed, 0xfd8, 0x1, 0x1);
        gbc.writeMem(0xd7a5, { 0xfe, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xffea);
        EXPECT(gbc.pc(), 0xd7a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a5), 0xfe);
        EXPECT(gbc.readMem(0xd7a6), 0x77);
        // FE 020D
        gbc.setState(0xb93c, 0x57d1, 0x1fd0, 0x8779, 0xaf11, 0xff92, 0x0, 0x0);
        gbc.writeMem(0xb93c, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x57d1);
        EXPECT(gbc.pc(), 0xb93e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93c), 0xfe);
        EXPECT(gbc.readMem(0xb93d), 0xb);
        // FE 020F
        gbc.setState(0x96d1, 0xd6d8, 0xd3d0, 0x680d, 0xbf3a, 0xa308, 0x0, 0x0);
        gbc.writeMem(0x96d1, { 0xfe, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd6d8);
        EXPECT(gbc.pc(), 0x96d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d1), 0xfe);
        EXPECT(gbc.readMem(0x96d2), 0xb5);
        // FE 0210
        gbc.setState(0x1927, 0x1535, 0xa490, 0xabe5, 0x9cf3, 0x81b3, 0x0, 0x0);
        gbc.writeMem(0x1927, { 0xfe, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1535);
        EXPECT(gbc.pc(), 0x1929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0211
        gbc.setState(0x7e92, 0x5262, 0xb680, 0x4b56, 0xabb9, 0x961f, 0x0, 0x0);
        gbc.writeMem(0x7e92, { 0xfe, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5262);
        EXPECT(gbc.pc(), 0x7e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0212
        gbc.setState(0xd7cf, 0x8de2, 0x6420, 0xaa71, 0x88f5, 0x32c7, 0x1, 0x1);
        gbc.writeMem(0xd7cf, { 0xfe, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8de2);
        EXPECT(gbc.pc(), 0xd7d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7cf), 0xfe);
        EXPECT(gbc.readMem(0xd7d0), 0x8);
        // FE 0213
        gbc.setState(0x47fe, 0xf8a8, 0xb4f0, 0xe1c3, 0xb926, 0x4a55, 0x0, 0x1);
        gbc.writeMem(0x47fe, { 0xfe, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf8a8);
        EXPECT(gbc.pc(), 0x4800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0214
        gbc.setState(0x752b, 0x26d6, 0x9310, 0x1b23, 0x7421, 0x681c, 0x1, 0x1);
        gbc.writeMem(0x752b, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x26d6);
        EXPECT(gbc.pc(), 0x752d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0215
        gbc.setState(0x96a0, 0x4ca0, 0x9910, 0x674f, 0x1fdb, 0x5895, 0x1, 0x0);
        gbc.writeMem(0x96a0, { 0xfe, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4ca0);
        EXPECT(gbc.pc(), 0x96a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a0), 0xfe);
        EXPECT(gbc.readMem(0x96a1), 0x37);
        // FE 0216
        gbc.setState(0x492, 0x18a7, 0x6540, 0x147d, 0x263e, 0xf348, 0x0, 0x0);
        gbc.writeMem(0x492, { 0xfe, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x18a7);
        EXPECT(gbc.pc(), 0x494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0217
        gbc.setState(0x4c5, 0x3f4b, 0xb370, 0x53d7, 0xdccd, 0x7e0e, 0x0, 0x1);
        gbc.writeMem(0x4c5, { 0xfe, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3f4b);
        EXPECT(gbc.pc(), 0x4c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0218
        gbc.setState(0xeaa9, 0xe7be, 0x9480, 0x27fe, 0xcbea, 0x8f2d, 0x0, 0x1);
        gbc.writeMem(0xeaa9, { 0xfe, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe7be);
        EXPECT(gbc.pc(), 0xeaab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa9), 0xfe);
        EXPECT(gbc.readMem(0xeaaa), 0x3f);
        // FE 0219
        gbc.setState(0xe483, 0x77ef, 0xd4f0, 0x4f4d, 0xc474, 0x9b0f, 0x1, 0x1);
        gbc.writeMem(0xe483, { 0xfe, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x77ef);
        EXPECT(gbc.pc(), 0xe485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe483), 0xfe);
        EXPECT(gbc.readMem(0xe484), 0x68);
        // FE 021A
        gbc.setState(0xd136, 0xce80, 0x7670, 0x33f9, 0x9eff, 0x7b5e, 0x1, 0x0);
        gbc.writeMem(0xd136, { 0xfe, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xce80);
        EXPECT(gbc.pc(), 0xd138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd136), 0xfe);
        EXPECT(gbc.readMem(0xd137), 0xc9);
        // FE 021B
        gbc.setState(0xbd91, 0x8e74, 0xe410, 0x5039, 0xa2b1, 0xf83d, 0x1, 0x0);
        gbc.writeMem(0xbd91, { 0xfe, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8e74);
        EXPECT(gbc.pc(), 0xbd93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd91), 0xfe);
        EXPECT(gbc.readMem(0xbd92), 0xa4);
        // FE 021C
        gbc.setState(0x6cef, 0xc984, 0xd060, 0xcaf3, 0x18eb, 0xd5c3, 0x0, 0x1);
        gbc.writeMem(0x6cef, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc984);
        EXPECT(gbc.pc(), 0x6cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 021D
        gbc.setState(0x3246, 0x7a70, 0x8de0, 0xb235, 0xc220, 0x5033, 0x1, 0x0);
        gbc.writeMem(0x3246, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7a70);
        EXPECT(gbc.pc(), 0x3248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 021E
        gbc.setState(0x66f4, 0xb0ea, 0x9860, 0xe882, 0xfc19, 0x4e4d, 0x0, 0x0);
        gbc.writeMem(0x66f4, { 0xfe, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb0ea);
        EXPECT(gbc.pc(), 0x66f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 021F
        gbc.setState(0xcea8, 0x58e0, 0xc0d0, 0x3e13, 0x342, 0x71d6, 0x0, 0x0);
        gbc.writeMem(0xcea8, { 0xfe, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x58e0);
        EXPECT(gbc.pc(), 0xceaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcea8), 0xfe);
        EXPECT(gbc.readMem(0xcea9), 0xca);
        // FE 0220
        gbc.setState(0x305, 0xff31, 0xc420, 0x2da6, 0x3620, 0x1294, 0x1, 0x0);
        gbc.writeMem(0x305, { 0xfe, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xff31);
        EXPECT(gbc.pc(), 0x307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0221
        gbc.setState(0x2e06, 0x5a6f, 0xf0c0, 0x961f, 0xc245, 0x4ef1, 0x1, 0x0);
        gbc.writeMem(0x2e06, { 0xfe, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5a6f);
        EXPECT(gbc.pc(), 0x2e08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0222
        gbc.setState(0x4093, 0x9884, 0xaff0, 0x97e6, 0xf3cb, 0xdb13, 0x0, 0x1);
        gbc.writeMem(0x4093, { 0xfe, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9884);
        EXPECT(gbc.pc(), 0x4095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0223
        gbc.setState(0x67e0, 0x9a29, 0xada0, 0xb91f, 0x7a4b, 0xa59c, 0x1, 0x0);
        gbc.writeMem(0x67e0, { 0xfe, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9a29);
        EXPECT(gbc.pc(), 0x67e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0224
        gbc.setState(0x9c8c, 0x85e5, 0xadb0, 0x6fe6, 0x63d2, 0x81a6, 0x1, 0x1);
        gbc.writeMem(0x9c8c, { 0xfe, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0x9c8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c8c), 0xfe);
        EXPECT(gbc.readMem(0x9c8d), 0xd0);
        // FE 0225
        gbc.setState(0x4188, 0xe838, 0xfbf0, 0x5965, 0x74ea, 0x50d, 0x0, 0x0);
        gbc.writeMem(0x4188, { 0xfe, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe838);
        EXPECT(gbc.pc(), 0x418a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0226
        gbc.setState(0xd8e3, 0xde83, 0x5c70, 0x41d4, 0x88f5, 0xfc8d, 0x0, 0x0);
        gbc.writeMem(0xd8e3, { 0xfe, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xde83);
        EXPECT(gbc.pc(), 0xd8e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e3), 0xfe);
        EXPECT(gbc.readMem(0xd8e4), 0xf);
        // FE 0227
        gbc.setState(0xc2f3, 0x2ca4, 0xcec0, 0x5018, 0x441f, 0xf7f9, 0x1, 0x1);
        gbc.writeMem(0xc2f3, { 0xfe, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2ca4);
        EXPECT(gbc.pc(), 0xc2f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f3), 0xfe);
        EXPECT(gbc.readMem(0xc2f4), 0xb9);
        // FE 0228
        gbc.setState(0x49c2, 0x273f, 0xe580, 0x8007, 0x751a, 0xbed0, 0x1, 0x1);
        gbc.writeMem(0x49c2, { 0xfe, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x273f);
        EXPECT(gbc.pc(), 0x49c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0229
        gbc.setState(0xab5, 0xc9d0, 0xf720, 0xea50, 0xb7ad, 0xcf32, 0x0, 0x1);
        gbc.writeMem(0xab5, { 0xfe, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc9d0);
        EXPECT(gbc.pc(), 0xab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 022B
        gbc.setState(0xa608, 0x1893, 0x99e0, 0x4cd3, 0xb398, 0x40b1, 0x0, 0x0);
        gbc.writeMem(0xa608, { 0xfe, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1893);
        EXPECT(gbc.pc(), 0xa60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa608), 0xfe);
        EXPECT(gbc.readMem(0xa609), 0xe);
        // FE 022C
        gbc.setState(0x3878, 0xb71e, 0x1ca0, 0xcf3b, 0xfdec, 0x3be3, 0x0, 0x0);
        gbc.writeMem(0x3878, { 0xfe, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb71e);
        EXPECT(gbc.pc(), 0x387a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 022D
        gbc.setState(0xad, 0x35a5, 0x7450, 0x7d24, 0x2e24, 0x35bc, 0x1, 0x0);
        gbc.writeMem(0xad, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x35a5);
        EXPECT(gbc.pc(), 0xaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 022E
        gbc.setState(0x3fc3, 0x6875, 0x3200, 0x6a98, 0xa00d, 0x8a18, 0x1, 0x1);
        gbc.writeMem(0x3fc3, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6875);
        EXPECT(gbc.pc(), 0x3fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 022F
        gbc.setState(0xd2ec, 0x1168, 0xc780, 0x7ac5, 0xae7f, 0x11a8, 0x0, 0x0);
        gbc.writeMem(0xd2ec, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x1168);
        EXPECT(gbc.pc(), 0xd2ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ec), 0xfe);
        EXPECT(gbc.readMem(0xd2ed), 0xd7);
        // FE 0230
        gbc.setState(0x4cbb, 0x3d41, 0x7340, 0x1635, 0x2244, 0xed55, 0x1, 0x0);
        gbc.writeMem(0x4cbb, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3d41);
        EXPECT(gbc.pc(), 0x4cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0232
        gbc.setState(0x7475, 0xc463, 0x30, 0x888f, 0xad36, 0xee87, 0x1, 0x1);
        gbc.writeMem(0x7475, { 0xfe, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc463);
        EXPECT(gbc.pc(), 0x7477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0233
        gbc.setState(0xfa5, 0x863, 0x3e40, 0xb1c, 0xe03c, 0xc5cc, 0x1, 0x1);
        gbc.writeMem(0xfa5, { 0xfe, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x863);
        EXPECT(gbc.pc(), 0xfa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0234
        gbc.setState(0xdb9, 0xc692, 0x3420, 0x1ca6, 0x72e9, 0x5e01, 0x0, 0x0);
        gbc.writeMem(0xdb9, { 0xfe, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc692);
        EXPECT(gbc.pc(), 0xdbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0235
        gbc.setState(0x8589, 0xc681, 0x3840, 0xca4e, 0x451c, 0x72f1, 0x1, 0x1);
        gbc.writeMem(0x8589, { 0xfe, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc681);
        EXPECT(gbc.pc(), 0x858b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8589), 0xfe);
        EXPECT(gbc.readMem(0x858a), 0xa5);
        // FE 0236
        gbc.setState(0x98e7, 0x14a8, 0x6260, 0x9f82, 0x756d, 0xb718, 0x1, 0x0);
        gbc.writeMem(0x98e7, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x14a8);
        EXPECT(gbc.pc(), 0x98e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e7), 0xfe);
        EXPECT(gbc.readMem(0x98e8), 0xb);
        // FE 0237
        gbc.setState(0x4c76, 0x488, 0x5860, 0xe7b, 0x4d67, 0x490f, 0x0, 0x0);
        gbc.writeMem(0x4c76, { 0xfe, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x488);
        EXPECT(gbc.pc(), 0x4c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0238
        gbc.setState(0xde24, 0x6676, 0x2540, 0x1627, 0x4dc9, 0xac81, 0x0, 0x0);
        gbc.writeMem(0xde24, { 0xfe, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6676);
        EXPECT(gbc.pc(), 0xde26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde24), 0xfe);
        EXPECT(gbc.readMem(0xde25), 0xe1);
        // FE 0239
        gbc.setState(0x9f7d, 0x9ffe, 0xf250, 0xc01a, 0x4bf9, 0x2931, 0x0, 0x0);
        gbc.writeMem(0x9f7d, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9ffe);
        EXPECT(gbc.pc(), 0x9f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f7d), 0xfe);
        EXPECT(gbc.readMem(0x9f7e), 0xea);
        // FE 023A
        gbc.setState(0x92a0, 0x108, 0xbe10, 0xed84, 0x6438, 0xca1c, 0x0, 0x0);
        gbc.writeMem(0x92a0, { 0xfe, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x108);
        EXPECT(gbc.pc(), 0x92a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a0), 0xfe);
        EXPECT(gbc.readMem(0x92a1), 0xee);
        // FE 023B
        gbc.setState(0xbcd0, 0x6ca3, 0xed0, 0xdba5, 0xf3f5, 0x482f, 0x0, 0x1);
        gbc.writeMem(0xbcd0, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6ca3);
        EXPECT(gbc.pc(), 0xbcd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcd0), 0xfe);
        EXPECT(gbc.readMem(0xbcd1), 0x19);
        // FE 023C
        gbc.setState(0x9cb3, 0xd517, 0xab70, 0xda41, 0x561d, 0xfa9d, 0x1, 0x0);
        gbc.writeMem(0x9cb3, { 0xfe, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd517);
        EXPECT(gbc.pc(), 0x9cb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb3), 0xfe);
        EXPECT(gbc.readMem(0x9cb4), 0xdb);
        // FE 023D
        gbc.setState(0x5646, 0x6e6c, 0x8a10, 0x3f58, 0x67f2, 0xd5ca, 0x0, 0x1);
        gbc.writeMem(0x5646, { 0xfe, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6e6c);
        EXPECT(gbc.pc(), 0x5648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 023E
        gbc.setState(0x7562, 0x978a, 0xc120, 0xc1ae, 0x1501, 0xd7d0, 0x1, 0x0);
        gbc.writeMem(0x7562, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x978a);
        EXPECT(gbc.pc(), 0x7564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 023F
        gbc.setState(0x61a1, 0xf97e, 0xaac0, 0x759a, 0xe2f4, 0xf33, 0x1, 0x1);
        gbc.writeMem(0x61a1, { 0xfe, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf97e);
        EXPECT(gbc.pc(), 0x61a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0240
        gbc.setState(0x5655, 0xc2f9, 0x4ab0, 0x255, 0x35ae, 0xa62e, 0x0, 0x0);
        gbc.writeMem(0x5655, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc2f9);
        EXPECT(gbc.pc(), 0x5657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0241
        gbc.setState(0xa52b, 0x5d59, 0x1740, 0x471, 0x4162, 0x97a, 0x1, 0x0);
        gbc.writeMem(0xa52b, { 0xfe, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5d59);
        EXPECT(gbc.pc(), 0xa52d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa52b), 0xfe);
        EXPECT(gbc.readMem(0xa52c), 0x13);
        // FE 0242
        gbc.setState(0x509b, 0xd1d7, 0xae40, 0x36c9, 0x8f36, 0xeb9b, 0x1, 0x1);
        gbc.writeMem(0x509b, { 0xfe, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd1d7);
        EXPECT(gbc.pc(), 0x509d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0243
        gbc.setState(0xae3c, 0x70fb, 0xae20, 0x6fec, 0xe4af, 0x9572, 0x1, 0x0);
        gbc.writeMem(0xae3c, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x70fb);
        EXPECT(gbc.pc(), 0xae3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3c), 0xfe);
        EXPECT(gbc.readMem(0xae3d), 0x88);
        // FE 0245
        gbc.setState(0x6319, 0x1be6, 0x2370, 0x2c6d, 0xf64, 0xbf68, 0x1, 0x1);
        gbc.writeMem(0x6319, { 0xfe, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1be6);
        EXPECT(gbc.pc(), 0x631b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0246
        gbc.setState(0x6d0f, 0xbbea, 0x6af0, 0x191a, 0x6d4d, 0x6f6c, 0x1, 0x1);
        gbc.writeMem(0x6d0f, { 0xfe, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbbea);
        EXPECT(gbc.pc(), 0x6d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0247
        gbc.setState(0xd36d, 0xe8bd, 0x680, 0x525f, 0x8016, 0x2580, 0x0, 0x1);
        gbc.writeMem(0xd36d, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe8bd);
        EXPECT(gbc.pc(), 0xd36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd36d), 0xfe);
        EXPECT(gbc.readMem(0xd36e), 0xd9);
        // FE 0248
        gbc.setState(0xe86f, 0x79f0, 0x3530, 0x79e1, 0x1c60, 0xc417, 0x0, 0x0);
        gbc.writeMem(0xe86f, { 0xfe, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x79f0);
        EXPECT(gbc.pc(), 0xe871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe86f), 0xfe);
        EXPECT(gbc.readMem(0xe870), 0xeb);
        // FE 024A
        gbc.setState(0x8b50, 0x17cc, 0xe0f0, 0x480, 0x697d, 0x11f4, 0x1, 0x1);
        gbc.writeMem(0x8b50, { 0xfe, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x17cc);
        EXPECT(gbc.pc(), 0x8b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b50), 0xfe);
        EXPECT(gbc.readMem(0x8b51), 0xa2);
        // FE 024B
        gbc.setState(0x54f3, 0x68d7, 0x94a0, 0xcc6a, 0x8e58, 0xc77c, 0x1, 0x1);
        gbc.writeMem(0x54f3, { 0xfe, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x68d7);
        EXPECT(gbc.pc(), 0x54f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 024C
        gbc.setState(0x8bd, 0x6584, 0xcf0, 0xc9f3, 0x4a7d, 0xc7bb, 0x1, 0x1);
        gbc.writeMem(0x8bd, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6584);
        EXPECT(gbc.pc(), 0x8bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 024D
        gbc.setState(0x32f5, 0x8014, 0xfe00, 0x39f8, 0x651e, 0xbfd2, 0x1, 0x0);
        gbc.writeMem(0x32f5, { 0xfe, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8014);
        EXPECT(gbc.pc(), 0x32f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 024E
        gbc.setState(0xef7d, 0x3ee0, 0x1110, 0xb21d, 0x427, 0x2880, 0x0, 0x1);
        gbc.writeMem(0xef7d, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3ee0);
        EXPECT(gbc.pc(), 0xef7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef7d), 0xfe);
        EXPECT(gbc.readMem(0xef7e), 0xd7);
        // FE 024F
        gbc.setState(0x5e13, 0xc381, 0xe020, 0x58a2, 0xe38, 0x2fd3, 0x1, 0x0);
        gbc.writeMem(0x5e13, { 0xfe, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc381);
        EXPECT(gbc.pc(), 0x5e15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0250
        gbc.setState(0x5314, 0x6ea3, 0xb600, 0x95b, 0x8848, 0x18c3, 0x1, 0x0);
        gbc.writeMem(0x5314, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6ea3);
        EXPECT(gbc.pc(), 0x5316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0251
        gbc.setState(0x1b5d, 0xde83, 0xeed0, 0x2ea5, 0x2ae8, 0x2092, 0x1, 0x1);
        gbc.writeMem(0x1b5d, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xde83);
        EXPECT(gbc.pc(), 0x1b5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0252
        gbc.setState(0x8723, 0x8fc3, 0x8640, 0x2436, 0xf2f7, 0x88fa, 0x0, 0x1);
        gbc.writeMem(0x8723, { 0xfe, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8fc3);
        EXPECT(gbc.pc(), 0x8725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8723), 0xfe);
        EXPECT(gbc.readMem(0x8724), 0x40);
        // FE 0253
        gbc.setState(0x28c7, 0x184c, 0x68c0, 0xccd9, 0x73c5, 0x7864, 0x0, 0x0);
        gbc.writeMem(0x28c7, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x184c);
        EXPECT(gbc.pc(), 0x28c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0254
        gbc.setState(0x3695, 0x3dfe, 0x47e0, 0xecd8, 0xf6b7, 0x3c57, 0x1, 0x0);
        gbc.writeMem(0x3695, { 0xfe, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3dfe);
        EXPECT(gbc.pc(), 0x3697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0255
        gbc.setState(0xa5be, 0x2386, 0x87a0, 0xa7a0, 0x3465, 0x5eb3, 0x0, 0x1);
        gbc.writeMem(0xa5be, { 0xfe, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2386);
        EXPECT(gbc.pc(), 0xa5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5be), 0xfe);
        EXPECT(gbc.readMem(0xa5bf), 0x34);
        // FE 0256
        gbc.setState(0xb25c, 0x77eb, 0xc480, 0xda2a, 0xffc4, 0x721d, 0x0, 0x1);
        gbc.writeMem(0xb25c, { 0xfe, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x77eb);
        EXPECT(gbc.pc(), 0xb25e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb25c), 0xfe);
        EXPECT(gbc.readMem(0xb25d), 0x2a);
        // FE 0257
        gbc.setState(0x15a2, 0xfd09, 0xb8c0, 0xe292, 0xcb1d, 0x6379, 0x1, 0x0);
        gbc.writeMem(0x15a2, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfd09);
        EXPECT(gbc.pc(), 0x15a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0259
        gbc.setState(0x8c59, 0x25be, 0x89e0, 0xf4c4, 0x3c6, 0x14d2, 0x1, 0x1);
        gbc.writeMem(0x8c59, { 0xfe, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x25be);
        EXPECT(gbc.pc(), 0x8c5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c59), 0xfe);
        EXPECT(gbc.readMem(0x8c5a), 0xd0);
        // FE 025A
        gbc.setState(0x72d, 0x53bc, 0x5b10, 0xe75f, 0xa4c3, 0x1e3f, 0x1, 0x0);
        gbc.writeMem(0x72d, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x53bc);
        EXPECT(gbc.pc(), 0x72f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 025B
        gbc.setState(0xcc19, 0xcc98, 0xc3e0, 0x2228, 0x5c27, 0x8909, 0x0, 0x1);
        gbc.writeMem(0xcc19, { 0xfe, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xcc98);
        EXPECT(gbc.pc(), 0xcc1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc19), 0xfe);
        EXPECT(gbc.readMem(0xcc1a), 0xa0);
        // FE 025C
        gbc.setState(0x4da1, 0x896e, 0x7070, 0x8e88, 0xdf91, 0xe7ce, 0x1, 0x1);
        gbc.writeMem(0x4da1, { 0xfe, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x896e);
        EXPECT(gbc.pc(), 0x4da3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 025D
        gbc.setState(0x2fd0, 0x2885, 0xaa20, 0x1dce, 0xfc39, 0xcc93, 0x0, 0x1);
        gbc.writeMem(0x2fd0, { 0xfe, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2885);
        EXPECT(gbc.pc(), 0x2fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 025E
        gbc.setState(0x4b51, 0x2e23, 0xc120, 0x160f, 0xd9be, 0x34a6, 0x0, 0x0);
        gbc.writeMem(0x4b51, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2e23);
        EXPECT(gbc.pc(), 0x4b53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0260
        gbc.setState(0x4688, 0xf806, 0xec70, 0x5823, 0x341, 0x9e18, 0x1, 0x1);
        gbc.writeMem(0x4688, { 0xfe, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf806);
        EXPECT(gbc.pc(), 0x468a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0261
        gbc.setState(0x2f06, 0xc3ec, 0x29f0, 0xe6a9, 0x5d2d, 0x581e, 0x0, 0x1);
        gbc.writeMem(0x2f06, { 0xfe, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc3ec);
        EXPECT(gbc.pc(), 0x2f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0262
        gbc.setState(0x8965, 0x6557, 0x39d0, 0xa722, 0x9ada, 0x6219, 0x0, 0x0);
        gbc.writeMem(0x8965, { 0xfe, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6557);
        EXPECT(gbc.pc(), 0x8967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8965), 0xfe);
        EXPECT(gbc.readMem(0x8966), 0x2b);
        // FE 0263
        gbc.setState(0x7f90, 0x15b8, 0x5a20, 0xf736, 0x8d5b, 0xb70d, 0x0, 0x1);
        gbc.writeMem(0x7f90, { 0xfe, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x15b8);
        EXPECT(gbc.pc(), 0x7f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0264
        gbc.setState(0x5a4b, 0xd0cc, 0xbe60, 0x19a2, 0xab29, 0x6ab, 0x0, 0x1);
        gbc.writeMem(0x5a4b, { 0xfe, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd0cc);
        EXPECT(gbc.pc(), 0x5a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0265
        gbc.setState(0xaeb5, 0x6cc6, 0xa780, 0xa1ac, 0x4bc5, 0x9107, 0x0, 0x0);
        gbc.writeMem(0xaeb5, { 0xfe, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6cc6);
        EXPECT(gbc.pc(), 0xaeb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb5), 0xfe);
        EXPECT(gbc.readMem(0xaeb6), 0x64);
        // FE 0266
        gbc.setState(0xcf84, 0xf71, 0xca50, 0xf3f, 0xb09f, 0x82a5, 0x1, 0x0);
        gbc.writeMem(0xcf84, { 0xfe, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf71);
        EXPECT(gbc.pc(), 0xcf86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf84), 0xfe);
        EXPECT(gbc.readMem(0xcf85), 0x7b);
        // FE 0267
        gbc.setState(0x160a, 0x1c30, 0xba80, 0x90a4, 0xb524, 0xf145, 0x1, 0x0);
        gbc.writeMem(0x160a, { 0xfe, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1c30);
        EXPECT(gbc.pc(), 0x160c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0268
        gbc.setState(0x520e, 0x5daa, 0xf1b0, 0x59a8, 0x504f, 0xc58c, 0x1, 0x0);
        gbc.writeMem(0x520e, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5daa);
        EXPECT(gbc.pc(), 0x5210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0269
        gbc.setState(0x222d, 0xd5c7, 0x3510, 0xa41d, 0xb5d6, 0x8580, 0x0, 0x1);
        gbc.writeMem(0x222d, { 0xfe, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd5c7);
        EXPECT(gbc.pc(), 0x222f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 026B
        gbc.setState(0xde0b, 0x1bf0, 0x8cc0, 0xce92, 0x5498, 0xbf40, 0x0, 0x0);
        gbc.writeMem(0xde0b, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1bf0);
        EXPECT(gbc.pc(), 0xde0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0b), 0xfe);
        EXPECT(gbc.readMem(0xde0c), 0x1f);
        // FE 026C
        gbc.setState(0x82f6, 0x2a98, 0x8270, 0x7618, 0xe18, 0xd510, 0x0, 0x1);
        gbc.writeMem(0x82f6, { 0xfe, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2a98);
        EXPECT(gbc.pc(), 0x82f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82f6), 0xfe);
        EXPECT(gbc.readMem(0x82f7), 0x7a);
        // FE 026D
        gbc.setState(0x6207, 0x91bb, 0x7210, 0x155a, 0x50ee, 0x5b09, 0x1, 0x0);
        gbc.writeMem(0x6207, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x91bb);
        EXPECT(gbc.pc(), 0x6209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 026E
        gbc.setState(0x2f83, 0xaf21, 0xd880, 0xeed6, 0x3b7e, 0xdd6b, 0x0, 0x1);
        gbc.writeMem(0x2f83, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xaf21);
        EXPECT(gbc.pc(), 0x2f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 026F
        gbc.setState(0xb0b8, 0x95aa, 0x5fc0, 0x2a0c, 0xec79, 0xeb8e, 0x0, 0x0);
        gbc.writeMem(0xb0b8, { 0xfe, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x95aa);
        EXPECT(gbc.pc(), 0xb0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b8), 0xfe);
        EXPECT(gbc.readMem(0xb0b9), 0x97);
        // FE 0270
        gbc.setState(0xd88c, 0x9382, 0x5c50, 0x548d, 0xdae7, 0xc0a4, 0x1, 0x0);
        gbc.writeMem(0xd88c, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9382);
        EXPECT(gbc.pc(), 0xd88e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88c), 0xfe);
        EXPECT(gbc.readMem(0xd88d), 0x10);
        // FE 0271
        gbc.setState(0x8732, 0x4d21, 0xab00, 0x128a, 0x377, 0x26c7, 0x1, 0x0);
        gbc.writeMem(0x8732, { 0xfe, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4d21);
        EXPECT(gbc.pc(), 0x8734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8732), 0xfe);
        EXPECT(gbc.readMem(0x8733), 0x9a);
        // FE 0272
        gbc.setState(0x297, 0x63f4, 0xb110, 0x741a, 0x7d40, 0x600e, 0x0, 0x1);
        gbc.writeMem(0x297, { 0xfe, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x63f4);
        EXPECT(gbc.pc(), 0x299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0273
        gbc.setState(0x517f, 0x161a, 0xf440, 0x7124, 0xd068, 0xb559, 0x1, 0x1);
        gbc.writeMem(0x517f, { 0xfe, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x161a);
        EXPECT(gbc.pc(), 0x5181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0274
        gbc.setState(0x879, 0x5537, 0x1620, 0x126a, 0x21cf, 0x2d51, 0x0, 0x0);
        gbc.writeMem(0x879, { 0xfe, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5537);
        EXPECT(gbc.pc(), 0x87b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0275
        gbc.setState(0x828, 0x7455, 0x7740, 0x1f8f, 0xc5c3, 0x43a0, 0x1, 0x0);
        gbc.writeMem(0x828, { 0xfe, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7455);
        EXPECT(gbc.pc(), 0x82a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0276
        gbc.setState(0xa1a5, 0xe354, 0xdce0, 0x8ffd, 0xf127, 0x42be, 0x0, 0x1);
        gbc.writeMem(0xa1a5, { 0xfe, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe354);
        EXPECT(gbc.pc(), 0xa1a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a5), 0xfe);
        EXPECT(gbc.readMem(0xa1a6), 0xd0);
        // FE 0277
        gbc.setState(0x94de, 0xa54b, 0xe4c0, 0x4ce6, 0xb51b, 0xd5c0, 0x0, 0x1);
        gbc.writeMem(0x94de, { 0xfe, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa54b);
        EXPECT(gbc.pc(), 0x94e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94de), 0xfe);
        EXPECT(gbc.readMem(0x94df), 0x79);
        // FE 0278
        gbc.setState(0x3a37, 0x5cfa, 0xc560, 0x6f17, 0xfe08, 0xd9cf, 0x1, 0x1);
        gbc.writeMem(0x3a37, { 0xfe, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5cfa);
        EXPECT(gbc.pc(), 0x3a39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 027A
        gbc.setState(0x7000, 0x5e60, 0x1250, 0xd51a, 0xa78b, 0x219b, 0x1, 0x0);
        gbc.writeMem(0x7000, { 0xfe, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5e60);
        EXPECT(gbc.pc(), 0x7002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 027B
        gbc.setState(0xdb25, 0x2705, 0x1140, 0xfb46, 0xd8e8, 0xf4e9, 0x0, 0x0);
        gbc.writeMem(0xdb25, { 0xfe, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2705);
        EXPECT(gbc.pc(), 0xdb27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb25), 0xfe);
        EXPECT(gbc.readMem(0xdb26), 0x60);
        // FE 027C
        gbc.setState(0x99b7, 0x30d2, 0x7050, 0xd936, 0xb22e, 0xb255, 0x0, 0x0);
        gbc.writeMem(0x99b7, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x30d2);
        EXPECT(gbc.pc(), 0x99b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b7), 0xfe);
        EXPECT(gbc.readMem(0x99b8), 0xd7);
        // FE 027E
        gbc.setState(0x74eb, 0x82cd, 0xcd90, 0x3413, 0x10a, 0x85d6, 0x0, 0x0);
        gbc.writeMem(0x74eb, { 0xfe, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x82cd);
        EXPECT(gbc.pc(), 0x74ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 027F
        gbc.setState(0xa1ef, 0x9992, 0xf1d0, 0x39ed, 0xa8fc, 0x327, 0x0, 0x0);
        gbc.writeMem(0xa1ef, { 0xfe, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9992);
        EXPECT(gbc.pc(), 0xa1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ef), 0xfe);
        EXPECT(gbc.readMem(0xa1f0), 0x14);
        // FE 0280
        gbc.setState(0x8c93, 0x5f5c, 0xa360, 0x2b43, 0xa474, 0x9eee, 0x0, 0x0);
        gbc.writeMem(0x8c93, { 0xfe, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5f5c);
        EXPECT(gbc.pc(), 0x8c95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c93), 0xfe);
        EXPECT(gbc.readMem(0x8c94), 0x99);
        // FE 0281
        gbc.setState(0xb564, 0xb41c, 0x5260, 0xe5fe, 0x91c, 0x9d74, 0x0, 0x0);
        gbc.writeMem(0xb564, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb41c);
        EXPECT(gbc.pc(), 0xb566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb564), 0xfe);
        EXPECT(gbc.readMem(0xb565), 0x86);
        // FE 0282
        gbc.setState(0x3bb7, 0xa187, 0xef40, 0xdac5, 0x6ea7, 0xb7c9, 0x1, 0x0);
        gbc.writeMem(0x3bb7, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa187);
        EXPECT(gbc.pc(), 0x3bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0284
        gbc.setState(0x52bd, 0x8d09, 0xd510, 0x638e, 0xf965, 0x6465, 0x0, 0x1);
        gbc.writeMem(0x52bd, { 0xfe, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8d09);
        EXPECT(gbc.pc(), 0x52bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0285
        gbc.setState(0xbd1f, 0x9cf5, 0xd320, 0x5217, 0xf094, 0xa86, 0x0, 0x1);
        gbc.writeMem(0xbd1f, { 0xfe, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9cf5);
        EXPECT(gbc.pc(), 0xbd21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1f), 0xfe);
        EXPECT(gbc.readMem(0xbd20), 0xd1);
        // FE 0286
        gbc.setState(0xebf, 0x6e9d, 0x7f70, 0xf475, 0x1c8, 0xd268, 0x1, 0x0);
        gbc.writeMem(0xebf, { 0xfe, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6e9d);
        EXPECT(gbc.pc(), 0xec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0287
        gbc.setState(0x8db8, 0xb9ab, 0x68c0, 0x980d, 0xa5b4, 0x623, 0x0, 0x1);
        gbc.writeMem(0x8db8, { 0xfe, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb9ab);
        EXPECT(gbc.pc(), 0x8dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db8), 0xfe);
        EXPECT(gbc.readMem(0x8db9), 0xc4);
        // FE 0288
        gbc.setState(0x5aec, 0x746a, 0xecc0, 0xef00, 0x1ee9, 0x5a85, 0x1, 0x1);
        gbc.writeMem(0x5aec, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x746a);
        EXPECT(gbc.pc(), 0x5aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 028A
        gbc.setState(0x21cd, 0xedf6, 0x4a70, 0x39e4, 0xaeec, 0x4fc6, 0x1, 0x1);
        gbc.writeMem(0x21cd, { 0xfe, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xedf6);
        EXPECT(gbc.pc(), 0x21cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 028B
        gbc.setState(0x8d86, 0xf101, 0x91f0, 0x2137, 0x710f, 0xb5db, 0x1, 0x0);
        gbc.writeMem(0x8d86, { 0xfe, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf101);
        EXPECT(gbc.pc(), 0x8d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d86), 0xfe);
        EXPECT(gbc.readMem(0x8d87), 0xdc);
        // FE 028C
        gbc.setState(0x84f1, 0x9489, 0xc380, 0x410b, 0x7e59, 0xa37f, 0x1, 0x1);
        gbc.writeMem(0x84f1, { 0xfe, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9489);
        EXPECT(gbc.pc(), 0x84f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f1), 0xfe);
        EXPECT(gbc.readMem(0x84f2), 0xe2);
        // FE 028D
        gbc.setState(0xdd58, 0x1be4, 0x9700, 0xc7b5, 0x85f0, 0x27bf, 0x1, 0x0);
        gbc.writeMem(0xdd58, { 0xfe, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1be4);
        EXPECT(gbc.pc(), 0xdd5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd58), 0xfe);
        EXPECT(gbc.readMem(0xdd59), 0xf8);
        // FE 028E
        gbc.setState(0x73fc, 0xdb51, 0xe4d0, 0xe4f7, 0xd3f2, 0x67f6, 0x0, 0x0);
        gbc.writeMem(0x73fc, { 0xfe, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdb51);
        EXPECT(gbc.pc(), 0x73fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 028F
        gbc.setState(0x63f8, 0x5d41, 0xdf70, 0x7c50, 0x3d3d, 0x35d0, 0x0, 0x1);
        gbc.writeMem(0x63f8, { 0xfe, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5d41);
        EXPECT(gbc.pc(), 0x63fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0290
        gbc.setState(0x7e65, 0x8bb2, 0xf3d0, 0x8237, 0x513e, 0x3825, 0x0, 0x0);
        gbc.writeMem(0x7e65, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8bb2);
        EXPECT(gbc.pc(), 0x7e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0291
        gbc.setState(0x35c9, 0x4a10, 0x4990, 0x2201, 0xc4e, 0x26d6, 0x1, 0x0);
        gbc.writeMem(0x35c9, { 0xfe, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0x35cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0292
        gbc.setState(0xef4c, 0x4782, 0x7340, 0xafaf, 0xab11, 0x76b6, 0x0, 0x1);
        gbc.writeMem(0xef4c, { 0xfe, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4782);
        EXPECT(gbc.pc(), 0xef4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef4c), 0xfe);
        EXPECT(gbc.readMem(0xef4d), 0xce);
        // FE 0293
        gbc.setState(0x3d4d, 0x4eac, 0xed80, 0xe23d, 0xc09a, 0xe29d, 0x1, 0x0);
        gbc.writeMem(0x3d4d, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4eac);
        EXPECT(gbc.pc(), 0x3d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0294
        gbc.setState(0xa656, 0xd43b, 0xb440, 0xdce6, 0xb4fc, 0x4afe, 0x1, 0x0);
        gbc.writeMem(0xa656, { 0xfe, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd43b);
        EXPECT(gbc.pc(), 0xa658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa656), 0xfe);
        EXPECT(gbc.readMem(0xa657), 0x17);
        // FE 0295
        gbc.setState(0xb3f6, 0x584b, 0xf380, 0x6242, 0x2bb, 0xa492, 0x1, 0x1);
        gbc.writeMem(0xb3f6, { 0xfe, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x584b);
        EXPECT(gbc.pc(), 0xb3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f6), 0xfe);
        EXPECT(gbc.readMem(0xb3f7), 0x70);
        // FE 0296
        gbc.setState(0x6f99, 0x70e7, 0x2b40, 0x33ef, 0x1aaa, 0x132f, 0x0, 0x0);
        gbc.writeMem(0x6f99, { 0xfe, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x70e7);
        EXPECT(gbc.pc(), 0x6f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0297
        gbc.setState(0xc362, 0x1943, 0x3ae0, 0xcd9d, 0x4c89, 0xb9d7, 0x0, 0x1);
        gbc.writeMem(0xc362, { 0xfe, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1943);
        EXPECT(gbc.pc(), 0xc364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc362), 0xfe);
        EXPECT(gbc.readMem(0xc363), 0xf3);
        // FE 0298
        gbc.setState(0x2e9f, 0x3055, 0x2540, 0xb90d, 0xde36, 0xd94e, 0x1, 0x1);
        gbc.writeMem(0x2e9f, { 0xfe, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3055);
        EXPECT(gbc.pc(), 0x2ea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0299
        gbc.setState(0xeaff, 0x1f4a, 0xfee0, 0x8666, 0xf251, 0xb9c0, 0x1, 0x1);
        gbc.writeMem(0xeaff, { 0xfe, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1f4a);
        EXPECT(gbc.pc(), 0xeb01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaff), 0xfe);
        EXPECT(gbc.readMem(0xeb00), 0xa8);
        // FE 029A
        gbc.setState(0xd264, 0xddc3, 0xcca0, 0x9bae, 0x85d, 0xb5ad, 0x0, 0x1);
        gbc.writeMem(0xd264, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xddc3);
        EXPECT(gbc.pc(), 0xd266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd264), 0xfe);
        EXPECT(gbc.readMem(0xd265), 0x90);
        // FE 029B
        gbc.setState(0xc9af, 0x720d, 0xb540, 0xff8b, 0x6e0c, 0x776, 0x1, 0x1);
        gbc.writeMem(0xc9af, { 0xfe, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x720d);
        EXPECT(gbc.pc(), 0xc9b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9af), 0xfe);
        EXPECT(gbc.readMem(0xc9b0), 0x54);
        // FE 029C
        gbc.setState(0xe0ae, 0x9f3f, 0xb300, 0x3812, 0x73b4, 0x8ce8, 0x1, 0x0);
        gbc.writeMem(0xe0ae, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9f3f);
        EXPECT(gbc.pc(), 0xe0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ae), 0xfe);
        EXPECT(gbc.readMem(0xe0af), 0x78);
        // FE 029D
        gbc.setState(0x2235, 0x22a, 0xdba0, 0x5cf6, 0xab2d, 0xa712, 0x1, 0x0);
        gbc.writeMem(0x2235, { 0xfe, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x22a);
        EXPECT(gbc.pc(), 0x2237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 029E
        gbc.setState(0x5fc3, 0xc73, 0xcd50, 0x9e93, 0xb624, 0x827a, 0x0, 0x0);
        gbc.writeMem(0x5fc3, { 0xfe, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc73);
        EXPECT(gbc.pc(), 0x5fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 029F
        gbc.setState(0x7042, 0x4364, 0x81a0, 0xb565, 0x8be5, 0x1376, 0x1, 0x0);
        gbc.writeMem(0x7042, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4364);
        EXPECT(gbc.pc(), 0x7044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02A0
        gbc.setState(0xa9e3, 0xdf3e, 0x6dc0, 0xcdb3, 0x4bdd, 0x1ebb, 0x1, 0x0);
        gbc.writeMem(0xa9e3, { 0xfe, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdf3e);
        EXPECT(gbc.pc(), 0xa9e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e3), 0xfe);
        EXPECT(gbc.readMem(0xa9e4), 0x54);
        // FE 02A2
        gbc.setState(0xb1b9, 0x655d, 0xde80, 0x7acf, 0xddc7, 0x5a4b, 0x0, 0x0);
        gbc.writeMem(0xb1b9, { 0xfe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x655d);
        EXPECT(gbc.pc(), 0xb1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b9), 0xfe);
        EXPECT(gbc.readMem(0xb1ba), 0xaf);
        // FE 02A4
        gbc.setState(0xd9ca, 0xb3c5, 0x3d90, 0x5ead, 0x1b4, 0xd347, 0x1, 0x1);
        gbc.writeMem(0xd9ca, { 0xfe, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb3c5);
        EXPECT(gbc.pc(), 0xd9cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ca), 0xfe);
        EXPECT(gbc.readMem(0xd9cb), 0x7e);
        // FE 02A5
        gbc.setState(0x41c6, 0x84db, 0xf280, 0x86ee, 0xfec5, 0x87c9, 0x0, 0x0);
        gbc.writeMem(0x41c6, { 0xfe, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x84db);
        EXPECT(gbc.pc(), 0x41c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02A6
        gbc.setState(0x4f1d, 0x2493, 0x5d50, 0x9b75, 0x63ba, 0xf8b, 0x1, 0x1);
        gbc.writeMem(0x4f1d, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2493);
        EXPECT(gbc.pc(), 0x4f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 02A7
        gbc.setState(0x5285, 0xc11a, 0xc420, 0x1c4c, 0x6ee5, 0x7283, 0x1, 0x0);
        gbc.writeMem(0x5285, { 0xfe, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc11a);
        EXPECT(gbc.pc(), 0x5287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02A8
        gbc.setState(0xa8a2, 0xc6f4, 0x66b0, 0xe95d, 0x9a01, 0x15f2, 0x0, 0x1);
        gbc.writeMem(0xa8a2, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc6f4);
        EXPECT(gbc.pc(), 0xa8a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a2), 0xfe);
        EXPECT(gbc.readMem(0xa8a3), 0x78);
        // FE 02A9
        gbc.setState(0xd3b1, 0x8967, 0xb090, 0x6025, 0xb10e, 0x943c, 0x1, 0x0);
        gbc.writeMem(0xd3b1, { 0xfe, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8967);
        EXPECT(gbc.pc(), 0xd3b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b1), 0xfe);
        EXPECT(gbc.readMem(0xd3b2), 0x42);
        // FE 02AA
        gbc.setState(0x8555, 0x3d3e, 0x71e0, 0x1021, 0x5deb, 0xe993, 0x1, 0x0);
        gbc.writeMem(0x8555, { 0xfe, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3d3e);
        EXPECT(gbc.pc(), 0x8557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8555), 0xfe);
        EXPECT(gbc.readMem(0x8556), 0x22);
        // FE 02AB
        gbc.setState(0xcaa5, 0x24ff, 0xe10, 0xb568, 0x2c93, 0x93ef, 0x1, 0x1);
        gbc.writeMem(0xcaa5, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x24ff);
        EXPECT(gbc.pc(), 0xcaa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa5), 0xfe);
        EXPECT(gbc.readMem(0xcaa6), 0x88);
        // FE 02AC
        gbc.setState(0xb06c, 0xd026, 0xc0e0, 0x1eba, 0x9b91, 0x33c3, 0x1, 0x0);
        gbc.writeMem(0xb06c, { 0xfe, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd026);
        EXPECT(gbc.pc(), 0xb06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb06c), 0xfe);
        EXPECT(gbc.readMem(0xb06d), 0x4c);
        // FE 02AD
        gbc.setState(0x343, 0x5a21, 0x2810, 0x9a77, 0x784a, 0x6bf2, 0x0, 0x0);
        gbc.writeMem(0x343, { 0xfe, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5a21);
        EXPECT(gbc.pc(), 0x345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02AE
        gbc.setState(0x8e42, 0xaab5, 0xdc40, 0x5cb9, 0xd62e, 0x8029, 0x0, 0x1);
        gbc.writeMem(0x8e42, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xaab5);
        EXPECT(gbc.pc(), 0x8e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e42), 0xfe);
        EXPECT(gbc.readMem(0x8e43), 0xf6);
        // FE 02AF
        gbc.setState(0x63af, 0x790f, 0x17d0, 0xdc6e, 0x58ec, 0x7d1c, 0x0, 0x1);
        gbc.writeMem(0x63af, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x790f);
        EXPECT(gbc.pc(), 0x63b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 02B0
        gbc.setState(0x19ee, 0x3b5a, 0x8070, 0xe83e, 0x6503, 0xdcf9, 0x1, 0x1);
        gbc.writeMem(0x19ee, { 0xfe, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3b5a);
        EXPECT(gbc.pc(), 0x19f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02B1
        gbc.setState(0x2f3f, 0x13f7, 0x400, 0x7098, 0xf23d, 0x5d63, 0x1, 0x0);
        gbc.writeMem(0x2f3f, { 0xfe, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x13f7);
        EXPECT(gbc.pc(), 0x2f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02B2
        gbc.setState(0x5bf3, 0x81af, 0x1420, 0x16f7, 0x38d9, 0x79d3, 0x0, 0x0);
        gbc.writeMem(0x5bf3, { 0xfe, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x81af);
        EXPECT(gbc.pc(), 0x5bf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02B4
        gbc.setState(0xebe5, 0x9cd8, 0xa9e0, 0x4934, 0x98e2, 0xb774, 0x1, 0x0);
        gbc.writeMem(0xebe5, { 0xfe, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9cd8);
        EXPECT(gbc.pc(), 0xebe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe5), 0xfe);
        EXPECT(gbc.readMem(0xebe6), 0x40);
        // FE 02B5
        gbc.setState(0xd9c6, 0xaaa, 0x2e40, 0x5c3c, 0x8d2e, 0xf942, 0x1, 0x1);
        gbc.writeMem(0xd9c6, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaaa);
        EXPECT(gbc.pc(), 0xd9c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c6), 0xfe);
        EXPECT(gbc.readMem(0xd9c7), 0x27);
        // FE 02B6
        gbc.setState(0x34a2, 0xe38d, 0x9260, 0x8b50, 0x5ec3, 0x3632, 0x0, 0x1);
        gbc.writeMem(0x34a2, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe38d);
        EXPECT(gbc.pc(), 0x34a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02B7
        gbc.setState(0xc5aa, 0x551, 0xa110, 0xb70d, 0xe0ca, 0x21fc, 0x1, 0x1);
        gbc.writeMem(0xc5aa, { 0xfe, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x551);
        EXPECT(gbc.pc(), 0xc5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5aa), 0xfe);
        EXPECT(gbc.readMem(0xc5ab), 0xc6);
        // FE 02B8
        gbc.setState(0xa59d, 0x2b16, 0xea70, 0xbd14, 0xf706, 0x3482, 0x1, 0x0);
        gbc.writeMem(0xa59d, { 0xfe, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2b16);
        EXPECT(gbc.pc(), 0xa59f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59d), 0xfe);
        EXPECT(gbc.readMem(0xa59e), 0x71);
        // FE 02B9
        gbc.setState(0x6db0, 0x8177, 0x4860, 0xc506, 0x6755, 0x2c40, 0x1, 0x1);
        gbc.writeMem(0x6db0, { 0xfe, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8177);
        EXPECT(gbc.pc(), 0x6db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02BB
        gbc.setState(0xcd41, 0x5c1c, 0x75f0, 0x5983, 0xd643, 0x47f5, 0x1, 0x1);
        gbc.writeMem(0xcd41, { 0xfe, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5c1c);
        EXPECT(gbc.pc(), 0xcd43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd41), 0xfe);
        EXPECT(gbc.readMem(0xcd42), 0xfb);
        // FE 02BC
        gbc.setState(0xcc54, 0xa264, 0xa590, 0xe253, 0x38cc, 0xe5cf, 0x1, 0x1);
        gbc.writeMem(0xcc54, { 0xfe, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa264);
        EXPECT(gbc.pc(), 0xcc56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc54), 0xfe);
        EXPECT(gbc.readMem(0xcc55), 0x4f);
        // FE 02BD
        gbc.setState(0x7bff, 0xe35f, 0x6e10, 0xac50, 0x47d9, 0x5ff3, 0x1, 0x0);
        gbc.writeMem(0x7bff, { 0xfe, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe35f);
        EXPECT(gbc.pc(), 0x7c01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 02BE
        gbc.setState(0xb07e, 0xfe27, 0xa3c0, 0x9353, 0x871d, 0x8029, 0x1, 0x1);
        gbc.writeMem(0xb07e, { 0xfe, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfe27);
        EXPECT(gbc.pc(), 0xb080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb07e), 0xfe);
        EXPECT(gbc.readMem(0xb07f), 0x63);
        // FE 02BF
        gbc.setState(0xccca, 0xf84f, 0xa410, 0x6949, 0xfd6f, 0x55c6, 0x1, 0x1);
        gbc.writeMem(0xccca, { 0xfe, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf84f);
        EXPECT(gbc.pc(), 0xcccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccca), 0xfe);
        EXPECT(gbc.readMem(0xcccb), 0x69);
        // FE 02C0
        gbc.setState(0x9d42, 0x7c04, 0x1960, 0x2e47, 0x5d2, 0x2552, 0x1, 0x0);
        gbc.writeMem(0x9d42, { 0xfe, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7c04);
        EXPECT(gbc.pc(), 0x9d44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d42), 0xfe);
        EXPECT(gbc.readMem(0x9d43), 0xd4);
        // FE 02C1
        gbc.setState(0x3fb8, 0xa8e2, 0xf470, 0xd2a, 0x2150, 0x545f, 0x0, 0x1);
        gbc.writeMem(0x3fb8, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa8e2);
        EXPECT(gbc.pc(), 0x3fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02C2
        gbc.setState(0x4d6f, 0x3339, 0xbe60, 0xe676, 0x7bf0, 0x27b7, 0x1, 0x0);
        gbc.writeMem(0x4d6f, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3339);
        EXPECT(gbc.pc(), 0x4d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02C3
        gbc.setState(0x4f1a, 0xfa57, 0xb670, 0x3232, 0x924f, 0x678e, 0x0, 0x0);
        gbc.writeMem(0x4f1a, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfa57);
        EXPECT(gbc.pc(), 0x4f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02C4
        gbc.setState(0xa3b1, 0x67c4, 0xceb0, 0x4b5e, 0xecc1, 0xea07, 0x0, 0x1);
        gbc.writeMem(0xa3b1, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x67c4);
        EXPECT(gbc.pc(), 0xa3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b1), 0xfe);
        EXPECT(gbc.readMem(0xa3b2), 0x98);
        // FE 02C5
        gbc.setState(0x59b5, 0x73e4, 0x5de0, 0xd72a, 0x7f04, 0xa37e, 0x0, 0x1);
        gbc.writeMem(0x59b5, { 0xfe, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x73e4);
        EXPECT(gbc.pc(), 0x59b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 02C6
        gbc.setState(0x3c7a, 0xb95c, 0xf7d0, 0x1156, 0xbe7c, 0xc625, 0x0, 0x1);
        gbc.writeMem(0x3c7a, { 0xfe, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb95c);
        EXPECT(gbc.pc(), 0x3c7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02C7
        gbc.setState(0xe3b6, 0x922f, 0xda60, 0x5db3, 0x48bc, 0x34c0, 0x0, 0x0);
        gbc.writeMem(0xe3b6, { 0xfe, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x922f);
        EXPECT(gbc.pc(), 0xe3b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b6), 0xfe);
        EXPECT(gbc.readMem(0xe3b7), 0x78);
        // FE 02C8
        gbc.setState(0x9b6f, 0x67b0, 0xb3b0, 0x411, 0x20a8, 0xb07f, 0x0, 0x1);
        gbc.writeMem(0x9b6f, { 0xfe, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x67b0);
        EXPECT(gbc.pc(), 0x9b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b6f), 0xfe);
        EXPECT(gbc.readMem(0x9b70), 0xe);
        // FE 02C9
        gbc.setState(0x7ea1, 0x83eb, 0x7590, 0xfb30, 0x90db, 0x815e, 0x0, 0x0);
        gbc.writeMem(0x7ea1, { 0xfe, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x83eb);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02CA
        gbc.setState(0x9f85, 0xcb18, 0x1e30, 0x17e2, 0xc55d, 0xdedf, 0x1, 0x1);
        gbc.writeMem(0x9f85, { 0xfe, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcb18);
        EXPECT(gbc.pc(), 0x9f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f85), 0xfe);
        EXPECT(gbc.readMem(0x9f86), 0x10);
        // FE 02CB
        gbc.setState(0x47f7, 0x5e8, 0xc0c0, 0xf6e6, 0xa52e, 0x9f6d, 0x0, 0x1);
        gbc.writeMem(0x47f7, { 0xfe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5e8);
        EXPECT(gbc.pc(), 0x47f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02CC
        gbc.setState(0x17e, 0x3649, 0x3270, 0xf7cf, 0x5949, 0x63eb, 0x0, 0x0);
        gbc.writeMem(0x17e, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3649);
        EXPECT(gbc.pc(), 0x180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 02CD
        gbc.setState(0xb5ce, 0x7ca4, 0x500, 0x6e62, 0xbf17, 0xab38, 0x0, 0x0);
        gbc.writeMem(0xb5ce, { 0xfe, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7ca4);
        EXPECT(gbc.pc(), 0xb5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ce), 0xfe);
        EXPECT(gbc.readMem(0xb5cf), 0xc7);
        // FE 02CE
        gbc.setState(0x8131, 0xbb6c, 0x6800, 0xd541, 0xd26f, 0xc017, 0x1, 0x1);
        gbc.writeMem(0x8131, { 0xfe, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xbb6c);
        EXPECT(gbc.pc(), 0x8133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8131), 0xfe);
        EXPECT(gbc.readMem(0x8132), 0x20);
        // FE 02CF
        gbc.setState(0x64ac, 0x2692, 0x60e0, 0xda78, 0xc1c7, 0xfe5b, 0x0, 0x1);
        gbc.writeMem(0x64ac, { 0xfe, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2692);
        EXPECT(gbc.pc(), 0x64ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02D0
        gbc.setState(0x720b, 0x96a4, 0x6000, 0x7edf, 0xaf2a, 0x419d, 0x1, 0x0);
        gbc.writeMem(0x720b, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x96a4);
        EXPECT(gbc.pc(), 0x720d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02D1
        gbc.setState(0x9357, 0x2957, 0x9cd0, 0x22c1, 0x4b3, 0x80a6, 0x0, 0x1);
        gbc.writeMem(0x9357, { 0xfe, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2957);
        EXPECT(gbc.pc(), 0x9359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9357), 0xfe);
        EXPECT(gbc.readMem(0x9358), 0x54);
        // FE 02D2
        gbc.setState(0xcca3, 0xc78, 0x8350, 0x2ae3, 0x6c0f, 0x56ca, 0x0, 0x0);
        gbc.writeMem(0xcca3, { 0xfe, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc78);
        EXPECT(gbc.pc(), 0xcca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca3), 0xfe);
        EXPECT(gbc.readMem(0xcca4), 0xb3);
        // FE 02D3
        gbc.setState(0xcaa7, 0x8a3e, 0xbad0, 0xe6d9, 0x1fe6, 0x1714, 0x0, 0x1);
        gbc.writeMem(0xcaa7, { 0xfe, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8a3e);
        EXPECT(gbc.pc(), 0xcaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa7), 0xfe);
        EXPECT(gbc.readMem(0xcaa8), 0xb9);
        // FE 02D4
        gbc.setState(0x9338, 0xa5a, 0x5500, 0x34de, 0xf261, 0xd33f, 0x1, 0x0);
        gbc.writeMem(0x9338, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa5a);
        EXPECT(gbc.pc(), 0x933a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9338), 0xfe);
        EXPECT(gbc.readMem(0x9339), 0x88);
        // FE 02D5
        gbc.setState(0x2e15, 0xd33, 0xbe30, 0x67a, 0xf559, 0x6a7b, 0x1, 0x0);
        gbc.writeMem(0x2e15, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd33);
        EXPECT(gbc.pc(), 0x2e17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02D6
        gbc.setState(0x4de1, 0x887d, 0xd130, 0x6ab0, 0xc5fe, 0x2de9, 0x0, 0x1);
        gbc.writeMem(0x4de1, { 0xfe, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x887d);
        EXPECT(gbc.pc(), 0x4de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02D7
        gbc.setState(0x49ae, 0x7ca3, 0xa160, 0xaaf7, 0x12b9, 0x9497, 0x1, 0x0);
        gbc.writeMem(0x49ae, { 0xfe, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7ca3);
        EXPECT(gbc.pc(), 0x49b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02D8
        gbc.setState(0x9929, 0x7587, 0xaab0, 0x5d, 0xe4ee, 0x577a, 0x1, 0x1);
        gbc.writeMem(0x9929, { 0xfe, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7587);
        EXPECT(gbc.pc(), 0x992b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9929), 0xfe);
        EXPECT(gbc.readMem(0x992a), 0xfb);
        // FE 02D9
        gbc.setState(0x5bd6, 0x81fd, 0xab00, 0xbe0c, 0x2cc0, 0xf3a1, 0x0, 0x0);
        gbc.writeMem(0x5bd6, { 0xfe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x81fd);
        EXPECT(gbc.pc(), 0x5bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02DA
        gbc.setState(0xe694, 0x803, 0x5dc0, 0xcdd9, 0xa940, 0x9f5d, 0x1, 0x0);
        gbc.writeMem(0xe694, { 0xfe, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x803);
        EXPECT(gbc.pc(), 0xe696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe694), 0xfe);
        EXPECT(gbc.readMem(0xe695), 0xb8);
        // FE 02DB
        gbc.setState(0xad9c, 0x433, 0x830, 0x84d1, 0xea62, 0x4d4, 0x1, 0x0);
        gbc.writeMem(0xad9c, { 0xfe, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x433);
        EXPECT(gbc.pc(), 0xad9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad9c), 0xfe);
        EXPECT(gbc.readMem(0xad9d), 0x8d);
        // FE 02DC
        gbc.setState(0x5f08, 0x7914, 0xbe30, 0xbf67, 0xcc85, 0xb321, 0x0, 0x0);
        gbc.writeMem(0x5f08, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7914);
        EXPECT(gbc.pc(), 0x5f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02DD
        gbc.setState(0x581e, 0x2da, 0x57f0, 0x403b, 0xdc6f, 0xc16e, 0x0, 0x1);
        gbc.writeMem(0x581e, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2da);
        EXPECT(gbc.pc(), 0x5820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02DE
        gbc.setState(0x4675, 0x4e42, 0x940, 0x630c, 0x3f7, 0x8567, 0x0, 0x0);
        gbc.writeMem(0x4675, { 0xfe, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4e42);
        EXPECT(gbc.pc(), 0x4677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02DF
        gbc.setState(0x9ffe, 0x334f, 0x2c90, 0x3eca, 0x8abc, 0xbf38, 0x1, 0x0);
        gbc.writeMem(0x9ffe, { 0xfe, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x334f);
        EXPECT(gbc.pc(), 0xa000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffe), 0xfe);
        EXPECT(gbc.readMem(0x9fff), 0x22);
        // FE 02E0
        gbc.setState(0x8be4, 0x95c5, 0xfd80, 0x224c, 0x42c4, 0xb227, 0x0, 0x1);
        gbc.writeMem(0x8be4, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x95c5);
        EXPECT(gbc.pc(), 0x8be6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8be4), 0xfe);
        EXPECT(gbc.readMem(0x8be5), 0xf7);
        // FE 02E1
        gbc.setState(0x14e0, 0xc790, 0xd5c0, 0x7919, 0x2d10, 0xbb4f, 0x0, 0x1);
        gbc.writeMem(0x14e0, { 0xfe, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc790);
        EXPECT(gbc.pc(), 0x14e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02E2
        gbc.setState(0xddf2, 0xb4b1, 0xa490, 0x3d5c, 0x64d9, 0x7f01, 0x0, 0x0);
        gbc.writeMem(0xddf2, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb4b1);
        EXPECT(gbc.pc(), 0xddf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddf2), 0xfe);
        EXPECT(gbc.readMem(0xddf3), 0x1f);
        // FE 02E3
        gbc.setState(0xe08, 0x70ed, 0x5470, 0x90f1, 0xc45, 0x17fa, 0x1, 0x0);
        gbc.writeMem(0xe08, { 0xfe, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x70ed);
        EXPECT(gbc.pc(), 0xe0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02E4
        gbc.setState(0xe89e, 0xefbd, 0x87e0, 0x7d5d, 0xcea7, 0x26b3, 0x1, 0x0);
        gbc.writeMem(0xe89e, { 0xfe, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xefbd);
        EXPECT(gbc.pc(), 0xe8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89e), 0xfe);
        EXPECT(gbc.readMem(0xe89f), 0x14);
        // FE 02E5
        gbc.setState(0xe258, 0x45ed, 0x1df0, 0x7a4, 0x4745, 0x5f01, 0x0, 0x0);
        gbc.writeMem(0xe258, { 0xfe, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x45ed);
        EXPECT(gbc.pc(), 0xe25a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe258), 0xfe);
        EXPECT(gbc.readMem(0xe259), 0x49);
        // FE 02E7
        gbc.setState(0x6a99, 0x17d8, 0x5730, 0x3c85, 0x84c8, 0x780c, 0x1, 0x1);
        gbc.writeMem(0x6a99, { 0xfe, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x17d8);
        EXPECT(gbc.pc(), 0x6a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02E8
        gbc.setState(0xdf2d, 0xe1b, 0xec50, 0x6bec, 0xcab, 0x5bf7, 0x0, 0x1);
        gbc.writeMem(0xdf2d, { 0xfe, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe1b);
        EXPECT(gbc.pc(), 0xdf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf2d), 0xfe);
        EXPECT(gbc.readMem(0xdf2e), 0xa6);
        // FE 02EA
        gbc.setState(0xe6b8, 0xa7f9, 0x7780, 0xa16e, 0x9bf7, 0x2d11, 0x1, 0x0);
        gbc.writeMem(0xe6b8, { 0xfe, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa7f9);
        EXPECT(gbc.pc(), 0xe6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b8), 0xfe);
        EXPECT(gbc.readMem(0xe6b9), 0x39);
        // FE 02EB
        gbc.setState(0x6128, 0xb412, 0x41e0, 0x2144, 0x85a5, 0xb054, 0x1, 0x1);
        gbc.writeMem(0x6128, { 0xfe, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb412);
        EXPECT(gbc.pc(), 0x612a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02EC
        gbc.setState(0x3b1, 0x8ba5, 0x95c0, 0xd9df, 0x205a, 0xa1b3, 0x1, 0x1);
        gbc.writeMem(0x3b1, { 0xfe, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8ba5);
        EXPECT(gbc.pc(), 0x3b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02ED
        gbc.setState(0x38a6, 0x9539, 0xf820, 0x657d, 0xbf9c, 0xac30, 0x0, 0x0);
        gbc.writeMem(0x38a6, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9539);
        EXPECT(gbc.pc(), 0x38a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02EE
        gbc.setState(0x27f9, 0xacad, 0x9a80, 0x30e9, 0x4870, 0x3f37, 0x1, 0x0);
        gbc.writeMem(0x27f9, { 0xfe, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xacad);
        EXPECT(gbc.pc(), 0x27fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02EF
        gbc.setState(0xb205, 0xce01, 0xa640, 0x53d0, 0x8ef9, 0x9de5, 0x0, 0x1);
        gbc.writeMem(0xb205, { 0xfe, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xce01);
        EXPECT(gbc.pc(), 0xb207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb205), 0xfe);
        EXPECT(gbc.readMem(0xb206), 0x51);
        // FE 02F0
        gbc.setState(0xdd9e, 0x9839, 0x27f0, 0x1194, 0xa9e3, 0x104c, 0x0, 0x1);
        gbc.writeMem(0xdd9e, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9839);
        EXPECT(gbc.pc(), 0xdda0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9e), 0xfe);
        EXPECT(gbc.readMem(0xdd9f), 0x5f);
        // FE 02F1
        gbc.setState(0x48dd, 0x4d43, 0x2050, 0xae30, 0xe49c, 0x71d, 0x0, 0x0);
        gbc.writeMem(0x48dd, { 0xfe, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4d43);
        EXPECT(gbc.pc(), 0x48df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02F2
        gbc.setState(0x4976, 0x1180, 0x2100, 0xc33c, 0x95b7, 0xde1b, 0x1, 0x0);
        gbc.writeMem(0x4976, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1180);
        EXPECT(gbc.pc(), 0x4978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02F3
        gbc.setState(0x4915, 0x2635, 0x4db0, 0x51e0, 0x1d52, 0xb56a, 0x1, 0x0);
        gbc.writeMem(0x4915, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2635);
        EXPECT(gbc.pc(), 0x4917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02F4
        gbc.setState(0x2567, 0x9cee, 0x4250, 0xbd09, 0xe78, 0x4c56, 0x0, 0x1);
        gbc.writeMem(0x2567, { 0xfe, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9cee);
        EXPECT(gbc.pc(), 0x2569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02F6
        gbc.setState(0x8372, 0xf473, 0x89a0, 0x61f1, 0x5db3, 0x7b32, 0x1, 0x0);
        gbc.writeMem(0x8372, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf473);
        EXPECT(gbc.pc(), 0x8374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8372), 0xfe);
        EXPECT(gbc.readMem(0x8373), 0x98);
        // FE 02F7
        gbc.setState(0x1cc3, 0xea49, 0x800, 0x9aec, 0xe5bd, 0xb3ca, 0x0, 0x0);
        gbc.writeMem(0x1cc3, { 0xfe, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xea49);
        EXPECT(gbc.pc(), 0x1cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02F8
        gbc.setState(0x15a4, 0x9f54, 0xe6f0, 0x5de2, 0x568e, 0x1540, 0x0, 0x1);
        gbc.writeMem(0x15a4, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9f54);
        EXPECT(gbc.pc(), 0x15a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 02F9
        gbc.setState(0x579, 0x81d6, 0xb5f0, 0x2eb7, 0x292, 0xdb44, 0x0, 0x0);
        gbc.writeMem(0x579, { 0xfe, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x81d6);
        EXPECT(gbc.pc(), 0x57b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02FA
        gbc.setState(0x562b, 0xafc2, 0xeac0, 0x6428, 0x2975, 0x3a71, 0x1, 0x1);
        gbc.writeMem(0x562b, { 0xfe, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xafc2);
        EXPECT(gbc.pc(), 0x562d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 02FB
        gbc.setState(0x2103, 0xc271, 0xf1c0, 0x2eab, 0x81bb, 0x57dc, 0x0, 0x1);
        gbc.writeMem(0x2103, { 0xfe, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc271);
        EXPECT(gbc.pc(), 0x2105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02FC
        gbc.setState(0x7d9a, 0xbae6, 0xdf10, 0x4d6d, 0x212c, 0x8325, 0x1, 0x1);
        gbc.writeMem(0x7d9a, { 0xfe, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xbae6);
        EXPECT(gbc.pc(), 0x7d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 02FD
        gbc.setState(0x8d09, 0xef44, 0xb540, 0x53d9, 0x116a, 0xf42d, 0x1, 0x0);
        gbc.writeMem(0x8d09, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xef44);
        EXPECT(gbc.pc(), 0x8d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d09), 0xfe);
        EXPECT(gbc.readMem(0x8d0a), 0xc1);
        // FE 02FE
        gbc.setState(0x4a8f, 0x6f6b, 0x50f0, 0x6b82, 0x6249, 0x2fe8, 0x0, 0x0);
        gbc.writeMem(0x4a8f, { 0xfe, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6f6b);
        EXPECT(gbc.pc(), 0x4a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0301
        gbc.setState(0x29ed, 0x6e79, 0x6180, 0x576e, 0x45e7, 0xdf38, 0x1, 0x0);
        gbc.writeMem(0x29ed, { 0xfe, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6e79);
        EXPECT(gbc.pc(), 0x29ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0302
        gbc.setState(0x513e, 0xb7ba, 0x6fa0, 0x8372, 0x6eb0, 0x6d0a, 0x1, 0x0);
        gbc.writeMem(0x513e, { 0xfe, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb7ba);
        EXPECT(gbc.pc(), 0x5140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0303
        gbc.setState(0x119a, 0x3a31, 0x8ec0, 0x3c03, 0x979e, 0x4807, 0x1, 0x1);
        gbc.writeMem(0x119a, { 0xfe, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3a31);
        EXPECT(gbc.pc(), 0x119c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0304
        gbc.setState(0xec9a, 0xc1a1, 0x8180, 0xbdfe, 0xee7b, 0x7132, 0x1, 0x1);
        gbc.writeMem(0xec9a, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc1a1);
        EXPECT(gbc.pc(), 0xec9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec9a), 0xfe);
        EXPECT(gbc.readMem(0xec9b), 0xa1);
        // FE 0305
        gbc.setState(0x6fc7, 0xe09a, 0x6c50, 0x1734, 0xc91a, 0xd406, 0x0, 0x1);
        gbc.writeMem(0x6fc7, { 0xfe, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe09a);
        EXPECT(gbc.pc(), 0x6fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0306
        gbc.setState(0xc1e6, 0x5663, 0x7ee0, 0x1b57, 0x11c4, 0x9b0, 0x0, 0x1);
        gbc.writeMem(0xc1e6, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5663);
        EXPECT(gbc.pc(), 0xc1e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1e6), 0xfe);
        EXPECT(gbc.readMem(0xc1e7), 0x80);
        // FE 0308
        gbc.setState(0x30e6, 0x4e2f, 0xd7d0, 0xbd43, 0x9a8, 0xf97a, 0x0, 0x1);
        gbc.writeMem(0x30e6, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4e2f);
        EXPECT(gbc.pc(), 0x30e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0309
        gbc.setState(0xd3ac, 0x388b, 0xb1c0, 0x9df6, 0xe4fe, 0xdf8a, 0x0, 0x1);
        gbc.writeMem(0xd3ac, { 0xfe, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x388b);
        EXPECT(gbc.pc(), 0xd3ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ac), 0xfe);
        EXPECT(gbc.readMem(0xd3ad), 0x64);
        // FE 030A
        gbc.setState(0x877d, 0x97a3, 0x1210, 0x4139, 0x86e0, 0xcd42, 0x0, 0x1);
        gbc.writeMem(0x877d, { 0xfe, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x97a3);
        EXPECT(gbc.pc(), 0x877f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877d), 0xfe);
        EXPECT(gbc.readMem(0x877e), 0xde);
        // FE 030B
        gbc.setState(0x9366, 0xb8fd, 0x61d0, 0x74b7, 0xa485, 0xa588, 0x0, 0x0);
        gbc.writeMem(0x9366, { 0xfe, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0x9368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9366), 0xfe);
        EXPECT(gbc.readMem(0x9367), 0x33);
        // FE 030C
        gbc.setState(0x59f3, 0x643e, 0x2480, 0x1b63, 0x5746, 0x9ebb, 0x0, 0x1);
        gbc.writeMem(0x59f3, { 0xfe, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x643e);
        EXPECT(gbc.pc(), 0x59f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 030D
        gbc.setState(0xdf42, 0x30b0, 0xcb60, 0x1740, 0x1c35, 0x84b1, 0x1, 0x0);
        gbc.writeMem(0xdf42, { 0xfe, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x30b0);
        EXPECT(gbc.pc(), 0xdf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf42), 0xfe);
        EXPECT(gbc.readMem(0xdf43), 0xc);
        // FE 030E
        gbc.setState(0x1296, 0x75d5, 0x78b0, 0xf09f, 0x9684, 0x334a, 0x1, 0x1);
        gbc.writeMem(0x1296, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x75d5);
        EXPECT(gbc.pc(), 0x1298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 030F
        gbc.setState(0x6076, 0xe82f, 0xc3e0, 0xbeeb, 0xc986, 0xe814, 0x1, 0x1);
        gbc.writeMem(0x6076, { 0xfe, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe82f);
        EXPECT(gbc.pc(), 0x6078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0310
        gbc.setState(0x1eda, 0xf841, 0xe900, 0x9e1c, 0x3391, 0x9b0c, 0x1, 0x0);
        gbc.writeMem(0x1eda, { 0xfe, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf841);
        EXPECT(gbc.pc(), 0x1edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0311
        gbc.setState(0x809c, 0x4aa8, 0x9120, 0x5558, 0x99f, 0x9f59, 0x1, 0x1);
        gbc.writeMem(0x809c, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4aa8);
        EXPECT(gbc.pc(), 0x809e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809c), 0xfe);
        EXPECT(gbc.readMem(0x809d), 0x5f);
        // FE 0312
        gbc.setState(0x721b, 0xabf5, 0x7cc0, 0x1be8, 0x8a79, 0xa822, 0x1, 0x0);
        gbc.writeMem(0x721b, { 0xfe, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xabf5);
        EXPECT(gbc.pc(), 0x721d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0313
        gbc.setState(0xca9b, 0x2a40, 0x1620, 0x5dff, 0x58f4, 0xf6e3, 0x1, 0x0);
        gbc.writeMem(0xca9b, { 0xfe, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2a40);
        EXPECT(gbc.pc(), 0xca9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9b), 0xfe);
        EXPECT(gbc.readMem(0xca9c), 0x61);
        // FE 0314
        gbc.setState(0xd6c8, 0x973c, 0xee70, 0x3797, 0x54b0, 0x3681, 0x0, 0x1);
        gbc.writeMem(0xd6c8, { 0xfe, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x973c);
        EXPECT(gbc.pc(), 0xd6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c8), 0xfe);
        EXPECT(gbc.readMem(0xd6c9), 0xa7);
        // FE 0315
        gbc.setState(0x6700, 0xb424, 0x9cf0, 0xbe7b, 0x68c9, 0xfbed, 0x1, 0x0);
        gbc.writeMem(0x6700, { 0xfe, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb424);
        EXPECT(gbc.pc(), 0x6702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0316
        gbc.setState(0x4faf, 0x2e29, 0xa750, 0xfa30, 0xf2b1, 0xf0c8, 0x0, 0x1);
        gbc.writeMem(0x4faf, { 0xfe, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2e29);
        EXPECT(gbc.pc(), 0x4fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0317
        gbc.setState(0x3ba7, 0x3d9c, 0xa4d0, 0x643e, 0xe861, 0x15fd, 0x0, 0x1);
        gbc.writeMem(0x3ba7, { 0xfe, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3d9c);
        EXPECT(gbc.pc(), 0x3ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0318
        gbc.setState(0x1a00, 0x54e1, 0x6a40, 0x79df, 0xa156, 0xd0b1, 0x1, 0x1);
        gbc.writeMem(0x1a00, { 0xfe, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x54e1);
        EXPECT(gbc.pc(), 0x1a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0319
        gbc.setState(0x7663, 0x4a4b, 0x5a90, 0x75e6, 0xf258, 0xd7ef, 0x1, 0x1);
        gbc.writeMem(0x7663, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4a4b);
        EXPECT(gbc.pc(), 0x7665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 031A
        gbc.setState(0x66d4, 0x40d3, 0xb7f0, 0x6d8b, 0x232c, 0xc054, 0x0, 0x1);
        gbc.writeMem(0x66d4, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x40d3);
        EXPECT(gbc.pc(), 0x66d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 031B
        gbc.setState(0x75d0, 0xe767, 0x7880, 0xb840, 0xe06f, 0x6601, 0x0, 0x1);
        gbc.writeMem(0x75d0, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe767);
        EXPECT(gbc.pc(), 0x75d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 031C
        gbc.setState(0xd483, 0xb83, 0xf510, 0xac6, 0x87c3, 0x2dc6, 0x0, 0x1);
        gbc.writeMem(0xd483, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb83);
        EXPECT(gbc.pc(), 0xd485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd483), 0xfe);
        EXPECT(gbc.readMem(0xd484), 0x6d);
        // FE 031E
        gbc.setState(0x9be0, 0xce71, 0x9f00, 0x2035, 0xabe7, 0x94ba, 0x1, 0x0);
        gbc.writeMem(0x9be0, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xce71);
        EXPECT(gbc.pc(), 0x9be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be0), 0xfe);
        EXPECT(gbc.readMem(0x9be1), 0xf0);
        // FE 031F
        gbc.setState(0xbde0, 0xc366, 0xab30, 0x67ca, 0xd670, 0x7a9c, 0x0, 0x1);
        gbc.writeMem(0xbde0, { 0xfe, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc366);
        EXPECT(gbc.pc(), 0xbde2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde0), 0xfe);
        EXPECT(gbc.readMem(0xbde1), 0xd8);
        // FE 0320
        gbc.setState(0x255b, 0xf91d, 0xed60, 0xd7fa, 0x1da2, 0x8c1c, 0x0, 0x1);
        gbc.writeMem(0x255b, { 0xfe, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf91d);
        EXPECT(gbc.pc(), 0x255d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0321
        gbc.setState(0x219, 0xd6d6, 0xf0e0, 0x18c0, 0x5999, 0xd0ae, 0x0, 0x1);
        gbc.writeMem(0x219, { 0xfe, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd6d6);
        EXPECT(gbc.pc(), 0x21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0322
        gbc.setState(0x2724, 0xb695, 0x86d0, 0x973a, 0x238b, 0x3850, 0x1, 0x0);
        gbc.writeMem(0x2724, { 0xfe, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb695);
        EXPECT(gbc.pc(), 0x2726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0323
        gbc.setState(0x60bf, 0xeff5, 0x330, 0x728b, 0x4eaa, 0xc904, 0x0, 0x0);
        gbc.writeMem(0x60bf, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xeff5);
        EXPECT(gbc.pc(), 0x60c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0324
        gbc.setState(0xe314, 0x25e1, 0xb040, 0x3479, 0x6bf5, 0x3282, 0x0, 0x1);
        gbc.writeMem(0xe314, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x25e1);
        EXPECT(gbc.pc(), 0xe316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe314), 0xfe);
        EXPECT(gbc.readMem(0xe315), 0x90);
        // FE 0325
        gbc.setState(0x601c, 0xc310, 0xe1e0, 0xf80f, 0x5cf5, 0xd535, 0x0, 0x1);
        gbc.writeMem(0x601c, { 0xfe, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc310);
        EXPECT(gbc.pc(), 0x601e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0326
        gbc.setState(0x683d, 0xdaa3, 0x4e0, 0xaf66, 0xfe7, 0x16c0, 0x0, 0x0);
        gbc.writeMem(0x683d, { 0xfe, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdaa3);
        EXPECT(gbc.pc(), 0x683f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0327
        gbc.setState(0x1ee4, 0x3b84, 0x6b50, 0xbb42, 0xe443, 0xec0f, 0x1, 0x1);
        gbc.writeMem(0x1ee4, { 0xfe, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3b84);
        EXPECT(gbc.pc(), 0x1ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0328
        gbc.setState(0x93e7, 0x95c8, 0xb200, 0xa105, 0xad0c, 0xdb00, 0x0, 0x0);
        gbc.writeMem(0x93e7, { 0xfe, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x95c8);
        EXPECT(gbc.pc(), 0x93e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e7), 0xfe);
        EXPECT(gbc.readMem(0x93e8), 0xda);
        // FE 0329
        gbc.setState(0x2420, 0xe298, 0x12a0, 0xabd6, 0xddf6, 0x9ef8, 0x0, 0x1);
        gbc.writeMem(0x2420, { 0xfe, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe298);
        EXPECT(gbc.pc(), 0x2422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 032A
        gbc.setState(0x4e73, 0xc6, 0xeeb0, 0x556c, 0xfeb9, 0x3876, 0x0, 0x0);
        gbc.writeMem(0x4e73, { 0xfe, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc6);
        EXPECT(gbc.pc(), 0x4e75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 032B
        gbc.setState(0xe4c1, 0x4268, 0xcda0, 0x83d0, 0xdb3e, 0x922, 0x1, 0x1);
        gbc.writeMem(0xe4c1, { 0xfe, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4268);
        EXPECT(gbc.pc(), 0xe4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c1), 0xfe);
        EXPECT(gbc.readMem(0xe4c2), 0x6d);
        // FE 032C
        gbc.setState(0x1f04, 0xd9d4, 0xae10, 0x310d, 0x8f76, 0xaf41, 0x1, 0x0);
        gbc.writeMem(0x1f04, { 0xfe, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd9d4);
        EXPECT(gbc.pc(), 0x1f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 032D
        gbc.setState(0xc0ef, 0xcc92, 0x7c50, 0x9281, 0x5ab6, 0xd2d8, 0x0, 0x0);
        gbc.writeMem(0xc0ef, { 0xfe, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcc92);
        EXPECT(gbc.pc(), 0xc0f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ef), 0xfe);
        EXPECT(gbc.readMem(0xc0f0), 0x91);
        // FE 032E
        gbc.setState(0x598f, 0xf33e, 0x7a0, 0x9037, 0x474, 0x99f5, 0x0, 0x1);
        gbc.writeMem(0x598f, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf33e);
        EXPECT(gbc.pc(), 0x5991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 032F
        gbc.setState(0xa415, 0xd1e, 0x7a40, 0x73e7, 0x7852, 0x5696, 0x0, 0x1);
        gbc.writeMem(0xa415, { 0xfe, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0xa417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa415), 0xfe);
        EXPECT(gbc.readMem(0xa416), 0xbd);
        // FE 0330
        gbc.setState(0x54c2, 0x6bd4, 0xfcf0, 0x92ee, 0x705c, 0xf41b, 0x1, 0x0);
        gbc.writeMem(0x54c2, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6bd4);
        EXPECT(gbc.pc(), 0x54c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0331
        gbc.setState(0xad4e, 0x73a9, 0xf7f0, 0xf301, 0x9474, 0xdb9b, 0x0, 0x1);
        gbc.writeMem(0xad4e, { 0xfe, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x73a9);
        EXPECT(gbc.pc(), 0xad50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4e), 0xfe);
        EXPECT(gbc.readMem(0xad4f), 0xdb);
        // FE 0332
        gbc.setState(0xe1ca, 0x320b, 0xbc80, 0x31df, 0x3e1c, 0x3e70, 0x1, 0x1);
        gbc.writeMem(0xe1ca, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x320b);
        EXPECT(gbc.pc(), 0xe1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1ca), 0xfe);
        EXPECT(gbc.readMem(0xe1cb), 0x53);
        // FE 0333
        gbc.setState(0x1c20, 0x8e5a, 0x3da0, 0xdcdc, 0x543b, 0x1c89, 0x0, 0x1);
        gbc.writeMem(0x1c20, { 0xfe, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8e5a);
        EXPECT(gbc.pc(), 0x1c22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0334
        gbc.setState(0xc2b7, 0xdc6d, 0x6d0, 0x3c17, 0xf368, 0x3d53, 0x1, 0x1);
        gbc.writeMem(0xc2b7, { 0xfe, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdc6d);
        EXPECT(gbc.pc(), 0xc2b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b7), 0xfe);
        EXPECT(gbc.readMem(0xc2b8), 0xd7);
        // FE 0335
        gbc.setState(0xa916, 0xeefa, 0x3470, 0xf7dc, 0xf30e, 0x8197, 0x1, 0x1);
        gbc.writeMem(0xa916, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xeefa);
        EXPECT(gbc.pc(), 0xa918);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa916), 0xfe);
        EXPECT(gbc.readMem(0xa917), 0x86);
        // FE 0336
        gbc.setState(0x733a, 0xa535, 0xf7c0, 0x54b8, 0xea3e, 0xc567, 0x1, 0x1);
        gbc.writeMem(0x733a, { 0xfe, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa535);
        EXPECT(gbc.pc(), 0x733c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0337
        gbc.setState(0x6c28, 0xb12e, 0xf530, 0x442, 0x53e1, 0x66a9, 0x1, 0x0);
        gbc.writeMem(0x6c28, { 0xfe, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb12e);
        EXPECT(gbc.pc(), 0x6c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0338
        gbc.setState(0x1da8, 0x46b, 0x85f0, 0x5f92, 0x8d91, 0x63cd, 0x0, 0x1);
        gbc.writeMem(0x1da8, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x46b);
        EXPECT(gbc.pc(), 0x1daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0339
        gbc.setState(0xe1cb, 0xd083, 0xa050, 0xeb24, 0x5a34, 0x757b, 0x1, 0x1);
        gbc.writeMem(0xe1cb, { 0xfe, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd083);
        EXPECT(gbc.pc(), 0xe1cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1cb), 0xfe);
        EXPECT(gbc.readMem(0xe1cc), 0x2b);
        // FE 033A
        gbc.setState(0x4ba9, 0x21b7, 0xe570, 0xd1db, 0xbb7b, 0xd93c, 0x1, 0x1);
        gbc.writeMem(0x4ba9, { 0xfe, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x21b7);
        EXPECT(gbc.pc(), 0x4bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 033B
        gbc.setState(0xde30, 0x1dff, 0xa360, 0xf208, 0x4dce, 0xf02a, 0x1, 0x0);
        gbc.writeMem(0xde30, { 0xfe, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1dff);
        EXPECT(gbc.pc(), 0xde32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde30), 0xfe);
        EXPECT(gbc.readMem(0xde31), 0x6b);
        // FE 033C
        gbc.setState(0xad83, 0x5d49, 0x3350, 0x2c43, 0x7e31, 0xd095, 0x0, 0x1);
        gbc.writeMem(0xad83, { 0xfe, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5d49);
        EXPECT(gbc.pc(), 0xad85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad83), 0xfe);
        EXPECT(gbc.readMem(0xad84), 0x4);
        // FE 033D
        gbc.setState(0xbf6d, 0xb43a, 0x3b80, 0xd13d, 0xd109, 0x8858, 0x1, 0x0);
        gbc.writeMem(0xbf6d, { 0xfe, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb43a);
        EXPECT(gbc.pc(), 0xbf6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf6d), 0xfe);
        EXPECT(gbc.readMem(0xbf6e), 0xa0);
        // FE 033E
        gbc.setState(0xbf5d, 0xf704, 0xe170, 0xae6, 0xf36c, 0xce02, 0x1, 0x0);
        gbc.writeMem(0xbf5d, { 0xfe, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf704);
        EXPECT(gbc.pc(), 0xbf5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5d), 0xfe);
        EXPECT(gbc.readMem(0xbf5e), 0x8b);
        // FE 033F
        gbc.setState(0x9c77, 0x673d, 0xce50, 0xec0, 0xa61c, 0xbe7, 0x0, 0x0);
        gbc.writeMem(0x9c77, { 0xfe, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x673d);
        EXPECT(gbc.pc(), 0x9c79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c77), 0xfe);
        EXPECT(gbc.readMem(0x9c78), 0xf4);
        // FE 0340
        gbc.setState(0x5f60, 0xa409, 0x8d00, 0xd29c, 0xbe13, 0x489c, 0x1, 0x1);
        gbc.writeMem(0x5f60, { 0xfe, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa409);
        EXPECT(gbc.pc(), 0x5f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0341
        gbc.setState(0xbdff, 0x417b, 0x3600, 0x25b8, 0x730e, 0x7df, 0x0, 0x1);
        gbc.writeMem(0xbdff, { 0xfe, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x417b);
        EXPECT(gbc.pc(), 0xbe01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdff), 0xfe);
        EXPECT(gbc.readMem(0xbe00), 0xb5);
        // FE 0342
        gbc.setState(0x8918, 0xd72c, 0x5000, 0xf6f, 0xbb82, 0x778e, 0x1, 0x0);
        gbc.writeMem(0x8918, { 0xfe, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd72c);
        EXPECT(gbc.pc(), 0x891a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8918), 0xfe);
        EXPECT(gbc.readMem(0x8919), 0x8f);
        // FE 0343
        gbc.setState(0x2ec7, 0x5a5e, 0xe7e0, 0x846c, 0x5e06, 0xe73e, 0x1, 0x1);
        gbc.writeMem(0x2ec7, { 0xfe, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5a5e);
        EXPECT(gbc.pc(), 0x2ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0344
        gbc.setState(0x7d8c, 0x86ca, 0x8470, 0x5ac4, 0xb2ba, 0x198b, 0x1, 0x0);
        gbc.writeMem(0x7d8c, { 0xfe, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x86ca);
        EXPECT(gbc.pc(), 0x7d8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0345
        gbc.setState(0xe032, 0x5660, 0x13f0, 0x2753, 0x555e, 0xc73c, 0x0, 0x0);
        gbc.writeMem(0xe032, { 0xfe, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5660);
        EXPECT(gbc.pc(), 0xe034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe032), 0xfe);
        EXPECT(gbc.readMem(0xe033), 0x88);
        // FE 0346
        gbc.setState(0xbd03, 0xad34, 0x9700, 0x2ba5, 0x7164, 0xedfd, 0x1, 0x1);
        gbc.writeMem(0xbd03, { 0xfe, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xad34);
        EXPECT(gbc.pc(), 0xbd05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd03), 0xfe);
        EXPECT(gbc.readMem(0xbd04), 0x47);
        // FE 0347
        gbc.setState(0xe852, 0x675, 0xbbe0, 0x193f, 0x5b75, 0xe578, 0x1, 0x0);
        gbc.writeMem(0xe852, { 0xfe, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x675);
        EXPECT(gbc.pc(), 0xe854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe852), 0xfe);
        EXPECT(gbc.readMem(0xe853), 0x64);
        // FE 0348
        gbc.setState(0x4421, 0xe99b, 0x5ef0, 0x44, 0x82df, 0x66ff, 0x0, 0x1);
        gbc.writeMem(0x4421, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe99b);
        EXPECT(gbc.pc(), 0x4423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0349
        gbc.setState(0x46a, 0x376d, 0xe260, 0x4ae7, 0xe5ce, 0xd4dc, 0x0, 0x1);
        gbc.writeMem(0x46a, { 0xfe, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x376d);
        EXPECT(gbc.pc(), 0x46c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 034A
        gbc.setState(0x9e58, 0x122, 0xb0d0, 0x95a, 0xd4b, 0x3a1b, 0x0, 0x1);
        gbc.writeMem(0x9e58, { 0xfe, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x122);
        EXPECT(gbc.pc(), 0x9e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e58), 0xfe);
        EXPECT(gbc.readMem(0x9e59), 0x87);
        // FE 034B
        gbc.setState(0x868, 0x694, 0xec90, 0xf038, 0xff62, 0xf6be, 0x0, 0x1);
        gbc.writeMem(0x868, { 0xfe, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x694);
        EXPECT(gbc.pc(), 0x86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 034C
        gbc.setState(0x1c1a, 0xbce0, 0x69a0, 0xd00a, 0x4193, 0x332, 0x1, 0x0);
        gbc.writeMem(0x1c1a, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbce0);
        EXPECT(gbc.pc(), 0x1c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 034D
        gbc.setState(0x76d3, 0x4a0e, 0xfd80, 0xa28a, 0x8959, 0x5b1c, 0x0, 0x1);
        gbc.writeMem(0x76d3, { 0xfe, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4a0e);
        EXPECT(gbc.pc(), 0x76d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 034F
        gbc.setState(0x4a8, 0x667c, 0x1ec0, 0xe0dd, 0x90bc, 0x8fe1, 0x0, 0x0);
        gbc.writeMem(0x4a8, { 0xfe, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x667c);
        EXPECT(gbc.pc(), 0x4aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0350
        gbc.setState(0x4888, 0x6307, 0x17b0, 0x8253, 0xb679, 0xf260, 0x1, 0x1);
        gbc.writeMem(0x4888, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6307);
        EXPECT(gbc.pc(), 0x488a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0351
        gbc.setState(0xa333, 0xf411, 0x1330, 0x2414, 0x292e, 0xbb18, 0x1, 0x1);
        gbc.writeMem(0xa333, { 0xfe, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf411);
        EXPECT(gbc.pc(), 0xa335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa333), 0xfe);
        EXPECT(gbc.readMem(0xa334), 0x90);
        // FE 0352
        gbc.setState(0x4812, 0x6453, 0x35f0, 0x4712, 0x4819, 0x6c73, 0x0, 0x0);
        gbc.writeMem(0x4812, { 0xfe, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6453);
        EXPECT(gbc.pc(), 0x4814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0353
        gbc.setState(0xd77c, 0x8fc8, 0x4b60, 0x6e2a, 0x3bf2, 0x5d4e, 0x1, 0x1);
        gbc.writeMem(0xd77c, { 0xfe, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8fc8);
        EXPECT(gbc.pc(), 0xd77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd77c), 0xfe);
        EXPECT(gbc.readMem(0xd77d), 0x5e);
        // FE 0354
        gbc.setState(0x6060, 0xd84e, 0xce80, 0xed80, 0xe12a, 0xf827, 0x1, 0x1);
        gbc.writeMem(0x6060, { 0xfe, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd84e);
        EXPECT(gbc.pc(), 0x6062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0355
        gbc.setState(0x772b, 0xa6e, 0xc1f0, 0xa9ac, 0x7882, 0x5a74, 0x1, 0x1);
        gbc.writeMem(0x772b, { 0xfe, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa6e);
        EXPECT(gbc.pc(), 0x772d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0356
        gbc.setState(0xac70, 0x1bfe, 0x2bd0, 0xe57f, 0xa678, 0x26d4, 0x0, 0x0);
        gbc.writeMem(0xac70, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0xac72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac70), 0xfe);
        EXPECT(gbc.readMem(0xac71), 0x1f);
        // FE 0357
        gbc.setState(0x45d, 0xe176, 0x2c20, 0x88a2, 0x4583, 0x2c79, 0x1, 0x0);
        gbc.writeMem(0x45d, { 0xfe, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe176);
        EXPECT(gbc.pc(), 0x45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0358
        gbc.setState(0x4eda, 0xa641, 0xa280, 0xbe7b, 0xcf56, 0x29a6, 0x0, 0x0);
        gbc.writeMem(0x4eda, { 0xfe, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa641);
        EXPECT(gbc.pc(), 0x4edc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0359
        gbc.setState(0x83b4, 0xb21, 0xadd0, 0x1a94, 0x9736, 0x85d, 0x0, 0x0);
        gbc.writeMem(0x83b4, { 0xfe, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb21);
        EXPECT(gbc.pc(), 0x83b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b4), 0xfe);
        EXPECT(gbc.readMem(0x83b5), 0xab);
        // FE 035A
        gbc.setState(0x793a, 0xe073, 0x6140, 0x38f7, 0xa79e, 0x893c, 0x1, 0x0);
        gbc.writeMem(0x793a, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe073);
        EXPECT(gbc.pc(), 0x793c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 035C
        gbc.setState(0x6a62, 0xb6a2, 0x8830, 0x961b, 0x6958, 0x77df, 0x0, 0x1);
        gbc.writeMem(0x6a62, { 0xfe, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb6a2);
        EXPECT(gbc.pc(), 0x6a64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 035D
        gbc.setState(0x7f4c, 0xdde4, 0x14e0, 0x8b0d, 0xa8b2, 0x5ef7, 0x1, 0x1);
        gbc.writeMem(0x7f4c, { 0xfe, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdde4);
        EXPECT(gbc.pc(), 0x7f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 035E
        gbc.setState(0xaf54, 0x44c7, 0x7350, 0x6947, 0x6f39, 0xe821, 0x0, 0x0);
        gbc.writeMem(0xaf54, { 0xfe, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x44c7);
        EXPECT(gbc.pc(), 0xaf56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf54), 0xfe);
        EXPECT(gbc.readMem(0xaf55), 0xbb);
        // FE 035F
        gbc.setState(0x4537, 0xde93, 0xc560, 0x279e, 0xe315, 0xe8ec, 0x0, 0x0);
        gbc.writeMem(0x4537, { 0xfe, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xde93);
        EXPECT(gbc.pc(), 0x4539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0360
        gbc.setState(0x627f, 0xc912, 0x7c80, 0xfda8, 0xd4ad, 0x8994, 0x1, 0x0);
        gbc.writeMem(0x627f, { 0xfe, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc912);
        EXPECT(gbc.pc(), 0x6281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0361
        gbc.setState(0xd15d, 0xb131, 0xe8e0, 0x218b, 0xfce7, 0x9ca, 0x0, 0x1);
        gbc.writeMem(0xd15d, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb131);
        EXPECT(gbc.pc(), 0xd15f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15d), 0xfe);
        EXPECT(gbc.readMem(0xd15e), 0xc1);
        // FE 0362
        gbc.setState(0x3857, 0xedba, 0x3700, 0xd97a, 0xe263, 0x6777, 0x0, 0x1);
        gbc.writeMem(0x3857, { 0xfe, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xedba);
        EXPECT(gbc.pc(), 0x3859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0363
        gbc.setState(0xa138, 0x6795, 0x5a0, 0x20d0, 0x56a1, 0xc8c0, 0x0, 0x0);
        gbc.writeMem(0xa138, { 0xfe, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6795);
        EXPECT(gbc.pc(), 0xa13a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa138), 0xfe);
        EXPECT(gbc.readMem(0xa139), 0x61);
        // FE 0364
        gbc.setState(0x83b5, 0xcf92, 0xd450, 0x933c, 0x6ed1, 0xf777, 0x0, 0x0);
        gbc.writeMem(0x83b5, { 0xfe, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcf92);
        EXPECT(gbc.pc(), 0x83b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b5), 0xfe);
        EXPECT(gbc.readMem(0x83b6), 0x9a);
        // FE 0365
        gbc.setState(0xc6b9, 0xbe8f, 0x4c30, 0xde1, 0xb58e, 0x5a03, 0x0, 0x0);
        gbc.writeMem(0xc6b9, { 0xfe, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbe8f);
        EXPECT(gbc.pc(), 0xc6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b9), 0xfe);
        EXPECT(gbc.readMem(0xc6ba), 0xff);
        // FE 0366
        gbc.setState(0xada4, 0x998a, 0x300, 0xf0f8, 0x3414, 0x60cd, 0x0, 0x0);
        gbc.writeMem(0xada4, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x998a);
        EXPECT(gbc.pc(), 0xada6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada4), 0xfe);
        EXPECT(gbc.readMem(0xada5), 0xc1);
        // FE 0367
        gbc.setState(0x7eb2, 0x9f92, 0x6090, 0x581f, 0x31ec, 0x65b8, 0x1, 0x1);
        gbc.writeMem(0x7eb2, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9f92);
        EXPECT(gbc.pc(), 0x7eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0368
        gbc.setState(0x41aa, 0x41, 0xbb90, 0x5ba4, 0x1772, 0x4126, 0x0, 0x1);
        gbc.writeMem(0x41aa, { 0xfe, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x41);
        EXPECT(gbc.pc(), 0x41ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0369
        gbc.setState(0x63a5, 0x2adb, 0x20e0, 0xe3f1, 0xd37e, 0xc9b5, 0x1, 0x0);
        gbc.writeMem(0x63a5, { 0xfe, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2adb);
        EXPECT(gbc.pc(), 0x63a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 036A
        gbc.setState(0x54d2, 0xe034, 0x10c0, 0xcf87, 0xfd15, 0x1040, 0x0, 0x1);
        gbc.writeMem(0x54d2, { 0xfe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe034);
        EXPECT(gbc.pc(), 0x54d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 036B
        gbc.setState(0x4ddd, 0x5aca, 0xcf10, 0x835c, 0x497d, 0x69b6, 0x0, 0x0);
        gbc.writeMem(0x4ddd, { 0xfe, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5aca);
        EXPECT(gbc.pc(), 0x4ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 036D
        gbc.setState(0x95b2, 0x19b2, 0xee10, 0xc20f, 0x1d8a, 0x5b8, 0x0, 0x1);
        gbc.writeMem(0x95b2, { 0xfe, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x19b2);
        EXPECT(gbc.pc(), 0x95b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b2), 0xfe);
        EXPECT(gbc.readMem(0x95b3), 0x72);
        // FE 036E
        gbc.setState(0xde41, 0x84b9, 0x88d0, 0x4d8a, 0x6914, 0x585a, 0x1, 0x0);
        gbc.writeMem(0xde41, { 0xfe, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x84b9);
        EXPECT(gbc.pc(), 0xde43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde41), 0xfe);
        EXPECT(gbc.readMem(0xde42), 0x8a);
        // FE 036F
        gbc.setState(0x92d1, 0x4a47, 0x8bf0, 0xe0b5, 0xdce0, 0x65d6, 0x0, 0x0);
        gbc.writeMem(0x92d1, { 0xfe, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4a47);
        EXPECT(gbc.pc(), 0x92d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d1), 0xfe);
        EXPECT(gbc.readMem(0x92d2), 0x4f);
        // FE 0370
        gbc.setState(0xc7a6, 0x355b, 0xd9c0, 0x36d5, 0x5309, 0x147, 0x0, 0x0);
        gbc.writeMem(0xc7a6, { 0xfe, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x355b);
        EXPECT(gbc.pc(), 0xc7a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7a6), 0xfe);
        EXPECT(gbc.readMem(0xc7a7), 0x83);
        // FE 0371
        gbc.setState(0x2dab, 0x206b, 0xfff0, 0x8b2, 0xd272, 0x614e, 0x0, 0x1);
        gbc.writeMem(0x2dab, { 0xfe, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x206b);
        EXPECT(gbc.pc(), 0x2dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0373
        gbc.setState(0x339e, 0x4108, 0x7980, 0x9734, 0x3ad1, 0xaf53, 0x0, 0x0);
        gbc.writeMem(0x339e, { 0xfe, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4108);
        EXPECT(gbc.pc(), 0x33a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0374
        gbc.setState(0x3371, 0xaeaa, 0x9c20, 0xbac5, 0x5da9, 0x6c60, 0x1, 0x1);
        gbc.writeMem(0x3371, { 0xfe, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xaeaa);
        EXPECT(gbc.pc(), 0x3373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0375
        gbc.setState(0x3f1f, 0xf3de, 0x5e50, 0x1555, 0x497a, 0x76f6, 0x1, 0x1);
        gbc.writeMem(0x3f1f, { 0xfe, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf3de);
        EXPECT(gbc.pc(), 0x3f21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0376
        gbc.setState(0x2d80, 0xb246, 0x8c90, 0xef6c, 0xcd25, 0xd4de, 0x1, 0x0);
        gbc.writeMem(0x2d80, { 0xfe, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb246);
        EXPECT(gbc.pc(), 0x2d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0377
        gbc.setState(0x21e4, 0xd6c5, 0x61b0, 0x506b, 0xd725, 0xbf00, 0x1, 0x0);
        gbc.writeMem(0x21e4, { 0xfe, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd6c5);
        EXPECT(gbc.pc(), 0x21e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0378
        gbc.setState(0xe08c, 0x8b44, 0xe7e0, 0xbc6a, 0x382a, 0xcfdb, 0x0, 0x0);
        gbc.writeMem(0xe08c, { 0xfe, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8b44);
        EXPECT(gbc.pc(), 0xe08e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe08c), 0xfe);
        EXPECT(gbc.readMem(0xe08d), 0x85);
        // FE 0379
        gbc.setState(0x2913, 0x7348, 0xeb90, 0xf594, 0x4d3c, 0x4210, 0x1, 0x0);
        gbc.writeMem(0x2913, { 0xfe, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7348);
        EXPECT(gbc.pc(), 0x2915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 037A
        gbc.setState(0x3794, 0xa819, 0x1860, 0x4061, 0x1f4e, 0xc772, 0x0, 0x1);
        gbc.writeMem(0x3794, { 0xfe, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa819);
        EXPECT(gbc.pc(), 0x3796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 037B
        gbc.setState(0xd7fc, 0xe1f0, 0xc9b0, 0xc209, 0x2a76, 0x4cb8, 0x0, 0x1);
        gbc.writeMem(0xd7fc, { 0xfe, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe1f0);
        EXPECT(gbc.pc(), 0xd7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7fc), 0xfe);
        EXPECT(gbc.readMem(0xd7fd), 0xfc);
        // FE 037C
        gbc.setState(0x18d8, 0x5cf4, 0xdcf0, 0x774c, 0x5b88, 0xc6fb, 0x0, 0x0);
        gbc.writeMem(0x18d8, { 0xfe, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5cf4);
        EXPECT(gbc.pc(), 0x18da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 037D
        gbc.setState(0x3f6, 0x9fa2, 0xa2c0, 0xd393, 0x521a, 0xf00a, 0x0, 0x0);
        gbc.writeMem(0x3f6, { 0xfe, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9fa2);
        EXPECT(gbc.pc(), 0x3f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 037E
        gbc.setState(0xe114, 0x4e52, 0xc130, 0x154c, 0x33ad, 0x2814, 0x1, 0x1);
        gbc.writeMem(0xe114, { 0xfe, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4e52);
        EXPECT(gbc.pc(), 0xe116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe114), 0xfe);
        EXPECT(gbc.readMem(0xe115), 0x86);
        // FE 037F
        gbc.setState(0x8932, 0x9046, 0xdee0, 0x5f00, 0x1f43, 0xda59, 0x1, 0x0);
        gbc.writeMem(0x8932, { 0xfe, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9046);
        EXPECT(gbc.pc(), 0x8934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8932), 0xfe);
        EXPECT(gbc.readMem(0x8933), 0x30);
        // FE 0380
        gbc.setState(0xa508, 0x4558, 0xd000, 0x9c9a, 0x88c5, 0xc60f, 0x0, 0x0);
        gbc.writeMem(0xa508, { 0xfe, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4558);
        EXPECT(gbc.pc(), 0xa50a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa508), 0xfe);
        EXPECT(gbc.readMem(0xa509), 0x1a);
        // FE 0381
        gbc.setState(0x79e8, 0x9841, 0x41e0, 0xc727, 0x50ec, 0xea5c, 0x1, 0x0);
        gbc.writeMem(0x79e8, { 0xfe, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9841);
        EXPECT(gbc.pc(), 0x79ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0382
        gbc.setState(0x23ee, 0x631d, 0x2b20, 0x5823, 0x703d, 0xb96b, 0x1, 0x1);
        gbc.writeMem(0x23ee, { 0xfe, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x631d);
        EXPECT(gbc.pc(), 0x23f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0383
        gbc.setState(0x837d, 0xc443, 0x9dc0, 0x7e42, 0x8058, 0x17b6, 0x1, 0x1);
        gbc.writeMem(0x837d, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc443);
        EXPECT(gbc.pc(), 0x837f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837d), 0xfe);
        EXPECT(gbc.readMem(0x837e), 0xa1);
        // FE 0384
        gbc.setState(0x8cda, 0xf882, 0x7cd0, 0x96b4, 0x86f9, 0x1d0b, 0x0, 0x0);
        gbc.writeMem(0x8cda, { 0xfe, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf882);
        EXPECT(gbc.pc(), 0x8cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cda), 0xfe);
        EXPECT(gbc.readMem(0x8cdb), 0x53);
        // FE 0385
        gbc.setState(0xbd3d, 0x1dbe, 0x58f0, 0xf38d, 0x1461, 0x6a09, 0x1, 0x0);
        gbc.writeMem(0xbd3d, { 0xfe, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1dbe);
        EXPECT(gbc.pc(), 0xbd3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd3d), 0xfe);
        EXPECT(gbc.readMem(0xbd3e), 0x2d);
        // FE 0386
        gbc.setState(0x55d0, 0x2db3, 0xe080, 0xa37c, 0x5f1b, 0xb37b, 0x0, 0x0);
        gbc.writeMem(0x55d0, { 0xfe, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2db3);
        EXPECT(gbc.pc(), 0x55d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0387
        gbc.setState(0xb5b5, 0xe18b, 0xebb0, 0xc480, 0x70a5, 0xe466, 0x1, 0x1);
        gbc.writeMem(0xb5b5, { 0xfe, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe18b);
        EXPECT(gbc.pc(), 0xb5b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b5), 0xfe);
        EXPECT(gbc.readMem(0xb5b6), 0xce);
        // FE 0388
        gbc.setState(0x3263, 0x2d49, 0x68d0, 0xa81b, 0x17c7, 0xbf18, 0x0, 0x0);
        gbc.writeMem(0x3263, { 0xfe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2d49);
        EXPECT(gbc.pc(), 0x3265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0389
        gbc.setState(0x1e05, 0x1bac, 0xdb50, 0xc16c, 0xe8fa, 0x66fc, 0x1, 0x1);
        gbc.writeMem(0x1e05, { 0xfe, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1bac);
        EXPECT(gbc.pc(), 0x1e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 038A
        gbc.setState(0x43fb, 0xa1fc, 0xd780, 0x136e, 0x795, 0x64d0, 0x1, 0x1);
        gbc.writeMem(0x43fb, { 0xfe, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa1fc);
        EXPECT(gbc.pc(), 0x43fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 038B
        gbc.setState(0x26f9, 0x692d, 0x79c0, 0x5be9, 0xee4d, 0x222b, 0x0, 0x1);
        gbc.writeMem(0x26f9, { 0xfe, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x692d);
        EXPECT(gbc.pc(), 0x26fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 038C
        gbc.setState(0x749b, 0xa10a, 0x1f40, 0x1661, 0x3eaa, 0x816d, 0x1, 0x1);
        gbc.writeMem(0x749b, { 0xfe, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa10a);
        EXPECT(gbc.pc(), 0x749d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 038D
        gbc.setState(0xea36, 0xef1c, 0x9b50, 0x8838, 0x6491, 0xca70, 0x1, 0x0);
        gbc.writeMem(0xea36, { 0xfe, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xef1c);
        EXPECT(gbc.pc(), 0xea38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea36), 0xfe);
        EXPECT(gbc.readMem(0xea37), 0x42);
        // FE 038E
        gbc.setState(0xa99b, 0x2e7f, 0x7970, 0x8fd9, 0x1919, 0x1acd, 0x0, 0x1);
        gbc.writeMem(0xa99b, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2e7f);
        EXPECT(gbc.pc(), 0xa99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99b), 0xfe);
        EXPECT(gbc.readMem(0xa99c), 0xe5);
        // FE 038F
        gbc.setState(0x54e0, 0xb77d, 0x3e90, 0x978, 0xae56, 0xb85d, 0x1, 0x0);
        gbc.writeMem(0x54e0, { 0xfe, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb77d);
        EXPECT(gbc.pc(), 0x54e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0390
        gbc.setState(0x2170, 0x649e, 0xf90, 0x5698, 0xcea2, 0x39ff, 0x1, 0x0);
        gbc.writeMem(0x2170, { 0xfe, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x649e);
        EXPECT(gbc.pc(), 0x2172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0392
        gbc.setState(0x691f, 0xb9f5, 0x3020, 0xe4fc, 0x4bb9, 0x6317, 0x0, 0x0);
        gbc.writeMem(0x691f, { 0xfe, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb9f5);
        EXPECT(gbc.pc(), 0x6921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0393
        gbc.setState(0x167b, 0xcde4, 0x82a0, 0xf7f8, 0x9fbd, 0x1ef2, 0x1, 0x0);
        gbc.writeMem(0x167b, { 0xfe, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcde4);
        EXPECT(gbc.pc(), 0x167d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 0394
        gbc.setState(0x5d2c, 0x9d20, 0x98d0, 0x9ecc, 0x5176, 0xfbe9, 0x1, 0x0);
        gbc.writeMem(0x5d2c, { 0xfe, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9d20);
        EXPECT(gbc.pc(), 0x5d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 0395
        gbc.setState(0x3591, 0xa26e, 0x99d0, 0xefa1, 0x1661, 0xc042, 0x0, 0x1);
        gbc.writeMem(0x3591, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa26e);
        EXPECT(gbc.pc(), 0x3593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0396
        gbc.setState(0x7058, 0xe25b, 0x5500, 0xa431, 0xbec8, 0x4cf5, 0x0, 0x0);
        gbc.writeMem(0x7058, { 0xfe, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe25b);
        EXPECT(gbc.pc(), 0x705a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 0397
        gbc.setState(0xba90, 0x77e8, 0xa420, 0x2e0, 0x6091, 0xb477, 0x0, 0x0);
        gbc.writeMem(0xba90, { 0xfe, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x77e8);
        EXPECT(gbc.pc(), 0xba92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba90), 0xfe);
        EXPECT(gbc.readMem(0xba91), 0x16);
        // FE 0398
        gbc.setState(0x2eac, 0xff3d, 0xcc10, 0xac9f, 0x7c6e, 0xab5b, 0x0, 0x0);
        gbc.writeMem(0x2eac, { 0xfe, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xff3d);
        EXPECT(gbc.pc(), 0x2eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 0399
        gbc.setState(0x6e3f, 0x9ce6, 0xe170, 0xd84b, 0x63c2, 0x1364, 0x1, 0x0);
        gbc.writeMem(0x6e3f, { 0xfe, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9ce6);
        EXPECT(gbc.pc(), 0x6e41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 039A
        gbc.setState(0x9152, 0x69e8, 0xdc80, 0x823f, 0x98dd, 0x4bb4, 0x0, 0x1);
        gbc.writeMem(0x9152, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x69e8);
        EXPECT(gbc.pc(), 0x9154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9152), 0xfe);
        EXPECT(gbc.readMem(0x9153), 0x1f);
        // FE 039B
        gbc.setState(0x2c49, 0xf511, 0xe8e0, 0x264, 0xce26, 0x8d45, 0x0, 0x0);
        gbc.writeMem(0x2c49, { 0xfe, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf511);
        EXPECT(gbc.pc(), 0x2c4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 039C
        gbc.setState(0xe82c, 0xfd93, 0xfd90, 0x315d, 0x88ff, 0xad78, 0x1, 0x0);
        gbc.writeMem(0xe82c, { 0xfe, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfd93);
        EXPECT(gbc.pc(), 0xe82e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82c), 0xfe);
        EXPECT(gbc.readMem(0xe82d), 0x30);
        // FE 039D
        gbc.setState(0x185, 0x3b79, 0xf420, 0x95f8, 0x497, 0xafb3, 0x1, 0x1);
        gbc.writeMem(0x185, { 0xfe, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3b79);
        EXPECT(gbc.pc(), 0x187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 039E
        gbc.setState(0x6643, 0x67d4, 0x7d90, 0x69a2, 0xd356, 0x968, 0x0, 0x1);
        gbc.writeMem(0x6643, { 0xfe, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x67d4);
        EXPECT(gbc.pc(), 0x6645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 039F
        gbc.setState(0x4ed3, 0xbe21, 0x8fc0, 0x208e, 0x6ba6, 0x522b, 0x1, 0x1);
        gbc.writeMem(0x4ed3, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbe21);
        EXPECT(gbc.pc(), 0x4ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03A0
        gbc.setState(0x8096, 0x4ac1, 0x2c10, 0xb42b, 0x7aa5, 0x2ddf, 0x1, 0x0);
        gbc.writeMem(0x8096, { 0xfe, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4ac1);
        EXPECT(gbc.pc(), 0x8098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8096), 0xfe);
        EXPECT(gbc.readMem(0x8097), 0x2c);
        // FE 03A1
        gbc.setState(0x4307, 0x24fe, 0x90a0, 0xc284, 0xc167, 0x6831, 0x0, 0x1);
        gbc.writeMem(0x4307, { 0xfe, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x24fe);
        EXPECT(gbc.pc(), 0x4309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 03A2
        gbc.setState(0x2c28, 0xf14f, 0x5670, 0x9f6e, 0x9e8b, 0x8360, 0x1, 0x1);
        gbc.writeMem(0x2c28, { 0xfe, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf14f);
        EXPECT(gbc.pc(), 0x2c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03A3
        gbc.setState(0x4b59, 0x29c, 0x7540, 0x4bf9, 0x3de6, 0xad36, 0x1, 0x1);
        gbc.writeMem(0x4b59, { 0xfe, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x29c);
        EXPECT(gbc.pc(), 0x4b5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 03A4
        gbc.setState(0x46b4, 0x78f, 0x9810, 0xc038, 0x7ef8, 0xd5f6, 0x1, 0x0);
        gbc.writeMem(0x46b4, { 0xfe, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x78f);
        EXPECT(gbc.pc(), 0x46b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03A6
        gbc.setState(0xe3aa, 0x649d, 0xb0, 0xd86, 0x556d, 0x46a, 0x0, 0x1);
        gbc.writeMem(0xe3aa, { 0xfe, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x649d);
        EXPECT(gbc.pc(), 0xe3ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3aa), 0xfe);
        EXPECT(gbc.readMem(0xe3ab), 0x32);
        // FE 03A7
        gbc.setState(0x40e4, 0xb953, 0x4ab0, 0xd5d7, 0x4a71, 0xa2dc, 0x1, 0x0);
        gbc.writeMem(0x40e4, { 0xfe, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb953);
        EXPECT(gbc.pc(), 0x40e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03A8
        gbc.setState(0xef60, 0xf78d, 0xc750, 0x3b89, 0xefc3, 0xded0, 0x1, 0x1);
        gbc.writeMem(0xef60, { 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf78d);
        EXPECT(gbc.pc(), 0xef62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef60), 0xfe);
        EXPECT(gbc.readMem(0xef61), 0x1f);
        // FE 03A9
        gbc.setState(0xa8f, 0x8a4d, 0x3b40, 0xc747, 0x14c3, 0x5d64, 0x0, 0x0);
        gbc.writeMem(0xa8f, { 0xfe, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8a4d);
        EXPECT(gbc.pc(), 0xa91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03AA
        gbc.setState(0x9a34, 0x1fa4, 0xcab0, 0xbc1b, 0x78aa, 0x993d, 0x1, 0x0);
        gbc.writeMem(0x9a34, { 0xfe, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1fa4);
        EXPECT(gbc.pc(), 0x9a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a34), 0xfe);
        EXPECT(gbc.readMem(0x9a35), 0xce);
        // FE 03AB
        gbc.setState(0x5237, 0x31bf, 0x2580, 0x991f, 0x9d29, 0xfe55, 0x0, 0x1);
        gbc.writeMem(0x5237, { 0xfe, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x31bf);
        EXPECT(gbc.pc(), 0x5239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03AC
        gbc.setState(0xc972, 0x4758, 0xe290, 0x6e80, 0x10a1, 0x4501, 0x0, 0x1);
        gbc.writeMem(0xc972, { 0xfe, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4758);
        EXPECT(gbc.pc(), 0xc974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc972), 0xfe);
        EXPECT(gbc.readMem(0xc973), 0x1a);
        // FE 03AD
        gbc.setState(0x732b, 0x8da0, 0x8b60, 0xf6ef, 0xb01c, 0xdc87, 0x1, 0x1);
        gbc.writeMem(0x732b, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8da0);
        EXPECT(gbc.pc(), 0x732d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03AF
        gbc.setState(0x601d, 0x8752, 0x4710, 0xab1b, 0x4dbd, 0x7e4c, 0x0, 0x1);
        gbc.writeMem(0x601d, { 0xfe, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8752);
        EXPECT(gbc.pc(), 0x601f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03B0
        gbc.setState(0x362c, 0xde8b, 0x1130, 0x3c93, 0xecad, 0x7cda, 0x1, 0x0);
        gbc.writeMem(0x362c, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xde8b);
        EXPECT(gbc.pc(), 0x362e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03B1
        gbc.setState(0x8d96, 0xf301, 0x9740, 0x8c7d, 0xdfa4, 0x2ac3, 0x1, 0x1);
        gbc.writeMem(0x8d96, { 0xfe, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf301);
        EXPECT(gbc.pc(), 0x8d98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d96), 0xfe);
        EXPECT(gbc.readMem(0x8d97), 0x21);
        // FE 03B2
        gbc.setState(0xb1a2, 0xe708, 0x1920, 0xadce, 0xaca, 0xada6, 0x0, 0x0);
        gbc.writeMem(0xb1a2, { 0xfe, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe708);
        EXPECT(gbc.pc(), 0xb1a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a2), 0xfe);
        EXPECT(gbc.readMem(0xb1a3), 0x35);
        // FE 03B3
        gbc.setState(0x9792, 0x7bc6, 0x1430, 0xcbe7, 0xe326, 0xc82b, 0x0, 0x0);
        gbc.writeMem(0x9792, { 0xfe, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7bc6);
        EXPECT(gbc.pc(), 0x9794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9792), 0xfe);
        EXPECT(gbc.readMem(0x9793), 0x39);
        // FE 03B4
        gbc.setState(0x4a8a, 0x76ea, 0x3090, 0x364f, 0x375c, 0x484c, 0x0, 0x1);
        gbc.writeMem(0x4a8a, { 0xfe, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x76ea);
        EXPECT(gbc.pc(), 0x4a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03B5
        gbc.setState(0xa6ee, 0x84ca, 0xbf0, 0x7e5e, 0x5cbe, 0xc264, 0x0, 0x1);
        gbc.writeMem(0xa6ee, { 0xfe, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x84ca);
        EXPECT(gbc.pc(), 0xa6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6ee), 0xfe);
        EXPECT(gbc.readMem(0xa6ef), 0x76);
        // FE 03B6
        gbc.setState(0x986b, 0xdaec, 0xd350, 0xc6a, 0xa51e, 0x38cf, 0x0, 0x0);
        gbc.writeMem(0x986b, { 0xfe, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xdaec);
        EXPECT(gbc.pc(), 0x986d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x986b), 0xfe);
        EXPECT(gbc.readMem(0x986c), 0x2);
        // FE 03B7
        gbc.setState(0xb68a, 0x2c3, 0xbd80, 0x777f, 0xdb66, 0x9b97, 0x1, 0x0);
        gbc.writeMem(0xb68a, { 0xfe, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2c3);
        EXPECT(gbc.pc(), 0xb68c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb68a), 0xfe);
        EXPECT(gbc.readMem(0xb68b), 0x19);
        // FE 03B8
        gbc.setState(0xee26, 0x769a, 0xcde0, 0x9739, 0x971e, 0xea7d, 0x0, 0x0);
        gbc.writeMem(0xee26, { 0xfe, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x769a);
        EXPECT(gbc.pc(), 0xee28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee26), 0xfe);
        EXPECT(gbc.readMem(0xee27), 0x6);
        // FE 03B9
        gbc.setState(0x5e1, 0x30b1, 0x4860, 0xbd03, 0xcbb6, 0xb9f6, 0x0, 0x1);
        gbc.writeMem(0x5e1, { 0xfe, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x30b1);
        EXPECT(gbc.pc(), 0x5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03BA
        gbc.setState(0x7d28, 0x54fa, 0x93d0, 0x3878, 0x8671, 0x19ec, 0x0, 0x1);
        gbc.writeMem(0x7d28, { 0xfe, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x54fa);
        EXPECT(gbc.pc(), 0x7d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03BB
        gbc.setState(0x46f6, 0xce3f, 0xb4e0, 0x4fb7, 0x1d3, 0xd06e, 0x1, 0x1);
        gbc.writeMem(0x46f6, { 0xfe, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xce3f);
        EXPECT(gbc.pc(), 0x46f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FE 03BC
        gbc.setState(0xd04, 0x9c8c, 0xf4a0, 0xeaab, 0x6553, 0xa4e3, 0x1, 0x1);
        gbc.writeMem(0xd04, { 0xfe, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9c8c);
        EXPECT(gbc.pc(), 0xd06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03BD
        gbc.setState(0x957f, 0x5af0, 0x8100, 0x597a, 0xc39b, 0x8985, 0x0, 0x1);
        gbc.writeMem(0x957f, { 0xfe, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5af0);
        EXPECT(gbc.pc(), 0x9581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957f), 0xfe);
        EXPECT(gbc.readMem(0x9580), 0xdb);
        // FE 03BE
        gbc.setState(0x98cb, 0xcb42, 0x5ed0, 0xb31a, 0x5af2, 0xb9d3, 0x0, 0x1);
        gbc.writeMem(0x98cb, { 0xfe, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcb42);
        EXPECT(gbc.pc(), 0x98cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98cb), 0xfe);
        EXPECT(gbc.readMem(0x98cc), 0xb);
        // FE 03BF
        gbc.setState(0xb9b9, 0x8db3, 0x47d0, 0xf42e, 0xc7eb, 0xbcaa, 0x0, 0x0);
        gbc.writeMem(0xb9b9, { 0xfe, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8db3);
        EXPECT(gbc.pc(), 0xb9bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b9), 0xfe);
        EXPECT(gbc.readMem(0xb9ba), 0x9f);
        // FE 03C0
        gbc.setState(0xcf12, 0xe25a, 0x1700, 0x3ad7, 0xba31, 0xe5d0, 0x0, 0x1);
        gbc.writeMem(0xcf12, { 0xfe, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe25a);
        EXPECT(gbc.pc(), 0xcf14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf12), 0xfe);
        EXPECT(gbc.readMem(0xcf13), 0x34);
        // FE 03C1
        gbc.setState(0x7b4a, 0x99b9, 0x9e90, 0x308f, 0xa9d8, 0x1c94, 0x1, 0x0);
        gbc.writeMem(0x7b4a, { 0xfe, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x99b9);
        EXPECT(gbc.pc(), 0x7b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03C2
        gbc.setState(0x5acf, 0x3f97, 0x2470, 0xcd18, 0x1fcc, 0x1f58, 0x1, 0x1);
        gbc.writeMem(0x5acf, { 0xfe, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3f97);
        EXPECT(gbc.pc(), 0x5ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03C3
        gbc.setState(0xe22e, 0xa1ce, 0x67a0, 0x10cd, 0x99bf, 0x42d, 0x0, 0x0);
        gbc.writeMem(0xe22e, { 0xfe, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa1ce);
        EXPECT(gbc.pc(), 0xe230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22e), 0xfe);
        EXPECT(gbc.readMem(0xe22f), 0x5f);
        // FE 03C4
        gbc.setState(0xec98, 0x87a7, 0x4a40, 0xa42c, 0x2399, 0x196f, 0x1, 0x0);
        gbc.writeMem(0xec98, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x87a7);
        EXPECT(gbc.pc(), 0xec9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec98), 0xfe);
        EXPECT(gbc.readMem(0xec99), 0xf9);
        // FE 03C5
        gbc.setState(0x312e, 0x76, 0x11f0, 0xa515, 0x9066, 0x8d4b, 0x0, 0x1);
        gbc.writeMem(0x312e, { 0xfe, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x76);
        EXPECT(gbc.pc(), 0x3130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03C6
        gbc.setState(0xb81c, 0xde32, 0x2af0, 0xc246, 0x45a4, 0x7209, 0x1, 0x1);
        gbc.writeMem(0xb81c, { 0xfe, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xde32);
        EXPECT(gbc.pc(), 0xb81e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb81c), 0xfe);
        EXPECT(gbc.readMem(0xb81d), 0x3e);
        // FE 03C7
        gbc.setState(0x50b0, 0xa773, 0x4e90, 0x18c9, 0x4edc, 0xecd9, 0x0, 0x0);
        gbc.writeMem(0x50b0, { 0xfe, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa773);
        EXPECT(gbc.pc(), 0x50b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03C8
        gbc.setState(0xe590, 0x56d0, 0x2e70, 0x786a, 0x265, 0x3ca5, 0x0, 0x0);
        gbc.writeMem(0xe590, { 0xfe, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x56d0);
        EXPECT(gbc.pc(), 0xe592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe590), 0xfe);
        EXPECT(gbc.readMem(0xe591), 0xef);
        // FE 03C9
        gbc.setState(0xa600, 0x47c, 0x44c0, 0x8c62, 0xdd17, 0x62f, 0x0, 0x1);
        gbc.writeMem(0xa600, { 0xfe, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x47c);
        EXPECT(gbc.pc(), 0xa602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa600), 0xfe);
        EXPECT(gbc.readMem(0xa601), 0xd3);
        // FE 03CA
        gbc.setState(0xa99e, 0xb74e, 0xb250, 0xbb51, 0x6526, 0xb34a, 0x1, 0x0);
        gbc.writeMem(0xa99e, { 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb74e);
        EXPECT(gbc.pc(), 0xa9a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99e), 0xfe);
        EXPECT(gbc.readMem(0xa99f), 0xf7);
        // FE 03CB
        gbc.setState(0x9319, 0xb822, 0xbe60, 0x232f, 0x340d, 0x44a3, 0x0, 0x0);
        gbc.writeMem(0x9319, { 0xfe, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb822);
        EXPECT(gbc.pc(), 0x931b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9319), 0xfe);
        EXPECT(gbc.readMem(0x931a), 0x9);
        // FE 03CC
        gbc.setState(0x4a7c, 0x9be7, 0xfb50, 0x8b70, 0x2901, 0x36e9, 0x0, 0x0);
        gbc.writeMem(0x4a7c, { 0xfe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9be7);
        EXPECT(gbc.pc(), 0x4a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03CD
        gbc.setState(0xd299, 0xb3b4, 0x9700, 0x831f, 0x4c63, 0xd013, 0x1, 0x0);
        gbc.writeMem(0xd299, { 0xfe, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb3b4);
        EXPECT(gbc.pc(), 0xd29b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd299), 0xfe);
        EXPECT(gbc.readMem(0xd29a), 0x84);
        // FE 03CE
        gbc.setState(0xaecb, 0xbb65, 0x5100, 0xe03b, 0xe6cd, 0x910, 0x0, 0x0);
        gbc.writeMem(0xaecb, { 0xfe, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbb65);
        EXPECT(gbc.pc(), 0xaecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaecb), 0xfe);
        EXPECT(gbc.readMem(0xaecc), 0xfa);
        // FE 03CF
        gbc.setState(0x6fea, 0x9b3b, 0x57f0, 0xff82, 0x95ee, 0x9d87, 0x0, 0x0);
        gbc.writeMem(0x6fea, { 0xfe, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9b3b);
        EXPECT(gbc.pc(), 0x6fec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03D0
        gbc.setState(0xceeb, 0xfa05, 0x1970, 0x6411, 0xd886, 0xc4a5, 0x0, 0x0);
        gbc.writeMem(0xceeb, { 0xfe, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfa05);
        EXPECT(gbc.pc(), 0xceed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceeb), 0xfe);
        EXPECT(gbc.readMem(0xceec), 0xd5);
        // FE 03D1
        gbc.setState(0x8e52, 0xcf55, 0xa4e0, 0xb37d, 0x312f, 0x648c, 0x0, 0x1);
        gbc.writeMem(0x8e52, { 0xfe, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcf55);
        EXPECT(gbc.pc(), 0x8e54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e52), 0xfe);
        EXPECT(gbc.readMem(0x8e53), 0x5c);
        // FE 03D2
        gbc.setState(0x6c83, 0x240b, 0x4a60, 0xb6e1, 0xd7e1, 0xdf0, 0x1, 0x0);
        gbc.writeMem(0x6c83, { 0xfe, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x240b);
        EXPECT(gbc.pc(), 0x6c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03D4
        gbc.setState(0x3d40, 0x4b11, 0xdaa0, 0x6d06, 0x6dcd, 0x5120, 0x0, 0x1);
        gbc.writeMem(0x3d40, { 0xfe, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4b11);
        EXPECT(gbc.pc(), 0x3d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03D6
        gbc.setState(0x97be, 0x7b42, 0xe580, 0x481b, 0x3cdf, 0xbbd2, 0x0, 0x1);
        gbc.writeMem(0x97be, { 0xfe, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7b42);
        EXPECT(gbc.pc(), 0x97c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97be), 0xfe);
        EXPECT(gbc.readMem(0x97bf), 0xf0);
        // FE 03D7
        gbc.setState(0x93e7, 0xa684, 0x6010, 0xae45, 0x5e8, 0x32cf, 0x0, 0x1);
        gbc.writeMem(0x93e7, { 0xfe, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa684);
        EXPECT(gbc.pc(), 0x93e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e7), 0xfe);
        EXPECT(gbc.readMem(0x93e8), 0xda);
        // FE 03D8
        gbc.setState(0x81e8, 0xaf8a, 0xff20, 0xeee8, 0xd663, 0xeab9, 0x0, 0x0);
        gbc.writeMem(0x81e8, { 0xfe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xaf8a);
        EXPECT(gbc.pc(), 0x81ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e8), 0xfe);
        EXPECT(gbc.readMem(0x81e9), 0x98);
        // FE 03D9
        gbc.setState(0x704b, 0xe155, 0xa40, 0x874f, 0xe72d, 0x97da, 0x1, 0x0);
        gbc.writeMem(0x704b, { 0xfe, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe155);
        EXPECT(gbc.pc(), 0x704d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03DA
        gbc.setState(0x50f, 0xaa26, 0xce50, 0x4dc0, 0x6a84, 0x464b, 0x1, 0x1);
        gbc.writeMem(0x50f, { 0xfe, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0x511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03DB
        gbc.setState(0x8a71, 0xa89d, 0x3ab0, 0x670f, 0xd946, 0xf352, 0x1, 0x0);
        gbc.writeMem(0x8a71, { 0xfe, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa89d);
        EXPECT(gbc.pc(), 0x8a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a71), 0xfe);
        EXPECT(gbc.readMem(0x8a72), 0xe1);
        // FE 03DC
        gbc.setState(0x708d, 0x4be8, 0x7af0, 0x9be1, 0xa4c3, 0xa9fd, 0x1, 0x1);
        gbc.writeMem(0x708d, { 0xfe, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4be8);
        EXPECT(gbc.pc(), 0x708f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FE 03DD
        gbc.setState(0x3724, 0x1659, 0x1340, 0xa88d, 0xf553, 0xfb6, 0x0, 0x1);
        gbc.writeMem(0x3724, { 0xfe, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1659);
        EXPECT(gbc.pc(), 0x3726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FE 03DE
        gbc.setState(0xd316, 0x3f2c, 0x3360, 0xcaae, 0x5506, 0x8f38, 0x0, 0x1);
        gbc.writeMem(0xd316, { 0xfe, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3f2c);
        EXPECT(gbc.pc(), 0xd318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd316), 0xfe);
        EXPECT(gbc.readMem(0xd317), 0x81);
        // FE 03DF
        gbc.setState(0x9296, 0x1dcb, 0xb090, 0xef2b, 0xe6ff, 0xcfca, 0x1, 0x1);
        gbc.writeMem(0x9296, { 0xfe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1dcb);
        EXPECT(gbc.pc(), 0x9298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9296), 0xfe);
        EXPECT(gbc.readMem(0x9297), 0xf9);
        // FE 03E0
        gbc.setState(0xc272, 0x9736, 0x9120, 0x9b96, 0x12a1, 0x9921, 0x1, 0x1);
        gbc.writeMem(0xc272, { 0xfe, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9736);
        EXPECT(gbc.pc(), 0xc274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc272), 0xfe);
        EXPECT(gbc.readMem(0xc273), 0x38);
        // FE 03E1
        gbc.setState(0x283c, 0x1e2c, 0x1de0, 0xad14, 0x194e, 0xb1e8, 0x0, 0x1);
        gbc.writeMem(0x283c, { 0xfe, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1e2c);
        EXPECT(gbc.pc(), 0x283e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03E2
        gbc.setState(0x2d9, 0x256f, 0x7680, 0xba96, 0xac32, 0xd22f, 0x1, 0x1);
        gbc.writeMem(0x2d9, { 0xfe, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x256f);
        EXPECT(gbc.pc(), 0x2db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03E3
        gbc.setState(0xd620, 0x6afe, 0xcf70, 0xc9f2, 0x8ec7, 0x9547, 0x0, 0x0);
        gbc.writeMem(0xd620, { 0xfe, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6afe);
        EXPECT(gbc.pc(), 0xd622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd620), 0xfe);
        EXPECT(gbc.readMem(0xd621), 0x99);
        // FE 03E4
        gbc.setState(0xd310, 0x9287, 0x4930, 0xcd7e, 0x9657, 0x3f61, 0x1, 0x0);
        gbc.writeMem(0xd310, { 0xfe, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9287);
        EXPECT(gbc.pc(), 0xd312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd310), 0xfe);
        EXPECT(gbc.readMem(0xd311), 0xdb);
        // FE 03E5
        gbc.setState(0x301, 0x1dba, 0x46f0, 0xcc1b, 0x4711, 0x52e4, 0x0, 0x0);
        gbc.writeMem(0x301, { 0xfe, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1dba);
        EXPECT(gbc.pc(), 0x303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03E6
        gbc.setState(0x180d, 0x8bf1, 0x9780, 0x355b, 0xd4c, 0x358c, 0x0, 0x1);
        gbc.writeMem(0x180d, { 0xfe, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8bf1);
        EXPECT(gbc.pc(), 0x180f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FE 03E7
        gbc.setState(0x9295, 0x38d9, 0xa2a0, 0xf4a3, 0x1ef4, 0xba4c, 0x1, 0x0);
        gbc.writeMem(0x9295, { 0xfe, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x38d9);
        EXPECT(gbc.pc(), 0x9297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9295), 0xfe);
        EXPECT(gbc.readMem(0x9296), 0xf);
    }
}
#endif
