    TEST(gbcemu, opcode_e7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // E7 0001
        gbc.setState(0xcc5a, 0xda74, 0x6920, 0x8f49, 0x3199, 0x9ca0, 0x1, 0x1);
        gbc.writeMem(0xcc5a, { 0xe7 });
        gbc.writeMem(0xda72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xda72);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5a), 0xe7);
        EXPECT(gbc.readMem(0xda72), 0x5b);
        EXPECT(gbc.readMem(0xda73), 0xcc);
        // E7 0002
        gbc.setState(0x6c33, 0xe5c8, 0xd5c0, 0x1b5f, 0xa166, 0xca96, 0x1, 0x0);
        gbc.writeMem(0x6c33, { 0xe7 });
        gbc.writeMem(0xe5c6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe5c6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c6), 0x34);
        EXPECT(gbc.readMem(0xe5c7), 0x6c);
        // E7 0004
        gbc.setState(0x2050, 0xb6be, 0xb540, 0x909c, 0xd291, 0x60ee, 0x0, 0x0);
        gbc.writeMem(0x2050, { 0xe7 });
        gbc.writeMem(0xb6bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb6bc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bc), 0x51);
        EXPECT(gbc.readMem(0xb6bd), 0x20);
        // E7 0007
        gbc.setState(0x3c04, 0xae6a, 0x3980, 0xd39e, 0x12ab, 0xd73c, 0x1, 0x1);
        gbc.writeMem(0x3c04, { 0xe7 });
        gbc.writeMem(0xae68, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xae68);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae68), 0x5);
        EXPECT(gbc.readMem(0xae69), 0x3c);
        // E7 000A
        gbc.setState(0xa4d6, 0xe8fd, 0xdd40, 0x4476, 0xe0d4, 0x9bee, 0x1, 0x0);
        gbc.writeMem(0xa4d6, { 0xe7 });
        gbc.writeMem(0xe8fb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe8fb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d6), 0xe7);
        EXPECT(gbc.readMem(0xe8fb), 0xd7);
        EXPECT(gbc.readMem(0xe8fc), 0xa4);
        // E7 000D
        gbc.setState(0x2f90, 0x9717, 0xc360, 0xf04c, 0x928, 0x1a99, 0x1, 0x0);
        gbc.writeMem(0x2f90, { 0xe7 });
        gbc.writeMem(0x9715, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9715);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9715), 0x91);
        EXPECT(gbc.readMem(0x9716), 0x2f);
        // E7 000E
        gbc.setState(0xee4c, 0xbb26, 0x2390, 0xccdd, 0xce62, 0xcee0, 0x1, 0x0);
        gbc.writeMem(0xbb24, { 0x0, 0x0 });
        gbc.writeMem(0xee4c, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbb24);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb24), 0x4d);
        EXPECT(gbc.readMem(0xbb25), 0xee);
        EXPECT(gbc.readMem(0xee4c), 0xe7);
        // E7 0011
        gbc.setState(0xe10b, 0x91ed, 0x9930, 0x146b, 0xe94, 0x86a5, 0x0, 0x1);
        gbc.writeMem(0x91eb, { 0x0, 0x0 });
        gbc.writeMem(0xe10b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x91eb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91eb), 0xc);
        EXPECT(gbc.readMem(0x91ec), 0xe1);
        EXPECT(gbc.readMem(0xe10b), 0xe7);
        // E7 0014
        gbc.setState(0x6b37, 0xf9c6, 0x46f0, 0x29b4, 0x7ce9, 0xafe9, 0x1, 0x1);
        gbc.writeMem(0x6b37, { 0xe7 });
        gbc.writeMem(0xf9c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf9c4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9c4), 0x38);
        EXPECT(gbc.readMem(0xf9c5), 0x6b);
        // E7 0015
        gbc.setState(0x7567, 0xffc9, 0x5b10, 0x2a30, 0x813d, 0x8683, 0x0, 0x0);
        gbc.writeMem(0x7567, { 0xe7 });
        gbc.writeMem(0xffc7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xffc7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc7), 0x68);
        EXPECT(gbc.readMem(0xffc8), 0x75);
        // E7 0016
        gbc.setState(0xd97f, 0xd4bf, 0xc330, 0x65bc, 0x36b9, 0xd23d, 0x1, 0x1);
        gbc.writeMem(0xd4bd, { 0x0, 0x0 });
        gbc.writeMem(0xd97f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd4bd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4bd), 0x80);
        EXPECT(gbc.readMem(0xd4be), 0xd9);
        EXPECT(gbc.readMem(0xd97f), 0xe7);
        // E7 0017
        gbc.setState(0x6ef2, 0x8b01, 0x38c0, 0xda06, 0x99, 0x6918, 0x1, 0x1);
        gbc.writeMem(0x6ef2, { 0xe7 });
        gbc.writeMem(0x8aff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8aff);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aff), 0xf3);
        EXPECT(gbc.readMem(0x8b00), 0x6e);
        // E7 0018
        gbc.setState(0x4599, 0x81a4, 0x25d0, 0x23d6, 0xe82, 0x84b3, 0x0, 0x0);
        gbc.writeMem(0x4599, { 0xe7 });
        gbc.writeMem(0x81a2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x81a2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a2), 0x9a);
        EXPECT(gbc.readMem(0x81a3), 0x45);
        // E7 001A
        gbc.setState(0x3d8b, 0x8ea3, 0x1ba0, 0xab57, 0x5069, 0x5e86, 0x0, 0x0);
        gbc.writeMem(0x3d8b, { 0xe7 });
        gbc.writeMem(0x8ea1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8ea1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea1), 0x8c);
        EXPECT(gbc.readMem(0x8ea2), 0x3d);
        // E7 001C
        gbc.setState(0x6931, 0x9db2, 0x7920, 0x49b1, 0x35b7, 0xe9af, 0x1, 0x1);
        gbc.writeMem(0x6931, { 0xe7 });
        gbc.writeMem(0x9db0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9db0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db0), 0x32);
        EXPECT(gbc.readMem(0x9db1), 0x69);
        // E7 001D
        gbc.setState(0x83af, 0x8403, 0xcb70, 0x255f, 0x1495, 0x813d, 0x0, 0x0);
        gbc.writeMem(0x83af, { 0xe7 });
        gbc.writeMem(0x8401, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8401);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83af), 0xe7);
        EXPECT(gbc.readMem(0x8401), 0xb0);
        EXPECT(gbc.readMem(0x8402), 0x83);
        // E7 001F
        gbc.setState(0xeb73, 0xa334, 0xcea0, 0xeaed, 0x87e9, 0xe656, 0x1, 0x1);
        gbc.writeMem(0xa332, { 0x0, 0x0 });
        gbc.writeMem(0xeb73, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa332);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa332), 0x74);
        EXPECT(gbc.readMem(0xa333), 0xeb);
        EXPECT(gbc.readMem(0xeb73), 0xe7);
        // E7 0020
        gbc.setState(0x5015, 0x9cbd, 0xf2f0, 0x80d8, 0x2d6a, 0xa616, 0x0, 0x1);
        gbc.writeMem(0x5015, { 0xe7 });
        gbc.writeMem(0x9cbb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9cbb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cbb), 0x16);
        EXPECT(gbc.readMem(0x9cbc), 0x50);
        // E7 0023
        gbc.setState(0x758e, 0x8315, 0x550, 0xb5ad, 0x9eca, 0xa432, 0x0, 0x1);
        gbc.writeMem(0x758e, { 0xe7 });
        gbc.writeMem(0x8313, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8313);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8313), 0x8f);
        EXPECT(gbc.readMem(0x8314), 0x75);
        // E7 0025
        gbc.setState(0xda13, 0xace4, 0x7fb0, 0xe82f, 0xdd89, 0xd4c7, 0x1, 0x1);
        gbc.writeMem(0xace2, { 0x0, 0x0 });
        gbc.writeMem(0xda13, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xace2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace2), 0x14);
        EXPECT(gbc.readMem(0xace3), 0xda);
        EXPECT(gbc.readMem(0xda13), 0xe7);
        // E7 0026
        gbc.setState(0x1b3, 0x90ae, 0x5110, 0xa046, 0x79f3, 0x9c52, 0x0, 0x1);
        gbc.writeMem(0x1b3, { 0xe7 });
        gbc.writeMem(0x90ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x90ac);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ac), 0xb4);
        EXPECT(gbc.readMem(0x90ad), 0x1);
        // E7 0028
        gbc.setState(0xe89d, 0x9504, 0x36e0, 0x6e75, 0x943b, 0xea52, 0x0, 0x1);
        gbc.writeMem(0x9502, { 0x0, 0x0 });
        gbc.writeMem(0xe89d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9502);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9502), 0x9e);
        EXPECT(gbc.readMem(0x9503), 0xe8);
        EXPECT(gbc.readMem(0xe89d), 0xe7);
        // E7 002A
        gbc.setState(0x582a, 0xe242, 0xade0, 0x239a, 0x46d6, 0x4c7a, 0x1, 0x1);
        gbc.writeMem(0x582a, { 0xe7 });
        gbc.writeMem(0xe240, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe240);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe240), 0x2b);
        EXPECT(gbc.readMem(0xe241), 0x58);
        // E7 002B
        gbc.setState(0x4e19, 0xe58b, 0x6e70, 0xaab, 0x52fe, 0xab6d, 0x1, 0x1);
        gbc.writeMem(0x4e19, { 0xe7 });
        gbc.writeMem(0xe589, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe589);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe589), 0x1a);
        EXPECT(gbc.readMem(0xe58a), 0x4e);
        // E7 002D
        gbc.setState(0x80cd, 0xb5df, 0x600, 0x2a65, 0x8f73, 0x37db, 0x0, 0x1);
        gbc.writeMem(0x80cd, { 0xe7 });
        gbc.writeMem(0xb5dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb5dd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80cd), 0xe7);
        EXPECT(gbc.readMem(0xb5dd), 0xce);
        EXPECT(gbc.readMem(0xb5de), 0x80);
        // E7 002F
        gbc.setState(0x61e2, 0x9a00, 0xc700, 0xa7d6, 0xeb18, 0xfb49, 0x1, 0x0);
        gbc.writeMem(0x61e2, { 0xe7 });
        gbc.writeMem(0x99fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x99fe);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99fe), 0xe3);
        EXPECT(gbc.readMem(0x99ff), 0x61);
        // E7 0030
        gbc.setState(0x2624, 0x8447, 0x4090, 0xb11f, 0xa43d, 0xeef4, 0x1, 0x0);
        gbc.writeMem(0x2624, { 0xe7 });
        gbc.writeMem(0x8445, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8445);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8445), 0x25);
        EXPECT(gbc.readMem(0x8446), 0x26);
        // E7 0031
        gbc.setState(0xc497, 0xaa97, 0xe310, 0x1551, 0x6f, 0x12c8, 0x1, 0x1);
        gbc.writeMem(0xaa95, { 0x0, 0x0 });
        gbc.writeMem(0xc497, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xaa95);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa95), 0x98);
        EXPECT(gbc.readMem(0xaa96), 0xc4);
        EXPECT(gbc.readMem(0xc497), 0xe7);
        // E7 0038
        gbc.setState(0x46d9, 0xff3f, 0xe8d0, 0x16cf, 0xba08, 0x6a55, 0x1, 0x0);
        gbc.writeMem(0x46d9, { 0xe7 });
        gbc.writeMem(0xff3d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xff3d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff3d), 0xda);
        EXPECT(gbc.readMem(0xff3e), 0x46);
        // E7 0039
        gbc.setState(0x94e6, 0xf861, 0x2e60, 0xf3c2, 0x1f68, 0x6bd8, 0x0, 0x0);
        gbc.writeMem(0x94e6, { 0xe7 });
        gbc.writeMem(0xf85f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf85f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e6), 0xe7);
        EXPECT(gbc.readMem(0xf85f), 0xe7);
        EXPECT(gbc.readMem(0xf860), 0x94);
        // E7 003E
        gbc.setState(0xa8b0, 0xf552, 0x4e70, 0x6dbf, 0x7e4b, 0x8db6, 0x0, 0x1);
        gbc.writeMem(0xa8b0, { 0xe7 });
        gbc.writeMem(0xf550, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf550);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b0), 0xe7);
        EXPECT(gbc.readMem(0xf550), 0xb1);
        EXPECT(gbc.readMem(0xf551), 0xa8);
        // E7 0041
        gbc.setState(0x1c7b, 0xee35, 0xbb60, 0x12f6, 0x8fbe, 0xd202, 0x1, 0x1);
        gbc.writeMem(0x1c7b, { 0xe7 });
        gbc.writeMem(0xee33, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xee33);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee33), 0x7c);
        EXPECT(gbc.readMem(0xee34), 0x1c);
        // E7 0048
        gbc.setState(0xcbe5, 0xc9a5, 0x4880, 0x5ee0, 0x871b, 0xf6c0, 0x0, 0x0);
        gbc.writeMem(0xc9a3, { 0x0, 0x0 });
        gbc.writeMem(0xcbe5, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc9a3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a3), 0xe6);
        EXPECT(gbc.readMem(0xc9a4), 0xcb);
        EXPECT(gbc.readMem(0xcbe5), 0xe7);
        // E7 004A
        gbc.setState(0x6c2e, 0xed57, 0x8d0, 0x144d, 0x791f, 0x2d7f, 0x1, 0x1);
        gbc.writeMem(0x6c2e, { 0xe7 });
        gbc.writeMem(0xed55, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xed55);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed55), 0x2f);
        EXPECT(gbc.readMem(0xed56), 0x6c);
        // E7 004B
        gbc.setState(0x3ba9, 0xc39f, 0x320, 0x97b3, 0xa90f, 0xd446, 0x1, 0x0);
        gbc.writeMem(0x3ba9, { 0xe7 });
        gbc.writeMem(0xc39d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc39d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39d), 0xaa);
        EXPECT(gbc.readMem(0xc39e), 0x3b);
        // E7 004D
        gbc.setState(0x2d40, 0xfedf, 0x8bb0, 0xee63, 0x6f06, 0xbd1a, 0x0, 0x1);
        gbc.writeMem(0x2d40, { 0xe7 });
        gbc.writeMem(0xfedd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfedd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfedd), 0x41);
        EXPECT(gbc.readMem(0xfede), 0x2d);
        // E7 004E
        gbc.setState(0xec9a, 0xf47d, 0x9b90, 0x91b2, 0x25a2, 0x27a8, 0x0, 0x1);
        gbc.writeMem(0xec9a, { 0xe7 });
        gbc.writeMem(0xf47b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf47b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec9a), 0xe7);
        EXPECT(gbc.readMem(0xf47b), 0x9b);
        EXPECT(gbc.readMem(0xf47c), 0xec);
        // E7 004F
        gbc.setState(0x4b4f, 0xca01, 0x4d60, 0x276b, 0xc5fe, 0xecf0, 0x1, 0x0);
        gbc.writeMem(0x4b4f, { 0xe7 });
        gbc.writeMem(0xc9ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc9ff);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ff), 0x50);
        EXPECT(gbc.readMem(0xca00), 0x4b);
        // E7 0051
        gbc.setState(0x6b78, 0x8ad2, 0x570, 0x4ec1, 0x3405, 0x6c58, 0x0, 0x0);
        gbc.writeMem(0x6b78, { 0xe7 });
        gbc.writeMem(0x8ad0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8ad0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad0), 0x79);
        EXPECT(gbc.readMem(0x8ad1), 0x6b);
        // E7 0052
        gbc.setState(0x2e11, 0xfb87, 0xbe80, 0x2aa0, 0x3b5b, 0xef20, 0x0, 0x1);
        gbc.writeMem(0x2e11, { 0xe7 });
        gbc.writeMem(0xfb85, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfb85);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb85), 0x12);
        EXPECT(gbc.readMem(0xfb86), 0x2e);
        // E7 0053
        gbc.setState(0x9f09, 0x9fc5, 0xc3c0, 0x2c11, 0x7ea2, 0x8368, 0x0, 0x0);
        gbc.writeMem(0x9f09, { 0xe7 });
        gbc.writeMem(0x9fc3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9fc3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f09), 0xe7);
        EXPECT(gbc.readMem(0x9fc3), 0xa);
        EXPECT(gbc.readMem(0x9fc4), 0x9f);
        // E7 0054
        gbc.setState(0x6486, 0x9a4b, 0x1c60, 0x869c, 0xe57, 0xa8ce, 0x1, 0x1);
        gbc.writeMem(0x6486, { 0xe7 });
        gbc.writeMem(0x9a49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9a49);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a49), 0x87);
        EXPECT(gbc.readMem(0x9a4a), 0x64);
        // E7 005A
        gbc.setState(0xe0f2, 0xa968, 0x5ef0, 0xab44, 0x1ccd, 0x8e18, 0x0, 0x0);
        gbc.writeMem(0xa966, { 0x0, 0x0 });
        gbc.writeMem(0xe0f2, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa966);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa966), 0xf3);
        EXPECT(gbc.readMem(0xa967), 0xe0);
        EXPECT(gbc.readMem(0xe0f2), 0xe7);
        // E7 0066
        gbc.setState(0x81e, 0xa5b4, 0x9c90, 0x2da6, 0xc69c, 0x484f, 0x0, 0x1);
        gbc.writeMem(0x81e, { 0xe7 });
        gbc.writeMem(0xa5b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa5b2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5b2), 0x1f);
        EXPECT(gbc.readMem(0xa5b3), 0x8);
        // E7 0067
        gbc.setState(0x1e05, 0xc1f4, 0x4910, 0x91e5, 0x46ce, 0x8fe7, 0x1, 0x1);
        gbc.writeMem(0x1e05, { 0xe7 });
        gbc.writeMem(0xc1f2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc1f2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1f2), 0x6);
        EXPECT(gbc.readMem(0xc1f3), 0x1e);
        // E7 0068
        gbc.setState(0xa0c5, 0xfb49, 0x8480, 0x861e, 0xfbe8, 0xd64c, 0x1, 0x0);
        gbc.writeMem(0xa0c5, { 0xe7 });
        gbc.writeMem(0xfb47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfb47);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c5), 0xe7);
        EXPECT(gbc.readMem(0xfb47), 0xc6);
        EXPECT(gbc.readMem(0xfb48), 0xa0);
        // E7 006F
        gbc.setState(0xdbbb, 0x816c, 0xd1e0, 0x729b, 0x9007, 0x770d, 0x1, 0x1);
        gbc.writeMem(0x816a, { 0x0, 0x0 });
        gbc.writeMem(0xdbbb, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x816a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816a), 0xbc);
        EXPECT(gbc.readMem(0x816b), 0xdb);
        EXPECT(gbc.readMem(0xdbbb), 0xe7);
        // E7 0072
        gbc.setState(0x9611, 0xf081, 0xf060, 0xecf8, 0xfa52, 0xb880, 0x0, 0x1);
        gbc.writeMem(0x9611, { 0xe7 });
        gbc.writeMem(0xf07f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf07f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9611), 0xe7);
        EXPECT(gbc.readMem(0xf07f), 0x12);
        EXPECT(gbc.readMem(0xf080), 0x96);
        // E7 0073
        gbc.setState(0xc560, 0xbc22, 0xb20, 0xbc3d, 0x9d14, 0xb3b6, 0x0, 0x1);
        gbc.writeMem(0xbc20, { 0x0, 0x0 });
        gbc.writeMem(0xc560, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbc20);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc20), 0x61);
        EXPECT(gbc.readMem(0xbc21), 0xc5);
        EXPECT(gbc.readMem(0xc560), 0xe7);
        // E7 0075
        gbc.setState(0xb482, 0xf360, 0xbe0, 0xe0e4, 0xa775, 0x8774, 0x1, 0x1);
        gbc.writeMem(0xb482, { 0xe7 });
        gbc.writeMem(0xf35e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf35e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb482), 0xe7);
        EXPECT(gbc.readMem(0xf35e), 0x83);
        EXPECT(gbc.readMem(0xf35f), 0xb4);
        // E7 0079
        gbc.setState(0x5cc1, 0xcdb9, 0xd990, 0xd872, 0x88c9, 0x3c6b, 0x1, 0x1);
        gbc.writeMem(0x5cc1, { 0xe7 });
        gbc.writeMem(0xcdb7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcdb7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdb7), 0xc2);
        EXPECT(gbc.readMem(0xcdb8), 0x5c);
        // E7 007B
        gbc.setState(0xe303, 0x8dc5, 0xea80, 0xd279, 0x2d5e, 0xca9a, 0x0, 0x1);
        gbc.writeMem(0x8dc3, { 0x0, 0x0 });
        gbc.writeMem(0xe303, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8dc3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc3), 0x4);
        EXPECT(gbc.readMem(0x8dc4), 0xe3);
        EXPECT(gbc.readMem(0xe303), 0xe7);
        // E7 007C
        gbc.setState(0x96b, 0x9b94, 0xd10, 0xac1e, 0x8323, 0x9701, 0x1, 0x1);
        gbc.writeMem(0x96b, { 0xe7 });
        gbc.writeMem(0x9b92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9b92);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b92), 0x6c);
        EXPECT(gbc.readMem(0x9b93), 0x9);
        // E7 007D
        gbc.setState(0x8f1f, 0xa14d, 0x33d0, 0xe16d, 0x77df, 0x19d4, 0x1, 0x0);
        gbc.writeMem(0x8f1f, { 0xe7 });
        gbc.writeMem(0xa14b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa14b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f1f), 0xe7);
        EXPECT(gbc.readMem(0xa14b), 0x20);
        EXPECT(gbc.readMem(0xa14c), 0x8f);
        // E7 0080
        gbc.setState(0xe2de, 0xa85e, 0xcd0, 0xc765, 0xfa83, 0x35fd, 0x0, 0x1);
        gbc.writeMem(0xa85c, { 0x0, 0x0 });
        gbc.writeMem(0xe2de, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa85c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85c), 0xdf);
        EXPECT(gbc.readMem(0xa85d), 0xe2);
        EXPECT(gbc.readMem(0xe2de), 0xe7);
        // E7 0081
        gbc.setState(0x3527, 0xc092, 0xad90, 0xd7a2, 0xd3fb, 0x8681, 0x1, 0x1);
        gbc.writeMem(0x3527, { 0xe7 });
        gbc.writeMem(0xc090, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc090);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc090), 0x28);
        EXPECT(gbc.readMem(0xc091), 0x35);
        // E7 0083
        gbc.setState(0x5257, 0xf9f6, 0x5660, 0xcf18, 0x6ca5, 0xeade, 0x1, 0x0);
        gbc.writeMem(0x5257, { 0xe7 });
        gbc.writeMem(0xf9f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf9f4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9f4), 0x58);
        EXPECT(gbc.readMem(0xf9f5), 0x52);
        // E7 0085
        gbc.setState(0x9d8f, 0xff14, 0x2b10, 0xd4e6, 0x99af, 0xa6b6, 0x1, 0x0);
        gbc.writeMem(0x9d8f, { 0xe7 });
        gbc.writeMem(0xff12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xff12);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8f), 0xe7);
        EXPECT(gbc.readMem(0xff12), 0x90);
        EXPECT(gbc.readMem(0xff13), 0x9d);
        // E7 0087
        gbc.setState(0xa8b7, 0xaf5f, 0x3200, 0x8223, 0x440, 0x840c, 0x0, 0x0);
        gbc.writeMem(0xa8b7, { 0xe7 });
        gbc.writeMem(0xaf5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaf5d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b7), 0xe7);
        EXPECT(gbc.readMem(0xaf5d), 0xb8);
        EXPECT(gbc.readMem(0xaf5e), 0xa8);
        // E7 0089
        gbc.setState(0x23d0, 0xd222, 0x8390, 0x56b7, 0xc84a, 0xeaa6, 0x0, 0x0);
        gbc.writeMem(0x23d0, { 0xe7 });
        gbc.writeMem(0xd220, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd220);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd220), 0xd1);
        EXPECT(gbc.readMem(0xd221), 0x23);
        // E7 008A
        gbc.setState(0x6029, 0xd07f, 0x33f0, 0x4ba9, 0x3632, 0xbcb7, 0x1, 0x1);
        gbc.writeMem(0x6029, { 0xe7 });
        gbc.writeMem(0xd07d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd07d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07d), 0x2a);
        EXPECT(gbc.readMem(0xd07e), 0x60);
        // E7 008D
        gbc.setState(0x4cc6, 0x8ca1, 0xdb90, 0x796c, 0x2534, 0x2126, 0x1, 0x0);
        gbc.writeMem(0x4cc6, { 0xe7 });
        gbc.writeMem(0x8c9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8c9f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9f), 0xc7);
        EXPECT(gbc.readMem(0x8ca0), 0x4c);
        // E7 008F
        gbc.setState(0x1237, 0xfe5a, 0x970, 0x1765, 0xbf37, 0x6465, 0x1, 0x0);
        gbc.writeMem(0x1237, { 0xe7 });
        gbc.writeMem(0xfe58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfe58);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe58), 0x38);
        EXPECT(gbc.readMem(0xfe59), 0x12);
        // E7 0091
        gbc.setState(0x2705, 0x9c4e, 0xe4b0, 0xff6f, 0x37b6, 0x6c09, 0x1, 0x1);
        gbc.writeMem(0x2705, { 0xe7 });
        gbc.writeMem(0x9c4c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9c4c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4c), 0x6);
        EXPECT(gbc.readMem(0x9c4d), 0x27);
        // E7 0093
        gbc.setState(0x1254, 0xf99e, 0xb6c0, 0x5711, 0xa339, 0x4393, 0x0, 0x1);
        gbc.writeMem(0x1254, { 0xe7 });
        gbc.writeMem(0xf99c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf99c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf99c), 0x55);
        EXPECT(gbc.readMem(0xf99d), 0x12);
        // E7 0097
        gbc.setState(0x4838, 0xbe1a, 0xf5a0, 0x5708, 0xa02f, 0xfcc4, 0x0, 0x1);
        gbc.writeMem(0x4838, { 0xe7 });
        gbc.writeMem(0xbe18, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbe18);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe18), 0x39);
        EXPECT(gbc.readMem(0xbe19), 0x48);
        // E7 009B
        gbc.setState(0xdd02, 0xd1bb, 0x2a20, 0x80df, 0x18f9, 0xbd5d, 0x0, 0x1);
        gbc.writeMem(0xd1b9, { 0x0, 0x0 });
        gbc.writeMem(0xdd02, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd1b9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b9), 0x3);
        EXPECT(gbc.readMem(0xd1ba), 0xdd);
        EXPECT(gbc.readMem(0xdd02), 0xe7);
        // E7 009F
        gbc.setState(0xb75a, 0x93d4, 0x32f0, 0xf6ea, 0x1c97, 0x877e, 0x0, 0x1);
        gbc.writeMem(0x93d2, { 0x0, 0x0 });
        gbc.writeMem(0xb75a, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x93d2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d2), 0x5b);
        EXPECT(gbc.readMem(0x93d3), 0xb7);
        EXPECT(gbc.readMem(0xb75a), 0xe7);
        // E7 00A7
        gbc.setState(0x4e32, 0x984b, 0x8e20, 0xd5e, 0xf59, 0x76b4, 0x0, 0x1);
        gbc.writeMem(0x4e32, { 0xe7 });
        gbc.writeMem(0x9849, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9849);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9849), 0x33);
        EXPECT(gbc.readMem(0x984a), 0x4e);
        // E7 00A8
        gbc.setState(0x2b6c, 0xb39d, 0x6620, 0x2c68, 0x82ee, 0x6db3, 0x1, 0x0);
        gbc.writeMem(0x2b6c, { 0xe7 });
        gbc.writeMem(0xb39b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb39b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb39b), 0x6d);
        EXPECT(gbc.readMem(0xb39c), 0x2b);
        // E7 00A9
        gbc.setState(0x809d, 0x9352, 0x4280, 0xcceb, 0x307c, 0x90ed, 0x0, 0x0);
        gbc.writeMem(0x809d, { 0xe7 });
        gbc.writeMem(0x9350, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9350);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809d), 0xe7);
        EXPECT(gbc.readMem(0x9350), 0x9e);
        EXPECT(gbc.readMem(0x9351), 0x80);
        // E7 00AC
        gbc.setState(0xe14a, 0x8029, 0x2580, 0x330a, 0x279, 0x5038, 0x0, 0x1);
        gbc.writeMem(0x8027, { 0x0, 0x0 });
        gbc.writeMem(0xe14a, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8027);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8027), 0x4b);
        EXPECT(gbc.readMem(0x8028), 0xe1);
        EXPECT(gbc.readMem(0xe14a), 0xe7);
        // E7 00B0
        gbc.setState(0x56d2, 0xa310, 0x1fe0, 0x76c3, 0xdf67, 0x1d01, 0x0, 0x0);
        gbc.writeMem(0x56d2, { 0xe7 });
        gbc.writeMem(0xa30e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa30e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30e), 0xd3);
        EXPECT(gbc.readMem(0xa30f), 0x56);
        // E7 00B3
        gbc.setState(0x22a9, 0xe1a2, 0x2fb0, 0xf1f8, 0x9fa3, 0xd62b, 0x1, 0x1);
        gbc.writeMem(0x22a9, { 0xe7 });
        gbc.writeMem(0xe1a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe1a0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a0), 0xaa);
        EXPECT(gbc.readMem(0xe1a1), 0x22);
        // E7 00BB
        gbc.setState(0xd454, 0x83f7, 0xd7c0, 0xd0c8, 0xb226, 0xd85f, 0x0, 0x0);
        gbc.writeMem(0x83f5, { 0x0, 0x0 });
        gbc.writeMem(0xd454, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x83f5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f5), 0x55);
        EXPECT(gbc.readMem(0x83f6), 0xd4);
        EXPECT(gbc.readMem(0xd454), 0xe7);
        // E7 00BD
        gbc.setState(0xe733, 0xa1c7, 0x7960, 0xb5, 0x935f, 0x26d4, 0x1, 0x1);
        gbc.writeMem(0xa1c5, { 0x0, 0x0 });
        gbc.writeMem(0xe733, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa1c5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c5), 0x34);
        EXPECT(gbc.readMem(0xa1c6), 0xe7);
        EXPECT(gbc.readMem(0xe733), 0xe7);
        // E7 00BE
        gbc.setState(0x89dc, 0x9999, 0x360, 0x96e, 0xcff7, 0x8e19, 0x1, 0x0);
        gbc.writeMem(0x89dc, { 0xe7 });
        gbc.writeMem(0x9997, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9997);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89dc), 0xe7);
        EXPECT(gbc.readMem(0x9997), 0xdd);
        EXPECT(gbc.readMem(0x9998), 0x89);
        // E7 00BF
        gbc.setState(0x9aa2, 0x9ea2, 0x440, 0xb920, 0x6306, 0xa60e, 0x1, 0x0);
        gbc.writeMem(0x9aa2, { 0xe7 });
        gbc.writeMem(0x9ea0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9ea0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa2), 0xe7);
        EXPECT(gbc.readMem(0x9ea0), 0xa3);
        EXPECT(gbc.readMem(0x9ea1), 0x9a);
        // E7 00C0
        gbc.setState(0xcdca, 0x843c, 0xc8a0, 0xbe5b, 0x2313, 0xf98, 0x0, 0x1);
        gbc.writeMem(0x843a, { 0x0, 0x0 });
        gbc.writeMem(0xcdca, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x843a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843a), 0xcb);
        EXPECT(gbc.readMem(0x843b), 0xcd);
        EXPECT(gbc.readMem(0xcdca), 0xe7);
        // E7 00C1
        gbc.setState(0x68bb, 0x9105, 0xcaf0, 0xcb73, 0x8e6b, 0xa67a, 0x1, 0x1);
        gbc.writeMem(0x68bb, { 0xe7 });
        gbc.writeMem(0x9103, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9103);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9103), 0xbc);
        EXPECT(gbc.readMem(0x9104), 0x68);
        // E7 00C2
        gbc.setState(0x1010, 0xe637, 0x5150, 0xddd9, 0x8975, 0xfbe4, 0x0, 0x0);
        gbc.writeMem(0x1010, { 0xe7 });
        gbc.writeMem(0xe635, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe635);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe635), 0x11);
        EXPECT(gbc.readMem(0xe636), 0x10);
        // E7 00C3
        gbc.setState(0x7c67, 0xfbe1, 0x62c0, 0x6791, 0x6084, 0xa4eb, 0x0, 0x0);
        gbc.writeMem(0x7c67, { 0xe7 });
        gbc.writeMem(0xfbdf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfbdf);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbdf), 0x68);
        EXPECT(gbc.readMem(0xfbe0), 0x7c);
        // E7 00C5
        gbc.setState(0x59f2, 0x8a5d, 0xb390, 0x392d, 0x45f4, 0x9547, 0x1, 0x0);
        gbc.writeMem(0x59f2, { 0xe7 });
        gbc.writeMem(0x8a5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8a5b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5b), 0xf3);
        EXPECT(gbc.readMem(0x8a5c), 0x59);
        // E7 00C6
        gbc.setState(0x3ce, 0xd5f6, 0x2ba0, 0x29f5, 0xe85c, 0x9024, 0x0, 0x1);
        gbc.writeMem(0x3ce, { 0xe7 });
        gbc.writeMem(0xd5f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd5f4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f4), 0xcf);
        EXPECT(gbc.readMem(0xd5f5), 0x3);
        // E7 00C7
        gbc.setState(0xdcd9, 0x82c6, 0xa1b0, 0x9f39, 0xe489, 0xc6c4, 0x0, 0x0);
        gbc.writeMem(0x82c4, { 0x0, 0x0 });
        gbc.writeMem(0xdcd9, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x82c4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82c4), 0xda);
        EXPECT(gbc.readMem(0x82c5), 0xdc);
        EXPECT(gbc.readMem(0xdcd9), 0xe7);
        // E7 00C8
        gbc.setState(0x7740, 0xc91c, 0x1880, 0xce77, 0xb632, 0xea34, 0x0, 0x1);
        gbc.writeMem(0x7740, { 0xe7 });
        gbc.writeMem(0xc91a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc91a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91a), 0x41);
        EXPECT(gbc.readMem(0xc91b), 0x77);
        // E7 00CD
        gbc.setState(0x1396, 0xcf33, 0x5520, 0xcbce, 0xeb45, 0x22ce, 0x1, 0x1);
        gbc.writeMem(0x1396, { 0xe7 });
        gbc.writeMem(0xcf31, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcf31);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf31), 0x97);
        EXPECT(gbc.readMem(0xcf32), 0x13);
        // E7 00D1
        gbc.setState(0x1b36, 0xa962, 0xfd60, 0x1c23, 0x17e, 0x9b34, 0x0, 0x0);
        gbc.writeMem(0x1b36, { 0xe7 });
        gbc.writeMem(0xa960, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa960);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa960), 0x37);
        EXPECT(gbc.readMem(0xa961), 0x1b);
        // E7 00D4
        gbc.setState(0x49c2, 0xe5b7, 0xddd0, 0xf53c, 0xd725, 0x6968, 0x0, 0x1);
        gbc.writeMem(0x49c2, { 0xe7 });
        gbc.writeMem(0xe5b5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe5b5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b5), 0xc3);
        EXPECT(gbc.readMem(0xe5b6), 0x49);
        // E7 00D5
        gbc.setState(0x627, 0xa762, 0x69d0, 0x17ed, 0x89d9, 0xc3cd, 0x1, 0x0);
        gbc.writeMem(0x627, { 0xe7 });
        gbc.writeMem(0xa760, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa760);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa760), 0x28);
        EXPECT(gbc.readMem(0xa761), 0x6);
        // E7 00D9
        gbc.setState(0xc3f8, 0xf551, 0xa4d0, 0x1cd3, 0x8bed, 0x7ce8, 0x0, 0x0);
        gbc.writeMem(0xc3f8, { 0xe7 });
        gbc.writeMem(0xf54f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf54f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3f8), 0xe7);
        EXPECT(gbc.readMem(0xf54f), 0xf9);
        EXPECT(gbc.readMem(0xf550), 0xc3);
        // E7 00DC
        gbc.setState(0x2ee2, 0xcde6, 0x86a0, 0xae35, 0x181d, 0x690a, 0x0, 0x1);
        gbc.writeMem(0x2ee2, { 0xe7 });
        gbc.writeMem(0xcde4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcde4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde4), 0xe3);
        EXPECT(gbc.readMem(0xcde5), 0x2e);
        // E7 00DD
        gbc.setState(0xd0e2, 0xd14f, 0xb3e0, 0x4360, 0x2d3d, 0x9312, 0x1, 0x0);
        gbc.writeMem(0xd0e2, { 0xe7 });
        gbc.writeMem(0xd14d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd14d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e2), 0xe7);
        EXPECT(gbc.readMem(0xd14d), 0xe3);
        EXPECT(gbc.readMem(0xd14e), 0xd0);
        // E7 00E0
        gbc.setState(0x202f, 0xb678, 0x67d0, 0xf78b, 0x85d9, 0xc53b, 0x1, 0x1);
        gbc.writeMem(0x202f, { 0xe7 });
        gbc.writeMem(0xb676, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb676);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb676), 0x30);
        EXPECT(gbc.readMem(0xb677), 0x20);
        // E7 00E2
        gbc.setState(0x1fd7, 0xaf4e, 0xe4f0, 0xcfa3, 0x1cbf, 0xd820, 0x1, 0x1);
        gbc.writeMem(0x1fd7, { 0xe7 });
        gbc.writeMem(0xaf4c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xaf4c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf4c), 0xd8);
        EXPECT(gbc.readMem(0xaf4d), 0x1f);
        // E7 00E6
        gbc.setState(0x66cd, 0xa51d, 0xec0, 0xc995, 0xa01, 0x4081, 0x0, 0x1);
        gbc.writeMem(0x66cd, { 0xe7 });
        gbc.writeMem(0xa51b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa51b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa51b), 0xce);
        EXPECT(gbc.readMem(0xa51c), 0x66);
        // E7 00E8
        gbc.setState(0x5be1, 0xf647, 0x4aa0, 0xdbb4, 0x6cda, 0x3053, 0x1, 0x0);
        gbc.writeMem(0x5be1, { 0xe7 });
        gbc.writeMem(0xf645, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf645);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf645), 0xe2);
        EXPECT(gbc.readMem(0xf646), 0x5b);
        // E7 00EA
        gbc.setState(0x2b28, 0xa024, 0xed50, 0xec8b, 0x50b8, 0xf015, 0x0, 0x1);
        gbc.writeMem(0x2b28, { 0xe7 });
        gbc.writeMem(0xa022, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa022);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa022), 0x29);
        EXPECT(gbc.readMem(0xa023), 0x2b);
        // E7 00EE
        gbc.setState(0xf70, 0xcdf2, 0x1800, 0xcd88, 0xd18c, 0x4e73, 0x0, 0x0);
        gbc.writeMem(0xf70, { 0xe7 });
        gbc.writeMem(0xcdf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xcdf0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf0), 0x71);
        EXPECT(gbc.readMem(0xcdf1), 0xf);
        // E7 00EF
        gbc.setState(0x668b, 0xff22, 0x3280, 0xdc7c, 0x3cee, 0x1060, 0x1, 0x0);
        gbc.writeMem(0x668b, { 0xe7 });
        gbc.writeMem(0xff20, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xff20);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff20), 0x8c);
        EXPECT(gbc.readMem(0xff21), 0x66);
        // E7 00F3
        gbc.setState(0x8fed, 0xc479, 0x7900, 0x9c15, 0xd640, 0xddf7, 0x1, 0x0);
        gbc.writeMem(0x8fed, { 0xe7 });
        gbc.writeMem(0xc477, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc477);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fed), 0xe7);
        EXPECT(gbc.readMem(0xc477), 0xee);
        EXPECT(gbc.readMem(0xc478), 0x8f);
        // E7 00F6
        gbc.setState(0xb84f, 0x812d, 0x8fd0, 0x520, 0xb8c, 0xaedd, 0x1, 0x1);
        gbc.writeMem(0x812b, { 0x0, 0x0 });
        gbc.writeMem(0xb84f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x812b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812b), 0x50);
        EXPECT(gbc.readMem(0x812c), 0xb8);
        EXPECT(gbc.readMem(0xb84f), 0xe7);
        // E7 00F9
        gbc.setState(0xe586, 0xcd76, 0x7800, 0x53c2, 0x19e7, 0xdd1d, 0x1, 0x0);
        gbc.writeMem(0xcd74, { 0x0, 0x0 });
        gbc.writeMem(0xe586, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcd74);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd74), 0x87);
        EXPECT(gbc.readMem(0xcd75), 0xe5);
        EXPECT(gbc.readMem(0xe586), 0xe7);
        // E7 00FA
        gbc.setState(0xbbb3, 0xe744, 0xf80, 0x11e0, 0x2270, 0x6a1c, 0x1, 0x0);
        gbc.writeMem(0xbbb3, { 0xe7 });
        gbc.writeMem(0xe742, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe742);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb3), 0xe7);
        EXPECT(gbc.readMem(0xe742), 0xb4);
        EXPECT(gbc.readMem(0xe743), 0xbb);
        // E7 00FD
        gbc.setState(0x5ca2, 0x8c63, 0x9f90, 0xedee, 0xcca5, 0x504b, 0x1, 0x0);
        gbc.writeMem(0x5ca2, { 0xe7 });
        gbc.writeMem(0x8c61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8c61);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c61), 0xa3);
        EXPECT(gbc.readMem(0x8c62), 0x5c);
        // E7 0100
        gbc.setState(0x37dd, 0xfa5f, 0x3f40, 0xc279, 0x3d8e, 0xcf82, 0x0, 0x1);
        gbc.writeMem(0x37dd, { 0xe7 });
        gbc.writeMem(0xfa5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfa5d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa5d), 0xde);
        EXPECT(gbc.readMem(0xfa5e), 0x37);
        // E7 0102
        gbc.setState(0x1e4a, 0xb1f9, 0xecb0, 0xa622, 0xd77c, 0xe4bb, 0x1, 0x1);
        gbc.writeMem(0x1e4a, { 0xe7 });
        gbc.writeMem(0xb1f7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb1f7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f7), 0x4b);
        EXPECT(gbc.readMem(0xb1f8), 0x1e);
        // E7 0103
        gbc.setState(0x6de8, 0x9bab, 0x3930, 0x719c, 0xc82b, 0x879d, 0x0, 0x1);
        gbc.writeMem(0x6de8, { 0xe7 });
        gbc.writeMem(0x9ba9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9ba9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba9), 0xe9);
        EXPECT(gbc.readMem(0x9baa), 0x6d);
        // E7 0105
        gbc.setState(0xdfc4, 0xca18, 0xd850, 0x8cb2, 0x71dc, 0xbac6, 0x1, 0x1);
        gbc.writeMem(0xca16, { 0x0, 0x0 });
        gbc.writeMem(0xdfc4, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xca16);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca16), 0xc5);
        EXPECT(gbc.readMem(0xca17), 0xdf);
        EXPECT(gbc.readMem(0xdfc4), 0xe7);
        // E7 0107
        gbc.setState(0xe08d, 0xd6f6, 0xd680, 0x4a4d, 0xba1f, 0xdaaf, 0x0, 0x1);
        gbc.writeMem(0xd6f4, { 0x0, 0x0 });
        gbc.writeMem(0xe08d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd6f4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f4), 0x8e);
        EXPECT(gbc.readMem(0xd6f5), 0xe0);
        EXPECT(gbc.readMem(0xe08d), 0xe7);
        // E7 0108
        gbc.setState(0x3911, 0xefdc, 0xc0, 0xae74, 0x124, 0x6a5e, 0x1, 0x1);
        gbc.writeMem(0x3911, { 0xe7 });
        gbc.writeMem(0xefda, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xefda);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefda), 0x12);
        EXPECT(gbc.readMem(0xefdb), 0x39);
        // E7 010D
        gbc.setState(0x6149, 0x9168, 0x9d50, 0x43d9, 0xc7f6, 0x5ae9, 0x0, 0x0);
        gbc.writeMem(0x6149, { 0xe7 });
        gbc.writeMem(0x9166, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9166);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9166), 0x4a);
        EXPECT(gbc.readMem(0x9167), 0x61);
        // E7 0111
        gbc.setState(0x2930, 0xe36f, 0xb480, 0xf86b, 0x3186, 0x29ce, 0x1, 0x1);
        gbc.writeMem(0x2930, { 0xe7 });
        gbc.writeMem(0xe36d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe36d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe36d), 0x31);
        EXPECT(gbc.readMem(0xe36e), 0x29);
        // E7 0114
        gbc.setState(0x1eab, 0x9c83, 0x27d0, 0xea5f, 0x3e84, 0x15fa, 0x0, 0x1);
        gbc.writeMem(0x1eab, { 0xe7 });
        gbc.writeMem(0x9c81, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9c81);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c81), 0xac);
        EXPECT(gbc.readMem(0x9c82), 0x1e);
        // E7 0118
        gbc.setState(0x3b96, 0x880a, 0x6910, 0xdb6d, 0x93fd, 0xf855, 0x0, 0x0);
        gbc.writeMem(0x3b96, { 0xe7 });
        gbc.writeMem(0x8808, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8808);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8808), 0x97);
        EXPECT(gbc.readMem(0x8809), 0x3b);
        // E7 011B
        gbc.setState(0x1202, 0xe408, 0x6810, 0x5efa, 0x94d4, 0xb8a9, 0x0, 0x1);
        gbc.writeMem(0x1202, { 0xe7 });
        gbc.writeMem(0xe406, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe406);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe406), 0x3);
        EXPECT(gbc.readMem(0xe407), 0x12);
        // E7 011E
        gbc.setState(0xe23, 0xaa06, 0xd170, 0x7c1f, 0x840a, 0x8c91, 0x1, 0x0);
        gbc.writeMem(0xe23, { 0xe7 });
        gbc.writeMem(0xaa04, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xaa04);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa04), 0x24);
        EXPECT(gbc.readMem(0xaa05), 0xe);
        // E7 0122
        gbc.setState(0x9dbf, 0x9145, 0x4460, 0x7b2b, 0xbb3a, 0xbd9b, 0x0, 0x0);
        gbc.writeMem(0x9143, { 0x0, 0x0 });
        gbc.writeMem(0x9dbf, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9143);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9143), 0xc0);
        EXPECT(gbc.readMem(0x9144), 0x9d);
        EXPECT(gbc.readMem(0x9dbf), 0xe7);
        // E7 0123
        gbc.setState(0x24bb, 0x93c1, 0x630, 0x3e2c, 0xb43d, 0x270f, 0x0, 0x1);
        gbc.writeMem(0x24bb, { 0xe7 });
        gbc.writeMem(0x93bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x93bf);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93bf), 0xbc);
        EXPECT(gbc.readMem(0x93c0), 0x24);
        // E7 0124
        gbc.setState(0xe37b, 0xfcec, 0x1960, 0x4c58, 0xa6e4, 0x713d, 0x1, 0x1);
        gbc.writeMem(0xe37b, { 0xe7 });
        gbc.writeMem(0xfcea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfcea);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe37b), 0xe7);
        EXPECT(gbc.readMem(0xfcea), 0x7c);
        EXPECT(gbc.readMem(0xfceb), 0xe3);
        // E7 0126
        gbc.setState(0xa1f1, 0xda4b, 0xed40, 0xd647, 0xa301, 0x8747, 0x0, 0x0);
        gbc.writeMem(0xa1f1, { 0xe7 });
        gbc.writeMem(0xda49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xda49);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f1), 0xe7);
        EXPECT(gbc.readMem(0xda49), 0xf2);
        EXPECT(gbc.readMem(0xda4a), 0xa1);
        // E7 012A
        gbc.setState(0xbb03, 0xd13b, 0x4e20, 0x55d3, 0xb3f4, 0xe2a3, 0x1, 0x0);
        gbc.writeMem(0xbb03, { 0xe7 });
        gbc.writeMem(0xd139, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd139);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb03), 0xe7);
        EXPECT(gbc.readMem(0xd139), 0x4);
        EXPECT(gbc.readMem(0xd13a), 0xbb);
        // E7 0130
        gbc.setState(0xde6e, 0x8346, 0xeaa0, 0x9601, 0xe996, 0x4ae0, 0x0, 0x1);
        gbc.writeMem(0x8344, { 0x0, 0x0 });
        gbc.writeMem(0xde6e, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8344);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8344), 0x6f);
        EXPECT(gbc.readMem(0x8345), 0xde);
        EXPECT(gbc.readMem(0xde6e), 0xe7);
        // E7 0131
        gbc.setState(0x4920, 0xcb2b, 0x6c60, 0x5110, 0x2609, 0x2ad, 0x1, 0x1);
        gbc.writeMem(0x4920, { 0xe7 });
        gbc.writeMem(0xcb29, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xcb29);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb29), 0x21);
        EXPECT(gbc.readMem(0xcb2a), 0x49);
        // E7 0132
        gbc.setState(0x66dc, 0xd78b, 0xe420, 0xcfea, 0x7350, 0x9c86, 0x1, 0x1);
        gbc.writeMem(0x66dc, { 0xe7 });
        gbc.writeMem(0xd789, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd789);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd789), 0xdd);
        EXPECT(gbc.readMem(0xd78a), 0x66);
        // E7 0134
        gbc.setState(0x4d75, 0xd434, 0xcf20, 0xb07a, 0x7d77, 0x4b79, 0x0, 0x1);
        gbc.writeMem(0x4d75, { 0xe7 });
        gbc.writeMem(0xd432, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd432);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd432), 0x76);
        EXPECT(gbc.readMem(0xd433), 0x4d);
        // E7 0135
        gbc.setState(0x5485, 0xc981, 0xa180, 0xd53c, 0x816e, 0x2f9e, 0x1, 0x1);
        gbc.writeMem(0x5485, { 0xe7 });
        gbc.writeMem(0xc97f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc97f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc97f), 0x86);
        EXPECT(gbc.readMem(0xc980), 0x54);
        // E7 0136
        gbc.setState(0x7c48, 0xae3f, 0x6210, 0x76d5, 0xcb8e, 0xfde7, 0x0, 0x1);
        gbc.writeMem(0x7c48, { 0xe7 });
        gbc.writeMem(0xae3d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xae3d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3d), 0x49);
        EXPECT(gbc.readMem(0xae3e), 0x7c);
        // E7 0137
        gbc.setState(0x4923, 0x9067, 0x120, 0x9030, 0xe953, 0x29e3, 0x0, 0x0);
        gbc.writeMem(0x4923, { 0xe7 });
        gbc.writeMem(0x9065, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9065);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9065), 0x24);
        EXPECT(gbc.readMem(0x9066), 0x49);
        // E7 0138
        gbc.setState(0x7cb3, 0x871e, 0x7180, 0x13f4, 0xaee0, 0xff93, 0x1, 0x0);
        gbc.writeMem(0x7cb3, { 0xe7 });
        gbc.writeMem(0x871c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x871c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x871c), 0xb4);
        EXPECT(gbc.readMem(0x871d), 0x7c);
        // E7 013D
        gbc.setState(0x6d39, 0xd6a1, 0xbbe0, 0xa180, 0xe0e4, 0x3226, 0x0, 0x0);
        gbc.writeMem(0x6d39, { 0xe7 });
        gbc.writeMem(0xd69f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd69f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69f), 0x3a);
        EXPECT(gbc.readMem(0xd6a0), 0x6d);
        // E7 013F
        gbc.setState(0xb88e, 0xa86a, 0xcbd0, 0x3fc, 0x8fe1, 0xf37d, 0x0, 0x1);
        gbc.writeMem(0xa868, { 0x0, 0x0 });
        gbc.writeMem(0xb88e, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa868);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa868), 0x8f);
        EXPECT(gbc.readMem(0xa869), 0xb8);
        EXPECT(gbc.readMem(0xb88e), 0xe7);
        // E7 0141
        gbc.setState(0xca34, 0xc3c6, 0x8b50, 0xff05, 0xc0bc, 0x2c3d, 0x0, 0x1);
        gbc.writeMem(0xc3c4, { 0x0, 0x0 });
        gbc.writeMem(0xca34, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc3c4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3c4), 0x35);
        EXPECT(gbc.readMem(0xc3c5), 0xca);
        EXPECT(gbc.readMem(0xca34), 0xe7);
        // E7 0142
        gbc.setState(0xa021, 0xae1b, 0x15a0, 0x1c75, 0xc758, 0xb743, 0x0, 0x1);
        gbc.writeMem(0xa021, { 0xe7 });
        gbc.writeMem(0xae19, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xae19);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa021), 0xe7);
        EXPECT(gbc.readMem(0xae19), 0x22);
        EXPECT(gbc.readMem(0xae1a), 0xa0);
        // E7 0144
        gbc.setState(0xabec, 0xbafe, 0xc760, 0xe557, 0x2e24, 0xa044, 0x0, 0x0);
        gbc.writeMem(0xabec, { 0xe7 });
        gbc.writeMem(0xbafc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbafc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabec), 0xe7);
        EXPECT(gbc.readMem(0xbafc), 0xed);
        EXPECT(gbc.readMem(0xbafd), 0xab);
        // E7 0148
        gbc.setState(0x5c92, 0xdb16, 0xab30, 0x7548, 0x61c0, 0xb2e7, 0x0, 0x1);
        gbc.writeMem(0x5c92, { 0xe7 });
        gbc.writeMem(0xdb14, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdb14);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb14), 0x93);
        EXPECT(gbc.readMem(0xdb15), 0x5c);
        // E7 014B
        gbc.setState(0x1940, 0xbd73, 0xb480, 0xb790, 0xbb70, 0x6add, 0x1, 0x0);
        gbc.writeMem(0x1940, { 0xe7 });
        gbc.writeMem(0xbd71, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbd71);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd71), 0x41);
        EXPECT(gbc.readMem(0xbd72), 0x19);
        // E7 014C
        gbc.setState(0xc2bd, 0xb0e2, 0xd450, 0x38a8, 0x581c, 0x904d, 0x1, 0x0);
        gbc.writeMem(0xb0e0, { 0x0, 0x0 });
        gbc.writeMem(0xc2bd, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb0e0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e0), 0xbe);
        EXPECT(gbc.readMem(0xb0e1), 0xc2);
        EXPECT(gbc.readMem(0xc2bd), 0xe7);
        // E7 014D
        gbc.setState(0x5e20, 0xa151, 0x5e80, 0x745d, 0x6bd8, 0x7f0f, 0x0, 0x1);
        gbc.writeMem(0x5e20, { 0xe7 });
        gbc.writeMem(0xa14f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa14f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa14f), 0x21);
        EXPECT(gbc.readMem(0xa150), 0x5e);
        // E7 014E
        gbc.setState(0x3ce3, 0xfaff, 0xae80, 0x2757, 0xaca3, 0x2eb, 0x1, 0x1);
        gbc.writeMem(0x3ce3, { 0xe7 });
        gbc.writeMem(0xfafd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfafd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfafd), 0xe4);
        EXPECT(gbc.readMem(0xfafe), 0x3c);
        // E7 0151
        gbc.setState(0xd6b3, 0xd5bd, 0x4520, 0xc7b0, 0x9f08, 0x46cf, 0x0, 0x0);
        gbc.writeMem(0xd5bb, { 0x0, 0x0 });
        gbc.writeMem(0xd6b3, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd5bb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bb), 0xb4);
        EXPECT(gbc.readMem(0xd5bc), 0xd6);
        EXPECT(gbc.readMem(0xd6b3), 0xe7);
        // E7 0152
        gbc.setState(0xdfe9, 0xfeed, 0x2590, 0x7619, 0xbc93, 0xe7b6, 0x1, 0x0);
        gbc.writeMem(0xdfe9, { 0xe7 });
        gbc.writeMem(0xfeeb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfeeb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe9), 0xe7);
        EXPECT(gbc.readMem(0xfeeb), 0xea);
        EXPECT(gbc.readMem(0xfeec), 0xdf);
        // E7 0153
        gbc.setState(0x86bf, 0xd1ee, 0x9140, 0x9f5f, 0x2626, 0x7d4a, 0x1, 0x1);
        gbc.writeMem(0x86bf, { 0xe7 });
        gbc.writeMem(0xd1ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd1ec);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86bf), 0xe7);
        EXPECT(gbc.readMem(0xd1ec), 0xc0);
        EXPECT(gbc.readMem(0xd1ed), 0x86);
        // E7 0154
        gbc.setState(0x504a, 0xf00d, 0xb2b0, 0x18ab, 0xbcb2, 0x7e6f, 0x1, 0x1);
        gbc.writeMem(0x504a, { 0xe7 });
        gbc.writeMem(0xf00b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf00b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf00b), 0x4b);
        EXPECT(gbc.readMem(0xf00c), 0x50);
        // E7 0155
        gbc.setState(0x439f, 0xc375, 0xc980, 0xd2c3, 0xd4e8, 0x2bf5, 0x0, 0x0);
        gbc.writeMem(0x439f, { 0xe7 });
        gbc.writeMem(0xc373, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc373);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc373), 0xa0);
        EXPECT(gbc.readMem(0xc374), 0x43);
        // E7 0157
        gbc.setState(0x35d, 0x9776, 0x9c10, 0xa288, 0x4323, 0x6e66, 0x0, 0x1);
        gbc.writeMem(0x35d, { 0xe7 });
        gbc.writeMem(0x9774, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9774);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9774), 0x5e);
        EXPECT(gbc.readMem(0x9775), 0x3);
        // E7 0159
        gbc.setState(0x5cbc, 0xeb22, 0x52d0, 0x9cda, 0x9e8, 0x5383, 0x0, 0x1);
        gbc.writeMem(0x5cbc, { 0xe7 });
        gbc.writeMem(0xeb20, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeb20);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb20), 0xbd);
        EXPECT(gbc.readMem(0xeb21), 0x5c);
        // E7 0162
        gbc.setState(0xb3d5, 0xd263, 0xffa0, 0x24e1, 0x5a1d, 0xd903, 0x1, 0x0);
        gbc.writeMem(0xb3d5, { 0xe7 });
        gbc.writeMem(0xd261, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd261);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d5), 0xe7);
        EXPECT(gbc.readMem(0xd261), 0xd6);
        EXPECT(gbc.readMem(0xd262), 0xb3);
        // E7 0163
        gbc.setState(0x91e, 0xb090, 0x300, 0x4fcc, 0xce7f, 0xf607, 0x0, 0x1);
        gbc.writeMem(0x91e, { 0xe7 });
        gbc.writeMem(0xb08e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb08e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb08e), 0x1f);
        EXPECT(gbc.readMem(0xb08f), 0x9);
        // E7 0164
        gbc.setState(0xac9e, 0xcc4f, 0xe7e0, 0x8cf7, 0x7972, 0x5c6d, 0x1, 0x0);
        gbc.writeMem(0xac9e, { 0xe7 });
        gbc.writeMem(0xcc4d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xcc4d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac9e), 0xe7);
        EXPECT(gbc.readMem(0xcc4d), 0x9f);
        EXPECT(gbc.readMem(0xcc4e), 0xac);
        // E7 0165
        gbc.setState(0x9738, 0xbde8, 0xde00, 0x710b, 0x114e, 0x57df, 0x0, 0x1);
        gbc.writeMem(0x9738, { 0xe7 });
        gbc.writeMem(0xbde6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbde6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9738), 0xe7);
        EXPECT(gbc.readMem(0xbde6), 0x39);
        EXPECT(gbc.readMem(0xbde7), 0x97);
        // E7 0167
        gbc.setState(0xadae, 0x96c7, 0x22a0, 0x3a0b, 0x4c5e, 0xf8d5, 0x1, 0x1);
        gbc.writeMem(0x96c5, { 0x0, 0x0 });
        gbc.writeMem(0xadae, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x96c5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c5), 0xaf);
        EXPECT(gbc.readMem(0x96c6), 0xad);
        EXPECT(gbc.readMem(0xadae), 0xe7);
        // E7 0168
        gbc.setState(0x6155, 0xcf9d, 0x6b30, 0x2a32, 0xe2e3, 0xa944, 0x1, 0x1);
        gbc.writeMem(0x6155, { 0xe7 });
        gbc.writeMem(0xcf9b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcf9b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9b), 0x56);
        EXPECT(gbc.readMem(0xcf9c), 0x61);
        // E7 0169
        gbc.setState(0xacfe, 0x85e3, 0x4970, 0x4b1, 0x49a7, 0x36c6, 0x1, 0x0);
        gbc.writeMem(0x85e1, { 0x0, 0x0 });
        gbc.writeMem(0xacfe, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x85e1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e1), 0xff);
        EXPECT(gbc.readMem(0x85e2), 0xac);
        EXPECT(gbc.readMem(0xacfe), 0xe7);
        // E7 016B
        gbc.setState(0x9105, 0xd4b5, 0xacf0, 0x4bc4, 0xb2f4, 0xc06d, 0x0, 0x1);
        gbc.writeMem(0x9105, { 0xe7 });
        gbc.writeMem(0xd4b3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd4b3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9105), 0xe7);
        EXPECT(gbc.readMem(0xd4b3), 0x6);
        EXPECT(gbc.readMem(0xd4b4), 0x91);
        // E7 016D
        gbc.setState(0xdb9f, 0x86fe, 0x36d0, 0xafac, 0x7e6a, 0x99a6, 0x0, 0x1);
        gbc.writeMem(0x86fc, { 0x0, 0x0 });
        gbc.writeMem(0xdb9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x86fc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86fc), 0xa0);
        EXPECT(gbc.readMem(0x86fd), 0xdb);
        EXPECT(gbc.readMem(0xdb9f), 0xe7);
        // E7 016E
        gbc.setState(0x8f3c, 0x803a, 0xc250, 0xacec, 0xbca0, 0xf623, 0x1, 0x1);
        gbc.writeMem(0x8038, { 0x0, 0x0 });
        gbc.writeMem(0x8f3c, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8038);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8038), 0x3d);
        EXPECT(gbc.readMem(0x8039), 0x8f);
        EXPECT(gbc.readMem(0x8f3c), 0xe7);
        // E7 0170
        gbc.setState(0x82c5, 0xcbe3, 0xa830, 0xaf1b, 0x12f1, 0xe685, 0x1, 0x0);
        gbc.writeMem(0x82c5, { 0xe7 });
        gbc.writeMem(0xcbe1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcbe1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82c5), 0xe7);
        EXPECT(gbc.readMem(0xcbe1), 0xc6);
        EXPECT(gbc.readMem(0xcbe2), 0x82);
        // E7 0171
        gbc.setState(0x813e, 0xf789, 0xbb0, 0x9913, 0x6b62, 0xefc6, 0x1, 0x0);
        gbc.writeMem(0x813e, { 0xe7 });
        gbc.writeMem(0xf787, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf787);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x813e), 0xe7);
        EXPECT(gbc.readMem(0xf787), 0x3f);
        EXPECT(gbc.readMem(0xf788), 0x81);
        // E7 0172
        gbc.setState(0xc98d, 0x9a83, 0x960, 0xead9, 0xeede, 0x76c2, 0x0, 0x1);
        gbc.writeMem(0x9a81, { 0x0, 0x0 });
        gbc.writeMem(0xc98d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9a81);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a81), 0x8e);
        EXPECT(gbc.readMem(0x9a82), 0xc9);
        EXPECT(gbc.readMem(0xc98d), 0xe7);
        // E7 0173
        gbc.setState(0xd3ff, 0xf8da, 0x2af0, 0xca53, 0x3344, 0x9801, 0x0, 0x1);
        gbc.writeMem(0xd3ff, { 0xe7 });
        gbc.writeMem(0xf8d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf8d8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ff), 0xe7);
        EXPECT(gbc.readMem(0xf8d8), 0x0);
        EXPECT(gbc.readMem(0xf8d9), 0xd4);
        // E7 0174
        gbc.setState(0x2bdb, 0xaaea, 0xfb00, 0x9199, 0xc83f, 0x70cc, 0x1, 0x1);
        gbc.writeMem(0x2bdb, { 0xe7 });
        gbc.writeMem(0xaae8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xaae8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae8), 0xdc);
        EXPECT(gbc.readMem(0xaae9), 0x2b);
        // E7 0176
        gbc.setState(0x1da9, 0xbf45, 0xcb0, 0x14b5, 0xe7c8, 0xc2fc, 0x0, 0x0);
        gbc.writeMem(0x1da9, { 0xe7 });
        gbc.writeMem(0xbf43, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbf43);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf43), 0xaa);
        EXPECT(gbc.readMem(0xbf44), 0x1d);
        // E7 0178
        gbc.setState(0x9b3f, 0xc8c9, 0x6350, 0x81c8, 0xe824, 0x88b0, 0x0, 0x1);
        gbc.writeMem(0x9b3f, { 0xe7 });
        gbc.writeMem(0xc8c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc8c7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b3f), 0xe7);
        EXPECT(gbc.readMem(0xc8c7), 0x40);
        EXPECT(gbc.readMem(0xc8c8), 0x9b);
        // E7 0179
        gbc.setState(0x4986, 0xb895, 0xba40, 0xab2f, 0xaa20, 0x7b02, 0x0, 0x0);
        gbc.writeMem(0x4986, { 0xe7 });
        gbc.writeMem(0xb893, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb893);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb893), 0x87);
        EXPECT(gbc.readMem(0xb894), 0x49);
        // E7 017B
        gbc.setState(0x544e, 0xf5b2, 0xd440, 0x62fd, 0xc228, 0xba2d, 0x0, 0x1);
        gbc.writeMem(0x544e, { 0xe7 });
        gbc.writeMem(0xf5b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf5b0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5b0), 0x4f);
        EXPECT(gbc.readMem(0xf5b1), 0x54);
        // E7 017D
        gbc.setState(0x4035, 0xcbfc, 0x92a0, 0x1770, 0x7537, 0x2398, 0x1, 0x0);
        gbc.writeMem(0x4035, { 0xe7 });
        gbc.writeMem(0xcbfa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcbfa);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfa), 0x36);
        EXPECT(gbc.readMem(0xcbfb), 0x40);
        // E7 017F
        gbc.setState(0x90c, 0xbcbf, 0x47d0, 0x2f7f, 0x23e7, 0x327d, 0x1, 0x0);
        gbc.writeMem(0x90c, { 0xe7 });
        gbc.writeMem(0xbcbd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xbcbd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcbd), 0xd);
        EXPECT(gbc.readMem(0xbcbe), 0x9);
        // E7 0180
        gbc.setState(0xaa22, 0xf88a, 0x5460, 0xc821, 0xdf5c, 0xa28b, 0x0, 0x1);
        gbc.writeMem(0xaa22, { 0xe7 });
        gbc.writeMem(0xf888, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf888);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa22), 0xe7);
        EXPECT(gbc.readMem(0xf888), 0x23);
        EXPECT(gbc.readMem(0xf889), 0xaa);
        // E7 0181
        gbc.setState(0xc569, 0xef46, 0x27a0, 0xf43a, 0x7062, 0x82ed, 0x1, 0x0);
        gbc.writeMem(0xc569, { 0xe7 });
        gbc.writeMem(0xef44, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xef44);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc569), 0xe7);
        EXPECT(gbc.readMem(0xef44), 0x6a);
        EXPECT(gbc.readMem(0xef45), 0xc5);
        // E7 0186
        gbc.setState(0xcd5e, 0xa4bf, 0xd2b0, 0x2145, 0x7629, 0xad1d, 0x0, 0x1);
        gbc.writeMem(0xa4bd, { 0x0, 0x0 });
        gbc.writeMem(0xcd5e, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa4bd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bd), 0x5f);
        EXPECT(gbc.readMem(0xa4be), 0xcd);
        EXPECT(gbc.readMem(0xcd5e), 0xe7);
        // E7 0188
        gbc.setState(0xe4fe, 0xb7e9, 0x2560, 0x40c8, 0x6fa8, 0xb8a5, 0x0, 0x1);
        gbc.writeMem(0xb7e7, { 0x0, 0x0 });
        gbc.writeMem(0xe4fe, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb7e7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e7), 0xff);
        EXPECT(gbc.readMem(0xb7e8), 0xe4);
        EXPECT(gbc.readMem(0xe4fe), 0xe7);
        // E7 0189
        gbc.setState(0x87fa, 0xae0f, 0xbc30, 0x1f5b, 0x91a1, 0xca24, 0x1, 0x0);
        gbc.writeMem(0x87fa, { 0xe7 });
        gbc.writeMem(0xae0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xae0d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fa), 0xe7);
        EXPECT(gbc.readMem(0xae0d), 0xfb);
        EXPECT(gbc.readMem(0xae0e), 0x87);
        // E7 018A
        gbc.setState(0x5a30, 0x81bd, 0x1200, 0x9d9d, 0x7e22, 0x609d, 0x1, 0x0);
        gbc.writeMem(0x5a30, { 0xe7 });
        gbc.writeMem(0x81bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x81bb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bb), 0x31);
        EXPECT(gbc.readMem(0x81bc), 0x5a);
        // E7 018D
        gbc.setState(0xb06a, 0xe49c, 0xbc30, 0x623c, 0x2fd0, 0xf19e, 0x1, 0x0);
        gbc.writeMem(0xb06a, { 0xe7 });
        gbc.writeMem(0xe49a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe49a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06a), 0xe7);
        EXPECT(gbc.readMem(0xe49a), 0x6b);
        EXPECT(gbc.readMem(0xe49b), 0xb0);
        // E7 018F
        gbc.setState(0xdd44, 0xf1d9, 0x1c70, 0xc563, 0xd9c9, 0x3b9e, 0x1, 0x1);
        gbc.writeMem(0xdd44, { 0xe7 });
        gbc.writeMem(0xf1d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf1d7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd44), 0xe7);
        EXPECT(gbc.readMem(0xf1d7), 0x45);
        EXPECT(gbc.readMem(0xf1d8), 0xdd);
        // E7 0194
        gbc.setState(0xd3c8, 0xdaa0, 0x2c50, 0x3fce, 0x9ced, 0xe184, 0x0, 0x1);
        gbc.writeMem(0xd3c8, { 0xe7 });
        gbc.writeMem(0xda9e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xda9e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c8), 0xe7);
        EXPECT(gbc.readMem(0xda9e), 0xc9);
        EXPECT(gbc.readMem(0xda9f), 0xd3);
        // E7 0197
        gbc.setState(0xb163, 0xbcc2, 0x2810, 0xabe2, 0xb163, 0xcdd4, 0x0, 0x1);
        gbc.writeMem(0xb163, { 0xe7 });
        gbc.writeMem(0xbcc0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbcc0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb163), 0xe7);
        EXPECT(gbc.readMem(0xbcc0), 0x64);
        EXPECT(gbc.readMem(0xbcc1), 0xb1);
        // E7 019A
        gbc.setState(0x1d9c, 0x831f, 0xc190, 0xda69, 0xf03, 0xda1d, 0x1, 0x1);
        gbc.writeMem(0x1d9c, { 0xe7 });
        gbc.writeMem(0x831d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x831d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x831d), 0x9d);
        EXPECT(gbc.readMem(0x831e), 0x1d);
        // E7 019E
        gbc.setState(0x6700, 0xb392, 0x18b0, 0xdd1d, 0x8dea, 0x3ffe, 0x1, 0x1);
        gbc.writeMem(0x6700, { 0xe7 });
        gbc.writeMem(0xb390, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb390);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb390), 0x1);
        EXPECT(gbc.readMem(0xb391), 0x67);
        // E7 01A0
        gbc.setState(0xcf56, 0x8d30, 0xe3d0, 0xf1b2, 0x7d1b, 0x2b0f, 0x0, 0x1);
        gbc.writeMem(0x8d2e, { 0x0, 0x0 });
        gbc.writeMem(0xcf56, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8d2e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2e), 0x57);
        EXPECT(gbc.readMem(0x8d2f), 0xcf);
        EXPECT(gbc.readMem(0xcf56), 0xe7);
        // E7 01A1
        gbc.setState(0x82be, 0xb267, 0x4340, 0xa0c9, 0x615d, 0xe17f, 0x0, 0x0);
        gbc.writeMem(0x82be, { 0xe7 });
        gbc.writeMem(0xb265, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb265);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82be), 0xe7);
        EXPECT(gbc.readMem(0xb265), 0xbf);
        EXPECT(gbc.readMem(0xb266), 0x82);
        // E7 01A3
        gbc.setState(0xa203, 0xc753, 0x8400, 0xf691, 0x1b17, 0x8c88, 0x0, 0x1);
        gbc.writeMem(0xa203, { 0xe7 });
        gbc.writeMem(0xc751, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc751);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa203), 0xe7);
        EXPECT(gbc.readMem(0xc751), 0x4);
        EXPECT(gbc.readMem(0xc752), 0xa2);
        // E7 01A5
        gbc.setState(0xd9b, 0xfbc0, 0xb100, 0x1eec, 0x38b3, 0x5a98, 0x1, 0x0);
        gbc.writeMem(0xd9b, { 0xe7 });
        gbc.writeMem(0xfbbe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfbbe);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbbe), 0x9c);
        EXPECT(gbc.readMem(0xfbbf), 0xd);
        // E7 01A6
        gbc.setState(0xe827, 0x8bf4, 0x5b0, 0x766a, 0xf271, 0x8c60, 0x1, 0x0);
        gbc.writeMem(0x8bf2, { 0x0, 0x0 });
        gbc.writeMem(0xe827, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8bf2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf2), 0x28);
        EXPECT(gbc.readMem(0x8bf3), 0xe8);
        EXPECT(gbc.readMem(0xe827), 0xe7);
        // E7 01A7
        gbc.setState(0x5d60, 0xc660, 0x5650, 0x8a76, 0xf418, 0xfe5c, 0x1, 0x1);
        gbc.writeMem(0x5d60, { 0xe7 });
        gbc.writeMem(0xc65e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc65e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65e), 0x61);
        EXPECT(gbc.readMem(0xc65f), 0x5d);
        // E7 01A8
        gbc.setState(0xe87e, 0xf529, 0x2fd0, 0xad41, 0xda88, 0x4e3b, 0x0, 0x1);
        gbc.writeMem(0xe87e, { 0xe7 });
        gbc.writeMem(0xf527, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf527);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe87e), 0xe7);
        EXPECT(gbc.readMem(0xf527), 0x7f);
        EXPECT(gbc.readMem(0xf528), 0xe8);
        // E7 01A9
        gbc.setState(0x986e, 0xfa62, 0xb9c0, 0x3be6, 0x9b79, 0x68b9, 0x1, 0x1);
        gbc.writeMem(0x986e, { 0xe7 });
        gbc.writeMem(0xfa60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfa60);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x986e), 0xe7);
        EXPECT(gbc.readMem(0xfa60), 0x6f);
        EXPECT(gbc.readMem(0xfa61), 0x98);
        // E7 01AB
        gbc.setState(0x19e2, 0xd134, 0xd3e0, 0x27, 0x965e, 0x3487, 0x1, 0x1);
        gbc.writeMem(0x19e2, { 0xe7 });
        gbc.writeMem(0xd132, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd132);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd132), 0xe3);
        EXPECT(gbc.readMem(0xd133), 0x19);
        // E7 01AC
        gbc.setState(0xa17c, 0x8a09, 0xc3f0, 0x5c37, 0x3fd9, 0x35ac, 0x1, 0x1);
        gbc.writeMem(0x8a07, { 0x0, 0x0 });
        gbc.writeMem(0xa17c, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8a07);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a07), 0x7d);
        EXPECT(gbc.readMem(0x8a08), 0xa1);
        EXPECT(gbc.readMem(0xa17c), 0xe7);
        // E7 01AD
        gbc.setState(0xeb64, 0xccca, 0x8580, 0x3b52, 0x5416, 0x4307, 0x0, 0x0);
        gbc.writeMem(0xccc8, { 0x0, 0x0 });
        gbc.writeMem(0xeb64, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xccc8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc8), 0x65);
        EXPECT(gbc.readMem(0xccc9), 0xeb);
        EXPECT(gbc.readMem(0xeb64), 0xe7);
        // E7 01B1
        gbc.setState(0x35ec, 0xfe76, 0x5480, 0x6b92, 0x4788, 0xe68, 0x1, 0x1);
        gbc.writeMem(0x35ec, { 0xe7 });
        gbc.writeMem(0xfe74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfe74);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe74), 0xed);
        EXPECT(gbc.readMem(0xfe75), 0x35);
        // E7 01B3
        gbc.setState(0x5c24, 0xd98a, 0xf50, 0x2c6, 0x1cea, 0xc214, 0x0, 0x0);
        gbc.writeMem(0x5c24, { 0xe7 });
        gbc.writeMem(0xd988, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd988);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd988), 0x25);
        EXPECT(gbc.readMem(0xd989), 0x5c);
        // E7 01B4
        gbc.setState(0x4d23, 0xa74c, 0x7420, 0xda70, 0x7fe5, 0x36a3, 0x1, 0x0);
        gbc.writeMem(0x4d23, { 0xe7 });
        gbc.writeMem(0xa74a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa74a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa74a), 0x24);
        EXPECT(gbc.readMem(0xa74b), 0x4d);
        // E7 01B6
        gbc.setState(0x3780, 0x9a77, 0x4780, 0x825f, 0xd063, 0x3018, 0x1, 0x0);
        gbc.writeMem(0x3780, { 0xe7 });
        gbc.writeMem(0x9a75, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9a75);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a75), 0x81);
        EXPECT(gbc.readMem(0x9a76), 0x37);
        // E7 01B8
        gbc.setState(0x7157, 0xb773, 0x1830, 0x9b6, 0xa9dd, 0xac06, 0x0, 0x0);
        gbc.writeMem(0x7157, { 0xe7 });
        gbc.writeMem(0xb771, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb771);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb771), 0x58);
        EXPECT(gbc.readMem(0xb772), 0x71);
        // E7 01BA
        gbc.setState(0xc4a2, 0xbd90, 0xba90, 0x5380, 0x3447, 0x67ae, 0x0, 0x1);
        gbc.writeMem(0xbd8e, { 0x0, 0x0 });
        gbc.writeMem(0xc4a2, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xbd8e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd8e), 0xa3);
        EXPECT(gbc.readMem(0xbd8f), 0xc4);
        EXPECT(gbc.readMem(0xc4a2), 0xe7);
        // E7 01BC
        gbc.setState(0xe78a, 0xea6e, 0xbc80, 0xa4df, 0xd23d, 0xbc0d, 0x0, 0x1);
        gbc.writeMem(0xe78a, { 0xe7 });
        gbc.writeMem(0xea6c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xea6c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78a), 0xe7);
        EXPECT(gbc.readMem(0xea6c), 0x8b);
        EXPECT(gbc.readMem(0xea6d), 0xe7);
        // E7 01C1
        gbc.setState(0xb8ee, 0xe560, 0x5120, 0x6f06, 0x2c44, 0xcc11, 0x1, 0x0);
        gbc.writeMem(0xb8ee, { 0xe7 });
        gbc.writeMem(0xe55e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe55e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ee), 0xe7);
        EXPECT(gbc.readMem(0xe55e), 0xef);
        EXPECT(gbc.readMem(0xe55f), 0xb8);
        // E7 01C4
        gbc.setState(0x3403, 0xce32, 0x12f0, 0x395a, 0xd440, 0x1836, 0x0, 0x0);
        gbc.writeMem(0x3403, { 0xe7 });
        gbc.writeMem(0xce30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xce30);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce30), 0x4);
        EXPECT(gbc.readMem(0xce31), 0x34);
        // E7 01C6
        gbc.setState(0x5f95, 0xd858, 0xf9b0, 0xce49, 0x5e68, 0x8f33, 0x0, 0x1);
        gbc.writeMem(0x5f95, { 0xe7 });
        gbc.writeMem(0xd856, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd856);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd856), 0x96);
        EXPECT(gbc.readMem(0xd857), 0x5f);
        // E7 01C7
        gbc.setState(0x9ce9, 0xc155, 0xf2f0, 0xb268, 0xdfab, 0xea78, 0x1, 0x1);
        gbc.writeMem(0x9ce9, { 0xe7 });
        gbc.writeMem(0xc153, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc153);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce9), 0xe7);
        EXPECT(gbc.readMem(0xc153), 0xea);
        EXPECT(gbc.readMem(0xc154), 0x9c);
        // E7 01C8
        gbc.setState(0xca8, 0x929c, 0xff60, 0xb4a, 0x3c5c, 0x317f, 0x0, 0x1);
        gbc.writeMem(0xca8, { 0xe7 });
        gbc.writeMem(0x929a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x929a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x929a), 0xa9);
        EXPECT(gbc.readMem(0x929b), 0xc);
        // E7 01C9
        gbc.setState(0x5ec4, 0xedc9, 0x58b0, 0x23d2, 0x9313, 0x24e8, 0x1, 0x1);
        gbc.writeMem(0x5ec4, { 0xe7 });
        gbc.writeMem(0xedc7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xedc7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedc7), 0xc5);
        EXPECT(gbc.readMem(0xedc8), 0x5e);
        // E7 01CB
        gbc.setState(0xd24f, 0xe384, 0xf1f0, 0xc17d, 0x8c4d, 0x690d, 0x0, 0x0);
        gbc.writeMem(0xd24f, { 0xe7 });
        gbc.writeMem(0xe382, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe382);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd24f), 0xe7);
        EXPECT(gbc.readMem(0xe382), 0x50);
        EXPECT(gbc.readMem(0xe383), 0xd2);
        // E7 01D1
        gbc.setState(0x5857, 0xd6d0, 0x5c40, 0xa6c0, 0xd0be, 0x142e, 0x0, 0x0);
        gbc.writeMem(0x5857, { 0xe7 });
        gbc.writeMem(0xd6ce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd6ce);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ce), 0x58);
        EXPECT(gbc.readMem(0xd6cf), 0x58);
        // E7 01D6
        gbc.setState(0x4dbe, 0xadc2, 0xd650, 0x2903, 0x7648, 0x53a3, 0x1, 0x0);
        gbc.writeMem(0x4dbe, { 0xe7 });
        gbc.writeMem(0xadc0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xadc0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc0), 0xbf);
        EXPECT(gbc.readMem(0xadc1), 0x4d);
        // E7 01D8
        gbc.setState(0xb176, 0xf5a5, 0x5880, 0x4253, 0xf456, 0x8b29, 0x0, 0x0);
        gbc.writeMem(0xb176, { 0xe7 });
        gbc.writeMem(0xf5a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf5a3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb176), 0xe7);
        EXPECT(gbc.readMem(0xf5a3), 0x77);
        EXPECT(gbc.readMem(0xf5a4), 0xb1);
        // E7 01D9
        gbc.setState(0xad2, 0xab95, 0x4af0, 0x9551, 0x5479, 0x3cde, 0x1, 0x0);
        gbc.writeMem(0xad2, { 0xe7 });
        gbc.writeMem(0xab93, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xab93);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab93), 0xd3);
        EXPECT(gbc.readMem(0xab94), 0xa);
        // E7 01DA
        gbc.setState(0x1365, 0xb684, 0xa670, 0xd198, 0xa852, 0x4159, 0x0, 0x0);
        gbc.writeMem(0x1365, { 0xe7 });
        gbc.writeMem(0xb682, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb682);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb682), 0x66);
        EXPECT(gbc.readMem(0xb683), 0x13);
        // E7 01DB
        gbc.setState(0x3fab, 0xda98, 0x8070, 0xceb4, 0x6c70, 0x91c5, 0x1, 0x0);
        gbc.writeMem(0x3fab, { 0xe7 });
        gbc.writeMem(0xda96, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xda96);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda96), 0xac);
        EXPECT(gbc.readMem(0xda97), 0x3f);
        // E7 01E0
        gbc.setState(0xa16d, 0xcd14, 0x8670, 0xf4df, 0xe23f, 0xf149, 0x0, 0x0);
        gbc.writeMem(0xa16d, { 0xe7 });
        gbc.writeMem(0xcd12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcd12);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa16d), 0xe7);
        EXPECT(gbc.readMem(0xcd12), 0x6e);
        EXPECT(gbc.readMem(0xcd13), 0xa1);
        // E7 01E1
        gbc.setState(0xab0e, 0xc800, 0xd3f0, 0xb214, 0x705c, 0xe01b, 0x1, 0x0);
        gbc.writeMem(0xab0e, { 0xe7 });
        gbc.writeMem(0xc7fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc7fe);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0e), 0xe7);
        EXPECT(gbc.readMem(0xc7fe), 0xf);
        EXPECT(gbc.readMem(0xc7ff), 0xab);
        // E7 01E2
        gbc.setState(0xdeed, 0xb6d7, 0x5720, 0xfd28, 0x7b02, 0x6d5e, 0x1, 0x0);
        gbc.writeMem(0xb6d5, { 0x0, 0x0 });
        gbc.writeMem(0xdeed, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb6d5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d5), 0xee);
        EXPECT(gbc.readMem(0xb6d6), 0xde);
        EXPECT(gbc.readMem(0xdeed), 0xe7);
        // E7 01E3
        gbc.setState(0x2973, 0xd032, 0xc0c0, 0x5e74, 0xc12a, 0x342c, 0x0, 0x1);
        gbc.writeMem(0x2973, { 0xe7 });
        gbc.writeMem(0xd030, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd030);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd030), 0x74);
        EXPECT(gbc.readMem(0xd031), 0x29);
        // E7 01E4
        gbc.setState(0x5fb, 0xd32f, 0x4600, 0x78f3, 0x8b3e, 0x2473, 0x1, 0x1);
        gbc.writeMem(0x5fb, { 0xe7 });
        gbc.writeMem(0xd32d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd32d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32d), 0xfc);
        EXPECT(gbc.readMem(0xd32e), 0x5);
        // E7 01E5
        gbc.setState(0x69eb, 0xa3d4, 0x3e0, 0x3fd5, 0xc824, 0xce27, 0x1, 0x0);
        gbc.writeMem(0x69eb, { 0xe7 });
        gbc.writeMem(0xa3d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa3d2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d2), 0xec);
        EXPECT(gbc.readMem(0xa3d3), 0x69);
        // E7 01E7
        gbc.setState(0x5a2a, 0xbd23, 0x8a10, 0x347, 0xaa51, 0x52ff, 0x0, 0x0);
        gbc.writeMem(0x5a2a, { 0xe7 });
        gbc.writeMem(0xbd21, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbd21);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd21), 0x2b);
        EXPECT(gbc.readMem(0xbd22), 0x5a);
        // E7 01E8
        gbc.setState(0xb9f7, 0xb0c8, 0x9490, 0xb034, 0x15f1, 0x64d4, 0x0, 0x0);
        gbc.writeMem(0xb0c6, { 0x0, 0x0 });
        gbc.writeMem(0xb9f7, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb0c6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0c6), 0xf8);
        EXPECT(gbc.readMem(0xb0c7), 0xb9);
        EXPECT(gbc.readMem(0xb9f7), 0xe7);
        // E7 01E9
        gbc.setState(0xe620, 0xb380, 0x1790, 0xdf79, 0xb11a, 0x913f, 0x0, 0x1);
        gbc.writeMem(0xb37e, { 0x0, 0x0 });
        gbc.writeMem(0xe620, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb37e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb37e), 0x21);
        EXPECT(gbc.readMem(0xb37f), 0xe6);
        EXPECT(gbc.readMem(0xe620), 0xe7);
        // E7 01EC
        gbc.setState(0x932c, 0xa176, 0x63a0, 0x9b40, 0x7c3, 0x294f, 0x0, 0x1);
        gbc.writeMem(0x932c, { 0xe7 });
        gbc.writeMem(0xa174, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa174);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x932c), 0xe7);
        EXPECT(gbc.readMem(0xa174), 0x2d);
        EXPECT(gbc.readMem(0xa175), 0x93);
        // E7 01EF
        gbc.setState(0xcd85, 0xc36e, 0x84c0, 0x91dc, 0x5b9, 0xc5c2, 0x1, 0x0);
        gbc.writeMem(0xc36c, { 0x0, 0x0 });
        gbc.writeMem(0xcd85, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc36c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36c), 0x86);
        EXPECT(gbc.readMem(0xc36d), 0xcd);
        EXPECT(gbc.readMem(0xcd85), 0xe7);
        // E7 01F0
        gbc.setState(0x2b12, 0xa71a, 0x6d00, 0x6899, 0x52a4, 0x42c7, 0x0, 0x0);
        gbc.writeMem(0x2b12, { 0xe7 });
        gbc.writeMem(0xa718, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa718);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa718), 0x13);
        EXPECT(gbc.readMem(0xa719), 0x2b);
        // E7 01F1
        gbc.setState(0xc9cd, 0xe080, 0xb880, 0xaf7e, 0x399c, 0xde23, 0x0, 0x0);
        gbc.writeMem(0xc9cd, { 0xe7 });
        gbc.writeMem(0xe07e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe07e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9cd), 0xe7);
        EXPECT(gbc.readMem(0xe07e), 0xce);
        EXPECT(gbc.readMem(0xe07f), 0xc9);
        // E7 01F4
        gbc.setState(0xe9ac, 0xf5a2, 0x1aa0, 0xbec0, 0xff69, 0xbafc, 0x1, 0x0);
        gbc.writeMem(0xe9ac, { 0xe7 });
        gbc.writeMem(0xf5a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf5a0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ac), 0xe7);
        EXPECT(gbc.readMem(0xf5a0), 0xad);
        EXPECT(gbc.readMem(0xf5a1), 0xe9);
        // E7 01F5
        gbc.setState(0x64aa, 0xf8f3, 0xa270, 0x1e39, 0x3eff, 0xd4f5, 0x0, 0x1);
        gbc.writeMem(0x64aa, { 0xe7 });
        gbc.writeMem(0xf8f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf8f1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8f1), 0xab);
        EXPECT(gbc.readMem(0xf8f2), 0x64);
        // E7 01F7
        gbc.setState(0xc618, 0xa277, 0xcb00, 0x6793, 0x216c, 0xc965, 0x0, 0x0);
        gbc.writeMem(0xa275, { 0x0, 0x0 });
        gbc.writeMem(0xc618, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa275);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa275), 0x19);
        EXPECT(gbc.readMem(0xa276), 0xc6);
        EXPECT(gbc.readMem(0xc618), 0xe7);
        // E7 01FA
        gbc.setState(0x3ade, 0xae4d, 0x2560, 0x249b, 0xa408, 0xdd9e, 0x0, 0x0);
        gbc.writeMem(0x3ade, { 0xe7 });
        gbc.writeMem(0xae4b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xae4b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4b), 0xdf);
        EXPECT(gbc.readMem(0xae4c), 0x3a);
        // E7 01FB
        gbc.setState(0x1121, 0xbc9a, 0xfa90, 0x34e1, 0xcea4, 0x7e77, 0x0, 0x1);
        gbc.writeMem(0x1121, { 0xe7 });
        gbc.writeMem(0xbc98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbc98);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc98), 0x22);
        EXPECT(gbc.readMem(0xbc99), 0x11);
        // E7 01FD
        gbc.setState(0x7ee1, 0xf279, 0xba70, 0x7f4e, 0x5ea6, 0xa38a, 0x0, 0x1);
        gbc.writeMem(0x7ee1, { 0xe7 });
        gbc.writeMem(0xf277, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf277);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf277), 0xe2);
        EXPECT(gbc.readMem(0xf278), 0x7e);
        // E7 01FE
        gbc.setState(0x9fad, 0xee47, 0x2060, 0x2e73, 0x3b71, 0x9c69, 0x0, 0x1);
        gbc.writeMem(0x9fad, { 0xe7 });
        gbc.writeMem(0xee45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xee45);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fad), 0xe7);
        EXPECT(gbc.readMem(0xee45), 0xae);
        EXPECT(gbc.readMem(0xee46), 0x9f);
        // E7 01FF
        gbc.setState(0x57de, 0x968f, 0x6850, 0xa870, 0x3346, 0x9b52, 0x1, 0x0);
        gbc.writeMem(0x57de, { 0xe7 });
        gbc.writeMem(0x968d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x968d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x968d), 0xdf);
        EXPECT(gbc.readMem(0x968e), 0x57);
        // E7 0201
        gbc.setState(0x5f55, 0xef39, 0x4d0, 0x1e3c, 0xcb28, 0x2757, 0x0, 0x1);
        gbc.writeMem(0x5f55, { 0xe7 });
        gbc.writeMem(0xef37, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xef37);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef37), 0x56);
        EXPECT(gbc.readMem(0xef38), 0x5f);
        // E7 0203
        gbc.setState(0x48ee, 0xec54, 0xb40, 0x322f, 0x4681, 0xb743, 0x0, 0x0);
        gbc.writeMem(0x48ee, { 0xe7 });
        gbc.writeMem(0xec52, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xec52);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec52), 0xef);
        EXPECT(gbc.readMem(0xec53), 0x48);
        // E7 0205
        gbc.setState(0xb8b3, 0xad3d, 0x4d00, 0xa904, 0x42e9, 0x1014, 0x1, 0x0);
        gbc.writeMem(0xad3b, { 0x0, 0x0 });
        gbc.writeMem(0xb8b3, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xad3b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3b), 0xb4);
        EXPECT(gbc.readMem(0xad3c), 0xb8);
        EXPECT(gbc.readMem(0xb8b3), 0xe7);
        // E7 0206
        gbc.setState(0x6257, 0xb9e2, 0xfed0, 0xbb86, 0xce0c, 0x1535, 0x1, 0x1);
        gbc.writeMem(0x6257, { 0xe7 });
        gbc.writeMem(0xb9e0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb9e0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e0), 0x58);
        EXPECT(gbc.readMem(0xb9e1), 0x62);
        // E7 0209
        gbc.setState(0x3da7, 0xb6e3, 0xa450, 0xe6d0, 0xc3b1, 0x1a71, 0x0, 0x1);
        gbc.writeMem(0x3da7, { 0xe7 });
        gbc.writeMem(0xb6e1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb6e1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e1), 0xa8);
        EXPECT(gbc.readMem(0xb6e2), 0x3d);
        // E7 020A
        gbc.setState(0xa347, 0xca26, 0xc950, 0x9ce3, 0xbc1e, 0xedf7, 0x0, 0x0);
        gbc.writeMem(0xa347, { 0xe7 });
        gbc.writeMem(0xca24, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xca24);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa347), 0xe7);
        EXPECT(gbc.readMem(0xca24), 0x48);
        EXPECT(gbc.readMem(0xca25), 0xa3);
        // E7 020D
        gbc.setState(0x977d, 0xac24, 0x4080, 0x3314, 0xc637, 0xeffa, 0x1, 0x1);
        gbc.writeMem(0x977d, { 0xe7 });
        gbc.writeMem(0xac22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xac22);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x977d), 0xe7);
        EXPECT(gbc.readMem(0xac22), 0x7e);
        EXPECT(gbc.readMem(0xac23), 0x97);
        // E7 0211
        gbc.setState(0xb40, 0xc130, 0x1d0, 0x7688, 0x106c, 0x2da6, 0x1, 0x0);
        gbc.writeMem(0xb40, { 0xe7 });
        gbc.writeMem(0xc12e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc12e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc12e), 0x41);
        EXPECT(gbc.readMem(0xc12f), 0xb);
        // E7 0212
        gbc.setState(0xc02d, 0x8caf, 0xc1b0, 0x4ec4, 0x1e06, 0x4358, 0x1, 0x1);
        gbc.writeMem(0x8cad, { 0x0, 0x0 });
        gbc.writeMem(0xc02d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8cad);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cad), 0x2e);
        EXPECT(gbc.readMem(0x8cae), 0xc0);
        EXPECT(gbc.readMem(0xc02d), 0xe7);
        // E7 0216
        gbc.setState(0x5720, 0xc41b, 0xbdf0, 0x552d, 0x1106, 0x302d, 0x1, 0x0);
        gbc.writeMem(0x5720, { 0xe7 });
        gbc.writeMem(0xc419, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc419);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc419), 0x21);
        EXPECT(gbc.readMem(0xc41a), 0x57);
        // E7 021A
        gbc.setState(0xe74b, 0xb639, 0xec0, 0x30a1, 0x39ef, 0x906b, 0x1, 0x1);
        gbc.writeMem(0xb637, { 0x0, 0x0 });
        gbc.writeMem(0xe74b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb637);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb637), 0x4c);
        EXPECT(gbc.readMem(0xb638), 0xe7);
        EXPECT(gbc.readMem(0xe74b), 0xe7);
        // E7 021B
        gbc.setState(0x7918, 0xd8fe, 0xa330, 0x273e, 0x4ff6, 0xf87b, 0x0, 0x1);
        gbc.writeMem(0x7918, { 0xe7 });
        gbc.writeMem(0xd8fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd8fc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8fc), 0x19);
        EXPECT(gbc.readMem(0xd8fd), 0x79);
        // E7 021F
        gbc.setState(0x184b, 0xbb72, 0x6990, 0x902b, 0x2eb1, 0x9979, 0x0, 0x1);
        gbc.writeMem(0x184b, { 0xe7 });
        gbc.writeMem(0xbb70, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbb70);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb70), 0x4c);
        EXPECT(gbc.readMem(0xbb71), 0x18);
        // E7 0226
        gbc.setState(0x6cb1, 0xa939, 0x2270, 0x9a0b, 0x15db, 0x11ca, 0x1, 0x1);
        gbc.writeMem(0x6cb1, { 0xe7 });
        gbc.writeMem(0xa937, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa937);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa937), 0xb2);
        EXPECT(gbc.readMem(0xa938), 0x6c);
        // E7 0228
        gbc.setState(0x96cd, 0xa3d4, 0x9cc0, 0x7c7f, 0xabaa, 0x99e1, 0x0, 0x1);
        gbc.writeMem(0x96cd, { 0xe7 });
        gbc.writeMem(0xa3d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa3d2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96cd), 0xe7);
        EXPECT(gbc.readMem(0xa3d2), 0xce);
        EXPECT(gbc.readMem(0xa3d3), 0x96);
        // E7 022A
        gbc.setState(0x1ef6, 0x8813, 0x3150, 0x657, 0x9569, 0x60fb, 0x0, 0x1);
        gbc.writeMem(0x1ef6, { 0xe7 });
        gbc.writeMem(0x8811, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8811);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8811), 0xf7);
        EXPECT(gbc.readMem(0x8812), 0x1e);
        // E7 022C
        gbc.setState(0x1f20, 0x8224, 0x4390, 0x33d5, 0x5351, 0x5ca2, 0x0, 0x0);
        gbc.writeMem(0x1f20, { 0xe7 });
        gbc.writeMem(0x8222, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8222);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8222), 0x21);
        EXPECT(gbc.readMem(0x8223), 0x1f);
        // E7 022E
        gbc.setState(0x1527, 0xccdc, 0x9420, 0x9369, 0xefec, 0xb19b, 0x1, 0x0);
        gbc.writeMem(0x1527, { 0xe7 });
        gbc.writeMem(0xccda, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xccda);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccda), 0x28);
        EXPECT(gbc.readMem(0xccdb), 0x15);
        // E7 0232
        gbc.setState(0x5813, 0xc259, 0x7400, 0xd87b, 0xdce9, 0x42b3, 0x0, 0x1);
        gbc.writeMem(0x5813, { 0xe7 });
        gbc.writeMem(0xc257, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc257);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc257), 0x14);
        EXPECT(gbc.readMem(0xc258), 0x58);
        // E7 0233
        gbc.setState(0xb36c, 0xfce2, 0x40c0, 0x26d6, 0xa26a, 0x7c99, 0x0, 0x1);
        gbc.writeMem(0xb36c, { 0xe7 });
        gbc.writeMem(0xfce0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfce0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb36c), 0xe7);
        EXPECT(gbc.readMem(0xfce0), 0x6d);
        EXPECT(gbc.readMem(0xfce1), 0xb3);
        // E7 0235
        gbc.setState(0x10bb, 0x98d6, 0xfab0, 0x2e83, 0x9fd7, 0xbc0e, 0x0, 0x1);
        gbc.writeMem(0x10bb, { 0xe7 });
        gbc.writeMem(0x98d4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x98d4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d4), 0xbc);
        EXPECT(gbc.readMem(0x98d5), 0x10);
        // E7 0238
        gbc.setState(0xa9e0, 0xdf7c, 0xeb90, 0xda9f, 0x2465, 0x39a1, 0x0, 0x1);
        gbc.writeMem(0xa9e0, { 0xe7 });
        gbc.writeMem(0xdf7a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdf7a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e0), 0xe7);
        EXPECT(gbc.readMem(0xdf7a), 0xe1);
        EXPECT(gbc.readMem(0xdf7b), 0xa9);
        // E7 023A
        gbc.setState(0xbb7, 0xac5c, 0x4610, 0x9b21, 0xaf14, 0x69b0, 0x1, 0x0);
        gbc.writeMem(0xbb7, { 0xe7 });
        gbc.writeMem(0xac5a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xac5a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5a), 0xb8);
        EXPECT(gbc.readMem(0xac5b), 0xb);
        // E7 023B
        gbc.setState(0x364c, 0x9550, 0x3db0, 0xae1b, 0x5f3, 0x37a, 0x0, 0x0);
        gbc.writeMem(0x364c, { 0xe7 });
        gbc.writeMem(0x954e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x954e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x954e), 0x4d);
        EXPECT(gbc.readMem(0x954f), 0x36);
        // E7 023C
        gbc.setState(0xb0a2, 0xac63, 0x9ab0, 0x10d2, 0x9cbe, 0x6fe6, 0x0, 0x0);
        gbc.writeMem(0xac61, { 0x0, 0x0 });
        gbc.writeMem(0xb0a2, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xac61);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac61), 0xa3);
        EXPECT(gbc.readMem(0xac62), 0xb0);
        EXPECT(gbc.readMem(0xb0a2), 0xe7);
        // E7 0242
        gbc.setState(0xd448, 0xf525, 0xf180, 0xe2fd, 0x3ce2, 0x3aa4, 0x0, 0x1);
        gbc.writeMem(0xd448, { 0xe7 });
        gbc.writeMem(0xf523, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf523);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd448), 0xe7);
        EXPECT(gbc.readMem(0xf523), 0x49);
        EXPECT(gbc.readMem(0xf524), 0xd4);
        // E7 0245
        gbc.setState(0xa721, 0xc93b, 0xeb70, 0x94eb, 0xdae3, 0x5f55, 0x1, 0x1);
        gbc.writeMem(0xa721, { 0xe7 });
        gbc.writeMem(0xc939, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc939);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa721), 0xe7);
        EXPECT(gbc.readMem(0xc939), 0x22);
        EXPECT(gbc.readMem(0xc93a), 0xa7);
        // E7 0247
        gbc.setState(0xad42, 0x97e0, 0x7610, 0x7fcc, 0x7146, 0xe7cf, 0x1, 0x0);
        gbc.writeMem(0x97de, { 0x0, 0x0 });
        gbc.writeMem(0xad42, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x97de);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97de), 0x43);
        EXPECT(gbc.readMem(0x97df), 0xad);
        EXPECT(gbc.readMem(0xad42), 0xe7);
        // E7 0248
        gbc.setState(0x34ca, 0xa80c, 0xb460, 0x363a, 0x843, 0xff6, 0x0, 0x0);
        gbc.writeMem(0x34ca, { 0xe7 });
        gbc.writeMem(0xa80a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa80a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa80a), 0xcb);
        EXPECT(gbc.readMem(0xa80b), 0x34);
        // E7 024A
        gbc.setState(0x93c5, 0x93b3, 0x4910, 0x96d7, 0x2423, 0x2f42, 0x1, 0x1);
        gbc.writeMem(0x93b1, { 0x0, 0x0 });
        gbc.writeMem(0x93c5, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x93b1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b1), 0xc6);
        EXPECT(gbc.readMem(0x93b2), 0x93);
        EXPECT(gbc.readMem(0x93c5), 0xe7);
        // E7 024C
        gbc.setState(0x8596, 0xe072, 0xb800, 0xa4aa, 0x6c8d, 0x8122, 0x1, 0x0);
        gbc.writeMem(0x8596, { 0xe7 });
        gbc.writeMem(0xe070, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe070);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8596), 0xe7);
        EXPECT(gbc.readMem(0xe070), 0x97);
        EXPECT(gbc.readMem(0xe071), 0x85);
        // E7 024D
        gbc.setState(0x851, 0x9f1b, 0xff10, 0x2942, 0xe7c0, 0xe8ad, 0x0, 0x0);
        gbc.writeMem(0x851, { 0xe7 });
        gbc.writeMem(0x9f19, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9f19);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f19), 0x52);
        EXPECT(gbc.readMem(0x9f1a), 0x8);
        // E7 024E
        gbc.setState(0x5ea, 0xf6dd, 0x9cc0, 0xd222, 0x882b, 0x9b02, 0x0, 0x1);
        gbc.writeMem(0x5ea, { 0xe7 });
        gbc.writeMem(0xf6db, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf6db);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6db), 0xeb);
        EXPECT(gbc.readMem(0xf6dc), 0x5);
        // E7 0250
        gbc.setState(0x1bb7, 0xcfcb, 0x9bf0, 0x881c, 0xe32c, 0xcf81, 0x0, 0x1);
        gbc.writeMem(0x1bb7, { 0xe7 });
        gbc.writeMem(0xcfc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xcfc9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc9), 0xb8);
        EXPECT(gbc.readMem(0xcfca), 0x1b);
        // E7 0255
        gbc.setState(0x512f, 0xff7a, 0x250, 0x7982, 0xd9ba, 0xb02a, 0x0, 0x1);
        gbc.writeMem(0x512f, { 0xe7 });
        gbc.writeMem(0xff78, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xff78);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff78), 0x30);
        EXPECT(gbc.readMem(0xff79), 0x51);
        // E7 0258
        gbc.setState(0xba29, 0xd075, 0x9860, 0x34a4, 0xc543, 0x8900, 0x0, 0x0);
        gbc.writeMem(0xba29, { 0xe7 });
        gbc.writeMem(0xd073, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd073);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba29), 0xe7);
        EXPECT(gbc.readMem(0xd073), 0x2a);
        EXPECT(gbc.readMem(0xd074), 0xba);
        // E7 0259
        gbc.setState(0xef61, 0xfb71, 0xf260, 0xd3c4, 0xa34a, 0x86e2, 0x1, 0x1);
        gbc.writeMem(0xef61, { 0xe7 });
        gbc.writeMem(0xfb6f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfb6f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef61), 0xe7);
        EXPECT(gbc.readMem(0xfb6f), 0x62);
        EXPECT(gbc.readMem(0xfb70), 0xef);
        // E7 025A
        gbc.setState(0x1872, 0xbb29, 0x7470, 0xde39, 0xdda5, 0xff07, 0x0, 0x0);
        gbc.writeMem(0x1872, { 0xe7 });
        gbc.writeMem(0xbb27, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbb27);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb27), 0x73);
        EXPECT(gbc.readMem(0xbb28), 0x18);
        // E7 025B
        gbc.setState(0x5f6, 0xc3be, 0x63c0, 0x492b, 0xda3f, 0x969b, 0x1, 0x0);
        gbc.writeMem(0x5f6, { 0xe7 });
        gbc.writeMem(0xc3bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc3bc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3bc), 0xf7);
        EXPECT(gbc.readMem(0xc3bd), 0x5);
        // E7 025E
        gbc.setState(0xc710, 0xc8bd, 0xe460, 0x3b79, 0xe686, 0x1af3, 0x1, 0x1);
        gbc.writeMem(0xc710, { 0xe7 });
        gbc.writeMem(0xc8bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc8bb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc710), 0xe7);
        EXPECT(gbc.readMem(0xc8bb), 0x11);
        EXPECT(gbc.readMem(0xc8bc), 0xc7);
        // E7 0263
        gbc.setState(0xa6a0, 0x9300, 0x90f0, 0x1355, 0x335c, 0x7147, 0x0, 0x0);
        gbc.writeMem(0x92fe, { 0x0, 0x0 });
        gbc.writeMem(0xa6a0, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x92fe);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92fe), 0xa1);
        EXPECT(gbc.readMem(0x92ff), 0xa6);
        EXPECT(gbc.readMem(0xa6a0), 0xe7);
        // E7 0265
        gbc.setState(0xb242, 0xca31, 0x4530, 0x39b0, 0xfadc, 0x60d9, 0x1, 0x1);
        gbc.writeMem(0xb242, { 0xe7 });
        gbc.writeMem(0xca2f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xca2f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb242), 0xe7);
        EXPECT(gbc.readMem(0xca2f), 0x43);
        EXPECT(gbc.readMem(0xca30), 0xb2);
        // E7 0267
        gbc.setState(0xb2a1, 0xe0cd, 0x5480, 0x50e6, 0xf7f3, 0x795e, 0x1, 0x0);
        gbc.writeMem(0xb2a1, { 0xe7 });
        gbc.writeMem(0xe0cb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe0cb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a1), 0xe7);
        EXPECT(gbc.readMem(0xe0cb), 0xa2);
        EXPECT(gbc.readMem(0xe0cc), 0xb2);
        // E7 0269
        gbc.setState(0x123, 0xab8a, 0x3e20, 0x9b14, 0x4018, 0x9480, 0x1, 0x0);
        gbc.writeMem(0x123, { 0xe7 });
        gbc.writeMem(0xab88, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xab88);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab88), 0x24);
        EXPECT(gbc.readMem(0xab89), 0x1);
        // E7 026A
        gbc.setState(0x5b0c, 0x9a0e, 0xaa90, 0x1cd7, 0x4450, 0x2a3c, 0x1, 0x1);
        gbc.writeMem(0x5b0c, { 0xe7 });
        gbc.writeMem(0x9a0c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9a0c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0c), 0xd);
        EXPECT(gbc.readMem(0x9a0d), 0x5b);
        // E7 0271
        gbc.setState(0xb867, 0x9f3f, 0x13a0, 0x2197, 0xc233, 0xb93c, 0x1, 0x0);
        gbc.writeMem(0x9f3d, { 0x0, 0x0 });
        gbc.writeMem(0xb867, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9f3d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f3d), 0x68);
        EXPECT(gbc.readMem(0x9f3e), 0xb8);
        EXPECT(gbc.readMem(0xb867), 0xe7);
        // E7 0272
        gbc.setState(0x3129, 0xc6fc, 0x8760, 0xf245, 0xf336, 0x293b, 0x1, 0x0);
        gbc.writeMem(0x3129, { 0xe7 });
        gbc.writeMem(0xc6fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc6fa);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6fa), 0x2a);
        EXPECT(gbc.readMem(0xc6fb), 0x31);
        // E7 0273
        gbc.setState(0x9ccd, 0xb39c, 0x2b00, 0x3ea3, 0x5bc2, 0x6697, 0x0, 0x1);
        gbc.writeMem(0x9ccd, { 0xe7 });
        gbc.writeMem(0xb39a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb39a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0xe7);
        EXPECT(gbc.readMem(0xb39a), 0xce);
        EXPECT(gbc.readMem(0xb39b), 0x9c);
        // E7 0274
        gbc.setState(0xa1a1, 0xd31d, 0xfb80, 0x83e6, 0x550, 0xa47c, 0x1, 0x1);
        gbc.writeMem(0xa1a1, { 0xe7 });
        gbc.writeMem(0xd31b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd31b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a1), 0xe7);
        EXPECT(gbc.readMem(0xd31b), 0xa2);
        EXPECT(gbc.readMem(0xd31c), 0xa1);
        // E7 0275
        gbc.setState(0x40d5, 0xd581, 0x2d60, 0xae02, 0xb28b, 0xc60b, 0x0, 0x0);
        gbc.writeMem(0x40d5, { 0xe7 });
        gbc.writeMem(0xd57f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd57f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57f), 0xd6);
        EXPECT(gbc.readMem(0xd580), 0x40);
        // E7 0276
        gbc.setState(0x2761, 0xef49, 0x9840, 0xbed7, 0x141c, 0x88dd, 0x0, 0x0);
        gbc.writeMem(0x2761, { 0xe7 });
        gbc.writeMem(0xef47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xef47);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef47), 0x62);
        EXPECT(gbc.readMem(0xef48), 0x27);
        // E7 0278
        gbc.setState(0xd4ad, 0xf3b2, 0x6790, 0xed7c, 0x22bb, 0xa496, 0x0, 0x1);
        gbc.writeMem(0xd4ad, { 0xe7 });
        gbc.writeMem(0xf3b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf3b0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ad), 0xe7);
        EXPECT(gbc.readMem(0xf3b0), 0xae);
        EXPECT(gbc.readMem(0xf3b1), 0xd4);
        // E7 027B
        gbc.setState(0xe159, 0xdbfa, 0x9dc0, 0x1808, 0xecc5, 0x9cfe, 0x1, 0x0);
        gbc.writeMem(0xdbf8, { 0x0, 0x0 });
        gbc.writeMem(0xe159, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdbf8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf8), 0x5a);
        EXPECT(gbc.readMem(0xdbf9), 0xe1);
        EXPECT(gbc.readMem(0xe159), 0xe7);
        // E7 027D
        gbc.setState(0xc106, 0x82ef, 0x4db0, 0x3644, 0x32e, 0xfb04, 0x1, 0x1);
        gbc.writeMem(0x82ed, { 0x0, 0x0 });
        gbc.writeMem(0xc106, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x82ed);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ed), 0x7);
        EXPECT(gbc.readMem(0x82ee), 0xc1);
        EXPECT(gbc.readMem(0xc106), 0xe7);
        // E7 027F
        gbc.setState(0xa95b, 0xd01b, 0xbdb0, 0x7c42, 0x186b, 0xd8da, 0x1, 0x0);
        gbc.writeMem(0xa95b, { 0xe7 });
        gbc.writeMem(0xd019, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd019);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95b), 0xe7);
        EXPECT(gbc.readMem(0xd019), 0x5c);
        EXPECT(gbc.readMem(0xd01a), 0xa9);
        // E7 0280
        gbc.setState(0xab6b, 0xb11e, 0x27f0, 0x7d00, 0x4989, 0xba8b, 0x0, 0x0);
        gbc.writeMem(0xab6b, { 0xe7 });
        gbc.writeMem(0xb11c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb11c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6b), 0xe7);
        EXPECT(gbc.readMem(0xb11c), 0x6c);
        EXPECT(gbc.readMem(0xb11d), 0xab);
        // E7 0284
        gbc.setState(0x9ecb, 0xeb78, 0xd1a0, 0x35a9, 0x12e9, 0xc4a, 0x0, 0x0);
        gbc.writeMem(0x9ecb, { 0xe7 });
        gbc.writeMem(0xeb76, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xeb76);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ecb), 0xe7);
        EXPECT(gbc.readMem(0xeb76), 0xcc);
        EXPECT(gbc.readMem(0xeb77), 0x9e);
        // E7 028E
        gbc.setState(0x3769, 0xc005, 0x7680, 0xfd78, 0x3ae2, 0xac19, 0x0, 0x0);
        gbc.writeMem(0x3769, { 0xe7 });
        gbc.writeMem(0xc003, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc003);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc003), 0x6a);
        EXPECT(gbc.readMem(0xc004), 0x37);
        // E7 028F
        gbc.setState(0xb216, 0xdc5a, 0x9a30, 0x25d5, 0x1fce, 0x79f, 0x0, 0x0);
        gbc.writeMem(0xb216, { 0xe7 });
        gbc.writeMem(0xdc58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xdc58);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb216), 0xe7);
        EXPECT(gbc.readMem(0xdc58), 0x17);
        EXPECT(gbc.readMem(0xdc59), 0xb2);
        // E7 0290
        gbc.setState(0xf3b, 0xf695, 0xdb80, 0xc80c, 0x4227, 0x3e38, 0x0, 0x0);
        gbc.writeMem(0xf3b, { 0xe7 });
        gbc.writeMem(0xf693, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf693);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf693), 0x3c);
        EXPECT(gbc.readMem(0xf694), 0xf);
        // E7 0295
        gbc.setState(0xa0e6, 0xf21a, 0xa10, 0x801b, 0xe7eb, 0x3aa0, 0x1, 0x1);
        gbc.writeMem(0xa0e6, { 0xe7 });
        gbc.writeMem(0xf218, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf218);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e6), 0xe7);
        EXPECT(gbc.readMem(0xf218), 0xe7);
        EXPECT(gbc.readMem(0xf219), 0xa0);
        // E7 0296
        gbc.setState(0xbcdb, 0xc45d, 0xf310, 0x469f, 0x4053, 0x26b8, 0x1, 0x0);
        gbc.writeMem(0xbcdb, { 0xe7 });
        gbc.writeMem(0xc45b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc45b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdb), 0xe7);
        EXPECT(gbc.readMem(0xc45b), 0xdc);
        EXPECT(gbc.readMem(0xc45c), 0xbc);
        // E7 0299
        gbc.setState(0xe4d9, 0xebf4, 0x68f0, 0xef05, 0x6446, 0x9522, 0x0, 0x1);
        gbc.writeMem(0xe4d9, { 0xe7 });
        gbc.writeMem(0xebf2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xebf2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4d9), 0xe7);
        EXPECT(gbc.readMem(0xebf2), 0xda);
        EXPECT(gbc.readMem(0xebf3), 0xe4);
        // E7 029B
        gbc.setState(0x6deb, 0x9712, 0x56b0, 0x5ad7, 0xb1f4, 0xa4e2, 0x1, 0x1);
        gbc.writeMem(0x6deb, { 0xe7 });
        gbc.writeMem(0x9710, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9710);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9710), 0xec);
        EXPECT(gbc.readMem(0x9711), 0x6d);
        // E7 029C
        gbc.setState(0x96c4, 0xc07e, 0x9cb0, 0x562d, 0xbe32, 0xdae, 0x1, 0x0);
        gbc.writeMem(0x96c4, { 0xe7 });
        gbc.writeMem(0xc07c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc07c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c4), 0xe7);
        EXPECT(gbc.readMem(0xc07c), 0xc5);
        EXPECT(gbc.readMem(0xc07d), 0x96);
        // E7 029D
        gbc.setState(0xd417, 0xe8fe, 0xa020, 0xa7dd, 0x73f2, 0xa334, 0x0, 0x1);
        gbc.writeMem(0xd417, { 0xe7 });
        gbc.writeMem(0xe8fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe8fc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd417), 0xe7);
        EXPECT(gbc.readMem(0xe8fc), 0x18);
        EXPECT(gbc.readMem(0xe8fd), 0xd4);
        // E7 029E
        gbc.setState(0xea1c, 0xfa44, 0x60b0, 0xcf0f, 0x18a5, 0x2447, 0x0, 0x1);
        gbc.writeMem(0xea1c, { 0xe7 });
        gbc.writeMem(0xfa42, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xfa42);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea1c), 0xe7);
        EXPECT(gbc.readMem(0xfa42), 0x1d);
        EXPECT(gbc.readMem(0xfa43), 0xea);
        // E7 029F
        gbc.setState(0xe32a, 0xaab3, 0xb860, 0xa579, 0x1fb2, 0x301c, 0x0, 0x1);
        gbc.writeMem(0xaab1, { 0x0, 0x0 });
        gbc.writeMem(0xe32a, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xaab1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaab1), 0x2b);
        EXPECT(gbc.readMem(0xaab2), 0xe3);
        EXPECT(gbc.readMem(0xe32a), 0xe7);
        // E7 02A0
        gbc.setState(0xd012, 0xd5e6, 0x50b0, 0x4f70, 0x41b6, 0xe560, 0x1, 0x0);
        gbc.writeMem(0xd012, { 0xe7 });
        gbc.writeMem(0xd5e4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd5e4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd012), 0xe7);
        EXPECT(gbc.readMem(0xd5e4), 0x13);
        EXPECT(gbc.readMem(0xd5e5), 0xd0);
        // E7 02A1
        gbc.setState(0x13e4, 0xf9b1, 0xda80, 0xd1b4, 0x4a61, 0x5598, 0x1, 0x1);
        gbc.writeMem(0x13e4, { 0xe7 });
        gbc.writeMem(0xf9af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf9af);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9af), 0xe5);
        EXPECT(gbc.readMem(0xf9b0), 0x13);
        // E7 02A2
        gbc.setState(0xef9a, 0x919d, 0xa200, 0xbdb8, 0x5d34, 0xa41f, 0x1, 0x1);
        gbc.writeMem(0x919b, { 0x0, 0x0 });
        gbc.writeMem(0xef9a, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x919b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919b), 0x9b);
        EXPECT(gbc.readMem(0x919c), 0xef);
        EXPECT(gbc.readMem(0xef9a), 0xe7);
        // E7 02A4
        gbc.setState(0xee7b, 0xdb8d, 0xa6d0, 0x2f12, 0x2de4, 0x14bb, 0x1, 0x0);
        gbc.writeMem(0xdb8b, { 0x0, 0x0 });
        gbc.writeMem(0xee7b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdb8b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8b), 0x7c);
        EXPECT(gbc.readMem(0xdb8c), 0xee);
        EXPECT(gbc.readMem(0xee7b), 0xe7);
        // E7 02A5
        gbc.setState(0x7890, 0x8ef7, 0x8080, 0xf2a4, 0x6e27, 0x5b0d, 0x1, 0x0);
        gbc.writeMem(0x7890, { 0xe7 });
        gbc.writeMem(0x8ef5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8ef5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef5), 0x91);
        EXPECT(gbc.readMem(0x8ef6), 0x78);
        // E7 02A8
        gbc.setState(0xa995, 0xe591, 0x55f0, 0x643c, 0x9768, 0xcab2, 0x1, 0x1);
        gbc.writeMem(0xa995, { 0xe7 });
        gbc.writeMem(0xe58f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe58f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa995), 0xe7);
        EXPECT(gbc.readMem(0xe58f), 0x96);
        EXPECT(gbc.readMem(0xe590), 0xa9);
        // E7 02A9
        gbc.setState(0xc735, 0xf611, 0x5cd0, 0xf750, 0xc486, 0x89c9, 0x1, 0x0);
        gbc.writeMem(0xc735, { 0xe7 });
        gbc.writeMem(0xf60f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf60f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc735), 0xe7);
        EXPECT(gbc.readMem(0xf60f), 0x36);
        EXPECT(gbc.readMem(0xf610), 0xc7);
        // E7 02AB
        gbc.setState(0xd2b2, 0x91a5, 0x9a60, 0x362d, 0x3bb0, 0x7595, 0x0, 0x1);
        gbc.writeMem(0x91a3, { 0x0, 0x0 });
        gbc.writeMem(0xd2b2, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x91a3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a3), 0xb3);
        EXPECT(gbc.readMem(0x91a4), 0xd2);
        EXPECT(gbc.readMem(0xd2b2), 0xe7);
        // E7 02AE
        gbc.setState(0x3e14, 0xce6f, 0x1430, 0xfa5c, 0x7777, 0xb104, 0x1, 0x1);
        gbc.writeMem(0x3e14, { 0xe7 });
        gbc.writeMem(0xce6d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xce6d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce6d), 0x15);
        EXPECT(gbc.readMem(0xce6e), 0x3e);
        // E7 02B0
        gbc.setState(0x546a, 0xa585, 0x1e20, 0x3df, 0xc621, 0x6927, 0x0, 0x0);
        gbc.writeMem(0x546a, { 0xe7 });
        gbc.writeMem(0xa583, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa583);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa583), 0x6b);
        EXPECT(gbc.readMem(0xa584), 0x54);
        // E7 02B4
        gbc.setState(0x7071, 0xc2cd, 0xe8d0, 0xa85, 0x5b62, 0xe6e1, 0x0, 0x1);
        gbc.writeMem(0x7071, { 0xe7 });
        gbc.writeMem(0xc2cb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc2cb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2cb), 0x72);
        EXPECT(gbc.readMem(0xc2cc), 0x70);
        // E7 02B6
        gbc.setState(0xb15f, 0x8d2d, 0xbe20, 0x317e, 0x7b59, 0x91e1, 0x0, 0x0);
        gbc.writeMem(0x8d2b, { 0x0, 0x0 });
        gbc.writeMem(0xb15f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8d2b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d2b), 0x60);
        EXPECT(gbc.readMem(0x8d2c), 0xb1);
        EXPECT(gbc.readMem(0xb15f), 0xe7);
        // E7 02B7
        gbc.setState(0x3e14, 0xac72, 0x17d0, 0x74e6, 0xefc7, 0xfb70, 0x0, 0x1);
        gbc.writeMem(0x3e14, { 0xe7 });
        gbc.writeMem(0xac70, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xac70);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac70), 0x15);
        EXPECT(gbc.readMem(0xac71), 0x3e);
        // E7 02B8
        gbc.setState(0x55e1, 0xca5a, 0x1c30, 0x84c2, 0xb554, 0x780f, 0x0, 0x1);
        gbc.writeMem(0x55e1, { 0xe7 });
        gbc.writeMem(0xca58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xca58);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca58), 0xe2);
        EXPECT(gbc.readMem(0xca59), 0x55);
        // E7 02BB
        gbc.setState(0x3bcf, 0xb064, 0x58a0, 0xafaa, 0x4a92, 0x4dc2, 0x0, 0x0);
        gbc.writeMem(0x3bcf, { 0xe7 });
        gbc.writeMem(0xb062, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb062);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb062), 0xd0);
        EXPECT(gbc.readMem(0xb063), 0x3b);
        // E7 02BD
        gbc.setState(0x9fde, 0xf801, 0x7780, 0xe41b, 0x5d5a, 0x9cd7, 0x0, 0x1);
        gbc.writeMem(0x9fde, { 0xe7 });
        gbc.writeMem(0xf7ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf7ff);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fde), 0xe7);
        EXPECT(gbc.readMem(0xf7ff), 0xdf);
        EXPECT(gbc.readMem(0xf800), 0x9f);
        // E7 02C2
        gbc.setState(0x465, 0xf438, 0xb640, 0x5fd8, 0x1318, 0x3b7d, 0x0, 0x1);
        gbc.writeMem(0x465, { 0xe7 });
        gbc.writeMem(0xf436, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf436);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf436), 0x66);
        EXPECT(gbc.readMem(0xf437), 0x4);
        // E7 02C6
        gbc.setState(0x8e23, 0xad61, 0xe8e0, 0x4d7d, 0xd887, 0x8058, 0x1, 0x0);
        gbc.writeMem(0x8e23, { 0xe7 });
        gbc.writeMem(0xad5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xad5f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e23), 0xe7);
        EXPECT(gbc.readMem(0xad5f), 0x24);
        EXPECT(gbc.readMem(0xad60), 0x8e);
        // E7 02C8
        gbc.setState(0x2a9, 0xb798, 0xba70, 0x7d60, 0x4788, 0x27d8, 0x0, 0x1);
        gbc.writeMem(0x2a9, { 0xe7 });
        gbc.writeMem(0xb796, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb796);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb796), 0xaa);
        EXPECT(gbc.readMem(0xb797), 0x2);
        // E7 02C9
        gbc.setState(0x5662, 0xfcb7, 0xc3f0, 0xc6ed, 0x2551, 0x7316, 0x1, 0x0);
        gbc.writeMem(0x5662, { 0xe7 });
        gbc.writeMem(0xfcb5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xfcb5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfcb5), 0x63);
        EXPECT(gbc.readMem(0xfcb6), 0x56);
        // E7 02CA
        gbc.setState(0xb78a, 0xdd76, 0xa3e0, 0x1ab0, 0xab8d, 0x9fbe, 0x1, 0x0);
        gbc.writeMem(0xb78a, { 0xe7 });
        gbc.writeMem(0xdd74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdd74);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78a), 0xe7);
        EXPECT(gbc.readMem(0xdd74), 0x8b);
        EXPECT(gbc.readMem(0xdd75), 0xb7);
        // E7 02CD
        gbc.setState(0x1366, 0xa456, 0x1d80, 0xa330, 0xb6e2, 0xad12, 0x0, 0x1);
        gbc.writeMem(0x1366, { 0xe7 });
        gbc.writeMem(0xa454, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa454);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa454), 0x67);
        EXPECT(gbc.readMem(0xa455), 0x13);
        // E7 02CE
        gbc.setState(0xa3b7, 0x9f78, 0x21d0, 0xf1dc, 0x172f, 0xac72, 0x1, 0x1);
        gbc.writeMem(0x9f76, { 0x0, 0x0 });
        gbc.writeMem(0xa3b7, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9f76);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f76), 0xb8);
        EXPECT(gbc.readMem(0x9f77), 0xa3);
        EXPECT(gbc.readMem(0xa3b7), 0xe7);
        // E7 02D0
        gbc.setState(0x541, 0x98db, 0x3800, 0x4e94, 0xaf69, 0xb00f, 0x0, 0x1);
        gbc.writeMem(0x541, { 0xe7 });
        gbc.writeMem(0x98d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x98d9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d9), 0x42);
        EXPECT(gbc.readMem(0x98da), 0x5);
        // E7 02D3
        gbc.setState(0xda92, 0xbcbd, 0xecb0, 0x7e28, 0x8c03, 0xa4a8, 0x1, 0x1);
        gbc.writeMem(0xbcbb, { 0x0, 0x0 });
        gbc.writeMem(0xda92, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xbcbb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcbb), 0x93);
        EXPECT(gbc.readMem(0xbcbc), 0xda);
        EXPECT(gbc.readMem(0xda92), 0xe7);
        // E7 02D9
        gbc.setState(0x8816, 0xe9e1, 0x6df0, 0x706c, 0x98, 0x4ba5, 0x1, 0x0);
        gbc.writeMem(0x8816, { 0xe7 });
        gbc.writeMem(0xe9df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe9df);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8816), 0xe7);
        EXPECT(gbc.readMem(0xe9df), 0x17);
        EXPECT(gbc.readMem(0xe9e0), 0x88);
        // E7 02DC
        gbc.setState(0xb199, 0x8933, 0x6e30, 0x7fb8, 0x9754, 0x2bee, 0x1, 0x0);
        gbc.writeMem(0x8931, { 0x0, 0x0 });
        gbc.writeMem(0xb199, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8931);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8931), 0x9a);
        EXPECT(gbc.readMem(0x8932), 0xb1);
        EXPECT(gbc.readMem(0xb199), 0xe7);
        // E7 02DD
        gbc.setState(0x9eee, 0xc5c0, 0xabb0, 0xf936, 0x2b0f, 0xce13, 0x1, 0x1);
        gbc.writeMem(0x9eee, { 0xe7 });
        gbc.writeMem(0xc5be, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc5be);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eee), 0xe7);
        EXPECT(gbc.readMem(0xc5be), 0xef);
        EXPECT(gbc.readMem(0xc5bf), 0x9e);
        // E7 02DE
        gbc.setState(0x962, 0xe481, 0xb840, 0x5c9b, 0x1841, 0x897b, 0x0, 0x0);
        gbc.writeMem(0x962, { 0xe7 });
        gbc.writeMem(0xe47f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe47f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47f), 0x63);
        EXPECT(gbc.readMem(0xe480), 0x9);
        // E7 02DF
        gbc.setState(0x1506, 0xd12d, 0xc0b0, 0xa38c, 0x29c2, 0xff19, 0x0, 0x1);
        gbc.writeMem(0x1506, { 0xe7 });
        gbc.writeMem(0xd12b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd12b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd12b), 0x7);
        EXPECT(gbc.readMem(0xd12c), 0x15);
        // E7 02E0
        gbc.setState(0xe282, 0x8f08, 0x2510, 0xa42b, 0x83aa, 0xde2c, 0x0, 0x0);
        gbc.writeMem(0x8f06, { 0x0, 0x0 });
        gbc.writeMem(0xe282, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8f06);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f06), 0x83);
        EXPECT(gbc.readMem(0x8f07), 0xe2);
        EXPECT(gbc.readMem(0xe282), 0xe7);
        // E7 02E1
        gbc.setState(0x84a3, 0xa2d5, 0xc6c0, 0xd543, 0x73e0, 0xe66c, 0x1, 0x0);
        gbc.writeMem(0x84a3, { 0xe7 });
        gbc.writeMem(0xa2d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa2d3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a3), 0xe7);
        EXPECT(gbc.readMem(0xa2d3), 0xa4);
        EXPECT(gbc.readMem(0xa2d4), 0x84);
        // E7 02E2
        gbc.setState(0x7f92, 0xecec, 0x15f0, 0x90bc, 0x76b5, 0xd869, 0x1, 0x0);
        gbc.writeMem(0x7f92, { 0xe7 });
        gbc.writeMem(0xecea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xecea);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecea), 0x93);
        EXPECT(gbc.readMem(0xeceb), 0x7f);
        // E7 02E3
        gbc.setState(0x838d, 0xb405, 0x6a90, 0xcb42, 0xa074, 0x2dbc, 0x0, 0x0);
        gbc.writeMem(0x838d, { 0xe7 });
        gbc.writeMem(0xb403, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb403);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x838d), 0xe7);
        EXPECT(gbc.readMem(0xb403), 0x8e);
        EXPECT(gbc.readMem(0xb404), 0x83);
        // E7 02E5
        gbc.setState(0xb452, 0xaa91, 0x2d80, 0x337b, 0x67b9, 0x7154, 0x0, 0x0);
        gbc.writeMem(0xaa8f, { 0x0, 0x0 });
        gbc.writeMem(0xb452, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xaa8f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8f), 0x53);
        EXPECT(gbc.readMem(0xaa90), 0xb4);
        EXPECT(gbc.readMem(0xb452), 0xe7);
        // E7 02E6
        gbc.setState(0x349f, 0xde08, 0xeb00, 0x599a, 0x610f, 0xb4c4, 0x1, 0x1);
        gbc.writeMem(0x349f, { 0xe7 });
        gbc.writeMem(0xde06, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xde06);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde06), 0xa0);
        EXPECT(gbc.readMem(0xde07), 0x34);
        // E7 02E7
        gbc.setState(0x4b1d, 0xeee8, 0x2e10, 0xf2ad, 0x1341, 0x97c9, 0x0, 0x0);
        gbc.writeMem(0x4b1d, { 0xe7 });
        gbc.writeMem(0xeee6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xeee6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeee6), 0x1e);
        EXPECT(gbc.readMem(0xeee7), 0x4b);
        // E7 02E9
        gbc.setState(0x7419, 0x8c4b, 0xb560, 0xf237, 0xf6fc, 0x6705, 0x1, 0x0);
        gbc.writeMem(0x7419, { 0xe7 });
        gbc.writeMem(0x8c49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8c49);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c49), 0x1a);
        EXPECT(gbc.readMem(0x8c4a), 0x74);
        // E7 02EA
        gbc.setState(0x39d0, 0xf3fc, 0xfc10, 0xffa1, 0xcfd, 0x4c4f, 0x1, 0x1);
        gbc.writeMem(0x39d0, { 0xe7 });
        gbc.writeMem(0xf3fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf3fa);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf3fa), 0xd1);
        EXPECT(gbc.readMem(0xf3fb), 0x39);
        // E7 02EB
        gbc.setState(0xde03, 0xefc0, 0x3d40, 0xab7f, 0xba7d, 0xb7a1, 0x1, 0x0);
        gbc.writeMem(0xde03, { 0xe7 });
        gbc.writeMem(0xefbe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xefbe);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde03), 0xe7);
        EXPECT(gbc.readMem(0xefbe), 0x4);
        EXPECT(gbc.readMem(0xefbf), 0xde);
        // E7 02ED
        gbc.setState(0xcdda, 0x83c2, 0xad10, 0x8ca2, 0xad0d, 0x147f, 0x1, 0x0);
        gbc.writeMem(0x83c0, { 0x0, 0x0 });
        gbc.writeMem(0xcdda, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x83c0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c0), 0xdb);
        EXPECT(gbc.readMem(0x83c1), 0xcd);
        EXPECT(gbc.readMem(0xcdda), 0xe7);
        // E7 02EE
        gbc.setState(0x2dca, 0xecd7, 0xd930, 0x87f4, 0xe511, 0xe65b, 0x1, 0x0);
        gbc.writeMem(0x2dca, { 0xe7 });
        gbc.writeMem(0xecd5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xecd5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd5), 0xcb);
        EXPECT(gbc.readMem(0xecd6), 0x2d);
        // E7 02F1
        gbc.setState(0xa8cc, 0xb241, 0x5050, 0xe4cb, 0x5746, 0x6d41, 0x1, 0x1);
        gbc.writeMem(0xa8cc, { 0xe7 });
        gbc.writeMem(0xb23f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb23f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8cc), 0xe7);
        EXPECT(gbc.readMem(0xb23f), 0xcd);
        EXPECT(gbc.readMem(0xb240), 0xa8);
        // E7 02F2
        gbc.setState(0xa1c0, 0xb2b0, 0xb740, 0x426e, 0x1640, 0xf53, 0x1, 0x1);
        gbc.writeMem(0xa1c0, { 0xe7 });
        gbc.writeMem(0xb2ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb2ae);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c0), 0xe7);
        EXPECT(gbc.readMem(0xb2ae), 0xc1);
        EXPECT(gbc.readMem(0xb2af), 0xa1);
        // E7 02F3
        gbc.setState(0x8e39, 0xf77f, 0x3600, 0x80ee, 0x7170, 0x7655, 0x0, 0x0);
        gbc.writeMem(0x8e39, { 0xe7 });
        gbc.writeMem(0xf77d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf77d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e39), 0xe7);
        EXPECT(gbc.readMem(0xf77d), 0x3a);
        EXPECT(gbc.readMem(0xf77e), 0x8e);
        // E7 02F4
        gbc.setState(0x11fa, 0xcf9d, 0xb0f0, 0xbef0, 0xa3f6, 0x9164, 0x0, 0x1);
        gbc.writeMem(0x11fa, { 0xe7 });
        gbc.writeMem(0xcf9b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcf9b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf9b), 0xfb);
        EXPECT(gbc.readMem(0xcf9c), 0x11);
        // E7 02F5
        gbc.setState(0x10b7, 0xc005, 0x8a50, 0x56c5, 0xa3f, 0x2f77, 0x0, 0x1);
        gbc.writeMem(0x10b7, { 0xe7 });
        gbc.writeMem(0xc003, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc003);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc003), 0xb8);
        EXPECT(gbc.readMem(0xc004), 0x10);
        // E7 02F6
        gbc.setState(0xa88c, 0xd014, 0xabb0, 0xee6a, 0x9386, 0x8ee, 0x1, 0x1);
        gbc.writeMem(0xa88c, { 0xe7 });
        gbc.writeMem(0xd012, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd012);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa88c), 0xe7);
        EXPECT(gbc.readMem(0xd012), 0x8d);
        EXPECT(gbc.readMem(0xd013), 0xa8);
        // E7 02F9
        gbc.setState(0xcf24, 0xea2d, 0xac90, 0x4682, 0x3a06, 0x1594, 0x1, 0x0);
        gbc.writeMem(0xcf24, { 0xe7 });
        gbc.writeMem(0xea2b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xea2b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf24), 0xe7);
        EXPECT(gbc.readMem(0xea2b), 0x25);
        EXPECT(gbc.readMem(0xea2c), 0xcf);
        // E7 02FD
        gbc.setState(0xcd17, 0xda94, 0xce20, 0x2f35, 0x8e6c, 0x3731, 0x0, 0x0);
        gbc.writeMem(0xcd17, { 0xe7 });
        gbc.writeMem(0xda92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xda92);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd17), 0xe7);
        EXPECT(gbc.readMem(0xda92), 0x18);
        EXPECT(gbc.readMem(0xda93), 0xcd);
        // E7 0300
        gbc.setState(0xef75, 0xffad, 0xd400, 0x4dd7, 0xc302, 0xdf1, 0x1, 0x0);
        gbc.writeMem(0xef75, { 0xe7 });
        gbc.writeMem(0xffab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xffab);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef75), 0xe7);
        EXPECT(gbc.readMem(0xffab), 0x76);
        EXPECT(gbc.readMem(0xffac), 0xef);
        // E7 0301
        gbc.setState(0x7f49, 0xa10b, 0xc300, 0x7bd2, 0xb268, 0x3776, 0x1, 0x1);
        gbc.writeMem(0x7f49, { 0xe7 });
        gbc.writeMem(0xa109, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa109);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa109), 0x4a);
        EXPECT(gbc.readMem(0xa10a), 0x7f);
        // E7 0303
        gbc.setState(0xc5a9, 0xe94b, 0x50d0, 0x86b9, 0xe0d5, 0x66a, 0x0, 0x1);
        gbc.writeMem(0xc5a9, { 0xe7 });
        gbc.writeMem(0xe949, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe949);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a9), 0xe7);
        EXPECT(gbc.readMem(0xe949), 0xaa);
        EXPECT(gbc.readMem(0xe94a), 0xc5);
        // E7 0305
        gbc.setState(0xdbe0, 0xfdf4, 0x4150, 0xd0b5, 0x6f2, 0x67, 0x1, 0x1);
        gbc.writeMem(0xdbe0, { 0xe7 });
        gbc.writeMem(0xfdf2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfdf2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe0), 0xe7);
        EXPECT(gbc.readMem(0xfdf2), 0xe1);
        EXPECT(gbc.readMem(0xfdf3), 0xdb);
        // E7 0307
        gbc.setState(0xf8c, 0xabfd, 0x6540, 0xe028, 0x4fec, 0x8b60, 0x1, 0x0);
        gbc.writeMem(0xf8c, { 0xe7 });
        gbc.writeMem(0xabfb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xabfb);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfb), 0x8d);
        EXPECT(gbc.readMem(0xabfc), 0xf);
        // E7 0308
        gbc.setState(0xa8ca, 0xb91d, 0xd930, 0x266b, 0x34b5, 0x9f15, 0x1, 0x1);
        gbc.writeMem(0xa8ca, { 0xe7 });
        gbc.writeMem(0xb91b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb91b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ca), 0xe7);
        EXPECT(gbc.readMem(0xb91b), 0xcb);
        EXPECT(gbc.readMem(0xb91c), 0xa8);
        // E7 030B
        gbc.setState(0x8878, 0xb362, 0x6c60, 0x6ff4, 0xa2c0, 0x6d94, 0x0, 0x0);
        gbc.writeMem(0x8878, { 0xe7 });
        gbc.writeMem(0xb360, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb360);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8878), 0xe7);
        EXPECT(gbc.readMem(0xb360), 0x79);
        EXPECT(gbc.readMem(0xb361), 0x88);
        // E7 030D
        gbc.setState(0x67b8, 0xc966, 0x6aa0, 0xfdd5, 0x5207, 0xe4a0, 0x1, 0x0);
        gbc.writeMem(0x67b8, { 0xe7 });
        gbc.writeMem(0xc964, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc964);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc964), 0xb9);
        EXPECT(gbc.readMem(0xc965), 0x67);
        // E7 030E
        gbc.setState(0xa2c9, 0xe97b, 0xa6b0, 0x5a42, 0x1b15, 0xc4f9, 0x1, 0x0);
        gbc.writeMem(0xa2c9, { 0xe7 });
        gbc.writeMem(0xe979, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe979);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c9), 0xe7);
        EXPECT(gbc.readMem(0xe979), 0xca);
        EXPECT(gbc.readMem(0xe97a), 0xa2);
        // E7 0310
        gbc.setState(0xbb42, 0xcfa7, 0xee70, 0x25b4, 0x72b2, 0x29eb, 0x0, 0x0);
        gbc.writeMem(0xbb42, { 0xe7 });
        gbc.writeMem(0xcfa5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcfa5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb42), 0xe7);
        EXPECT(gbc.readMem(0xcfa5), 0x43);
        EXPECT(gbc.readMem(0xcfa6), 0xbb);
        // E7 0312
        gbc.setState(0x5a52, 0xd817, 0x3d0, 0x894d, 0x869e, 0x81a9, 0x0, 0x0);
        gbc.writeMem(0x5a52, { 0xe7 });
        gbc.writeMem(0xd815, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd815);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd815), 0x53);
        EXPECT(gbc.readMem(0xd816), 0x5a);
        // E7 0315
        gbc.setState(0x688e, 0xc3e7, 0x490, 0xf38d, 0x4f37, 0x2e25, 0x0, 0x0);
        gbc.writeMem(0x688e, { 0xe7 });
        gbc.writeMem(0xc3e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc3e5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3e5), 0x8f);
        EXPECT(gbc.readMem(0xc3e6), 0x68);
        // E7 0317
        gbc.setState(0x890d, 0xe429, 0x930, 0x734, 0xcb00, 0x1531, 0x0, 0x1);
        gbc.writeMem(0x890d, { 0xe7 });
        gbc.writeMem(0xe427, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe427);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x890d), 0xe7);
        EXPECT(gbc.readMem(0xe427), 0xe);
        EXPECT(gbc.readMem(0xe428), 0x89);
        // E7 0319
        gbc.setState(0xb456, 0xb582, 0xbe60, 0x9176, 0x7242, 0xbf05, 0x0, 0x0);
        gbc.writeMem(0xb456, { 0xe7 });
        gbc.writeMem(0xb580, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb580);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb456), 0xe7);
        EXPECT(gbc.readMem(0xb580), 0x57);
        EXPECT(gbc.readMem(0xb581), 0xb4);
        // E7 031A
        gbc.setState(0x6083, 0xaac5, 0xc0f0, 0xdb22, 0x6d9b, 0x3c06, 0x0, 0x0);
        gbc.writeMem(0x6083, { 0xe7 });
        gbc.writeMem(0xaac3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xaac3);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac3), 0x84);
        EXPECT(gbc.readMem(0xaac4), 0x60);
        // E7 031E
        gbc.setState(0x12d9, 0xd0f2, 0x6740, 0x4741, 0xcc06, 0x9934, 0x1, 0x1);
        gbc.writeMem(0x12d9, { 0xe7 });
        gbc.writeMem(0xd0f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd0f0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f0), 0xda);
        EXPECT(gbc.readMem(0xd0f1), 0x12);
        // E7 031F
        gbc.setState(0x171d, 0x81a8, 0xddc0, 0x2e6c, 0x7bb8, 0x593a, 0x1, 0x0);
        gbc.writeMem(0x171d, { 0xe7 });
        gbc.writeMem(0x81a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x81a6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a6), 0x1e);
        EXPECT(gbc.readMem(0x81a7), 0x17);
        // E7 0322
        gbc.setState(0xdbd0, 0xa8d9, 0x1b60, 0xfd1d, 0x99b3, 0x8052, 0x0, 0x1);
        gbc.writeMem(0xa8d7, { 0x0, 0x0 });
        gbc.writeMem(0xdbd0, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa8d7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d7), 0xd1);
        EXPECT(gbc.readMem(0xa8d8), 0xdb);
        EXPECT(gbc.readMem(0xdbd0), 0xe7);
        // E7 0323
        gbc.setState(0x7beb, 0xf79c, 0x9690, 0x5e00, 0x4482, 0xfe6, 0x1, 0x1);
        gbc.writeMem(0x7beb, { 0xe7 });
        gbc.writeMem(0xf79a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf79a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf79a), 0xec);
        EXPECT(gbc.readMem(0xf79b), 0x7b);
        // E7 0326
        gbc.setState(0x1ad2, 0xc257, 0x7fb0, 0xf6aa, 0x6f4d, 0x6b20, 0x0, 0x1);
        gbc.writeMem(0x1ad2, { 0xe7 });
        gbc.writeMem(0xc255, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc255);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc255), 0xd3);
        EXPECT(gbc.readMem(0xc256), 0x1a);
        // E7 0327
        gbc.setState(0x98a1, 0xfb7f, 0xd820, 0x5c4, 0x4ab9, 0xb4ff, 0x1, 0x0);
        gbc.writeMem(0x98a1, { 0xe7 });
        gbc.writeMem(0xfb7d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfb7d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a1), 0xe7);
        EXPECT(gbc.readMem(0xfb7d), 0xa2);
        EXPECT(gbc.readMem(0xfb7e), 0x98);
        // E7 032A
        gbc.setState(0xd19a, 0xf052, 0xe410, 0x7b86, 0x56aa, 0x8635, 0x1, 0x1);
        gbc.writeMem(0xd19a, { 0xe7 });
        gbc.writeMem(0xf050, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf050);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19a), 0xe7);
        EXPECT(gbc.readMem(0xf050), 0x9b);
        EXPECT(gbc.readMem(0xf051), 0xd1);
        // E7 032E
        gbc.setState(0xa809, 0x929c, 0xaf20, 0xaad1, 0x522d, 0x2c2e, 0x0, 0x0);
        gbc.writeMem(0x929a, { 0x0, 0x0 });
        gbc.writeMem(0xa809, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x929a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x929a), 0xa);
        EXPECT(gbc.readMem(0x929b), 0xa8);
        EXPECT(gbc.readMem(0xa809), 0xe7);
        // E7 0330
        gbc.setState(0xb2e8, 0xeadb, 0xfc00, 0xfa0b, 0x8a7, 0xc10e, 0x1, 0x1);
        gbc.writeMem(0xb2e8, { 0xe7 });
        gbc.writeMem(0xead9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xead9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e8), 0xe7);
        EXPECT(gbc.readMem(0xead9), 0xe9);
        EXPECT(gbc.readMem(0xeada), 0xb2);
        // E7 0334
        gbc.setState(0x95, 0xecac, 0x1230, 0x6c59, 0x98a2, 0x392, 0x0, 0x1);
        gbc.writeMem(0x95, { 0xe7 });
        gbc.writeMem(0xecaa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xecaa);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecaa), 0x96);
        EXPECT(gbc.readMem(0xecab), 0x0);
        // E7 0335
        gbc.setState(0xcab0, 0xf467, 0xcdb0, 0x965e, 0x7be8, 0x9bce, 0x0, 0x1);
        gbc.writeMem(0xcab0, { 0xe7 });
        gbc.writeMem(0xf465, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf465);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab0), 0xe7);
        EXPECT(gbc.readMem(0xf465), 0xb1);
        EXPECT(gbc.readMem(0xf466), 0xca);
        // E7 0336
        gbc.setState(0x5baa, 0xa492, 0xc070, 0x7075, 0x3a4f, 0xc692, 0x0, 0x1);
        gbc.writeMem(0x5baa, { 0xe7 });
        gbc.writeMem(0xa490, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa490);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa490), 0xab);
        EXPECT(gbc.readMem(0xa491), 0x5b);
        // E7 0337
        gbc.setState(0x4770, 0xc521, 0x1b70, 0x9e7f, 0xd79c, 0xd040, 0x1, 0x1);
        gbc.writeMem(0x4770, { 0xe7 });
        gbc.writeMem(0xc51f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc51f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc51f), 0x71);
        EXPECT(gbc.readMem(0xc520), 0x47);
        // E7 033A
        gbc.setState(0x686f, 0xf859, 0x3820, 0x7223, 0x2843, 0xea4e, 0x1, 0x1);
        gbc.writeMem(0x686f, { 0xe7 });
        gbc.writeMem(0xf857, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf857);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf857), 0x70);
        EXPECT(gbc.readMem(0xf858), 0x68);
        // E7 033C
        gbc.setState(0x6cb4, 0xf1bf, 0x96c0, 0xafff, 0xbf63, 0xc903, 0x1, 0x0);
        gbc.writeMem(0x6cb4, { 0xe7 });
        gbc.writeMem(0xf1bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf1bd);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1bd), 0xb5);
        EXPECT(gbc.readMem(0xf1be), 0x6c);
        // E7 033D
        gbc.setState(0xaec7, 0xbe6a, 0x50, 0x2074, 0xa22a, 0x74bf, 0x0, 0x1);
        gbc.writeMem(0xaec7, { 0xe7 });
        gbc.writeMem(0xbe68, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xbe68);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec7), 0xe7);
        EXPECT(gbc.readMem(0xbe68), 0xc8);
        EXPECT(gbc.readMem(0xbe69), 0xae);
        // E7 033E
        gbc.setState(0xe2e1, 0x9d09, 0xfd10, 0x4a5d, 0x599a, 0x605e, 0x1, 0x0);
        gbc.writeMem(0x9d07, { 0x0, 0x0 });
        gbc.writeMem(0xe2e1, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9d07);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d07), 0xe2);
        EXPECT(gbc.readMem(0x9d08), 0xe2);
        EXPECT(gbc.readMem(0xe2e1), 0xe7);
        // E7 033F
        gbc.setState(0x6b18, 0xbf5d, 0xf4e0, 0x9c7f, 0x6a9, 0x665d, 0x0, 0x1);
        gbc.writeMem(0x6b18, { 0xe7 });
        gbc.writeMem(0xbf5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbf5b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5b), 0x19);
        EXPECT(gbc.readMem(0xbf5c), 0x6b);
        // E7 0340
        gbc.setState(0xc866, 0xe7aa, 0x610, 0x3fc0, 0x8e50, 0x9e16, 0x0, 0x1);
        gbc.writeMem(0xc866, { 0xe7 });
        gbc.writeMem(0xe7a8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe7a8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc866), 0xe7);
        EXPECT(gbc.readMem(0xe7a8), 0x67);
        EXPECT(gbc.readMem(0xe7a9), 0xc8);
        // E7 0341
        gbc.setState(0x2638, 0xb736, 0x92c0, 0x63ee, 0xf5bf, 0x6c40, 0x0, 0x1);
        gbc.writeMem(0x2638, { 0xe7 });
        gbc.writeMem(0xb734, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb734);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb734), 0x39);
        EXPECT(gbc.readMem(0xb735), 0x26);
        // E7 0342
        gbc.setState(0xcdab, 0xc182, 0x4f30, 0xb9ee, 0x9fd7, 0xc73d, 0x1, 0x1);
        gbc.writeMem(0xc180, { 0x0, 0x0 });
        gbc.writeMem(0xcdab, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc180);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc180), 0xac);
        EXPECT(gbc.readMem(0xc181), 0xcd);
        EXPECT(gbc.readMem(0xcdab), 0xe7);
        // E7 0344
        gbc.setState(0x82b9, 0x962b, 0x22d0, 0x9afa, 0x7dae, 0x3e80, 0x1, 0x1);
        gbc.writeMem(0x82b9, { 0xe7 });
        gbc.writeMem(0x9629, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9629);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b9), 0xe7);
        EXPECT(gbc.readMem(0x9629), 0xba);
        EXPECT(gbc.readMem(0x962a), 0x82);
        // E7 0346
        gbc.setState(0x49dc, 0xf03d, 0x28b0, 0xf2fb, 0x637a, 0x582d, 0x0, 0x1);
        gbc.writeMem(0x49dc, { 0xe7 });
        gbc.writeMem(0xf03b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf03b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf03b), 0xdd);
        EXPECT(gbc.readMem(0xf03c), 0x49);
        // E7 0348
        gbc.setState(0x7640, 0xb579, 0x3d70, 0xdb87, 0x5718, 0xfdf, 0x1, 0x1);
        gbc.writeMem(0x7640, { 0xe7 });
        gbc.writeMem(0xb577, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb577);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb577), 0x41);
        EXPECT(gbc.readMem(0xb578), 0x76);
        // E7 0349
        gbc.setState(0x6a6a, 0xb038, 0x70b0, 0xb6ac, 0xb4fa, 0x82e4, 0x1, 0x0);
        gbc.writeMem(0x6a6a, { 0xe7 });
        gbc.writeMem(0xb036, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb036);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb036), 0x6b);
        EXPECT(gbc.readMem(0xb037), 0x6a);
        // E7 0351
        gbc.setState(0xc395, 0xa36d, 0xd760, 0x8d4f, 0x3579, 0x1a6b, 0x1, 0x0);
        gbc.writeMem(0xa36b, { 0x0, 0x0 });
        gbc.writeMem(0xc395, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa36b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36b), 0x96);
        EXPECT(gbc.readMem(0xa36c), 0xc3);
        EXPECT(gbc.readMem(0xc395), 0xe7);
        // E7 0352
        gbc.setState(0x2ee2, 0xae52, 0x6f20, 0x2e82, 0x3455, 0x5230, 0x0, 0x1);
        gbc.writeMem(0x2ee2, { 0xe7 });
        gbc.writeMem(0xae50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xae50);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae50), 0xe3);
        EXPECT(gbc.readMem(0xae51), 0x2e);
        // E7 0353
        gbc.setState(0xd31d, 0xbc86, 0xd870, 0xbbce, 0x9f21, 0x6d42, 0x1, 0x0);
        gbc.writeMem(0xbc84, { 0x0, 0x0 });
        gbc.writeMem(0xd31d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbc84);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc84), 0x1e);
        EXPECT(gbc.readMem(0xbc85), 0xd3);
        EXPECT(gbc.readMem(0xd31d), 0xe7);
        // E7 0354
        gbc.setState(0xbf0, 0xba83, 0xbb00, 0x3d5d, 0x9e62, 0xbd61, 0x1, 0x1);
        gbc.writeMem(0xbf0, { 0xe7 });
        gbc.writeMem(0xba81, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xba81);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba81), 0xf1);
        EXPECT(gbc.readMem(0xba82), 0xb);
        // E7 0355
        gbc.setState(0x1070, 0x96a1, 0x4ed0, 0x41cf, 0x3b72, 0x6bd4, 0x0, 0x0);
        gbc.writeMem(0x1070, { 0xe7 });
        gbc.writeMem(0x969f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x969f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x969f), 0x71);
        EXPECT(gbc.readMem(0x96a0), 0x10);
        // E7 0357
        gbc.setState(0xbbfd, 0xd501, 0x1f10, 0x5046, 0xc7b, 0x96c1, 0x0, 0x1);
        gbc.writeMem(0xbbfd, { 0xe7 });
        gbc.writeMem(0xd4ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd4ff);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfd), 0xe7);
        EXPECT(gbc.readMem(0xd4ff), 0xfe);
        EXPECT(gbc.readMem(0xd500), 0xbb);
        // E7 0358
        gbc.setState(0x1813, 0xbd74, 0xb480, 0x1877, 0xce72, 0x123f, 0x0, 0x0);
        gbc.writeMem(0x1813, { 0xe7 });
        gbc.writeMem(0xbd72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbd72);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd72), 0x14);
        EXPECT(gbc.readMem(0xbd73), 0x18);
        // E7 035A
        gbc.setState(0x5d5a, 0xf412, 0xb1a0, 0x70e1, 0x1c64, 0xf81f, 0x1, 0x1);
        gbc.writeMem(0x5d5a, { 0xe7 });
        gbc.writeMem(0xf410, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf410);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf410), 0x5b);
        EXPECT(gbc.readMem(0xf411), 0x5d);
        // E7 035C
        gbc.setState(0xc81, 0x9dfe, 0xf8c0, 0xa9d1, 0x5f21, 0xd5f5, 0x0, 0x0);
        gbc.writeMem(0xc81, { 0xe7 });
        gbc.writeMem(0x9dfc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9dfc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dfc), 0x82);
        EXPECT(gbc.readMem(0x9dfd), 0xc);
        // E7 035D
        gbc.setState(0x2409, 0xda5d, 0x1570, 0x9367, 0xcf56, 0xcd70, 0x1, 0x0);
        gbc.writeMem(0x2409, { 0xe7 });
        gbc.writeMem(0xda5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xda5b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda5b), 0xa);
        EXPECT(gbc.readMem(0xda5c), 0x24);
        // E7 035E
        gbc.setState(0xede6, 0xdfce, 0x3c20, 0x8929, 0x74e5, 0xb9e6, 0x0, 0x0);
        gbc.writeMem(0xdfcc, { 0x0, 0x0 });
        gbc.writeMem(0xede6, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xdfcc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcc), 0xe7);
        EXPECT(gbc.readMem(0xdfcd), 0xed);
        EXPECT(gbc.readMem(0xede6), 0xe7);
        // E7 035F
        gbc.setState(0xa971, 0xc486, 0x7e0, 0x192, 0xce9d, 0xd4a9, 0x0, 0x1);
        gbc.writeMem(0xa971, { 0xe7 });
        gbc.writeMem(0xc484, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc484);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa971), 0xe7);
        EXPECT(gbc.readMem(0xc484), 0x72);
        EXPECT(gbc.readMem(0xc485), 0xa9);
        // E7 0360
        gbc.setState(0xb5ea, 0xecea, 0xd400, 0xcd0, 0xad54, 0x3b64, 0x0, 0x1);
        gbc.writeMem(0xb5ea, { 0xe7 });
        gbc.writeMem(0xece8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xece8);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ea), 0xe7);
        EXPECT(gbc.readMem(0xece8), 0xeb);
        EXPECT(gbc.readMem(0xece9), 0xb5);
        // E7 0361
        gbc.setState(0xe04e, 0x9067, 0x25d0, 0xd0d4, 0x73d2, 0x1a5f, 0x1, 0x0);
        gbc.writeMem(0x9065, { 0x0, 0x0 });
        gbc.writeMem(0xe04e, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9065);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9065), 0x4f);
        EXPECT(gbc.readMem(0x9066), 0xe0);
        EXPECT(gbc.readMem(0xe04e), 0xe7);
        // E7 0362
        gbc.setState(0x824b, 0xf45d, 0x8e50, 0x6796, 0x14c6, 0xabf0, 0x1, 0x1);
        gbc.writeMem(0x824b, { 0xe7 });
        gbc.writeMem(0xf45b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf45b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824b), 0xe7);
        EXPECT(gbc.readMem(0xf45b), 0x4c);
        EXPECT(gbc.readMem(0xf45c), 0x82);
        // E7 0366
        gbc.setState(0xad3e, 0xbed2, 0xf8a0, 0x4733, 0xb511, 0x8a76, 0x1, 0x0);
        gbc.writeMem(0xad3e, { 0xe7 });
        gbc.writeMem(0xbed0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbed0);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3e), 0xe7);
        EXPECT(gbc.readMem(0xbed0), 0x3f);
        EXPECT(gbc.readMem(0xbed1), 0xad);
        // E7 0367
        gbc.setState(0xb0fd, 0xa242, 0xfe10, 0x604, 0xb4fc, 0x1c0a, 0x1, 0x1);
        gbc.writeMem(0xa240, { 0x0, 0x0 });
        gbc.writeMem(0xb0fd, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa240);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa240), 0xfe);
        EXPECT(gbc.readMem(0xa241), 0xb0);
        EXPECT(gbc.readMem(0xb0fd), 0xe7);
        // E7 0368
        gbc.setState(0x56f7, 0xe31c, 0x2280, 0x2c0c, 0x30da, 0x9f73, 0x1, 0x0);
        gbc.writeMem(0x56f7, { 0xe7 });
        gbc.writeMem(0xe31a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe31a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe31a), 0xf8);
        EXPECT(gbc.readMem(0xe31b), 0x56);
        // E7 0371
        gbc.setState(0x6a99, 0x8dde, 0x1e0, 0x2c9e, 0x9bd3, 0x2b9e, 0x0, 0x0);
        gbc.writeMem(0x6a99, { 0xe7 });
        gbc.writeMem(0x8ddc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8ddc);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ddc), 0x9a);
        EXPECT(gbc.readMem(0x8ddd), 0x6a);
        // E7 0372
        gbc.setState(0x6cc2, 0xf189, 0x1db0, 0x42b5, 0x2ba6, 0xa0a7, 0x0, 0x0);
        gbc.writeMem(0x6cc2, { 0xe7 });
        gbc.writeMem(0xf187, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf187);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf187), 0xc3);
        EXPECT(gbc.readMem(0xf188), 0x6c);
        // E7 0374
        gbc.setState(0xa228, 0xd5f6, 0xd450, 0x1655, 0x3400, 0x8b18, 0x1, 0x0);
        gbc.writeMem(0xa228, { 0xe7 });
        gbc.writeMem(0xd5f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd5f4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa228), 0xe7);
        EXPECT(gbc.readMem(0xd5f4), 0x29);
        EXPECT(gbc.readMem(0xd5f5), 0xa2);
        // E7 0379
        gbc.setState(0xc8ee, 0xb675, 0xd500, 0xf5f7, 0x3b1a, 0x5c68, 0x0, 0x1);
        gbc.writeMem(0xb673, { 0x0, 0x0 });
        gbc.writeMem(0xc8ee, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb673);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb673), 0xef);
        EXPECT(gbc.readMem(0xb674), 0xc8);
        EXPECT(gbc.readMem(0xc8ee), 0xe7);
        // E7 037A
        gbc.setState(0xeab3, 0xa09f, 0x91d0, 0xc2b5, 0x46ea, 0x2aff, 0x0, 0x1);
        gbc.writeMem(0xa09d, { 0x0, 0x0 });
        gbc.writeMem(0xeab3, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa09d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa09d), 0xb4);
        EXPECT(gbc.readMem(0xa09e), 0xea);
        EXPECT(gbc.readMem(0xeab3), 0xe7);
        // E7 037B
        gbc.setState(0x24b6, 0xad77, 0xeb0, 0xdd4, 0x68bf, 0x84ff, 0x1, 0x1);
        gbc.writeMem(0x24b6, { 0xe7 });
        gbc.writeMem(0xad75, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xad75);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad75), 0xb7);
        EXPECT(gbc.readMem(0xad76), 0x24);
        // E7 037C
        gbc.setState(0x200a, 0xff0f, 0xaac0, 0x20be, 0x5ab, 0xc0d6, 0x0, 0x1);
        gbc.writeMem(0x200a, { 0xe7 });
        gbc.writeMem(0xff0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xff0d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0d), 0xb);
        EXPECT(gbc.readMem(0xff0e), 0x20);
        // E7 0380
        gbc.setState(0x4855, 0xd845, 0x3970, 0xbcaf, 0x9126, 0xdf4e, 0x1, 0x1);
        gbc.writeMem(0x4855, { 0xe7 });
        gbc.writeMem(0xd843, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd843);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd843), 0x56);
        EXPECT(gbc.readMem(0xd844), 0x48);
        // E7 0384
        gbc.setState(0xb230, 0x93c1, 0x18e0, 0xa0fb, 0xcd32, 0xe289, 0x1, 0x1);
        gbc.writeMem(0x93bf, { 0x0, 0x0 });
        gbc.writeMem(0xb230, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x93bf);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93bf), 0x31);
        EXPECT(gbc.readMem(0x93c0), 0xb2);
        EXPECT(gbc.readMem(0xb230), 0xe7);
        // E7 0387
        gbc.setState(0xe4f9, 0x868c, 0x7890, 0x64e8, 0x832a, 0x8ae0, 0x0, 0x0);
        gbc.writeMem(0x868a, { 0x0, 0x0 });
        gbc.writeMem(0xe4f9, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x868a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x868a), 0xfa);
        EXPECT(gbc.readMem(0x868b), 0xe4);
        EXPECT(gbc.readMem(0xe4f9), 0xe7);
        // E7 0388
        gbc.setState(0x2450, 0xd9d4, 0xd670, 0xa4ab, 0x89d8, 0xbcf2, 0x0, 0x0);
        gbc.writeMem(0x2450, { 0xe7 });
        gbc.writeMem(0xd9d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd9d2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d2), 0x51);
        EXPECT(gbc.readMem(0xd9d3), 0x24);
        // E7 038D
        gbc.setState(0x5612, 0xe278, 0x8880, 0xb14f, 0x4bb0, 0x13a0, 0x1, 0x0);
        gbc.writeMem(0x5612, { 0xe7 });
        gbc.writeMem(0xe276, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe276);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0x13);
        EXPECT(gbc.readMem(0xe277), 0x56);
        // E7 038F
        gbc.setState(0xa9ac, 0x8853, 0xf920, 0x5e75, 0x70c9, 0x2c2d, 0x1, 0x1);
        gbc.writeMem(0x8851, { 0x0, 0x0 });
        gbc.writeMem(0xa9ac, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8851);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8851), 0xad);
        EXPECT(gbc.readMem(0x8852), 0xa9);
        EXPECT(gbc.readMem(0xa9ac), 0xe7);
        // E7 0390
        gbc.setState(0xaf21, 0xef73, 0xa8c0, 0xd708, 0x47d3, 0xaafe, 0x1, 0x0);
        gbc.writeMem(0xaf21, { 0xe7 });
        gbc.writeMem(0xef71, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xef71);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf21), 0xe7);
        EXPECT(gbc.readMem(0xef71), 0x22);
        EXPECT(gbc.readMem(0xef72), 0xaf);
        // E7 0391
        gbc.setState(0xac33, 0x90eb, 0x66a0, 0xdd0f, 0x424b, 0xd35b, 0x0, 0x0);
        gbc.writeMem(0x90e9, { 0x0, 0x0 });
        gbc.writeMem(0xac33, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x90e9);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e9), 0x34);
        EXPECT(gbc.readMem(0x90ea), 0xac);
        EXPECT(gbc.readMem(0xac33), 0xe7);
        // E7 0392
        gbc.setState(0x2563, 0xd78a, 0x77a0, 0x5ab7, 0xa426, 0x197a, 0x1, 0x1);
        gbc.writeMem(0x2563, { 0xe7 });
        gbc.writeMem(0xd788, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd788);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd788), 0x64);
        EXPECT(gbc.readMem(0xd789), 0x25);
        // E7 0393
        gbc.setState(0x3d1c, 0x898e, 0x15c0, 0x14df, 0x5878, 0xf53a, 0x1, 0x0);
        gbc.writeMem(0x3d1c, { 0xe7 });
        gbc.writeMem(0x898c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x898c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x898c), 0x1d);
        EXPECT(gbc.readMem(0x898d), 0x3d);
        // E7 0394
        gbc.setState(0xb45e, 0xfcf3, 0xb5b0, 0x9244, 0x298c, 0x91d0, 0x1, 0x0);
        gbc.writeMem(0xb45e, { 0xe7 });
        gbc.writeMem(0xfcf1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfcf1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb45e), 0xe7);
        EXPECT(gbc.readMem(0xfcf1), 0x5f);
        EXPECT(gbc.readMem(0xfcf2), 0xb4);
        // E7 0395
        gbc.setState(0xddef, 0xdd7b, 0x9aa0, 0x61dd, 0x83f0, 0x797c, 0x0, 0x0);
        gbc.writeMem(0xdd79, { 0x0, 0x0 });
        gbc.writeMem(0xddef, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdd79);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd79), 0xf0);
        EXPECT(gbc.readMem(0xdd7a), 0xdd);
        EXPECT(gbc.readMem(0xddef), 0xe7);
        // E7 039A
        gbc.setState(0xd64e, 0xe294, 0x56b0, 0x302f, 0x1b91, 0x4139, 0x0, 0x1);
        gbc.writeMem(0xd64e, { 0xe7 });
        gbc.writeMem(0xe292, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe292);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd64e), 0xe7);
        EXPECT(gbc.readMem(0xe292), 0x4f);
        EXPECT(gbc.readMem(0xe293), 0xd6);
        // E7 039B
        gbc.setState(0x494d, 0xd85d, 0xdfa0, 0xd62a, 0x4faa, 0x98b5, 0x1, 0x1);
        gbc.writeMem(0x494d, { 0xe7 });
        gbc.writeMem(0xd85b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd85b);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85b), 0x4e);
        EXPECT(gbc.readMem(0xd85c), 0x49);
        // E7 039C
        gbc.setState(0x342f, 0xbf2b, 0x4c00, 0x411, 0xe6b7, 0x200, 0x1, 0x1);
        gbc.writeMem(0x342f, { 0xe7 });
        gbc.writeMem(0xbf29, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbf29);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf29), 0x30);
        EXPECT(gbc.readMem(0xbf2a), 0x34);
        // E7 03A2
        gbc.setState(0x8f19, 0xa422, 0x4a60, 0x5d2f, 0xba06, 0x30b5, 0x1, 0x1);
        gbc.writeMem(0x8f19, { 0xe7 });
        gbc.writeMem(0xa420, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa420);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f19), 0xe7);
        EXPECT(gbc.readMem(0xa420), 0x1a);
        EXPECT(gbc.readMem(0xa421), 0x8f);
        // E7 03A6
        gbc.setState(0xa24, 0xa804, 0x9810, 0x991c, 0x79d5, 0xd881, 0x1, 0x1);
        gbc.writeMem(0xa24, { 0xe7 });
        gbc.writeMem(0xa802, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa802);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa802), 0x25);
        EXPECT(gbc.readMem(0xa803), 0xa);
        // E7 03A7
        gbc.setState(0x2e0a, 0xc186, 0xad50, 0xa17f, 0xa015, 0x9030, 0x1, 0x1);
        gbc.writeMem(0x2e0a, { 0xe7 });
        gbc.writeMem(0xc184, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc184);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc184), 0xb);
        EXPECT(gbc.readMem(0xc185), 0x2e);
        // E7 03A9
        gbc.setState(0x787e, 0xe266, 0x8d00, 0x60ce, 0xfb35, 0x5e38, 0x0, 0x0);
        gbc.writeMem(0x787e, { 0xe7 });
        gbc.writeMem(0xe264, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe264);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe264), 0x7f);
        EXPECT(gbc.readMem(0xe265), 0x78);
        // E7 03AB
        gbc.setState(0x7cdb, 0xd0a8, 0x1a10, 0xd4f0, 0x5383, 0x641a, 0x0, 0x1);
        gbc.writeMem(0x7cdb, { 0xe7 });
        gbc.writeMem(0xd0a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd0a6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a6), 0xdc);
        EXPECT(gbc.readMem(0xd0a7), 0x7c);
        // E7 03AE
        gbc.setState(0xc1ee, 0xf5f8, 0xf0f0, 0xea84, 0xa06e, 0x4e55, 0x0, 0x1);
        gbc.writeMem(0xc1ee, { 0xe7 });
        gbc.writeMem(0xf5f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf5f6);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ee), 0xe7);
        EXPECT(gbc.readMem(0xf5f6), 0xef);
        EXPECT(gbc.readMem(0xf5f7), 0xc1);
        // E7 03B0
        gbc.setState(0x4cbf, 0xd23c, 0x9150, 0x42ed, 0xdc9d, 0xe313, 0x0, 0x0);
        gbc.writeMem(0x4cbf, { 0xe7 });
        gbc.writeMem(0xd23a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd23a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23a), 0xc0);
        EXPECT(gbc.readMem(0xd23b), 0x4c);
        // E7 03B1
        gbc.setState(0x5deb, 0xb24e, 0x6cc0, 0xe321, 0xe81b, 0x8bc7, 0x0, 0x0);
        gbc.writeMem(0x5deb, { 0xe7 });
        gbc.writeMem(0xb24c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb24c), 0xec);
        EXPECT(gbc.readMem(0xb24d), 0x5d);
        // E7 03B2
        gbc.setState(0x5a5f, 0xa00f, 0x5e0, 0xebbe, 0x9612, 0xb43b, 0x1, 0x0);
        gbc.writeMem(0x5a5f, { 0xe7 });
        gbc.writeMem(0xa00d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa00d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00d), 0x60);
        EXPECT(gbc.readMem(0xa00e), 0x5a);
        // E7 03B7
        gbc.setState(0xc130, 0xa822, 0x9030, 0x498b, 0x155, 0xd198, 0x0, 0x0);
        gbc.writeMem(0xa820, { 0x0, 0x0 });
        gbc.writeMem(0xc130, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa820);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa820), 0x31);
        EXPECT(gbc.readMem(0xa821), 0xc1);
        EXPECT(gbc.readMem(0xc130), 0xe7);
        // E7 03B8
        gbc.setState(0x2ad0, 0xb422, 0x7680, 0xe0e1, 0x554d, 0xb320, 0x0, 0x1);
        gbc.writeMem(0x2ad0, { 0xe7 });
        gbc.writeMem(0xb420, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb420);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb420), 0xd1);
        EXPECT(gbc.readMem(0xb421), 0x2a);
        // E7 03BB
        gbc.setState(0x5f70, 0xfca1, 0x1720, 0x5e33, 0xc477, 0x4d33, 0x1, 0x1);
        gbc.writeMem(0x5f70, { 0xe7 });
        gbc.writeMem(0xfc9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfc9f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc9f), 0x71);
        EXPECT(gbc.readMem(0xfca0), 0x5f);
        // E7 03BD
        gbc.setState(0x80e7, 0xdf60, 0xbba0, 0xc72b, 0xb440, 0xe751, 0x0, 0x1);
        gbc.writeMem(0x80e7, { 0xe7 });
        gbc.writeMem(0xdf5e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdf5e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e7), 0xe7);
        EXPECT(gbc.readMem(0xdf5e), 0xe8);
        EXPECT(gbc.readMem(0xdf5f), 0x80);
        // E7 03C0
        gbc.setState(0xbc4f, 0xe282, 0x7410, 0x2e9a, 0xd122, 0x699b, 0x1, 0x0);
        gbc.writeMem(0xbc4f, { 0xe7 });
        gbc.writeMem(0xe280, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe280);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc4f), 0xe7);
        EXPECT(gbc.readMem(0xe280), 0x50);
        EXPECT(gbc.readMem(0xe281), 0xbc);
        // E7 03C3
        gbc.setState(0xe0fc, 0xb975, 0x99c0, 0x15d9, 0x256, 0xc43d, 0x0, 0x0);
        gbc.writeMem(0xb973, { 0x0, 0x0 });
        gbc.writeMem(0xe0fc, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb973);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb973), 0xfd);
        EXPECT(gbc.readMem(0xb974), 0xe0);
        EXPECT(gbc.readMem(0xe0fc), 0xe7);
        // E7 03C4
        gbc.setState(0x20c, 0xfdc3, 0x8700, 0xcf7, 0x3f83, 0x39a9, 0x0, 0x0);
        gbc.writeMem(0x20c, { 0xe7 });
        gbc.writeMem(0xfdc1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfdc1);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdc1), 0xd);
        EXPECT(gbc.readMem(0xfdc2), 0x2);
        // E7 03C7
        gbc.setState(0x27da, 0xa439, 0xe600, 0xde29, 0x8e89, 0x1a, 0x1, 0x0);
        gbc.writeMem(0x27da, { 0xe7 });
        gbc.writeMem(0xa437, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa437);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa437), 0xdb);
        EXPECT(gbc.readMem(0xa438), 0x27);
        // E7 03C8
        gbc.setState(0x99d7, 0xa19c, 0x9cd0, 0x3cd0, 0x53e7, 0xcd3a, 0x0, 0x1);
        gbc.writeMem(0x99d7, { 0xe7 });
        gbc.writeMem(0xa19a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa19a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d7), 0xe7);
        EXPECT(gbc.readMem(0xa19a), 0xd8);
        EXPECT(gbc.readMem(0xa19b), 0x99);
        // E7 03C9
        gbc.setState(0x47d1, 0x86e9, 0x5270, 0x3961, 0x1d11, 0xc894, 0x1, 0x0);
        gbc.writeMem(0x47d1, { 0xe7 });
        gbc.writeMem(0x86e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x86e7);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86e7), 0xd2);
        EXPECT(gbc.readMem(0x86e8), 0x47);
        // E7 03CA
        gbc.setState(0x5396, 0xbfc4, 0xb2c0, 0xdd8b, 0x8830, 0xe436, 0x0, 0x1);
        gbc.writeMem(0x5396, { 0xe7 });
        gbc.writeMem(0xbfc2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbfc2);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc2), 0x97);
        EXPECT(gbc.readMem(0xbfc3), 0x53);
        // E7 03CB
        gbc.setState(0xe59d, 0xbe1e, 0x1ea0, 0xcb7f, 0xbc11, 0xddf6, 0x0, 0x1);
        gbc.writeMem(0xbe1c, { 0x0, 0x0 });
        gbc.writeMem(0xe59d, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbe1c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe1c), 0x9e);
        EXPECT(gbc.readMem(0xbe1d), 0xe5);
        EXPECT(gbc.readMem(0xe59d), 0xe7);
        // E7 03CC
        gbc.setState(0x8f18, 0xc682, 0xf4d0, 0x1e4d, 0x7573, 0xf127, 0x1, 0x1);
        gbc.writeMem(0x8f18, { 0xe7 });
        gbc.writeMem(0xc680, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc680);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f18), 0xe7);
        EXPECT(gbc.readMem(0xc680), 0x19);
        EXPECT(gbc.readMem(0xc681), 0x8f);
        // E7 03CF
        gbc.setState(0x2fe7, 0xf99e, 0x32c0, 0xfd4, 0xb5c3, 0xd3ff, 0x1, 0x0);
        gbc.writeMem(0x2fe7, { 0xe7 });
        gbc.writeMem(0xf99c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf99c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf99c), 0xe8);
        EXPECT(gbc.readMem(0xf99d), 0x2f);
        // E7 03D0
        gbc.setState(0xbd1d, 0xc476, 0x6b60, 0x4a75, 0x29c0, 0x8185, 0x1, 0x0);
        gbc.writeMem(0xbd1d, { 0xe7 });
        gbc.writeMem(0xc474, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc474);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1d), 0xe7);
        EXPECT(gbc.readMem(0xc474), 0x1e);
        EXPECT(gbc.readMem(0xc475), 0xbd);
        // E7 03D2
        gbc.setState(0xd5b7, 0xea75, 0xeae0, 0x6396, 0x8569, 0x74dc, 0x1, 0x1);
        gbc.writeMem(0xd5b7, { 0xe7 });
        gbc.writeMem(0xea73, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xea73);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b7), 0xe7);
        EXPECT(gbc.readMem(0xea73), 0xb8);
        EXPECT(gbc.readMem(0xea74), 0xd5);
        // E7 03D3
        gbc.setState(0x445c, 0xa024, 0xec0, 0xa0b5, 0x76bb, 0xaddb, 0x0, 0x0);
        gbc.writeMem(0x445c, { 0xe7 });
        gbc.writeMem(0xa022, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa022);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa022), 0x5d);
        EXPECT(gbc.readMem(0xa023), 0x44);
        // E7 03D4
        gbc.setState(0xe6a8, 0xe802, 0x21a0, 0x9e38, 0x5fd0, 0x25c, 0x0, 0x0);
        gbc.writeMem(0xe6a8, { 0xe7 });
        gbc.writeMem(0xe800, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe800);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a8), 0xe7);
        EXPECT(gbc.readMem(0xe800), 0xa9);
        EXPECT(gbc.readMem(0xe801), 0xe6);
        // E7 03D7
        gbc.setState(0x3707, 0xdfc6, 0x5980, 0x4239, 0x6af0, 0xea9d, 0x0, 0x1);
        gbc.writeMem(0x3707, { 0xe7 });
        gbc.writeMem(0xdfc4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdfc4);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc4), 0x8);
        EXPECT(gbc.readMem(0xdfc5), 0x37);
        // E7 03D9
        gbc.setState(0x1cd9, 0x999f, 0xb5e0, 0xbd80, 0x7f82, 0xfcd5, 0x1, 0x1);
        gbc.writeMem(0x1cd9, { 0xe7 });
        gbc.writeMem(0x999d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x999d);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999d), 0xda);
        EXPECT(gbc.readMem(0x999e), 0x1c);
        // E7 03DA
        gbc.setState(0x1b88, 0xcaa1, 0x3220, 0xc6a6, 0xd95d, 0x747b, 0x0, 0x1);
        gbc.writeMem(0x1b88, { 0xe7 });
        gbc.writeMem(0xca9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xca9f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9f), 0x89);
        EXPECT(gbc.readMem(0xcaa0), 0x1b);
        // E7 03DB
        gbc.setState(0xaccc, 0x8c24, 0xffb0, 0xff3d, 0x30e7, 0xe90b, 0x0, 0x0);
        gbc.writeMem(0x8c22, { 0x0, 0x0 });
        gbc.writeMem(0xaccc, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8c22);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c22), 0xcd);
        EXPECT(gbc.readMem(0x8c23), 0xac);
        EXPECT(gbc.readMem(0xaccc), 0xe7);
        // E7 03DC
        gbc.setState(0x2bfe, 0xa1a1, 0xf040, 0x4e03, 0xef71, 0x5b01, 0x1, 0x1);
        gbc.writeMem(0x2bfe, { 0xe7 });
        gbc.writeMem(0xa19f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa19f);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa19f), 0xff);
        EXPECT(gbc.readMem(0xa1a0), 0x2b);
        // E7 03E3
        gbc.setState(0xe2c9, 0xf00e, 0x29e0, 0x306a, 0x822b, 0x4f2d, 0x1, 0x1);
        gbc.writeMem(0xe2c9, { 0xe7 });
        gbc.writeMem(0xf00c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf00c);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c9), 0xe7);
        EXPECT(gbc.readMem(0xf00c), 0xca);
        EXPECT(gbc.readMem(0xf00d), 0xe2);
        // E7 03E4
        gbc.setState(0x5597, 0x808c, 0x4ea0, 0x2ca5, 0x72be, 0x737e, 0x0, 0x1);
        gbc.writeMem(0x5597, { 0xe7 });
        gbc.writeMem(0x808a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x808a);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808a), 0x98);
        EXPECT(gbc.readMem(0x808b), 0x55);
        // E7 03E5
        gbc.setState(0xab1b, 0x8b72, 0xee60, 0x4644, 0xd120, 0x8779, 0x0, 0x0);
        gbc.writeMem(0x8b70, { 0x0, 0x0 });
        gbc.writeMem(0xab1b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8b70);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b70), 0x1c);
        EXPECT(gbc.readMem(0x8b71), 0xab);
        EXPECT(gbc.readMem(0xab1b), 0xe7);
    }
