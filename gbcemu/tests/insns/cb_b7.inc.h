    TEST(gbcemu, opcode_cb_b7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB B7 0000
        gbc.setState(0x2d0b, 0x24ca, 0x8b60, 0x408b, 0x26c6, 0xec8a, 0x0, 0x1);
        gbc.writeMem(0x2d0b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x24ca);
        EXPECT(gbc.pc(), 0x2d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0001
        gbc.setState(0x9c6e, 0x931a, 0xd9d0, 0xfd00, 0x854b, 0x104a, 0x0, 0x0);
        gbc.writeMem(0x9c6e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x931a);
        EXPECT(gbc.pc(), 0x9c70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6e), 0xcb);
        EXPECT(gbc.readMem(0x9c6f), 0xb7);
        // CB B7 0002
        gbc.setState(0x11c5, 0x48bc, 0x98b0, 0x392d, 0x66c6, 0x7a58, 0x1, 0x0);
        gbc.writeMem(0x11c5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x48bc);
        EXPECT(gbc.pc(), 0x11c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0004
        gbc.setState(0xb076, 0xfd84, 0xa0, 0x8bda, 0x4c98, 0x1909, 0x1, 0x0);
        gbc.writeMem(0xb076, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfd84);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb076), 0xcb);
        EXPECT(gbc.readMem(0xb077), 0xb7);
        // CB B7 0005
        gbc.setState(0x9902, 0xbab5, 0xf920, 0x5af5, 0x7015, 0x8494, 0x1, 0x0);
        gbc.writeMem(0x9902, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbab5);
        EXPECT(gbc.pc(), 0x9904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9902), 0xcb);
        EXPECT(gbc.readMem(0x9903), 0xb7);
        // CB B7 0007
        gbc.setState(0x8254, 0x279a, 0xbeb0, 0x45c3, 0xb36, 0xcc48, 0x1, 0x1);
        gbc.writeMem(0x8254, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x279a);
        EXPECT(gbc.pc(), 0x8256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8254), 0xcb);
        EXPECT(gbc.readMem(0x8255), 0xb7);
        // CB B7 0008
        gbc.setState(0x578b, 0xf539, 0x400, 0xc0a3, 0xc5ce, 0xf4c9, 0x1, 0x1);
        gbc.writeMem(0x578b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf539);
        EXPECT(gbc.pc(), 0x578d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0009
        gbc.setState(0xbd1e, 0x5d5d, 0x1f20, 0xb7fa, 0xcf0f, 0xf67c, 0x0, 0x1);
        gbc.writeMem(0xbd1e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5d5d);
        EXPECT(gbc.pc(), 0xbd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1e), 0xcb);
        EXPECT(gbc.readMem(0xbd1f), 0xb7);
        // CB B7 000A
        gbc.setState(0xb6c6, 0x9c3a, 0x3eb0, 0x9c52, 0x8718, 0xd856, 0x0, 0x0);
        gbc.writeMem(0xb6c6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9c3a);
        EXPECT(gbc.pc(), 0xb6c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c6), 0xcb);
        EXPECT(gbc.readMem(0xb6c7), 0xb7);
        // CB B7 000B
        gbc.setState(0x3fee, 0x8ff0, 0xb7b0, 0x311e, 0x7af0, 0x534, 0x1, 0x1);
        gbc.writeMem(0x3fee, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8ff0);
        EXPECT(gbc.pc(), 0x3ff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 000C
        gbc.setState(0x9fe, 0x8ce1, 0x5360, 0x2527, 0xdaac, 0xeb1, 0x1, 0x1);
        gbc.writeMem(0x9fe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8ce1);
        EXPECT(gbc.pc(), 0xa00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 000D
        gbc.setState(0xece, 0x5bcb, 0xba90, 0x398d, 0x24a4, 0xf4b1, 0x0, 0x0);
        gbc.writeMem(0xece, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5bcb);
        EXPECT(gbc.pc(), 0xed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 000E
        gbc.setState(0xd42, 0xef35, 0xc90, 0x5b61, 0xa8fa, 0xa7df, 0x1, 0x0);
        gbc.writeMem(0xd42, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xef35);
        EXPECT(gbc.pc(), 0xd44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 000F
        gbc.setState(0x2cc2, 0xd151, 0xdf00, 0x65ea, 0xd865, 0x3862, 0x1, 0x1);
        gbc.writeMem(0x2cc2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd151);
        EXPECT(gbc.pc(), 0x2cc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0010
        gbc.setState(0x665b, 0x6566, 0xb510, 0x97ac, 0xe99b, 0x1132, 0x1, 0x0);
        gbc.writeMem(0x665b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0x665d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0011
        gbc.setState(0x6597, 0x317a, 0x9200, 0xbfff, 0x4e8e, 0xa474, 0x0, 0x1);
        gbc.writeMem(0x6597, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x317a);
        EXPECT(gbc.pc(), 0x6599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0012
        gbc.setState(0xc507, 0x1340, 0x9c90, 0x97f9, 0xae27, 0xab33, 0x1, 0x1);
        gbc.writeMem(0xc507, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1340);
        EXPECT(gbc.pc(), 0xc509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc507), 0xcb);
        EXPECT(gbc.readMem(0xc508), 0xb7);
        // CB B7 0013
        gbc.setState(0xc8ab, 0x227b, 0x7ee0, 0xf6c7, 0xe198, 0x84f3, 0x0, 0x1);
        gbc.writeMem(0xc8ab, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x227b);
        EXPECT(gbc.pc(), 0xc8ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ab), 0xcb);
        EXPECT(gbc.readMem(0xc8ac), 0xb7);
        // CB B7 0014
        gbc.setState(0x397f, 0x2df1, 0x4c80, 0xf502, 0x9c05, 0x5d3f, 0x1, 0x0);
        gbc.writeMem(0x397f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2df1);
        EXPECT(gbc.pc(), 0x3981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0015
        gbc.setState(0x5142, 0x4813, 0xe700, 0xa8a4, 0x3917, 0xaa31, 0x1, 0x0);
        gbc.writeMem(0x5142, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x4813);
        EXPECT(gbc.pc(), 0x5144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0016
        gbc.setState(0x6ea6, 0x2996, 0xa630, 0x1620, 0xdfb, 0x5a94, 0x0, 0x1);
        gbc.writeMem(0x6ea6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2996);
        EXPECT(gbc.pc(), 0x6ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0017
        gbc.setState(0x3993, 0x9931, 0x170, 0xa562, 0x582c, 0x7f06, 0x0, 0x0);
        gbc.writeMem(0x3993, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9931);
        EXPECT(gbc.pc(), 0x3995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0018
        gbc.setState(0x199d, 0xf9c0, 0x8e50, 0x72ea, 0xacc8, 0x7878, 0x0, 0x1);
        gbc.writeMem(0x199d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf9c0);
        EXPECT(gbc.pc(), 0x199f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 001A
        gbc.setState(0x984, 0xda10, 0xef90, 0xbd5, 0xb985, 0xcb0a, 0x0, 0x1);
        gbc.writeMem(0x984, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xda10);
        EXPECT(gbc.pc(), 0x986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 001B
        gbc.setState(0x98f8, 0x856d, 0x71b0, 0xa84, 0xba29, 0xd756, 0x1, 0x1);
        gbc.writeMem(0x98f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x856d);
        EXPECT(gbc.pc(), 0x98fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f8), 0xcb);
        EXPECT(gbc.readMem(0x98f9), 0xb7);
        // CB B7 001D
        gbc.setState(0xbe3c, 0x77e6, 0xa2c0, 0x2244, 0xf6e8, 0x58f3, 0x0, 0x1);
        gbc.writeMem(0xbe3c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x77e6);
        EXPECT(gbc.pc(), 0xbe3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3c), 0xcb);
        EXPECT(gbc.readMem(0xbe3d), 0xb7);
        // CB B7 001E
        gbc.setState(0xe0fa, 0x3c25, 0x2fa0, 0xb83b, 0x779b, 0xf7b1, 0x0, 0x0);
        gbc.writeMem(0xe0fa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3c25);
        EXPECT(gbc.pc(), 0xe0fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0fa), 0xcb);
        EXPECT(gbc.readMem(0xe0fb), 0xb7);
        // CB B7 001F
        gbc.setState(0x549f, 0x2df1, 0x70b0, 0x932, 0x1c90, 0x4fe2, 0x0, 0x0);
        gbc.writeMem(0x549f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2df1);
        EXPECT(gbc.pc(), 0x54a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0020
        gbc.setState(0xc2e5, 0x7766, 0x1d40, 0x7be1, 0x7186, 0x7213, 0x1, 0x0);
        gbc.writeMem(0xc2e5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7766);
        EXPECT(gbc.pc(), 0xc2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e5), 0xcb);
        EXPECT(gbc.readMem(0xc2e6), 0xb7);
        // CB B7 0021
        gbc.setState(0x8f0e, 0xffa0, 0xee30, 0x8c62, 0x88f1, 0x297c, 0x1, 0x0);
        gbc.writeMem(0x8f0e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xffa0);
        EXPECT(gbc.pc(), 0x8f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f0e), 0xcb);
        EXPECT(gbc.readMem(0x8f0f), 0xb7);
        // CB B7 0022
        gbc.setState(0x576a, 0x24e8, 0xd640, 0xc31f, 0xf4e9, 0xbfb4, 0x0, 0x1);
        gbc.writeMem(0x576a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x24e8);
        EXPECT(gbc.pc(), 0x576c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0023
        gbc.setState(0x5119, 0x12c7, 0x7350, 0x6fbf, 0xddc, 0x7117, 0x0, 0x0);
        gbc.writeMem(0x5119, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x12c7);
        EXPECT(gbc.pc(), 0x511b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0024
        gbc.setState(0xedc7, 0x342e, 0xfa00, 0x3a39, 0xa474, 0x1252, 0x1, 0x0);
        gbc.writeMem(0xedc7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x342e);
        EXPECT(gbc.pc(), 0xedc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc7), 0xcb);
        EXPECT(gbc.readMem(0xedc8), 0xb7);
        // CB B7 0025
        gbc.setState(0xf0c, 0x46e0, 0xcca0, 0x3e20, 0xb6ba, 0xd920, 0x0, 0x0);
        gbc.writeMem(0xf0c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x46e0);
        EXPECT(gbc.pc(), 0xf0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0026
        gbc.setState(0xd350, 0x638b, 0x7d90, 0x71ca, 0xd917, 0x4571, 0x1, 0x0);
        gbc.writeMem(0xd350, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x638b);
        EXPECT(gbc.pc(), 0xd352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd350), 0xcb);
        EXPECT(gbc.readMem(0xd351), 0xb7);
        // CB B7 0027
        gbc.setState(0x7eb6, 0x929b, 0x40c0, 0xaed6, 0x9ea0, 0xa73e, 0x0, 0x0);
        gbc.writeMem(0x7eb6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x929b);
        EXPECT(gbc.pc(), 0x7eb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0028
        gbc.setState(0xeba2, 0x6401, 0x5e10, 0xbaa2, 0xacd, 0x2d03, 0x1, 0x0);
        gbc.writeMem(0xeba2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6401);
        EXPECT(gbc.pc(), 0xeba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba2), 0xcb);
        EXPECT(gbc.readMem(0xeba3), 0xb7);
        // CB B7 0029
        gbc.setState(0xcd7d, 0xc012, 0x4120, 0x5fae, 0xdaf8, 0xaa98, 0x1, 0x1);
        gbc.writeMem(0xcd7d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc012);
        EXPECT(gbc.pc(), 0xcd7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd7d), 0xcb);
        EXPECT(gbc.readMem(0xcd7e), 0xb7);
        // CB B7 002B
        gbc.setState(0x7cbc, 0xffd1, 0xade0, 0x3a19, 0x4132, 0x833c, 0x1, 0x1);
        gbc.writeMem(0x7cbc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xffd1);
        EXPECT(gbc.pc(), 0x7cbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 002C
        gbc.setState(0x8c57, 0xa7eb, 0xfa50, 0xebf5, 0x8eb2, 0x5781, 0x1, 0x0);
        gbc.writeMem(0x8c57, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa7eb);
        EXPECT(gbc.pc(), 0x8c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c57), 0xcb);
        EXPECT(gbc.readMem(0x8c58), 0xb7);
        // CB B7 002D
        gbc.setState(0x95d7, 0x5729, 0xf00, 0x4d85, 0xa589, 0xc834, 0x1, 0x1);
        gbc.writeMem(0x95d7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5729);
        EXPECT(gbc.pc(), 0x95d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d7), 0xcb);
        EXPECT(gbc.readMem(0x95d8), 0xb7);
        // CB B7 002E
        gbc.setState(0xabd7, 0x22cd, 0x3f40, 0xfb69, 0x655d, 0x80a8, 0x0, 0x1);
        gbc.writeMem(0xabd7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x22cd);
        EXPECT(gbc.pc(), 0xabd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd7), 0xcb);
        EXPECT(gbc.readMem(0xabd8), 0xb7);
        // CB B7 002F
        gbc.setState(0xd124, 0x294a, 0xfe60, 0xac75, 0xca51, 0xf8a3, 0x0, 0x0);
        gbc.writeMem(0xd124, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x294a);
        EXPECT(gbc.pc(), 0xd126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd124), 0xcb);
        EXPECT(gbc.readMem(0xd125), 0xb7);
        // CB B7 0030
        gbc.setState(0xb2d, 0x7ad7, 0xa5b0, 0xc216, 0xe184, 0xfdbc, 0x0, 0x1);
        gbc.writeMem(0xb2d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7ad7);
        EXPECT(gbc.pc(), 0xb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0031
        gbc.setState(0xc3fc, 0xf960, 0x91a0, 0x413, 0x1c74, 0x2fc4, 0x0, 0x1);
        gbc.writeMem(0xc3fc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf960);
        EXPECT(gbc.pc(), 0xc3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3fc), 0xcb);
        EXPECT(gbc.readMem(0xc3fd), 0xb7);
        // CB B7 0032
        gbc.setState(0xa15a, 0x6321, 0xe780, 0x2d16, 0x4779, 0x2bea, 0x0, 0x1);
        gbc.writeMem(0xa15a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6321);
        EXPECT(gbc.pc(), 0xa15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15a), 0xcb);
        EXPECT(gbc.readMem(0xa15b), 0xb7);
        // CB B7 0033
        gbc.setState(0x408c, 0xc9b1, 0x7b0, 0xa45, 0x251a, 0xfd15, 0x1, 0x0);
        gbc.writeMem(0x408c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc9b1);
        EXPECT(gbc.pc(), 0x408e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0034
        gbc.setState(0x3792, 0xc1d4, 0xf550, 0xf8aa, 0xd5e1, 0xfe06, 0x0, 0x0);
        gbc.writeMem(0x3792, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc1d4);
        EXPECT(gbc.pc(), 0x3794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0035
        gbc.setState(0x64b9, 0xa8e1, 0x710, 0x88c0, 0x9576, 0x5139, 0x1, 0x1);
        gbc.writeMem(0x64b9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa8e1);
        EXPECT(gbc.pc(), 0x64bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0036
        gbc.setState(0xe6a1, 0x42b4, 0x2090, 0xcdca, 0x13c5, 0x6ea4, 0x0, 0x1);
        gbc.writeMem(0xe6a1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x42b4);
        EXPECT(gbc.pc(), 0xe6a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6a1), 0xcb);
        EXPECT(gbc.readMem(0xe6a2), 0xb7);
        // CB B7 0037
        gbc.setState(0x8ee2, 0x192c, 0xf10, 0xf555, 0x44b0, 0xaca2, 0x1, 0x1);
        gbc.writeMem(0x8ee2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x192c);
        EXPECT(gbc.pc(), 0x8ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee2), 0xcb);
        EXPECT(gbc.readMem(0x8ee3), 0xb7);
        // CB B7 0038
        gbc.setState(0x5e04, 0xb2e, 0x720, 0x4041, 0x31bd, 0x8008, 0x1, 0x0);
        gbc.writeMem(0x5e04, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb2e);
        EXPECT(gbc.pc(), 0x5e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0039
        gbc.setState(0x35d9, 0xa758, 0xb040, 0x72a9, 0x263f, 0x8657, 0x1, 0x1);
        gbc.writeMem(0x35d9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa758);
        EXPECT(gbc.pc(), 0x35db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 003A
        gbc.setState(0xdc05, 0x19a1, 0xaea0, 0xa37b, 0xf32f, 0x745a, 0x1, 0x1);
        gbc.writeMem(0xdc05, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x19a1);
        EXPECT(gbc.pc(), 0xdc07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc05), 0xcb);
        EXPECT(gbc.readMem(0xdc06), 0xb7);
        // CB B7 003B
        gbc.setState(0x2dca, 0x1c9f, 0x2910, 0xf0f, 0x90fa, 0x25f2, 0x0, 0x1);
        gbc.writeMem(0x2dca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1c9f);
        EXPECT(gbc.pc(), 0x2dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 003D
        gbc.setState(0x9ac9, 0xc639, 0x1630, 0x32bd, 0xa7eb, 0x64bb, 0x0, 0x1);
        gbc.writeMem(0x9ac9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc639);
        EXPECT(gbc.pc(), 0x9acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac9), 0xcb);
        EXPECT(gbc.readMem(0x9aca), 0xb7);
        // CB B7 003E
        gbc.setState(0x760f, 0x7cad, 0x43b0, 0xd534, 0xf8f5, 0x927f, 0x1, 0x1);
        gbc.writeMem(0x760f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7cad);
        EXPECT(gbc.pc(), 0x7611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 003F
        gbc.setState(0x4ddd, 0x618d, 0xbb40, 0x18f3, 0xda11, 0xaece, 0x1, 0x0);
        gbc.writeMem(0x4ddd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x618d);
        EXPECT(gbc.pc(), 0x4ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0040
        gbc.setState(0x2c3a, 0x32e9, 0x9420, 0x63c0, 0x1626, 0xccb1, 0x0, 0x0);
        gbc.writeMem(0x2c3a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x32e9);
        EXPECT(gbc.pc(), 0x2c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0041
        gbc.setState(0xde07, 0xb2a3, 0x9650, 0x61d8, 0xbe55, 0xe839, 0x1, 0x1);
        gbc.writeMem(0xde07, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb2a3);
        EXPECT(gbc.pc(), 0xde09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde07), 0xcb);
        EXPECT(gbc.readMem(0xde08), 0xb7);
        // CB B7 0042
        gbc.setState(0x7f1c, 0xe817, 0x8720, 0x7b0a, 0xb274, 0xc24, 0x1, 0x0);
        gbc.writeMem(0x7f1c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe817);
        EXPECT(gbc.pc(), 0x7f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0043
        gbc.setState(0x144a, 0x29c7, 0xf2c0, 0xdfe3, 0x8225, 0x15ee, 0x1, 0x0);
        gbc.writeMem(0x144a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x29c7);
        EXPECT(gbc.pc(), 0x144c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0044
        gbc.setState(0x757f, 0x513a, 0xa0a0, 0xa66c, 0xf70, 0xf67a, 0x1, 0x1);
        gbc.writeMem(0x757f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x513a);
        EXPECT(gbc.pc(), 0x7581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0045
        gbc.setState(0x723b, 0x73cb, 0x71a0, 0xeaed, 0xb2f8, 0xbe0f, 0x0, 0x1);
        gbc.writeMem(0x723b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x73cb);
        EXPECT(gbc.pc(), 0x723d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0046
        gbc.setState(0xd8c, 0x58ee, 0xe1d0, 0xd345, 0x7faf, 0xf00b, 0x1, 0x0);
        gbc.writeMem(0xd8c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x58ee);
        EXPECT(gbc.pc(), 0xd8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0047
        gbc.setState(0x354f, 0xb4d8, 0x28d0, 0xd361, 0xf7ee, 0x3683, 0x1, 0x0);
        gbc.writeMem(0x354f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb4d8);
        EXPECT(gbc.pc(), 0x3551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0048
        gbc.setState(0x2906, 0xd5e2, 0xc0e0, 0xb18, 0xbe4c, 0x52e, 0x0, 0x1);
        gbc.writeMem(0x2906, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd5e2);
        EXPECT(gbc.pc(), 0x2908);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0049
        gbc.setState(0x2413, 0x2c18, 0x5910, 0x24a, 0xa565, 0x936c, 0x0, 0x0);
        gbc.writeMem(0x2413, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2c18);
        EXPECT(gbc.pc(), 0x2415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 004A
        gbc.setState(0x7bfb, 0x2826, 0xe280, 0xea88, 0x264c, 0x51d7, 0x1, 0x1);
        gbc.writeMem(0x7bfb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2826);
        EXPECT(gbc.pc(), 0x7bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 004B
        gbc.setState(0xe834, 0xc38f, 0x7c80, 0x39db, 0x6a01, 0x4b3e, 0x1, 0x1);
        gbc.writeMem(0xe834, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc38f);
        EXPECT(gbc.pc(), 0xe836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe834), 0xcb);
        EXPECT(gbc.readMem(0xe835), 0xb7);
        // CB B7 004C
        gbc.setState(0x9404, 0x1175, 0x6d20, 0xe673, 0xab2f, 0x9efa, 0x1, 0x0);
        gbc.writeMem(0x9404, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1175);
        EXPECT(gbc.pc(), 0x9406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9404), 0xcb);
        EXPECT(gbc.readMem(0x9405), 0xb7);
        // CB B7 004D
        gbc.setState(0x1964, 0xe855, 0xd340, 0x3f61, 0xa00c, 0xca93, 0x0, 0x1);
        gbc.writeMem(0x1964, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe855);
        EXPECT(gbc.pc(), 0x1966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 004E
        gbc.setState(0x3116, 0x4ae9, 0x5120, 0xe373, 0xf442, 0x1740, 0x0, 0x1);
        gbc.writeMem(0x3116, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4ae9);
        EXPECT(gbc.pc(), 0x3118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 004F
        gbc.setState(0xa7f8, 0xe734, 0x7490, 0x5bb7, 0xe31e, 0x7570, 0x0, 0x0);
        gbc.writeMem(0xa7f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe734);
        EXPECT(gbc.pc(), 0xa7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f8), 0xcb);
        EXPECT(gbc.readMem(0xa7f9), 0xb7);
        // CB B7 0050
        gbc.setState(0x98fe, 0x74e8, 0x1140, 0xa710, 0x5224, 0xa229, 0x1, 0x1);
        gbc.writeMem(0x98fe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x74e8);
        EXPECT(gbc.pc(), 0x9900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98fe), 0xcb);
        EXPECT(gbc.readMem(0x98ff), 0xb7);
        // CB B7 0052
        gbc.setState(0x9e51, 0x43dd, 0x4f70, 0xb5f7, 0xa396, 0xb2b5, 0x1, 0x0);
        gbc.writeMem(0x9e51, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x43dd);
        EXPECT(gbc.pc(), 0x9e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e51), 0xcb);
        EXPECT(gbc.readMem(0x9e52), 0xb7);
        // CB B7 0054
        gbc.setState(0x6737, 0x1690, 0x1880, 0x4e36, 0xdd62, 0x3d3d, 0x0, 0x0);
        gbc.writeMem(0x6737, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1690);
        EXPECT(gbc.pc(), 0x6739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0055
        gbc.setState(0x48b8, 0x56a9, 0x12a0, 0xfa73, 0xf663, 0x95f6, 0x0, 0x0);
        gbc.writeMem(0x48b8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x56a9);
        EXPECT(gbc.pc(), 0x48ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0056
        gbc.setState(0x174b, 0x67c1, 0x1b0, 0x16b5, 0x4da5, 0xe739, 0x0, 0x0);
        gbc.writeMem(0x174b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x67c1);
        EXPECT(gbc.pc(), 0x174d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0057
        gbc.setState(0xa20c, 0x217c, 0xd1c0, 0xd85f, 0x6e2e, 0xb636, 0x0, 0x0);
        gbc.writeMem(0xa20c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x217c);
        EXPECT(gbc.pc(), 0xa20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20c), 0xcb);
        EXPECT(gbc.readMem(0xa20d), 0xb7);
        // CB B7 0058
        gbc.setState(0x361a, 0xd120, 0x5840, 0xeb2e, 0xdaae, 0x6279, 0x0, 0x1);
        gbc.writeMem(0x361a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd120);
        EXPECT(gbc.pc(), 0x361c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0059
        gbc.setState(0xc274, 0x6a0c, 0x2850, 0x8c91, 0x913d, 0x29a5, 0x0, 0x1);
        gbc.writeMem(0xc274, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6a0c);
        EXPECT(gbc.pc(), 0xc276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc274), 0xcb);
        EXPECT(gbc.readMem(0xc275), 0xb7);
        // CB B7 005A
        gbc.setState(0x598, 0xd365, 0x36d0, 0x308e, 0xc53d, 0x4243, 0x0, 0x0);
        gbc.writeMem(0x598, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd365);
        EXPECT(gbc.pc(), 0x59a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 005B
        gbc.setState(0x1ca1, 0x7a7, 0xc00, 0x8a7e, 0x69d4, 0xeca3, 0x1, 0x1);
        gbc.writeMem(0x1ca1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7a7);
        EXPECT(gbc.pc(), 0x1ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 005C
        gbc.setState(0xbe85, 0x4f05, 0x590, 0xe284, 0xf1a8, 0x217e, 0x1, 0x1);
        gbc.writeMem(0xbe85, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4f05);
        EXPECT(gbc.pc(), 0xbe87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe85), 0xcb);
        EXPECT(gbc.readMem(0xbe86), 0xb7);
        // CB B7 005D
        gbc.setState(0x8640, 0xec5a, 0x8320, 0x26aa, 0x1f38, 0xac54, 0x1, 0x1);
        gbc.writeMem(0x8640, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xec5a);
        EXPECT(gbc.pc(), 0x8642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8640), 0xcb);
        EXPECT(gbc.readMem(0x8641), 0xb7);
        // CB B7 005E
        gbc.setState(0xa2a8, 0x6e5e, 0x9740, 0xfba3, 0x496, 0xeeba, 0x1, 0x0);
        gbc.writeMem(0xa2a8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6e5e);
        EXPECT(gbc.pc(), 0xa2aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a8), 0xcb);
        EXPECT(gbc.readMem(0xa2a9), 0xb7);
        // CB B7 005F
        gbc.setState(0xab38, 0x7274, 0x6610, 0xc0, 0xffac, 0x9b00, 0x1, 0x0);
        gbc.writeMem(0xab38, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7274);
        EXPECT(gbc.pc(), 0xab3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab38), 0xcb);
        EXPECT(gbc.readMem(0xab39), 0xb7);
        // CB B7 0060
        gbc.setState(0x5d65, 0x9ef5, 0x1d70, 0xb029, 0xdd1e, 0x7dbf, 0x1, 0x0);
        gbc.writeMem(0x5d65, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9ef5);
        EXPECT(gbc.pc(), 0x5d67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0061
        gbc.setState(0x11ab, 0xa203, 0xf060, 0xda34, 0xa347, 0x22cb, 0x0, 0x0);
        gbc.writeMem(0x11ab, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa203);
        EXPECT(gbc.pc(), 0x11ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0062
        gbc.setState(0x945e, 0x37f3, 0xf6d0, 0x8018, 0x2340, 0xc4fc, 0x0, 0x0);
        gbc.writeMem(0x945e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x37f3);
        EXPECT(gbc.pc(), 0x9460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945e), 0xcb);
        EXPECT(gbc.readMem(0x945f), 0xb7);
        // CB B7 0063
        gbc.setState(0x4ef3, 0xb1b2, 0x6940, 0xe2bb, 0x691b, 0x16a8, 0x1, 0x1);
        gbc.writeMem(0x4ef3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb1b2);
        EXPECT(gbc.pc(), 0x4ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0064
        gbc.setState(0x68b0, 0x19ed, 0xa490, 0x871d, 0x26f7, 0x6714, 0x0, 0x1);
        gbc.writeMem(0x68b0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x19ed);
        EXPECT(gbc.pc(), 0x68b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0065
        gbc.setState(0x1e67, 0x1e92, 0x9fa0, 0xdf93, 0xa997, 0x695f, 0x0, 0x0);
        gbc.writeMem(0x1e67, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1e92);
        EXPECT(gbc.pc(), 0x1e69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0066
        gbc.setState(0x183a, 0xeebb, 0x93d0, 0x3677, 0x84e9, 0x3c83, 0x0, 0x0);
        gbc.writeMem(0x183a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeebb);
        EXPECT(gbc.pc(), 0x183c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0067
        gbc.setState(0xa8f1, 0x490, 0xb320, 0x41f8, 0x1099, 0x29cc, 0x0, 0x0);
        gbc.writeMem(0xa8f1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x490);
        EXPECT(gbc.pc(), 0xa8f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f1), 0xcb);
        EXPECT(gbc.readMem(0xa8f2), 0xb7);
        // CB B7 0068
        gbc.setState(0x3fd6, 0xe3d9, 0x4510, 0x6619, 0x1923, 0xb8c8, 0x1, 0x0);
        gbc.writeMem(0x3fd6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe3d9);
        EXPECT(gbc.pc(), 0x3fd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0069
        gbc.setState(0x1257, 0x4d36, 0x2940, 0xc9ba, 0x181, 0xde43, 0x0, 0x0);
        gbc.writeMem(0x1257, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4d36);
        EXPECT(gbc.pc(), 0x1259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 006A
        gbc.setState(0x285, 0x3526, 0xc580, 0x7215, 0x2ccf, 0x24ab, 0x0, 0x1);
        gbc.writeMem(0x285, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3526);
        EXPECT(gbc.pc(), 0x287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 006B
        gbc.setState(0x6cd9, 0xa43c, 0x4f60, 0x3f49, 0x9ef2, 0x4b7d, 0x0, 0x1);
        gbc.writeMem(0x6cd9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa43c);
        EXPECT(gbc.pc(), 0x6cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 006C
        gbc.setState(0x69e8, 0x58d8, 0x6900, 0x1c2e, 0x1f89, 0xba38, 0x0, 0x1);
        gbc.writeMem(0x69e8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x58d8);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 006D
        gbc.setState(0x9eae, 0xbef8, 0xd8c0, 0x3e6d, 0x5b8a, 0x91, 0x1, 0x1);
        gbc.writeMem(0x9eae, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbef8);
        EXPECT(gbc.pc(), 0x9eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eae), 0xcb);
        EXPECT(gbc.readMem(0x9eaf), 0xb7);
        // CB B7 006E
        gbc.setState(0x9f47, 0x88d7, 0x5af0, 0x68a4, 0x5861, 0xd002, 0x0, 0x1);
        gbc.writeMem(0x9f47, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x88d7);
        EXPECT(gbc.pc(), 0x9f49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f47), 0xcb);
        EXPECT(gbc.readMem(0x9f48), 0xb7);
        // CB B7 006F
        gbc.setState(0x24ae, 0x18d5, 0x3870, 0x7c6e, 0xa71a, 0xea3d, 0x0, 0x1);
        gbc.writeMem(0x24ae, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x18d5);
        EXPECT(gbc.pc(), 0x24b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0070
        gbc.setState(0xdcc1, 0x4235, 0x1c70, 0x1d28, 0x2841, 0x25e, 0x0, 0x1);
        gbc.writeMem(0xdcc1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4235);
        EXPECT(gbc.pc(), 0xdcc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcc1), 0xcb);
        EXPECT(gbc.readMem(0xdcc2), 0xb7);
        // CB B7 0071
        gbc.setState(0xc5c4, 0x1a19, 0x6aa0, 0x865d, 0xd7b1, 0x9e9b, 0x1, 0x0);
        gbc.writeMem(0xc5c4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1a19);
        EXPECT(gbc.pc(), 0xc5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c4), 0xcb);
        EXPECT(gbc.readMem(0xc5c5), 0xb7);
        // CB B7 0072
        gbc.setState(0xad6b, 0xbe9d, 0x89f0, 0x9076, 0x207b, 0x7b58, 0x0, 0x1);
        gbc.writeMem(0xad6b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbe9d);
        EXPECT(gbc.pc(), 0xad6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad6b), 0xcb);
        EXPECT(gbc.readMem(0xad6c), 0xb7);
        // CB B7 0073
        gbc.setState(0x9470, 0x77b, 0x2780, 0x1e56, 0xed35, 0xab60, 0x0, 0x0);
        gbc.writeMem(0x9470, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x77b);
        EXPECT(gbc.pc(), 0x9472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9470), 0xcb);
        EXPECT(gbc.readMem(0x9471), 0xb7);
        // CB B7 0074
        gbc.setState(0xc5d, 0xa9b3, 0x8300, 0x2fb6, 0xb63c, 0xffec, 0x1, 0x0);
        gbc.writeMem(0xc5d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa9b3);
        EXPECT(gbc.pc(), 0xc5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0075
        gbc.setState(0x1082, 0x6f47, 0x81e0, 0xec8c, 0x754b, 0x289f, 0x0, 0x0);
        gbc.writeMem(0x1082, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6f47);
        EXPECT(gbc.pc(), 0x1084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0076
        gbc.setState(0x2ea3, 0x8db, 0xf170, 0x26d3, 0x900f, 0xc86f, 0x0, 0x0);
        gbc.writeMem(0x2ea3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8db);
        EXPECT(gbc.pc(), 0x2ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0077
        gbc.setState(0xbc31, 0x92f3, 0x7c60, 0xef69, 0xf5b6, 0x9a4d, 0x0, 0x0);
        gbc.writeMem(0xbc31, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x92f3);
        EXPECT(gbc.pc(), 0xbc33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc31), 0xcb);
        EXPECT(gbc.readMem(0xbc32), 0xb7);
        // CB B7 0078
        gbc.setState(0x1538, 0x9cf, 0xccb0, 0x88ad, 0x4752, 0x3fbe, 0x1, 0x0);
        gbc.writeMem(0x1538, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9cf);
        EXPECT(gbc.pc(), 0x153a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0079
        gbc.setState(0xaf72, 0x5bd5, 0x84d0, 0x263, 0xe748, 0x1b73, 0x0, 0x1);
        gbc.writeMem(0xaf72, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5bd5);
        EXPECT(gbc.pc(), 0xaf74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf72), 0xcb);
        EXPECT(gbc.readMem(0xaf73), 0xb7);
        // CB B7 007A
        gbc.setState(0x194d, 0xe14b, 0xed80, 0x60e, 0x4156, 0x2ad1, 0x1, 0x1);
        gbc.writeMem(0x194d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe14b);
        EXPECT(gbc.pc(), 0x194f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 007B
        gbc.setState(0x965b, 0x8ded, 0x6ab0, 0xf677, 0xf69, 0x967, 0x0, 0x0);
        gbc.writeMem(0x965b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8ded);
        EXPECT(gbc.pc(), 0x965d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965b), 0xcb);
        EXPECT(gbc.readMem(0x965c), 0xb7);
        // CB B7 007C
        gbc.setState(0x38ed, 0xaaad, 0x58f0, 0x7cfa, 0x9915, 0x3371, 0x1, 0x1);
        gbc.writeMem(0x38ed, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xaaad);
        EXPECT(gbc.pc(), 0x38ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 007D
        gbc.setState(0xbe8f, 0xcf6c, 0x2630, 0x1148, 0x8eac, 0xef2, 0x0, 0x0);
        gbc.writeMem(0xbe8f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0xbe91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe8f), 0xcb);
        EXPECT(gbc.readMem(0xbe90), 0xb7);
        // CB B7 007E
        gbc.setState(0x69a3, 0x653b, 0xd1d0, 0xdeee, 0x9105, 0xd122, 0x0, 0x0);
        gbc.writeMem(0x69a3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x653b);
        EXPECT(gbc.pc(), 0x69a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 007F
        gbc.setState(0xaac6, 0x2c2, 0xcc90, 0xf86a, 0x1e03, 0x8de7, 0x1, 0x1);
        gbc.writeMem(0xaac6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2c2);
        EXPECT(gbc.pc(), 0xaac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac6), 0xcb);
        EXPECT(gbc.readMem(0xaac7), 0xb7);
        // CB B7 0080
        gbc.setState(0xa0d6, 0x78b2, 0xea0, 0x6df1, 0xafea, 0x7f10, 0x0, 0x0);
        gbc.writeMem(0xa0d6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x78b2);
        EXPECT(gbc.pc(), 0xa0d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d6), 0xcb);
        EXPECT(gbc.readMem(0xa0d7), 0xb7);
        // CB B7 0081
        gbc.setState(0xd6af, 0x3ba9, 0x3680, 0x413b, 0x7cd4, 0xfb94, 0x1, 0x1);
        gbc.writeMem(0xd6af, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3ba9);
        EXPECT(gbc.pc(), 0xd6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6af), 0xcb);
        EXPECT(gbc.readMem(0xd6b0), 0xb7);
        // CB B7 0082
        gbc.setState(0xe718, 0x59f4, 0x16a0, 0x7a1c, 0x67f0, 0xd637, 0x1, 0x1);
        gbc.writeMem(0xe718, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x59f4);
        EXPECT(gbc.pc(), 0xe71a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe718), 0xcb);
        EXPECT(gbc.readMem(0xe719), 0xb7);
        // CB B7 0083
        gbc.setState(0x19a9, 0x5a49, 0xaa0, 0x9f5a, 0xd872, 0xb9ee, 0x0, 0x1);
        gbc.writeMem(0x19a9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5a49);
        EXPECT(gbc.pc(), 0x19ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0085
        gbc.setState(0x3f39, 0xf632, 0x6310, 0x4fda, 0xd05d, 0x32d7, 0x1, 0x1);
        gbc.writeMem(0x3f39, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf632);
        EXPECT(gbc.pc(), 0x3f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0086
        gbc.setState(0x7f3b, 0xaa1d, 0xbd00, 0x927, 0x6b30, 0x3f4e, 0x0, 0x1);
        gbc.writeMem(0x7f3b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xaa1d);
        EXPECT(gbc.pc(), 0x7f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0087
        gbc.setState(0xdf17, 0x456f, 0x7550, 0x291c, 0x26b6, 0xab6d, 0x1, 0x0);
        gbc.writeMem(0xdf17, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x456f);
        EXPECT(gbc.pc(), 0xdf19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf17), 0xcb);
        EXPECT(gbc.readMem(0xdf18), 0xb7);
        // CB B7 0088
        gbc.setState(0xe4c6, 0xd724, 0x6be0, 0xd763, 0x7d09, 0x6e7, 0x1, 0x0);
        gbc.writeMem(0xe4c6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd724);
        EXPECT(gbc.pc(), 0xe4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c6), 0xcb);
        EXPECT(gbc.readMem(0xe4c7), 0xb7);
        // CB B7 0089
        gbc.setState(0x2a16, 0xd051, 0x3780, 0x4964, 0x5fe4, 0x7f4c, 0x1, 0x1);
        gbc.writeMem(0x2a16, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd051);
        EXPECT(gbc.pc(), 0x2a18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 008A
        gbc.setState(0x3aca, 0xcf13, 0x4a50, 0x340e, 0xfc00, 0xfd5e, 0x1, 0x0);
        gbc.writeMem(0x3aca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcf13);
        EXPECT(gbc.pc(), 0x3acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 008B
        gbc.setState(0xea02, 0x2b03, 0x93a0, 0xe563, 0x19a0, 0x71da, 0x1, 0x1);
        gbc.writeMem(0xea02, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2b03);
        EXPECT(gbc.pc(), 0xea04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea02), 0xcb);
        EXPECT(gbc.readMem(0xea03), 0xb7);
        // CB B7 008C
        gbc.setState(0x57c0, 0x95bd, 0x7c40, 0x7af9, 0x3f84, 0xdf09, 0x0, 0x0);
        gbc.writeMem(0x57c0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x95bd);
        EXPECT(gbc.pc(), 0x57c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 008D
        gbc.setState(0x8000, 0x6613, 0x8540, 0xc079, 0x2cba, 0xf339, 0x1, 0x1);
        gbc.writeMem(0x8000, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6613);
        EXPECT(gbc.pc(), 0x8002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8000), 0xcb);
        EXPECT(gbc.readMem(0x8001), 0xb7);
        // CB B7 008E
        gbc.setState(0x3619, 0x196f, 0x69c0, 0x20d4, 0xe594, 0x4b99, 0x0, 0x1);
        gbc.writeMem(0x3619, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x196f);
        EXPECT(gbc.pc(), 0x361b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 008F
        gbc.setState(0x5e0e, 0xdf06, 0x8b70, 0x9d47, 0xfcc1, 0xba88, 0x0, 0x1);
        gbc.writeMem(0x5e0e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xdf06);
        EXPECT(gbc.pc(), 0x5e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0090
        gbc.setState(0xeb1b, 0x8bfc, 0x1270, 0x2a29, 0x2529, 0x5839, 0x0, 0x0);
        gbc.writeMem(0xeb1b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8bfc);
        EXPECT(gbc.pc(), 0xeb1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb1b), 0xcb);
        EXPECT(gbc.readMem(0xeb1c), 0xb7);
        // CB B7 0091
        gbc.setState(0xe50e, 0x3539, 0x8f10, 0x9500, 0x391b, 0x7e0d, 0x1, 0x1);
        gbc.writeMem(0xe50e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3539);
        EXPECT(gbc.pc(), 0xe510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe50e), 0xcb);
        EXPECT(gbc.readMem(0xe50f), 0xb7);
        // CB B7 0092
        gbc.setState(0x6b0e, 0xfbbf, 0x1b70, 0xc03f, 0x36a, 0x7799, 0x1, 0x1);
        gbc.writeMem(0x6b0e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfbbf);
        EXPECT(gbc.pc(), 0x6b10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0093
        gbc.setState(0x7376, 0x7b7a, 0xffc0, 0xb806, 0x3189, 0xd231, 0x0, 0x0);
        gbc.writeMem(0x7376, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7b7a);
        EXPECT(gbc.pc(), 0x7378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0094
        gbc.setState(0x182f, 0x58e6, 0x7640, 0xd8e2, 0x86dd, 0x8141, 0x1, 0x0);
        gbc.writeMem(0x182f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x58e6);
        EXPECT(gbc.pc(), 0x1831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0095
        gbc.setState(0x5331, 0x2424, 0xb900, 0xa69f, 0x1dcf, 0x167f, 0x0, 0x1);
        gbc.writeMem(0x5331, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2424);
        EXPECT(gbc.pc(), 0x5333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0096
        gbc.setState(0xa2d6, 0xdc4d, 0xd230, 0x658a, 0xc21b, 0x4075, 0x0, 0x1);
        gbc.writeMem(0xa2d6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdc4d);
        EXPECT(gbc.pc(), 0xa2d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2d6), 0xcb);
        EXPECT(gbc.readMem(0xa2d7), 0xb7);
        // CB B7 0097
        gbc.setState(0xc4ad, 0xecce, 0xa750, 0x7cd, 0x6e90, 0x41c9, 0x0, 0x0);
        gbc.writeMem(0xc4ad, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xecce);
        EXPECT(gbc.pc(), 0xc4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ad), 0xcb);
        EXPECT(gbc.readMem(0xc4ae), 0xb7);
        // CB B7 0098
        gbc.setState(0x68cb, 0x32e5, 0x12c0, 0x6507, 0x82ee, 0xb82d, 0x0, 0x1);
        gbc.writeMem(0x68cb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x32e5);
        EXPECT(gbc.pc(), 0x68cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0099
        gbc.setState(0x8f29, 0x32f6, 0x2850, 0x4333, 0xe57f, 0x2ead, 0x1, 0x1);
        gbc.writeMem(0x8f29, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x32f6);
        EXPECT(gbc.pc(), 0x8f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f29), 0xcb);
        EXPECT(gbc.readMem(0x8f2a), 0xb7);
        // CB B7 009A
        gbc.setState(0xe91e, 0x4e64, 0x6bd0, 0xf0a3, 0x1aef, 0x560c, 0x0, 0x0);
        gbc.writeMem(0xe91e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4e64);
        EXPECT(gbc.pc(), 0xe920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91e), 0xcb);
        EXPECT(gbc.readMem(0xe91f), 0xb7);
        // CB B7 009B
        gbc.setState(0x2a90, 0x415c, 0x8d0, 0xbf96, 0x7776, 0xed30, 0x1, 0x0);
        gbc.writeMem(0x2a90, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x415c);
        EXPECT(gbc.pc(), 0x2a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 009C
        gbc.setState(0x1f0f, 0xa4fd, 0xbc90, 0x4639, 0x4dc, 0x9933, 0x0, 0x0);
        gbc.writeMem(0x1f0f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa4fd);
        EXPECT(gbc.pc(), 0x1f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 009D
        gbc.setState(0x9d0, 0x53b8, 0x7190, 0xa5da, 0x105b, 0xf26a, 0x1, 0x1);
        gbc.writeMem(0x9d0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x53b8);
        EXPECT(gbc.pc(), 0x9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 009E
        gbc.setState(0xb76c, 0x6630, 0xe960, 0xad7d, 0x1df2, 0x1e0, 0x1, 0x1);
        gbc.writeMem(0xb76c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x6630);
        EXPECT(gbc.pc(), 0xb76e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb76c), 0xcb);
        EXPECT(gbc.readMem(0xb76d), 0xb7);
        // CB B7 009F
        gbc.setState(0x92bc, 0x6f7c, 0x6180, 0x8741, 0xb022, 0xd3c7, 0x0, 0x1);
        gbc.writeMem(0x92bc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6f7c);
        EXPECT(gbc.pc(), 0x92be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92bc), 0xcb);
        EXPECT(gbc.readMem(0x92bd), 0xb7);
        // CB B7 00A0
        gbc.setState(0x8747, 0xad94, 0x7cf0, 0x99af, 0xee65, 0x54bc, 0x1, 0x0);
        gbc.writeMem(0x8747, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xad94);
        EXPECT(gbc.pc(), 0x8749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8747), 0xcb);
        EXPECT(gbc.readMem(0x8748), 0xb7);
        // CB B7 00A1
        gbc.setState(0x3bcc, 0x299c, 0xfdd0, 0x5db1, 0xef0b, 0x9fff, 0x1, 0x1);
        gbc.writeMem(0x3bcc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x299c);
        EXPECT(gbc.pc(), 0x3bce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00A2
        gbc.setState(0x32ca, 0xc7d0, 0x6940, 0x592d, 0xfc66, 0x82a6, 0x1, 0x0);
        gbc.writeMem(0x32ca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc7d0);
        EXPECT(gbc.pc(), 0x32cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00A3
        gbc.setState(0xb5c9, 0x70b2, 0xf40, 0x9469, 0xf88a, 0x2d0f, 0x0, 0x0);
        gbc.writeMem(0xb5c9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x70b2);
        EXPECT(gbc.pc(), 0xb5cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c9), 0xcb);
        EXPECT(gbc.readMem(0xb5ca), 0xb7);
        // CB B7 00A4
        gbc.setState(0x4207, 0x1d6f, 0x4970, 0xa542, 0xc89e, 0xe02d, 0x1, 0x0);
        gbc.writeMem(0x4207, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1d6f);
        EXPECT(gbc.pc(), 0x4209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00A5
        gbc.setState(0xe8f4, 0xa043, 0xe7a0, 0x570e, 0x66f6, 0xacf2, 0x0, 0x1);
        gbc.writeMem(0xe8f4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa043);
        EXPECT(gbc.pc(), 0xe8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f4), 0xcb);
        EXPECT(gbc.readMem(0xe8f5), 0xb7);
        // CB B7 00A7
        gbc.setState(0x57, 0x16f1, 0x4200, 0x2dff, 0xe62b, 0x2e31, 0x1, 0x0);
        gbc.writeMem(0x57, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x16f1);
        EXPECT(gbc.pc(), 0x59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00A8
        gbc.setState(0xd82a, 0xb300, 0x32a0, 0xa71b, 0xf66b, 0x4f6f, 0x1, 0x0);
        gbc.writeMem(0xd82a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb300);
        EXPECT(gbc.pc(), 0xd82c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd82a), 0xcb);
        EXPECT(gbc.readMem(0xd82b), 0xb7);
        // CB B7 00A9
        gbc.setState(0x731, 0x3a74, 0x47c0, 0xe47e, 0x684e, 0xfa0a, 0x0, 0x0);
        gbc.writeMem(0x731, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3a74);
        EXPECT(gbc.pc(), 0x733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00AA
        gbc.setState(0xca45, 0xef, 0xaf00, 0x8695, 0x6501, 0x313e, 0x1, 0x1);
        gbc.writeMem(0xca45, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xef);
        EXPECT(gbc.pc(), 0xca47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca45), 0xcb);
        EXPECT(gbc.readMem(0xca46), 0xb7);
        // CB B7 00AB
        gbc.setState(0x719, 0x84a7, 0xd230, 0xe1ff, 0x274a, 0xd754, 0x1, 0x1);
        gbc.writeMem(0x719, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x84a7);
        EXPECT(gbc.pc(), 0x71b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00AC
        gbc.setState(0xe388, 0x18b4, 0xadd0, 0x3bbe, 0x9f5e, 0xd6fa, 0x1, 0x0);
        gbc.writeMem(0xe388, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x18b4);
        EXPECT(gbc.pc(), 0xe38a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe388), 0xcb);
        EXPECT(gbc.readMem(0xe389), 0xb7);
        // CB B7 00AD
        gbc.setState(0xb784, 0x6d9d, 0xb230, 0xd677, 0x586f, 0x6acf, 0x0, 0x0);
        gbc.writeMem(0xb784, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6d9d);
        EXPECT(gbc.pc(), 0xb786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb784), 0xcb);
        EXPECT(gbc.readMem(0xb785), 0xb7);
        // CB B7 00AE
        gbc.setState(0xe81a, 0xafe8, 0xad50, 0x792a, 0x4f4d, 0x6058, 0x1, 0x0);
        gbc.writeMem(0xe81a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xafe8);
        EXPECT(gbc.pc(), 0xe81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe81a), 0xcb);
        EXPECT(gbc.readMem(0xe81b), 0xb7);
        // CB B7 00AF
        gbc.setState(0x9bdc, 0xa2bb, 0xdd50, 0x4372, 0x6f6, 0xaa52, 0x0, 0x0);
        gbc.writeMem(0x9bdc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa2bb);
        EXPECT(gbc.pc(), 0x9bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bdc), 0xcb);
        EXPECT(gbc.readMem(0x9bdd), 0xb7);
        // CB B7 00B0
        gbc.setState(0xeac9, 0x23d2, 0x5d90, 0x75be, 0x41d, 0xd855, 0x1, 0x1);
        gbc.writeMem(0xeac9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x23d2);
        EXPECT(gbc.pc(), 0xeacb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac9), 0xcb);
        EXPECT(gbc.readMem(0xeaca), 0xb7);
        // CB B7 00B1
        gbc.setState(0xa14, 0x7601, 0xdc50, 0x8c4a, 0x8dac, 0x287a, 0x1, 0x1);
        gbc.writeMem(0xa14, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7601);
        EXPECT(gbc.pc(), 0xa16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00B2
        gbc.setState(0x5aac, 0x6fc0, 0x3090, 0xef17, 0x51e6, 0x1268, 0x1, 0x0);
        gbc.writeMem(0x5aac, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6fc0);
        EXPECT(gbc.pc(), 0x5aae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00B3
        gbc.setState(0xd7e3, 0xa6bb, 0xebf0, 0x620b, 0x4fb1, 0x5ef7, 0x0, 0x1);
        gbc.writeMem(0xd7e3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa6bb);
        EXPECT(gbc.pc(), 0xd7e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7e3), 0xcb);
        EXPECT(gbc.readMem(0xd7e4), 0xb7);
        // CB B7 00B4
        gbc.setState(0xbe16, 0xef44, 0x860, 0x95d9, 0xfabb, 0x5eff, 0x1, 0x0);
        gbc.writeMem(0xbe16, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xef44);
        EXPECT(gbc.pc(), 0xbe18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe16), 0xcb);
        EXPECT(gbc.readMem(0xbe17), 0xb7);
        // CB B7 00B6
        gbc.setState(0x6ffc, 0xe9db, 0xffe0, 0x8672, 0x67a, 0x6f19, 0x0, 0x1);
        gbc.writeMem(0x6ffc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe9db);
        EXPECT(gbc.pc(), 0x6ffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00B7
        gbc.setState(0xef5e, 0xb0bf, 0xbd00, 0x8193, 0x10d3, 0x25f2, 0x0, 0x1);
        gbc.writeMem(0xef5e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb0bf);
        EXPECT(gbc.pc(), 0xef60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5e), 0xcb);
        EXPECT(gbc.readMem(0xef5f), 0xb7);
        // CB B7 00B8
        gbc.setState(0x43c7, 0x979b, 0xe7c0, 0xbacd, 0x805a, 0x19a, 0x1, 0x1);
        gbc.writeMem(0x43c7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x979b);
        EXPECT(gbc.pc(), 0x43c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00B9
        gbc.setState(0xb875, 0x85a7, 0x3210, 0xa979, 0xce87, 0x4436, 0x1, 0x1);
        gbc.writeMem(0xb875, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x85a7);
        EXPECT(gbc.pc(), 0xb877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb875), 0xcb);
        EXPECT(gbc.readMem(0xb876), 0xb7);
        // CB B7 00BA
        gbc.setState(0xc058, 0x3cd6, 0xc6a0, 0x1b12, 0xf545, 0x66ac, 0x1, 0x0);
        gbc.writeMem(0xc058, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3cd6);
        EXPECT(gbc.pc(), 0xc05a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc058), 0xcb);
        EXPECT(gbc.readMem(0xc059), 0xb7);
        // CB B7 00BB
        gbc.setState(0xc27e, 0xb207, 0x5590, 0x9e0, 0x8dcf, 0xf20a, 0x0, 0x0);
        gbc.writeMem(0xc27e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb207);
        EXPECT(gbc.pc(), 0xc280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc27e), 0xcb);
        EXPECT(gbc.readMem(0xc27f), 0xb7);
        // CB B7 00BC
        gbc.setState(0x37eb, 0xdd9c, 0x5d30, 0xf92f, 0x49ad, 0x7e38, 0x1, 0x0);
        gbc.writeMem(0x37eb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdd9c);
        EXPECT(gbc.pc(), 0x37ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00BD
        gbc.setState(0x9c3f, 0xac91, 0x3fa0, 0x70e4, 0x2c3e, 0x6625, 0x0, 0x0);
        gbc.writeMem(0x9c3f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xac91);
        EXPECT(gbc.pc(), 0x9c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c3f), 0xcb);
        EXPECT(gbc.readMem(0x9c40), 0xb7);
        // CB B7 00BE
        gbc.setState(0x779b, 0x8718, 0x5320, 0xacf, 0xfad2, 0xa528, 0x0, 0x1);
        gbc.writeMem(0x779b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8718);
        EXPECT(gbc.pc(), 0x779d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00BF
        gbc.setState(0xe606, 0xdc41, 0xcdd0, 0x4fe2, 0x43f7, 0xa8d9, 0x1, 0x0);
        gbc.writeMem(0xe606, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xdc41);
        EXPECT(gbc.pc(), 0xe608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe606), 0xcb);
        EXPECT(gbc.readMem(0xe607), 0xb7);
        // CB B7 00C0
        gbc.setState(0x6cf, 0x3a1f, 0x30c0, 0x1586, 0x80e2, 0xe28f, 0x1, 0x0);
        gbc.writeMem(0x6cf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3a1f);
        EXPECT(gbc.pc(), 0x6d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00C1
        gbc.setState(0x54f0, 0xfeb3, 0xb5d0, 0x807f, 0xfa6, 0xba0b, 0x1, 0x1);
        gbc.writeMem(0x54f0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfeb3);
        EXPECT(gbc.pc(), 0x54f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00C2
        gbc.setState(0xba75, 0xc4b8, 0xa30, 0xc6d7, 0xb1ff, 0x6a26, 0x1, 0x0);
        gbc.writeMem(0xba75, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc4b8);
        EXPECT(gbc.pc(), 0xba77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba75), 0xcb);
        EXPECT(gbc.readMem(0xba76), 0xb7);
        // CB B7 00C3
        gbc.setState(0xa629, 0x75ee, 0xacc0, 0xea8c, 0x41f0, 0x9243, 0x1, 0x0);
        gbc.writeMem(0xa629, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x75ee);
        EXPECT(gbc.pc(), 0xa62b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa629), 0xcb);
        EXPECT(gbc.readMem(0xa62a), 0xb7);
        // CB B7 00C4
        gbc.setState(0x3d1d, 0xdb52, 0x2a10, 0xb64d, 0xdf5e, 0x7264, 0x0, 0x1);
        gbc.writeMem(0x3d1d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdb52);
        EXPECT(gbc.pc(), 0x3d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00C5
        gbc.setState(0x2cf2, 0x1578, 0xf30, 0x5877, 0xa495, 0x4a2, 0x0, 0x0);
        gbc.writeMem(0x2cf2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1578);
        EXPECT(gbc.pc(), 0x2cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00C6
        gbc.setState(0xc897, 0x422, 0xc0f0, 0xbd9f, 0x34f, 0x79f7, 0x0, 0x1);
        gbc.writeMem(0xc897, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x422);
        EXPECT(gbc.pc(), 0xc899);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc897), 0xcb);
        EXPECT(gbc.readMem(0xc898), 0xb7);
        // CB B7 00C7
        gbc.setState(0xe0f9, 0xdfb7, 0x9d70, 0x527, 0xb022, 0x8a4a, 0x0, 0x1);
        gbc.writeMem(0xe0f9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdfb7);
        EXPECT(gbc.pc(), 0xe0fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f9), 0xcb);
        EXPECT(gbc.readMem(0xe0fa), 0xb7);
        // CB B7 00C9
        gbc.setState(0xedc5, 0x6745, 0x1b80, 0x6cb6, 0x8d77, 0x7cdd, 0x1, 0x0);
        gbc.writeMem(0xedc5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6745);
        EXPECT(gbc.pc(), 0xedc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc5), 0xcb);
        EXPECT(gbc.readMem(0xedc6), 0xb7);
        // CB B7 00CA
        gbc.setState(0x4ef2, 0xbcce, 0x6da0, 0xb03c, 0x6f6, 0x8a4b, 0x0, 0x0);
        gbc.writeMem(0x4ef2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbcce);
        EXPECT(gbc.pc(), 0x4ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00CB
        gbc.setState(0xeba2, 0x2ae5, 0x5e90, 0xc43d, 0x824a, 0x322, 0x1, 0x0);
        gbc.writeMem(0xeba2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2ae5);
        EXPECT(gbc.pc(), 0xeba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba2), 0xcb);
        EXPECT(gbc.readMem(0xeba3), 0xb7);
        // CB B7 00CC
        gbc.setState(0xc206, 0x85bb, 0x3b0, 0xa779, 0x3181, 0x8e6c, 0x0, 0x1);
        gbc.writeMem(0xc206, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x85bb);
        EXPECT(gbc.pc(), 0xc208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc206), 0xcb);
        EXPECT(gbc.readMem(0xc207), 0xb7);
        // CB B7 00CD
        gbc.setState(0x5d37, 0xfa15, 0xa940, 0x85b0, 0x99f6, 0x68f5, 0x0, 0x0);
        gbc.writeMem(0x5d37, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfa15);
        EXPECT(gbc.pc(), 0x5d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00CE
        gbc.setState(0x361f, 0x8b1a, 0xca70, 0xcdff, 0x2f34, 0x51e8, 0x0, 0x0);
        gbc.writeMem(0x361f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8b1a);
        EXPECT(gbc.pc(), 0x3621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00CF
        gbc.setState(0x62bd, 0xcc8b, 0xb5a0, 0x97f0, 0x232a, 0xf6d4, 0x0, 0x0);
        gbc.writeMem(0x62bd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xcc8b);
        EXPECT(gbc.pc(), 0x62bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00D0
        gbc.setState(0x53ba, 0x963d, 0xb240, 0x618f, 0xf6fa, 0xe468, 0x0, 0x0);
        gbc.writeMem(0x53ba, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x963d);
        EXPECT(gbc.pc(), 0x53bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00D1
        gbc.setState(0x7604, 0xa2a8, 0xa7b0, 0xdbce, 0xb0e7, 0x3279, 0x1, 0x1);
        gbc.writeMem(0x7604, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa2a8);
        EXPECT(gbc.pc(), 0x7606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00D2
        gbc.setState(0x58d3, 0xec69, 0x8210, 0xb82c, 0xc955, 0x1243, 0x1, 0x1);
        gbc.writeMem(0x58d3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xec69);
        EXPECT(gbc.pc(), 0x58d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00D3
        gbc.setState(0x69a7, 0xe8b0, 0x1c0, 0x90db, 0x3740, 0x8259, 0x0, 0x0);
        gbc.writeMem(0x69a7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe8b0);
        EXPECT(gbc.pc(), 0x69a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00D4
        gbc.setState(0x405, 0xe5a1, 0x8ac0, 0xae0, 0xcc11, 0x4e60, 0x0, 0x0);
        gbc.writeMem(0x405, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe5a1);
        EXPECT(gbc.pc(), 0x407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00D5
        gbc.setState(0xdb70, 0x19d2, 0xa580, 0x5c81, 0x17ef, 0x9606, 0x0, 0x0);
        gbc.writeMem(0xdb70, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x19d2);
        EXPECT(gbc.pc(), 0xdb72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb70), 0xcb);
        EXPECT(gbc.readMem(0xdb71), 0xb7);
        // CB B7 00D6
        gbc.setState(0x8f5c, 0x58f0, 0x62b0, 0x55b9, 0xb153, 0x5e31, 0x0, 0x1);
        gbc.writeMem(0x8f5c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x58f0);
        EXPECT(gbc.pc(), 0x8f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5c), 0xcb);
        EXPECT(gbc.readMem(0x8f5d), 0xb7);
        // CB B7 00D8
        gbc.setState(0x5414, 0x364d, 0x3fa0, 0xf7f7, 0x9340, 0x2872, 0x0, 0x0);
        gbc.writeMem(0x5414, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x364d);
        EXPECT(gbc.pc(), 0x5416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00D9
        gbc.setState(0xd9cf, 0x1406, 0x8310, 0xaaa1, 0xd857, 0x6119, 0x1, 0x1);
        gbc.writeMem(0xd9cf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1406);
        EXPECT(gbc.pc(), 0xd9d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9cf), 0xcb);
        EXPECT(gbc.readMem(0xd9d0), 0xb7);
        // CB B7 00DA
        gbc.setState(0x4bc2, 0x785c, 0x4e60, 0x50, 0xae08, 0x66c0, 0x0, 0x0);
        gbc.writeMem(0x4bc2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x785c);
        EXPECT(gbc.pc(), 0x4bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00DB
        gbc.setState(0x9c90, 0xad0b, 0xea90, 0xffc8, 0x5a34, 0xe3b6, 0x1, 0x1);
        gbc.writeMem(0x9c90, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xad0b);
        EXPECT(gbc.pc(), 0x9c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c90), 0xcb);
        EXPECT(gbc.readMem(0x9c91), 0xb7);
        // CB B7 00DC
        gbc.setState(0xe838, 0xd255, 0x5770, 0x84e5, 0xb58a, 0xde03, 0x0, 0x0);
        gbc.writeMem(0xe838, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd255);
        EXPECT(gbc.pc(), 0xe83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe838), 0xcb);
        EXPECT(gbc.readMem(0xe839), 0xb7);
        // CB B7 00DD
        gbc.setState(0xc4ed, 0x92f6, 0x2d90, 0x7271, 0xce87, 0x8bee, 0x1, 0x1);
        gbc.writeMem(0xc4ed, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x92f6);
        EXPECT(gbc.pc(), 0xc4ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ed), 0xcb);
        EXPECT(gbc.readMem(0xc4ee), 0xb7);
        // CB B7 00DE
        gbc.setState(0xa8a1, 0x8bde, 0xca30, 0x4ca3, 0x6fc7, 0x77dd, 0x0, 0x0);
        gbc.writeMem(0xa8a1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8bde);
        EXPECT(gbc.pc(), 0xa8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a1), 0xcb);
        EXPECT(gbc.readMem(0xa8a2), 0xb7);
        // CB B7 00DF
        gbc.setState(0x4800, 0x7b3a, 0x97d0, 0xe7bb, 0x31af, 0x8cd6, 0x0, 0x0);
        gbc.writeMem(0x4800, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7b3a);
        EXPECT(gbc.pc(), 0x4802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00E0
        gbc.setState(0xbdd6, 0x94fb, 0x7220, 0x2b4f, 0x2c76, 0xd604, 0x0, 0x1);
        gbc.writeMem(0xbdd6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x94fb);
        EXPECT(gbc.pc(), 0xbdd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd6), 0xcb);
        EXPECT(gbc.readMem(0xbdd7), 0xb7);
        // CB B7 00E1
        gbc.setState(0x6011, 0x6254, 0xb4e0, 0xee90, 0x10b4, 0x7220, 0x1, 0x1);
        gbc.writeMem(0x6011, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6254);
        EXPECT(gbc.pc(), 0x6013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00E2
        gbc.setState(0xd630, 0xdeb6, 0x6240, 0xc220, 0xb2fd, 0xded4, 0x0, 0x1);
        gbc.writeMem(0xd630, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdeb6);
        EXPECT(gbc.pc(), 0xd632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd630), 0xcb);
        EXPECT(gbc.readMem(0xd631), 0xb7);
        // CB B7 00E3
        gbc.setState(0x1591, 0x969, 0xa670, 0x37e5, 0x6377, 0x686e, 0x0, 0x1);
        gbc.writeMem(0x1591, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x969);
        EXPECT(gbc.pc(), 0x1593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00E4
        gbc.setState(0x451b, 0x9aed, 0xdde0, 0xb7be, 0xcc3b, 0x7114, 0x0, 0x0);
        gbc.writeMem(0x451b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9aed);
        EXPECT(gbc.pc(), 0x451d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00E5
        gbc.setState(0xfac, 0xfcd3, 0x3820, 0x32a1, 0x6ba5, 0x8300, 0x1, 0x1);
        gbc.writeMem(0xfac, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfcd3);
        EXPECT(gbc.pc(), 0xfae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00E6
        gbc.setState(0xe911, 0x72ea, 0xd280, 0x58be, 0x9cbd, 0x3091, 0x1, 0x0);
        gbc.writeMem(0xe911, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x72ea);
        EXPECT(gbc.pc(), 0xe913);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe911), 0xcb);
        EXPECT(gbc.readMem(0xe912), 0xb7);
        // CB B7 00E7
        gbc.setState(0xe4de, 0xac36, 0x2ca0, 0x6c70, 0xb9c3, 0xcf63, 0x0, 0x1);
        gbc.writeMem(0xe4de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xac36);
        EXPECT(gbc.pc(), 0xe4e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4de), 0xcb);
        EXPECT(gbc.readMem(0xe4df), 0xb7);
        // CB B7 00E8
        gbc.setState(0x314a, 0x5a06, 0x94c0, 0xd00b, 0x652f, 0x7b06, 0x1, 0x0);
        gbc.writeMem(0x314a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5a06);
        EXPECT(gbc.pc(), 0x314c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00E9
        gbc.setState(0x73b, 0x97cd, 0x9cc0, 0x8193, 0x43d1, 0xdf37, 0x1, 0x0);
        gbc.writeMem(0x73b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x97cd);
        EXPECT(gbc.pc(), 0x73d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00EA
        gbc.setState(0x57b4, 0x9c62, 0x1390, 0xe670, 0xe528, 0x838b, 0x0, 0x1);
        gbc.writeMem(0x57b4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9c62);
        EXPECT(gbc.pc(), 0x57b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00EC
        gbc.setState(0xceb4, 0xf711, 0xeff0, 0x1f90, 0xd13a, 0xf861, 0x0, 0x1);
        gbc.writeMem(0xceb4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf711);
        EXPECT(gbc.pc(), 0xceb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceb4), 0xcb);
        EXPECT(gbc.readMem(0xceb5), 0xb7);
        // CB B7 00ED
        gbc.setState(0xd780, 0xa74c, 0x6060, 0x46dd, 0x83bd, 0x37bf, 0x1, 0x0);
        gbc.writeMem(0xd780, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa74c);
        EXPECT(gbc.pc(), 0xd782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd780), 0xcb);
        EXPECT(gbc.readMem(0xd781), 0xb7);
        // CB B7 00EE
        gbc.setState(0xbfa6, 0x9711, 0xf030, 0xd481, 0x19cb, 0x2349, 0x1, 0x0);
        gbc.writeMem(0xbfa6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9711);
        EXPECT(gbc.pc(), 0xbfa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa6), 0xcb);
        EXPECT(gbc.readMem(0xbfa7), 0xb7);
        // CB B7 00EF
        gbc.setState(0x2218, 0x18c9, 0xfb40, 0x6ba6, 0x3fc7, 0x8e29, 0x1, 0x1);
        gbc.writeMem(0x2218, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x18c9);
        EXPECT(gbc.pc(), 0x221a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00F0
        gbc.setState(0xafc, 0xdd01, 0x2b00, 0x26fb, 0x3fba, 0xfac7, 0x0, 0x0);
        gbc.writeMem(0xafc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xdd01);
        EXPECT(gbc.pc(), 0xafe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00F1
        gbc.setState(0x262f, 0xc0f4, 0xfd80, 0x1637, 0x5706, 0xdb69, 0x1, 0x0);
        gbc.writeMem(0x262f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc0f4);
        EXPECT(gbc.pc(), 0x2631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00F3
        gbc.setState(0x7c21, 0x6310, 0x94f0, 0x7fa3, 0x241c, 0x60b, 0x1, 0x1);
        gbc.writeMem(0x7c21, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6310);
        EXPECT(gbc.pc(), 0x7c23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00F4
        gbc.setState(0x59de, 0x15ca, 0x6bd0, 0x7876, 0xd6d0, 0xa20e, 0x1, 0x0);
        gbc.writeMem(0x59de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x15ca);
        EXPECT(gbc.pc(), 0x59e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00F5
        gbc.setState(0x441a, 0x46c9, 0x2af0, 0x5593, 0x9803, 0x2ea6, 0x0, 0x1);
        gbc.writeMem(0x441a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x46c9);
        EXPECT(gbc.pc(), 0x441c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00F6
        gbc.setState(0x2513, 0x8493, 0x13e0, 0xa3a4, 0xccd, 0xba86, 0x0, 0x0);
        gbc.writeMem(0x2513, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8493);
        EXPECT(gbc.pc(), 0x2515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00F7
        gbc.setState(0x7a34, 0x49f0, 0xe710, 0x9a96, 0xf019, 0x6b9f, 0x1, 0x0);
        gbc.writeMem(0x7a34, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x49f0);
        EXPECT(gbc.pc(), 0x7a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00F8
        gbc.setState(0xc315, 0xa62a, 0x6480, 0xd019, 0xc331, 0x976e, 0x1, 0x0);
        gbc.writeMem(0xc315, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa62a);
        EXPECT(gbc.pc(), 0xc317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc315), 0xcb);
        EXPECT(gbc.readMem(0xc316), 0xb7);
        // CB B7 00F9
        gbc.setState(0xaed5, 0x8dd1, 0x6aa0, 0x1ec, 0x5d0e, 0xc97b, 0x1, 0x1);
        gbc.writeMem(0xaed5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8dd1);
        EXPECT(gbc.pc(), 0xaed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed5), 0xcb);
        EXPECT(gbc.readMem(0xaed6), 0xb7);
        // CB B7 00FA
        gbc.setState(0xa6fa, 0x5349, 0xf470, 0x2068, 0xd387, 0xcaf7, 0x1, 0x1);
        gbc.writeMem(0xa6fa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5349);
        EXPECT(gbc.pc(), 0xa6fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6fa), 0xcb);
        EXPECT(gbc.readMem(0xa6fb), 0xb7);
        // CB B7 00FB
        gbc.setState(0x9c98, 0x1bcb, 0x6d60, 0xd51c, 0x1266, 0xc094, 0x0, 0x1);
        gbc.writeMem(0x9c98, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1bcb);
        EXPECT(gbc.pc(), 0x9c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c98), 0xcb);
        EXPECT(gbc.readMem(0x9c99), 0xb7);
        // CB B7 00FC
        gbc.setState(0xe25b, 0x1b8c, 0x5a20, 0xd456, 0x9f03, 0x3f0a, 0x1, 0x1);
        gbc.writeMem(0xe25b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1b8c);
        EXPECT(gbc.pc(), 0xe25d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe25b), 0xcb);
        EXPECT(gbc.readMem(0xe25c), 0xb7);
        // CB B7 00FD
        gbc.setState(0x1cc3, 0xd960, 0x69e0, 0x2b85, 0x9b05, 0x5ee2, 0x1, 0x0);
        gbc.writeMem(0x1cc3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd960);
        EXPECT(gbc.pc(), 0x1cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 00FE
        gbc.setState(0x2a2a, 0x9dec, 0x7e70, 0xd4d, 0x67a9, 0x4c5e, 0x1, 0x1);
        gbc.writeMem(0x2a2a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9dec);
        EXPECT(gbc.pc(), 0x2a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 00FF
        gbc.setState(0xbc47, 0x8bff, 0xca90, 0xb615, 0x4856, 0x6064, 0x0, 0x1);
        gbc.writeMem(0xbc47, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8bff);
        EXPECT(gbc.pc(), 0xbc49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc47), 0xcb);
        EXPECT(gbc.readMem(0xbc48), 0xb7);
        // CB B7 0100
        gbc.setState(0x12f0, 0xe887, 0xefc0, 0xfe22, 0x593a, 0x918d, 0x0, 0x1);
        gbc.writeMem(0x12f0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe887);
        EXPECT(gbc.pc(), 0x12f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0101
        gbc.setState(0xeb49, 0x2e77, 0x70f0, 0xd51a, 0x4f57, 0x255e, 0x0, 0x1);
        gbc.writeMem(0xeb49, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2e77);
        EXPECT(gbc.pc(), 0xeb4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb49), 0xcb);
        EXPECT(gbc.readMem(0xeb4a), 0xb7);
        // CB B7 0102
        gbc.setState(0x7ffb, 0x938, 0x5e90, 0x8e5e, 0xc9e4, 0xb5f3, 0x1, 0x0);
        gbc.writeMem(0x7ffb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x938);
        EXPECT(gbc.pc(), 0x7ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0103
        gbc.setState(0x5bf4, 0x37f, 0x5d20, 0xe8ec, 0x834b, 0xd7a7, 0x0, 0x1);
        gbc.writeMem(0x5bf4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x37f);
        EXPECT(gbc.pc(), 0x5bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0104
        gbc.setState(0x4977, 0x5030, 0x3fe0, 0x872b, 0xe895, 0xf373, 0x1, 0x0);
        gbc.writeMem(0x4977, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5030);
        EXPECT(gbc.pc(), 0x4979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0105
        gbc.setState(0xb539, 0xbae4, 0xcd40, 0x5797, 0xb6af, 0x1e66, 0x0, 0x0);
        gbc.writeMem(0xb539, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbae4);
        EXPECT(gbc.pc(), 0xb53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb539), 0xcb);
        EXPECT(gbc.readMem(0xb53a), 0xb7);
        // CB B7 0106
        gbc.setState(0x47fc, 0x7995, 0xa220, 0x3edf, 0xe385, 0x1179, 0x1, 0x0);
        gbc.writeMem(0x47fc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7995);
        EXPECT(gbc.pc(), 0x47fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0107
        gbc.setState(0x2f6b, 0xe928, 0x2720, 0x7dab, 0x86d2, 0xd041, 0x0, 0x0);
        gbc.writeMem(0x2f6b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe928);
        EXPECT(gbc.pc(), 0x2f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0108
        gbc.setState(0xcd58, 0x7e28, 0x6b30, 0x393d, 0x15ea, 0x9edb, 0x1, 0x1);
        gbc.writeMem(0xcd58, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7e28);
        EXPECT(gbc.pc(), 0xcd5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd58), 0xcb);
        EXPECT(gbc.readMem(0xcd59), 0xb7);
        // CB B7 0109
        gbc.setState(0xc5e5, 0xdd08, 0xb8a0, 0x720f, 0x72eb, 0xd7a9, 0x1, 0x1);
        gbc.writeMem(0xc5e5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdd08);
        EXPECT(gbc.pc(), 0xc5e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e5), 0xcb);
        EXPECT(gbc.readMem(0xc5e6), 0xb7);
        // CB B7 010A
        gbc.setState(0x89f, 0xe9b5, 0xe1f0, 0x7722, 0x1d74, 0xea0f, 0x1, 0x0);
        gbc.writeMem(0x89f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe9b5);
        EXPECT(gbc.pc(), 0x8a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 010B
        gbc.setState(0x566a, 0x568a, 0x1400, 0xd598, 0xbeed, 0xcd18, 0x0, 0x0);
        gbc.writeMem(0x566a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x568a);
        EXPECT(gbc.pc(), 0x566c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 010C
        gbc.setState(0x53d3, 0x24f5, 0x5e10, 0xb4bf, 0x31c5, 0x91fe, 0x1, 0x0);
        gbc.writeMem(0x53d3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x24f5);
        EXPECT(gbc.pc(), 0x53d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 010D
        gbc.setState(0x980b, 0xd30, 0x1480, 0x46f5, 0xd58c, 0x66cf, 0x1, 0x1);
        gbc.writeMem(0x980b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd30);
        EXPECT(gbc.pc(), 0x980d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980b), 0xcb);
        EXPECT(gbc.readMem(0x980c), 0xb7);
        // CB B7 010E
        gbc.setState(0x33d0, 0xe85f, 0xb170, 0x322c, 0x92c8, 0x8fe2, 0x0, 0x1);
        gbc.writeMem(0x33d0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe85f);
        EXPECT(gbc.pc(), 0x33d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 010F
        gbc.setState(0xe8cc, 0x332, 0xb5d0, 0xb83, 0xec0b, 0x8906, 0x1, 0x1);
        gbc.writeMem(0xe8cc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x332);
        EXPECT(gbc.pc(), 0xe8ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8cc), 0xcb);
        EXPECT(gbc.readMem(0xe8cd), 0xb7);
        // CB B7 0110
        gbc.setState(0xdc52, 0xf6fd, 0xcd30, 0xa2f8, 0x6dd0, 0x757f, 0x0, 0x0);
        gbc.writeMem(0xdc52, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf6fd);
        EXPECT(gbc.pc(), 0xdc54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc52), 0xcb);
        EXPECT(gbc.readMem(0xdc53), 0xb7);
        // CB B7 0111
        gbc.setState(0x8f4, 0x235, 0xaa80, 0x8c7a, 0x5268, 0x7f5a, 0x1, 0x0);
        gbc.writeMem(0x8f4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x235);
        EXPECT(gbc.pc(), 0x8f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0112
        gbc.setState(0x1f8b, 0xefe0, 0xb110, 0x349c, 0xc7b1, 0xa863, 0x1, 0x1);
        gbc.writeMem(0x1f8b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xefe0);
        EXPECT(gbc.pc(), 0x1f8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0114
        gbc.setState(0x17d1, 0x59e7, 0x3800, 0x39e9, 0x84e8, 0xaf54, 0x0, 0x1);
        gbc.writeMem(0x17d1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x59e7);
        EXPECT(gbc.pc(), 0x17d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0116
        gbc.setState(0xe5c, 0xd279, 0x74c0, 0x7c6a, 0x6335, 0x56d9, 0x1, 0x0);
        gbc.writeMem(0xe5c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd279);
        EXPECT(gbc.pc(), 0xe5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0117
        gbc.setState(0xc288, 0xbda, 0x16b0, 0xd2e8, 0x3706, 0x4c84, 0x1, 0x0);
        gbc.writeMem(0xc288, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbda);
        EXPECT(gbc.pc(), 0xc28a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc288), 0xcb);
        EXPECT(gbc.readMem(0xc289), 0xb7);
        // CB B7 0118
        gbc.setState(0x714c, 0xfb8d, 0x1460, 0xefbf, 0x79b4, 0x32dd, 0x1, 0x1);
        gbc.writeMem(0x714c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfb8d);
        EXPECT(gbc.pc(), 0x714e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 011A
        gbc.setState(0xb2d4, 0xd51b, 0x2f50, 0x97df, 0x60f, 0xfd2f, 0x0, 0x0);
        gbc.writeMem(0xb2d4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd51b);
        EXPECT(gbc.pc(), 0xb2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d4), 0xcb);
        EXPECT(gbc.readMem(0xb2d5), 0xb7);
        // CB B7 011B
        gbc.setState(0x5b75, 0x942f, 0xc4c0, 0x650e, 0x8180, 0x45a0, 0x0, 0x0);
        gbc.writeMem(0x5b75, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x942f);
        EXPECT(gbc.pc(), 0x5b77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 011C
        gbc.setState(0xd07b, 0xfea9, 0x6450, 0x7c49, 0x9f80, 0xfd2e, 0x0, 0x1);
        gbc.writeMem(0xd07b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfea9);
        EXPECT(gbc.pc(), 0xd07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07b), 0xcb);
        EXPECT(gbc.readMem(0xd07c), 0xb7);
        // CB B7 011D
        gbc.setState(0xb27d, 0x3f3a, 0x7f70, 0xbdcf, 0xdebd, 0x8a6a, 0x1, 0x0);
        gbc.writeMem(0xb27d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3f3a);
        EXPECT(gbc.pc(), 0xb27f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb27d), 0xcb);
        EXPECT(gbc.readMem(0xb27e), 0xb7);
        // CB B7 011E
        gbc.setState(0xb62d, 0x2b8a, 0x5560, 0x1270, 0x6827, 0x9f14, 0x1, 0x0);
        gbc.writeMem(0xb62d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2b8a);
        EXPECT(gbc.pc(), 0xb62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb62d), 0xcb);
        EXPECT(gbc.readMem(0xb62e), 0xb7);
        // CB B7 011F
        gbc.setState(0xea2f, 0xf925, 0xea90, 0xe2df, 0xc803, 0x1967, 0x1, 0x0);
        gbc.writeMem(0xea2f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf925);
        EXPECT(gbc.pc(), 0xea31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea2f), 0xcb);
        EXPECT(gbc.readMem(0xea30), 0xb7);
        // CB B7 0120
        gbc.setState(0xd1a0, 0xff76, 0xfaa0, 0x5584, 0x4238, 0x2088, 0x0, 0x1);
        gbc.writeMem(0xd1a0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xff76);
        EXPECT(gbc.pc(), 0xd1a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a0), 0xcb);
        EXPECT(gbc.readMem(0xd1a1), 0xb7);
        // CB B7 0121
        gbc.setState(0xe356, 0x1ce1, 0xc4f0, 0xb002, 0xb55e, 0xe3bb, 0x0, 0x1);
        gbc.writeMem(0xe356, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1ce1);
        EXPECT(gbc.pc(), 0xe358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe356), 0xcb);
        EXPECT(gbc.readMem(0xe357), 0xb7);
        // CB B7 0122
        gbc.setState(0xb599, 0x9ca5, 0x5ca0, 0x8f4e, 0xf6bf, 0x8fc5, 0x0, 0x1);
        gbc.writeMem(0xb599, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9ca5);
        EXPECT(gbc.pc(), 0xb59b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb599), 0xcb);
        EXPECT(gbc.readMem(0xb59a), 0xb7);
        // CB B7 0123
        gbc.setState(0x4b57, 0xe375, 0xfda0, 0xd215, 0x1761, 0xb1de, 0x0, 0x1);
        gbc.writeMem(0x4b57, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe375);
        EXPECT(gbc.pc(), 0x4b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0124
        gbc.setState(0x72be, 0x64e3, 0x4a30, 0xcc3e, 0x7883, 0x5436, 0x1, 0x1);
        gbc.writeMem(0x72be, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x64e3);
        EXPECT(gbc.pc(), 0x72c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0125
        gbc.setState(0xdf63, 0xf845, 0xdf90, 0xb264, 0x1cd2, 0x5b47, 0x0, 0x1);
        gbc.writeMem(0xdf63, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf845);
        EXPECT(gbc.pc(), 0xdf65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf63), 0xcb);
        EXPECT(gbc.readMem(0xdf64), 0xb7);
        // CB B7 0126
        gbc.setState(0x44a8, 0x5b4b, 0x3810, 0xef30, 0x6c7a, 0x6d5b, 0x1, 0x0);
        gbc.writeMem(0x44a8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5b4b);
        EXPECT(gbc.pc(), 0x44aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0127
        gbc.setState(0xe9ea, 0xec8a, 0x7420, 0x2b3c, 0x35b, 0xf1d4, 0x0, 0x1);
        gbc.writeMem(0xe9ea, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xec8a);
        EXPECT(gbc.pc(), 0xe9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ea), 0xcb);
        EXPECT(gbc.readMem(0xe9eb), 0xb7);
        // CB B7 0128
        gbc.setState(0xd6d5, 0x519, 0x25c0, 0xddb3, 0x6784, 0x6626, 0x0, 0x1);
        gbc.writeMem(0xd6d5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x519);
        EXPECT(gbc.pc(), 0xd6d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d5), 0xcb);
        EXPECT(gbc.readMem(0xd6d6), 0xb7);
        // CB B7 0129
        gbc.setState(0xa875, 0x900a, 0x3dd0, 0xd712, 0x44f, 0x1c66, 0x1, 0x1);
        gbc.writeMem(0xa875, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x900a);
        EXPECT(gbc.pc(), 0xa877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa875), 0xcb);
        EXPECT(gbc.readMem(0xa876), 0xb7);
        // CB B7 012A
        gbc.setState(0x707f, 0xcde0, 0x3620, 0xd99b, 0x8de5, 0x6713, 0x0, 0x0);
        gbc.writeMem(0x707f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xcde0);
        EXPECT(gbc.pc(), 0x7081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 012B
        gbc.setState(0xb727, 0x5a0c, 0xc290, 0x12e9, 0xb230, 0x979, 0x1, 0x1);
        gbc.writeMem(0xb727, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5a0c);
        EXPECT(gbc.pc(), 0xb729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb727), 0xcb);
        EXPECT(gbc.readMem(0xb728), 0xb7);
        // CB B7 012C
        gbc.setState(0xe4cc, 0x28cf, 0xa140, 0xd53d, 0x8444, 0x86ab, 0x0, 0x0);
        gbc.writeMem(0xe4cc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x28cf);
        EXPECT(gbc.pc(), 0xe4ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4cc), 0xcb);
        EXPECT(gbc.readMem(0xe4cd), 0xb7);
        // CB B7 012D
        gbc.setState(0xeb36, 0x50fb, 0x91c0, 0x5ad3, 0x9e35, 0xa0bd, 0x1, 0x0);
        gbc.writeMem(0xeb36, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x50fb);
        EXPECT(gbc.pc(), 0xeb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb36), 0xcb);
        EXPECT(gbc.readMem(0xeb37), 0xb7);
        // CB B7 012E
        gbc.setState(0x6ca7, 0xa634, 0x6150, 0x9479, 0x4940, 0xe641, 0x1, 0x1);
        gbc.writeMem(0x6ca7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa634);
        EXPECT(gbc.pc(), 0x6ca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 012F
        gbc.setState(0xb2fb, 0xf1a6, 0xf290, 0x566f, 0xe219, 0x7c71, 0x0, 0x1);
        gbc.writeMem(0xb2fb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf1a6);
        EXPECT(gbc.pc(), 0xb2fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2fb), 0xcb);
        EXPECT(gbc.readMem(0xb2fc), 0xb7);
        // CB B7 0130
        gbc.setState(0xe043, 0xec25, 0x45d0, 0xcf7e, 0x9e30, 0xce18, 0x0, 0x0);
        gbc.writeMem(0xe043, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xec25);
        EXPECT(gbc.pc(), 0xe045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe043), 0xcb);
        EXPECT(gbc.readMem(0xe044), 0xb7);
        // CB B7 0131
        gbc.setState(0xe47e, 0xfbff, 0xbe60, 0xac38, 0x2947, 0xd3e1, 0x1, 0x1);
        gbc.writeMem(0xe47e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfbff);
        EXPECT(gbc.pc(), 0xe480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47e), 0xcb);
        EXPECT(gbc.readMem(0xe47f), 0xb7);
        // CB B7 0132
        gbc.setState(0xb9d7, 0x16b2, 0x4a70, 0x3af7, 0x2f87, 0x97bb, 0x1, 0x1);
        gbc.writeMem(0xb9d7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x16b2);
        EXPECT(gbc.pc(), 0xb9d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d7), 0xcb);
        EXPECT(gbc.readMem(0xb9d8), 0xb7);
        // CB B7 0133
        gbc.setState(0xa285, 0x5012, 0xcef0, 0x403a, 0x4c19, 0x497d, 0x1, 0x1);
        gbc.writeMem(0xa285, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5012);
        EXPECT(gbc.pc(), 0xa287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa285), 0xcb);
        EXPECT(gbc.readMem(0xa286), 0xb7);
        // CB B7 0134
        gbc.setState(0x5d01, 0xafd5, 0xef40, 0x2637, 0x40a4, 0xaf7a, 0x1, 0x1);
        gbc.writeMem(0x5d01, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xafd5);
        EXPECT(gbc.pc(), 0x5d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0135
        gbc.setState(0xe49d, 0xc504, 0xe500, 0x1ff7, 0x44df, 0x9af4, 0x0, 0x0);
        gbc.writeMem(0xe49d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc504);
        EXPECT(gbc.pc(), 0xe49f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49d), 0xcb);
        EXPECT(gbc.readMem(0xe49e), 0xb7);
        // CB B7 0136
        gbc.setState(0xd906, 0xde2a, 0x5ec0, 0x9da6, 0x599f, 0xa945, 0x1, 0x0);
        gbc.writeMem(0xd906, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xde2a);
        EXPECT(gbc.pc(), 0xd908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd906), 0xcb);
        EXPECT(gbc.readMem(0xd907), 0xb7);
        // CB B7 0137
        gbc.setState(0xefcf, 0xa7c3, 0x6c90, 0x7354, 0x8c15, 0xbd2f, 0x0, 0x0);
        gbc.writeMem(0xefcf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa7c3);
        EXPECT(gbc.pc(), 0xefd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefcf), 0xcb);
        EXPECT(gbc.readMem(0xefd0), 0xb7);
        // CB B7 0139
        gbc.setState(0x1c3e, 0xb560, 0x2610, 0xe43b, 0x3e14, 0xa968, 0x1, 0x0);
        gbc.writeMem(0x1c3e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb560);
        EXPECT(gbc.pc(), 0x1c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 013A
        gbc.setState(0x455b, 0xad5, 0x7950, 0x9eec, 0x4423, 0xe387, 0x1, 0x0);
        gbc.writeMem(0x455b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xad5);
        EXPECT(gbc.pc(), 0x455d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 013B
        gbc.setState(0x8691, 0xf672, 0x9fd0, 0x9e53, 0x8e2d, 0xd95f, 0x0, 0x1);
        gbc.writeMem(0x8691, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf672);
        EXPECT(gbc.pc(), 0x8693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8691), 0xcb);
        EXPECT(gbc.readMem(0x8692), 0xb7);
        // CB B7 013C
        gbc.setState(0x3c7e, 0xbfc0, 0x23a0, 0x6717, 0xa337, 0x3f68, 0x1, 0x0);
        gbc.writeMem(0x3c7e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbfc0);
        EXPECT(gbc.pc(), 0x3c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 013D
        gbc.setState(0x2faf, 0x2e0f, 0xd5c0, 0xdfd2, 0xa24a, 0x2a5c, 0x0, 0x1);
        gbc.writeMem(0x2faf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2e0f);
        EXPECT(gbc.pc(), 0x2fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 013E
        gbc.setState(0x1b08, 0x4ca9, 0x6cc0, 0x2aed, 0x1b82, 0x26e5, 0x1, 0x1);
        gbc.writeMem(0x1b08, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x4ca9);
        EXPECT(gbc.pc(), 0x1b0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 013F
        gbc.setState(0x7a32, 0x9e3c, 0x51b0, 0x1d15, 0x23a8, 0x8b89, 0x1, 0x0);
        gbc.writeMem(0x7a32, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9e3c);
        EXPECT(gbc.pc(), 0x7a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0142
        gbc.setState(0x2baa, 0x9714, 0x86d0, 0xd760, 0xd5c9, 0xafc4, 0x0, 0x0);
        gbc.writeMem(0x2baa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9714);
        EXPECT(gbc.pc(), 0x2bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0143
        gbc.setState(0x2996, 0xc697, 0x37a0, 0xedef, 0x7f5f, 0xae65, 0x0, 0x1);
        gbc.writeMem(0x2996, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc697);
        EXPECT(gbc.pc(), 0x2998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0144
        gbc.setState(0x502b, 0x3b06, 0x6930, 0x4a09, 0xa5f, 0x37a2, 0x1, 0x0);
        gbc.writeMem(0x502b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3b06);
        EXPECT(gbc.pc(), 0x502d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0145
        gbc.setState(0x2548, 0x330e, 0xc920, 0x5597, 0xcfec, 0xd04c, 0x1, 0x0);
        gbc.writeMem(0x2548, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x330e);
        EXPECT(gbc.pc(), 0x254a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0146
        gbc.setState(0xbac8, 0x357, 0xa840, 0x4dd3, 0xc7ec, 0x6629, 0x1, 0x1);
        gbc.writeMem(0xbac8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x357);
        EXPECT(gbc.pc(), 0xbaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac8), 0xcb);
        EXPECT(gbc.readMem(0xbac9), 0xb7);
        // CB B7 0147
        gbc.setState(0x7038, 0xba4, 0x7dc0, 0x5b79, 0xad5d, 0xda14, 0x1, 0x0);
        gbc.writeMem(0x7038, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xba4);
        EXPECT(gbc.pc(), 0x703a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0148
        gbc.setState(0xd641, 0xa8fd, 0xf910, 0x2e45, 0x5d5, 0xefb5, 0x0, 0x1);
        gbc.writeMem(0xd641, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa8fd);
        EXPECT(gbc.pc(), 0xd643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd641), 0xcb);
        EXPECT(gbc.readMem(0xd642), 0xb7);
        // CB B7 0149
        gbc.setState(0xc1ad, 0x46f3, 0xb540, 0x2937, 0xc90a, 0x46fc, 0x1, 0x0);
        gbc.writeMem(0xc1ad, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x46f3);
        EXPECT(gbc.pc(), 0xc1af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ad), 0xcb);
        EXPECT(gbc.readMem(0xc1ae), 0xb7);
        // CB B7 014A
        gbc.setState(0x73f6, 0xd3da, 0x7120, 0xcd2e, 0x5d46, 0x303f, 0x1, 0x1);
        gbc.writeMem(0x73f6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd3da);
        EXPECT(gbc.pc(), 0x73f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 014B
        gbc.setState(0xe765, 0x72a5, 0x55e0, 0xf5a4, 0xb15e, 0x83c2, 0x1, 0x1);
        gbc.writeMem(0xe765, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x72a5);
        EXPECT(gbc.pc(), 0xe767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe765), 0xcb);
        EXPECT(gbc.readMem(0xe766), 0xb7);
        // CB B7 014C
        gbc.setState(0x164b, 0x717d, 0x4a0, 0x4884, 0xe62d, 0x60df, 0x1, 0x0);
        gbc.writeMem(0x164b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x717d);
        EXPECT(gbc.pc(), 0x164d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 014D
        gbc.setState(0xd14a, 0x1db, 0xf7a0, 0x51f0, 0x6581, 0x7669, 0x1, 0x1);
        gbc.writeMem(0xd14a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1db);
        EXPECT(gbc.pc(), 0xd14c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14a), 0xcb);
        EXPECT(gbc.readMem(0xd14b), 0xb7);
        // CB B7 014E
        gbc.setState(0x76bb, 0x5d15, 0x4380, 0xef01, 0x93d1, 0x47fb, 0x0, 0x1);
        gbc.writeMem(0x76bb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5d15);
        EXPECT(gbc.pc(), 0x76bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 014F
        gbc.setState(0x30d8, 0x5a85, 0x4e60, 0x574a, 0x3fba, 0x87f2, 0x1, 0x0);
        gbc.writeMem(0x30d8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5a85);
        EXPECT(gbc.pc(), 0x30da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0150
        gbc.setState(0x95ef, 0xf047, 0x7ff0, 0x7257, 0x9244, 0xd64, 0x1, 0x0);
        gbc.writeMem(0x95ef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf047);
        EXPECT(gbc.pc(), 0x95f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ef), 0xcb);
        EXPECT(gbc.readMem(0x95f0), 0xb7);
        // CB B7 0151
        gbc.setState(0x2222, 0x686f, 0xebc0, 0x69d8, 0x1388, 0x764c, 0x0, 0x0);
        gbc.writeMem(0x2222, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x686f);
        EXPECT(gbc.pc(), 0x2224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0152
        gbc.setState(0x9d17, 0x198b, 0x36b0, 0xc803, 0x4303, 0x2438, 0x1, 0x0);
        gbc.writeMem(0x9d17, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x198b);
        EXPECT(gbc.pc(), 0x9d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d17), 0xcb);
        EXPECT(gbc.readMem(0x9d18), 0xb7);
        // CB B7 0153
        gbc.setState(0x2972, 0x464, 0xd5c0, 0xb920, 0xde02, 0x2e71, 0x0, 0x0);
        gbc.writeMem(0x2972, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x464);
        EXPECT(gbc.pc(), 0x2974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0154
        gbc.setState(0x27de, 0xa8a6, 0x1400, 0xfbc0, 0x5601, 0xcc1c, 0x0, 0x1);
        gbc.writeMem(0x27de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa8a6);
        EXPECT(gbc.pc(), 0x27e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0155
        gbc.setState(0x1492, 0x2e4b, 0xdc60, 0x8752, 0x1df6, 0xecf1, 0x0, 0x1);
        gbc.writeMem(0x1492, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2e4b);
        EXPECT(gbc.pc(), 0x1494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0157
        gbc.setState(0xecfc, 0xda3e, 0x6660, 0xc871, 0x3408, 0x52fa, 0x0, 0x1);
        gbc.writeMem(0xecfc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xda3e);
        EXPECT(gbc.pc(), 0xecfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfc), 0xcb);
        EXPECT(gbc.readMem(0xecfd), 0xb7);
        // CB B7 0158
        gbc.setState(0xa64c, 0x83cd, 0x3b30, 0xc7b, 0x6797, 0xa004, 0x0, 0x1);
        gbc.writeMem(0xa64c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x83cd);
        EXPECT(gbc.pc(), 0xa64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa64c), 0xcb);
        EXPECT(gbc.readMem(0xa64d), 0xb7);
        // CB B7 0159
        gbc.setState(0x13c2, 0x501c, 0x98a0, 0xb15e, 0xbcf0, 0xa9c4, 0x0, 0x1);
        gbc.writeMem(0x13c2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x501c);
        EXPECT(gbc.pc(), 0x13c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 015A
        gbc.setState(0x9ba5, 0x98ff, 0x9b50, 0x43b4, 0x3d63, 0xdab7, 0x0, 0x1);
        gbc.writeMem(0x9ba5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x98ff);
        EXPECT(gbc.pc(), 0x9ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba5), 0xcb);
        EXPECT(gbc.readMem(0x9ba6), 0xb7);
        // CB B7 015B
        gbc.setState(0xe2a4, 0x31d9, 0x9450, 0xcea2, 0xcf17, 0x376a, 0x1, 0x1);
        gbc.writeMem(0xe2a4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x31d9);
        EXPECT(gbc.pc(), 0xe2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a4), 0xcb);
        EXPECT(gbc.readMem(0xe2a5), 0xb7);
        // CB B7 015C
        gbc.setState(0x1e1a, 0x7cd5, 0x6030, 0x3b03, 0x12ce, 0x353f, 0x1, 0x1);
        gbc.writeMem(0x1e1a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7cd5);
        EXPECT(gbc.pc(), 0x1e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 015D
        gbc.setState(0x8fc6, 0x1c1a, 0xe7d0, 0x1b6, 0x498b, 0xcf03, 0x1, 0x0);
        gbc.writeMem(0x8fc6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1c1a);
        EXPECT(gbc.pc(), 0x8fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fc6), 0xcb);
        EXPECT(gbc.readMem(0x8fc7), 0xb7);
        // CB B7 015E
        gbc.setState(0x1f4c, 0xd1e6, 0x9370, 0x61ae, 0x31ec, 0x40a1, 0x0, 0x0);
        gbc.writeMem(0x1f4c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd1e6);
        EXPECT(gbc.pc(), 0x1f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 015F
        gbc.setState(0xe754, 0xd9e1, 0x9200, 0x4f66, 0xbcd6, 0x920d, 0x0, 0x0);
        gbc.writeMem(0xe754, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd9e1);
        EXPECT(gbc.pc(), 0xe756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe754), 0xcb);
        EXPECT(gbc.readMem(0xe755), 0xb7);
        // CB B7 0160
        gbc.setState(0xb7b3, 0xa654, 0xc860, 0x1789, 0x290a, 0xb753, 0x0, 0x0);
        gbc.writeMem(0xb7b3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa654);
        EXPECT(gbc.pc(), 0xb7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b3), 0xcb);
        EXPECT(gbc.readMem(0xb7b4), 0xb7);
        // CB B7 0161
        gbc.setState(0x9912, 0x5066, 0xeec0, 0xd1cd, 0x495e, 0xb309, 0x1, 0x1);
        gbc.writeMem(0x9912, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5066);
        EXPECT(gbc.pc(), 0x9914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9912), 0xcb);
        EXPECT(gbc.readMem(0x9913), 0xb7);
        // CB B7 0162
        gbc.setState(0xd045, 0xa629, 0x2730, 0x10cf, 0x8f64, 0xe878, 0x1, 0x1);
        gbc.writeMem(0xd045, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa629);
        EXPECT(gbc.pc(), 0xd047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd045), 0xcb);
        EXPECT(gbc.readMem(0xd046), 0xb7);
        // CB B7 0163
        gbc.setState(0x73ba, 0x99ca, 0xeff0, 0xa85d, 0xc8e6, 0x9536, 0x1, 0x1);
        gbc.writeMem(0x73ba, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x99ca);
        EXPECT(gbc.pc(), 0x73bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0164
        gbc.setState(0x98cb, 0xd2f7, 0x9b00, 0x3a45, 0xd294, 0x4242, 0x1, 0x0);
        gbc.writeMem(0x98cb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd2f7);
        EXPECT(gbc.pc(), 0x98cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98cb), 0xcb);
        EXPECT(gbc.readMem(0x98cc), 0xb7);
        // CB B7 0165
        gbc.setState(0x3d6f, 0x5944, 0x62f0, 0x7eb9, 0x751f, 0xbbc2, 0x1, 0x0);
        gbc.writeMem(0x3d6f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5944);
        EXPECT(gbc.pc(), 0x3d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0166
        gbc.setState(0xd2de, 0xc95b, 0xa500, 0x8fa, 0x5432, 0xfa23, 0x0, 0x0);
        gbc.writeMem(0xd2de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc95b);
        EXPECT(gbc.pc(), 0xd2e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2de), 0xcb);
        EXPECT(gbc.readMem(0xd2df), 0xb7);
        // CB B7 0167
        gbc.setState(0x8286, 0xc496, 0x8050, 0x50fe, 0x7c1d, 0xb9b0, 0x0, 0x0);
        gbc.writeMem(0x8286, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc496);
        EXPECT(gbc.pc(), 0x8288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8286), 0xcb);
        EXPECT(gbc.readMem(0x8287), 0xb7);
        // CB B7 0168
        gbc.setState(0xdf4d, 0x26e9, 0xc440, 0xa755, 0xd711, 0xae3, 0x0, 0x0);
        gbc.writeMem(0xdf4d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x26e9);
        EXPECT(gbc.pc(), 0xdf4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4d), 0xcb);
        EXPECT(gbc.readMem(0xdf4e), 0xb7);
        // CB B7 0169
        gbc.setState(0x7a6, 0x301e, 0x65c0, 0x3596, 0x7660, 0xbbf1, 0x1, 0x0);
        gbc.writeMem(0x7a6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x301e);
        EXPECT(gbc.pc(), 0x7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 016A
        gbc.setState(0x823d, 0x99b4, 0x55a0, 0x77e7, 0x99de, 0xe9f7, 0x0, 0x1);
        gbc.writeMem(0x823d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x99b4);
        EXPECT(gbc.pc(), 0x823f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823d), 0xcb);
        EXPECT(gbc.readMem(0x823e), 0xb7);
        // CB B7 016B
        gbc.setState(0xee95, 0x204e, 0x50b0, 0x224d, 0x40fd, 0xbec, 0x1, 0x0);
        gbc.writeMem(0xee95, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x204e);
        EXPECT(gbc.pc(), 0xee97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee95), 0xcb);
        EXPECT(gbc.readMem(0xee96), 0xb7);
        // CB B7 016D
        gbc.setState(0x5727, 0xc7b0, 0xefe0, 0xffd2, 0x7544, 0xe468, 0x1, 0x0);
        gbc.writeMem(0x5727, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc7b0);
        EXPECT(gbc.pc(), 0x5729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 016E
        gbc.setState(0xe0de, 0xefa2, 0x93d0, 0x1d87, 0x3da3, 0x8f83, 0x1, 0x0);
        gbc.writeMem(0xe0de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xefa2);
        EXPECT(gbc.pc(), 0xe0e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0de), 0xcb);
        EXPECT(gbc.readMem(0xe0df), 0xb7);
        // CB B7 0170
        gbc.setState(0x4695, 0x7b38, 0x8130, 0xca58, 0x9f7d, 0x2d8c, 0x0, 0x0);
        gbc.writeMem(0x4695, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7b38);
        EXPECT(gbc.pc(), 0x4697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0171
        gbc.setState(0xdb6a, 0x1a59, 0xe090, 0xe7bd, 0x561b, 0xd61d, 0x1, 0x0);
        gbc.writeMem(0xdb6a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1a59);
        EXPECT(gbc.pc(), 0xdb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6a), 0xcb);
        EXPECT(gbc.readMem(0xdb6b), 0xb7);
        // CB B7 0172
        gbc.setState(0xd48d, 0x5584, 0xb4d0, 0xdf24, 0x1260, 0xc736, 0x1, 0x1);
        gbc.writeMem(0xd48d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5584);
        EXPECT(gbc.pc(), 0xd48f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd48d), 0xcb);
        EXPECT(gbc.readMem(0xd48e), 0xb7);
        // CB B7 0173
        gbc.setState(0xdf46, 0xd02b, 0xd860, 0xa630, 0x6a9f, 0xc0be, 0x0, 0x1);
        gbc.writeMem(0xdf46, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd02b);
        EXPECT(gbc.pc(), 0xdf48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf46), 0xcb);
        EXPECT(gbc.readMem(0xdf47), 0xb7);
        // CB B7 0176
        gbc.setState(0x6afa, 0x1f73, 0x19d0, 0xdaa0, 0x3121, 0x6ac9, 0x0, 0x1);
        gbc.writeMem(0x6afa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1f73);
        EXPECT(gbc.pc(), 0x6afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0177
        gbc.setState(0x99be, 0x3ef, 0x6860, 0x35d8, 0x981c, 0xe7e2, 0x1, 0x0);
        gbc.writeMem(0x99be, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3ef);
        EXPECT(gbc.pc(), 0x99c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99be), 0xcb);
        EXPECT(gbc.readMem(0x99bf), 0xb7);
        // CB B7 0178
        gbc.setState(0x8596, 0x61b1, 0x7d40, 0xcab6, 0xfc3d, 0x95ee, 0x1, 0x0);
        gbc.writeMem(0x8596, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x61b1);
        EXPECT(gbc.pc(), 0x8598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8596), 0xcb);
        EXPECT(gbc.readMem(0x8597), 0xb7);
        // CB B7 0179
        gbc.setState(0xc018, 0x3f0b, 0xbcb0, 0xff79, 0x6a1b, 0xf6bf, 0x0, 0x1);
        gbc.writeMem(0xc018, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3f0b);
        EXPECT(gbc.pc(), 0xc01a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc018), 0xcb);
        EXPECT(gbc.readMem(0xc019), 0xb7);
        // CB B7 017A
        gbc.setState(0x61d1, 0x5076, 0x3f80, 0x34cd, 0xf9fd, 0xe241, 0x0, 0x0);
        gbc.writeMem(0x61d1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5076);
        EXPECT(gbc.pc(), 0x61d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 017B
        gbc.setState(0x36bf, 0x41f3, 0xee80, 0xf9e6, 0xb194, 0x3d54, 0x0, 0x0);
        gbc.writeMem(0x36bf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x41f3);
        EXPECT(gbc.pc(), 0x36c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 017C
        gbc.setState(0x1255, 0xf37e, 0xd6b0, 0x12eb, 0x9c, 0xea44, 0x1, 0x0);
        gbc.writeMem(0x1255, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf37e);
        EXPECT(gbc.pc(), 0x1257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 017D
        gbc.setState(0x4ef, 0x7679, 0x5170, 0xc7ad, 0xe8c1, 0x590c, 0x0, 0x0);
        gbc.writeMem(0x4ef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7679);
        EXPECT(gbc.pc(), 0x4f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 017E
        gbc.setState(0x16a3, 0x927a, 0x7c40, 0x4027, 0xc0c9, 0xb8de, 0x0, 0x1);
        gbc.writeMem(0x16a3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x927a);
        EXPECT(gbc.pc(), 0x16a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 017F
        gbc.setState(0x5baa, 0xeb81, 0xc6e0, 0xf172, 0x4515, 0x5463, 0x0, 0x0);
        gbc.writeMem(0x5baa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xeb81);
        EXPECT(gbc.pc(), 0x5bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0180
        gbc.setState(0x5295, 0xe96, 0x1230, 0xf2f4, 0x72b6, 0x1d, 0x0, 0x1);
        gbc.writeMem(0x5295, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe96);
        EXPECT(gbc.pc(), 0x5297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0181
        gbc.setState(0x20a4, 0xad1c, 0x6a60, 0xdb2e, 0x4671, 0x4f97, 0x0, 0x1);
        gbc.writeMem(0x20a4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xad1c);
        EXPECT(gbc.pc(), 0x20a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0182
        gbc.setState(0x2e1d, 0xc3a, 0xe760, 0xee9f, 0xb5ac, 0x72a, 0x0, 0x1);
        gbc.writeMem(0x2e1d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc3a);
        EXPECT(gbc.pc(), 0x2e1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0183
        gbc.setState(0xf9, 0xffd5, 0x9080, 0x804c, 0x830e, 0x20b4, 0x1, 0x0);
        gbc.writeMem(0xf9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xffd5);
        EXPECT(gbc.pc(), 0xfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0184
        gbc.setState(0xce33, 0x9c2b, 0xc060, 0x4e29, 0x3d, 0xecee, 0x0, 0x1);
        gbc.writeMem(0xce33, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9c2b);
        EXPECT(gbc.pc(), 0xce35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce33), 0xcb);
        EXPECT(gbc.readMem(0xce34), 0xb7);
        // CB B7 0185
        gbc.setState(0x776b, 0x246f, 0x4990, 0x15f8, 0x5647, 0xa768, 0x1, 0x0);
        gbc.writeMem(0x776b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x246f);
        EXPECT(gbc.pc(), 0x776d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0186
        gbc.setState(0x50a, 0xa706, 0xa9e0, 0x76d1, 0xd347, 0x913f, 0x0, 0x0);
        gbc.writeMem(0x50a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa706);
        EXPECT(gbc.pc(), 0x50c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0187
        gbc.setState(0xbee7, 0x5c5a, 0x730, 0xcea0, 0x5536, 0x8066, 0x1, 0x1);
        gbc.writeMem(0xbee7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0xbee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbee7), 0xcb);
        EXPECT(gbc.readMem(0xbee8), 0xb7);
        // CB B7 0188
        gbc.setState(0xc85f, 0xe551, 0x95b0, 0xa1b1, 0x8ae0, 0xedbc, 0x0, 0x1);
        gbc.writeMem(0xc85f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe551);
        EXPECT(gbc.pc(), 0xc861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc85f), 0xcb);
        EXPECT(gbc.readMem(0xc860), 0xb7);
        // CB B7 0189
        gbc.setState(0x5fef, 0x7d0a, 0xff40, 0xba68, 0xdb0a, 0x1f98, 0x1, 0x1);
        gbc.writeMem(0x5fef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7d0a);
        EXPECT(gbc.pc(), 0x5ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 018A
        gbc.setState(0xb17f, 0x347d, 0xbcc0, 0x2b0a, 0x1b2b, 0x4998, 0x1, 0x1);
        gbc.writeMem(0xb17f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x347d);
        EXPECT(gbc.pc(), 0xb181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17f), 0xcb);
        EXPECT(gbc.readMem(0xb180), 0xb7);
        // CB B7 018B
        gbc.setState(0xb3e, 0x3171, 0x6020, 0xe22a, 0x745, 0xbd6e, 0x0, 0x1);
        gbc.writeMem(0xb3e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3171);
        EXPECT(gbc.pc(), 0xb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 018C
        gbc.setState(0x95d2, 0xa0ad, 0xc8a0, 0xc9f3, 0x84b4, 0xe8aa, 0x0, 0x0);
        gbc.writeMem(0x95d2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa0ad);
        EXPECT(gbc.pc(), 0x95d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d2), 0xcb);
        EXPECT(gbc.readMem(0x95d3), 0xb7);
        // CB B7 018D
        gbc.setState(0x9e02, 0xf441, 0x1100, 0x7e29, 0x7dac, 0x3e51, 0x1, 0x1);
        gbc.writeMem(0x9e02, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf441);
        EXPECT(gbc.pc(), 0x9e04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e02), 0xcb);
        EXPECT(gbc.readMem(0x9e03), 0xb7);
        // CB B7 018E
        gbc.setState(0xb862, 0x5d8, 0x2230, 0x7548, 0xc3aa, 0x472, 0x0, 0x1);
        gbc.writeMem(0xb862, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5d8);
        EXPECT(gbc.pc(), 0xb864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb862), 0xcb);
        EXPECT(gbc.readMem(0xb863), 0xb7);
        // CB B7 018F
        gbc.setState(0x62ac, 0x474, 0x9ea0, 0x191, 0x23d7, 0x56, 0x0, 0x1);
        gbc.writeMem(0x62ac, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x474);
        EXPECT(gbc.pc(), 0x62ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0191
        gbc.setState(0x962e, 0x565a, 0xf1b0, 0x15c, 0xc6a4, 0x695e, 0x1, 0x0);
        gbc.writeMem(0x962e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x565a);
        EXPECT(gbc.pc(), 0x9630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x962e), 0xcb);
        EXPECT(gbc.readMem(0x962f), 0xb7);
        // CB B7 0192
        gbc.setState(0x88a7, 0x3fee, 0xef70, 0x1599, 0xb569, 0x6ddb, 0x0, 0x0);
        gbc.writeMem(0x88a7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3fee);
        EXPECT(gbc.pc(), 0x88a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a7), 0xcb);
        EXPECT(gbc.readMem(0x88a8), 0xb7);
        // CB B7 0193
        gbc.setState(0x20f8, 0x3ce8, 0x60d0, 0xc40f, 0x66d1, 0x84fb, 0x0, 0x1);
        gbc.writeMem(0x20f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3ce8);
        EXPECT(gbc.pc(), 0x20fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0194
        gbc.setState(0x1858, 0x1a4d, 0x1490, 0x3c0d, 0xeae4, 0xc24d, 0x1, 0x1);
        gbc.writeMem(0x1858, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1a4d);
        EXPECT(gbc.pc(), 0x185a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0195
        gbc.setState(0x212c, 0x6faf, 0x1400, 0x9891, 0xa6cf, 0xdb9b, 0x1, 0x1);
        gbc.writeMem(0x212c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6faf);
        EXPECT(gbc.pc(), 0x212e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0196
        gbc.setState(0xd34e, 0x79de, 0x71c0, 0xaf35, 0x6d67, 0x5745, 0x0, 0x1);
        gbc.writeMem(0xd34e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x79de);
        EXPECT(gbc.pc(), 0xd350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34e), 0xcb);
        EXPECT(gbc.readMem(0xd34f), 0xb7);
        // CB B7 0197
        gbc.setState(0x15b1, 0xb3c5, 0xf120, 0x2df1, 0x71fb, 0x8ec6, 0x1, 0x1);
        gbc.writeMem(0x15b1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb3c5);
        EXPECT(gbc.pc(), 0x15b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0198
        gbc.setState(0x5077, 0x1fa9, 0xb600, 0x81e2, 0x5b06, 0xccd4, 0x0, 0x0);
        gbc.writeMem(0x5077, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1fa9);
        EXPECT(gbc.pc(), 0x5079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0199
        gbc.setState(0x2949, 0x9808, 0xe950, 0x2f1c, 0x1399, 0xd084, 0x0, 0x0);
        gbc.writeMem(0x2949, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9808);
        EXPECT(gbc.pc(), 0x294b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 019A
        gbc.setState(0x991c, 0x2a74, 0x4730, 0x33d3, 0xe87d, 0x9de2, 0x1, 0x0);
        gbc.writeMem(0x991c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2a74);
        EXPECT(gbc.pc(), 0x991e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991c), 0xcb);
        EXPECT(gbc.readMem(0x991d), 0xb7);
        // CB B7 019B
        gbc.setState(0x8b83, 0xac3e, 0xc210, 0xd646, 0xc887, 0x43a4, 0x1, 0x1);
        gbc.writeMem(0x8b83, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xac3e);
        EXPECT(gbc.pc(), 0x8b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b83), 0xcb);
        EXPECT(gbc.readMem(0x8b84), 0xb7);
        // CB B7 019C
        gbc.setState(0x49b2, 0x2900, 0xad20, 0x365c, 0xfff1, 0xc2d1, 0x1, 0x0);
        gbc.writeMem(0x49b2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2900);
        EXPECT(gbc.pc(), 0x49b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 019D
        gbc.setState(0x8bf4, 0x9db2, 0x7410, 0xdc9b, 0x75d5, 0x3c36, 0x0, 0x1);
        gbc.writeMem(0x8bf4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9db2);
        EXPECT(gbc.pc(), 0x8bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf4), 0xcb);
        EXPECT(gbc.readMem(0x8bf5), 0xb7);
        // CB B7 019E
        gbc.setState(0x225e, 0xafd3, 0x6760, 0xc502, 0xec84, 0xa64c, 0x1, 0x0);
        gbc.writeMem(0x225e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xafd3);
        EXPECT(gbc.pc(), 0x2260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 019F
        gbc.setState(0x9ab7, 0x8070, 0xf420, 0x9365, 0xad68, 0x31e2, 0x1, 0x0);
        gbc.writeMem(0x9ab7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8070);
        EXPECT(gbc.pc(), 0x9ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab7), 0xcb);
        EXPECT(gbc.readMem(0x9ab8), 0xb7);
        // CB B7 01A0
        gbc.setState(0xb8dd, 0x3824, 0x7970, 0x7701, 0xfada, 0x252b, 0x1, 0x1);
        gbc.writeMem(0xb8dd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3824);
        EXPECT(gbc.pc(), 0xb8df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8dd), 0xcb);
        EXPECT(gbc.readMem(0xb8de), 0xb7);
        // CB B7 01A1
        gbc.setState(0x168b, 0x49c7, 0xd970, 0xa1a6, 0x9be, 0x39d1, 0x0, 0x0);
        gbc.writeMem(0x168b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x49c7);
        EXPECT(gbc.pc(), 0x168d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01A2
        gbc.setState(0x3f55, 0x5b1c, 0x3590, 0x740, 0xa81c, 0x6bb, 0x0, 0x0);
        gbc.writeMem(0x3f55, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5b1c);
        EXPECT(gbc.pc(), 0x3f57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01A3
        gbc.setState(0x6f6c, 0x760, 0xe690, 0x19b9, 0xf74, 0x6bb0, 0x1, 0x0);
        gbc.writeMem(0x6f6c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x760);
        EXPECT(gbc.pc(), 0x6f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01A5
        gbc.setState(0x7090, 0x95a, 0xb570, 0xd30c, 0x2b2e, 0xa426, 0x0, 0x1);
        gbc.writeMem(0x7090, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x95a);
        EXPECT(gbc.pc(), 0x7092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01A6
        gbc.setState(0x2893, 0xdd2e, 0x6e70, 0x5b3a, 0x5964, 0x290b, 0x1, 0x0);
        gbc.writeMem(0x2893, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdd2e);
        EXPECT(gbc.pc(), 0x2895);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01A8
        gbc.setState(0xba5d, 0x91e8, 0x5180, 0xbf59, 0xb474, 0xb432, 0x0, 0x1);
        gbc.writeMem(0xba5d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x91e8);
        EXPECT(gbc.pc(), 0xba5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5d), 0xcb);
        EXPECT(gbc.readMem(0xba5e), 0xb7);
        // CB B7 01A9
        gbc.setState(0x5301, 0x4a67, 0x71b0, 0xec7d, 0xe28f, 0x502b, 0x0, 0x0);
        gbc.writeMem(0x5301, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4a67);
        EXPECT(gbc.pc(), 0x5303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01AA
        gbc.setState(0x8a5c, 0xff6a, 0xeff0, 0x97d0, 0x9b9d, 0xe680, 0x0, 0x0);
        gbc.writeMem(0x8a5c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xff6a);
        EXPECT(gbc.pc(), 0x8a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5c), 0xcb);
        EXPECT(gbc.readMem(0x8a5d), 0xb7);
        // CB B7 01AB
        gbc.setState(0x4246, 0x2367, 0x8c80, 0x45d7, 0xea2c, 0x6d, 0x1, 0x0);
        gbc.writeMem(0x4246, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2367);
        EXPECT(gbc.pc(), 0x4248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01AC
        gbc.setState(0xe05b, 0x5955, 0x77b0, 0x74f6, 0xc497, 0x226, 0x1, 0x1);
        gbc.writeMem(0xe05b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5955);
        EXPECT(gbc.pc(), 0xe05d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe05b), 0xcb);
        EXPECT(gbc.readMem(0xe05c), 0xb7);
        // CB B7 01AD
        gbc.setState(0x8aca, 0x54b1, 0x6e80, 0xecff, 0x1420, 0x517a, 0x1, 0x0);
        gbc.writeMem(0x8aca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x54b1);
        EXPECT(gbc.pc(), 0x8acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aca), 0xcb);
        EXPECT(gbc.readMem(0x8acb), 0xb7);
        // CB B7 01AF
        gbc.setState(0x9ffb, 0xee5e, 0x7ce0, 0x4020, 0x37e8, 0x94e, 0x1, 0x1);
        gbc.writeMem(0x9ffb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xee5e);
        EXPECT(gbc.pc(), 0x9ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffb), 0xcb);
        EXPECT(gbc.readMem(0x9ffc), 0xb7);
        // CB B7 01B0
        gbc.setState(0x2267, 0x8018, 0x21c0, 0xde59, 0x4675, 0x59bd, 0x1, 0x0);
        gbc.writeMem(0x2267, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8018);
        EXPECT(gbc.pc(), 0x2269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01B1
        gbc.setState(0xbf6f, 0x80b1, 0xcf20, 0xa925, 0x3a7e, 0x1910, 0x0, 0x1);
        gbc.writeMem(0xbf6f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x80b1);
        EXPECT(gbc.pc(), 0xbf71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6f), 0xcb);
        EXPECT(gbc.readMem(0xbf70), 0xb7);
        // CB B7 01B2
        gbc.setState(0x51af, 0x7e3b, 0x2140, 0x63ef, 0x403d, 0x6f9c, 0x1, 0x0);
        gbc.writeMem(0x51af, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7e3b);
        EXPECT(gbc.pc(), 0x51b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01B3
        gbc.setState(0xa1de, 0xbfb0, 0xe5c0, 0xb0d7, 0xb49b, 0x25ac, 0x1, 0x1);
        gbc.writeMem(0xa1de, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xbfb0);
        EXPECT(gbc.pc(), 0xa1e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1de), 0xcb);
        EXPECT(gbc.readMem(0xa1df), 0xb7);
        // CB B7 01B4
        gbc.setState(0x691d, 0xc3b8, 0x3830, 0xf1c2, 0x2772, 0x2485, 0x0, 0x0);
        gbc.writeMem(0x691d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc3b8);
        EXPECT(gbc.pc(), 0x691f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01B5
        gbc.setState(0xc5a0, 0xdbef, 0xbf60, 0x709b, 0xf01e, 0xd9a1, 0x0, 0x1);
        gbc.writeMem(0xc5a0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdbef);
        EXPECT(gbc.pc(), 0xc5a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a0), 0xcb);
        EXPECT(gbc.readMem(0xc5a1), 0xb7);
        // CB B7 01B6
        gbc.setState(0xdbb, 0x9b4c, 0xe120, 0x5929, 0xe232, 0xe00a, 0x1, 0x0);
        gbc.writeMem(0xdbb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9b4c);
        EXPECT(gbc.pc(), 0xdbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01B8
        gbc.setState(0xd69a, 0x373b, 0x4ff0, 0xe57c, 0x48f8, 0xdd68, 0x1, 0x1);
        gbc.writeMem(0xd69a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x373b);
        EXPECT(gbc.pc(), 0xd69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd69a), 0xcb);
        EXPECT(gbc.readMem(0xd69b), 0xb7);
        // CB B7 01B9
        gbc.setState(0x5476, 0xfae3, 0x70f0, 0x8b93, 0x3f66, 0x6ded, 0x0, 0x1);
        gbc.writeMem(0x5476, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfae3);
        EXPECT(gbc.pc(), 0x5478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01BA
        gbc.setState(0xd44d, 0x96de, 0xf8e0, 0xaea, 0x40d8, 0x18e4, 0x1, 0x1);
        gbc.writeMem(0xd44d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x96de);
        EXPECT(gbc.pc(), 0xd44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd44d), 0xcb);
        EXPECT(gbc.readMem(0xd44e), 0xb7);
        // CB B7 01BB
        gbc.setState(0xc5d9, 0x9cd, 0x4370, 0x30fa, 0xc892, 0x29d8, 0x1, 0x1);
        gbc.writeMem(0xc5d9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9cd);
        EXPECT(gbc.pc(), 0xc5db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d9), 0xcb);
        EXPECT(gbc.readMem(0xc5da), 0xb7);
        // CB B7 01BC
        gbc.setState(0x27a2, 0xae5c, 0x3c10, 0xcbf1, 0x3658, 0xb974, 0x0, 0x1);
        gbc.writeMem(0x27a2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae5c);
        EXPECT(gbc.pc(), 0x27a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01BD
        gbc.setState(0x2dce, 0x5a88, 0xcbb0, 0xe596, 0xcc3a, 0xf422, 0x0, 0x0);
        gbc.writeMem(0x2dce, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5a88);
        EXPECT(gbc.pc(), 0x2dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01BE
        gbc.setState(0x7e25, 0x6c7d, 0xbad0, 0x609, 0x5cc7, 0x984d, 0x1, 0x1);
        gbc.writeMem(0x7e25, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6c7d);
        EXPECT(gbc.pc(), 0x7e27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01BF
        gbc.setState(0xba0b, 0x7a00, 0x3f30, 0x1a58, 0x9949, 0x611a, 0x0, 0x1);
        gbc.writeMem(0xba0b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7a00);
        EXPECT(gbc.pc(), 0xba0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba0b), 0xcb);
        EXPECT(gbc.readMem(0xba0c), 0xb7);
        // CB B7 01C0
        gbc.setState(0xc44b, 0x6a6a, 0x1a70, 0x4c09, 0x7b7c, 0xf08a, 0x1, 0x1);
        gbc.writeMem(0xc44b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6a6a);
        EXPECT(gbc.pc(), 0xc44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc44b), 0xcb);
        EXPECT(gbc.readMem(0xc44c), 0xb7);
        // CB B7 01C1
        gbc.setState(0xbb48, 0x5047, 0xa0a0, 0x5214, 0x790, 0xa9c, 0x0, 0x0);
        gbc.writeMem(0xbb48, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5047);
        EXPECT(gbc.pc(), 0xbb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb48), 0xcb);
        EXPECT(gbc.readMem(0xbb49), 0xb7);
        // CB B7 01C2
        gbc.setState(0x42bc, 0xc7aa, 0x5200, 0xc00a, 0x1b39, 0xf7aa, 0x0, 0x0);
        gbc.writeMem(0x42bc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc7aa);
        EXPECT(gbc.pc(), 0x42be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01C3
        gbc.setState(0x5de5, 0xffb7, 0x4a30, 0xb919, 0x61ea, 0x9bea, 0x1, 0x1);
        gbc.writeMem(0x5de5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xffb7);
        EXPECT(gbc.pc(), 0x5de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01C4
        gbc.setState(0xc151, 0x2734, 0x69d0, 0x9517, 0x4ccc, 0xc25a, 0x0, 0x0);
        gbc.writeMem(0xc151, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2734);
        EXPECT(gbc.pc(), 0xc153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc151), 0xcb);
        EXPECT(gbc.readMem(0xc152), 0xb7);
        // CB B7 01C5
        gbc.setState(0x6da2, 0xaeba, 0x3b90, 0x7d5f, 0xc270, 0xff0a, 0x0, 0x1);
        gbc.writeMem(0x6da2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xaeba);
        EXPECT(gbc.pc(), 0x6da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01C7
        gbc.setState(0x36f2, 0x7fc7, 0xf480, 0x33a6, 0xb2a7, 0x5321, 0x1, 0x0);
        gbc.writeMem(0x36f2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7fc7);
        EXPECT(gbc.pc(), 0x36f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01C8
        gbc.setState(0x1439, 0x7773, 0x7a60, 0x7afe, 0x2019, 0x52e1, 0x1, 0x1);
        gbc.writeMem(0x1439, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7773);
        EXPECT(gbc.pc(), 0x143b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01C9
        gbc.setState(0xada9, 0xef1e, 0xc9d0, 0xb540, 0xd792, 0xc220, 0x0, 0x0);
        gbc.writeMem(0xada9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xef1e);
        EXPECT(gbc.pc(), 0xadab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada9), 0xcb);
        EXPECT(gbc.readMem(0xadaa), 0xb7);
        // CB B7 01CA
        gbc.setState(0x70e6, 0xd812, 0xbbe0, 0x892b, 0xb019, 0xef6, 0x0, 0x0);
        gbc.writeMem(0x70e6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd812);
        EXPECT(gbc.pc(), 0x70e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01CB
        gbc.setState(0xd26, 0x9621, 0x44d0, 0x14ed, 0xfc4b, 0x836c, 0x1, 0x0);
        gbc.writeMem(0xd26, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9621);
        EXPECT(gbc.pc(), 0xd28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01CC
        gbc.setState(0x4cfe, 0x83fc, 0x5bf0, 0x6bed, 0x87e8, 0x3fed, 0x0, 0x0);
        gbc.writeMem(0x4cfe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x83fc);
        EXPECT(gbc.pc(), 0x4d00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01CD
        gbc.setState(0x508a, 0x2931, 0x6960, 0xa4cd, 0x82ce, 0x1dbe, 0x0, 0x1);
        gbc.writeMem(0x508a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2931);
        EXPECT(gbc.pc(), 0x508c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01CE
        gbc.setState(0x2a8d, 0x4310, 0xe920, 0x9812, 0x90ed, 0x9ce6, 0x0, 0x1);
        gbc.writeMem(0x2a8d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4310);
        EXPECT(gbc.pc(), 0x2a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01CF
        gbc.setState(0xc010, 0x7cf7, 0xbb80, 0xd688, 0xa17c, 0xc1b2, 0x1, 0x0);
        gbc.writeMem(0xc010, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7cf7);
        EXPECT(gbc.pc(), 0xc012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc010), 0xcb);
        EXPECT(gbc.readMem(0xc011), 0xb7);
        // CB B7 01D1
        gbc.setState(0x6904, 0xc871, 0x5300, 0xb90f, 0x85b3, 0xecb0, 0x0, 0x0);
        gbc.writeMem(0x6904, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc871);
        EXPECT(gbc.pc(), 0x6906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01D2
        gbc.setState(0xa1b8, 0x6593, 0xe660, 0xb9d6, 0x8a6, 0xddf8, 0x0, 0x1);
        gbc.writeMem(0xa1b8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6593);
        EXPECT(gbc.pc(), 0xa1ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b8), 0xcb);
        EXPECT(gbc.readMem(0xa1b9), 0xb7);
        // CB B7 01D3
        gbc.setState(0x8d63, 0x5d30, 0xe490, 0xa886, 0x4d46, 0x6225, 0x1, 0x1);
        gbc.writeMem(0x8d63, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5d30);
        EXPECT(gbc.pc(), 0x8d65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d63), 0xcb);
        EXPECT(gbc.readMem(0x8d64), 0xb7);
        // CB B7 01D4
        gbc.setState(0xd00b, 0x71af, 0x99d0, 0x9e5e, 0x6e01, 0x5b38, 0x0, 0x1);
        gbc.writeMem(0xd00b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x71af);
        EXPECT(gbc.pc(), 0xd00d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd00b), 0xcb);
        EXPECT(gbc.readMem(0xd00c), 0xb7);
        // CB B7 01D5
        gbc.setState(0xb304, 0x95b6, 0x9c0, 0x52f8, 0x5d9b, 0x7677, 0x1, 0x0);
        gbc.writeMem(0xb304, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x95b6);
        EXPECT(gbc.pc(), 0xb306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb304), 0xcb);
        EXPECT(gbc.readMem(0xb305), 0xb7);
        // CB B7 01D6
        gbc.setState(0x7fa2, 0x6b0f, 0xabf0, 0xe0, 0x2f7d, 0x90f8, 0x1, 0x0);
        gbc.writeMem(0x7fa2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6b0f);
        EXPECT(gbc.pc(), 0x7fa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01D8
        gbc.setState(0xb539, 0x72d, 0x5a70, 0x3b6c, 0x51f5, 0x5f61, 0x1, 0x0);
        gbc.writeMem(0xb539, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x72d);
        EXPECT(gbc.pc(), 0xb53b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb539), 0xcb);
        EXPECT(gbc.readMem(0xb53a), 0xb7);
        // CB B7 01D9
        gbc.setState(0xc455, 0x4491, 0xd7f0, 0xb1a2, 0x1cfc, 0xf502, 0x1, 0x1);
        gbc.writeMem(0xc455, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4491);
        EXPECT(gbc.pc(), 0xc457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc455), 0xcb);
        EXPECT(gbc.readMem(0xc456), 0xb7);
        // CB B7 01DA
        gbc.setState(0x66a, 0x2137, 0x9000, 0x9a87, 0x54d6, 0x7d24, 0x1, 0x0);
        gbc.writeMem(0x66a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2137);
        EXPECT(gbc.pc(), 0x66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01DB
        gbc.setState(0xa2ab, 0xf8c8, 0xa9d0, 0xdde3, 0xe663, 0xd233, 0x1, 0x1);
        gbc.writeMem(0xa2ab, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf8c8);
        EXPECT(gbc.pc(), 0xa2ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ab), 0xcb);
        EXPECT(gbc.readMem(0xa2ac), 0xb7);
        // CB B7 01DC
        gbc.setState(0x7f82, 0xf61a, 0x75c0, 0x7844, 0x90d, 0xca3a, 0x1, 0x0);
        gbc.writeMem(0x7f82, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf61a);
        EXPECT(gbc.pc(), 0x7f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01DD
        gbc.setState(0x2db5, 0x87c9, 0x89b0, 0xd5b0, 0xcdef, 0xf7ba, 0x1, 0x1);
        gbc.writeMem(0x2db5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x87c9);
        EXPECT(gbc.pc(), 0x2db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01DE
        gbc.setState(0xe71e, 0xa6ac, 0x4b40, 0xa9f7, 0x7750, 0xd705, 0x1, 0x0);
        gbc.writeMem(0xe71e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa6ac);
        EXPECT(gbc.pc(), 0xe720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe71e), 0xcb);
        EXPECT(gbc.readMem(0xe71f), 0xb7);
        // CB B7 01DF
        gbc.setState(0x3726, 0x5e01, 0x70b0, 0x3b1f, 0x78a8, 0xf334, 0x1, 0x1);
        gbc.writeMem(0x3726, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5e01);
        EXPECT(gbc.pc(), 0x3728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01E0
        gbc.setState(0x6819, 0xbe05, 0xe220, 0xc251, 0x4718, 0xb86f, 0x0, 0x0);
        gbc.writeMem(0x6819, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbe05);
        EXPECT(gbc.pc(), 0x681b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01E1
        gbc.setState(0xdb68, 0x6ea8, 0x370, 0xbc5f, 0xac11, 0x4bff, 0x1, 0x1);
        gbc.writeMem(0xdb68, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6ea8);
        EXPECT(gbc.pc(), 0xdb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb68), 0xcb);
        EXPECT(gbc.readMem(0xdb69), 0xb7);
        // CB B7 01E3
        gbc.setState(0x810c, 0xd13c, 0x3100, 0x5438, 0xea3b, 0x726, 0x0, 0x1);
        gbc.writeMem(0x810c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd13c);
        EXPECT(gbc.pc(), 0x810e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810c), 0xcb);
        EXPECT(gbc.readMem(0x810d), 0xb7);
        // CB B7 01E4
        gbc.setState(0x2a7d, 0x816c, 0x9df0, 0xdb06, 0xea99, 0xb764, 0x0, 0x0);
        gbc.writeMem(0x2a7d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x816c);
        EXPECT(gbc.pc(), 0x2a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01E5
        gbc.setState(0xecd8, 0x8ddb, 0xe380, 0x9b78, 0x1766, 0xbbac, 0x0, 0x1);
        gbc.writeMem(0xecd8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8ddb);
        EXPECT(gbc.pc(), 0xecda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd8), 0xcb);
        EXPECT(gbc.readMem(0xecd9), 0xb7);
        // CB B7 01E6
        gbc.setState(0x6d2e, 0xbf73, 0x8f70, 0x35d, 0x6d75, 0x8ba8, 0x0, 0x0);
        gbc.writeMem(0x6d2e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xbf73);
        EXPECT(gbc.pc(), 0x6d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01E7
        gbc.setState(0xaaba, 0xe5ce, 0x71b0, 0xf35, 0xe96d, 0x51ed, 0x1, 0x1);
        gbc.writeMem(0xaaba, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe5ce);
        EXPECT(gbc.pc(), 0xaabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaba), 0xcb);
        EXPECT(gbc.readMem(0xaabb), 0xb7);
        // CB B7 01E8
        gbc.setState(0x3278, 0x1e47, 0x36b0, 0x2808, 0x69e5, 0x8f7, 0x1, 0x0);
        gbc.writeMem(0x3278, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1e47);
        EXPECT(gbc.pc(), 0x327a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01E9
        gbc.setState(0x1d29, 0x5ba9, 0x3a40, 0xde7e, 0xff1f, 0x19fb, 0x0, 0x1);
        gbc.writeMem(0x1d29, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5ba9);
        EXPECT(gbc.pc(), 0x1d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01EA
        gbc.setState(0x411, 0xb452, 0x8b90, 0x2106, 0xc2a3, 0xb14a, 0x0, 0x0);
        gbc.writeMem(0x411, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb452);
        EXPECT(gbc.pc(), 0x413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01EB
        gbc.setState(0x71a8, 0x14a8, 0x800, 0xb206, 0x9098, 0x318, 0x0, 0x0);
        gbc.writeMem(0x71a8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x14a8);
        EXPECT(gbc.pc(), 0x71aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01EC
        gbc.setState(0x2cd8, 0x8a71, 0xe660, 0xfbad, 0x4586, 0x5cf, 0x1, 0x1);
        gbc.writeMem(0x2cd8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8a71);
        EXPECT(gbc.pc(), 0x2cda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01ED
        gbc.setState(0x6071, 0x3129, 0xb770, 0xd8f1, 0xd99d, 0x7591, 0x1, 0x1);
        gbc.writeMem(0x6071, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3129);
        EXPECT(gbc.pc(), 0x6073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01F0
        gbc.setState(0x7b3b, 0x3456, 0x7930, 0x7370, 0x538a, 0xe0a7, 0x0, 0x1);
        gbc.writeMem(0x7b3b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3456);
        EXPECT(gbc.pc(), 0x7b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01F1
        gbc.setState(0xcf25, 0x239, 0xe750, 0x8730, 0x5251, 0x630c, 0x0, 0x1);
        gbc.writeMem(0xcf25, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x239);
        EXPECT(gbc.pc(), 0xcf27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf25), 0xcb);
        EXPECT(gbc.readMem(0xcf26), 0xb7);
        // CB B7 01F2
        gbc.setState(0xe8ed, 0x9e23, 0x10d0, 0x6584, 0xecb4, 0x1de6, 0x0, 0x0);
        gbc.writeMem(0xe8ed, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9e23);
        EXPECT(gbc.pc(), 0xe8ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ed), 0xcb);
        EXPECT(gbc.readMem(0xe8ee), 0xb7);
        // CB B7 01F3
        gbc.setState(0x3916, 0xd24d, 0x5ca0, 0xf407, 0x62e0, 0x4429, 0x0, 0x1);
        gbc.writeMem(0x3916, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd24d);
        EXPECT(gbc.pc(), 0x3918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01F5
        gbc.setState(0x3e76, 0x92ed, 0x2c80, 0xc27, 0x6219, 0x7516, 0x1, 0x0);
        gbc.writeMem(0x3e76, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x92ed);
        EXPECT(gbc.pc(), 0x3e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 01F6
        gbc.setState(0xc49b, 0xe212, 0xabf0, 0x4bdb, 0xb942, 0xe38a, 0x1, 0x0);
        gbc.writeMem(0xc49b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe212);
        EXPECT(gbc.pc(), 0xc49d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc49b), 0xcb);
        EXPECT(gbc.readMem(0xc49c), 0xb7);
        // CB B7 01F7
        gbc.setState(0x3a85, 0xe75a, 0x9a10, 0x5dbe, 0xb911, 0xf077, 0x0, 0x1);
        gbc.writeMem(0x3a85, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe75a);
        EXPECT(gbc.pc(), 0x3a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01F8
        gbc.setState(0xb241, 0x951, 0x1d00, 0x876b, 0xcef4, 0x8a34, 0x0, 0x1);
        gbc.writeMem(0xb241, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x951);
        EXPECT(gbc.pc(), 0xb243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb241), 0xcb);
        EXPECT(gbc.readMem(0xb242), 0xb7);
        // CB B7 01F9
        gbc.setState(0x9a6c, 0x973, 0x63f0, 0xcb2d, 0xd70b, 0x3a7b, 0x1, 0x0);
        gbc.writeMem(0x9a6c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x973);
        EXPECT(gbc.pc(), 0x9a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a6c), 0xcb);
        EXPECT(gbc.readMem(0x9a6d), 0xb7);
        // CB B7 01FA
        gbc.setState(0x4065, 0x1fc9, 0x6b30, 0xd6fb, 0xa4d1, 0xd22f, 0x0, 0x1);
        gbc.writeMem(0x4065, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1fc9);
        EXPECT(gbc.pc(), 0x4067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01FB
        gbc.setState(0x6419, 0x366a, 0x1750, 0xa84, 0x2a91, 0x7891, 0x0, 0x1);
        gbc.writeMem(0x6419, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x366a);
        EXPECT(gbc.pc(), 0x641b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01FC
        gbc.setState(0x5dd2, 0x642b, 0x6990, 0x6673, 0x1d1a, 0x495c, 0x1, 0x1);
        gbc.writeMem(0x5dd2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x642b);
        EXPECT(gbc.pc(), 0x5dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01FD
        gbc.setState(0x7a20, 0x4186, 0x6190, 0x677c, 0x7194, 0x661, 0x1, 0x1);
        gbc.writeMem(0x7a20, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4186);
        EXPECT(gbc.pc(), 0x7a22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 01FE
        gbc.setState(0x9b36, 0x99e2, 0x61d0, 0xdd48, 0x532, 0xa12, 0x1, 0x0);
        gbc.writeMem(0x9b36, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x99e2);
        EXPECT(gbc.pc(), 0x9b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b36), 0xcb);
        EXPECT(gbc.readMem(0x9b37), 0xb7);
        // CB B7 01FF
        gbc.setState(0x6588, 0x1fc4, 0xe780, 0xf23c, 0x4db0, 0xfa51, 0x0, 0x0);
        gbc.writeMem(0x6588, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1fc4);
        EXPECT(gbc.pc(), 0x658a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0200
        gbc.setState(0x7ff5, 0xa2c6, 0x92c0, 0xd0a4, 0x9d67, 0xad85, 0x1, 0x1);
        gbc.writeMem(0x7ff5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa2c6);
        EXPECT(gbc.pc(), 0x7ff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0201
        gbc.setState(0x55ba, 0xed8b, 0xc550, 0x9da1, 0xb5a2, 0x1717, 0x0, 0x1);
        gbc.writeMem(0x55ba, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xed8b);
        EXPECT(gbc.pc(), 0x55bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0203
        gbc.setState(0x9606, 0xd3fb, 0x3160, 0x49f7, 0x9b9b, 0x2c24, 0x0, 0x1);
        gbc.writeMem(0x9606, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd3fb);
        EXPECT(gbc.pc(), 0x9608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9606), 0xcb);
        EXPECT(gbc.readMem(0x9607), 0xb7);
        // CB B7 0204
        gbc.setState(0xc95b, 0x1020, 0xfd30, 0x2b5a, 0x912b, 0xf53, 0x0, 0x1);
        gbc.writeMem(0xc95b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1020);
        EXPECT(gbc.pc(), 0xc95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95b), 0xcb);
        EXPECT(gbc.readMem(0xc95c), 0xb7);
        // CB B7 0205
        gbc.setState(0x1b93, 0xec10, 0xdb10, 0xa73d, 0xf695, 0x198a, 0x0, 0x1);
        gbc.writeMem(0x1b93, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xec10);
        EXPECT(gbc.pc(), 0x1b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0206
        gbc.setState(0x4537, 0xbddc, 0x1c70, 0xcf62, 0xbff, 0x58f5, 0x0, 0x0);
        gbc.writeMem(0x4537, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbddc);
        EXPECT(gbc.pc(), 0x4539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0207
        gbc.setState(0xee99, 0x8d80, 0xb80, 0x952b, 0xb3d7, 0x6795, 0x1, 0x1);
        gbc.writeMem(0xee99, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8d80);
        EXPECT(gbc.pc(), 0xee9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee99), 0xcb);
        EXPECT(gbc.readMem(0xee9a), 0xb7);
        // CB B7 0208
        gbc.setState(0x1280, 0xad12, 0xa4f0, 0xd177, 0x3ff8, 0x1e79, 0x0, 0x1);
        gbc.writeMem(0x1280, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xad12);
        EXPECT(gbc.pc(), 0x1282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0209
        gbc.setState(0x81a3, 0xec57, 0x8b80, 0xb3cc, 0x8e8d, 0x146b, 0x1, 0x1);
        gbc.writeMem(0x81a3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0x81a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a3), 0xcb);
        EXPECT(gbc.readMem(0x81a4), 0xb7);
        // CB B7 020A
        gbc.setState(0x6442, 0x9671, 0x4670, 0x33c7, 0xf8a7, 0xfee1, 0x0, 0x1);
        gbc.writeMem(0x6442, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9671);
        EXPECT(gbc.pc(), 0x6444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 020B
        gbc.setState(0x168a, 0x972b, 0x92e0, 0x5c1d, 0x5158, 0xc433, 0x0, 0x0);
        gbc.writeMem(0x168a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x972b);
        EXPECT(gbc.pc(), 0x168c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 020C
        gbc.setState(0x7afb, 0x8e5d, 0x4950, 0xea09, 0x6219, 0x37fc, 0x0, 0x1);
        gbc.writeMem(0x7afb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8e5d);
        EXPECT(gbc.pc(), 0x7afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 020D
        gbc.setState(0x72e7, 0x3516, 0xd730, 0xee97, 0xe91, 0x1611, 0x0, 0x1);
        gbc.writeMem(0x72e7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3516);
        EXPECT(gbc.pc(), 0x72e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 020E
        gbc.setState(0xe470, 0x7ccb, 0xc2f0, 0xd672, 0xc9ba, 0x3495, 0x0, 0x0);
        gbc.writeMem(0xe470, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7ccb);
        EXPECT(gbc.pc(), 0xe472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe470), 0xcb);
        EXPECT(gbc.readMem(0xe471), 0xb7);
        // CB B7 020F
        gbc.setState(0xd147, 0x5a34, 0x65a0, 0xd56, 0x32b, 0x2c53, 0x0, 0x1);
        gbc.writeMem(0xd147, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5a34);
        EXPECT(gbc.pc(), 0xd149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd147), 0xcb);
        EXPECT(gbc.readMem(0xd148), 0xb7);
        // CB B7 0210
        gbc.setState(0x3bfd, 0xaed5, 0x1550, 0xe22a, 0xcce4, 0xa99a, 0x0, 0x1);
        gbc.writeMem(0x3bfd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xaed5);
        EXPECT(gbc.pc(), 0x3bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0211
        gbc.setState(0xb25a, 0xf858, 0x2270, 0x9305, 0x43fe, 0xf787, 0x1, 0x0);
        gbc.writeMem(0xb25a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf858);
        EXPECT(gbc.pc(), 0xb25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25a), 0xcb);
        EXPECT(gbc.readMem(0xb25b), 0xb7);
        // CB B7 0212
        gbc.setState(0xed23, 0x5dde, 0xefb0, 0xce00, 0xa11b, 0x7fe2, 0x0, 0x0);
        gbc.writeMem(0xed23, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5dde);
        EXPECT(gbc.pc(), 0xed25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed23), 0xcb);
        EXPECT(gbc.readMem(0xed24), 0xb7);
        // CB B7 0213
        gbc.setState(0x211b, 0xbb80, 0x2840, 0xa375, 0xc8d7, 0xd809, 0x1, 0x1);
        gbc.writeMem(0x211b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbb80);
        EXPECT(gbc.pc(), 0x211d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0214
        gbc.setState(0x5b9b, 0x1614, 0xa6f0, 0xe72d, 0xcb85, 0x971e, 0x0, 0x0);
        gbc.writeMem(0x5b9b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1614);
        EXPECT(gbc.pc(), 0x5b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0215
        gbc.setState(0xc2c5, 0x87c7, 0x1970, 0x7c74, 0x3b60, 0x26b5, 0x0, 0x0);
        gbc.writeMem(0xc2c5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x87c7);
        EXPECT(gbc.pc(), 0xc2c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c5), 0xcb);
        EXPECT(gbc.readMem(0xc2c6), 0xb7);
        // CB B7 0216
        gbc.setState(0x16af, 0x65fa, 0x4750, 0xf69b, 0xebbb, 0xf507, 0x1, 0x0);
        gbc.writeMem(0x16af, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x65fa);
        EXPECT(gbc.pc(), 0x16b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0217
        gbc.setState(0x2484, 0x7b4c, 0xef80, 0xb39f, 0x9acb, 0x5d6a, 0x0, 0x0);
        gbc.writeMem(0x2484, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7b4c);
        EXPECT(gbc.pc(), 0x2486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0218
        gbc.setState(0x58cc, 0xe145, 0xde60, 0xe53b, 0x5ced, 0x1ee7, 0x0, 0x0);
        gbc.writeMem(0x58cc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe145);
        EXPECT(gbc.pc(), 0x58ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0219
        gbc.setState(0x41f2, 0x23bf, 0xc620, 0x631c, 0x4a8a, 0x581d, 0x1, 0x1);
        gbc.writeMem(0x41f2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x23bf);
        EXPECT(gbc.pc(), 0x41f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 021A
        gbc.setState(0x84c2, 0x23b1, 0x3d10, 0x3e4c, 0xc7c9, 0xb360, 0x1, 0x0);
        gbc.writeMem(0x84c2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x23b1);
        EXPECT(gbc.pc(), 0x84c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c2), 0xcb);
        EXPECT(gbc.readMem(0x84c3), 0xb7);
        // CB B7 021B
        gbc.setState(0x905a, 0xc5da, 0x4740, 0x4fa, 0xb489, 0x5ec, 0x1, 0x1);
        gbc.writeMem(0x905a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc5da);
        EXPECT(gbc.pc(), 0x905c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x905a), 0xcb);
        EXPECT(gbc.readMem(0x905b), 0xb7);
        // CB B7 021C
        gbc.setState(0x7653, 0x1667, 0xd720, 0xdb8e, 0x44ec, 0x4114, 0x1, 0x1);
        gbc.writeMem(0x7653, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1667);
        EXPECT(gbc.pc(), 0x7655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 021E
        gbc.setState(0x5134, 0xe9f1, 0x9f90, 0x10eb, 0x387b, 0xccf0, 0x1, 0x0);
        gbc.writeMem(0x5134, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe9f1);
        EXPECT(gbc.pc(), 0x5136);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 021F
        gbc.setState(0x9713, 0xa6ef, 0x36f0, 0x19a5, 0x80f8, 0x4933, 0x1, 0x0);
        gbc.writeMem(0x9713, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa6ef);
        EXPECT(gbc.pc(), 0x9715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9713), 0xcb);
        EXPECT(gbc.readMem(0x9714), 0xb7);
        // CB B7 0220
        gbc.setState(0xad34, 0x31a4, 0x7630, 0x13f0, 0xefa2, 0x4e3e, 0x0, 0x1);
        gbc.writeMem(0xad34, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x31a4);
        EXPECT(gbc.pc(), 0xad36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad34), 0xcb);
        EXPECT(gbc.readMem(0xad35), 0xb7);
        // CB B7 0221
        gbc.setState(0xe8ca, 0x688, 0xeff0, 0x3f0c, 0x574b, 0x4dae, 0x0, 0x1);
        gbc.writeMem(0xe8ca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x688);
        EXPECT(gbc.pc(), 0xe8cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ca), 0xcb);
        EXPECT(gbc.readMem(0xe8cb), 0xb7);
        // CB B7 0222
        gbc.setState(0x61bf, 0x8627, 0x59a0, 0x68df, 0x154e, 0xfc94, 0x1, 0x0);
        gbc.writeMem(0x61bf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8627);
        EXPECT(gbc.pc(), 0x61c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0223
        gbc.setState(0xc073, 0x823e, 0xf0f0, 0xbde7, 0x4d33, 0x5e09, 0x1, 0x1);
        gbc.writeMem(0xc073, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x823e);
        EXPECT(gbc.pc(), 0xc075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc073), 0xcb);
        EXPECT(gbc.readMem(0xc074), 0xb7);
        // CB B7 0224
        gbc.setState(0xdb74, 0x4597, 0x60, 0x5a7, 0x5d49, 0xb2cd, 0x0, 0x0);
        gbc.writeMem(0xdb74, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4597);
        EXPECT(gbc.pc(), 0xdb76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb74), 0xcb);
        EXPECT(gbc.readMem(0xdb75), 0xb7);
        // CB B7 0225
        gbc.setState(0xcecd, 0xc237, 0x950, 0x8008, 0x46b0, 0x5fa, 0x1, 0x1);
        gbc.writeMem(0xcecd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc237);
        EXPECT(gbc.pc(), 0xcecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcecd), 0xcb);
        EXPECT(gbc.readMem(0xcece), 0xb7);
        // CB B7 0226
        gbc.setState(0x8a33, 0x552, 0x6830, 0x6bc1, 0xb5a9, 0x96af, 0x1, 0x1);
        gbc.writeMem(0x8a33, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x552);
        EXPECT(gbc.pc(), 0x8a35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a33), 0xcb);
        EXPECT(gbc.readMem(0x8a34), 0xb7);
        // CB B7 0227
        gbc.setState(0x6c33, 0xd45f, 0x5420, 0x79e8, 0x1514, 0x5f81, 0x0, 0x0);
        gbc.writeMem(0x6c33, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd45f);
        EXPECT(gbc.pc(), 0x6c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0228
        gbc.setState(0x28a8, 0xde7c, 0x51a0, 0xa916, 0x3b54, 0x978f, 0x0, 0x0);
        gbc.writeMem(0x28a8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xde7c);
        EXPECT(gbc.pc(), 0x28aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0229
        gbc.setState(0xe4b5, 0xff26, 0xa270, 0x6430, 0x691a, 0xa2a2, 0x0, 0x0);
        gbc.writeMem(0xe4b5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xff26);
        EXPECT(gbc.pc(), 0xe4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b5), 0xcb);
        EXPECT(gbc.readMem(0xe4b6), 0xb7);
        // CB B7 022A
        gbc.setState(0x2cf7, 0x6b84, 0x2d70, 0x6d9d, 0x92f5, 0x4a1f, 0x1, 0x1);
        gbc.writeMem(0x2cf7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6b84);
        EXPECT(gbc.pc(), 0x2cf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 022B
        gbc.setState(0x47ee, 0x3517, 0xd8f0, 0xf9ba, 0xc1cc, 0xba2c, 0x0, 0x1);
        gbc.writeMem(0x47ee, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3517);
        EXPECT(gbc.pc(), 0x47f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 022C
        gbc.setState(0xe60f, 0xaf29, 0x2f30, 0x621, 0x8ccf, 0xfe70, 0x1, 0x1);
        gbc.writeMem(0xe60f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xaf29);
        EXPECT(gbc.pc(), 0xe611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe60f), 0xcb);
        EXPECT(gbc.readMem(0xe610), 0xb7);
        // CB B7 022D
        gbc.setState(0x97dd, 0x4608, 0x3420, 0xccad, 0x1e5d, 0x880c, 0x0, 0x1);
        gbc.writeMem(0x97dd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4608);
        EXPECT(gbc.pc(), 0x97df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97dd), 0xcb);
        EXPECT(gbc.readMem(0x97de), 0xb7);
        // CB B7 022E
        gbc.setState(0xa202, 0x328e, 0xa940, 0x9027, 0x2e2, 0xb101, 0x1, 0x1);
        gbc.writeMem(0xa202, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x328e);
        EXPECT(gbc.pc(), 0xa204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa202), 0xcb);
        EXPECT(gbc.readMem(0xa203), 0xb7);
        // CB B7 0230
        gbc.setState(0xe056, 0x43e6, 0x2a10, 0xa155, 0x7a15, 0xb4a5, 0x0, 0x0);
        gbc.writeMem(0xe056, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x43e6);
        EXPECT(gbc.pc(), 0xe058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe056), 0xcb);
        EXPECT(gbc.readMem(0xe057), 0xb7);
        // CB B7 0231
        gbc.setState(0x1285, 0xb366, 0xda00, 0x181f, 0x3f53, 0x8af7, 0x0, 0x0);
        gbc.writeMem(0x1285, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb366);
        EXPECT(gbc.pc(), 0x1287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0232
        gbc.setState(0x7572, 0xdd19, 0xeab0, 0x43c1, 0x4b1a, 0xa6e5, 0x1, 0x0);
        gbc.writeMem(0x7572, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdd19);
        EXPECT(gbc.pc(), 0x7574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0233
        gbc.setState(0x375a, 0x3a0d, 0x36d0, 0xa6f7, 0x6c69, 0x3670, 0x1, 0x1);
        gbc.writeMem(0x375a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3a0d);
        EXPECT(gbc.pc(), 0x375c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0234
        gbc.setState(0x475d, 0x2291, 0x6b0, 0x2203, 0x6e33, 0x7ebe, 0x0, 0x1);
        gbc.writeMem(0x475d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2291);
        EXPECT(gbc.pc(), 0x475f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0235
        gbc.setState(0x23b6, 0x58e7, 0x7a70, 0x691e, 0xa9ad, 0x1322, 0x0, 0x1);
        gbc.writeMem(0x23b6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x58e7);
        EXPECT(gbc.pc(), 0x23b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0236
        gbc.setState(0x8f7b, 0xc11b, 0x33d0, 0x4cfc, 0xa096, 0xd7bd, 0x1, 0x0);
        gbc.writeMem(0x8f7b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc11b);
        EXPECT(gbc.pc(), 0x8f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f7b), 0xcb);
        EXPECT(gbc.readMem(0x8f7c), 0xb7);
        // CB B7 0237
        gbc.setState(0xd09, 0x13c2, 0x260, 0x1b25, 0xea18, 0x7d41, 0x0, 0x0);
        gbc.writeMem(0xd09, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x13c2);
        EXPECT(gbc.pc(), 0xd0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0238
        gbc.setState(0xe1c2, 0xa74e, 0xba70, 0x4603, 0x4e96, 0x2942, 0x1, 0x0);
        gbc.writeMem(0xe1c2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa74e);
        EXPECT(gbc.pc(), 0xe1c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c2), 0xcb);
        EXPECT(gbc.readMem(0xe1c3), 0xb7);
        // CB B7 0239
        gbc.setState(0x6306, 0x8075, 0x480, 0x6458, 0xaf21, 0x34d8, 0x0, 0x0);
        gbc.writeMem(0x6306, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8075);
        EXPECT(gbc.pc(), 0x6308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 023A
        gbc.setState(0xdad, 0x34dc, 0x22f0, 0xde9d, 0x2050, 0x5330, 0x1, 0x1);
        gbc.writeMem(0xdad, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x34dc);
        EXPECT(gbc.pc(), 0xdaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 023C
        gbc.setState(0xb450, 0xe0d2, 0xf3a0, 0xa49f, 0x2bb9, 0xb77f, 0x0, 0x0);
        gbc.writeMem(0xb450, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe0d2);
        EXPECT(gbc.pc(), 0xb452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb450), 0xcb);
        EXPECT(gbc.readMem(0xb451), 0xb7);
        // CB B7 023D
        gbc.setState(0x5287, 0x12ce, 0xe370, 0x79ed, 0xde33, 0x40ea, 0x1, 0x1);
        gbc.writeMem(0x5287, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x12ce);
        EXPECT(gbc.pc(), 0x5289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 023E
        gbc.setState(0x7ca1, 0x1969, 0x8a70, 0x3520, 0xbf68, 0x3e4, 0x1, 0x0);
        gbc.writeMem(0x7ca1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1969);
        EXPECT(gbc.pc(), 0x7ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 023F
        gbc.setState(0x346e, 0x39a8, 0x7560, 0x384c, 0x7f28, 0xcc49, 0x1, 0x0);
        gbc.writeMem(0x346e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x39a8);
        EXPECT(gbc.pc(), 0x3470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0240
        gbc.setState(0x7dca, 0x6083, 0x5f70, 0xdac4, 0x83f1, 0x5330, 0x1, 0x1);
        gbc.writeMem(0x7dca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0x7dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0241
        gbc.setState(0x690a, 0xef5, 0x6eb0, 0x668a, 0x5493, 0xed73, 0x1, 0x0);
        gbc.writeMem(0x690a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xef5);
        EXPECT(gbc.pc(), 0x690c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0242
        gbc.setState(0x63fb, 0x790a, 0x2c0, 0x4ead, 0x62b2, 0x7d33, 0x1, 0x1);
        gbc.writeMem(0x63fb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x790a);
        EXPECT(gbc.pc(), 0x63fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0243
        gbc.setState(0x1d6, 0x2e63, 0x76b0, 0x622d, 0x2127, 0x4f8, 0x0, 0x1);
        gbc.writeMem(0x1d6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2e63);
        EXPECT(gbc.pc(), 0x1d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0244
        gbc.setState(0x4981, 0x26a6, 0x6a10, 0xa077, 0x1012, 0x91b, 0x1, 0x0);
        gbc.writeMem(0x4981, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x26a6);
        EXPECT(gbc.pc(), 0x4983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0245
        gbc.setState(0x1251, 0xc305, 0xd320, 0xef04, 0xd15a, 0x6ef2, 0x0, 0x1);
        gbc.writeMem(0x1251, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc305);
        EXPECT(gbc.pc(), 0x1253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0246
        gbc.setState(0xe307, 0x96d, 0x23e0, 0x42fb, 0xed84, 0x5248, 0x1, 0x0);
        gbc.writeMem(0xe307, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x96d);
        EXPECT(gbc.pc(), 0xe309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe307), 0xcb);
        EXPECT(gbc.readMem(0xe308), 0xb7);
        // CB B7 0247
        gbc.setState(0x10db, 0xc30, 0xe590, 0xaea7, 0x2fe7, 0x6d52, 0x1, 0x0);
        gbc.writeMem(0x10db, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc30);
        EXPECT(gbc.pc(), 0x10dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0248
        gbc.setState(0x46af, 0xedc4, 0xa9e0, 0xca7a, 0xf3f0, 0x65f8, 0x1, 0x1);
        gbc.writeMem(0x46af, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xedc4);
        EXPECT(gbc.pc(), 0x46b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0249
        gbc.setState(0x4b04, 0x2bd, 0xf170, 0x63f5, 0x55ef, 0xc05c, 0x0, 0x1);
        gbc.writeMem(0x4b04, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2bd);
        EXPECT(gbc.pc(), 0x4b06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 024A
        gbc.setState(0xb2, 0x840d, 0x6ff0, 0xf57f, 0x5763, 0x5564, 0x1, 0x1);
        gbc.writeMem(0xb2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x840d);
        EXPECT(gbc.pc(), 0xb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 024B
        gbc.setState(0x585b, 0x4aa7, 0xf3a0, 0x6c3e, 0x5924, 0x462c, 0x1, 0x0);
        gbc.writeMem(0x585b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4aa7);
        EXPECT(gbc.pc(), 0x585d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 024C
        gbc.setState(0x211c, 0xa7e2, 0xfe40, 0xf5b4, 0xe6a7, 0x6dd9, 0x1, 0x1);
        gbc.writeMem(0x211c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa7e2);
        EXPECT(gbc.pc(), 0x211e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 024D
        gbc.setState(0x7fdf, 0x96ef, 0x4b60, 0x5472, 0x8ff9, 0x7193, 0x1, 0x1);
        gbc.writeMem(0x7fdf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x96ef);
        EXPECT(gbc.pc(), 0x7fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 024E
        gbc.setState(0x3d3e, 0xd995, 0xa6d0, 0x87e0, 0xf191, 0xbbcc, 0x1, 0x1);
        gbc.writeMem(0x3d3e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd995);
        EXPECT(gbc.pc(), 0x3d40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 024F
        gbc.setState(0x3455, 0xc477, 0xac0, 0xfb6e, 0x2fd5, 0xdba, 0x0, 0x0);
        gbc.writeMem(0x3455, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc477);
        EXPECT(gbc.pc(), 0x3457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0250
        gbc.setState(0x65be, 0xcf78, 0xd260, 0x4229, 0x559f, 0x6f75, 0x1, 0x0);
        gbc.writeMem(0x65be, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xcf78);
        EXPECT(gbc.pc(), 0x65c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0251
        gbc.setState(0x6c83, 0x8c8c, 0x2790, 0x644f, 0x8d0d, 0x6d7d, 0x1, 0x0);
        gbc.writeMem(0x6c83, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8c8c);
        EXPECT(gbc.pc(), 0x6c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0252
        gbc.setState(0x2689, 0x3f31, 0xbfa0, 0xa37f, 0xeeea, 0x9b8e, 0x0, 0x1);
        gbc.writeMem(0x2689, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3f31);
        EXPECT(gbc.pc(), 0x268b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0254
        gbc.setState(0x101b, 0xd99b, 0x9eb0, 0x6338, 0x4ee2, 0x2fff, 0x0, 0x1);
        gbc.writeMem(0x101b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd99b);
        EXPECT(gbc.pc(), 0x101d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0255
        gbc.setState(0x5757, 0x84dd, 0x570, 0x50d7, 0x28ef, 0x1a4e, 0x0, 0x0);
        gbc.writeMem(0x5757, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x84dd);
        EXPECT(gbc.pc(), 0x5759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0257
        gbc.setState(0x84bf, 0xc4c3, 0xd7c0, 0xe0aa, 0x3ba8, 0xdb0, 0x1, 0x1);
        gbc.writeMem(0x84bf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc4c3);
        EXPECT(gbc.pc(), 0x84c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84bf), 0xcb);
        EXPECT(gbc.readMem(0x84c0), 0xb7);
        // CB B7 0258
        gbc.setState(0x5313, 0xd9dc, 0xf420, 0x7a7, 0xd1e, 0xefc3, 0x0, 0x1);
        gbc.writeMem(0x5313, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd9dc);
        EXPECT(gbc.pc(), 0x5315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0259
        gbc.setState(0x5796, 0x2ddb, 0x5c80, 0x5fb7, 0x487b, 0x7359, 0x1, 0x1);
        gbc.writeMem(0x5796, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2ddb);
        EXPECT(gbc.pc(), 0x5798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 025A
        gbc.setState(0xa217, 0x69db, 0x3b70, 0x58de, 0xdcab, 0x750b, 0x1, 0x1);
        gbc.writeMem(0xa217, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x69db);
        EXPECT(gbc.pc(), 0xa219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa217), 0xcb);
        EXPECT(gbc.readMem(0xa218), 0xb7);
        // CB B7 025B
        gbc.setState(0xe241, 0x369b, 0xb080, 0x15e4, 0x378a, 0xf25f, 0x1, 0x1);
        gbc.writeMem(0xe241, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x369b);
        EXPECT(gbc.pc(), 0xe243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe241), 0xcb);
        EXPECT(gbc.readMem(0xe242), 0xb7);
        // CB B7 025C
        gbc.setState(0x5d50, 0xadc3, 0x70b0, 0x8eea, 0x8523, 0x9100, 0x0, 0x0);
        gbc.writeMem(0x5d50, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xadc3);
        EXPECT(gbc.pc(), 0x5d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 025D
        gbc.setState(0x45e6, 0xfb15, 0x9320, 0xad85, 0x5c50, 0x76dc, 0x0, 0x1);
        gbc.writeMem(0x45e6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfb15);
        EXPECT(gbc.pc(), 0x45e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 025E
        gbc.setState(0x825e, 0xdee8, 0x15f0, 0x8d1a, 0x71e9, 0xbe8, 0x1, 0x0);
        gbc.writeMem(0x825e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xdee8);
        EXPECT(gbc.pc(), 0x8260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x825e), 0xcb);
        EXPECT(gbc.readMem(0x825f), 0xb7);
        // CB B7 025F
        gbc.setState(0x629e, 0x9075, 0x140, 0xa59, 0xeef4, 0x9caa, 0x1, 0x1);
        gbc.writeMem(0x629e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9075);
        EXPECT(gbc.pc(), 0x62a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0260
        gbc.setState(0xa956, 0x12c2, 0x1fc0, 0x95cd, 0x8e77, 0xfd2a, 0x0, 0x1);
        gbc.writeMem(0xa956, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x12c2);
        EXPECT(gbc.pc(), 0xa958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa956), 0xcb);
        EXPECT(gbc.readMem(0xa957), 0xb7);
        // CB B7 0261
        gbc.setState(0x2e37, 0xc1fd, 0x22f0, 0x98fb, 0xc1d4, 0x40aa, 0x1, 0x0);
        gbc.writeMem(0x2e37, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc1fd);
        EXPECT(gbc.pc(), 0x2e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0262
        gbc.setState(0x802a, 0xecab, 0xa9e0, 0xb624, 0xe473, 0xc7e3, 0x0, 0x0);
        gbc.writeMem(0x802a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xecab);
        EXPECT(gbc.pc(), 0x802c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802a), 0xcb);
        EXPECT(gbc.readMem(0x802b), 0xb7);
        // CB B7 0263
        gbc.setState(0xb20a, 0x76d4, 0xc3b0, 0x30e6, 0x7781, 0x4b37, 0x1, 0x1);
        gbc.writeMem(0xb20a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x76d4);
        EXPECT(gbc.pc(), 0xb20c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb20a), 0xcb);
        EXPECT(gbc.readMem(0xb20b), 0xb7);
        // CB B7 0264
        gbc.setState(0xcae5, 0x96ae, 0x1f00, 0xb505, 0xbae9, 0x904e, 0x1, 0x0);
        gbc.writeMem(0xcae5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x96ae);
        EXPECT(gbc.pc(), 0xcae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae5), 0xcb);
        EXPECT(gbc.readMem(0xcae6), 0xb7);
        // CB B7 0265
        gbc.setState(0x71c3, 0x35b3, 0x8880, 0x3bbf, 0x617b, 0xbfd0, 0x1, 0x1);
        gbc.writeMem(0x71c3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x35b3);
        EXPECT(gbc.pc(), 0x71c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0266
        gbc.setState(0x5f8d, 0xd4aa, 0x9000, 0x9818, 0xb33f, 0xd265, 0x0, 0x1);
        gbc.writeMem(0x5f8d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd4aa);
        EXPECT(gbc.pc(), 0x5f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0267
        gbc.setState(0xb3bb, 0x7ad2, 0x3250, 0xceb9, 0x21c8, 0x5b9e, 0x0, 0x1);
        gbc.writeMem(0xb3bb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7ad2);
        EXPECT(gbc.pc(), 0xb3bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3bb), 0xcb);
        EXPECT(gbc.readMem(0xb3bc), 0xb7);
        // CB B7 0268
        gbc.setState(0x2bce, 0x526, 0x170, 0x711a, 0x8407, 0xef46, 0x0, 0x1);
        gbc.writeMem(0x2bce, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x526);
        EXPECT(gbc.pc(), 0x2bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0269
        gbc.setState(0xa86, 0xa7bb, 0x0, 0xed5d, 0xfb38, 0x8c3d, 0x0, 0x1);
        gbc.writeMem(0xa86, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa7bb);
        EXPECT(gbc.pc(), 0xa88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 026A
        gbc.setState(0xdc64, 0xc878, 0x1320, 0x3aba, 0x7983, 0x4388, 0x1, 0x1);
        gbc.writeMem(0xdc64, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc878);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc64), 0xcb);
        EXPECT(gbc.readMem(0xdc65), 0xb7);
        // CB B7 026B
        gbc.setState(0x9c57, 0xb2d3, 0x1b50, 0x2a23, 0x2c32, 0x747e, 0x0, 0x0);
        gbc.writeMem(0x9c57, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb2d3);
        EXPECT(gbc.pc(), 0x9c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c57), 0xcb);
        EXPECT(gbc.readMem(0x9c58), 0xb7);
        // CB B7 026C
        gbc.setState(0x6530, 0x79e6, 0x4000, 0x5d9f, 0xb986, 0x6565, 0x0, 0x1);
        gbc.writeMem(0x6530, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x79e6);
        EXPECT(gbc.pc(), 0x6532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 026D
        gbc.setState(0x7439, 0x70ef, 0x9be0, 0xd9ea, 0x144b, 0xc13d, 0x1, 0x1);
        gbc.writeMem(0x7439, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x70ef);
        EXPECT(gbc.pc(), 0x743b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 026E
        gbc.setState(0x4827, 0x1374, 0xd880, 0x93b6, 0xad2a, 0xc7ad, 0x1, 0x1);
        gbc.writeMem(0x4827, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1374);
        EXPECT(gbc.pc(), 0x4829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 026F
        gbc.setState(0x9426, 0x8734, 0xd170, 0x5924, 0xc4e, 0xfd1a, 0x1, 0x0);
        gbc.writeMem(0x9426, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8734);
        EXPECT(gbc.pc(), 0x9428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9426), 0xcb);
        EXPECT(gbc.readMem(0x9427), 0xb7);
        // CB B7 0270
        gbc.setState(0x9f61, 0xe155, 0xedd0, 0x7c00, 0x26a4, 0x4db, 0x1, 0x1);
        gbc.writeMem(0x9f61, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe155);
        EXPECT(gbc.pc(), 0x9f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f61), 0xcb);
        EXPECT(gbc.readMem(0x9f62), 0xb7);
        // CB B7 0271
        gbc.setState(0x85fb, 0x9ec, 0x7da0, 0xb8da, 0x89e2, 0x11fa, 0x0, 0x0);
        gbc.writeMem(0x85fb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9ec);
        EXPECT(gbc.pc(), 0x85fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85fb), 0xcb);
        EXPECT(gbc.readMem(0x85fc), 0xb7);
        // CB B7 0272
        gbc.setState(0x1969, 0xf4cd, 0xe7c0, 0x3d54, 0xdacb, 0x9e8a, 0x1, 0x1);
        gbc.writeMem(0x1969, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf4cd);
        EXPECT(gbc.pc(), 0x196b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0273
        gbc.setState(0xa447, 0xa641, 0xe140, 0x4989, 0x9f50, 0x51e9, 0x1, 0x1);
        gbc.writeMem(0xa447, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa641);
        EXPECT(gbc.pc(), 0xa449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa447), 0xcb);
        EXPECT(gbc.readMem(0xa448), 0xb7);
        // CB B7 0274
        gbc.setState(0x9370, 0xec66, 0xb860, 0xc3f6, 0x676e, 0x4e0c, 0x0, 0x1);
        gbc.writeMem(0x9370, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xec66);
        EXPECT(gbc.pc(), 0x9372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9370), 0xcb);
        EXPECT(gbc.readMem(0x9371), 0xb7);
        // CB B7 0275
        gbc.setState(0x3b38, 0xef22, 0x16d0, 0x10c0, 0xd44a, 0x9128, 0x1, 0x0);
        gbc.writeMem(0x3b38, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xef22);
        EXPECT(gbc.pc(), 0x3b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0276
        gbc.setState(0x7aab, 0x8eaf, 0x2d10, 0x81a9, 0xdb22, 0x515d, 0x1, 0x0);
        gbc.writeMem(0x7aab, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8eaf);
        EXPECT(gbc.pc(), 0x7aad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0277
        gbc.setState(0x8c15, 0x8982, 0xc100, 0xc764, 0xc486, 0x5802, 0x0, 0x1);
        gbc.writeMem(0x8c15, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8982);
        EXPECT(gbc.pc(), 0x8c17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c15), 0xcb);
        EXPECT(gbc.readMem(0x8c16), 0xb7);
        // CB B7 0278
        gbc.setState(0xbf7, 0x19e6, 0xd840, 0xce61, 0x8df9, 0x5e24, 0x1, 0x1);
        gbc.writeMem(0xbf7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x19e6);
        EXPECT(gbc.pc(), 0xbf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0279
        gbc.setState(0xb2c4, 0xa7d4, 0xb530, 0xd57c, 0xb10e, 0x7e6b, 0x1, 0x0);
        gbc.writeMem(0xb2c4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa7d4);
        EXPECT(gbc.pc(), 0xb2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c4), 0xcb);
        EXPECT(gbc.readMem(0xb2c5), 0xb7);
        // CB B7 027A
        gbc.setState(0xcf51, 0xa30a, 0x2370, 0x4ff6, 0x3e11, 0x24a0, 0x1, 0x0);
        gbc.writeMem(0xcf51, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa30a);
        EXPECT(gbc.pc(), 0xcf53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf51), 0xcb);
        EXPECT(gbc.readMem(0xcf52), 0xb7);
        // CB B7 027B
        gbc.setState(0x7d1a, 0xac06, 0x7870, 0x8b1c, 0xab5f, 0xc620, 0x1, 0x0);
        gbc.writeMem(0x7d1a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xac06);
        EXPECT(gbc.pc(), 0x7d1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 027D
        gbc.setState(0x7175, 0x1764, 0x890, 0x921c, 0xf564, 0x4c0e, 0x0, 0x0);
        gbc.writeMem(0x7175, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1764);
        EXPECT(gbc.pc(), 0x7177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 027E
        gbc.setState(0xca94, 0x917f, 0xc410, 0x6371, 0xb72f, 0x89fc, 0x1, 0x0);
        gbc.writeMem(0xca94, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x917f);
        EXPECT(gbc.pc(), 0xca96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca94), 0xcb);
        EXPECT(gbc.readMem(0xca95), 0xb7);
        // CB B7 027F
        gbc.setState(0x1081, 0xa201, 0x4610, 0x7df7, 0x1bdc, 0xd56, 0x0, 0x1);
        gbc.writeMem(0x1081, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa201);
        EXPECT(gbc.pc(), 0x1083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0280
        gbc.setState(0x60ab, 0x833c, 0xcc40, 0x9de6, 0x9053, 0xcd11, 0x1, 0x0);
        gbc.writeMem(0x60ab, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x833c);
        EXPECT(gbc.pc(), 0x60ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0281
        gbc.setState(0xe2c3, 0xb36d, 0x6c00, 0x89a7, 0xf86, 0x6719, 0x1, 0x0);
        gbc.writeMem(0xe2c3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb36d);
        EXPECT(gbc.pc(), 0xe2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c3), 0xcb);
        EXPECT(gbc.readMem(0xe2c4), 0xb7);
        // CB B7 0282
        gbc.setState(0x884a, 0x846a, 0x7470, 0x53fc, 0x796c, 0x2429, 0x1, 0x0);
        gbc.writeMem(0x884a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x846a);
        EXPECT(gbc.pc(), 0x884c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884a), 0xcb);
        EXPECT(gbc.readMem(0x884b), 0xb7);
        // CB B7 0283
        gbc.setState(0x34e1, 0x131, 0xe5e0, 0xfa8e, 0x1cbd, 0x46d, 0x0, 0x0);
        gbc.writeMem(0x34e1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x131);
        EXPECT(gbc.pc(), 0x34e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0284
        gbc.setState(0xa1cf, 0x415a, 0x2630, 0x20da, 0xebc4, 0x6eb0, 0x0, 0x1);
        gbc.writeMem(0xa1cf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x415a);
        EXPECT(gbc.pc(), 0xa1d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1cf), 0xcb);
        EXPECT(gbc.readMem(0xa1d0), 0xb7);
        // CB B7 0285
        gbc.setState(0xecf7, 0x98ba, 0xed60, 0x6548, 0xa5a4, 0x65c3, 0x0, 0x1);
        gbc.writeMem(0xecf7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x98ba);
        EXPECT(gbc.pc(), 0xecf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf7), 0xcb);
        EXPECT(gbc.readMem(0xecf8), 0xb7);
        // CB B7 0286
        gbc.setState(0x99ba, 0x6d3, 0xc80, 0x8793, 0x73a2, 0xa10, 0x0, 0x1);
        gbc.writeMem(0x99ba, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6d3);
        EXPECT(gbc.pc(), 0x99bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ba), 0xcb);
        EXPECT(gbc.readMem(0x99bb), 0xb7);
        // CB B7 0288
        gbc.setState(0xdfbe, 0x864d, 0xda30, 0x33c, 0x2675, 0xf1, 0x0, 0x0);
        gbc.writeMem(0xdfbe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x864d);
        EXPECT(gbc.pc(), 0xdfc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfbe), 0xcb);
        EXPECT(gbc.readMem(0xdfbf), 0xb7);
        // CB B7 0289
        gbc.setState(0x155a, 0x6ade, 0x70f0, 0x3290, 0xabe8, 0xd25e, 0x1, 0x1);
        gbc.writeMem(0x155a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6ade);
        EXPECT(gbc.pc(), 0x155c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 028A
        gbc.setState(0x6a9f, 0xdb4b, 0xb2e0, 0x10da, 0xcda7, 0x74c, 0x1, 0x0);
        gbc.writeMem(0x6a9f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdb4b);
        EXPECT(gbc.pc(), 0x6aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 028B
        gbc.setState(0x6ae7, 0x9b97, 0x7610, 0x6c11, 0x6985, 0xee35, 0x0, 0x1);
        gbc.writeMem(0x6ae7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9b97);
        EXPECT(gbc.pc(), 0x6ae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 028C
        gbc.setState(0x7308, 0xce52, 0x9cc0, 0xb281, 0x8dab, 0x58c8, 0x1, 0x1);
        gbc.writeMem(0x7308, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xce52);
        EXPECT(gbc.pc(), 0x730a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 028D
        gbc.setState(0xa8c9, 0x6d54, 0x1900, 0xea8d, 0x33e8, 0x6dde, 0x1, 0x0);
        gbc.writeMem(0xa8c9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6d54);
        EXPECT(gbc.pc(), 0xa8cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c9), 0xcb);
        EXPECT(gbc.readMem(0xa8ca), 0xb7);
        // CB B7 028E
        gbc.setState(0x16ce, 0x7482, 0x7f0, 0x6848, 0x8fc7, 0xcc31, 0x0, 0x0);
        gbc.writeMem(0x16ce, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7482);
        EXPECT(gbc.pc(), 0x16d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 028F
        gbc.setState(0x272d, 0xd54d, 0x7330, 0xcbd5, 0x73dc, 0x1ab6, 0x0, 0x0);
        gbc.writeMem(0x272d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd54d);
        EXPECT(gbc.pc(), 0x272f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0290
        gbc.setState(0xba9, 0x7104, 0x7860, 0xaedf, 0x9447, 0x1fb5, 0x0, 0x0);
        gbc.writeMem(0xba9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7104);
        EXPECT(gbc.pc(), 0xbab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0291
        gbc.setState(0xd317, 0x4eba, 0xe3b0, 0xc048, 0xe97b, 0x7f5a, 0x0, 0x0);
        gbc.writeMem(0xd317, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4eba);
        EXPECT(gbc.pc(), 0xd319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd317), 0xcb);
        EXPECT(gbc.readMem(0xd318), 0xb7);
        // CB B7 0292
        gbc.setState(0x84d7, 0x35fa, 0xfe60, 0x1e41, 0x502f, 0x1442, 0x0, 0x1);
        gbc.writeMem(0x84d7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x35fa);
        EXPECT(gbc.pc(), 0x84d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d7), 0xcb);
        EXPECT(gbc.readMem(0x84d8), 0xb7);
        // CB B7 0293
        gbc.setState(0xb83c, 0x15fa, 0x4220, 0xd937, 0xb092, 0xefa6, 0x0, 0x1);
        gbc.writeMem(0xb83c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x15fa);
        EXPECT(gbc.pc(), 0xb83e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83c), 0xcb);
        EXPECT(gbc.readMem(0xb83d), 0xb7);
        // CB B7 0294
        gbc.setState(0xc606, 0x34da, 0x3240, 0x628f, 0xaa59, 0xa6e2, 0x0, 0x1);
        gbc.writeMem(0xc606, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x34da);
        EXPECT(gbc.pc(), 0xc608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc606), 0xcb);
        EXPECT(gbc.readMem(0xc607), 0xb7);
        // CB B7 0295
        gbc.setState(0x95d5, 0xeb6e, 0xa4a0, 0x6b56, 0xbe10, 0xe70, 0x1, 0x1);
        gbc.writeMem(0x95d5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xeb6e);
        EXPECT(gbc.pc(), 0x95d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d5), 0xcb);
        EXPECT(gbc.readMem(0x95d6), 0xb7);
        // CB B7 0296
        gbc.setState(0x67ee, 0xcbc4, 0x18b0, 0x2d1f, 0x4f82, 0xd9c9, 0x1, 0x1);
        gbc.writeMem(0x67ee, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcbc4);
        EXPECT(gbc.pc(), 0x67f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0297
        gbc.setState(0x5f6a, 0x38ea, 0x3b20, 0x7cb8, 0x1fb9, 0xa3bb, 0x0, 0x0);
        gbc.writeMem(0x5f6a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x38ea);
        EXPECT(gbc.pc(), 0x5f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0298
        gbc.setState(0xe030, 0x59d1, 0x50a0, 0xebcc, 0x88a0, 0xb5eb, 0x1, 0x1);
        gbc.writeMem(0xe030, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x59d1);
        EXPECT(gbc.pc(), 0xe032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe030), 0xcb);
        EXPECT(gbc.readMem(0xe031), 0xb7);
        // CB B7 029A
        gbc.setState(0x8489, 0x8185, 0xf400, 0xebe7, 0x843b, 0xa1a, 0x1, 0x0);
        gbc.writeMem(0x8489, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8185);
        EXPECT(gbc.pc(), 0x848b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8489), 0xcb);
        EXPECT(gbc.readMem(0x848a), 0xb7);
        // CB B7 029B
        gbc.setState(0xc22f, 0x7407, 0xb50, 0x67fb, 0x7fd7, 0x705a, 0x0, 0x0);
        gbc.writeMem(0xc22f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7407);
        EXPECT(gbc.pc(), 0xc231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc22f), 0xcb);
        EXPECT(gbc.readMem(0xc230), 0xb7);
        // CB B7 029C
        gbc.setState(0x5677, 0x4ea6, 0x370, 0x1533, 0xa499, 0x5e8e, 0x0, 0x1);
        gbc.writeMem(0x5677, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4ea6);
        EXPECT(gbc.pc(), 0x5679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 029D
        gbc.setState(0xd33c, 0xe2ad, 0xec0, 0xbe11, 0xd00d, 0xba04, 0x1, 0x0);
        gbc.writeMem(0xd33c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe2ad);
        EXPECT(gbc.pc(), 0xd33e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33c), 0xcb);
        EXPECT(gbc.readMem(0xd33d), 0xb7);
        // CB B7 029E
        gbc.setState(0x71d9, 0xdd20, 0x7e90, 0xd4c1, 0x2130, 0x8661, 0x0, 0x0);
        gbc.writeMem(0x71d9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdd20);
        EXPECT(gbc.pc(), 0x71db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 029F
        gbc.setState(0x637, 0xff24, 0x5120, 0xd8de, 0x4f0d, 0xd2e5, 0x0, 0x0);
        gbc.writeMem(0x637, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xff24);
        EXPECT(gbc.pc(), 0x639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02A0
        gbc.setState(0xecb2, 0x446d, 0xa780, 0x5a85, 0xb46, 0x42fc, 0x0, 0x0);
        gbc.writeMem(0xecb2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x446d);
        EXPECT(gbc.pc(), 0xecb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb2), 0xcb);
        EXPECT(gbc.readMem(0xecb3), 0xb7);
        // CB B7 02A1
        gbc.setState(0x884b, 0x4a20, 0x9b10, 0x30d5, 0x7972, 0x6876, 0x0, 0x0);
        gbc.writeMem(0x884b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4a20);
        EXPECT(gbc.pc(), 0x884d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884b), 0xcb);
        EXPECT(gbc.readMem(0x884c), 0xb7);
        // CB B7 02A2
        gbc.setState(0xb25b, 0xf816, 0x5190, 0x2378, 0xce62, 0xfd37, 0x1, 0x1);
        gbc.writeMem(0xb25b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf816);
        EXPECT(gbc.pc(), 0xb25d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25b), 0xcb);
        EXPECT(gbc.readMem(0xb25c), 0xb7);
        // CB B7 02A3
        gbc.setState(0x9ee3, 0xa4c6, 0x8b0, 0xa1f5, 0x787f, 0xe62c, 0x1, 0x0);
        gbc.writeMem(0x9ee3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa4c6);
        EXPECT(gbc.pc(), 0x9ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee3), 0xcb);
        EXPECT(gbc.readMem(0x9ee4), 0xb7);
        // CB B7 02A4
        gbc.setState(0x3b88, 0xb5d, 0xcc30, 0xb8d2, 0xd1ca, 0xa039, 0x0, 0x1);
        gbc.writeMem(0x3b88, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb5d);
        EXPECT(gbc.pc(), 0x3b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02A5
        gbc.setState(0xb5d3, 0x20d0, 0x5970, 0xf6c7, 0xb52d, 0x6754, 0x0, 0x0);
        gbc.writeMem(0xb5d3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x20d0);
        EXPECT(gbc.pc(), 0xb5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d3), 0xcb);
        EXPECT(gbc.readMem(0xb5d4), 0xb7);
        // CB B7 02A6
        gbc.setState(0x2267, 0x32e4, 0xf3c0, 0x8d0f, 0x7523, 0xee3a, 0x1, 0x1);
        gbc.writeMem(0x2267, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x32e4);
        EXPECT(gbc.pc(), 0x2269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02A7
        gbc.setState(0xd716, 0x6d77, 0xdd40, 0xec, 0xea5d, 0xfa66, 0x1, 0x1);
        gbc.writeMem(0xd716, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6d77);
        EXPECT(gbc.pc(), 0xd718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd716), 0xcb);
        EXPECT(gbc.readMem(0xd717), 0xb7);
        // CB B7 02A8
        gbc.setState(0x667b, 0xad99, 0xb50, 0xe0ca, 0xd3d9, 0xc305, 0x1, 0x1);
        gbc.writeMem(0x667b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xad99);
        EXPECT(gbc.pc(), 0x667d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02A9
        gbc.setState(0x1928, 0x2fe2, 0x3ec0, 0x101c, 0x8f1a, 0x7ff5, 0x0, 0x0);
        gbc.writeMem(0x1928, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2fe2);
        EXPECT(gbc.pc(), 0x192a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02AB
        gbc.setState(0xa7ad, 0xc566, 0xe000, 0x8edf, 0xf973, 0xfb7a, 0x0, 0x0);
        gbc.writeMem(0xa7ad, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc566);
        EXPECT(gbc.pc(), 0xa7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ad), 0xcb);
        EXPECT(gbc.readMem(0xa7ae), 0xb7);
        // CB B7 02AC
        gbc.setState(0xedf4, 0x501e, 0x66d0, 0xc27, 0x7505, 0x4b6c, 0x0, 0x1);
        gbc.writeMem(0xedf4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x501e);
        EXPECT(gbc.pc(), 0xedf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf4), 0xcb);
        EXPECT(gbc.readMem(0xedf5), 0xb7);
        // CB B7 02AE
        gbc.setState(0xe97a, 0xd73e, 0x6550, 0xe3de, 0xff8c, 0x617e, 0x1, 0x1);
        gbc.writeMem(0xe97a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd73e);
        EXPECT(gbc.pc(), 0xe97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe97a), 0xcb);
        EXPECT(gbc.readMem(0xe97b), 0xb7);
        // CB B7 02AF
        gbc.setState(0xbf9, 0x6297, 0x2bd0, 0x2e82, 0xa9ce, 0x4f90, 0x1, 0x0);
        gbc.writeMem(0xbf9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6297);
        EXPECT(gbc.pc(), 0xbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02B0
        gbc.setState(0x1534, 0xca94, 0xfdf0, 0x2166, 0xe913, 0xc86b, 0x0, 0x0);
        gbc.writeMem(0x1534, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xca94);
        EXPECT(gbc.pc(), 0x1536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02B1
        gbc.setState(0xd0f2, 0xa8f0, 0x2740, 0x66a9, 0x2ae4, 0x73b1, 0x0, 0x1);
        gbc.writeMem(0xd0f2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa8f0);
        EXPECT(gbc.pc(), 0xd0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f2), 0xcb);
        EXPECT(gbc.readMem(0xd0f3), 0xb7);
        // CB B7 02B2
        gbc.setState(0xb5e1, 0xf809, 0x1450, 0x67b4, 0x217f, 0xc005, 0x0, 0x1);
        gbc.writeMem(0xb5e1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf809);
        EXPECT(gbc.pc(), 0xb5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5e1), 0xcb);
        EXPECT(gbc.readMem(0xb5e2), 0xb7);
        // CB B7 02B3
        gbc.setState(0x9519, 0xfebd, 0x3ef0, 0xbbd9, 0x43f3, 0x57ce, 0x1, 0x0);
        gbc.writeMem(0x9519, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfebd);
        EXPECT(gbc.pc(), 0x951b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9519), 0xcb);
        EXPECT(gbc.readMem(0x951a), 0xb7);
        // CB B7 02B4
        gbc.setState(0x92f8, 0x5173, 0x2390, 0xe312, 0x343d, 0xcdd4, 0x0, 0x0);
        gbc.writeMem(0x92f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5173);
        EXPECT(gbc.pc(), 0x92fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92f8), 0xcb);
        EXPECT(gbc.readMem(0x92f9), 0xb7);
        // CB B7 02B6
        gbc.setState(0xc222, 0x6f8, 0xbd30, 0x30fc, 0x25c8, 0xad9d, 0x0, 0x0);
        gbc.writeMem(0xc222, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6f8);
        EXPECT(gbc.pc(), 0xc224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc222), 0xcb);
        EXPECT(gbc.readMem(0xc223), 0xb7);
        // CB B7 02B7
        gbc.setState(0x76b3, 0xad35, 0x43d0, 0x3f48, 0x7a19, 0xf389, 0x0, 0x0);
        gbc.writeMem(0x76b3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xad35);
        EXPECT(gbc.pc(), 0x76b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02B8
        gbc.setState(0xa85b, 0xde14, 0x86d0, 0x52b4, 0xd858, 0x8197, 0x1, 0x1);
        gbc.writeMem(0xa85b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xde14);
        EXPECT(gbc.pc(), 0xa85d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85b), 0xcb);
        EXPECT(gbc.readMem(0xa85c), 0xb7);
        // CB B7 02B9
        gbc.setState(0x676, 0x66b1, 0x50a0, 0x828c, 0x5bb6, 0x3ef7, 0x0, 0x0);
        gbc.writeMem(0x676, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x66b1);
        EXPECT(gbc.pc(), 0x678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02BA
        gbc.setState(0x4c3a, 0x5957, 0xa560, 0x9a92, 0x4d90, 0x462e, 0x0, 0x1);
        gbc.writeMem(0x4c3a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5957);
        EXPECT(gbc.pc(), 0x4c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02BB
        gbc.setState(0x575f, 0xba2b, 0x4c40, 0x5dd5, 0xd82, 0xfb37, 0x1, 0x0);
        gbc.writeMem(0x575f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xba2b);
        EXPECT(gbc.pc(), 0x5761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02BC
        gbc.setState(0xac87, 0xbfd1, 0xc670, 0xa0e5, 0x5527, 0x17ed, 0x0, 0x0);
        gbc.writeMem(0xac87, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbfd1);
        EXPECT(gbc.pc(), 0xac89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac87), 0xcb);
        EXPECT(gbc.readMem(0xac88), 0xb7);
        // CB B7 02BD
        gbc.setState(0x68b9, 0x5fea, 0xa5b0, 0x82db, 0xf66a, 0x6a5f, 0x0, 0x1);
        gbc.writeMem(0x68b9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5fea);
        EXPECT(gbc.pc(), 0x68bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02BE
        gbc.setState(0x60a9, 0x5a2c, 0x9940, 0x8651, 0x3448, 0xb10c, 0x0, 0x0);
        gbc.writeMem(0x60a9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5a2c);
        EXPECT(gbc.pc(), 0x60ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02BF
        gbc.setState(0x35f8, 0x6bb1, 0xbb60, 0xcf96, 0xda81, 0x2a84, 0x1, 0x0);
        gbc.writeMem(0x35f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6bb1);
        EXPECT(gbc.pc(), 0x35fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02C0
        gbc.setState(0xc8db, 0xa4a5, 0x8530, 0x837, 0x4c96, 0x4ea3, 0x1, 0x1);
        gbc.writeMem(0xc8db, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa4a5);
        EXPECT(gbc.pc(), 0xc8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8db), 0xcb);
        EXPECT(gbc.readMem(0xc8dc), 0xb7);
        // CB B7 02C1
        gbc.setState(0xdd78, 0xacb8, 0x200, 0x1a45, 0x9397, 0x19df, 0x0, 0x0);
        gbc.writeMem(0xdd78, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xacb8);
        EXPECT(gbc.pc(), 0xdd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd78), 0xcb);
        EXPECT(gbc.readMem(0xdd79), 0xb7);
        // CB B7 02C2
        gbc.setState(0x7d2c, 0xebc5, 0x2fb0, 0xcbf2, 0x4929, 0x7dca, 0x0, 0x0);
        gbc.writeMem(0x7d2c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xebc5);
        EXPECT(gbc.pc(), 0x7d2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02C3
        gbc.setState(0xd1ef, 0x65ba, 0x90e0, 0xe641, 0x5a46, 0x37b0, 0x1, 0x0);
        gbc.writeMem(0xd1ef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x65ba);
        EXPECT(gbc.pc(), 0xd1f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ef), 0xcb);
        EXPECT(gbc.readMem(0xd1f0), 0xb7);
        // CB B7 02C4
        gbc.setState(0x146a, 0x75d2, 0x2d90, 0x2cf6, 0xe0d4, 0xd58b, 0x0, 0x1);
        gbc.writeMem(0x146a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x75d2);
        EXPECT(gbc.pc(), 0x146c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02C6
        gbc.setState(0x6b98, 0x73bc, 0x66e0, 0x9bb2, 0x7ca7, 0x1f1f, 0x1, 0x1);
        gbc.writeMem(0x6b98, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x73bc);
        EXPECT(gbc.pc(), 0x6b9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02C7
        gbc.setState(0x88cc, 0x4320, 0x8cb0, 0xb337, 0x7a00, 0x8b71, 0x0, 0x0);
        gbc.writeMem(0x88cc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4320);
        EXPECT(gbc.pc(), 0x88ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cc), 0xcb);
        EXPECT(gbc.readMem(0x88cd), 0xb7);
        // CB B7 02C8
        gbc.setState(0x6505, 0x23be, 0xbce0, 0xbdae, 0x6f09, 0xa642, 0x1, 0x1);
        gbc.writeMem(0x6505, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x23be);
        EXPECT(gbc.pc(), 0x6507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02C9
        gbc.setState(0x79a0, 0x1091, 0x43f0, 0xfa4b, 0x33e7, 0xa06c, 0x1, 0x0);
        gbc.writeMem(0x79a0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x79a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02CA
        gbc.setState(0xea0f, 0xe412, 0xf5e0, 0x236f, 0xb5c0, 0x11cb, 0x0, 0x1);
        gbc.writeMem(0xea0f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe412);
        EXPECT(gbc.pc(), 0xea11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0f), 0xcb);
        EXPECT(gbc.readMem(0xea10), 0xb7);
        // CB B7 02CB
        gbc.setState(0x14f6, 0x8356, 0xd570, 0xe0b6, 0x1596, 0xc3da, 0x0, 0x1);
        gbc.writeMem(0x14f6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8356);
        EXPECT(gbc.pc(), 0x14f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02CC
        gbc.setState(0x685c, 0x97cf, 0xa240, 0xa4c7, 0xf254, 0x2225, 0x0, 0x0);
        gbc.writeMem(0x685c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x97cf);
        EXPECT(gbc.pc(), 0x685e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02CD
        gbc.setState(0xc6e2, 0x4c66, 0x5df0, 0x8369, 0xec28, 0x5335, 0x1, 0x0);
        gbc.writeMem(0xc6e2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4c66);
        EXPECT(gbc.pc(), 0xc6e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6e2), 0xcb);
        EXPECT(gbc.readMem(0xc6e3), 0xb7);
        // CB B7 02CE
        gbc.setState(0x6a4b, 0x246, 0xa520, 0x79a9, 0x5aa9, 0xd170, 0x1, 0x1);
        gbc.writeMem(0x6a4b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x246);
        EXPECT(gbc.pc(), 0x6a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02CF
        gbc.setState(0x79b3, 0x316a, 0xb070, 0x7034, 0x180d, 0x27ab, 0x1, 0x0);
        gbc.writeMem(0x79b3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x316a);
        EXPECT(gbc.pc(), 0x79b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02D0
        gbc.setState(0xb63a, 0xc851, 0x71d0, 0x62b7, 0x956b, 0xbd47, 0x0, 0x0);
        gbc.writeMem(0xb63a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc851);
        EXPECT(gbc.pc(), 0xb63c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb63a), 0xcb);
        EXPECT(gbc.readMem(0xb63b), 0xb7);
        // CB B7 02D1
        gbc.setState(0xbc48, 0x69d8, 0x5100, 0x19e9, 0x289d, 0x864, 0x1, 0x0);
        gbc.writeMem(0xbc48, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x69d8);
        EXPECT(gbc.pc(), 0xbc4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc48), 0xcb);
        EXPECT(gbc.readMem(0xbc49), 0xb7);
        // CB B7 02D2
        gbc.setState(0x4a87, 0x634, 0x1440, 0x896c, 0x9120, 0x8f4d, 0x0, 0x0);
        gbc.writeMem(0x4a87, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x634);
        EXPECT(gbc.pc(), 0x4a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02D3
        gbc.setState(0x9982, 0xb6b, 0x1040, 0x2dd6, 0x912, 0x297e, 0x0, 0x0);
        gbc.writeMem(0x9982, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb6b);
        EXPECT(gbc.pc(), 0x9984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9982), 0xcb);
        EXPECT(gbc.readMem(0x9983), 0xb7);
        // CB B7 02D4
        gbc.setState(0x4530, 0x1832, 0xa330, 0xe789, 0xbc6b, 0xff0f, 0x0, 0x1);
        gbc.writeMem(0x4530, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1832);
        EXPECT(gbc.pc(), 0x4532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02D5
        gbc.setState(0x2d0f, 0xe653, 0xe9e0, 0xd40b, 0xa557, 0xf041, 0x1, 0x1);
        gbc.writeMem(0x2d0f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe653);
        EXPECT(gbc.pc(), 0x2d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02D6
        gbc.setState(0xbbcb, 0x61, 0x3130, 0x14d5, 0xd8c5, 0x3c61, 0x0, 0x0);
        gbc.writeMem(0xbbcb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x61);
        EXPECT(gbc.pc(), 0xbbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbcb), 0xcb);
        EXPECT(gbc.readMem(0xbbcc), 0xb7);
        // CB B7 02D7
        gbc.setState(0xc947, 0x843e, 0x1700, 0x3dd3, 0x8cce, 0x42dd, 0x0, 0x0);
        gbc.writeMem(0xc947, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x843e);
        EXPECT(gbc.pc(), 0xc949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc947), 0xcb);
        EXPECT(gbc.readMem(0xc948), 0xb7);
        // CB B7 02D8
        gbc.setState(0x19d8, 0x2384, 0x6500, 0x8880, 0xf59b, 0x7b23, 0x0, 0x1);
        gbc.writeMem(0x19d8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2384);
        EXPECT(gbc.pc(), 0x19da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02D9
        gbc.setState(0xc297, 0x3d7e, 0x7800, 0x5ba2, 0x87e, 0x7e85, 0x0, 0x0);
        gbc.writeMem(0xc297, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3d7e);
        EXPECT(gbc.pc(), 0xc299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc297), 0xcb);
        EXPECT(gbc.readMem(0xc298), 0xb7);
        // CB B7 02DA
        gbc.setState(0xc88a, 0xdf62, 0xc9e0, 0xdd95, 0x4267, 0xa807, 0x0, 0x1);
        gbc.writeMem(0xc88a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdf62);
        EXPECT(gbc.pc(), 0xc88c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88a), 0xcb);
        EXPECT(gbc.readMem(0xc88b), 0xb7);
        // CB B7 02DC
        gbc.setState(0x456f, 0xe35f, 0x9340, 0x58a, 0x75ef, 0x94b4, 0x1, 0x1);
        gbc.writeMem(0x456f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe35f);
        EXPECT(gbc.pc(), 0x4571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02DD
        gbc.setState(0x5233, 0x8a40, 0xa9a0, 0x866f, 0x7120, 0x6cb3, 0x1, 0x1);
        gbc.writeMem(0x5233, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8a40);
        EXPECT(gbc.pc(), 0x5235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02DE
        gbc.setState(0x3ab0, 0xc1d, 0x3890, 0xa235, 0xdbf2, 0x9e7c, 0x0, 0x1);
        gbc.writeMem(0x3ab0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc1d);
        EXPECT(gbc.pc(), 0x3ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02DF
        gbc.setState(0x1b9d, 0xa17e, 0xa0b0, 0xb93c, 0x6d0, 0x6803, 0x1, 0x1);
        gbc.writeMem(0x1b9d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa17e);
        EXPECT(gbc.pc(), 0x1b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02E1
        gbc.setState(0xba68, 0x5b49, 0x4220, 0x7962, 0x6055, 0x2ff4, 0x1, 0x0);
        gbc.writeMem(0xba68, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5b49);
        EXPECT(gbc.pc(), 0xba6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba68), 0xcb);
        EXPECT(gbc.readMem(0xba69), 0xb7);
        // CB B7 02E2
        gbc.setState(0x981e, 0x4437, 0x3700, 0xd230, 0xefec, 0x12f6, 0x1, 0x0);
        gbc.writeMem(0x981e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4437);
        EXPECT(gbc.pc(), 0x9820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981e), 0xcb);
        EXPECT(gbc.readMem(0x981f), 0xb7);
        // CB B7 02E3
        gbc.setState(0xdf39, 0x10d3, 0xaee0, 0xd4c3, 0x185e, 0x3718, 0x1, 0x1);
        gbc.writeMem(0xdf39, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x10d3);
        EXPECT(gbc.pc(), 0xdf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf39), 0xcb);
        EXPECT(gbc.readMem(0xdf3a), 0xb7);
        // CB B7 02E4
        gbc.setState(0xa31a, 0xa782, 0xf070, 0x1be5, 0xbb03, 0xf0d4, 0x0, 0x1);
        gbc.writeMem(0xa31a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa782);
        EXPECT(gbc.pc(), 0xa31c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa31a), 0xcb);
        EXPECT(gbc.readMem(0xa31b), 0xb7);
        // CB B7 02E6
        gbc.setState(0x35dc, 0x3c5, 0x2710, 0x85e9, 0xa43d, 0x5891, 0x0, 0x1);
        gbc.writeMem(0x35dc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3c5);
        EXPECT(gbc.pc(), 0x35de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02E7
        gbc.setState(0xd73e, 0x35d2, 0xf240, 0x3b99, 0x89b3, 0x9da8, 0x0, 0x1);
        gbc.writeMem(0xd73e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x35d2);
        EXPECT(gbc.pc(), 0xd740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73e), 0xcb);
        EXPECT(gbc.readMem(0xd73f), 0xb7);
        // CB B7 02E8
        gbc.setState(0x8461, 0xb9b3, 0x260, 0x92aa, 0xc05d, 0xbd7e, 0x0, 0x0);
        gbc.writeMem(0x8461, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb9b3);
        EXPECT(gbc.pc(), 0x8463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8461), 0xcb);
        EXPECT(gbc.readMem(0x8462), 0xb7);
        // CB B7 02E9
        gbc.setState(0xcf7d, 0x1d71, 0xacb0, 0x9a83, 0x14c2, 0x4037, 0x1, 0x0);
        gbc.writeMem(0xcf7d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1d71);
        EXPECT(gbc.pc(), 0xcf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf7d), 0xcb);
        EXPECT(gbc.readMem(0xcf7e), 0xb7);
        // CB B7 02EB
        gbc.setState(0x2368, 0xd73e, 0x3ae0, 0xd4e4, 0xa1c8, 0xb854, 0x0, 0x0);
        gbc.writeMem(0x2368, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd73e);
        EXPECT(gbc.pc(), 0x236a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02EC
        gbc.setState(0x5612, 0x1e13, 0x6510, 0x612, 0x372, 0x2960, 0x1, 0x1);
        gbc.writeMem(0x5612, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1e13);
        EXPECT(gbc.pc(), 0x5614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02ED
        gbc.setState(0x4f98, 0x6190, 0x26b0, 0x17e9, 0x727f, 0xb5f9, 0x1, 0x0);
        gbc.writeMem(0x4f98, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6190);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02EE
        gbc.setState(0x2c63, 0x9400, 0x6090, 0xdb49, 0xce56, 0x691e, 0x1, 0x0);
        gbc.writeMem(0x2c63, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9400);
        EXPECT(gbc.pc(), 0x2c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02EF
        gbc.setState(0xe57f, 0xb79e, 0x6860, 0xe090, 0x6e51, 0x8759, 0x1, 0x0);
        gbc.writeMem(0xe57f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb79e);
        EXPECT(gbc.pc(), 0xe581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57f), 0xcb);
        EXPECT(gbc.readMem(0xe580), 0xb7);
        // CB B7 02F0
        gbc.setState(0xc0fe, 0x5ecb, 0x4d40, 0x25db, 0x5b23, 0xbdbc, 0x0, 0x0);
        gbc.writeMem(0xc0fe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5ecb);
        EXPECT(gbc.pc(), 0xc100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0fe), 0xcb);
        EXPECT(gbc.readMem(0xc0ff), 0xb7);
        // CB B7 02F1
        gbc.setState(0x3f90, 0xfd38, 0xaa50, 0xe0ce, 0xc1dd, 0xe915, 0x0, 0x1);
        gbc.writeMem(0x3f90, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfd38);
        EXPECT(gbc.pc(), 0x3f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02F2
        gbc.setState(0x8013, 0x2dec, 0xea90, 0x7b0a, 0xa55e, 0x9975, 0x1, 0x0);
        gbc.writeMem(0x8013, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2dec);
        EXPECT(gbc.pc(), 0x8015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8013), 0xcb);
        EXPECT(gbc.readMem(0x8014), 0xb7);
        // CB B7 02F3
        gbc.setState(0xc1b7, 0x292, 0x1280, 0x24f1, 0x98a2, 0x326c, 0x1, 0x1);
        gbc.writeMem(0xc1b7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x292);
        EXPECT(gbc.pc(), 0xc1b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b7), 0xcb);
        EXPECT(gbc.readMem(0xc1b8), 0xb7);
        // CB B7 02F4
        gbc.setState(0x722f, 0xaa4f, 0x63f0, 0x2a0b, 0x3308, 0x8616, 0x0, 0x0);
        gbc.writeMem(0x722f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xaa4f);
        EXPECT(gbc.pc(), 0x7231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02F5
        gbc.setState(0x6258, 0x9c32, 0x9ac0, 0xb086, 0xa64b, 0x7dfe, 0x1, 0x0);
        gbc.writeMem(0x6258, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9c32);
        EXPECT(gbc.pc(), 0x625a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02F6
        gbc.setState(0x5223, 0x7fe1, 0xa750, 0x7293, 0xaee6, 0xc2be, 0x1, 0x0);
        gbc.writeMem(0x5223, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7fe1);
        EXPECT(gbc.pc(), 0x5225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02F7
        gbc.setState(0xe588, 0xb787, 0x13b0, 0xd5c9, 0xc386, 0xbd69, 0x1, 0x0);
        gbc.writeMem(0xe588, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb787);
        EXPECT(gbc.pc(), 0xe58a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe588), 0xcb);
        EXPECT(gbc.readMem(0xe589), 0xb7);
        // CB B7 02F8
        gbc.setState(0x17df, 0x8971, 0x9f00, 0xa88, 0x4b04, 0x5a0b, 0x0, 0x1);
        gbc.writeMem(0x17df, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8971);
        EXPECT(gbc.pc(), 0x17e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02F9
        gbc.setState(0x6832, 0x2bd7, 0x8a30, 0xb8a0, 0x3f9, 0x9aac, 0x1, 0x0);
        gbc.writeMem(0x6832, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2bd7);
        EXPECT(gbc.pc(), 0x6834);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02FA
        gbc.setState(0x8fcc, 0x6769, 0x1eb0, 0xf2df, 0x227d, 0xa2b7, 0x0, 0x1);
        gbc.writeMem(0x8fcc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6769);
        EXPECT(gbc.pc(), 0x8fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fcc), 0xcb);
        EXPECT(gbc.readMem(0x8fcd), 0xb7);
        // CB B7 02FB
        gbc.setState(0xcc0e, 0xf278, 0xa630, 0x6fa1, 0x1227, 0x6047, 0x1, 0x1);
        gbc.writeMem(0xcc0e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf278);
        EXPECT(gbc.pc(), 0xcc10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc0e), 0xcb);
        EXPECT(gbc.readMem(0xcc0f), 0xb7);
        // CB B7 02FC
        gbc.setState(0x47d, 0x82b6, 0x70b0, 0x901a, 0x7a99, 0x73b0, 0x1, 0x1);
        gbc.writeMem(0x47d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x82b6);
        EXPECT(gbc.pc(), 0x47f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 02FD
        gbc.setState(0x5df0, 0x37a2, 0xce80, 0xe865, 0xefad, 0x81a6, 0x1, 0x1);
        gbc.writeMem(0x5df0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x37a2);
        EXPECT(gbc.pc(), 0x5df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 02FE
        gbc.setState(0x9ca6, 0x6c9e, 0x9e60, 0xd95d, 0x976d, 0xee24, 0x0, 0x1);
        gbc.writeMem(0x9ca6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6c9e);
        EXPECT(gbc.pc(), 0x9ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca6), 0xcb);
        EXPECT(gbc.readMem(0x9ca7), 0xb7);
        // CB B7 02FF
        gbc.setState(0x498a, 0x2cb1, 0x45f0, 0xd2ee, 0x7907, 0xd842, 0x1, 0x1);
        gbc.writeMem(0x498a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2cb1);
        EXPECT(gbc.pc(), 0x498c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0300
        gbc.setState(0xb2c5, 0x9462, 0x950, 0x61d4, 0xda77, 0xe37a, 0x0, 0x0);
        gbc.writeMem(0xb2c5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9462);
        EXPECT(gbc.pc(), 0xb2c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c5), 0xcb);
        EXPECT(gbc.readMem(0xb2c6), 0xb7);
        // CB B7 0301
        gbc.setState(0xb32, 0xbc1e, 0x1950, 0x7d99, 0x4a64, 0xab34, 0x0, 0x1);
        gbc.writeMem(0xb32, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbc1e);
        EXPECT(gbc.pc(), 0xb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0302
        gbc.setState(0xe4ef, 0xed1d, 0xef30, 0x4fae, 0x42a0, 0xbdd1, 0x1, 0x0);
        gbc.writeMem(0xe4ef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xed1d);
        EXPECT(gbc.pc(), 0xe4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ef), 0xcb);
        EXPECT(gbc.readMem(0xe4f0), 0xb7);
        // CB B7 0303
        gbc.setState(0x2961, 0x1979, 0x2d50, 0x27c9, 0xdb92, 0x9201, 0x1, 0x1);
        gbc.writeMem(0x2961, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1979);
        EXPECT(gbc.pc(), 0x2963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0304
        gbc.setState(0x3534, 0xa2d0, 0x5e70, 0x19b0, 0x74cf, 0x9e0, 0x0, 0x1);
        gbc.writeMem(0x3534, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa2d0);
        EXPECT(gbc.pc(), 0x3536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0305
        gbc.setState(0x8092, 0x74a0, 0xbd30, 0xbf1b, 0x5126, 0x318e, 0x1, 0x0);
        gbc.writeMem(0x8092, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x74a0);
        EXPECT(gbc.pc(), 0x8094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8092), 0xcb);
        EXPECT(gbc.readMem(0x8093), 0xb7);
        // CB B7 0307
        gbc.setState(0xf0, 0xda7d, 0x3640, 0x3e18, 0xb620, 0x362a, 0x0, 0x1);
        gbc.writeMem(0xf0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xda7d);
        EXPECT(gbc.pc(), 0xf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0308
        gbc.setState(0xc57, 0xd948, 0x72c0, 0x1185, 0xb360, 0x8eec, 0x0, 0x0);
        gbc.writeMem(0xc57, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd948);
        EXPECT(gbc.pc(), 0xc59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0309
        gbc.setState(0x5d5c, 0x1a72, 0xcad0, 0x879f, 0xcd27, 0xa1f7, 0x1, 0x0);
        gbc.writeMem(0x5d5c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1a72);
        EXPECT(gbc.pc(), 0x5d5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 030A
        gbc.setState(0x1ad7, 0x2f28, 0xf890, 0x7c5d, 0x64ed, 0xe6b1, 0x1, 0x0);
        gbc.writeMem(0x1ad7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2f28);
        EXPECT(gbc.pc(), 0x1ad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 030B
        gbc.setState(0x29e, 0x1344, 0xe5f0, 0xdeb, 0x3570, 0xaa5c, 0x1, 0x1);
        gbc.writeMem(0x29e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1344);
        EXPECT(gbc.pc(), 0x2a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 030C
        gbc.setState(0xb96d, 0x23e4, 0x2af0, 0x32e8, 0x1c84, 0x5851, 0x0, 0x1);
        gbc.writeMem(0xb96d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x23e4);
        EXPECT(gbc.pc(), 0xb96f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96d), 0xcb);
        EXPECT(gbc.readMem(0xb96e), 0xb7);
        // CB B7 030D
        gbc.setState(0x67c, 0x5828, 0x2440, 0x17ab, 0x34df, 0xf213, 0x0, 0x1);
        gbc.writeMem(0x67c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5828);
        EXPECT(gbc.pc(), 0x67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 030E
        gbc.setState(0xc7d1, 0xac64, 0x9b80, 0xfe63, 0x6eb2, 0xd81a, 0x1, 0x0);
        gbc.writeMem(0xc7d1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xac64);
        EXPECT(gbc.pc(), 0xc7d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d1), 0xcb);
        EXPECT(gbc.readMem(0xc7d2), 0xb7);
        // CB B7 0310
        gbc.setState(0x364f, 0x48d7, 0x9310, 0xd849, 0xe057, 0xacba, 0x1, 0x1);
        gbc.writeMem(0x364f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x48d7);
        EXPECT(gbc.pc(), 0x3651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0311
        gbc.setState(0x4d6c, 0xe860, 0xfbe0, 0x4cd, 0xb9b5, 0xb4fa, 0x1, 0x0);
        gbc.writeMem(0x4d6c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe860);
        EXPECT(gbc.pc(), 0x4d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0312
        gbc.setState(0x6708, 0xbd26, 0xaca0, 0x914, 0x9f9d, 0x8c60, 0x0, 0x0);
        gbc.writeMem(0x6708, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbd26);
        EXPECT(gbc.pc(), 0x670a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0313
        gbc.setState(0x4c2, 0x7ef2, 0x7200, 0xa15c, 0x2bc1, 0x6334, 0x0, 0x1);
        gbc.writeMem(0x4c2, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7ef2);
        EXPECT(gbc.pc(), 0x4c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0314
        gbc.setState(0x3d51, 0xebb1, 0x8b60, 0x8ec5, 0x1c76, 0xd3aa, 0x1, 0x0);
        gbc.writeMem(0x3d51, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xebb1);
        EXPECT(gbc.pc(), 0x3d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0315
        gbc.setState(0xc27c, 0x2708, 0x62e0, 0x657d, 0x19fa, 0xc548, 0x1, 0x1);
        gbc.writeMem(0xc27c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2708);
        EXPECT(gbc.pc(), 0xc27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27c), 0xcb);
        EXPECT(gbc.readMem(0xc27d), 0xb7);
        // CB B7 0316
        gbc.setState(0xe281, 0x8193, 0x17b0, 0xc519, 0x2eff, 0xa09c, 0x0, 0x1);
        gbc.writeMem(0xe281, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8193);
        EXPECT(gbc.pc(), 0xe283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe281), 0xcb);
        EXPECT(gbc.readMem(0xe282), 0xb7);
        // CB B7 0318
        gbc.setState(0x2df6, 0x8ef4, 0x1e90, 0x6419, 0x4ef4, 0xaba5, 0x0, 0x1);
        gbc.writeMem(0x2df6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8ef4);
        EXPECT(gbc.pc(), 0x2df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0319
        gbc.setState(0xcce8, 0xb671, 0x8820, 0x2c0d, 0x6495, 0x65e3, 0x0, 0x1);
        gbc.writeMem(0xcce8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb671);
        EXPECT(gbc.pc(), 0xccea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce8), 0xcb);
        EXPECT(gbc.readMem(0xcce9), 0xb7);
        // CB B7 031B
        gbc.setState(0xce1a, 0x1138, 0x5310, 0xcf18, 0xe466, 0x285c, 0x0, 0x0);
        gbc.writeMem(0xce1a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1138);
        EXPECT(gbc.pc(), 0xce1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce1a), 0xcb);
        EXPECT(gbc.readMem(0xce1b), 0xb7);
        // CB B7 031C
        gbc.setState(0x6692, 0x88ed, 0x42a0, 0x40b1, 0xda6d, 0x59f1, 0x1, 0x0);
        gbc.writeMem(0x6692, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x88ed);
        EXPECT(gbc.pc(), 0x6694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 031D
        gbc.setState(0x2a75, 0x374a, 0x2ea0, 0xd3f0, 0x9395, 0x2334, 0x1, 0x1);
        gbc.writeMem(0x2a75, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x374a);
        EXPECT(gbc.pc(), 0x2a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 031E
        gbc.setState(0x7ce7, 0xcd59, 0x74c0, 0xf028, 0xf8e4, 0xa64f, 0x0, 0x0);
        gbc.writeMem(0x7ce7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcd59);
        EXPECT(gbc.pc(), 0x7ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 031F
        gbc.setState(0xc70e, 0xa08, 0xed00, 0xf720, 0x2c6d, 0x5aae, 0x1, 0x1);
        gbc.writeMem(0xc70e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa08);
        EXPECT(gbc.pc(), 0xc710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70e), 0xcb);
        EXPECT(gbc.readMem(0xc70f), 0xb7);
        // CB B7 0320
        gbc.setState(0x7062, 0x2a6d, 0xb3c0, 0xca64, 0xc3a6, 0x23a5, 0x1, 0x1);
        gbc.writeMem(0x7062, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2a6d);
        EXPECT(gbc.pc(), 0x7064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0321
        gbc.setState(0x8280, 0xf1ab, 0xa3c0, 0x74e8, 0x1128, 0xfad0, 0x1, 0x0);
        gbc.writeMem(0x8280, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf1ab);
        EXPECT(gbc.pc(), 0x8282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8280), 0xcb);
        EXPECT(gbc.readMem(0x8281), 0xb7);
        // CB B7 0322
        gbc.setState(0x633b, 0xfe19, 0x9810, 0x499b, 0x98e2, 0x405f, 0x0, 0x1);
        gbc.writeMem(0x633b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfe19);
        EXPECT(gbc.pc(), 0x633d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0323
        gbc.setState(0x55c3, 0x21dd, 0xf3a0, 0x4924, 0x1f8b, 0xed6a, 0x1, 0x0);
        gbc.writeMem(0x55c3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x21dd);
        EXPECT(gbc.pc(), 0x55c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0324
        gbc.setState(0x25ef, 0xc872, 0x2690, 0xbcf6, 0xaa00, 0x16f4, 0x0, 0x0);
        gbc.writeMem(0x25ef, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc872);
        EXPECT(gbc.pc(), 0x25f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0325
        gbc.setState(0x96b1, 0xbc4e, 0xf490, 0x3bdc, 0xd6b0, 0xedf6, 0x1, 0x1);
        gbc.writeMem(0x96b1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbc4e);
        EXPECT(gbc.pc(), 0x96b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96b1), 0xcb);
        EXPECT(gbc.readMem(0x96b2), 0xb7);
        // CB B7 0326
        gbc.setState(0xc9b3, 0x7948, 0xc4b0, 0x2175, 0x8f7e, 0x838d, 0x1, 0x1);
        gbc.writeMem(0xc9b3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7948);
        EXPECT(gbc.pc(), 0xc9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b3), 0xcb);
        EXPECT(gbc.readMem(0xc9b4), 0xb7);
        // CB B7 0327
        gbc.setState(0x8917, 0x22f0, 0x51e0, 0x3e15, 0x3546, 0xa0c5, 0x0, 0x0);
        gbc.writeMem(0x8917, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x22f0);
        EXPECT(gbc.pc(), 0x8919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8917), 0xcb);
        EXPECT(gbc.readMem(0x8918), 0xb7);
        // CB B7 0328
        gbc.setState(0x8275, 0x2eee, 0x1b0, 0xfbd8, 0xb339, 0x25cc, 0x1, 0x1);
        gbc.writeMem(0x8275, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2eee);
        EXPECT(gbc.pc(), 0x8277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8275), 0xcb);
        EXPECT(gbc.readMem(0x8276), 0xb7);
        // CB B7 0329
        gbc.setState(0xc242, 0x8a6, 0xdc40, 0xa129, 0x95ff, 0x5271, 0x1, 0x0);
        gbc.writeMem(0xc242, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8a6);
        EXPECT(gbc.pc(), 0xc244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc242), 0xcb);
        EXPECT(gbc.readMem(0xc243), 0xb7);
        // CB B7 032A
        gbc.setState(0x3d0b, 0x7246, 0xace0, 0x269a, 0x2da0, 0xd2bc, 0x0, 0x1);
        gbc.writeMem(0x3d0b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7246);
        EXPECT(gbc.pc(), 0x3d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 032B
        gbc.setState(0xdeed, 0xbf3b, 0xf5e0, 0x1cb5, 0xce55, 0xe717, 0x1, 0x0);
        gbc.writeMem(0xdeed, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xbf3b);
        EXPECT(gbc.pc(), 0xdeef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeed), 0xcb);
        EXPECT(gbc.readMem(0xdeee), 0xb7);
        // CB B7 032C
        gbc.setState(0x93e4, 0x9238, 0xd6f0, 0xb2d3, 0x9ec6, 0x8f12, 0x1, 0x0);
        gbc.writeMem(0x93e4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0x93e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e4), 0xcb);
        EXPECT(gbc.readMem(0x93e5), 0xb7);
        // CB B7 032D
        gbc.setState(0xa041, 0xe416, 0xaa00, 0x476, 0xc0f3, 0xa26d, 0x0, 0x0);
        gbc.writeMem(0xa041, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe416);
        EXPECT(gbc.pc(), 0xa043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa041), 0xcb);
        EXPECT(gbc.readMem(0xa042), 0xb7);
        // CB B7 032E
        gbc.setState(0xa0a5, 0xfe1c, 0x1b00, 0x440e, 0x32c4, 0x8183, 0x0, 0x0);
        gbc.writeMem(0xa0a5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfe1c);
        EXPECT(gbc.pc(), 0xa0a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a5), 0xcb);
        EXPECT(gbc.readMem(0xa0a6), 0xb7);
        // CB B7 032F
        gbc.setState(0xdad5, 0xbe84, 0x79b0, 0x5716, 0x9ba8, 0x91cc, 0x1, 0x0);
        gbc.writeMem(0xdad5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbe84);
        EXPECT(gbc.pc(), 0xdad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdad5), 0xcb);
        EXPECT(gbc.readMem(0xdad6), 0xb7);
        // CB B7 0330
        gbc.setState(0xcbc1, 0xe239, 0xc7b0, 0xfbca, 0xf03e, 0x18ec, 0x0, 0x0);
        gbc.writeMem(0xcbc1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe239);
        EXPECT(gbc.pc(), 0xcbc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc1), 0xcb);
        EXPECT(gbc.readMem(0xcbc2), 0xb7);
        // CB B7 0331
        gbc.setState(0xdd07, 0xc91f, 0x8360, 0xd647, 0x4888, 0x37fd, 0x0, 0x1);
        gbc.writeMem(0xdd07, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc91f);
        EXPECT(gbc.pc(), 0xdd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd07), 0xcb);
        EXPECT(gbc.readMem(0xdd08), 0xb7);
        // CB B7 0332
        gbc.setState(0xdcf9, 0x688d, 0x6480, 0x328c, 0x1583, 0x4994, 0x0, 0x0);
        gbc.writeMem(0xdcf9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x688d);
        EXPECT(gbc.pc(), 0xdcfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf9), 0xcb);
        EXPECT(gbc.readMem(0xdcfa), 0xb7);
        // CB B7 0333
        gbc.setState(0x97a, 0xc156, 0xbc0, 0x4a5a, 0x4765, 0xedc0, 0x0, 0x0);
        gbc.writeMem(0x97a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc156);
        EXPECT(gbc.pc(), 0x97c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0334
        gbc.setState(0x77ea, 0xb85f, 0xd270, 0xba17, 0xf9a, 0x6553, 0x1, 0x0);
        gbc.writeMem(0x77ea, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb85f);
        EXPECT(gbc.pc(), 0x77ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0335
        gbc.setState(0x2fa4, 0xb5a0, 0x1c90, 0xd16b, 0x23f5, 0xfe5, 0x1, 0x0);
        gbc.writeMem(0x2fa4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb5a0);
        EXPECT(gbc.pc(), 0x2fa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0336
        gbc.setState(0x19ae, 0x8f45, 0x3130, 0x2fe1, 0xeed2, 0xd9c9, 0x0, 0x1);
        gbc.writeMem(0x19ae, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8f45);
        EXPECT(gbc.pc(), 0x19b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0337
        gbc.setState(0xec5d, 0xdbb1, 0x45d0, 0x41ec, 0x2c93, 0x783, 0x0, 0x0);
        gbc.writeMem(0xec5d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdbb1);
        EXPECT(gbc.pc(), 0xec5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5d), 0xcb);
        EXPECT(gbc.readMem(0xec5e), 0xb7);
        // CB B7 0338
        gbc.setState(0x6f95, 0xc4f9, 0x70d0, 0x8106, 0xd82b, 0x43ec, 0x1, 0x1);
        gbc.writeMem(0x6f95, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc4f9);
        EXPECT(gbc.pc(), 0x6f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0339
        gbc.setState(0xbd20, 0x1ce8, 0x6200, 0x82f1, 0x699c, 0xcd70, 0x0, 0x0);
        gbc.writeMem(0xbd20, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1ce8);
        EXPECT(gbc.pc(), 0xbd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd20), 0xcb);
        EXPECT(gbc.readMem(0xbd21), 0xb7);
        // CB B7 033A
        gbc.setState(0xb3f0, 0xddf7, 0x91a0, 0x8632, 0x7626, 0xedfc, 0x0, 0x0);
        gbc.writeMem(0xb3f0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xddf7);
        EXPECT(gbc.pc(), 0xb3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f0), 0xcb);
        EXPECT(gbc.readMem(0xb3f1), 0xb7);
        // CB B7 033B
        gbc.setState(0xc31d, 0x1b26, 0xf640, 0xe55a, 0xecfa, 0x56f6, 0x1, 0x1);
        gbc.writeMem(0xc31d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1b26);
        EXPECT(gbc.pc(), 0xc31f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31d), 0xcb);
        EXPECT(gbc.readMem(0xc31e), 0xb7);
        // CB B7 033C
        gbc.setState(0x4f36, 0x5c06, 0xa9f0, 0xb89b, 0xff93, 0x87ac, 0x1, 0x0);
        gbc.writeMem(0x4f36, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5c06);
        EXPECT(gbc.pc(), 0x4f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 033D
        gbc.setState(0x9854, 0xbc6f, 0x33a0, 0xd11b, 0x5a6e, 0x20e9, 0x1, 0x1);
        gbc.writeMem(0x9854, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbc6f);
        EXPECT(gbc.pc(), 0x9856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9854), 0xcb);
        EXPECT(gbc.readMem(0x9855), 0xb7);
        // CB B7 033F
        gbc.setState(0x8f1a, 0xaa26, 0x9180, 0x7ffc, 0xc643, 0x896f, 0x1, 0x0);
        gbc.writeMem(0x8f1a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0x8f1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f1a), 0xcb);
        EXPECT(gbc.readMem(0x8f1b), 0xb7);
        // CB B7 0340
        gbc.setState(0x7de4, 0x7e2d, 0x1e10, 0x2930, 0x7f8e, 0xd53e, 0x0, 0x1);
        gbc.writeMem(0x7de4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7e2d);
        EXPECT(gbc.pc(), 0x7de6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0341
        gbc.setState(0x7134, 0xb438, 0x9940, 0x7216, 0x560f, 0x70a6, 0x0, 0x0);
        gbc.writeMem(0x7134, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb438);
        EXPECT(gbc.pc(), 0x7136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0342
        gbc.setState(0x8969, 0x4e2a, 0xa130, 0xd2b2, 0xdb76, 0xb32, 0x0, 0x1);
        gbc.writeMem(0x8969, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4e2a);
        EXPECT(gbc.pc(), 0x896b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8969), 0xcb);
        EXPECT(gbc.readMem(0x896a), 0xb7);
        // CB B7 0343
        gbc.setState(0x9663, 0x658, 0xce90, 0x721e, 0x6a78, 0xc807, 0x0, 0x1);
        gbc.writeMem(0x9663, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x658);
        EXPECT(gbc.pc(), 0x9665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9663), 0xcb);
        EXPECT(gbc.readMem(0x9664), 0xb7);
        // CB B7 0344
        gbc.setState(0xcd89, 0x4845, 0x2560, 0x4a55, 0x73dd, 0xe81a, 0x0, 0x0);
        gbc.writeMem(0xcd89, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4845);
        EXPECT(gbc.pc(), 0xcd8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd89), 0xcb);
        EXPECT(gbc.readMem(0xcd8a), 0xb7);
        // CB B7 0345
        gbc.setState(0x887b, 0x12ca, 0xdcb0, 0x3907, 0xa924, 0x8d41, 0x0, 0x1);
        gbc.writeMem(0x887b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x12ca);
        EXPECT(gbc.pc(), 0x887d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887b), 0xcb);
        EXPECT(gbc.readMem(0x887c), 0xb7);
        // CB B7 0346
        gbc.setState(0x877c, 0xb9eb, 0xf680, 0x3fce, 0x1151, 0x716a, 0x1, 0x1);
        gbc.writeMem(0x877c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb9eb);
        EXPECT(gbc.pc(), 0x877e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877c), 0xcb);
        EXPECT(gbc.readMem(0x877d), 0xb7);
        // CB B7 0347
        gbc.setState(0xb276, 0x91d9, 0xad00, 0x30c3, 0xe4b3, 0xb76e, 0x0, 0x1);
        gbc.writeMem(0xb276, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x91d9);
        EXPECT(gbc.pc(), 0xb278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb276), 0xcb);
        EXPECT(gbc.readMem(0xb277), 0xb7);
        // CB B7 0349
        gbc.setState(0x9a72, 0x712b, 0x9f50, 0x4a03, 0x3b59, 0x1c6a, 0x1, 0x1);
        gbc.writeMem(0x9a72, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x712b);
        EXPECT(gbc.pc(), 0x9a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a72), 0xcb);
        EXPECT(gbc.readMem(0x9a73), 0xb7);
        // CB B7 034A
        gbc.setState(0x3434, 0xa406, 0x86a0, 0x2c21, 0x17ea, 0xd250, 0x0, 0x1);
        gbc.writeMem(0x3434, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa406);
        EXPECT(gbc.pc(), 0x3436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 034B
        gbc.setState(0x8bae, 0x5703, 0xbce0, 0xb947, 0xceef, 0x8bd0, 0x1, 0x0);
        gbc.writeMem(0x8bae, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5703);
        EXPECT(gbc.pc(), 0x8bb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bae), 0xcb);
        EXPECT(gbc.readMem(0x8baf), 0xb7);
        // CB B7 034C
        gbc.setState(0xe22c, 0x9a19, 0x8330, 0xb987, 0xcf1d, 0xf31, 0x1, 0x0);
        gbc.writeMem(0xe22c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9a19);
        EXPECT(gbc.pc(), 0xe22e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe22c), 0xcb);
        EXPECT(gbc.readMem(0xe22d), 0xb7);
        // CB B7 034D
        gbc.setState(0x9fb6, 0xbce9, 0x19d0, 0x83fa, 0xe913, 0x7b97, 0x1, 0x1);
        gbc.writeMem(0x9fb6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbce9);
        EXPECT(gbc.pc(), 0x9fb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb6), 0xcb);
        EXPECT(gbc.readMem(0x9fb7), 0xb7);
        // CB B7 034E
        gbc.setState(0x964, 0x6218, 0xc660, 0xcaf0, 0x627c, 0x42a7, 0x1, 0x1);
        gbc.writeMem(0x964, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6218);
        EXPECT(gbc.pc(), 0x966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 034F
        gbc.setState(0xb510, 0x6b53, 0xd110, 0xdcef, 0x937f, 0xf6b3, 0x1, 0x1);
        gbc.writeMem(0xb510, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6b53);
        EXPECT(gbc.pc(), 0xb512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb510), 0xcb);
        EXPECT(gbc.readMem(0xb511), 0xb7);
        // CB B7 0350
        gbc.setState(0xad5d, 0x433a, 0xe880, 0x6e25, 0xaf19, 0xdec1, 0x0, 0x0);
        gbc.writeMem(0xad5d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x433a);
        EXPECT(gbc.pc(), 0xad5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5d), 0xcb);
        EXPECT(gbc.readMem(0xad5e), 0xb7);
        // CB B7 0351
        gbc.setState(0xd5a7, 0x5789, 0xc9f0, 0xb3bd, 0x3026, 0xc26c, 0x0, 0x1);
        gbc.writeMem(0xd5a7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5789);
        EXPECT(gbc.pc(), 0xd5a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5a7), 0xcb);
        EXPECT(gbc.readMem(0xd5a8), 0xb7);
        // CB B7 0352
        gbc.setState(0x59aa, 0xa5d0, 0x63e0, 0x710f, 0xbfb9, 0xb8c7, 0x0, 0x0);
        gbc.writeMem(0x59aa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa5d0);
        EXPECT(gbc.pc(), 0x59ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0354
        gbc.setState(0x38fe, 0x727, 0x750, 0x5a2e, 0x2ba7, 0x3ac6, 0x1, 0x1);
        gbc.writeMem(0x38fe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x727);
        EXPECT(gbc.pc(), 0x3900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0355
        gbc.setState(0x85cc, 0xa6ca, 0x7ea0, 0x8748, 0x64e7, 0xbd00, 0x0, 0x1);
        gbc.writeMem(0x85cc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa6ca);
        EXPECT(gbc.pc(), 0x85ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85cc), 0xcb);
        EXPECT(gbc.readMem(0x85cd), 0xb7);
        // CB B7 0356
        gbc.setState(0x30f9, 0xefcc, 0x6990, 0xdcc, 0xa55e, 0xeee2, 0x1, 0x0);
        gbc.writeMem(0x30f9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xefcc);
        EXPECT(gbc.pc(), 0x30fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0357
        gbc.setState(0x8e72, 0x7f76, 0xb480, 0x1031, 0x7b7b, 0x65b8, 0x1, 0x0);
        gbc.writeMem(0x8e72, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7f76);
        EXPECT(gbc.pc(), 0x8e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e72), 0xcb);
        EXPECT(gbc.readMem(0x8e73), 0xb7);
        // CB B7 0358
        gbc.setState(0xae43, 0x20c6, 0x96f0, 0xa125, 0xaa23, 0xe1cf, 0x1, 0x1);
        gbc.writeMem(0xae43, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x20c6);
        EXPECT(gbc.pc(), 0xae45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae43), 0xcb);
        EXPECT(gbc.readMem(0xae44), 0xb7);
        // CB B7 0359
        gbc.setState(0x228, 0x3ebc, 0x3fe0, 0xeac, 0x76c, 0x1639, 0x0, 0x1);
        gbc.writeMem(0x228, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3ebc);
        EXPECT(gbc.pc(), 0x22a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 035A
        gbc.setState(0xa909, 0x66c4, 0xa620, 0x523b, 0x8cb5, 0x92ad, 0x0, 0x1);
        gbc.writeMem(0xa909, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x66c4);
        EXPECT(gbc.pc(), 0xa90b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa909), 0xcb);
        EXPECT(gbc.readMem(0xa90a), 0xb7);
        // CB B7 035B
        gbc.setState(0xe4ec, 0x6f92, 0x7590, 0xdead, 0x2064, 0xd4cc, 0x0, 0x1);
        gbc.writeMem(0xe4ec, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6f92);
        EXPECT(gbc.pc(), 0xe4ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ec), 0xcb);
        EXPECT(gbc.readMem(0xe4ed), 0xb7);
        // CB B7 035C
        gbc.setState(0x983a, 0x6f55, 0xa1d0, 0x25c0, 0xa319, 0x83be, 0x0, 0x0);
        gbc.writeMem(0x983a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6f55);
        EXPECT(gbc.pc(), 0x983c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x983a), 0xcb);
        EXPECT(gbc.readMem(0x983b), 0xb7);
        // CB B7 035D
        gbc.setState(0x7b1d, 0x602b, 0xac60, 0x8d34, 0xb8e8, 0x3d26, 0x1, 0x0);
        gbc.writeMem(0x7b1d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x602b);
        EXPECT(gbc.pc(), 0x7b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 035E
        gbc.setState(0x3e68, 0xe99a, 0x5880, 0xfde7, 0x5343, 0xd0a5, 0x0, 0x0);
        gbc.writeMem(0x3e68, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe99a);
        EXPECT(gbc.pc(), 0x3e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 035F
        gbc.setState(0xc08e, 0xf8b7, 0xa8a0, 0x46b, 0xb9dc, 0xf1cd, 0x0, 0x0);
        gbc.writeMem(0xc08e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf8b7);
        EXPECT(gbc.pc(), 0xc090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc08e), 0xcb);
        EXPECT(gbc.readMem(0xc08f), 0xb7);
        // CB B7 0360
        gbc.setState(0xb35a, 0xc0eb, 0x9e10, 0xaa57, 0x5559, 0x313f, 0x0, 0x1);
        gbc.writeMem(0xb35a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc0eb);
        EXPECT(gbc.pc(), 0xb35c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35a), 0xcb);
        EXPECT(gbc.readMem(0xb35b), 0xb7);
        // CB B7 0361
        gbc.setState(0xeb87, 0xd49, 0xb7e0, 0x1c69, 0xc04c, 0xf7dd, 0x1, 0x1);
        gbc.writeMem(0xeb87, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd49);
        EXPECT(gbc.pc(), 0xeb89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb87), 0xcb);
        EXPECT(gbc.readMem(0xeb88), 0xb7);
        // CB B7 0362
        gbc.setState(0x56e5, 0x42a8, 0xce80, 0x1c14, 0x226b, 0x74ff, 0x0, 0x0);
        gbc.writeMem(0x56e5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x42a8);
        EXPECT(gbc.pc(), 0x56e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0364
        gbc.setState(0x6a98, 0xa050, 0x5620, 0xb71b, 0xa3d, 0x4260, 0x1, 0x1);
        gbc.writeMem(0x6a98, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa050);
        EXPECT(gbc.pc(), 0x6a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0366
        gbc.setState(0x7f2a, 0xe12a, 0x3000, 0x9dc8, 0x68f, 0xe3b4, 0x1, 0x0);
        gbc.writeMem(0x7f2a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe12a);
        EXPECT(gbc.pc(), 0x7f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0367
        gbc.setState(0xf30, 0x2043, 0xbb30, 0x8adb, 0x4cf0, 0x60d3, 0x1, 0x0);
        gbc.writeMem(0xf30, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2043);
        EXPECT(gbc.pc(), 0xf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0368
        gbc.setState(0x7568, 0x5639, 0x2230, 0xaa33, 0x2321, 0xfd66, 0x0, 0x1);
        gbc.writeMem(0x7568, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5639);
        EXPECT(gbc.pc(), 0x756a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0369
        gbc.setState(0xea66, 0xb004, 0x6630, 0x7448, 0x46ee, 0xab6f, 0x1, 0x0);
        gbc.writeMem(0xea66, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb004);
        EXPECT(gbc.pc(), 0xea68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea66), 0xcb);
        EXPECT(gbc.readMem(0xea67), 0xb7);
        // CB B7 036A
        gbc.setState(0x4fa7, 0x4241, 0x4780, 0x27bd, 0x2b3e, 0x49cd, 0x1, 0x1);
        gbc.writeMem(0x4fa7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4241);
        EXPECT(gbc.pc(), 0x4fa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 036B
        gbc.setState(0x3997, 0xfb2c, 0x82f0, 0xca0a, 0x42d4, 0x6901, 0x0, 0x0);
        gbc.writeMem(0x3997, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfb2c);
        EXPECT(gbc.pc(), 0x3999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 036C
        gbc.setState(0x9378, 0x4236, 0x29c0, 0xc999, 0x759e, 0xbceb, 0x0, 0x0);
        gbc.writeMem(0x9378, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4236);
        EXPECT(gbc.pc(), 0x937a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9378), 0xcb);
        EXPECT(gbc.readMem(0x9379), 0xb7);
        // CB B7 036D
        gbc.setState(0x5a74, 0x4344, 0x7550, 0x1435, 0x1818, 0x66b1, 0x1, 0x0);
        gbc.writeMem(0x5a74, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4344);
        EXPECT(gbc.pc(), 0x5a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 036E
        gbc.setState(0x767c, 0xb0b8, 0x60, 0x37cc, 0x88f, 0xc63f, 0x1, 0x1);
        gbc.writeMem(0x767c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb0b8);
        EXPECT(gbc.pc(), 0x767e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 036F
        gbc.setState(0xd2e3, 0x16c8, 0x1300, 0x3f4e, 0x20fd, 0x9c2a, 0x0, 0x0);
        gbc.writeMem(0xd2e3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x16c8);
        EXPECT(gbc.pc(), 0xd2e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e3), 0xcb);
        EXPECT(gbc.readMem(0xd2e4), 0xb7);
        // CB B7 0370
        gbc.setState(0xd762, 0xf0d1, 0x3e60, 0xdd77, 0x66f1, 0x7706, 0x0, 0x1);
        gbc.writeMem(0xd762, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf0d1);
        EXPECT(gbc.pc(), 0xd764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd762), 0xcb);
        EXPECT(gbc.readMem(0xd763), 0xb7);
        // CB B7 0371
        gbc.setState(0x491f, 0xd0f1, 0xf770, 0x10dc, 0xe7e7, 0x4180, 0x0, 0x1);
        gbc.writeMem(0x491f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd0f1);
        EXPECT(gbc.pc(), 0x4921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0372
        gbc.setState(0xa5cf, 0xc79b, 0xde50, 0x4624, 0x622e, 0xf33f, 0x0, 0x0);
        gbc.writeMem(0xa5cf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc79b);
        EXPECT(gbc.pc(), 0xa5d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5cf), 0xcb);
        EXPECT(gbc.readMem(0xa5d0), 0xb7);
        // CB B7 0373
        gbc.setState(0x1ddc, 0x3e14, 0xc600, 0xc496, 0x6b53, 0x7a58, 0x1, 0x1);
        gbc.writeMem(0x1ddc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3e14);
        EXPECT(gbc.pc(), 0x1dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0374
        gbc.setState(0x6807, 0x410d, 0xe660, 0x8a1, 0xfbef, 0x1e8d, 0x1, 0x0);
        gbc.writeMem(0x6807, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x410d);
        EXPECT(gbc.pc(), 0x6809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0375
        gbc.setState(0x42f7, 0xae62, 0xbed0, 0x6a58, 0xe77a, 0x2cfb, 0x1, 0x0);
        gbc.writeMem(0x42f7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xae62);
        EXPECT(gbc.pc(), 0x42f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0376
        gbc.setState(0x65f9, 0x7a32, 0x7030, 0x3ee5, 0xd518, 0x7c97, 0x0, 0x1);
        gbc.writeMem(0x65f9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7a32);
        EXPECT(gbc.pc(), 0x65fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0377
        gbc.setState(0x82a0, 0x401b, 0x5260, 0xccd4, 0x2863, 0x81ec, 0x0, 0x1);
        gbc.writeMem(0x82a0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x401b);
        EXPECT(gbc.pc(), 0x82a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a0), 0xcb);
        EXPECT(gbc.readMem(0x82a1), 0xb7);
        // CB B7 0378
        gbc.setState(0x2c41, 0x6032, 0xdb80, 0x694f, 0xe817, 0xf312, 0x0, 0x1);
        gbc.writeMem(0x2c41, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6032);
        EXPECT(gbc.pc(), 0x2c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0379
        gbc.setState(0xa7bf, 0x8631, 0xeec0, 0xe106, 0xed8f, 0x916e, 0x0, 0x1);
        gbc.writeMem(0xa7bf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8631);
        EXPECT(gbc.pc(), 0xa7c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7bf), 0xcb);
        EXPECT(gbc.readMem(0xa7c0), 0xb7);
        // CB B7 037A
        gbc.setState(0x3f0e, 0x7b28, 0x27d0, 0xb8d2, 0x2185, 0x29bd, 0x1, 0x1);
        gbc.writeMem(0x3f0e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7b28);
        EXPECT(gbc.pc(), 0x3f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 037B
        gbc.setState(0xa339, 0x4d28, 0xa970, 0x3173, 0x1b1a, 0x2b34, 0x0, 0x0);
        gbc.writeMem(0xa339, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4d28);
        EXPECT(gbc.pc(), 0xa33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa339), 0xcb);
        EXPECT(gbc.readMem(0xa33a), 0xb7);
        // CB B7 037C
        gbc.setState(0x1cbf, 0xd758, 0xa810, 0xd7bb, 0xb1fc, 0x177b, 0x1, 0x1);
        gbc.writeMem(0x1cbf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd758);
        EXPECT(gbc.pc(), 0x1cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 037D
        gbc.setState(0x95b7, 0x3e89, 0x1970, 0x877e, 0x48fb, 0x2b43, 0x1, 0x0);
        gbc.writeMem(0x95b7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3e89);
        EXPECT(gbc.pc(), 0x95b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95b7), 0xcb);
        EXPECT(gbc.readMem(0x95b8), 0xb7);
        // CB B7 037E
        gbc.setState(0x7a80, 0x9d35, 0x2c40, 0x4df1, 0xadf2, 0x8d3d, 0x0, 0x1);
        gbc.writeMem(0x7a80, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9d35);
        EXPECT(gbc.pc(), 0x7a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 037F
        gbc.setState(0x5735, 0xa40, 0x69b0, 0x5757, 0xcef, 0x7e25, 0x1, 0x0);
        gbc.writeMem(0x5735, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa40);
        EXPECT(gbc.pc(), 0x5737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0380
        gbc.setState(0x90cf, 0xa592, 0x9530, 0x1aad, 0x78aa, 0x70d8, 0x1, 0x1);
        gbc.writeMem(0x90cf, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa592);
        EXPECT(gbc.pc(), 0x90d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90cf), 0xcb);
        EXPECT(gbc.readMem(0x90d0), 0xb7);
        // CB B7 0382
        gbc.setState(0x438b, 0x64df, 0xef70, 0xc751, 0x50ad, 0x6a9c, 0x0, 0x1);
        gbc.writeMem(0x438b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x64df);
        EXPECT(gbc.pc(), 0x438d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0383
        gbc.setState(0x8329, 0x3f50, 0xfc50, 0x18c3, 0x8121, 0x44cc, 0x1, 0x1);
        gbc.writeMem(0x8329, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3f50);
        EXPECT(gbc.pc(), 0x832b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8329), 0xcb);
        EXPECT(gbc.readMem(0x832a), 0xb7);
        // CB B7 0384
        gbc.setState(0x8630, 0x2a97, 0x2f20, 0x21b0, 0x500e, 0x1426, 0x1, 0x1);
        gbc.writeMem(0x8630, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2a97);
        EXPECT(gbc.pc(), 0x8632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8630), 0xcb);
        EXPECT(gbc.readMem(0x8631), 0xb7);
        // CB B7 0386
        gbc.setState(0xb2a4, 0xafb0, 0xcfe0, 0x30c1, 0xbcc7, 0x3966, 0x1, 0x0);
        gbc.writeMem(0xb2a4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xafb0);
        EXPECT(gbc.pc(), 0xb2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a4), 0xcb);
        EXPECT(gbc.readMem(0xb2a5), 0xb7);
        // CB B7 0387
        gbc.setState(0x9a71, 0xfc3f, 0x2610, 0xb169, 0xf683, 0x1157, 0x0, 0x0);
        gbc.writeMem(0x9a71, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfc3f);
        EXPECT(gbc.pc(), 0x9a73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a71), 0xcb);
        EXPECT(gbc.readMem(0x9a72), 0xb7);
        // CB B7 0388
        gbc.setState(0x41ea, 0x488c, 0xe030, 0xe77, 0xe7cb, 0x7385, 0x1, 0x1);
        gbc.writeMem(0x41ea, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x488c);
        EXPECT(gbc.pc(), 0x41ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0389
        gbc.setState(0x5ee3, 0xcd6b, 0xb220, 0x4ad2, 0x7641, 0x1b22, 0x1, 0x0);
        gbc.writeMem(0x5ee3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcd6b);
        EXPECT(gbc.pc(), 0x5ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 038A
        gbc.setState(0xb37e, 0xb7e, 0xd160, 0x993e, 0xdb, 0x6576, 0x0, 0x1);
        gbc.writeMem(0xb37e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb7e);
        EXPECT(gbc.pc(), 0xb380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37e), 0xcb);
        EXPECT(gbc.readMem(0xb37f), 0xb7);
        // CB B7 038B
        gbc.setState(0x9da6, 0x3947, 0xac40, 0x284e, 0x8b0, 0x1c25, 0x0, 0x0);
        gbc.writeMem(0x9da6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3947);
        EXPECT(gbc.pc(), 0x9da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da6), 0xcb);
        EXPECT(gbc.readMem(0x9da7), 0xb7);
        // CB B7 038C
        gbc.setState(0x4f83, 0xe426, 0x34f0, 0x52b6, 0x7220, 0x8973, 0x0, 0x0);
        gbc.writeMem(0x4f83, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe426);
        EXPECT(gbc.pc(), 0x4f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 038D
        gbc.setState(0x70c3, 0x92e1, 0xc330, 0x602c, 0xa53d, 0x261d, 0x1, 0x1);
        gbc.writeMem(0x70c3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x92e1);
        EXPECT(gbc.pc(), 0x70c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 038E
        gbc.setState(0x7c88, 0x2a5c, 0xa930, 0x8474, 0xefae, 0xb131, 0x1, 0x0);
        gbc.writeMem(0x7c88, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2a5c);
        EXPECT(gbc.pc(), 0x7c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0390
        gbc.setState(0x165b, 0xe68, 0x5380, 0xa12e, 0x4e03, 0x28dc, 0x0, 0x1);
        gbc.writeMem(0x165b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe68);
        EXPECT(gbc.pc(), 0x165d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 0391
        gbc.setState(0x9a16, 0x767, 0x17f0, 0x8e48, 0x3030, 0x1d63, 0x0, 0x0);
        gbc.writeMem(0x9a16, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x767);
        EXPECT(gbc.pc(), 0x9a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a16), 0xcb);
        EXPECT(gbc.readMem(0x9a17), 0xb7);
        // CB B7 0392
        gbc.setState(0x9135, 0xdfc9, 0xbf60, 0xf63, 0x5a02, 0x826f, 0x0, 0x1);
        gbc.writeMem(0x9135, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xdfc9);
        EXPECT(gbc.pc(), 0x9137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9135), 0xcb);
        EXPECT(gbc.readMem(0x9136), 0xb7);
        // CB B7 0393
        gbc.setState(0xbd16, 0x88b7, 0xacc0, 0x8f21, 0xa5c4, 0xc6fb, 0x0, 0x1);
        gbc.writeMem(0xbd16, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x88b7);
        EXPECT(gbc.pc(), 0xbd18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd16), 0xcb);
        EXPECT(gbc.readMem(0xbd17), 0xb7);
        // CB B7 0394
        gbc.setState(0xe01b, 0x4ae1, 0x2ed0, 0xc23, 0xd4fc, 0x38d7, 0x0, 0x1);
        gbc.writeMem(0xe01b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4ae1);
        EXPECT(gbc.pc(), 0xe01d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe01b), 0xcb);
        EXPECT(gbc.readMem(0xe01c), 0xb7);
        // CB B7 0395
        gbc.setState(0x6369, 0xba89, 0xdbb0, 0x1362, 0x6141, 0x1a4d, 0x0, 0x0);
        gbc.writeMem(0x6369, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xba89);
        EXPECT(gbc.pc(), 0x636b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0396
        gbc.setState(0xecc8, 0x26, 0x4bb0, 0x735f, 0xe82, 0xa135, 0x0, 0x0);
        gbc.writeMem(0xecc8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x26);
        EXPECT(gbc.pc(), 0xecca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc8), 0xcb);
        EXPECT(gbc.readMem(0xecc9), 0xb7);
        // CB B7 0397
        gbc.setState(0x5baa, 0x8c68, 0x9cb0, 0xf305, 0xd743, 0x666, 0x0, 0x1);
        gbc.writeMem(0x5baa, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8c68);
        EXPECT(gbc.pc(), 0x5bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0398
        gbc.setState(0xcbb, 0x2ea6, 0x1a10, 0x11f1, 0x68c7, 0xf59e, 0x0, 0x0);
        gbc.writeMem(0xcbb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2ea6);
        EXPECT(gbc.pc(), 0xcbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 0399
        gbc.setState(0xc747, 0x9887, 0xc4b0, 0xa15e, 0x184d, 0x1929, 0x1, 0x0);
        gbc.writeMem(0xc747, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9887);
        EXPECT(gbc.pc(), 0xc749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc747), 0xcb);
        EXPECT(gbc.readMem(0xc748), 0xb7);
        // CB B7 039A
        gbc.setState(0xd8f7, 0x6ca1, 0x180, 0xe386, 0xe6e6, 0xf70, 0x0, 0x0);
        gbc.writeMem(0xd8f7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6ca1);
        EXPECT(gbc.pc(), 0xd8f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f7), 0xcb);
        EXPECT(gbc.readMem(0xd8f8), 0xb7);
        // CB B7 039B
        gbc.setState(0x15b, 0xf6b5, 0x6da0, 0xfdd5, 0x60ae, 0xfce6, 0x1, 0x1);
        gbc.writeMem(0x15b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf6b5);
        EXPECT(gbc.pc(), 0x15d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 039C
        gbc.setState(0x280d, 0xbfee, 0xe9e0, 0x3c12, 0x4fc8, 0x6950, 0x1, 0x0);
        gbc.writeMem(0x280d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbfee);
        EXPECT(gbc.pc(), 0x280f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 039D
        gbc.setState(0x5468, 0x92ef, 0xede0, 0xc5c7, 0xf08f, 0x308, 0x1, 0x1);
        gbc.writeMem(0x5468, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x92ef);
        EXPECT(gbc.pc(), 0x546a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 039E
        gbc.setState(0xb75c, 0x424d, 0xa670, 0xcfa8, 0x1f4b, 0xf13d, 0x0, 0x0);
        gbc.writeMem(0xb75c, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x424d);
        EXPECT(gbc.pc(), 0xb75e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75c), 0xcb);
        EXPECT(gbc.readMem(0xb75d), 0xb7);
        // CB B7 039F
        gbc.setState(0x857a, 0xac8b, 0x9e70, 0xf5f6, 0x6dd5, 0xabd6, 0x1, 0x1);
        gbc.writeMem(0x857a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xac8b);
        EXPECT(gbc.pc(), 0x857c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x857a), 0xcb);
        EXPECT(gbc.readMem(0x857b), 0xb7);
        // CB B7 03A0
        gbc.setState(0x3b04, 0xd0b4, 0xa730, 0x9c46, 0x7250, 0x9276, 0x1, 0x1);
        gbc.writeMem(0x3b04, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd0b4);
        EXPECT(gbc.pc(), 0x3b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03A1
        gbc.setState(0xf00, 0x5276, 0x4110, 0xc813, 0x8018, 0x359e, 0x0, 0x0);
        gbc.writeMem(0xf00, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5276);
        EXPECT(gbc.pc(), 0xf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03A2
        gbc.setState(0x41af, 0xb506, 0xecd0, 0xcc8, 0x7e7, 0x9b32, 0x1, 0x1);
        gbc.writeMem(0x41af, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb506);
        EXPECT(gbc.pc(), 0x41b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03A3
        gbc.setState(0x282e, 0x2240, 0xaa80, 0xe214, 0xa8cd, 0xfd24, 0x1, 0x0);
        gbc.writeMem(0x282e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2240);
        EXPECT(gbc.pc(), 0x2830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03A4
        gbc.setState(0x74fe, 0xf2f, 0x5e80, 0x910d, 0x3b40, 0xedb, 0x0, 0x1);
        gbc.writeMem(0x74fe, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf2f);
        EXPECT(gbc.pc(), 0x7500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03A5
        gbc.setState(0x97e1, 0x7264, 0xa730, 0x6ca9, 0x578f, 0xaf4, 0x1, 0x0);
        gbc.writeMem(0x97e1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7264);
        EXPECT(gbc.pc(), 0x97e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97e1), 0xcb);
        EXPECT(gbc.readMem(0x97e2), 0xb7);
        // CB B7 03A6
        gbc.setState(0x93a0, 0xa2c8, 0x6da0, 0xa43f, 0xe706, 0xb00e, 0x0, 0x0);
        gbc.writeMem(0x93a0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa2c8);
        EXPECT(gbc.pc(), 0x93a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a0), 0xcb);
        EXPECT(gbc.readMem(0x93a1), 0xb7);
        // CB B7 03A8
        gbc.setState(0xaf3f, 0x615f, 0x46e0, 0x783e, 0x78cf, 0x62dd, 0x0, 0x0);
        gbc.writeMem(0xaf3f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x615f);
        EXPECT(gbc.pc(), 0xaf41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf3f), 0xcb);
        EXPECT(gbc.readMem(0xaf40), 0xb7);
        // CB B7 03A9
        gbc.setState(0xac7, 0x5dd7, 0x24c0, 0x45cd, 0x3571, 0xa2c5, 0x0, 0x0);
        gbc.writeMem(0xac7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5dd7);
        EXPECT(gbc.pc(), 0xac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03AA
        gbc.setState(0xc195, 0xe39, 0x9e30, 0xa79a, 0xd1c8, 0xcfdb, 0x0, 0x0);
        gbc.writeMem(0xc195, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe39);
        EXPECT(gbc.pc(), 0xc197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc195), 0xcb);
        EXPECT(gbc.readMem(0xc196), 0xb7);
        // CB B7 03AB
        gbc.setState(0x51a, 0x7f2d, 0x8320, 0x8778, 0xb82b, 0x7413, 0x0, 0x0);
        gbc.writeMem(0x51a, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7f2d);
        EXPECT(gbc.pc(), 0x51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03AC
        gbc.setState(0x5269, 0x1cfd, 0x1080, 0x4b25, 0x1222, 0xac8d, 0x1, 0x0);
        gbc.writeMem(0x5269, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1cfd);
        EXPECT(gbc.pc(), 0x526b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03AD
        gbc.setState(0xd3ec, 0x7ce4, 0xcd10, 0x15d2, 0x151a, 0x1a33, 0x0, 0x1);
        gbc.writeMem(0xd3ec, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7ce4);
        EXPECT(gbc.pc(), 0xd3ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ec), 0xcb);
        EXPECT(gbc.readMem(0xd3ed), 0xb7);
        // CB B7 03AE
        gbc.setState(0x48f8, 0xa60b, 0xc5f0, 0xf694, 0x566f, 0xa433, 0x1, 0x0);
        gbc.writeMem(0x48f8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa60b);
        EXPECT(gbc.pc(), 0x48fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03AF
        gbc.setState(0xb92b, 0x315e, 0x1440, 0xea78, 0x611, 0xdd7e, 0x1, 0x0);
        gbc.writeMem(0xb92b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x315e);
        EXPECT(gbc.pc(), 0xb92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92b), 0xcb);
        EXPECT(gbc.readMem(0xb92c), 0xb7);
        // CB B7 03B0
        gbc.setState(0x6fa0, 0x3c3b, 0xf8c0, 0xa3c3, 0xf5e3, 0xf017, 0x1, 0x1);
        gbc.writeMem(0x6fa0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3c3b);
        EXPECT(gbc.pc(), 0x6fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03B1
        gbc.setState(0x335b, 0x1bd7, 0x9fe0, 0x4e27, 0x160a, 0xb184, 0x0, 0x1);
        gbc.writeMem(0x335b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1bd7);
        EXPECT(gbc.pc(), 0x335d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03B2
        gbc.setState(0x1335, 0x964b, 0xd0f0, 0x6a7c, 0xafc9, 0x2e72, 0x0, 0x1);
        gbc.writeMem(0x1335, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x964b);
        EXPECT(gbc.pc(), 0x1337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03B3
        gbc.setState(0x9279, 0xccb0, 0x3970, 0x2d8a, 0xb696, 0x5dfb, 0x0, 0x1);
        gbc.writeMem(0x9279, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xccb0);
        EXPECT(gbc.pc(), 0x927b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9279), 0xcb);
        EXPECT(gbc.readMem(0x927a), 0xb7);
        // CB B7 03B4
        gbc.setState(0x4478, 0x329f, 0x8610, 0x2695, 0x835a, 0x1c76, 0x0, 0x1);
        gbc.writeMem(0x4478, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x329f);
        EXPECT(gbc.pc(), 0x447a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03B5
        gbc.setState(0x24e3, 0x931a, 0x2580, 0xdb15, 0xc0db, 0xf467, 0x0, 0x0);
        gbc.writeMem(0x24e3, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x931a);
        EXPECT(gbc.pc(), 0x24e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03B6
        gbc.setState(0x90e5, 0x3e0d, 0xee30, 0x7713, 0x967f, 0xec1c, 0x1, 0x1);
        gbc.writeMem(0x90e5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3e0d);
        EXPECT(gbc.pc(), 0x90e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e5), 0xcb);
        EXPECT(gbc.readMem(0x90e6), 0xb7);
        // CB B7 03B7
        gbc.setState(0x767e, 0x167a, 0x7830, 0x6d2a, 0x11ec, 0xd3b9, 0x0, 0x0);
        gbc.writeMem(0x767e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x167a);
        EXPECT(gbc.pc(), 0x7680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03B8
        gbc.setState(0xa66, 0x9109, 0x3c70, 0x6f83, 0xbe70, 0xce98, 0x0, 0x1);
        gbc.writeMem(0xa66, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9109);
        EXPECT(gbc.pc(), 0xa68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03B9
        gbc.setState(0x9930, 0x6639, 0xe6e0, 0x5653, 0x2184, 0xa275, 0x1, 0x1);
        gbc.writeMem(0x9930, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6639);
        EXPECT(gbc.pc(), 0x9932);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9930), 0xcb);
        EXPECT(gbc.readMem(0x9931), 0xb7);
        // CB B7 03BA
        gbc.setState(0xbbbc, 0x4284, 0x22c0, 0x7886, 0xab6b, 0xd692, 0x0, 0x0);
        gbc.writeMem(0xbbbc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4284);
        EXPECT(gbc.pc(), 0xbbbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbc), 0xcb);
        EXPECT(gbc.readMem(0xbbbd), 0xb7);
        // CB B7 03BB
        gbc.setState(0x6152, 0xd0fd, 0x4950, 0x1f52, 0xa8ae, 0xe86c, 0x0, 0x1);
        gbc.writeMem(0x6152, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd0fd);
        EXPECT(gbc.pc(), 0x6154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03BC
        gbc.setState(0x7039, 0xca05, 0x9ce0, 0xc64c, 0xa1c, 0xaae7, 0x0, 0x1);
        gbc.writeMem(0x7039, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xca05);
        EXPECT(gbc.pc(), 0x703b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03BD
        gbc.setState(0xaf89, 0x665c, 0xbf80, 0x1e55, 0xd108, 0x600f, 0x1, 0x0);
        gbc.writeMem(0xaf89, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x665c);
        EXPECT(gbc.pc(), 0xaf8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf89), 0xcb);
        EXPECT(gbc.readMem(0xaf8a), 0xb7);
        // CB B7 03BE
        gbc.setState(0x38ca, 0xf186, 0x7dc0, 0x322, 0xc616, 0x565a, 0x1, 0x1);
        gbc.writeMem(0x38ca, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf186);
        EXPECT(gbc.pc(), 0x38cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03BF
        gbc.setState(0x7800, 0x837c, 0x4c80, 0x8627, 0xd191, 0xd78b, 0x1, 0x1);
        gbc.writeMem(0x7800, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x837c);
        EXPECT(gbc.pc(), 0x7802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03C0
        gbc.setState(0xb476, 0x144a, 0xa470, 0x1802, 0x5348, 0x8a1a, 0x0, 0x0);
        gbc.writeMem(0xb476, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x144a);
        EXPECT(gbc.pc(), 0xb478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb476), 0xcb);
        EXPECT(gbc.readMem(0xb477), 0xb7);
        // CB B7 03C1
        gbc.setState(0xe8cd, 0xd2d2, 0x3e40, 0x20c4, 0xec69, 0x5457, 0x0, 0x1);
        gbc.writeMem(0xe8cd, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd2d2);
        EXPECT(gbc.pc(), 0xe8cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cd), 0xcb);
        EXPECT(gbc.readMem(0xe8ce), 0xb7);
        // CB B7 03C2
        gbc.setState(0x2b94, 0x9024, 0x75e0, 0x82c9, 0x2089, 0x9b5f, 0x1, 0x1);
        gbc.writeMem(0x2b94, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9024);
        EXPECT(gbc.pc(), 0x2b96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03C3
        gbc.setState(0x4c78, 0x5b31, 0xec90, 0xa0cb, 0x739d, 0xb633, 0x1, 0x1);
        gbc.writeMem(0x4c78, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5b31);
        EXPECT(gbc.pc(), 0x4c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03C4
        gbc.setState(0x7114, 0xbda0, 0xd9a0, 0xf10e, 0x2bbd, 0x3ef5, 0x1, 0x1);
        gbc.writeMem(0x7114, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbda0);
        EXPECT(gbc.pc(), 0x7116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03C5
        gbc.setState(0xb821, 0xfbdb, 0x2bd0, 0x3ef2, 0x7440, 0x2d0f, 0x1, 0x1);
        gbc.writeMem(0xb821, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfbdb);
        EXPECT(gbc.pc(), 0xb823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb821), 0xcb);
        EXPECT(gbc.readMem(0xb822), 0xb7);
        // CB B7 03C6
        gbc.setState(0xe32f, 0x789d, 0x2e10, 0xebe1, 0xc653, 0x2ba8, 0x0, 0x1);
        gbc.writeMem(0xe32f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x789d);
        EXPECT(gbc.pc(), 0xe331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe32f), 0xcb);
        EXPECT(gbc.readMem(0xe330), 0xb7);
        // CB B7 03C7
        gbc.setState(0x28bb, 0x9ed, 0x5440, 0xde39, 0x4005, 0x891e, 0x0, 0x0);
        gbc.writeMem(0x28bb, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9ed);
        EXPECT(gbc.pc(), 0x28bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03C8
        gbc.setState(0x7694, 0x2423, 0xaed0, 0xd82a, 0x87f1, 0x3af2, 0x0, 0x0);
        gbc.writeMem(0x7694, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2423);
        EXPECT(gbc.pc(), 0x7696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03C9
        gbc.setState(0x3812, 0x65a, 0x630, 0x769d, 0xe4af, 0x1957, 0x0, 0x0);
        gbc.writeMem(0x3812, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x65a);
        EXPECT(gbc.pc(), 0x3814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03CA
        gbc.setState(0xc2f0, 0xbc86, 0xbc30, 0x2991, 0x8bd8, 0x5a92, 0x0, 0x1);
        gbc.writeMem(0xc2f0, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbc86);
        EXPECT(gbc.pc(), 0xc2f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f0), 0xcb);
        EXPECT(gbc.readMem(0xc2f1), 0xb7);
        // CB B7 03CB
        gbc.setState(0xbdc9, 0xf23c, 0x97a0, 0x972f, 0x687d, 0x6a5d, 0x1, 0x1);
        gbc.writeMem(0xbdc9, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf23c);
        EXPECT(gbc.pc(), 0xbdcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc9), 0xcb);
        EXPECT(gbc.readMem(0xbdca), 0xb7);
        // CB B7 03CC
        gbc.setState(0x8ad4, 0xb86, 0x7c70, 0xbc9a, 0xd090, 0xb229, 0x1, 0x1);
        gbc.writeMem(0x8ad4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb86);
        EXPECT(gbc.pc(), 0x8ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad4), 0xcb);
        EXPECT(gbc.readMem(0x8ad5), 0xb7);
        // CB B7 03CD
        gbc.setState(0x3ea1, 0x9848, 0x5380, 0xa270, 0xd63f, 0xe318, 0x1, 0x0);
        gbc.writeMem(0x3ea1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9848);
        EXPECT(gbc.pc(), 0x3ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03CE
        gbc.setState(0x542d, 0xdc0e, 0x77a0, 0x8e45, 0x223e, 0xc0b3, 0x1, 0x0);
        gbc.writeMem(0x542d, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc0e);
        EXPECT(gbc.pc(), 0x542f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03CF
        gbc.setState(0x3171, 0x4c38, 0xd930, 0xac29, 0xd943, 0xd897, 0x0, 0x0);
        gbc.writeMem(0x3171, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4c38);
        EXPECT(gbc.pc(), 0x3173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03D1
        gbc.setState(0xbdee, 0x782e, 0x6090, 0x7e5f, 0x759, 0xec46, 0x1, 0x1);
        gbc.writeMem(0xbdee, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x782e);
        EXPECT(gbc.pc(), 0xbdf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdee), 0xcb);
        EXPECT(gbc.readMem(0xbdef), 0xb7);
        // CB B7 03D2
        gbc.setState(0xcad6, 0xe2cf, 0xc400, 0x5986, 0x5d00, 0x1a76, 0x1, 0x0);
        gbc.writeMem(0xcad6, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe2cf);
        EXPECT(gbc.pc(), 0xcad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad6), 0xcb);
        EXPECT(gbc.readMem(0xcad7), 0xb7);
        // CB B7 03D3
        gbc.setState(0x7064, 0xd161, 0x8a20, 0xabb6, 0xda8, 0xc4ff, 0x1, 0x1);
        gbc.writeMem(0x7064, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd161);
        EXPECT(gbc.pc(), 0x7066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03D4
        gbc.setState(0xdd9b, 0x4966, 0xe1e0, 0xa3e0, 0xd033, 0xc31, 0x1, 0x0);
        gbc.writeMem(0xdd9b, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x4966);
        EXPECT(gbc.pc(), 0xdd9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd9b), 0xcb);
        EXPECT(gbc.readMem(0xdd9c), 0xb7);
        // CB B7 03D5
        gbc.setState(0xd6b8, 0xf4da, 0x5b70, 0x4d26, 0x2b01, 0xe6a1, 0x1, 0x1);
        gbc.writeMem(0xd6b8, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf4da);
        EXPECT(gbc.pc(), 0xd6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b8), 0xcb);
        EXPECT(gbc.readMem(0xd6b9), 0xb7);
        // CB B7 03D6
        gbc.setState(0x17c1, 0x827b, 0xa2a0, 0xca2c, 0x327, 0xdbcf, 0x0, 0x0);
        gbc.writeMem(0x17c1, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x827b);
        EXPECT(gbc.pc(), 0x17c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03D7
        gbc.setState(0x83dc, 0x434d, 0xfa30, 0x14de, 0x60e, 0x1777, 0x0, 0x0);
        gbc.writeMem(0x83dc, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x434d);
        EXPECT(gbc.pc(), 0x83de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83dc), 0xcb);
        EXPECT(gbc.readMem(0x83dd), 0xb7);
        // CB B7 03D8
        gbc.setState(0x132e, 0x483d, 0xafd0, 0x84f6, 0xe86d, 0x5e13, 0x0, 0x1);
        gbc.writeMem(0x132e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x483d);
        EXPECT(gbc.pc(), 0x1330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03D9
        gbc.setState(0x16b7, 0x72e2, 0x60, 0x150c, 0xca32, 0x2a31, 0x1, 0x1);
        gbc.writeMem(0x16b7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x72e2);
        EXPECT(gbc.pc(), 0x16b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03DA
        gbc.setState(0x7f10, 0xfd74, 0xa60, 0x4020, 0x825f, 0x6243, 0x0, 0x1);
        gbc.writeMem(0x7f10, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xfd74);
        EXPECT(gbc.pc(), 0x7f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03DB
        gbc.setState(0x8c6f, 0x5280, 0xf040, 0x4b01, 0xdb4b, 0x18af, 0x1, 0x1);
        gbc.writeMem(0x8c6f, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5280);
        EXPECT(gbc.pc(), 0x8c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c6f), 0xcb);
        EXPECT(gbc.readMem(0x8c70), 0xb7);
        // CB B7 03DC
        gbc.setState(0x774, 0x11c8, 0x1570, 0x8e71, 0x3e64, 0x89f6, 0x1, 0x0);
        gbc.writeMem(0x774, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x11c8);
        EXPECT(gbc.pc(), 0x776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03DD
        gbc.setState(0xec7e, 0xec35, 0xcbe0, 0xac2c, 0xc5b0, 0x30d4, 0x1, 0x0);
        gbc.writeMem(0xec7e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xec35);
        EXPECT(gbc.pc(), 0xec80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7e), 0xcb);
        EXPECT(gbc.readMem(0xec7f), 0xb7);
        // CB B7 03DE
        gbc.setState(0xe18e, 0x9069, 0x5320, 0x5fab, 0xd887, 0xe27d, 0x1, 0x1);
        gbc.writeMem(0xe18e, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9069);
        EXPECT(gbc.pc(), 0xe190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe18e), 0xcb);
        EXPECT(gbc.readMem(0xe18f), 0xb7);
        // CB B7 03DF
        gbc.setState(0x9967, 0xec2, 0x5600, 0x817a, 0xcba6, 0x2e83, 0x1, 0x0);
        gbc.writeMem(0x9967, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xec2);
        EXPECT(gbc.pc(), 0x9969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9967), 0xcb);
        EXPECT(gbc.readMem(0x9968), 0xb7);
        // CB B7 03E0
        gbc.setState(0x23e7, 0x7eb9, 0x750, 0x1e02, 0x3e54, 0xf314, 0x0, 0x1);
        gbc.writeMem(0x23e7, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7eb9);
        EXPECT(gbc.pc(), 0x23e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B7 03E1
        gbc.setState(0xb9d5, 0x1948, 0x20b0, 0x6f4a, 0xd51c, 0xf8ba, 0x0, 0x1);
        gbc.writeMem(0xb9d5, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1948);
        EXPECT(gbc.pc(), 0xb9d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d5), 0xcb);
        EXPECT(gbc.readMem(0xb9d6), 0xb7);
        // CB B7 03E3
        gbc.setState(0xb261, 0x30dd, 0x9e30, 0x2704, 0xebba, 0x6a2d, 0x0, 0x0);
        gbc.writeMem(0xb261, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x30dd);
        EXPECT(gbc.pc(), 0xb263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb261), 0xcb);
        EXPECT(gbc.readMem(0xb262), 0xb7);
        // CB B7 03E4
        gbc.setState(0x8151, 0x594c, 0x6370, 0x14bf, 0xb841, 0x7b58, 0x1, 0x1);
        gbc.writeMem(0x8151, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x594c);
        EXPECT(gbc.pc(), 0x8153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8151), 0xcb);
        EXPECT(gbc.readMem(0x8152), 0xb7);
        // CB B7 03E5
        gbc.setState(0x7c4, 0x323f, 0x5820, 0x5cde, 0x9610, 0x8df4, 0x0, 0x0);
        gbc.writeMem(0x7c4, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x323f);
        EXPECT(gbc.pc(), 0x7c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03E6
        gbc.setState(0xa00, 0x2524, 0x31e0, 0x1afd, 0x2ed4, 0x72b2, 0x0, 0x0);
        gbc.writeMem(0xa00, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2524);
        EXPECT(gbc.pc(), 0xa02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B7 03E7
        gbc.setState(0x3d90, 0x91f, 0xdbf0, 0x60e1, 0xdfd1, 0x5645, 0x1, 0x1);
        gbc.writeMem(0x3d90, { 0xcb, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x91f);
        EXPECT(gbc.pc(), 0x3d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
