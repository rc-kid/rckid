    TEST(gbcemu, opcode_39) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 39 0000
        gbc.setState(0x1778, 0xbe23, 0x1db0, 0xcc6c, 0x12c8, 0xb248, 0x1, 0x1);
        gbc.writeMem(0x1778, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbe23);
        EXPECT(gbc.pc(), 0x1779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0001
        gbc.setState(0x5738, 0xff27, 0x30e0, 0xabcd, 0x1f65, 0x70d1, 0x0, 0x1);
        gbc.writeMem(0x5738, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xff27);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0002
        gbc.setState(0xb582, 0x56bd, 0x1a90, 0x819d, 0x1ef8, 0xa1a9, 0x1, 0x1);
        gbc.writeMem(0xb582, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x56bd);
        EXPECT(gbc.pc(), 0xb583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb582), 0x39);
        // 39 0004
        gbc.setState(0x1b57, 0x4b01, 0xd8b0, 0x1786, 0x10b1, 0xa713, 0x1, 0x0);
        gbc.writeMem(0x1b57, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4b01);
        EXPECT(gbc.pc(), 0x1b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0005
        gbc.setState(0x80a1, 0xc715, 0xd100, 0xa528, 0x35f1, 0x387b, 0x1, 0x0);
        gbc.writeMem(0x80a1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc715);
        EXPECT(gbc.pc(), 0x80a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a1), 0x39);
        // 39 0006
        gbc.setState(0xee4, 0x8578, 0x7920, 0xd3a8, 0xf4cf, 0x3257, 0x1, 0x0);
        gbc.writeMem(0xee4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8578);
        EXPECT(gbc.pc(), 0xee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0007
        gbc.setState(0x8bad, 0x9b12, 0x8d90, 0x9354, 0xfe45, 0xb801, 0x0, 0x1);
        gbc.writeMem(0x8bad, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9b12);
        EXPECT(gbc.pc(), 0x8bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bad), 0x39);
        // 39 0008
        gbc.setState(0xb48c, 0xe5db, 0xd1c0, 0x1f55, 0xe4d7, 0x4bcf, 0x0, 0x1);
        gbc.writeMem(0xb48c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe5db);
        EXPECT(gbc.pc(), 0xb48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb48c), 0x39);
        // 39 0009
        gbc.setState(0x2aad, 0xa375, 0xd370, 0xce29, 0xb6b, 0xeab4, 0x1, 0x1);
        gbc.writeMem(0x2aad, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa375);
        EXPECT(gbc.pc(), 0x2aae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 000A
        gbc.setState(0x298a, 0x7339, 0xa9e0, 0x23b6, 0xd101, 0xddc9, 0x1, 0x1);
        gbc.writeMem(0x298a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7339);
        EXPECT(gbc.pc(), 0x298b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 000B
        gbc.setState(0xe9b0, 0xc6fd, 0x3850, 0x8353, 0xcccd, 0x8446, 0x0, 0x0);
        gbc.writeMem(0xe9b0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc6fd);
        EXPECT(gbc.pc(), 0xe9b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b0), 0x39);
        // 39 000C
        gbc.setState(0x5391, 0x4286, 0x35d0, 0xb23a, 0x25e3, 0xc69f, 0x1, 0x1);
        gbc.writeMem(0x5391, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4286);
        EXPECT(gbc.pc(), 0x5392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 000D
        gbc.setState(0xc520, 0x94e6, 0x600, 0x8bf4, 0x9eb6, 0x73ca, 0x0, 0x0);
        gbc.writeMem(0xc520, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x94e6);
        EXPECT(gbc.pc(), 0xc521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc520), 0x39);
        // 39 000E
        gbc.setState(0x5d33, 0x58f8, 0xb9d0, 0xacc5, 0xc378, 0xb055, 0x0, 0x1);
        gbc.writeMem(0x5d33, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x58f8);
        EXPECT(gbc.pc(), 0x5d34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 000F
        gbc.setState(0x1014, 0x35, 0x9540, 0xe15a, 0x6d85, 0xc814, 0x1, 0x1);
        gbc.writeMem(0x1014, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x35);
        EXPECT(gbc.pc(), 0x1015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0010
        gbc.setState(0xa6ec, 0x31b3, 0xc920, 0x9352, 0x53a9, 0x78c6, 0x1, 0x0);
        gbc.writeMem(0xa6ec, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x31b3);
        EXPECT(gbc.pc(), 0xa6ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ec), 0x39);
        // 39 0011
        gbc.setState(0xa076, 0xc474, 0x5580, 0xd031, 0x5f19, 0x9e76, 0x0, 0x1);
        gbc.writeMem(0xa076, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc474);
        EXPECT(gbc.pc(), 0xa077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa076), 0x39);
        // 39 0012
        gbc.setState(0x30dc, 0xe630, 0xf280, 0x5f6d, 0x3aaf, 0xe6b8, 0x1, 0x1);
        gbc.writeMem(0x30dc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe630);
        EXPECT(gbc.pc(), 0x30dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0013
        gbc.setState(0x4270, 0xd9b9, 0x1660, 0x152e, 0x36df, 0x9a67, 0x1, 0x1);
        gbc.writeMem(0x4270, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd9b9);
        EXPECT(gbc.pc(), 0x4271);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0014
        gbc.setState(0x95ca, 0x8785, 0xea0, 0x9749, 0xaa15, 0x758d, 0x1, 0x0);
        gbc.writeMem(0x95ca, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8785);
        EXPECT(gbc.pc(), 0x95cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ca), 0x39);
        // 39 0015
        gbc.setState(0xb317, 0xa606, 0x7f70, 0x9143, 0x3968, 0x6a63, 0x1, 0x1);
        gbc.writeMem(0xb317, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa606);
        EXPECT(gbc.pc(), 0xb318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb317), 0x39);
        // 39 0016
        gbc.setState(0x807e, 0x3c30, 0x1a10, 0xa312, 0x32fe, 0x5480, 0x1, 0x0);
        gbc.writeMem(0x807e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3c30);
        EXPECT(gbc.pc(), 0x807f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807e), 0x39);
        // 39 0018
        gbc.setState(0x8231, 0x821, 0xd060, 0x873f, 0x445b, 0xe4c1, 0x1, 0x0);
        gbc.writeMem(0x8231, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x821);
        EXPECT(gbc.pc(), 0x8232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8231), 0x39);
        // 39 0019
        gbc.setState(0xd7a6, 0xeb3d, 0x7000, 0xe9c, 0x44fc, 0x23ec, 0x1, 0x0);
        gbc.writeMem(0xd7a6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xeb3d);
        EXPECT(gbc.pc(), 0xd7a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a6), 0x39);
        // 39 001A
        gbc.setState(0x9cde, 0x32af, 0x99a0, 0xa352, 0x18ce, 0xeb09, 0x0, 0x1);
        gbc.writeMem(0x9cde, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x32af);
        EXPECT(gbc.pc(), 0x9cdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cde), 0x39);
        // 39 001B
        gbc.setState(0xabf9, 0x5f3e, 0xf710, 0x2924, 0x3465, 0xe5b4, 0x1, 0x0);
        gbc.writeMem(0xabf9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5f3e);
        EXPECT(gbc.pc(), 0xabfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf9), 0x39);
        // 39 001D
        gbc.setState(0x64aa, 0xd47f, 0x15a0, 0x8518, 0x8768, 0xa8f3, 0x1, 0x0);
        gbc.writeMem(0x64aa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd47f);
        EXPECT(gbc.pc(), 0x64ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 001E
        gbc.setState(0x5c63, 0x6815, 0x9ea0, 0xe1f8, 0xf485, 0xe768, 0x1, 0x0);
        gbc.writeMem(0x5c63, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6815);
        EXPECT(gbc.pc(), 0x5c64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 001F
        gbc.setState(0x2ca3, 0x21f1, 0xce20, 0xd353, 0x824c, 0xabbf, 0x1, 0x1);
        gbc.writeMem(0x2ca3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x21f1);
        EXPECT(gbc.pc(), 0x2ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0020
        gbc.setState(0xeaf5, 0x63f5, 0x290, 0xb438, 0x5d68, 0x96d, 0x1, 0x1);
        gbc.writeMem(0xeaf5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x63f5);
        EXPECT(gbc.pc(), 0xeaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf5), 0x39);
        // 39 0021
        gbc.setState(0xc362, 0x2379, 0x91b0, 0x260c, 0xcb48, 0x4e1d, 0x1, 0x1);
        gbc.writeMem(0xc362, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2379);
        EXPECT(gbc.pc(), 0xc363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc362), 0x39);
        // 39 0022
        gbc.setState(0x47fe, 0x2a06, 0x89f0, 0xf31c, 0x9a8f, 0x8ef5, 0x1, 0x1);
        gbc.writeMem(0x47fe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2a06);
        EXPECT(gbc.pc(), 0x47ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0024
        gbc.setState(0xd26a, 0x7432, 0x3a40, 0x1eb1, 0x4023, 0xfa86, 0x0, 0x1);
        gbc.writeMem(0xd26a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7432);
        EXPECT(gbc.pc(), 0xd26b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd26a), 0x39);
        // 39 0025
        gbc.setState(0x89da, 0xf783, 0x1160, 0xdda2, 0x9fdc, 0xdc38, 0x1, 0x1);
        gbc.writeMem(0x89da, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf783);
        EXPECT(gbc.pc(), 0x89db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89da), 0x39);
        // 39 0026
        gbc.setState(0x3536, 0xab56, 0x4d00, 0x9d9f, 0x77c, 0xed0c, 0x1, 0x0);
        gbc.writeMem(0x3536, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xab56);
        EXPECT(gbc.pc(), 0x3537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0027
        gbc.setState(0xab8a, 0x635b, 0x14a0, 0xe770, 0x9f42, 0xc8ae, 0x0, 0x0);
        gbc.writeMem(0xab8a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x635b);
        EXPECT(gbc.pc(), 0xab8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8a), 0x39);
        // 39 0028
        gbc.setState(0x3bc2, 0x5b01, 0x9d00, 0x9aeb, 0xcc98, 0x2fb5, 0x1, 0x0);
        gbc.writeMem(0x3bc2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5b01);
        EXPECT(gbc.pc(), 0x3bc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0029
        gbc.setState(0xceaa, 0x586, 0x9700, 0x7d59, 0x3191, 0xcb40, 0x0, 0x0);
        gbc.writeMem(0xceaa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x586);
        EXPECT(gbc.pc(), 0xceab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceaa), 0x39);
        // 39 002A
        gbc.setState(0x3a22, 0x759a, 0x2070, 0xd2ca, 0xacc2, 0x3cb1, 0x1, 0x1);
        gbc.writeMem(0x3a22, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x759a);
        EXPECT(gbc.pc(), 0x3a23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 002B
        gbc.setState(0xd655, 0x573a, 0x3ef0, 0x3619, 0x3103, 0x467e, 0x1, 0x0);
        gbc.writeMem(0xd655, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x573a);
        EXPECT(gbc.pc(), 0xd656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd655), 0x39);
        // 39 002C
        gbc.setState(0xde21, 0xa033, 0xed0, 0x2ac7, 0xa227, 0x12ce, 0x0, 0x0);
        gbc.writeMem(0xde21, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa033);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde21), 0x39);
        // 39 002D
        gbc.setState(0x1f65, 0xbb8e, 0x4ff0, 0xd54, 0x31b8, 0x712c, 0x1, 0x1);
        gbc.writeMem(0x1f65, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbb8e);
        EXPECT(gbc.pc(), 0x1f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 002E
        gbc.setState(0x3b6f, 0x606b, 0x1cb0, 0x8231, 0x2bbe, 0xdf3e, 0x0, 0x1);
        gbc.writeMem(0x3b6f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x606b);
        EXPECT(gbc.pc(), 0x3b70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 002F
        gbc.setState(0xae9d, 0x4b26, 0x7020, 0x1ac2, 0x791a, 0xa938, 0x1, 0x1);
        gbc.writeMem(0xae9d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4b26);
        EXPECT(gbc.pc(), 0xae9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9d), 0x39);
        // 39 0030
        gbc.setState(0x49f, 0x7c6b, 0xfd90, 0xf466, 0xd1cc, 0xeb31, 0x0, 0x0);
        gbc.writeMem(0x49f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7c6b);
        EXPECT(gbc.pc(), 0x4a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0031
        gbc.setState(0xe308, 0x159f, 0x8760, 0xfb6f, 0x542a, 0xfabb, 0x1, 0x1);
        gbc.writeMem(0xe308, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x159f);
        EXPECT(gbc.pc(), 0xe309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe308), 0x39);
        // 39 0032
        gbc.setState(0xcf51, 0x1d04, 0x6320, 0xcb9a, 0x3953, 0x51e6, 0x0, 0x1);
        gbc.writeMem(0xcf51, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1d04);
        EXPECT(gbc.pc(), 0xcf52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf51), 0x39);
        // 39 0033
        gbc.setState(0xaf5, 0x84f4, 0xa730, 0xb5d5, 0x8165, 0xad1b, 0x1, 0x1);
        gbc.writeMem(0xaf5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x84f4);
        EXPECT(gbc.pc(), 0xaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0034
        gbc.setState(0x2d51, 0x50ac, 0x62e0, 0x486, 0x3327, 0xb98a, 0x0, 0x0);
        gbc.writeMem(0x2d51, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x50ac);
        EXPECT(gbc.pc(), 0x2d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0035
        gbc.setState(0x8e30, 0xa6c1, 0x4db0, 0x391b, 0x8724, 0x6813, 0x1, 0x1);
        gbc.writeMem(0x8e30, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa6c1);
        EXPECT(gbc.pc(), 0x8e31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e30), 0x39);
        // 39 0036
        gbc.setState(0x2cbe, 0x7706, 0xb20, 0x15bc, 0x5ef9, 0xb233, 0x0, 0x1);
        gbc.writeMem(0x2cbe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7706);
        EXPECT(gbc.pc(), 0x2cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0037
        gbc.setState(0x7262, 0xeb5c, 0x87d0, 0x7df0, 0xc436, 0x4c12, 0x0, 0x0);
        gbc.writeMem(0x7262, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xeb5c);
        EXPECT(gbc.pc(), 0x7263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0038
        gbc.setState(0x60e0, 0xedb6, 0xf500, 0xc367, 0x6282, 0xf03c, 0x0, 0x1);
        gbc.writeMem(0x60e0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xedb6);
        EXPECT(gbc.pc(), 0x60e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0039
        gbc.setState(0x7225, 0xe1fe, 0xb8d0, 0x7642, 0xaa0d, 0xc6cd, 0x0, 0x0);
        gbc.writeMem(0x7225, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe1fe);
        EXPECT(gbc.pc(), 0x7226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 003A
        gbc.setState(0xacd3, 0x1117, 0x4c40, 0x1fe1, 0x32d5, 0x6a07, 0x1, 0x0);
        gbc.writeMem(0xacd3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1117);
        EXPECT(gbc.pc(), 0xacd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd3), 0x39);
        // 39 003C
        gbc.setState(0x3f94, 0xa92b, 0x99d0, 0x1a40, 0x1f56, 0x6db9, 0x1, 0x1);
        gbc.writeMem(0x3f94, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa92b);
        EXPECT(gbc.pc(), 0x3f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 003D
        gbc.setState(0x33d2, 0x71a, 0xa3b0, 0x6661, 0xcbfe, 0x3de7, 0x0, 0x0);
        gbc.writeMem(0x33d2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x71a);
        EXPECT(gbc.pc(), 0x33d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 003E
        gbc.setState(0x1af5, 0xc9d4, 0x5460, 0x99f0, 0xdfd0, 0x7d43, 0x1, 0x1);
        gbc.writeMem(0x1af5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc9d4);
        EXPECT(gbc.pc(), 0x1af6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 003F
        gbc.setState(0x4c6c, 0x6a13, 0x67d0, 0x30bb, 0x602b, 0xa12d, 0x0, 0x1);
        gbc.writeMem(0x4c6c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6a13);
        EXPECT(gbc.pc(), 0x4c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0040
        gbc.setState(0x9bbc, 0x9bb5, 0x6590, 0x539a, 0x3694, 0x483c, 0x0, 0x0);
        gbc.writeMem(0x9bbc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9bb5);
        EXPECT(gbc.pc(), 0x9bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbc), 0x39);
        // 39 0041
        gbc.setState(0xec24, 0x7d51, 0x1b10, 0x2a98, 0xe9e7, 0x3705, 0x1, 0x1);
        gbc.writeMem(0xec24, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7d51);
        EXPECT(gbc.pc(), 0xec25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec24), 0x39);
        // 39 0043
        gbc.setState(0x5f25, 0x7154, 0x5be0, 0x53f3, 0xa2a1, 0x91e2, 0x1, 0x0);
        gbc.writeMem(0x5f25, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7154);
        EXPECT(gbc.pc(), 0x5f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0044
        gbc.setState(0x7aa7, 0x19d8, 0x27f0, 0xc70f, 0xb2d7, 0xa739, 0x1, 0x1);
        gbc.writeMem(0x7aa7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x19d8);
        EXPECT(gbc.pc(), 0x7aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0045
        gbc.setState(0xb6c6, 0x56ed, 0xac90, 0x5253, 0x653e, 0x1ef0, 0x1, 0x0);
        gbc.writeMem(0xb6c6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x56ed);
        EXPECT(gbc.pc(), 0xb6c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c6), 0x39);
        // 39 0046
        gbc.setState(0xaa7b, 0xd19a, 0x6190, 0x34fb, 0x6938, 0x79ec, 0x1, 0x0);
        gbc.writeMem(0xaa7b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd19a);
        EXPECT(gbc.pc(), 0xaa7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa7b), 0x39);
        // 39 0047
        gbc.setState(0x17e6, 0xad55, 0x3eb0, 0x7dca, 0x7424, 0xc3af, 0x1, 0x0);
        gbc.writeMem(0x17e6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xad55);
        EXPECT(gbc.pc(), 0x17e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0048
        gbc.setState(0x7943, 0xaa3a, 0x5bb0, 0xb518, 0xaa90, 0xb239, 0x1, 0x0);
        gbc.writeMem(0x7943, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaa3a);
        EXPECT(gbc.pc(), 0x7944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0049
        gbc.setState(0x1ec2, 0xb490, 0xba00, 0x11ba, 0x1eaa, 0xbc88, 0x0, 0x1);
        gbc.writeMem(0x1ec2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb490);
        EXPECT(gbc.pc(), 0x1ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 004A
        gbc.setState(0x84fc, 0x48f4, 0x9d60, 0x8e2f, 0xf312, 0x8476, 0x1, 0x1);
        gbc.writeMem(0x84fc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x48f4);
        EXPECT(gbc.pc(), 0x84fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84fc), 0x39);
        // 39 004B
        gbc.setState(0x1ea5, 0xb1fd, 0x4220, 0x3283, 0xd6a9, 0x9185, 0x0, 0x1);
        gbc.writeMem(0x1ea5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb1fd);
        EXPECT(gbc.pc(), 0x1ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 004C
        gbc.setState(0x5737, 0x589f, 0xd010, 0x4e19, 0x44e7, 0x2793, 0x0, 0x0);
        gbc.writeMem(0x5737, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x589f);
        EXPECT(gbc.pc(), 0x5738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 004D
        gbc.setState(0x7902, 0x26b2, 0x8970, 0xdc33, 0xdb01, 0x94a0, 0x0, 0x1);
        gbc.writeMem(0x7902, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x26b2);
        EXPECT(gbc.pc(), 0x7903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 004E
        gbc.setState(0x5c5, 0xe24c, 0xfcc0, 0xc880, 0x9603, 0x10d, 0x1, 0x1);
        gbc.writeMem(0x5c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe24c);
        EXPECT(gbc.pc(), 0x5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 004F
        gbc.setState(0x1685, 0x80ad, 0x7f40, 0x23ca, 0x30ec, 0x4648, 0x0, 0x1);
        gbc.writeMem(0x1685, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x1686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0050
        gbc.setState(0x33e6, 0x9014, 0x1b50, 0xb5de, 0x3b30, 0x44bd, 0x0, 0x0);
        gbc.writeMem(0x33e6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9014);
        EXPECT(gbc.pc(), 0x33e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0051
        gbc.setState(0xd77, 0x1632, 0xef70, 0x2304, 0xe44c, 0x4450, 0x1, 0x0);
        gbc.writeMem(0xd77, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1632);
        EXPECT(gbc.pc(), 0xd78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0052
        gbc.setState(0x59a9, 0xc7d9, 0x21f0, 0x3129, 0x9570, 0xa583, 0x1, 0x0);
        gbc.writeMem(0x59a9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc7d9);
        EXPECT(gbc.pc(), 0x59aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0053
        gbc.setState(0x296e, 0x8f13, 0xb380, 0xe20d, 0xf737, 0x77e7, 0x1, 0x1);
        gbc.writeMem(0x296e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8f13);
        EXPECT(gbc.pc(), 0x296f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0054
        gbc.setState(0xccfe, 0x3aa6, 0xfa40, 0xec, 0x869d, 0x788e, 0x1, 0x1);
        gbc.writeMem(0xccfe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3aa6);
        EXPECT(gbc.pc(), 0xccff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfe), 0x39);
        // 39 0055
        gbc.setState(0x1cb6, 0x130, 0x1300, 0x90, 0x6f64, 0xc981, 0x0, 0x0);
        gbc.writeMem(0x1cb6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x130);
        EXPECT(gbc.pc(), 0x1cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0056
        gbc.setState(0x1288, 0x5ff9, 0xc030, 0x4e61, 0x601e, 0x96ff, 0x1, 0x0);
        gbc.writeMem(0x1288, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5ff9);
        EXPECT(gbc.pc(), 0x1289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0057
        gbc.setState(0x1e2e, 0x83a3, 0xb4e0, 0xe061, 0xec35, 0xced1, 0x1, 0x1);
        gbc.writeMem(0x1e2e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x83a3);
        EXPECT(gbc.pc(), 0x1e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0058
        gbc.setState(0xcdaf, 0xd77f, 0x9eb0, 0x2715, 0x29ea, 0x3e5b, 0x0, 0x0);
        gbc.writeMem(0xcdaf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd77f);
        EXPECT(gbc.pc(), 0xcdb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdaf), 0x39);
        // 39 0059
        gbc.setState(0xb574, 0x8eef, 0x64a0, 0x1cbc, 0x3b8b, 0x1b59, 0x0, 0x1);
        gbc.writeMem(0xb574, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8eef);
        EXPECT(gbc.pc(), 0xb575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb574), 0x39);
        // 39 005A
        gbc.setState(0xc4b5, 0xf6c9, 0x99a0, 0x6638, 0x7ddf, 0x21be, 0x0, 0x0);
        gbc.writeMem(0xc4b5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf6c9);
        EXPECT(gbc.pc(), 0xc4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4b5), 0x39);
        // 39 005B
        gbc.setState(0xd80a, 0xc00b, 0x63b0, 0xb1c0, 0x56ff, 0xcd9f, 0x0, 0x1);
        gbc.writeMem(0xd80a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc00b);
        EXPECT(gbc.pc(), 0xd80b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80a), 0x39);
        // 39 005C
        gbc.setState(0x193f, 0x9008, 0x8ec0, 0x397f, 0x4c2b, 0x5764, 0x0, 0x0);
        gbc.writeMem(0x193f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9008);
        EXPECT(gbc.pc(), 0x1940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 005D
        gbc.setState(0x9d2b, 0x350, 0xf630, 0x3eab, 0x79db, 0xa498, 0x0, 0x1);
        gbc.writeMem(0x9d2b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x350);
        EXPECT(gbc.pc(), 0x9d2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2b), 0x39);
        // 39 005E
        gbc.setState(0xdcd2, 0xb98e, 0xe60, 0xf952, 0xbec4, 0xbce3, 0x0, 0x0);
        gbc.writeMem(0xdcd2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb98e);
        EXPECT(gbc.pc(), 0xdcd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd2), 0x39);
        // 39 005F
        gbc.setState(0x539c, 0x9663, 0x6940, 0x183e, 0xdd44, 0x3f24, 0x1, 0x1);
        gbc.writeMem(0x539c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9663);
        EXPECT(gbc.pc(), 0x539d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0060
        gbc.setState(0x2db7, 0xdfbd, 0xb280, 0x2010, 0x3300, 0xaee5, 0x0, 0x0);
        gbc.writeMem(0x2db7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xdfbd);
        EXPECT(gbc.pc(), 0x2db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0061
        gbc.setState(0xdfc4, 0xa500, 0xf570, 0xf549, 0x3cf2, 0xf1af, 0x1, 0x0);
        gbc.writeMem(0xdfc4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa500);
        EXPECT(gbc.pc(), 0xdfc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfc4), 0x39);
        // 39 0062
        gbc.setState(0x790f, 0xd664, 0xec50, 0x4ff, 0x493e, 0x17bf, 0x0, 0x1);
        gbc.writeMem(0x790f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd664);
        EXPECT(gbc.pc(), 0x7910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0063
        gbc.setState(0xd3dc, 0xa9ef, 0x5fe0, 0x2b98, 0xe745, 0x9321, 0x0, 0x1);
        gbc.writeMem(0xd3dc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa9ef);
        EXPECT(gbc.pc(), 0xd3dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3dc), 0x39);
        // 39 0064
        gbc.setState(0x6f6c, 0x70f1, 0x8200, 0x5d14, 0x41b1, 0x4c36, 0x0, 0x0);
        gbc.writeMem(0x6f6c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x70f1);
        EXPECT(gbc.pc(), 0x6f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0066
        gbc.setState(0x44e0, 0xb6b2, 0xba10, 0xbf56, 0xf889, 0x5c08, 0x0, 0x0);
        gbc.writeMem(0x44e0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb6b2);
        EXPECT(gbc.pc(), 0x44e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0068
        gbc.setState(0xa9ce, 0xbec2, 0xebc0, 0xfa32, 0xbfb6, 0x1f3f, 0x1, 0x1);
        gbc.writeMem(0xa9ce, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xbec2);
        EXPECT(gbc.pc(), 0xa9cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ce), 0x39);
        // 39 0069
        gbc.setState(0x6805, 0x91a2, 0xdb00, 0x8d5a, 0x4375, 0xd1, 0x0, 0x1);
        gbc.writeMem(0x6805, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x91a2);
        EXPECT(gbc.pc(), 0x6806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 006A
        gbc.setState(0x9ac7, 0xfd7e, 0xf5f0, 0xb969, 0x47f9, 0x5fcf, 0x0, 0x1);
        gbc.writeMem(0x9ac7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfd7e);
        EXPECT(gbc.pc(), 0x9ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac7), 0x39);
        // 39 006B
        gbc.setState(0xcac3, 0xb890, 0xcaa0, 0xc318, 0x9dcd, 0xf2f8, 0x1, 0x1);
        gbc.writeMem(0xcac3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb890);
        EXPECT(gbc.pc(), 0xcac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac3), 0x39);
        // 39 006D
        gbc.setState(0x5aab, 0x5c1c, 0x1b60, 0xd744, 0xc830, 0xd61f, 0x0, 0x0);
        gbc.writeMem(0x5aab, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5c1c);
        EXPECT(gbc.pc(), 0x5aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 006E
        gbc.setState(0x7cc0, 0x3528, 0xed40, 0xb279, 0x44f6, 0x297f, 0x0, 0x1);
        gbc.writeMem(0x7cc0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3528);
        EXPECT(gbc.pc(), 0x7cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 006F
        gbc.setState(0x5d24, 0x2f71, 0x8940, 0xf54, 0xc2e2, 0x66eb, 0x0, 0x0);
        gbc.writeMem(0x5d24, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2f71);
        EXPECT(gbc.pc(), 0x5d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0070
        gbc.setState(0xeebe, 0x27d2, 0x97e0, 0x9ffc, 0x72d5, 0x424a, 0x0, 0x1);
        gbc.writeMem(0xeebe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x27d2);
        EXPECT(gbc.pc(), 0xeebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeebe), 0x39);
        // 39 0071
        gbc.setState(0xe653, 0x98dd, 0xf60, 0x8864, 0x54e1, 0x3572, 0x1, 0x0);
        gbc.writeMem(0xe653, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x98dd);
        EXPECT(gbc.pc(), 0xe654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe653), 0x39);
        // 39 0072
        gbc.setState(0x2a80, 0x2ff9, 0xfc80, 0x82fb, 0x24d5, 0xb847, 0x1, 0x1);
        gbc.writeMem(0x2a80, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2ff9);
        EXPECT(gbc.pc(), 0x2a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0073
        gbc.setState(0x5011, 0x633f, 0x8280, 0xd651, 0xd734, 0xd897, 0x1, 0x1);
        gbc.writeMem(0x5011, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x633f);
        EXPECT(gbc.pc(), 0x5012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0074
        gbc.setState(0x6c47, 0x523, 0xaa80, 0x5fe4, 0xa753, 0x1f, 0x1, 0x1);
        gbc.writeMem(0x6c47, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x523);
        EXPECT(gbc.pc(), 0x6c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0075
        gbc.setState(0x108f, 0xeb09, 0xaf60, 0xdc7, 0x53c5, 0x7844, 0x1, 0x0);
        gbc.writeMem(0x108f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xeb09);
        EXPECT(gbc.pc(), 0x1090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0076
        gbc.setState(0x7107, 0x5923, 0x9e60, 0xd8b8, 0x2487, 0x53f3, 0x0, 0x1);
        gbc.writeMem(0x7107, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5923);
        EXPECT(gbc.pc(), 0x7108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0077
        gbc.setState(0x1ab2, 0x2513, 0x58c0, 0x7905, 0x7834, 0xabde, 0x0, 0x0);
        gbc.writeMem(0x1ab2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2513);
        EXPECT(gbc.pc(), 0x1ab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0078
        gbc.setState(0x78b1, 0xaec2, 0x10d0, 0x4272, 0x2a55, 0x5248, 0x1, 0x1);
        gbc.writeMem(0x78b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xaec2);
        EXPECT(gbc.pc(), 0x78b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0079
        gbc.setState(0x9fc8, 0xab64, 0xa660, 0xb98, 0xf868, 0x9fad, 0x0, 0x0);
        gbc.writeMem(0x9fc8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xab64);
        EXPECT(gbc.pc(), 0x9fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc8), 0x39);
        // 39 007A
        gbc.setState(0xd4f4, 0x5dd5, 0x3950, 0x9c5, 0x435, 0x3698, 0x1, 0x0);
        gbc.writeMem(0xd4f4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5dd5);
        EXPECT(gbc.pc(), 0xd4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f4), 0x39);
        // 39 007B
        gbc.setState(0x1fd1, 0x11ee, 0x18b0, 0xbea4, 0x7961, 0xcdc6, 0x1, 0x0);
        gbc.writeMem(0x1fd1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x11ee);
        EXPECT(gbc.pc(), 0x1fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 007C
        gbc.setState(0x1f31, 0x44af, 0x8080, 0xa9fc, 0x11c4, 0x6de6, 0x1, 0x0);
        gbc.writeMem(0x1f31, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x44af);
        EXPECT(gbc.pc(), 0x1f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 007D
        gbc.setState(0x644b, 0xe26e, 0xc320, 0xfc60, 0x42f7, 0x8577, 0x1, 0x0);
        gbc.writeMem(0x644b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe26e);
        EXPECT(gbc.pc(), 0x644c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 007E
        gbc.setState(0x6070, 0x3cae, 0xfb10, 0x4f36, 0xe980, 0x55bf, 0x0, 0x1);
        gbc.writeMem(0x6070, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3cae);
        EXPECT(gbc.pc(), 0x6071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 007F
        gbc.setState(0x2a41, 0x35b6, 0x2980, 0xfafc, 0x7f5a, 0xd5ad, 0x0, 0x1);
        gbc.writeMem(0x2a41, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x35b6);
        EXPECT(gbc.pc(), 0x2a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0080
        gbc.setState(0x1179, 0x3841, 0x1a00, 0x18cd, 0xdaec, 0xf1eb, 0x1, 0x1);
        gbc.writeMem(0x1179, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3841);
        EXPECT(gbc.pc(), 0x117a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0081
        gbc.setState(0xbfb7, 0xa686, 0xc360, 0x47b4, 0xac9f, 0x4cfc, 0x0, 0x1);
        gbc.writeMem(0xbfb7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa686);
        EXPECT(gbc.pc(), 0xbfb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb7), 0x39);
        // 39 0082
        gbc.setState(0x9ce4, 0x8905, 0x2570, 0x459f, 0x2b32, 0x6721, 0x0, 0x1);
        gbc.writeMem(0x9ce4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8905);
        EXPECT(gbc.pc(), 0x9ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce4), 0x39);
        // 39 0083
        gbc.setState(0x5c27, 0xed74, 0x1a50, 0x7a85, 0xf42b, 0xfc81, 0x0, 0x1);
        gbc.writeMem(0x5c27, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xed74);
        EXPECT(gbc.pc(), 0x5c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0084
        gbc.setState(0x866f, 0x5f2a, 0x6870, 0xd8a2, 0x11eb, 0xf35c, 0x0, 0x1);
        gbc.writeMem(0x866f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5f2a);
        EXPECT(gbc.pc(), 0x8670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866f), 0x39);
        // 39 0085
        gbc.setState(0xc2d8, 0x24a, 0xcb50, 0x2e93, 0xdd26, 0x18d2, 0x1, 0x1);
        gbc.writeMem(0xc2d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x24a);
        EXPECT(gbc.pc(), 0xc2d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d8), 0x39);
        // 39 0086
        gbc.setState(0x14d5, 0x834a, 0x87d0, 0xe542, 0xdee3, 0xa008, 0x0, 0x0);
        gbc.writeMem(0x14d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x834a);
        EXPECT(gbc.pc(), 0x14d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0087
        gbc.setState(0x1397, 0x7b93, 0x7820, 0x121d, 0x4461, 0xbe4d, 0x0, 0x0);
        gbc.writeMem(0x1397, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7b93);
        EXPECT(gbc.pc(), 0x1398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0088
        gbc.setState(0x16b0, 0xa7be, 0x8090, 0xcd9e, 0x2a74, 0x80d5, 0x1, 0x0);
        gbc.writeMem(0x16b0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa7be);
        EXPECT(gbc.pc(), 0x16b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0089
        gbc.setState(0xc768, 0xb765, 0xac30, 0x1415, 0x347d, 0x40cc, 0x1, 0x0);
        gbc.writeMem(0xc768, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb765);
        EXPECT(gbc.pc(), 0xc769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc768), 0x39);
        // 39 008A
        gbc.setState(0x3609, 0x7804, 0xa1d0, 0x8732, 0x3b3, 0x253e, 0x0, 0x0);
        gbc.writeMem(0x3609, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7804);
        EXPECT(gbc.pc(), 0x360a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 008B
        gbc.setState(0x9bf6, 0xdc1a, 0xd1c0, 0x7b9, 0xb303, 0xc026, 0x0, 0x1);
        gbc.writeMem(0x9bf6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xdc1a);
        EXPECT(gbc.pc(), 0x9bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf6), 0x39);
        // 39 008C
        gbc.setState(0xc508, 0xec05, 0x1ff0, 0xabf, 0x5df4, 0xc406, 0x1, 0x1);
        gbc.writeMem(0xc508, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xec05);
        EXPECT(gbc.pc(), 0xc509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc508), 0x39);
        // 39 008F
        gbc.setState(0xf8c, 0xa010, 0x43e0, 0x182f, 0x7168, 0x7f9b, 0x1, 0x0);
        gbc.writeMem(0xf8c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa010);
        EXPECT(gbc.pc(), 0xf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0090
        gbc.setState(0x7570, 0x2183, 0xa10, 0xcbd3, 0xf8a9, 0x1fd9, 0x1, 0x1);
        gbc.writeMem(0x7570, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2183);
        EXPECT(gbc.pc(), 0x7571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0091
        gbc.setState(0xebff, 0xf651, 0xf440, 0xe3d7, 0x6eb5, 0xf272, 0x1, 0x1);
        gbc.writeMem(0xebff, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf651);
        EXPECT(gbc.pc(), 0xec00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebff), 0x39);
        // 39 0092
        gbc.setState(0x4494, 0x4fe2, 0xa0a0, 0xf93, 0xb6fe, 0xd110, 0x0, 0x1);
        gbc.writeMem(0x4494, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4fe2);
        EXPECT(gbc.pc(), 0x4495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0093
        gbc.setState(0xdfc, 0x92e0, 0x4e80, 0x20cf, 0x343d, 0x98a, 0x0, 0x1);
        gbc.writeMem(0xdfc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x92e0);
        EXPECT(gbc.pc(), 0xdfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0094
        gbc.setState(0xcc89, 0x4960, 0xba60, 0x3612, 0x9b4, 0xc791, 0x1, 0x1);
        gbc.writeMem(0xcc89, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4960);
        EXPECT(gbc.pc(), 0xcc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc89), 0x39);
        // 39 0095
        gbc.setState(0x42c6, 0x7423, 0xb4f0, 0x94a4, 0x9a35, 0xf3, 0x0, 0x0);
        gbc.writeMem(0x42c6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7423);
        EXPECT(gbc.pc(), 0x42c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0096
        gbc.setState(0xe0f1, 0x3242, 0xca80, 0xe1a5, 0x4a5, 0xe39b, 0x0, 0x0);
        gbc.writeMem(0xe0f1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3242);
        EXPECT(gbc.pc(), 0xe0f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f1), 0x39);
        // 39 0097
        gbc.setState(0x84b8, 0xc814, 0x9140, 0x3a78, 0x488d, 0xb26, 0x0, 0x0);
        gbc.writeMem(0x84b8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc814);
        EXPECT(gbc.pc(), 0x84b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b8), 0x39);
        // 39 0098
        gbc.setState(0x39d8, 0xe87c, 0x9c30, 0x16a5, 0x9a72, 0x51f8, 0x1, 0x0);
        gbc.writeMem(0x39d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe87c);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0099
        gbc.setState(0x3589, 0xe636, 0x8d60, 0x8ab6, 0xc960, 0xdc3b, 0x1, 0x1);
        gbc.writeMem(0x3589, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe636);
        EXPECT(gbc.pc(), 0x358a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 009A
        gbc.setState(0xc919, 0x5a5, 0x2700, 0xb85f, 0x4cdd, 0x79f9, 0x1, 0x0);
        gbc.writeMem(0xc919, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5a5);
        EXPECT(gbc.pc(), 0xc91a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc919), 0x39);
        // 39 009B
        gbc.setState(0x38a4, 0x27ed, 0xc110, 0xee0, 0xaa5, 0x249e, 0x1, 0x1);
        gbc.writeMem(0x38a4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x27ed);
        EXPECT(gbc.pc(), 0x38a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 009C
        gbc.setState(0x3810, 0x3f4b, 0x6d90, 0x807d, 0x3627, 0xc5a6, 0x1, 0x1);
        gbc.writeMem(0x3810, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3f4b);
        EXPECT(gbc.pc(), 0x3811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 009D
        gbc.setState(0x47c0, 0xff9e, 0x7c40, 0xbd62, 0xcb73, 0xa54b, 0x1, 0x0);
        gbc.writeMem(0x47c0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xff9e);
        EXPECT(gbc.pc(), 0x47c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 009E
        gbc.setState(0xb215, 0x653, 0xd480, 0x9d79, 0xd208, 0x7f96, 0x0, 0x0);
        gbc.writeMem(0xb215, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x653);
        EXPECT(gbc.pc(), 0xb216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb215), 0x39);
        // 39 009F
        gbc.setState(0x240e, 0x4d9e, 0x1ee0, 0xa0a0, 0x19b6, 0x7d02, 0x0, 0x1);
        gbc.writeMem(0x240e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4d9e);
        EXPECT(gbc.pc(), 0x240f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 00A0
        gbc.setState(0x471a, 0x7a82, 0xa000, 0x8cc4, 0xe7b2, 0xaf1e, 0x1, 0x1);
        gbc.writeMem(0x471a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7a82);
        EXPECT(gbc.pc(), 0x471b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00A1
        gbc.setState(0x1e55, 0x52c7, 0x75b0, 0x3138, 0x4d8e, 0xc194, 0x0, 0x0);
        gbc.writeMem(0x1e55, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x52c7);
        EXPECT(gbc.pc(), 0x1e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00A2
        gbc.setState(0x1b84, 0xed1b, 0x5200, 0xb5e8, 0x7410, 0xc764, 0x1, 0x1);
        gbc.writeMem(0x1b84, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xed1b);
        EXPECT(gbc.pc(), 0x1b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00A3
        gbc.setState(0x7f3e, 0x6f54, 0x3430, 0x19, 0xb2a4, 0x379f, 0x1, 0x0);
        gbc.writeMem(0x7f3e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6f54);
        EXPECT(gbc.pc(), 0x7f3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 00A4
        gbc.setState(0xdc07, 0x8bc1, 0x540, 0xe4b4, 0xde1e, 0x80dd, 0x0, 0x1);
        gbc.writeMem(0xdc07, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8bc1);
        EXPECT(gbc.pc(), 0xdc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc07), 0x39);
        // 39 00A5
        gbc.setState(0xb249, 0x7f6d, 0x1190, 0xf503, 0x5cb8, 0x2618, 0x0, 0x0);
        gbc.writeMem(0xb249, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7f6d);
        EXPECT(gbc.pc(), 0xb24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb249), 0x39);
        // 39 00A6
        gbc.setState(0xab0d, 0x94b, 0xf1a0, 0xeca7, 0xf32e, 0xe6ad, 0x0, 0x1);
        gbc.writeMem(0xab0d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x94b);
        EXPECT(gbc.pc(), 0xab0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0d), 0x39);
        // 39 00A7
        gbc.setState(0xb922, 0x260e, 0x2b60, 0x8f68, 0x5688, 0x53d4, 0x0, 0x0);
        gbc.writeMem(0xb922, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x260e);
        EXPECT(gbc.pc(), 0xb923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb922), 0x39);
        // 39 00A8
        gbc.setState(0x1772, 0x24c4, 0xe0d0, 0xbee3, 0x1be9, 0x6478, 0x0, 0x1);
        gbc.writeMem(0x1772, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x24c4);
        EXPECT(gbc.pc(), 0x1773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00A9
        gbc.setState(0x6494, 0xe230, 0x8620, 0xe9fa, 0xbd43, 0xfef1, 0x1, 0x0);
        gbc.writeMem(0x6494, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe230);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00AA
        gbc.setState(0x5da, 0xd4b8, 0xf1f0, 0x72be, 0x3e82, 0x3264, 0x0, 0x0);
        gbc.writeMem(0x5da, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd4b8);
        EXPECT(gbc.pc(), 0x5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00AB
        gbc.setState(0xbf74, 0x5086, 0xe430, 0x2bff, 0x80cd, 0x8195, 0x0, 0x0);
        gbc.writeMem(0xbf74, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5086);
        EXPECT(gbc.pc(), 0xbf75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf74), 0x39);
        // 39 00AC
        gbc.setState(0xd0c5, 0x5fc0, 0x5800, 0xe2f0, 0xe1dd, 0xc63f, 0x0, 0x1);
        gbc.writeMem(0xd0c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5fc0);
        EXPECT(gbc.pc(), 0xd0c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c5), 0x39);
        // 39 00AD
        gbc.setState(0xcde9, 0xd2f8, 0xd740, 0xb920, 0x8c7, 0x9444, 0x0, 0x0);
        gbc.writeMem(0xcde9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd2f8);
        EXPECT(gbc.pc(), 0xcdea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcde9), 0x39);
        // 39 00AE
        gbc.setState(0xac3f, 0xc080, 0xa4e0, 0x3c16, 0x699e, 0x22e1, 0x1, 0x1);
        gbc.writeMem(0xac3f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc080);
        EXPECT(gbc.pc(), 0xac40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3f), 0x39);
        // 39 00AF
        gbc.setState(0x59e0, 0x298a, 0xf1b0, 0x597d, 0x31bd, 0x8413, 0x0, 0x1);
        gbc.writeMem(0x59e0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x298a);
        EXPECT(gbc.pc(), 0x59e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00B0
        gbc.setState(0xc004, 0x3c26, 0x29a0, 0x1e81, 0xd4f7, 0xd592, 0x0, 0x1);
        gbc.writeMem(0xc004, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3c26);
        EXPECT(gbc.pc(), 0xc005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc004), 0x39);
        // 39 00B1
        gbc.setState(0xd797, 0x1464, 0xe6e0, 0xdf10, 0x4fd3, 0x83d6, 0x1, 0x1);
        gbc.writeMem(0xd797, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1464);
        EXPECT(gbc.pc(), 0xd798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd797), 0x39);
        // 39 00B2
        gbc.setState(0x6013, 0x47af, 0x7950, 0x59a5, 0xa35f, 0xc83e, 0x0, 0x0);
        gbc.writeMem(0x6013, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x47af);
        EXPECT(gbc.pc(), 0x6014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00B3
        gbc.setState(0xd625, 0x133d, 0x6860, 0xe920, 0x2f0c, 0x3d7, 0x0, 0x0);
        gbc.writeMem(0xd625, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x133d);
        EXPECT(gbc.pc(), 0xd626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd625), 0x39);
        // 39 00B4
        gbc.setState(0x6cab, 0x3b7f, 0x2100, 0xd2f2, 0x1e5, 0xf19b, 0x0, 0x0);
        gbc.writeMem(0x6cab, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3b7f);
        EXPECT(gbc.pc(), 0x6cac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00B5
        gbc.setState(0xd242, 0xd919, 0x8e0, 0x9b43, 0xee03, 0xc784, 0x0, 0x0);
        gbc.writeMem(0xd242, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd919);
        EXPECT(gbc.pc(), 0xd243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd242), 0x39);
        // 39 00B6
        gbc.setState(0x1a62, 0x1aaf, 0x8ae0, 0x8b94, 0x8c26, 0x3db9, 0x0, 0x0);
        gbc.writeMem(0x1a62, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1aaf);
        EXPECT(gbc.pc(), 0x1a63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 00B7
        gbc.setState(0x57af, 0xdc5e, 0x76e0, 0x24c9, 0x5954, 0x4c06, 0x1, 0x0);
        gbc.writeMem(0x57af, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdc5e);
        EXPECT(gbc.pc(), 0x57b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00B8
        gbc.setState(0xc281, 0x15d7, 0xc940, 0x2e56, 0x6ae1, 0x3386, 0x1, 0x1);
        gbc.writeMem(0xc281, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x15d7);
        EXPECT(gbc.pc(), 0xc282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc281), 0x39);
        // 39 00B9
        gbc.setState(0x58ae, 0xd3a0, 0x800, 0x6692, 0x4a4a, 0xc2d, 0x0, 0x1);
        gbc.writeMem(0x58ae, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd3a0);
        EXPECT(gbc.pc(), 0x58af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00BA
        gbc.setState(0x59a2, 0xa82c, 0x37a0, 0xc838, 0x3c68, 0x2250, 0x0, 0x1);
        gbc.writeMem(0x59a2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa82c);
        EXPECT(gbc.pc(), 0x59a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00BB
        gbc.setState(0x79fe, 0x64d4, 0x4290, 0x7f87, 0xe815, 0x7189, 0x0, 0x0);
        gbc.writeMem(0x79fe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x64d4);
        EXPECT(gbc.pc(), 0x79ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00BC
        gbc.setState(0x8969, 0xe225, 0x36c0, 0xe6b3, 0x5f60, 0xb16, 0x1, 0x0);
        gbc.writeMem(0x8969, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe225);
        EXPECT(gbc.pc(), 0x896a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8969), 0x39);
        // 39 00BD
        gbc.setState(0xabfa, 0x8454, 0xae80, 0x2532, 0x907b, 0x640b, 0x1, 0x0);
        gbc.writeMem(0xabfa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8454);
        EXPECT(gbc.pc(), 0xabfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfa), 0x39);
        // 39 00BE
        gbc.setState(0x2fbd, 0xba00, 0xb670, 0x2ba5, 0xa765, 0x89e9, 0x0, 0x1);
        gbc.writeMem(0x2fbd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xba00);
        EXPECT(gbc.pc(), 0x2fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00BF
        gbc.setState(0x289c, 0x311e, 0x5af0, 0xf4e5, 0xb790, 0x42a1, 0x1, 0x0);
        gbc.writeMem(0x289c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x311e);
        EXPECT(gbc.pc(), 0x289d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00C0
        gbc.setState(0x9687, 0x1700, 0xff10, 0x3794, 0xa141, 0x8539, 0x0, 0x1);
        gbc.writeMem(0x9687, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1700);
        EXPECT(gbc.pc(), 0x9688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9687), 0x39);
        // 39 00C1
        gbc.setState(0x3ba8, 0x177c, 0xab80, 0x738d, 0xed0d, 0x1306, 0x1, 0x0);
        gbc.writeMem(0x3ba8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x177c);
        EXPECT(gbc.pc(), 0x3ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00C2
        gbc.setState(0x5ccb, 0x9169, 0x79e0, 0x57b7, 0x4c94, 0x7fee, 0x0, 0x0);
        gbc.writeMem(0x5ccb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9169);
        EXPECT(gbc.pc(), 0x5ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00C3
        gbc.setState(0xb32a, 0x9b5d, 0x2370, 0xd10e, 0xe537, 0x8c1d, 0x0, 0x1);
        gbc.writeMem(0xb32a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9b5d);
        EXPECT(gbc.pc(), 0xb32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb32a), 0x39);
        // 39 00C4
        gbc.setState(0x8858, 0x2dae, 0x5f20, 0xc19d, 0xa46, 0x5203, 0x0, 0x0);
        gbc.writeMem(0x8858, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2dae);
        EXPECT(gbc.pc(), 0x8859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8858), 0x39);
        // 39 00C5
        gbc.setState(0xa9ab, 0x5d10, 0x9c80, 0x8fd7, 0x8504, 0x4e36, 0x0, 0x0);
        gbc.writeMem(0xa9ab, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5d10);
        EXPECT(gbc.pc(), 0xa9ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ab), 0x39);
        // 39 00C6
        gbc.setState(0xa9bc, 0xa06e, 0xdac0, 0x2bf9, 0xe92a, 0x5363, 0x0, 0x0);
        gbc.writeMem(0xa9bc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa06e);
        EXPECT(gbc.pc(), 0xa9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9bc), 0x39);
        // 39 00C7
        gbc.setState(0x60a9, 0x6043, 0xaaf0, 0x55a8, 0x3e6d, 0x96e7, 0x0, 0x0);
        gbc.writeMem(0x60a9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6043);
        EXPECT(gbc.pc(), 0x60aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00C8
        gbc.setState(0x3da0, 0xba5c, 0x76b0, 0xc437, 0x1a0f, 0xa4f0, 0x0, 0x0);
        gbc.writeMem(0x3da0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xba5c);
        EXPECT(gbc.pc(), 0x3da1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00C9
        gbc.setState(0xd695, 0x2a77, 0x8ce0, 0xc793, 0xe374, 0xc959, 0x0, 0x0);
        gbc.writeMem(0xd695, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2a77);
        EXPECT(gbc.pc(), 0xd696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd695), 0x39);
        // 39 00CA
        gbc.setState(0x353f, 0x710e, 0x76b0, 0xdebb, 0x8ea2, 0x61db, 0x1, 0x0);
        gbc.writeMem(0x353f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x710e);
        EXPECT(gbc.pc(), 0x3540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00CB
        gbc.setState(0x4b04, 0x6455, 0x2fc0, 0x116f, 0x3da3, 0x492, 0x0, 0x0);
        gbc.writeMem(0x4b04, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6455);
        EXPECT(gbc.pc(), 0x4b05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00CC
        gbc.setState(0x8b1e, 0x8fb6, 0x1aa0, 0x8742, 0x9b81, 0x9bca, 0x1, 0x0);
        gbc.writeMem(0x8b1e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8fb6);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b1e), 0x39);
        // 39 00CD
        gbc.setState(0xd358, 0x9070, 0x17a0, 0x8f37, 0x2a4c, 0x9f61, 0x1, 0x1);
        gbc.writeMem(0xd358, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9070);
        EXPECT(gbc.pc(), 0xd359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd358), 0x39);
        // 39 00CE
        gbc.setState(0x821b, 0x2eb9, 0x4fd0, 0x614d, 0xab1, 0x326c, 0x0, 0x1);
        gbc.writeMem(0x821b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2eb9);
        EXPECT(gbc.pc(), 0x821c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821b), 0x39);
        // 39 00CF
        gbc.setState(0x3139, 0xd53a, 0x9730, 0xff16, 0x8e6c, 0x7c57, 0x0, 0x0);
        gbc.writeMem(0x3139, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd53a);
        EXPECT(gbc.pc(), 0x313a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00D0
        gbc.setState(0x60b1, 0xa96b, 0x7490, 0x6eeb, 0x18f, 0x7c78, 0x0, 0x1);
        gbc.writeMem(0x60b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa96b);
        EXPECT(gbc.pc(), 0x60b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00D1
        gbc.setState(0x126e, 0x3bec, 0x18b0, 0x25e4, 0x46c9, 0xdb8b, 0x1, 0x1);
        gbc.writeMem(0x126e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3bec);
        EXPECT(gbc.pc(), 0x126f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00D2
        gbc.setState(0x869b, 0xa19a, 0x2210, 0x2d41, 0x7cd4, 0x11a3, 0x0, 0x0);
        gbc.writeMem(0x869b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa19a);
        EXPECT(gbc.pc(), 0x869c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x869b), 0x39);
        // 39 00D3
        gbc.setState(0xea35, 0x376c, 0x99f0, 0xf7e5, 0xd689, 0x4547, 0x1, 0x0);
        gbc.writeMem(0xea35, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x376c);
        EXPECT(gbc.pc(), 0xea36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea35), 0x39);
        // 39 00D4
        gbc.setState(0x5afb, 0x944a, 0x2990, 0x2e5d, 0xc07d, 0xb266, 0x0, 0x1);
        gbc.writeMem(0x5afb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x944a);
        EXPECT(gbc.pc(), 0x5afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00D5
        gbc.setState(0x1383, 0xc3df, 0x6e90, 0xffd1, 0x7eb2, 0x4cea, 0x1, 0x0);
        gbc.writeMem(0x1383, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc3df);
        EXPECT(gbc.pc(), 0x1384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00D6
        gbc.setState(0x9f7f, 0xf917, 0x710, 0x8d9b, 0xc01f, 0x1295, 0x1, 0x1);
        gbc.writeMem(0x9f7f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf917);
        EXPECT(gbc.pc(), 0x9f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f7f), 0x39);
        // 39 00D7
        gbc.setState(0x52d8, 0xe7c0, 0xe5b0, 0x9265, 0xedb4, 0xb09, 0x0, 0x0);
        gbc.writeMem(0x52d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe7c0);
        EXPECT(gbc.pc(), 0x52d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 00D8
        gbc.setState(0x97c5, 0x14c4, 0x9990, 0x4f02, 0x62d9, 0x54c9, 0x0, 0x1);
        gbc.writeMem(0x97c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x14c4);
        EXPECT(gbc.pc(), 0x97c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c5), 0x39);
        // 39 00D9
        gbc.setState(0x30ed, 0x371c, 0x2bb0, 0x9173, 0x109e, 0x221f, 0x0, 0x1);
        gbc.writeMem(0x30ed, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x371c);
        EXPECT(gbc.pc(), 0x30ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00DA
        gbc.setState(0x3e5f, 0xe226, 0x48c0, 0x5c70, 0x7a9e, 0x1559, 0x0, 0x1);
        gbc.writeMem(0x3e5f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe226);
        EXPECT(gbc.pc(), 0x3e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00DB
        gbc.setState(0xd824, 0xdee7, 0xfe00, 0xa734, 0xdf35, 0xfdd4, 0x0, 0x0);
        gbc.writeMem(0xd824, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdee7);
        EXPECT(gbc.pc(), 0xd825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd824), 0x39);
        // 39 00DC
        gbc.setState(0xe7bf, 0x5390, 0x4530, 0xfb95, 0xa310, 0x834b, 0x1, 0x0);
        gbc.writeMem(0xe7bf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5390);
        EXPECT(gbc.pc(), 0xe7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bf), 0x39);
        // 39 00DD
        gbc.setState(0xcae2, 0x27bb, 0x96a0, 0x14f8, 0xbfa1, 0x6bc6, 0x1, 0x1);
        gbc.writeMem(0xcae2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x27bb);
        EXPECT(gbc.pc(), 0xcae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae2), 0x39);
        // 39 00DE
        gbc.setState(0x4b89, 0x4108, 0x2420, 0x993e, 0xccd, 0x4bf1, 0x1, 0x1);
        gbc.writeMem(0x4b89, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4108);
        EXPECT(gbc.pc(), 0x4b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00DF
        gbc.setState(0x9b73, 0x3303, 0x4370, 0x1657, 0x1be7, 0x5420, 0x0, 0x0);
        gbc.writeMem(0x9b73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3303);
        EXPECT(gbc.pc(), 0x9b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b73), 0x39);
        // 39 00E0
        gbc.setState(0x94e1, 0x763e, 0xd0f0, 0x74e5, 0x23ea, 0x1210, 0x0, 0x0);
        gbc.writeMem(0x94e1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x763e);
        EXPECT(gbc.pc(), 0x94e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e1), 0x39);
        // 39 00E1
        gbc.setState(0x294e, 0xe0dd, 0x78a0, 0x48ab, 0x2dfc, 0x59fe, 0x0, 0x1);
        gbc.writeMem(0x294e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe0dd);
        EXPECT(gbc.pc(), 0x294f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00E2
        gbc.setState(0xab5e, 0x2158, 0x5be0, 0x5df9, 0x8821, 0x9b9b, 0x0, 0x1);
        gbc.writeMem(0xab5e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2158);
        EXPECT(gbc.pc(), 0xab5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5e), 0x39);
        // 39 00E3
        gbc.setState(0x655c, 0xb345, 0x6900, 0xc6a5, 0x2284, 0x1988, 0x0, 0x0);
        gbc.writeMem(0x655c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb345);
        EXPECT(gbc.pc(), 0x655d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00E4
        gbc.setState(0x303e, 0x3fe9, 0x6920, 0x696a, 0x4ce8, 0xf6b2, 0x1, 0x1);
        gbc.writeMem(0x303e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3fe9);
        EXPECT(gbc.pc(), 0x303f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00E5
        gbc.setState(0x256b, 0xa15a, 0xfdd0, 0x57e2, 0xe7fd, 0x1750, 0x0, 0x0);
        gbc.writeMem(0x256b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa15a);
        EXPECT(gbc.pc(), 0x256c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00E6
        gbc.setState(0x1190, 0x8dd6, 0x3290, 0x7bf5, 0xb1bc, 0x3d06, 0x0, 0x1);
        gbc.writeMem(0x1190, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8dd6);
        EXPECT(gbc.pc(), 0x1191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 00E7
        gbc.setState(0x36e2, 0x5374, 0x9820, 0xa0c1, 0x7d9f, 0xf802, 0x1, 0x1);
        gbc.writeMem(0x36e2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5374);
        EXPECT(gbc.pc(), 0x36e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00E8
        gbc.setState(0x48c8, 0xcbcc, 0x2030, 0x93c0, 0x6dd5, 0xa04f, 0x1, 0x0);
        gbc.writeMem(0x48c8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcbcc);
        EXPECT(gbc.pc(), 0x48c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00E9
        gbc.setState(0x3a1d, 0x1722, 0xe220, 0xe725, 0x9b01, 0xf2cb, 0x0, 0x1);
        gbc.writeMem(0x3a1d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1722);
        EXPECT(gbc.pc(), 0x3a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00EA
        gbc.setState(0xb822, 0xb76d, 0xbc60, 0x80ce, 0xdadf, 0x8dc4, 0x0, 0x0);
        gbc.writeMem(0xb822, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb76d);
        EXPECT(gbc.pc(), 0xb823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb822), 0x39);
        // 39 00EB
        gbc.setState(0xccf, 0x226d, 0xa010, 0xe6e8, 0x5519, 0x583f, 0x0, 0x1);
        gbc.writeMem(0xccf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x226d);
        EXPECT(gbc.pc(), 0xcd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00EC
        gbc.setState(0xcce6, 0x299e, 0xc7a0, 0x897b, 0x2759, 0x49e5, 0x1, 0x1);
        gbc.writeMem(0xcce6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x299e);
        EXPECT(gbc.pc(), 0xcce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce6), 0x39);
        // 39 00ED
        gbc.setState(0x84c4, 0x1205, 0xf2e0, 0x17fd, 0xc8d7, 0x88f, 0x0, 0x1);
        gbc.writeMem(0x84c4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1205);
        EXPECT(gbc.pc(), 0x84c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c4), 0x39);
        // 39 00EE
        gbc.setState(0x9c86, 0xf28e, 0x49d0, 0x9c00, 0x63a7, 0xdc35, 0x1, 0x0);
        gbc.writeMem(0x9c86, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf28e);
        EXPECT(gbc.pc(), 0x9c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c86), 0x39);
        // 39 00EF
        gbc.setState(0x5f5b, 0x512c, 0x37f0, 0x2fd0, 0xc246, 0xa3b4, 0x1, 0x1);
        gbc.writeMem(0x5f5b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x512c);
        EXPECT(gbc.pc(), 0x5f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00F0
        gbc.setState(0x998a, 0x347, 0x6d00, 0x180, 0xb290, 0x4d1, 0x1, 0x1);
        gbc.writeMem(0x998a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x347);
        EXPECT(gbc.pc(), 0x998b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x998a), 0x39);
        // 39 00F1
        gbc.setState(0x33a, 0x96e0, 0x3d0, 0x4371, 0x30d5, 0x714, 0x0, 0x0);
        gbc.writeMem(0x33a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x96e0);
        EXPECT(gbc.pc(), 0x33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00F2
        gbc.setState(0x79ae, 0x6038, 0x22f0, 0x515f, 0xa76a, 0x5a14, 0x0, 0x0);
        gbc.writeMem(0x79ae, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6038);
        EXPECT(gbc.pc(), 0x79af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 00F3
        gbc.setState(0xa092, 0x2d2b, 0x4d50, 0x407a, 0x6c2f, 0x628b, 0x0, 0x1);
        gbc.writeMem(0xa092, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2d2b);
        EXPECT(gbc.pc(), 0xa093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa092), 0x39);
        // 39 00F4
        gbc.setState(0x92bc, 0xcea5, 0xb980, 0x2eb2, 0x3c4f, 0x1b7a, 0x0, 0x1);
        gbc.writeMem(0x92bc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xcea5);
        EXPECT(gbc.pc(), 0x92bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92bc), 0x39);
        // 39 00F5
        gbc.setState(0x8997, 0x32ea, 0x72d0, 0xa800, 0x47c7, 0xf6a6, 0x0, 0x0);
        gbc.writeMem(0x8997, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x32ea);
        EXPECT(gbc.pc(), 0x8998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8997), 0x39);
        // 39 00F7
        gbc.setState(0xca5c, 0x4bb8, 0x810, 0x551f, 0x9680, 0xc59e, 0x1, 0x1);
        gbc.writeMem(0xca5c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4bb8);
        EXPECT(gbc.pc(), 0xca5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca5c), 0x39);
        // 39 00F8
        gbc.setState(0xe411, 0xaa73, 0xc2a0, 0xdd4c, 0xe9b2, 0xdd87, 0x1, 0x0);
        gbc.writeMem(0xe411, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xaa73);
        EXPECT(gbc.pc(), 0xe412);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe411), 0x39);
        // 39 00F9
        gbc.setState(0xac42, 0xea1d, 0x6490, 0xe2fc, 0xf777, 0xa8a7, 0x1, 0x0);
        gbc.writeMem(0xac42, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xea1d);
        EXPECT(gbc.pc(), 0xac43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac42), 0x39);
        // 39 00FA
        gbc.setState(0xf49, 0xc466, 0x2340, 0x8cb9, 0x303, 0x9b4b, 0x1, 0x1);
        gbc.writeMem(0xf49, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc466);
        EXPECT(gbc.pc(), 0xf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00FB
        gbc.setState(0xc813, 0xf927, 0x8a60, 0x394b, 0x5de0, 0x94f3, 0x0, 0x0);
        gbc.writeMem(0xc813, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf927);
        EXPECT(gbc.pc(), 0xc814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc813), 0x39);
        // 39 00FC
        gbc.setState(0xd78c, 0xc36f, 0x10e0, 0xfa3e, 0xcf6d, 0x25e3, 0x0, 0x1);
        gbc.writeMem(0xd78c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc36f);
        EXPECT(gbc.pc(), 0xd78d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78c), 0x39);
        // 39 00FD
        gbc.setState(0xb58, 0x9552, 0xe390, 0xf3f9, 0x7788, 0xb858, 0x0, 0x0);
        gbc.writeMem(0xb58, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9552);
        EXPECT(gbc.pc(), 0xb59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 00FE
        gbc.setState(0x42e7, 0xea72, 0x2500, 0x64e7, 0xe82d, 0x3c6e, 0x1, 0x1);
        gbc.writeMem(0x42e7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xea72);
        EXPECT(gbc.pc(), 0x42e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 00FF
        gbc.setState(0x6836, 0x862f, 0xdc20, 0x896b, 0x813c, 0xaf41, 0x0, 0x0);
        gbc.writeMem(0x6836, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x862f);
        EXPECT(gbc.pc(), 0x6837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0101
        gbc.setState(0x473f, 0xd268, 0x7020, 0xe625, 0xce3, 0x86a6, 0x0, 0x1);
        gbc.writeMem(0x473f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd268);
        EXPECT(gbc.pc(), 0x4740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0102
        gbc.setState(0xb0c4, 0x992c, 0xc030, 0xc192, 0x62aa, 0x249b, 0x1, 0x1);
        gbc.writeMem(0xb0c4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x992c);
        EXPECT(gbc.pc(), 0xb0c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c4), 0x39);
        // 39 0103
        gbc.setState(0xf8b, 0xa4c8, 0x95d0, 0x614a, 0xdc1c, 0x3a8, 0x0, 0x0);
        gbc.writeMem(0xf8b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa4c8);
        EXPECT(gbc.pc(), 0xf8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0104
        gbc.setState(0xd4c, 0x5811, 0xe890, 0x895c, 0x2b27, 0x6509, 0x1, 0x0);
        gbc.writeMem(0xd4c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5811);
        EXPECT(gbc.pc(), 0xd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0105
        gbc.setState(0x835e, 0x374b, 0x6bb0, 0xb83b, 0x5df0, 0x901b, 0x1, 0x1);
        gbc.writeMem(0x835e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0x835f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835e), 0x39);
        // 39 0106
        gbc.setState(0x3d0e, 0xa618, 0x7e30, 0xe42b, 0x4f30, 0x68f, 0x1, 0x0);
        gbc.writeMem(0x3d0e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa618);
        EXPECT(gbc.pc(), 0x3d0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0109
        gbc.setState(0x4041, 0xf633, 0x4610, 0xb2e1, 0xf2cd, 0xfbec, 0x1, 0x1);
        gbc.writeMem(0x4041, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf633);
        EXPECT(gbc.pc(), 0x4042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 010A
        gbc.setState(0x80a8, 0xb5c5, 0x3ee0, 0xf683, 0x9e10, 0x72a5, 0x0, 0x0);
        gbc.writeMem(0x80a8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb5c5);
        EXPECT(gbc.pc(), 0x80a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a8), 0x39);
        // 39 010B
        gbc.setState(0xb862, 0xffdd, 0x1090, 0xfb52, 0x65e2, 0x6bd6, 0x1, 0x0);
        gbc.writeMem(0xb862, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xffdd);
        EXPECT(gbc.pc(), 0xb863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb862), 0x39);
        // 39 010C
        gbc.setState(0x95ff, 0x4d9e, 0x28b0, 0x2794, 0x17ed, 0x4ecc, 0x1, 0x1);
        gbc.writeMem(0x95ff, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4d9e);
        EXPECT(gbc.pc(), 0x9600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ff), 0x39);
        // 39 010D
        gbc.setState(0x7d8, 0x9e51, 0x8110, 0x9c6, 0x9f1b, 0x4639, 0x0, 0x1);
        gbc.writeMem(0x7d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9e51);
        EXPECT(gbc.pc(), 0x7d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 010E
        gbc.setState(0x8c28, 0x9f7b, 0xaaf0, 0x64a8, 0x95f8, 0xf46e, 0x0, 0x1);
        gbc.writeMem(0x8c28, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9f7b);
        EXPECT(gbc.pc(), 0x8c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c28), 0x39);
        // 39 010F
        gbc.setState(0x2cd4, 0xaaac, 0x380, 0xf655, 0xe334, 0xe71d, 0x1, 0x1);
        gbc.writeMem(0x2cd4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xaaac);
        EXPECT(gbc.pc(), 0x2cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0110
        gbc.setState(0x75b3, 0x79ff, 0x4260, 0x6cf6, 0xc1ce, 0x4345, 0x0, 0x0);
        gbc.writeMem(0x75b3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x79ff);
        EXPECT(gbc.pc(), 0x75b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0111
        gbc.setState(0x15fb, 0x627e, 0x6eb0, 0x52c2, 0x560f, 0x7f1b, 0x1, 0x1);
        gbc.writeMem(0x15fb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x627e);
        EXPECT(gbc.pc(), 0x15fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0112
        gbc.setState(0x4db7, 0xce03, 0xcf50, 0xc89d, 0x3ceb, 0x8052, 0x0, 0x0);
        gbc.writeMem(0x4db7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xce03);
        EXPECT(gbc.pc(), 0x4db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0113
        gbc.setState(0x70f6, 0x8aed, 0x5230, 0x6653, 0xcde2, 0xee10, 0x1, 0x1);
        gbc.writeMem(0x70f6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8aed);
        EXPECT(gbc.pc(), 0x70f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0114
        gbc.setState(0x9f06, 0x4f0b, 0xa5f0, 0x75e9, 0xe886, 0x6a06, 0x0, 0x1);
        gbc.writeMem(0x9f06, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4f0b);
        EXPECT(gbc.pc(), 0x9f07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f06), 0x39);
        // 39 0115
        gbc.setState(0x9a79, 0x931f, 0x8790, 0xe90e, 0xb081, 0x64b2, 0x1, 0x0);
        gbc.writeMem(0x9a79, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x931f);
        EXPECT(gbc.pc(), 0x9a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a79), 0x39);
        // 39 0116
        gbc.setState(0xb0f5, 0x6a00, 0xb130, 0x7347, 0xa291, 0xd1a9, 0x0, 0x1);
        gbc.writeMem(0xb0f5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6a00);
        EXPECT(gbc.pc(), 0xb0f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f5), 0x39);
        // 39 0117
        gbc.setState(0xb007, 0x7a3a, 0xc650, 0xf47d, 0x1385, 0x97fb, 0x1, 0x0);
        gbc.writeMem(0xb007, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7a3a);
        EXPECT(gbc.pc(), 0xb008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb007), 0x39);
        // 39 0118
        gbc.setState(0x75f5, 0x3f53, 0x4e0, 0x8d59, 0x1e00, 0xdd8d, 0x0, 0x1);
        gbc.writeMem(0x75f5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3f53);
        EXPECT(gbc.pc(), 0x75f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0119
        gbc.setState(0x5c6a, 0x163f, 0x3890, 0x41f9, 0x68ad, 0xf5ba, 0x1, 0x0);
        gbc.writeMem(0x5c6a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x163f);
        EXPECT(gbc.pc(), 0x5c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 011A
        gbc.setState(0x7779, 0xee2a, 0xc200, 0x939b, 0xfff6, 0x99d4, 0x1, 0x1);
        gbc.writeMem(0x7779, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xee2a);
        EXPECT(gbc.pc(), 0x777a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 011C
        gbc.setState(0xd627, 0x45e, 0xc340, 0x5d33, 0xe16, 0x1f1b, 0x0, 0x0);
        gbc.writeMem(0xd627, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x45e);
        EXPECT(gbc.pc(), 0xd628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd627), 0x39);
        // 39 011D
        gbc.setState(0x46f, 0xaf8a, 0x1f40, 0x2e4c, 0x6530, 0xeb0a, 0x1, 0x0);
        gbc.writeMem(0x46f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xaf8a);
        EXPECT(gbc.pc(), 0x470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 011F
        gbc.setState(0xb58f, 0x3766, 0xff40, 0xdff8, 0xa12, 0x7bf, 0x0, 0x0);
        gbc.writeMem(0xb58f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3766);
        EXPECT(gbc.pc(), 0xb590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58f), 0x39);
        // 39 0121
        gbc.setState(0x1bff, 0xec74, 0x5e40, 0xb519, 0xb5b4, 0x6241, 0x1, 0x1);
        gbc.writeMem(0x1bff, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xec74);
        EXPECT(gbc.pc(), 0x1c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0122
        gbc.setState(0xc7a5, 0xcb6d, 0xf30, 0xd50c, 0x8028, 0xfddc, 0x1, 0x1);
        gbc.writeMem(0xc7a5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcb6d);
        EXPECT(gbc.pc(), 0xc7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a5), 0x39);
        // 39 0123
        gbc.setState(0xcb4a, 0x1986, 0xb5d0, 0x99ac, 0xd0c3, 0xc825, 0x0, 0x0);
        gbc.writeMem(0xcb4a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1986);
        EXPECT(gbc.pc(), 0xcb4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4a), 0x39);
        // 39 0124
        gbc.setState(0x8b1a, 0x84a3, 0x8550, 0xb145, 0x65d2, 0x1273, 0x0, 0x1);
        gbc.writeMem(0x8b1a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x84a3);
        EXPECT(gbc.pc(), 0x8b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1a), 0x39);
        // 39 0125
        gbc.setState(0xe073, 0x20bf, 0xc550, 0xb641, 0x92a0, 0xd1d0, 0x0, 0x0);
        gbc.writeMem(0xe073, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x20bf);
        EXPECT(gbc.pc(), 0xe074);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe073), 0x39);
        // 39 0126
        gbc.setState(0x4b64, 0x78a4, 0xf880, 0x3f9f, 0xccae, 0xd025, 0x1, 0x0);
        gbc.writeMem(0x4b64, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x78a4);
        EXPECT(gbc.pc(), 0x4b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0127
        gbc.setState(0x44fe, 0xc2e8, 0x7950, 0xee12, 0xb2c, 0x674a, 0x0, 0x0);
        gbc.writeMem(0x44fe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc2e8);
        EXPECT(gbc.pc(), 0x44ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0128
        gbc.setState(0xcc30, 0x1ae8, 0x1260, 0xb485, 0xced9, 0xe07a, 0x0, 0x0);
        gbc.writeMem(0xcc30, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1ae8);
        EXPECT(gbc.pc(), 0xcc31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc30), 0x39);
        // 39 012A
        gbc.setState(0xea29, 0x4dc8, 0x72e0, 0x9fc1, 0x2d6b, 0xf59e, 0x1, 0x1);
        gbc.writeMem(0xea29, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4dc8);
        EXPECT(gbc.pc(), 0xea2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea29), 0x39);
        // 39 012B
        gbc.setState(0x14c8, 0x7866, 0xc9d0, 0xa392, 0x4abb, 0xcc6, 0x0, 0x0);
        gbc.writeMem(0x14c8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7866);
        EXPECT(gbc.pc(), 0x14c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 012C
        gbc.setState(0x713f, 0xb1af, 0xaf40, 0x1309, 0x2254, 0x7bfb, 0x1, 0x1);
        gbc.writeMem(0x713f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb1af);
        EXPECT(gbc.pc(), 0x7140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 012D
        gbc.setState(0x40ad, 0x2e6, 0x8eb0, 0xe0ee, 0xa4cc, 0xa4c1, 0x0, 0x1);
        gbc.writeMem(0x40ad, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2e6);
        EXPECT(gbc.pc(), 0x40ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 012E
        gbc.setState(0xb316, 0xcdd1, 0xf470, 0x4c01, 0x8ecb, 0x778, 0x1, 0x0);
        gbc.writeMem(0xb316, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcdd1);
        EXPECT(gbc.pc(), 0xb317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb316), 0x39);
        // 39 012F
        gbc.setState(0xd81b, 0xca33, 0x4f50, 0x96ab, 0xe658, 0x2982, 0x0, 0x0);
        gbc.writeMem(0xd81b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0xd81c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81b), 0x39);
        // 39 0130
        gbc.setState(0x75fc, 0xb72f, 0x76f0, 0xab77, 0x487f, 0xd0b2, 0x0, 0x1);
        gbc.writeMem(0x75fc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb72f);
        EXPECT(gbc.pc(), 0x75fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0131
        gbc.setState(0xbae6, 0xe2ac, 0x57e0, 0xd820, 0x87a8, 0x6b77, 0x0, 0x1);
        gbc.writeMem(0xbae6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe2ac);
        EXPECT(gbc.pc(), 0xbae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbae6), 0x39);
        // 39 0132
        gbc.setState(0xb359, 0xd15f, 0xd70, 0x1018, 0x845f, 0xe7fa, 0x0, 0x1);
        gbc.writeMem(0xb359, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd15f);
        EXPECT(gbc.pc(), 0xb35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb359), 0x39);
        // 39 0133
        gbc.setState(0xf61, 0x343c, 0xbb50, 0xd21f, 0x963c, 0xf35c, 0x0, 0x1);
        gbc.writeMem(0xf61, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x343c);
        EXPECT(gbc.pc(), 0xf62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0134
        gbc.setState(0x250b, 0x4fca, 0xa410, 0xc226, 0x7d1c, 0x8764, 0x0, 0x1);
        gbc.writeMem(0x250b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4fca);
        EXPECT(gbc.pc(), 0x250c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0135
        gbc.setState(0xd3e9, 0x2d4f, 0x5220, 0x425f, 0x787b, 0x6afd, 0x0, 0x1);
        gbc.writeMem(0xd3e9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2d4f);
        EXPECT(gbc.pc(), 0xd3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e9), 0x39);
        // 39 0136
        gbc.setState(0x1aa8, 0xbf5e, 0x32b0, 0xd406, 0x7f88, 0xc2db, 0x1, 0x1);
        gbc.writeMem(0x1aa8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbf5e);
        EXPECT(gbc.pc(), 0x1aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0137
        gbc.setState(0x34d4, 0x56c3, 0x7e90, 0xa056, 0x92b4, 0x7ba8, 0x0, 0x1);
        gbc.writeMem(0x34d4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x56c3);
        EXPECT(gbc.pc(), 0x34d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0138
        gbc.setState(0x26c4, 0x5b16, 0x89f0, 0x9fbf, 0x97d9, 0xb7eb, 0x0, 0x1);
        gbc.writeMem(0x26c4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5b16);
        EXPECT(gbc.pc(), 0x26c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 013A
        gbc.setState(0x6280, 0x796a, 0xb620, 0x7754, 0x1bc2, 0x94f, 0x1, 0x0);
        gbc.writeMem(0x6280, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x796a);
        EXPECT(gbc.pc(), 0x6281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 013B
        gbc.setState(0x5a7f, 0xe3a, 0x9c60, 0xb263, 0xa6c6, 0x7e89, 0x0, 0x0);
        gbc.writeMem(0x5a7f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe3a);
        EXPECT(gbc.pc(), 0x5a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 013D
        gbc.setState(0x7f36, 0xe2c8, 0xf6f0, 0xa521, 0xa8c7, 0x6ac7, 0x0, 0x1);
        gbc.writeMem(0x7f36, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe2c8);
        EXPECT(gbc.pc(), 0x7f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 013E
        gbc.setState(0x654c, 0xda8c, 0x41e0, 0xa556, 0x2d30, 0xac8d, 0x0, 0x1);
        gbc.writeMem(0x654c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xda8c);
        EXPECT(gbc.pc(), 0x654d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 013F
        gbc.setState(0x3ed4, 0xf3ae, 0xb5f0, 0xa71, 0xcfaf, 0xc97d, 0x1, 0x0);
        gbc.writeMem(0x3ed4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf3ae);
        EXPECT(gbc.pc(), 0x3ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0140
        gbc.setState(0x673f, 0x1be0, 0x3f70, 0xc545, 0xf68c, 0xfaf2, 0x1, 0x1);
        gbc.writeMem(0x673f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1be0);
        EXPECT(gbc.pc(), 0x6740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0141
        gbc.setState(0x6598, 0xeea2, 0xb9f0, 0x92, 0x683a, 0xee22, 0x1, 0x0);
        gbc.writeMem(0x6598, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xeea2);
        EXPECT(gbc.pc(), 0x6599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0142
        gbc.setState(0x4278, 0x8c30, 0x7310, 0x9a11, 0xe4d8, 0x89cf, 0x0, 0x1);
        gbc.writeMem(0x4278, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8c30);
        EXPECT(gbc.pc(), 0x4279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0143
        gbc.setState(0xd356, 0x3a75, 0xaa00, 0x772f, 0x126, 0x16a0, 0x1, 0x1);
        gbc.writeMem(0xd356, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3a75);
        EXPECT(gbc.pc(), 0xd357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd356), 0x39);
        // 39 0144
        gbc.setState(0x59a2, 0xd107, 0xb8f0, 0x677e, 0x28aa, 0x29bd, 0x0, 0x0);
        gbc.writeMem(0x59a2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd107);
        EXPECT(gbc.pc(), 0x59a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0145
        gbc.setState(0x642a, 0x1fbb, 0xf60, 0x39aa, 0x7da3, 0xa810, 0x1, 0x0);
        gbc.writeMem(0x642a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1fbb);
        EXPECT(gbc.pc(), 0x642b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0146
        gbc.setState(0x4d40, 0xda0d, 0xa7e0, 0x62eb, 0x6b0d, 0xfc31, 0x0, 0x0);
        gbc.writeMem(0x4d40, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xda0d);
        EXPECT(gbc.pc(), 0x4d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0147
        gbc.setState(0x49fb, 0x2a46, 0x6ba0, 0xf274, 0xfe9a, 0x5239, 0x1, 0x1);
        gbc.writeMem(0x49fb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x49fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0148
        gbc.setState(0xc4ed, 0x8f82, 0x22d0, 0x945a, 0xa16c, 0xcca5, 0x0, 0x0);
        gbc.writeMem(0xc4ed, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8f82);
        EXPECT(gbc.pc(), 0xc4ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ed), 0x39);
        // 39 0149
        gbc.setState(0x3600, 0xfc15, 0x9dd0, 0x20da, 0x4d79, 0x5d8a, 0x0, 0x1);
        gbc.writeMem(0x3600, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfc15);
        EXPECT(gbc.pc(), 0x3601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 014A
        gbc.setState(0x6f3b, 0x28aa, 0x9330, 0x80f4, 0xef62, 0xa839, 0x1, 0x1);
        gbc.writeMem(0x6f3b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x28aa);
        EXPECT(gbc.pc(), 0x6f3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 014B
        gbc.setState(0x38ea, 0x2036, 0xb0c0, 0x9c54, 0xa689, 0x18dc, 0x0, 0x1);
        gbc.writeMem(0x38ea, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2036);
        EXPECT(gbc.pc(), 0x38eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 014C
        gbc.setState(0x69b4, 0xd0c, 0x57a0, 0xa853, 0x3f7a, 0x70d5, 0x0, 0x0);
        gbc.writeMem(0x69b4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd0c);
        EXPECT(gbc.pc(), 0x69b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 014D
        gbc.setState(0x7ee6, 0x6a1c, 0x1c80, 0x72c8, 0xa66a, 0x15eb, 0x1, 0x0);
        gbc.writeMem(0x7ee6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6a1c);
        EXPECT(gbc.pc(), 0x7ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 014E
        gbc.setState(0x4faf, 0xa392, 0x7f40, 0x240a, 0x76ef, 0x4eed, 0x0, 0x0);
        gbc.writeMem(0x4faf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa392);
        EXPECT(gbc.pc(), 0x4fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 014F
        gbc.setState(0x6a8e, 0x55b, 0xb790, 0x59ee, 0xd3e3, 0xa793, 0x1, 0x0);
        gbc.writeMem(0x6a8e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x55b);
        EXPECT(gbc.pc(), 0x6a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0150
        gbc.setState(0x155a, 0x13d, 0x79c0, 0x81dd, 0xa786, 0xa0fe, 0x1, 0x0);
        gbc.writeMem(0x155a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x13d);
        EXPECT(gbc.pc(), 0x155b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0151
        gbc.setState(0x60ca, 0x2276, 0x56d0, 0xac0c, 0xedef, 0xb08, 0x0, 0x1);
        gbc.writeMem(0x60ca, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2276);
        EXPECT(gbc.pc(), 0x60cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0152
        gbc.setState(0x689c, 0x8c31, 0x2d80, 0xb796, 0x9dc2, 0xf500, 0x0, 0x0);
        gbc.writeMem(0x689c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8c31);
        EXPECT(gbc.pc(), 0x689d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0153
        gbc.setState(0x2ac1, 0x7a21, 0xba0, 0x3687, 0xb130, 0x9b39, 0x0, 0x0);
        gbc.writeMem(0x2ac1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7a21);
        EXPECT(gbc.pc(), 0x2ac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0154
        gbc.setState(0x1304, 0xf3f1, 0xf170, 0x566d, 0x9660, 0xd5fd, 0x0, 0x1);
        gbc.writeMem(0x1304, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf3f1);
        EXPECT(gbc.pc(), 0x1305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0155
        gbc.setState(0xa9d9, 0xca00, 0xc9e0, 0xa696, 0x6ad9, 0x75c3, 0x1, 0x0);
        gbc.writeMem(0xa9d9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xca00);
        EXPECT(gbc.pc(), 0xa9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d9), 0x39);
        // 39 0156
        gbc.setState(0x9b94, 0x648, 0xce60, 0xee38, 0xbe9, 0x407, 0x0, 0x0);
        gbc.writeMem(0x9b94, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x648);
        EXPECT(gbc.pc(), 0x9b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b94), 0x39);
        // 39 0157
        gbc.setState(0x5592, 0xf8cf, 0x6020, 0xb35b, 0x1663, 0xe37f, 0x1, 0x0);
        gbc.writeMem(0x5592, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf8cf);
        EXPECT(gbc.pc(), 0x5593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0158
        gbc.setState(0x193, 0x8a3d, 0x48c0, 0x1bb, 0xef87, 0x5cc4, 0x1, 0x0);
        gbc.writeMem(0x193, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8a3d);
        EXPECT(gbc.pc(), 0x194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0159
        gbc.setState(0xeed0, 0x60ab, 0xe5a0, 0x4963, 0x44b7, 0x903e, 0x1, 0x1);
        gbc.writeMem(0xeed0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x60ab);
        EXPECT(gbc.pc(), 0xeed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed0), 0x39);
        // 39 015A
        gbc.setState(0xda2e, 0x4f67, 0x6e00, 0xe9ea, 0x5aea, 0x5b72, 0x0, 0x0);
        gbc.writeMem(0xda2e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4f67);
        EXPECT(gbc.pc(), 0xda2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda2e), 0x39);
        // 39 015B
        gbc.setState(0x1694, 0xe49d, 0xf2f0, 0xeff7, 0x2dee, 0xd3e7, 0x0, 0x0);
        gbc.writeMem(0x1694, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe49d);
        EXPECT(gbc.pc(), 0x1695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 015C
        gbc.setState(0x1413, 0x4d38, 0x7780, 0x34e3, 0xc9e5, 0x9bc6, 0x0, 0x1);
        gbc.writeMem(0x1413, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4d38);
        EXPECT(gbc.pc(), 0x1414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 015D
        gbc.setState(0x6f01, 0x9c20, 0x7010, 0x6f48, 0x51a1, 0x3059, 0x1, 0x1);
        gbc.writeMem(0x6f01, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9c20);
        EXPECT(gbc.pc(), 0x6f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 015E
        gbc.setState(0x56a7, 0xc5a9, 0xfcb0, 0x83f5, 0x3222, 0xbe78, 0x0, 0x0);
        gbc.writeMem(0x56a7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc5a9);
        EXPECT(gbc.pc(), 0x56a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 015F
        gbc.setState(0xd4b, 0x5e1b, 0x97a0, 0xd274, 0x9dfc, 0xa886, 0x0, 0x1);
        gbc.writeMem(0xd4b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5e1b);
        EXPECT(gbc.pc(), 0xd4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0160
        gbc.setState(0x2608, 0xca85, 0x670, 0x2eeb, 0x284f, 0xad7d, 0x1, 0x1);
        gbc.writeMem(0x2608, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xca85);
        EXPECT(gbc.pc(), 0x2609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0161
        gbc.setState(0xb2a1, 0x77a8, 0x7c20, 0x5488, 0x8760, 0x64e1, 0x0, 0x1);
        gbc.writeMem(0xb2a1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x77a8);
        EXPECT(gbc.pc(), 0xb2a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a1), 0x39);
        // 39 0162
        gbc.setState(0xc459, 0xefd5, 0xbf70, 0xdc4a, 0x2643, 0xcd89, 0x1, 0x1);
        gbc.writeMem(0xc459, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xefd5);
        EXPECT(gbc.pc(), 0xc45a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc459), 0x39);
        // 39 0163
        gbc.setState(0x89f8, 0x1bf3, 0x6720, 0x4f2c, 0xb014, 0x26b9, 0x0, 0x0);
        gbc.writeMem(0x89f8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1bf3);
        EXPECT(gbc.pc(), 0x89f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f8), 0x39);
        // 39 0164
        gbc.setState(0x4801, 0x1385, 0x6af0, 0x1ed2, 0x2822, 0xc1a7, 0x1, 0x1);
        gbc.writeMem(0x4801, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1385);
        EXPECT(gbc.pc(), 0x4802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0165
        gbc.setState(0x77a1, 0x5d64, 0x6180, 0xc932, 0x6545, 0x38a2, 0x0, 0x1);
        gbc.writeMem(0x77a1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5d64);
        EXPECT(gbc.pc(), 0x77a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0166
        gbc.setState(0xe0d8, 0xcd92, 0xfd00, 0x4f0b, 0x2adb, 0x7138, 0x1, 0x1);
        gbc.writeMem(0xe0d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcd92);
        EXPECT(gbc.pc(), 0xe0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d8), 0x39);
        // 39 0167
        gbc.setState(0xcde9, 0x7a37, 0xc960, 0x2cdc, 0x1a7f, 0x524, 0x0, 0x1);
        gbc.writeMem(0xcde9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7a37);
        EXPECT(gbc.pc(), 0xcdea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde9), 0x39);
        // 39 0168
        gbc.setState(0x5f9, 0x494a, 0x2c70, 0xf172, 0x6088, 0xff64, 0x0, 0x0);
        gbc.writeMem(0x5f9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x494a);
        EXPECT(gbc.pc(), 0x5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0169
        gbc.setState(0x1689, 0x334e, 0x6ea0, 0xcf1e, 0xce85, 0xa6ed, 0x0, 0x1);
        gbc.writeMem(0x1689, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x334e);
        EXPECT(gbc.pc(), 0x168a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 016A
        gbc.setState(0x4819, 0x5242, 0x22e0, 0x1545, 0x684, 0xa605, 0x0, 0x0);
        gbc.writeMem(0x4819, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5242);
        EXPECT(gbc.pc(), 0x481a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 016B
        gbc.setState(0xc778, 0x2fcd, 0xffc0, 0x7105, 0x1a47, 0x866a, 0x1, 0x0);
        gbc.writeMem(0xc778, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2fcd);
        EXPECT(gbc.pc(), 0xc779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc778), 0x39);
        // 39 016C
        gbc.setState(0xba31, 0x67d4, 0x3630, 0x7923, 0xc541, 0xd532, 0x1, 0x1);
        gbc.writeMem(0xba31, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x67d4);
        EXPECT(gbc.pc(), 0xba32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba31), 0x39);
        // 39 016D
        gbc.setState(0xb02f, 0x7aa9, 0x37f0, 0x171e, 0xfbf2, 0xf580, 0x0, 0x0);
        gbc.writeMem(0xb02f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7aa9);
        EXPECT(gbc.pc(), 0xb030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02f), 0x39);
        // 39 016F
        gbc.setState(0x3179, 0xdd19, 0x9300, 0xeb55, 0x14c7, 0xc0c1, 0x0, 0x1);
        gbc.writeMem(0x3179, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdd19);
        EXPECT(gbc.pc(), 0x317a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0170
        gbc.setState(0x1322, 0xc779, 0x3780, 0x8df8, 0xbab9, 0x9c0a, 0x1, 0x0);
        gbc.writeMem(0x1322, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc779);
        EXPECT(gbc.pc(), 0x1323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0171
        gbc.setState(0xdc34, 0xa26d, 0x91e0, 0x7455, 0x9de1, 0xf7ee, 0x1, 0x0);
        gbc.writeMem(0xdc34, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa26d);
        EXPECT(gbc.pc(), 0xdc35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc34), 0x39);
        // 39 0172
        gbc.setState(0xc0a5, 0xb868, 0xe8b0, 0x3b32, 0x65b8, 0xc809, 0x1, 0x1);
        gbc.writeMem(0xc0a5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb868);
        EXPECT(gbc.pc(), 0xc0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a5), 0x39);
        // 39 0173
        gbc.setState(0x8c2, 0xd66e, 0x2a90, 0x3f26, 0xd1cc, 0xbde6, 0x0, 0x0);
        gbc.writeMem(0x8c2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd66e);
        EXPECT(gbc.pc(), 0x8c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0174
        gbc.setState(0xebf5, 0x318d, 0xf160, 0xb62e, 0xff5e, 0x2456, 0x1, 0x0);
        gbc.writeMem(0xebf5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x318d);
        EXPECT(gbc.pc(), 0xebf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf5), 0x39);
        // 39 0175
        gbc.setState(0x51b1, 0x7a81, 0xe660, 0x9daa, 0x7fd3, 0x4f6, 0x1, 0x1);
        gbc.writeMem(0x51b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7a81);
        EXPECT(gbc.pc(), 0x51b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0176
        gbc.setState(0x315a, 0x6ceb, 0x59d0, 0x9fb2, 0x9b43, 0x7401, 0x1, 0x0);
        gbc.writeMem(0x315a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6ceb);
        EXPECT(gbc.pc(), 0x315b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0177
        gbc.setState(0xc4d1, 0xd29e, 0x1220, 0xbb2, 0x987d, 0xc629, 0x1, 0x0);
        gbc.writeMem(0xc4d1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd29e);
        EXPECT(gbc.pc(), 0xc4d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d1), 0x39);
        // 39 0179
        gbc.setState(0x258e, 0xc8a, 0x8700, 0x23c3, 0xadb6, 0xf6be, 0x1, 0x0);
        gbc.writeMem(0x258e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc8a);
        EXPECT(gbc.pc(), 0x258f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 017A
        gbc.setState(0x3e0a, 0xa94b, 0x94d0, 0x7a7a, 0x6e65, 0x1340, 0x1, 0x1);
        gbc.writeMem(0x3e0a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa94b);
        EXPECT(gbc.pc(), 0x3e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 017B
        gbc.setState(0x6ca4, 0x227, 0xe2e0, 0x8360, 0xc650, 0x7fea, 0x1, 0x1);
        gbc.writeMem(0x6ca4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x227);
        EXPECT(gbc.pc(), 0x6ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 017C
        gbc.setState(0x8821, 0xb28d, 0x4630, 0xd28d, 0xdedb, 0x2ce7, 0x1, 0x1);
        gbc.writeMem(0x8821, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb28d);
        EXPECT(gbc.pc(), 0x8822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8821), 0x39);
        // 39 017D
        gbc.setState(0x201c, 0xe5fb, 0x1230, 0x2e66, 0xae46, 0x181f, 0x0, 0x0);
        gbc.writeMem(0x201c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe5fb);
        EXPECT(gbc.pc(), 0x201d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 017E
        gbc.setState(0x9653, 0xf80b, 0x81b0, 0xeba0, 0xb15f, 0xcba6, 0x1, 0x0);
        gbc.writeMem(0x9653, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf80b);
        EXPECT(gbc.pc(), 0x9654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9653), 0x39);
        // 39 017F
        gbc.setState(0x455b, 0x8d2d, 0x4f10, 0x15d8, 0x86fd, 0xfeed, 0x0, 0x1);
        gbc.writeMem(0x455b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8d2d);
        EXPECT(gbc.pc(), 0x455c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0180
        gbc.setState(0xe7b, 0x14ac, 0x4380, 0x9a46, 0xde3b, 0x2978, 0x1, 0x1);
        gbc.writeMem(0xe7b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x14ac);
        EXPECT(gbc.pc(), 0xe7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0181
        gbc.setState(0x45b3, 0x99f8, 0x4160, 0x8230, 0xfb6, 0xe188, 0x1, 0x0);
        gbc.writeMem(0x45b3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x99f8);
        EXPECT(gbc.pc(), 0x45b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0182
        gbc.setState(0xbc55, 0x1e87, 0x48e0, 0x75c0, 0x3483, 0x89f1, 0x1, 0x1);
        gbc.writeMem(0xbc55, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1e87);
        EXPECT(gbc.pc(), 0xbc56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc55), 0x39);
        // 39 0183
        gbc.setState(0x492e, 0xea79, 0xb1a0, 0x908a, 0xd4f3, 0x4ad, 0x0, 0x0);
        gbc.writeMem(0x492e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xea79);
        EXPECT(gbc.pc(), 0x492f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0184
        gbc.setState(0xd81c, 0xd5b7, 0xa9d0, 0xed2d, 0xdfdf, 0x94f1, 0x0, 0x0);
        gbc.writeMem(0xd81c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd5b7);
        EXPECT(gbc.pc(), 0xd81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd81c), 0x39);
        // 39 0185
        gbc.setState(0x5dfa, 0x509e, 0x1d00, 0xe2a1, 0x9123, 0x7b3c, 0x0, 0x1);
        gbc.writeMem(0x5dfa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x509e);
        EXPECT(gbc.pc(), 0x5dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0186
        gbc.setState(0xa502, 0x565b, 0x90d0, 0xe586, 0x87a3, 0x8168, 0x1, 0x1);
        gbc.writeMem(0xa502, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x565b);
        EXPECT(gbc.pc(), 0xa503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa502), 0x39);
        // 39 0187
        gbc.setState(0x146b, 0x428b, 0x8130, 0x7d35, 0x18dc, 0x6a5b, 0x1, 0x0);
        gbc.writeMem(0x146b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x428b);
        EXPECT(gbc.pc(), 0x146c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0188
        gbc.setState(0x155c, 0x3f2e, 0xe450, 0xc483, 0x911b, 0xa05a, 0x0, 0x1);
        gbc.writeMem(0x155c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3f2e);
        EXPECT(gbc.pc(), 0x155d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 018A
        gbc.setState(0x5b6, 0xf114, 0x3280, 0x8b08, 0x8ef5, 0x26bf, 0x1, 0x0);
        gbc.writeMem(0x5b6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf114);
        EXPECT(gbc.pc(), 0x5b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 018B
        gbc.setState(0x4839, 0x4300, 0xce0, 0xe27c, 0xaa7c, 0xdb4d, 0x1, 0x0);
        gbc.writeMem(0x4839, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4300);
        EXPECT(gbc.pc(), 0x483a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 018C
        gbc.setState(0xc5da, 0xd77c, 0xe3a0, 0x3b15, 0xfb5f, 0xa001, 0x1, 0x0);
        gbc.writeMem(0xc5da, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd77c);
        EXPECT(gbc.pc(), 0xc5db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5da), 0x39);
        // 39 018D
        gbc.setState(0xbae9, 0x4774, 0xb650, 0x15f7, 0x1156, 0x76fa, 0x0, 0x0);
        gbc.writeMem(0xbae9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4774);
        EXPECT(gbc.pc(), 0xbaea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae9), 0x39);
        // 39 018E
        gbc.setState(0xefd6, 0x8ed9, 0x99f0, 0x659a, 0x73b9, 0x3220, 0x1, 0x0);
        gbc.writeMem(0xefd6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8ed9);
        EXPECT(gbc.pc(), 0xefd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd6), 0x39);
        // 39 018F
        gbc.setState(0xa70c, 0x447, 0x4b20, 0x80b6, 0xfbaa, 0xd1a8, 0x0, 0x0);
        gbc.writeMem(0xa70c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x447);
        EXPECT(gbc.pc(), 0xa70d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa70c), 0x39);
        // 39 0190
        gbc.setState(0xd8aa, 0x7c1d, 0x31a0, 0x353b, 0xe52, 0x68cc, 0x0, 0x0);
        gbc.writeMem(0xd8aa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7c1d);
        EXPECT(gbc.pc(), 0xd8ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8aa), 0x39);
        // 39 0192
        gbc.setState(0xbf97, 0xe4e5, 0x3fa0, 0xc13e, 0x956c, 0x1507, 0x0, 0x1);
        gbc.writeMem(0xbf97, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe4e5);
        EXPECT(gbc.pc(), 0xbf98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf97), 0x39);
        // 39 0193
        gbc.setState(0xda, 0xac0d, 0x9a10, 0xcc22, 0xc9ad, 0xa59f, 0x1, 0x0);
        gbc.writeMem(0xda, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xac0d);
        EXPECT(gbc.pc(), 0xdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0194
        gbc.setState(0x1b35, 0x90fb, 0xc290, 0x9c9b, 0x6c47, 0xf0b5, 0x0, 0x1);
        gbc.writeMem(0x1b35, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x90fb);
        EXPECT(gbc.pc(), 0x1b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0195
        gbc.setState(0xd568, 0xa665, 0xb300, 0x5044, 0xfb62, 0xd568, 0x1, 0x0);
        gbc.writeMem(0xd568, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa665);
        EXPECT(gbc.pc(), 0xd569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd568), 0x39);
        // 39 0196
        gbc.setState(0x7722, 0xf61b, 0x410, 0xb0a8, 0x1b82, 0xcf92, 0x1, 0x1);
        gbc.writeMem(0x7722, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf61b);
        EXPECT(gbc.pc(), 0x7723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0197
        gbc.setState(0x3c37, 0x76d7, 0xde60, 0x2dcd, 0x955a, 0x3135, 0x1, 0x1);
        gbc.writeMem(0x3c37, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x76d7);
        EXPECT(gbc.pc(), 0x3c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0198
        gbc.setState(0xecb5, 0x112d, 0x62b0, 0x5d03, 0x173a, 0xaaae, 0x0, 0x1);
        gbc.writeMem(0xecb5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x112d);
        EXPECT(gbc.pc(), 0xecb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb5), 0x39);
        // 39 0199
        gbc.setState(0xaff5, 0x6ac3, 0x22b0, 0xcfdc, 0x9eb0, 0xbfe3, 0x1, 0x0);
        gbc.writeMem(0xaff5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6ac3);
        EXPECT(gbc.pc(), 0xaff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaff5), 0x39);
        // 39 019A
        gbc.setState(0x79b1, 0x8e31, 0x3910, 0x9b1a, 0xe505, 0x27fd, 0x0, 0x1);
        gbc.writeMem(0x79b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8e31);
        EXPECT(gbc.pc(), 0x79b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 019B
        gbc.setState(0x4ce2, 0x23bb, 0x5bb0, 0xa1a6, 0x9d1f, 0xceb0, 0x0, 0x1);
        gbc.writeMem(0x4ce2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x23bb);
        EXPECT(gbc.pc(), 0x4ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 019C
        gbc.setState(0x33d6, 0xc362, 0xf490, 0x330d, 0xc2c0, 0xe114, 0x1, 0x0);
        gbc.writeMem(0x33d6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc362);
        EXPECT(gbc.pc(), 0x33d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 019D
        gbc.setState(0xda3c, 0xb997, 0xcfb0, 0xac53, 0x7fb7, 0x7822, 0x1, 0x0);
        gbc.writeMem(0xda3c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb997);
        EXPECT(gbc.pc(), 0xda3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3c), 0x39);
        // 39 019E
        gbc.setState(0x991d, 0xd067, 0x6f80, 0x5858, 0x2cce, 0x9cfc, 0x0, 0x0);
        gbc.writeMem(0x991d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd067);
        EXPECT(gbc.pc(), 0x991e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991d), 0x39);
        // 39 019F
        gbc.setState(0x3312, 0x3ba4, 0x8900, 0x58ea, 0x944e, 0x8c01, 0x0, 0x1);
        gbc.writeMem(0x3312, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3ba4);
        EXPECT(gbc.pc(), 0x3313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01A0
        gbc.setState(0x3ea8, 0x62e7, 0x1870, 0x1999, 0xd64e, 0xeb44, 0x0, 0x1);
        gbc.writeMem(0x3ea8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x62e7);
        EXPECT(gbc.pc(), 0x3ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01A1
        gbc.setState(0xab7b, 0x5c2e, 0xc50, 0x732d, 0x3e96, 0x7052, 0x0, 0x1);
        gbc.writeMem(0xab7b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5c2e);
        EXPECT(gbc.pc(), 0xab7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab7b), 0x39);
        // 39 01A2
        gbc.setState(0x1575, 0x67dc, 0xd080, 0x8cf7, 0x5094, 0x84a0, 0x1, 0x0);
        gbc.writeMem(0x1575, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x67dc);
        EXPECT(gbc.pc(), 0x1576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01A3
        gbc.setState(0x60d1, 0x59b3, 0x1020, 0xc5d1, 0xf3d7, 0x71bf, 0x1, 0x0);
        gbc.writeMem(0x60d1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x59b3);
        EXPECT(gbc.pc(), 0x60d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01A4
        gbc.setState(0xda3d, 0x46ae, 0xc440, 0x280c, 0xee6, 0x8aac, 0x1, 0x1);
        gbc.writeMem(0xda3d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x46ae);
        EXPECT(gbc.pc(), 0xda3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3d), 0x39);
        // 39 01A5
        gbc.setState(0x585b, 0x7785, 0x3cd0, 0xaa99, 0x513a, 0xa911, 0x1, 0x1);
        gbc.writeMem(0x585b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7785);
        EXPECT(gbc.pc(), 0x585c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01A6
        gbc.setState(0x94cd, 0x787d, 0xf8e0, 0xf709, 0x4d97, 0x95fe, 0x0, 0x0);
        gbc.writeMem(0x94cd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x787d);
        EXPECT(gbc.pc(), 0x94ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94cd), 0x39);
        // 39 01A7
        gbc.setState(0x46dd, 0x3938, 0x34c0, 0xdcaf, 0xba3a, 0x7883, 0x1, 0x0);
        gbc.writeMem(0x46dd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3938);
        EXPECT(gbc.pc(), 0x46de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01A8
        gbc.setState(0xc5db, 0xa39c, 0x7160, 0xf85e, 0x366e, 0xa8f0, 0x1, 0x1);
        gbc.writeMem(0xc5db, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa39c);
        EXPECT(gbc.pc(), 0xc5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5db), 0x39);
        // 39 01A9
        gbc.setState(0x492a, 0x61e0, 0xabf0, 0x3898, 0x2a7d, 0x9e79, 0x0, 0x0);
        gbc.writeMem(0x492a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x61e0);
        EXPECT(gbc.pc(), 0x492b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01AA
        gbc.setState(0x6b34, 0x6a3f, 0x6720, 0xded2, 0x2ede, 0xdca4, 0x0, 0x0);
        gbc.writeMem(0x6b34, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6a3f);
        EXPECT(gbc.pc(), 0x6b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01AB
        gbc.setState(0xeb64, 0xdc8c, 0x37b0, 0xb7e4, 0x6217, 0xfd17, 0x1, 0x1);
        gbc.writeMem(0xeb64, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xdc8c);
        EXPECT(gbc.pc(), 0xeb65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb64), 0x39);
        // 39 01AC
        gbc.setState(0x786, 0x78f2, 0x9120, 0x941a, 0x510f, 0x7451, 0x0, 0x1);
        gbc.writeMem(0x786, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x78f2);
        EXPECT(gbc.pc(), 0x787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01AD
        gbc.setState(0x7fb6, 0xa5c5, 0xa9f0, 0xc727, 0x6b72, 0xa1ae, 0x1, 0x1);
        gbc.writeMem(0x7fb6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa5c5);
        EXPECT(gbc.pc(), 0x7fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01AE
        gbc.setState(0x195f, 0x963c, 0x430, 0x994d, 0xada5, 0xc544, 0x0, 0x0);
        gbc.writeMem(0x195f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x963c);
        EXPECT(gbc.pc(), 0x1960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01AF
        gbc.setState(0x19e6, 0x886, 0x7740, 0xbfcb, 0x7b98, 0xb2dd, 0x0, 0x0);
        gbc.writeMem(0x19e6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x886);
        EXPECT(gbc.pc(), 0x19e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01B0
        gbc.setState(0xbf79, 0x837b, 0xae60, 0xb5a4, 0xf754, 0x45d5, 0x0, 0x1);
        gbc.writeMem(0xbf79, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x837b);
        EXPECT(gbc.pc(), 0xbf7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf79), 0x39);
        // 39 01B1
        gbc.setState(0x2e2c, 0x46c7, 0x3940, 0xf0cb, 0x4ba7, 0xe9db, 0x1, 0x0);
        gbc.writeMem(0x2e2c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x46c7);
        EXPECT(gbc.pc(), 0x2e2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01B2
        gbc.setState(0x9c85, 0x6d8e, 0xa670, 0x12f2, 0x8717, 0xc92f, 0x1, 0x0);
        gbc.writeMem(0x9c85, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6d8e);
        EXPECT(gbc.pc(), 0x9c86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c85), 0x39);
        // 39 01B3
        gbc.setState(0x1ecf, 0x574e, 0xaf40, 0x4c69, 0xe25d, 0xe047, 0x1, 0x1);
        gbc.writeMem(0x1ecf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x574e);
        EXPECT(gbc.pc(), 0x1ed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01B4
        gbc.setState(0x489c, 0x3284, 0x87e0, 0xc1fb, 0x7293, 0xc18d, 0x1, 0x0);
        gbc.writeMem(0x489c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3284);
        EXPECT(gbc.pc(), 0x489d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01B5
        gbc.setState(0x882d, 0xb9a2, 0xd6f0, 0x4072, 0xade9, 0x98ab, 0x1, 0x1);
        gbc.writeMem(0x882d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb9a2);
        EXPECT(gbc.pc(), 0x882e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882d), 0x39);
        // 39 01B6
        gbc.setState(0x5cb, 0x7fa3, 0x8eb0, 0xbbed, 0x7cc6, 0x947, 0x1, 0x1);
        gbc.writeMem(0x5cb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7fa3);
        EXPECT(gbc.pc(), 0x5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01B7
        gbc.setState(0x422e, 0xb480, 0xc450, 0xedb5, 0x83d9, 0x4dde, 0x1, 0x1);
        gbc.writeMem(0x422e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb480);
        EXPECT(gbc.pc(), 0x422f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01B8
        gbc.setState(0x6fbf, 0x7ac1, 0x4e30, 0xb4, 0x3cfc, 0xbd37, 0x0, 0x1);
        gbc.writeMem(0x6fbf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7ac1);
        EXPECT(gbc.pc(), 0x6fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01B9
        gbc.setState(0x6ab0, 0xd7a8, 0xe9f0, 0xac2d, 0xa8e5, 0x1415, 0x0, 0x0);
        gbc.writeMem(0x6ab0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd7a8);
        EXPECT(gbc.pc(), 0x6ab1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01BA
        gbc.setState(0x8a97, 0x4f2c, 0x3a80, 0x7048, 0xd9d7, 0x28e8, 0x0, 0x0);
        gbc.writeMem(0x8a97, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4f2c);
        EXPECT(gbc.pc(), 0x8a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a97), 0x39);
        // 39 01BB
        gbc.setState(0x3391, 0x9fd, 0x2af0, 0xdf4e, 0xc013, 0x56f, 0x1, 0x0);
        gbc.writeMem(0x3391, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9fd);
        EXPECT(gbc.pc(), 0x3392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01BC
        gbc.setState(0x17c4, 0xdee0, 0xb560, 0x96fa, 0x4437, 0x8b9a, 0x1, 0x1);
        gbc.writeMem(0x17c4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xdee0);
        EXPECT(gbc.pc(), 0x17c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01BD
        gbc.setState(0x24b8, 0xbeac, 0x4d80, 0xebe7, 0xbdfc, 0xf7a2, 0x1, 0x1);
        gbc.writeMem(0x24b8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbeac);
        EXPECT(gbc.pc(), 0x24b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01BE
        gbc.setState(0x9b19, 0x9b44, 0xf0, 0xdd7b, 0x6b8, 0xaae2, 0x1, 0x1);
        gbc.writeMem(0x9b19, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9b44);
        EXPECT(gbc.pc(), 0x9b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b19), 0x39);
        // 39 01BF
        gbc.setState(0x1105, 0x614, 0x6db0, 0x1b4d, 0x5cb5, 0x8cba, 0x0, 0x0);
        gbc.writeMem(0x1105, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x614);
        EXPECT(gbc.pc(), 0x1106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01C0
        gbc.setState(0xea44, 0xddf0, 0x6670, 0xcc37, 0xda8c, 0x73ec, 0x0, 0x1);
        gbc.writeMem(0xea44, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xddf0);
        EXPECT(gbc.pc(), 0xea45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea44), 0x39);
        // 39 01C1
        gbc.setState(0x9f53, 0x3e7b, 0xd5d0, 0x9f51, 0xcf74, 0x139a, 0x0, 0x0);
        gbc.writeMem(0x9f53, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3e7b);
        EXPECT(gbc.pc(), 0x9f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f53), 0x39);
        // 39 01C2
        gbc.setState(0x7833, 0x80f7, 0xe110, 0xb2a4, 0x6cf5, 0xe7bf, 0x1, 0x1);
        gbc.writeMem(0x7833, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x80f7);
        EXPECT(gbc.pc(), 0x7834);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01C4
        gbc.setState(0xf93, 0x2b4d, 0xa700, 0xc6e1, 0xc795, 0x465e, 0x0, 0x1);
        gbc.writeMem(0xf93, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2b4d);
        EXPECT(gbc.pc(), 0xf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01C5
        gbc.setState(0x1547, 0xdf75, 0xa620, 0x92b8, 0x68f0, 0xf599, 0x1, 0x1);
        gbc.writeMem(0x1547, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xdf75);
        EXPECT(gbc.pc(), 0x1548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01C6
        gbc.setState(0x426e, 0xc785, 0xcc50, 0xd4fc, 0xb4d5, 0x92eb, 0x0, 0x0);
        gbc.writeMem(0x426e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc785);
        EXPECT(gbc.pc(), 0x426f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01C7
        gbc.setState(0x7ed2, 0x4f16, 0xc6d0, 0x433d, 0xc53e, 0xa2a4, 0x0, 0x1);
        gbc.writeMem(0x7ed2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4f16);
        EXPECT(gbc.pc(), 0x7ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01C8
        gbc.setState(0xb797, 0xb227, 0x7460, 0xc157, 0xdc8c, 0x5012, 0x0, 0x0);
        gbc.writeMem(0xb797, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb227);
        EXPECT(gbc.pc(), 0xb798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb797), 0x39);
        // 39 01C9
        gbc.setState(0x5db9, 0xcc8, 0xa240, 0xf632, 0x759c, 0xb609, 0x0, 0x0);
        gbc.writeMem(0x5db9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcc8);
        EXPECT(gbc.pc(), 0x5dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01CA
        gbc.setState(0x3000, 0xa7fa, 0x60a0, 0x7f49, 0x366, 0xba5a, 0x0, 0x1);
        gbc.writeMem(0x3000, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa7fa);
        EXPECT(gbc.pc(), 0x3001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01CB
        gbc.setState(0xad5e, 0xd98c, 0x5f30, 0x9527, 0xa2d9, 0x491, 0x1, 0x1);
        gbc.writeMem(0xad5e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd98c);
        EXPECT(gbc.pc(), 0xad5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5e), 0x39);
        // 39 01CC
        gbc.setState(0xc3c5, 0xcdc7, 0xedc0, 0x7fcf, 0xf396, 0x7a06, 0x0, 0x1);
        gbc.writeMem(0xc3c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xcdc7);
        EXPECT(gbc.pc(), 0xc3c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3c5), 0x39);
        // 39 01CD
        gbc.setState(0xce23, 0x7754, 0x6e00, 0xa3aa, 0x7f51, 0x5ffb, 0x1, 0x1);
        gbc.writeMem(0xce23, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7754);
        EXPECT(gbc.pc(), 0xce24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce23), 0x39);
        // 39 01CE
        gbc.setState(0xda0b, 0x6c38, 0x6ad0, 0x43e1, 0x8aae, 0xbf93, 0x1, 0x1);
        gbc.writeMem(0xda0b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6c38);
        EXPECT(gbc.pc(), 0xda0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda0b), 0x39);
        // 39 01CF
        gbc.setState(0x28ff, 0x2e38, 0xc30, 0x3674, 0xc0bc, 0x8261, 0x0, 0x1);
        gbc.writeMem(0x28ff, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2e38);
        EXPECT(gbc.pc(), 0x2900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01D0
        gbc.setState(0x6724, 0x91d0, 0xee40, 0x5086, 0xd934, 0xabc8, 0x0, 0x0);
        gbc.writeMem(0x6724, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x91d0);
        EXPECT(gbc.pc(), 0x6725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01D1
        gbc.setState(0xc52a, 0x42b3, 0x7dc0, 0xc2ef, 0x996c, 0x6d3b, 0x0, 0x0);
        gbc.writeMem(0xc52a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x42b3);
        EXPECT(gbc.pc(), 0xc52b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc52a), 0x39);
        // 39 01D2
        gbc.setState(0x1e3, 0x9d34, 0xca90, 0xb31c, 0xbbcd, 0x665e, 0x1, 0x0);
        gbc.writeMem(0x1e3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9d34);
        EXPECT(gbc.pc(), 0x1e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01D3
        gbc.setState(0xdcb5, 0x3654, 0x5990, 0x8e76, 0x124, 0xd942, 0x1, 0x0);
        gbc.writeMem(0xdcb5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3654);
        EXPECT(gbc.pc(), 0xdcb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb5), 0x39);
        // 39 01D4
        gbc.setState(0x1104, 0x2903, 0x6ae0, 0x9849, 0xa8b3, 0xe48a, 0x0, 0x0);
        gbc.writeMem(0x1104, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2903);
        EXPECT(gbc.pc(), 0x1105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01D5
        gbc.setState(0xa149, 0x33c4, 0x2430, 0x7303, 0xdb41, 0x90be, 0x1, 0x0);
        gbc.writeMem(0xa149, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x33c4);
        EXPECT(gbc.pc(), 0xa14a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa149), 0x39);
        // 39 01D6
        gbc.setState(0xd95b, 0xb789, 0xdf90, 0x68a8, 0x593b, 0x3d65, 0x0, 0x0);
        gbc.writeMem(0xd95b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb789);
        EXPECT(gbc.pc(), 0xd95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95b), 0x39);
        // 39 01D7
        gbc.setState(0x853e, 0x866b, 0xe910, 0x6ae0, 0xcacb, 0xfdcd, 0x1, 0x1);
        gbc.writeMem(0x853e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x866b);
        EXPECT(gbc.pc(), 0x853f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853e), 0x39);
        // 39 01D8
        gbc.setState(0xbc9a, 0x8f34, 0x4470, 0xbbe9, 0x83a5, 0x8792, 0x1, 0x0);
        gbc.writeMem(0xbc9a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8f34);
        EXPECT(gbc.pc(), 0xbc9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc9a), 0x39);
        // 39 01D9
        gbc.setState(0xbe6e, 0xdee8, 0x2b0, 0x94b2, 0xcf68, 0x826b, 0x0, 0x0);
        gbc.writeMem(0xbe6e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdee8);
        EXPECT(gbc.pc(), 0xbe6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe6e), 0x39);
        // 39 01DA
        gbc.setState(0x80a, 0xd6de, 0x790, 0xd236, 0xc4f4, 0x7156, 0x0, 0x1);
        gbc.writeMem(0x80a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd6de);
        EXPECT(gbc.pc(), 0x80b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01DB
        gbc.setState(0xbb18, 0x4b0d, 0x7950, 0x7de7, 0x8d45, 0xafd5, 0x1, 0x0);
        gbc.writeMem(0xbb18, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0xbb19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb18), 0x39);
        // 39 01DC
        gbc.setState(0xb814, 0xd857, 0x6660, 0x7d58, 0x8c8a, 0x2dd1, 0x1, 0x1);
        gbc.writeMem(0xb814, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd857);
        EXPECT(gbc.pc(), 0xb815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb814), 0x39);
        // 39 01DD
        gbc.setState(0xdaff, 0x49ad, 0x74f0, 0x9f43, 0x4655, 0xa1d5, 0x1, 0x0);
        gbc.writeMem(0xdaff, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x49ad);
        EXPECT(gbc.pc(), 0xdb00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaff), 0x39);
        // 39 01DE
        gbc.setState(0x4a0e, 0x1fb9, 0x4000, 0xd4e8, 0x609d, 0xd463, 0x1, 0x0);
        gbc.writeMem(0x4a0e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1fb9);
        EXPECT(gbc.pc(), 0x4a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01DF
        gbc.setState(0xee5a, 0x37ec, 0x3b30, 0xe967, 0xd174, 0x4fd4, 0x0, 0x0);
        gbc.writeMem(0xee5a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x37ec);
        EXPECT(gbc.pc(), 0xee5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee5a), 0x39);
        // 39 01E0
        gbc.setState(0x3585, 0xbf35, 0xd490, 0xe9a9, 0x6bfb, 0x6e04, 0x1, 0x1);
        gbc.writeMem(0x3585, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbf35);
        EXPECT(gbc.pc(), 0x3586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01E1
        gbc.setState(0xb084, 0xd0b0, 0x6200, 0xf65e, 0xa056, 0x17d4, 0x1, 0x0);
        gbc.writeMem(0xb084, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd0b0);
        EXPECT(gbc.pc(), 0xb085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb084), 0x39);
        // 39 01E2
        gbc.setState(0xc0a, 0x3f70, 0x8840, 0x144b, 0x9ae1, 0x6b1b, 0x0, 0x1);
        gbc.writeMem(0xc0a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3f70);
        EXPECT(gbc.pc(), 0xc0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01E3
        gbc.setState(0xa55b, 0x9c84, 0x1f10, 0xc7a9, 0x2b0b, 0x1afb, 0x0, 0x1);
        gbc.writeMem(0xa55b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9c84);
        EXPECT(gbc.pc(), 0xa55c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55b), 0x39);
        // 39 01E4
        gbc.setState(0x83f3, 0xc2de, 0x7a70, 0x29c, 0x111e, 0xbf1f, 0x1, 0x1);
        gbc.writeMem(0x83f3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc2de);
        EXPECT(gbc.pc(), 0x83f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f3), 0x39);
        // 39 01E5
        gbc.setState(0x6449, 0xc888, 0x9050, 0xfdef, 0xf912, 0xd1a1, 0x1, 0x1);
        gbc.writeMem(0x6449, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc888);
        EXPECT(gbc.pc(), 0x644a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01E6
        gbc.setState(0x84a1, 0x22b, 0x8e00, 0x8d2b, 0xb31c, 0x32a5, 0x0, 0x0);
        gbc.writeMem(0x84a1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x22b);
        EXPECT(gbc.pc(), 0x84a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a1), 0x39);
        // 39 01E8
        gbc.setState(0x3d3a, 0xecce, 0x7120, 0x291d, 0xfe4a, 0xc2ba, 0x1, 0x0);
        gbc.writeMem(0x3d3a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xecce);
        EXPECT(gbc.pc(), 0x3d3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01E9
        gbc.setState(0xcc6a, 0xa925, 0xf00, 0x63cc, 0x4b14, 0x37ec, 0x1, 0x1);
        gbc.writeMem(0xcc6a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa925);
        EXPECT(gbc.pc(), 0xcc6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc6a), 0x39);
        // 39 01EA
        gbc.setState(0xbbc0, 0xcfe6, 0x8980, 0x24fa, 0x3aab, 0x60d8, 0x1, 0x0);
        gbc.writeMem(0xbbc0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcfe6);
        EXPECT(gbc.pc(), 0xbbc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc0), 0x39);
        // 39 01EB
        gbc.setState(0x81ca, 0xed9, 0x3180, 0xfe07, 0xd434, 0x9d10, 0x0, 0x0);
        gbc.writeMem(0x81ca, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xed9);
        EXPECT(gbc.pc(), 0x81cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ca), 0x39);
        // 39 01EC
        gbc.setState(0x1b1c, 0xee35, 0x8680, 0x611f, 0xf50d, 0xeb42, 0x1, 0x1);
        gbc.writeMem(0x1b1c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xee35);
        EXPECT(gbc.pc(), 0x1b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01ED
        gbc.setState(0x8a04, 0x21c1, 0xe60, 0x4ec, 0xc2f5, 0xbb5f, 0x1, 0x0);
        gbc.writeMem(0x8a04, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x21c1);
        EXPECT(gbc.pc(), 0x8a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a04), 0x39);
        // 39 01EE
        gbc.setState(0x9906, 0x1a69, 0xe490, 0x7617, 0xc03c, 0xc449, 0x0, 0x1);
        gbc.writeMem(0x9906, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1a69);
        EXPECT(gbc.pc(), 0x9907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9906), 0x39);
        // 39 01EF
        gbc.setState(0xaf2, 0x8833, 0xa6f0, 0x438c, 0x960a, 0xedaf, 0x0, 0x1);
        gbc.writeMem(0xaf2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8833);
        EXPECT(gbc.pc(), 0xaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01F0
        gbc.setState(0x8ebe, 0xdc24, 0xb2c0, 0xd51b, 0xaefe, 0xdec3, 0x1, 0x1);
        gbc.writeMem(0x8ebe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdc24);
        EXPECT(gbc.pc(), 0x8ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ebe), 0x39);
        // 39 01F1
        gbc.setState(0xe42, 0x7561, 0x8300, 0x7168, 0xdb6b, 0x7ed5, 0x1, 0x1);
        gbc.writeMem(0xe42, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7561);
        EXPECT(gbc.pc(), 0xe43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01F2
        gbc.setState(0x3a9a, 0x996f, 0x3110, 0x566, 0x465a, 0x197d, 0x0, 0x1);
        gbc.writeMem(0x3a9a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x996f);
        EXPECT(gbc.pc(), 0x3a9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01F3
        gbc.setState(0xa149, 0x104c, 0xcbb0, 0x856, 0x64f9, 0x4b5d, 0x0, 0x0);
        gbc.writeMem(0xa149, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x104c);
        EXPECT(gbc.pc(), 0xa14a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa149), 0x39);
        // 39 01F4
        gbc.setState(0x555, 0xf153, 0x8690, 0xb5bd, 0xdfac, 0xde5f, 0x0, 0x0);
        gbc.writeMem(0x555, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf153);
        EXPECT(gbc.pc(), 0x556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01F5
        gbc.setState(0x8dba, 0x4d95, 0xb360, 0x9162, 0x518c, 0x1770, 0x0, 0x1);
        gbc.writeMem(0x8dba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4d95);
        EXPECT(gbc.pc(), 0x8dbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dba), 0x39);
        // 39 01F6
        gbc.setState(0x722b, 0x5e66, 0xda30, 0x9f23, 0x8e6, 0x5af5, 0x1, 0x0);
        gbc.writeMem(0x722b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5e66);
        EXPECT(gbc.pc(), 0x722c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01F7
        gbc.setState(0x291f, 0x415e, 0xb6e0, 0x3a4a, 0xadef, 0xe32f, 0x1, 0x1);
        gbc.writeMem(0x291f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x415e);
        EXPECT(gbc.pc(), 0x2920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 01F8
        gbc.setState(0x3ceb, 0x1793, 0xbdf0, 0x3b8a, 0xf68c, 0x9c9, 0x0, 0x1);
        gbc.writeMem(0x3ceb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1793);
        EXPECT(gbc.pc(), 0x3cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01F9
        gbc.setState(0x8eaa, 0x524b, 0x9e50, 0xdd39, 0x147, 0xd2c0, 0x0, 0x1);
        gbc.writeMem(0x8eaa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x524b);
        EXPECT(gbc.pc(), 0x8eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eaa), 0x39);
        // 39 01FA
        gbc.setState(0x1e48, 0x8fd8, 0xb820, 0xbfde, 0xce00, 0x6966, 0x0, 0x1);
        gbc.writeMem(0x1e48, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8fd8);
        EXPECT(gbc.pc(), 0x1e49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 01FB
        gbc.setState(0x3159, 0xfd5d, 0xd770, 0xffaa, 0x7e5c, 0x6d3b, 0x0, 0x1);
        gbc.writeMem(0x3159, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfd5d);
        EXPECT(gbc.pc(), 0x315a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 01FC
        gbc.setState(0x15db, 0x638e, 0x67c0, 0x347b, 0x9e68, 0x654b, 0x0, 0x1);
        gbc.writeMem(0x15db, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x638e);
        EXPECT(gbc.pc(), 0x15dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01FD
        gbc.setState(0x943b, 0x8484, 0x3a10, 0x7adf, 0x1643, 0xdd12, 0x0, 0x1);
        gbc.writeMem(0x943b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8484);
        EXPECT(gbc.pc(), 0x943c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x943b), 0x39);
        // 39 01FE
        gbc.setState(0x482a, 0x3c55, 0x5e10, 0xbd1b, 0xae6a, 0x8097, 0x1, 0x0);
        gbc.writeMem(0x482a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3c55);
        EXPECT(gbc.pc(), 0x482b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 01FF
        gbc.setState(0x7940, 0xc375, 0x3aa0, 0xa053, 0xb85b, 0x515c, 0x1, 0x1);
        gbc.writeMem(0x7940, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc375);
        EXPECT(gbc.pc(), 0x7941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0200
        gbc.setState(0xa42a, 0x2e7f, 0xa470, 0xe8cd, 0xb28b, 0x6f33, 0x0, 0x1);
        gbc.writeMem(0xa42a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2e7f);
        EXPECT(gbc.pc(), 0xa42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42a), 0x39);
        // 39 0201
        gbc.setState(0x4ceb, 0x9b81, 0xfcb0, 0xed6a, 0x2b52, 0x6286, 0x1, 0x0);
        gbc.writeMem(0x4ceb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9b81);
        EXPECT(gbc.pc(), 0x4cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0202
        gbc.setState(0xac0e, 0x9295, 0x7820, 0xfa9a, 0xcd73, 0x19c0, 0x1, 0x0);
        gbc.writeMem(0xac0e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9295);
        EXPECT(gbc.pc(), 0xac0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac0e), 0x39);
        // 39 0203
        gbc.setState(0xc7bf, 0x217e, 0x41a0, 0x3ab3, 0xe387, 0xa1a5, 0x0, 0x1);
        gbc.writeMem(0xc7bf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x217e);
        EXPECT(gbc.pc(), 0xc7c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7bf), 0x39);
        // 39 0204
        gbc.setState(0x2906, 0x1859, 0x1de0, 0x8a35, 0x2cba, 0x41ca, 0x0, 0x0);
        gbc.writeMem(0x2906, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1859);
        EXPECT(gbc.pc(), 0x2907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0205
        gbc.setState(0x3259, 0x90af, 0x60d0, 0x18f9, 0xbb24, 0xc08, 0x0, 0x1);
        gbc.writeMem(0x3259, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x90af);
        EXPECT(gbc.pc(), 0x325a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0206
        gbc.setState(0xe0fe, 0x5add, 0xc20, 0x42a2, 0x8937, 0xcf37, 0x0, 0x1);
        gbc.writeMem(0xe0fe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5add);
        EXPECT(gbc.pc(), 0xe0ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0fe), 0x39);
        // 39 0207
        gbc.setState(0x1c77, 0xf1fa, 0x1dc0, 0x9544, 0x8035, 0x76f3, 0x1, 0x1);
        gbc.writeMem(0x1c77, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf1fa);
        EXPECT(gbc.pc(), 0x1c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0208
        gbc.setState(0xc1f4, 0x1e05, 0x7d0, 0x5c0b, 0x891e, 0x3405, 0x1, 0x1);
        gbc.writeMem(0xc1f4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1e05);
        EXPECT(gbc.pc(), 0xc1f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f4), 0x39);
        // 39 0209
        gbc.setState(0x1a53, 0xf5f5, 0x1e90, 0x8808, 0x15be, 0x5b44, 0x0, 0x1);
        gbc.writeMem(0x1a53, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf5f5);
        EXPECT(gbc.pc(), 0x1a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 020A
        gbc.setState(0x5ab2, 0xa015, 0x2820, 0xc20b, 0xd94d, 0x1670, 0x1, 0x0);
        gbc.writeMem(0x5ab2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa015);
        EXPECT(gbc.pc(), 0x5ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 020B
        gbc.setState(0x70d, 0xdebb, 0x4050, 0xeb3e, 0x1d51, 0xbb60, 0x0, 0x0);
        gbc.writeMem(0x70d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdebb);
        EXPECT(gbc.pc(), 0x70e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 020C
        gbc.setState(0xace3, 0x7901, 0xf460, 0x19, 0xe914, 0xa3bc, 0x1, 0x0);
        gbc.writeMem(0xace3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7901);
        EXPECT(gbc.pc(), 0xace4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace3), 0x39);
        // 39 020D
        gbc.setState(0x58d1, 0x4343, 0xfee0, 0x872e, 0x8070, 0xc23a, 0x0, 0x1);
        gbc.writeMem(0x58d1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4343);
        EXPECT(gbc.pc(), 0x58d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 020E
        gbc.setState(0x334f, 0x5ff, 0x59c0, 0xa09, 0xfdde, 0x61fe, 0x0, 0x0);
        gbc.writeMem(0x334f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5ff);
        EXPECT(gbc.pc(), 0x3350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 020F
        gbc.setState(0x9040, 0x1ee5, 0xf4a0, 0x8711, 0xa7b7, 0x5b24, 0x0, 0x0);
        gbc.writeMem(0x9040, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1ee5);
        EXPECT(gbc.pc(), 0x9041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9040), 0x39);
        // 39 0210
        gbc.setState(0x9873, 0xff14, 0x2dd0, 0x3812, 0x4365, 0xcd10, 0x0, 0x0);
        gbc.writeMem(0x9873, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xff14);
        EXPECT(gbc.pc(), 0x9874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9873), 0x39);
        // 39 0211
        gbc.setState(0x9e66, 0xe71a, 0x1870, 0xa036, 0x83e2, 0xc7c8, 0x0, 0x0);
        gbc.writeMem(0x9e66, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe71a);
        EXPECT(gbc.pc(), 0x9e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e66), 0x39);
        // 39 0212
        gbc.setState(0x3b25, 0x1f16, 0xf050, 0x8d66, 0x64fe, 0x1087, 0x1, 0x0);
        gbc.writeMem(0x3b25, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1f16);
        EXPECT(gbc.pc(), 0x3b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0213
        gbc.setState(0x58c5, 0x4157, 0xc950, 0x6d7e, 0xbb5b, 0x3b54, 0x1, 0x1);
        gbc.writeMem(0x58c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4157);
        EXPECT(gbc.pc(), 0x58c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0214
        gbc.setState(0xd675, 0x91be, 0x950, 0x15ba, 0xa43d, 0x701f, 0x1, 0x0);
        gbc.writeMem(0xd675, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x91be);
        EXPECT(gbc.pc(), 0xd676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd675), 0x39);
        // 39 0215
        gbc.setState(0xef37, 0xbd63, 0x4b40, 0xccc, 0x8c19, 0xb6c9, 0x0, 0x0);
        gbc.writeMem(0xef37, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbd63);
        EXPECT(gbc.pc(), 0xef38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef37), 0x39);
        // 39 0216
        gbc.setState(0x8807, 0x6e47, 0xf4a0, 0xc869, 0xf7cd, 0x7166, 0x1, 0x0);
        gbc.writeMem(0x8807, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6e47);
        EXPECT(gbc.pc(), 0x8808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8807), 0x39);
        // 39 0217
        gbc.setState(0x1dd8, 0xac78, 0x71f0, 0x7f88, 0x129a, 0xc9ae, 0x0, 0x1);
        gbc.writeMem(0x1dd8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xac78);
        EXPECT(gbc.pc(), 0x1dd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0218
        gbc.setState(0x5c0b, 0xba7, 0x36c0, 0x3e96, 0x7607, 0xb975, 0x1, 0x1);
        gbc.writeMem(0x5c0b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xba7);
        EXPECT(gbc.pc(), 0x5c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0219
        gbc.setState(0x44eb, 0xc2ce, 0xdd80, 0xe7b4, 0xda54, 0x1efb, 0x1, 0x0);
        gbc.writeMem(0x44eb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc2ce);
        EXPECT(gbc.pc(), 0x44ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 021A
        gbc.setState(0xbcb8, 0x7347, 0x2410, 0x61d7, 0xb3e6, 0x4f94, 0x0, 0x0);
        gbc.writeMem(0xbcb8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7347);
        EXPECT(gbc.pc(), 0xbcb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb8), 0x39);
        // 39 021B
        gbc.setState(0x13bc, 0xc285, 0x92c0, 0xbc08, 0x58bc, 0x86ab, 0x0, 0x1);
        gbc.writeMem(0x13bc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc285);
        EXPECT(gbc.pc(), 0x13bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 021C
        gbc.setState(0xe0fa, 0x3291, 0x13e0, 0x6e99, 0xb64b, 0x6355, 0x1, 0x0);
        gbc.writeMem(0xe0fa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3291);
        EXPECT(gbc.pc(), 0xe0fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0fa), 0x39);
        // 39 021D
        gbc.setState(0x58d5, 0x2be3, 0xa920, 0x2892, 0x8ad2, 0x8875, 0x1, 0x1);
        gbc.writeMem(0x58d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2be3);
        EXPECT(gbc.pc(), 0x58d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 021E
        gbc.setState(0x4c69, 0x87f9, 0x5c30, 0xaf8d, 0x1a09, 0xec2, 0x0, 0x0);
        gbc.writeMem(0x4c69, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x87f9);
        EXPECT(gbc.pc(), 0x4c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 021F
        gbc.setState(0xb073, 0xfba2, 0x8b70, 0x71f1, 0xeeac, 0xf29c, 0x0, 0x1);
        gbc.writeMem(0xb073, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfba2);
        EXPECT(gbc.pc(), 0xb074);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb073), 0x39);
        // 39 0220
        gbc.setState(0xaa75, 0x1535, 0x2e80, 0x42ff, 0xa101, 0xf3f7, 0x1, 0x1);
        gbc.writeMem(0xaa75, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1535);
        EXPECT(gbc.pc(), 0xaa76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa75), 0x39);
        // 39 0221
        gbc.setState(0x3521, 0xd427, 0x7de0, 0x7430, 0xc0bc, 0x1b3a, 0x1, 0x1);
        gbc.writeMem(0x3521, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd427);
        EXPECT(gbc.pc(), 0x3522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0222
        gbc.setState(0x6f78, 0x8bbb, 0x4a20, 0x98ea, 0x1076, 0x258e, 0x1, 0x0);
        gbc.writeMem(0x6f78, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8bbb);
        EXPECT(gbc.pc(), 0x6f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0223
        gbc.setState(0x534e, 0x385e, 0xd70, 0x2f66, 0x1e83, 0x63dd, 0x0, 0x1);
        gbc.writeMem(0x534e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x385e);
        EXPECT(gbc.pc(), 0x534f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0224
        gbc.setState(0xca64, 0x6c84, 0x8cf0, 0xefaf, 0x7118, 0x7d60, 0x0, 0x0);
        gbc.writeMem(0xca64, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6c84);
        EXPECT(gbc.pc(), 0xca65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca64), 0x39);
        // 39 0225
        gbc.setState(0x48c8, 0x13a0, 0x8170, 0xdde1, 0xc866, 0x9a2e, 0x1, 0x1);
        gbc.writeMem(0x48c8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x13a0);
        EXPECT(gbc.pc(), 0x48c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0226
        gbc.setState(0x2f01, 0xe9ac, 0x9170, 0x88e8, 0x6dc8, 0xf06f, 0x0, 0x1);
        gbc.writeMem(0x2f01, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe9ac);
        EXPECT(gbc.pc(), 0x2f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0227
        gbc.setState(0x9e6f, 0xb020, 0x1830, 0x4e49, 0x5a95, 0x86e7, 0x0, 0x1);
        gbc.writeMem(0x9e6f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb020);
        EXPECT(gbc.pc(), 0x9e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6f), 0x39);
        // 39 0228
        gbc.setState(0x22e, 0x6718, 0x40, 0x5aa3, 0x5b2, 0x83c3, 0x0, 0x1);
        gbc.writeMem(0x22e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6718);
        EXPECT(gbc.pc(), 0x22f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0229
        gbc.setState(0x7d77, 0xdf0, 0x8660, 0xe906, 0x9f95, 0xa2d0, 0x1, 0x1);
        gbc.writeMem(0x7d77, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdf0);
        EXPECT(gbc.pc(), 0x7d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 022A
        gbc.setState(0x3, 0x66c0, 0x17b0, 0x64de, 0x353, 0xf815, 0x1, 0x1);
        gbc.writeMem(0x3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x66c0);
        EXPECT(gbc.pc(), 0x4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 022B
        gbc.setState(0x15b8, 0x5e1b, 0xfc90, 0x55c6, 0x4e77, 0x9481, 0x1, 0x1);
        gbc.writeMem(0x15b8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5e1b);
        EXPECT(gbc.pc(), 0x15b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 022C
        gbc.setState(0xbb, 0x80d1, 0xbb70, 0x8f6f, 0xc2fc, 0x2490, 0x0, 0x0);
        gbc.writeMem(0xbb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x80d1);
        EXPECT(gbc.pc(), 0xbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 022D
        gbc.setState(0xc75b, 0xacb6, 0x24a0, 0x3ec5, 0xeea, 0xd00a, 0x0, 0x1);
        gbc.writeMem(0xc75b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xacb6);
        EXPECT(gbc.pc(), 0xc75c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc75b), 0x39);
        // 39 022E
        gbc.setState(0xde50, 0xadbb, 0xfb70, 0xf6b7, 0x60e, 0xf29c, 0x0, 0x0);
        gbc.writeMem(0xde50, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xadbb);
        EXPECT(gbc.pc(), 0xde51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde50), 0x39);
        // 39 022F
        gbc.setState(0x3a5e, 0x5c84, 0x9a00, 0xe7a9, 0x1e3b, 0x6fdc, 0x0, 0x1);
        gbc.writeMem(0x3a5e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5c84);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0230
        gbc.setState(0x51d4, 0xb225, 0x6f90, 0xedea, 0xb0f0, 0xe51e, 0x1, 0x0);
        gbc.writeMem(0x51d4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb225);
        EXPECT(gbc.pc(), 0x51d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0231
        gbc.setState(0x501b, 0xf968, 0xbd00, 0x7996, 0x1b9, 0x4aee, 0x0, 0x1);
        gbc.writeMem(0x501b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf968);
        EXPECT(gbc.pc(), 0x501c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0232
        gbc.setState(0xded4, 0x351e, 0xb1d0, 0x3f1e, 0x50a4, 0x85e2, 0x1, 0x0);
        gbc.writeMem(0xded4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x351e);
        EXPECT(gbc.pc(), 0xded5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded4), 0x39);
        // 39 0233
        gbc.setState(0x5281, 0x2244, 0x270, 0x4b2d, 0x127c, 0xae1f, 0x1, 0x1);
        gbc.writeMem(0x5281, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2244);
        EXPECT(gbc.pc(), 0x5282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0234
        gbc.setState(0x939f, 0x741, 0x18c0, 0x7837, 0xcec6, 0x2e7f, 0x1, 0x1);
        gbc.writeMem(0x939f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x741);
        EXPECT(gbc.pc(), 0x93a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x939f), 0x39);
        // 39 0236
        gbc.setState(0x72da, 0xedad, 0xaf30, 0xad6f, 0x8f8e, 0xd6da, 0x1, 0x1);
        gbc.writeMem(0x72da, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xedad);
        EXPECT(gbc.pc(), 0x72db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0237
        gbc.setState(0x89ac, 0xa62f, 0x84e0, 0xc1da, 0xa9fe, 0x80b0, 0x0, 0x1);
        gbc.writeMem(0x89ac, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa62f);
        EXPECT(gbc.pc(), 0x89ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89ac), 0x39);
        // 39 0238
        gbc.setState(0xe423, 0x8e99, 0x5980, 0x486e, 0xf613, 0x22f9, 0x0, 0x1);
        gbc.writeMem(0xe423, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8e99);
        EXPECT(gbc.pc(), 0xe424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe423), 0x39);
        // 39 0239
        gbc.setState(0x6255, 0xf3e2, 0x4f90, 0x8335, 0x8f4, 0x6d5f, 0x1, 0x0);
        gbc.writeMem(0x6255, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf3e2);
        EXPECT(gbc.pc(), 0x6256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 023A
        gbc.setState(0xdbfd, 0xd39e, 0x5400, 0xc38b, 0x8c1f, 0x1fae, 0x1, 0x1);
        gbc.writeMem(0xdbfd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd39e);
        EXPECT(gbc.pc(), 0xdbfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfd), 0x39);
        // 39 023B
        gbc.setState(0x4a01, 0x311d, 0xefd0, 0x5c4d, 0x4440, 0x66d0, 0x1, 0x0);
        gbc.writeMem(0x4a01, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x311d);
        EXPECT(gbc.pc(), 0x4a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 023C
        gbc.setState(0xcda6, 0x620b, 0x1010, 0x7d0d, 0xeb0e, 0xc32, 0x1, 0x0);
        gbc.writeMem(0xcda6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x620b);
        EXPECT(gbc.pc(), 0xcda7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda6), 0x39);
        // 39 023D
        gbc.setState(0xe39c, 0xab12, 0x1690, 0xa473, 0x5537, 0x97a1, 0x0, 0x0);
        gbc.writeMem(0xe39c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xab12);
        EXPECT(gbc.pc(), 0xe39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39c), 0x39);
        // 39 023E
        gbc.setState(0xef2, 0x90be, 0xd410, 0x93e1, 0xfa6f, 0x21b3, 0x1, 0x1);
        gbc.writeMem(0xef2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x90be);
        EXPECT(gbc.pc(), 0xef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 023F
        gbc.setState(0x623a, 0x2c69, 0x69b0, 0xd5f5, 0x7623, 0x1294, 0x0, 0x0);
        gbc.writeMem(0x623a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2c69);
        EXPECT(gbc.pc(), 0x623b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0240
        gbc.setState(0x42be, 0x41d7, 0xbfd0, 0x521d, 0xf2e7, 0xdc8b, 0x0, 0x1);
        gbc.writeMem(0x42be, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x41d7);
        EXPECT(gbc.pc(), 0x42bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0241
        gbc.setState(0xabab, 0x5951, 0x11a0, 0x18e0, 0x33d0, 0x271a, 0x1, 0x1);
        gbc.writeMem(0xabab, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5951);
        EXPECT(gbc.pc(), 0xabac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabab), 0x39);
        // 39 0243
        gbc.setState(0x637c, 0x7486, 0xe400, 0xf0ad, 0x86d, 0x633f, 0x1, 0x1);
        gbc.writeMem(0x637c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7486);
        EXPECT(gbc.pc(), 0x637d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0244
        gbc.setState(0x65af, 0x8d84, 0x1a40, 0xadd9, 0x7f75, 0x92b9, 0x1, 0x0);
        gbc.writeMem(0x65af, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8d84);
        EXPECT(gbc.pc(), 0x65b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0245
        gbc.setState(0x275e, 0xf87e, 0x7150, 0x393a, 0x58b, 0xe403, 0x0, 0x0);
        gbc.writeMem(0x275e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf87e);
        EXPECT(gbc.pc(), 0x275f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0246
        gbc.setState(0x752e, 0xbba9, 0xfe70, 0xea85, 0x2aa3, 0x4de, 0x1, 0x1);
        gbc.writeMem(0x752e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbba9);
        EXPECT(gbc.pc(), 0x752f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0247
        gbc.setState(0xbfa0, 0x4a34, 0x2530, 0x2784, 0xea38, 0xa7d5, 0x1, 0x0);
        gbc.writeMem(0xbfa0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4a34);
        EXPECT(gbc.pc(), 0xbfa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa0), 0x39);
        // 39 0248
        gbc.setState(0x54c5, 0x6445, 0x11b0, 0xc3c5, 0xd9cc, 0xbba2, 0x0, 0x1);
        gbc.writeMem(0x54c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6445);
        EXPECT(gbc.pc(), 0x54c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0249
        gbc.setState(0x7ca5, 0x8248, 0x9a50, 0x68b4, 0x8ee, 0x7f12, 0x0, 0x0);
        gbc.writeMem(0x7ca5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8248);
        EXPECT(gbc.pc(), 0x7ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 024A
        gbc.setState(0x745e, 0xa3c, 0x6d70, 0x87ee, 0x9b80, 0x879d, 0x0, 0x0);
        gbc.writeMem(0x745e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa3c);
        EXPECT(gbc.pc(), 0x745f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 024B
        gbc.setState(0xa790, 0x8f76, 0x52a0, 0x9ffe, 0x17d9, 0x6ba7, 0x1, 0x0);
        gbc.writeMem(0xa790, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8f76);
        EXPECT(gbc.pc(), 0xa791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa790), 0x39);
        // 39 024C
        gbc.setState(0x2ccc, 0x1cf8, 0xa8b0, 0xb0c3, 0xbca, 0x9a2c, 0x1, 0x1);
        gbc.writeMem(0x2ccc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1cf8);
        EXPECT(gbc.pc(), 0x2ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 024D
        gbc.setState(0x4b4f, 0x3a59, 0x3bf0, 0x7445, 0xa14a, 0x8fe7, 0x0, 0x1);
        gbc.writeMem(0x4b4f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3a59);
        EXPECT(gbc.pc(), 0x4b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 024E
        gbc.setState(0xcbed, 0x2676, 0xc680, 0xac3f, 0x972d, 0xf616, 0x0, 0x1);
        gbc.writeMem(0xcbed, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2676);
        EXPECT(gbc.pc(), 0xcbee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbed), 0x39);
        // 39 0251
        gbc.setState(0x7546, 0x9a02, 0x4c70, 0x7c0c, 0xf6cb, 0xd77c, 0x1, 0x1);
        gbc.writeMem(0x7546, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9a02);
        EXPECT(gbc.pc(), 0x7547);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0252
        gbc.setState(0xb28d, 0xf879, 0xacd0, 0x2e91, 0xdf8b, 0xe83b, 0x1, 0x1);
        gbc.writeMem(0xb28d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf879);
        EXPECT(gbc.pc(), 0xb28e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb28d), 0x39);
        // 39 0253
        gbc.setState(0x40ce, 0x84ee, 0xaf20, 0x7493, 0xd32d, 0xa7af, 0x1, 0x0);
        gbc.writeMem(0x40ce, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x84ee);
        EXPECT(gbc.pc(), 0x40cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0254
        gbc.setState(0x3736, 0x3b16, 0x2230, 0xea8b, 0xa18e, 0x4f67, 0x0, 0x1);
        gbc.writeMem(0x3736, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3b16);
        EXPECT(gbc.pc(), 0x3737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0256
        gbc.setState(0xe1fb, 0x3959, 0xe00, 0x1235, 0x7c25, 0x5e38, 0x1, 0x1);
        gbc.writeMem(0xe1fb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3959);
        EXPECT(gbc.pc(), 0xe1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1fb), 0x39);
        // 39 0257
        gbc.setState(0x374c, 0xc22a, 0xaa60, 0x8ff, 0xea04, 0x62eb, 0x0, 0x1);
        gbc.writeMem(0x374c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc22a);
        EXPECT(gbc.pc(), 0x374d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0258
        gbc.setState(0x460e, 0xc5d8, 0xd640, 0x7695, 0x3714, 0x17c, 0x1, 0x1);
        gbc.writeMem(0x460e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc5d8);
        EXPECT(gbc.pc(), 0x460f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0259
        gbc.setState(0x9de9, 0xe389, 0x8520, 0xd1bb, 0x29b5, 0x230, 0x1, 0x1);
        gbc.writeMem(0x9de9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe389);
        EXPECT(gbc.pc(), 0x9dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de9), 0x39);
        // 39 025A
        gbc.setState(0x41e3, 0x4377, 0xec30, 0x6033, 0x8bdd, 0xd26, 0x1, 0x1);
        gbc.writeMem(0x41e3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4377);
        EXPECT(gbc.pc(), 0x41e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 025B
        gbc.setState(0x810b, 0x3e04, 0x240, 0x172d, 0x1f97, 0x89a3, 0x0, 0x1);
        gbc.writeMem(0x810b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3e04);
        EXPECT(gbc.pc(), 0x810c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810b), 0x39);
        // 39 025C
        gbc.setState(0x824f, 0x2394, 0x5040, 0xda9, 0xfb01, 0x3b3, 0x1, 0x1);
        gbc.writeMem(0x824f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2394);
        EXPECT(gbc.pc(), 0x8250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824f), 0x39);
        // 39 025D
        gbc.setState(0x4094, 0xcb7f, 0xb130, 0x1ab2, 0x287e, 0xfd03, 0x0, 0x1);
        gbc.writeMem(0x4094, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcb7f);
        EXPECT(gbc.pc(), 0x4095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 025E
        gbc.setState(0x18f7, 0xb186, 0xda60, 0x3d96, 0x1d4a, 0x1f93, 0x0, 0x0);
        gbc.writeMem(0x18f7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb186);
        EXPECT(gbc.pc(), 0x18f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 025F
        gbc.setState(0x46c, 0xbcda, 0xfd40, 0x3600, 0x7a8, 0x5fd3, 0x1, 0x0);
        gbc.writeMem(0x46c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xbcda);
        EXPECT(gbc.pc(), 0x46d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0260
        gbc.setState(0xca73, 0xd150, 0x5940, 0x8bb6, 0x52da, 0xc2a2, 0x0, 0x1);
        gbc.writeMem(0xca73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd150);
        EXPECT(gbc.pc(), 0xca74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca73), 0x39);
        // 39 0261
        gbc.setState(0x14dd, 0xb42e, 0xd320, 0x58f, 0x9460, 0x7c7d, 0x0, 0x1);
        gbc.writeMem(0x14dd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb42e);
        EXPECT(gbc.pc(), 0x14de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0262
        gbc.setState(0x11b1, 0xa318, 0xa700, 0xde79, 0x8b6f, 0x115d, 0x0, 0x0);
        gbc.writeMem(0x11b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa318);
        EXPECT(gbc.pc(), 0x11b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0263
        gbc.setState(0x93d7, 0x7a29, 0xea00, 0xf54f, 0x586d, 0x9510, 0x1, 0x0);
        gbc.writeMem(0x93d7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7a29);
        EXPECT(gbc.pc(), 0x93d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d7), 0x39);
        // 39 0264
        gbc.setState(0x4265, 0x5f67, 0xb4d0, 0x104e, 0x30c, 0x54bd, 0x0, 0x0);
        gbc.writeMem(0x4265, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5f67);
        EXPECT(gbc.pc(), 0x4266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0265
        gbc.setState(0x4d9f, 0xf3a6, 0x4e80, 0xc1b8, 0x2d92, 0xdf88, 0x0, 0x0);
        gbc.writeMem(0x4d9f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf3a6);
        EXPECT(gbc.pc(), 0x4da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0266
        gbc.setState(0x4a66, 0x8768, 0x8d0, 0x8dde, 0x684f, 0xa9ad, 0x0, 0x1);
        gbc.writeMem(0x4a66, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8768);
        EXPECT(gbc.pc(), 0x4a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0267
        gbc.setState(0x7219, 0x7c4d, 0xb0a0, 0x5dd5, 0xe504, 0x7c3c, 0x1, 0x0);
        gbc.writeMem(0x7219, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7c4d);
        EXPECT(gbc.pc(), 0x721a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0268
        gbc.setState(0x48dc, 0x9910, 0x26f0, 0x4dfd, 0xb40f, 0x3fca, 0x0, 0x1);
        gbc.writeMem(0x48dc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9910);
        EXPECT(gbc.pc(), 0x48dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0269
        gbc.setState(0xc77, 0x2d8, 0xdfb0, 0x1a16, 0x48c0, 0xa15d, 0x0, 0x1);
        gbc.writeMem(0xc77, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2d8);
        EXPECT(gbc.pc(), 0xc78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 026B
        gbc.setState(0x1dcf, 0x1498, 0xc0d0, 0xc9b1, 0x57b3, 0x855b, 0x0, 0x0);
        gbc.writeMem(0x1dcf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1498);
        EXPECT(gbc.pc(), 0x1dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 026C
        gbc.setState(0x2a5c, 0x7e5, 0xb00, 0xfa90, 0xfc46, 0xe9eb, 0x0, 0x0);
        gbc.writeMem(0x2a5c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7e5);
        EXPECT(gbc.pc(), 0x2a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 026D
        gbc.setState(0x5b82, 0xca6, 0xc090, 0x9e8, 0x5f70, 0x952, 0x1, 0x1);
        gbc.writeMem(0x5b82, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xca6);
        EXPECT(gbc.pc(), 0x5b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 026F
        gbc.setState(0xacf6, 0xe6f3, 0x4b40, 0x5d08, 0x5bb1, 0x12a6, 0x1, 0x0);
        gbc.writeMem(0xacf6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe6f3);
        EXPECT(gbc.pc(), 0xacf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf6), 0x39);
        // 39 0270
        gbc.setState(0x7654, 0x232d, 0x3d90, 0x98ce, 0xe0af, 0xb94e, 0x0, 0x0);
        gbc.writeMem(0x7654, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x232d);
        EXPECT(gbc.pc(), 0x7655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0271
        gbc.setState(0x811b, 0x239f, 0x46e0, 0xbbfb, 0xeae9, 0x763e, 0x1, 0x1);
        gbc.writeMem(0x811b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x239f);
        EXPECT(gbc.pc(), 0x811c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811b), 0x39);
        // 39 0272
        gbc.setState(0xdad5, 0x2b14, 0x9880, 0x501d, 0x1b73, 0x4c5, 0x1, 0x0);
        gbc.writeMem(0xdad5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2b14);
        EXPECT(gbc.pc(), 0xdad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad5), 0x39);
        // 39 0273
        gbc.setState(0x849e, 0xe56d, 0x3fd0, 0xc51c, 0x35c4, 0xe6f1, 0x0, 0x1);
        gbc.writeMem(0x849e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe56d);
        EXPECT(gbc.pc(), 0x849f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x849e), 0x39);
        // 39 0274
        gbc.setState(0x3e4e, 0xebbc, 0xcca0, 0xf203, 0xb2f6, 0x556, 0x1, 0x0);
        gbc.writeMem(0x3e4e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xebbc);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0276
        gbc.setState(0x84a9, 0xac61, 0x2790, 0x1cf6, 0x9492, 0x2daf, 0x1, 0x1);
        gbc.writeMem(0x84a9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xac61);
        EXPECT(gbc.pc(), 0x84aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a9), 0x39);
        // 39 0277
        gbc.setState(0x93be, 0xe025, 0x4740, 0x414d, 0xf2e6, 0xd3cd, 0x0, 0x1);
        gbc.writeMem(0x93be, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe025);
        EXPECT(gbc.pc(), 0x93bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93be), 0x39);
        // 39 0278
        gbc.setState(0x12de, 0x30b, 0x9f50, 0xd2c1, 0xd995, 0x2a83, 0x0, 0x1);
        gbc.writeMem(0x12de, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x30b);
        EXPECT(gbc.pc(), 0x12df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0279
        gbc.setState(0xbd81, 0x8187, 0x1140, 0xa16c, 0xf207, 0xa5fa, 0x0, 0x0);
        gbc.writeMem(0xbd81, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8187);
        EXPECT(gbc.pc(), 0xbd82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd81), 0x39);
        // 39 027A
        gbc.setState(0xac89, 0x3461, 0xd190, 0xcc8e, 0x639a, 0xfd1b, 0x0, 0x0);
        gbc.writeMem(0xac89, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3461);
        EXPECT(gbc.pc(), 0xac8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac89), 0x39);
        // 39 027B
        gbc.setState(0x734f, 0xb4d4, 0xa2a0, 0x80ae, 0x570f, 0xeea2, 0x0, 0x0);
        gbc.writeMem(0x734f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb4d4);
        EXPECT(gbc.pc(), 0x7350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 027C
        gbc.setState(0x591e, 0xca11, 0x5340, 0xe20f, 0x9506, 0x4095, 0x0, 0x0);
        gbc.writeMem(0x591e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xca11);
        EXPECT(gbc.pc(), 0x591f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 027E
        gbc.setState(0xcc2f, 0xd765, 0x3f90, 0x61c6, 0xac2, 0x6eb, 0x1, 0x1);
        gbc.writeMem(0xcc2f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd765);
        EXPECT(gbc.pc(), 0xcc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2f), 0x39);
        // 39 027F
        gbc.setState(0x65b0, 0x9d9b, 0x8d40, 0xf514, 0x2bfa, 0xc324, 0x0, 0x0);
        gbc.writeMem(0x65b0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9d9b);
        EXPECT(gbc.pc(), 0x65b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0280
        gbc.setState(0x7b0f, 0xa3b, 0x8920, 0x2d2b, 0xf736, 0x97d9, 0x0, 0x0);
        gbc.writeMem(0x7b0f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa3b);
        EXPECT(gbc.pc(), 0x7b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0281
        gbc.setState(0x32e0, 0x2d29, 0x700, 0x9a86, 0x29d, 0xf58, 0x1, 0x0);
        gbc.writeMem(0x32e0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2d29);
        EXPECT(gbc.pc(), 0x32e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0282
        gbc.setState(0x5a33, 0xe6d6, 0x32a0, 0x46ff, 0xb7f0, 0xe29a, 0x1, 0x0);
        gbc.writeMem(0x5a33, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe6d6);
        EXPECT(gbc.pc(), 0x5a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0283
        gbc.setState(0xe6f9, 0xb63b, 0x7f60, 0xf468, 0x26a2, 0x566, 0x1, 0x1);
        gbc.writeMem(0xe6f9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb63b);
        EXPECT(gbc.pc(), 0xe6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f9), 0x39);
        // 39 0284
        gbc.setState(0x44c1, 0x707, 0x7d60, 0xc740, 0xc46a, 0x26ae, 0x1, 0x1);
        gbc.writeMem(0x44c1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x707);
        EXPECT(gbc.pc(), 0x44c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0285
        gbc.setState(0xad07, 0xdd9d, 0x940, 0x2e32, 0x1b91, 0xedd3, 0x0, 0x1);
        gbc.writeMem(0xad07, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xdd9d);
        EXPECT(gbc.pc(), 0xad08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad07), 0x39);
        // 39 0286
        gbc.setState(0xd830, 0xb4d1, 0x2fe0, 0x9656, 0xd9fb, 0xc017, 0x1, 0x0);
        gbc.writeMem(0xd830, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb4d1);
        EXPECT(gbc.pc(), 0xd831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd830), 0x39);
        // 39 0287
        gbc.setState(0x7a6b, 0x6204, 0x1290, 0x512c, 0x18c8, 0xa68c, 0x0, 0x0);
        gbc.writeMem(0x7a6b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6204);
        EXPECT(gbc.pc(), 0x7a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0288
        gbc.setState(0x2cbc, 0xe8bb, 0x3fb0, 0x939d, 0x926a, 0xd2c3, 0x1, 0x1);
        gbc.writeMem(0x2cbc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe8bb);
        EXPECT(gbc.pc(), 0x2cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0289
        gbc.setState(0x7703, 0x636b, 0xd5d0, 0xb049, 0x1319, 0xe65a, 0x0, 0x0);
        gbc.writeMem(0x7703, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x636b);
        EXPECT(gbc.pc(), 0x7704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 028A
        gbc.setState(0x5d93, 0x936e, 0xb790, 0xf51, 0x56b3, 0xfe6d, 0x0, 0x1);
        gbc.writeMem(0x5d93, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x936e);
        EXPECT(gbc.pc(), 0x5d94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 028B
        gbc.setState(0xc7b7, 0x33b2, 0x4330, 0xb7ac, 0xdf3d, 0x860c, 0x0, 0x1);
        gbc.writeMem(0xc7b7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x33b2);
        EXPECT(gbc.pc(), 0xc7b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b7), 0x39);
        // 39 028C
        gbc.setState(0xb52e, 0x41d7, 0xe4a0, 0xafeb, 0x27d2, 0xcc1e, 0x1, 0x0);
        gbc.writeMem(0xb52e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x41d7);
        EXPECT(gbc.pc(), 0xb52f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52e), 0x39);
        // 39 028D
        gbc.setState(0xcb1a, 0xb59, 0x3080, 0x7ed, 0xe4bb, 0xece1, 0x0, 0x1);
        gbc.writeMem(0xcb1a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb59);
        EXPECT(gbc.pc(), 0xcb1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb1a), 0x39);
        // 39 028E
        gbc.setState(0xe6d4, 0xd8b9, 0x70a0, 0xcf4f, 0xdbd7, 0x8a35, 0x0, 0x0);
        gbc.writeMem(0xe6d4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd8b9);
        EXPECT(gbc.pc(), 0xe6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d4), 0x39);
        // 39 028F
        gbc.setState(0x40ba, 0x8e8c, 0x1f50, 0x143b, 0x9e27, 0xd558, 0x0, 0x1);
        gbc.writeMem(0x40ba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8e8c);
        EXPECT(gbc.pc(), 0x40bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0290
        gbc.setState(0x7d96, 0x9d0c, 0x9080, 0x7294, 0xea89, 0x4a86, 0x1, 0x0);
        gbc.writeMem(0x7d96, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9d0c);
        EXPECT(gbc.pc(), 0x7d97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0291
        gbc.setState(0xd972, 0xc2d8, 0x6110, 0x9474, 0x10cd, 0x7f00, 0x0, 0x1);
        gbc.writeMem(0xd972, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc2d8);
        EXPECT(gbc.pc(), 0xd973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd972), 0x39);
        // 39 0292
        gbc.setState(0xbbc3, 0xc1f8, 0xc640, 0xfcd6, 0x6972, 0x641c, 0x0, 0x0);
        gbc.writeMem(0xbbc3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc1f8);
        EXPECT(gbc.pc(), 0xbbc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc3), 0x39);
        // 39 0293
        gbc.setState(0xeaba, 0x7c57, 0x7990, 0x40d3, 0x24d9, 0xb3c6, 0x1, 0x1);
        gbc.writeMem(0xeaba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7c57);
        EXPECT(gbc.pc(), 0xeabb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaba), 0x39);
        // 39 0294
        gbc.setState(0x66e8, 0x9b65, 0x12b0, 0x5ac6, 0xc646, 0xb6b4, 0x1, 0x1);
        gbc.writeMem(0x66e8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9b65);
        EXPECT(gbc.pc(), 0x66e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0296
        gbc.setState(0x4e79, 0x65a5, 0x9d10, 0x5c12, 0xe9a0, 0xd80f, 0x1, 0x1);
        gbc.writeMem(0x4e79, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x65a5);
        EXPECT(gbc.pc(), 0x4e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0297
        gbc.setState(0x7ecf, 0x99b0, 0x6ae0, 0x7bef, 0xd984, 0x356a, 0x0, 0x1);
        gbc.writeMem(0x7ecf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x99b0);
        EXPECT(gbc.pc(), 0x7ed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0298
        gbc.setState(0x6821, 0x52a3, 0x99a0, 0xf8d9, 0x1390, 0xe4f2, 0x0, 0x0);
        gbc.writeMem(0x6821, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x52a3);
        EXPECT(gbc.pc(), 0x6822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0299
        gbc.setState(0x5b23, 0xc807, 0x9bb0, 0xa9b6, 0x3ba3, 0x29d2, 0x0, 0x0);
        gbc.writeMem(0x5b23, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc807);
        EXPECT(gbc.pc(), 0x5b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 029A
        gbc.setState(0x5a0b, 0xd312, 0xb8e0, 0x92e, 0x7e87, 0x3f25, 0x0, 0x0);
        gbc.writeMem(0x5a0b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd312);
        EXPECT(gbc.pc(), 0x5a0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 029B
        gbc.setState(0x98c4, 0x1f45, 0xcb60, 0x3cfc, 0x39c2, 0x469d, 0x1, 0x0);
        gbc.writeMem(0x98c4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1f45);
        EXPECT(gbc.pc(), 0x98c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c4), 0x39);
        // 39 029C
        gbc.setState(0xc506, 0xb7ad, 0xf770, 0xa619, 0x6c21, 0x7708, 0x1, 0x0);
        gbc.writeMem(0xc506, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb7ad);
        EXPECT(gbc.pc(), 0xc507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc506), 0x39);
        // 39 029D
        gbc.setState(0xb35d, 0x4f03, 0x8c60, 0xeaf, 0xf979, 0x5513, 0x1, 0x1);
        gbc.writeMem(0xb35d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4f03);
        EXPECT(gbc.pc(), 0xb35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb35d), 0x39);
        // 39 029E
        gbc.setState(0x6dca, 0x7816, 0xdd60, 0xdb84, 0x6fce, 0xc197, 0x0, 0x1);
        gbc.writeMem(0x6dca, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7816);
        EXPECT(gbc.pc(), 0x6dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02A0
        gbc.setState(0xd06b, 0xa499, 0xe360, 0x4b28, 0x90f2, 0xac7c, 0x1, 0x1);
        gbc.writeMem(0xd06b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa499);
        EXPECT(gbc.pc(), 0xd06c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd06b), 0x39);
        // 39 02A3
        gbc.setState(0xbfd0, 0x489c, 0x970, 0x44f, 0xe854, 0x4bae, 0x1, 0x0);
        gbc.writeMem(0xbfd0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x489c);
        EXPECT(gbc.pc(), 0xbfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd0), 0x39);
        // 39 02A4
        gbc.setState(0x51ab, 0xdb28, 0x94a0, 0x759e, 0x6c02, 0xfb36, 0x0, 0x0);
        gbc.writeMem(0x51ab, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xdb28);
        EXPECT(gbc.pc(), 0x51ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02A5
        gbc.setState(0x1e5a, 0x700c, 0x97e0, 0xc781, 0xa378, 0xd970, 0x0, 0x0);
        gbc.writeMem(0x1e5a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x700c);
        EXPECT(gbc.pc(), 0x1e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02A6
        gbc.setState(0x4758, 0xe5f4, 0x1620, 0xc865, 0x2fad, 0x643, 0x0, 0x1);
        gbc.writeMem(0x4758, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe5f4);
        EXPECT(gbc.pc(), 0x4759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02A7
        gbc.setState(0xbb12, 0xbc66, 0xc3d0, 0xa935, 0x6d97, 0xccb5, 0x0, 0x0);
        gbc.writeMem(0xbb12, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbc66);
        EXPECT(gbc.pc(), 0xbb13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb12), 0x39);
        // 39 02A9
        gbc.setState(0xdf1a, 0xc029, 0xad10, 0x1d71, 0x493f, 0x729b, 0x0, 0x1);
        gbc.writeMem(0xdf1a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc029);
        EXPECT(gbc.pc(), 0xdf1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf1a), 0x39);
        // 39 02AA
        gbc.setState(0x43d5, 0x1f96, 0xae60, 0xd960, 0xe9fd, 0x6228, 0x1, 0x1);
        gbc.writeMem(0x43d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1f96);
        EXPECT(gbc.pc(), 0x43d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 02AB
        gbc.setState(0x36a0, 0x4a98, 0x32f0, 0x60ce, 0xdde1, 0xeba, 0x1, 0x0);
        gbc.writeMem(0x36a0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4a98);
        EXPECT(gbc.pc(), 0x36a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 02AC
        gbc.setState(0x49d4, 0x1471, 0x4e70, 0x5e5, 0xb10b, 0x873, 0x1, 0x0);
        gbc.writeMem(0x49d4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1471);
        EXPECT(gbc.pc(), 0x49d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02AD
        gbc.setState(0x6cd6, 0xdffd, 0x98f0, 0x8458, 0x88a1, 0x4d49, 0x0, 0x0);
        gbc.writeMem(0x6cd6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdffd);
        EXPECT(gbc.pc(), 0x6cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02AE
        gbc.setState(0x1968, 0xd63f, 0x150, 0x2736, 0x56cb, 0x99d4, 0x0, 0x1);
        gbc.writeMem(0x1968, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd63f);
        EXPECT(gbc.pc(), 0x1969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02AF
        gbc.setState(0xd568, 0xe7a5, 0xed90, 0xfc2c, 0x6121, 0x199, 0x1, 0x0);
        gbc.writeMem(0xd568, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe7a5);
        EXPECT(gbc.pc(), 0xd569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd568), 0x39);
        // 39 02B0
        gbc.setState(0xc4cf, 0xc8b8, 0x3fb0, 0x6300, 0x565a, 0x8906, 0x0, 0x0);
        gbc.writeMem(0xc4cf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc8b8);
        EXPECT(gbc.pc(), 0xc4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4cf), 0x39);
        // 39 02B1
        gbc.setState(0x2abc, 0x148d, 0x43f0, 0x525e, 0x3fca, 0x613b, 0x0, 0x0);
        gbc.writeMem(0x2abc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x148d);
        EXPECT(gbc.pc(), 0x2abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02B2
        gbc.setState(0x4112, 0xb403, 0xe3b0, 0x8a7e, 0x232f, 0x6f86, 0x1, 0x1);
        gbc.writeMem(0x4112, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb403);
        EXPECT(gbc.pc(), 0x4113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02B3
        gbc.setState(0x913e, 0x92b7, 0x7d40, 0x3cb8, 0xdc2e, 0xca9f, 0x0, 0x0);
        gbc.writeMem(0x913e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x92b7);
        EXPECT(gbc.pc(), 0x913f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x913e), 0x39);
        // 39 02B4
        gbc.setState(0x8ea1, 0x58, 0xf00, 0x5901, 0xe5b4, 0x7af0, 0x0, 0x1);
        gbc.writeMem(0x8ea1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x58);
        EXPECT(gbc.pc(), 0x8ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea1), 0x39);
        // 39 02B5
        gbc.setState(0xa9db, 0x9964, 0x8910, 0x2bde, 0x4a5a, 0x3bfc, 0x1, 0x1);
        gbc.writeMem(0xa9db, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9964);
        EXPECT(gbc.pc(), 0xa9dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9db), 0x39);
        // 39 02B6
        gbc.setState(0x9ec9, 0xa047, 0x11d0, 0xfb6d, 0xbb2a, 0x8b83, 0x1, 0x1);
        gbc.writeMem(0x9ec9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa047);
        EXPECT(gbc.pc(), 0x9eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ec9), 0x39);
        // 39 02B7
        gbc.setState(0xbad6, 0xcc84, 0x2780, 0xf6ca, 0x887, 0x4f5b, 0x1, 0x0);
        gbc.writeMem(0xbad6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcc84);
        EXPECT(gbc.pc(), 0xbad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad6), 0x39);
        // 39 02B8
        gbc.setState(0x8648, 0x9127, 0xd290, 0x8dce, 0xe44b, 0x77d5, 0x0, 0x1);
        gbc.writeMem(0x8648, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9127);
        EXPECT(gbc.pc(), 0x8649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8648), 0x39);
        // 39 02B9
        gbc.setState(0xa29a, 0x6855, 0x5680, 0x1966, 0x86f5, 0x15ac, 0x1, 0x1);
        gbc.writeMem(0xa29a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6855);
        EXPECT(gbc.pc(), 0xa29b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa29a), 0x39);
        // 39 02BA
        gbc.setState(0x9130, 0x495c, 0xc40, 0xf9be, 0xcd31, 0xd8a5, 0x0, 0x1);
        gbc.writeMem(0x9130, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x495c);
        EXPECT(gbc.pc(), 0x9131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9130), 0x39);
        // 39 02BB
        gbc.setState(0x7836, 0xdc79, 0x59f0, 0xf641, 0xc475, 0x91dd, 0x0, 0x1);
        gbc.writeMem(0x7836, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdc79);
        EXPECT(gbc.pc(), 0x7837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02BC
        gbc.setState(0xae8e, 0xc282, 0x73f0, 0x7712, 0x8f2b, 0xb0d2, 0x1, 0x0);
        gbc.writeMem(0xae8e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc282);
        EXPECT(gbc.pc(), 0xae8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8e), 0x39);
        // 39 02BD
        gbc.setState(0x3c96, 0xf201, 0x7ca0, 0x8230, 0x138f, 0x299f, 0x0, 0x1);
        gbc.writeMem(0x3c96, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf201);
        EXPECT(gbc.pc(), 0x3c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02BE
        gbc.setState(0xbc8d, 0x91e8, 0x8d30, 0x578d, 0xc44e, 0xfe4e, 0x1, 0x1);
        gbc.writeMem(0xbc8d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x91e8);
        EXPECT(gbc.pc(), 0xbc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8d), 0x39);
        // 39 02BF
        gbc.setState(0x5dda, 0x49ee, 0xf910, 0xd374, 0x58a6, 0xc6a6, 0x0, 0x0);
        gbc.writeMem(0x5dda, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x49ee);
        EXPECT(gbc.pc(), 0x5ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02C0
        gbc.setState(0x6529, 0x1c76, 0x4f70, 0xf43, 0x4f3a, 0x8c3d, 0x0, 0x0);
        gbc.writeMem(0x6529, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1c76);
        EXPECT(gbc.pc(), 0x652a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 02C1
        gbc.setState(0x46dd, 0xb03, 0x1b50, 0x359d, 0x56b8, 0xd606, 0x0, 0x1);
        gbc.writeMem(0x46dd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb03);
        EXPECT(gbc.pc(), 0x46de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 02C2
        gbc.setState(0x98a8, 0x535d, 0xfda0, 0x2849, 0x6999, 0xe1af, 0x0, 0x1);
        gbc.writeMem(0x98a8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x535d);
        EXPECT(gbc.pc(), 0x98a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98a8), 0x39);
        // 39 02C3
        gbc.setState(0x9b60, 0xeec, 0x4970, 0xbe8f, 0xb43f, 0x9b01, 0x0, 0x1);
        gbc.writeMem(0x9b60, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xeec);
        EXPECT(gbc.pc(), 0x9b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b60), 0x39);
        // 39 02C4
        gbc.setState(0x568b, 0x54d1, 0xdb0, 0xdd8f, 0x2965, 0x892e, 0x1, 0x1);
        gbc.writeMem(0x568b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x54d1);
        EXPECT(gbc.pc(), 0x568c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02C6
        gbc.setState(0xfe7, 0xbfbf, 0x9da0, 0x109e, 0x3103, 0x5dd1, 0x1, 0x1);
        gbc.writeMem(0xfe7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xbfbf);
        EXPECT(gbc.pc(), 0xfe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02C7
        gbc.setState(0xb32d, 0x2d91, 0x9500, 0xa75, 0x9677, 0xf07d, 0x0, 0x1);
        gbc.writeMem(0xb32d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2d91);
        EXPECT(gbc.pc(), 0xb32e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb32d), 0x39);
        // 39 02C8
        gbc.setState(0xc3f8, 0x97c8, 0x3dc0, 0xfe8, 0x96bb, 0x95e3, 0x1, 0x0);
        gbc.writeMem(0xc3f8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x97c8);
        EXPECT(gbc.pc(), 0xc3f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3f8), 0x39);
        // 39 02C9
        gbc.setState(0x644, 0xbc71, 0x95c0, 0xa346, 0xb5fe, 0x11b6, 0x1, 0x0);
        gbc.writeMem(0x644, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbc71);
        EXPECT(gbc.pc(), 0x645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02CA
        gbc.setState(0xc469, 0xc035, 0x1980, 0x6728, 0xbd9f, 0x633c, 0x0, 0x0);
        gbc.writeMem(0xc469, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc035);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc469), 0x39);
        // 39 02CB
        gbc.setState(0x1211, 0x8f51, 0x93f0, 0x590b, 0x2e1e, 0xd4c0, 0x0, 0x1);
        gbc.writeMem(0x1211, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8f51);
        EXPECT(gbc.pc(), 0x1212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02CC
        gbc.setState(0xeabf, 0xf58b, 0x6430, 0x4bb2, 0xb1e8, 0x542f, 0x1, 0x1);
        gbc.writeMem(0xeabf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf58b);
        EXPECT(gbc.pc(), 0xeac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeabf), 0x39);
        // 39 02CD
        gbc.setState(0xa402, 0xb943, 0xc830, 0x7443, 0xe790, 0x16d, 0x1, 0x0);
        gbc.writeMem(0xa402, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb943);
        EXPECT(gbc.pc(), 0xa403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa402), 0x39);
        // 39 02CE
        gbc.setState(0x3537, 0x6a94, 0x1b70, 0x42a9, 0xc385, 0xdf31, 0x1, 0x0);
        gbc.writeMem(0x3537, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6a94);
        EXPECT(gbc.pc(), 0x3538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02D0
        gbc.setState(0x1bec, 0xd005, 0x68b0, 0xa863, 0xdd47, 0x1a8a, 0x1, 0x0);
        gbc.writeMem(0x1bec, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd005);
        EXPECT(gbc.pc(), 0x1bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02D1
        gbc.setState(0xe99c, 0xe17e, 0xcc80, 0xdc42, 0xbc99, 0x9d4d, 0x0, 0x0);
        gbc.writeMem(0xe99c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe17e);
        EXPECT(gbc.pc(), 0xe99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe99c), 0x39);
        // 39 02D2
        gbc.setState(0x1189, 0xb5a2, 0x4bb0, 0x5d09, 0xdea9, 0x6ccd, 0x0, 0x1);
        gbc.writeMem(0x1189, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb5a2);
        EXPECT(gbc.pc(), 0x118a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02D3
        gbc.setState(0x63b3, 0x1d32, 0x59c0, 0x63fb, 0x1f82, 0x129, 0x0, 0x0);
        gbc.writeMem(0x63b3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1d32);
        EXPECT(gbc.pc(), 0x63b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02D4
        gbc.setState(0x176f, 0xe058, 0x86f0, 0xf94b, 0xb52a, 0xecb1, 0x1, 0x0);
        gbc.writeMem(0x176f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe058);
        EXPECT(gbc.pc(), 0x1770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02D5
        gbc.setState(0x531, 0xdbd3, 0x7560, 0x54f9, 0x1a44, 0xacf5, 0x0, 0x1);
        gbc.writeMem(0x531, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdbd3);
        EXPECT(gbc.pc(), 0x532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02D6
        gbc.setState(0x992, 0xad28, 0xee10, 0xdf22, 0x9153, 0x7dee, 0x1, 0x0);
        gbc.writeMem(0x992, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xad28);
        EXPECT(gbc.pc(), 0x993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02D7
        gbc.setState(0x7f59, 0x88ea, 0xab40, 0x2dff, 0x3b7, 0x7c3d, 0x0, 0x1);
        gbc.writeMem(0x7f59, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x88ea);
        EXPECT(gbc.pc(), 0x7f5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02D8
        gbc.setState(0xce49, 0xe179, 0xd5e0, 0xf559, 0xd34c, 0x6c06, 0x0, 0x0);
        gbc.writeMem(0xce49, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe179);
        EXPECT(gbc.pc(), 0xce4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce49), 0x39);
        // 39 02D9
        gbc.setState(0x4def, 0xcc86, 0x7b90, 0xc350, 0xcd7c, 0xc15c, 0x0, 0x1);
        gbc.writeMem(0x4def, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0x4df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02DA
        gbc.setState(0x8c97, 0x4281, 0x93a0, 0xb115, 0xac71, 0x111, 0x0, 0x0);
        gbc.writeMem(0x8c97, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4281);
        EXPECT(gbc.pc(), 0x8c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c97), 0x39);
        // 39 02DB
        gbc.setState(0xb2d1, 0x371f, 0xd390, 0xf1aa, 0xb743, 0x56e7, 0x0, 0x0);
        gbc.writeMem(0xb2d1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x371f);
        EXPECT(gbc.pc(), 0xb2d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d1), 0x39);
        // 39 02DC
        gbc.setState(0x9845, 0xf39d, 0xf920, 0xf1e, 0xf07, 0x3ddb, 0x0, 0x0);
        gbc.writeMem(0x9845, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf39d);
        EXPECT(gbc.pc(), 0x9846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9845), 0x39);
        // 39 02DD
        gbc.setState(0x2a24, 0x79b0, 0x2e20, 0x43dc, 0xd13b, 0xb6db, 0x1, 0x1);
        gbc.writeMem(0x2a24, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x79b0);
        EXPECT(gbc.pc(), 0x2a25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02DF
        gbc.setState(0xf38, 0x8791, 0xc860, 0xe1e6, 0xc388, 0x79dd, 0x0, 0x1);
        gbc.writeMem(0xf38, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8791);
        EXPECT(gbc.pc(), 0xf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02E0
        gbc.setState(0xc8fe, 0x998a, 0x6bf0, 0x6f00, 0x3623, 0xd29c, 0x0, 0x0);
        gbc.writeMem(0xc8fe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x998a);
        EXPECT(gbc.pc(), 0xc8ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fe), 0x39);
        // 39 02E1
        gbc.setState(0x4f0d, 0xa9b4, 0xc090, 0xfa2b, 0x2878, 0xae72, 0x0, 0x1);
        gbc.writeMem(0x4f0d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa9b4);
        EXPECT(gbc.pc(), 0x4f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02E2
        gbc.setState(0x6a7c, 0x70f8, 0xb890, 0xb456, 0xce, 0xa705, 0x0, 0x1);
        gbc.writeMem(0x6a7c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x70f8);
        EXPECT(gbc.pc(), 0x6a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02E3
        gbc.setState(0xdefe, 0xe716, 0xf6d0, 0xcd, 0xaf28, 0xe7f1, 0x1, 0x0);
        gbc.writeMem(0xdefe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe716);
        EXPECT(gbc.pc(), 0xdeff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdefe), 0x39);
        // 39 02E4
        gbc.setState(0xbfb8, 0x3119, 0xf7a0, 0x5efc, 0xebd9, 0x8b40, 0x1, 0x0);
        gbc.writeMem(0xbfb8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3119);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb8), 0x39);
        // 39 02E5
        gbc.setState(0x9af2, 0xc255, 0x64c0, 0xd812, 0x7ccb, 0x2ec4, 0x1, 0x0);
        gbc.writeMem(0x9af2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc255);
        EXPECT(gbc.pc(), 0x9af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af2), 0x39);
        // 39 02E6
        gbc.setState(0x64d8, 0x5497, 0x5530, 0x939, 0xaccb, 0xc62a, 0x0, 0x1);
        gbc.writeMem(0x64d8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5497);
        EXPECT(gbc.pc(), 0x64d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02E7
        gbc.setState(0x1073, 0x5fe2, 0x5080, 0x1f9, 0x663f, 0xd57c, 0x1, 0x1);
        gbc.writeMem(0x1073, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5fe2);
        EXPECT(gbc.pc(), 0x1074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02E8
        gbc.setState(0x2775, 0xa1bc, 0xb3f0, 0x812e, 0x7e0f, 0x53ef, 0x0, 0x0);
        gbc.writeMem(0x2775, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa1bc);
        EXPECT(gbc.pc(), 0x2776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 02E9
        gbc.setState(0x4834, 0xb792, 0xa5a0, 0x8664, 0xd5dd, 0x4e3c, 0x0, 0x1);
        gbc.writeMem(0x4834, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb792);
        EXPECT(gbc.pc(), 0x4835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02EA
        gbc.setState(0xb428, 0x2de7, 0xb670, 0x7b7e, 0xf97a, 0x7f17, 0x1, 0x0);
        gbc.writeMem(0xb428, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2de7);
        EXPECT(gbc.pc(), 0xb429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb428), 0x39);
        // 39 02EB
        gbc.setState(0xdf73, 0x7aa3, 0xe50, 0xc12f, 0xeb6a, 0xd0e3, 0x1, 0x1);
        gbc.writeMem(0xdf73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7aa3);
        EXPECT(gbc.pc(), 0xdf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf73), 0x39);
        // 39 02EC
        gbc.setState(0x2356, 0xb416, 0xf2f0, 0x93fe, 0x828c, 0x9c36, 0x1, 0x0);
        gbc.writeMem(0x2356, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb416);
        EXPECT(gbc.pc(), 0x2357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02ED
        gbc.setState(0xe2ec, 0x6a86, 0x2660, 0xd507, 0x6a, 0xc432, 0x0, 0x0);
        gbc.writeMem(0xe2ec, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6a86);
        EXPECT(gbc.pc(), 0xe2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ec), 0x39);
        // 39 02EE
        gbc.setState(0x36cb, 0xaca6, 0xcc60, 0xa60, 0x5d93, 0xab5d, 0x1, 0x0);
        gbc.writeMem(0x36cb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xaca6);
        EXPECT(gbc.pc(), 0x36cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02EF
        gbc.setState(0x8afe, 0x9af3, 0xbd60, 0xef0d, 0x19bb, 0x8a94, 0x0, 0x1);
        gbc.writeMem(0x8afe, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9af3);
        EXPECT(gbc.pc(), 0x8aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afe), 0x39);
        // 39 02F0
        gbc.setState(0x8292, 0x61a7, 0x3030, 0x4e2c, 0x33f4, 0x6594, 0x0, 0x1);
        gbc.writeMem(0x8292, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x61a7);
        EXPECT(gbc.pc(), 0x8293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8292), 0x39);
        // 39 02F1
        gbc.setState(0x14ad, 0xfcb9, 0x5910, 0x3b24, 0x8e6f, 0x9a2d, 0x0, 0x1);
        gbc.writeMem(0x14ad, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfcb9);
        EXPECT(gbc.pc(), 0x14ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02F2
        gbc.setState(0x3cfb, 0x731d, 0x7600, 0xe76b, 0xb6a4, 0xcd7b, 0x0, 0x1);
        gbc.writeMem(0x3cfb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x731d);
        EXPECT(gbc.pc(), 0x3cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02F3
        gbc.setState(0xa1aa, 0xfa26, 0x5b80, 0xe6ee, 0x363f, 0x3abd, 0x0, 0x0);
        gbc.writeMem(0xa1aa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfa26);
        EXPECT(gbc.pc(), 0xa1ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1aa), 0x39);
        // 39 02F4
        gbc.setState(0x5213, 0xbd43, 0xb330, 0x6ee1, 0x1b38, 0xf724, 0x1, 0x0);
        gbc.writeMem(0x5213, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbd43);
        EXPECT(gbc.pc(), 0x5214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02F5
        gbc.setState(0x3450, 0x4c7b, 0x3820, 0xce1f, 0x33f, 0x4bb2, 0x0, 0x1);
        gbc.writeMem(0x3450, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4c7b);
        EXPECT(gbc.pc(), 0x3451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 02F6
        gbc.setState(0x7ea7, 0xbf54, 0xe520, 0xf26a, 0x4938, 0xd8c5, 0x0, 0x1);
        gbc.writeMem(0x7ea7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbf54);
        EXPECT(gbc.pc(), 0x7ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02F7
        gbc.setState(0xc304, 0x85ce, 0x6070, 0x286c, 0xde4e, 0x8b6a, 0x1, 0x1);
        gbc.writeMem(0xc304, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x85ce);
        EXPECT(gbc.pc(), 0xc305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc304), 0x39);
        // 39 02F8
        gbc.setState(0x96f1, 0x4215, 0x14d0, 0x7964, 0x9908, 0xa25b, 0x0, 0x0);
        gbc.writeMem(0x96f1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4215);
        EXPECT(gbc.pc(), 0x96f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f1), 0x39);
        // 39 02F9
        gbc.setState(0x3105, 0xe3c0, 0x6560, 0x6a37, 0x1dac, 0xe8d5, 0x1, 0x0);
        gbc.writeMem(0x3105, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe3c0);
        EXPECT(gbc.pc(), 0x3106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02FA
        gbc.setState(0xb32a, 0x5cfb, 0xef60, 0x39f3, 0x3914, 0x290, 0x0, 0x0);
        gbc.writeMem(0xb32a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5cfb);
        EXPECT(gbc.pc(), 0xb32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32a), 0x39);
        // 39 02FB
        gbc.setState(0x23a9, 0xc4a1, 0xf5d0, 0x9893, 0xc5bc, 0x487d, 0x0, 0x1);
        gbc.writeMem(0x23a9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc4a1);
        EXPECT(gbc.pc(), 0x23aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 02FC
        gbc.setState(0xbfda, 0x9035, 0x49e0, 0x9f2d, 0x6160, 0x6af6, 0x0, 0x0);
        gbc.writeMem(0xbfda, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9035);
        EXPECT(gbc.pc(), 0xbfdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfda), 0x39);
        // 39 02FD
        gbc.setState(0xd721, 0xb80, 0xe870, 0x6b3, 0xa709, 0x7ea7, 0x1, 0x1);
        gbc.writeMem(0xd721, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb80);
        EXPECT(gbc.pc(), 0xd722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd721), 0x39);
        // 39 02FE
        gbc.setState(0x60bc, 0x9fe6, 0xd950, 0xbb34, 0xbe15, 0x6289, 0x1, 0x1);
        gbc.writeMem(0x60bc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9fe6);
        EXPECT(gbc.pc(), 0x60bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 02FF
        gbc.setState(0xc914, 0x8445, 0x59e0, 0xa152, 0xb90f, 0x6aa2, 0x1, 0x1);
        gbc.writeMem(0xc914, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8445);
        EXPECT(gbc.pc(), 0xc915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc914), 0x39);
        // 39 0300
        gbc.setState(0xebed, 0xc4b8, 0x7680, 0x585c, 0x22a3, 0x4a54, 0x1, 0x0);
        gbc.writeMem(0xebed, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc4b8);
        EXPECT(gbc.pc(), 0xebee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebed), 0x39);
        // 39 0301
        gbc.setState(0xaf78, 0xa6ce, 0x4980, 0x6a90, 0x5827, 0x7ba0, 0x1, 0x1);
        gbc.writeMem(0xaf78, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa6ce);
        EXPECT(gbc.pc(), 0xaf79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf78), 0x39);
        // 39 0302
        gbc.setState(0xdbd8, 0x8568, 0xf080, 0xeeef, 0xeafb, 0x2cb1, 0x1, 0x0);
        gbc.writeMem(0xdbd8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8568);
        EXPECT(gbc.pc(), 0xdbd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd8), 0x39);
        // 39 0303
        gbc.setState(0x8572, 0x7a2a, 0x840, 0xb894, 0x69aa, 0x2d6d, 0x1, 0x1);
        gbc.writeMem(0x8572, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7a2a);
        EXPECT(gbc.pc(), 0x8573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8572), 0x39);
        // 39 0306
        gbc.setState(0xecf1, 0xc939, 0xab0, 0x8985, 0x1005, 0x6ea0, 0x0, 0x1);
        gbc.writeMem(0xecf1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc939);
        EXPECT(gbc.pc(), 0xecf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecf1), 0x39);
        // 39 0307
        gbc.setState(0xae06, 0x9a0c, 0x69f0, 0x6a66, 0xe1e0, 0xf93c, 0x0, 0x0);
        gbc.writeMem(0xae06, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9a0c);
        EXPECT(gbc.pc(), 0xae07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae06), 0x39);
        // 39 0308
        gbc.setState(0x7844, 0xe56b, 0xf280, 0x4918, 0x9312, 0xdc45, 0x1, 0x1);
        gbc.writeMem(0x7844, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe56b);
        EXPECT(gbc.pc(), 0x7845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0309
        gbc.setState(0x1576, 0x19dc, 0xa530, 0x2cc8, 0x7f3a, 0xb5eb, 0x1, 0x0);
        gbc.writeMem(0x1576, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x19dc);
        EXPECT(gbc.pc(), 0x1577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 030A
        gbc.setState(0xe818, 0x6b4b, 0xed20, 0xdf6e, 0x32a1, 0x661b, 0x0, 0x0);
        gbc.writeMem(0xe818, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6b4b);
        EXPECT(gbc.pc(), 0xe819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe818), 0x39);
        // 39 030C
        gbc.setState(0x52bf, 0x66f2, 0x58b0, 0x3fe6, 0xacb2, 0x6bad, 0x1, 0x1);
        gbc.writeMem(0x52bf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x66f2);
        EXPECT(gbc.pc(), 0x52c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 030D
        gbc.setState(0x5116, 0x4db3, 0x7670, 0xf4dc, 0x60cb, 0x43a5, 0x0, 0x0);
        gbc.writeMem(0x5116, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4db3);
        EXPECT(gbc.pc(), 0x5117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 030E
        gbc.setState(0x190, 0xa4ae, 0x1ab0, 0x5e53, 0x9caf, 0x4cbe, 0x1, 0x0);
        gbc.writeMem(0x190, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa4ae);
        EXPECT(gbc.pc(), 0x191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 030F
        gbc.setState(0x1a8a, 0x2ef2, 0x5a40, 0xbeed, 0xf305, 0x97bf, 0x0, 0x0);
        gbc.writeMem(0x1a8a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2ef2);
        EXPECT(gbc.pc(), 0x1a8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0310
        gbc.setState(0x4092, 0x5630, 0xf290, 0x329e, 0xa858, 0xd486, 0x0, 0x1);
        gbc.writeMem(0x4092, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5630);
        EXPECT(gbc.pc(), 0x4093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0311
        gbc.setState(0xe1f8, 0x7972, 0x8140, 0xd522, 0x29d5, 0x6c77, 0x0, 0x0);
        gbc.writeMem(0xe1f8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7972);
        EXPECT(gbc.pc(), 0xe1f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f8), 0x39);
        // 39 0312
        gbc.setState(0x440f, 0x752e, 0x6930, 0x1407, 0x590a, 0xc36c, 0x1, 0x0);
        gbc.writeMem(0x440f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x752e);
        EXPECT(gbc.pc(), 0x4410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0313
        gbc.setState(0x1dea, 0x705, 0x2f50, 0x4338, 0xd21a, 0xca0b, 0x1, 0x0);
        gbc.writeMem(0x1dea, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x705);
        EXPECT(gbc.pc(), 0x1deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0314
        gbc.setState(0x275b, 0x7ed1, 0x8780, 0xb7be, 0xac5f, 0xc95b, 0x0, 0x1);
        gbc.writeMem(0x275b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7ed1);
        EXPECT(gbc.pc(), 0x275c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0315
        gbc.setState(0x8fef, 0x77e3, 0xc3e0, 0x1bc6, 0x5d35, 0x402f, 0x1, 0x0);
        gbc.writeMem(0x8fef, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x77e3);
        EXPECT(gbc.pc(), 0x8ff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fef), 0x39);
        // 39 0316
        gbc.setState(0x967a, 0xe91b, 0xbf40, 0xeaa1, 0xd16e, 0xe782, 0x0, 0x0);
        gbc.writeMem(0x967a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe91b);
        EXPECT(gbc.pc(), 0x967b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x967a), 0x39);
        // 39 0317
        gbc.setState(0x9041, 0xaf46, 0xf8d0, 0x2d39, 0xa58, 0xaab4, 0x0, 0x0);
        gbc.writeMem(0x9041, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xaf46);
        EXPECT(gbc.pc(), 0x9042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9041), 0x39);
        // 39 0318
        gbc.setState(0xc692, 0xecfb, 0x7450, 0x6009, 0xc69c, 0x71ee, 0x1, 0x0);
        gbc.writeMem(0xc692, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xecfb);
        EXPECT(gbc.pc(), 0xc693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc692), 0x39);
        // 39 0319
        gbc.setState(0x2050, 0xbf74, 0x9bd0, 0x16d9, 0x471d, 0xc7b0, 0x0, 0x1);
        gbc.writeMem(0x2050, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbf74);
        EXPECT(gbc.pc(), 0x2051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 031A
        gbc.setState(0x2e32, 0x1fd9, 0x8380, 0xaba, 0xe601, 0xbb11, 0x0, 0x1);
        gbc.writeMem(0x2e32, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1fd9);
        EXPECT(gbc.pc(), 0x2e33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 031B
        gbc.setState(0xc76d, 0x35f2, 0x9870, 0x118, 0x6a58, 0xfc76, 0x1, 0x1);
        gbc.writeMem(0xc76d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x35f2);
        EXPECT(gbc.pc(), 0xc76e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc76d), 0x39);
        // 39 031C
        gbc.setState(0x8a88, 0xd440, 0x2480, 0xbcbf, 0x1255, 0x77d2, 0x0, 0x0);
        gbc.writeMem(0x8a88, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd440);
        EXPECT(gbc.pc(), 0x8a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a88), 0x39);
        // 39 031D
        gbc.setState(0x93d, 0xc3db, 0xa230, 0xe70d, 0x15f8, 0xadbe, 0x0, 0x0);
        gbc.writeMem(0x93d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc3db);
        EXPECT(gbc.pc(), 0x93e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 031E
        gbc.setState(0x51dc, 0xe913, 0x120, 0x109b, 0x53a, 0x65e, 0x0, 0x0);
        gbc.writeMem(0x51dc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe913);
        EXPECT(gbc.pc(), 0x51dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 031F
        gbc.setState(0x7822, 0x2cc8, 0xb4c0, 0x99e1, 0xa0e5, 0x156f, 0x1, 0x0);
        gbc.writeMem(0x7822, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2cc8);
        EXPECT(gbc.pc(), 0x7823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0320
        gbc.setState(0x178d, 0x1d4b, 0x5e30, 0x2c2c, 0xb341, 0x2c9a, 0x1, 0x0);
        gbc.writeMem(0x178d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1d4b);
        EXPECT(gbc.pc(), 0x178e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0321
        gbc.setState(0x66c3, 0xc9b5, 0x7450, 0x470b, 0x5789, 0xf6e7, 0x1, 0x1);
        gbc.writeMem(0x66c3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc9b5);
        EXPECT(gbc.pc(), 0x66c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0322
        gbc.setState(0x32df, 0xf4a8, 0xcda0, 0x7622, 0x1b8e, 0x1688, 0x0, 0x1);
        gbc.writeMem(0x32df, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf4a8);
        EXPECT(gbc.pc(), 0x32e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0324
        gbc.setState(0x4310, 0xeaa0, 0x5cb0, 0x7416, 0x517e, 0xd953, 0x0, 0x1);
        gbc.writeMem(0x4310, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xeaa0);
        EXPECT(gbc.pc(), 0x4311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0325
        gbc.setState(0x6ba, 0xc22f, 0x6220, 0xb79, 0x5728, 0xe42c, 0x0, 0x1);
        gbc.writeMem(0x6ba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc22f);
        EXPECT(gbc.pc(), 0x6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0326
        gbc.setState(0x27c, 0x8ac1, 0x3c50, 0x7c0f, 0x95fd, 0xe273, 0x1, 0x1);
        gbc.writeMem(0x27c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8ac1);
        EXPECT(gbc.pc(), 0x27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0327
        gbc.setState(0xb469, 0x568a, 0xbd60, 0xf90c, 0xe66, 0xee3b, 0x0, 0x1);
        gbc.writeMem(0xb469, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x568a);
        EXPECT(gbc.pc(), 0xb46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb469), 0x39);
        // 39 0328
        gbc.setState(0x2cb9, 0xeef8, 0xbba0, 0x9e13, 0xb779, 0x65a1, 0x0, 0x1);
        gbc.writeMem(0x2cb9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xeef8);
        EXPECT(gbc.pc(), 0x2cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0329
        gbc.setState(0xd46f, 0x10f2, 0x7a10, 0x70af, 0x322b, 0xab09, 0x1, 0x0);
        gbc.writeMem(0xd46f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x10f2);
        EXPECT(gbc.pc(), 0xd470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd46f), 0x39);
        // 39 032A
        gbc.setState(0x1f7e, 0xa8c5, 0xbcb0, 0xae22, 0xa5f9, 0xd6e6, 0x1, 0x1);
        gbc.writeMem(0x1f7e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa8c5);
        EXPECT(gbc.pc(), 0x1f7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 032B
        gbc.setState(0x2be5, 0x1bd1, 0x58a0, 0x2664, 0x946f, 0x1e96, 0x0, 0x1);
        gbc.writeMem(0x2be5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1bd1);
        EXPECT(gbc.pc(), 0x2be6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 032C
        gbc.setState(0x768f, 0x7425, 0xd370, 0x8eb7, 0x4f9c, 0xed57, 0x1, 0x0);
        gbc.writeMem(0x768f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7425);
        EXPECT(gbc.pc(), 0x7690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 032D
        gbc.setState(0x41f0, 0xfe6e, 0xffa0, 0x5314, 0x85d9, 0x793f, 0x1, 0x0);
        gbc.writeMem(0x41f0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfe6e);
        EXPECT(gbc.pc(), 0x41f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 032E
        gbc.setState(0x2bc, 0x6581, 0x8200, 0x7d4, 0x24f, 0xb849, 0x1, 0x0);
        gbc.writeMem(0x2bc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6581);
        EXPECT(gbc.pc(), 0x2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0330
        gbc.setState(0x5453, 0x96db, 0xeaf0, 0x4348, 0xc0d4, 0x2d67, 0x0, 0x0);
        gbc.writeMem(0x5453, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x96db);
        EXPECT(gbc.pc(), 0x5454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0331
        gbc.setState(0x7f9d, 0xa1e6, 0xf1c0, 0xdb71, 0xb4c6, 0x7697, 0x0, 0x0);
        gbc.writeMem(0x7f9d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa1e6);
        EXPECT(gbc.pc(), 0x7f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0332
        gbc.setState(0xb4be, 0xcf2f, 0x6ce0, 0x217, 0xb030, 0xfd1e, 0x0, 0x0);
        gbc.writeMem(0xb4be, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcf2f);
        EXPECT(gbc.pc(), 0xb4bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4be), 0x39);
        // 39 0333
        gbc.setState(0xd87, 0xcebf, 0x8470, 0x9b70, 0x2ebb, 0xa076, 0x0, 0x1);
        gbc.writeMem(0xd87, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcebf);
        EXPECT(gbc.pc(), 0xd88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0334
        gbc.setState(0x8a51, 0x87de, 0x180, 0xe679, 0xb691, 0xd86b, 0x0, 0x0);
        gbc.writeMem(0x8a51, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x87de);
        EXPECT(gbc.pc(), 0x8a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a51), 0x39);
        // 39 0335
        gbc.setState(0x61a8, 0x2eb6, 0x2510, 0xbc3b, 0x113b, 0xe097, 0x1, 0x0);
        gbc.writeMem(0x61a8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2eb6);
        EXPECT(gbc.pc(), 0x61a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0336
        gbc.setState(0xd71d, 0x2ed2, 0x240, 0x6e3, 0xb352, 0x1a17, 0x0, 0x0);
        gbc.writeMem(0xd71d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2ed2);
        EXPECT(gbc.pc(), 0xd71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71d), 0x39);
        // 39 0337
        gbc.setState(0xafe8, 0xf12a, 0x37b0, 0xeffc, 0xa4f0, 0xd1e8, 0x1, 0x0);
        gbc.writeMem(0xafe8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf12a);
        EXPECT(gbc.pc(), 0xafe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafe8), 0x39);
        // 39 0338
        gbc.setState(0x1081, 0x4f39, 0x9da0, 0x793a, 0xaa46, 0xd530, 0x0, 0x0);
        gbc.writeMem(0x1081, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4f39);
        EXPECT(gbc.pc(), 0x1082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0339
        gbc.setState(0xb162, 0xb214, 0xcd80, 0x7a5c, 0x57a4, 0xf905, 0x1, 0x0);
        gbc.writeMem(0xb162, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb214);
        EXPECT(gbc.pc(), 0xb163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb162), 0x39);
        // 39 033A
        gbc.setState(0x7054, 0xdc68, 0x7bd0, 0x1690, 0x2c90, 0x8627, 0x0, 0x0);
        gbc.writeMem(0x7054, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdc68);
        EXPECT(gbc.pc(), 0x7055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 033B
        gbc.setState(0xa9dc, 0x3ac3, 0xfd90, 0x96f6, 0x82f7, 0xcc24, 0x1, 0x0);
        gbc.writeMem(0xa9dc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3ac3);
        EXPECT(gbc.pc(), 0xa9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9dc), 0x39);
        // 39 033C
        gbc.setState(0x6f02, 0x6bd6, 0x3630, 0x849e, 0x1d30, 0xbd86, 0x0, 0x0);
        gbc.writeMem(0x6f02, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6bd6);
        EXPECT(gbc.pc(), 0x6f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 033D
        gbc.setState(0x8928, 0xaa3f, 0xf70, 0x3fc9, 0x2eb0, 0x7b0f, 0x0, 0x0);
        gbc.writeMem(0x8928, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xaa3f);
        EXPECT(gbc.pc(), 0x8929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8928), 0x39);
        // 39 033E
        gbc.setState(0x5da9, 0x45b0, 0x380, 0xcec6, 0x55e2, 0x34cf, 0x0, 0x1);
        gbc.writeMem(0x5da9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x45b0);
        EXPECT(gbc.pc(), 0x5daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 033F
        gbc.setState(0x6b71, 0xd046, 0x5d0, 0x951f, 0xabd9, 0x1467, 0x0, 0x0);
        gbc.writeMem(0x6b71, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd046);
        EXPECT(gbc.pc(), 0x6b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0340
        gbc.setState(0x5fa9, 0x1cfa, 0x5640, 0x1f9b, 0xd7d3, 0xbecb, 0x0, 0x0);
        gbc.writeMem(0x5fa9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1cfa);
        EXPECT(gbc.pc(), 0x5faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0341
        gbc.setState(0xc599, 0xcbdb, 0xc5b0, 0xf0f6, 0x62c5, 0xab96, 0x0, 0x0);
        gbc.writeMem(0xc599, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xcbdb);
        EXPECT(gbc.pc(), 0xc59a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc599), 0x39);
        // 39 0342
        gbc.setState(0x96dd, 0x413d, 0x8590, 0x692b, 0x6bce, 0x2fd7, 0x0, 0x1);
        gbc.writeMem(0x96dd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x413d);
        EXPECT(gbc.pc(), 0x96de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96dd), 0x39);
        // 39 0343
        gbc.setState(0x562b, 0xadb3, 0x7fc0, 0xcd2e, 0xec03, 0x1fe4, 0x1, 0x1);
        gbc.writeMem(0x562b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xadb3);
        EXPECT(gbc.pc(), 0x562c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0344
        gbc.setState(0xb0a4, 0x943a, 0x4010, 0xd2e5, 0x44a0, 0xcd55, 0x1, 0x0);
        gbc.writeMem(0xb0a4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x943a);
        EXPECT(gbc.pc(), 0xb0a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a4), 0x39);
        // 39 0345
        gbc.setState(0xca73, 0x870b, 0xb140, 0x7146, 0x56da, 0x291a, 0x0, 0x0);
        gbc.writeMem(0xca73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x870b);
        EXPECT(gbc.pc(), 0xca74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca73), 0x39);
        // 39 0346
        gbc.setState(0x940e, 0x5cee, 0x6ff0, 0x7fff, 0x4ddd, 0xb40, 0x0, 0x0);
        gbc.writeMem(0x940e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5cee);
        EXPECT(gbc.pc(), 0x940f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x940e), 0x39);
        // 39 0347
        gbc.setState(0x7183, 0x6edb, 0xb10, 0xb72d, 0xdd9a, 0x53f9, 0x1, 0x1);
        gbc.writeMem(0x7183, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6edb);
        EXPECT(gbc.pc(), 0x7184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0348
        gbc.setState(0x3c92, 0x4c79, 0xf450, 0x9652, 0xa76, 0xd48a, 0x1, 0x0);
        gbc.writeMem(0x3c92, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4c79);
        EXPECT(gbc.pc(), 0x3c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0349
        gbc.setState(0x1448, 0xb9e1, 0xe680, 0xcb5b, 0x1482, 0x3f96, 0x1, 0x1);
        gbc.writeMem(0x1448, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb9e1);
        EXPECT(gbc.pc(), 0x1449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 034A
        gbc.setState(0x7683, 0xc31, 0xc3d0, 0xd407, 0xf733, 0x1a53, 0x1, 0x0);
        gbc.writeMem(0x7683, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc31);
        EXPECT(gbc.pc(), 0x7684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 034B
        gbc.setState(0x81ba, 0x851e, 0xdff0, 0x38a6, 0x6e41, 0x629b, 0x0, 0x1);
        gbc.writeMem(0x81ba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x851e);
        EXPECT(gbc.pc(), 0x81bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ba), 0x39);
        // 39 034C
        gbc.setState(0xcaa6, 0xc312, 0xfb70, 0x4566, 0xac45, 0x30de, 0x1, 0x1);
        gbc.writeMem(0xcaa6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc312);
        EXPECT(gbc.pc(), 0xcaa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa6), 0x39);
        // 39 034D
        gbc.setState(0xc694, 0x24dc, 0xe90, 0x64ee, 0x9e33, 0xb4b6, 0x1, 0x0);
        gbc.writeMem(0xc694, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x24dc);
        EXPECT(gbc.pc(), 0xc695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc694), 0x39);
        // 39 034E
        gbc.setState(0x7eca, 0x6395, 0xadc0, 0x68ac, 0xb7ef, 0xd6e, 0x0, 0x0);
        gbc.writeMem(0x7eca, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6395);
        EXPECT(gbc.pc(), 0x7ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 034F
        gbc.setState(0x76cb, 0x5b31, 0xf370, 0xec18, 0xb52a, 0xa13, 0x1, 0x1);
        gbc.writeMem(0x76cb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5b31);
        EXPECT(gbc.pc(), 0x76cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0350
        gbc.setState(0xa3a8, 0xa988, 0xb920, 0xfd0b, 0xd38a, 0xca10, 0x1, 0x1);
        gbc.writeMem(0xa3a8, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa988);
        EXPECT(gbc.pc(), 0xa3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a8), 0x39);
        // 39 0351
        gbc.setState(0x9c25, 0x93f3, 0x9400, 0x5cc, 0x187b, 0x506a, 0x0, 0x0);
        gbc.writeMem(0x9c25, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x93f3);
        EXPECT(gbc.pc(), 0x9c26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c25), 0x39);
        // 39 0352
        gbc.setState(0x46f6, 0x2196, 0xcdf0, 0xe2af, 0x2a29, 0x9be0, 0x0, 0x1);
        gbc.writeMem(0x46f6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2196);
        EXPECT(gbc.pc(), 0x46f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0353
        gbc.setState(0x6a2, 0x2a05, 0xa110, 0x8cd6, 0x4cd0, 0x2733, 0x0, 0x1);
        gbc.writeMem(0x6a2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2a05);
        EXPECT(gbc.pc(), 0x6a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0354
        gbc.setState(0x8c0a, 0x1171, 0x7c60, 0xaa26, 0x58b8, 0x7e26, 0x0, 0x0);
        gbc.writeMem(0x8c0a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1171);
        EXPECT(gbc.pc(), 0x8c0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c0a), 0x39);
        // 39 0355
        gbc.setState(0x8df2, 0x6880, 0x3620, 0xd012, 0x9ac9, 0xca20, 0x0, 0x1);
        gbc.writeMem(0x8df2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6880);
        EXPECT(gbc.pc(), 0x8df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df2), 0x39);
        // 39 0356
        gbc.setState(0x7d57, 0x4fbd, 0x94c0, 0x985a, 0x7345, 0xaab2, 0x1, 0x0);
        gbc.writeMem(0x7d57, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4fbd);
        EXPECT(gbc.pc(), 0x7d58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0357
        gbc.setState(0xa3b3, 0xa793, 0xfef0, 0x88bf, 0xd47, 0x3a7b, 0x0, 0x1);
        gbc.writeMem(0xa3b3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa793);
        EXPECT(gbc.pc(), 0xa3b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b3), 0x39);
        // 39 0358
        gbc.setState(0x6846, 0x4f33, 0x55e0, 0x5862, 0x2ac2, 0x8e30, 0x0, 0x1);
        gbc.writeMem(0x6846, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4f33);
        EXPECT(gbc.pc(), 0x6847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 0359
        gbc.setState(0x9b5b, 0xc5ab, 0x3110, 0xab61, 0x7a0, 0x6c, 0x1, 0x1);
        gbc.writeMem(0x9b5b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc5ab);
        EXPECT(gbc.pc(), 0x9b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5b), 0x39);
        // 39 035A
        gbc.setState(0x15c2, 0xc593, 0xf260, 0x761b, 0xd032, 0xfe20, 0x0, 0x1);
        gbc.writeMem(0x15c2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc593);
        EXPECT(gbc.pc(), 0x15c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 035B
        gbc.setState(0x8e97, 0x37a2, 0x22f0, 0xccf9, 0x3af4, 0xe29e, 0x1, 0x1);
        gbc.writeMem(0x8e97, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x37a2);
        EXPECT(gbc.pc(), 0x8e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e97), 0x39);
        // 39 035C
        gbc.setState(0xcc, 0x8bc0, 0x5f20, 0x2f49, 0xe678, 0x7d08, 0x0, 0x1);
        gbc.writeMem(0xcc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8bc0);
        EXPECT(gbc.pc(), 0xcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 035D
        gbc.setState(0x806c, 0x5ac5, 0xb040, 0xf12b, 0x1ecf, 0xf20b, 0x1, 0x1);
        gbc.writeMem(0x806c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5ac5);
        EXPECT(gbc.pc(), 0x806d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x806c), 0x39);
        // 39 035E
        gbc.setState(0x5781, 0x8e2f, 0x16a0, 0xd857, 0x58d0, 0x1c10, 0x1, 0x0);
        gbc.writeMem(0x5781, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8e2f);
        EXPECT(gbc.pc(), 0x5782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 035F
        gbc.setState(0x971b, 0xe428, 0x5a0, 0x2559, 0x9c00, 0xb4d4, 0x0, 0x0);
        gbc.writeMem(0x971b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe428);
        EXPECT(gbc.pc(), 0x971c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x971b), 0x39);
        // 39 0360
        gbc.setState(0x303d, 0xc22c, 0xc9c0, 0x38f4, 0x2988, 0x4a87, 0x0, 0x1);
        gbc.writeMem(0x303d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc22c);
        EXPECT(gbc.pc(), 0x303e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0361
        gbc.setState(0x9694, 0x8f18, 0xd730, 0xf240, 0x4890, 0xba62, 0x0, 0x0);
        gbc.writeMem(0x9694, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8f18);
        EXPECT(gbc.pc(), 0x9695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9694), 0x39);
        // 39 0362
        gbc.setState(0xc36e, 0x48d6, 0xc260, 0xc2de, 0x6ee6, 0xad84, 0x0, 0x1);
        gbc.writeMem(0xc36e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x48d6);
        EXPECT(gbc.pc(), 0xc36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36e), 0x39);
        // 39 0363
        gbc.setState(0xd743, 0xd6f6, 0x83e0, 0xb7f7, 0x509d, 0x3420, 0x0, 0x1);
        gbc.writeMem(0xd743, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd6f6);
        EXPECT(gbc.pc(), 0xd744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd743), 0x39);
        // 39 0364
        gbc.setState(0x7bef, 0x45a2, 0x27d0, 0xa66, 0x6359, 0x54d8, 0x1, 0x0);
        gbc.writeMem(0x7bef, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x45a2);
        EXPECT(gbc.pc(), 0x7bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0365
        gbc.setState(0x4935, 0x115a, 0x8150, 0x25ff, 0x2a35, 0x9a90, 0x1, 0x0);
        gbc.writeMem(0x4935, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x115a);
        EXPECT(gbc.pc(), 0x4936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0366
        gbc.setState(0xd5ed, 0x39e4, 0xe580, 0x19e8, 0x49c3, 0xceaf, 0x0, 0x1);
        gbc.writeMem(0xd5ed, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x39e4);
        EXPECT(gbc.pc(), 0xd5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ed), 0x39);
        // 39 0367
        gbc.setState(0x3e5, 0x1a6, 0xae90, 0x707d, 0xa6ab, 0x978d, 0x1, 0x0);
        gbc.writeMem(0x3e5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1a6);
        EXPECT(gbc.pc(), 0x3e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0368
        gbc.setState(0x89bf, 0xa494, 0xc440, 0xcec3, 0x704, 0xf4aa, 0x1, 0x0);
        gbc.writeMem(0x89bf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa494);
        EXPECT(gbc.pc(), 0x89c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89bf), 0x39);
        // 39 036A
        gbc.setState(0x1f6, 0xe594, 0x86a0, 0xe93d, 0x4537, 0xd015, 0x1, 0x1);
        gbc.writeMem(0x1f6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe594);
        EXPECT(gbc.pc(), 0x1f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 036C
        gbc.setState(0xe2aa, 0xba75, 0x50b0, 0x1ce5, 0xa8e3, 0x2a2f, 0x1, 0x0);
        gbc.writeMem(0xe2aa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xba75);
        EXPECT(gbc.pc(), 0xe2ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2aa), 0x39);
        // 39 036D
        gbc.setState(0x6e54, 0x8d15, 0x8010, 0xd34c, 0xbe29, 0x931d, 0x0, 0x0);
        gbc.writeMem(0x6e54, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8d15);
        EXPECT(gbc.pc(), 0x6e55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 036E
        gbc.setState(0x26d5, 0xb422, 0xf0, 0x4016, 0x597a, 0x3ad2, 0x1, 0x0);
        gbc.writeMem(0x26d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb422);
        EXPECT(gbc.pc(), 0x26d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 036F
        gbc.setState(0x8b88, 0x4c5, 0x5fe0, 0xa6f0, 0xb573, 0x94a9, 0x1, 0x1);
        gbc.writeMem(0x8b88, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4c5);
        EXPECT(gbc.pc(), 0x8b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b88), 0x39);
        // 39 0370
        gbc.setState(0x6156, 0xf8f3, 0x6a00, 0xa7ac, 0x9622, 0xef97, 0x0, 0x1);
        gbc.writeMem(0x6156, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf8f3);
        EXPECT(gbc.pc(), 0x6157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0372
        gbc.setState(0x497, 0x90b2, 0x2970, 0xab9b, 0xcb75, 0x1529, 0x1, 0x1);
        gbc.writeMem(0x497, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x90b2);
        EXPECT(gbc.pc(), 0x498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0373
        gbc.setState(0xd37e, 0x2397, 0x82b0, 0x1969, 0xb058, 0x9534, 0x0, 0x1);
        gbc.writeMem(0xd37e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2397);
        EXPECT(gbc.pc(), 0xd37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37e), 0x39);
        // 39 0375
        gbc.setState(0x8d7f, 0x14d3, 0xa850, 0xc5e8, 0x84af, 0x871, 0x1, 0x1);
        gbc.writeMem(0x8d7f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x14d3);
        EXPECT(gbc.pc(), 0x8d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7f), 0x39);
        // 39 0376
        gbc.setState(0x478e, 0xf41d, 0x2c10, 0x2596, 0x51c8, 0x8578, 0x0, 0x1);
        gbc.writeMem(0x478e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf41d);
        EXPECT(gbc.pc(), 0x478f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0378
        gbc.setState(0x3a19, 0xa15f, 0x1c20, 0x4854, 0x998c, 0xa4ba, 0x1, 0x1);
        gbc.writeMem(0x3a19, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa15f);
        EXPECT(gbc.pc(), 0x3a1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0379
        gbc.setState(0x61c5, 0x55cd, 0x8b70, 0x87b8, 0xd61d, 0x7722, 0x0, 0x1);
        gbc.writeMem(0x61c5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x55cd);
        EXPECT(gbc.pc(), 0x61c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 037A
        gbc.setState(0x5ac4, 0x4f34, 0x4720, 0xc5d5, 0xbf36, 0xc007, 0x0, 0x0);
        gbc.writeMem(0x5ac4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4f34);
        EXPECT(gbc.pc(), 0x5ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 037B
        gbc.setState(0x310b, 0xaeec, 0xf1f0, 0xe184, 0xc2b9, 0x4169, 0x0, 0x1);
        gbc.writeMem(0x310b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xaeec);
        EXPECT(gbc.pc(), 0x310c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 037C
        gbc.setState(0x35b1, 0x71f5, 0xef50, 0x51fa, 0x360a, 0x81c6, 0x1, 0x0);
        gbc.writeMem(0x35b1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x71f5);
        EXPECT(gbc.pc(), 0x35b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 037D
        gbc.setState(0x9b17, 0xa97f, 0x9950, 0xbd27, 0xd8fa, 0x647d, 0x1, 0x0);
        gbc.writeMem(0x9b17, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa97f);
        EXPECT(gbc.pc(), 0x9b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b17), 0x39);
        // 39 037E
        gbc.setState(0x453c, 0xc358, 0xed50, 0x18dd, 0x8334, 0xef15, 0x0, 0x0);
        gbc.writeMem(0x453c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc358);
        EXPECT(gbc.pc(), 0x453d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 037F
        gbc.setState(0x6a69, 0x516a, 0x4ae0, 0x1eb6, 0x849, 0x2881, 0x1, 0x0);
        gbc.writeMem(0x6a69, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x516a);
        EXPECT(gbc.pc(), 0x6a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0381
        gbc.setState(0xe471, 0x63a0, 0x4f20, 0x409b, 0x7d95, 0xbf17, 0x0, 0x1);
        gbc.writeMem(0xe471, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x63a0);
        EXPECT(gbc.pc(), 0xe472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe471), 0x39);
        // 39 0382
        gbc.setState(0x7314, 0x66ef, 0x5100, 0x6750, 0x1611, 0x88fb, 0x0, 0x1);
        gbc.writeMem(0x7314, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x66ef);
        EXPECT(gbc.pc(), 0x7315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0383
        gbc.setState(0x8c9a, 0x2a73, 0xeff0, 0x55de, 0x5a6e, 0xc492, 0x1, 0x0);
        gbc.writeMem(0x8c9a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2a73);
        EXPECT(gbc.pc(), 0x8c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9a), 0x39);
        // 39 0384
        gbc.setState(0x5be5, 0xf587, 0xfee0, 0x6a10, 0xeddd, 0xbd8c, 0x0, 0x1);
        gbc.writeMem(0x5be5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf587);
        EXPECT(gbc.pc(), 0x5be6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0385
        gbc.setState(0xa33c, 0x252a, 0xcbb0, 0xc3d0, 0xf00a, 0xde1b, 0x0, 0x1);
        gbc.writeMem(0xa33c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x252a);
        EXPECT(gbc.pc(), 0xa33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa33c), 0x39);
        // 39 0386
        gbc.setState(0x28b5, 0xd38, 0x7b70, 0x3c4a, 0x4344, 0xa274, 0x0, 0x0);
        gbc.writeMem(0x28b5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd38);
        EXPECT(gbc.pc(), 0x28b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0387
        gbc.setState(0x6e19, 0x10fc, 0xc7a0, 0x3b13, 0xb610, 0x46b2, 0x0, 0x1);
        gbc.writeMem(0x6e19, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x10fc);
        EXPECT(gbc.pc(), 0x6e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 0388
        gbc.setState(0x9788, 0x345d, 0xcc00, 0xc947, 0x10ba, 0xd9ed, 0x0, 0x0);
        gbc.writeMem(0x9788, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x345d);
        EXPECT(gbc.pc(), 0x9789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9788), 0x39);
        // 39 0389
        gbc.setState(0x1084, 0x78b7, 0x5300, 0x71c4, 0xd453, 0xaa30, 0x0, 0x1);
        gbc.writeMem(0x1084, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x78b7);
        EXPECT(gbc.pc(), 0x1085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 038A
        gbc.setState(0xee25, 0x78ff, 0x7070, 0xb7a2, 0xa86f, 0x4c6b, 0x1, 0x1);
        gbc.writeMem(0xee25, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x78ff);
        EXPECT(gbc.pc(), 0xee26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee25), 0x39);
        // 39 038B
        gbc.setState(0xd910, 0x9715, 0xe2c0, 0xa164, 0xb90, 0xbaca, 0x1, 0x0);
        gbc.writeMem(0xd910, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9715);
        EXPECT(gbc.pc(), 0xd911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd910), 0x39);
        // 39 038C
        gbc.setState(0xde5, 0x392c, 0x9d0, 0xb40, 0x6c81, 0x89e0, 0x1, 0x1);
        gbc.writeMem(0xde5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x392c);
        EXPECT(gbc.pc(), 0xde6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 038D
        gbc.setState(0xd18a, 0x19ce, 0xf8b0, 0x5767, 0x18eb, 0x80a5, 0x0, 0x1);
        gbc.writeMem(0xd18a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x19ce);
        EXPECT(gbc.pc(), 0xd18b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd18a), 0x39);
        // 39 038E
        gbc.setState(0x51c7, 0x534a, 0x30d0, 0xf23d, 0x519a, 0x8bcf, 0x1, 0x0);
        gbc.writeMem(0x51c7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x534a);
        EXPECT(gbc.pc(), 0x51c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 038F
        gbc.setState(0x5346, 0xf941, 0xbe60, 0xa52f, 0x5c31, 0xe995, 0x1, 0x0);
        gbc.writeMem(0x5346, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf941);
        EXPECT(gbc.pc(), 0x5347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0390
        gbc.setState(0x4494, 0xe937, 0xe3b0, 0xf55d, 0x506, 0xfd26, 0x0, 0x0);
        gbc.writeMem(0x4494, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe937);
        EXPECT(gbc.pc(), 0x4495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0391
        gbc.setState(0x34dd, 0xd24d, 0x4180, 0xe88d, 0xdeca, 0x77db, 0x1, 0x0);
        gbc.writeMem(0x34dd, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd24d);
        EXPECT(gbc.pc(), 0x34de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 0392
        gbc.setState(0xdd56, 0xab7d, 0xcfd0, 0xc53b, 0xe437, 0xc3da, 0x1, 0x1);
        gbc.writeMem(0xdd56, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xab7d);
        EXPECT(gbc.pc(), 0xdd57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd56), 0x39);
        // 39 0393
        gbc.setState(0xa84c, 0x95ac, 0xa490, 0xbaf0, 0xc4db, 0x673e, 0x1, 0x0);
        gbc.writeMem(0xa84c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x95ac);
        EXPECT(gbc.pc(), 0xa84d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84c), 0x39);
        // 39 0394
        gbc.setState(0x3573, 0x1f22, 0x4aa0, 0xe700, 0x5520, 0xf393, 0x1, 0x0);
        gbc.writeMem(0x3573, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1f22);
        EXPECT(gbc.pc(), 0x3574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 0395
        gbc.setState(0x8446, 0xc68c, 0xcff0, 0x3bf9, 0x4813, 0xf204, 0x1, 0x0);
        gbc.writeMem(0x8446, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc68c);
        EXPECT(gbc.pc(), 0x8447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8446), 0x39);
        // 39 0396
        gbc.setState(0xc709, 0x6913, 0xf6c0, 0xe9fa, 0x56f, 0xf9ad, 0x1, 0x1);
        gbc.writeMem(0xc709, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6913);
        EXPECT(gbc.pc(), 0xc70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc709), 0x39);
        // 39 0397
        gbc.setState(0xe832, 0xab1f, 0x2f30, 0xf712, 0x4c02, 0x9c60, 0x1, 0x0);
        gbc.writeMem(0xe832, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xab1f);
        EXPECT(gbc.pc(), 0xe833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe832), 0x39);
        // 39 0398
        gbc.setState(0xcfbc, 0xaf4f, 0x5150, 0xd115, 0xf4a3, 0xda08, 0x1, 0x0);
        gbc.writeMem(0xcfbc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xaf4f);
        EXPECT(gbc.pc(), 0xcfbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfbc), 0x39);
        // 39 0399
        gbc.setState(0x3dd4, 0xecf9, 0x1370, 0x4e6c, 0x1b04, 0xf2ee, 0x0, 0x1);
        gbc.writeMem(0x3dd4, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xecf9);
        EXPECT(gbc.pc(), 0x3dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 039A
        gbc.setState(0x6ad1, 0x4d85, 0x5010, 0x625e, 0xfaef, 0xdfcc, 0x1, 0x0);
        gbc.writeMem(0x6ad1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4d85);
        EXPECT(gbc.pc(), 0x6ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 039B
        gbc.setState(0xa1, 0xefc, 0xa830, 0x13ca, 0x2c26, 0x56a2, 0x1, 0x0);
        gbc.writeMem(0xa1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xefc);
        EXPECT(gbc.pc(), 0xa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 039C
        gbc.setState(0x6790, 0xfa06, 0xdae0, 0x6608, 0x61b8, 0xb862, 0x0, 0x1);
        gbc.writeMem(0x6790, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfa06);
        EXPECT(gbc.pc(), 0x6791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 039D
        gbc.setState(0xb659, 0x149f, 0x7a40, 0x839b, 0x221b, 0x90a2, 0x0, 0x1);
        gbc.writeMem(0xb659, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x149f);
        EXPECT(gbc.pc(), 0xb65a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb659), 0x39);
        // 39 039E
        gbc.setState(0xdba7, 0x9954, 0xf350, 0x37db, 0x1a1f, 0x3d2, 0x0, 0x1);
        gbc.writeMem(0xdba7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9954);
        EXPECT(gbc.pc(), 0xdba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba7), 0x39);
        // 39 039F
        gbc.setState(0xbdc, 0xcd8b, 0xba50, 0x268b, 0xe9f1, 0x55, 0x1, 0x1);
        gbc.writeMem(0xbdc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xcd8b);
        EXPECT(gbc.pc(), 0xbdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03A0
        gbc.setState(0xbf3e, 0x392, 0xd090, 0x5d85, 0xccfa, 0xdb0e, 0x1, 0x1);
        gbc.writeMem(0xbf3e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x392);
        EXPECT(gbc.pc(), 0xbf3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3e), 0x39);
        // 39 03A1
        gbc.setState(0xbe27, 0xabc8, 0x86c0, 0x7f99, 0xf53d, 0x3bd9, 0x0, 0x0);
        gbc.writeMem(0xbe27, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xabc8);
        EXPECT(gbc.pc(), 0xbe28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe27), 0x39);
        // 39 03A2
        gbc.setState(0x6e49, 0x3675, 0x4830, 0xbea5, 0xb23, 0xf7, 0x0, 0x1);
        gbc.writeMem(0x6e49, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3675);
        EXPECT(gbc.pc(), 0x6e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03A3
        gbc.setState(0x6f1, 0x61bb, 0x5180, 0x53d5, 0x7608, 0x4a20, 0x1, 0x0);
        gbc.writeMem(0x6f1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x61bb);
        EXPECT(gbc.pc(), 0x6f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03A5
        gbc.setState(0xdace, 0x7651, 0xa820, 0xe871, 0x58f, 0xeaae, 0x1, 0x0);
        gbc.writeMem(0xdace, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7651);
        EXPECT(gbc.pc(), 0xdacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdace), 0x39);
        // 39 03A6
        gbc.setState(0xc7b0, 0xd662, 0x76a0, 0x771, 0xea61, 0x6cad, 0x0, 0x1);
        gbc.writeMem(0xc7b0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd662);
        EXPECT(gbc.pc(), 0xc7b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b0), 0x39);
        // 39 03A7
        gbc.setState(0x102d, 0x8c52, 0x5a20, 0x7c1f, 0xcbd2, 0x4ede, 0x0, 0x0);
        gbc.writeMem(0x102d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8c52);
        EXPECT(gbc.pc(), 0x102e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 03A8
        gbc.setState(0xcfbc, 0x2319, 0x3d20, 0x6bdb, 0x320d, 0x97e4, 0x1, 0x0);
        gbc.writeMem(0xcfbc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2319);
        EXPECT(gbc.pc(), 0xcfbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfbc), 0x39);
        // 39 03A9
        gbc.setState(0x2cf3, 0xfe9d, 0x290, 0xa43d, 0xd112, 0xdcdd, 0x0, 0x1);
        gbc.writeMem(0x2cf3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfe9d);
        EXPECT(gbc.pc(), 0x2cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03AA
        gbc.setState(0xca97, 0x61a2, 0x1590, 0x1b0f, 0x3cc9, 0x2d8a, 0x1, 0x1);
        gbc.writeMem(0xca97, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x61a2);
        EXPECT(gbc.pc(), 0xca98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca97), 0x39);
        // 39 03AB
        gbc.setState(0xd22b, 0xc626, 0xb330, 0xfce8, 0x65cb, 0x7f2e, 0x1, 0x0);
        gbc.writeMem(0xd22b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc626);
        EXPECT(gbc.pc(), 0xd22c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22b), 0x39);
        // 39 03AC
        gbc.setState(0x7ca2, 0x3ae3, 0x86a0, 0xf71c, 0xaaba, 0xb334, 0x1, 0x1);
        gbc.writeMem(0x7ca2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3ae3);
        EXPECT(gbc.pc(), 0x7ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03AD
        gbc.setState(0x5f13, 0x6e1a, 0x3330, 0x712b, 0x92b4, 0xe712, 0x0, 0x1);
        gbc.writeMem(0x5f13, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6e1a);
        EXPECT(gbc.pc(), 0x5f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03AF
        gbc.setState(0xbe5c, 0xe1ab, 0xe10, 0xf4bb, 0xe7d6, 0x6a0f, 0x0, 0x0);
        gbc.writeMem(0xbe5c, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe1ab);
        EXPECT(gbc.pc(), 0xbe5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe5c), 0x39);
        // 39 03B0
        gbc.setState(0x5e02, 0xa3cb, 0x5940, 0x31fe, 0xff84, 0x69a6, 0x0, 0x0);
        gbc.writeMem(0x5e02, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa3cb);
        EXPECT(gbc.pc(), 0x5e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03B1
        gbc.setState(0x1dc1, 0x812f, 0xf860, 0xeabe, 0xae2c, 0x479d, 0x0, 0x0);
        gbc.writeMem(0x1dc1, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x812f);
        EXPECT(gbc.pc(), 0x1dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03B2
        gbc.setState(0x386b, 0xd9ae, 0xb480, 0x6933, 0xd73e, 0xfe75, 0x1, 0x0);
        gbc.writeMem(0x386b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd9ae);
        EXPECT(gbc.pc(), 0x386c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03B3
        gbc.setState(0xde03, 0xfc12, 0xdb60, 0x34ca, 0xba6c, 0xe383, 0x0, 0x0);
        gbc.writeMem(0xde03, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfc12);
        EXPECT(gbc.pc(), 0xde04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde03), 0x39);
        // 39 03B4
        gbc.setState(0x28c3, 0xb4cf, 0xb40, 0x2ff2, 0xee53, 0xe5b6, 0x0, 0x0);
        gbc.writeMem(0x28c3, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb4cf);
        EXPECT(gbc.pc(), 0x28c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03B5
        gbc.setState(0xc74e, 0x7b0e, 0x4cc0, 0x358d, 0xcebe, 0xc8a2, 0x1, 0x0);
        gbc.writeMem(0xc74e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7b0e);
        EXPECT(gbc.pc(), 0xc74f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc74e), 0x39);
        // 39 03B6
        gbc.setState(0x51a6, 0xd411, 0x7400, 0xd826, 0xdb5, 0x5d, 0x1, 0x0);
        gbc.writeMem(0x51a6, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd411);
        EXPECT(gbc.pc(), 0x51a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03B7
        gbc.setState(0x2566, 0xa27a, 0xe200, 0x11da, 0x2e2f, 0xc5ca, 0x0, 0x1);
        gbc.writeMem(0x2566, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa27a);
        EXPECT(gbc.pc(), 0x2567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03B8
        gbc.setState(0xcb7f, 0xda99, 0xe050, 0xd421, 0x975d, 0xe2cc, 0x0, 0x0);
        gbc.writeMem(0xcb7f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xda99);
        EXPECT(gbc.pc(), 0xcb80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb7f), 0x39);
        // 39 03B9
        gbc.setState(0x4f59, 0xea8c, 0x9990, 0x75c3, 0x67c8, 0xd6db, 0x1, 0x0);
        gbc.writeMem(0x4f59, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xea8c);
        EXPECT(gbc.pc(), 0x4f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03BA
        gbc.setState(0x8e56, 0x7036, 0xba30, 0xaf75, 0xf60e, 0x845c, 0x1, 0x0);
        gbc.writeMem(0x8e56, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7036);
        EXPECT(gbc.pc(), 0x8e57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e56), 0x39);
        // 39 03BB
        gbc.setState(0xb332, 0x82e0, 0x9150, 0x6945, 0xd9bb, 0xd263, 0x1, 0x1);
        gbc.writeMem(0xb332, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x82e0);
        EXPECT(gbc.pc(), 0xb333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb332), 0x39);
        // 39 03BC
        gbc.setState(0x64d5, 0xff83, 0x3300, 0xf7c9, 0x5a00, 0x1f34, 0x1, 0x1);
        gbc.writeMem(0x64d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xff83);
        EXPECT(gbc.pc(), 0x64d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03BD
        gbc.setState(0x6bfa, 0x910e, 0xc6f0, 0x434c, 0x4668, 0x9a43, 0x0, 0x1);
        gbc.writeMem(0x6bfa, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x910e);
        EXPECT(gbc.pc(), 0x6bfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03BE
        gbc.setState(0x721, 0x63f7, 0x9e30, 0xc64f, 0xb715, 0xc08, 0x1, 0x1);
        gbc.writeMem(0x721, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x63f7);
        EXPECT(gbc.pc(), 0x722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03C0
        gbc.setState(0x6bf2, 0xf2c2, 0x95a0, 0x7514, 0xe65e, 0xa418, 0x1, 0x1);
        gbc.writeMem(0x6bf2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf2c2);
        EXPECT(gbc.pc(), 0x6bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03C1
        gbc.setState(0x396, 0xfe88, 0xcbc0, 0xea28, 0x2a8a, 0xffe8, 0x0, 0x1);
        gbc.writeMem(0x396, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfe88);
        EXPECT(gbc.pc(), 0x397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03C3
        gbc.setState(0x8638, 0xf24e, 0xfdc0, 0xc5d3, 0x4229, 0x4833, 0x0, 0x0);
        gbc.writeMem(0x8638, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf24e);
        EXPECT(gbc.pc(), 0x8639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8638), 0x39);
        // 39 03C4
        gbc.setState(0x7d36, 0xc213, 0x5790, 0x1644, 0xcad2, 0x8ee8, 0x0, 0x0);
        gbc.writeMem(0x7d36, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc213);
        EXPECT(gbc.pc(), 0x7d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03C5
        gbc.setState(0xcc50, 0x211e, 0x1250, 0x2009, 0xeb70, 0x9c4e, 0x0, 0x1);
        gbc.writeMem(0xcc50, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x211e);
        EXPECT(gbc.pc(), 0xcc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc50), 0x39);
        // 39 03C6
        gbc.setState(0xe42f, 0x4516, 0x9790, 0xdebb, 0xb197, 0xd8d8, 0x1, 0x1);
        gbc.writeMem(0xe42f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4516);
        EXPECT(gbc.pc(), 0xe430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe42f), 0x39);
        // 39 03C7
        gbc.setState(0xaa03, 0x60cc, 0xed90, 0x9723, 0xccf8, 0x4d74, 0x0, 0x1);
        gbc.writeMem(0xaa03, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x60cc);
        EXPECT(gbc.pc(), 0xaa04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa03), 0x39);
        // 39 03C9
        gbc.setState(0xe42f, 0x1c87, 0x3560, 0xb956, 0x1471, 0xcedc, 0x0, 0x1);
        gbc.writeMem(0xe42f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1c87);
        EXPECT(gbc.pc(), 0xe430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42f), 0x39);
        // 39 03CA
        gbc.setState(0xe2eb, 0x28e9, 0x2c0, 0xee51, 0x8628, 0xc0fa, 0x0, 0x0);
        gbc.writeMem(0xe2eb, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x28e9);
        EXPECT(gbc.pc(), 0xe2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2eb), 0x39);
        // 39 03CB
        gbc.setState(0x745f, 0xe2d1, 0x46a0, 0x4f55, 0xc4ad, 0xb137, 0x0, 0x0);
        gbc.writeMem(0x745f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe2d1);
        EXPECT(gbc.pc(), 0x7460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03CC
        gbc.setState(0x7605, 0x84a7, 0x900, 0x4dda, 0x9ab0, 0xa0e0, 0x0, 0x1);
        gbc.writeMem(0x7605, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x84a7);
        EXPECT(gbc.pc(), 0x7606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03CD
        gbc.setState(0x36ef, 0x883e, 0x36e0, 0x7689, 0x2b18, 0x3046, 0x0, 0x0);
        gbc.writeMem(0x36ef, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x883e);
        EXPECT(gbc.pc(), 0x36f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03CE
        gbc.setState(0xb98b, 0x3e68, 0xf3e0, 0x16af, 0x214b, 0x55c6, 0x1, 0x1);
        gbc.writeMem(0xb98b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3e68);
        EXPECT(gbc.pc(), 0xb98c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98b), 0x39);
        // 39 03CF
        gbc.setState(0xc1f0, 0x77c1, 0x1aa0, 0xeee0, 0x8212, 0x34a9, 0x1, 0x1);
        gbc.writeMem(0xc1f0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x77c1);
        EXPECT(gbc.pc(), 0xc1f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f0), 0x39);
        // 39 03D0
        gbc.setState(0x37c9, 0xf380, 0x4950, 0xf170, 0x245e, 0xd7aa, 0x0, 0x1);
        gbc.writeMem(0x37c9, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf380);
        EXPECT(gbc.pc(), 0x37ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 39 03D1
        gbc.setState(0xabef, 0xd557, 0x8870, 0x71d3, 0x51b6, 0x90ea, 0x1, 0x1);
        gbc.writeMem(0xabef, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd557);
        EXPECT(gbc.pc(), 0xabf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabef), 0x39);
        // 39 03D2
        gbc.setState(0x8301, 0x5dc9, 0x3350, 0x71, 0x43e4, 0x12bb, 0x1, 0x1);
        gbc.writeMem(0x8301, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5dc9);
        EXPECT(gbc.pc(), 0x8302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8301), 0x39);
        // 39 03D3
        gbc.setState(0x3198, 0x759, 0x91b0, 0x64ef, 0xfdf, 0x11d6, 0x1, 0x1);
        gbc.writeMem(0x3198, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x759);
        EXPECT(gbc.pc(), 0x3199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03D4
        gbc.setState(0xefdc, 0xc54f, 0xef00, 0x141f, 0x98f5, 0x66e2, 0x0, 0x0);
        gbc.writeMem(0xefdc, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc54f);
        EXPECT(gbc.pc(), 0xefdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefdc), 0x39);
        // 39 03D5
        gbc.setState(0xbd9d, 0xd0df, 0xf0b0, 0x88ab, 0xa792, 0x7dc9, 0x1, 0x0);
        gbc.writeMem(0xbd9d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd0df);
        EXPECT(gbc.pc(), 0xbd9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9d), 0x39);
        // 39 03D6
        gbc.setState(0x9b55, 0xd8b5, 0x7330, 0xf0b, 0x2165, 0x60e9, 0x0, 0x0);
        gbc.writeMem(0x9b55, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd8b5);
        EXPECT(gbc.pc(), 0x9b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b55), 0x39);
        // 39 03D7
        gbc.setState(0x420b, 0x165, 0x1560, 0x513e, 0xfa6, 0x9, 0x1, 0x1);
        gbc.writeMem(0x420b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x165);
        EXPECT(gbc.pc(), 0x420c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03D8
        gbc.setState(0xc93a, 0xcf29, 0x58a0, 0xd68b, 0x8941, 0xfffe, 0x1, 0x1);
        gbc.writeMem(0xc93a, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcf29);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93a), 0x39);
        // 39 03D9
        gbc.setState(0x8bea, 0x8760, 0xf620, 0xf93e, 0xe206, 0x9745, 0x1, 0x1);
        gbc.writeMem(0x8bea, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8760);
        EXPECT(gbc.pc(), 0x8beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bea), 0x39);
        // 39 03DA
        gbc.setState(0xcb73, 0xd30a, 0xff40, 0x7ead, 0x1e54, 0x5858, 0x1, 0x0);
        gbc.writeMem(0xcb73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd30a);
        EXPECT(gbc.pc(), 0xcb74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb73), 0x39);
        // 39 03DB
        gbc.setState(0xd8e7, 0x59d9, 0x440, 0x1534, 0xfb3a, 0x3f1e, 0x1, 0x0);
        gbc.writeMem(0xd8e7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x59d9);
        EXPECT(gbc.pc(), 0xd8e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e7), 0x39);
        // 39 03DC
        gbc.setState(0xfc5, 0xc5b1, 0x380, 0xc77d, 0x3264, 0x1308, 0x0, 0x1);
        gbc.writeMem(0xfc5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc5b1);
        EXPECT(gbc.pc(), 0xfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03DD
        gbc.setState(0xb594, 0xe996, 0x4f80, 0x9b3d, 0xd101, 0x4b6a, 0x0, 0x1);
        gbc.writeMem(0xb594, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe996);
        EXPECT(gbc.pc(), 0xb595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb594), 0x39);
        // 39 03DE
        gbc.setState(0xa483, 0xf0b4, 0x9cf0, 0x9113, 0xffa0, 0xdea5, 0x0, 0x1);
        gbc.writeMem(0xa483, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf0b4);
        EXPECT(gbc.pc(), 0xa484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa483), 0x39);
        // 39 03DF
        gbc.setState(0x5971, 0xf19, 0xae50, 0x52ce, 0xa26f, 0xbcc3, 0x1, 0x1);
        gbc.writeMem(0x5971, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf19);
        EXPECT(gbc.pc(), 0x5972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 39 03E0
        gbc.setState(0xbdad, 0xbe1f, 0xd220, 0x111f, 0x4f2d, 0x7065, 0x0, 0x1);
        gbc.writeMem(0xbdad, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbe1f);
        EXPECT(gbc.pc(), 0xbdae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdad), 0x39);
        // 39 03E1
        gbc.setState(0x4280, 0x83f9, 0x6870, 0x8dea, 0x5617, 0x3290, 0x1, 0x0);
        gbc.writeMem(0x4280, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x83f9);
        EXPECT(gbc.pc(), 0x4281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 39 03E3
        gbc.setState(0xc508, 0x242b, 0x5c80, 0xbdb1, 0xcb7f, 0xe04c, 0x0, 0x0);
        gbc.writeMem(0xc508, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x242b);
        EXPECT(gbc.pc(), 0xc509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc508), 0x39);
        // 39 03E4
        gbc.setState(0xb5b0, 0x7cd4, 0x9b10, 0xad4a, 0xf8c2, 0xda0a, 0x0, 0x1);
        gbc.writeMem(0xb5b0, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7cd4);
        EXPECT(gbc.pc(), 0xb5b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b0), 0x39);
        // 39 03E5
        gbc.setState(0x61ba, 0x6619, 0x7130, 0x5faa, 0x64b4, 0x9e52, 0x1, 0x1);
        gbc.writeMem(0x61ba, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6619);
        EXPECT(gbc.pc(), 0x61bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 39 03E6
        gbc.setState(0xc53f, 0x4249, 0x63b0, 0xf807, 0x2b36, 0x89af, 0x0, 0x0);
        gbc.writeMem(0xc53f, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4249);
        EXPECT(gbc.pc(), 0xc540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc53f), 0x39);
        // 39 03E7
        gbc.setState(0x6d09, 0x3472, 0x6be0, 0x45, 0xe1b8, 0x44d6, 0x1, 0x0);
        gbc.writeMem(0x6d09, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3472);
        EXPECT(gbc.pc(), 0x6d0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
