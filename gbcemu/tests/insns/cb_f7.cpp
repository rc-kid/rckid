#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_f7)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_f7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB F7 0000
        gbc.setState(0xe6ef, 0x3e28, 0x46c0, 0x95a8, 0xd044, 0xf009, 0x0, 0x0);
        gbc.writeMem(0xe6ef, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3e28);
        EXPECT(gbc.pc(), 0xe6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ef), 0xcb);
        EXPECT(gbc.readMem(0xe6f0), 0xf7);
        // CB F7 0001
        gbc.setState(0x3710, 0xabcf, 0xcc60, 0x7816, 0x524e, 0xb515, 0x1, 0x1);
        gbc.writeMem(0x3710, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xabcf);
        EXPECT(gbc.pc(), 0x3712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0002
        gbc.setState(0x867, 0x8eed, 0xd070, 0xc90e, 0x1036, 0x3ce3, 0x0, 0x0);
        gbc.writeMem(0x867, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8eed);
        EXPECT(gbc.pc(), 0x869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0003
        gbc.setState(0x90c8, 0x3b70, 0x1db0, 0x80d3, 0xed32, 0xeb87, 0x0, 0x1);
        gbc.writeMem(0x90c8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3b70);
        EXPECT(gbc.pc(), 0x90ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c8), 0xcb);
        EXPECT(gbc.readMem(0x90c9), 0xf7);
        // CB F7 0006
        gbc.setState(0xc959, 0x8e, 0x77b0, 0xe73b, 0x91d8, 0x2f45, 0x1, 0x1);
        gbc.writeMem(0xc959, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8e);
        EXPECT(gbc.pc(), 0xc95b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc959), 0xcb);
        EXPECT(gbc.readMem(0xc95a), 0xf7);
        // CB F7 0007
        gbc.setState(0x3d37, 0xfef2, 0x2d50, 0x3871, 0x8923, 0x1451, 0x0, 0x1);
        gbc.writeMem(0x3d37, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfef2);
        EXPECT(gbc.pc(), 0x3d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0008
        gbc.setState(0xa268, 0x173, 0xd8f0, 0x1257, 0x79c6, 0x5da8, 0x1, 0x1);
        gbc.writeMem(0xa268, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x173);
        EXPECT(gbc.pc(), 0xa26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa268), 0xcb);
        EXPECT(gbc.readMem(0xa269), 0xf7);
        // CB F7 0009
        gbc.setState(0x28e3, 0x1ca9, 0x76e0, 0x5e6, 0x1202, 0x7095, 0x0, 0x1);
        gbc.writeMem(0x28e3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1ca9);
        EXPECT(gbc.pc(), 0x28e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 000A
        gbc.setState(0xbf04, 0x58c1, 0xcdd0, 0xd029, 0xf4b9, 0xb7a, 0x0, 0x0);
        gbc.writeMem(0xbf04, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x58c1);
        EXPECT(gbc.pc(), 0xbf06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf04), 0xcb);
        EXPECT(gbc.readMem(0xbf05), 0xf7);
        // CB F7 000B
        gbc.setState(0xc1ce, 0x68cb, 0xaee0, 0x34aa, 0x278a, 0xa9c0, 0x1, 0x1);
        gbc.writeMem(0xc1ce, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x68cb);
        EXPECT(gbc.pc(), 0xc1d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ce), 0xcb);
        EXPECT(gbc.readMem(0xc1cf), 0xf7);
        // CB F7 000C
        gbc.setState(0xe73a, 0xe6e7, 0xa6f0, 0x58c9, 0x12f3, 0xdb0e, 0x0, 0x1);
        gbc.writeMem(0xe73a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe6e7);
        EXPECT(gbc.pc(), 0xe73c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73a), 0xcb);
        EXPECT(gbc.readMem(0xe73b), 0xf7);
        // CB F7 000D
        gbc.setState(0xe38, 0xa199, 0x4cc0, 0x6139, 0x9bd8, 0xed60, 0x0, 0x0);
        gbc.writeMem(0xe38, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa199);
        EXPECT(gbc.pc(), 0xe3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 000E
        gbc.setState(0xa76f, 0xcc3, 0x8c10, 0x9cb0, 0xad01, 0x1554, 0x0, 0x1);
        gbc.writeMem(0xa76f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcc3);
        EXPECT(gbc.pc(), 0xa771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76f), 0xcb);
        EXPECT(gbc.readMem(0xa770), 0xf7);
        // CB F7 000F
        gbc.setState(0x520f, 0x56f4, 0x38d0, 0xa934, 0xf8b1, 0x5b9b, 0x0, 0x1);
        gbc.writeMem(0x520f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x56f4);
        EXPECT(gbc.pc(), 0x5211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0010
        gbc.setState(0x6a2c, 0x5bac, 0xc7f0, 0xcb90, 0x7a4c, 0x90f6, 0x0, 0x1);
        gbc.writeMem(0x6a2c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5bac);
        EXPECT(gbc.pc(), 0x6a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0011
        gbc.setState(0x78f1, 0x85e4, 0xca30, 0xd278, 0x19b, 0x81ad, 0x1, 0x1);
        gbc.writeMem(0x78f1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x85e4);
        EXPECT(gbc.pc(), 0x78f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0012
        gbc.setState(0xe413, 0xb9d9, 0xf520, 0x11da, 0xb026, 0x2a6f, 0x0, 0x0);
        gbc.writeMem(0xe413, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb9d9);
        EXPECT(gbc.pc(), 0xe415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe413), 0xcb);
        EXPECT(gbc.readMem(0xe414), 0xf7);
        // CB F7 0013
        gbc.setState(0x5d5a, 0x8688, 0x9060, 0x6a8b, 0x93c3, 0x24f8, 0x1, 0x0);
        gbc.writeMem(0x5d5a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8688);
        EXPECT(gbc.pc(), 0x5d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0014
        gbc.setState(0xdd15, 0x25b9, 0x9f50, 0x2a7f, 0x8ae7, 0x84a7, 0x0, 0x0);
        gbc.writeMem(0xdd15, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x25b9);
        EXPECT(gbc.pc(), 0xdd17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd15), 0xcb);
        EXPECT(gbc.readMem(0xdd16), 0xf7);
        // CB F7 0015
        gbc.setState(0xa045, 0x3f52, 0x4040, 0xb3, 0x85c3, 0xb424, 0x1, 0x1);
        gbc.writeMem(0xa045, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3f52);
        EXPECT(gbc.pc(), 0xa047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa045), 0xcb);
        EXPECT(gbc.readMem(0xa046), 0xf7);
        // CB F7 0016
        gbc.setState(0xa5, 0xc43a, 0x2680, 0x717c, 0x248d, 0x7510, 0x1, 0x1);
        gbc.writeMem(0xa5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc43a);
        EXPECT(gbc.pc(), 0xa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0017
        gbc.setState(0x9662, 0x28f5, 0xd260, 0xf108, 0x5b8c, 0x2847, 0x1, 0x1);
        gbc.writeMem(0x9662, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x28f5);
        EXPECT(gbc.pc(), 0x9664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9662), 0xcb);
        EXPECT(gbc.readMem(0x9663), 0xf7);
        // CB F7 0018
        gbc.setState(0xa46a, 0x21e, 0x44b0, 0xce85, 0x8f58, 0x158, 0x1, 0x1);
        gbc.writeMem(0xa46a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x21e);
        EXPECT(gbc.pc(), 0xa46c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa46a), 0xcb);
        EXPECT(gbc.readMem(0xa46b), 0xf7);
        // CB F7 0019
        gbc.setState(0x3381, 0x51d7, 0x3cf0, 0xe10c, 0xbb81, 0xb3a7, 0x1, 0x1);
        gbc.writeMem(0x3381, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x51d7);
        EXPECT(gbc.pc(), 0x3383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 001A
        gbc.setState(0x1db1, 0xb88, 0xba40, 0xdd4b, 0xc15b, 0x5462, 0x0, 0x0);
        gbc.writeMem(0x1db1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb88);
        EXPECT(gbc.pc(), 0x1db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 001B
        gbc.setState(0xb6c8, 0x18a0, 0x5900, 0x99d8, 0x817e, 0xf163, 0x1, 0x1);
        gbc.writeMem(0xb6c8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x18a0);
        EXPECT(gbc.pc(), 0xb6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c8), 0xcb);
        EXPECT(gbc.readMem(0xb6c9), 0xf7);
        // CB F7 001C
        gbc.setState(0xe276, 0x9b3b, 0xfb90, 0x5c52, 0x427a, 0x6d0e, 0x0, 0x0);
        gbc.writeMem(0xe276, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9b3b);
        EXPECT(gbc.pc(), 0xe278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe276), 0xcb);
        EXPECT(gbc.readMem(0xe277), 0xf7);
        // CB F7 001D
        gbc.setState(0x950d, 0xed9f, 0x6b80, 0x89bb, 0xb00, 0x2adc, 0x0, 0x0);
        gbc.writeMem(0x950d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xed9f);
        EXPECT(gbc.pc(), 0x950f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950d), 0xcb);
        EXPECT(gbc.readMem(0x950e), 0xf7);
        // CB F7 001E
        gbc.setState(0xb69a, 0x3e8, 0xa7a0, 0x1951, 0x93b5, 0x7f1e, 0x1, 0x1);
        gbc.writeMem(0xb69a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3e8);
        EXPECT(gbc.pc(), 0xb69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb69a), 0xcb);
        EXPECT(gbc.readMem(0xb69b), 0xf7);
        // CB F7 001F
        gbc.setState(0x3ea2, 0x1f95, 0xaf0, 0xbd79, 0x9e97, 0x2504, 0x1, 0x1);
        gbc.writeMem(0x3ea2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1f95);
        EXPECT(gbc.pc(), 0x3ea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0020
        gbc.setState(0x33d0, 0xb4bf, 0x4410, 0x70f7, 0x26fe, 0xe40c, 0x1, 0x1);
        gbc.writeMem(0x33d0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb4bf);
        EXPECT(gbc.pc(), 0x33d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0021
        gbc.setState(0x1cc8, 0xb9be, 0x9630, 0x649b, 0x320e, 0x8ef9, 0x0, 0x1);
        gbc.writeMem(0x1cc8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb9be);
        EXPECT(gbc.pc(), 0x1cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0022
        gbc.setState(0x6327, 0x9e70, 0x5bf0, 0x9b95, 0xa092, 0x4c33, 0x1, 0x1);
        gbc.writeMem(0x6327, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9e70);
        EXPECT(gbc.pc(), 0x6329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0023
        gbc.setState(0x4fe, 0x2d0f, 0x8950, 0x4017, 0x3f50, 0xdf15, 0x1, 0x1);
        gbc.writeMem(0x4fe, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2d0f);
        EXPECT(gbc.pc(), 0x500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0024
        gbc.setState(0x106a, 0x3052, 0x5850, 0x2658, 0xf25e, 0x99af, 0x1, 0x0);
        gbc.writeMem(0x106a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3052);
        EXPECT(gbc.pc(), 0x106c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0025
        gbc.setState(0x6a29, 0x558c, 0x14a0, 0x3ac5, 0x81f0, 0xfd82, 0x1, 0x1);
        gbc.writeMem(0x6a29, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x558c);
        EXPECT(gbc.pc(), 0x6a2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0026
        gbc.setState(0xb7dc, 0x885b, 0x52e0, 0xf41c, 0x29b4, 0xf896, 0x0, 0x0);
        gbc.writeMem(0xb7dc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x885b);
        EXPECT(gbc.pc(), 0xb7de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7dc), 0xcb);
        EXPECT(gbc.readMem(0xb7dd), 0xf7);
        // CB F7 0028
        gbc.setState(0xb3a7, 0xb723, 0x6460, 0x900a, 0x92e9, 0x3c1e, 0x1, 0x0);
        gbc.writeMem(0xb3a7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb723);
        EXPECT(gbc.pc(), 0xb3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a7), 0xcb);
        EXPECT(gbc.readMem(0xb3a8), 0xf7);
        // CB F7 0029
        gbc.setState(0x9dec, 0x4464, 0x51a0, 0x840b, 0x2188, 0x6b01, 0x0, 0x1);
        gbc.writeMem(0x9dec, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4464);
        EXPECT(gbc.pc(), 0x9dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dec), 0xcb);
        EXPECT(gbc.readMem(0x9ded), 0xf7);
        // CB F7 002A
        gbc.setState(0x284, 0x28bf, 0x6f50, 0xb697, 0x47c9, 0x81f5, 0x1, 0x1);
        gbc.writeMem(0x284, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x28bf);
        EXPECT(gbc.pc(), 0x286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 002C
        gbc.setState(0x2880, 0x13bd, 0x3bc0, 0x938b, 0x820a, 0x4c83, 0x1, 0x1);
        gbc.writeMem(0x2880, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x13bd);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 002D
        gbc.setState(0xbea6, 0x6863, 0xd330, 0xe4ad, 0x58f0, 0x8d74, 0x0, 0x1);
        gbc.writeMem(0xbea6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6863);
        EXPECT(gbc.pc(), 0xbea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbea6), 0xcb);
        EXPECT(gbc.readMem(0xbea7), 0xf7);
        // CB F7 002E
        gbc.setState(0x51f9, 0x13a3, 0xe440, 0x34e9, 0x6c2a, 0xf17, 0x0, 0x0);
        gbc.writeMem(0x51f9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x13a3);
        EXPECT(gbc.pc(), 0x51fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 002F
        gbc.setState(0xe707, 0xd19c, 0xd2c0, 0x522, 0xea61, 0xe809, 0x0, 0x1);
        gbc.writeMem(0xe707, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd19c);
        EXPECT(gbc.pc(), 0xe709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe707), 0xcb);
        EXPECT(gbc.readMem(0xe708), 0xf7);
        // CB F7 0030
        gbc.setState(0xbfe0, 0xb696, 0x72e0, 0x30c5, 0x358d, 0xb9ac, 0x0, 0x0);
        gbc.writeMem(0xbfe0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb696);
        EXPECT(gbc.pc(), 0xbfe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe0), 0xcb);
        EXPECT(gbc.readMem(0xbfe1), 0xf7);
        // CB F7 0031
        gbc.setState(0x4d43, 0x946d, 0xcb40, 0x8120, 0x2f58, 0xf1b8, 0x1, 0x1);
        gbc.writeMem(0x4d43, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0x4d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0032
        gbc.setState(0x3f40, 0xce9e, 0x28e0, 0x80c4, 0x8ffa, 0x6de, 0x0, 0x0);
        gbc.writeMem(0x3f40, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xce9e);
        EXPECT(gbc.pc(), 0x3f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0033
        gbc.setState(0xe0f7, 0xdf89, 0xc930, 0x9b2a, 0x433d, 0x282a, 0x1, 0x1);
        gbc.writeMem(0xe0f7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdf89);
        EXPECT(gbc.pc(), 0xe0f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f7), 0xcb);
        EXPECT(gbc.readMem(0xe0f8), 0xf7);
        // CB F7 0034
        gbc.setState(0xa6d5, 0xadc2, 0xe300, 0x917e, 0x34f5, 0xec3a, 0x1, 0x0);
        gbc.writeMem(0xa6d5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xadc2);
        EXPECT(gbc.pc(), 0xa6d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d5), 0xcb);
        EXPECT(gbc.readMem(0xa6d6), 0xf7);
        // CB F7 0035
        gbc.setState(0x4430, 0xf0df, 0xb2e0, 0xa430, 0xfef1, 0x81c4, 0x0, 0x0);
        gbc.writeMem(0x4430, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf0df);
        EXPECT(gbc.pc(), 0x4432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0036
        gbc.setState(0x6473, 0x5d2f, 0x73c0, 0xa1da, 0xe0b8, 0xa012, 0x0, 0x1);
        gbc.writeMem(0x6473, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5d2f);
        EXPECT(gbc.pc(), 0x6475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0037
        gbc.setState(0x5a2a, 0xd089, 0x4d10, 0x54bc, 0xd38, 0x4297, 0x1, 0x0);
        gbc.writeMem(0x5a2a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd089);
        EXPECT(gbc.pc(), 0x5a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0038
        gbc.setState(0xa96d, 0xfcf4, 0x88c0, 0x7dcc, 0x3f35, 0xd0f, 0x1, 0x1);
        gbc.writeMem(0xa96d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfcf4);
        EXPECT(gbc.pc(), 0xa96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96d), 0xcb);
        EXPECT(gbc.readMem(0xa96e), 0xf7);
        // CB F7 0039
        gbc.setState(0x8791, 0xea63, 0xa040, 0x5bf8, 0x60d1, 0x3d3e, 0x1, 0x0);
        gbc.writeMem(0x8791, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xea63);
        EXPECT(gbc.pc(), 0x8793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8791), 0xcb);
        EXPECT(gbc.readMem(0x8792), 0xf7);
        // CB F7 003A
        gbc.setState(0x418e, 0x8b80, 0xf4c0, 0x4640, 0x5e79, 0xa94e, 0x0, 0x1);
        gbc.writeMem(0x418e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8b80);
        EXPECT(gbc.pc(), 0x4190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 003B
        gbc.setState(0x2ec3, 0xd71, 0xd700, 0xb779, 0xd3bf, 0x438b, 0x1, 0x1);
        gbc.writeMem(0x2ec3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd71);
        EXPECT(gbc.pc(), 0x2ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 003C
        gbc.setState(0x47bf, 0x1cd7, 0x10b0, 0xde08, 0x87, 0xbfbb, 0x1, 0x0);
        gbc.writeMem(0x47bf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1cd7);
        EXPECT(gbc.pc(), 0x47c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 003D
        gbc.setState(0xc6b0, 0x12be, 0x56c0, 0x8761, 0xbb9d, 0x1062, 0x1, 0x1);
        gbc.writeMem(0xc6b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x12be);
        EXPECT(gbc.pc(), 0xc6b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b0), 0xcb);
        EXPECT(gbc.readMem(0xc6b1), 0xf7);
        // CB F7 003E
        gbc.setState(0xc43f, 0xc44, 0x5e0, 0x5aec, 0x6f1d, 0xa32c, 0x1, 0x1);
        gbc.writeMem(0xc43f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc44);
        EXPECT(gbc.pc(), 0xc441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43f), 0xcb);
        EXPECT(gbc.readMem(0xc440), 0xf7);
        // CB F7 003F
        gbc.setState(0x5a22, 0xd867, 0x89e0, 0x77ea, 0x1218, 0xddeb, 0x1, 0x0);
        gbc.writeMem(0x5a22, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd867);
        EXPECT(gbc.pc(), 0x5a24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0040
        gbc.setState(0x2e8e, 0xde77, 0xab00, 0x3e9c, 0x7455, 0xc33, 0x0, 0x1);
        gbc.writeMem(0x2e8e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xde77);
        EXPECT(gbc.pc(), 0x2e90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0041
        gbc.setState(0x68db, 0xf044, 0x2780, 0x961b, 0x90b8, 0xb9ee, 0x0, 0x1);
        gbc.writeMem(0x68db, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf044);
        EXPECT(gbc.pc(), 0x68dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0042
        gbc.setState(0xd4b, 0x4f, 0xe20, 0x3ea2, 0x141e, 0xc82, 0x1, 0x0);
        gbc.writeMem(0xd4b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4f);
        EXPECT(gbc.pc(), 0xd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0043
        gbc.setState(0xa16f, 0xf550, 0x880, 0x33a2, 0xd9fc, 0x9078, 0x1, 0x1);
        gbc.writeMem(0xa16f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf550);
        EXPECT(gbc.pc(), 0xa171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16f), 0xcb);
        EXPECT(gbc.readMem(0xa170), 0xf7);
        // CB F7 0044
        gbc.setState(0xcd67, 0xcd51, 0x6800, 0x6eca, 0x2fef, 0x620a, 0x1, 0x1);
        gbc.writeMem(0xcd67, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcd51);
        EXPECT(gbc.pc(), 0xcd69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd67), 0xcb);
        EXPECT(gbc.readMem(0xcd68), 0xf7);
        // CB F7 0045
        gbc.setState(0x35de, 0x82d2, 0x1cd0, 0x798b, 0xe777, 0x5e2f, 0x0, 0x0);
        gbc.writeMem(0x35de, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x82d2);
        EXPECT(gbc.pc(), 0x35e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0046
        gbc.setState(0x7bee, 0x83f9, 0x7890, 0xc741, 0xa5a3, 0x2a51, 0x0, 0x1);
        gbc.writeMem(0x7bee, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x83f9);
        EXPECT(gbc.pc(), 0x7bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0047
        gbc.setState(0x8cd0, 0xe7a3, 0x8720, 0x759c, 0x5e84, 0x39dd, 0x1, 0x0);
        gbc.writeMem(0x8cd0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe7a3);
        EXPECT(gbc.pc(), 0x8cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd0), 0xcb);
        EXPECT(gbc.readMem(0x8cd1), 0xf7);
        // CB F7 0048
        gbc.setState(0x652d, 0xf826, 0xd330, 0xfda6, 0x206, 0xa9dd, 0x0, 0x1);
        gbc.writeMem(0x652d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf826);
        EXPECT(gbc.pc(), 0x652f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 004A
        gbc.setState(0xed90, 0x16, 0x1ad0, 0xd605, 0xbb30, 0xcd59, 0x1, 0x0);
        gbc.writeMem(0xed90, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x16);
        EXPECT(gbc.pc(), 0xed92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed90), 0xcb);
        EXPECT(gbc.readMem(0xed91), 0xf7);
        // CB F7 004B
        gbc.setState(0x75c4, 0xe985, 0x5190, 0xdbe8, 0xeb78, 0xf4f3, 0x0, 0x1);
        gbc.writeMem(0x75c4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe985);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 004C
        gbc.setState(0x5455, 0x8ce1, 0x34f0, 0xafa7, 0xd489, 0x6a1b, 0x1, 0x1);
        gbc.writeMem(0x5455, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8ce1);
        EXPECT(gbc.pc(), 0x5457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 004D
        gbc.setState(0x9c24, 0x28b0, 0xcfd0, 0x1fb7, 0xc6af, 0xe8ca, 0x1, 0x1);
        gbc.writeMem(0x9c24, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x28b0);
        EXPECT(gbc.pc(), 0x9c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c24), 0xcb);
        EXPECT(gbc.readMem(0x9c25), 0xf7);
        // CB F7 004E
        gbc.setState(0xef6e, 0x5aaa, 0x37f0, 0x3ec8, 0xc5, 0xa209, 0x0, 0x1);
        gbc.writeMem(0xef6e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5aaa);
        EXPECT(gbc.pc(), 0xef70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef6e), 0xcb);
        EXPECT(gbc.readMem(0xef6f), 0xf7);
        // CB F7 004F
        gbc.setState(0xcd6f, 0x4137, 0x5bf0, 0x6e8c, 0x3021, 0xa6b7, 0x0, 0x0);
        gbc.writeMem(0xcd6f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4137);
        EXPECT(gbc.pc(), 0xcd71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd6f), 0xcb);
        EXPECT(gbc.readMem(0xcd70), 0xf7);
        // CB F7 0050
        gbc.setState(0xdc07, 0xe610, 0x3b10, 0xacac, 0xd13f, 0x2526, 0x0, 0x0);
        gbc.writeMem(0xdc07, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe610);
        EXPECT(gbc.pc(), 0xdc09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc07), 0xcb);
        EXPECT(gbc.readMem(0xdc08), 0xf7);
        // CB F7 0051
        gbc.setState(0x9876, 0xd81, 0xe080, 0x674e, 0x1162, 0xc935, 0x1, 0x1);
        gbc.writeMem(0x9876, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd81);
        EXPECT(gbc.pc(), 0x9878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9876), 0xcb);
        EXPECT(gbc.readMem(0x9877), 0xf7);
        // CB F7 0052
        gbc.setState(0x836e, 0x77b8, 0x43d0, 0x1949, 0x997e, 0x252d, 0x1, 0x0);
        gbc.writeMem(0x836e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x77b8);
        EXPECT(gbc.pc(), 0x8370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836e), 0xcb);
        EXPECT(gbc.readMem(0x836f), 0xf7);
        // CB F7 0053
        gbc.setState(0x58a9, 0xdc02, 0x9a20, 0xd315, 0x2b76, 0xc000, 0x1, 0x1);
        gbc.writeMem(0x58a9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xdc02);
        EXPECT(gbc.pc(), 0x58ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0054
        gbc.setState(0xd709, 0x79c5, 0x8e0, 0xaeb1, 0xb15c, 0xad79, 0x1, 0x0);
        gbc.writeMem(0xd709, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x79c5);
        EXPECT(gbc.pc(), 0xd70b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd709), 0xcb);
        EXPECT(gbc.readMem(0xd70a), 0xf7);
        // CB F7 0055
        gbc.setState(0x9b62, 0x9ebd, 0x72b0, 0x5e3b, 0x9df8, 0xa0a2, 0x1, 0x1);
        gbc.writeMem(0x9b62, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9ebd);
        EXPECT(gbc.pc(), 0x9b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b62), 0xcb);
        EXPECT(gbc.readMem(0x9b63), 0xf7);
        // CB F7 0056
        gbc.setState(0xef6b, 0xdb64, 0x2fc0, 0x4add, 0x6b9b, 0x95b9, 0x0, 0x0);
        gbc.writeMem(0xef6b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xdb64);
        EXPECT(gbc.pc(), 0xef6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6b), 0xcb);
        EXPECT(gbc.readMem(0xef6c), 0xf7);
        // CB F7 0057
        gbc.setState(0x1240, 0x7b4b, 0x650, 0x7550, 0x3764, 0xa9bd, 0x1, 0x1);
        gbc.writeMem(0x1240, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7b4b);
        EXPECT(gbc.pc(), 0x1242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0059
        gbc.setState(0xf0d, 0x2edb, 0x3e80, 0xc7dd, 0x4ff8, 0x6c6e, 0x1, 0x1);
        gbc.writeMem(0xf0d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2edb);
        EXPECT(gbc.pc(), 0xf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 005A
        gbc.setState(0x5a3, 0x2a24, 0x1930, 0x1caa, 0x7e78, 0x58e8, 0x1, 0x1);
        gbc.writeMem(0x5a3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2a24);
        EXPECT(gbc.pc(), 0x5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 005B
        gbc.setState(0x8edc, 0xd76e, 0x9c50, 0x282b, 0xe7ff, 0xe58d, 0x1, 0x1);
        gbc.writeMem(0x8edc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd76e);
        EXPECT(gbc.pc(), 0x8ede);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8edc), 0xcb);
        EXPECT(gbc.readMem(0x8edd), 0xf7);
        // CB F7 005C
        gbc.setState(0x99e0, 0xfa72, 0x66a0, 0xc75, 0x1723, 0xc99c, 0x0, 0x0);
        gbc.writeMem(0x99e0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfa72);
        EXPECT(gbc.pc(), 0x99e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e0), 0xcb);
        EXPECT(gbc.readMem(0x99e1), 0xf7);
        // CB F7 005D
        gbc.setState(0xa219, 0xacca, 0x27b0, 0x6e96, 0x8491, 0x2945, 0x1, 0x1);
        gbc.writeMem(0xa219, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xacca);
        EXPECT(gbc.pc(), 0xa21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa219), 0xcb);
        EXPECT(gbc.readMem(0xa21a), 0xf7);
        // CB F7 005E
        gbc.setState(0x628a, 0x9c58, 0x4670, 0x2017, 0xc8ba, 0xdf4f, 0x0, 0x0);
        gbc.writeMem(0x628a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9c58);
        EXPECT(gbc.pc(), 0x628c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 005F
        gbc.setState(0xb76c, 0x55f1, 0x6490, 0xb765, 0x4aa7, 0xf43b, 0x0, 0x1);
        gbc.writeMem(0xb76c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x55f1);
        EXPECT(gbc.pc(), 0xb76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb76c), 0xcb);
        EXPECT(gbc.readMem(0xb76d), 0xf7);
        // CB F7 0060
        gbc.setState(0x109b, 0xcd91, 0x9e80, 0x2245, 0x7fcf, 0x3c2d, 0x0, 0x1);
        gbc.writeMem(0x109b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xcd91);
        EXPECT(gbc.pc(), 0x109d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0061
        gbc.setState(0x4099, 0xe4f1, 0xea90, 0x1d56, 0x9e54, 0xfea1, 0x0, 0x1);
        gbc.writeMem(0x4099, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe4f1);
        EXPECT(gbc.pc(), 0x409b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0062
        gbc.setState(0x3cf7, 0xc046, 0xbd30, 0xb343, 0x1a4, 0x9ad0, 0x0, 0x0);
        gbc.writeMem(0x3cf7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc046);
        EXPECT(gbc.pc(), 0x3cf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0063
        gbc.setState(0x48ee, 0xc461, 0x9b70, 0x2e0, 0xdd7, 0xe67d, 0x0, 0x1);
        gbc.writeMem(0x48ee, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc461);
        EXPECT(gbc.pc(), 0x48f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0064
        gbc.setState(0xd3e9, 0xc833, 0x7f30, 0xf3f4, 0x6899, 0xc04a, 0x0, 0x1);
        gbc.writeMem(0xd3e9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc833);
        EXPECT(gbc.pc(), 0xd3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3e9), 0xcb);
        EXPECT(gbc.readMem(0xd3ea), 0xf7);
        // CB F7 0065
        gbc.setState(0x12b0, 0xcc78, 0xe6c0, 0x5dd9, 0x56c6, 0xf102, 0x1, 0x1);
        gbc.writeMem(0x12b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcc78);
        EXPECT(gbc.pc(), 0x12b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0066
        gbc.setState(0x5153, 0x13ee, 0xee00, 0x8f8, 0x9a8b, 0xbfe5, 0x1, 0x1);
        gbc.writeMem(0x5153, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x13ee);
        EXPECT(gbc.pc(), 0x5155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0068
        gbc.setState(0x2dca, 0x2014, 0x7340, 0x18c3, 0x3968, 0xca0b, 0x0, 0x0);
        gbc.writeMem(0x2dca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2014);
        EXPECT(gbc.pc(), 0x2dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0069
        gbc.setState(0x6353, 0xcf2c, 0x6f0, 0xa7a1, 0x5427, 0xa56f, 0x1, 0x1);
        gbc.writeMem(0x6353, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcf2c);
        EXPECT(gbc.pc(), 0x6355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 006A
        gbc.setState(0x11e7, 0xc7ab, 0xc5c0, 0xc5f6, 0xfa04, 0xd59, 0x0, 0x1);
        gbc.writeMem(0x11e7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc7ab);
        EXPECT(gbc.pc(), 0x11e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 006B
        gbc.setState(0x1647, 0xb660, 0xc980, 0x8af1, 0xebca, 0xd6c9, 0x1, 0x1);
        gbc.writeMem(0x1647, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb660);
        EXPECT(gbc.pc(), 0x1649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 006C
        gbc.setState(0xb70c, 0xb054, 0x2860, 0x35aa, 0x4d63, 0x787d, 0x1, 0x1);
        gbc.writeMem(0xb70c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb054);
        EXPECT(gbc.pc(), 0xb70e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70c), 0xcb);
        EXPECT(gbc.readMem(0xb70d), 0xf7);
        // CB F7 006D
        gbc.setState(0x9dcf, 0x75a0, 0x2c30, 0x29c9, 0x97, 0xf392, 0x0, 0x1);
        gbc.writeMem(0x9dcf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x75a0);
        EXPECT(gbc.pc(), 0x9dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dcf), 0xcb);
        EXPECT(gbc.readMem(0x9dd0), 0xf7);
        // CB F7 006E
        gbc.setState(0x8ac9, 0xbd55, 0x3e30, 0x21ff, 0xd921, 0x4951, 0x0, 0x1);
        gbc.writeMem(0x8ac9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbd55);
        EXPECT(gbc.pc(), 0x8acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac9), 0xcb);
        EXPECT(gbc.readMem(0x8aca), 0xf7);
        // CB F7 006F
        gbc.setState(0x1842, 0xc6aa, 0xf240, 0x2ed, 0x6928, 0x16b2, 0x0, 0x1);
        gbc.writeMem(0x1842, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc6aa);
        EXPECT(gbc.pc(), 0x1844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0070
        gbc.setState(0xddc9, 0xe0d3, 0xa0a0, 0xf5d3, 0x2c43, 0x2ca1, 0x1, 0x0);
        gbc.writeMem(0xddc9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe0d3);
        EXPECT(gbc.pc(), 0xddcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc9), 0xcb);
        EXPECT(gbc.readMem(0xddca), 0xf7);
        // CB F7 0071
        gbc.setState(0x1336, 0x55f2, 0x9e00, 0x6c60, 0x3a2, 0xbd86, 0x1, 0x0);
        gbc.writeMem(0x1336, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x55f2);
        EXPECT(gbc.pc(), 0x1338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0072
        gbc.setState(0x9e09, 0x580f, 0x1de0, 0x6b38, 0x1e96, 0x1e88, 0x0, 0x1);
        gbc.writeMem(0x9e09, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x580f);
        EXPECT(gbc.pc(), 0x9e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e09), 0xcb);
        EXPECT(gbc.readMem(0x9e0a), 0xf7);
        // CB F7 0073
        gbc.setState(0xc056, 0xee2b, 0xd470, 0xc0dd, 0xf1f8, 0x2410, 0x0, 0x1);
        gbc.writeMem(0xc056, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xee2b);
        EXPECT(gbc.pc(), 0xc058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc056), 0xcb);
        EXPECT(gbc.readMem(0xc057), 0xf7);
        // CB F7 0074
        gbc.setState(0x7299, 0x641a, 0x60d0, 0xaf8b, 0x9d47, 0xe2eb, 0x0, 0x0);
        gbc.writeMem(0x7299, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x641a);
        EXPECT(gbc.pc(), 0x729b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0076
        gbc.setState(0xaf9b, 0x6dea, 0x4d40, 0xe0b4, 0xd2c7, 0x5a95, 0x1, 0x0);
        gbc.writeMem(0xaf9b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6dea);
        EXPECT(gbc.pc(), 0xaf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9b), 0xcb);
        EXPECT(gbc.readMem(0xaf9c), 0xf7);
        // CB F7 0077
        gbc.setState(0x42b5, 0xdc2f, 0x9c90, 0xd560, 0xded5, 0x5d0c, 0x0, 0x1);
        gbc.writeMem(0x42b5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdc2f);
        EXPECT(gbc.pc(), 0x42b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0078
        gbc.setState(0xebb5, 0xe32b, 0x150, 0x7803, 0x9df, 0x17e, 0x0, 0x1);
        gbc.writeMem(0xebb5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe32b);
        EXPECT(gbc.pc(), 0xebb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebb5), 0xcb);
        EXPECT(gbc.readMem(0xebb6), 0xf7);
        // CB F7 0079
        gbc.setState(0x637e, 0x23c4, 0x2f50, 0xe222, 0x409b, 0x248d, 0x1, 0x0);
        gbc.writeMem(0x637e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x23c4);
        EXPECT(gbc.pc(), 0x6380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 007A
        gbc.setState(0xb4e7, 0xf83e, 0xbfd0, 0x63c2, 0x15fb, 0x37af, 0x0, 0x0);
        gbc.writeMem(0xb4e7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf83e);
        EXPECT(gbc.pc(), 0xb4e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4e7), 0xcb);
        EXPECT(gbc.readMem(0xb4e8), 0xf7);
        // CB F7 007B
        gbc.setState(0xa046, 0x8031, 0x4df0, 0x6348, 0xf98c, 0x507b, 0x1, 0x1);
        gbc.writeMem(0xa046, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8031);
        EXPECT(gbc.pc(), 0xa048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa046), 0xcb);
        EXPECT(gbc.readMem(0xa047), 0xf7);
        // CB F7 007C
        gbc.setState(0x7ea9, 0x8626, 0x71a0, 0xc2fa, 0x6b7e, 0xf95a, 0x0, 0x1);
        gbc.writeMem(0x7ea9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8626);
        EXPECT(gbc.pc(), 0x7eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 007D
        gbc.setState(0xdb36, 0x78eb, 0x9ed0, 0x494a, 0x1e1b, 0x2866, 0x0, 0x0);
        gbc.writeMem(0xdb36, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x78eb);
        EXPECT(gbc.pc(), 0xdb38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb36), 0xcb);
        EXPECT(gbc.readMem(0xdb37), 0xf7);
        // CB F7 007E
        gbc.setState(0xe1c5, 0x8d7, 0xac70, 0xe01e, 0x36ac, 0xce31, 0x0, 0x0);
        gbc.writeMem(0xe1c5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8d7);
        EXPECT(gbc.pc(), 0xe1c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c5), 0xcb);
        EXPECT(gbc.readMem(0xe1c6), 0xf7);
        // CB F7 007F
        gbc.setState(0x92ba, 0x4c27, 0x83f0, 0xa147, 0xa3cd, 0x8fa, 0x0, 0x1);
        gbc.writeMem(0x92ba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4c27);
        EXPECT(gbc.pc(), 0x92bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ba), 0xcb);
        EXPECT(gbc.readMem(0x92bb), 0xf7);
        // CB F7 0080
        gbc.setState(0xdf30, 0x6462, 0x3c0, 0x5b2b, 0x836f, 0xbc2b, 0x0, 0x1);
        gbc.writeMem(0xdf30, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6462);
        EXPECT(gbc.pc(), 0xdf32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf30), 0xcb);
        EXPECT(gbc.readMem(0xdf31), 0xf7);
        // CB F7 0081
        gbc.setState(0x572e, 0x4d20, 0x3210, 0xdd7d, 0xa311, 0xc1e, 0x0, 0x0);
        gbc.writeMem(0x572e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4d20);
        EXPECT(gbc.pc(), 0x5730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0082
        gbc.setState(0xeeb0, 0xf6d5, 0x2e30, 0x2f64, 0x2f40, 0xc250, 0x1, 0x0);
        gbc.writeMem(0xeeb0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf6d5);
        EXPECT(gbc.pc(), 0xeeb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeb0), 0xcb);
        EXPECT(gbc.readMem(0xeeb1), 0xf7);
        // CB F7 0083
        gbc.setState(0x8d96, 0xbb46, 0x1420, 0x9fb0, 0xca54, 0xc3da, 0x0, 0x0);
        gbc.writeMem(0x8d96, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbb46);
        EXPECT(gbc.pc(), 0x8d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d96), 0xcb);
        EXPECT(gbc.readMem(0x8d97), 0xf7);
        // CB F7 0084
        gbc.setState(0xb40f, 0x125d, 0xf640, 0x531d, 0x6446, 0x7df7, 0x1, 0x1);
        gbc.writeMem(0xb40f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x125d);
        EXPECT(gbc.pc(), 0xb411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb40f), 0xcb);
        EXPECT(gbc.readMem(0xb410), 0xf7);
        // CB F7 0085
        gbc.setState(0xb823, 0xc061, 0xda30, 0x9530, 0x30a9, 0x4f35, 0x0, 0x1);
        gbc.writeMem(0xb823, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc061);
        EXPECT(gbc.pc(), 0xb825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb823), 0xcb);
        EXPECT(gbc.readMem(0xb824), 0xf7);
        // CB F7 0086
        gbc.setState(0x5258, 0x9376, 0x7df0, 0x3f6a, 0xb21a, 0xef2d, 0x0, 0x0);
        gbc.writeMem(0x5258, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9376);
        EXPECT(gbc.pc(), 0x525a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0087
        gbc.setState(0xa6b0, 0xbf28, 0x4890, 0xce17, 0x3efd, 0x20b3, 0x1, 0x0);
        gbc.writeMem(0xa6b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbf28);
        EXPECT(gbc.pc(), 0xa6b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b0), 0xcb);
        EXPECT(gbc.readMem(0xa6b1), 0xf7);
        // CB F7 0088
        gbc.setState(0x6414, 0x373, 0x4060, 0x4f1b, 0xe4df, 0x1ef9, 0x1, 0x0);
        gbc.writeMem(0x6414, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x373);
        EXPECT(gbc.pc(), 0x6416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0089
        gbc.setState(0xe2b3, 0x152a, 0xb610, 0xa94, 0x9a2c, 0xe884, 0x1, 0x0);
        gbc.writeMem(0xe2b3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x152a);
        EXPECT(gbc.pc(), 0xe2b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b3), 0xcb);
        EXPECT(gbc.readMem(0xe2b4), 0xf7);
        // CB F7 008A
        gbc.setState(0x332e, 0xa691, 0x77f0, 0x5f83, 0x419b, 0x6013, 0x1, 0x0);
        gbc.writeMem(0x332e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa691);
        EXPECT(gbc.pc(), 0x3330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 008B
        gbc.setState(0x2848, 0xde24, 0x3d50, 0x5bf8, 0xec26, 0x4185, 0x1, 0x1);
        gbc.writeMem(0x2848, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xde24);
        EXPECT(gbc.pc(), 0x284a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 008C
        gbc.setState(0xdc3f, 0xbb90, 0x4430, 0x6c48, 0x418d, 0x17f4, 0x0, 0x0);
        gbc.writeMem(0xdc3f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbb90);
        EXPECT(gbc.pc(), 0xdc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc3f), 0xcb);
        EXPECT(gbc.readMem(0xdc40), 0xf7);
        // CB F7 008D
        gbc.setState(0x788a, 0xead2, 0xd9f0, 0xcedd, 0x6f75, 0x3c74, 0x1, 0x1);
        gbc.writeMem(0x788a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xead2);
        EXPECT(gbc.pc(), 0x788c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 008E
        gbc.setState(0x2396, 0x4d6a, 0x30a0, 0x8861, 0x4888, 0xa8b2, 0x1, 0x1);
        gbc.writeMem(0x2396, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4d6a);
        EXPECT(gbc.pc(), 0x2398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 008F
        gbc.setState(0x3251, 0xef8f, 0x1720, 0x6482, 0xa449, 0x4529, 0x0, 0x1);
        gbc.writeMem(0x3251, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xef8f);
        EXPECT(gbc.pc(), 0x3253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0090
        gbc.setState(0x7c0e, 0xffae, 0xf030, 0x1562, 0xe515, 0x1553, 0x0, 0x0);
        gbc.writeMem(0x7c0e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xffae);
        EXPECT(gbc.pc(), 0x7c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0091
        gbc.setState(0xae06, 0x46dc, 0x3d70, 0x77a1, 0x5983, 0x5fc9, 0x0, 0x0);
        gbc.writeMem(0xae06, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x46dc);
        EXPECT(gbc.pc(), 0xae08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae06), 0xcb);
        EXPECT(gbc.readMem(0xae07), 0xf7);
        // CB F7 0092
        gbc.setState(0xa5ca, 0xd334, 0xff70, 0xa658, 0x148, 0x5c39, 0x0, 0x1);
        gbc.writeMem(0xa5ca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd334);
        EXPECT(gbc.pc(), 0xa5cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ca), 0xcb);
        EXPECT(gbc.readMem(0xa5cb), 0xf7);
        // CB F7 0093
        gbc.setState(0x9baf, 0x6dcb, 0xeb40, 0x3621, 0x5b55, 0x59ff, 0x1, 0x1);
        gbc.writeMem(0x9baf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6dcb);
        EXPECT(gbc.pc(), 0x9bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9baf), 0xcb);
        EXPECT(gbc.readMem(0x9bb0), 0xf7);
        // CB F7 0094
        gbc.setState(0x3bc0, 0x608, 0x7af0, 0xada8, 0x7c48, 0x6de6, 0x1, 0x0);
        gbc.writeMem(0x3bc0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x608);
        EXPECT(gbc.pc(), 0x3bc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0095
        gbc.setState(0x99ee, 0x1119, 0x9150, 0x1db1, 0x2342, 0x796e, 0x0, 0x1);
        gbc.writeMem(0x99ee, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1119);
        EXPECT(gbc.pc(), 0x99f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ee), 0xcb);
        EXPECT(gbc.readMem(0x99ef), 0xf7);
        // CB F7 0096
        gbc.setState(0x4456, 0x7827, 0x72d0, 0x2cf1, 0xfc2, 0xded, 0x1, 0x0);
        gbc.writeMem(0x4456, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7827);
        EXPECT(gbc.pc(), 0x4458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0097
        gbc.setState(0x84c9, 0xe243, 0x6a60, 0x4ae5, 0xbd76, 0xa3b0, 0x0, 0x1);
        gbc.writeMem(0x84c9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe243);
        EXPECT(gbc.pc(), 0x84cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c9), 0xcb);
        EXPECT(gbc.readMem(0x84ca), 0xf7);
        // CB F7 0098
        gbc.setState(0x95b4, 0x5f64, 0x2660, 0x258f, 0x99fb, 0x67ae, 0x0, 0x1);
        gbc.writeMem(0x95b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5f64);
        EXPECT(gbc.pc(), 0x95b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b4), 0xcb);
        EXPECT(gbc.readMem(0x95b5), 0xf7);
        // CB F7 0099
        gbc.setState(0xd979, 0xa1d6, 0x8d10, 0xdac0, 0xe1b5, 0xba19, 0x0, 0x0);
        gbc.writeMem(0xd979, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa1d6);
        EXPECT(gbc.pc(), 0xd97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd979), 0xcb);
        EXPECT(gbc.readMem(0xd97a), 0xf7);
        // CB F7 009A
        gbc.setState(0x2df1, 0xf674, 0x6d00, 0xb1df, 0x4dbc, 0xb60b, 0x1, 0x0);
        gbc.writeMem(0x2df1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf674);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 009B
        gbc.setState(0x289a, 0x6937, 0x100, 0x454f, 0xe087, 0xe7c, 0x0, 0x0);
        gbc.writeMem(0x289a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6937);
        EXPECT(gbc.pc(), 0x289c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 009C
        gbc.setState(0x157c, 0x49cb, 0xa9a0, 0xb1de, 0x83fb, 0x6cd, 0x0, 0x1);
        gbc.writeMem(0x157c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x49cb);
        EXPECT(gbc.pc(), 0x157e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 009D
        gbc.setState(0xa4b2, 0xa132, 0x6500, 0x786d, 0x67fb, 0xdecb, 0x1, 0x0);
        gbc.writeMem(0xa4b2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa132);
        EXPECT(gbc.pc(), 0xa4b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b2), 0xcb);
        EXPECT(gbc.readMem(0xa4b3), 0xf7);
        // CB F7 009E
        gbc.setState(0x97ff, 0x90ab, 0xa4d0, 0x8c97, 0x81af, 0xf5ff, 0x1, 0x0);
        gbc.writeMem(0x97ff, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x90ab);
        EXPECT(gbc.pc(), 0x9801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ff), 0xcb);
        EXPECT(gbc.readMem(0x9800), 0xf7);
        // CB F7 009F
        gbc.setState(0x6f1a, 0x1ec9, 0x5520, 0x28, 0x6ae1, 0xe746, 0x0, 0x0);
        gbc.writeMem(0x6f1a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1ec9);
        EXPECT(gbc.pc(), 0x6f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A0
        gbc.setState(0x2fd7, 0xff73, 0x22c0, 0x5786, 0x3605, 0x7cd4, 0x0, 0x1);
        gbc.writeMem(0x2fd7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xff73);
        EXPECT(gbc.pc(), 0x2fd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A1
        gbc.setState(0xb302, 0x3979, 0x3650, 0xc7b2, 0xa6c2, 0xaff, 0x0, 0x1);
        gbc.writeMem(0xb302, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3979);
        EXPECT(gbc.pc(), 0xb304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb302), 0xcb);
        EXPECT(gbc.readMem(0xb303), 0xf7);
        // CB F7 00A2
        gbc.setState(0x919a, 0x9e6e, 0xf150, 0x6efb, 0x3a0f, 0xd48c, 0x1, 0x1);
        gbc.writeMem(0x919a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9e6e);
        EXPECT(gbc.pc(), 0x919c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x919a), 0xcb);
        EXPECT(gbc.readMem(0x919b), 0xf7);
        // CB F7 00A3
        gbc.setState(0x3e25, 0xe5c2, 0x9960, 0x4b69, 0x3f5f, 0x7cb7, 0x0, 0x1);
        gbc.writeMem(0x3e25, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe5c2);
        EXPECT(gbc.pc(), 0x3e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A4
        gbc.setState(0x3916, 0x96ee, 0xcb60, 0xd44c, 0x96ba, 0x6b8a, 0x0, 0x0);
        gbc.writeMem(0x3916, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x96ee);
        EXPECT(gbc.pc(), 0x3918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A5
        gbc.setState(0x741c, 0xc301, 0xa4a0, 0xae71, 0x9c6c, 0x86d1, 0x1, 0x0);
        gbc.writeMem(0x741c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc301);
        EXPECT(gbc.pc(), 0x741e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A6
        gbc.setState(0x6aa1, 0x340c, 0x2d90, 0xdcdb, 0x2f9e, 0x7c39, 0x0, 0x0);
        gbc.writeMem(0x6aa1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x340c);
        EXPECT(gbc.pc(), 0x6aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00A7
        gbc.setState(0x2e97, 0x8919, 0x9a60, 0xbed3, 0xea3b, 0x1e31, 0x1, 0x0);
        gbc.writeMem(0x2e97, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8919);
        EXPECT(gbc.pc(), 0x2e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00A8
        gbc.setState(0xdb89, 0xbf98, 0x1570, 0xab6, 0xff98, 0xc0f4, 0x0, 0x1);
        gbc.writeMem(0xdb89, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbf98);
        EXPECT(gbc.pc(), 0xdb8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb89), 0xcb);
        EXPECT(gbc.readMem(0xdb8a), 0xf7);
        // CB F7 00A9
        gbc.setState(0x2d0a, 0x980a, 0x75c0, 0x1f89, 0x6cbc, 0x6597, 0x0, 0x0);
        gbc.writeMem(0x2d0a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x980a);
        EXPECT(gbc.pc(), 0x2d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00AB
        gbc.setState(0x7bf1, 0x943, 0x6890, 0xee4b, 0x7932, 0xd0ba, 0x1, 0x1);
        gbc.writeMem(0x7bf1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x943);
        EXPECT(gbc.pc(), 0x7bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00AC
        gbc.setState(0x9650, 0xd153, 0x3300, 0xd4ea, 0xe022, 0x8f27, 0x1, 0x1);
        gbc.writeMem(0x9650, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd153);
        EXPECT(gbc.pc(), 0x9652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9650), 0xcb);
        EXPECT(gbc.readMem(0x9651), 0xf7);
        // CB F7 00AD
        gbc.setState(0xe8f5, 0xf673, 0xdbb0, 0x38a0, 0x212f, 0xb341, 0x1, 0x1);
        gbc.writeMem(0xe8f5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf673);
        EXPECT(gbc.pc(), 0xe8f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8f5), 0xcb);
        EXPECT(gbc.readMem(0xe8f6), 0xf7);
        // CB F7 00AE
        gbc.setState(0xee63, 0xe420, 0x1e10, 0x8011, 0xbb02, 0x27ae, 0x1, 0x0);
        gbc.writeMem(0xee63, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe420);
        EXPECT(gbc.pc(), 0xee65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee63), 0xcb);
        EXPECT(gbc.readMem(0xee64), 0xf7);
        // CB F7 00AF
        gbc.setState(0x3ffc, 0xe06a, 0x39d0, 0xc74e, 0xacf4, 0xf0ac, 0x1, 0x0);
        gbc.writeMem(0x3ffc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe06a);
        EXPECT(gbc.pc(), 0x3ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00B0
        gbc.setState(0x4c45, 0x9722, 0x52d0, 0x2d3b, 0x2282, 0xf687, 0x0, 0x0);
        gbc.writeMem(0x4c45, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9722);
        EXPECT(gbc.pc(), 0x4c47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00B2
        gbc.setState(0xb364, 0x6558, 0x94b0, 0xf711, 0x850e, 0xcc95, 0x0, 0x0);
        gbc.writeMem(0xb364, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6558);
        EXPECT(gbc.pc(), 0xb366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb364), 0xcb);
        EXPECT(gbc.readMem(0xb365), 0xf7);
        // CB F7 00B3
        gbc.setState(0x703d, 0x271c, 0x2410, 0x6f5e, 0x495b, 0x5db0, 0x1, 0x0);
        gbc.writeMem(0x703d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x271c);
        EXPECT(gbc.pc(), 0x703f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00B4
        gbc.setState(0xce79, 0x77e8, 0xcf90, 0x84f3, 0x2c20, 0xd089, 0x0, 0x0);
        gbc.writeMem(0xce79, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x77e8);
        EXPECT(gbc.pc(), 0xce7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce79), 0xcb);
        EXPECT(gbc.readMem(0xce7a), 0xf7);
        // CB F7 00B5
        gbc.setState(0xb8f4, 0xdba5, 0xbdd0, 0x6741, 0x4e37, 0x882a, 0x1, 0x1);
        gbc.writeMem(0xb8f4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdba5);
        EXPECT(gbc.pc(), 0xb8f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f4), 0xcb);
        EXPECT(gbc.readMem(0xb8f5), 0xf7);
        // CB F7 00B6
        gbc.setState(0x8d4d, 0x660b, 0x5d60, 0x1e82, 0xdd03, 0x96de, 0x1, 0x0);
        gbc.writeMem(0x8d4d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x660b);
        EXPECT(gbc.pc(), 0x8d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4d), 0xcb);
        EXPECT(gbc.readMem(0x8d4e), 0xf7);
        // CB F7 00B7
        gbc.setState(0x5d7, 0x56e, 0x90a0, 0x7e6c, 0xafcf, 0x7cd7, 0x0, 0x1);
        gbc.writeMem(0x5d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x56e);
        EXPECT(gbc.pc(), 0x5d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00B8
        gbc.setState(0xe7bb, 0x8e15, 0x320, 0xcb20, 0x1780, 0xe612, 0x0, 0x1);
        gbc.writeMem(0xe7bb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8e15);
        EXPECT(gbc.pc(), 0xe7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bb), 0xcb);
        EXPECT(gbc.readMem(0xe7bc), 0xf7);
        // CB F7 00B9
        gbc.setState(0xea73, 0xc9dc, 0x7f20, 0x72d2, 0x2799, 0x591d, 0x1, 0x1);
        gbc.writeMem(0xea73, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc9dc);
        EXPECT(gbc.pc(), 0xea75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea73), 0xcb);
        EXPECT(gbc.readMem(0xea74), 0xf7);
        // CB F7 00BA
        gbc.setState(0x5897, 0x68e1, 0xf0e0, 0x6860, 0x9967, 0xf7fa, 0x1, 0x0);
        gbc.writeMem(0x5897, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x68e1);
        EXPECT(gbc.pc(), 0x5899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00BB
        gbc.setState(0x1c86, 0xe341, 0x3020, 0x6135, 0x7695, 0xa6a8, 0x1, 0x0);
        gbc.writeMem(0x1c86, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe341);
        EXPECT(gbc.pc(), 0x1c88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00BC
        gbc.setState(0xeada, 0xe7e1, 0x250, 0xd3a3, 0x3897, 0xea32, 0x0, 0x1);
        gbc.writeMem(0xeada, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe7e1);
        EXPECT(gbc.pc(), 0xeadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeada), 0xcb);
        EXPECT(gbc.readMem(0xeadb), 0xf7);
        // CB F7 00BD
        gbc.setState(0xdac4, 0x7e29, 0xc40, 0x7f6, 0x412a, 0x1f9b, 0x0, 0x1);
        gbc.writeMem(0xdac4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7e29);
        EXPECT(gbc.pc(), 0xdac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac4), 0xcb);
        EXPECT(gbc.readMem(0xdac5), 0xf7);
        // CB F7 00BE
        gbc.setState(0xe694, 0x7581, 0x24e0, 0x5b, 0xffd8, 0x4c95, 0x0, 0x1);
        gbc.writeMem(0xe694, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7581);
        EXPECT(gbc.pc(), 0xe696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe694), 0xcb);
        EXPECT(gbc.readMem(0xe695), 0xf7);
        // CB F7 00BF
        gbc.setState(0x9a52, 0x6d1c, 0xbac0, 0x9c76, 0x8ad5, 0x1275, 0x1, 0x1);
        gbc.writeMem(0x9a52, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6d1c);
        EXPECT(gbc.pc(), 0x9a54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a52), 0xcb);
        EXPECT(gbc.readMem(0x9a53), 0xf7);
        // CB F7 00C0
        gbc.setState(0x3634, 0x6fe0, 0x3f90, 0x4411, 0xe072, 0x6464, 0x0, 0x1);
        gbc.writeMem(0x3634, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6fe0);
        EXPECT(gbc.pc(), 0x3636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00C1
        gbc.setState(0xb963, 0x4a03, 0x5e50, 0x1b6, 0xc49e, 0x6658, 0x1, 0x1);
        gbc.writeMem(0xb963, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4a03);
        EXPECT(gbc.pc(), 0xb965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb963), 0xcb);
        EXPECT(gbc.readMem(0xb964), 0xf7);
        // CB F7 00C2
        gbc.setState(0x73ef, 0x64f6, 0xd9a0, 0x4b0d, 0x1ba6, 0xdde1, 0x1, 0x1);
        gbc.writeMem(0x73ef, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x64f6);
        EXPECT(gbc.pc(), 0x73f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00C3
        gbc.setState(0xa2af, 0xa1ea, 0xe670, 0x139c, 0x7825, 0xbba4, 0x1, 0x0);
        gbc.writeMem(0xa2af, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa1ea);
        EXPECT(gbc.pc(), 0xa2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2af), 0xcb);
        EXPECT(gbc.readMem(0xa2b0), 0xf7);
        // CB F7 00C4
        gbc.setState(0x4a31, 0x153, 0x9f20, 0x4768, 0x6b83, 0x6947, 0x0, 0x1);
        gbc.writeMem(0x4a31, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x153);
        EXPECT(gbc.pc(), 0x4a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00C5
        gbc.setState(0x7f2e, 0xf85c, 0x4530, 0x8786, 0x86c6, 0x7923, 0x0, 0x0);
        gbc.writeMem(0x7f2e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf85c);
        EXPECT(gbc.pc(), 0x7f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00C6
        gbc.setState(0xb5a0, 0xdbdf, 0xb940, 0x8ac0, 0x81f8, 0x5eb1, 0x0, 0x1);
        gbc.writeMem(0xb5a0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xdbdf);
        EXPECT(gbc.pc(), 0xb5a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a0), 0xcb);
        EXPECT(gbc.readMem(0xb5a1), 0xf7);
        // CB F7 00C7
        gbc.setState(0x88d7, 0x52c0, 0x6490, 0x3056, 0xa1dc, 0x2b1f, 0x0, 0x0);
        gbc.writeMem(0x88d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x52c0);
        EXPECT(gbc.pc(), 0x88d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88d7), 0xcb);
        EXPECT(gbc.readMem(0x88d8), 0xf7);
        // CB F7 00C8
        gbc.setState(0xe1b7, 0x8309, 0xe300, 0xc56d, 0x3694, 0x95a4, 0x1, 0x1);
        gbc.writeMem(0xe1b7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8309);
        EXPECT(gbc.pc(), 0xe1b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b7), 0xcb);
        EXPECT(gbc.readMem(0xe1b8), 0xf7);
        // CB F7 00C9
        gbc.setState(0x1db3, 0x83ce, 0x76a0, 0x5a2c, 0x94c2, 0xf2e5, 0x0, 0x1);
        gbc.writeMem(0x1db3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x83ce);
        EXPECT(gbc.pc(), 0x1db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00CA
        gbc.setState(0xa9dd, 0x943d, 0xa940, 0xf1a9, 0x885a, 0x619f, 0x0, 0x1);
        gbc.writeMem(0xa9dd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x943d);
        EXPECT(gbc.pc(), 0xa9df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9dd), 0xcb);
        EXPECT(gbc.readMem(0xa9de), 0xf7);
        // CB F7 00CB
        gbc.setState(0x98d8, 0x6778, 0x1000, 0xc87d, 0x5df3, 0x8fa1, 0x1, 0x0);
        gbc.writeMem(0x98d8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6778);
        EXPECT(gbc.pc(), 0x98da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d8), 0xcb);
        EXPECT(gbc.readMem(0x98d9), 0xf7);
        // CB F7 00CC
        gbc.setState(0xdaeb, 0xb50, 0x1710, 0x2a5e, 0xa923, 0x8562, 0x0, 0x0);
        gbc.writeMem(0xdaeb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb50);
        EXPECT(gbc.pc(), 0xdaed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaeb), 0xcb);
        EXPECT(gbc.readMem(0xdaec), 0xf7);
        // CB F7 00CD
        gbc.setState(0xe788, 0xd5a1, 0xfd30, 0x83f, 0xb759, 0xbf31, 0x0, 0x1);
        gbc.writeMem(0xe788, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd5a1);
        EXPECT(gbc.pc(), 0xe78a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe788), 0xcb);
        EXPECT(gbc.readMem(0xe789), 0xf7);
        // CB F7 00CE
        gbc.setState(0x8b5e, 0xcbcc, 0x90f0, 0xb241, 0x9c8f, 0x578f, 0x0, 0x1);
        gbc.writeMem(0x8b5e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcbcc);
        EXPECT(gbc.pc(), 0x8b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b5e), 0xcb);
        EXPECT(gbc.readMem(0x8b5f), 0xf7);
        // CB F7 00CF
        gbc.setState(0x73ca, 0x182e, 0x4ab0, 0x7a2e, 0xe0da, 0x80e3, 0x1, 0x0);
        gbc.writeMem(0x73ca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x182e);
        EXPECT(gbc.pc(), 0x73cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D0
        gbc.setState(0xb42, 0xd876, 0xf070, 0x70ee, 0x8d91, 0x46a3, 0x1, 0x0);
        gbc.writeMem(0xb42, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd876);
        EXPECT(gbc.pc(), 0xb44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D1
        gbc.setState(0x4b3f, 0x559e, 0x390, 0x8edc, 0x377, 0xa41d, 0x0, 0x1);
        gbc.writeMem(0x4b3f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x559e);
        EXPECT(gbc.pc(), 0x4b41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D2
        gbc.setState(0x31a7, 0x6a38, 0x9030, 0xbab0, 0x3268, 0x457f, 0x0, 0x1);
        gbc.writeMem(0x31a7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6a38);
        EXPECT(gbc.pc(), 0x31a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D3
        gbc.setState(0xc4b6, 0xca42, 0x2300, 0xcaca, 0x2961, 0xf265, 0x1, 0x0);
        gbc.writeMem(0xc4b6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xca42);
        EXPECT(gbc.pc(), 0xc4b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b6), 0xcb);
        EXPECT(gbc.readMem(0xc4b7), 0xf7);
        // CB F7 00D4
        gbc.setState(0x3014, 0x5455, 0xda80, 0x88f5, 0x1b54, 0x1ebf, 0x0, 0x1);
        gbc.writeMem(0x3014, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5455);
        EXPECT(gbc.pc(), 0x3016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00D5
        gbc.setState(0xaac9, 0x183d, 0xbeb0, 0x8f6a, 0xed30, 0x3682, 0x0, 0x0);
        gbc.writeMem(0xaac9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x183d);
        EXPECT(gbc.pc(), 0xaacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac9), 0xcb);
        EXPECT(gbc.readMem(0xaaca), 0xf7);
        // CB F7 00D6
        gbc.setState(0x7832, 0x7a97, 0xe350, 0x160c, 0x1006, 0xb556, 0x0, 0x1);
        gbc.writeMem(0x7832, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7a97);
        EXPECT(gbc.pc(), 0x7834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D7
        gbc.setState(0x480, 0x98e1, 0xa7f0, 0xfad, 0x1e1d, 0x19d8, 0x0, 0x0);
        gbc.writeMem(0x480, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x98e1);
        EXPECT(gbc.pc(), 0x482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00D8
        gbc.setState(0xb679, 0x949c, 0x8e70, 0x7c87, 0x6736, 0xe81d, 0x1, 0x1);
        gbc.writeMem(0xb679, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x949c);
        EXPECT(gbc.pc(), 0xb67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb679), 0xcb);
        EXPECT(gbc.readMem(0xb67a), 0xf7);
        // CB F7 00D9
        gbc.setState(0x2b6a, 0x5523, 0x29f0, 0xd21d, 0xf1cd, 0xf4e8, 0x1, 0x1);
        gbc.writeMem(0x2b6a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5523);
        EXPECT(gbc.pc(), 0x2b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00DA
        gbc.setState(0xdac8, 0x4718, 0xf850, 0x1dce, 0x696, 0xca36, 0x0, 0x1);
        gbc.writeMem(0xdac8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4718);
        EXPECT(gbc.pc(), 0xdaca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdac8), 0xcb);
        EXPECT(gbc.readMem(0xdac9), 0xf7);
        // CB F7 00DB
        gbc.setState(0x2d79, 0x57f3, 0xd3c0, 0xb44c, 0x8922, 0x8d35, 0x0, 0x0);
        gbc.writeMem(0x2d79, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x57f3);
        EXPECT(gbc.pc(), 0x2d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00DC
        gbc.setState(0x2c09, 0x13d0, 0x79f0, 0x7bac, 0x4af7, 0xb75b, 0x0, 0x1);
        gbc.writeMem(0x2c09, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x13d0);
        EXPECT(gbc.pc(), 0x2c0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00DD
        gbc.setState(0x44ca, 0xb695, 0x4270, 0x1171, 0x6855, 0x211b, 0x0, 0x0);
        gbc.writeMem(0x44ca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb695);
        EXPECT(gbc.pc(), 0x44cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00DE
        gbc.setState(0x6622, 0xba35, 0x7090, 0x2aea, 0xa16b, 0x74fe, 0x0, 0x1);
        gbc.writeMem(0x6622, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xba35);
        EXPECT(gbc.pc(), 0x6624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00DF
        gbc.setState(0xec20, 0x3ae7, 0xf840, 0xd32e, 0x93f6, 0x941d, 0x1, 0x0);
        gbc.writeMem(0xec20, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3ae7);
        EXPECT(gbc.pc(), 0xec22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec20), 0xcb);
        EXPECT(gbc.readMem(0xec21), 0xf7);
        // CB F7 00E0
        gbc.setState(0x138c, 0x79db, 0x6bd0, 0x8dfe, 0x77c, 0x62e6, 0x0, 0x1);
        gbc.writeMem(0x138c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x79db);
        EXPECT(gbc.pc(), 0x138e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00E1
        gbc.setState(0x790c, 0x4b57, 0x4350, 0xe50e, 0xc91, 0xdfde, 0x0, 0x1);
        gbc.writeMem(0x790c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4b57);
        EXPECT(gbc.pc(), 0x790e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00E3
        gbc.setState(0x736e, 0x182c, 0x9b70, 0xaf90, 0xfe92, 0x3863, 0x0, 0x1);
        gbc.writeMem(0x736e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x182c);
        EXPECT(gbc.pc(), 0x7370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00E4
        gbc.setState(0xcc56, 0xe4d4, 0x3840, 0x8324, 0x1652, 0x4d02, 0x1, 0x1);
        gbc.writeMem(0xcc56, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe4d4);
        EXPECT(gbc.pc(), 0xcc58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc56), 0xcb);
        EXPECT(gbc.readMem(0xcc57), 0xf7);
        // CB F7 00E5
        gbc.setState(0xc2f2, 0xb4ba, 0x63c0, 0x319, 0xcabd, 0x7375, 0x0, 0x1);
        gbc.writeMem(0xc2f2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb4ba);
        EXPECT(gbc.pc(), 0xc2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f2), 0xcb);
        EXPECT(gbc.readMem(0xc2f3), 0xf7);
        // CB F7 00E6
        gbc.setState(0x9b5, 0xe1c8, 0xe610, 0x22c2, 0xce11, 0xcbe8, 0x1, 0x0);
        gbc.writeMem(0x9b5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe1c8);
        EXPECT(gbc.pc(), 0x9b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00E7
        gbc.setState(0xdf7d, 0xf888, 0x74a0, 0xba6, 0x413f, 0x8449, 0x1, 0x1);
        gbc.writeMem(0xdf7d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf888);
        EXPECT(gbc.pc(), 0xdf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf7d), 0xcb);
        EXPECT(gbc.readMem(0xdf7e), 0xf7);
        // CB F7 00E8
        gbc.setState(0x4edd, 0xa9b6, 0x75e0, 0xa70, 0xbf1c, 0xfda1, 0x1, 0x0);
        gbc.writeMem(0x4edd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa9b6);
        EXPECT(gbc.pc(), 0x4edf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00E9
        gbc.setState(0x321, 0x719c, 0x1350, 0x50f8, 0xf83f, 0x358b, 0x1, 0x0);
        gbc.writeMem(0x321, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x719c);
        EXPECT(gbc.pc(), 0x323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00EB
        gbc.setState(0xa544, 0x7d86, 0x3b20, 0x8553, 0x4119, 0xa9a6, 0x1, 0x1);
        gbc.writeMem(0xa544, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7d86);
        EXPECT(gbc.pc(), 0xa546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa544), 0xcb);
        EXPECT(gbc.readMem(0xa545), 0xf7);
        // CB F7 00EC
        gbc.setState(0x3ee6, 0x3105, 0x9680, 0xa836, 0xc004, 0x4082, 0x0, 0x1);
        gbc.writeMem(0x3ee6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3105);
        EXPECT(gbc.pc(), 0x3ee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00ED
        gbc.setState(0x286, 0xdecd, 0xa500, 0x9aa1, 0x908e, 0xfdd1, 0x1, 0x1);
        gbc.writeMem(0x286, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdecd);
        EXPECT(gbc.pc(), 0x288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00EE
        gbc.setState(0x8bf9, 0x44f1, 0x1560, 0xe2c4, 0xeef2, 0xbd6a, 0x1, 0x1);
        gbc.writeMem(0x8bf9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x44f1);
        EXPECT(gbc.pc(), 0x8bfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf9), 0xcb);
        EXPECT(gbc.readMem(0x8bfa), 0xf7);
        // CB F7 00F0
        gbc.setState(0x4eb0, 0x132c, 0x5e70, 0x2b32, 0x4d70, 0x56b1, 0x1, 0x0);
        gbc.writeMem(0x4eb0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x132c);
        EXPECT(gbc.pc(), 0x4eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00F2
        gbc.setState(0x102a, 0xb600, 0x49e0, 0xf07a, 0xd638, 0x8f99, 0x0, 0x0);
        gbc.writeMem(0x102a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb600);
        EXPECT(gbc.pc(), 0x102c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00F3
        gbc.setState(0x28d8, 0xa597, 0xa530, 0x80fb, 0x4b9c, 0x1213, 0x0, 0x0);
        gbc.writeMem(0x28d8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa597);
        EXPECT(gbc.pc(), 0x28da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00F4
        gbc.setState(0xbf37, 0x85e4, 0xe90, 0x90bc, 0x9239, 0x91aa, 0x0, 0x1);
        gbc.writeMem(0xbf37, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x85e4);
        EXPECT(gbc.pc(), 0xbf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf37), 0xcb);
        EXPECT(gbc.readMem(0xbf38), 0xf7);
        // CB F7 00F5
        gbc.setState(0x18a0, 0xb746, 0x9c0, 0xfa72, 0xf081, 0xd54e, 0x1, 0x0);
        gbc.writeMem(0x18a0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb746);
        EXPECT(gbc.pc(), 0x18a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00F6
        gbc.setState(0xa2c1, 0xece7, 0x52d0, 0x4bf5, 0x6dc2, 0xa28a, 0x1, 0x1);
        gbc.writeMem(0xa2c1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xece7);
        EXPECT(gbc.pc(), 0xa2c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c1), 0xcb);
        EXPECT(gbc.readMem(0xa2c2), 0xf7);
        // CB F7 00F7
        gbc.setState(0x18c4, 0x299f, 0x3eb0, 0x7964, 0xd50a, 0x9257, 0x0, 0x1);
        gbc.writeMem(0x18c4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x299f);
        EXPECT(gbc.pc(), 0x18c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00F8
        gbc.setState(0x57b8, 0xb4a3, 0xdec0, 0xa97a, 0x9a11, 0x3a90, 0x1, 0x1);
        gbc.writeMem(0x57b8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb4a3);
        EXPECT(gbc.pc(), 0x57ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00F9
        gbc.setState(0x6300, 0x6235, 0x7e90, 0xe08a, 0xe6e4, 0xedb8, 0x0, 0x1);
        gbc.writeMem(0x6300, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6235);
        EXPECT(gbc.pc(), 0x6302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00FA
        gbc.setState(0xc26, 0xd2a8, 0x66b0, 0x74e8, 0x5201, 0x1c24, 0x0, 0x0);
        gbc.writeMem(0xc26, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd2a8);
        EXPECT(gbc.pc(), 0xc28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00FB
        gbc.setState(0x616, 0xc1e2, 0x3700, 0x1ce9, 0x57d2, 0x3986, 0x0, 0x1);
        gbc.writeMem(0x616, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc1e2);
        EXPECT(gbc.pc(), 0x618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 00FC
        gbc.setState(0xdee4, 0xcd47, 0x800, 0xffd7, 0xeda5, 0x3945, 0x0, 0x1);
        gbc.writeMem(0xdee4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcd47);
        EXPECT(gbc.pc(), 0xdee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee4), 0xcb);
        EXPECT(gbc.readMem(0xdee5), 0xf7);
        // CB F7 00FD
        gbc.setState(0x78ff, 0x9779, 0xfd0, 0xe072, 0x6d06, 0xc0eb, 0x1, 0x1);
        gbc.writeMem(0x78ff, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9779);
        EXPECT(gbc.pc(), 0x7901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 00FE
        gbc.setState(0xd1c8, 0xd53e, 0x30a0, 0xd3b6, 0xa924, 0xd063, 0x1, 0x0);
        gbc.writeMem(0xd1c8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd53e);
        EXPECT(gbc.pc(), 0xd1ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c8), 0xcb);
        EXPECT(gbc.readMem(0xd1c9), 0xf7);
        // CB F7 00FF
        gbc.setState(0xd4d7, 0x770d, 0x40b0, 0x5682, 0xdb1e, 0xcf78, 0x1, 0x0);
        gbc.writeMem(0xd4d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x770d);
        EXPECT(gbc.pc(), 0xd4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d7), 0xcb);
        EXPECT(gbc.readMem(0xd4d8), 0xf7);
        // CB F7 0100
        gbc.setState(0x49ae, 0x44cb, 0xce70, 0x6aa7, 0x5ac0, 0xd28e, 0x0, 0x0);
        gbc.writeMem(0x49ae, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x44cb);
        EXPECT(gbc.pc(), 0x49b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0101
        gbc.setState(0x1f38, 0xe20b, 0xfbb0, 0x6b94, 0xb823, 0x978, 0x1, 0x0);
        gbc.writeMem(0x1f38, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe20b);
        EXPECT(gbc.pc(), 0x1f3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0102
        gbc.setState(0x2c8f, 0x45cb, 0x8d70, 0x5959, 0xa7c, 0x785f, 0x1, 0x1);
        gbc.writeMem(0x2c8f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x45cb);
        EXPECT(gbc.pc(), 0x2c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0103
        gbc.setState(0x2a87, 0xec44, 0xa740, 0x3e31, 0x5f66, 0x9560, 0x1, 0x0);
        gbc.writeMem(0x2a87, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xec44);
        EXPECT(gbc.pc(), 0x2a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0104
        gbc.setState(0x4d60, 0xc149, 0x5fc0, 0xbba6, 0x2723, 0xce4, 0x0, 0x1);
        gbc.writeMem(0x4d60, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc149);
        EXPECT(gbc.pc(), 0x4d62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0105
        gbc.setState(0x6a34, 0x1c5a, 0xacb0, 0xc267, 0xe875, 0x307e, 0x0, 0x1);
        gbc.writeMem(0x6a34, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1c5a);
        EXPECT(gbc.pc(), 0x6a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0106
        gbc.setState(0xb93b, 0x4083, 0xc740, 0x9a56, 0x9a77, 0x1826, 0x1, 0x1);
        gbc.writeMem(0xb93b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4083);
        EXPECT(gbc.pc(), 0xb93d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93b), 0xcb);
        EXPECT(gbc.readMem(0xb93c), 0xf7);
        // CB F7 0107
        gbc.setState(0xd80b, 0x4761, 0x8dd0, 0x84d3, 0xad24, 0x45b6, 0x0, 0x1);
        gbc.writeMem(0xd80b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4761);
        EXPECT(gbc.pc(), 0xd80d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80b), 0xcb);
        EXPECT(gbc.readMem(0xd80c), 0xf7);
        // CB F7 0108
        gbc.setState(0x4fdc, 0x3771, 0x9100, 0x29ee, 0xc7d, 0x7557, 0x0, 0x1);
        gbc.writeMem(0x4fdc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3771);
        EXPECT(gbc.pc(), 0x4fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0109
        gbc.setState(0x63e0, 0xa658, 0xf1d0, 0x38d9, 0xf63, 0x432d, 0x0, 0x1);
        gbc.writeMem(0x63e0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa658);
        EXPECT(gbc.pc(), 0x63e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 010A
        gbc.setState(0x2bd0, 0x4d6e, 0x5da0, 0xab0a, 0x9620, 0x2af5, 0x1, 0x1);
        gbc.writeMem(0x2bd0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4d6e);
        EXPECT(gbc.pc(), 0x2bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 010B
        gbc.setState(0x182b, 0xac18, 0xdd60, 0x5a8f, 0xf867, 0x240f, 0x0, 0x0);
        gbc.writeMem(0x182b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xac18);
        EXPECT(gbc.pc(), 0x182d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 010C
        gbc.setState(0xddbe, 0xe591, 0x1bc0, 0xef12, 0x6cdd, 0x30e8, 0x1, 0x1);
        gbc.writeMem(0xddbe, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe591);
        EXPECT(gbc.pc(), 0xddc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddbe), 0xcb);
        EXPECT(gbc.readMem(0xddbf), 0xf7);
        // CB F7 010D
        gbc.setState(0xe34e, 0x3147, 0x1d0, 0x1a9f, 0x1909, 0xd2b6, 0x1, 0x1);
        gbc.writeMem(0xe34e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3147);
        EXPECT(gbc.pc(), 0xe350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe34e), 0xcb);
        EXPECT(gbc.readMem(0xe34f), 0xf7);
        // CB F7 010E
        gbc.setState(0xf9f, 0xedf3, 0xbd20, 0x72e1, 0xaabf, 0x87eb, 0x0, 0x0);
        gbc.writeMem(0xf9f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xedf3);
        EXPECT(gbc.pc(), 0xfa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 010F
        gbc.setState(0xb88, 0xb9a4, 0x2600, 0x2ef6, 0x6cd8, 0xb028, 0x0, 0x1);
        gbc.writeMem(0xb88, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb9a4);
        EXPECT(gbc.pc(), 0xb8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0110
        gbc.setState(0x9524, 0x4d90, 0xda0, 0x6584, 0x9147, 0x34b1, 0x0, 0x0);
        gbc.writeMem(0x9524, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4d90);
        EXPECT(gbc.pc(), 0x9526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9524), 0xcb);
        EXPECT(gbc.readMem(0x9525), 0xf7);
        // CB F7 0111
        gbc.setState(0x15e5, 0xdffd, 0x3ce0, 0x316c, 0xc83d, 0xc1e1, 0x1, 0x1);
        gbc.writeMem(0x15e5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdffd);
        EXPECT(gbc.pc(), 0x15e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0112
        gbc.setState(0x79b1, 0xa89e, 0xf8b0, 0xa6ce, 0x33f1, 0x1e05, 0x1, 0x0);
        gbc.writeMem(0x79b1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa89e);
        EXPECT(gbc.pc(), 0x79b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0113
        gbc.setState(0xc83e, 0x7351, 0x72f0, 0x3e46, 0xa667, 0xedfd, 0x0, 0x0);
        gbc.writeMem(0xc83e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7351);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc83e), 0xcb);
        EXPECT(gbc.readMem(0xc83f), 0xf7);
        // CB F7 0114
        gbc.setState(0x4631, 0xfd1f, 0x2180, 0xb93a, 0x7472, 0x16d8, 0x1, 0x1);
        gbc.writeMem(0x4631, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfd1f);
        EXPECT(gbc.pc(), 0x4633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0115
        gbc.setState(0x7150, 0x4bfa, 0x7b90, 0xb417, 0x940a, 0xb19d, 0x0, 0x1);
        gbc.writeMem(0x7150, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4bfa);
        EXPECT(gbc.pc(), 0x7152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0116
        gbc.setState(0xedf9, 0xc976, 0x13a0, 0x5a2d, 0x264e, 0xf0a8, 0x0, 0x0);
        gbc.writeMem(0xedf9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc976);
        EXPECT(gbc.pc(), 0xedfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf9), 0xcb);
        EXPECT(gbc.readMem(0xedfa), 0xf7);
        // CB F7 0117
        gbc.setState(0x179a, 0xd5a5, 0x63b0, 0x363c, 0xc521, 0xd1b7, 0x0, 0x0);
        gbc.writeMem(0x179a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd5a5);
        EXPECT(gbc.pc(), 0x179c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0118
        gbc.setState(0x8b9e, 0xb4b9, 0xe670, 0xd89, 0x2702, 0xe150, 0x1, 0x1);
        gbc.writeMem(0x8b9e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb4b9);
        EXPECT(gbc.pc(), 0x8ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b9e), 0xcb);
        EXPECT(gbc.readMem(0x8b9f), 0xf7);
        // CB F7 0119
        gbc.setState(0xae82, 0x69f4, 0x63b0, 0x6393, 0x11a2, 0x3ce4, 0x1, 0x1);
        gbc.writeMem(0xae82, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x69f4);
        EXPECT(gbc.pc(), 0xae84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae82), 0xcb);
        EXPECT(gbc.readMem(0xae83), 0xf7);
        // CB F7 011A
        gbc.setState(0x4a83, 0x14ea, 0x2580, 0x15ba, 0xe71e, 0x92a9, 0x1, 0x0);
        gbc.writeMem(0x4a83, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x14ea);
        EXPECT(gbc.pc(), 0x4a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 011B
        gbc.setState(0x1333, 0x62e6, 0xf40, 0x2e00, 0x8bbe, 0xbf6e, 0x0, 0x0);
        gbc.writeMem(0x1333, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x62e6);
        EXPECT(gbc.pc(), 0x1335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 011C
        gbc.setState(0xd60d, 0x19b, 0x500, 0x8cb3, 0x568d, 0xf54a, 0x0, 0x1);
        gbc.writeMem(0xd60d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x19b);
        EXPECT(gbc.pc(), 0xd60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd60d), 0xcb);
        EXPECT(gbc.readMem(0xd60e), 0xf7);
        // CB F7 011D
        gbc.setState(0x196, 0xbb1f, 0x8bb0, 0x3984, 0xac76, 0x67ca, 0x1, 0x1);
        gbc.writeMem(0x196, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbb1f);
        EXPECT(gbc.pc(), 0x198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 011E
        gbc.setState(0x1b68, 0x6d4e, 0xbf70, 0x34a7, 0x710f, 0x352a, 0x0, 0x0);
        gbc.writeMem(0x1b68, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6d4e);
        EXPECT(gbc.pc(), 0x1b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 011F
        gbc.setState(0xbed9, 0x40f7, 0x6050, 0x15be, 0xa8c2, 0xfa6, 0x1, 0x1);
        gbc.writeMem(0xbed9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x40f7);
        EXPECT(gbc.pc(), 0xbedb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed9), 0xcb);
        EXPECT(gbc.readMem(0xbeda), 0xf7);
        // CB F7 0120
        gbc.setState(0xbb6b, 0xba98, 0x6660, 0xe8a0, 0x7e2d, 0x8315, 0x0, 0x1);
        gbc.writeMem(0xbb6b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xba98);
        EXPECT(gbc.pc(), 0xbb6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6b), 0xcb);
        EXPECT(gbc.readMem(0xbb6c), 0xf7);
        // CB F7 0121
        gbc.setState(0x52d0, 0x552b, 0x8210, 0x5aed, 0x2076, 0x6271, 0x1, 0x1);
        gbc.writeMem(0x52d0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x552b);
        EXPECT(gbc.pc(), 0x52d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0122
        gbc.setState(0x739e, 0xc042, 0x13d0, 0x3dc0, 0xf876, 0x2b9f, 0x0, 0x1);
        gbc.writeMem(0x739e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc042);
        EXPECT(gbc.pc(), 0x73a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0123
        gbc.setState(0x5a22, 0xf3d2, 0x4be0, 0xe830, 0xb5a9, 0xf6a0, 0x1, 0x0);
        gbc.writeMem(0x5a22, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf3d2);
        EXPECT(gbc.pc(), 0x5a24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0124
        gbc.setState(0x2095, 0xe40c, 0xc10, 0xd474, 0x50db, 0xd339, 0x0, 0x0);
        gbc.writeMem(0x2095, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe40c);
        EXPECT(gbc.pc(), 0x2097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0125
        gbc.setState(0x3bb3, 0x5948, 0x83e0, 0x5489, 0xaa1, 0x8f3b, 0x1, 0x1);
        gbc.writeMem(0x3bb3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5948);
        EXPECT(gbc.pc(), 0x3bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0126
        gbc.setState(0x1e05, 0xca2a, 0x11f0, 0x8268, 0x382c, 0x9b4, 0x0, 0x0);
        gbc.writeMem(0x1e05, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xca2a);
        EXPECT(gbc.pc(), 0x1e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0127
        gbc.setState(0x6a48, 0xc2ec, 0xb790, 0x178, 0x2877, 0x57a4, 0x1, 0x1);
        gbc.writeMem(0x6a48, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc2ec);
        EXPECT(gbc.pc(), 0x6a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0128
        gbc.setState(0x6f5a, 0xe89d, 0x19c0, 0x8fe0, 0x61d2, 0x179d, 0x0, 0x0);
        gbc.writeMem(0x6f5a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe89d);
        EXPECT(gbc.pc(), 0x6f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0129
        gbc.setState(0x2cbf, 0x29ed, 0x84e0, 0x8da2, 0x8d3a, 0x71a2, 0x0, 0x0);
        gbc.writeMem(0x2cbf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x29ed);
        EXPECT(gbc.pc(), 0x2cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 012A
        gbc.setState(0x6ce3, 0x297d, 0x37a0, 0xa85d, 0xb1b5, 0xf0b2, 0x1, 0x0);
        gbc.writeMem(0x6ce3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x297d);
        EXPECT(gbc.pc(), 0x6ce5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 012B
        gbc.setState(0xb092, 0xb012, 0xcd10, 0x65ec, 0xadc, 0xaaa3, 0x1, 0x0);
        gbc.writeMem(0xb092, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb012);
        EXPECT(gbc.pc(), 0xb094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb092), 0xcb);
        EXPECT(gbc.readMem(0xb093), 0xf7);
        // CB F7 012C
        gbc.setState(0xb469, 0x7c9, 0x81b0, 0x4e02, 0xb3b5, 0xd3f3, 0x1, 0x0);
        gbc.writeMem(0xb469, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7c9);
        EXPECT(gbc.pc(), 0xb46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb469), 0xcb);
        EXPECT(gbc.readMem(0xb46a), 0xf7);
        // CB F7 012D
        gbc.setState(0x873c, 0x7135, 0xb2e0, 0x91c9, 0xbd32, 0xa927, 0x1, 0x0);
        gbc.writeMem(0x873c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7135);
        EXPECT(gbc.pc(), 0x873e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873c), 0xcb);
        EXPECT(gbc.readMem(0x873d), 0xf7);
        // CB F7 012E
        gbc.setState(0x3fe, 0x5d1b, 0x3640, 0x506e, 0x42, 0xda85, 0x0, 0x1);
        gbc.writeMem(0x3fe, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5d1b);
        EXPECT(gbc.pc(), 0x400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 012F
        gbc.setState(0xadee, 0x5984, 0x85c0, 0xf7e6, 0xabf0, 0x934b, 0x0, 0x0);
        gbc.writeMem(0xadee, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5984);
        EXPECT(gbc.pc(), 0xadf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadee), 0xcb);
        EXPECT(gbc.readMem(0xadef), 0xf7);
        // CB F7 0130
        gbc.setState(0x9f03, 0x8207, 0xcb00, 0x6af0, 0x7676, 0x76a6, 0x0, 0x1);
        gbc.writeMem(0x9f03, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8207);
        EXPECT(gbc.pc(), 0x9f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f03), 0xcb);
        EXPECT(gbc.readMem(0x9f04), 0xf7);
        // CB F7 0131
        gbc.setState(0x4573, 0x47e4, 0xf5f0, 0x9a33, 0xf7ce, 0x5f87, 0x0, 0x1);
        gbc.writeMem(0x4573, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x47e4);
        EXPECT(gbc.pc(), 0x4575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0132
        gbc.setState(0x1fea, 0xa3c5, 0xf100, 0x1a0, 0x8427, 0x778d, 0x1, 0x0);
        gbc.writeMem(0x1fea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa3c5);
        EXPECT(gbc.pc(), 0x1fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0133
        gbc.setState(0xd94b, 0x5da3, 0xd60, 0x9104, 0x60ac, 0xde03, 0x0, 0x1);
        gbc.writeMem(0xd94b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5da3);
        EXPECT(gbc.pc(), 0xd94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94b), 0xcb);
        EXPECT(gbc.readMem(0xd94c), 0xf7);
        // CB F7 0134
        gbc.setState(0x6b2d, 0x267a, 0xb2d0, 0x752b, 0x82e3, 0xcb96, 0x1, 0x0);
        gbc.writeMem(0x6b2d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x267a);
        EXPECT(gbc.pc(), 0x6b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0135
        gbc.setState(0x6c26, 0x48a6, 0xb720, 0x2217, 0x20ff, 0xaff3, 0x0, 0x1);
        gbc.writeMem(0x6c26, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x48a6);
        EXPECT(gbc.pc(), 0x6c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0136
        gbc.setState(0x61ea, 0x4583, 0x6ad0, 0xdbc0, 0x8744, 0xe786, 0x0, 0x1);
        gbc.writeMem(0x61ea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4583);
        EXPECT(gbc.pc(), 0x61ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0137
        gbc.setState(0xdc1a, 0x2de6, 0x2700, 0x7f7b, 0xdf09, 0xa9ae, 0x0, 0x1);
        gbc.writeMem(0xdc1a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2de6);
        EXPECT(gbc.pc(), 0xdc1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1a), 0xcb);
        EXPECT(gbc.readMem(0xdc1b), 0xf7);
        // CB F7 0138
        gbc.setState(0x973e, 0x349, 0xdc00, 0x4b66, 0xea32, 0x4a9e, 0x1, 0x1);
        gbc.writeMem(0x973e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x349);
        EXPECT(gbc.pc(), 0x9740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x973e), 0xcb);
        EXPECT(gbc.readMem(0x973f), 0xf7);
        // CB F7 0139
        gbc.setState(0x6492, 0xa00d, 0x7990, 0x65f4, 0x6a44, 0xe1a4, 0x0, 0x1);
        gbc.writeMem(0x6492, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa00d);
        EXPECT(gbc.pc(), 0x6494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 013A
        gbc.setState(0x5ed, 0x54b, 0xaa20, 0xa36d, 0xdd82, 0xebae, 0x1, 0x1);
        gbc.writeMem(0x5ed, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x54b);
        EXPECT(gbc.pc(), 0x5ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 013B
        gbc.setState(0x15ba, 0xb675, 0xc150, 0x9a53, 0xa08b, 0xe089, 0x1, 0x0);
        gbc.writeMem(0x15ba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb675);
        EXPECT(gbc.pc(), 0x15bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 013C
        gbc.setState(0x64b4, 0x4a4a, 0x77c0, 0x4cbb, 0x19fa, 0xb216, 0x1, 0x1);
        gbc.writeMem(0x64b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4a4a);
        EXPECT(gbc.pc(), 0x64b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 013D
        gbc.setState(0xc857, 0xbd7c, 0x4350, 0x7949, 0x4dd1, 0xe097, 0x1, 0x1);
        gbc.writeMem(0xc857, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbd7c);
        EXPECT(gbc.pc(), 0xc859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc857), 0xcb);
        EXPECT(gbc.readMem(0xc858), 0xf7);
        // CB F7 013E
        gbc.setState(0xc78e, 0x9500, 0xa9b0, 0x6275, 0xcd99, 0x983b, 0x1, 0x0);
        gbc.writeMem(0xc78e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x9500);
        EXPECT(gbc.pc(), 0xc790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc78e), 0xcb);
        EXPECT(gbc.readMem(0xc78f), 0xf7);
        // CB F7 013F
        gbc.setState(0x5746, 0xfd3e, 0xb3f0, 0x542e, 0xd9cf, 0x5710, 0x0, 0x1);
        gbc.writeMem(0x5746, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfd3e);
        EXPECT(gbc.pc(), 0x5748);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0140
        gbc.setState(0x8e67, 0xd9da, 0x7bf0, 0x4e60, 0x4255, 0x775f, 0x1, 0x0);
        gbc.writeMem(0x8e67, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd9da);
        EXPECT(gbc.pc(), 0x8e69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e67), 0xcb);
        EXPECT(gbc.readMem(0x8e68), 0xf7);
        // CB F7 0141
        gbc.setState(0x58bb, 0xaa83, 0xe650, 0xa109, 0xaa04, 0x4fc0, 0x1, 0x0);
        gbc.writeMem(0x58bb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xaa83);
        EXPECT(gbc.pc(), 0x58bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0142
        gbc.setState(0x530d, 0x68c6, 0xa970, 0x7b76, 0x5b33, 0xc2a9, 0x0, 0x0);
        gbc.writeMem(0x530d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x68c6);
        EXPECT(gbc.pc(), 0x530f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0143
        gbc.setState(0xf92, 0x4b04, 0xd250, 0x7a12, 0xd5f, 0x25c6, 0x0, 0x0);
        gbc.writeMem(0xf92, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4b04);
        EXPECT(gbc.pc(), 0xf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0144
        gbc.setState(0x7bdd, 0xca0a, 0xe600, 0xf1d0, 0x3432, 0x6c4c, 0x1, 0x1);
        gbc.writeMem(0x7bdd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xca0a);
        EXPECT(gbc.pc(), 0x7bdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0145
        gbc.setState(0x5f8, 0x5e1f, 0x24d0, 0x654c, 0x192d, 0x91a4, 0x0, 0x1);
        gbc.writeMem(0x5f8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5e1f);
        EXPECT(gbc.pc(), 0x5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0146
        gbc.setState(0xbdf1, 0xa4c0, 0xeab0, 0x30f7, 0x754, 0x9ea4, 0x0, 0x1);
        gbc.writeMem(0xbdf1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa4c0);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf1), 0xcb);
        EXPECT(gbc.readMem(0xbdf2), 0xf7);
        // CB F7 0147
        gbc.setState(0x64bd, 0xc6f3, 0x6040, 0x7f85, 0xd3f6, 0x65a0, 0x0, 0x0);
        gbc.writeMem(0x64bd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc6f3);
        EXPECT(gbc.pc(), 0x64bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0148
        gbc.setState(0xdc68, 0xe644, 0xffd0, 0xb215, 0x1fe1, 0xbd84, 0x1, 0x0);
        gbc.writeMem(0xdc68, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe644);
        EXPECT(gbc.pc(), 0xdc6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc68), 0xcb);
        EXPECT(gbc.readMem(0xdc69), 0xf7);
        // CB F7 0149
        gbc.setState(0x35f3, 0x34bb, 0x4bc0, 0xaf0a, 0xa41c, 0x5e68, 0x1, 0x1);
        gbc.writeMem(0x35f3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x34bb);
        EXPECT(gbc.pc(), 0x35f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 014A
        gbc.setState(0xe142, 0x7d0, 0x6e0, 0x935b, 0xfc70, 0x4aa0, 0x0, 0x0);
        gbc.writeMem(0xe142, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7d0);
        EXPECT(gbc.pc(), 0xe144);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe142), 0xcb);
        EXPECT(gbc.readMem(0xe143), 0xf7);
        // CB F7 014C
        gbc.setState(0x98f9, 0xfad2, 0x84c0, 0xed99, 0xc297, 0xa4b9, 0x0, 0x1);
        gbc.writeMem(0x98f9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfad2);
        EXPECT(gbc.pc(), 0x98fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f9), 0xcb);
        EXPECT(gbc.readMem(0x98fa), 0xf7);
        // CB F7 014D
        gbc.setState(0x2db, 0x9ef4, 0xfed0, 0x93db, 0xe818, 0xd4d3, 0x1, 0x0);
        gbc.writeMem(0x2db, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9ef4);
        EXPECT(gbc.pc(), 0x2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 014E
        gbc.setState(0x1e4a, 0xe778, 0xb8e0, 0xdff0, 0x2314, 0x41c8, 0x0, 0x1);
        gbc.writeMem(0x1e4a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe778);
        EXPECT(gbc.pc(), 0x1e4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 014F
        gbc.setState(0x6be9, 0xf498, 0xafc0, 0x7ec7, 0x30f7, 0x5cab, 0x1, 0x0);
        gbc.writeMem(0x6be9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf498);
        EXPECT(gbc.pc(), 0x6beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0150
        gbc.setState(0x71d2, 0x49ec, 0xe4e0, 0x4bb6, 0x6745, 0x7511, 0x1, 0x0);
        gbc.writeMem(0x71d2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x49ec);
        EXPECT(gbc.pc(), 0x71d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0151
        gbc.setState(0x306f, 0xa9d1, 0x68f0, 0xb71d, 0x5a66, 0x7f45, 0x0, 0x0);
        gbc.writeMem(0x306f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa9d1);
        EXPECT(gbc.pc(), 0x3071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0152
        gbc.setState(0x29ca, 0x731e, 0x80e0, 0x57ff, 0x3b2e, 0x24e6, 0x1, 0x0);
        gbc.writeMem(0x29ca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x731e);
        EXPECT(gbc.pc(), 0x29cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0154
        gbc.setState(0x1585, 0xa538, 0x29e0, 0x7c30, 0x2fdf, 0xe560, 0x0, 0x1);
        gbc.writeMem(0x1585, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa538);
        EXPECT(gbc.pc(), 0x1587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0155
        gbc.setState(0xe7d3, 0x3d4c, 0xd640, 0xf736, 0xa0e0, 0x296b, 0x0, 0x0);
        gbc.writeMem(0xe7d3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3d4c);
        EXPECT(gbc.pc(), 0xe7d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d3), 0xcb);
        EXPECT(gbc.readMem(0xe7d4), 0xf7);
        // CB F7 0156
        gbc.setState(0x5a53, 0x9e83, 0x7520, 0x40aa, 0xccf4, 0xf1ae, 0x0, 0x1);
        gbc.writeMem(0x5a53, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9e83);
        EXPECT(gbc.pc(), 0x5a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0157
        gbc.setState(0x52db, 0xb268, 0x17c0, 0x873e, 0x9d52, 0xfba0, 0x0, 0x0);
        gbc.writeMem(0x52db, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb268);
        EXPECT(gbc.pc(), 0x52dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0158
        gbc.setState(0x7547, 0x19be, 0xa3c0, 0xe03e, 0x4de7, 0xea8e, 0x0, 0x0);
        gbc.writeMem(0x7547, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x19be);
        EXPECT(gbc.pc(), 0x7549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0159
        gbc.setState(0x4be5, 0xd763, 0xbb90, 0xe5ae, 0xd99b, 0x1557, 0x0, 0x0);
        gbc.writeMem(0x4be5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd763);
        EXPECT(gbc.pc(), 0x4be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 015A
        gbc.setState(0x865f, 0xda56, 0x9d60, 0x9a5b, 0x363, 0x92a7, 0x1, 0x1);
        gbc.writeMem(0x865f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xda56);
        EXPECT(gbc.pc(), 0x8661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865f), 0xcb);
        EXPECT(gbc.readMem(0x8660), 0xf7);
        // CB F7 015B
        gbc.setState(0x740f, 0x24a5, 0x1650, 0xc5c2, 0x4b67, 0x505f, 0x1, 0x1);
        gbc.writeMem(0x740f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x24a5);
        EXPECT(gbc.pc(), 0x7411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 015C
        gbc.setState(0x75bb, 0xafdf, 0xced0, 0xd50c, 0x9a16, 0x7156, 0x1, 0x0);
        gbc.writeMem(0x75bb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xafdf);
        EXPECT(gbc.pc(), 0x75bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 015D
        gbc.setState(0xd441, 0x5f3a, 0x5840, 0x9a86, 0x90c5, 0xb085, 0x1, 0x0);
        gbc.writeMem(0xd441, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5f3a);
        EXPECT(gbc.pc(), 0xd443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd441), 0xcb);
        EXPECT(gbc.readMem(0xd442), 0xf7);
        // CB F7 015E
        gbc.setState(0xaa1c, 0x7e5e, 0x32c0, 0x89e7, 0xcca0, 0x53dd, 0x1, 0x0);
        gbc.writeMem(0xaa1c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7e5e);
        EXPECT(gbc.pc(), 0xaa1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa1c), 0xcb);
        EXPECT(gbc.readMem(0xaa1d), 0xf7);
        // CB F7 015F
        gbc.setState(0x65d4, 0x5733, 0x2e50, 0x3d71, 0xe277, 0xbd6d, 0x0, 0x1);
        gbc.writeMem(0x65d4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5733);
        EXPECT(gbc.pc(), 0x65d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0160
        gbc.setState(0x48a7, 0xa74b, 0xd0, 0x4df2, 0x624b, 0xb440, 0x0, 0x0);
        gbc.writeMem(0x48a7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa74b);
        EXPECT(gbc.pc(), 0x48a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0161
        gbc.setState(0x8834, 0x6d64, 0xd560, 0x5f7e, 0x3fca, 0xd684, 0x0, 0x1);
        gbc.writeMem(0x8834, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6d64);
        EXPECT(gbc.pc(), 0x8836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8834), 0xcb);
        EXPECT(gbc.readMem(0x8835), 0xf7);
        // CB F7 0162
        gbc.setState(0xe310, 0x6d66, 0xdfd0, 0xbd38, 0x43a4, 0xea, 0x1, 0x1);
        gbc.writeMem(0xe310, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6d66);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe310), 0xcb);
        EXPECT(gbc.readMem(0xe311), 0xf7);
        // CB F7 0163
        gbc.setState(0x1a03, 0xa39c, 0xd690, 0xd32, 0x60d7, 0x782c, 0x0, 0x0);
        gbc.writeMem(0x1a03, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa39c);
        EXPECT(gbc.pc(), 0x1a05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0164
        gbc.setState(0x5ad6, 0xdf5a, 0x9410, 0x4c1e, 0xd181, 0x391c, 0x0, 0x1);
        gbc.writeMem(0x5ad6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdf5a);
        EXPECT(gbc.pc(), 0x5ad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0165
        gbc.setState(0x7e74, 0xf87d, 0x4d10, 0x3d06, 0x77d5, 0x69dd, 0x1, 0x1);
        gbc.writeMem(0x7e74, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf87d);
        EXPECT(gbc.pc(), 0x7e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0167
        gbc.setState(0x6824, 0x5b6, 0x5570, 0xd563, 0x8cfb, 0xc7ad, 0x0, 0x0);
        gbc.writeMem(0x6824, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5b6);
        EXPECT(gbc.pc(), 0x6826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0168
        gbc.setState(0x9a51, 0x94b0, 0x9860, 0x606b, 0x9d03, 0x2443, 0x1, 0x1);
        gbc.writeMem(0x9a51, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x94b0);
        EXPECT(gbc.pc(), 0x9a53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a51), 0xcb);
        EXPECT(gbc.readMem(0x9a52), 0xf7);
        // CB F7 0169
        gbc.setState(0x31c5, 0x7d90, 0x6f50, 0xb601, 0x147f, 0x2da0, 0x1, 0x0);
        gbc.writeMem(0x31c5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7d90);
        EXPECT(gbc.pc(), 0x31c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 016A
        gbc.setState(0x4152, 0x4878, 0x2f40, 0x7a39, 0x1c82, 0x6168, 0x1, 0x0);
        gbc.writeMem(0x4152, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4878);
        EXPECT(gbc.pc(), 0x4154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 016B
        gbc.setState(0x591d, 0x623f, 0xd50, 0x7cda, 0xea84, 0xe025, 0x1, 0x1);
        gbc.writeMem(0x591d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x623f);
        EXPECT(gbc.pc(), 0x591f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 016C
        gbc.setState(0xa57a, 0xa16a, 0xd180, 0x2b37, 0x8dff, 0x119b, 0x0, 0x1);
        gbc.writeMem(0xa57a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa16a);
        EXPECT(gbc.pc(), 0xa57c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa57a), 0xcb);
        EXPECT(gbc.readMem(0xa57b), 0xf7);
        // CB F7 016D
        gbc.setState(0x92aa, 0xd96c, 0x8c10, 0x2408, 0xf140, 0x4935, 0x0, 0x1);
        gbc.writeMem(0x92aa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd96c);
        EXPECT(gbc.pc(), 0x92ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92aa), 0xcb);
        EXPECT(gbc.readMem(0x92ab), 0xf7);
        // CB F7 016E
        gbc.setState(0xae88, 0xea64, 0x8520, 0x9e97, 0x60c6, 0x8ce0, 0x0, 0x1);
        gbc.writeMem(0xae88, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xea64);
        EXPECT(gbc.pc(), 0xae8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae88), 0xcb);
        EXPECT(gbc.readMem(0xae89), 0xf7);
        // CB F7 016F
        gbc.setState(0xd01d, 0xe572, 0xdaf0, 0xcc1a, 0xdaad, 0x9314, 0x1, 0x1);
        gbc.writeMem(0xd01d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe572);
        EXPECT(gbc.pc(), 0xd01f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01d), 0xcb);
        EXPECT(gbc.readMem(0xd01e), 0xf7);
        // CB F7 0170
        gbc.setState(0x388c, 0xfb8f, 0x43a0, 0x62fa, 0xea9a, 0x6f2d, 0x1, 0x0);
        gbc.writeMem(0x388c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfb8f);
        EXPECT(gbc.pc(), 0x388e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0172
        gbc.setState(0x6113, 0xf0ad, 0xa230, 0x732e, 0xb25b, 0xfe37, 0x1, 0x1);
        gbc.writeMem(0x6113, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf0ad);
        EXPECT(gbc.pc(), 0x6115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0173
        gbc.setState(0x282, 0x3e73, 0x9a60, 0x9d4e, 0x79f6, 0x8a10, 0x1, 0x1);
        gbc.writeMem(0x282, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3e73);
        EXPECT(gbc.pc(), 0x284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0174
        gbc.setState(0x9617, 0xb828, 0xe830, 0x22f1, 0x64bd, 0xb5a, 0x1, 0x0);
        gbc.writeMem(0x9617, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb828);
        EXPECT(gbc.pc(), 0x9619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9617), 0xcb);
        EXPECT(gbc.readMem(0x9618), 0xf7);
        // CB F7 0175
        gbc.setState(0xe4bd, 0xa1d7, 0x6bb0, 0x6e60, 0x7d45, 0x5b45, 0x1, 0x1);
        gbc.writeMem(0xe4bd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa1d7);
        EXPECT(gbc.pc(), 0xe4bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4bd), 0xcb);
        EXPECT(gbc.readMem(0xe4be), 0xf7);
        // CB F7 0176
        gbc.setState(0x3235, 0x382e, 0xabe0, 0xe2d8, 0x80cd, 0x378f, 0x1, 0x1);
        gbc.writeMem(0x3235, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x382e);
        EXPECT(gbc.pc(), 0x3237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0177
        gbc.setState(0xb7b9, 0x8a1e, 0x4430, 0xc972, 0x9423, 0xd869, 0x0, 0x1);
        gbc.writeMem(0xb7b9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8a1e);
        EXPECT(gbc.pc(), 0xb7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b9), 0xcb);
        EXPECT(gbc.readMem(0xb7ba), 0xf7);
        // CB F7 0178
        gbc.setState(0xa885, 0x6aa9, 0x2740, 0x56a1, 0x89c2, 0xd8ec, 0x0, 0x1);
        gbc.writeMem(0xa885, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6aa9);
        EXPECT(gbc.pc(), 0xa887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa885), 0xcb);
        EXPECT(gbc.readMem(0xa886), 0xf7);
        // CB F7 0179
        gbc.setState(0x2c6b, 0xf5c2, 0xe50, 0xe68a, 0x1702, 0xc20d, 0x0, 0x0);
        gbc.writeMem(0x2c6b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf5c2);
        EXPECT(gbc.pc(), 0x2c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 017A
        gbc.setState(0xcc3a, 0xda81, 0xedd0, 0x1063, 0xb7aa, 0xcd6a, 0x1, 0x1);
        gbc.writeMem(0xcc3a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xda81);
        EXPECT(gbc.pc(), 0xcc3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3a), 0xcb);
        EXPECT(gbc.readMem(0xcc3b), 0xf7);
        // CB F7 017B
        gbc.setState(0x687a, 0x2b3, 0x6e80, 0xc77e, 0x9d22, 0xe13d, 0x0, 0x1);
        gbc.writeMem(0x687a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2b3);
        EXPECT(gbc.pc(), 0x687c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 017C
        gbc.setState(0x6c6, 0x87fc, 0x88f0, 0x19f2, 0x1e42, 0xfabe, 0x1, 0x0);
        gbc.writeMem(0x6c6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x87fc);
        EXPECT(gbc.pc(), 0x6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 017D
        gbc.setState(0x41c6, 0xb579, 0xd920, 0xfd67, 0x3f42, 0xbc8a, 0x0, 0x1);
        gbc.writeMem(0x41c6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb579);
        EXPECT(gbc.pc(), 0x41c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 017E
        gbc.setState(0x8115, 0x3af9, 0x3f0, 0x5717, 0xf851, 0xcab1, 0x0, 0x0);
        gbc.writeMem(0x8115, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3af9);
        EXPECT(gbc.pc(), 0x8117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8115), 0xcb);
        EXPECT(gbc.readMem(0x8116), 0xf7);
        // CB F7 017F
        gbc.setState(0xb297, 0x9f6e, 0x5480, 0xf263, 0x1741, 0x91e1, 0x1, 0x1);
        gbc.writeMem(0xb297, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9f6e);
        EXPECT(gbc.pc(), 0xb299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb297), 0xcb);
        EXPECT(gbc.readMem(0xb298), 0xf7);
        // CB F7 0180
        gbc.setState(0x5a08, 0xaf04, 0x2f30, 0xa36d, 0xdb55, 0x9347, 0x0, 0x1);
        gbc.writeMem(0x5a08, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xaf04);
        EXPECT(gbc.pc(), 0x5a0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0181
        gbc.setState(0x371a, 0xdf1e, 0xe250, 0x6828, 0x251f, 0x45a3, 0x1, 0x0);
        gbc.writeMem(0x371a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xdf1e);
        EXPECT(gbc.pc(), 0x371c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0182
        gbc.setState(0xc291, 0xfba9, 0xb080, 0x135a, 0xcfff, 0x92fd, 0x1, 0x1);
        gbc.writeMem(0xc291, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xfba9);
        EXPECT(gbc.pc(), 0xc293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc291), 0xcb);
        EXPECT(gbc.readMem(0xc292), 0xf7);
        // CB F7 0183
        gbc.setState(0x7ab0, 0x6198, 0x16a0, 0x23a, 0x3564, 0x228b, 0x1, 0x1);
        gbc.writeMem(0x7ab0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6198);
        EXPECT(gbc.pc(), 0x7ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0184
        gbc.setState(0xadb, 0x5460, 0x2c50, 0xbfad, 0x5271, 0x6e55, 0x0, 0x0);
        gbc.writeMem(0xadb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5460);
        EXPECT(gbc.pc(), 0xadd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0185
        gbc.setState(0xa570, 0x96e5, 0x46b0, 0x1286, 0x17d9, 0xa2fb, 0x1, 0x1);
        gbc.writeMem(0xa570, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x96e5);
        EXPECT(gbc.pc(), 0xa572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa570), 0xcb);
        EXPECT(gbc.readMem(0xa571), 0xf7);
        // CB F7 0186
        gbc.setState(0xd7c1, 0x2f0a, 0x2be0, 0xe6c4, 0xfa24, 0x32d, 0x0, 0x0);
        gbc.writeMem(0xd7c1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2f0a);
        EXPECT(gbc.pc(), 0xd7c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c1), 0xcb);
        EXPECT(gbc.readMem(0xd7c2), 0xf7);
        // CB F7 0187
        gbc.setState(0xb7cb, 0x1051, 0x2700, 0xb1a8, 0x40e2, 0xa141, 0x0, 0x1);
        gbc.writeMem(0xb7cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1051);
        EXPECT(gbc.pc(), 0xb7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7cb), 0xcb);
        EXPECT(gbc.readMem(0xb7cc), 0xf7);
        // CB F7 0188
        gbc.setState(0x7bde, 0x6e44, 0x9200, 0x3f3d, 0xbbdc, 0xab13, 0x1, 0x1);
        gbc.writeMem(0x7bde, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6e44);
        EXPECT(gbc.pc(), 0x7be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0189
        gbc.setState(0xb384, 0x241f, 0xae20, 0x51f6, 0xd142, 0x74c5, 0x1, 0x0);
        gbc.writeMem(0xb384, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x241f);
        EXPECT(gbc.pc(), 0xb386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb384), 0xcb);
        EXPECT(gbc.readMem(0xb385), 0xf7);
        // CB F7 018A
        gbc.setState(0x8293, 0x755a, 0x4640, 0xba1e, 0xe790, 0xc8cc, 0x0, 0x1);
        gbc.writeMem(0x8293, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x755a);
        EXPECT(gbc.pc(), 0x8295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8293), 0xcb);
        EXPECT(gbc.readMem(0x8294), 0xf7);
        // CB F7 018B
        gbc.setState(0xb6f8, 0xf8b4, 0xedf0, 0x98ee, 0x921a, 0x50ad, 0x1, 0x0);
        gbc.writeMem(0xb6f8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf8b4);
        EXPECT(gbc.pc(), 0xb6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f8), 0xcb);
        EXPECT(gbc.readMem(0xb6f9), 0xf7);
        // CB F7 018C
        gbc.setState(0x1230, 0x8c78, 0x53a0, 0x6589, 0x31c6, 0x86a0, 0x0, 0x1);
        gbc.writeMem(0x1230, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8c78);
        EXPECT(gbc.pc(), 0x1232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 018D
        gbc.setState(0xa05c, 0xddb0, 0xb60, 0x3a27, 0x7fb0, 0xdf35, 0x1, 0x0);
        gbc.writeMem(0xa05c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xddb0);
        EXPECT(gbc.pc(), 0xa05e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05c), 0xcb);
        EXPECT(gbc.readMem(0xa05d), 0xf7);
        // CB F7 018E
        gbc.setState(0x2ce0, 0xe937, 0x8300, 0xf603, 0xcfdc, 0x5858, 0x0, 0x1);
        gbc.writeMem(0x2ce0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe937);
        EXPECT(gbc.pc(), 0x2ce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 018F
        gbc.setState(0x8e22, 0x1ca3, 0x1940, 0x3c3e, 0xb367, 0x61ba, 0x0, 0x0);
        gbc.writeMem(0x8e22, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1ca3);
        EXPECT(gbc.pc(), 0x8e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e22), 0xcb);
        EXPECT(gbc.readMem(0x8e23), 0xf7);
        // CB F7 0190
        gbc.setState(0x3b3c, 0xaf99, 0xccb0, 0x2851, 0x57fb, 0xad52, 0x1, 0x0);
        gbc.writeMem(0x3b3c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xaf99);
        EXPECT(gbc.pc(), 0x3b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0191
        gbc.setState(0x243e, 0xede4, 0x140, 0x29fe, 0xb0f, 0x35dd, 0x1, 0x0);
        gbc.writeMem(0x243e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xede4);
        EXPECT(gbc.pc(), 0x2440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0192
        gbc.setState(0x58, 0x8e8, 0x6b60, 0x817f, 0xd86b, 0x5a15, 0x1, 0x1);
        gbc.writeMem(0x58, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8e8);
        EXPECT(gbc.pc(), 0x5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0193
        gbc.setState(0x5087, 0x602d, 0x8620, 0x3511, 0x93f4, 0xa22c, 0x1, 0x1);
        gbc.writeMem(0x5087, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x602d);
        EXPECT(gbc.pc(), 0x5089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0194
        gbc.setState(0x259f, 0x3724, 0xef30, 0x4614, 0xa0a9, 0x7b6e, 0x1, 0x1);
        gbc.writeMem(0x259f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3724);
        EXPECT(gbc.pc(), 0x25a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0195
        gbc.setState(0x2185, 0x3f71, 0x42e0, 0xe1b, 0x3a40, 0xf1c6, 0x0, 0x0);
        gbc.writeMem(0x2185, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3f71);
        EXPECT(gbc.pc(), 0x2187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0196
        gbc.setState(0xef15, 0x9b05, 0x96c0, 0x549d, 0x9cef, 0xea04, 0x0, 0x1);
        gbc.writeMem(0xef15, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9b05);
        EXPECT(gbc.pc(), 0xef17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef15), 0xcb);
        EXPECT(gbc.readMem(0xef16), 0xf7);
        // CB F7 0197
        gbc.setState(0xe8a3, 0x2fc9, 0x88c0, 0xc543, 0x34bb, 0xed23, 0x1, 0x0);
        gbc.writeMem(0xe8a3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2fc9);
        EXPECT(gbc.pc(), 0xe8a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8a3), 0xcb);
        EXPECT(gbc.readMem(0xe8a4), 0xf7);
        // CB F7 0198
        gbc.setState(0x60b4, 0x2242, 0xacb0, 0xa70e, 0x6036, 0x6810, 0x1, 0x0);
        gbc.writeMem(0x60b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2242);
        EXPECT(gbc.pc(), 0x60b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0199
        gbc.setState(0x7417, 0xd62c, 0x4400, 0x2400, 0xbb3a, 0xee43, 0x0, 0x0);
        gbc.writeMem(0x7417, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd62c);
        EXPECT(gbc.pc(), 0x7419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 019A
        gbc.setState(0x5f00, 0x142f, 0x62c0, 0x361, 0xfff8, 0x2d21, 0x1, 0x0);
        gbc.writeMem(0x5f00, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x142f);
        EXPECT(gbc.pc(), 0x5f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 019B
        gbc.setState(0x7891, 0x25d3, 0xc20, 0x793a, 0x3231, 0x5b89, 0x1, 0x0);
        gbc.writeMem(0x7891, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x25d3);
        EXPECT(gbc.pc(), 0x7893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 019C
        gbc.setState(0x5f9f, 0x5761, 0x1a70, 0xbe86, 0x140e, 0x20c, 0x1, 0x0);
        gbc.writeMem(0x5f9f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5761);
        EXPECT(gbc.pc(), 0x5fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 019D
        gbc.setState(0xcbdd, 0xdf7b, 0x9600, 0xf09f, 0x1009, 0xf4a0, 0x0, 0x0);
        gbc.writeMem(0xcbdd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0xcbdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbdd), 0xcb);
        EXPECT(gbc.readMem(0xcbde), 0xf7);
        // CB F7 019E
        gbc.setState(0xef45, 0xab36, 0x5950, 0x938, 0x369, 0x1a43, 0x0, 0x0);
        gbc.writeMem(0xef45, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xab36);
        EXPECT(gbc.pc(), 0xef47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef45), 0xcb);
        EXPECT(gbc.readMem(0xef46), 0xf7);
        // CB F7 019F
        gbc.setState(0x95af, 0x260f, 0x1580, 0x81cd, 0xd896, 0x9eca, 0x1, 0x1);
        gbc.writeMem(0x95af, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x260f);
        EXPECT(gbc.pc(), 0x95b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95af), 0xcb);
        EXPECT(gbc.readMem(0x95b0), 0xf7);
        // CB F7 01A0
        gbc.setState(0xebf7, 0xaa2c, 0x6ad0, 0xcf4b, 0xa9c, 0x7439, 0x1, 0x1);
        gbc.writeMem(0xebf7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaa2c);
        EXPECT(gbc.pc(), 0xebf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf7), 0xcb);
        EXPECT(gbc.readMem(0xebf8), 0xf7);
        // CB F7 01A1
        gbc.setState(0x9c4e, 0xc7ef, 0xbfb0, 0x1338, 0x1f3f, 0x4860, 0x0, 0x1);
        gbc.writeMem(0x9c4e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc7ef);
        EXPECT(gbc.pc(), 0x9c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4e), 0xcb);
        EXPECT(gbc.readMem(0x9c4f), 0xf7);
        // CB F7 01A2
        gbc.setState(0x44c, 0xa865, 0x1160, 0x2daf, 0xd721, 0x3fcc, 0x1, 0x0);
        gbc.writeMem(0x44c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa865);
        EXPECT(gbc.pc(), 0x44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01A3
        gbc.setState(0x7bd4, 0x354b, 0x2540, 0x242, 0x2f18, 0x2c26, 0x1, 0x1);
        gbc.writeMem(0x7bd4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x354b);
        EXPECT(gbc.pc(), 0x7bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01A4
        gbc.setState(0x30bc, 0x47ba, 0xa330, 0xee4d, 0xf67d, 0x303c, 0x0, 0x0);
        gbc.writeMem(0x30bc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x47ba);
        EXPECT(gbc.pc(), 0x30be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01A5
        gbc.setState(0xdfa3, 0xe6f0, 0xe930, 0x3b96, 0xe987, 0x56d1, 0x1, 0x1);
        gbc.writeMem(0xdfa3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe6f0);
        EXPECT(gbc.pc(), 0xdfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa3), 0xcb);
        EXPECT(gbc.readMem(0xdfa4), 0xf7);
        // CB F7 01A6
        gbc.setState(0x7d7, 0xc39e, 0xd770, 0x61d2, 0xbe99, 0x2fec, 0x0, 0x1);
        gbc.writeMem(0x7d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc39e);
        EXPECT(gbc.pc(), 0x7d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01A7
        gbc.setState(0xe2f1, 0xba0e, 0x4240, 0x67e7, 0xf40a, 0x5744, 0x1, 0x1);
        gbc.writeMem(0xe2f1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xba0e);
        EXPECT(gbc.pc(), 0xe2f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f1), 0xcb);
        EXPECT(gbc.readMem(0xe2f2), 0xf7);
        // CB F7 01A8
        gbc.setState(0xe953, 0xd08a, 0xa350, 0xc54b, 0x4978, 0xba98, 0x0, 0x1);
        gbc.writeMem(0xe953, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd08a);
        EXPECT(gbc.pc(), 0xe955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe953), 0xcb);
        EXPECT(gbc.readMem(0xe954), 0xf7);
        // CB F7 01A9
        gbc.setState(0xbec7, 0x7548, 0x6db0, 0x3ef, 0xf39f, 0xe26a, 0x0, 0x0);
        gbc.writeMem(0xbec7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7548);
        EXPECT(gbc.pc(), 0xbec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbec7), 0xcb);
        EXPECT(gbc.readMem(0xbec8), 0xf7);
        // CB F7 01AA
        gbc.setState(0xb658, 0x65fc, 0x7e20, 0x7a4d, 0x10da, 0x17b5, 0x0, 0x0);
        gbc.writeMem(0xb658, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x65fc);
        EXPECT(gbc.pc(), 0xb65a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb658), 0xcb);
        EXPECT(gbc.readMem(0xb659), 0xf7);
        // CB F7 01AB
        gbc.setState(0x3b7a, 0xda5f, 0x5730, 0xb919, 0x5376, 0xefe5, 0x0, 0x1);
        gbc.writeMem(0x3b7a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xda5f);
        EXPECT(gbc.pc(), 0x3b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01AC
        gbc.setState(0xdbb8, 0x1449, 0xa9b0, 0xa2a, 0x70db, 0xf347, 0x0, 0x1);
        gbc.writeMem(0xdbb8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1449);
        EXPECT(gbc.pc(), 0xdbba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbb8), 0xcb);
        EXPECT(gbc.readMem(0xdbb9), 0xf7);
        // CB F7 01AD
        gbc.setState(0xc231, 0xc33, 0x7710, 0x7af3, 0xffe5, 0x85e1, 0x1, 0x1);
        gbc.writeMem(0xc231, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc33);
        EXPECT(gbc.pc(), 0xc233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc231), 0xcb);
        EXPECT(gbc.readMem(0xc232), 0xf7);
        // CB F7 01AE
        gbc.setState(0xabbc, 0x5274, 0x860, 0x9e74, 0x6f35, 0xf593, 0x1, 0x1);
        gbc.writeMem(0xabbc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5274);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbc), 0xcb);
        EXPECT(gbc.readMem(0xabbd), 0xf7);
        // CB F7 01AF
        gbc.setState(0x87d2, 0xab55, 0x2a60, 0x2d2c, 0xf09b, 0x689e, 0x1, 0x1);
        gbc.writeMem(0x87d2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xab55);
        EXPECT(gbc.pc(), 0x87d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d2), 0xcb);
        EXPECT(gbc.readMem(0x87d3), 0xf7);
        // CB F7 01B0
        gbc.setState(0x9235, 0xc0e5, 0xb830, 0xb6fd, 0x79a1, 0xdd1c, 0x1, 0x0);
        gbc.writeMem(0x9235, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc0e5);
        EXPECT(gbc.pc(), 0x9237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9235), 0xcb);
        EXPECT(gbc.readMem(0x9236), 0xf7);
        // CB F7 01B1
        gbc.setState(0x677b, 0x1523, 0xf930, 0x4fa9, 0xba91, 0xd09a, 0x1, 0x0);
        gbc.writeMem(0x677b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1523);
        EXPECT(gbc.pc(), 0x677d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01B2
        gbc.setState(0xa685, 0x12f8, 0xb140, 0x610, 0xab3d, 0xa63c, 0x0, 0x1);
        gbc.writeMem(0xa685, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x12f8);
        EXPECT(gbc.pc(), 0xa687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa685), 0xcb);
        EXPECT(gbc.readMem(0xa686), 0xf7);
        // CB F7 01B3
        gbc.setState(0x3b34, 0xccd5, 0xc380, 0xa9c7, 0xd3a4, 0x734d, 0x1, 0x0);
        gbc.writeMem(0x3b34, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xccd5);
        EXPECT(gbc.pc(), 0x3b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01B4
        gbc.setState(0xece7, 0x2472, 0x7d80, 0xc97f, 0x2669, 0x177a, 0x0, 0x0);
        gbc.writeMem(0xece7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2472);
        EXPECT(gbc.pc(), 0xece9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xece7), 0xcb);
        EXPECT(gbc.readMem(0xece8), 0xf7);
        // CB F7 01B5
        gbc.setState(0xa41d, 0xa58f, 0x9350, 0x63cd, 0xf8a9, 0xfd59, 0x0, 0x1);
        gbc.writeMem(0xa41d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa58f);
        EXPECT(gbc.pc(), 0xa41f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa41d), 0xcb);
        EXPECT(gbc.readMem(0xa41e), 0xf7);
        // CB F7 01B6
        gbc.setState(0xe37f, 0xa4e1, 0xf580, 0x5366, 0xa06d, 0x2280, 0x1, 0x1);
        gbc.writeMem(0xe37f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa4e1);
        EXPECT(gbc.pc(), 0xe381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe37f), 0xcb);
        EXPECT(gbc.readMem(0xe380), 0xf7);
        // CB F7 01B7
        gbc.setState(0x7ac4, 0xfaea, 0x29c0, 0x2109, 0x2753, 0x960e, 0x1, 0x0);
        gbc.writeMem(0x7ac4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfaea);
        EXPECT(gbc.pc(), 0x7ac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01B8
        gbc.setState(0x82d9, 0xeaa0, 0xd370, 0x835a, 0x28ea, 0x6861, 0x1, 0x0);
        gbc.writeMem(0x82d9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xeaa0);
        EXPECT(gbc.pc(), 0x82db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d9), 0xcb);
        EXPECT(gbc.readMem(0x82da), 0xf7);
        // CB F7 01B9
        gbc.setState(0x4af2, 0xf14c, 0xe760, 0xcc7f, 0x6b44, 0x17ee, 0x0, 0x1);
        gbc.writeMem(0x4af2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf14c);
        EXPECT(gbc.pc(), 0x4af4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01BA
        gbc.setState(0xec44, 0x6154, 0x940, 0x6587, 0xfc4, 0x8686, 0x0, 0x1);
        gbc.writeMem(0xec44, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6154);
        EXPECT(gbc.pc(), 0xec46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec44), 0xcb);
        EXPECT(gbc.readMem(0xec45), 0xf7);
        // CB F7 01BB
        gbc.setState(0x1f89, 0xad95, 0xae0, 0x5e0a, 0xe875, 0x947, 0x0, 0x1);
        gbc.writeMem(0x1f89, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xad95);
        EXPECT(gbc.pc(), 0x1f8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01BC
        gbc.setState(0x29be, 0xd322, 0xb670, 0xbbb1, 0xb1f1, 0x3d8, 0x0, 0x1);
        gbc.writeMem(0x29be, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd322);
        EXPECT(gbc.pc(), 0x29c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01BD
        gbc.setState(0x7e9a, 0x54a9, 0x67f0, 0x94b2, 0xa2ad, 0x5d97, 0x0, 0x1);
        gbc.writeMem(0x7e9a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x54a9);
        EXPECT(gbc.pc(), 0x7e9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01BE
        gbc.setState(0xd669, 0xb804, 0x3010, 0xc20c, 0xecfa, 0x6afc, 0x0, 0x1);
        gbc.writeMem(0xd669, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb804);
        EXPECT(gbc.pc(), 0xd66b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd669), 0xcb);
        EXPECT(gbc.readMem(0xd66a), 0xf7);
        // CB F7 01BF
        gbc.setState(0x2aea, 0xe4df, 0x7ec0, 0x6b6c, 0x70e2, 0x748c, 0x1, 0x0);
        gbc.writeMem(0x2aea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe4df);
        EXPECT(gbc.pc(), 0x2aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01C0
        gbc.setState(0x61d4, 0xa18e, 0x3710, 0x90d4, 0xf2cb, 0x96a, 0x1, 0x1);
        gbc.writeMem(0x61d4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa18e);
        EXPECT(gbc.pc(), 0x61d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01C1
        gbc.setState(0x185c, 0x723d, 0xe220, 0x8835, 0x5a06, 0xdc06, 0x0, 0x0);
        gbc.writeMem(0x185c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x723d);
        EXPECT(gbc.pc(), 0x185e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01C2
        gbc.setState(0x7382, 0x9e78, 0xfc80, 0xbc33, 0xa14e, 0x4fdb, 0x0, 0x1);
        gbc.writeMem(0x7382, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9e78);
        EXPECT(gbc.pc(), 0x7384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01C3
        gbc.setState(0xd1b, 0x3260, 0x8750, 0xdc67, 0x921d, 0x7930, 0x1, 0x0);
        gbc.writeMem(0xd1b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3260);
        EXPECT(gbc.pc(), 0xd1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01C4
        gbc.setState(0x83bc, 0x22b6, 0xdff0, 0xcbf6, 0xd7db, 0x8aae, 0x0, 0x0);
        gbc.writeMem(0x83bc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x22b6);
        EXPECT(gbc.pc(), 0x83be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83bc), 0xcb);
        EXPECT(gbc.readMem(0x83bd), 0xf7);
        // CB F7 01C5
        gbc.setState(0x408d, 0x5187, 0x9830, 0xb7a, 0x945, 0xd916, 0x1, 0x1);
        gbc.writeMem(0x408d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5187);
        EXPECT(gbc.pc(), 0x408f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01C6
        gbc.setState(0xca64, 0x3a0f, 0x62a0, 0x9a16, 0xfbdc, 0x210d, 0x1, 0x0);
        gbc.writeMem(0xca64, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3a0f);
        EXPECT(gbc.pc(), 0xca66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca64), 0xcb);
        EXPECT(gbc.readMem(0xca65), 0xf7);
        // CB F7 01C7
        gbc.setState(0x3fe5, 0xb98c, 0x9a10, 0xf1d2, 0x6add, 0xb12a, 0x0, 0x1);
        gbc.writeMem(0x3fe5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb98c);
        EXPECT(gbc.pc(), 0x3fe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01C8
        gbc.setState(0x46fd, 0x831e, 0xb640, 0xe3fe, 0x2dfa, 0xf7dd, 0x0, 0x0);
        gbc.writeMem(0x46fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x831e);
        EXPECT(gbc.pc(), 0x46ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01C9
        gbc.setState(0xd512, 0x21e6, 0x330, 0xa2f, 0x9994, 0x41ed, 0x1, 0x0);
        gbc.writeMem(0xd512, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x21e6);
        EXPECT(gbc.pc(), 0xd514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd512), 0xcb);
        EXPECT(gbc.readMem(0xd513), 0xf7);
        // CB F7 01CB
        gbc.setState(0x2908, 0xc367, 0xe720, 0xfa93, 0xa810, 0xf16e, 0x1, 0x0);
        gbc.writeMem(0x2908, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc367);
        EXPECT(gbc.pc(), 0x290a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01CC
        gbc.setState(0x6afa, 0x12f5, 0x6220, 0xf62e, 0x4ca8, 0x70ab, 0x0, 0x1);
        gbc.writeMem(0x6afa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x12f5);
        EXPECT(gbc.pc(), 0x6afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01CD
        gbc.setState(0x1192, 0x37c0, 0x8110, 0x7672, 0xe6c6, 0x82b2, 0x0, 0x1);
        gbc.writeMem(0x1192, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x37c0);
        EXPECT(gbc.pc(), 0x1194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01CE
        gbc.setState(0x83e6, 0x447d, 0x87e0, 0x58bc, 0x4966, 0x34bd, 0x1, 0x0);
        gbc.writeMem(0x83e6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x447d);
        EXPECT(gbc.pc(), 0x83e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e6), 0xcb);
        EXPECT(gbc.readMem(0x83e7), 0xf7);
        // CB F7 01CF
        gbc.setState(0x58a7, 0xce2e, 0xb550, 0x1670, 0x8047, 0xd80b, 0x0, 0x1);
        gbc.writeMem(0x58a7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xce2e);
        EXPECT(gbc.pc(), 0x58a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01D0
        gbc.setState(0x2eab, 0xdb6c, 0xaaf0, 0x38d5, 0x7560, 0xa7f7, 0x1, 0x1);
        gbc.writeMem(0x2eab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdb6c);
        EXPECT(gbc.pc(), 0x2ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01D1
        gbc.setState(0x5223, 0xa78a, 0xe820, 0x75c2, 0xc453, 0x6ddc, 0x1, 0x1);
        gbc.writeMem(0x5223, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa78a);
        EXPECT(gbc.pc(), 0x5225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01D2
        gbc.setState(0x3589, 0xf38c, 0xe2f0, 0x2738, 0x258d, 0x21e8, 0x1, 0x0);
        gbc.writeMem(0x3589, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf38c);
        EXPECT(gbc.pc(), 0x358b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01D3
        gbc.setState(0x4ada, 0x9021, 0x7750, 0x4846, 0xf5b1, 0xa579, 0x0, 0x0);
        gbc.writeMem(0x4ada, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9021);
        EXPECT(gbc.pc(), 0x4adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01D4
        gbc.setState(0x6c49, 0x8e1b, 0x9c60, 0x1c83, 0x551a, 0x6f1f, 0x1, 0x0);
        gbc.writeMem(0x6c49, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x8e1b);
        EXPECT(gbc.pc(), 0x6c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01D5
        gbc.setState(0xee00, 0xee49, 0x2820, 0xf2a3, 0xb686, 0x3ce2, 0x0, 0x0);
        gbc.writeMem(0xee00, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xee49);
        EXPECT(gbc.pc(), 0xee02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee00), 0xcb);
        EXPECT(gbc.readMem(0xee01), 0xf7);
        // CB F7 01D6
        gbc.setState(0xc99f, 0xc5f4, 0xcbb0, 0x417b, 0x7ee0, 0xe566, 0x1, 0x1);
        gbc.writeMem(0xc99f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc5f4);
        EXPECT(gbc.pc(), 0xc9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc99f), 0xcb);
        EXPECT(gbc.readMem(0xc9a0), 0xf7);
        // CB F7 01D7
        gbc.setState(0x2df, 0x6ecf, 0x4680, 0xb964, 0x6728, 0xefbd, 0x0, 0x0);
        gbc.writeMem(0x2df, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6ecf);
        EXPECT(gbc.pc(), 0x2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01D8
        gbc.setState(0x84b4, 0x7525, 0x5cd0, 0xaae2, 0x88b6, 0xa1ae, 0x0, 0x0);
        gbc.writeMem(0x84b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7525);
        EXPECT(gbc.pc(), 0x84b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b4), 0xcb);
        EXPECT(gbc.readMem(0x84b5), 0xf7);
        // CB F7 01D9
        gbc.setState(0x2f7b, 0xab2, 0x4e40, 0xb008, 0x84c5, 0x1cfb, 0x1, 0x0);
        gbc.writeMem(0x2f7b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xab2);
        EXPECT(gbc.pc(), 0x2f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01DA
        gbc.setState(0xee36, 0x70c0, 0xd6b0, 0xab4f, 0x75b9, 0xd287, 0x0, 0x1);
        gbc.writeMem(0xee36, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x70c0);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee36), 0xcb);
        EXPECT(gbc.readMem(0xee37), 0xf7);
        // CB F7 01DB
        gbc.setState(0x1218, 0xd934, 0x210, 0x6fe, 0x45d2, 0x5164, 0x1, 0x1);
        gbc.writeMem(0x1218, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd934);
        EXPECT(gbc.pc(), 0x121a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01DC
        gbc.setState(0x1c38, 0xa283, 0x1070, 0xd531, 0xbd78, 0x6cf1, 0x0, 0x1);
        gbc.writeMem(0x1c38, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa283);
        EXPECT(gbc.pc(), 0x1c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01DD
        gbc.setState(0x2c64, 0x48b5, 0x2f40, 0x425, 0x1ac7, 0xdd7f, 0x0, 0x0);
        gbc.writeMem(0x2c64, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x48b5);
        EXPECT(gbc.pc(), 0x2c66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01DE
        gbc.setState(0xa2d1, 0x28b0, 0x9b10, 0x3eb0, 0xa442, 0x81d2, 0x1, 0x1);
        gbc.writeMem(0xa2d1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x28b0);
        EXPECT(gbc.pc(), 0xa2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2d1), 0xcb);
        EXPECT(gbc.readMem(0xa2d2), 0xf7);
        // CB F7 01DF
        gbc.setState(0x1219, 0x4573, 0x2b60, 0x9f64, 0x955e, 0xcb8a, 0x0, 0x0);
        gbc.writeMem(0x1219, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4573);
        EXPECT(gbc.pc(), 0x121b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01E0
        gbc.setState(0xa9e9, 0x88e0, 0xbb30, 0xa679, 0x36ce, 0x4680, 0x0, 0x0);
        gbc.writeMem(0xa9e9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x88e0);
        EXPECT(gbc.pc(), 0xa9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e9), 0xcb);
        EXPECT(gbc.readMem(0xa9ea), 0xf7);
        // CB F7 01E1
        gbc.setState(0x48b3, 0x369b, 0x3460, 0x7334, 0x8cd0, 0xb55d, 0x1, 0x0);
        gbc.writeMem(0x48b3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x369b);
        EXPECT(gbc.pc(), 0x48b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01E2
        gbc.setState(0x3847, 0x32b4, 0x7f70, 0xfa5, 0x8c06, 0xf808, 0x1, 0x1);
        gbc.writeMem(0x3847, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x32b4);
        EXPECT(gbc.pc(), 0x3849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01E3
        gbc.setState(0x8ab, 0xb4a7, 0x9b30, 0x31d0, 0x7b74, 0xd6af, 0x1, 0x1);
        gbc.writeMem(0x8ab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb4a7);
        EXPECT(gbc.pc(), 0x8ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01E4
        gbc.setState(0x49fd, 0x55fe, 0x96b0, 0xadd, 0x26c4, 0x6fb6, 0x0, 0x1);
        gbc.writeMem(0x49fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x55fe);
        EXPECT(gbc.pc(), 0x49ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01E5
        gbc.setState(0x286a, 0x4bd6, 0x6e00, 0x25e4, 0x34dc, 0xe633, 0x0, 0x0);
        gbc.writeMem(0x286a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4bd6);
        EXPECT(gbc.pc(), 0x286c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01E6
        gbc.setState(0x4d21, 0x9dd3, 0xcca0, 0xd2fc, 0x30c6, 0xa988, 0x0, 0x1);
        gbc.writeMem(0x4d21, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9dd3);
        EXPECT(gbc.pc(), 0x4d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01E7
        gbc.setState(0xdcad, 0x12b, 0x86c0, 0x4575, 0x4f36, 0x7646, 0x1, 0x0);
        gbc.writeMem(0xdcad, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x12b);
        EXPECT(gbc.pc(), 0xdcaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcad), 0xcb);
        EXPECT(gbc.readMem(0xdcae), 0xf7);
        // CB F7 01E8
        gbc.setState(0x97f0, 0x2662, 0xf920, 0x69f6, 0x1e95, 0x6d9f, 0x0, 0x0);
        gbc.writeMem(0x97f0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2662);
        EXPECT(gbc.pc(), 0x97f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f0), 0xcb);
        EXPECT(gbc.readMem(0x97f1), 0xf7);
        // CB F7 01E9
        gbc.setState(0xb0c, 0x8191, 0x560, 0x5b42, 0x8a49, 0x64a, 0x1, 0x0);
        gbc.writeMem(0xb0c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8191);
        EXPECT(gbc.pc(), 0xb0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01EA
        gbc.setState(0x4494, 0xec08, 0x6cd0, 0xff16, 0x39e7, 0x9fe5, 0x0, 0x0);
        gbc.writeMem(0x4494, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xec08);
        EXPECT(gbc.pc(), 0x4496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01EB
        gbc.setState(0xdb1, 0x5ee6, 0x9480, 0xbebe, 0x3a7d, 0x741a, 0x1, 0x1);
        gbc.writeMem(0xdb1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5ee6);
        EXPECT(gbc.pc(), 0xdb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01EC
        gbc.setState(0xca54, 0xd034, 0x5600, 0x7af3, 0x73ee, 0xe723, 0x1, 0x0);
        gbc.writeMem(0xca54, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd034);
        EXPECT(gbc.pc(), 0xca56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca54), 0xcb);
        EXPECT(gbc.readMem(0xca55), 0xf7);
        // CB F7 01ED
        gbc.setState(0x8dba, 0xb4ae, 0x6690, 0xcce9, 0x619d, 0xd3fb, 0x0, 0x1);
        gbc.writeMem(0x8dba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb4ae);
        EXPECT(gbc.pc(), 0x8dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dba), 0xcb);
        EXPECT(gbc.readMem(0x8dbb), 0xf7);
        // CB F7 01EE
        gbc.setState(0xc43, 0xd2a7, 0x1230, 0x229d, 0xe412, 0x68d7, 0x0, 0x1);
        gbc.writeMem(0xc43, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd2a7);
        EXPECT(gbc.pc(), 0xc45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01EF
        gbc.setState(0xeb2f, 0xa903, 0xe980, 0xa826, 0xbb7c, 0x4d5d, 0x0, 0x1);
        gbc.writeMem(0xeb2f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa903);
        EXPECT(gbc.pc(), 0xeb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb2f), 0xcb);
        EXPECT(gbc.readMem(0xeb30), 0xf7);
        // CB F7 01F0
        gbc.setState(0xed9c, 0xb7bf, 0xcdc0, 0x1b00, 0xa22b, 0x2683, 0x1, 0x1);
        gbc.writeMem(0xed9c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb7bf);
        EXPECT(gbc.pc(), 0xed9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9c), 0xcb);
        EXPECT(gbc.readMem(0xed9d), 0xf7);
        // CB F7 01F1
        gbc.setState(0xd927, 0x32cd, 0xa3f0, 0x4224, 0x5f24, 0x7ff0, 0x0, 0x0);
        gbc.writeMem(0xd927, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x32cd);
        EXPECT(gbc.pc(), 0xd929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd927), 0xcb);
        EXPECT(gbc.readMem(0xd928), 0xf7);
        // CB F7 01F2
        gbc.setState(0x848e, 0xef69, 0xbd00, 0xb760, 0xda93, 0x617a, 0x0, 0x1);
        gbc.writeMem(0x848e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xef69);
        EXPECT(gbc.pc(), 0x8490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x848e), 0xcb);
        EXPECT(gbc.readMem(0x848f), 0xf7);
        // CB F7 01F3
        gbc.setState(0x9268, 0xf211, 0xb930, 0xbe7d, 0x9f83, 0x45c6, 0x0, 0x0);
        gbc.writeMem(0x9268, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf211);
        EXPECT(gbc.pc(), 0x926a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9268), 0xcb);
        EXPECT(gbc.readMem(0x9269), 0xf7);
        // CB F7 01F4
        gbc.setState(0xa8bb, 0xcb71, 0xe50, 0x5607, 0xa7ec, 0xeb00, 0x1, 0x0);
        gbc.writeMem(0xa8bb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcb71);
        EXPECT(gbc.pc(), 0xa8bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8bb), 0xcb);
        EXPECT(gbc.readMem(0xa8bc), 0xf7);
        // CB F7 01F5
        gbc.setState(0xc4ea, 0x1af4, 0x3000, 0xb13b, 0xd9c, 0x9265, 0x1, 0x1);
        gbc.writeMem(0xc4ea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1af4);
        EXPECT(gbc.pc(), 0xc4ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ea), 0xcb);
        EXPECT(gbc.readMem(0xc4eb), 0xf7);
        // CB F7 01F6
        gbc.setState(0xe1e1, 0x37f9, 0x6120, 0xf9f4, 0xe9ce, 0x5c3b, 0x0, 0x0);
        gbc.writeMem(0xe1e1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x37f9);
        EXPECT(gbc.pc(), 0xe1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e1), 0xcb);
        EXPECT(gbc.readMem(0xe1e2), 0xf7);
        // CB F7 01F7
        gbc.setState(0x83d7, 0x94cb, 0xdce0, 0x74dd, 0x9166, 0x4ef4, 0x1, 0x1);
        gbc.writeMem(0x83d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x94cb);
        EXPECT(gbc.pc(), 0x83d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d7), 0xcb);
        EXPECT(gbc.readMem(0x83d8), 0xf7);
        // CB F7 01F8
        gbc.setState(0x64cb, 0x8087, 0x3650, 0x82cf, 0xb4ee, 0xd929, 0x0, 0x0);
        gbc.writeMem(0x64cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8087);
        EXPECT(gbc.pc(), 0x64cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01FA
        gbc.setState(0x7884, 0x4b18, 0xca60, 0x7a0b, 0x9d16, 0x891, 0x0, 0x0);
        gbc.writeMem(0x7884, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4b18);
        EXPECT(gbc.pc(), 0x7886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01FB
        gbc.setState(0xef03, 0x93c1, 0x5d00, 0x44f2, 0x2f40, 0x6756, 0x1, 0x1);
        gbc.writeMem(0xef03, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x93c1);
        EXPECT(gbc.pc(), 0xef05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef03), 0xcb);
        EXPECT(gbc.readMem(0xef04), 0xf7);
        // CB F7 01FC
        gbc.setState(0x59e1, 0x452f, 0x1970, 0xd04d, 0xb123, 0x7c9b, 0x1, 0x0);
        gbc.writeMem(0x59e1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x452f);
        EXPECT(gbc.pc(), 0x59e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01FD
        gbc.setState(0x4254, 0xd0fd, 0xb040, 0x29a7, 0x193f, 0x9d38, 0x1, 0x1);
        gbc.writeMem(0x4254, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd0fd);
        EXPECT(gbc.pc(), 0x4256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 01FE
        gbc.setState(0x1a7b, 0x45b7, 0x5ab0, 0x54ee, 0xbd77, 0x7762, 0x0, 0x0);
        gbc.writeMem(0x1a7b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x45b7);
        EXPECT(gbc.pc(), 0x1a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 01FF
        gbc.setState(0xbd6a, 0x5047, 0x6260, 0x373, 0xabb7, 0x3711, 0x0, 0x1);
        gbc.writeMem(0xbd6a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5047);
        EXPECT(gbc.pc(), 0xbd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6a), 0xcb);
        EXPECT(gbc.readMem(0xbd6b), 0xf7);
        // CB F7 0200
        gbc.setState(0x2d2d, 0xcdd6, 0xd220, 0x658b, 0xb643, 0x55e3, 0x0, 0x0);
        gbc.writeMem(0x2d2d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xcdd6);
        EXPECT(gbc.pc(), 0x2d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0201
        gbc.setState(0xb1b7, 0xc742, 0x2eb0, 0xf6ee, 0x6649, 0xb34, 0x1, 0x0);
        gbc.writeMem(0xb1b7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc742);
        EXPECT(gbc.pc(), 0xb1b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b7), 0xcb);
        EXPECT(gbc.readMem(0xb1b8), 0xf7);
        // CB F7 0202
        gbc.setState(0x67fe, 0xfc66, 0xc8d0, 0x956a, 0xa29b, 0x1f89, 0x1, 0x0);
        gbc.writeMem(0x67fe, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfc66);
        EXPECT(gbc.pc(), 0x6800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0203
        gbc.setState(0x8a7b, 0xa31, 0xcbf0, 0x179a, 0xf46b, 0xadb9, 0x1, 0x1);
        gbc.writeMem(0x8a7b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0x8a7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a7b), 0xcb);
        EXPECT(gbc.readMem(0x8a7c), 0xf7);
        // CB F7 0204
        gbc.setState(0x6685, 0x132d, 0x3020, 0xf292, 0x9aa8, 0x6322, 0x0, 0x0);
        gbc.writeMem(0x6685, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x132d);
        EXPECT(gbc.pc(), 0x6687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0205
        gbc.setState(0xeb43, 0x56bb, 0x7200, 0xaad5, 0x2d95, 0x81e, 0x0, 0x0);
        gbc.writeMem(0xeb43, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x56bb);
        EXPECT(gbc.pc(), 0xeb45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb43), 0xcb);
        EXPECT(gbc.readMem(0xeb44), 0xf7);
        // CB F7 0206
        gbc.setState(0x17f6, 0xc2d9, 0xae50, 0xee99, 0xf569, 0x826c, 0x1, 0x1);
        gbc.writeMem(0x17f6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc2d9);
        EXPECT(gbc.pc(), 0x17f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0208
        gbc.setState(0xd36, 0x46c7, 0x5cc0, 0xb5f, 0x73a4, 0xa1af, 0x0, 0x1);
        gbc.writeMem(0xd36, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x46c7);
        EXPECT(gbc.pc(), 0xd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0209
        gbc.setState(0xa0ce, 0xb224, 0x7a0, 0x3ee, 0xafed, 0xde63, 0x1, 0x1);
        gbc.writeMem(0xa0ce, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb224);
        EXPECT(gbc.pc(), 0xa0d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ce), 0xcb);
        EXPECT(gbc.readMem(0xa0cf), 0xf7);
        // CB F7 020A
        gbc.setState(0x9fa, 0x128, 0xe2c0, 0x337a, 0x6fb7, 0xe428, 0x1, 0x0);
        gbc.writeMem(0x9fa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x128);
        EXPECT(gbc.pc(), 0x9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 020B
        gbc.setState(0xc244, 0x1524, 0xfd00, 0x922c, 0x3b38, 0xf798, 0x0, 0x1);
        gbc.writeMem(0xc244, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1524);
        EXPECT(gbc.pc(), 0xc246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc244), 0xcb);
        EXPECT(gbc.readMem(0xc245), 0xf7);
        // CB F7 020C
        gbc.setState(0xc57b, 0x8fd1, 0x3050, 0xec44, 0x2baf, 0xe240, 0x0, 0x0);
        gbc.writeMem(0xc57b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8fd1);
        EXPECT(gbc.pc(), 0xc57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc57b), 0xcb);
        EXPECT(gbc.readMem(0xc57c), 0xf7);
        // CB F7 020D
        gbc.setState(0xa1d3, 0x7187, 0xda20, 0x131d, 0x6515, 0x3456, 0x0, 0x1);
        gbc.writeMem(0xa1d3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7187);
        EXPECT(gbc.pc(), 0xa1d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d3), 0xcb);
        EXPECT(gbc.readMem(0xa1d4), 0xf7);
        // CB F7 020F
        gbc.setState(0x4a26, 0xe6a5, 0xa320, 0x3869, 0xad2f, 0x5abd, 0x1, 0x0);
        gbc.writeMem(0x4a26, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe6a5);
        EXPECT(gbc.pc(), 0x4a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0210
        gbc.setState(0x642c, 0xa7af, 0x350, 0x553c, 0xae1f, 0xb6af, 0x1, 0x1);
        gbc.writeMem(0x642c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa7af);
        EXPECT(gbc.pc(), 0x642e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0211
        gbc.setState(0xa2ba, 0xca35, 0xb5f0, 0xe4f2, 0xb7ed, 0xfe79, 0x1, 0x0);
        gbc.writeMem(0xa2ba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xca35);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ba), 0xcb);
        EXPECT(gbc.readMem(0xa2bb), 0xf7);
        // CB F7 0213
        gbc.setState(0x9bb9, 0x1ff1, 0xe4e0, 0x6483, 0x737a, 0x61fe, 0x1, 0x1);
        gbc.writeMem(0x9bb9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1ff1);
        EXPECT(gbc.pc(), 0x9bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb9), 0xcb);
        EXPECT(gbc.readMem(0x9bba), 0xf7);
        // CB F7 0214
        gbc.setState(0xbfda, 0xe51d, 0x5c80, 0x3f1c, 0x5840, 0xfd4a, 0x0, 0x1);
        gbc.writeMem(0xbfda, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe51d);
        EXPECT(gbc.pc(), 0xbfdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfda), 0xcb);
        EXPECT(gbc.readMem(0xbfdb), 0xf7);
        // CB F7 0215
        gbc.setState(0x7465, 0x88e6, 0x33f0, 0x4b4c, 0xb795, 0x63a7, 0x0, 0x1);
        gbc.writeMem(0x7465, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x88e6);
        EXPECT(gbc.pc(), 0x7467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0216
        gbc.setState(0x9d77, 0x953b, 0x8d40, 0xdff8, 0xb145, 0x2d81, 0x1, 0x1);
        gbc.writeMem(0x9d77, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x953b);
        EXPECT(gbc.pc(), 0x9d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d77), 0xcb);
        EXPECT(gbc.readMem(0x9d78), 0xf7);
        // CB F7 0217
        gbc.setState(0xaeed, 0xe703, 0x1f30, 0xda7b, 0x72c0, 0xd0b6, 0x0, 0x1);
        gbc.writeMem(0xaeed, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe703);
        EXPECT(gbc.pc(), 0xaeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeed), 0xcb);
        EXPECT(gbc.readMem(0xaeee), 0xf7);
        // CB F7 0218
        gbc.setState(0x79d2, 0x1f82, 0xfc40, 0xfe1d, 0x7b96, 0x585a, 0x0, 0x1);
        gbc.writeMem(0x79d2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1f82);
        EXPECT(gbc.pc(), 0x79d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0219
        gbc.setState(0xc09b, 0xc2cf, 0x54f0, 0xdcbc, 0xf066, 0x4603, 0x1, 0x0);
        gbc.writeMem(0xc09b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc2cf);
        EXPECT(gbc.pc(), 0xc09d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc09b), 0xcb);
        EXPECT(gbc.readMem(0xc09c), 0xf7);
        // CB F7 021A
        gbc.setState(0x6e6a, 0xcfe3, 0x180, 0x3010, 0xeff4, 0x48dd, 0x0, 0x0);
        gbc.writeMem(0x6e6a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcfe3);
        EXPECT(gbc.pc(), 0x6e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 021B
        gbc.setState(0xd1b0, 0x7474, 0x1950, 0x546, 0x3c68, 0xf461, 0x0, 0x1);
        gbc.writeMem(0xd1b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7474);
        EXPECT(gbc.pc(), 0xd1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b0), 0xcb);
        EXPECT(gbc.readMem(0xd1b1), 0xf7);
        // CB F7 021C
        gbc.setState(0x1dd7, 0x6f04, 0x84d0, 0xc919, 0xc5ca, 0xbb5d, 0x1, 0x0);
        gbc.writeMem(0x1dd7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6f04);
        EXPECT(gbc.pc(), 0x1dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 021D
        gbc.setState(0x7844, 0x26e4, 0x2810, 0x22c1, 0xc61d, 0x9fda, 0x1, 0x0);
        gbc.writeMem(0x7844, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x26e4);
        EXPECT(gbc.pc(), 0x7846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 021E
        gbc.setState(0xe432, 0x1603, 0xc600, 0x3b2c, 0x55f3, 0x3e7a, 0x0, 0x0);
        gbc.writeMem(0xe432, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1603);
        EXPECT(gbc.pc(), 0xe434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe432), 0xcb);
        EXPECT(gbc.readMem(0xe433), 0xf7);
        // CB F7 021F
        gbc.setState(0xe7d2, 0xcb0b, 0xf640, 0x9f31, 0xa33, 0x8d06, 0x0, 0x0);
        gbc.writeMem(0xe7d2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcb0b);
        EXPECT(gbc.pc(), 0xe7d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d2), 0xcb);
        EXPECT(gbc.readMem(0xe7d3), 0xf7);
        // CB F7 0220
        gbc.setState(0x73ba, 0xf4b4, 0x36f0, 0x313c, 0xe1c0, 0x5408, 0x1, 0x1);
        gbc.writeMem(0x73ba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf4b4);
        EXPECT(gbc.pc(), 0x73bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0221
        gbc.setState(0x9363, 0x258a, 0x7970, 0x3424, 0x4a62, 0xcc44, 0x1, 0x1);
        gbc.writeMem(0x9363, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x258a);
        EXPECT(gbc.pc(), 0x9365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9363), 0xcb);
        EXPECT(gbc.readMem(0x9364), 0xf7);
        // CB F7 0222
        gbc.setState(0x53cb, 0xf1ef, 0x2e60, 0x5415, 0xf842, 0xa764, 0x0, 0x1);
        gbc.writeMem(0x53cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf1ef);
        EXPECT(gbc.pc(), 0x53cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0223
        gbc.setState(0x65c4, 0xf3ec, 0x5d70, 0xadc2, 0x7478, 0xd31c, 0x1, 0x0);
        gbc.writeMem(0x65c4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0x65c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0224
        gbc.setState(0x99c3, 0xf0f4, 0x3f60, 0x10e9, 0xcd0f, 0xf2a, 0x0, 0x1);
        gbc.writeMem(0x99c3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf0f4);
        EXPECT(gbc.pc(), 0x99c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c3), 0xcb);
        EXPECT(gbc.readMem(0x99c4), 0xf7);
        // CB F7 0225
        gbc.setState(0x67e0, 0xc797, 0x8d20, 0xc491, 0x3ad0, 0x91e3, 0x1, 0x0);
        gbc.writeMem(0x67e0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc797);
        EXPECT(gbc.pc(), 0x67e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0226
        gbc.setState(0xb3c7, 0xa465, 0xb430, 0xb412, 0x17a, 0xc3e5, 0x0, 0x0);
        gbc.writeMem(0xb3c7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa465);
        EXPECT(gbc.pc(), 0xb3c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c7), 0xcb);
        EXPECT(gbc.readMem(0xb3c8), 0xf7);
        // CB F7 0227
        gbc.setState(0xb898, 0xf5c2, 0xe3b0, 0x76fe, 0xdfd3, 0x8aea, 0x0, 0x1);
        gbc.writeMem(0xb898, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf5c2);
        EXPECT(gbc.pc(), 0xb89a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb898), 0xcb);
        EXPECT(gbc.readMem(0xb899), 0xf7);
        // CB F7 0228
        gbc.setState(0x1158, 0xcf87, 0x3620, 0x773, 0x3cc0, 0x4c75, 0x1, 0x1);
        gbc.writeMem(0x1158, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xcf87);
        EXPECT(gbc.pc(), 0x115a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0229
        gbc.setState(0xe4d5, 0xdcb9, 0x3700, 0xe3, 0x236d, 0x4452, 0x0, 0x1);
        gbc.writeMem(0xe4d5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdcb9);
        EXPECT(gbc.pc(), 0xe4d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4d5), 0xcb);
        EXPECT(gbc.readMem(0xe4d6), 0xf7);
        // CB F7 022A
        gbc.setState(0x9349, 0xa3df, 0x5d30, 0x37a5, 0x4a36, 0x8bfc, 0x0, 0x0);
        gbc.writeMem(0x9349, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa3df);
        EXPECT(gbc.pc(), 0x934b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9349), 0xcb);
        EXPECT(gbc.readMem(0x934a), 0xf7);
        // CB F7 022B
        gbc.setState(0x298b, 0xfd76, 0xa560, 0x8a2e, 0x94c6, 0xeecb, 0x0, 0x1);
        gbc.writeMem(0x298b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfd76);
        EXPECT(gbc.pc(), 0x298d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 022C
        gbc.setState(0x47e, 0xea12, 0xb5b0, 0x3a96, 0xd83b, 0x81fb, 0x0, 0x1);
        gbc.writeMem(0x47e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xea12);
        EXPECT(gbc.pc(), 0x480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 022D
        gbc.setState(0x6cc5, 0x34e, 0x1260, 0x6908, 0xfa74, 0x5e93, 0x1, 0x0);
        gbc.writeMem(0x6cc5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x34e);
        EXPECT(gbc.pc(), 0x6cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 022E
        gbc.setState(0xc35c, 0x1b97, 0x9a50, 0xaf, 0x3923, 0xe335, 0x1, 0x0);
        gbc.writeMem(0xc35c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1b97);
        EXPECT(gbc.pc(), 0xc35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc35c), 0xcb);
        EXPECT(gbc.readMem(0xc35d), 0xf7);
        // CB F7 022F
        gbc.setState(0xd068, 0x72b4, 0xe340, 0x2d8a, 0x2692, 0xd529, 0x1, 0x1);
        gbc.writeMem(0xd068, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x72b4);
        EXPECT(gbc.pc(), 0xd06a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd068), 0xcb);
        EXPECT(gbc.readMem(0xd069), 0xf7);
        // CB F7 0230
        gbc.setState(0x2614, 0x1018, 0xb10, 0x9b05, 0x379e, 0xa53, 0x1, 0x0);
        gbc.writeMem(0x2614, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1018);
        EXPECT(gbc.pc(), 0x2616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0231
        gbc.setState(0x3e22, 0x8cf8, 0xd090, 0xe513, 0xf2c, 0xc4ad, 0x0, 0x0);
        gbc.writeMem(0x3e22, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8cf8);
        EXPECT(gbc.pc(), 0x3e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0232
        gbc.setState(0xc96e, 0xb9b3, 0xa7e0, 0xfd4f, 0xa7b7, 0x500e, 0x1, 0x0);
        gbc.writeMem(0xc96e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb9b3);
        EXPECT(gbc.pc(), 0xc970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc96e), 0xcb);
        EXPECT(gbc.readMem(0xc96f), 0xf7);
        // CB F7 0233
        gbc.setState(0x1657, 0xef5f, 0x1870, 0x47f1, 0xd9c4, 0x8cc9, 0x1, 0x0);
        gbc.writeMem(0x1657, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xef5f);
        EXPECT(gbc.pc(), 0x1659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0234
        gbc.setState(0x4415, 0x82c8, 0x5a20, 0xdc08, 0x986e, 0x156b, 0x1, 0x1);
        gbc.writeMem(0x4415, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x82c8);
        EXPECT(gbc.pc(), 0x4417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0235
        gbc.setState(0x8379, 0xb1ad, 0x8820, 0x9fbd, 0xf6b, 0x1157, 0x0, 0x1);
        gbc.writeMem(0x8379, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb1ad);
        EXPECT(gbc.pc(), 0x837b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8379), 0xcb);
        EXPECT(gbc.readMem(0x837a), 0xf7);
        // CB F7 0236
        gbc.setState(0x9c6e, 0x7a50, 0xe610, 0x348e, 0xf9c3, 0xe47d, 0x1, 0x0);
        gbc.writeMem(0x9c6e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7a50);
        EXPECT(gbc.pc(), 0x9c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6e), 0xcb);
        EXPECT(gbc.readMem(0x9c6f), 0xf7);
        // CB F7 0237
        gbc.setState(0x2b4d, 0x7221, 0xd4d0, 0xc2c4, 0x27f3, 0x56a1, 0x0, 0x1);
        gbc.writeMem(0x2b4d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7221);
        EXPECT(gbc.pc(), 0x2b4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0238
        gbc.setState(0x7782, 0x47e3, 0x2c10, 0xdcb2, 0xd61c, 0x8dc1, 0x0, 0x1);
        gbc.writeMem(0x7782, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x47e3);
        EXPECT(gbc.pc(), 0x7784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0239
        gbc.setState(0x7fe0, 0xafb4, 0x1d0, 0x3b8d, 0x7bb4, 0x8555, 0x0, 0x1);
        gbc.writeMem(0x7fe0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xafb4);
        EXPECT(gbc.pc(), 0x7fe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 023A
        gbc.setState(0x8826, 0x3dd, 0x85d0, 0xebe1, 0xf0b1, 0xf752, 0x0, 0x1);
        gbc.writeMem(0x8826, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3dd);
        EXPECT(gbc.pc(), 0x8828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8826), 0xcb);
        EXPECT(gbc.readMem(0x8827), 0xf7);
        // CB F7 023C
        gbc.setState(0xa03b, 0x6b56, 0x1950, 0x3f20, 0xc446, 0x2bd0, 0x0, 0x0);
        gbc.writeMem(0xa03b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6b56);
        EXPECT(gbc.pc(), 0xa03d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03b), 0xcb);
        EXPECT(gbc.readMem(0xa03c), 0xf7);
        // CB F7 023D
        gbc.setState(0x8eae, 0x4be6, 0x51f0, 0x22b0, 0x9c6c, 0x3af8, 0x1, 0x0);
        gbc.writeMem(0x8eae, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4be6);
        EXPECT(gbc.pc(), 0x8eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eae), 0xcb);
        EXPECT(gbc.readMem(0x8eaf), 0xf7);
        // CB F7 023E
        gbc.setState(0x6df5, 0x1555, 0x4bd0, 0xdbb2, 0xd3b8, 0x6250, 0x1, 0x1);
        gbc.writeMem(0x6df5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1555);
        EXPECT(gbc.pc(), 0x6df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 023F
        gbc.setState(0x4175, 0xa273, 0x91c0, 0xb97b, 0x7f57, 0xadb7, 0x1, 0x1);
        gbc.writeMem(0x4175, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa273);
        EXPECT(gbc.pc(), 0x4177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0240
        gbc.setState(0x28fb, 0xe02, 0x6a0, 0x8e0e, 0x3233, 0x10e7, 0x1, 0x0);
        gbc.writeMem(0x28fb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe02);
        EXPECT(gbc.pc(), 0x28fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0241
        gbc.setState(0xcade, 0xaf72, 0x1ad0, 0x650c, 0xef31, 0x7f61, 0x1, 0x1);
        gbc.writeMem(0xcade, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xaf72);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcade), 0xcb);
        EXPECT(gbc.readMem(0xcadf), 0xf7);
        // CB F7 0242
        gbc.setState(0xe4cd, 0x24a2, 0x78d0, 0x5ba3, 0x4884, 0xa92, 0x1, 0x1);
        gbc.writeMem(0xe4cd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x24a2);
        EXPECT(gbc.pc(), 0xe4cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4cd), 0xcb);
        EXPECT(gbc.readMem(0xe4ce), 0xf7);
        // CB F7 0243
        gbc.setState(0x4289, 0x53e8, 0xf7a0, 0x6bbd, 0x46e5, 0x8c78, 0x1, 0x1);
        gbc.writeMem(0x4289, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x53e8);
        EXPECT(gbc.pc(), 0x428b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0244
        gbc.setState(0xe9d, 0xd6b9, 0x5ce0, 0x754d, 0x391, 0x28cd, 0x1, 0x1);
        gbc.writeMem(0xe9d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd6b9);
        EXPECT(gbc.pc(), 0xe9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0245
        gbc.setState(0x1bab, 0x1cd5, 0x2540, 0x49c7, 0x2c96, 0xa8c0, 0x0, 0x0);
        gbc.writeMem(0x1bab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1cd5);
        EXPECT(gbc.pc(), 0x1bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0246
        gbc.setState(0x816, 0xeff, 0xa660, 0xb0d9, 0xc8f1, 0xa728, 0x1, 0x0);
        gbc.writeMem(0x816, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xeff);
        EXPECT(gbc.pc(), 0x818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0247
        gbc.setState(0x35ca, 0x2efc, 0x5510, 0xd59, 0x6f43, 0x48c7, 0x0, 0x0);
        gbc.writeMem(0x35ca, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2efc);
        EXPECT(gbc.pc(), 0x35cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0248
        gbc.setState(0xc145, 0xc1ff, 0xf90, 0xc013, 0x5d31, 0x999c, 0x1, 0x1);
        gbc.writeMem(0xc145, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc1ff);
        EXPECT(gbc.pc(), 0xc147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc145), 0xcb);
        EXPECT(gbc.readMem(0xc146), 0xf7);
        // CB F7 0249
        gbc.setState(0xac86, 0x501b, 0xc520, 0x3126, 0xc851, 0x8e9, 0x0, 0x0);
        gbc.writeMem(0xac86, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x501b);
        EXPECT(gbc.pc(), 0xac88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac86), 0xcb);
        EXPECT(gbc.readMem(0xac87), 0xf7);
        // CB F7 024A
        gbc.setState(0x8a97, 0x6d67, 0x5f00, 0xd9cc, 0x699a, 0x3e42, 0x0, 0x0);
        gbc.writeMem(0x8a97, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6d67);
        EXPECT(gbc.pc(), 0x8a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a97), 0xcb);
        EXPECT(gbc.readMem(0x8a98), 0xf7);
        // CB F7 024B
        gbc.setState(0xeb0a, 0x6601, 0xcd0, 0x474d, 0xdce7, 0x6f25, 0x0, 0x1);
        gbc.writeMem(0xeb0a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6601);
        EXPECT(gbc.pc(), 0xeb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb0a), 0xcb);
        EXPECT(gbc.readMem(0xeb0b), 0xf7);
        // CB F7 024C
        gbc.setState(0x505a, 0x7183, 0x4870, 0x2093, 0xbc36, 0xb498, 0x0, 0x1);
        gbc.writeMem(0x505a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7183);
        EXPECT(gbc.pc(), 0x505c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 024E
        gbc.setState(0x4a9f, 0x282, 0xf1a0, 0x1e62, 0x2a24, 0x6e89, 0x1, 0x1);
        gbc.writeMem(0x4a9f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x282);
        EXPECT(gbc.pc(), 0x4aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 024F
        gbc.setState(0x9a7c, 0x955d, 0x48c0, 0x4000, 0xd108, 0x3ab6, 0x1, 0x1);
        gbc.writeMem(0x9a7c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x955d);
        EXPECT(gbc.pc(), 0x9a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a7c), 0xcb);
        EXPECT(gbc.readMem(0x9a7d), 0xf7);
        // CB F7 0250
        gbc.setState(0x227f, 0x52c6, 0x25f0, 0x381e, 0x9825, 0xb779, 0x1, 0x0);
        gbc.writeMem(0x227f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x52c6);
        EXPECT(gbc.pc(), 0x2281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0251
        gbc.setState(0xadc3, 0x7700, 0xbff0, 0x85c3, 0xd98f, 0x7f32, 0x0, 0x1);
        gbc.writeMem(0xadc3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7700);
        EXPECT(gbc.pc(), 0xadc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc3), 0xcb);
        EXPECT(gbc.readMem(0xadc4), 0xf7);
        // CB F7 0252
        gbc.setState(0x9361, 0x1ee8, 0x96c0, 0x3f59, 0xe0b, 0x95ab, 0x0, 0x0);
        gbc.writeMem(0x9361, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1ee8);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9361), 0xcb);
        EXPECT(gbc.readMem(0x9362), 0xf7);
        // CB F7 0253
        gbc.setState(0x850c, 0x43b9, 0xa270, 0x4947, 0x904c, 0x5fa, 0x0, 0x0);
        gbc.writeMem(0x850c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x43b9);
        EXPECT(gbc.pc(), 0x850e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x850c), 0xcb);
        EXPECT(gbc.readMem(0x850d), 0xf7);
        // CB F7 0254
        gbc.setState(0xce42, 0x57e7, 0xdcc0, 0xb164, 0x3a9a, 0xa09a, 0x1, 0x0);
        gbc.writeMem(0xce42, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x57e7);
        EXPECT(gbc.pc(), 0xce44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce42), 0xcb);
        EXPECT(gbc.readMem(0xce43), 0xf7);
        // CB F7 0255
        gbc.setState(0xde71, 0xcca8, 0x8260, 0xf1ec, 0x783e, 0x884f, 0x1, 0x1);
        gbc.writeMem(0xde71, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcca8);
        EXPECT(gbc.pc(), 0xde73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde71), 0xcb);
        EXPECT(gbc.readMem(0xde72), 0xf7);
        // CB F7 0256
        gbc.setState(0xe707, 0xccaf, 0xea0, 0xbd74, 0x2047, 0xeaa6, 0x1, 0x0);
        gbc.writeMem(0xe707, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xccaf);
        EXPECT(gbc.pc(), 0xe709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe707), 0xcb);
        EXPECT(gbc.readMem(0xe708), 0xf7);
        // CB F7 0257
        gbc.setState(0x9f4a, 0x5235, 0xc600, 0xb440, 0xdb7c, 0xc653, 0x1, 0x1);
        gbc.writeMem(0x9f4a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5235);
        EXPECT(gbc.pc(), 0x9f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f4a), 0xcb);
        EXPECT(gbc.readMem(0x9f4b), 0xf7);
        // CB F7 0259
        gbc.setState(0xbf61, 0x4d70, 0xcbb0, 0x6973, 0xbf75, 0x77a6, 0x0, 0x1);
        gbc.writeMem(0xbf61, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4d70);
        EXPECT(gbc.pc(), 0xbf63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf61), 0xcb);
        EXPECT(gbc.readMem(0xbf62), 0xf7);
        // CB F7 025A
        gbc.setState(0x6174, 0xf248, 0x5cd0, 0x22fd, 0xa160, 0x5fe9, 0x0, 0x0);
        gbc.writeMem(0x6174, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf248);
        EXPECT(gbc.pc(), 0x6176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 025B
        gbc.setState(0xee05, 0x7d8, 0x9250, 0xf051, 0xb217, 0xbe82, 0x1, 0x1);
        gbc.writeMem(0xee05, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7d8);
        EXPECT(gbc.pc(), 0xee07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee05), 0xcb);
        EXPECT(gbc.readMem(0xee06), 0xf7);
        // CB F7 025C
        gbc.setState(0x50a, 0x9e98, 0x2440, 0x53d8, 0x553b, 0x2b, 0x0, 0x0);
        gbc.writeMem(0x50a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9e98);
        EXPECT(gbc.pc(), 0x50c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 025D
        gbc.setState(0x45b5, 0x8038, 0xd350, 0xc0a8, 0x7f98, 0x295c, 0x1, 0x0);
        gbc.writeMem(0x45b5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8038);
        EXPECT(gbc.pc(), 0x45b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 025E
        gbc.setState(0xb513, 0xea1f, 0xa740, 0xc95c, 0xfe32, 0xa642, 0x1, 0x0);
        gbc.writeMem(0xb513, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xea1f);
        EXPECT(gbc.pc(), 0xb515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb513), 0xcb);
        EXPECT(gbc.readMem(0xb514), 0xf7);
        // CB F7 025F
        gbc.setState(0x145c, 0x84dc, 0xb7f0, 0xd0e7, 0x2cdb, 0xe5ce, 0x0, 0x1);
        gbc.writeMem(0x145c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x84dc);
        EXPECT(gbc.pc(), 0x145e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0260
        gbc.setState(0xbd1c, 0x5346, 0x8840, 0xdf76, 0xcb27, 0x5ae7, 0x0, 0x1);
        gbc.writeMem(0xbd1c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5346);
        EXPECT(gbc.pc(), 0xbd1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1c), 0xcb);
        EXPECT(gbc.readMem(0xbd1d), 0xf7);
        // CB F7 0261
        gbc.setState(0xda76, 0xae16, 0xe20, 0x6b98, 0x14ac, 0xec17, 0x1, 0x0);
        gbc.writeMem(0xda76, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xae16);
        EXPECT(gbc.pc(), 0xda78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda76), 0xcb);
        EXPECT(gbc.readMem(0xda77), 0xf7);
        // CB F7 0262
        gbc.setState(0x1781, 0xddc2, 0xc4b0, 0x7e9e, 0x6e0b, 0xae71, 0x0, 0x0);
        gbc.writeMem(0x1781, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xddc2);
        EXPECT(gbc.pc(), 0x1783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0263
        gbc.setState(0xb5b5, 0xa268, 0x8c20, 0x6fb3, 0x1f54, 0x367d, 0x0, 0x0);
        gbc.writeMem(0xb5b5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa268);
        EXPECT(gbc.pc(), 0xb5b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b5), 0xcb);
        EXPECT(gbc.readMem(0xb5b6), 0xf7);
        // CB F7 0264
        gbc.setState(0x96a0, 0x9e4a, 0x1320, 0x9fb9, 0x3719, 0x14b9, 0x0, 0x1);
        gbc.writeMem(0x96a0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9e4a);
        EXPECT(gbc.pc(), 0x96a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a0), 0xcb);
        EXPECT(gbc.readMem(0x96a1), 0xf7);
        // CB F7 0265
        gbc.setState(0x740a, 0xefeb, 0x4180, 0xdcad, 0x7c80, 0xf25c, 0x0, 0x0);
        gbc.writeMem(0x740a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xefeb);
        EXPECT(gbc.pc(), 0x740c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0266
        gbc.setState(0x446a, 0xc039, 0x79b0, 0x2228, 0xcb70, 0x5f95, 0x1, 0x1);
        gbc.writeMem(0x446a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc039);
        EXPECT(gbc.pc(), 0x446c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0267
        gbc.setState(0xd58d, 0x7b46, 0x13f0, 0x77d0, 0xd444, 0xf6ab, 0x1, 0x0);
        gbc.writeMem(0xd58d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7b46);
        EXPECT(gbc.pc(), 0xd58f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58d), 0xcb);
        EXPECT(gbc.readMem(0xd58e), 0xf7);
        // CB F7 0268
        gbc.setState(0x29ea, 0xd486, 0x3440, 0xb5f, 0x5de, 0x7685, 0x1, 0x1);
        gbc.writeMem(0x29ea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd486);
        EXPECT(gbc.pc(), 0x29ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0269
        gbc.setState(0x3111, 0x7b52, 0xe4b0, 0xd824, 0x1291, 0xc9f7, 0x0, 0x0);
        gbc.writeMem(0x3111, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7b52);
        EXPECT(gbc.pc(), 0x3113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 026A
        gbc.setState(0xa641, 0x40e5, 0x9ad0, 0xf9b1, 0x3c66, 0x23d5, 0x1, 0x0);
        gbc.writeMem(0xa641, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x40e5);
        EXPECT(gbc.pc(), 0xa643);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa641), 0xcb);
        EXPECT(gbc.readMem(0xa642), 0xf7);
        // CB F7 026C
        gbc.setState(0x16f6, 0x60d2, 0xc910, 0xc019, 0xe303, 0xb055, 0x1, 0x1);
        gbc.writeMem(0x16f6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x60d2);
        EXPECT(gbc.pc(), 0x16f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 026D
        gbc.setState(0x292c, 0x1c36, 0x8750, 0xb10f, 0x4174, 0xfc25, 0x1, 0x0);
        gbc.writeMem(0x292c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1c36);
        EXPECT(gbc.pc(), 0x292e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 026E
        gbc.setState(0x3156, 0x2e36, 0xe000, 0x9dd8, 0x4508, 0xd620, 0x1, 0x1);
        gbc.writeMem(0x3156, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2e36);
        EXPECT(gbc.pc(), 0x3158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 026F
        gbc.setState(0x56be, 0x4dd3, 0x8f70, 0x5018, 0x90fb, 0xec3b, 0x1, 0x1);
        gbc.writeMem(0x56be, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4dd3);
        EXPECT(gbc.pc(), 0x56c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0270
        gbc.setState(0xc433, 0xffe9, 0xed60, 0x2241, 0x17b7, 0x1f4e, 0x1, 0x1);
        gbc.writeMem(0xc433, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xffe9);
        EXPECT(gbc.pc(), 0xc435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc433), 0xcb);
        EXPECT(gbc.readMem(0xc434), 0xf7);
        // CB F7 0271
        gbc.setState(0xa413, 0x439, 0x48a0, 0x9644, 0xbf25, 0xd3a8, 0x0, 0x1);
        gbc.writeMem(0xa413, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x439);
        EXPECT(gbc.pc(), 0xa415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa413), 0xcb);
        EXPECT(gbc.readMem(0xa414), 0xf7);
        // CB F7 0272
        gbc.setState(0x66d8, 0x53cd, 0x4300, 0xbaaf, 0x5929, 0xe273, 0x1, 0x1);
        gbc.writeMem(0x66d8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x53cd);
        EXPECT(gbc.pc(), 0x66da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0274
        gbc.setState(0x1843, 0x3802, 0x21f0, 0x22c3, 0x6291, 0x312a, 0x1, 0x0);
        gbc.writeMem(0x1843, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3802);
        EXPECT(gbc.pc(), 0x1845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0275
        gbc.setState(0xb400, 0x6ca4, 0xe300, 0xb8e7, 0xad9e, 0xa99f, 0x0, 0x0);
        gbc.writeMem(0xb400, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6ca4);
        EXPECT(gbc.pc(), 0xb402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb400), 0xcb);
        EXPECT(gbc.readMem(0xb401), 0xf7);
        // CB F7 0276
        gbc.setState(0x53db, 0xa63e, 0xc1a0, 0x1cfd, 0xe2c4, 0x759, 0x0, 0x1);
        gbc.writeMem(0x53db, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa63e);
        EXPECT(gbc.pc(), 0x53dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0277
        gbc.setState(0xdc27, 0xb5de, 0xb950, 0xdeb, 0x6d02, 0xbe3c, 0x1, 0x1);
        gbc.writeMem(0xdc27, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb5de);
        EXPECT(gbc.pc(), 0xdc29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc27), 0xcb);
        EXPECT(gbc.readMem(0xdc28), 0xf7);
        // CB F7 0278
        gbc.setState(0x9d31, 0x9fa0, 0xd650, 0x7d8d, 0xe9fc, 0x969, 0x1, 0x0);
        gbc.writeMem(0x9d31, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9fa0);
        EXPECT(gbc.pc(), 0x9d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d31), 0xcb);
        EXPECT(gbc.readMem(0x9d32), 0xf7);
        // CB F7 0279
        gbc.setState(0xec8, 0xf1c3, 0xd250, 0x6839, 0x8455, 0x3b6a, 0x0, 0x0);
        gbc.writeMem(0xec8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf1c3);
        EXPECT(gbc.pc(), 0xeca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 027A
        gbc.setState(0xee3b, 0x67a9, 0xe350, 0x13fd, 0x86f3, 0x6ab8, 0x0, 0x1);
        gbc.writeMem(0xee3b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x67a9);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3b), 0xcb);
        EXPECT(gbc.readMem(0xee3c), 0xf7);
        // CB F7 027B
        gbc.setState(0xdd3d, 0x97b1, 0xf3d0, 0x43ae, 0xe6eb, 0xa72f, 0x0, 0x1);
        gbc.writeMem(0xdd3d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x97b1);
        EXPECT(gbc.pc(), 0xdd3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd3d), 0xcb);
        EXPECT(gbc.readMem(0xdd3e), 0xf7);
        // CB F7 027C
        gbc.setState(0x4436, 0xe2bf, 0x1920, 0x648e, 0xab9a, 0xdd9f, 0x1, 0x1);
        gbc.writeMem(0x4436, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe2bf);
        EXPECT(gbc.pc(), 0x4438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 027D
        gbc.setState(0x26b0, 0xdf89, 0xcd60, 0x7bbe, 0xfea9, 0xaae9, 0x1, 0x1);
        gbc.writeMem(0x26b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xdf89);
        EXPECT(gbc.pc(), 0x26b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 027E
        gbc.setState(0x4def, 0xeed9, 0x8d00, 0x8266, 0xd174, 0xa323, 0x1, 0x1);
        gbc.writeMem(0x4def, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xeed9);
        EXPECT(gbc.pc(), 0x4df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 027F
        gbc.setState(0x6cab, 0xf7b5, 0x9f90, 0x2743, 0xb852, 0x428b, 0x0, 0x0);
        gbc.writeMem(0x6cab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf7b5);
        EXPECT(gbc.pc(), 0x6cad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0280
        gbc.setState(0x370d, 0xec96, 0x94a0, 0xc72a, 0xbd78, 0x2c10, 0x1, 0x0);
        gbc.writeMem(0x370d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xec96);
        EXPECT(gbc.pc(), 0x370f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0281
        gbc.setState(0x6884, 0x5bdf, 0x1ba0, 0x7ef, 0x6f36, 0x2863, 0x1, 0x0);
        gbc.writeMem(0x6884, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5bdf);
        EXPECT(gbc.pc(), 0x6886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0282
        gbc.setState(0x7e31, 0x6e45, 0xcf50, 0x2ffa, 0xb08d, 0x5374, 0x0, 0x1);
        gbc.writeMem(0x7e31, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6e45);
        EXPECT(gbc.pc(), 0x7e33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0283
        gbc.setState(0x8d50, 0x17eb, 0xd260, 0x94d, 0x321a, 0x88ce, 0x0, 0x1);
        gbc.writeMem(0x8d50, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x17eb);
        EXPECT(gbc.pc(), 0x8d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d50), 0xcb);
        EXPECT(gbc.readMem(0x8d51), 0xf7);
        // CB F7 0284
        gbc.setState(0x5a40, 0xeb0b, 0xaa30, 0x54, 0xc1de, 0x37f1, 0x0, 0x1);
        gbc.writeMem(0x5a40, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xeb0b);
        EXPECT(gbc.pc(), 0x5a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0285
        gbc.setState(0xc64, 0x2362, 0x1360, 0xd962, 0x8b4d, 0xe330, 0x1, 0x0);
        gbc.writeMem(0xc64, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2362);
        EXPECT(gbc.pc(), 0xc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0286
        gbc.setState(0x1d3e, 0xd012, 0x5440, 0xef5, 0x6b8, 0xc1e1, 0x0, 0x0);
        gbc.writeMem(0x1d3e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd012);
        EXPECT(gbc.pc(), 0x1d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0287
        gbc.setState(0x465d, 0xd566, 0x1b90, 0x9e72, 0x5011, 0xca44, 0x0, 0x1);
        gbc.writeMem(0x465d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd566);
        EXPECT(gbc.pc(), 0x465f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0288
        gbc.setState(0x6d3f, 0x498a, 0x39d0, 0xdf57, 0x59e4, 0xb7bd, 0x1, 0x0);
        gbc.writeMem(0x6d3f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x498a);
        EXPECT(gbc.pc(), 0x6d41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0289
        gbc.setState(0x620e, 0x930b, 0x8550, 0x46f7, 0x364f, 0x61d6, 0x0, 0x0);
        gbc.writeMem(0x620e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x930b);
        EXPECT(gbc.pc(), 0x6210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 028A
        gbc.setState(0xd760, 0x43cf, 0x72c0, 0xc31b, 0x56d6, 0xaef4, 0x1, 0x1);
        gbc.writeMem(0xd760, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x43cf);
        EXPECT(gbc.pc(), 0xd762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd760), 0xcb);
        EXPECT(gbc.readMem(0xd761), 0xf7);
        // CB F7 028B
        gbc.setState(0x4c77, 0xb8ef, 0x6f50, 0xaa14, 0xa75, 0x96da, 0x1, 0x1);
        gbc.writeMem(0x4c77, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb8ef);
        EXPECT(gbc.pc(), 0x4c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 028C
        gbc.setState(0x45e0, 0xf444, 0x380, 0xdfbe, 0xba42, 0x6e9f, 0x0, 0x1);
        gbc.writeMem(0x45e0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf444);
        EXPECT(gbc.pc(), 0x45e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 028D
        gbc.setState(0x8031, 0xea68, 0xb060, 0xacf4, 0xefb, 0x3088, 0x0, 0x1);
        gbc.writeMem(0x8031, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xea68);
        EXPECT(gbc.pc(), 0x8033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8031), 0xcb);
        EXPECT(gbc.readMem(0x8032), 0xf7);
        // CB F7 028E
        gbc.setState(0x92ed, 0x173d, 0xfbe0, 0xad9c, 0x909c, 0x1ea2, 0x0, 0x0);
        gbc.writeMem(0x92ed, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x173d);
        EXPECT(gbc.pc(), 0x92ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ed), 0xcb);
        EXPECT(gbc.readMem(0x92ee), 0xf7);
        // CB F7 028F
        gbc.setState(0x224e, 0xe2a6, 0x7c80, 0xcc18, 0xbf6e, 0xbad5, 0x0, 0x0);
        gbc.writeMem(0x224e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe2a6);
        EXPECT(gbc.pc(), 0x2250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0290
        gbc.setState(0x65b, 0xbde, 0x4fc0, 0x6174, 0x7162, 0x7ec9, 0x1, 0x0);
        gbc.writeMem(0x65b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbde);
        EXPECT(gbc.pc(), 0x65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0291
        gbc.setState(0x8a6, 0x529d, 0x6ad0, 0xf595, 0xaf0b, 0xcc34, 0x1, 0x1);
        gbc.writeMem(0x8a6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x529d);
        EXPECT(gbc.pc(), 0x8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0292
        gbc.setState(0xb7b5, 0x86dd, 0x7650, 0xb7c9, 0x19e2, 0x8f17, 0x1, 0x1);
        gbc.writeMem(0xb7b5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x86dd);
        EXPECT(gbc.pc(), 0xb7b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b5), 0xcb);
        EXPECT(gbc.readMem(0xb7b6), 0xf7);
        // CB F7 0293
        gbc.setState(0xbdf9, 0x796a, 0x9240, 0xce93, 0x90da, 0xe6ab, 0x1, 0x1);
        gbc.writeMem(0xbdf9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x796a);
        EXPECT(gbc.pc(), 0xbdfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf9), 0xcb);
        EXPECT(gbc.readMem(0xbdfa), 0xf7);
        // CB F7 0294
        gbc.setState(0x9042, 0x4a07, 0x4e70, 0xaeb9, 0x2b0c, 0x128d, 0x1, 0x0);
        gbc.writeMem(0x9042, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4a07);
        EXPECT(gbc.pc(), 0x9044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9042), 0xcb);
        EXPECT(gbc.readMem(0x9043), 0xf7);
        // CB F7 0295
        gbc.setState(0xead8, 0xa44a, 0x25d0, 0x1258, 0xb88c, 0x3665, 0x1, 0x1);
        gbc.writeMem(0xead8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa44a);
        EXPECT(gbc.pc(), 0xeada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead8), 0xcb);
        EXPECT(gbc.readMem(0xead9), 0xf7);
        // CB F7 0296
        gbc.setState(0x6114, 0x29a4, 0x1ea0, 0xa062, 0x87bf, 0x6ab1, 0x1, 0x0);
        gbc.writeMem(0x6114, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x29a4);
        EXPECT(gbc.pc(), 0x6116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0297
        gbc.setState(0x4dfb, 0x3c98, 0xf5c0, 0xef1b, 0x4924, 0xf74a, 0x1, 0x0);
        gbc.writeMem(0x4dfb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3c98);
        EXPECT(gbc.pc(), 0x4dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0298
        gbc.setState(0xb0e0, 0xa5a2, 0xb230, 0xaa29, 0xef1d, 0xa282, 0x0, 0x1);
        gbc.writeMem(0xb0e0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa5a2);
        EXPECT(gbc.pc(), 0xb0e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e0), 0xcb);
        EXPECT(gbc.readMem(0xb0e1), 0xf7);
        // CB F7 0299
        gbc.setState(0xf7d, 0x1565, 0x6e00, 0x9e2, 0x7450, 0x81c9, 0x0, 0x1);
        gbc.writeMem(0xf7d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1565);
        EXPECT(gbc.pc(), 0xf7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 029A
        gbc.setState(0x8ef2, 0xe01b, 0x2590, 0xf011, 0xd510, 0xfd09, 0x0, 0x0);
        gbc.writeMem(0x8ef2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe01b);
        EXPECT(gbc.pc(), 0x8ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef2), 0xcb);
        EXPECT(gbc.readMem(0x8ef3), 0xf7);
        // CB F7 029B
        gbc.setState(0xa649, 0x1514, 0x490, 0xfafb, 0x7fa7, 0x1166, 0x0, 0x0);
        gbc.writeMem(0xa649, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1514);
        EXPECT(gbc.pc(), 0xa64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa649), 0xcb);
        EXPECT(gbc.readMem(0xa64a), 0xf7);
        // CB F7 029C
        gbc.setState(0x17e5, 0x76c0, 0xa240, 0x1f95, 0x227a, 0x9e2b, 0x0, 0x0);
        gbc.writeMem(0x17e5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x76c0);
        EXPECT(gbc.pc(), 0x17e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 029D
        gbc.setState(0xb5b4, 0xc46f, 0xeb70, 0x4b2d, 0x6834, 0xaf27, 0x1, 0x0);
        gbc.writeMem(0xb5b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc46f);
        EXPECT(gbc.pc(), 0xb5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b4), 0xcb);
        EXPECT(gbc.readMem(0xb5b5), 0xf7);
        // CB F7 029E
        gbc.setState(0x21b8, 0xd319, 0xea50, 0x1e18, 0x7979, 0xc438, 0x0, 0x0);
        gbc.writeMem(0x21b8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd319);
        EXPECT(gbc.pc(), 0x21ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 029F
        gbc.setState(0xc74e, 0x57a, 0xc5c0, 0xd262, 0xc8bc, 0x4e34, 0x0, 0x0);
        gbc.writeMem(0xc74e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x57a);
        EXPECT(gbc.pc(), 0xc750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74e), 0xcb);
        EXPECT(gbc.readMem(0xc74f), 0xf7);
        // CB F7 02A0
        gbc.setState(0x85b4, 0x71e1, 0x5f40, 0x4e9e, 0x6115, 0x9e08, 0x0, 0x1);
        gbc.writeMem(0x85b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x71e1);
        EXPECT(gbc.pc(), 0x85b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b4), 0xcb);
        EXPECT(gbc.readMem(0x85b5), 0xf7);
        // CB F7 02A1
        gbc.setState(0x9990, 0x6689, 0x5bc0, 0xbfa3, 0xb0ff, 0xc0f0, 0x1, 0x1);
        gbc.writeMem(0x9990, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6689);
        EXPECT(gbc.pc(), 0x9992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9990), 0xcb);
        EXPECT(gbc.readMem(0x9991), 0xf7);
        // CB F7 02A2
        gbc.setState(0xacf7, 0x5c1, 0x8280, 0x22ee, 0x47f8, 0x63a8, 0x1, 0x1);
        gbc.writeMem(0xacf7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5c1);
        EXPECT(gbc.pc(), 0xacf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf7), 0xcb);
        EXPECT(gbc.readMem(0xacf8), 0xf7);
        // CB F7 02A3
        gbc.setState(0x30f0, 0x83ce, 0xd7f0, 0x3be0, 0xefb3, 0xb849, 0x1, 0x0);
        gbc.writeMem(0x30f0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x83ce);
        EXPECT(gbc.pc(), 0x30f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02A4
        gbc.setState(0x97bf, 0x601e, 0x2200, 0xbfc3, 0x2ff4, 0x74de, 0x0, 0x0);
        gbc.writeMem(0x97bf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x601e);
        EXPECT(gbc.pc(), 0x97c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bf), 0xcb);
        EXPECT(gbc.readMem(0x97c0), 0xf7);
        // CB F7 02A5
        gbc.setState(0x3505, 0xd9d8, 0x4d10, 0xa94f, 0x6a2e, 0x2530, 0x0, 0x1);
        gbc.writeMem(0x3505, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd9d8);
        EXPECT(gbc.pc(), 0x3507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02A6
        gbc.setState(0xaec1, 0x290b, 0x40a0, 0x6053, 0x6437, 0x34a4, 0x1, 0x1);
        gbc.writeMem(0xaec1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x290b);
        EXPECT(gbc.pc(), 0xaec3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec1), 0xcb);
        EXPECT(gbc.readMem(0xaec2), 0xf7);
        // CB F7 02A7
        gbc.setState(0xed19, 0xb829, 0xa4a0, 0xf6c0, 0x71d0, 0x130b, 0x0, 0x1);
        gbc.writeMem(0xed19, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb829);
        EXPECT(gbc.pc(), 0xed1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed19), 0xcb);
        EXPECT(gbc.readMem(0xed1a), 0xf7);
        // CB F7 02A8
        gbc.setState(0xa5f4, 0xcb05, 0xa810, 0xfd22, 0x3964, 0xf2ae, 0x0, 0x0);
        gbc.writeMem(0xa5f4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcb05);
        EXPECT(gbc.pc(), 0xa5f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f4), 0xcb);
        EXPECT(gbc.readMem(0xa5f5), 0xf7);
        // CB F7 02A9
        gbc.setState(0x95e9, 0xd14a, 0xee40, 0x73b5, 0xbcba, 0x720a, 0x1, 0x0);
        gbc.writeMem(0x95e9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd14a);
        EXPECT(gbc.pc(), 0x95eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e9), 0xcb);
        EXPECT(gbc.readMem(0x95ea), 0xf7);
        // CB F7 02AB
        gbc.setState(0x14c, 0xc49d, 0x3c30, 0x3aca, 0xeede, 0x77cf, 0x0, 0x0);
        gbc.writeMem(0x14c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc49d);
        EXPECT(gbc.pc(), 0x14e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02AC
        gbc.setState(0x2bc0, 0x38d4, 0xac00, 0xd3d5, 0xc608, 0xc82b, 0x0, 0x1);
        gbc.writeMem(0x2bc0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x38d4);
        EXPECT(gbc.pc(), 0x2bc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02AD
        gbc.setState(0x987, 0x3239, 0x5990, 0x8699, 0x366, 0x3c14, 0x1, 0x0);
        gbc.writeMem(0x987, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3239);
        EXPECT(gbc.pc(), 0x989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02AE
        gbc.setState(0x5ad2, 0x14a5, 0xc4f0, 0x901c, 0xf6ac, 0x964c, 0x1, 0x0);
        gbc.writeMem(0x5ad2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x14a5);
        EXPECT(gbc.pc(), 0x5ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02AF
        gbc.setState(0x9f87, 0xa13, 0x9780, 0x189a, 0xf78e, 0x4132, 0x0, 0x1);
        gbc.writeMem(0x9f87, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa13);
        EXPECT(gbc.pc(), 0x9f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f87), 0xcb);
        EXPECT(gbc.readMem(0x9f88), 0xf7);
        // CB F7 02B0
        gbc.setState(0x61b9, 0x4c35, 0x60b0, 0x1ecc, 0xd867, 0x2106, 0x1, 0x0);
        gbc.writeMem(0x61b9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4c35);
        EXPECT(gbc.pc(), 0x61bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02B1
        gbc.setState(0x7720, 0x87a, 0xfa50, 0x46ae, 0x9bf4, 0x58a5, 0x0, 0x0);
        gbc.writeMem(0x7720, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x87a);
        EXPECT(gbc.pc(), 0x7722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02B3
        gbc.setState(0xef17, 0x8267, 0xec40, 0xf9ea, 0x24c2, 0x47a2, 0x1, 0x1);
        gbc.writeMem(0xef17, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8267);
        EXPECT(gbc.pc(), 0xef19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef17), 0xcb);
        EXPECT(gbc.readMem(0xef18), 0xf7);
        // CB F7 02B4
        gbc.setState(0xd538, 0x2aa4, 0xe370, 0x557b, 0x6de8, 0x4fe, 0x0, 0x1);
        gbc.writeMem(0xd538, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2aa4);
        EXPECT(gbc.pc(), 0xd53a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd538), 0xcb);
        EXPECT(gbc.readMem(0xd539), 0xf7);
        // CB F7 02B5
        gbc.setState(0xdcbc, 0x5ce, 0x32d0, 0xdc7c, 0xcf16, 0x9095, 0x1, 0x0);
        gbc.writeMem(0xdcbc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5ce);
        EXPECT(gbc.pc(), 0xdcbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcbc), 0xcb);
        EXPECT(gbc.readMem(0xdcbd), 0xf7);
        // CB F7 02B6
        gbc.setState(0x155b, 0xae24, 0x3630, 0x1217, 0x2f09, 0x4cc8, 0x1, 0x0);
        gbc.writeMem(0x155b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xae24);
        EXPECT(gbc.pc(), 0x155d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02B7
        gbc.setState(0x5d72, 0xf85f, 0x3160, 0xeef9, 0xb6bc, 0x86d6, 0x0, 0x0);
        gbc.writeMem(0x5d72, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf85f);
        EXPECT(gbc.pc(), 0x5d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02B8
        gbc.setState(0xb07a, 0x344e, 0xdbe0, 0x25e8, 0xe7fc, 0xdf75, 0x0, 0x0);
        gbc.writeMem(0xb07a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x344e);
        EXPECT(gbc.pc(), 0xb07c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb07a), 0xcb);
        EXPECT(gbc.readMem(0xb07b), 0xf7);
        // CB F7 02B9
        gbc.setState(0x7b28, 0x26da, 0x7920, 0x3a37, 0xfe64, 0xc4d2, 0x0, 0x0);
        gbc.writeMem(0x7b28, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x26da);
        EXPECT(gbc.pc(), 0x7b2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02BA
        gbc.setState(0xde07, 0xea6b, 0x2ce0, 0x25c2, 0x9abe, 0x78ca, 0x0, 0x0);
        gbc.writeMem(0xde07, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xea6b);
        EXPECT(gbc.pc(), 0xde09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde07), 0xcb);
        EXPECT(gbc.readMem(0xde08), 0xf7);
        // CB F7 02BB
        gbc.setState(0x8af4, 0x1c46, 0xd600, 0xc47d, 0x76f5, 0x9f8d, 0x0, 0x1);
        gbc.writeMem(0x8af4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1c46);
        EXPECT(gbc.pc(), 0x8af6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af4), 0xcb);
        EXPECT(gbc.readMem(0x8af5), 0xf7);
        // CB F7 02BC
        gbc.setState(0xdf09, 0xf532, 0x1c10, 0x252b, 0x49ec, 0xefcb, 0x1, 0x1);
        gbc.writeMem(0xdf09, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0xdf0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf09), 0xcb);
        EXPECT(gbc.readMem(0xdf0a), 0xf7);
        // CB F7 02BD
        gbc.setState(0x6367, 0x81c0, 0x9dc0, 0x9124, 0xd280, 0xcacb, 0x1, 0x0);
        gbc.writeMem(0x6367, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x81c0);
        EXPECT(gbc.pc(), 0x6369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02BE
        gbc.setState(0x563, 0x4ba4, 0xe7f0, 0x67b6, 0xa525, 0x91d0, 0x1, 0x1);
        gbc.writeMem(0x563, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4ba4);
        EXPECT(gbc.pc(), 0x565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02BF
        gbc.setState(0x76c3, 0xd40c, 0xb9e0, 0xd826, 0x58d7, 0xb733, 0x1, 0x1);
        gbc.writeMem(0x76c3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd40c);
        EXPECT(gbc.pc(), 0x76c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02C0
        gbc.setState(0xe047, 0xb66, 0x2b90, 0x1183, 0xf64b, 0x5a7b, 0x0, 0x1);
        gbc.writeMem(0xe047, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb66);
        EXPECT(gbc.pc(), 0xe049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe047), 0xcb);
        EXPECT(gbc.readMem(0xe048), 0xf7);
        // CB F7 02C1
        gbc.setState(0x667e, 0x292b, 0x400, 0xeec9, 0x9959, 0xe951, 0x1, 0x1);
        gbc.writeMem(0x667e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x292b);
        EXPECT(gbc.pc(), 0x6680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02C2
        gbc.setState(0xbf38, 0x6bd1, 0x8130, 0x4b81, 0x5d9e, 0x28fe, 0x0, 0x0);
        gbc.writeMem(0xbf38, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6bd1);
        EXPECT(gbc.pc(), 0xbf3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf38), 0xcb);
        EXPECT(gbc.readMem(0xbf39), 0xf7);
        // CB F7 02C3
        gbc.setState(0x8216, 0x76d7, 0x3970, 0x872a, 0x4ce, 0xa28f, 0x0, 0x1);
        gbc.writeMem(0x8216, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x76d7);
        EXPECT(gbc.pc(), 0x8218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8216), 0xcb);
        EXPECT(gbc.readMem(0x8217), 0xf7);
        // CB F7 02C4
        gbc.setState(0x6a72, 0x75e5, 0x22d0, 0x15f9, 0x740b, 0xd532, 0x0, 0x1);
        gbc.writeMem(0x6a72, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x75e5);
        EXPECT(gbc.pc(), 0x6a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02C5
        gbc.setState(0xb0b0, 0xf252, 0xe430, 0xe92b, 0x67cb, 0x19c3, 0x0, 0x0);
        gbc.writeMem(0xb0b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf252);
        EXPECT(gbc.pc(), 0xb0b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b0), 0xcb);
        EXPECT(gbc.readMem(0xb0b1), 0xf7);
        // CB F7 02C6
        gbc.setState(0x7d97, 0x2967, 0xe9f0, 0xdf4a, 0xa49e, 0xc0b0, 0x0, 0x1);
        gbc.writeMem(0x7d97, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2967);
        EXPECT(gbc.pc(), 0x7d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02C8
        gbc.setState(0x67f3, 0x98bd, 0x7cf0, 0x7327, 0x5530, 0x93a0, 0x0, 0x0);
        gbc.writeMem(0x67f3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x98bd);
        EXPECT(gbc.pc(), 0x67f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02C9
        gbc.setState(0xbdb3, 0x133f, 0xfd20, 0x1aa0, 0xd6ce, 0x37b5, 0x0, 0x0);
        gbc.writeMem(0xbdb3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x133f);
        EXPECT(gbc.pc(), 0xbdb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb3), 0xcb);
        EXPECT(gbc.readMem(0xbdb4), 0xf7);
        // CB F7 02CA
        gbc.setState(0x6e15, 0xf4af, 0x1640, 0x51ee, 0x1e38, 0xc0e0, 0x0, 0x1);
        gbc.writeMem(0x6e15, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf4af);
        EXPECT(gbc.pc(), 0x6e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02CC
        gbc.setState(0x351, 0xac8c, 0x8950, 0x3b1, 0x5d86, 0x33d6, 0x0, 0x0);
        gbc.writeMem(0x351, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xac8c);
        EXPECT(gbc.pc(), 0x353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02CD
        gbc.setState(0x22ad, 0x453c, 0xea00, 0x255e, 0xa71, 0x8eeb, 0x0, 0x1);
        gbc.writeMem(0x22ad, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x453c);
        EXPECT(gbc.pc(), 0x22af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02CE
        gbc.setState(0x5de2, 0xcac, 0xd790, 0x99cf, 0x2c76, 0xa86c, 0x0, 0x0);
        gbc.writeMem(0x5de2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcac);
        EXPECT(gbc.pc(), 0x5de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02CF
        gbc.setState(0xbbe3, 0x9dfb, 0xd990, 0x5b5d, 0x9edf, 0xfa49, 0x0, 0x1);
        gbc.writeMem(0xbbe3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9dfb);
        EXPECT(gbc.pc(), 0xbbe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe3), 0xcb);
        EXPECT(gbc.readMem(0xbbe4), 0xf7);
        // CB F7 02D0
        gbc.setState(0x3044, 0x16df, 0xe5d0, 0xec40, 0x365a, 0x2d7, 0x1, 0x1);
        gbc.writeMem(0x3044, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x16df);
        EXPECT(gbc.pc(), 0x3046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02D1
        gbc.setState(0x81a9, 0xa902, 0xc750, 0xdc5e, 0x5cdd, 0x7e0, 0x1, 0x1);
        gbc.writeMem(0x81a9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa902);
        EXPECT(gbc.pc(), 0x81ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a9), 0xcb);
        EXPECT(gbc.readMem(0x81aa), 0xf7);
        // CB F7 02D2
        gbc.setState(0x5022, 0x490f, 0xb290, 0x28b8, 0x5fbb, 0xcb51, 0x1, 0x0);
        gbc.writeMem(0x5022, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x490f);
        EXPECT(gbc.pc(), 0x5024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02D3
        gbc.setState(0x103e, 0x3512, 0x70d0, 0xe8ba, 0x83ec, 0x2f63, 0x0, 0x0);
        gbc.writeMem(0x103e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3512);
        EXPECT(gbc.pc(), 0x1040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02D4
        gbc.setState(0xd50e, 0xae2e, 0x3450, 0xb58a, 0xd16, 0x6d12, 0x0, 0x0);
        gbc.writeMem(0xd50e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xae2e);
        EXPECT(gbc.pc(), 0xd510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50e), 0xcb);
        EXPECT(gbc.readMem(0xd50f), 0xf7);
        // CB F7 02D5
        gbc.setState(0x5e98, 0x2f8c, 0x3870, 0x71c9, 0x1c8f, 0x5281, 0x1, 0x0);
        gbc.writeMem(0x5e98, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2f8c);
        EXPECT(gbc.pc(), 0x5e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02D6
        gbc.setState(0xd396, 0xa3e4, 0xe1e0, 0x61e0, 0xc76, 0xc887, 0x0, 0x1);
        gbc.writeMem(0xd396, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa3e4);
        EXPECT(gbc.pc(), 0xd398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd396), 0xcb);
        EXPECT(gbc.readMem(0xd397), 0xf7);
        // CB F7 02D7
        gbc.setState(0xc8b7, 0x40f4, 0xd190, 0x18ee, 0xedf6, 0x579a, 0x1, 0x1);
        gbc.writeMem(0xc8b7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x40f4);
        EXPECT(gbc.pc(), 0xc8b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b7), 0xcb);
        EXPECT(gbc.readMem(0xc8b8), 0xf7);
        // CB F7 02D8
        gbc.setState(0xbbba, 0x6cb8, 0xf310, 0x7a11, 0x240c, 0x3b08, 0x0, 0x1);
        gbc.writeMem(0xbbba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6cb8);
        EXPECT(gbc.pc(), 0xbbbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbba), 0xcb);
        EXPECT(gbc.readMem(0xbbbb), 0xf7);
        // CB F7 02D9
        gbc.setState(0xa151, 0x17c0, 0x18e0, 0x2520, 0x79cc, 0xea76, 0x0, 0x0);
        gbc.writeMem(0xa151, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x17c0);
        EXPECT(gbc.pc(), 0xa153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa151), 0xcb);
        EXPECT(gbc.readMem(0xa152), 0xf7);
        // CB F7 02DA
        gbc.setState(0x635d, 0x9d0f, 0x2ec0, 0xac0a, 0x3cc0, 0xcdba, 0x1, 0x0);
        gbc.writeMem(0x635d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9d0f);
        EXPECT(gbc.pc(), 0x635f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02DB
        gbc.setState(0xbf7c, 0xfdd1, 0x9de0, 0x1f6c, 0x79c7, 0x48be, 0x1, 0x1);
        gbc.writeMem(0xbf7c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfdd1);
        EXPECT(gbc.pc(), 0xbf7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf7c), 0xcb);
        EXPECT(gbc.readMem(0xbf7d), 0xf7);
        // CB F7 02DC
        gbc.setState(0x33ea, 0xfa35, 0xb1d0, 0x58c9, 0x41c7, 0x8885, 0x0, 0x0);
        gbc.writeMem(0x33ea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfa35);
        EXPECT(gbc.pc(), 0x33ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02DD
        gbc.setState(0x12d, 0x9b3c, 0x8d50, 0x558a, 0x6173, 0xd963, 0x1, 0x0);
        gbc.writeMem(0x12d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9b3c);
        EXPECT(gbc.pc(), 0x12f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02DE
        gbc.setState(0x91cf, 0x603e, 0x2b20, 0x32eb, 0xd434, 0x2022, 0x1, 0x0);
        gbc.writeMem(0x91cf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x603e);
        EXPECT(gbc.pc(), 0x91d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cf), 0xcb);
        EXPECT(gbc.readMem(0x91d0), 0xf7);
        // CB F7 02DF
        gbc.setState(0x54a0, 0x65da, 0xbae0, 0x58a9, 0x999, 0x1b03, 0x1, 0x1);
        gbc.writeMem(0x54a0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x65da);
        EXPECT(gbc.pc(), 0x54a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02E0
        gbc.setState(0x21dd, 0xd72f, 0xb80, 0xdcbc, 0x4121, 0x2080, 0x1, 0x1);
        gbc.writeMem(0x21dd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd72f);
        EXPECT(gbc.pc(), 0x21df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02E1
        gbc.setState(0xefb, 0xf0dd, 0x4d00, 0x3456, 0x43d, 0xecd3, 0x0, 0x0);
        gbc.writeMem(0xefb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf0dd);
        EXPECT(gbc.pc(), 0xefd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02E2
        gbc.setState(0xaf80, 0xb702, 0x12a0, 0x1a61, 0xee67, 0x87eb, 0x0, 0x0);
        gbc.writeMem(0xaf80, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb702);
        EXPECT(gbc.pc(), 0xaf82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf80), 0xcb);
        EXPECT(gbc.readMem(0xaf81), 0xf7);
        // CB F7 02E3
        gbc.setState(0x2af4, 0xfc6e, 0x5cb0, 0xf26b, 0x8edf, 0x102e, 0x0, 0x0);
        gbc.writeMem(0x2af4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfc6e);
        EXPECT(gbc.pc(), 0x2af6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02E4
        gbc.setState(0xc33d, 0x74a0, 0x5430, 0x2367, 0x5896, 0xdb81, 0x0, 0x0);
        gbc.writeMem(0xc33d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x74a0);
        EXPECT(gbc.pc(), 0xc33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33d), 0xcb);
        EXPECT(gbc.readMem(0xc33e), 0xf7);
        // CB F7 02E5
        gbc.setState(0xdb4, 0x49ac, 0x4500, 0xf761, 0xa449, 0xcaac, 0x1, 0x0);
        gbc.writeMem(0xdb4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x49ac);
        EXPECT(gbc.pc(), 0xdb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02E6
        gbc.setState(0x44a5, 0x46c2, 0x44f0, 0x9ae9, 0xd685, 0xa0e1, 0x0, 0x1);
        gbc.writeMem(0x44a5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x46c2);
        EXPECT(gbc.pc(), 0x44a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02E7
        gbc.setState(0xc642, 0xf36a, 0xbea0, 0xe66c, 0x895e, 0x5286, 0x1, 0x1);
        gbc.writeMem(0xc642, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf36a);
        EXPECT(gbc.pc(), 0xc644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc642), 0xcb);
        EXPECT(gbc.readMem(0xc643), 0xf7);
        // CB F7 02E8
        gbc.setState(0xbef2, 0xae03, 0x830, 0xd550, 0xffa9, 0xf024, 0x1, 0x0);
        gbc.writeMem(0xbef2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xae03);
        EXPECT(gbc.pc(), 0xbef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef2), 0xcb);
        EXPECT(gbc.readMem(0xbef3), 0xf7);
        // CB F7 02E9
        gbc.setState(0x2e0f, 0xa73e, 0x910, 0x8f81, 0x2f5e, 0x89f9, 0x1, 0x0);
        gbc.writeMem(0x2e0f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa73e);
        EXPECT(gbc.pc(), 0x2e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02EA
        gbc.setState(0xbb4f, 0x8fe1, 0xdeb0, 0xf1c7, 0xb214, 0x5e7e, 0x1, 0x0);
        gbc.writeMem(0xbb4f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8fe1);
        EXPECT(gbc.pc(), 0xbb51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb4f), 0xcb);
        EXPECT(gbc.readMem(0xbb50), 0xf7);
        // CB F7 02EC
        gbc.setState(0x7a53, 0xcc6b, 0xd040, 0x89cf, 0xc86c, 0xf531, 0x1, 0x1);
        gbc.writeMem(0x7a53, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xcc6b);
        EXPECT(gbc.pc(), 0x7a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02ED
        gbc.setState(0x89e4, 0x5ef8, 0x2bd0, 0x2aa6, 0x3ade, 0x7c4e, 0x0, 0x1);
        gbc.writeMem(0x89e4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5ef8);
        EXPECT(gbc.pc(), 0x89e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e4), 0xcb);
        EXPECT(gbc.readMem(0x89e5), 0xf7);
        // CB F7 02EE
        gbc.setState(0x8782, 0xc509, 0xcb60, 0x5759, 0xc160, 0xd3cb, 0x0, 0x1);
        gbc.writeMem(0x8782, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc509);
        EXPECT(gbc.pc(), 0x8784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8782), 0xcb);
        EXPECT(gbc.readMem(0x8783), 0xf7);
        // CB F7 02F0
        gbc.setState(0x8df1, 0x34c5, 0x15b0, 0xa79c, 0x7ac9, 0x4f99, 0x0, 0x0);
        gbc.writeMem(0x8df1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x34c5);
        EXPECT(gbc.pc(), 0x8df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df1), 0xcb);
        EXPECT(gbc.readMem(0x8df2), 0xf7);
        // CB F7 02F1
        gbc.setState(0x176c, 0x582a, 0xe60, 0xca0a, 0x386, 0xb9c5, 0x1, 0x1);
        gbc.writeMem(0x176c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x582a);
        EXPECT(gbc.pc(), 0x176e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02F2
        gbc.setState(0x5d42, 0xfb80, 0x88e0, 0x21be, 0x8d84, 0x9548, 0x0, 0x1);
        gbc.writeMem(0x5d42, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfb80);
        EXPECT(gbc.pc(), 0x5d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02F3
        gbc.setState(0x54bc, 0xe523, 0x4920, 0x1fb, 0x1159, 0xd756, 0x1, 0x1);
        gbc.writeMem(0x54bc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe523);
        EXPECT(gbc.pc(), 0x54be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02F5
        gbc.setState(0xd079, 0xa9bb, 0x1c50, 0xdfa0, 0x10ed, 0xbe99, 0x1, 0x1);
        gbc.writeMem(0xd079, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa9bb);
        EXPECT(gbc.pc(), 0xd07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd079), 0xcb);
        EXPECT(gbc.readMem(0xd07a), 0xf7);
        // CB F7 02F6
        gbc.setState(0xc60d, 0xf9ab, 0xe930, 0x8574, 0x7966, 0xfe7a, 0x0, 0x0);
        gbc.writeMem(0xc60d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf9ab);
        EXPECT(gbc.pc(), 0xc60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc60d), 0xcb);
        EXPECT(gbc.readMem(0xc60e), 0xf7);
        // CB F7 02F7
        gbc.setState(0xbf42, 0x22c1, 0x1770, 0xe5e9, 0x7ff, 0xed91, 0x1, 0x0);
        gbc.writeMem(0xbf42, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x22c1);
        EXPECT(gbc.pc(), 0xbf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf42), 0xcb);
        EXPECT(gbc.readMem(0xbf43), 0xf7);
        // CB F7 02F8
        gbc.setState(0x79ab, 0x5f9d, 0xbf10, 0xab50, 0xc660, 0xf5a1, 0x0, 0x1);
        gbc.writeMem(0x79ab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5f9d);
        EXPECT(gbc.pc(), 0x79ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02F9
        gbc.setState(0x54ea, 0x9ce1, 0x3400, 0x8119, 0xa89d, 0x6ea5, 0x0, 0x1);
        gbc.writeMem(0x54ea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0x54ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02FA
        gbc.setState(0x38fa, 0x590f, 0xbf10, 0x16f9, 0x7a3a, 0x467d, 0x1, 0x0);
        gbc.writeMem(0x38fa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x590f);
        EXPECT(gbc.pc(), 0x38fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02FB
        gbc.setState(0x86f0, 0x4bef, 0xaa0, 0xc751, 0xaf6, 0x5a9d, 0x0, 0x0);
        gbc.writeMem(0x86f0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4bef);
        EXPECT(gbc.pc(), 0x86f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f0), 0xcb);
        EXPECT(gbc.readMem(0x86f1), 0xf7);
        // CB F7 02FC
        gbc.setState(0x96c4, 0x8318, 0xee0, 0x3ea8, 0xdbac, 0xa381, 0x1, 0x0);
        gbc.writeMem(0x96c4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8318);
        EXPECT(gbc.pc(), 0x96c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c4), 0xcb);
        EXPECT(gbc.readMem(0x96c5), 0xf7);
        // CB F7 02FD
        gbc.setState(0x498b, 0x2b6e, 0xbd70, 0xffd4, 0x92a2, 0x6373, 0x1, 0x1);
        gbc.writeMem(0x498b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2b6e);
        EXPECT(gbc.pc(), 0x498d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 02FE
        gbc.setState(0x43b3, 0x9ba4, 0x1ee0, 0xd85e, 0xad1f, 0xdc17, 0x0, 0x1);
        gbc.writeMem(0x43b3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9ba4);
        EXPECT(gbc.pc(), 0x43b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 02FF
        gbc.setState(0xa017, 0x594b, 0xdde0, 0x550e, 0x5a5f, 0xc81, 0x0, 0x1);
        gbc.writeMem(0xa017, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x594b);
        EXPECT(gbc.pc(), 0xa019);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa017), 0xcb);
        EXPECT(gbc.readMem(0xa018), 0xf7);
        // CB F7 0300
        gbc.setState(0xe918, 0x1fc0, 0x8280, 0x6d5a, 0xe41b, 0x8555, 0x0, 0x1);
        gbc.writeMem(0xe918, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1fc0);
        EXPECT(gbc.pc(), 0xe91a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe918), 0xcb);
        EXPECT(gbc.readMem(0xe919), 0xf7);
        // CB F7 0301
        gbc.setState(0x8bd5, 0x7cd4, 0x760, 0x664f, 0x3b2, 0xd43f, 0x0, 0x0);
        gbc.writeMem(0x8bd5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7cd4);
        EXPECT(gbc.pc(), 0x8bd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd5), 0xcb);
        EXPECT(gbc.readMem(0x8bd6), 0xf7);
        // CB F7 0302
        gbc.setState(0x114e, 0x8558, 0xf7e0, 0x804d, 0xc05d, 0x533b, 0x1, 0x1);
        gbc.writeMem(0x114e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x8558);
        EXPECT(gbc.pc(), 0x1150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0303
        gbc.setState(0x4ba, 0xe985, 0x1b70, 0x6186, 0x6993, 0x4fd4, 0x1, 0x1);
        gbc.writeMem(0x4ba, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe985);
        EXPECT(gbc.pc(), 0x4bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0304
        gbc.setState(0xdcb6, 0xb591, 0x7db0, 0x751a, 0xbfe7, 0x83c5, 0x1, 0x1);
        gbc.writeMem(0xdcb6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb591);
        EXPECT(gbc.pc(), 0xdcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb6), 0xcb);
        EXPECT(gbc.readMem(0xdcb7), 0xf7);
        // CB F7 0305
        gbc.setState(0x5e3b, 0x5b40, 0x52a0, 0x57fc, 0x864e, 0xf192, 0x0, 0x0);
        gbc.writeMem(0x5e3b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0x5e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0306
        gbc.setState(0x4622, 0x6cf3, 0x2660, 0x821a, 0xa5f9, 0x9dee, 0x0, 0x1);
        gbc.writeMem(0x4622, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6cf3);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0307
        gbc.setState(0x88ab, 0x58e4, 0xb200, 0x70d2, 0x412a, 0x9898, 0x1, 0x0);
        gbc.writeMem(0x88ab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x58e4);
        EXPECT(gbc.pc(), 0x88ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ab), 0xcb);
        EXPECT(gbc.readMem(0x88ac), 0xf7);
        // CB F7 0308
        gbc.setState(0x44ac, 0xcd2d, 0x4460, 0x279, 0x5e5d, 0xd782, 0x1, 0x1);
        gbc.writeMem(0x44ac, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcd2d);
        EXPECT(gbc.pc(), 0x44ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0309
        gbc.setState(0x68b0, 0x80, 0x6410, 0x7585, 0x69e1, 0xa58d, 0x1, 0x0);
        gbc.writeMem(0x68b0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x80);
        EXPECT(gbc.pc(), 0x68b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 030A
        gbc.setState(0x3dc7, 0xd97d, 0xedb0, 0xbce4, 0xffce, 0x479a, 0x1, 0x0);
        gbc.writeMem(0x3dc7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd97d);
        EXPECT(gbc.pc(), 0x3dc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 030B
        gbc.setState(0xc676, 0x4d39, 0xa420, 0x84bc, 0x4cee, 0x3c54, 0x1, 0x0);
        gbc.writeMem(0xc676, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0xc678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc676), 0xcb);
        EXPECT(gbc.readMem(0xc677), 0xf7);
        // CB F7 030C
        gbc.setState(0xad0d, 0x2f3b, 0x4560, 0xe291, 0x6d7a, 0x99e2, 0x1, 0x1);
        gbc.writeMem(0xad0d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2f3b);
        EXPECT(gbc.pc(), 0xad0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0d), 0xcb);
        EXPECT(gbc.readMem(0xad0e), 0xf7);
        // CB F7 030D
        gbc.setState(0xdc73, 0x6948, 0x1d00, 0xaa5f, 0xba11, 0xb352, 0x0, 0x0);
        gbc.writeMem(0xdc73, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6948);
        EXPECT(gbc.pc(), 0xdc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc73), 0xcb);
        EXPECT(gbc.readMem(0xdc74), 0xf7);
        // CB F7 030E
        gbc.setState(0x4e59, 0xfeb0, 0x7ff0, 0x3152, 0xf8d0, 0x3406, 0x1, 0x1);
        gbc.writeMem(0x4e59, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfeb0);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 030F
        gbc.setState(0x3fc0, 0xeb06, 0x7ad0, 0xc89f, 0x19eb, 0xcf0d, 0x1, 0x0);
        gbc.writeMem(0x3fc0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xeb06);
        EXPECT(gbc.pc(), 0x3fc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0310
        gbc.setState(0x133f, 0x4274, 0xa1a0, 0x54eb, 0x2ec5, 0x99f3, 0x0, 0x0);
        gbc.writeMem(0x133f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4274);
        EXPECT(gbc.pc(), 0x1341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0311
        gbc.setState(0x1f54, 0xc155, 0xc100, 0x732c, 0x6f0e, 0xb806, 0x1, 0x1);
        gbc.writeMem(0x1f54, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc155);
        EXPECT(gbc.pc(), 0x1f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0312
        gbc.setState(0x96fd, 0x31b3, 0xf990, 0x5846, 0x895d, 0xa525, 0x1, 0x1);
        gbc.writeMem(0x96fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x31b3);
        EXPECT(gbc.pc(), 0x96ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96fd), 0xcb);
        EXPECT(gbc.readMem(0x96fe), 0xf7);
        // CB F7 0313
        gbc.setState(0x7815, 0x1f02, 0x3360, 0xf1a7, 0x2017, 0x15f6, 0x1, 0x0);
        gbc.writeMem(0x7815, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1f02);
        EXPECT(gbc.pc(), 0x7817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0314
        gbc.setState(0x8797, 0xd808, 0xf70, 0x146f, 0xb51e, 0x104f, 0x1, 0x0);
        gbc.writeMem(0x8797, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd808);
        EXPECT(gbc.pc(), 0x8799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8797), 0xcb);
        EXPECT(gbc.readMem(0x8798), 0xf7);
        // CB F7 0315
        gbc.setState(0x4184, 0x8c6b, 0x4650, 0xda90, 0x3b2a, 0x6c11, 0x0, 0x1);
        gbc.writeMem(0x4184, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8c6b);
        EXPECT(gbc.pc(), 0x4186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0316
        gbc.setState(0xa01b, 0xcb8e, 0xc020, 0xa599, 0xc221, 0xf7e5, 0x0, 0x1);
        gbc.writeMem(0xa01b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcb8e);
        EXPECT(gbc.pc(), 0xa01d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01b), 0xcb);
        EXPECT(gbc.readMem(0xa01c), 0xf7);
        // CB F7 0317
        gbc.setState(0x8d76, 0x738c, 0x7db0, 0xf014, 0x2792, 0x4f, 0x0, 0x0);
        gbc.writeMem(0x8d76, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x738c);
        EXPECT(gbc.pc(), 0x8d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d76), 0xcb);
        EXPECT(gbc.readMem(0x8d77), 0xf7);
        // CB F7 0318
        gbc.setState(0x6c61, 0x9a69, 0xb0d0, 0xad93, 0xf3fc, 0xe293, 0x0, 0x1);
        gbc.writeMem(0x6c61, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9a69);
        EXPECT(gbc.pc(), 0x6c63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0319
        gbc.setState(0xdcbc, 0x619a, 0x6a90, 0xe2e8, 0x305f, 0x6f75, 0x0, 0x1);
        gbc.writeMem(0xdcbc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x619a);
        EXPECT(gbc.pc(), 0xdcbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcbc), 0xcb);
        EXPECT(gbc.readMem(0xdcbd), 0xf7);
        // CB F7 031A
        gbc.setState(0x73a9, 0xf230, 0x7d00, 0xc413, 0x677c, 0x4a79, 0x1, 0x1);
        gbc.writeMem(0x73a9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf230);
        EXPECT(gbc.pc(), 0x73ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 031B
        gbc.setState(0x2910, 0x2cbf, 0x7f20, 0x44a, 0x6709, 0x1e2c, 0x0, 0x0);
        gbc.writeMem(0x2910, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2cbf);
        EXPECT(gbc.pc(), 0x2912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 031C
        gbc.setState(0xa462, 0x5ca0, 0x8920, 0x2dac, 0x8f2a, 0xb3b9, 0x1, 0x0);
        gbc.writeMem(0xa462, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5ca0);
        EXPECT(gbc.pc(), 0xa464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa462), 0xcb);
        EXPECT(gbc.readMem(0xa463), 0xf7);
        // CB F7 031D
        gbc.setState(0xe17a, 0xf880, 0x3020, 0x414f, 0xfde1, 0x8fb2, 0x1, 0x1);
        gbc.writeMem(0xe17a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf880);
        EXPECT(gbc.pc(), 0xe17c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe17a), 0xcb);
        EXPECT(gbc.readMem(0xe17b), 0xf7);
        // CB F7 031E
        gbc.setState(0xe5a6, 0xbf5d, 0x4a10, 0xa253, 0x2f5d, 0xb292, 0x1, 0x0);
        gbc.writeMem(0xe5a6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbf5d);
        EXPECT(gbc.pc(), 0xe5a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a6), 0xcb);
        EXPECT(gbc.readMem(0xe5a7), 0xf7);
        // CB F7 031F
        gbc.setState(0x100d, 0xf57b, 0xb150, 0x10ac, 0x9b41, 0xfc18, 0x1, 0x0);
        gbc.writeMem(0x100d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf57b);
        EXPECT(gbc.pc(), 0x100f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0320
        gbc.setState(0x55c9, 0x4ac4, 0x9d50, 0xf089, 0x63c7, 0x363c, 0x0, 0x1);
        gbc.writeMem(0x55c9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4ac4);
        EXPECT(gbc.pc(), 0x55cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0321
        gbc.setState(0x7ea2, 0xaaeb, 0x15b0, 0x1c98, 0x9519, 0x343f, 0x0, 0x1);
        gbc.writeMem(0x7ea2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xaaeb);
        EXPECT(gbc.pc(), 0x7ea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0322
        gbc.setState(0xe4f3, 0x9082, 0x1930, 0xa339, 0xd9bd, 0xcbde, 0x1, 0x1);
        gbc.writeMem(0xe4f3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9082);
        EXPECT(gbc.pc(), 0xe4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4f3), 0xcb);
        EXPECT(gbc.readMem(0xe4f4), 0xf7);
        // CB F7 0323
        gbc.setState(0xe1b2, 0x6f33, 0x42b0, 0xef22, 0xf6f5, 0x417c, 0x1, 0x0);
        gbc.writeMem(0xe1b2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6f33);
        EXPECT(gbc.pc(), 0xe1b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b2), 0xcb);
        EXPECT(gbc.readMem(0xe1b3), 0xf7);
        // CB F7 0327
        gbc.setState(0x4b82, 0xfd23, 0x6390, 0xaaa8, 0xd832, 0xf907, 0x1, 0x1);
        gbc.writeMem(0x4b82, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfd23);
        EXPECT(gbc.pc(), 0x4b84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0328
        gbc.setState(0x8876, 0x7499, 0x80b0, 0xc01c, 0x7072, 0x4b5f, 0x0, 0x0);
        gbc.writeMem(0x8876, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7499);
        EXPECT(gbc.pc(), 0x8878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8876), 0xcb);
        EXPECT(gbc.readMem(0x8877), 0xf7);
        // CB F7 0329
        gbc.setState(0x3511, 0x2b03, 0xd000, 0x2cbe, 0xeb66, 0x4f8c, 0x1, 0x1);
        gbc.writeMem(0x3511, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2b03);
        EXPECT(gbc.pc(), 0x3513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 032B
        gbc.setState(0x8d1f, 0x9cbd, 0x7690, 0xbebe, 0x1620, 0x52c7, 0x1, 0x0);
        gbc.writeMem(0x8d1f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9cbd);
        EXPECT(gbc.pc(), 0x8d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d1f), 0xcb);
        EXPECT(gbc.readMem(0x8d20), 0xf7);
        // CB F7 032C
        gbc.setState(0x9a4f, 0x45de, 0x7bc0, 0x8f5e, 0xdcac, 0x7c32, 0x0, 0x0);
        gbc.writeMem(0x9a4f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x45de);
        EXPECT(gbc.pc(), 0x9a51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4f), 0xcb);
        EXPECT(gbc.readMem(0x9a50), 0xf7);
        // CB F7 032D
        gbc.setState(0x9ef8, 0xb298, 0x7d50, 0xc089, 0xa85a, 0xb585, 0x0, 0x0);
        gbc.writeMem(0x9ef8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb298);
        EXPECT(gbc.pc(), 0x9efa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef8), 0xcb);
        EXPECT(gbc.readMem(0x9ef9), 0xf7);
        // CB F7 032F
        gbc.setState(0x6f8d, 0xd1f9, 0x5770, 0x90f9, 0xf12d, 0x91aa, 0x0, 0x1);
        gbc.writeMem(0x6f8d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd1f9);
        EXPECT(gbc.pc(), 0x6f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0330
        gbc.setState(0x63c, 0x2696, 0xb590, 0x1cbe, 0x7765, 0x4708, 0x0, 0x1);
        gbc.writeMem(0x63c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2696);
        EXPECT(gbc.pc(), 0x63e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0332
        gbc.setState(0x4a74, 0xce53, 0x7940, 0xf43, 0x5c8c, 0x905a, 0x0, 0x0);
        gbc.writeMem(0x4a74, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xce53);
        EXPECT(gbc.pc(), 0x4a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0333
        gbc.setState(0x4682, 0x5c0f, 0x49f0, 0x280d, 0x719e, 0xd4f5, 0x1, 0x1);
        gbc.writeMem(0x4682, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5c0f);
        EXPECT(gbc.pc(), 0x4684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0334
        gbc.setState(0x9d6c, 0x8173, 0x5770, 0x9b64, 0x6301, 0x3657, 0x0, 0x1);
        gbc.writeMem(0x9d6c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8173);
        EXPECT(gbc.pc(), 0x9d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6c), 0xcb);
        EXPECT(gbc.readMem(0x9d6d), 0xf7);
        // CB F7 0335
        gbc.setState(0x6b1b, 0xdaea, 0x3830, 0x5cf8, 0xae3c, 0xf18b, 0x1, 0x0);
        gbc.writeMem(0x6b1b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xdaea);
        EXPECT(gbc.pc(), 0x6b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0336
        gbc.setState(0x397f, 0x18f3, 0xf260, 0xd45, 0x8e69, 0xfaef, 0x0, 0x0);
        gbc.writeMem(0x397f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x18f3);
        EXPECT(gbc.pc(), 0x3981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0337
        gbc.setState(0xe400, 0xfb68, 0x9c50, 0x3e13, 0x8fa4, 0x9bbb, 0x0, 0x0);
        gbc.writeMem(0xe400, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfb68);
        EXPECT(gbc.pc(), 0xe402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe400), 0xcb);
        EXPECT(gbc.readMem(0xe401), 0xf7);
        // CB F7 0338
        gbc.setState(0x43b4, 0x9cee, 0x8840, 0xc930, 0x6421, 0x87af, 0x1, 0x1);
        gbc.writeMem(0x43b4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9cee);
        EXPECT(gbc.pc(), 0x43b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0339
        gbc.setState(0x4407, 0x6988, 0x89d0, 0x1a49, 0x3f63, 0xc030, 0x0, 0x1);
        gbc.writeMem(0x4407, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6988);
        EXPECT(gbc.pc(), 0x4409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 033A
        gbc.setState(0x27, 0x328, 0xb0e0, 0x85f2, 0x1f7a, 0xebc5, 0x0, 0x1);
        gbc.writeMem(0x27, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x328);
        EXPECT(gbc.pc(), 0x29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 033C
        gbc.setState(0x7ac3, 0xaa1f, 0x92f0, 0xa481, 0xf8e0, 0x81f6, 0x0, 0x0);
        gbc.writeMem(0x7ac3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xaa1f);
        EXPECT(gbc.pc(), 0x7ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 033D
        gbc.setState(0x35c5, 0x4b99, 0x4630, 0xb36, 0xcd0, 0xa657, 0x0, 0x1);
        gbc.writeMem(0x35c5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4b99);
        EXPECT(gbc.pc(), 0x35c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 033E
        gbc.setState(0x592d, 0x4b19, 0x4870, 0xf8ac, 0x6d59, 0xd126, 0x0, 0x0);
        gbc.writeMem(0x592d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4b19);
        EXPECT(gbc.pc(), 0x592f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 033F
        gbc.setState(0x2871, 0x8b8, 0xf6d0, 0xc9a8, 0x17f1, 0x17be, 0x0, 0x0);
        gbc.writeMem(0x2871, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8b8);
        EXPECT(gbc.pc(), 0x2873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0340
        gbc.setState(0xa0ae, 0x699c, 0x5f30, 0x9051, 0xa02e, 0x307a, 0x1, 0x1);
        gbc.writeMem(0xa0ae, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x699c);
        EXPECT(gbc.pc(), 0xa0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ae), 0xcb);
        EXPECT(gbc.readMem(0xa0af), 0xf7);
        // CB F7 0341
        gbc.setState(0x2c08, 0x5c18, 0xe90, 0xde75, 0x6142, 0xf7bd, 0x0, 0x0);
        gbc.writeMem(0x2c08, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5c18);
        EXPECT(gbc.pc(), 0x2c0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0342
        gbc.setState(0x7b6d, 0xb8a2, 0x37e0, 0x79e5, 0xe51f, 0xe224, 0x1, 0x1);
        gbc.writeMem(0x7b6d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb8a2);
        EXPECT(gbc.pc(), 0x7b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0343
        gbc.setState(0x9681, 0xf00a, 0xdf50, 0x7229, 0x4dd3, 0xae3, 0x0, 0x1);
        gbc.writeMem(0x9681, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf00a);
        EXPECT(gbc.pc(), 0x9683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9681), 0xcb);
        EXPECT(gbc.readMem(0x9682), 0xf7);
        // CB F7 0344
        gbc.setState(0xd9c9, 0xea47, 0x950, 0xed09, 0xc088, 0x8f46, 0x1, 0x1);
        gbc.writeMem(0xd9c9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xea47);
        EXPECT(gbc.pc(), 0xd9cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c9), 0xcb);
        EXPECT(gbc.readMem(0xd9ca), 0xf7);
        // CB F7 0345
        gbc.setState(0xefcb, 0x786d, 0xa840, 0x6ec8, 0xd6b8, 0x59ca, 0x1, 0x0);
        gbc.writeMem(0xefcb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x786d);
        EXPECT(gbc.pc(), 0xefcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefcb), 0xcb);
        EXPECT(gbc.readMem(0xefcc), 0xf7);
        // CB F7 0347
        gbc.setState(0xea89, 0xef06, 0x8730, 0xdf9, 0x59e, 0x3b3e, 0x0, 0x1);
        gbc.writeMem(0xea89, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xef06);
        EXPECT(gbc.pc(), 0xea8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea89), 0xcb);
        EXPECT(gbc.readMem(0xea8a), 0xf7);
        // CB F7 0348
        gbc.setState(0xb354, 0x3076, 0x3a40, 0xef81, 0x2f04, 0xd8df, 0x0, 0x0);
        gbc.writeMem(0xb354, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3076);
        EXPECT(gbc.pc(), 0xb356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb354), 0xcb);
        EXPECT(gbc.readMem(0xb355), 0xf7);
        // CB F7 0349
        gbc.setState(0xe74d, 0x3f1c, 0xda80, 0x1772, 0x669a, 0xd339, 0x1, 0x1);
        gbc.writeMem(0xe74d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3f1c);
        EXPECT(gbc.pc(), 0xe74f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74d), 0xcb);
        EXPECT(gbc.readMem(0xe74e), 0xf7);
        // CB F7 034A
        gbc.setState(0x86d1, 0x33c1, 0xb3c0, 0x612, 0xeaee, 0x2770, 0x1, 0x1);
        gbc.writeMem(0x86d1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x33c1);
        EXPECT(gbc.pc(), 0x86d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d1), 0xcb);
        EXPECT(gbc.readMem(0x86d2), 0xf7);
        // CB F7 034B
        gbc.setState(0x4efb, 0xf929, 0x9260, 0x1b30, 0xaa90, 0x1890, 0x0, 0x1);
        gbc.writeMem(0x4efb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf929);
        EXPECT(gbc.pc(), 0x4efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 034C
        gbc.setState(0x8e38, 0x9535, 0xfff0, 0x97f5, 0xb553, 0x8ec8, 0x1, 0x1);
        gbc.writeMem(0x8e38, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9535);
        EXPECT(gbc.pc(), 0x8e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e38), 0xcb);
        EXPECT(gbc.readMem(0x8e39), 0xf7);
        // CB F7 034E
        gbc.setState(0x74ee, 0xa124, 0xf7d0, 0x919, 0xf0e4, 0x9023, 0x0, 0x1);
        gbc.writeMem(0x74ee, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa124);
        EXPECT(gbc.pc(), 0x74f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 034F
        gbc.setState(0x1e9e, 0xecef, 0x7e0, 0xf954, 0x7e6a, 0x5c2b, 0x1, 0x1);
        gbc.writeMem(0x1e9e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xecef);
        EXPECT(gbc.pc(), 0x1ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0350
        gbc.setState(0xc4c4, 0x9618, 0xb910, 0xd7ba, 0x1b2f, 0x826f, 0x0, 0x1);
        gbc.writeMem(0xc4c4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9618);
        EXPECT(gbc.pc(), 0xc4c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4c4), 0xcb);
        EXPECT(gbc.readMem(0xc4c5), 0xf7);
        // CB F7 0351
        gbc.setState(0x4a76, 0xb3d2, 0x5030, 0xc3cb, 0xca85, 0xac89, 0x0, 0x1);
        gbc.writeMem(0x4a76, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb3d2);
        EXPECT(gbc.pc(), 0x4a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0352
        gbc.setState(0xd85f, 0x174f, 0xa9c0, 0x2878, 0xf5c0, 0xeb21, 0x0, 0x1);
        gbc.writeMem(0xd85f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x174f);
        EXPECT(gbc.pc(), 0xd861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85f), 0xcb);
        EXPECT(gbc.readMem(0xd860), 0xf7);
        // CB F7 0353
        gbc.setState(0xb9, 0xebb1, 0x1da0, 0xb7f1, 0xbc7e, 0x3e08, 0x1, 0x0);
        gbc.writeMem(0xb9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xebb1);
        EXPECT(gbc.pc(), 0xbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0354
        gbc.setState(0x3923, 0xbf64, 0xb4f0, 0x9d52, 0x6b78, 0x438e, 0x0, 0x0);
        gbc.writeMem(0x3923, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbf64);
        EXPECT(gbc.pc(), 0x3925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0355
        gbc.setState(0xd3cb, 0xdfea, 0x86c0, 0x4c27, 0x11f3, 0x5908, 0x1, 0x0);
        gbc.writeMem(0xd3cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdfea);
        EXPECT(gbc.pc(), 0xd3cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3cb), 0xcb);
        EXPECT(gbc.readMem(0xd3cc), 0xf7);
        // CB F7 0356
        gbc.setState(0xe09f, 0xed3f, 0x9d40, 0x36a0, 0x6a0c, 0x95a2, 0x0, 0x0);
        gbc.writeMem(0xe09f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xed3f);
        EXPECT(gbc.pc(), 0xe0a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe09f), 0xcb);
        EXPECT(gbc.readMem(0xe0a0), 0xf7);
        // CB F7 0357
        gbc.setState(0x80e1, 0xfc33, 0x5f90, 0x98f2, 0x9d58, 0x49a2, 0x1, 0x0);
        gbc.writeMem(0x80e1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfc33);
        EXPECT(gbc.pc(), 0x80e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e1), 0xcb);
        EXPECT(gbc.readMem(0x80e2), 0xf7);
        // CB F7 0358
        gbc.setState(0x3191, 0xacdb, 0x7910, 0x6b10, 0xa0be, 0x36cf, 0x0, 0x1);
        gbc.writeMem(0x3191, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xacdb);
        EXPECT(gbc.pc(), 0x3193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0359
        gbc.setState(0x8c51, 0xae2f, 0x35d0, 0xde28, 0x6fc3, 0xfbf2, 0x0, 0x1);
        gbc.writeMem(0x8c51, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xae2f);
        EXPECT(gbc.pc(), 0x8c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c51), 0xcb);
        EXPECT(gbc.readMem(0x8c52), 0xf7);
        // CB F7 035A
        gbc.setState(0x49d0, 0x3b0c, 0x5c70, 0xd966, 0x4916, 0x9c79, 0x0, 0x1);
        gbc.writeMem(0x49d0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3b0c);
        EXPECT(gbc.pc(), 0x49d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 035B
        gbc.setState(0x2d7e, 0x6581, 0xe100, 0x27c1, 0x8766, 0x8f2f, 0x1, 0x0);
        gbc.writeMem(0x2d7e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6581);
        EXPECT(gbc.pc(), 0x2d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 035C
        gbc.setState(0x32ab, 0x70c, 0xd120, 0x8d22, 0x761d, 0xe5d9, 0x0, 0x0);
        gbc.writeMem(0x32ab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x70c);
        EXPECT(gbc.pc(), 0x32ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 035D
        gbc.setState(0xc673, 0x712d, 0xb50, 0xfcf, 0xcda6, 0x2ef0, 0x1, 0x0);
        gbc.writeMem(0xc673, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x712d);
        EXPECT(gbc.pc(), 0xc675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc673), 0xcb);
        EXPECT(gbc.readMem(0xc674), 0xf7);
        // CB F7 035E
        gbc.setState(0xe304, 0x24b2, 0x7f80, 0xffc7, 0x43c6, 0xb380, 0x0, 0x1);
        gbc.writeMem(0xe304, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x24b2);
        EXPECT(gbc.pc(), 0xe306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe304), 0xcb);
        EXPECT(gbc.readMem(0xe305), 0xf7);
        // CB F7 035F
        gbc.setState(0xcc97, 0x91a9, 0x84c0, 0x900a, 0xf226, 0xd5a, 0x1, 0x1);
        gbc.writeMem(0xcc97, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x91a9);
        EXPECT(gbc.pc(), 0xcc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc97), 0xcb);
        EXPECT(gbc.readMem(0xcc98), 0xf7);
        // CB F7 0360
        gbc.setState(0x47aa, 0xfbbc, 0x73b0, 0xc946, 0x1a46, 0x5597, 0x1, 0x1);
        gbc.writeMem(0x47aa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfbbc);
        EXPECT(gbc.pc(), 0x47ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0361
        gbc.setState(0x24e9, 0x54ee, 0xcc00, 0xf3c0, 0x2669, 0x17f, 0x1, 0x1);
        gbc.writeMem(0x24e9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x54ee);
        EXPECT(gbc.pc(), 0x24eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0362
        gbc.setState(0x6adf, 0x54c2, 0xfe20, 0x3e99, 0xa94e, 0xd4a3, 0x0, 0x1);
        gbc.writeMem(0x6adf, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x54c2);
        EXPECT(gbc.pc(), 0x6ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0363
        gbc.setState(0x45d4, 0x648b, 0x890, 0xd1df, 0x7359, 0xc170, 0x1, 0x0);
        gbc.writeMem(0x45d4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x648b);
        EXPECT(gbc.pc(), 0x45d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0364
        gbc.setState(0x1597, 0x72b1, 0xc6a0, 0x4605, 0x119e, 0xfe42, 0x1, 0x1);
        gbc.writeMem(0x1597, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x72b1);
        EXPECT(gbc.pc(), 0x1599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0365
        gbc.setState(0xd986, 0xe437, 0xb350, 0x885c, 0xe5fc, 0x7d1a, 0x0, 0x0);
        gbc.writeMem(0xd986, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe437);
        EXPECT(gbc.pc(), 0xd988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd986), 0xcb);
        EXPECT(gbc.readMem(0xd987), 0xf7);
        // CB F7 0366
        gbc.setState(0x215, 0x397c, 0xea0, 0xfb5f, 0x86bc, 0x9d6e, 0x0, 0x1);
        gbc.writeMem(0x215, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x397c);
        EXPECT(gbc.pc(), 0x217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0367
        gbc.setState(0x3056, 0xd03e, 0x6410, 0xfc85, 0x1c22, 0xbb3d, 0x1, 0x0);
        gbc.writeMem(0x3056, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd03e);
        EXPECT(gbc.pc(), 0x3058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0368
        gbc.setState(0xbaa0, 0x6d70, 0x2140, 0xf32a, 0x3696, 0x7c9e, 0x1, 0x1);
        gbc.writeMem(0xbaa0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6d70);
        EXPECT(gbc.pc(), 0xbaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa0), 0xcb);
        EXPECT(gbc.readMem(0xbaa1), 0xf7);
        // CB F7 0369
        gbc.setState(0x5c8c, 0x72cf, 0xb100, 0xf4e1, 0xc7e, 0x98c6, 0x0, 0x0);
        gbc.writeMem(0x5c8c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x72cf);
        EXPECT(gbc.pc(), 0x5c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 036B
        gbc.setState(0xb4fd, 0x5d69, 0xf900, 0x5353, 0x3fca, 0xaab5, 0x1, 0x0);
        gbc.writeMem(0xb4fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5d69);
        EXPECT(gbc.pc(), 0xb4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4fd), 0xcb);
        EXPECT(gbc.readMem(0xb4fe), 0xf7);
        // CB F7 036C
        gbc.setState(0xd93f, 0x3179, 0x7ce0, 0x4783, 0xdf86, 0xe70e, 0x0, 0x1);
        gbc.writeMem(0xd93f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3179);
        EXPECT(gbc.pc(), 0xd941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd93f), 0xcb);
        EXPECT(gbc.readMem(0xd940), 0xf7);
        // CB F7 036D
        gbc.setState(0xa094, 0x5e67, 0xfcc0, 0xbc8, 0xc6f, 0x6ed6, 0x0, 0x1);
        gbc.writeMem(0xa094, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5e67);
        EXPECT(gbc.pc(), 0xa096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa094), 0xcb);
        EXPECT(gbc.readMem(0xa095), 0xf7);
        // CB F7 036E
        gbc.setState(0x141c, 0x7f80, 0xcab0, 0x2b90, 0x82b8, 0x61bd, 0x1, 0x0);
        gbc.writeMem(0x141c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7f80);
        EXPECT(gbc.pc(), 0x141e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 036F
        gbc.setState(0xc553, 0x8d3d, 0x8b00, 0xb1ad, 0x1f21, 0x1d14, 0x1, 0x0);
        gbc.writeMem(0xc553, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8d3d);
        EXPECT(gbc.pc(), 0xc555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc553), 0xcb);
        EXPECT(gbc.readMem(0xc554), 0xf7);
        // CB F7 0370
        gbc.setState(0x5ef4, 0xaf10, 0xcc0, 0x138d, 0x3ea8, 0x47d6, 0x0, 0x0);
        gbc.writeMem(0x5ef4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xaf10);
        EXPECT(gbc.pc(), 0x5ef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0371
        gbc.setState(0x71cb, 0xfc55, 0x3210, 0x722d, 0xa2a5, 0x4d7a, 0x1, 0x1);
        gbc.writeMem(0x71cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfc55);
        EXPECT(gbc.pc(), 0x71cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0372
        gbc.setState(0x6cea, 0x7728, 0x2610, 0x7cc6, 0x9384, 0xf047, 0x1, 0x0);
        gbc.writeMem(0x6cea, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7728);
        EXPECT(gbc.pc(), 0x6cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0373
        gbc.setState(0x4820, 0xe8fd, 0x66f0, 0x1f79, 0x647d, 0x6abe, 0x1, 0x1);
        gbc.writeMem(0x4820, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe8fd);
        EXPECT(gbc.pc(), 0x4822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0375
        gbc.setState(0x2fb8, 0xba2c, 0x1010, 0xd0f1, 0x7986, 0x86a3, 0x0, 0x1);
        gbc.writeMem(0x2fb8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xba2c);
        EXPECT(gbc.pc(), 0x2fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0377
        gbc.setState(0x6a61, 0x7853, 0xe9e0, 0xd100, 0x1e39, 0x9650, 0x1, 0x1);
        gbc.writeMem(0x6a61, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7853);
        EXPECT(gbc.pc(), 0x6a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0378
        gbc.setState(0x8809, 0x4da8, 0xd410, 0x7c6c, 0x431a, 0x9184, 0x1, 0x0);
        gbc.writeMem(0x8809, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4da8);
        EXPECT(gbc.pc(), 0x880b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8809), 0xcb);
        EXPECT(gbc.readMem(0x880a), 0xf7);
        // CB F7 0379
        gbc.setState(0x5543, 0x46e5, 0x210, 0x3366, 0x37ac, 0x5b72, 0x0, 0x1);
        gbc.writeMem(0x5543, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x46e5);
        EXPECT(gbc.pc(), 0x5545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 037A
        gbc.setState(0xc9b6, 0xb6da, 0xc640, 0xaebc, 0xed72, 0xfebf, 0x0, 0x1);
        gbc.writeMem(0xc9b6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb6da);
        EXPECT(gbc.pc(), 0xc9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b6), 0xcb);
        EXPECT(gbc.readMem(0xc9b7), 0xf7);
        // CB F7 037B
        gbc.setState(0x729c, 0xcef1, 0x54c0, 0x9399, 0x9f78, 0x1bb9, 0x0, 0x1);
        gbc.writeMem(0x729c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcef1);
        EXPECT(gbc.pc(), 0x729e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 037C
        gbc.setState(0x1167, 0x9b7b, 0xce0, 0x58d2, 0xe717, 0xe564, 0x0, 0x0);
        gbc.writeMem(0x1167, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9b7b);
        EXPECT(gbc.pc(), 0x1169);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 037D
        gbc.setState(0x2dde, 0x7804, 0x6a00, 0xb4dc, 0xd036, 0xee7a, 0x1, 0x0);
        gbc.writeMem(0x2dde, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7804);
        EXPECT(gbc.pc(), 0x2de0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 037E
        gbc.setState(0x815f, 0x5cd2, 0xc830, 0xc0c2, 0xcf5c, 0xfda2, 0x0, 0x1);
        gbc.writeMem(0x815f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5cd2);
        EXPECT(gbc.pc(), 0x8161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x815f), 0xcb);
        EXPECT(gbc.readMem(0x8160), 0xf7);
        // CB F7 037F
        gbc.setState(0x9cda, 0x17fe, 0x400, 0x7881, 0x8eb3, 0x96ed, 0x1, 0x0);
        gbc.writeMem(0x9cda, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x17fe);
        EXPECT(gbc.pc(), 0x9cdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cda), 0xcb);
        EXPECT(gbc.readMem(0x9cdb), 0xf7);
        // CB F7 0380
        gbc.setState(0xa2f5, 0x3edd, 0xb600, 0x4302, 0xb239, 0xcf1a, 0x0, 0x0);
        gbc.writeMem(0xa2f5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3edd);
        EXPECT(gbc.pc(), 0xa2f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f5), 0xcb);
        EXPECT(gbc.readMem(0xa2f6), 0xf7);
        // CB F7 0381
        gbc.setState(0xa2d4, 0x3f4e, 0x1a10, 0x38ba, 0xa913, 0x46ae, 0x1, 0x1);
        gbc.writeMem(0xa2d4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3f4e);
        EXPECT(gbc.pc(), 0xa2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2d4), 0xcb);
        EXPECT(gbc.readMem(0xa2d5), 0xf7);
        // CB F7 0382
        gbc.setState(0x6317, 0x9506, 0x1e70, 0x11ee, 0xb007, 0xa032, 0x1, 0x0);
        gbc.writeMem(0x6317, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9506);
        EXPECT(gbc.pc(), 0x6319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0383
        gbc.setState(0x9f66, 0xfdd, 0x7dd0, 0x4ff2, 0x9a7, 0x8e44, 0x1, 0x0);
        gbc.writeMem(0x9f66, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfdd);
        EXPECT(gbc.pc(), 0x9f68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f66), 0xcb);
        EXPECT(gbc.readMem(0x9f67), 0xf7);
        // CB F7 0384
        gbc.setState(0xe449, 0xec13, 0x7550, 0x7b30, 0xe28a, 0xe5f, 0x1, 0x0);
        gbc.writeMem(0xe449, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xec13);
        EXPECT(gbc.pc(), 0xe44b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe449), 0xcb);
        EXPECT(gbc.readMem(0xe44a), 0xf7);
        // CB F7 0385
        gbc.setState(0x89e3, 0xe99f, 0xe140, 0x9238, 0x4c92, 0x1981, 0x1, 0x0);
        gbc.writeMem(0x89e3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe99f);
        EXPECT(gbc.pc(), 0x89e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e3), 0xcb);
        EXPECT(gbc.readMem(0x89e4), 0xf7);
        // CB F7 0386
        gbc.setState(0x62fd, 0x31e5, 0xb870, 0xbc40, 0xa23f, 0xc94f, 0x0, 0x0);
        gbc.writeMem(0x62fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x31e5);
        EXPECT(gbc.pc(), 0x62ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0387
        gbc.setState(0xb5ec, 0x3435, 0xcc10, 0x528e, 0x4dfc, 0x8b13, 0x1, 0x0);
        gbc.writeMem(0xb5ec, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3435);
        EXPECT(gbc.pc(), 0xb5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ec), 0xcb);
        EXPECT(gbc.readMem(0xb5ed), 0xf7);
        // CB F7 0388
        gbc.setState(0x39cc, 0xa3c2, 0xd070, 0xa1d7, 0x9fce, 0x6325, 0x1, 0x0);
        gbc.writeMem(0x39cc, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa3c2);
        EXPECT(gbc.pc(), 0x39ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0389
        gbc.setState(0xb0f9, 0x2488, 0x5f20, 0x158, 0x4b13, 0x6530, 0x0, 0x0);
        gbc.writeMem(0xb0f9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0xb0fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f9), 0xcb);
        EXPECT(gbc.readMem(0xb0fa), 0xf7);
        // CB F7 038A
        gbc.setState(0xe566, 0x8467, 0x1fc0, 0x6e63, 0x5a9d, 0x4d31, 0x0, 0x0);
        gbc.writeMem(0xe566, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8467);
        EXPECT(gbc.pc(), 0xe568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe566), 0xcb);
        EXPECT(gbc.readMem(0xe567), 0xf7);
        // CB F7 038B
        gbc.setState(0xa4f3, 0x22a6, 0x4c50, 0x4fa4, 0x3275, 0x4a47, 0x0, 0x0);
        gbc.writeMem(0xa4f3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x22a6);
        EXPECT(gbc.pc(), 0xa4f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f3), 0xcb);
        EXPECT(gbc.readMem(0xa4f4), 0xf7);
        // CB F7 038C
        gbc.setState(0xe29b, 0xe67e, 0x94d0, 0xd8c9, 0xa056, 0x51d3, 0x0, 0x1);
        gbc.writeMem(0xe29b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe67e);
        EXPECT(gbc.pc(), 0xe29d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe29b), 0xcb);
        EXPECT(gbc.readMem(0xe29c), 0xf7);
        // CB F7 038D
        gbc.setState(0x526d, 0x9c38, 0x15b0, 0x21bd, 0x4e39, 0xb2c3, 0x0, 0x1);
        gbc.writeMem(0x526d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9c38);
        EXPECT(gbc.pc(), 0x526f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 038E
        gbc.setState(0xbb4e, 0xac8c, 0x7f70, 0xb737, 0x284e, 0xa824, 0x1, 0x1);
        gbc.writeMem(0xbb4e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xac8c);
        EXPECT(gbc.pc(), 0xbb50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb4e), 0xcb);
        EXPECT(gbc.readMem(0xbb4f), 0xf7);
        // CB F7 0390
        gbc.setState(0xc5de, 0x97c, 0xa5c0, 0x88c, 0xdef6, 0x9e20, 0x1, 0x1);
        gbc.writeMem(0xc5de, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x97c);
        EXPECT(gbc.pc(), 0xc5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5de), 0xcb);
        EXPECT(gbc.readMem(0xc5df), 0xf7);
        // CB F7 0391
        gbc.setState(0xb91b, 0xe08, 0xdff0, 0xa6aa, 0xc55f, 0x14a5, 0x0, 0x0);
        gbc.writeMem(0xb91b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe08);
        EXPECT(gbc.pc(), 0xb91d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91b), 0xcb);
        EXPECT(gbc.readMem(0xb91c), 0xf7);
        // CB F7 0392
        gbc.setState(0x961f, 0x589c, 0xba60, 0x5ea3, 0x2192, 0x96c6, 0x0, 0x0);
        gbc.writeMem(0x961f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x589c);
        EXPECT(gbc.pc(), 0x9621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961f), 0xcb);
        EXPECT(gbc.readMem(0x9620), 0xf7);
        // CB F7 0393
        gbc.setState(0x3525, 0xbfed, 0x98b0, 0x2449, 0x5311, 0x893, 0x1, 0x0);
        gbc.writeMem(0x3525, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbfed);
        EXPECT(gbc.pc(), 0x3527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0394
        gbc.setState(0xe996, 0xc503, 0x74e0, 0xb018, 0x7ec2, 0xc3a6, 0x1, 0x0);
        gbc.writeMem(0xe996, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc503);
        EXPECT(gbc.pc(), 0xe998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe996), 0xcb);
        EXPECT(gbc.readMem(0xe997), 0xf7);
        // CB F7 0395
        gbc.setState(0x92b8, 0xbba6, 0x910, 0x654c, 0x2180, 0xdefa, 0x1, 0x1);
        gbc.writeMem(0x92b8, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbba6);
        EXPECT(gbc.pc(), 0x92ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b8), 0xcb);
        EXPECT(gbc.readMem(0x92b9), 0xf7);
        // CB F7 0396
        gbc.setState(0x60e9, 0x2afb, 0xb9a0, 0x418d, 0xe01f, 0x8a43, 0x1, 0x0);
        gbc.writeMem(0x60e9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2afb);
        EXPECT(gbc.pc(), 0x60eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0397
        gbc.setState(0x4bb9, 0xdfd, 0x5230, 0x8816, 0x6657, 0xd8a8, 0x1, 0x0);
        gbc.writeMem(0x4bb9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdfd);
        EXPECT(gbc.pc(), 0x4bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 0398
        gbc.setState(0x3f6e, 0xd497, 0x7c40, 0x6c44, 0xc4e0, 0xffba, 0x0, 0x0);
        gbc.writeMem(0x3f6e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd497);
        EXPECT(gbc.pc(), 0x3f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 0399
        gbc.setState(0xc067, 0xe6bc, 0x4610, 0xa8b2, 0xa054, 0xf024, 0x1, 0x1);
        gbc.writeMem(0xc067, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe6bc);
        EXPECT(gbc.pc(), 0xc069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc067), 0xcb);
        EXPECT(gbc.readMem(0xc068), 0xf7);
        // CB F7 039A
        gbc.setState(0xa13a, 0xfdb8, 0xc080, 0x680b, 0xe1b2, 0x3547, 0x1, 0x1);
        gbc.writeMem(0xa13a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xfdb8);
        EXPECT(gbc.pc(), 0xa13c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13a), 0xcb);
        EXPECT(gbc.readMem(0xa13b), 0xf7);
        // CB F7 039B
        gbc.setState(0xba6a, 0x2a4d, 0x3b80, 0xc106, 0x11e3, 0xac96, 0x0, 0x0);
        gbc.writeMem(0xba6a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2a4d);
        EXPECT(gbc.pc(), 0xba6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6a), 0xcb);
        EXPECT(gbc.readMem(0xba6b), 0xf7);
        // CB F7 039C
        gbc.setState(0xbd57, 0xf47f, 0xdaa0, 0xce70, 0xb22b, 0x1ec9, 0x1, 0x0);
        gbc.writeMem(0xbd57, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf47f);
        EXPECT(gbc.pc(), 0xbd59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd57), 0xcb);
        EXPECT(gbc.readMem(0xbd58), 0xf7);
        // CB F7 039D
        gbc.setState(0x7487, 0x4e57, 0x9c80, 0x3378, 0xbef5, 0xe7dc, 0x0, 0x0);
        gbc.writeMem(0x7487, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4e57);
        EXPECT(gbc.pc(), 0x7489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 039E
        gbc.setState(0xe3b2, 0xea89, 0xdc60, 0x3f8, 0xece2, 0x97d1, 0x1, 0x1);
        gbc.writeMem(0xe3b2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xea89);
        EXPECT(gbc.pc(), 0xe3b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b2), 0xcb);
        EXPECT(gbc.readMem(0xe3b3), 0xf7);
        // CB F7 039F
        gbc.setState(0x9a86, 0xa978, 0x2630, 0x8f8f, 0xbbd1, 0x38c3, 0x1, 0x0);
        gbc.writeMem(0x9a86, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa978);
        EXPECT(gbc.pc(), 0x9a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a86), 0xcb);
        EXPECT(gbc.readMem(0x9a87), 0xf7);
        // CB F7 03A0
        gbc.setState(0x3c79, 0xbc3b, 0x5290, 0xf3bc, 0xd253, 0xc50a, 0x1, 0x1);
        gbc.writeMem(0x3c79, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xbc3b);
        EXPECT(gbc.pc(), 0x3c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03A1
        gbc.setState(0x1e29, 0x95b3, 0x7140, 0x4240, 0x2fda, 0x7304, 0x1, 0x1);
        gbc.writeMem(0x1e29, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x95b3);
        EXPECT(gbc.pc(), 0x1e2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03A2
        gbc.setState(0x4583, 0xb37b, 0x5ab0, 0x4c25, 0xcc94, 0x38aa, 0x0, 0x1);
        gbc.writeMem(0x4583, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb37b);
        EXPECT(gbc.pc(), 0x4585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03A3
        gbc.setState(0xab78, 0x35fa, 0x5f50, 0x3dd, 0xa64a, 0xda70, 0x0, 0x1);
        gbc.writeMem(0xab78, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x35fa);
        EXPECT(gbc.pc(), 0xab7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab78), 0xcb);
        EXPECT(gbc.readMem(0xab79), 0xf7);
        // CB F7 03A4
        gbc.setState(0x6044, 0x7bca, 0xd230, 0x743c, 0x3bb5, 0xed6a, 0x0, 0x1);
        gbc.writeMem(0x6044, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7bca);
        EXPECT(gbc.pc(), 0x6046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03A7
        gbc.setState(0xddfb, 0xe02f, 0x5ef0, 0x7cc2, 0x1b5b, 0xc586, 0x0, 0x0);
        gbc.writeMem(0xddfb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe02f);
        EXPECT(gbc.pc(), 0xddfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddfb), 0xcb);
        EXPECT(gbc.readMem(0xddfc), 0xf7);
        // CB F7 03A8
        gbc.setState(0x2a4a, 0xf43, 0xe5c0, 0x3f32, 0xb686, 0x6643, 0x1, 0x0);
        gbc.writeMem(0x2a4a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf43);
        EXPECT(gbc.pc(), 0x2a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03A9
        gbc.setState(0xe17f, 0xecd2, 0xa500, 0x1a7d, 0x1fc5, 0x69a6, 0x1, 0x0);
        gbc.writeMem(0xe17f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xecd2);
        EXPECT(gbc.pc(), 0xe181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe17f), 0xcb);
        EXPECT(gbc.readMem(0xe180), 0xf7);
        // CB F7 03AA
        gbc.setState(0x33d7, 0x6e53, 0xbb90, 0x78a7, 0x8b33, 0xc6bd, 0x1, 0x0);
        gbc.writeMem(0x33d7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6e53);
        EXPECT(gbc.pc(), 0x33d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03AB
        gbc.setState(0xd49f, 0xc869, 0xf2f0, 0x861b, 0x701a, 0x2176, 0x1, 0x0);
        gbc.writeMem(0xd49f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc869);
        EXPECT(gbc.pc(), 0xd4a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd49f), 0xcb);
        EXPECT(gbc.readMem(0xd4a0), 0xf7);
        // CB F7 03AC
        gbc.setState(0x63a0, 0xc769, 0x66a0, 0x6855, 0x1f1, 0xdb61, 0x0, 0x0);
        gbc.writeMem(0x63a0, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc769);
        EXPECT(gbc.pc(), 0x63a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03AD
        gbc.setState(0x1764, 0xf958, 0x5aa0, 0x6db1, 0x4e9c, 0x681f, 0x1, 0x0);
        gbc.writeMem(0x1764, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf958);
        EXPECT(gbc.pc(), 0x1766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03AE
        gbc.setState(0xe5e3, 0x36a6, 0x5540, 0xd2a0, 0xf10b, 0x733c, 0x0, 0x1);
        gbc.writeMem(0xe5e3, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x36a6);
        EXPECT(gbc.pc(), 0xe5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5e3), 0xcb);
        EXPECT(gbc.readMem(0xe5e4), 0xf7);
        // CB F7 03AF
        gbc.setState(0xb1f9, 0x1e43, 0xa390, 0xc644, 0x9d90, 0xebcb, 0x1, 0x1);
        gbc.writeMem(0xb1f9, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1e43);
        EXPECT(gbc.pc(), 0xb1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f9), 0xcb);
        EXPECT(gbc.readMem(0xb1fa), 0xf7);
        // CB F7 03B0
        gbc.setState(0x45dd, 0x4959, 0x7580, 0xe8e1, 0xb1e2, 0x5495, 0x1, 0x0);
        gbc.writeMem(0x45dd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4959);
        EXPECT(gbc.pc(), 0x45df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03B1
        gbc.setState(0x6969, 0x54db, 0x1cb0, 0xc91f, 0xe9d6, 0x9abe, 0x0, 0x1);
        gbc.writeMem(0x6969, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x54db);
        EXPECT(gbc.pc(), 0x696b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03B2
        gbc.setState(0xc265, 0xbbb0, 0xf150, 0x9c53, 0x20ea, 0x3cf2, 0x0, 0x1);
        gbc.writeMem(0xc265, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbbb0);
        EXPECT(gbc.pc(), 0xc267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc265), 0xcb);
        EXPECT(gbc.readMem(0xc266), 0xf7);
        // CB F7 03B3
        gbc.setState(0x95b2, 0xfa78, 0xebd0, 0xa688, 0x4b47, 0x844e, 0x0, 0x1);
        gbc.writeMem(0x95b2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfa78);
        EXPECT(gbc.pc(), 0x95b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95b2), 0xcb);
        EXPECT(gbc.readMem(0x95b3), 0xf7);
        // CB F7 03B4
        gbc.setState(0x277c, 0x61df, 0x4870, 0x486, 0x9500, 0x7841, 0x0, 0x0);
        gbc.writeMem(0x277c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x61df);
        EXPECT(gbc.pc(), 0x277e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03B5
        gbc.setState(0x5da6, 0x6af8, 0xc780, 0xcad, 0xa08c, 0x6fe1, 0x0, 0x0);
        gbc.writeMem(0x5da6, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6af8);
        EXPECT(gbc.pc(), 0x5da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03B6
        gbc.setState(0xe103, 0xc72c, 0xf190, 0xee17, 0xc337, 0x9065, 0x1, 0x0);
        gbc.writeMem(0xe103, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc72c);
        EXPECT(gbc.pc(), 0xe105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe103), 0xcb);
        EXPECT(gbc.readMem(0xe104), 0xf7);
        // CB F7 03B7
        gbc.setState(0x7f7d, 0x2df7, 0x5a30, 0xe006, 0x16e, 0xd91b, 0x0, 0x0);
        gbc.writeMem(0x7f7d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2df7);
        EXPECT(gbc.pc(), 0x7f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03B8
        gbc.setState(0xac4, 0x2059, 0xf5f0, 0x258f, 0x1469, 0x77db, 0x1, 0x0);
        gbc.writeMem(0xac4, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2059);
        EXPECT(gbc.pc(), 0xac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03B9
        gbc.setState(0xc57b, 0xd290, 0xba10, 0x527e, 0x203e, 0xdcd3, 0x0, 0x0);
        gbc.writeMem(0xc57b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd290);
        EXPECT(gbc.pc(), 0xc57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc57b), 0xcb);
        EXPECT(gbc.readMem(0xc57c), 0xf7);
        // CB F7 03BA
        gbc.setState(0x852c, 0x1648, 0x1e70, 0x693c, 0x93c4, 0x8dab, 0x0, 0x1);
        gbc.writeMem(0x852c, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1648);
        EXPECT(gbc.pc(), 0x852e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852c), 0xcb);
        EXPECT(gbc.readMem(0x852d), 0xf7);
        // CB F7 03BB
        gbc.setState(0x8330, 0xc7a8, 0x8200, 0x5c22, 0x99d3, 0x4e5f, 0x1, 0x1);
        gbc.writeMem(0x8330, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc7a8);
        EXPECT(gbc.pc(), 0x8332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8330), 0xcb);
        EXPECT(gbc.readMem(0x8331), 0xf7);
        // CB F7 03BC
        gbc.setState(0x3243, 0x3ae7, 0xe4d0, 0x92e6, 0xb37a, 0x15e4, 0x0, 0x1);
        gbc.writeMem(0x3243, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3ae7);
        EXPECT(gbc.pc(), 0x3245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03BE
        gbc.setState(0x349, 0xe69f, 0x6220, 0xb724, 0xc9bd, 0xc64c, 0x0, 0x1);
        gbc.writeMem(0x349, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe69f);
        EXPECT(gbc.pc(), 0x34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03BF
        gbc.setState(0xa1a7, 0x386f, 0x2640, 0xe248, 0x45d2, 0xd611, 0x1, 0x0);
        gbc.writeMem(0xa1a7, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x386f);
        EXPECT(gbc.pc(), 0xa1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a7), 0xcb);
        EXPECT(gbc.readMem(0xa1a8), 0xf7);
        // CB F7 03C0
        gbc.setState(0xbfa, 0xb0ca, 0x69b0, 0xe47a, 0x4d00, 0x3314, 0x0, 0x1);
        gbc.writeMem(0xbfa, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb0ca);
        EXPECT(gbc.pc(), 0xbfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03C1
        gbc.setState(0x6278, 0x61ad, 0x4b10, 0x6b80, 0x842e, 0x4bfa, 0x1, 0x0);
        gbc.writeMem(0x6278, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x61ad);
        EXPECT(gbc.pc(), 0x627a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03C2
        gbc.setState(0x208, 0x20b5, 0xcb0, 0x6268, 0xf81a, 0xe44b, 0x0, 0x1);
        gbc.writeMem(0x208, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x20b5);
        EXPECT(gbc.pc(), 0x20a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03C3
        gbc.setState(0x7174, 0xa871, 0x19b0, 0xc4cf, 0x2014, 0xba02, 0x0, 0x0);
        gbc.writeMem(0x7174, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa871);
        EXPECT(gbc.pc(), 0x7176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03C5
        gbc.setState(0x7cd5, 0x9e00, 0xa7e0, 0x9db7, 0xbd62, 0x1969, 0x1, 0x0);
        gbc.writeMem(0x7cd5, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9e00);
        EXPECT(gbc.pc(), 0x7cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03C6
        gbc.setState(0x8b9d, 0xbe6e, 0xa10, 0x4133, 0x31b8, 0x4e07, 0x1, 0x1);
        gbc.writeMem(0x8b9d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbe6e);
        EXPECT(gbc.pc(), 0x8b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b9d), 0xcb);
        EXPECT(gbc.readMem(0x8b9e), 0xf7);
        // CB F7 03C7
        gbc.setState(0xac39, 0x8c9e, 0x9b30, 0xeaf7, 0xd224, 0x9d3d, 0x0, 0x1);
        gbc.writeMem(0xac39, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8c9e);
        EXPECT(gbc.pc(), 0xac3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac39), 0xcb);
        EXPECT(gbc.readMem(0xac3a), 0xf7);
        // CB F7 03C8
        gbc.setState(0x6a35, 0x638, 0x1650, 0x29eb, 0x885a, 0x3b2f, 0x0, 0x1);
        gbc.writeMem(0x6a35, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x638);
        EXPECT(gbc.pc(), 0x6a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03C9
        gbc.setState(0x16cb, 0xff7, 0x2420, 0x4394, 0x1a4c, 0x22ae, 0x0, 0x0);
        gbc.writeMem(0x16cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xff7);
        EXPECT(gbc.pc(), 0x16cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03CA
        gbc.setState(0xea58, 0x1f4f, 0x1a30, 0xbc8b, 0x3d87, 0x1d74, 0x0, 0x1);
        gbc.writeMem(0xea58, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1f4f);
        EXPECT(gbc.pc(), 0xea5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea58), 0xcb);
        EXPECT(gbc.readMem(0xea59), 0xf7);
        // CB F7 03CB
        gbc.setState(0xc133, 0xe660, 0xa6d0, 0x1c80, 0x4ab5, 0x97c8, 0x0, 0x1);
        gbc.writeMem(0xc133, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe660);
        EXPECT(gbc.pc(), 0xc135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc133), 0xcb);
        EXPECT(gbc.readMem(0xc134), 0xf7);
        // CB F7 03CC
        gbc.setState(0xbc6e, 0x638d, 0x9cf0, 0x89e, 0x861c, 0xb189, 0x0, 0x1);
        gbc.writeMem(0xbc6e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x638d);
        EXPECT(gbc.pc(), 0xbc70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc6e), 0xcb);
        EXPECT(gbc.readMem(0xbc6f), 0xf7);
        // CB F7 03CD
        gbc.setState(0xd476, 0xafa9, 0x2590, 0x26a4, 0x36ee, 0x5ad5, 0x0, 0x1);
        gbc.writeMem(0xd476, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xafa9);
        EXPECT(gbc.pc(), 0xd478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd476), 0xcb);
        EXPECT(gbc.readMem(0xd477), 0xf7);
        // CB F7 03CE
        gbc.setState(0x5c35, 0x57dc, 0xbf40, 0x19ac, 0xebbd, 0x367c, 0x0, 0x0);
        gbc.writeMem(0x5c35, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x57dc);
        EXPECT(gbc.pc(), 0x5c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03CF
        gbc.setState(0xdf15, 0x2466, 0x8ac0, 0x28f1, 0xf0a6, 0x98ed, 0x1, 0x0);
        gbc.writeMem(0xdf15, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2466);
        EXPECT(gbc.pc(), 0xdf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf15), 0xcb);
        EXPECT(gbc.readMem(0xdf16), 0xf7);
        // CB F7 03D0
        gbc.setState(0xe352, 0x6540, 0x20e0, 0xaf45, 0x4c96, 0xb4d, 0x0, 0x0);
        gbc.writeMem(0xe352, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6540);
        EXPECT(gbc.pc(), 0xe354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe352), 0xcb);
        EXPECT(gbc.readMem(0xe353), 0xf7);
        // CB F7 03D1
        gbc.setState(0x48ab, 0x6d7f, 0x2d50, 0xfec3, 0x1581, 0xa6ac, 0x0, 0x0);
        gbc.writeMem(0x48ab, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6d7f);
        EXPECT(gbc.pc(), 0x48ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03D2
        gbc.setState(0xbd9b, 0xc8e6, 0x840, 0xd5a8, 0x9397, 0xbef7, 0x1, 0x1);
        gbc.writeMem(0xbd9b, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc8e6);
        EXPECT(gbc.pc(), 0xbd9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9b), 0xcb);
        EXPECT(gbc.readMem(0xbd9c), 0xf7);
        // CB F7 03D3
        gbc.setState(0x4e28, 0xabea, 0xc1f0, 0x415a, 0x7294, 0xffcd, 0x1, 0x0);
        gbc.writeMem(0x4e28, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xabea);
        EXPECT(gbc.pc(), 0x4e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03D4
        gbc.setState(0x3b6e, 0xcbda, 0x4770, 0xd88f, 0xb986, 0x50b9, 0x1, 0x1);
        gbc.writeMem(0x3b6e, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcbda);
        EXPECT(gbc.pc(), 0x3b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03D5
        gbc.setState(0x58e2, 0x820b, 0x2260, 0x9a1, 0x5e81, 0xb8e7, 0x0, 0x0);
        gbc.writeMem(0x58e2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x820b);
        EXPECT(gbc.pc(), 0x58e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03D6
        gbc.setState(0xb8d1, 0xb849, 0x7cd0, 0xf776, 0x4129, 0xe77d, 0x0, 0x1);
        gbc.writeMem(0xb8d1, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb849);
        EXPECT(gbc.pc(), 0xb8d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8d1), 0xcb);
        EXPECT(gbc.readMem(0xb8d2), 0xf7);
        // CB F7 03D7
        gbc.setState(0xed52, 0xbd04, 0x4b00, 0x51e4, 0x264d, 0x587c, 0x0, 0x0);
        gbc.writeMem(0xed52, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbd04);
        EXPECT(gbc.pc(), 0xed54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed52), 0xcb);
        EXPECT(gbc.readMem(0xed53), 0xf7);
        // CB F7 03D8
        gbc.setState(0xd2bd, 0x533d, 0x52b0, 0xa863, 0x66b6, 0xfafc, 0x1, 0x1);
        gbc.writeMem(0xd2bd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x533d);
        EXPECT(gbc.pc(), 0xd2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2bd), 0xcb);
        EXPECT(gbc.readMem(0xd2be), 0xf7);
        // CB F7 03D9
        gbc.setState(0x46a, 0x2d80, 0x74f0, 0xac73, 0x182d, 0xcc20, 0x1, 0x1);
        gbc.writeMem(0x46a, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2d80);
        EXPECT(gbc.pc(), 0x46c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03DA
        gbc.setState(0xef1f, 0x5e2e, 0x8f0, 0xd6b2, 0xdcb3, 0xd478, 0x0, 0x1);
        gbc.writeMem(0xef1f, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5e2e);
        EXPECT(gbc.pc(), 0xef21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef1f), 0xcb);
        EXPECT(gbc.readMem(0xef20), 0xf7);
        // CB F7 03DB
        gbc.setState(0xc242, 0x1ae7, 0x5aa0, 0x7648, 0x7da3, 0x3f7e, 0x0, 0x1);
        gbc.writeMem(0xc242, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1ae7);
        EXPECT(gbc.pc(), 0xc244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc242), 0xcb);
        EXPECT(gbc.readMem(0xc243), 0xf7);
        // CB F7 03DC
        gbc.setState(0xdbb, 0x42f3, 0x34a0, 0xcc9, 0x74e9, 0x9734, 0x1, 0x0);
        gbc.writeMem(0xdbb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x42f3);
        EXPECT(gbc.pc(), 0xdbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03DE
        gbc.setState(0x9cb, 0x89e3, 0x3eb0, 0x513a, 0xdfa1, 0xe851, 0x0, 0x0);
        gbc.writeMem(0x9cb, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x89e3);
        EXPECT(gbc.pc(), 0x9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03DF
        gbc.setState(0x14d, 0xba46, 0x9ff0, 0x2703, 0x4957, 0xb8ed, 0x0, 0x0);
        gbc.writeMem(0x14d, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xba46);
        EXPECT(gbc.pc(), 0x14f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03E0
        gbc.setState(0xc812, 0x8f32, 0x3f10, 0x4928, 0x764d, 0x173a, 0x1, 0x0);
        gbc.writeMem(0xc812, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8f32);
        EXPECT(gbc.pc(), 0xc814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc812), 0xcb);
        EXPECT(gbc.readMem(0xc813), 0xf7);
        // CB F7 03E1
        gbc.setState(0xef09, 0xf810, 0x8480, 0x7fc2, 0x483c, 0xe946, 0x0, 0x0);
        gbc.writeMem(0xef09, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf810);
        EXPECT(gbc.pc(), 0xef0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef09), 0xcb);
        EXPECT(gbc.readMem(0xef0a), 0xf7);
        // CB F7 03E2
        gbc.setState(0x2961, 0x5a0c, 0xb50, 0x3469, 0xaec2, 0x2cbf, 0x0, 0x1);
        gbc.writeMem(0x2961, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5a0c);
        EXPECT(gbc.pc(), 0x2963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03E3
        gbc.setState(0x6377, 0x12c5, 0x42f0, 0x8dcd, 0x6032, 0x2b70, 0x0, 0x0);
        gbc.writeMem(0x6377, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x12c5);
        EXPECT(gbc.pc(), 0x6379);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F7 03E4
        gbc.setState(0x99d2, 0xd704, 0x4ff0, 0x5a64, 0xf5c7, 0xc8d2, 0x0, 0x0);
        gbc.writeMem(0x99d2, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd704);
        EXPECT(gbc.pc(), 0x99d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d2), 0xcb);
        EXPECT(gbc.readMem(0x99d3), 0xf7);
        // CB F7 03E5
        gbc.setState(0x23ae, 0xead1, 0xd3a0, 0xad43, 0xb88a, 0xf58d, 0x1, 0x1);
        gbc.writeMem(0x23ae, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xead1);
        EXPECT(gbc.pc(), 0x23b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F7 03E6
        gbc.setState(0xa2fd, 0x49cf, 0xa960, 0x5130, 0xf3cf, 0xf7c2, 0x0, 0x1);
        gbc.writeMem(0xa2fd, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x49cf);
        EXPECT(gbc.pc(), 0xa2ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2fd), 0xcb);
        EXPECT(gbc.readMem(0xa2fe), 0xf7);
        // CB F7 03E7
        gbc.setState(0x3251, 0x92a7, 0x3940, 0x2ec1, 0x83a9, 0xa595, 0x0, 0x0);
        gbc.writeMem(0x3251, { 0xcb, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x92a7);
        EXPECT(gbc.pc(), 0x3253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
