    TEST(gbcemu, opcode_cb_a6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB A6 0001
        gbc.setState(0xc58, 0x79f8, 0x5490, 0xebf3, 0xb688, 0x9d96, 0x1, 0x0);
        gbc.writeMem(0xc58, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d96, { 0xa3 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x79f8, gbc.sp());
        EXPECT(0xc5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa3, gbc.readMem(0x9d96));
        // CB A6 0002
        gbc.setState(0x3f95, 0xb0d0, 0xe520, 0x73f8, 0xdcdc, 0xd337, 0x1, 0x0);
        gbc.writeMem(0x3f95, { 0xcb, 0xa6 });
        gbc.writeMem(0xd337, { 0x44 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xb0d0, gbc.sp());
        EXPECT(0x3f97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xd337));
        // CB A6 0003
        gbc.setState(0xadcb, 0xe5c7, 0x2620, 0x98ff, 0x9f1, 0xbd20, 0x1, 0x1);
        gbc.writeMem(0xadcb, { 0xcb, 0xa6 });
        gbc.writeMem(0xbd20, { 0xd1 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xe5c7, gbc.sp());
        EXPECT(0xadcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadcb));
        EXPECT(0xa6, gbc.readMem(0xadcc));
        EXPECT(0xc1, gbc.readMem(0xbd20));
        // CB A6 0004
        gbc.setState(0x7403, 0xfe9, 0x560, 0x65e8, 0x5e54, 0x4277, 0x1, 0x0);
        gbc.writeMem(0x4277, { 0x27 });
        gbc.writeMem(0x7403, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xfe9, gbc.sp());
        EXPECT(0x7405, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0005
        gbc.setState(0xe987, 0xa1bf, 0x63f0, 0x6415, 0xe7e5, 0xce8d, 0x0, 0x1);
        gbc.writeMem(0xce8d, { 0x6a });
        gbc.writeMem(0xe987, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa1bf, gbc.sp());
        EXPECT(0xe989, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xce8d));
        EXPECT(0xcb, gbc.readMem(0xe987));
        EXPECT(0xa6, gbc.readMem(0xe988));
        // CB A6 0006
        gbc.setState(0xdad1, 0x2a50, 0x68f0, 0x4a75, 0x3ea7, 0xdab1, 0x0, 0x0);
        gbc.writeMem(0xdab1, { 0xa4 });
        gbc.writeMem(0xdad1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x2a50, gbc.sp());
        EXPECT(0xdad3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xdab1));
        EXPECT(0xcb, gbc.readMem(0xdad1));
        EXPECT(0xa6, gbc.readMem(0xdad2));
        // CB A6 0007
        gbc.setState(0x7006, 0xf8f, 0x51c0, 0x8f1a, 0xaef3, 0xf8a8, 0x0, 0x0);
        gbc.writeMem(0x7006, { 0xcb, 0xa6 });
        gbc.writeMem(0xf8a8, { 0x65 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xf8f, gbc.sp());
        EXPECT(0x7008, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0xf8a8));
        // CB A6 0008
        gbc.setState(0xcc8b, 0xe32e, 0x34e0, 0x63d2, 0xdcbd, 0x61d8, 0x1, 0x1);
        gbc.writeMem(0x61d8, { 0x6c });
        gbc.writeMem(0xcc8b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe32e, gbc.sp());
        EXPECT(0xcc8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc8b));
        EXPECT(0xa6, gbc.readMem(0xcc8c));
        // CB A6 0009
        gbc.setState(0x94f, 0x8b54, 0xcfb0, 0x3c45, 0x8186, 0x6e88, 0x0, 0x0);
        gbc.writeMem(0x94f, { 0xcb, 0xa6 });
        gbc.writeMem(0x6e88, { 0xc5 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x8b54, gbc.sp());
        EXPECT(0x951, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 000A
        gbc.setState(0x4165, 0x81c7, 0xe1c0, 0xe3ca, 0x4a1b, 0xd161, 0x1, 0x0);
        gbc.writeMem(0x4165, { 0xcb, 0xa6 });
        gbc.writeMem(0xd161, { 0xc4 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x81c7, gbc.sp());
        EXPECT(0x4167, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xd161));
        // CB A6 000B
        gbc.setState(0x20ad, 0x8c13, 0xedc0, 0x2a49, 0x5782, 0xc165, 0x0, 0x0);
        gbc.writeMem(0x20ad, { 0xcb, 0xa6 });
        gbc.writeMem(0xc165, { 0x69 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x8c13, gbc.sp());
        EXPECT(0x20af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xc165));
        // CB A6 000D
        gbc.setState(0x390b, 0x8d1c, 0x82b0, 0x5753, 0xadba, 0x8c09, 0x0, 0x1);
        gbc.writeMem(0x390b, { 0xcb, 0xa6 });
        gbc.writeMem(0x8c09, { 0x16 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x8d1c, gbc.sp());
        EXPECT(0x390d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0x8c09));
        // CB A6 000E
        gbc.setState(0xc5cb, 0x97aa, 0x3a30, 0x548a, 0x731a, 0x534d, 0x1, 0x1);
        gbc.writeMem(0x534d, { 0xec });
        gbc.writeMem(0xc5cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x97aa, gbc.sp());
        EXPECT(0xc5cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5cb));
        EXPECT(0xa6, gbc.readMem(0xc5cc));
        // CB A6 000F
        gbc.setState(0xae2e, 0x5201, 0x9ad0, 0x5a9e, 0xe0f8, 0xe315, 0x1, 0x1);
        gbc.writeMem(0xae2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xe315, { 0x90 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x5201, gbc.sp());
        EXPECT(0xae30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae2e));
        EXPECT(0xa6, gbc.readMem(0xae2f));
        EXPECT(0x80, gbc.readMem(0xe315));
        // CB A6 0010
        gbc.setState(0x3957, 0xc4a6, 0xc0a0, 0x5e9c, 0x90cd, 0x9267, 0x1, 0x1);
        gbc.writeMem(0x3957, { 0xcb, 0xa6 });
        gbc.writeMem(0x9267, { 0x73 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xc4a6, gbc.sp());
        EXPECT(0x3959, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0x9267));
        // CB A6 0011
        gbc.setState(0xc24e, 0x9a2e, 0x3fc0, 0xd3d5, 0x4943, 0x642b, 0x1, 0x0);
        gbc.writeMem(0x642b, { 0xe });
        gbc.writeMem(0xc24e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x9a2e, gbc.sp());
        EXPECT(0xc250, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc24e));
        EXPECT(0xa6, gbc.readMem(0xc24f));
        // CB A6 0012
        gbc.setState(0x6fc0, 0x7e19, 0x98f0, 0xfeba, 0xa7bd, 0x21f8, 0x0, 0x0);
        gbc.writeMem(0x21f8, { 0x1 });
        gbc.writeMem(0x6fc0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x7e19, gbc.sp());
        EXPECT(0x6fc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0013
        gbc.setState(0x224a, 0x63d9, 0xc020, 0xb8be, 0x5c3a, 0x7004, 0x1, 0x1);
        gbc.writeMem(0x224a, { 0xcb, 0xa6 });
        gbc.writeMem(0x7004, { 0xa3 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x63d9, gbc.sp());
        EXPECT(0x224c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0014
        gbc.setState(0xc00e, 0xbd, 0x160, 0x176d, 0x5307, 0x5e3a, 0x1, 0x1);
        gbc.writeMem(0x5e3a, { 0x20 });
        gbc.writeMem(0xc00e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xbd, gbc.sp());
        EXPECT(0xc010, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc00e));
        EXPECT(0xa6, gbc.readMem(0xc00f));
        // CB A6 0016
        gbc.setState(0x9a0c, 0x1555, 0x5a50, 0x6f4f, 0x746d, 0x9f8b, 0x0, 0x0);
        gbc.writeMem(0x9a0c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9f8b, { 0xaa });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x1555, gbc.sp());
        EXPECT(0x9a0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a0c));
        EXPECT(0xa6, gbc.readMem(0x9a0d));
        EXPECT(0xaa, gbc.readMem(0x9f8b));
        // CB A6 0017
        gbc.setState(0xacb1, 0xbf59, 0x2650, 0x4a68, 0x3a78, 0xd526, 0x0, 0x0);
        gbc.writeMem(0xacb1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd526, { 0x29 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xbf59, gbc.sp());
        EXPECT(0xacb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacb1));
        EXPECT(0xa6, gbc.readMem(0xacb2));
        EXPECT(0x29, gbc.readMem(0xd526));
        // CB A6 0018
        gbc.setState(0x28c6, 0xa3df, 0x1e30, 0xc7f, 0xd75, 0xb544, 0x0, 0x0);
        gbc.writeMem(0x28c6, { 0xcb, 0xa6 });
        gbc.writeMem(0xb544, { 0x24 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xa3df, gbc.sp());
        EXPECT(0x28c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0xb544));
        // CB A6 0019
        gbc.setState(0x4205, 0x3221, 0x5420, 0x6d54, 0x4651, 0x44ba, 0x0, 0x0);
        gbc.writeMem(0x4205, { 0xcb, 0xa6 });
        gbc.writeMem(0x44ba, { 0xa });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x3221, gbc.sp());
        EXPECT(0x4207, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 001A
        gbc.setState(0x9eb0, 0xcd18, 0xe370, 0x2ebb, 0x69ec, 0xd18b, 0x0, 0x0);
        gbc.writeMem(0x9eb0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd18b, { 0x8b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xcd18, gbc.sp());
        EXPECT(0x9eb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9eb0));
        EXPECT(0xa6, gbc.readMem(0x9eb1));
        EXPECT(0x8b, gbc.readMem(0xd18b));
        // CB A6 001B
        gbc.setState(0xeef, 0x2cd8, 0x6240, 0x41f9, 0x5254, 0x635, 0x0, 0x1);
        gbc.writeMem(0x635, { 0xc5 });
        gbc.writeMem(0xeef, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x2cd8, gbc.sp());
        EXPECT(0xef1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 001D
        gbc.setState(0x62, 0xaefa, 0x6610, 0xf9c6, 0x4e9a, 0xa56b, 0x0, 0x1);
        gbc.writeMem(0x62, { 0xcb, 0xa6 });
        gbc.writeMem(0xa56b, { 0x39 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xaefa, gbc.sp());
        EXPECT(0x64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xa56b));
        // CB A6 001E
        gbc.setState(0x8902, 0x80c5, 0xc3d0, 0x1111, 0x178c, 0x63e0, 0x1, 0x1);
        gbc.writeMem(0x63e0, { 0x21 });
        gbc.writeMem(0x8902, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x80c5, gbc.sp());
        EXPECT(0x8904, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8902));
        EXPECT(0xa6, gbc.readMem(0x8903));
        // CB A6 001F
        gbc.setState(0x213a, 0x7e39, 0xc60, 0x5fb, 0x1db0, 0xb2f2, 0x1, 0x0);
        gbc.writeMem(0x213a, { 0xcb, 0xa6 });
        gbc.writeMem(0xb2f2, { 0x37 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x7e39, gbc.sp());
        EXPECT(0x213c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xb2f2));
        // CB A6 0021
        gbc.setState(0x98de, 0x2f78, 0x5ab0, 0x7ad8, 0x4ae, 0xd964, 0x1, 0x1);
        gbc.writeMem(0x98de, { 0xcb, 0xa6 });
        gbc.writeMem(0xd964, { 0x6a });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x2f78, gbc.sp());
        EXPECT(0x98e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98de));
        EXPECT(0xa6, gbc.readMem(0x98df));
        EXPECT(0x6a, gbc.readMem(0xd964));
        // CB A6 0022
        gbc.setState(0x2fa7, 0xb348, 0xa350, 0x25df, 0x2311, 0xe177, 0x0, 0x0);
        gbc.writeMem(0x2fa7, { 0xcb, 0xa6 });
        gbc.writeMem(0xe177, { 0x55 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb348, gbc.sp());
        EXPECT(0x2fa9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x45, gbc.readMem(0xe177));
        // CB A6 0023
        gbc.setState(0xacb, 0xf9ae, 0xed00, 0x5acb, 0xd312, 0xde04, 0x1, 0x0);
        gbc.writeMem(0xacb, { 0xcb, 0xa6 });
        gbc.writeMem(0xde04, { 0x1a });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xf9ae, gbc.sp());
        EXPECT(0xacd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xde04));
        // CB A6 0024
        gbc.setState(0x5884, 0xfd92, 0x2710, 0x7966, 0x19af, 0xf123, 0x1, 0x0);
        gbc.writeMem(0x5884, { 0xcb, 0xa6 });
        gbc.writeMem(0xf123, { 0xe5 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xfd92, gbc.sp());
        EXPECT(0x5886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xf123));
        // CB A6 0025
        gbc.setState(0xed04, 0x9977, 0xdd40, 0x2859, 0x257b, 0x5812, 0x0, 0x1);
        gbc.writeMem(0x5812, { 0x4c });
        gbc.writeMem(0xed04, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x9977, gbc.sp());
        EXPECT(0xed06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed04));
        EXPECT(0xa6, gbc.readMem(0xed05));
        // CB A6 0026
        gbc.setState(0x66cb, 0x8e8, 0x7f90, 0x4dc8, 0xed88, 0x1199, 0x1, 0x1);
        gbc.writeMem(0x1199, { 0x8e });
        gbc.writeMem(0x66cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x8e8, gbc.sp());
        EXPECT(0x66cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0028
        gbc.setState(0x77e2, 0x2222, 0x91c0, 0x19f1, 0x5e6, 0xf7fb, 0x0, 0x0);
        gbc.writeMem(0x77e2, { 0xcb, 0xa6 });
        gbc.writeMem(0xf7fb, { 0xf });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x2222, gbc.sp());
        EXPECT(0x77e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xf7fb));
        // CB A6 0029
        gbc.setState(0x87f7, 0x1807, 0xf630, 0x2d61, 0x936, 0xfd43, 0x0, 0x0);
        gbc.writeMem(0x87f7, { 0xcb, 0xa6 });
        gbc.writeMem(0xfd43, { 0xb8 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x1807, gbc.sp());
        EXPECT(0x87f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87f7));
        EXPECT(0xa6, gbc.readMem(0x87f8));
        EXPECT(0xa8, gbc.readMem(0xfd43));
        // CB A6 002B
        gbc.setState(0x8b3d, 0x2c82, 0x2290, 0x7648, 0xb69d, 0xee41, 0x1, 0x0);
        gbc.writeMem(0x8b3d, { 0xcb, 0xa6 });
        gbc.writeMem(0xee41, { 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x2c82, gbc.sp());
        EXPECT(0x8b3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b3d));
        EXPECT(0xa6, gbc.readMem(0x8b3e));
        EXPECT(0xf, gbc.readMem(0xee41));
        // CB A6 002C
        gbc.setState(0x7500, 0x4477, 0x3d0, 0x562d, 0x75ec, 0xccb2, 0x0, 0x1);
        gbc.writeMem(0x7500, { 0xcb, 0xa6 });
        gbc.writeMem(0xccb2, { 0xd2 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x4477, gbc.sp());
        EXPECT(0x7502, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0xccb2));
        // CB A6 002D
        gbc.setState(0x56da, 0x19a3, 0xa780, 0x743b, 0x2267, 0xe4b8, 0x1, 0x0);
        gbc.writeMem(0x56da, { 0xcb, 0xa6 });
        gbc.writeMem(0xe4b8, { 0xa9 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x19a3, gbc.sp());
        EXPECT(0x56dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa9, gbc.readMem(0xe4b8));
        // CB A6 002E
        gbc.setState(0x161d, 0xc38e, 0xcea0, 0x46b4, 0x7ea4, 0xa437, 0x1, 0x1);
        gbc.writeMem(0x161d, { 0xcb, 0xa6 });
        gbc.writeMem(0xa437, { 0xa2 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xc38e, gbc.sp());
        EXPECT(0x161f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xa437));
        // CB A6 002F
        gbc.setState(0x8f0b, 0xd87d, 0xa8c0, 0x8029, 0xa91d, 0xcea4, 0x1, 0x1);
        gbc.writeMem(0x8f0b, { 0xcb, 0xa6 });
        gbc.writeMem(0xcea4, { 0x9 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xd87d, gbc.sp());
        EXPECT(0x8f0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0b));
        EXPECT(0xa6, gbc.readMem(0x8f0c));
        EXPECT(0x9, gbc.readMem(0xcea4));
        // CB A6 0031
        gbc.setState(0x9b79, 0xbd, 0x4370, 0x33, 0x80f6, 0xe25d, 0x0, 0x1);
        gbc.writeMem(0x9b79, { 0xcb, 0xa6 });
        gbc.writeMem(0xe25d, { 0x22 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xbd, gbc.sp());
        EXPECT(0x9b7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b79));
        EXPECT(0xa6, gbc.readMem(0x9b7a));
        EXPECT(0x22, gbc.readMem(0xe25d));
        // CB A6 0032
        gbc.setState(0xd68a, 0x7c3c, 0x7220, 0x811f, 0xfb9a, 0xd26c, 0x0, 0x1);
        gbc.writeMem(0xd26c, { 0xd0 });
        gbc.writeMem(0xd68a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x7c3c, gbc.sp());
        EXPECT(0xd68c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc0, gbc.readMem(0xd26c));
        EXPECT(0xcb, gbc.readMem(0xd68a));
        EXPECT(0xa6, gbc.readMem(0xd68b));
        // CB A6 0033
        gbc.setState(0xd98c, 0x279a, 0x74f0, 0x33fc, 0xafb2, 0x19b4, 0x1, 0x0);
        gbc.writeMem(0x19b4, { 0x62 });
        gbc.writeMem(0xd98c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x279a, gbc.sp());
        EXPECT(0xd98e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd98c));
        EXPECT(0xa6, gbc.readMem(0xd98d));
        // CB A6 0034
        gbc.setState(0xdf3a, 0xe38e, 0x9b80, 0xe372, 0x1e91, 0xf246, 0x1, 0x1);
        gbc.writeMem(0xdf3a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf246, { 0xac });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xe38e, gbc.sp());
        EXPECT(0xdf3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf3a));
        EXPECT(0xa6, gbc.readMem(0xdf3b));
        EXPECT(0xac, gbc.readMem(0xf246));
        // CB A6 0036
        gbc.setState(0x6154, 0x9510, 0x4e60, 0xebe3, 0x6f46, 0x82a4, 0x0, 0x0);
        gbc.writeMem(0x6154, { 0xcb, 0xa6 });
        gbc.writeMem(0x82a4, { 0x7e });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x9510, gbc.sp());
        EXPECT(0x6156, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0x82a4));
        // CB A6 0037
        gbc.setState(0x9ad7, 0x8f5a, 0xe830, 0x96ad, 0xc677, 0xaf16, 0x1, 0x0);
        gbc.writeMem(0x9ad7, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf16, { 0x72 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x8f5a, gbc.sp());
        EXPECT(0x9ad9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ad7));
        EXPECT(0xa6, gbc.readMem(0x9ad8));
        EXPECT(0x62, gbc.readMem(0xaf16));
        // CB A6 0038
        gbc.setState(0x8c98, 0xbe80, 0xcd80, 0x6e98, 0xe647, 0xecc, 0x1, 0x0);
        gbc.writeMem(0xecc, { 0x6e });
        gbc.writeMem(0x8c98, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xbe80, gbc.sp());
        EXPECT(0x8c9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c98));
        EXPECT(0xa6, gbc.readMem(0x8c99));
        // CB A6 0039
        gbc.setState(0x3de7, 0x27b3, 0x89c0, 0x422, 0xadbd, 0xe8e4, 0x0, 0x0);
        gbc.writeMem(0x3de7, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8e4, { 0xdc });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x27b3, gbc.sp());
        EXPECT(0x3de9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xe8e4));
        // CB A6 003A
        gbc.setState(0x5c59, 0xa897, 0xd910, 0x1cfa, 0x246, 0xaed4, 0x1, 0x1);
        gbc.writeMem(0x5c59, { 0xcb, 0xa6 });
        gbc.writeMem(0xaed4, { 0xb2 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xa897, gbc.sp());
        EXPECT(0x5c5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xaed4));
        // CB A6 003D
        gbc.setState(0x1347, 0xd9ae, 0x7a00, 0x2f0d, 0x71af, 0x55ad, 0x0, 0x1);
        gbc.writeMem(0x1347, { 0xcb, 0xa6 });
        gbc.writeMem(0x55ad, { 0x49 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xd9ae, gbc.sp());
        EXPECT(0x1349, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 003F
        gbc.setState(0xb0a4, 0xbc6d, 0x6f50, 0x780e, 0x7511, 0x150b, 0x0, 0x1);
        gbc.writeMem(0x150b, { 0xc2 });
        gbc.writeMem(0xb0a4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xbc6d, gbc.sp());
        EXPECT(0xb0a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0a4));
        EXPECT(0xa6, gbc.readMem(0xb0a5));
        // CB A6 0040
        gbc.setState(0x8e8d, 0x7f9c, 0xe80, 0x7aa, 0xaa70, 0xbca6, 0x1, 0x0);
        gbc.writeMem(0x8e8d, { 0xcb, 0xa6 });
        gbc.writeMem(0xbca6, { 0x9d });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7f9c, gbc.sp());
        EXPECT(0x8e8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e8d));
        EXPECT(0xa6, gbc.readMem(0x8e8e));
        EXPECT(0x8d, gbc.readMem(0xbca6));
        // CB A6 0041
        gbc.setState(0x5419, 0xfcf6, 0xa130, 0x8e2f, 0x544d, 0x9217, 0x1, 0x0);
        gbc.writeMem(0x5419, { 0xcb, 0xa6 });
        gbc.writeMem(0x9217, { 0x82 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xfcf6, gbc.sp());
        EXPECT(0x541b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x82, gbc.readMem(0x9217));
        // CB A6 0043
        gbc.setState(0x8594, 0xcc5e, 0x9260, 0x18b2, 0x6421, 0xa4fc, 0x0, 0x1);
        gbc.writeMem(0x8594, { 0xcb, 0xa6 });
        gbc.writeMem(0xa4fc, { 0xc1 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xcc5e, gbc.sp());
        EXPECT(0x8596, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8594));
        EXPECT(0xa6, gbc.readMem(0x8595));
        EXPECT(0xc1, gbc.readMem(0xa4fc));
        // CB A6 0044
        gbc.setState(0x898b, 0xb885, 0x9f90, 0xc5b0, 0xe29, 0xd3b7, 0x1, 0x0);
        gbc.writeMem(0x898b, { 0xcb, 0xa6 });
        gbc.writeMem(0xd3b7, { 0xe4 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xb885, gbc.sp());
        EXPECT(0x898d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x898b));
        EXPECT(0xa6, gbc.readMem(0x898c));
        EXPECT(0xe4, gbc.readMem(0xd3b7));
        // CB A6 0045
        gbc.setState(0xa03b, 0x9dd3, 0xe6e0, 0x2a00, 0x1390, 0xabb8, 0x0, 0x0);
        gbc.writeMem(0xa03b, { 0xcb, 0xa6 });
        gbc.writeMem(0xabb8, { 0xa4 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x9dd3, gbc.sp());
        EXPECT(0xa03d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa03b));
        EXPECT(0xa6, gbc.readMem(0xa03c));
        EXPECT(0xa4, gbc.readMem(0xabb8));
        // CB A6 0046
        gbc.setState(0xd9f9, 0x9933, 0x4d30, 0xb195, 0xd9f1, 0xfdad, 0x0, 0x0);
        gbc.writeMem(0xd9f9, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdad, { 0x4b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x9933, gbc.sp());
        EXPECT(0xd9fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9f9));
        EXPECT(0xa6, gbc.readMem(0xd9fa));
        EXPECT(0x4b, gbc.readMem(0xfdad));
        // CB A6 0048
        gbc.setState(0x2992, 0x6818, 0x30b0, 0x2f32, 0x1fea, 0x213b, 0x1, 0x0);
        gbc.writeMem(0x213b, { 0xe8 });
        gbc.writeMem(0x2992, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x6818, gbc.sp());
        EXPECT(0x2994, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0049
        gbc.setState(0x9e5b, 0xa8b, 0xb4b0, 0xf940, 0xd920, 0xb220, 0x0, 0x0);
        gbc.writeMem(0x9e5b, { 0xcb, 0xa6 });
        gbc.writeMem(0xb220, { 0xe9 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xa8b, gbc.sp());
        EXPECT(0x9e5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e5b));
        EXPECT(0xa6, gbc.readMem(0x9e5c));
        EXPECT(0xe9, gbc.readMem(0xb220));
        // CB A6 004A
        gbc.setState(0xe8cb, 0x20be, 0x5f00, 0x61e, 0xa772, 0x2a35, 0x0, 0x0);
        gbc.writeMem(0x2a35, { 0xf });
        gbc.writeMem(0xe8cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x20be, gbc.sp());
        EXPECT(0xe8cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8cb));
        EXPECT(0xa6, gbc.readMem(0xe8cc));
        // CB A6 004B
        gbc.setState(0x6e9d, 0x1b4b, 0xa500, 0xa9fa, 0xcd12, 0x9a94, 0x1, 0x0);
        gbc.writeMem(0x6e9d, { 0xcb, 0xa6 });
        gbc.writeMem(0x9a94, { 0xb0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1b4b, gbc.sp());
        EXPECT(0x6e9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0x9a94));
        // CB A6 004C
        gbc.setState(0x1a2a, 0xb7cb, 0xbe0, 0x8a9, 0x2f9b, 0xfee5, 0x1, 0x0);
        gbc.writeMem(0x1a2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xfee5, { 0xfc });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xb7cb, gbc.sp());
        EXPECT(0x1a2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xec, gbc.readMem(0xfee5));
        // CB A6 004D
        gbc.setState(0x3049, 0x9a46, 0x7090, 0x9563, 0xc9fc, 0xf247, 0x1, 0x0);
        gbc.writeMem(0x3049, { 0xcb, 0xa6 });
        gbc.writeMem(0xf247, { 0xbe });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9a46, gbc.sp());
        EXPECT(0x304b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xae, gbc.readMem(0xf247));
        // CB A6 004E
        gbc.setState(0xab08, 0xc667, 0xe880, 0x6196, 0x4092, 0xbd68, 0x0, 0x0);
        gbc.writeMem(0xab08, { 0xcb, 0xa6 });
        gbc.writeMem(0xbd68, { 0xba });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xc667, gbc.sp());
        EXPECT(0xab0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab08));
        EXPECT(0xa6, gbc.readMem(0xab09));
        EXPECT(0xaa, gbc.readMem(0xbd68));
        // CB A6 004F
        gbc.setState(0xa73, 0x6bf2, 0xcb00, 0x583c, 0x8639, 0xaf8d, 0x1, 0x1);
        gbc.writeMem(0xa73, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf8d, { 0xb });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x6bf2, gbc.sp());
        EXPECT(0xa75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xaf8d));
        // CB A6 0051
        gbc.setState(0xab2a, 0x903d, 0x180, 0x9761, 0x54e2, 0xf558, 0x0, 0x1);
        gbc.writeMem(0xab2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf558, { 0x8c });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x903d, gbc.sp());
        EXPECT(0xab2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab2a));
        EXPECT(0xa6, gbc.readMem(0xab2b));
        EXPECT(0x8c, gbc.readMem(0xf558));
        // CB A6 0052
        gbc.setState(0x28a2, 0xec07, 0x25b0, 0xdb4d, 0x93dd, 0xa45f, 0x0, 0x1);
        gbc.writeMem(0x28a2, { 0xcb, 0xa6 });
        gbc.writeMem(0xa45f, { 0x2a });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xec07, gbc.sp());
        EXPECT(0x28a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xa45f));
        // CB A6 0053
        gbc.setState(0x48bb, 0xf01b, 0x8d20, 0x3472, 0x6bd3, 0xbf92, 0x0, 0x1);
        gbc.writeMem(0x48bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf92, { 0x6 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xf01b, gbc.sp());
        EXPECT(0x48bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0xbf92));
        // CB A6 0054
        gbc.setState(0x608b, 0x46fc, 0x1d40, 0xa731, 0x751, 0xc8a8, 0x0, 0x1);
        gbc.writeMem(0x608b, { 0xcb, 0xa6 });
        gbc.writeMem(0xc8a8, { 0x7e });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x46fc, gbc.sp());
        EXPECT(0x608d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0xc8a8));
        // CB A6 0058
        gbc.setState(0x5ad1, 0x5483, 0xcf90, 0x3c9, 0x688a, 0xd31f, 0x0, 0x0);
        gbc.writeMem(0x5ad1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd31f, { 0x21 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x5483, gbc.sp());
        EXPECT(0x5ad3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xd31f));
        // CB A6 005B
        gbc.setState(0x3077, 0xc287, 0x4940, 0xe587, 0xc1ed, 0x7973, 0x1, 0x1);
        gbc.writeMem(0x3077, { 0xcb, 0xa6 });
        gbc.writeMem(0x7973, { 0xa1 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xc287, gbc.sp());
        EXPECT(0x3079, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 005C
        gbc.setState(0xbd14, 0xf222, 0x8570, 0x82d2, 0xca7f, 0x26f2, 0x1, 0x0);
        gbc.writeMem(0x26f2, { 0x89 });
        gbc.writeMem(0xbd14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf222, gbc.sp());
        EXPECT(0xbd16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd14));
        EXPECT(0xa6, gbc.readMem(0xbd15));
        // CB A6 005D
        gbc.setState(0x309e, 0x9a77, 0xedd0, 0x34e4, 0xb95f, 0xb27e, 0x1, 0x1);
        gbc.writeMem(0x309e, { 0xcb, 0xa6 });
        gbc.writeMem(0xb27e, { 0xf2 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x9a77, gbc.sp());
        EXPECT(0x30a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0xb27e));
        // CB A6 005E
        gbc.setState(0x5799, 0xbfd6, 0x41d0, 0x2131, 0x9e84, 0x80aa, 0x1, 0x1);
        gbc.writeMem(0x5799, { 0xcb, 0xa6 });
        gbc.writeMem(0x80aa, { 0x70 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xbfd6, gbc.sp());
        EXPECT(0x579b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0x80aa));
        // CB A6 005F
        gbc.setState(0x2521, 0x2555, 0x4560, 0x3afc, 0xdbab, 0x883a, 0x0, 0x0);
        gbc.writeMem(0x2521, { 0xcb, 0xa6 });
        gbc.writeMem(0x883a, { 0x44 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2555, gbc.sp());
        EXPECT(0x2523, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0x883a));
        // CB A6 0060
        gbc.setState(0x1c4b, 0xa88c, 0xb750, 0x4b05, 0x20e4, 0xaf00, 0x0, 0x0);
        gbc.writeMem(0x1c4b, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf00, { 0x22 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xa88c, gbc.sp());
        EXPECT(0x1c4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xaf00));
        // CB A6 0061
        gbc.setState(0x5c90, 0x9289, 0xbed0, 0xa49c, 0x3dfd, 0x8bb0, 0x1, 0x1);
        gbc.writeMem(0x5c90, { 0xcb, 0xa6 });
        gbc.writeMem(0x8bb0, { 0xe5 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x9289, gbc.sp());
        EXPECT(0x5c92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0x8bb0));
        // CB A6 0062
        gbc.setState(0x4e93, 0x9588, 0x2740, 0xbed2, 0xad93, 0x9894, 0x1, 0x1);
        gbc.writeMem(0x4e93, { 0xcb, 0xa6 });
        gbc.writeMem(0x9894, { 0x74 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9588, gbc.sp());
        EXPECT(0x4e95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x9894));
        // CB A6 0063
        gbc.setState(0x83aa, 0x2d4c, 0xc250, 0xf342, 0x6989, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x6aab, { 0x8d });
        gbc.writeMem(0x83aa, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2d4c, gbc.sp());
        EXPECT(0x83ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83aa));
        EXPECT(0xa6, gbc.readMem(0x83ab));
        // CB A6 0064
        gbc.setState(0xdc3a, 0xe1, 0xbea0, 0x29d7, 0x3608, 0xc07d, 0x1, 0x0);
        gbc.writeMem(0xc07d, { 0x19 });
        gbc.writeMem(0xdc3a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe1, gbc.sp());
        EXPECT(0xdc3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0xc07d));
        EXPECT(0xcb, gbc.readMem(0xdc3a));
        EXPECT(0xa6, gbc.readMem(0xdc3b));
        // CB A6 0065
        gbc.setState(0xc374, 0x4564, 0x1880, 0xaeff, 0xbb20, 0xdba7, 0x0, 0x0);
        gbc.writeMem(0xc374, { 0xcb, 0xa6 });
        gbc.writeMem(0xdba7, { 0xef });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4564, gbc.sp());
        EXPECT(0xc376, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc374));
        EXPECT(0xa6, gbc.readMem(0xc375));
        EXPECT(0xef, gbc.readMem(0xdba7));
        // CB A6 0066
        gbc.setState(0xcf27, 0x2c7d, 0x86f0, 0xc6a4, 0x9c04, 0x9ba6, 0x1, 0x0);
        gbc.writeMem(0x9ba6, { 0xc0 });
        gbc.writeMem(0xcf27, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x2c7d, gbc.sp());
        EXPECT(0xcf29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc0, gbc.readMem(0x9ba6));
        EXPECT(0xcb, gbc.readMem(0xcf27));
        EXPECT(0xa6, gbc.readMem(0xcf28));
        // CB A6 0067
        gbc.setState(0x3cc5, 0x5e1c, 0x1130, 0x9cd, 0x6, 0xf38c, 0x0, 0x1);
        gbc.writeMem(0x3cc5, { 0xcb, 0xa6 });
        gbc.writeMem(0xf38c, { 0xd5 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x5e1c, gbc.sp());
        EXPECT(0x3cc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0xf38c));
        // CB A6 0068
        gbc.setState(0xeeb0, 0xd608, 0x3520, 0xe8be, 0x995e, 0xf48e, 0x0, 0x1);
        gbc.writeMem(0xeeb0, { 0xcb, 0xa6 });
        gbc.writeMem(0xf48e, { 0x27 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xd608, gbc.sp());
        EXPECT(0xeeb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeeb0));
        EXPECT(0xa6, gbc.readMem(0xeeb1));
        EXPECT(0x27, gbc.readMem(0xf48e));
        // CB A6 006A
        gbc.setState(0x9c17, 0xb941, 0xa540, 0x5374, 0x3c01, 0x49f7, 0x1, 0x1);
        gbc.writeMem(0x49f7, { 0xc1 });
        gbc.writeMem(0x9c17, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xb941, gbc.sp());
        EXPECT(0x9c19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c17));
        EXPECT(0xa6, gbc.readMem(0x9c18));
        // CB A6 006B
        gbc.setState(0x4d71, 0x9110, 0x22b0, 0x9e3, 0xa06d, 0xbebe, 0x0, 0x0);
        gbc.writeMem(0x4d71, { 0xcb, 0xa6 });
        gbc.writeMem(0xbebe, { 0x9d });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x9110, gbc.sp());
        EXPECT(0x4d73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xbebe));
        // CB A6 006C
        gbc.setState(0x42de, 0x3a5, 0xef80, 0x8cfc, 0xc62c, 0x715a, 0x0, 0x0);
        gbc.writeMem(0x42de, { 0xcb, 0xa6 });
        gbc.writeMem(0x715a, { 0xab });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x3a5, gbc.sp());
        EXPECT(0x42e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 006D
        gbc.setState(0x3c0d, 0x800a, 0xd290, 0xaffb, 0x3bcf, 0x3ca6, 0x0, 0x0);
        gbc.writeMem(0x3c0d, { 0xcb, 0xa6 });
        gbc.writeMem(0x3ca6, { 0xcf });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x800a, gbc.sp());
        EXPECT(0x3c0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 006E
        gbc.setState(0x412c, 0x4a3b, 0x530, 0x92a3, 0x9932, 0x361, 0x0, 0x1);
        gbc.writeMem(0x361, { 0xac });
        gbc.writeMem(0x412c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x4a3b, gbc.sp());
        EXPECT(0x412e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 006F
        gbc.setState(0x8cce, 0x1270, 0x14c0, 0x379b, 0xbe41, 0xaa86, 0x1, 0x0);
        gbc.writeMem(0x8cce, { 0xcb, 0xa6 });
        gbc.writeMem(0xaa86, { 0x85 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x1270, gbc.sp());
        EXPECT(0x8cd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cce));
        EXPECT(0xa6, gbc.readMem(0x8ccf));
        EXPECT(0x85, gbc.readMem(0xaa86));
        // CB A6 0070
        gbc.setState(0x2324, 0x7eb, 0x180, 0xb5ab, 0x5adf, 0xaed7, 0x0, 0x0);
        gbc.writeMem(0x2324, { 0xcb, 0xa6 });
        gbc.writeMem(0xaed7, { 0xe4 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x7eb, gbc.sp());
        EXPECT(0x2326, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe4, gbc.readMem(0xaed7));
        // CB A6 0071
        gbc.setState(0x4e2b, 0x2c6e, 0xa6d0, 0xae90, 0xc0ff, 0x1ada, 0x1, 0x1);
        gbc.writeMem(0x1ada, { 0xcd });
        gbc.writeMem(0x4e2b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x2c6e, gbc.sp());
        EXPECT(0x4e2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0072
        gbc.setState(0x5e9, 0x6468, 0x74a0, 0x27f0, 0xda39, 0x9a88, 0x1, 0x1);
        gbc.writeMem(0x5e9, { 0xcb, 0xa6 });
        gbc.writeMem(0x9a88, { 0x55 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x6468, gbc.sp());
        EXPECT(0x5eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x45, gbc.readMem(0x9a88));
        // CB A6 0073
        gbc.setState(0x2ec1, 0xcce7, 0x31d0, 0xf479, 0xe668, 0x8ef4, 0x1, 0x1);
        gbc.writeMem(0x2ec1, { 0xcb, 0xa6 });
        gbc.writeMem(0x8ef4, { 0x5b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xcce7, gbc.sp());
        EXPECT(0x2ec3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0x8ef4));
        // CB A6 0074
        gbc.setState(0x5d1c, 0xc936, 0xd8c0, 0xc628, 0x5e59, 0xda1c, 0x1, 0x0);
        gbc.writeMem(0x5d1c, { 0xcb, 0xa6 });
        gbc.writeMem(0xda1c, { 0xdf });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xc936, gbc.sp());
        EXPECT(0x5d1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0xda1c));
        // CB A6 0075
        gbc.setState(0xaff3, 0x7349, 0xc000, 0x1519, 0x4d19, 0xa0f4, 0x0, 0x1);
        gbc.writeMem(0xa0f4, { 0x4a });
        gbc.writeMem(0xaff3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x7349, gbc.sp());
        EXPECT(0xaff5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xa0f4));
        EXPECT(0xcb, gbc.readMem(0xaff3));
        EXPECT(0xa6, gbc.readMem(0xaff4));
        // CB A6 0077
        gbc.setState(0x483, 0xb016, 0x4bb0, 0xee88, 0xef9e, 0x8660, 0x1, 0x0);
        gbc.writeMem(0x483, { 0xcb, 0xa6 });
        gbc.writeMem(0x8660, { 0xf8 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xb016, gbc.sp());
        EXPECT(0x485, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0x8660));
        // CB A6 0078
        gbc.setState(0x1d2, 0xae3d, 0x61b0, 0x63a8, 0xbeca, 0xfbe3, 0x1, 0x1);
        gbc.writeMem(0x1d2, { 0xcb, 0xa6 });
        gbc.writeMem(0xfbe3, { 0xaf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xae3d, gbc.sp());
        EXPECT(0x1d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xaf, gbc.readMem(0xfbe3));
        // CB A6 0079
        gbc.setState(0xe4a4, 0xfc34, 0x4130, 0x3c27, 0x8c33, 0xa892, 0x0, 0x1);
        gbc.writeMem(0xa892, { 0x5 });
        gbc.writeMem(0xe4a4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xfc34, gbc.sp());
        EXPECT(0xe4a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xa892));
        EXPECT(0xcb, gbc.readMem(0xe4a4));
        EXPECT(0xa6, gbc.readMem(0xe4a5));
        // CB A6 007B
        gbc.setState(0x60bb, 0x57fa, 0x1500, 0x35f8, 0x36c5, 0xa3d8, 0x1, 0x0);
        gbc.writeMem(0x60bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xa3d8, { 0x18 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x57fa, gbc.sp());
        EXPECT(0x60bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0xa3d8));
        // CB A6 007C
        gbc.setState(0xe670, 0x5bf, 0x480, 0x9b9c, 0x790b, 0x4ca8, 0x0, 0x0);
        gbc.writeMem(0x4ca8, { 0x82 });
        gbc.writeMem(0xe670, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x5bf, gbc.sp());
        EXPECT(0xe672, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe670));
        EXPECT(0xa6, gbc.readMem(0xe671));
        // CB A6 007D
        gbc.setState(0x70ba, 0x8553, 0x7ea0, 0x477a, 0x4578, 0xcb46, 0x0, 0x0);
        gbc.writeMem(0x70ba, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb46, { 0x1 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x8553, gbc.sp());
        EXPECT(0x70bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xcb46));
        // CB A6 007E
        gbc.setState(0xbf2b, 0x301d, 0xa2d0, 0x5cdb, 0xfba7, 0x6dd2, 0x1, 0x1);
        gbc.writeMem(0x6dd2, { 0x8e });
        gbc.writeMem(0xbf2b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x301d, gbc.sp());
        EXPECT(0xbf2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf2b));
        EXPECT(0xa6, gbc.readMem(0xbf2c));
        // CB A6 0080
        gbc.setState(0xaa11, 0x5730, 0xaf90, 0x2955, 0xa55b, 0xe5c1, 0x1, 0x1);
        gbc.writeMem(0xaa11, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5c1, { 0x15 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x5730, gbc.sp());
        EXPECT(0xaa13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa11));
        EXPECT(0xa6, gbc.readMem(0xaa12));
        EXPECT(0x5, gbc.readMem(0xe5c1));
        // CB A6 0081
        gbc.setState(0x2eb2, 0xf4, 0x4800, 0xfdad, 0x50dd, 0x88ad, 0x1, 0x0);
        gbc.writeMem(0x2eb2, { 0xcb, 0xa6 });
        gbc.writeMem(0x88ad, { 0x6 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xf4, gbc.sp());
        EXPECT(0x2eb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0x88ad));
        // CB A6 0084
        gbc.setState(0xb8e4, 0x7fd1, 0x9af0, 0x6db8, 0x29b8, 0x2646, 0x1, 0x1);
        gbc.writeMem(0x2646, { 0x3 });
        gbc.writeMem(0xb8e4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x7fd1, gbc.sp());
        EXPECT(0xb8e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8e4));
        EXPECT(0xa6, gbc.readMem(0xb8e5));
        // CB A6 0086
        gbc.setState(0x6d2e, 0x55a7, 0x6240, 0xaf0b, 0x785b, 0xf5cb, 0x0, 0x1);
        gbc.writeMem(0x6d2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5cb, { 0x5 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x55a7, gbc.sp());
        EXPECT(0x6d30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xf5cb));
        // CB A6 0087
        gbc.setState(0xd0fc, 0x3b80, 0x5740, 0xca0d, 0x43a0, 0x8a94, 0x0, 0x0);
        gbc.writeMem(0x8a94, { 0x12 });
        gbc.writeMem(0xd0fc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x3b80, gbc.sp());
        EXPECT(0xd0fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0x8a94));
        EXPECT(0xcb, gbc.readMem(0xd0fc));
        EXPECT(0xa6, gbc.readMem(0xd0fd));
        // CB A6 0088
        gbc.setState(0x7255, 0xb641, 0x970, 0xdf1c, 0x45f8, 0x5e5f, 0x0, 0x1);
        gbc.writeMem(0x5e5f, { 0x2e });
        gbc.writeMem(0x7255, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb641, gbc.sp());
        EXPECT(0x7257, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 008A
        gbc.setState(0xd203, 0x11e7, 0x7190, 0x1595, 0xdd0f, 0x3c3, 0x0, 0x1);
        gbc.writeMem(0x3c3, { 0x2b });
        gbc.writeMem(0xd203, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x11e7, gbc.sp());
        EXPECT(0xd205, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd203));
        EXPECT(0xa6, gbc.readMem(0xd204));
        // CB A6 008C
        gbc.setState(0x541, 0xdb32, 0xe10, 0xbe9e, 0x17f3, 0x2eed, 0x1, 0x1);
        gbc.writeMem(0x541, { 0xcb, 0xa6 });
        gbc.writeMem(0x2eed, { 0x85 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xdb32, gbc.sp());
        EXPECT(0x543, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 008E
        gbc.setState(0xa46a, 0x4fdc, 0x8c60, 0xae97, 0x58f3, 0x85fe, 0x0, 0x0);
        gbc.writeMem(0x85fe, { 0x74 });
        gbc.writeMem(0xa46a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x4fdc, gbc.sp());
        EXPECT(0xa46c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x85fe));
        EXPECT(0xcb, gbc.readMem(0xa46a));
        EXPECT(0xa6, gbc.readMem(0xa46b));
        // CB A6 0090
        gbc.setState(0x1a55, 0xf37, 0xe2f0, 0xc44d, 0xcfe2, 0xa60b, 0x1, 0x1);
        gbc.writeMem(0x1a55, { 0xcb, 0xa6 });
        gbc.writeMem(0xa60b, { 0xfc });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xf37, gbc.sp());
        EXPECT(0x1a57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xec, gbc.readMem(0xa60b));
        // CB A6 0091
        gbc.setState(0xbbea, 0x23f0, 0x9df0, 0x9398, 0x5962, 0xa7ca, 0x1, 0x0);
        gbc.writeMem(0xa7ca, { 0x46 });
        gbc.writeMem(0xbbea, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x23f0, gbc.sp());
        EXPECT(0xbbec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0xa7ca));
        EXPECT(0xcb, gbc.readMem(0xbbea));
        EXPECT(0xa6, gbc.readMem(0xbbeb));
        // CB A6 0094
        gbc.setState(0xe413, 0x1b28, 0x12a0, 0x627d, 0x8166, 0xafc0, 0x0, 0x1);
        gbc.writeMem(0xafc0, { 0xe2 });
        gbc.writeMem(0xe413, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x1b28, gbc.sp());
        EXPECT(0xe415, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0xafc0));
        EXPECT(0xcb, gbc.readMem(0xe413));
        EXPECT(0xa6, gbc.readMem(0xe414));
        // CB A6 0096
        gbc.setState(0x2be5, 0x173d, 0xb270, 0x34bd, 0x181d, 0xb285, 0x1, 0x1);
        gbc.writeMem(0x2be5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb285, { 0xcf });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x173d, gbc.sp());
        EXPECT(0x2be7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0xb285));
        // CB A6 0098
        gbc.setState(0x735d, 0x414c, 0xcb0, 0x2a86, 0x9b76, 0xf4c2, 0x1, 0x0);
        gbc.writeMem(0x735d, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4c2, { 0x52 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x414c, gbc.sp());
        EXPECT(0x735f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0xf4c2));
        // CB A6 0099
        gbc.setState(0x97ed, 0xb1e6, 0xf0, 0xdd8a, 0x270b, 0x9299, 0x0, 0x0);
        gbc.writeMem(0x9299, { 0xcc });
        gbc.writeMem(0x97ed, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xb1e6, gbc.sp());
        EXPECT(0x97ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0x9299));
        EXPECT(0xcb, gbc.readMem(0x97ed));
        EXPECT(0xa6, gbc.readMem(0x97ee));
        // CB A6 009A
        gbc.setState(0x8de5, 0xcc61, 0x800, 0xe657, 0xca94, 0xe921, 0x0, 0x0);
        gbc.writeMem(0x8de5, { 0xcb, 0xa6 });
        gbc.writeMem(0xe921, { 0x4a });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xcc61, gbc.sp());
        EXPECT(0x8de7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8de5));
        EXPECT(0xa6, gbc.readMem(0x8de6));
        EXPECT(0x4a, gbc.readMem(0xe921));
        // CB A6 009B
        gbc.setState(0x200c, 0x735a, 0x4560, 0xb9e2, 0x6764, 0x9b4c, 0x1, 0x1);
        gbc.writeMem(0x200c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9b4c, { 0xc4 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x735a, gbc.sp());
        EXPECT(0x200e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0x9b4c));
        // CB A6 009C
        gbc.setState(0x5f40, 0x9044, 0x7940, 0xe3dc, 0x36, 0xb403, 0x0, 0x1);
        gbc.writeMem(0x5f40, { 0xcb, 0xa6 });
        gbc.writeMem(0xb403, { 0x63 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x9044, gbc.sp());
        EXPECT(0x5f42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xb403));
        // CB A6 009D
        gbc.setState(0x9720, 0x4040, 0xae00, 0xda5f, 0x6a96, 0xd567, 0x0, 0x0);
        gbc.writeMem(0x9720, { 0xcb, 0xa6 });
        gbc.writeMem(0xd567, { 0x28 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x4040, gbc.sp());
        EXPECT(0x9722, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9720));
        EXPECT(0xa6, gbc.readMem(0x9721));
        EXPECT(0x28, gbc.readMem(0xd567));
        // CB A6 00A1
        gbc.setState(0x52b0, 0xc4d9, 0x30e0, 0x68f3, 0x88f0, 0x75e2, 0x1, 0x0);
        gbc.writeMem(0x52b0, { 0xcb, 0xa6 });
        gbc.writeMem(0x75e2, { 0xcf });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xc4d9, gbc.sp());
        EXPECT(0x52b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00A5
        gbc.setState(0x861, 0x49cf, 0x4f20, 0xb47d, 0x9518, 0xdb50, 0x0, 0x0);
        gbc.writeMem(0x861, { 0xcb, 0xa6 });
        gbc.writeMem(0xdb50, { 0xbe });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x49cf, gbc.sp());
        EXPECT(0x863, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xae, gbc.readMem(0xdb50));
        // CB A6 00A7
        gbc.setState(0x9be4, 0x65b5, 0x5fa0, 0xd555, 0xd55e, 0x1c71, 0x1, 0x0);
        gbc.writeMem(0x1c71, { 0x8e });
        gbc.writeMem(0x9be4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x65b5, gbc.sp());
        EXPECT(0x9be6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9be4));
        EXPECT(0xa6, gbc.readMem(0x9be5));
        // CB A6 00A9
        gbc.setState(0x1e06, 0xd40e, 0xa480, 0x1312, 0x8178, 0xf2f6, 0x1, 0x1);
        gbc.writeMem(0x1e06, { 0xcb, 0xa6 });
        gbc.writeMem(0xf2f6, { 0xd7 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xd40e, gbc.sp());
        EXPECT(0x1e08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc7, gbc.readMem(0xf2f6));
        // CB A6 00AB
        gbc.setState(0xa720, 0x2ff0, 0x1240, 0x5982, 0x530a, 0x215d, 0x0, 0x1);
        gbc.writeMem(0x215d, { 0xc5 });
        gbc.writeMem(0xa720, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x2ff0, gbc.sp());
        EXPECT(0xa722, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa720));
        EXPECT(0xa6, gbc.readMem(0xa721));
        // CB A6 00AE
        gbc.setState(0xc594, 0x2c71, 0x2010, 0x1b9e, 0x4ac2, 0xa646, 0x1, 0x1);
        gbc.writeMem(0xa646, { 0xa });
        gbc.writeMem(0xc594, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x2c71, gbc.sp());
        EXPECT(0xc596, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xa646));
        EXPECT(0xcb, gbc.readMem(0xc594));
        EXPECT(0xa6, gbc.readMem(0xc595));
        // CB A6 00AF
        gbc.setState(0xd2e3, 0xc9af, 0x5780, 0x71c, 0x7af, 0x2eed, 0x1, 0x1);
        gbc.writeMem(0x2eed, { 0x85 });
        gbc.writeMem(0xd2e3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xc9af, gbc.sp());
        EXPECT(0xd2e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2e3));
        EXPECT(0xa6, gbc.readMem(0xd2e4));
        // CB A6 00B1
        gbc.setState(0x9bba, 0x7c42, 0x92c0, 0x1f1c, 0x1750, 0x6b03, 0x0, 0x1);
        gbc.writeMem(0x6b03, { 0xe });
        gbc.writeMem(0x9bba, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x7c42, gbc.sp());
        EXPECT(0x9bbc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bba));
        EXPECT(0xa6, gbc.readMem(0x9bbb));
        // CB A6 00B2
        gbc.setState(0x27eb, 0x647b, 0x6840, 0x81fe, 0xdcf1, 0xc96, 0x1, 0x0);
        gbc.writeMem(0xc96, { 0xc8 });
        gbc.writeMem(0x27eb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x647b, gbc.sp());
        EXPECT(0x27ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00B4
        gbc.setState(0x7244, 0x870, 0x5540, 0x739, 0xca32, 0x53b5, 0x0, 0x0);
        gbc.writeMem(0x53b5, { 0x8 });
        gbc.writeMem(0x7244, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x870, gbc.sp());
        EXPECT(0x7246, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00B5
        gbc.setState(0x3b30, 0x20e, 0xde00, 0x5df1, 0x8d72, 0xfa71, 0x1, 0x0);
        gbc.writeMem(0x3b30, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa71, { 0x7e });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x20e, gbc.sp());
        EXPECT(0x3b32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0xfa71));
        // CB A6 00B7
        gbc.setState(0xbc97, 0x9646, 0x9b60, 0x8b0b, 0x81b9, 0x5822, 0x1, 0x0);
        gbc.writeMem(0x5822, { 0xe4 });
        gbc.writeMem(0xbc97, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x9646, gbc.sp());
        EXPECT(0xbc99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc97));
        EXPECT(0xa6, gbc.readMem(0xbc98));
        // CB A6 00B9
        gbc.setState(0xa17, 0x19a6, 0x2c00, 0x7968, 0xa64e, 0x2f18, 0x1, 0x1);
        gbc.writeMem(0xa17, { 0xcb, 0xa6 });
        gbc.writeMem(0x2f18, { 0x8 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x19a6, gbc.sp());
        EXPECT(0xa19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00BB
        gbc.setState(0x5a99, 0x66b3, 0xf660, 0xcd99, 0xbcc9, 0xa2ff, 0x1, 0x1);
        gbc.writeMem(0x5a99, { 0xcb, 0xa6 });
        gbc.writeMem(0xa2ff, { 0x76 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x66b3, gbc.sp());
        EXPECT(0x5a9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xa2ff));
        // CB A6 00BD
        gbc.setState(0x390f, 0xd124, 0xd620, 0x1dca, 0x1ce0, 0x1489, 0x1, 0x0);
        gbc.writeMem(0x1489, { 0x46 });
        gbc.writeMem(0x390f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xd124, gbc.sp());
        EXPECT(0x3911, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00BE
        gbc.setState(0xac96, 0x2876, 0x17c0, 0x9781, 0x115, 0xe9ce, 0x0, 0x1);
        gbc.writeMem(0xac96, { 0xcb, 0xa6 });
        gbc.writeMem(0xe9ce, { 0x9c });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x2876, gbc.sp());
        EXPECT(0xac98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac96));
        EXPECT(0xa6, gbc.readMem(0xac97));
        EXPECT(0x8c, gbc.readMem(0xe9ce));
        // CB A6 00C0
        gbc.setState(0xa09f, 0x56a, 0xda60, 0x7a02, 0x3c71, 0x2854, 0x1, 0x0);
        gbc.writeMem(0x2854, { 0x23 });
        gbc.writeMem(0xa09f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x56a, gbc.sp());
        EXPECT(0xa0a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa09f));
        EXPECT(0xa6, gbc.readMem(0xa0a0));
        // CB A6 00C1
        gbc.setState(0x62fe, 0xe5f5, 0xaed0, 0xf435, 0x3fed, 0x87b1, 0x1, 0x0);
        gbc.writeMem(0x62fe, { 0xcb, 0xa6 });
        gbc.writeMem(0x87b1, { 0x8 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xe5f5, gbc.sp());
        EXPECT(0x6300, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0x87b1));
        // CB A6 00C2
        gbc.setState(0x8205, 0xfb3e, 0x3c20, 0x13eb, 0xd6ea, 0x2b35, 0x0, 0x1);
        gbc.writeMem(0x2b35, { 0x2a });
        gbc.writeMem(0x8205, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xfb3e, gbc.sp());
        EXPECT(0x8207, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8205));
        EXPECT(0xa6, gbc.readMem(0x8206));
        // CB A6 00C4
        gbc.setState(0x5a54, 0x6e1d, 0x8270, 0xb44, 0x9946, 0xeaf7, 0x0, 0x1);
        gbc.writeMem(0x5a54, { 0xcb, 0xa6 });
        gbc.writeMem(0xeaf7, { 0xc1 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x6e1d, gbc.sp());
        EXPECT(0x5a56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0xeaf7));
        // CB A6 00C5
        gbc.setState(0xbcb1, 0x636d, 0x9760, 0xb640, 0x894c, 0xdae8, 0x1, 0x0);
        gbc.writeMem(0xbcb1, { 0xcb, 0xa6 });
        gbc.writeMem(0xdae8, { 0x60 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x636d, gbc.sp());
        EXPECT(0xbcb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcb1));
        EXPECT(0xa6, gbc.readMem(0xbcb2));
        EXPECT(0x60, gbc.readMem(0xdae8));
        // CB A6 00C6
        gbc.setState(0x41a9, 0x22c8, 0x40e0, 0xcbb2, 0x6ec, 0x85ef, 0x0, 0x0);
        gbc.writeMem(0x41a9, { 0xcb, 0xa6 });
        gbc.writeMem(0x85ef, { 0xd3 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x22c8, gbc.sp());
        EXPECT(0x41ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0x85ef));
        // CB A6 00C7
        gbc.setState(0x17e6, 0x95cc, 0xe4d0, 0xe9e2, 0xda5f, 0x78ad, 0x1, 0x1);
        gbc.writeMem(0x17e6, { 0xcb, 0xa6 });
        gbc.writeMem(0x78ad, { 0xac });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x95cc, gbc.sp());
        EXPECT(0x17e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00C8
        gbc.setState(0x2657, 0x4cc4, 0xc240, 0x843f, 0xf062, 0x6247, 0x1, 0x1);
        gbc.writeMem(0x2657, { 0xcb, 0xa6 });
        gbc.writeMem(0x6247, { 0xc1 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4cc4, gbc.sp());
        EXPECT(0x2659, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00C9
        gbc.setState(0x9c21, 0x5602, 0xaf20, 0x7fa7, 0x490a, 0x9a03, 0x0, 0x0);
        gbc.writeMem(0x9a03, { 0x7f });
        gbc.writeMem(0x9c21, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x5602, gbc.sp());
        EXPECT(0x9c23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0x9a03));
        EXPECT(0xcb, gbc.readMem(0x9c21));
        EXPECT(0xa6, gbc.readMem(0x9c22));
        // CB A6 00CB
        gbc.setState(0xbf11, 0x67a1, 0x35a0, 0x39b1, 0xd323, 0xa816, 0x1, 0x0);
        gbc.writeMem(0xa816, { 0x5e });
        gbc.writeMem(0xbf11, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x67a1, gbc.sp());
        EXPECT(0xbf13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0xa816));
        EXPECT(0xcb, gbc.readMem(0xbf11));
        EXPECT(0xa6, gbc.readMem(0xbf12));
        // CB A6 00CC
        gbc.setState(0x8a07, 0x2466, 0xdea0, 0x34da, 0xfec4, 0xbf27, 0x0, 0x0);
        gbc.writeMem(0x8a07, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf27, { 0xce });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x2466, gbc.sp());
        EXPECT(0x8a09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a07));
        EXPECT(0xa6, gbc.readMem(0x8a08));
        EXPECT(0xce, gbc.readMem(0xbf27));
        // CB A6 00CD
        gbc.setState(0x11e1, 0x29fc, 0xeb30, 0x6a4c, 0x3244, 0x4af3, 0x0, 0x0);
        gbc.writeMem(0x11e1, { 0xcb, 0xa6 });
        gbc.writeMem(0x4af3, { 0xa1 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x29fc, gbc.sp());
        EXPECT(0x11e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00CE
        gbc.setState(0x7385, 0xe592, 0x8840, 0xdd83, 0x7748, 0x969, 0x0, 0x1);
        gbc.writeMem(0x969, { 0x62 });
        gbc.writeMem(0x7385, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe592, gbc.sp());
        EXPECT(0x7387, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00D0
        gbc.setState(0x9f90, 0x933f, 0xe790, 0x8b31, 0xc2bc, 0xf436, 0x1, 0x0);
        gbc.writeMem(0x9f90, { 0xcb, 0xa6 });
        gbc.writeMem(0xf436, { 0xc7 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x933f, gbc.sp());
        EXPECT(0x9f92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f90));
        EXPECT(0xa6, gbc.readMem(0x9f91));
        EXPECT(0xc7, gbc.readMem(0xf436));
        // CB A6 00D1
        gbc.setState(0x7745, 0x30db, 0x89b0, 0x7d2, 0x109b, 0xd007, 0x0, 0x1);
        gbc.writeMem(0x7745, { 0xcb, 0xa6 });
        gbc.writeMem(0xd007, { 0x52 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x30db, gbc.sp());
        EXPECT(0x7747, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0xd007));
        // CB A6 00D2
        gbc.setState(0xd209, 0x2843, 0x3040, 0xc476, 0xc90f, 0xdd99, 0x0, 0x1);
        gbc.writeMem(0xd209, { 0xcb, 0xa6 });
        gbc.writeMem(0xdd99, { 0xc3 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x2843, gbc.sp());
        EXPECT(0xd20b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd209));
        EXPECT(0xa6, gbc.readMem(0xd20a));
        EXPECT(0xc3, gbc.readMem(0xdd99));
        // CB A6 00D4
        gbc.setState(0x89c8, 0xfc89, 0x4cb0, 0x2ccb, 0xd9f9, 0x876a, 0x1, 0x0);
        gbc.writeMem(0x876a, { 0x24 });
        gbc.writeMem(0x89c8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xfc89, gbc.sp());
        EXPECT(0x89ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x876a));
        EXPECT(0xcb, gbc.readMem(0x89c8));
        EXPECT(0xa6, gbc.readMem(0x89c9));
        // CB A6 00D5
        gbc.setState(0xd15a, 0x921c, 0xd0f0, 0x4780, 0x40a2, 0xdd3b, 0x1, 0x1);
        gbc.writeMem(0xd15a, { 0xcb, 0xa6 });
        gbc.writeMem(0xdd3b, { 0x23 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x921c, gbc.sp());
        EXPECT(0xd15c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd15a));
        EXPECT(0xa6, gbc.readMem(0xd15b));
        EXPECT(0x23, gbc.readMem(0xdd3b));
        // CB A6 00D6
        gbc.setState(0x40b0, 0xaa40, 0x41e0, 0x6d23, 0xf8de, 0x36af, 0x0, 0x1);
        gbc.writeMem(0x36af, { 0x6c });
        gbc.writeMem(0x40b0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xaa40, gbc.sp());
        EXPECT(0x40b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00D7
        gbc.setState(0xdd79, 0x2882, 0xfae0, 0x66d9, 0xea15, 0xa074, 0x0, 0x1);
        gbc.writeMem(0xa074, { 0x6c });
        gbc.writeMem(0xdd79, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x2882, gbc.sp());
        EXPECT(0xdd7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0xa074));
        EXPECT(0xcb, gbc.readMem(0xdd79));
        EXPECT(0xa6, gbc.readMem(0xdd7a));
        // CB A6 00D8
        gbc.setState(0x38d7, 0x77d3, 0x24e0, 0x573b, 0x1fc4, 0xc34b, 0x0, 0x0);
        gbc.writeMem(0x38d7, { 0xcb, 0xa6 });
        gbc.writeMem(0xc34b, { 0x7f });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x77d3, gbc.sp());
        EXPECT(0x38d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xc34b));
        // CB A6 00D9
        gbc.setState(0x911a, 0x9124, 0x1ef0, 0x285c, 0x984e, 0x8e02, 0x0, 0x0);
        gbc.writeMem(0x8e02, { 0xb7 });
        gbc.writeMem(0x911a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x9124, gbc.sp());
        EXPECT(0x911c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa7, gbc.readMem(0x8e02));
        EXPECT(0xcb, gbc.readMem(0x911a));
        EXPECT(0xa6, gbc.readMem(0x911b));
        // CB A6 00DA
        gbc.setState(0xb843, 0x8b1e, 0x5f90, 0xe3e7, 0x69cf, 0xd4d9, 0x0, 0x0);
        gbc.writeMem(0xb843, { 0xcb, 0xa6 });
        gbc.writeMem(0xd4d9, { 0xb4 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x8b1e, gbc.sp());
        EXPECT(0xb845, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb843));
        EXPECT(0xa6, gbc.readMem(0xb844));
        EXPECT(0xa4, gbc.readMem(0xd4d9));
        // CB A6 00DB
        gbc.setState(0xceaf, 0x3a1f, 0x7ba0, 0xe31d, 0xf558, 0xc58c, 0x0, 0x0);
        gbc.writeMem(0xc58c, { 0xc });
        gbc.writeMem(0xceaf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x3a1f, gbc.sp());
        EXPECT(0xceb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xc58c));
        EXPECT(0xcb, gbc.readMem(0xceaf));
        EXPECT(0xa6, gbc.readMem(0xceb0));
        // CB A6 00DC
        gbc.setState(0xecd6, 0x7a7c, 0xc4d0, 0xeb62, 0x4cf9, 0xbe7c, 0x0, 0x1);
        gbc.writeMem(0xbe7c, { 0x1d });
        gbc.writeMem(0xecd6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x7a7c, gbc.sp());
        EXPECT(0xecd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xbe7c));
        EXPECT(0xcb, gbc.readMem(0xecd6));
        EXPECT(0xa6, gbc.readMem(0xecd7));
        // CB A6 00DD
        gbc.setState(0x6829, 0xc4da, 0x73a0, 0x62b9, 0x7b4f, 0xf75e, 0x0, 0x0);
        gbc.writeMem(0x6829, { 0xcb, 0xa6 });
        gbc.writeMem(0xf75e, { 0x1 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xc4da, gbc.sp());
        EXPECT(0x682b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xf75e));
        // CB A6 00DE
        gbc.setState(0x7159, 0xb088, 0xa650, 0xc082, 0x29db, 0x7cbf, 0x0, 0x0);
        gbc.writeMem(0x7159, { 0xcb, 0xa6 });
        gbc.writeMem(0x7cbf, { 0x1 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xb088, gbc.sp());
        EXPECT(0x715b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00E0
        gbc.setState(0x3e97, 0xfc22, 0x6590, 0x47a0, 0xa67a, 0x3688, 0x0, 0x0);
        gbc.writeMem(0x3688, { 0xeb });
        gbc.writeMem(0x3e97, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xfc22, gbc.sp());
        EXPECT(0x3e99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00E2
        gbc.setState(0xbe41, 0x1a0, 0xfb60, 0x310d, 0x7cf, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x6634, { 0x6d });
        gbc.writeMem(0xbe41, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x1a0, gbc.sp());
        EXPECT(0xbe43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe41));
        EXPECT(0xa6, gbc.readMem(0xbe42));
        // CB A6 00E3
        gbc.setState(0x868d, 0x278a, 0xee40, 0x3b5e, 0xb1aa, 0xcb13, 0x1, 0x1);
        gbc.writeMem(0x868d, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb13, { 0x96 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x278a, gbc.sp());
        EXPECT(0x868f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x868d));
        EXPECT(0xa6, gbc.readMem(0x868e));
        EXPECT(0x86, gbc.readMem(0xcb13));
        // CB A6 00E4
        gbc.setState(0x73f0, 0x52f7, 0x1a40, 0x87df, 0xdbf6, 0xd1da, 0x1, 0x1);
        gbc.writeMem(0x73f0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1da, { 0xe6 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x52f7, gbc.sp());
        EXPECT(0x73f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0xd1da));
        // CB A6 00E5
        gbc.setState(0x6702, 0x946d, 0x3e0, 0x9dc4, 0x280c, 0x2032, 0x0, 0x0);
        gbc.writeMem(0x2032, { 0x2f });
        gbc.writeMem(0x6702, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x946d, gbc.sp());
        EXPECT(0x6704, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00E6
        gbc.setState(0xe4ac, 0x276, 0x10c0, 0x950f, 0xfcdb, 0x8074, 0x1, 0x0);
        gbc.writeMem(0x8074, { 0xb0 });
        gbc.writeMem(0xe4ac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x276, gbc.sp());
        EXPECT(0xe4ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0x8074));
        EXPECT(0xcb, gbc.readMem(0xe4ac));
        EXPECT(0xa6, gbc.readMem(0xe4ad));
        // CB A6 00E7
        gbc.setState(0x5823, 0x31f3, 0xb750, 0x491a, 0xb6d1, 0xfed0, 0x0, 0x0);
        gbc.writeMem(0x5823, { 0xcb, 0xa6 });
        gbc.writeMem(0xfed0, { 0xea });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x31f3, gbc.sp());
        EXPECT(0x5825, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xea, gbc.readMem(0xfed0));
        // CB A6 00E9
        gbc.setState(0x66b, 0x95a4, 0xa550, 0x14e1, 0xb498, 0x8301, 0x0, 0x1);
        gbc.writeMem(0x66b, { 0xcb, 0xa6 });
        gbc.writeMem(0x8301, { 0x41 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x95a4, gbc.sp());
        EXPECT(0x66d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0x8301));
        // CB A6 00EA
        gbc.setState(0x5d9d, 0x9663, 0x6660, 0x4868, 0x4a77, 0xfc47, 0x0, 0x0);
        gbc.writeMem(0x5d9d, { 0xcb, 0xa6 });
        gbc.writeMem(0xfc47, { 0x37 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9663, gbc.sp());
        EXPECT(0x5d9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xfc47));
        // CB A6 00EB
        gbc.setState(0xad39, 0x3c5f, 0xa320, 0xd557, 0xccdd, 0xfec5, 0x0, 0x1);
        gbc.writeMem(0xad39, { 0xcb, 0xa6 });
        gbc.writeMem(0xfec5, { 0x64 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x3c5f, gbc.sp());
        EXPECT(0xad3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad39));
        EXPECT(0xa6, gbc.readMem(0xad3a));
        EXPECT(0x64, gbc.readMem(0xfec5));
        // CB A6 00EC
        gbc.setState(0xb823, 0xe9c7, 0x1b70, 0x6926, 0x9427, 0xcaa8, 0x1, 0x0);
        gbc.writeMem(0xb823, { 0xcb, 0xa6 });
        gbc.writeMem(0xcaa8, { 0xb9 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xe9c7, gbc.sp());
        EXPECT(0xb825, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb823));
        EXPECT(0xa6, gbc.readMem(0xb824));
        EXPECT(0xa9, gbc.readMem(0xcaa8));
        // CB A6 00ED
        gbc.setState(0x149b, 0xf150, 0x83a0, 0x8557, 0x16a5, 0x3736, 0x0, 0x0);
        gbc.writeMem(0x149b, { 0xcb, 0xa6 });
        gbc.writeMem(0x3736, { 0x84 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xf150, gbc.sp());
        EXPECT(0x149d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00EE
        gbc.setState(0x7bee, 0x9264, 0x3050, 0xecc5, 0xd15e, 0x949d, 0x1, 0x0);
        gbc.writeMem(0x7bee, { 0xcb, 0xa6 });
        gbc.writeMem(0x949d, { 0x72 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x9264, gbc.sp());
        EXPECT(0x7bf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0x949d));
        // CB A6 00F0
        gbc.setState(0x731, 0xd3fa, 0xe930, 0x7087, 0x9945, 0x3d63, 0x0, 0x0);
        gbc.writeMem(0x731, { 0xcb, 0xa6 });
        gbc.writeMem(0x3d63, { 0x61 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xd3fa, gbc.sp());
        EXPECT(0x733, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00F1
        gbc.setState(0x50d9, 0x3139, 0x3860, 0xbb6f, 0xbf48, 0x2d0c, 0x0, 0x0);
        gbc.writeMem(0x2d0c, { 0x47 });
        gbc.writeMem(0x50d9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x3139, gbc.sp());
        EXPECT(0x50db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 00F2
        gbc.setState(0xc770, 0x2354, 0x1860, 0xaca5, 0x11e9, 0x9703, 0x0, 0x1);
        gbc.writeMem(0x9703, { 0x64 });
        gbc.writeMem(0xc770, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2354, gbc.sp());
        EXPECT(0xc772, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x9703));
        EXPECT(0xcb, gbc.readMem(0xc770));
        EXPECT(0xa6, gbc.readMem(0xc771));
        // CB A6 00F5
        gbc.setState(0xe087, 0x499b, 0xafc0, 0x4a02, 0x26eb, 0x6da6, 0x0, 0x0);
        gbc.writeMem(0x6da6, { 0xe2 });
        gbc.writeMem(0xe087, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x499b, gbc.sp());
        EXPECT(0xe089, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe087));
        EXPECT(0xa6, gbc.readMem(0xe088));
        // CB A6 00F6
        gbc.setState(0x1b68, 0x78a6, 0xb7f0, 0xa59f, 0xf4ab, 0x3c16, 0x0, 0x0);
        gbc.writeMem(0x1b68, { 0xcb, 0xa6 });
        gbc.writeMem(0x3c16, { 0x6d });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x78a6, gbc.sp());
        EXPECT(0x1b6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 00F7
        gbc.setState(0xc0e2, 0x6fa0, 0x7650, 0x68e2, 0x52e5, 0xbe32, 0x0, 0x1);
        gbc.writeMem(0xbe32, { 0x9e });
        gbc.writeMem(0xc0e2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x6fa0, gbc.sp());
        EXPECT(0xc0e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0xbe32));
        EXPECT(0xcb, gbc.readMem(0xc0e2));
        EXPECT(0xa6, gbc.readMem(0xc0e3));
        // CB A6 00FA
        gbc.setState(0xc297, 0x5ecd, 0x5910, 0x4645, 0x5f2b, 0x14b, 0x0, 0x1);
        gbc.writeMem(0x14b, { 0xc9 });
        gbc.writeMem(0xc297, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x5ecd, gbc.sp());
        EXPECT(0xc299, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc297));
        EXPECT(0xa6, gbc.readMem(0xc298));
        // CB A6 00FC
        gbc.setState(0x926b, 0x5d7a, 0x35c0, 0x5882, 0xf83, 0xc3e4, 0x1, 0x1);
        gbc.writeMem(0x926b, { 0xcb, 0xa6 });
        gbc.writeMem(0xc3e4, { 0xbb });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x5d7a, gbc.sp());
        EXPECT(0x926d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x926b));
        EXPECT(0xa6, gbc.readMem(0x926c));
        EXPECT(0xab, gbc.readMem(0xc3e4));
        // CB A6 00FD
        gbc.setState(0x5702, 0xdfbf, 0x9500, 0xf0d6, 0x8554, 0x5f73, 0x0, 0x1);
        gbc.writeMem(0x5702, { 0xcb, 0xa6 });
        gbc.writeMem(0x5f73, { 0x68 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xdfbf, gbc.sp());
        EXPECT(0x5704, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0102
        gbc.setState(0xac79, 0x8055, 0xc40, 0xaed8, 0x9034, 0x680b, 0x1, 0x0);
        gbc.writeMem(0x680b, { 0x2c });
        gbc.writeMem(0xac79, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8055, gbc.sp());
        EXPECT(0xac7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac79));
        EXPECT(0xa6, gbc.readMem(0xac7a));
        // CB A6 0103
        gbc.setState(0xbc4, 0xb9eb, 0x5f10, 0x68ff, 0x6a63, 0xa5c1, 0x0, 0x0);
        gbc.writeMem(0xbc4, { 0xcb, 0xa6 });
        gbc.writeMem(0xa5c1, { 0x16 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xb9eb, gbc.sp());
        EXPECT(0xbc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0xa5c1));
        // CB A6 0104
        gbc.setState(0xaf7e, 0x16c8, 0xc1b0, 0xe4e4, 0xcff4, 0x1a3a, 0x0, 0x1);
        gbc.writeMem(0x1a3a, { 0xc6 });
        gbc.writeMem(0xaf7e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x16c8, gbc.sp());
        EXPECT(0xaf80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf7e));
        EXPECT(0xa6, gbc.readMem(0xaf7f));
        // CB A6 0105
        gbc.setState(0x7b30, 0x2215, 0xe560, 0x2ad9, 0xb86f, 0x1bc4, 0x0, 0x0);
        gbc.writeMem(0x1bc4, { 0xc });
        gbc.writeMem(0x7b30, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2215, gbc.sp());
        EXPECT(0x7b32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0106
        gbc.setState(0xb7cf, 0x14a5, 0x9d30, 0x5e1d, 0xdac6, 0x9c9b, 0x1, 0x0);
        gbc.writeMem(0x9c9b, { 0xa5 });
        gbc.writeMem(0xb7cf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x14a5, gbc.sp());
        EXPECT(0xb7d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0x9c9b));
        EXPECT(0xcb, gbc.readMem(0xb7cf));
        EXPECT(0xa6, gbc.readMem(0xb7d0));
        // CB A6 0107
        gbc.setState(0xd250, 0xa38e, 0xf530, 0x5f6d, 0xf15b, 0xa5f6, 0x0, 0x0);
        gbc.writeMem(0xa5f6, { 0x9 });
        gbc.writeMem(0xd250, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xa38e, gbc.sp());
        EXPECT(0xd252, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0xa5f6));
        EXPECT(0xcb, gbc.readMem(0xd250));
        EXPECT(0xa6, gbc.readMem(0xd251));
        // CB A6 0108
        gbc.setState(0xba87, 0x49ef, 0xc2d0, 0xbf20, 0x6257, 0x399b, 0x0, 0x1);
        gbc.writeMem(0x399b, { 0x62 });
        gbc.writeMem(0xba87, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x49ef, gbc.sp());
        EXPECT(0xba89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba87));
        EXPECT(0xa6, gbc.readMem(0xba88));
        // CB A6 0109
        gbc.setState(0x74e1, 0x64a8, 0x8a40, 0x40cc, 0xfe60, 0x9c41, 0x1, 0x1);
        gbc.writeMem(0x74e1, { 0xcb, 0xa6 });
        gbc.writeMem(0x9c41, { 0xd8 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x64a8, gbc.sp());
        EXPECT(0x74e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc8, gbc.readMem(0x9c41));
        // CB A6 010A
        gbc.setState(0xcfd0, 0x5d11, 0xc570, 0x791a, 0xb1de, 0xd514, 0x1, 0x0);
        gbc.writeMem(0xcfd0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd514, { 0xd0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x5d11, gbc.sp());
        EXPECT(0xcfd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfd0));
        EXPECT(0xa6, gbc.readMem(0xcfd1));
        EXPECT(0xc0, gbc.readMem(0xd514));
        // CB A6 010B
        gbc.setState(0x4219, 0x4e68, 0xbdc0, 0xfe99, 0xcd36, 0xd90b, 0x1, 0x1);
        gbc.writeMem(0x4219, { 0xcb, 0xa6 });
        gbc.writeMem(0xd90b, { 0xe6 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x4e68, gbc.sp());
        EXPECT(0x421b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0xd90b));
        // CB A6 010F
        gbc.setState(0x4572, 0x9b9f, 0xc20, 0x9946, 0xa909, 0xc101, 0x1, 0x0);
        gbc.writeMem(0x4572, { 0xcb, 0xa6 });
        gbc.writeMem(0xc101, { 0x79 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x9b9f, gbc.sp());
        EXPECT(0x4574, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xc101));
        // CB A6 0110
        gbc.setState(0x4b08, 0xf651, 0x55c0, 0xa218, 0xc0be, 0xb942, 0x0, 0x1);
        gbc.writeMem(0x4b08, { 0xcb, 0xa6 });
        gbc.writeMem(0xb942, { 0x2 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xf651, gbc.sp());
        EXPECT(0x4b0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xb942));
        // CB A6 0111
        gbc.setState(0x2db9, 0x24cb, 0x63e0, 0x91d0, 0x5a50, 0x7c49, 0x1, 0x0);
        gbc.writeMem(0x2db9, { 0xcb, 0xa6 });
        gbc.writeMem(0x7c49, { 0x8f });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x24cb, gbc.sp());
        EXPECT(0x2dbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0113
        gbc.setState(0xc323, 0xcff7, 0x3ec0, 0xb9ec, 0x724f, 0x8653, 0x1, 0x0);
        gbc.writeMem(0x8653, { 0xc6 });
        gbc.writeMem(0xc323, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xcff7, gbc.sp());
        EXPECT(0xc325, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc6, gbc.readMem(0x8653));
        EXPECT(0xcb, gbc.readMem(0xc323));
        EXPECT(0xa6, gbc.readMem(0xc324));
        // CB A6 0114
        gbc.setState(0x6655, 0x4aee, 0x9fa0, 0xdd8a, 0x4041, 0x5abb, 0x0, 0x0);
        gbc.writeMem(0x5abb, { 0x25 });
        gbc.writeMem(0x6655, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4aee, gbc.sp());
        EXPECT(0x6657, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0115
        gbc.setState(0xeb56, 0xda, 0x1480, 0x5e99, 0xc4bb, 0xc905, 0x1, 0x0);
        gbc.writeMem(0xc905, { 0xcf });
        gbc.writeMem(0xeb56, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xda, gbc.sp());
        EXPECT(0xeb58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0xc905));
        EXPECT(0xcb, gbc.readMem(0xeb56));
        EXPECT(0xa6, gbc.readMem(0xeb57));
        // CB A6 0116
        gbc.setState(0x8c2e, 0x9c3c, 0x61f0, 0xf49e, 0x1c9b, 0xfa2b, 0x1, 0x1);
        gbc.writeMem(0x8c2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa2b, { 0x3d });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x9c3c, gbc.sp());
        EXPECT(0x8c30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c2e));
        EXPECT(0xa6, gbc.readMem(0x8c2f));
        EXPECT(0x2d, gbc.readMem(0xfa2b));
        // CB A6 0117
        gbc.setState(0x5574, 0x3805, 0x8340, 0x603d, 0x8dc7, 0xa2bf, 0x1, 0x0);
        gbc.writeMem(0x5574, { 0xcb, 0xa6 });
        gbc.writeMem(0xa2bf, { 0x8d });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x3805, gbc.sp());
        EXPECT(0x5576, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xa2bf));
        // CB A6 0118
        gbc.setState(0xb4e5, 0x79ba, 0x9d90, 0x6df, 0x7123, 0xe067, 0x1, 0x0);
        gbc.writeMem(0xb4e5, { 0xcb, 0xa6 });
        gbc.writeMem(0xe067, { 0x7a });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x79ba, gbc.sp());
        EXPECT(0xb4e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4e5));
        EXPECT(0xa6, gbc.readMem(0xb4e6));
        EXPECT(0x6a, gbc.readMem(0xe067));
        // CB A6 011A
        gbc.setState(0xe221, 0x2f1b, 0xf490, 0x564d, 0xa635, 0xcaf3, 0x0, 0x0);
        gbc.writeMem(0xcaf3, { 0x71 });
        gbc.writeMem(0xe221, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x2f1b, gbc.sp());
        EXPECT(0xe223, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x61, gbc.readMem(0xcaf3));
        EXPECT(0xcb, gbc.readMem(0xe221));
        EXPECT(0xa6, gbc.readMem(0xe222));
        // CB A6 011C
        gbc.setState(0xefc7, 0x54b2, 0xaa30, 0x127c, 0x2354, 0xc756, 0x0, 0x0);
        gbc.writeMem(0xc756, { 0x96 });
        gbc.writeMem(0xefc7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x54b2, gbc.sp());
        EXPECT(0xefc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0xc756));
        EXPECT(0xcb, gbc.readMem(0xefc7));
        EXPECT(0xa6, gbc.readMem(0xefc8));
        // CB A6 011F
        gbc.setState(0xd668, 0x6fc6, 0x2260, 0xaf91, 0x7f43, 0x2b49, 0x0, 0x0);
        gbc.writeMem(0x2b49, { 0xcf });
        gbc.writeMem(0xd668, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x6fc6, gbc.sp());
        EXPECT(0xd66a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd668));
        EXPECT(0xa6, gbc.readMem(0xd669));
        // CB A6 0120
        gbc.setState(0xff5, 0x7721, 0xfa50, 0x5261, 0x1a86, 0xd1f7, 0x1, 0x1);
        gbc.writeMem(0xff5, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1f7, { 0x39 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x7721, gbc.sp());
        EXPECT(0xff7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xd1f7));
        // CB A6 0121
        gbc.setState(0x9936, 0xe896, 0x9650, 0x2b61, 0x21a7, 0x83ae, 0x0, 0x0);
        gbc.writeMem(0x83ae, { 0x8d });
        gbc.writeMem(0x9936, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xe896, gbc.sp());
        EXPECT(0x9938, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0x83ae));
        EXPECT(0xcb, gbc.readMem(0x9936));
        EXPECT(0xa6, gbc.readMem(0x9937));
        // CB A6 0122
        gbc.setState(0x10b9, 0x12c9, 0x4e80, 0x2f95, 0x31fc, 0xae06, 0x1, 0x1);
        gbc.writeMem(0x10b9, { 0xcb, 0xa6 });
        gbc.writeMem(0xae06, { 0x13 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x12c9, gbc.sp());
        EXPECT(0x10bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3, gbc.readMem(0xae06));
        // CB A6 0123
        gbc.setState(0xdab2, 0xea33, 0x65f0, 0x1698, 0xbd6b, 0xc598, 0x1, 0x1);
        gbc.writeMem(0xc598, { 0xdb });
        gbc.writeMem(0xdab2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xea33, gbc.sp());
        EXPECT(0xdab4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc598));
        EXPECT(0xcb, gbc.readMem(0xdab2));
        EXPECT(0xa6, gbc.readMem(0xdab3));
        // CB A6 0125
        gbc.setState(0xdb20, 0x6d2b, 0xb7a0, 0xcefd, 0xa43e, 0xc220, 0x1, 0x0);
        gbc.writeMem(0xc220, { 0x8a });
        gbc.writeMem(0xdb20, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x6d2b, gbc.sp());
        EXPECT(0xdb22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8a, gbc.readMem(0xc220));
        EXPECT(0xcb, gbc.readMem(0xdb20));
        EXPECT(0xa6, gbc.readMem(0xdb21));
        // CB A6 0126
        gbc.setState(0x717e, 0x89eb, 0x8c0, 0xbcf5, 0x5ddd, 0xe404, 0x1, 0x1);
        gbc.writeMem(0x717e, { 0xcb, 0xa6 });
        gbc.writeMem(0xe404, { 0x9d });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x89eb, gbc.sp());
        EXPECT(0x7180, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xe404));
        // CB A6 0127
        gbc.setState(0xab01, 0x7a0c, 0xe440, 0x4750, 0xa3b1, 0x94b3, 0x0, 0x0);
        gbc.writeMem(0x94b3, { 0xf3 });
        gbc.writeMem(0xab01, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x7a0c, gbc.sp());
        EXPECT(0xab03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0x94b3));
        EXPECT(0xcb, gbc.readMem(0xab01));
        EXPECT(0xa6, gbc.readMem(0xab02));
        // CB A6 0129
        gbc.setState(0x5f42, 0xd4fa, 0x4bc0, 0x914d, 0xe3f8, 0xbe4b, 0x1, 0x0);
        gbc.writeMem(0x5f42, { 0xcb, 0xa6 });
        gbc.writeMem(0xbe4b, { 0xfa });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xd4fa, gbc.sp());
        EXPECT(0x5f44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xea, gbc.readMem(0xbe4b));
        // CB A6 012A
        gbc.setState(0x5a9c, 0xe0a0, 0x9250, 0x60e1, 0x290a, 0x6469, 0x0, 0x0);
        gbc.writeMem(0x5a9c, { 0xcb, 0xa6 });
        gbc.writeMem(0x6469, { 0x84 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe0a0, gbc.sp());
        EXPECT(0x5a9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 012B
        gbc.setState(0x8f89, 0x664f, 0x9b20, 0x808b, 0x9374, 0xca2f, 0x1, 0x1);
        gbc.writeMem(0x8f89, { 0xcb, 0xa6 });
        gbc.writeMem(0xca2f, { 0x8a });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x664f, gbc.sp());
        EXPECT(0x8f8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f89));
        EXPECT(0xa6, gbc.readMem(0x8f8a));
        EXPECT(0x8a, gbc.readMem(0xca2f));
        // CB A6 012D
        gbc.setState(0x13a5, 0x8d80, 0x78b0, 0x54f0, 0xe9eb, 0x8f44, 0x1, 0x0);
        gbc.writeMem(0x13a5, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f44, { 0x74 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x8d80, gbc.sp());
        EXPECT(0x13a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x8f44));
        // CB A6 012E
        gbc.setState(0x7389, 0x64f, 0x9190, 0x7052, 0xd633, 0x9d59, 0x1, 0x1);
        gbc.writeMem(0x7389, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d59, { 0xa5 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x64f, gbc.sp());
        EXPECT(0x738b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0x9d59));
        // CB A6 012F
        gbc.setState(0x32b3, 0xa028, 0x5310, 0x6063, 0xd90d, 0x19c5, 0x0, 0x1);
        gbc.writeMem(0x19c5, { 0xc });
        gbc.writeMem(0x32b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xa028, gbc.sp());
        EXPECT(0x32b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0131
        gbc.setState(0xe807, 0x84f8, 0x47a0, 0x6e7b, 0x53f, 0x84d4, 0x1, 0x1);
        gbc.writeMem(0x84d4, { 0x7d });
        gbc.writeMem(0xe807, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x84f8, gbc.sp());
        EXPECT(0xe809, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0x84d4));
        EXPECT(0xcb, gbc.readMem(0xe807));
        EXPECT(0xa6, gbc.readMem(0xe808));
        // CB A6 0133
        gbc.setState(0xe538, 0x23ac, 0x91a0, 0xb47, 0x3541, 0xc3b6, 0x0, 0x1);
        gbc.writeMem(0xc3b6, { 0x1d });
        gbc.writeMem(0xe538, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x23ac, gbc.sp());
        EXPECT(0xe53a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xc3b6));
        EXPECT(0xcb, gbc.readMem(0xe538));
        EXPECT(0xa6, gbc.readMem(0xe539));
        // CB A6 0135
        gbc.setState(0x18e7, 0xca7f, 0xec90, 0xfaa9, 0x97f9, 0x7565, 0x0, 0x1);
        gbc.writeMem(0x18e7, { 0xcb, 0xa6 });
        gbc.writeMem(0x7565, { 0x43 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xca7f, gbc.sp());
        EXPECT(0x18e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0136
        gbc.setState(0x2d29, 0xad27, 0x1a30, 0xb42, 0xd100, 0x83bb, 0x0, 0x0);
        gbc.writeMem(0x2d29, { 0xcb, 0xa6 });
        gbc.writeMem(0x83bb, { 0xd9 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xad27, gbc.sp());
        EXPECT(0x2d2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc9, gbc.readMem(0x83bb));
        // CB A6 0137
        gbc.setState(0x78c1, 0x4641, 0x3c30, 0xcdcc, 0xf51f, 0xbfe1, 0x1, 0x0);
        gbc.writeMem(0x78c1, { 0xcb, 0xa6 });
        gbc.writeMem(0xbfe1, { 0xdd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x4641, gbc.sp());
        EXPECT(0x78c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcd, gbc.readMem(0xbfe1));
        // CB A6 0138
        gbc.setState(0x105, 0x4dd1, 0x5c40, 0xef87, 0x9fc0, 0x224c, 0x1, 0x1);
        gbc.writeMem(0x105, { 0xcb, 0xa6 });
        gbc.writeMem(0x224c, { 0x87 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x4dd1, gbc.sp());
        EXPECT(0x107, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 013A
        gbc.setState(0x12b7, 0xbae2, 0x5c50, 0xbf13, 0x7105, 0x5b8e, 0x1, 0x1);
        gbc.writeMem(0x12b7, { 0xcb, 0xa6 });
        gbc.writeMem(0x5b8e, { 0xd });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xbae2, gbc.sp());
        EXPECT(0x12b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 013B
        gbc.setState(0xbd57, 0x349d, 0x8260, 0xcc73, 0xc522, 0xfaa6, 0x0, 0x0);
        gbc.writeMem(0xbd57, { 0xcb, 0xa6 });
        gbc.writeMem(0xfaa6, { 0x5 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x349d, gbc.sp());
        EXPECT(0xbd59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd57));
        EXPECT(0xa6, gbc.readMem(0xbd58));
        EXPECT(0x5, gbc.readMem(0xfaa6));
        // CB A6 013C
        gbc.setState(0xf95, 0x8393, 0xa2c0, 0x69d1, 0x9464, 0x4d17, 0x0, 0x1);
        gbc.writeMem(0xf95, { 0xcb, 0xa6 });
        gbc.writeMem(0x4d17, { 0xaa });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x8393, gbc.sp());
        EXPECT(0xf97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 013D
        gbc.setState(0x29cd, 0x8454, 0xbdc0, 0x1324, 0x90ec, 0xc57d, 0x1, 0x0);
        gbc.writeMem(0x29cd, { 0xcb, 0xa6 });
        gbc.writeMem(0xc57d, { 0x20 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x8454, gbc.sp());
        EXPECT(0x29cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0xc57d));
        // CB A6 013F
        gbc.setState(0xb23b, 0x5cc6, 0xc9e0, 0xb37f, 0xfb40, 0x3f91, 0x0, 0x1);
        gbc.writeMem(0x3f91, { 0x6e });
        gbc.writeMem(0xb23b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x5cc6, gbc.sp());
        EXPECT(0xb23d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb23b));
        EXPECT(0xa6, gbc.readMem(0xb23c));
        // CB A6 0140
        gbc.setState(0xbaa1, 0x33fb, 0x8cc0, 0x4f62, 0x290f, 0x411f, 0x1, 0x1);
        gbc.writeMem(0x411f, { 0x80 });
        gbc.writeMem(0xbaa1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x33fb, gbc.sp());
        EXPECT(0xbaa3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaa1));
        EXPECT(0xa6, gbc.readMem(0xbaa2));
        // CB A6 0141
        gbc.setState(0x8f0a, 0x7034, 0x530, 0x5a12, 0xbbf1, 0x11e1, 0x1, 0x1);
        gbc.writeMem(0x11e1, { 0x6d });
        gbc.writeMem(0x8f0a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x7034, gbc.sp());
        EXPECT(0x8f0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0a));
        EXPECT(0xa6, gbc.readMem(0x8f0b));
        // CB A6 0143
        gbc.setState(0xbdc2, 0x54fd, 0x3790, 0x5c7f, 0x8b2e, 0x9593, 0x0, 0x1);
        gbc.writeMem(0x9593, { 0xda });
        gbc.writeMem(0xbdc2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x54fd, gbc.sp());
        EXPECT(0xbdc4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0x9593));
        EXPECT(0xcb, gbc.readMem(0xbdc2));
        EXPECT(0xa6, gbc.readMem(0xbdc3));
        // CB A6 0146
        gbc.setState(0x61b6, 0x6c55, 0x2d70, 0x6f3a, 0x8ac4, 0x3323, 0x1, 0x1);
        gbc.writeMem(0x3323, { 0xa2 });
        gbc.writeMem(0x61b6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x6c55, gbc.sp());
        EXPECT(0x61b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0148
        gbc.setState(0x95f1, 0xee80, 0xcbc0, 0xe572, 0x51f3, 0xa1e5, 0x1, 0x1);
        gbc.writeMem(0x95f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xa1e5, { 0x65 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xee80, gbc.sp());
        EXPECT(0x95f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95f1));
        EXPECT(0xa6, gbc.readMem(0x95f2));
        EXPECT(0x65, gbc.readMem(0xa1e5));
        // CB A6 014A
        gbc.setState(0xabad, 0x961b, 0x5db0, 0xee4e, 0xeffa, 0xc007, 0x1, 0x1);
        gbc.writeMem(0xabad, { 0xcb, 0xa6 });
        gbc.writeMem(0xc007, { 0x9e });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x961b, gbc.sp());
        EXPECT(0xabaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabad));
        EXPECT(0xa6, gbc.readMem(0xabae));
        EXPECT(0x8e, gbc.readMem(0xc007));
        // CB A6 014B
        gbc.setState(0x9c4, 0xd5ce, 0x5b30, 0x61b, 0xde6d, 0xeae6, 0x0, 0x0);
        gbc.writeMem(0x9c4, { 0xcb, 0xa6 });
        gbc.writeMem(0xeae6, { 0x47 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xd5ce, gbc.sp());
        EXPECT(0x9c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x47, gbc.readMem(0xeae6));
        // CB A6 014C
        gbc.setState(0x7ec0, 0xf31f, 0x6200, 0x33e4, 0xe6b1, 0xa29c, 0x1, 0x1);
        gbc.writeMem(0x7ec0, { 0xcb, 0xa6 });
        gbc.writeMem(0xa29c, { 0x6a });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xf31f, gbc.sp());
        EXPECT(0x7ec2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xa29c));
        // CB A6 014D
        gbc.setState(0x6f09, 0x333, 0xdf0, 0xa02d, 0x496d, 0x55c7, 0x1, 0x1);
        gbc.writeMem(0x55c7, { 0xc3 });
        gbc.writeMem(0x6f09, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x333, gbc.sp());
        EXPECT(0x6f0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 014F
        gbc.setState(0x9684, 0x7532, 0x4fa0, 0xbfaf, 0xdbcd, 0xe5ee, 0x1, 0x1);
        gbc.writeMem(0x9684, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5ee, { 0x4f });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x7532, gbc.sp());
        EXPECT(0x9686, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9684));
        EXPECT(0xa6, gbc.readMem(0x9685));
        EXPECT(0x4f, gbc.readMem(0xe5ee));
        // CB A6 0150
        gbc.setState(0x655b, 0xaf31, 0x4f80, 0x9bd2, 0x766b, 0x621, 0x1, 0x1);
        gbc.writeMem(0x621, { 0x63 });
        gbc.writeMem(0x655b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xaf31, gbc.sp());
        EXPECT(0x655d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0153
        gbc.setState(0xdf0c, 0x46b, 0xd2f0, 0x5edf, 0x2ecc, 0xa6fa, 0x0, 0x0);
        gbc.writeMem(0xa6fa, { 0x53 });
        gbc.writeMem(0xdf0c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x46b, gbc.sp());
        EXPECT(0xdf0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xa6fa));
        EXPECT(0xcb, gbc.readMem(0xdf0c));
        EXPECT(0xa6, gbc.readMem(0xdf0d));
        // CB A6 0154
        gbc.setState(0x64c2, 0xfa93, 0x3d40, 0x5034, 0x83fe, 0xc633, 0x0, 0x0);
        gbc.writeMem(0x64c2, { 0xcb, 0xa6 });
        gbc.writeMem(0xc633, { 0x63 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xfa93, gbc.sp());
        EXPECT(0x64c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xc633));
        // CB A6 0155
        gbc.setState(0x6bda, 0xba7e, 0xddd0, 0x79cc, 0xe745, 0x9f0a, 0x0, 0x0);
        gbc.writeMem(0x6bda, { 0xcb, 0xa6 });
        gbc.writeMem(0x9f0a, { 0xd5 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xba7e, gbc.sp());
        EXPECT(0x6bdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0x9f0a));
        // CB A6 0156
        gbc.setState(0x8040, 0x7a8a, 0xbc70, 0x19fa, 0xd755, 0xe15f, 0x1, 0x1);
        gbc.writeMem(0x8040, { 0xcb, 0xa6 });
        gbc.writeMem(0xe15f, { 0x66 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x7a8a, gbc.sp());
        EXPECT(0x8042, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8040));
        EXPECT(0xa6, gbc.readMem(0x8041));
        EXPECT(0x66, gbc.readMem(0xe15f));
        // CB A6 0157
        gbc.setState(0xcb6b, 0x1467, 0xdb30, 0x1ee0, 0xb823, 0xffb8, 0x0, 0x0);
        gbc.writeMem(0xcb6b, { 0xcb, 0xa6 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x1467, gbc.sp());
        EXPECT(0xcb6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb6b));
        EXPECT(0xa6, gbc.readMem(0xcb6c));
        EXPECT(0x0, gbc.readMem(0xffb8));
        // CB A6 0158
        gbc.setState(0x58e4, 0x5dee, 0xc670, 0x1f00, 0xac89, 0xeb2d, 0x1, 0x0);
        gbc.writeMem(0x58e4, { 0xcb, 0xa6 });
        gbc.writeMem(0xeb2d, { 0x99 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x5dee, gbc.sp());
        EXPECT(0x58e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x89, gbc.readMem(0xeb2d));
        // CB A6 0159
        gbc.setState(0xc8fb, 0xbe40, 0x55a0, 0x64bf, 0xb7aa, 0x309d, 0x1, 0x1);
        gbc.writeMem(0x309d, { 0x2f });
        gbc.writeMem(0xc8fb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xbe40, gbc.sp());
        EXPECT(0xc8fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8fb));
        EXPECT(0xa6, gbc.readMem(0xc8fc));
        // CB A6 015A
        gbc.setState(0x8e0d, 0x97ba, 0xa5d0, 0xc4d1, 0xf308, 0x8421, 0x1, 0x1);
        gbc.writeMem(0x8421, { 0x8b });
        gbc.writeMem(0x8e0d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x97ba, gbc.sp());
        EXPECT(0x8e0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0x8421));
        EXPECT(0xcb, gbc.readMem(0x8e0d));
        EXPECT(0xa6, gbc.readMem(0x8e0e));
        // CB A6 015B
        gbc.setState(0xb127, 0x4f39, 0xdce0, 0x8bf3, 0xbd72, 0x59d9, 0x1, 0x0);
        gbc.writeMem(0x59d9, { 0xe0 });
        gbc.writeMem(0xb127, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x4f39, gbc.sp());
        EXPECT(0xb129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb127));
        EXPECT(0xa6, gbc.readMem(0xb128));
        // CB A6 015D
        gbc.setState(0xcdab, 0x9419, 0xb450, 0xcd9a, 0x2d91, 0xde48, 0x1, 0x0);
        gbc.writeMem(0xcdab, { 0xcb, 0xa6 });
        gbc.writeMem(0xde48, { 0x8b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x9419, gbc.sp());
        EXPECT(0xcdad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdab));
        EXPECT(0xa6, gbc.readMem(0xcdac));
        EXPECT(0x8b, gbc.readMem(0xde48));
        // CB A6 015E
        gbc.setState(0xc287, 0x8235, 0xbf70, 0x9497, 0xfa84, 0xb5a6, 0x1, 0x1);
        gbc.writeMem(0xb5a6, { 0x33 });
        gbc.writeMem(0xc287, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x8235, gbc.sp());
        EXPECT(0xc289, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0xb5a6));
        EXPECT(0xcb, gbc.readMem(0xc287));
        EXPECT(0xa6, gbc.readMem(0xc288));
        // CB A6 0160
        gbc.setState(0x621a, 0x6c2c, 0xb090, 0x2ed2, 0x99aa, 0xbbfe, 0x1, 0x0);
        gbc.writeMem(0x621a, { 0xcb, 0xa6 });
        gbc.writeMem(0xbbfe, { 0x82 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x6c2c, gbc.sp());
        EXPECT(0x621c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x82, gbc.readMem(0xbbfe));
        // CB A6 0161
        gbc.setState(0xc6fd, 0xd3fc, 0xe2c0, 0xbd64, 0x907e, 0xae7f, 0x0, 0x0);
        gbc.writeMem(0xae7f, { 0x54 });
        gbc.writeMem(0xc6fd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xd3fc, gbc.sp());
        EXPECT(0xc6ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xae7f));
        EXPECT(0xcb, gbc.readMem(0xc6fd));
        EXPECT(0xa6, gbc.readMem(0xc6fe));
        // CB A6 0162
        gbc.setState(0x388a, 0xa0a1, 0x4910, 0xd640, 0x17a6, 0xb11b, 0x1, 0x0);
        gbc.writeMem(0x388a, { 0xcb, 0xa6 });
        gbc.writeMem(0xb11b, { 0x95 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xa0a1, gbc.sp());
        EXPECT(0x388c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x85, gbc.readMem(0xb11b));
        // CB A6 0164
        gbc.setState(0x9c2a, 0x54a8, 0xe070, 0x2bdd, 0x6e7a, 0xf30d, 0x0, 0x1);
        gbc.writeMem(0x9c2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf30d, { 0x91 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x54a8, gbc.sp());
        EXPECT(0x9c2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c2a));
        EXPECT(0xa6, gbc.readMem(0x9c2b));
        EXPECT(0x81, gbc.readMem(0xf30d));
        // CB A6 0165
        gbc.setState(0xd6ad, 0x7c48, 0x14e0, 0xc61d, 0x4438, 0x462a, 0x0, 0x0);
        gbc.writeMem(0x462a, { 0x26 });
        gbc.writeMem(0xd6ad, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x7c48, gbc.sp());
        EXPECT(0xd6af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ad));
        EXPECT(0xa6, gbc.readMem(0xd6ae));
        // CB A6 0168
        gbc.setState(0x4e7f, 0xe8a4, 0x5930, 0x5e2c, 0x4381, 0xe49, 0x1, 0x1);
        gbc.writeMem(0xe49, { 0x2c });
        gbc.writeMem(0x4e7f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xe8a4, gbc.sp());
        EXPECT(0x4e81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0169
        gbc.setState(0xc740, 0x90ca, 0x6de0, 0x3804, 0x4b29, 0x8f31, 0x0, 0x1);
        gbc.writeMem(0x8f31, { 0xcf });
        gbc.writeMem(0xc740, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x90ca, gbc.sp());
        EXPECT(0xc742, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0x8f31));
        EXPECT(0xcb, gbc.readMem(0xc740));
        EXPECT(0xa6, gbc.readMem(0xc741));
        // CB A6 016A
        gbc.setState(0x66fd, 0xcd9, 0x3a00, 0xd9fb, 0x800e, 0xde8c, 0x1, 0x1);
        gbc.writeMem(0x66fd, { 0xcb, 0xa6 });
        gbc.writeMem(0xde8c, { 0x97 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xcd9, gbc.sp());
        EXPECT(0x66ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x87, gbc.readMem(0xde8c));
        // CB A6 016B
        gbc.setState(0x682c, 0x57e1, 0x9400, 0x5ae4, 0xe9f7, 0x9b21, 0x1, 0x1);
        gbc.writeMem(0x682c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9b21, { 0xcc });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x57e1, gbc.sp());
        EXPECT(0x682e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0x9b21));
        // CB A6 016C
        gbc.setState(0x5588, 0xe334, 0x95e0, 0xb4a3, 0x981b, 0xbda6, 0x0, 0x0);
        gbc.writeMem(0x5588, { 0xcb, 0xa6 });
        gbc.writeMem(0xbda6, { 0x24 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xe334, gbc.sp());
        EXPECT(0x558a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0xbda6));
        // CB A6 016D
        gbc.setState(0x98c1, 0x378b, 0x2510, 0x5685, 0x55ab, 0x9846, 0x0, 0x1);
        gbc.writeMem(0x9846, { 0x90 });
        gbc.writeMem(0x98c1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x378b, gbc.sp());
        EXPECT(0x98c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0x9846));
        EXPECT(0xcb, gbc.readMem(0x98c1));
        EXPECT(0xa6, gbc.readMem(0x98c2));
        // CB A6 016E
        gbc.setState(0xa5ee, 0x72b0, 0xd0f0, 0x1f64, 0xb37f, 0x3d50, 0x1, 0x0);
        gbc.writeMem(0x3d50, { 0x64 });
        gbc.writeMem(0xa5ee, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x72b0, gbc.sp());
        EXPECT(0xa5f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5ee));
        EXPECT(0xa6, gbc.readMem(0xa5ef));
        // CB A6 0170
        gbc.setState(0x6a7e, 0x6c8d, 0xef60, 0x902b, 0x36d0, 0x844, 0x0, 0x0);
        gbc.writeMem(0x844, { 0x66 });
        gbc.writeMem(0x6a7e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x6c8d, gbc.sp());
        EXPECT(0x6a80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0171
        gbc.setState(0x5e8c, 0x19e6, 0xe840, 0x528f, 0x22c8, 0xfb00, 0x1, 0x0);
        gbc.writeMem(0x5e8c, { 0xcb, 0xa6 });
        gbc.writeMem(0xfb00, { 0x42 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x19e6, gbc.sp());
        EXPECT(0x5e8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0xfb00));
        // CB A6 0172
        gbc.setState(0x59cb, 0x32bf, 0xe5d0, 0x3577, 0xd49b, 0x84cf, 0x1, 0x0);
        gbc.writeMem(0x59cb, { 0xcb, 0xa6 });
        gbc.writeMem(0x84cf, { 0xa5 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x32bf, gbc.sp());
        EXPECT(0x59cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0x84cf));
        // CB A6 0173
        gbc.setState(0x6c5d, 0xd618, 0x7ff0, 0xba85, 0x4a8c, 0xfdc1, 0x1, 0x0);
        gbc.writeMem(0x6c5d, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdc1, { 0xe8 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xd618, gbc.sp());
        EXPECT(0x6c5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0xfdc1));
        // CB A6 0175
        gbc.setState(0x8685, 0xdc1, 0x350, 0x8e78, 0x7e5e, 0xa163, 0x0, 0x1);
        gbc.writeMem(0x8685, { 0xcb, 0xa6 });
        gbc.writeMem(0xa163, { 0x87 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xdc1, gbc.sp());
        EXPECT(0x8687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8685));
        EXPECT(0xa6, gbc.readMem(0x8686));
        EXPECT(0x87, gbc.readMem(0xa163));
        // CB A6 0176
        gbc.setState(0x9a82, 0xbfa5, 0x20d0, 0xae01, 0x8f6c, 0xac7a, 0x0, 0x1);
        gbc.writeMem(0x9a82, { 0xcb, 0xa6 });
        gbc.writeMem(0xac7a, { 0xad });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xbfa5, gbc.sp());
        EXPECT(0x9a84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a82));
        EXPECT(0xa6, gbc.readMem(0x9a83));
        EXPECT(0xad, gbc.readMem(0xac7a));
        // CB A6 0177
        gbc.setState(0x4e3e, 0xc20a, 0x9480, 0xad2c, 0xaa3e, 0x39ff, 0x0, 0x1);
        gbc.writeMem(0x39ff, { 0x0 });
        gbc.writeMem(0x4e3e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xc20a, gbc.sp());
        EXPECT(0x4e40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0178
        gbc.setState(0x283e, 0xa569, 0xc0a0, 0x8416, 0x74ab, 0x943d, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xcb, 0xa6 });
        gbc.writeMem(0x943d, { 0x26 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xa569, gbc.sp());
        EXPECT(0x2840, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0x943d));
        // CB A6 0179
        gbc.setState(0xc48a, 0x5742, 0x3170, 0xaebd, 0xbf29, 0x395b, 0x0, 0x1);
        gbc.writeMem(0x395b, { 0x69 });
        gbc.writeMem(0xc48a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x5742, gbc.sp());
        EXPECT(0xc48c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc48a));
        EXPECT(0xa6, gbc.readMem(0xc48b));
        // CB A6 017B
        gbc.setState(0xc6c4, 0x7385, 0x8820, 0x1b8b, 0x129a, 0x3003, 0x1, 0x1);
        gbc.writeMem(0x3003, { 0x2d });
        gbc.writeMem(0xc6c4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x7385, gbc.sp());
        EXPECT(0xc6c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6c4));
        EXPECT(0xa6, gbc.readMem(0xc6c5));
        // CB A6 017D
        gbc.setState(0x4abf, 0x7f6f, 0x4000, 0x8d7f, 0xd86a, 0xc0b6, 0x1, 0x1);
        gbc.writeMem(0x4abf, { 0xcb, 0xa6 });
        gbc.writeMem(0xc0b6, { 0xd5 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x7f6f, gbc.sp());
        EXPECT(0x4ac1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0xc0b6));
        // CB A6 017E
        gbc.setState(0xb864, 0xd096, 0x5410, 0xef16, 0x957a, 0x5070, 0x1, 0x0);
        gbc.writeMem(0x5070, { 0x64 });
        gbc.writeMem(0xb864, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd096, gbc.sp());
        EXPECT(0xb866, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb864));
        EXPECT(0xa6, gbc.readMem(0xb865));
        // CB A6 017F
        gbc.setState(0x68f1, 0x609d, 0x9f00, 0xa6c0, 0xa54d, 0xd5ab, 0x0, 0x0);
        gbc.writeMem(0x68f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd5ab, { 0x83 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x609d, gbc.sp());
        EXPECT(0x68f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0xd5ab));
        // CB A6 0180
        gbc.setState(0xabbf, 0x2261, 0xf360, 0x5d43, 0x38af, 0xa997, 0x1, 0x0);
        gbc.writeMem(0xa997, { 0x29 });
        gbc.writeMem(0xabbf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x2261, gbc.sp());
        EXPECT(0xabc1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xa997));
        EXPECT(0xcb, gbc.readMem(0xabbf));
        EXPECT(0xa6, gbc.readMem(0xabc0));
        // CB A6 0182
        gbc.setState(0x5dcb, 0xcc7e, 0xed20, 0x2ea, 0xa64d, 0xfae9, 0x0, 0x1);
        gbc.writeMem(0x5dcb, { 0xcb, 0xa6 });
        gbc.writeMem(0xfae9, { 0x53 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xcc7e, gbc.sp());
        EXPECT(0x5dcd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xfae9));
        // CB A6 0186
        gbc.setState(0xac2d, 0xbf5b, 0x5d90, 0xd48a, 0x736e, 0x93d7, 0x1, 0x0);
        gbc.writeMem(0x93d7, { 0x5a });
        gbc.writeMem(0xac2d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xbf5b, gbc.sp());
        EXPECT(0xac2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0x93d7));
        EXPECT(0xcb, gbc.readMem(0xac2d));
        EXPECT(0xa6, gbc.readMem(0xac2e));
        // CB A6 0187
        gbc.setState(0xa4f9, 0xf6dc, 0xb050, 0x30e7, 0xae87, 0x2099, 0x0, 0x0);
        gbc.writeMem(0x2099, { 0xce });
        gbc.writeMem(0xa4f9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xf6dc, gbc.sp());
        EXPECT(0xa4fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4f9));
        EXPECT(0xa6, gbc.readMem(0xa4fa));
        // CB A6 0188
        gbc.setState(0x3e66, 0x4c0f, 0x1240, 0xb827, 0xa3d6, 0xc48c, 0x1, 0x0);
        gbc.writeMem(0x3e66, { 0xcb, 0xa6 });
        gbc.writeMem(0xc48c, { 0x32 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x4c0f, gbc.sp());
        EXPECT(0x3e68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xc48c));
        // CB A6 018A
        gbc.setState(0x58b5, 0xfc2e, 0x2420, 0xfca2, 0x2c53, 0xb214, 0x0, 0x1);
        gbc.writeMem(0x58b5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb214, { 0x17 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xfc2e, gbc.sp());
        EXPECT(0x58b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xb214));
        // CB A6 018C
        gbc.setState(0xa03c, 0xe23c, 0x6f30, 0xb870, 0xfa7a, 0xdc4a, 0x1, 0x1);
        gbc.writeMem(0xa03c, { 0xcb, 0xa6 });
        gbc.writeMem(0xdc4a, { 0x35 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe23c, gbc.sp());
        EXPECT(0xa03e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa03c));
        EXPECT(0xa6, gbc.readMem(0xa03d));
        EXPECT(0x25, gbc.readMem(0xdc4a));
        // CB A6 018D
        gbc.setState(0x59e, 0x23f6, 0x2360, 0xa780, 0x9ab4, 0xdc03, 0x0, 0x1);
        gbc.writeMem(0x59e, { 0xcb, 0xa6 });
        gbc.writeMem(0xdc03, { 0x94 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x23f6, gbc.sp());
        EXPECT(0x5a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0xdc03));
        // CB A6 018F
        gbc.setState(0x44e5, 0xa38a, 0x4b0, 0x16c2, 0xe705, 0xb5e0, 0x1, 0x1);
        gbc.writeMem(0x44e5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb5e0, { 0x7b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xa38a, gbc.sp());
        EXPECT(0x44e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xb5e0));
        // CB A6 0190
        gbc.setState(0xa9fa, 0x940e, 0x5480, 0xa87a, 0xb18b, 0x1731, 0x1, 0x1);
        gbc.writeMem(0x1731, { 0xcf });
        gbc.writeMem(0xa9fa, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x940e, gbc.sp());
        EXPECT(0xa9fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9fa));
        EXPECT(0xa6, gbc.readMem(0xa9fb));
        // CB A6 0191
        gbc.setState(0x83c7, 0x1a6c, 0xd010, 0x471a, 0xe35, 0xa03, 0x0, 0x0);
        gbc.writeMem(0xa03, { 0x6c });
        gbc.writeMem(0x83c7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x1a6c, gbc.sp());
        EXPECT(0x83c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83c7));
        EXPECT(0xa6, gbc.readMem(0x83c8));
        // CB A6 0192
        gbc.setState(0x491c, 0xa659, 0xd4e0, 0x79e0, 0xaf0c, 0x1129, 0x0, 0x1);
        gbc.writeMem(0x1129, { 0xc6 });
        gbc.writeMem(0x491c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xa659, gbc.sp());
        EXPECT(0x491e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0193
        gbc.setState(0xdd90, 0x932b, 0x7390, 0x97a5, 0xff09, 0xba61, 0x1, 0x1);
        gbc.writeMem(0xba61, { 0xb2 });
        gbc.writeMem(0xdd90, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x932b, gbc.sp());
        EXPECT(0xdd92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xba61));
        EXPECT(0xcb, gbc.readMem(0xdd90));
        EXPECT(0xa6, gbc.readMem(0xdd91));
        // CB A6 0194
        gbc.setState(0xd2df, 0x69a0, 0x85b0, 0x33c4, 0x2237, 0x9b62, 0x0, 0x1);
        gbc.writeMem(0x9b62, { 0x95 });
        gbc.writeMem(0xd2df, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x69a0, gbc.sp());
        EXPECT(0xd2e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x85, gbc.readMem(0x9b62));
        EXPECT(0xcb, gbc.readMem(0xd2df));
        EXPECT(0xa6, gbc.readMem(0xd2e0));
        // CB A6 0195
        gbc.setState(0x18f2, 0x9418, 0xc550, 0xc50d, 0x58a7, 0xc2e1, 0x1, 0x1);
        gbc.writeMem(0x18f2, { 0xcb, 0xa6 });
        gbc.writeMem(0xc2e1, { 0x8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x9418, gbc.sp());
        EXPECT(0x18f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0xc2e1));
        // CB A6 0196
        gbc.setState(0xd6f3, 0x54bb, 0x36b0, 0xc619, 0x1843, 0xf042, 0x1, 0x0);
        gbc.writeMem(0xd6f3, { 0xcb, 0xa6 });
        gbc.writeMem(0xf042, { 0xb1 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x54bb, gbc.sp());
        EXPECT(0xd6f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6f3));
        EXPECT(0xa6, gbc.readMem(0xd6f4));
        EXPECT(0xa1, gbc.readMem(0xf042));
        // CB A6 0198
        gbc.setState(0xdee7, 0x834c, 0xfa70, 0x8141, 0xe6a7, 0x2e28, 0x1, 0x0);
        gbc.writeMem(0x2e28, { 0x66 });
        gbc.writeMem(0xdee7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x834c, gbc.sp());
        EXPECT(0xdee9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdee7));
        EXPECT(0xa6, gbc.readMem(0xdee8));
        // CB A6 0199
        gbc.setState(0x304e, 0x2ac4, 0x9a10, 0x4e80, 0xcc34, 0xab36, 0x0, 0x0);
        gbc.writeMem(0x304e, { 0xcb, 0xa6 });
        gbc.writeMem(0xab36, { 0xa4 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x2ac4, gbc.sp());
        EXPECT(0x3050, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xab36));
        // CB A6 019B
        gbc.setState(0xab3f, 0x1755, 0xe830, 0xe343, 0x285, 0xf187, 0x1, 0x0);
        gbc.writeMem(0xab3f, { 0xcb, 0xa6 });
        gbc.writeMem(0xf187, { 0x39 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1755, gbc.sp());
        EXPECT(0xab41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab3f));
        EXPECT(0xa6, gbc.readMem(0xab40));
        EXPECT(0x29, gbc.readMem(0xf187));
        // CB A6 019C
        gbc.setState(0xecfb, 0xdf12, 0x3430, 0x4eac, 0xa6b7, 0x1948, 0x1, 0x1);
        gbc.writeMem(0x1948, { 0x89 });
        gbc.writeMem(0xecfb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xdf12, gbc.sp());
        EXPECT(0xecfd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecfb));
        EXPECT(0xa6, gbc.readMem(0xecfc));
        // CB A6 019D
        gbc.setState(0xb47d, 0x7490, 0xb4e0, 0x431b, 0x4b8c, 0x8257, 0x0, 0x0);
        gbc.writeMem(0x8257, { 0xda });
        gbc.writeMem(0xb47d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x7490, gbc.sp());
        EXPECT(0xb47f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0x8257));
        EXPECT(0xcb, gbc.readMem(0xb47d));
        EXPECT(0xa6, gbc.readMem(0xb47e));
        // CB A6 019E
        gbc.setState(0x1901, 0x4a25, 0x6a90, 0xe02b, 0x3e85, 0x942c, 0x0, 0x0);
        gbc.writeMem(0x1901, { 0xcb, 0xa6 });
        gbc.writeMem(0x942c, { 0xb1 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x4a25, gbc.sp());
        EXPECT(0x1903, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0x942c));
        // CB A6 019F
        gbc.setState(0x64fb, 0xbb50, 0x3bc0, 0x8f0c, 0x4401, 0x63dd, 0x0, 0x1);
        gbc.writeMem(0x63dd, { 0xc8 });
        gbc.writeMem(0x64fb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xbb50, gbc.sp());
        EXPECT(0x64fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 01A0
        gbc.setState(0x4ceb, 0xd0de, 0x3ef0, 0xd6a, 0x80cc, 0xa109, 0x1, 0x0);
        gbc.writeMem(0x4ceb, { 0xcb, 0xa6 });
        gbc.writeMem(0xa109, { 0xf3 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xd0de, gbc.sp());
        EXPECT(0x4ced, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0xa109));
        // CB A6 01A1
        gbc.setState(0x26c3, 0x8f99, 0x7b0, 0x8d68, 0xbf1a, 0x59f0, 0x0, 0x1);
        gbc.writeMem(0x26c3, { 0xcb, 0xa6 });
        gbc.writeMem(0x59f0, { 0x7 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x8f99, gbc.sp());
        EXPECT(0x26c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01A2
        gbc.setState(0xb328, 0x892b, 0xc580, 0x5e29, 0xa550, 0xf6d4, 0x0, 0x0);
        gbc.writeMem(0xb328, { 0xcb, 0xa6 });
        gbc.writeMem(0xf6d4, { 0x3c });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x892b, gbc.sp());
        EXPECT(0xb32a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb328));
        EXPECT(0xa6, gbc.readMem(0xb329));
        EXPECT(0x2c, gbc.readMem(0xf6d4));
        // CB A6 01A3
        gbc.setState(0xabb, 0xfc21, 0xa450, 0x49a2, 0xbc44, 0xd423, 0x0, 0x1);
        gbc.writeMem(0xabb, { 0xcb, 0xa6 });
        gbc.writeMem(0xd423, { 0x1f });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xfc21, gbc.sp());
        EXPECT(0xabd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xd423));
        // CB A6 01A4
        gbc.setState(0x1c93, 0xcfa3, 0xb5d0, 0xbd0f, 0x44cb, 0xc002, 0x1, 0x1);
        gbc.writeMem(0x1c93, { 0xcb, 0xa6 });
        gbc.writeMem(0xc002, { 0x50 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xcfa3, gbc.sp());
        EXPECT(0x1c95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xc002));
        // CB A6 01A9
        gbc.setState(0x8a81, 0x4864, 0x8670, 0xe89, 0xd88e, 0x4a6b, 0x1, 0x0);
        gbc.writeMem(0x4a6b, { 0x29 });
        gbc.writeMem(0x8a81, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x4864, gbc.sp());
        EXPECT(0x8a83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a81));
        EXPECT(0xa6, gbc.readMem(0x8a82));
        // CB A6 01AA
        gbc.setState(0x6d0f, 0x26e6, 0xf70, 0x9b68, 0x9206, 0xc358, 0x1, 0x0);
        gbc.writeMem(0x6d0f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc358, { 0xb0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x26e6, gbc.sp());
        EXPECT(0x6d11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xc358));
        // CB A6 01AB
        gbc.setState(0xcc7, 0x6406, 0x99c0, 0xb189, 0x6a82, 0xf476, 0x0, 0x0);
        gbc.writeMem(0xcc7, { 0xcb, 0xa6 });
        gbc.writeMem(0xf476, { 0x6c });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x6406, gbc.sp());
        EXPECT(0xcc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0xf476));
        // CB A6 01AC
        gbc.setState(0x4a31, 0x8eb3, 0x8d80, 0x8492, 0x8d12, 0x1287, 0x0, 0x1);
        gbc.writeMem(0x1287, { 0x6a });
        gbc.writeMem(0x4a31, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x8eb3, gbc.sp());
        EXPECT(0x4a33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 01AD
        gbc.setState(0xdcf7, 0x67fe, 0x12a0, 0x1125, 0xf60f, 0x889f, 0x0, 0x1);
        gbc.writeMem(0x889f, { 0x7a });
        gbc.writeMem(0xdcf7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x67fe, gbc.sp());
        EXPECT(0xdcf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0x889f));
        EXPECT(0xcb, gbc.readMem(0xdcf7));
        EXPECT(0xa6, gbc.readMem(0xdcf8));
        // CB A6 01AE
        gbc.setState(0x7861, 0x7e50, 0x2700, 0xacc2, 0x6cc6, 0x88e1, 0x0, 0x0);
        gbc.writeMem(0x7861, { 0xcb, 0xa6 });
        gbc.writeMem(0x88e1, { 0x46 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x7e50, gbc.sp());
        EXPECT(0x7863, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0x88e1));
        // CB A6 01AF
        gbc.setState(0xb2a2, 0x3f6d, 0x2ad0, 0x6ff0, 0x2fea, 0x174e, 0x1, 0x1);
        gbc.writeMem(0x174e, { 0x4 });
        gbc.writeMem(0xb2a2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x3f6d, gbc.sp());
        EXPECT(0xb2a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2a2));
        EXPECT(0xa6, gbc.readMem(0xb2a3));
        // CB A6 01B0
        gbc.setState(0x2e85, 0x143b, 0xd400, 0x9418, 0x919, 0x125b, 0x0, 0x0);
        gbc.writeMem(0x125b, { 0xae });
        gbc.writeMem(0x2e85, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x143b, gbc.sp());
        EXPECT(0x2e87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 01B1
        gbc.setState(0x97a5, 0xb512, 0x6530, 0x6f3d, 0x8e27, 0xff0c, 0x0, 0x0);
        gbc.writeMem(0x97a5, { 0xcb, 0xa6 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xb512, gbc.sp());
        EXPECT(0x97a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97a5));
        EXPECT(0xa6, gbc.readMem(0x97a6));
        EXPECT(0x84, gbc.readMem(0xff0c));
        // CB A6 01B3
        gbc.setState(0x97c0, 0xd0cc, 0x5140, 0x212e, 0xd453, 0x7b57, 0x0, 0x0);
        gbc.writeMem(0x7b57, { 0xc0 });
        gbc.writeMem(0x97c0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xd0cc, gbc.sp());
        EXPECT(0x97c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97c0));
        EXPECT(0xa6, gbc.readMem(0x97c1));
        // CB A6 01B4
        gbc.setState(0x6903, 0x45a4, 0xad50, 0xa391, 0xc22c, 0xe1c7, 0x0, 0x1);
        gbc.writeMem(0x6903, { 0xcb, 0xa6 });
        gbc.writeMem(0xe1c7, { 0x6d });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x45a4, gbc.sp());
        EXPECT(0x6905, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0xe1c7));
        // CB A6 01B5
        gbc.setState(0xcb8d, 0xfb02, 0x6ec0, 0xc2aa, 0x73b7, 0x8ed8, 0x0, 0x1);
        gbc.writeMem(0x8ed8, { 0xf });
        gbc.writeMem(0xcb8d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xfb02, gbc.sp());
        EXPECT(0xcb8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x8ed8));
        EXPECT(0xcb, gbc.readMem(0xcb8d));
        EXPECT(0xa6, gbc.readMem(0xcb8e));
        // CB A6 01B7
        gbc.setState(0x3f4c, 0x64a6, 0x5b10, 0xa710, 0xad30, 0x8e50, 0x1, 0x0);
        gbc.writeMem(0x3f4c, { 0xcb, 0xa6 });
        gbc.writeMem(0x8e50, { 0x29 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x64a6, gbc.sp());
        EXPECT(0x3f4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0x8e50));
        // CB A6 01B9
        gbc.setState(0xa8c0, 0x20f4, 0xf490, 0x74b9, 0x77b0, 0xef73, 0x0, 0x1);
        gbc.writeMem(0xa8c0, { 0xcb, 0xa6 });
        gbc.writeMem(0xef73, { 0xee });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x20f4, gbc.sp());
        EXPECT(0xa8c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8c0));
        EXPECT(0xa6, gbc.readMem(0xa8c1));
        EXPECT(0xee, gbc.readMem(0xef73));
        // CB A6 01BA
        gbc.setState(0x43a1, 0x7555, 0x7e50, 0x2a95, 0xb2c5, 0xb1cd, 0x0, 0x1);
        gbc.writeMem(0x43a1, { 0xcb, 0xa6 });
        gbc.writeMem(0xb1cd, { 0xb8 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x7555, gbc.sp());
        EXPECT(0x43a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0xb1cd));
        // CB A6 01BC
        gbc.setState(0x307e, 0xf3d4, 0x1ab0, 0x40dd, 0x32e3, 0x8315, 0x1, 0x1);
        gbc.writeMem(0x307e, { 0xcb, 0xa6 });
        gbc.writeMem(0x8315, { 0x9b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xf3d4, gbc.sp());
        EXPECT(0x3080, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0x8315));
        // CB A6 01BD
        gbc.setState(0xde58, 0x8ab7, 0xb90, 0x6e15, 0x506c, 0xc74d, 0x1, 0x1);
        gbc.writeMem(0xc74d, { 0xc2 });
        gbc.writeMem(0xde58, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x8ab7, gbc.sp());
        EXPECT(0xde5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0xc74d));
        EXPECT(0xcb, gbc.readMem(0xde58));
        EXPECT(0xa6, gbc.readMem(0xde59));
        // CB A6 01BE
        gbc.setState(0x529, 0x87ef, 0x2f0, 0xaeff, 0x39a5, 0x1ac4, 0x1, 0x0);
        gbc.writeMem(0x529, { 0xcb, 0xa6 });
        gbc.writeMem(0x1ac4, { 0x23 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x87ef, gbc.sp());
        EXPECT(0x52b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01C0
        gbc.setState(0xe7b1, 0x12b0, 0xc10, 0x98a4, 0x98e5, 0xc202, 0x0, 0x1);
        gbc.writeMem(0xc202, { 0xb8 });
        gbc.writeMem(0xe7b1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x12b0, gbc.sp());
        EXPECT(0xe7b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0xc202));
        EXPECT(0xcb, gbc.readMem(0xe7b1));
        EXPECT(0xa6, gbc.readMem(0xe7b2));
        // CB A6 01C1
        gbc.setState(0xd6cb, 0xea55, 0xc560, 0xb211, 0x8500, 0x43d1, 0x1, 0x0);
        gbc.writeMem(0x43d1, { 0x0 });
        gbc.writeMem(0xd6cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xea55, gbc.sp());
        EXPECT(0xd6cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6cb));
        EXPECT(0xa6, gbc.readMem(0xd6cc));
        // CB A6 01C2
        gbc.setState(0xcc5f, 0x252e, 0xd560, 0xaff1, 0x559d, 0x6992, 0x1, 0x1);
        gbc.writeMem(0x6992, { 0xed });
        gbc.writeMem(0xcc5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x252e, gbc.sp());
        EXPECT(0xcc61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc5f));
        EXPECT(0xa6, gbc.readMem(0xcc60));
        // CB A6 01C3
        gbc.setState(0xd016, 0xc2c3, 0x3b90, 0xe974, 0xcbe, 0xc332, 0x0, 0x0);
        gbc.writeMem(0xc332, { 0x61 });
        gbc.writeMem(0xd016, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xc2c3, gbc.sp());
        EXPECT(0xd018, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x61, gbc.readMem(0xc332));
        EXPECT(0xcb, gbc.readMem(0xd016));
        EXPECT(0xa6, gbc.readMem(0xd017));
        // CB A6 01C4
        gbc.setState(0x2701, 0xf730, 0x160, 0x1040, 0xbad9, 0xa00c, 0x1, 0x0);
        gbc.writeMem(0x2701, { 0xcb, 0xa6 });
        gbc.writeMem(0xa00c, { 0x80 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xf730, gbc.sp());
        EXPECT(0x2703, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0xa00c));
        // CB A6 01C5
        gbc.setState(0x7d53, 0xee00, 0x9380, 0x3000, 0x4bfe, 0xc324, 0x0, 0x1);
        gbc.writeMem(0x7d53, { 0xcb, 0xa6 });
        gbc.writeMem(0xc324, { 0x7a });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xee00, gbc.sp());
        EXPECT(0x7d55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xc324));
        // CB A6 01C7
        gbc.setState(0x71ed, 0xdf4e, 0xcd50, 0xf736, 0x3bf, 0x8eff, 0x0, 0x1);
        gbc.writeMem(0x71ed, { 0xcb, 0xa6 });
        gbc.writeMem(0x8eff, { 0xce });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xdf4e, gbc.sp());
        EXPECT(0x71ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0x8eff));
        // CB A6 01C8
        gbc.setState(0x80e3, 0xa80d, 0x2010, 0x800d, 0x477f, 0xf30a, 0x1, 0x1);
        gbc.writeMem(0x80e3, { 0xcb, 0xa6 });
        gbc.writeMem(0xf30a, { 0x18 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xa80d, gbc.sp());
        EXPECT(0x80e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80e3));
        EXPECT(0xa6, gbc.readMem(0x80e4));
        EXPECT(0x8, gbc.readMem(0xf30a));
        // CB A6 01C9
        gbc.setState(0xbc96, 0x974, 0x4920, 0xaf31, 0x9be1, 0xa5ed, 0x1, 0x0);
        gbc.writeMem(0xa5ed, { 0xce });
        gbc.writeMem(0xbc96, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x974, gbc.sp());
        EXPECT(0xbc98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xa5ed));
        EXPECT(0xcb, gbc.readMem(0xbc96));
        EXPECT(0xa6, gbc.readMem(0xbc97));
        // CB A6 01CA
        gbc.setState(0xd5d5, 0xacc7, 0x94e0, 0x38db, 0x7b0f, 0x9344, 0x0, 0x0);
        gbc.writeMem(0x9344, { 0x9 });
        gbc.writeMem(0xd5d5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xacc7, gbc.sp());
        EXPECT(0xd5d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0x9344));
        EXPECT(0xcb, gbc.readMem(0xd5d5));
        EXPECT(0xa6, gbc.readMem(0xd5d6));
        // CB A6 01CB
        gbc.setState(0x4bb8, 0x4f3e, 0x220, 0xb609, 0x7d77, 0x39e3, 0x0, 0x0);
        gbc.writeMem(0x39e3, { 0x8 });
        gbc.writeMem(0x4bb8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x4f3e, gbc.sp());
        EXPECT(0x4bba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 01CE
        gbc.setState(0xc085, 0x30bd, 0x8d40, 0xf4bb, 0x2f74, 0x6e8f, 0x0, 0x0);
        gbc.writeMem(0x6e8f, { 0x6a });
        gbc.writeMem(0xc085, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x30bd, gbc.sp());
        EXPECT(0xc087, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc085));
        EXPECT(0xa6, gbc.readMem(0xc086));
        // CB A6 01D2
        gbc.setState(0xabd6, 0xeb18, 0x2c00, 0x137d, 0x230d, 0xd436, 0x1, 0x1);
        gbc.writeMem(0xabd6, { 0xcb, 0xa6 });
        gbc.writeMem(0xd436, { 0xec });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xeb18, gbc.sp());
        EXPECT(0xabd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabd6));
        EXPECT(0xa6, gbc.readMem(0xabd7));
        EXPECT(0xec, gbc.readMem(0xd436));
        // CB A6 01D3
        gbc.setState(0x4862, 0xb660, 0x47e0, 0x7b88, 0x3a08, 0xbcb6, 0x0, 0x0);
        gbc.writeMem(0x4862, { 0xcb, 0xa6 });
        gbc.writeMem(0xbcb6, { 0xa4 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xb660, gbc.sp());
        EXPECT(0x4864, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xbcb6));
        // CB A6 01D4
        gbc.setState(0xe7b2, 0x11f5, 0x6c90, 0x6578, 0x25d, 0xdfb, 0x1, 0x0);
        gbc.writeMem(0xdfb, { 0x88 });
        gbc.writeMem(0xe7b2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x11f5, gbc.sp());
        EXPECT(0xe7b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7b2));
        EXPECT(0xa6, gbc.readMem(0xe7b3));
        // CB A6 01D5
        gbc.setState(0xb679, 0x2e97, 0xb4f0, 0xf6b8, 0x66db, 0x1da9, 0x1, 0x1);
        gbc.writeMem(0x1da9, { 0xaa });
        gbc.writeMem(0xb679, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x2e97, gbc.sp());
        EXPECT(0xb67b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb679));
        EXPECT(0xa6, gbc.readMem(0xb67a));
        // CB A6 01D6
        gbc.setState(0x6846, 0xb46f, 0xf520, 0x49a7, 0x9d53, 0xb87f, 0x1, 0x0);
        gbc.writeMem(0x6846, { 0xcb, 0xa6 });
        gbc.writeMem(0xb87f, { 0x91 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xb46f, gbc.sp());
        EXPECT(0x6848, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x81, gbc.readMem(0xb87f));
        // CB A6 01D7
        gbc.setState(0xccd7, 0xca08, 0x56c0, 0x9c63, 0x6dc6, 0xac8f, 0x1, 0x0);
        gbc.writeMem(0xac8f, { 0xc1 });
        gbc.writeMem(0xccd7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xca08, gbc.sp());
        EXPECT(0xccd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0xac8f));
        EXPECT(0xcb, gbc.readMem(0xccd7));
        EXPECT(0xa6, gbc.readMem(0xccd8));
        // CB A6 01D9
        gbc.setState(0x2c87, 0x6400, 0xdd80, 0xa163, 0xd057, 0xf379, 0x1, 0x1);
        gbc.writeMem(0x2c87, { 0xcb, 0xa6 });
        gbc.writeMem(0xf379, { 0x7b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x6400, gbc.sp());
        EXPECT(0x2c89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xf379));
        // CB A6 01DA
        gbc.setState(0x9745, 0x87a6, 0x92c0, 0xc2df, 0x4ca0, 0xce7f, 0x1, 0x1);
        gbc.writeMem(0x9745, { 0xcb, 0xa6 });
        gbc.writeMem(0xce7f, { 0x37 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x87a6, gbc.sp());
        EXPECT(0x9747, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9745));
        EXPECT(0xa6, gbc.readMem(0x9746));
        EXPECT(0x27, gbc.readMem(0xce7f));
        // CB A6 01DB
        gbc.setState(0xef78, 0xdd90, 0xc990, 0x334d, 0x6b1e, 0x1f47, 0x0, 0x0);
        gbc.writeMem(0x1f47, { 0x40 });
        gbc.writeMem(0xef78, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xdd90, gbc.sp());
        EXPECT(0xef7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef78));
        EXPECT(0xa6, gbc.readMem(0xef79));
        // CB A6 01DC
        gbc.setState(0xe519, 0xcd0c, 0x4490, 0xd1db, 0xcf9e, 0x2f42, 0x0, 0x0);
        gbc.writeMem(0x2f42, { 0x49 });
        gbc.writeMem(0xe519, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xcd0c, gbc.sp());
        EXPECT(0xe51b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe519));
        EXPECT(0xa6, gbc.readMem(0xe51a));
        // CB A6 01DE
        gbc.setState(0x663a, 0x1f72, 0x88e0, 0x7a3d, 0x5bc, 0x1898, 0x1, 0x0);
        gbc.writeMem(0x1898, { 0x2 });
        gbc.writeMem(0x663a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1f72, gbc.sp());
        EXPECT(0x663c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 01E1
        gbc.setState(0x3b37, 0xcc2e, 0x44d0, 0xbad9, 0x5e92, 0x29fe, 0x0, 0x0);
        gbc.writeMem(0x29fe, { 0xc3 });
        gbc.writeMem(0x3b37, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xcc2e, gbc.sp());
        EXPECT(0x3b39, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01E2
        gbc.setState(0xaf85, 0xc264, 0xd820, 0x452c, 0xb4f8, 0xdee6, 0x0, 0x1);
        gbc.writeMem(0xaf85, { 0xcb, 0xa6 });
        gbc.writeMem(0xdee6, { 0x15 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xc264, gbc.sp());
        EXPECT(0xaf87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf85));
        EXPECT(0xa6, gbc.readMem(0xaf86));
        EXPECT(0x5, gbc.readMem(0xdee6));
        // CB A6 01E3
        gbc.setState(0x2534, 0x1cea, 0xdc50, 0x5249, 0x116e, 0x8363, 0x0, 0x0);
        gbc.writeMem(0x2534, { 0xcb, 0xa6 });
        gbc.writeMem(0x8363, { 0x31 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x1cea, gbc.sp());
        EXPECT(0x2536, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0x8363));
        // CB A6 01E5
        gbc.setState(0xc5ca, 0x6e48, 0x1630, 0x5038, 0xa8a9, 0xd98c, 0x1, 0x1);
        gbc.writeMem(0xc5ca, { 0xcb, 0xa6 });
        gbc.writeMem(0xd98c, { 0x9 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x6e48, gbc.sp());
        EXPECT(0xc5cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5ca));
        EXPECT(0xa6, gbc.readMem(0xc5cb));
        EXPECT(0x9, gbc.readMem(0xd98c));
        // CB A6 01E6
        gbc.setState(0x1777, 0xfa07, 0x6aa0, 0x1508, 0x51ac, 0xde0c, 0x1, 0x0);
        gbc.writeMem(0x1777, { 0xcb, 0xa6 });
        gbc.writeMem(0xde0c, { 0x1f });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xfa07, gbc.sp());
        EXPECT(0x1779, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xde0c));
        // CB A6 01E8
        gbc.setState(0x34ca, 0x2696, 0x25a0, 0xce71, 0xa65d, 0x8193, 0x1, 0x0);
        gbc.writeMem(0x34ca, { 0xcb, 0xa6 });
        gbc.writeMem(0x8193, { 0x6e });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x2696, gbc.sp());
        EXPECT(0x34cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0x8193));
        // CB A6 01E9
        gbc.setState(0x1c51, 0x7ebf, 0x9c60, 0x4c4e, 0x526a, 0xa78d, 0x1, 0x0);
        gbc.writeMem(0x1c51, { 0xcb, 0xa6 });
        gbc.writeMem(0xa78d, { 0x70 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x7ebf, gbc.sp());
        EXPECT(0x1c53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0xa78d));
        // CB A6 01EA
        gbc.setState(0x3ec5, 0x2f15, 0xd550, 0x84c5, 0xf191, 0xc7c0, 0x1, 0x0);
        gbc.writeMem(0x3ec5, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7c0, { 0x8e });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x2f15, gbc.sp());
        EXPECT(0x3ec7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0xc7c0));
        // CB A6 01EB
        gbc.setState(0x81d3, 0xb140, 0xd170, 0xd834, 0xd0b4, 0x2571, 0x0, 0x0);
        gbc.writeMem(0x2571, { 0x2b });
        gbc.writeMem(0x81d3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xb140, gbc.sp());
        EXPECT(0x81d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81d3));
        EXPECT(0xa6, gbc.readMem(0x81d4));
        // CB A6 01EC
        gbc.setState(0xd149, 0x45aa, 0xb620, 0xf95c, 0x32c, 0xb442, 0x1, 0x1);
        gbc.writeMem(0xb442, { 0x76 });
        gbc.writeMem(0xd149, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x45aa, gbc.sp());
        EXPECT(0xd14b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xb442));
        EXPECT(0xcb, gbc.readMem(0xd149));
        EXPECT(0xa6, gbc.readMem(0xd14a));
        // CB A6 01ED
        gbc.setState(0xa106, 0x6302, 0xfa70, 0xb2c1, 0x6e1, 0xcca, 0x0, 0x1);
        gbc.writeMem(0xcca, { 0x8e });
        gbc.writeMem(0xa106, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x6302, gbc.sp());
        EXPECT(0xa108, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa106));
        EXPECT(0xa6, gbc.readMem(0xa107));
        // CB A6 01EE
        gbc.setState(0x75b5, 0x6c37, 0x6230, 0xfe2, 0x4e57, 0x6d9d, 0x1, 0x1);
        gbc.writeMem(0x6d9d, { 0x4c });
        gbc.writeMem(0x75b5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x6c37, gbc.sp());
        EXPECT(0x75b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01EF
        gbc.setState(0x3f53, 0xa832, 0x17f0, 0xbdef, 0xfc19, 0xa403, 0x0, 0x1);
        gbc.writeMem(0x3f53, { 0xcb, 0xa6 });
        gbc.writeMem(0xa403, { 0x70 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xa832, gbc.sp());
        EXPECT(0x3f55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0xa403));
        // CB A6 01F0
        gbc.setState(0xee71, 0x9495, 0x82f0, 0x1d50, 0x235, 0x58fd, 0x1, 0x0);
        gbc.writeMem(0x58fd, { 0x6f });
        gbc.writeMem(0xee71, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x9495, gbc.sp());
        EXPECT(0xee73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee71));
        EXPECT(0xa6, gbc.readMem(0xee72));
        // CB A6 01F1
        gbc.setState(0x1c9, 0x14fc, 0x950, 0xb561, 0xfdd0, 0xddc1, 0x0, 0x0);
        gbc.writeMem(0x1c9, { 0xcb, 0xa6 });
        gbc.writeMem(0xddc1, { 0xb8 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x14fc, gbc.sp());
        EXPECT(0x1cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0xddc1));
        // CB A6 01F2
        gbc.setState(0x7816, 0xaa7d, 0xd6e0, 0xdc8e, 0x3e90, 0xd3b8, 0x1, 0x1);
        gbc.writeMem(0x7816, { 0xcb, 0xa6 });
        gbc.writeMem(0xd3b8, { 0x67 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xaa7d, gbc.sp());
        EXPECT(0x7818, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0xd3b8));
        // CB A6 01F3
        gbc.setState(0x5c6b, 0x7279, 0xac30, 0x3d33, 0x3456, 0x2ec4, 0x1, 0x1);
        gbc.writeMem(0x2ec4, { 0xaf });
        gbc.writeMem(0x5c6b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x7279, gbc.sp());
        EXPECT(0x5c6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01F4
        gbc.setState(0x1a80, 0xfe28, 0xc780, 0x417d, 0x941e, 0xe58a, 0x0, 0x1);
        gbc.writeMem(0x1a80, { 0xcb, 0xa6 });
        gbc.writeMem(0xe58a, { 0x73 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xfe28, gbc.sp());
        EXPECT(0x1a82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xe58a));
        // CB A6 01F5
        gbc.setState(0xd8cb, 0x50fb, 0xf020, 0xf634, 0x41aa, 0xecea, 0x0, 0x0);
        gbc.writeMem(0xd8cb, { 0xcb, 0xa6 });
        gbc.writeMem(0xecea, { 0xc3 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x50fb, gbc.sp());
        EXPECT(0xd8cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8cb));
        EXPECT(0xa6, gbc.readMem(0xd8cc));
        EXPECT(0xc3, gbc.readMem(0xecea));
        // CB A6 01F6
        gbc.setState(0x64bb, 0x9c2b, 0x34c0, 0x905c, 0x2c34, 0xf821, 0x0, 0x0);
        gbc.writeMem(0x64bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xf821, { 0x83 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x9c2b, gbc.sp());
        EXPECT(0x64bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0xf821));
        // CB A6 01F7
        gbc.setState(0x3837, 0xf6f6, 0xc5d0, 0xf36a, 0x46b8, 0xee83, 0x0, 0x0);
        gbc.writeMem(0x3837, { 0xcb, 0xa6 });
        gbc.writeMem(0xee83, { 0xa0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xf6f6, gbc.sp());
        EXPECT(0x3839, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xee83));
        // CB A6 01FA
        gbc.setState(0x545d, 0x2c6, 0x1f30, 0xdddb, 0xfa61, 0xf4c6, 0x1, 0x1);
        gbc.writeMem(0x545d, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4c6, { 0x7 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x2c6, gbc.sp());
        EXPECT(0x545f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xf4c6));
        // CB A6 01FC
        gbc.setState(0x3737, 0x6cc7, 0x8080, 0x6c1f, 0x7a86, 0xb98a, 0x0, 0x0);
        gbc.writeMem(0x3737, { 0xcb, 0xa6 });
        gbc.writeMem(0xb98a, { 0xd6 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x6cc7, gbc.sp());
        EXPECT(0x3739, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc6, gbc.readMem(0xb98a));
        // CB A6 01FD
        gbc.setState(0x4cc0, 0xee9a, 0x4110, 0xfacd, 0xa0f7, 0x63ac, 0x1, 0x0);
        gbc.writeMem(0x4cc0, { 0xcb, 0xa6 });
        gbc.writeMem(0x63ac, { 0x62 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xee9a, gbc.sp());
        EXPECT(0x4cc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 01FE
        gbc.setState(0xba7c, 0xb1ec, 0xf8d0, 0xacf2, 0x3201, 0x8301, 0x1, 0x0);
        gbc.writeMem(0x8301, { 0x41 });
        gbc.writeMem(0xba7c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xb1ec, gbc.sp());
        EXPECT(0xba7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0x8301));
        EXPECT(0xcb, gbc.readMem(0xba7c));
        EXPECT(0xa6, gbc.readMem(0xba7d));
        // CB A6 01FF
        gbc.setState(0xe3c2, 0xb3c, 0xca60, 0x59e9, 0xf1f2, 0x820b, 0x0, 0x0);
        gbc.writeMem(0x820b, { 0x3c });
        gbc.writeMem(0xe3c2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xb3c, gbc.sp());
        EXPECT(0xe3c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0x820b));
        EXPECT(0xcb, gbc.readMem(0xe3c2));
        EXPECT(0xa6, gbc.readMem(0xe3c3));
        // CB A6 0200
        gbc.setState(0x5ff, 0xb3bf, 0x8010, 0x7e, 0xa6c7, 0xcd00, 0x0, 0x0);
        gbc.writeMem(0x5ff, { 0xcb, 0xa6 });
        gbc.writeMem(0xcd00, { 0xbe });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xb3bf, gbc.sp());
        EXPECT(0x601, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xae, gbc.readMem(0xcd00));
        // CB A6 0202
        gbc.setState(0x6ea, 0x1847, 0xdce0, 0xb13f, 0x6bdb, 0xf9e4, 0x0, 0x0);
        gbc.writeMem(0x6ea, { 0xcb, 0xa6 });
        gbc.writeMem(0xf9e4, { 0x21 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x1847, gbc.sp());
        EXPECT(0x6ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xf9e4));
        // CB A6 0203
        gbc.setState(0xeb4f, 0xccab, 0x4ef0, 0xab34, 0xc99d, 0x9e06, 0x1, 0x0);
        gbc.writeMem(0x9e06, { 0x0 });
        gbc.writeMem(0xeb4f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xccab, gbc.sp());
        EXPECT(0xeb51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0x9e06));
        EXPECT(0xcb, gbc.readMem(0xeb4f));
        EXPECT(0xa6, gbc.readMem(0xeb50));
        // CB A6 0204
        gbc.setState(0x8c62, 0x5cbd, 0xfdc0, 0x2457, 0x5864, 0x9018, 0x0, 0x0);
        gbc.writeMem(0x8c62, { 0xcb, 0xa6 });
        gbc.writeMem(0x9018, { 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x5cbd, gbc.sp());
        EXPECT(0x8c64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c62));
        EXPECT(0xa6, gbc.readMem(0x8c63));
        EXPECT(0x88, gbc.readMem(0x9018));
        // CB A6 0205
        gbc.setState(0xb3a7, 0xbdf8, 0xb050, 0x4013, 0x3f29, 0x7f0, 0x1, 0x0);
        gbc.writeMem(0x7f0, { 0xd });
        gbc.writeMem(0xb3a7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xbdf8, gbc.sp());
        EXPECT(0xb3a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3a7));
        EXPECT(0xa6, gbc.readMem(0xb3a8));
        // CB A6 0206
        gbc.setState(0x1301, 0x7bf0, 0x9600, 0x3bdb, 0xd710, 0x1b96, 0x0, 0x1);
        gbc.writeMem(0x1301, { 0xcb, 0xa6 });
        gbc.writeMem(0x1b96, { 0x63 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x7bf0, gbc.sp());
        EXPECT(0x1303, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0207
        gbc.setState(0x3741, 0x6430, 0xcdb0, 0xb192, 0xe69b, 0x8980, 0x0, 0x1);
        gbc.writeMem(0x3741, { 0xcb, 0xa6 });
        gbc.writeMem(0x8980, { 0x8a });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x6430, gbc.sp());
        EXPECT(0x3743, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8a, gbc.readMem(0x8980));
        // CB A6 0208
        gbc.setState(0x5060, 0x5caa, 0xb250, 0xc334, 0x3616, 0x81de, 0x0, 0x1);
        gbc.writeMem(0x5060, { 0xcb, 0xa6 });
        gbc.writeMem(0x81de, { 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x5caa, gbc.sp());
        EXPECT(0x5062, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0x81de));
        // CB A6 0209
        gbc.setState(0x4761, 0x3943, 0x1750, 0xaadb, 0x8b7, 0xbeb2, 0x1, 0x1);
        gbc.writeMem(0x4761, { 0xcb, 0xa6 });
        gbc.writeMem(0xbeb2, { 0xe5 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x3943, gbc.sp());
        EXPECT(0x4763, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xbeb2));
        // CB A6 020C
        gbc.setState(0xefc9, 0x1bf9, 0x1e40, 0x7e72, 0x2a35, 0x4f95, 0x1, 0x0);
        gbc.writeMem(0x4f95, { 0xf });
        gbc.writeMem(0xefc9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x1bf9, gbc.sp());
        EXPECT(0xefcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefc9));
        EXPECT(0xa6, gbc.readMem(0xefca));
        // CB A6 020D
        gbc.setState(0x4e6e, 0x3e6c, 0x10e0, 0xccfb, 0x6417, 0x2cb8, 0x0, 0x0);
        gbc.writeMem(0x2cb8, { 0x2e });
        gbc.writeMem(0x4e6e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x3e6c, gbc.sp());
        EXPECT(0x4e70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0212
        gbc.setState(0x454c, 0xb27b, 0x5930, 0x13a7, 0xf4f0, 0x7e63, 0x0, 0x0);
        gbc.writeMem(0x454c, { 0xcb, 0xa6 });
        gbc.writeMem(0x7e63, { 0xaf });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xb27b, gbc.sp());
        EXPECT(0x454e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0213
        gbc.setState(0x84cf, 0x6742, 0xecf0, 0xbccf, 0xea39, 0xb22a, 0x1, 0x0);
        gbc.writeMem(0x84cf, { 0xcb, 0xa6 });
        gbc.writeMem(0xb22a, { 0x50 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x6742, gbc.sp());
        EXPECT(0x84d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84cf));
        EXPECT(0xa6, gbc.readMem(0x84d0));
        EXPECT(0x40, gbc.readMem(0xb22a));
        // CB A6 0214
        gbc.setState(0xbaf1, 0xa2c5, 0xd330, 0x2dca, 0x7fb2, 0xf54d, 0x1, 0x0);
        gbc.writeMem(0xbaf1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf54d, { 0xaf });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa2c5, gbc.sp());
        EXPECT(0xbaf3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaf1));
        EXPECT(0xa6, gbc.readMem(0xbaf2));
        EXPECT(0xaf, gbc.readMem(0xf54d));
        // CB A6 0216
        gbc.setState(0x6ffa, 0x1384, 0xf7a0, 0x8a7e, 0x2c3a, 0xc066, 0x1, 0x0);
        gbc.writeMem(0x6ffa, { 0xcb, 0xa6 });
        gbc.writeMem(0xc066, { 0x5b });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x1384, gbc.sp());
        EXPECT(0x6ffc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0xc066));
        // CB A6 0217
        gbc.setState(0x8aee, 0xc56f, 0xebc0, 0x85fa, 0x8c9a, 0xf4f3, 0x0, 0x0);
        gbc.writeMem(0x8aee, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4f3, { 0x70 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xc56f, gbc.sp());
        EXPECT(0x8af0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8aee));
        EXPECT(0xa6, gbc.readMem(0x8aef));
        EXPECT(0x60, gbc.readMem(0xf4f3));
        // CB A6 0218
        gbc.setState(0x6088, 0xb90f, 0x8040, 0x9c97, 0xc10a, 0x75aa, 0x1, 0x0);
        gbc.writeMem(0x6088, { 0xcb, 0xa6 });
        gbc.writeMem(0x75aa, { 0x42 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xb90f, gbc.sp());
        EXPECT(0x608a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 021A
        gbc.setState(0x4620, 0xe4c5, 0xe040, 0x22a1, 0x5936, 0xfa60, 0x1, 0x1);
        gbc.writeMem(0x4620, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa60, { 0xaa });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xe4c5, gbc.sp());
        EXPECT(0x4622, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xaa, gbc.readMem(0xfa60));
        // CB A6 021B
        gbc.setState(0x98dc, 0x7160, 0xf4c0, 0xd3fa, 0x20c1, 0xd456, 0x0, 0x1);
        gbc.writeMem(0x98dc, { 0xcb, 0xa6 });
        gbc.writeMem(0xd456, { 0xca });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x7160, gbc.sp());
        EXPECT(0x98de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98dc));
        EXPECT(0xa6, gbc.readMem(0x98dd));
        EXPECT(0xca, gbc.readMem(0xd456));
        // CB A6 021C
        gbc.setState(0xad8b, 0x94c9, 0x7fe0, 0xe60, 0xe3e8, 0xb407, 0x0, 0x1);
        gbc.writeMem(0xad8b, { 0xcb, 0xa6 });
        gbc.writeMem(0xb407, { 0xc3 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x94c9, gbc.sp());
        EXPECT(0xad8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad8b));
        EXPECT(0xa6, gbc.readMem(0xad8c));
        EXPECT(0xc3, gbc.readMem(0xb407));
        // CB A6 021E
        gbc.setState(0x87cc, 0xb2cb, 0x7f00, 0x616b, 0xb08d, 0x9d1a, 0x1, 0x0);
        gbc.writeMem(0x87cc, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d1a, { 0xf0 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb2cb, gbc.sp());
        EXPECT(0x87ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87cc));
        EXPECT(0xa6, gbc.readMem(0x87cd));
        EXPECT(0xe0, gbc.readMem(0x9d1a));
        // CB A6 021F
        gbc.setState(0xbafd, 0xf52c, 0x99c0, 0x4c66, 0xbf8, 0xc921, 0x1, 0x1);
        gbc.writeMem(0xbafd, { 0xcb, 0xa6 });
        gbc.writeMem(0xc921, { 0x52 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf52c, gbc.sp());
        EXPECT(0xbaff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbafd));
        EXPECT(0xa6, gbc.readMem(0xbafe));
        EXPECT(0x42, gbc.readMem(0xc921));
        // CB A6 0221
        gbc.setState(0x7693, 0x3b9b, 0x63c0, 0x5723, 0x14da, 0xab7c, 0x0, 0x1);
        gbc.writeMem(0x7693, { 0xcb, 0xa6 });
        gbc.writeMem(0xab7c, { 0xde });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x3b9b, gbc.sp());
        EXPECT(0x7695, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xab7c));
        // CB A6 0224
        gbc.setState(0xb1a6, 0xdd59, 0x7270, 0xf0a5, 0x1a8c, 0xd514, 0x1, 0x1);
        gbc.writeMem(0xb1a6, { 0xcb, 0xa6 });
        gbc.writeMem(0xd514, { 0xd0 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xdd59, gbc.sp());
        EXPECT(0xb1a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1a6));
        EXPECT(0xa6, gbc.readMem(0xb1a7));
        EXPECT(0xc0, gbc.readMem(0xd514));
        // CB A6 0225
        gbc.setState(0x3b6f, 0xaf90, 0x890, 0x2dd1, 0xe9fa, 0x7373, 0x1, 0x0);
        gbc.writeMem(0x3b6f, { 0xcb, 0xa6 });
        gbc.writeMem(0x7373, { 0xa0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xaf90, gbc.sp());
        EXPECT(0x3b71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0227
        gbc.setState(0x9405, 0x86e4, 0x940, 0x60bb, 0xcf34, 0xfaed, 0x1, 0x0);
        gbc.writeMem(0x9405, { 0xcb, 0xa6 });
        gbc.writeMem(0xfaed, { 0x41 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x86e4, gbc.sp());
        EXPECT(0x9407, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9405));
        EXPECT(0xa6, gbc.readMem(0x9406));
        EXPECT(0x41, gbc.readMem(0xfaed));
        // CB A6 0228
        gbc.setState(0x5fc4, 0x58e7, 0x2990, 0x572e, 0x3cf9, 0x68ef, 0x1, 0x1);
        gbc.writeMem(0x5fc4, { 0xcb, 0xa6 });
        gbc.writeMem(0x68ef, { 0xcb });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x58e7, gbc.sp());
        EXPECT(0x5fc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0229
        gbc.setState(0xac9a, 0xa10c, 0xcea0, 0x1b17, 0xf467, 0xfdc4, 0x0, 0x1);
        gbc.writeMem(0xac9a, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdc4, { 0x1 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xa10c, gbc.sp());
        EXPECT(0xac9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac9a));
        EXPECT(0xa6, gbc.readMem(0xac9b));
        EXPECT(0x1, gbc.readMem(0xfdc4));
        // CB A6 022A
        gbc.setState(0x4fc9, 0x94aa, 0x99e0, 0x8b83, 0x166e, 0xe46f, 0x1, 0x1);
        gbc.writeMem(0x4fc9, { 0xcb, 0xa6 });
        gbc.writeMem(0xe46f, { 0xaa });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x94aa, gbc.sp());
        EXPECT(0x4fcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xaa, gbc.readMem(0xe46f));
        // CB A6 022B
        gbc.setState(0x235f, 0xa2ef, 0x60b0, 0xb748, 0xa30b, 0xefac, 0x1, 0x0);
        gbc.writeMem(0x235f, { 0xcb, 0xa6 });
        gbc.writeMem(0xefac, { 0xa });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xa2ef, gbc.sp());
        EXPECT(0x2361, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xefac));
        // CB A6 022C
        gbc.setState(0x1d0a, 0x989f, 0xce50, 0x3f79, 0x8328, 0x9dfd, 0x1, 0x0);
        gbc.writeMem(0x1d0a, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dfd, { 0xd5 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x989f, gbc.sp());
        EXPECT(0x1d0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0x9dfd));
        // CB A6 022E
        gbc.setState(0xcd8e, 0x11e8, 0xfbd0, 0x226a, 0x6536, 0xb217, 0x0, 0x0);
        gbc.writeMem(0xb217, { 0xb });
        gbc.writeMem(0xcd8e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x11e8, gbc.sp());
        EXPECT(0xcd90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xb217));
        EXPECT(0xcb, gbc.readMem(0xcd8e));
        EXPECT(0xa6, gbc.readMem(0xcd8f));
        // CB A6 022F
        gbc.setState(0x4844, 0x7aa0, 0x4120, 0x7031, 0x8494, 0xa77d, 0x1, 0x0);
        gbc.writeMem(0x4844, { 0xcb, 0xa6 });
        gbc.writeMem(0xa77d, { 0x76 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x7aa0, gbc.sp());
        EXPECT(0x4846, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xa77d));
        // CB A6 0231
        gbc.setState(0xcdee, 0x2488, 0x41f0, 0x5308, 0x27ab, 0xd353, 0x1, 0x1);
        gbc.writeMem(0xcdee, { 0xcb, 0xa6 });
        gbc.writeMem(0xd353, { 0x11 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x2488, gbc.sp());
        EXPECT(0xcdf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdee));
        EXPECT(0xa6, gbc.readMem(0xcdef));
        EXPECT(0x1, gbc.readMem(0xd353));
        // CB A6 0232
        gbc.setState(0xa4e0, 0xf8b6, 0x5610, 0x2a0c, 0x3a58, 0xad7c, 0x1, 0x1);
        gbc.writeMem(0xa4e0, { 0xcb, 0xa6 });
        gbc.writeMem(0xad7c, { 0xba });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xf8b6, gbc.sp());
        EXPECT(0xa4e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4e0));
        EXPECT(0xa6, gbc.readMem(0xa4e1));
        EXPECT(0xaa, gbc.readMem(0xad7c));
        // CB A6 0233
        gbc.setState(0x18ce, 0xf185, 0x3ef0, 0x42e8, 0x6ef3, 0xa485, 0x1, 0x0);
        gbc.writeMem(0x18ce, { 0xcb, 0xa6 });
        gbc.writeMem(0xa485, { 0x73 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xf185, gbc.sp());
        EXPECT(0x18d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xa485));
        // CB A6 0234
        gbc.setState(0xd126, 0x8a8, 0x3160, 0x37cb, 0x6994, 0x4b10, 0x0, 0x0);
        gbc.writeMem(0x4b10, { 0xf });
        gbc.writeMem(0xd126, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x8a8, gbc.sp());
        EXPECT(0xd128, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd126));
        EXPECT(0xa6, gbc.readMem(0xd127));
        // CB A6 0236
        gbc.setState(0xd313, 0x5291, 0xe310, 0x53d, 0xa398, 0xc8f5, 0x0, 0x1);
        gbc.writeMem(0xc8f5, { 0x14 });
        gbc.writeMem(0xd313, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x5291, gbc.sp());
        EXPECT(0xd315, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xc8f5));
        EXPECT(0xcb, gbc.readMem(0xd313));
        EXPECT(0xa6, gbc.readMem(0xd314));
        // CB A6 0238
        gbc.setState(0x52a8, 0x4173, 0x9b50, 0x27f0, 0x5e78, 0x8cf9, 0x0, 0x1);
        gbc.writeMem(0x52a8, { 0xcb, 0xa6 });
        gbc.writeMem(0x8cf9, { 0x84 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x4173, gbc.sp());
        EXPECT(0x52aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x8cf9));
        // CB A6 0239
        gbc.setState(0xc6df, 0xf88b, 0x3e70, 0x521e, 0xaa0e, 0xc8ba, 0x0, 0x0);
        gbc.writeMem(0xc6df, { 0xcb, 0xa6 });
        gbc.writeMem(0xc8ba, { 0xa1 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xf88b, gbc.sp());
        EXPECT(0xc6e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6df));
        EXPECT(0xa6, gbc.readMem(0xc6e0));
        EXPECT(0xa1, gbc.readMem(0xc8ba));
        // CB A6 023A
        gbc.setState(0x17af, 0x1516, 0x5b90, 0xe5e6, 0x8816, 0xcdb6, 0x1, 0x0);
        gbc.writeMem(0x17af, { 0xcb, 0xa6 });
        gbc.writeMem(0xcdb6, { 0x2c });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x1516, gbc.sp());
        EXPECT(0x17b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xcdb6));
        // CB A6 023B
        gbc.setState(0xc754, 0x916, 0xa220, 0x6414, 0x33a7, 0x1c60, 0x0, 0x0);
        gbc.writeMem(0x1c60, { 0x4b });
        gbc.writeMem(0xc754, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x916, gbc.sp());
        EXPECT(0xc756, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc754));
        EXPECT(0xa6, gbc.readMem(0xc755));
        // CB A6 023C
        gbc.setState(0x39df, 0x2ec5, 0xaef0, 0x1622, 0x2bf8, 0xd4fb, 0x1, 0x1);
        gbc.writeMem(0x39df, { 0xcb, 0xa6 });
        gbc.writeMem(0xd4fb, { 0xd4 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x2ec5, gbc.sp());
        EXPECT(0x39e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xd4fb));
        // CB A6 023D
        gbc.setState(0xb270, 0x873e, 0x7ca0, 0x1425, 0x2295, 0x20b8, 0x0, 0x0);
        gbc.writeMem(0x20b8, { 0x7 });
        gbc.writeMem(0xb270, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x873e, gbc.sp());
        EXPECT(0xb272, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb270));
        EXPECT(0xa6, gbc.readMem(0xb271));
        // CB A6 023F
        gbc.setState(0x6fe8, 0xf3db, 0x130, 0x93f9, 0x70a6, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x1522, { 0xc5 });
        gbc.writeMem(0x6fe8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xf3db, gbc.sp());
        EXPECT(0x6fea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0240
        gbc.setState(0x9361, 0x87ae, 0x4cc0, 0x8c0b, 0x74bf, 0xb4c5, 0x0, 0x0);
        gbc.writeMem(0x9361, { 0xcb, 0xa6 });
        gbc.writeMem(0xb4c5, { 0xe6 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x87ae, gbc.sp());
        EXPECT(0x9363, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9361));
        EXPECT(0xa6, gbc.readMem(0x9362));
        EXPECT(0xe6, gbc.readMem(0xb4c5));
        // CB A6 0241
        gbc.setState(0x9722, 0x93ad, 0xbd90, 0xcc3d, 0xca27, 0x3d45, 0x0, 0x1);
        gbc.writeMem(0x3d45, { 0x63 });
        gbc.writeMem(0x9722, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x93ad, gbc.sp());
        EXPECT(0x9724, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9722));
        EXPECT(0xa6, gbc.readMem(0x9723));
        // CB A6 0242
        gbc.setState(0xccd7, 0x901c, 0x9ed0, 0x59f4, 0x7c7, 0x76c9, 0x1, 0x0);
        gbc.writeMem(0x76c9, { 0xa5 });
        gbc.writeMem(0xccd7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x901c, gbc.sp());
        EXPECT(0xccd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccd7));
        EXPECT(0xa6, gbc.readMem(0xccd8));
        // CB A6 0243
        gbc.setState(0xb05f, 0xf9e7, 0x8150, 0xfb17, 0x917a, 0xc0e4, 0x1, 0x1);
        gbc.writeMem(0xb05f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc0e4, { 0x3c });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf9e7, gbc.sp());
        EXPECT(0xb061, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb05f));
        EXPECT(0xa6, gbc.readMem(0xb060));
        EXPECT(0x2c, gbc.readMem(0xc0e4));
        // CB A6 0244
        gbc.setState(0x4647, 0xe747, 0x4350, 0xe1f7, 0x5840, 0x25d, 0x1, 0x0);
        gbc.writeMem(0x25d, { 0x68 });
        gbc.writeMem(0x4647, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xe747, gbc.sp());
        EXPECT(0x4649, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0245
        gbc.setState(0x6145, 0x84f6, 0xc130, 0x1720, 0xd561, 0x4973, 0x1, 0x1);
        gbc.writeMem(0x4973, { 0xa6 });
        gbc.writeMem(0x6145, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x84f6, gbc.sp());
        EXPECT(0x6147, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0246
        gbc.setState(0x366b, 0x80fe, 0x2a50, 0xaa70, 0x8ca9, 0x3432, 0x0, 0x0);
        gbc.writeMem(0x3432, { 0x2 });
        gbc.writeMem(0x366b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x80fe, gbc.sp());
        EXPECT(0x366d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0248
        gbc.setState(0x21cd, 0x8f90, 0xb0c0, 0xbd76, 0x6d64, 0x9d2d, 0x0, 0x1);
        gbc.writeMem(0x21cd, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d2d, { 0xf4 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x8f90, gbc.sp());
        EXPECT(0x21cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe4, gbc.readMem(0x9d2d));
        // CB A6 0249
        gbc.setState(0x5bc5, 0xfc01, 0xffe0, 0x36ff, 0xbee1, 0xf172, 0x1, 0x0);
        gbc.writeMem(0x5bc5, { 0xcb, 0xa6 });
        gbc.writeMem(0xf172, { 0xe0 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xfc01, gbc.sp());
        EXPECT(0x5bc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe0, gbc.readMem(0xf172));
        // CB A6 024A
        gbc.setState(0x23a8, 0xf347, 0x6e60, 0xf5c, 0x4f84, 0x4b95, 0x0, 0x1);
        gbc.writeMem(0x23a8, { 0xcb, 0xa6 });
        gbc.writeMem(0x4b95, { 0x81 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xf347, gbc.sp());
        EXPECT(0x23aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 024C
        gbc.setState(0x43eb, 0xa27b, 0xf100, 0xa440, 0x566d, 0xe20c, 0x1, 0x1);
        gbc.writeMem(0x43eb, { 0xcb, 0xa6 });
        gbc.writeMem(0xe20c, { 0x84 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xa27b, gbc.sp());
        EXPECT(0x43ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0xe20c));
        // CB A6 0250
        gbc.setState(0x93f8, 0x4bc4, 0x7050, 0x29fd, 0x8921, 0x6e1f, 0x1, 0x0);
        gbc.writeMem(0x6e1f, { 0xc0 });
        gbc.writeMem(0x93f8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x4bc4, gbc.sp());
        EXPECT(0x93fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93f8));
        EXPECT(0xa6, gbc.readMem(0x93f9));
        // CB A6 0252
        gbc.setState(0xa383, 0xe358, 0x4730, 0x3ef9, 0xa2b9, 0xac93, 0x0, 0x1);
        gbc.writeMem(0xa383, { 0xcb, 0xa6 });
        gbc.writeMem(0xac93, { 0x12 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xe358, gbc.sp());
        EXPECT(0xa385, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa383));
        EXPECT(0xa6, gbc.readMem(0xa384));
        EXPECT(0x2, gbc.readMem(0xac93));
        // CB A6 0254
        gbc.setState(0x66f5, 0x88da, 0xdd10, 0xeef8, 0xfb9b, 0x2bc8, 0x1, 0x1);
        gbc.writeMem(0x2bc8, { 0xe2 });
        gbc.writeMem(0x66f5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x88da, gbc.sp());
        EXPECT(0x66f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0255
        gbc.setState(0x3858, 0x15e, 0x7d20, 0x1597, 0x3317, 0x5141, 0x1, 0x0);
        gbc.writeMem(0x3858, { 0xcb, 0xa6 });
        gbc.writeMem(0x5141, { 0xeb });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x15e, gbc.sp());
        EXPECT(0x385a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0256
        gbc.setState(0x35c, 0xeabd, 0x3300, 0x5058, 0x25af, 0xb695, 0x0, 0x1);
        gbc.writeMem(0x35c, { 0xcb, 0xa6 });
        gbc.writeMem(0xb695, { 0xb6 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xeabd, gbc.sp());
        EXPECT(0x35e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xb695));
        // CB A6 0257
        gbc.setState(0x76e6, 0xa6ac, 0x8530, 0xc164, 0xc003, 0x6c24, 0x0, 0x1);
        gbc.writeMem(0x6c24, { 0xaf });
        gbc.writeMem(0x76e6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xa6ac, gbc.sp());
        EXPECT(0x76e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0259
        gbc.setState(0x9aea, 0xe89f, 0x92e0, 0x23a, 0x4b29, 0xc312, 0x1, 0x1);
        gbc.writeMem(0x9aea, { 0xcb, 0xa6 });
        gbc.writeMem(0xc312, { 0x35 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xe89f, gbc.sp());
        EXPECT(0x9aec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aea));
        EXPECT(0xa6, gbc.readMem(0x9aeb));
        EXPECT(0x25, gbc.readMem(0xc312));
        // CB A6 025A
        gbc.setState(0x3f92, 0xd7ca, 0xd910, 0x5c5f, 0xbb5e, 0xfe3d, 0x1, 0x1);
        gbc.writeMem(0x3f92, { 0xcb, 0xa6 });
        gbc.writeMem(0xfe3d, { 0xd0 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xd7ca, gbc.sp());
        EXPECT(0x3f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc0, gbc.readMem(0xfe3d));
        // CB A6 025B
        gbc.setState(0xb482, 0xce10, 0x3bc0, 0x1233, 0xb3aa, 0x68ed, 0x0, 0x1);
        gbc.writeMem(0x68ed, { 0x4e });
        gbc.writeMem(0xb482, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xce10, gbc.sp());
        EXPECT(0xb484, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb482));
        EXPECT(0xa6, gbc.readMem(0xb483));
        // CB A6 025C
        gbc.setState(0x9413, 0x4ac5, 0x3050, 0x5a54, 0x63c, 0xa990, 0x0, 0x0);
        gbc.writeMem(0x9413, { 0xcb, 0xa6 });
        gbc.writeMem(0xa990, { 0xb1 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x4ac5, gbc.sp());
        EXPECT(0x9415, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9413));
        EXPECT(0xa6, gbc.readMem(0x9414));
        EXPECT(0xa1, gbc.readMem(0xa990));
        // CB A6 025D
        gbc.setState(0x48dc, 0xe7a1, 0x4640, 0xa864, 0x350e, 0x1d7d, 0x0, 0x1);
        gbc.writeMem(0x1d7d, { 0xc0 });
        gbc.writeMem(0x48dc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe7a1, gbc.sp());
        EXPECT(0x48de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 025E
        gbc.setState(0x923f, 0xd630, 0xf190, 0xa76d, 0x2f1f, 0xeeeb, 0x1, 0x0);
        gbc.writeMem(0x923f, { 0xcb, 0xa6 });
        gbc.writeMem(0xeeeb, { 0x64 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xd630, gbc.sp());
        EXPECT(0x9241, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x923f));
        EXPECT(0xa6, gbc.readMem(0x9240));
        EXPECT(0x64, gbc.readMem(0xeeeb));
        // CB A6 0261
        gbc.setState(0xea14, 0x3b95, 0xd260, 0xd4e2, 0xfc97, 0xc73b, 0x1, 0x1);
        gbc.writeMem(0xc73b, { 0x7f });
        gbc.writeMem(0xea14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x3b95, gbc.sp());
        EXPECT(0xea16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xc73b));
        EXPECT(0xcb, gbc.readMem(0xea14));
        EXPECT(0xa6, gbc.readMem(0xea15));
        // CB A6 0265
        gbc.setState(0x4ff8, 0xd67, 0x5b80, 0xd410, 0x38a, 0x4b70, 0x1, 0x0);
        gbc.writeMem(0x4b70, { 0xa3 });
        gbc.writeMem(0x4ff8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd67, gbc.sp());
        EXPECT(0x4ffa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0266
        gbc.setState(0x9230, 0x4bb3, 0xa540, 0x3cc7, 0x1159, 0xe077, 0x1, 0x0);
        gbc.writeMem(0x9230, { 0xcb, 0xa6 });
        gbc.writeMem(0xe077, { 0x40 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x4bb3, gbc.sp());
        EXPECT(0x9232, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9230));
        EXPECT(0xa6, gbc.readMem(0x9231));
        EXPECT(0x40, gbc.readMem(0xe077));
        // CB A6 0267
        gbc.setState(0xd191, 0xc4cd, 0xd610, 0xd8cf, 0x4849, 0x817d, 0x1, 0x0);
        gbc.writeMem(0x817d, { 0xee });
        gbc.writeMem(0xd191, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xc4cd, gbc.sp());
        EXPECT(0xd193, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0x817d));
        EXPECT(0xcb, gbc.readMem(0xd191));
        EXPECT(0xa6, gbc.readMem(0xd192));
        // CB A6 0268
        gbc.setState(0x96a7, 0x19c0, 0x72c0, 0x9851, 0x6a9f, 0xaa49, 0x0, 0x1);
        gbc.writeMem(0x96a7, { 0xcb, 0xa6 });
        gbc.writeMem(0xaa49, { 0xd });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x19c0, gbc.sp());
        EXPECT(0x96a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96a7));
        EXPECT(0xa6, gbc.readMem(0x96a8));
        EXPECT(0xd, gbc.readMem(0xaa49));
        // CB A6 0269
        gbc.setState(0x9f72, 0x1983, 0x1010, 0x71d0, 0xdd29, 0xf2fc, 0x0, 0x1);
        gbc.writeMem(0x9f72, { 0xcb, 0xa6 });
        gbc.writeMem(0xf2fc, { 0x34 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x1983, gbc.sp());
        EXPECT(0x9f74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f72));
        EXPECT(0xa6, gbc.readMem(0x9f73));
        EXPECT(0x24, gbc.readMem(0xf2fc));
        // CB A6 026A
        gbc.setState(0xe1e5, 0x4f90, 0x3590, 0x7a1c, 0x87d0, 0x9cb8, 0x1, 0x1);
        gbc.writeMem(0x9cb8, { 0xd4 });
        gbc.writeMem(0xe1e5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x4f90, gbc.sp());
        EXPECT(0xe1e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0x9cb8));
        EXPECT(0xcb, gbc.readMem(0xe1e5));
        EXPECT(0xa6, gbc.readMem(0xe1e6));
        // CB A6 026B
        gbc.setState(0x2f07, 0x725f, 0x5aa0, 0x498c, 0xc5aa, 0xbf88, 0x0, 0x0);
        gbc.writeMem(0x2f07, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf88, { 0x35 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x725f, gbc.sp());
        EXPECT(0x2f09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x25, gbc.readMem(0xbf88));
        // CB A6 026C
        gbc.setState(0xea08, 0x2942, 0xa7e0, 0x8894, 0x8c22, 0x8351, 0x1, 0x1);
        gbc.writeMem(0x8351, { 0xe7 });
        gbc.writeMem(0xea08, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x2942, gbc.sp());
        EXPECT(0xea0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe7, gbc.readMem(0x8351));
        EXPECT(0xcb, gbc.readMem(0xea08));
        EXPECT(0xa6, gbc.readMem(0xea09));
        // CB A6 026D
        gbc.setState(0x760, 0xd3aa, 0xb270, 0x71dc, 0x8256, 0xe2dc, 0x1, 0x1);
        gbc.writeMem(0x760, { 0xcb, 0xa6 });
        gbc.writeMem(0xe2dc, { 0xed });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xd3aa, gbc.sp());
        EXPECT(0x762, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xe2dc));
        // CB A6 026F
        gbc.setState(0x55b0, 0x8de3, 0x2e30, 0xc9b7, 0x6fb9, 0xb2a2, 0x1, 0x1);
        gbc.writeMem(0x55b0, { 0xcb, 0xa6 });
        gbc.writeMem(0xb2a2, { 0x74 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x8de3, gbc.sp());
        EXPECT(0x55b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0xb2a2));
        // CB A6 0276
        gbc.setState(0xbb5f, 0x3ecb, 0xecf0, 0xa53d, 0xcf01, 0x796c, 0x0, 0x0);
        gbc.writeMem(0x796c, { 0xe2 });
        gbc.writeMem(0xbb5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x3ecb, gbc.sp());
        EXPECT(0xbb61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb5f));
        EXPECT(0xa6, gbc.readMem(0xbb60));
        // CB A6 0278
        gbc.setState(0x48c6, 0x4ed3, 0x4dc0, 0x38fc, 0x6a54, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0x48c6, { 0xcb, 0xa6 });
        gbc.writeMem(0xce8f, { 0x15 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x4ed3, gbc.sp());
        EXPECT(0x48c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xce8f));
        // CB A6 0279
        gbc.setState(0xc4d, 0x9e56, 0xbd0, 0x8afd, 0x2271, 0xc75a, 0x0, 0x0);
        gbc.writeMem(0xc4d, { 0xcb, 0xa6 });
        gbc.writeMem(0xc75a, { 0xb5 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x9e56, gbc.sp());
        EXPECT(0xc4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0xc75a));
        // CB A6 027A
        gbc.setState(0x9390, 0x62c9, 0x2c00, 0x54c, 0x476a, 0x8df5, 0x1, 0x1);
        gbc.writeMem(0x8df5, { 0xa6 });
        gbc.writeMem(0x9390, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x62c9, gbc.sp());
        EXPECT(0x9392, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0x8df5));
        EXPECT(0xcb, gbc.readMem(0x9390));
        EXPECT(0xa6, gbc.readMem(0x9391));
        // CB A6 027B
        gbc.setState(0xebd4, 0x47dc, 0x450, 0xc1b1, 0x5f7f, 0xc615, 0x0, 0x0);
        gbc.writeMem(0xc615, { 0x7b });
        gbc.writeMem(0xebd4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x47dc, gbc.sp());
        EXPECT(0xebd6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xc615));
        EXPECT(0xcb, gbc.readMem(0xebd4));
        EXPECT(0xa6, gbc.readMem(0xebd5));
        // CB A6 027D
        gbc.setState(0x461b, 0x5eb8, 0xc870, 0xe443, 0xfd2e, 0xfe6a, 0x0, 0x0);
        gbc.writeMem(0x461b, { 0xcb, 0xa6 });
        gbc.writeMem(0xfe6a, { 0xe5 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x5eb8, gbc.sp());
        EXPECT(0x461d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xfe6a));
        // CB A6 027F
        gbc.setState(0x5fe, 0x3e54, 0xc800, 0x1e83, 0xf40e, 0xb448, 0x0, 0x0);
        gbc.writeMem(0x5fe, { 0xcb, 0xa6 });
        gbc.writeMem(0xb448, { 0xeb });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x3e54, gbc.sp());
        EXPECT(0x600, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xb448));
        // CB A6 0280
        gbc.setState(0x2215, 0xfe0b, 0x8cf0, 0xc723, 0x5ced, 0xcb1f, 0x1, 0x0);
        gbc.writeMem(0x2215, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb1f, { 0xfe });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xfe0b, gbc.sp());
        EXPECT(0x2217, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0xcb1f));
        // CB A6 0283
        gbc.setState(0x94e8, 0xcb9b, 0x58a0, 0x5fb9, 0x4f4e, 0xb4a7, 0x1, 0x0);
        gbc.writeMem(0x94e8, { 0xcb, 0xa6 });
        gbc.writeMem(0xb4a7, { 0x79 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xcb9b, gbc.sp());
        EXPECT(0x94ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94e8));
        EXPECT(0xa6, gbc.readMem(0x94e9));
        EXPECT(0x69, gbc.readMem(0xb4a7));
        // CB A6 0284
        gbc.setState(0x9ba5, 0xd909, 0xe050, 0xdc8a, 0xe5d6, 0x9ec0, 0x0, 0x1);
        gbc.writeMem(0x9ba5, { 0xcb, 0xa6 });
        gbc.writeMem(0x9ec0, { 0x4a });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xd909, gbc.sp());
        EXPECT(0x9ba7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ba5));
        EXPECT(0xa6, gbc.readMem(0x9ba6));
        EXPECT(0x4a, gbc.readMem(0x9ec0));
        // CB A6 0285
        gbc.setState(0xaecb, 0xfe76, 0xd400, 0x92f1, 0xee5d, 0xd0f7, 0x0, 0x0);
        gbc.writeMem(0xaecb, { 0xcb, 0xa6 });
        gbc.writeMem(0xd0f7, { 0x24 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xfe76, gbc.sp());
        EXPECT(0xaecd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaecb));
        EXPECT(0xa6, gbc.readMem(0xaecc));
        EXPECT(0x24, gbc.readMem(0xd0f7));
        // CB A6 0287
        gbc.setState(0xd270, 0x286b, 0x8320, 0x2e88, 0x5b68, 0x783c, 0x1, 0x1);
        gbc.writeMem(0x783c, { 0xc9 });
        gbc.writeMem(0xd270, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x286b, gbc.sp());
        EXPECT(0xd272, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd270));
        EXPECT(0xa6, gbc.readMem(0xd271));
        // CB A6 0288
        gbc.setState(0x8e94, 0x4814, 0xf8c0, 0x2fa6, 0xe33f, 0x9fee, 0x1, 0x0);
        gbc.writeMem(0x8e94, { 0xcb, 0xa6 });
        gbc.writeMem(0x9fee, { 0x9b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x4814, gbc.sp());
        EXPECT(0x8e96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e94));
        EXPECT(0xa6, gbc.readMem(0x8e95));
        EXPECT(0x8b, gbc.readMem(0x9fee));
        // CB A6 0289
        gbc.setState(0xe53c, 0xc10b, 0x9190, 0x8301, 0xf833, 0xd040, 0x0, 0x1);
        gbc.writeMem(0xd040, { 0xb6 });
        gbc.writeMem(0xe53c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xc10b, gbc.sp());
        EXPECT(0xe53e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xd040));
        EXPECT(0xcb, gbc.readMem(0xe53c));
        EXPECT(0xa6, gbc.readMem(0xe53d));
        // CB A6 028A
        gbc.setState(0xa43d, 0xd8f5, 0xb590, 0x1243, 0xc259, 0xab66, 0x1, 0x0);
        gbc.writeMem(0xa43d, { 0xcb, 0xa6 });
        gbc.writeMem(0xab66, { 0x50 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd8f5, gbc.sp());
        EXPECT(0xa43f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa43d));
        EXPECT(0xa6, gbc.readMem(0xa43e));
        EXPECT(0x40, gbc.readMem(0xab66));
        // CB A6 028B
        gbc.setState(0xaf3b, 0x9362, 0x9e10, 0x3a3e, 0x2154, 0xdf5d, 0x0, 0x0);
        gbc.writeMem(0xaf3b, { 0xcb, 0xa6 });
        gbc.writeMem(0xdf5d, { 0x47 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x9362, gbc.sp());
        EXPECT(0xaf3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf3b));
        EXPECT(0xa6, gbc.readMem(0xaf3c));
        EXPECT(0x47, gbc.readMem(0xdf5d));
        // CB A6 0290
        gbc.setState(0xe9b3, 0x962f, 0x42b0, 0xfe5a, 0xfae0, 0xada6, 0x1, 0x1);
        gbc.writeMem(0xada6, { 0x4a });
        gbc.writeMem(0xe9b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x962f, gbc.sp());
        EXPECT(0xe9b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xada6));
        EXPECT(0xcb, gbc.readMem(0xe9b3));
        EXPECT(0xa6, gbc.readMem(0xe9b4));
        // CB A6 0292
        gbc.setState(0xb889, 0xf4ca, 0xdef0, 0x22ac, 0x1f9b, 0xcfeb, 0x0, 0x0);
        gbc.writeMem(0xb889, { 0xcb, 0xa6 });
        gbc.writeMem(0xcfeb, { 0x30 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xf4ca, gbc.sp());
        EXPECT(0xb88b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb889));
        EXPECT(0xa6, gbc.readMem(0xb88a));
        EXPECT(0x20, gbc.readMem(0xcfeb));
        // CB A6 0293
        gbc.setState(0x5685, 0x269e, 0x3810, 0xaa32, 0x8e1c, 0xa86b, 0x0, 0x0);
        gbc.writeMem(0x5685, { 0xcb, 0xa6 });
        gbc.writeMem(0xa86b, { 0xd5 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x269e, gbc.sp());
        EXPECT(0x5687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0xa86b));
        // CB A6 0294
        gbc.setState(0x9841, 0x7c76, 0xb540, 0x143a, 0xb94b, 0x4035, 0x0, 0x0);
        gbc.writeMem(0x4035, { 0xc1 });
        gbc.writeMem(0x9841, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x7c76, gbc.sp());
        EXPECT(0x9843, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9841));
        EXPECT(0xa6, gbc.readMem(0x9842));
        // CB A6 0295
        gbc.setState(0x14c0, 0x6d49, 0x9710, 0xec65, 0x760f, 0xe5f7, 0x1, 0x1);
        gbc.writeMem(0x14c0, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5f7, { 0x6d });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x6d49, gbc.sp());
        EXPECT(0x14c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0xe5f7));
        // CB A6 0296
        gbc.setState(0x2218, 0x8aeb, 0x30d0, 0xb108, 0x1c0a, 0x3e00, 0x1, 0x0);
        gbc.writeMem(0x2218, { 0xcb, 0xa6 });
        gbc.writeMem(0x3e00, { 0x43 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x8aeb, gbc.sp());
        EXPECT(0x221a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0297
        gbc.setState(0x9bfd, 0x34da, 0xb040, 0x6dde, 0x1b36, 0x3f7c, 0x0, 0x0);
        gbc.writeMem(0x3f7c, { 0x84 });
        gbc.writeMem(0x9bfd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x34da, gbc.sp());
        EXPECT(0x9bff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bfd));
        EXPECT(0xa6, gbc.readMem(0x9bfe));
        // CB A6 0298
        gbc.setState(0x9695, 0x5dd1, 0x1650, 0xfb33, 0xe0ec, 0x64e3, 0x1, 0x1);
        gbc.writeMem(0x64e3, { 0xa8 });
        gbc.writeMem(0x9695, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x5dd1, gbc.sp());
        EXPECT(0x9697, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9695));
        EXPECT(0xa6, gbc.readMem(0x9696));
        // CB A6 0299
        gbc.setState(0x7431, 0x6cfb, 0xa560, 0x7884, 0x1bcb, 0xb29e, 0x1, 0x1);
        gbc.writeMem(0x7431, { 0xcb, 0xa6 });
        gbc.writeMem(0xb29e, { 0xc2 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x6cfb, gbc.sp());
        EXPECT(0x7433, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0xb29e));
        // CB A6 029B
        gbc.setState(0xaedc, 0x5200, 0xf920, 0x882b, 0x87ba, 0x67e4, 0x1, 0x1);
        gbc.writeMem(0x67e4, { 0x6f });
        gbc.writeMem(0xaedc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x5200, gbc.sp());
        EXPECT(0xaede, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaedc));
        EXPECT(0xa6, gbc.readMem(0xaedd));
        // CB A6 029D
        gbc.setState(0x8a47, 0x7512, 0xcfe0, 0x374b, 0x8d0a, 0xe8e1, 0x0, 0x0);
        gbc.writeMem(0x8a47, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8e1, { 0xa1 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x7512, gbc.sp());
        EXPECT(0x8a49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a47));
        EXPECT(0xa6, gbc.readMem(0x8a48));
        EXPECT(0xa1, gbc.readMem(0xe8e1));
        // CB A6 02A0
        gbc.setState(0x13c7, 0xd061, 0xf6e0, 0xf5f, 0x357, 0x51c9, 0x0, 0x0);
        gbc.writeMem(0x13c7, { 0xcb, 0xa6 });
        gbc.writeMem(0x51c9, { 0x2c });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd061, gbc.sp());
        EXPECT(0x13c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 02A2
        gbc.setState(0xe3b3, 0xb0d1, 0x9200, 0x8457, 0x125c, 0x5b18, 0x0, 0x0);
        gbc.writeMem(0x5b18, { 0xcb });
        gbc.writeMem(0xe3b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xb0d1, gbc.sp());
        EXPECT(0xe3b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3b3));
        EXPECT(0xa6, gbc.readMem(0xe3b4));
        // CB A6 02A4
        gbc.setState(0x41f6, 0xa72b, 0x33a0, 0xa59e, 0x1e77, 0x761e, 0x0, 0x0);
        gbc.writeMem(0x41f6, { 0xcb, 0xa6 });
        gbc.writeMem(0x761e, { 0x82 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xa72b, gbc.sp());
        EXPECT(0x41f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 02A5
        gbc.setState(0xeaff, 0x808c, 0xf360, 0x65e0, 0xc69a, 0x407, 0x0, 0x0);
        gbc.writeMem(0x407, { 0xae });
        gbc.writeMem(0xeaff, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x808c, gbc.sp());
        EXPECT(0xeb01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaff));
        EXPECT(0xa6, gbc.readMem(0xeb00));
        // CB A6 02A6
        gbc.setState(0x8c9b, 0x7df7, 0x1cf0, 0xe254, 0x3163, 0xdafc, 0x0, 0x0);
        gbc.writeMem(0x8c9b, { 0xcb, 0xa6 });
        gbc.writeMem(0xdafc, { 0x67 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x7df7, gbc.sp());
        EXPECT(0x8c9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c9b));
        EXPECT(0xa6, gbc.readMem(0x8c9c));
        EXPECT(0x67, gbc.readMem(0xdafc));
        // CB A6 02A7
        gbc.setState(0xbb09, 0x7b9b, 0xa310, 0xd5af, 0x9255, 0xd860, 0x0, 0x0);
        gbc.writeMem(0xbb09, { 0xcb, 0xa6 });
        gbc.writeMem(0xd860, { 0xbb });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x7b9b, gbc.sp());
        EXPECT(0xbb0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb09));
        EXPECT(0xa6, gbc.readMem(0xbb0a));
        EXPECT(0xab, gbc.readMem(0xd860));
        // CB A6 02A8
        gbc.setState(0x9f92, 0xfd69, 0x6300, 0x3462, 0xc627, 0xc7bc, 0x1, 0x0);
        gbc.writeMem(0x9f92, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7bc, { 0x6 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xfd69, gbc.sp());
        EXPECT(0x9f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f92));
        EXPECT(0xa6, gbc.readMem(0x9f93));
        EXPECT(0x6, gbc.readMem(0xc7bc));
        // CB A6 02A9
        gbc.setState(0xe273, 0x64a0, 0x27b0, 0x9041, 0x749a, 0xebcd, 0x1, 0x1);
        gbc.writeMem(0xe273, { 0xcb, 0xa6 });
        gbc.writeMem(0xebcd, { 0x6f });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x64a0, gbc.sp());
        EXPECT(0xe275, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe273));
        EXPECT(0xa6, gbc.readMem(0xe274));
        EXPECT(0x6f, gbc.readMem(0xebcd));
        // CB A6 02AA
        gbc.setState(0x92e0, 0x3c44, 0xaca0, 0x41, 0xae3, 0xcec4, 0x0, 0x1);
        gbc.writeMem(0x92e0, { 0xcb, 0xa6 });
        gbc.writeMem(0xcec4, { 0x46 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x3c44, gbc.sp());
        EXPECT(0x92e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92e0));
        EXPECT(0xa6, gbc.readMem(0x92e1));
        EXPECT(0x46, gbc.readMem(0xcec4));
        // CB A6 02AB
        gbc.setState(0xbf69, 0x18a9, 0x8f40, 0x5b3d, 0x11fb, 0x2436, 0x1, 0x0);
        gbc.writeMem(0x2436, { 0x44 });
        gbc.writeMem(0xbf69, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x18a9, gbc.sp());
        EXPECT(0xbf6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf69));
        EXPECT(0xa6, gbc.readMem(0xbf6a));
        // CB A6 02AF
        gbc.setState(0xcf17, 0x437d, 0x560, 0xcf4c, 0x3831, 0xdbd, 0x0, 0x0);
        gbc.writeMem(0xdbd, { 0xaf });
        gbc.writeMem(0xcf17, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x437d, gbc.sp());
        EXPECT(0xcf19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf17));
        EXPECT(0xa6, gbc.readMem(0xcf18));
        // CB A6 02B0
        gbc.setState(0xba28, 0x9c78, 0x8a00, 0xfe36, 0x6fc9, 0xb1a7, 0x0, 0x1);
        gbc.writeMem(0xb1a7, { 0x73 });
        gbc.writeMem(0xba28, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9c78, gbc.sp());
        EXPECT(0xba2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xb1a7));
        EXPECT(0xcb, gbc.readMem(0xba28));
        EXPECT(0xa6, gbc.readMem(0xba29));
        // CB A6 02B2
        gbc.setState(0x9fbb, 0x89be, 0x8b80, 0xab68, 0x50ed, 0x53d5, 0x1, 0x1);
        gbc.writeMem(0x53d5, { 0x23 });
        gbc.writeMem(0x9fbb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x89be, gbc.sp());
        EXPECT(0x9fbd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fbb));
        EXPECT(0xa6, gbc.readMem(0x9fbc));
        // CB A6 02B4
        gbc.setState(0x8c47, 0xf011, 0x5c30, 0xadc3, 0x2e00, 0xb7fc, 0x1, 0x1);
        gbc.writeMem(0x8c47, { 0xcb, 0xa6 });
        gbc.writeMem(0xb7fc, { 0x62 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xf011, gbc.sp());
        EXPECT(0x8c49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c47));
        EXPECT(0xa6, gbc.readMem(0x8c48));
        EXPECT(0x62, gbc.readMem(0xb7fc));
        // CB A6 02B6
        gbc.setState(0x2746, 0x4203, 0x8a20, 0x6ef2, 0x70de, 0xff73, 0x0, 0x0);
        gbc.writeMem(0x2746, { 0xcb, 0xa6 });
        gbc.writeMem(0xff73, { 0x39 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x4203, gbc.sp());
        EXPECT(0x2748, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xff73));
        // CB A6 02B9
        gbc.setState(0x3272, 0x7a26, 0x8f20, 0x7188, 0x6195, 0x3410, 0x1, 0x0);
        gbc.writeMem(0x3272, { 0xcb, 0xa6 });
        gbc.writeMem(0x3410, { 0x6e });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x7a26, gbc.sp());
        EXPECT(0x3274, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 02BA
        gbc.setState(0x586f, 0xad7b, 0x8ad0, 0xd85c, 0x2a58, 0x1d89, 0x1, 0x1);
        gbc.writeMem(0x1d89, { 0x47 });
        gbc.writeMem(0x586f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xad7b, gbc.sp());
        EXPECT(0x5871, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 02BB
        gbc.setState(0x9f11, 0xf7be, 0x4db0, 0x3600, 0x77f5, 0x7109, 0x1, 0x0);
        gbc.writeMem(0x7109, { 0xb });
        gbc.writeMem(0x9f11, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xf7be, gbc.sp());
        EXPECT(0x9f13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f11));
        EXPECT(0xa6, gbc.readMem(0x9f12));
        // CB A6 02BC
        gbc.setState(0xac3a, 0x4b5e, 0xed00, 0x1733, 0xb0ae, 0xd9b9, 0x0, 0x0);
        gbc.writeMem(0xac3a, { 0xcb, 0xa6 });
        gbc.writeMem(0xd9b9, { 0x2d });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x4b5e, gbc.sp());
        EXPECT(0xac3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac3a));
        EXPECT(0xa6, gbc.readMem(0xac3b));
        EXPECT(0x2d, gbc.readMem(0xd9b9));
        // CB A6 02BD
        gbc.setState(0x8a4, 0x321a, 0xaad0, 0xb76c, 0x7f12, 0x90a9, 0x1, 0x1);
        gbc.writeMem(0x8a4, { 0xcb, 0xa6 });
        gbc.writeMem(0x90a9, { 0x43 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x321a, gbc.sp());
        EXPECT(0x8a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0x90a9));
        // CB A6 02BF
        gbc.setState(0xde8c, 0xbdd2, 0x37c0, 0xd5da, 0x7701, 0x35a6, 0x1, 0x0);
        gbc.writeMem(0x35a6, { 0xe8 });
        gbc.writeMem(0xde8c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xbdd2, gbc.sp());
        EXPECT(0xde8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde8c));
        EXPECT(0xa6, gbc.readMem(0xde8d));
        // CB A6 02C0
        gbc.setState(0x2138, 0x4fb5, 0x2a20, 0x53, 0x963a, 0xbf5e, 0x1, 0x0);
        gbc.writeMem(0x2138, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf5e, { 0x8b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x4fb5, gbc.sp());
        EXPECT(0x213a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0xbf5e));
        // CB A6 02C1
        gbc.setState(0x612f, 0xc8e1, 0x21d0, 0x37c8, 0x59a6, 0xa644, 0x0, 0x0);
        gbc.writeMem(0x612f, { 0xcb, 0xa6 });
        gbc.writeMem(0xa644, { 0x46 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xc8e1, gbc.sp());
        EXPECT(0x6131, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0xa644));
        // CB A6 02C2
        gbc.setState(0x8db0, 0xdb8f, 0xfc70, 0x2365, 0xe130, 0xf8a0, 0x1, 0x1);
        gbc.writeMem(0x8db0, { 0xcb, 0xa6 });
        gbc.writeMem(0xf8a0, { 0xe8 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xdb8f, gbc.sp());
        EXPECT(0x8db2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8db0));
        EXPECT(0xa6, gbc.readMem(0x8db1));
        EXPECT(0xe8, gbc.readMem(0xf8a0));
        // CB A6 02C4
        gbc.setState(0x500b, 0xdd0a, 0x7df0, 0xe377, 0x2987, 0x9478, 0x0, 0x1);
        gbc.writeMem(0x500b, { 0xcb, 0xa6 });
        gbc.writeMem(0x9478, { 0x15 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xdd0a, gbc.sp());
        EXPECT(0x500d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x9478));
        // CB A6 02C5
        gbc.setState(0x474d, 0xa997, 0x7e10, 0xc2a7, 0x9de, 0x25c5, 0x0, 0x0);
        gbc.writeMem(0x25c5, { 0xec });
        gbc.writeMem(0x474d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xa997, gbc.sp());
        EXPECT(0x474f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 02C7
        gbc.setState(0xc36d, 0x8cbc, 0x6760, 0x51d0, 0x45fd, 0xb8fe, 0x0, 0x0);
        gbc.writeMem(0xb8fe, { 0x9f });
        gbc.writeMem(0xc36d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x8cbc, gbc.sp());
        EXPECT(0xc36f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0xb8fe));
        EXPECT(0xcb, gbc.readMem(0xc36d));
        EXPECT(0xa6, gbc.readMem(0xc36e));
        // CB A6 02CA
        gbc.setState(0x89bd, 0x26a7, 0x7330, 0x8fdc, 0x65df, 0xa359, 0x1, 0x1);
        gbc.writeMem(0x89bd, { 0xcb, 0xa6 });
        gbc.writeMem(0xa359, { 0xee });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x26a7, gbc.sp());
        EXPECT(0x89bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89bd));
        EXPECT(0xa6, gbc.readMem(0x89be));
        EXPECT(0xee, gbc.readMem(0xa359));
        // CB A6 02CE
        gbc.setState(0xcce9, 0x7d9, 0x8670, 0x30ef, 0x31df, 0x9e81, 0x0, 0x1);
        gbc.writeMem(0x9e81, { 0x96 });
        gbc.writeMem(0xcce9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x7d9, gbc.sp());
        EXPECT(0xcceb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0x9e81));
        EXPECT(0xcb, gbc.readMem(0xcce9));
        EXPECT(0xa6, gbc.readMem(0xccea));
        // CB A6 02D0
        gbc.setState(0x36d8, 0xb1c, 0x93c0, 0x8533, 0xa754, 0x8a35, 0x0, 0x1);
        gbc.writeMem(0x36d8, { 0xcb, 0xa6 });
        gbc.writeMem(0x8a35, { 0xc3 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xb1c, gbc.sp());
        EXPECT(0x36da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0x8a35));
        // CB A6 02D2
        gbc.setState(0xcaed, 0xc34d, 0x87a0, 0x61db, 0x3409, 0x2ff8, 0x1, 0x1);
        gbc.writeMem(0x2ff8, { 0x61 });
        gbc.writeMem(0xcaed, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xc34d, gbc.sp());
        EXPECT(0xcaef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaed));
        EXPECT(0xa6, gbc.readMem(0xcaee));
        // CB A6 02D7
        gbc.setState(0x6895, 0xd6c9, 0x4050, 0x90c7, 0xcabf, 0x46a0, 0x0, 0x1);
        gbc.writeMem(0x46a0, { 0x4e });
        gbc.writeMem(0x6895, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd6c9, gbc.sp());
        EXPECT(0x6897, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 02D9
        gbc.setState(0x2ae5, 0xc15, 0x8450, 0xdd4c, 0xcbd, 0x788, 0x0, 0x1);
        gbc.writeMem(0x788, { 0x6d });
        gbc.writeMem(0x2ae5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xc15, gbc.sp());
        EXPECT(0x2ae7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 02DB
        gbc.setState(0x5f27, 0x4b44, 0x3a0, 0x201c, 0xfa41, 0x6748, 0x1, 0x0);
        gbc.writeMem(0x5f27, { 0xcb, 0xa6 });
        gbc.writeMem(0x6748, { 0xaa });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x4b44, gbc.sp());
        EXPECT(0x5f29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 02DC
        gbc.setState(0x2182, 0xb24c, 0x1d40, 0x49a2, 0xbb72, 0x8eef, 0x1, 0x0);
        gbc.writeMem(0x2182, { 0xcb, 0xa6 });
        gbc.writeMem(0x8eef, { 0x21 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xb24c, gbc.sp());
        EXPECT(0x2184, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0x8eef));
        // CB A6 02DD
        gbc.setState(0x63c3, 0x66ad, 0xbcc0, 0xb0ea, 0x942c, 0xc096, 0x1, 0x0);
        gbc.writeMem(0x63c3, { 0xcb, 0xa6 });
        gbc.writeMem(0xc096, { 0x9b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x66ad, gbc.sp());
        EXPECT(0x63c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0xc096));
        // CB A6 02DF
        gbc.setState(0xe7b9, 0x5dea, 0xfd20, 0x7ef, 0x71dd, 0x70c5, 0x1, 0x1);
        gbc.writeMem(0x70c5, { 0xed });
        gbc.writeMem(0xe7b9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x5dea, gbc.sp());
        EXPECT(0xe7bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7b9));
        EXPECT(0xa6, gbc.readMem(0xe7ba));
        // CB A6 02E1
        gbc.setState(0x2a98, 0x1c6e, 0x2c0, 0x3db8, 0x2d76, 0xec36, 0x0, 0x0);
        gbc.writeMem(0x2a98, { 0xcb, 0xa6 });
        gbc.writeMem(0xec36, { 0x68 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x1c6e, gbc.sp());
        EXPECT(0x2a9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xec36));
        // CB A6 02E2
        gbc.setState(0x9d75, 0x5d97, 0xaff0, 0x65a8, 0xe1e2, 0xde13, 0x0, 0x0);
        gbc.writeMem(0x9d75, { 0xcb, 0xa6 });
        gbc.writeMem(0xde13, { 0xa5 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x5d97, gbc.sp());
        EXPECT(0x9d77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d75));
        EXPECT(0xa6, gbc.readMem(0x9d76));
        EXPECT(0xa5, gbc.readMem(0xde13));
        // CB A6 02E3
        gbc.setState(0x5a80, 0x6deb, 0x81f0, 0xd3cd, 0x6e38, 0xfedb, 0x1, 0x0);
        gbc.writeMem(0x5a80, { 0xcb, 0xa6 });
        gbc.writeMem(0xfedb, { 0x21 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x6deb, gbc.sp());
        EXPECT(0x5a82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xfedb));
        // CB A6 02E4
        gbc.setState(0x9e65, 0x17fb, 0x7ff0, 0xf930, 0x45eb, 0xb57f, 0x0, 0x0);
        gbc.writeMem(0x9e65, { 0xcb, 0xa6 });
        gbc.writeMem(0xb57f, { 0xc6 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x17fb, gbc.sp());
        EXPECT(0x9e67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e65));
        EXPECT(0xa6, gbc.readMem(0x9e66));
        EXPECT(0xc6, gbc.readMem(0xb57f));
        // CB A6 02E5
        gbc.setState(0x1c0e, 0xc2f3, 0x6ec0, 0x535f, 0xb16a, 0xad65, 0x1, 0x1);
        gbc.writeMem(0x1c0e, { 0xcb, 0xa6 });
        gbc.writeMem(0xad65, { 0xb4 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xc2f3, gbc.sp());
        EXPECT(0x1c10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xad65));
        // CB A6 02E7
        gbc.setState(0x2c5f, 0xb57e, 0x4f60, 0x8ef6, 0x993a, 0xa0b8, 0x1, 0x1);
        gbc.writeMem(0x2c5f, { 0xcb, 0xa6 });
        gbc.writeMem(0xa0b8, { 0xe3 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xb57e, gbc.sp());
        EXPECT(0x2c61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0xa0b8));
        // CB A6 02E9
        gbc.setState(0x325e, 0x53e1, 0xdf70, 0xcf30, 0x6d1, 0x934f, 0x0, 0x1);
        gbc.writeMem(0x325e, { 0xcb, 0xa6 });
        gbc.writeMem(0x934f, { 0x19 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x53e1, gbc.sp());
        EXPECT(0x3260, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0x934f));
        // CB A6 02EC
        gbc.setState(0x7a78, 0x3cd, 0x4d30, 0x638a, 0x2ff2, 0xa5f4, 0x1, 0x1);
        gbc.writeMem(0x7a78, { 0xcb, 0xa6 });
        gbc.writeMem(0xa5f4, { 0x63 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x3cd, gbc.sp());
        EXPECT(0x7a7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xa5f4));
        // CB A6 02ED
        gbc.setState(0xbff4, 0xaa45, 0xa020, 0x6e55, 0x12f, 0x7d1e, 0x0, 0x0);
        gbc.writeMem(0x7d1e, { 0x67 });
        gbc.writeMem(0xbff4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xaa45, gbc.sp());
        EXPECT(0xbff6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbff4));
        EXPECT(0xa6, gbc.readMem(0xbff5));
        // CB A6 02EE
        gbc.setState(0x851, 0xb0e2, 0x8e10, 0xf86, 0xbf5, 0xbece, 0x1, 0x1);
        gbc.writeMem(0x851, { 0xcb, 0xa6 });
        gbc.writeMem(0xbece, { 0x14 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xb0e2, gbc.sp());
        EXPECT(0x853, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xbece));
        // CB A6 02EF
        gbc.setState(0xed98, 0x1257, 0xedb0, 0x4aac, 0x3f56, 0xd4a0, 0x1, 0x1);
        gbc.writeMem(0xd4a0, { 0x7a });
        gbc.writeMem(0xed98, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x1257, gbc.sp());
        EXPECT(0xed9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xd4a0));
        EXPECT(0xcb, gbc.readMem(0xed98));
        EXPECT(0xa6, gbc.readMem(0xed99));
        // CB A6 02F0
        gbc.setState(0xe05c, 0x1193, 0x740, 0x24d1, 0x222, 0x1445, 0x0, 0x1);
        gbc.writeMem(0x1445, { 0xb });
        gbc.writeMem(0xe05c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x1193, gbc.sp());
        EXPECT(0xe05e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe05c));
        EXPECT(0xa6, gbc.readMem(0xe05d));
        // CB A6 02F1
        gbc.setState(0x2710, 0x71c8, 0x5bd0, 0x25db, 0x2cba, 0xa52e, 0x1, 0x0);
        gbc.writeMem(0x2710, { 0xcb, 0xa6 });
        gbc.writeMem(0xa52e, { 0x6a });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x71c8, gbc.sp());
        EXPECT(0x2712, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xa52e));
        // CB A6 02F2
        gbc.setState(0xa59d, 0xdda8, 0xac40, 0x7f54, 0x4239, 0x9ec2, 0x0, 0x1);
        gbc.writeMem(0x9ec2, { 0xda });
        gbc.writeMem(0xa59d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xdda8, gbc.sp());
        EXPECT(0xa59f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0x9ec2));
        EXPECT(0xcb, gbc.readMem(0xa59d));
        EXPECT(0xa6, gbc.readMem(0xa59e));
        // CB A6 02F3
        gbc.setState(0xee84, 0x860d, 0x1f00, 0xe4d5, 0x2fe9, 0x8595, 0x0, 0x1);
        gbc.writeMem(0x8595, { 0xab });
        gbc.writeMem(0xee84, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x860d, gbc.sp());
        EXPECT(0xee86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0x8595));
        EXPECT(0xcb, gbc.readMem(0xee84));
        EXPECT(0xa6, gbc.readMem(0xee85));
        // CB A6 02F4
        gbc.setState(0x63c9, 0x12e6, 0x2020, 0x531f, 0x1fa8, 0xd0eb, 0x0, 0x1);
        gbc.writeMem(0x63c9, { 0xcb, 0xa6 });
        gbc.writeMem(0xd0eb, { 0xeb });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x12e6, gbc.sp());
        EXPECT(0x63cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xd0eb));
        // CB A6 02F5
        gbc.setState(0x484f, 0x2e6c, 0x3400, 0x71be, 0x480c, 0x66f1, 0x0, 0x0);
        gbc.writeMem(0x484f, { 0xcb, 0xa6 });
        gbc.writeMem(0x66f1, { 0xcd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x2e6c, gbc.sp());
        EXPECT(0x4851, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 02F7
        gbc.setState(0x2dc2, 0x4cdd, 0x65e0, 0xcfa, 0xe8e6, 0xaf62, 0x1, 0x0);
        gbc.writeMem(0x2dc2, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf62, { 0xff });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x4cdd, gbc.sp());
        EXPECT(0x2dc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xaf62));
        // CB A6 02F8
        gbc.setState(0x8b3a, 0xe6d9, 0x6d80, 0xae29, 0x3a8d, 0x4442, 0x1, 0x1);
        gbc.writeMem(0x4442, { 0x29 });
        gbc.writeMem(0x8b3a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xe6d9, gbc.sp());
        EXPECT(0x8b3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b3a));
        EXPECT(0xa6, gbc.readMem(0x8b3b));
        // CB A6 02F9
        gbc.setState(0x569c, 0x4f3a, 0xfc30, 0xada2, 0x4fc8, 0xef71, 0x1, 0x1);
        gbc.writeMem(0x569c, { 0xcb, 0xa6 });
        gbc.writeMem(0xef71, { 0xd6 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x4f3a, gbc.sp());
        EXPECT(0x569e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc6, gbc.readMem(0xef71));
        // CB A6 02FA
        gbc.setState(0xe834, 0xcdf6, 0x16e0, 0xa858, 0x290f, 0xe79, 0x0, 0x0);
        gbc.writeMem(0xe79, { 0x9 });
        gbc.writeMem(0xe834, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xcdf6, gbc.sp());
        EXPECT(0xe836, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe834));
        EXPECT(0xa6, gbc.readMem(0xe835));
        // CB A6 02FB
        gbc.setState(0x82c7, 0xe9fc, 0x8440, 0x9b8c, 0xeef5, 0x9db7, 0x0, 0x1);
        gbc.writeMem(0x82c7, { 0xcb, 0xa6 });
        gbc.writeMem(0x9db7, { 0x73 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xe9fc, gbc.sp());
        EXPECT(0x82c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82c7));
        EXPECT(0xa6, gbc.readMem(0x82c8));
        EXPECT(0x63, gbc.readMem(0x9db7));
        // CB A6 02FC
        gbc.setState(0x9c6a, 0x9893, 0xfa80, 0x3786, 0xf35d, 0xd762, 0x1, 0x0);
        gbc.writeMem(0x9c6a, { 0xcb, 0xa6 });
        gbc.writeMem(0xd762, { 0x1a });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x9893, gbc.sp());
        EXPECT(0x9c6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c6a));
        EXPECT(0xa6, gbc.readMem(0x9c6b));
        EXPECT(0xa, gbc.readMem(0xd762));
        // CB A6 02FD
        gbc.setState(0xdfcd, 0x1c71, 0x2050, 0x5f1f, 0xd6a6, 0x6ae6, 0x1, 0x1);
        gbc.writeMem(0x6ae6, { 0xa });
        gbc.writeMem(0xdfcd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x1c71, gbc.sp());
        EXPECT(0xdfcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfcd));
        EXPECT(0xa6, gbc.readMem(0xdfce));
        // CB A6 02FE
        gbc.setState(0x5b5, 0x9b00, 0x45b0, 0x6ea1, 0x8959, 0xd9f4, 0x1, 0x0);
        gbc.writeMem(0x5b5, { 0xcb, 0xa6 });
        gbc.writeMem(0xd9f4, { 0xf4 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x9b00, gbc.sp());
        EXPECT(0x5b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe4, gbc.readMem(0xd9f4));
        // CB A6 02FF
        gbc.setState(0xae47, 0x5ae9, 0x9360, 0xdeca, 0x6ee8, 0x6620, 0x1, 0x0);
        gbc.writeMem(0x6620, { 0x6d });
        gbc.writeMem(0xae47, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x5ae9, gbc.sp());
        EXPECT(0xae49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae47));
        EXPECT(0xa6, gbc.readMem(0xae48));
        // CB A6 0300
        gbc.setState(0xef65, 0x228d, 0x7910, 0xcd70, 0xf974, 0xc740, 0x0, 0x1);
        gbc.writeMem(0xc740, { 0xca });
        gbc.writeMem(0xef65, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x228d, gbc.sp());
        EXPECT(0xef67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0xc740));
        EXPECT(0xcb, gbc.readMem(0xef65));
        EXPECT(0xa6, gbc.readMem(0xef66));
        // CB A6 0301
        gbc.setState(0xc884, 0xa9d3, 0xe8b0, 0x173a, 0x6c1f, 0x651a, 0x1, 0x0);
        gbc.writeMem(0x651a, { 0xe0 });
        gbc.writeMem(0xc884, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xa9d3, gbc.sp());
        EXPECT(0xc886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc884));
        EXPECT(0xa6, gbc.readMem(0xc885));
        // CB A6 0303
        gbc.setState(0xe33f, 0x7c40, 0x2480, 0x5ef, 0x9571, 0xc756, 0x1, 0x1);
        gbc.writeMem(0xc756, { 0x96 });
        gbc.writeMem(0xe33f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x7c40, gbc.sp());
        EXPECT(0xe341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0xc756));
        EXPECT(0xcb, gbc.readMem(0xe33f));
        EXPECT(0xa6, gbc.readMem(0xe340));
        // CB A6 0305
        gbc.setState(0xcb96, 0xe47e, 0xa480, 0x5255, 0x46d, 0x88b4, 0x1, 0x0);
        gbc.writeMem(0x88b4, { 0x74 });
        gbc.writeMem(0xcb96, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xe47e, gbc.sp());
        EXPECT(0xcb98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x88b4));
        EXPECT(0xcb, gbc.readMem(0xcb96));
        EXPECT(0xa6, gbc.readMem(0xcb97));
        // CB A6 0307
        gbc.setState(0x2f, 0xa61b, 0xb050, 0xc079, 0xc035, 0x274d, 0x0, 0x0);
        gbc.writeMem(0x2f, { 0xcb, 0xa6 });
        gbc.writeMem(0x274d, { 0x29 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa61b, gbc.sp());
        EXPECT(0x31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0308
        gbc.setState(0xbe13, 0x33fe, 0xa240, 0xdc10, 0xf46, 0x77bb, 0x0, 0x1);
        gbc.writeMem(0x77bb, { 0x49 });
        gbc.writeMem(0xbe13, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x33fe, gbc.sp());
        EXPECT(0xbe15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe13));
        EXPECT(0xa6, gbc.readMem(0xbe14));
        // CB A6 0309
        gbc.setState(0x64b2, 0xe644, 0x4aa0, 0x7ba0, 0x3047, 0x247b, 0x0, 0x0);
        gbc.writeMem(0x247b, { 0x25 });
        gbc.writeMem(0x64b2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xe644, gbc.sp());
        EXPECT(0x64b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 030A
        gbc.setState(0x3d31, 0x7f5a, 0xc680, 0x1f3f, 0x4379, 0x8226, 0x0, 0x0);
        gbc.writeMem(0x3d31, { 0xcb, 0xa6 });
        gbc.writeMem(0x8226, { 0xb1 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x7f5a, gbc.sp());
        EXPECT(0x3d33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0x8226));
        // CB A6 030B
        gbc.setState(0xb28a, 0x1615, 0x9b40, 0xb64b, 0xa74c, 0xc78a, 0x1, 0x1);
        gbc.writeMem(0xb28a, { 0xcb, 0xa6 });
        gbc.writeMem(0xc78a, { 0xff });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x1615, gbc.sp());
        EXPECT(0xb28c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb28a));
        EXPECT(0xa6, gbc.readMem(0xb28b));
        EXPECT(0xef, gbc.readMem(0xc78a));
        // CB A6 030C
        gbc.setState(0xce80, 0x6e21, 0xef40, 0xd524, 0xa987, 0x9145, 0x1, 0x0);
        gbc.writeMem(0x9145, { 0xfd });
        gbc.writeMem(0xce80, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x6e21, gbc.sp());
        EXPECT(0xce82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0x9145));
        EXPECT(0xcb, gbc.readMem(0xce80));
        EXPECT(0xa6, gbc.readMem(0xce81));
        // CB A6 030D
        gbc.setState(0x4104, 0x358c, 0x9a00, 0x6504, 0x34e1, 0xeaba, 0x1, 0x1);
        gbc.writeMem(0x4104, { 0xcb, 0xa6 });
        gbc.writeMem(0xeaba, { 0x17 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x358c, gbc.sp());
        EXPECT(0x4106, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xeaba));
        // CB A6 030E
        gbc.setState(0xd9d3, 0xdcb4, 0xf940, 0x4c6b, 0xb023, 0x11af, 0x1, 0x1);
        gbc.writeMem(0x11af, { 0xc4 });
        gbc.writeMem(0xd9d3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xdcb4, gbc.sp());
        EXPECT(0xd9d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9d3));
        EXPECT(0xa6, gbc.readMem(0xd9d4));
        // CB A6 030F
        gbc.setState(0x5652, 0x15a7, 0x4aa0, 0x202, 0x2838, 0x3046, 0x1, 0x0);
        gbc.writeMem(0x3046, { 0x28 });
        gbc.writeMem(0x5652, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x15a7, gbc.sp());
        EXPECT(0x5654, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0310
        gbc.setState(0x396a, 0xee27, 0xb850, 0x2b1, 0xb89c, 0x4295, 0x0, 0x1);
        gbc.writeMem(0x396a, { 0xcb, 0xa6 });
        gbc.writeMem(0x4295, { 0x41 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xee27, gbc.sp());
        EXPECT(0x396c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0311
        gbc.setState(0x21af, 0x3c27, 0xc700, 0x61b3, 0x5714, 0xd17f, 0x1, 0x0);
        gbc.writeMem(0x21af, { 0xcb, 0xa6 });
        gbc.writeMem(0xd17f, { 0x9a });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x3c27, gbc.sp());
        EXPECT(0x21b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8a, gbc.readMem(0xd17f));
        // CB A6 0317
        gbc.setState(0x43a9, 0xee5e, 0xa40, 0x2ce7, 0x2897, 0x49f9, 0x0, 0x0);
        gbc.writeMem(0x43a9, { 0xcb, 0xa6 });
        gbc.writeMem(0x49f9, { 0xd });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xee5e, gbc.sp());
        EXPECT(0x43ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0318
        gbc.setState(0x7431, 0x509d, 0x4f10, 0x4049, 0x9e71, 0xd25f, 0x1, 0x0);
        gbc.writeMem(0x7431, { 0xcb, 0xa6 });
        gbc.writeMem(0xd25f, { 0x26 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x509d, gbc.sp());
        EXPECT(0x7433, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xd25f));
        // CB A6 0319
        gbc.setState(0x312, 0x860d, 0x3af0, 0x1cbb, 0x6f41, 0xe211, 0x1, 0x0);
        gbc.writeMem(0x312, { 0xcb, 0xa6 });
        gbc.writeMem(0xe211, { 0xb });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x860d, gbc.sp());
        EXPECT(0x314, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xe211));
        // CB A6 031A
        gbc.setState(0x5c75, 0x7753, 0x9940, 0xe3e5, 0xe6eb, 0x4883, 0x0, 0x0);
        gbc.writeMem(0x4883, { 0x7 });
        gbc.writeMem(0x5c75, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x7753, gbc.sp());
        EXPECT(0x5c77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 031C
        gbc.setState(0x52ea, 0x6def, 0x97f0, 0x8273, 0xf2d6, 0xb665, 0x0, 0x0);
        gbc.writeMem(0x52ea, { 0xcb, 0xa6 });
        gbc.writeMem(0xb665, { 0x8a });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x6def, gbc.sp());
        EXPECT(0x52ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8a, gbc.readMem(0xb665));
        // CB A6 031D
        gbc.setState(0xa1cd, 0x8cad, 0x44c0, 0x4881, 0xc305, 0x85cc, 0x0, 0x1);
        gbc.writeMem(0x85cc, { 0x27 });
        gbc.writeMem(0xa1cd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x8cad, gbc.sp());
        EXPECT(0xa1cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0x85cc));
        EXPECT(0xcb, gbc.readMem(0xa1cd));
        EXPECT(0xa6, gbc.readMem(0xa1ce));
        // CB A6 031E
        gbc.setState(0x9ccf, 0xcf89, 0x36f0, 0x1483, 0x496, 0xcf71, 0x1, 0x1);
        gbc.writeMem(0x9ccf, { 0xcb, 0xa6 });
        gbc.writeMem(0xcf71, { 0xa8 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xcf89, gbc.sp());
        EXPECT(0x9cd1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ccf));
        EXPECT(0xa6, gbc.readMem(0x9cd0));
        EXPECT(0xa8, gbc.readMem(0xcf71));
        // CB A6 031F
        gbc.setState(0x2667, 0x6647, 0x760, 0x3215, 0x4208, 0x1aa5, 0x0, 0x1);
        gbc.writeMem(0x1aa5, { 0xc9 });
        gbc.writeMem(0x2667, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x6647, gbc.sp());
        EXPECT(0x2669, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0320
        gbc.setState(0xe63, 0x4b5c, 0x5600, 0x4abc, 0x2e5b, 0x51dd, 0x0, 0x0);
        gbc.writeMem(0xe63, { 0xcb, 0xa6 });
        gbc.writeMem(0x51dd, { 0x21 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x4b5c, gbc.sp());
        EXPECT(0xe65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0322
        gbc.setState(0xe12f, 0xf2b7, 0x3170, 0x4fa5, 0x6e65, 0xfa6f, 0x0, 0x0);
        gbc.writeMem(0xe12f, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa6f, { 0xfa });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xf2b7, gbc.sp());
        EXPECT(0xe131, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe12f));
        EXPECT(0xa6, gbc.readMem(0xe130));
        EXPECT(0xea, gbc.readMem(0xfa6f));
        // CB A6 0323
        gbc.setState(0x49f1, 0x26ef, 0x9080, 0xc8ef, 0x8cbe, 0xe0ed, 0x0, 0x0);
        gbc.writeMem(0x49f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xe0ed, { 0x6d });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x26ef, gbc.sp());
        EXPECT(0x49f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0xe0ed));
        // CB A6 0324
        gbc.setState(0xe2b3, 0xcbef, 0x9de0, 0xbc95, 0x4f3e, 0x4adb, 0x0, 0x1);
        gbc.writeMem(0x4adb, { 0xe0 });
        gbc.writeMem(0xe2b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xcbef, gbc.sp());
        EXPECT(0xe2b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2b3));
        EXPECT(0xa6, gbc.readMem(0xe2b4));
        // CB A6 0325
        gbc.setState(0x6142, 0xa59, 0x980, 0x77e6, 0x5e2d, 0x3742, 0x0, 0x1);
        gbc.writeMem(0x3742, { 0x23 });
        gbc.writeMem(0x6142, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xa59, gbc.sp());
        EXPECT(0x6144, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0327
        gbc.setState(0x425b, 0xe2ec, 0xf0c0, 0x265a, 0xb5b, 0x2aed, 0x0, 0x0);
        gbc.writeMem(0x2aed, { 0x26 });
        gbc.writeMem(0x425b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xe2ec, gbc.sp());
        EXPECT(0x425d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0328
        gbc.setState(0x3b7f, 0x4aae, 0xdd00, 0xc0ae, 0xf821, 0x934d, 0x1, 0x0);
        gbc.writeMem(0x3b7f, { 0xcb, 0xa6 });
        gbc.writeMem(0x934d, { 0x9 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x4aae, gbc.sp());
        EXPECT(0x3b81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0x934d));
        // CB A6 0329
        gbc.setState(0x6159, 0xd8bd, 0x5900, 0x6004, 0x92f9, 0xd6e8, 0x0, 0x0);
        gbc.writeMem(0x6159, { 0xcb, 0xa6 });
        gbc.writeMem(0xd6e8, { 0xea });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xd8bd, gbc.sp());
        EXPECT(0x615b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xea, gbc.readMem(0xd6e8));
        // CB A6 032A
        gbc.setState(0x6dce, 0x38d8, 0x36c0, 0xe320, 0x4dd1, 0x42d1, 0x1, 0x0);
        gbc.writeMem(0x42d1, { 0x28 });
        gbc.writeMem(0x6dce, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x38d8, gbc.sp());
        EXPECT(0x6dd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 032B
        gbc.setState(0xceac, 0x1232, 0xac0, 0x36e2, 0xd26, 0x9e99, 0x1, 0x1);
        gbc.writeMem(0x9e99, { 0x39 });
        gbc.writeMem(0xceac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x1232, gbc.sp());
        EXPECT(0xceae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0x9e99));
        EXPECT(0xcb, gbc.readMem(0xceac));
        EXPECT(0xa6, gbc.readMem(0xcead));
        // CB A6 032F
        gbc.setState(0x22d, 0x9e48, 0x2830, 0xf13e, 0x2e10, 0x9dc2, 0x0, 0x1);
        gbc.writeMem(0x22d, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dc2, { 0x5 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x9e48, gbc.sp());
        EXPECT(0x22f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x9dc2));
        // CB A6 0330
        gbc.setState(0x8ff0, 0xd06b, 0x7f50, 0x4002, 0xfb67, 0x8d5c, 0x1, 0x0);
        gbc.writeMem(0x8d5c, { 0xac });
        gbc.writeMem(0x8ff0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xd06b, gbc.sp());
        EXPECT(0x8ff2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xac, gbc.readMem(0x8d5c));
        EXPECT(0xcb, gbc.readMem(0x8ff0));
        EXPECT(0xa6, gbc.readMem(0x8ff1));
        // CB A6 0331
        gbc.setState(0x358, 0x6be1, 0xcb40, 0xea1d, 0x28db, 0x866f, 0x0, 0x0);
        gbc.writeMem(0x358, { 0xcb, 0xa6 });
        gbc.writeMem(0x866f, { 0x8c });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x6be1, gbc.sp());
        EXPECT(0x35a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8c, gbc.readMem(0x866f));
        // CB A6 0332
        gbc.setState(0xd294, 0x3ccf, 0x6040, 0x9c54, 0x8020, 0xbab6, 0x0, 0x0);
        gbc.writeMem(0xbab6, { 0x6a });
        gbc.writeMem(0xd294, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x3ccf, gbc.sp());
        EXPECT(0xd296, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xbab6));
        EXPECT(0xcb, gbc.readMem(0xd294));
        EXPECT(0xa6, gbc.readMem(0xd295));
        // CB A6 0333
        gbc.setState(0x31c2, 0x5a06, 0x8610, 0x638d, 0x122, 0xebfa, 0x0, 0x1);
        gbc.writeMem(0x31c2, { 0xcb, 0xa6 });
        gbc.writeMem(0xebfa, { 0x23 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x5a06, gbc.sp());
        EXPECT(0x31c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0xebfa));
        // CB A6 0334
        gbc.setState(0x139a, 0xea0f, 0x7b60, 0xf853, 0x6444, 0xe8d9, 0x1, 0x1);
        gbc.writeMem(0x139a, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8d9, { 0x74 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xea0f, gbc.sp());
        EXPECT(0x139c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0xe8d9));
        // CB A6 0335
        gbc.setState(0x9478, 0x7d5d, 0xdfe0, 0x2cea, 0xf068, 0x4b5a, 0x0, 0x1);
        gbc.writeMem(0x4b5a, { 0x8 });
        gbc.writeMem(0x9478, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7d5d, gbc.sp());
        EXPECT(0x947a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9478));
        EXPECT(0xa6, gbc.readMem(0x9479));
        // CB A6 0337
        gbc.setState(0xa070, 0x85e5, 0xb000, 0xa1d9, 0xb30f, 0xae59, 0x1, 0x1);
        gbc.writeMem(0xa070, { 0xcb, 0xa6 });
        gbc.writeMem(0xae59, { 0xf7 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x85e5, gbc.sp());
        EXPECT(0xa072, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa070));
        EXPECT(0xa6, gbc.readMem(0xa071));
        EXPECT(0xe7, gbc.readMem(0xae59));
        // CB A6 0338
        gbc.setState(0x3da5, 0xb487, 0x5410, 0x520e, 0x3c0, 0x8859, 0x1, 0x0);
        gbc.writeMem(0x3da5, { 0xcb, 0xa6 });
        gbc.writeMem(0x8859, { 0xba });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xb487, gbc.sp());
        EXPECT(0x3da7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xaa, gbc.readMem(0x8859));
        // CB A6 0339
        gbc.setState(0x627c, 0x1d6e, 0xd560, 0xe1f0, 0x1f1a, 0x1cf9, 0x0, 0x0);
        gbc.writeMem(0x1cf9, { 0xf });
        gbc.writeMem(0x627c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x1d6e, gbc.sp());
        EXPECT(0x627e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 033A
        gbc.setState(0xba8c, 0xc3cc, 0xdf70, 0xa40f, 0xd34a, 0x5599, 0x1, 0x0);
        gbc.writeMem(0x5599, { 0xae });
        gbc.writeMem(0xba8c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xc3cc, gbc.sp());
        EXPECT(0xba8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba8c));
        EXPECT(0xa6, gbc.readMem(0xba8d));
        // CB A6 033B
        gbc.setState(0x73d3, 0xda6d, 0x760, 0x4aa8, 0x3aa0, 0xcb4f, 0x1, 0x1);
        gbc.writeMem(0x73d3, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb4f, { 0x33 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xda6d, gbc.sp());
        EXPECT(0x73d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0xcb4f));
        // CB A6 033C
        gbc.setState(0x4b3d, 0x4ac7, 0x81f0, 0x1cdd, 0x5e8a, 0x2dc, 0x1, 0x0);
        gbc.writeMem(0x2dc, { 0x4b });
        gbc.writeMem(0x4b3d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x4ac7, gbc.sp());
        EXPECT(0x4b3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 033D
        gbc.setState(0xab, 0x2fad, 0xcfe0, 0xeb92, 0x269, 0xdcff, 0x1, 0x1);
        gbc.writeMem(0xab, { 0xcb, 0xa6 });
        gbc.writeMem(0xdcff, { 0xf });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x2fad, gbc.sp());
        EXPECT(0xad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xdcff));
        // CB A6 033E
        gbc.setState(0x7f41, 0x1a1d, 0x99d0, 0xc0ae, 0xc7, 0xd51b, 0x0, 0x0);
        gbc.writeMem(0x7f41, { 0xcb, 0xa6 });
        gbc.writeMem(0xd51b, { 0xa2 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x1a1d, gbc.sp());
        EXPECT(0x7f43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xd51b));
        // CB A6 033F
        gbc.setState(0x8192, 0x7826, 0xb580, 0x3504, 0x5bbc, 0x7e54, 0x1, 0x0);
        gbc.writeMem(0x7e54, { 0xec });
        gbc.writeMem(0x8192, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x7826, gbc.sp());
        EXPECT(0x8194, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8192));
        EXPECT(0xa6, gbc.readMem(0x8193));
        // CB A6 0342
        gbc.setState(0xcfd5, 0xfc5, 0x2730, 0xe097, 0x1f01, 0xa425, 0x1, 0x0);
        gbc.writeMem(0xa425, { 0xa7 });
        gbc.writeMem(0xcfd5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xfc5, gbc.sp());
        EXPECT(0xcfd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa7, gbc.readMem(0xa425));
        EXPECT(0xcb, gbc.readMem(0xcfd5));
        EXPECT(0xa6, gbc.readMem(0xcfd6));
        // CB A6 0344
        gbc.setState(0xbb47, 0x88a3, 0x2080, 0x105b, 0x6b00, 0xcd73, 0x0, 0x0);
        gbc.writeMem(0xbb47, { 0xcb, 0xa6 });
        gbc.writeMem(0xcd73, { 0x88 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x88a3, gbc.sp());
        EXPECT(0xbb49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb47));
        EXPECT(0xa6, gbc.readMem(0xbb48));
        EXPECT(0x88, gbc.readMem(0xcd73));
        // CB A6 0345
        gbc.setState(0xcde6, 0xf78d, 0x1ea0, 0x9ef4, 0x77b8, 0xb2cb, 0x1, 0x1);
        gbc.writeMem(0xb2cb, { 0x24 });
        gbc.writeMem(0xcde6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf78d, gbc.sp());
        EXPECT(0xcde8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0xb2cb));
        EXPECT(0xcb, gbc.readMem(0xcde6));
        EXPECT(0xa6, gbc.readMem(0xcde7));
        // CB A6 0346
        gbc.setState(0xe9cd, 0xd530, 0x7660, 0x6931, 0x8542, 0x49de, 0x1, 0x1);
        gbc.writeMem(0x49de, { 0xc0 });
        gbc.writeMem(0xe9cd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xd530, gbc.sp());
        EXPECT(0xe9cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9cd));
        EXPECT(0xa6, gbc.readMem(0xe9ce));
        // CB A6 0348
        gbc.setState(0x35ac, 0xa308, 0x7410, 0x66fd, 0xb2d0, 0x737, 0x1, 0x0);
        gbc.writeMem(0x737, { 0x6 });
        gbc.writeMem(0x35ac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xa308, gbc.sp());
        EXPECT(0x35ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0349
        gbc.setState(0x6c31, 0x961d, 0xba40, 0x7bd2, 0x85d0, 0xdea2, 0x0, 0x0);
        gbc.writeMem(0x6c31, { 0xcb, 0xa6 });
        gbc.writeMem(0xdea2, { 0xce });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x961d, gbc.sp());
        EXPECT(0x6c33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xdea2));
        // CB A6 034C
        gbc.setState(0xd207, 0x6e17, 0xa550, 0x4739, 0xb052, 0x7485, 0x0, 0x0);
        gbc.writeMem(0x7485, { 0x28 });
        gbc.writeMem(0xd207, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x6e17, gbc.sp());
        EXPECT(0xd209, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd207));
        EXPECT(0xa6, gbc.readMem(0xd208));
        // CB A6 0350
        gbc.setState(0xb5bb, 0x4c37, 0x22b0, 0x57bf, 0x8917, 0xf399, 0x0, 0x1);
        gbc.writeMem(0xb5bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xf399, { 0xf2 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x4c37, gbc.sp());
        EXPECT(0xb5bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5bb));
        EXPECT(0xa6, gbc.readMem(0xb5bc));
        EXPECT(0xe2, gbc.readMem(0xf399));
        // CB A6 0351
        gbc.setState(0xac46, 0x2b4a, 0x9ed0, 0xb2a0, 0xc3e7, 0xc789, 0x1, 0x1);
        gbc.writeMem(0xac46, { 0xcb, 0xa6 });
        gbc.writeMem(0xc789, { 0xf0 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x2b4a, gbc.sp());
        EXPECT(0xac48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac46));
        EXPECT(0xa6, gbc.readMem(0xac47));
        EXPECT(0xe0, gbc.readMem(0xc789));
        // CB A6 0353
        gbc.setState(0xadd5, 0x7aad, 0x95a0, 0x72f8, 0xffd5, 0x38da, 0x1, 0x1);
        gbc.writeMem(0x38da, { 0xe2 });
        gbc.writeMem(0xadd5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x7aad, gbc.sp());
        EXPECT(0xadd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadd5));
        EXPECT(0xa6, gbc.readMem(0xadd6));
        // CB A6 0354
        gbc.setState(0xd55e, 0x7c1e, 0x68a0, 0xdaea, 0x1f18, 0xd6f2, 0x1, 0x1);
        gbc.writeMem(0xd55e, { 0xcb, 0xa6 });
        gbc.writeMem(0xd6f2, { 0x57 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x7c1e, gbc.sp());
        EXPECT(0xd560, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd55e));
        EXPECT(0xa6, gbc.readMem(0xd55f));
        EXPECT(0x47, gbc.readMem(0xd6f2));
        // CB A6 0355
        gbc.setState(0x82ab, 0xe657, 0xe2e0, 0x4907, 0xde93, 0x9892, 0x1, 0x1);
        gbc.writeMem(0x82ab, { 0xcb, 0xa6 });
        gbc.writeMem(0x9892, { 0x91 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xe657, gbc.sp());
        EXPECT(0x82ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ab));
        EXPECT(0xa6, gbc.readMem(0x82ac));
        EXPECT(0x81, gbc.readMem(0x9892));
        // CB A6 0356
        gbc.setState(0x65ab, 0x63e3, 0x17e0, 0xb155, 0x120f, 0xdef1, 0x0, 0x0);
        gbc.writeMem(0x65ab, { 0xcb, 0xa6 });
        gbc.writeMem(0xdef1, { 0xe7 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x63e3, gbc.sp());
        EXPECT(0x65ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe7, gbc.readMem(0xdef1));
        // CB A6 0357
        gbc.setState(0xd5ad, 0x43bf, 0xc200, 0x4614, 0x5b1e, 0x5d4b, 0x0, 0x1);
        gbc.writeMem(0x5d4b, { 0xb });
        gbc.writeMem(0xd5ad, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x43bf, gbc.sp());
        EXPECT(0xd5af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5ad));
        EXPECT(0xa6, gbc.readMem(0xd5ae));
        // CB A6 0358
        gbc.setState(0x5804, 0x7bc5, 0x110, 0x7092, 0x9e01, 0x8f9d, 0x1, 0x0);
        gbc.writeMem(0x5804, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f9d, { 0x86 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x7bc5, gbc.sp());
        EXPECT(0x5806, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0x8f9d));
        // CB A6 0359
        gbc.setState(0xb228, 0x7075, 0xe870, 0x32ce, 0x1214, 0x2e73, 0x1, 0x0);
        gbc.writeMem(0x2e73, { 0x45 });
        gbc.writeMem(0xb228, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x7075, gbc.sp());
        EXPECT(0xb22a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb228));
        EXPECT(0xa6, gbc.readMem(0xb229));
        // CB A6 035A
        gbc.setState(0xaf80, 0x6aa2, 0x8bd0, 0x9a7b, 0xbe2b, 0x8432, 0x1, 0x1);
        gbc.writeMem(0x8432, { 0x12 });
        gbc.writeMem(0xaf80, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x6aa2, gbc.sp());
        EXPECT(0xaf82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0x8432));
        EXPECT(0xcb, gbc.readMem(0xaf80));
        EXPECT(0xa6, gbc.readMem(0xaf81));
        // CB A6 035B
        gbc.setState(0x4a0d, 0x2ec8, 0x2a0, 0xf21b, 0xc735, 0xcc1c, 0x1, 0x1);
        gbc.writeMem(0x4a0d, { 0xcb, 0xa6 });
        gbc.writeMem(0xcc1c, { 0xcd });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x2ec8, gbc.sp());
        EXPECT(0x4a0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcd, gbc.readMem(0xcc1c));
        // CB A6 035C
        gbc.setState(0x59d2, 0x4cd8, 0x7af0, 0xc847, 0xe436, 0xeeee, 0x1, 0x1);
        gbc.writeMem(0x59d2, { 0xcb, 0xa6 });
        gbc.writeMem(0xeeee, { 0x2b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x4cd8, gbc.sp());
        EXPECT(0x59d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2b, gbc.readMem(0xeeee));
        // CB A6 035D
        gbc.setState(0xb729, 0x9fc8, 0xfae0, 0x7e6d, 0xe732, 0xf328, 0x1, 0x1);
        gbc.writeMem(0xb729, { 0xcb, 0xa6 });
        gbc.writeMem(0xf328, { 0xeb });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x9fc8, gbc.sp());
        EXPECT(0xb72b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb729));
        EXPECT(0xa6, gbc.readMem(0xb72a));
        EXPECT(0xeb, gbc.readMem(0xf328));
        // CB A6 035E
        gbc.setState(0x41c3, 0xba6d, 0x8ed0, 0x4087, 0x5f93, 0x1b54, 0x1, 0x0);
        gbc.writeMem(0x1b54, { 0x43 });
        gbc.writeMem(0x41c3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xba6d, gbc.sp());
        EXPECT(0x41c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 035F
        gbc.setState(0xdc93, 0xd146, 0xc4c0, 0x51e8, 0x515a, 0xf5bf, 0x0, 0x1);
        gbc.writeMem(0xdc93, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5bf, { 0x60 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xd146, gbc.sp());
        EXPECT(0xdc95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc93));
        EXPECT(0xa6, gbc.readMem(0xdc94));
        EXPECT(0x60, gbc.readMem(0xf5bf));
        // CB A6 0360
        gbc.setState(0x9092, 0x888c, 0x36e0, 0x9c58, 0x8141, 0x549c, 0x0, 0x1);
        gbc.writeMem(0x549c, { 0xa6 });
        gbc.writeMem(0x9092, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x888c, gbc.sp());
        EXPECT(0x9094, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9092));
        EXPECT(0xa6, gbc.readMem(0x9093));
        // CB A6 0361
        gbc.setState(0xd3a2, 0x448, 0xe4f0, 0x7273, 0xedfe, 0x7b4f, 0x0, 0x0);
        gbc.writeMem(0x7b4f, { 0xaa });
        gbc.writeMem(0xd3a2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x448, gbc.sp());
        EXPECT(0xd3a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3a2));
        EXPECT(0xa6, gbc.readMem(0xd3a3));
        // CB A6 0362
        gbc.setState(0x1828, 0x75c4, 0xb210, 0x94d7, 0xd818, 0x1ccb, 0x0, 0x0);
        gbc.writeMem(0x1828, { 0xcb, 0xa6 });
        gbc.writeMem(0x1ccb, { 0xcd });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x75c4, gbc.sp());
        EXPECT(0x182a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0363
        gbc.setState(0x17c1, 0x46da, 0x72b0, 0x3720, 0xb9a5, 0x9c52, 0x0, 0x0);
        gbc.writeMem(0x17c1, { 0xcb, 0xa6 });
        gbc.writeMem(0x9c52, { 0xaa });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x46da, gbc.sp());
        EXPECT(0x17c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xaa, gbc.readMem(0x9c52));
        // CB A6 0364
        gbc.setState(0x956e, 0xb00f, 0x5110, 0x4b22, 0xd154, 0x472e, 0x0, 0x0);
        gbc.writeMem(0x472e, { 0xec });
        gbc.writeMem(0x956e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xb00f, gbc.sp());
        EXPECT(0x9570, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x956e));
        EXPECT(0xa6, gbc.readMem(0x956f));
        // CB A6 0365
        gbc.setState(0x9336, 0x68dc, 0x1880, 0xd30c, 0xf86b, 0xb244, 0x0, 0x1);
        gbc.writeMem(0x9336, { 0xcb, 0xa6 });
        gbc.writeMem(0xb244, { 0x30 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x68dc, gbc.sp());
        EXPECT(0x9338, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9336));
        EXPECT(0xa6, gbc.readMem(0x9337));
        EXPECT(0x20, gbc.readMem(0xb244));
        // CB A6 0367
        gbc.setState(0xebf0, 0x2b77, 0xb750, 0xc085, 0xc364, 0xcd82, 0x0, 0x0);
        gbc.writeMem(0xcd82, { 0x3d });
        gbc.writeMem(0xebf0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x2b77, gbc.sp());
        EXPECT(0xebf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0xcd82));
        EXPECT(0xcb, gbc.readMem(0xebf0));
        EXPECT(0xa6, gbc.readMem(0xebf1));
        // CB A6 0368
        gbc.setState(0x163, 0xb1fc, 0x5010, 0x643e, 0xef9c, 0x808a, 0x0, 0x1);
        gbc.writeMem(0x163, { 0xcb, 0xa6 });
        gbc.writeMem(0x808a, { 0xba });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xb1fc, gbc.sp());
        EXPECT(0x165, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xaa, gbc.readMem(0x808a));
        // CB A6 0369
        gbc.setState(0x1f1, 0x8c3d, 0x130, 0x22de, 0xaf81, 0xf641, 0x1, 0x1);
        gbc.writeMem(0x1f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf641, { 0xdb });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x8c3d, gbc.sp());
        EXPECT(0x1f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xf641));
        // CB A6 036A
        gbc.setState(0x3465, 0xfa41, 0x4430, 0xa876, 0x7a85, 0x895f, 0x1, 0x0);
        gbc.writeMem(0x3465, { 0xcb, 0xa6 });
        gbc.writeMem(0x895f, { 0x78 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xfa41, gbc.sp());
        EXPECT(0x3467, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0x895f));
        // CB A6 036B
        gbc.setState(0xc48d, 0x65d4, 0x9ef0, 0x4488, 0xe498, 0xefef, 0x0, 0x1);
        gbc.writeMem(0xc48d, { 0xcb, 0xa6 });
        gbc.writeMem(0xefef, { 0x32 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x65d4, gbc.sp());
        EXPECT(0xc48f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc48d));
        EXPECT(0xa6, gbc.readMem(0xc48e));
        EXPECT(0x22, gbc.readMem(0xefef));
        // CB A6 036C
        gbc.setState(0xc2c4, 0x5f56, 0x3ac0, 0x1d9b, 0xa9f3, 0x170b, 0x1, 0x0);
        gbc.writeMem(0x170b, { 0xe9 });
        gbc.writeMem(0xc2c4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x5f56, gbc.sp());
        EXPECT(0xc2c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2c4));
        EXPECT(0xa6, gbc.readMem(0xc2c5));
        // CB A6 036D
        gbc.setState(0x4e88, 0x9c8d, 0x7de0, 0xf40b, 0x6c45, 0x5b98, 0x1, 0x0);
        gbc.writeMem(0x4e88, { 0xcb, 0xa6 });
        gbc.writeMem(0x5b98, { 0x86 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x9c8d, gbc.sp());
        EXPECT(0x4e8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 036E
        gbc.setState(0xcb5d, 0x2eb0, 0x5340, 0x8960, 0xaae9, 0xb034, 0x1, 0x0);
        gbc.writeMem(0xb034, { 0xb4 });
        gbc.writeMem(0xcb5d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x2eb0, gbc.sp());
        EXPECT(0xcb5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xb034));
        EXPECT(0xcb, gbc.readMem(0xcb5d));
        EXPECT(0xa6, gbc.readMem(0xcb5e));
        // CB A6 0370
        gbc.setState(0xa79d, 0x3ab4, 0xc570, 0x980a, 0x6e4e, 0xa676, 0x0, 0x0);
        gbc.writeMem(0xa676, { 0x40 });
        gbc.writeMem(0xa79d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x3ab4, gbc.sp());
        EXPECT(0xa79f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xa676));
        EXPECT(0xcb, gbc.readMem(0xa79d));
        EXPECT(0xa6, gbc.readMem(0xa79e));
        // CB A6 0371
        gbc.setState(0x560e, 0x9b4e, 0x77f0, 0xe058, 0xb270, 0x3f61, 0x0, 0x0);
        gbc.writeMem(0x3f61, { 0xe9 });
        gbc.writeMem(0x560e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x9b4e, gbc.sp());
        EXPECT(0x5610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0372
        gbc.setState(0xe986, 0xcb05, 0xb060, 0xa5db, 0x1409, 0x8660, 0x0, 0x1);
        gbc.writeMem(0x8660, { 0xf8 });
        gbc.writeMem(0xe986, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xcb05, gbc.sp());
        EXPECT(0xe988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0x8660));
        EXPECT(0xcb, gbc.readMem(0xe986));
        EXPECT(0xa6, gbc.readMem(0xe987));
        // CB A6 0373
        gbc.setState(0x213a, 0x64e7, 0x94a0, 0x2f13, 0x8a37, 0x933e, 0x0, 0x0);
        gbc.writeMem(0x213a, { 0xcb, 0xa6 });
        gbc.writeMem(0x933e, { 0xb4 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x64e7, gbc.sp());
        EXPECT(0x213c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0x933e));
        // CB A6 0374
        gbc.setState(0x8947, 0xb3e3, 0xe810, 0xdefd, 0x8264, 0x6231, 0x0, 0x1);
        gbc.writeMem(0x6231, { 0xce });
        gbc.writeMem(0x8947, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xb3e3, gbc.sp());
        EXPECT(0x8949, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8947));
        EXPECT(0xa6, gbc.readMem(0x8948));
        // CB A6 0375
        gbc.setState(0xc812, 0x7a68, 0x3e0, 0x5471, 0x1ef6, 0x82ee, 0x0, 0x0);
        gbc.writeMem(0x82ee, { 0x5d });
        gbc.writeMem(0xc812, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x7a68, gbc.sp());
        EXPECT(0xc814, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4d, gbc.readMem(0x82ee));
        EXPECT(0xcb, gbc.readMem(0xc812));
        EXPECT(0xa6, gbc.readMem(0xc813));
        // CB A6 0378
        gbc.setState(0xb31, 0xbe6e, 0xc370, 0xd3dc, 0xcbe8, 0xd80c, 0x1, 0x1);
        gbc.writeMem(0xb31, { 0xcb, 0xa6 });
        gbc.writeMem(0xd80c, { 0xa });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xbe6e, gbc.sp());
        EXPECT(0xb33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xd80c));
        // CB A6 0379
        gbc.setState(0x3f5f, 0x6ca6, 0xe8d0, 0x9f01, 0x7e69, 0x3d8f, 0x0, 0x1);
        gbc.writeMem(0x3d8f, { 0xa1 });
        gbc.writeMem(0x3f5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x6ca6, gbc.sp());
        EXPECT(0x3f61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 037A
        gbc.setState(0xe74b, 0x5646, 0xde70, 0x5943, 0x7a0f, 0x9cce, 0x1, 0x1);
        gbc.writeMem(0x9cce, { 0x1e });
        gbc.writeMem(0xe74b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x5646, gbc.sp());
        EXPECT(0xe74d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0x9cce));
        EXPECT(0xcb, gbc.readMem(0xe74b));
        EXPECT(0xa6, gbc.readMem(0xe74c));
        // CB A6 037B
        gbc.setState(0x752c, 0x47b6, 0xf8b0, 0xdfa2, 0x7861, 0xb939, 0x1, 0x0);
        gbc.writeMem(0x752c, { 0xcb, 0xa6 });
        gbc.writeMem(0xb939, { 0x7b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x47b6, gbc.sp());
        EXPECT(0x752e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xb939));
        // CB A6 037D
        gbc.setState(0x3cc9, 0x43a, 0x2c70, 0xba3d, 0x54dc, 0x8340, 0x0, 0x1);
        gbc.writeMem(0x3cc9, { 0xcb, 0xa6 });
        gbc.writeMem(0x8340, { 0xc });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x43a, gbc.sp());
        EXPECT(0x3ccb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0x8340));
        // CB A6 037F
        gbc.setState(0x1dd7, 0xfb00, 0x2ad0, 0x2c23, 0xdc32, 0xc9d1, 0x1, 0x0);
        gbc.writeMem(0x1dd7, { 0xcb, 0xa6 });
        gbc.writeMem(0xc9d1, { 0x2 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xfb00, gbc.sp());
        EXPECT(0x1dd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xc9d1));
        // CB A6 0380
        gbc.setState(0xd1dc, 0xb2a, 0xee40, 0xc69f, 0x9293, 0x94c7, 0x0, 0x1);
        gbc.writeMem(0x94c7, { 0x63 });
        gbc.writeMem(0xd1dc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xb2a, gbc.sp());
        EXPECT(0xd1de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0x94c7));
        EXPECT(0xcb, gbc.readMem(0xd1dc));
        EXPECT(0xa6, gbc.readMem(0xd1dd));
        // CB A6 0382
        gbc.setState(0xe24a, 0x9ccc, 0xcb00, 0x20f2, 0xed63, 0x15cf, 0x1, 0x0);
        gbc.writeMem(0x15cf, { 0xe5 });
        gbc.writeMem(0xe24a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x9ccc, gbc.sp());
        EXPECT(0xe24c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe24a));
        EXPECT(0xa6, gbc.readMem(0xe24b));
        // CB A6 0384
        gbc.setState(0xa91c, 0x6f1f, 0xda20, 0x2c7f, 0x9878, 0xf28f, 0x0, 0x0);
        gbc.writeMem(0xa91c, { 0xcb, 0xa6 });
        gbc.writeMem(0xf28f, { 0x7a });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x6f1f, gbc.sp());
        EXPECT(0xa91e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa91c));
        EXPECT(0xa6, gbc.readMem(0xa91d));
        EXPECT(0x6a, gbc.readMem(0xf28f));
        // CB A6 0385
        gbc.setState(0x2496, 0x7721, 0x74e0, 0x3b5c, 0xf3b1, 0xcad3, 0x0, 0x0);
        gbc.writeMem(0x2496, { 0xcb, 0xa6 });
        gbc.writeMem(0xcad3, { 0xe });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7721, gbc.sp());
        EXPECT(0x2498, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xcad3));
        // CB A6 0386
        gbc.setState(0x1d16, 0xb512, 0xe2b0, 0xfd0d, 0xe175, 0x5ab9, 0x0, 0x0);
        gbc.writeMem(0x1d16, { 0xcb, 0xa6 });
        gbc.writeMem(0x5ab9, { 0x2b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xb512, gbc.sp());
        EXPECT(0x1d18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0387
        gbc.setState(0x4f80, 0xdba2, 0x7760, 0x2cd7, 0xb696, 0x6143, 0x1, 0x0);
        gbc.writeMem(0x4f80, { 0xcb, 0xa6 });
        gbc.writeMem(0x6143, { 0x4b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xdba2, gbc.sp());
        EXPECT(0x4f82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0389
        gbc.setState(0x8ddb, 0x870f, 0x1f90, 0xea71, 0x93e6, 0x48ad, 0x1, 0x0);
        gbc.writeMem(0x48ad, { 0xa });
        gbc.writeMem(0x8ddb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x870f, gbc.sp());
        EXPECT(0x8ddd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ddb));
        EXPECT(0xa6, gbc.readMem(0x8ddc));
        // CB A6 038A
        gbc.setState(0x194a, 0xe5ec, 0xe8a0, 0x98d3, 0xfe24, 0x6508, 0x1, 0x1);
        gbc.writeMem(0x194a, { 0xcb, 0xa6 });
        gbc.writeMem(0x6508, { 0x4 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xe5ec, gbc.sp());
        EXPECT(0x194c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 038B
        gbc.setState(0xf3f, 0x6d24, 0x66f0, 0x3f1c, 0xbb7c, 0xc356, 0x0, 0x0);
        gbc.writeMem(0xf3f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc356, { 0xa0 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x6d24, gbc.sp());
        EXPECT(0xf41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xc356));
        // CB A6 038D
        gbc.setState(0x7a90, 0x48ea, 0xeaa0, 0xd859, 0xa102, 0xcfea, 0x0, 0x1);
        gbc.writeMem(0x7a90, { 0xcb, 0xa6 });
        gbc.writeMem(0xcfea, { 0x8d });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x48ea, gbc.sp());
        EXPECT(0x7a92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xcfea));
        // CB A6 038E
        gbc.setState(0xa7d3, 0x727d, 0x70a0, 0x8cc0, 0xd9c3, 0xc7b0, 0x1, 0x1);
        gbc.writeMem(0xa7d3, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7b0, { 0x40 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x727d, gbc.sp());
        EXPECT(0xa7d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7d3));
        EXPECT(0xa6, gbc.readMem(0xa7d4));
        EXPECT(0x40, gbc.readMem(0xc7b0));
        // CB A6 0390
        gbc.setState(0x5402, 0x9e86, 0x9270, 0xe58f, 0xe4df, 0x71d4, 0x0, 0x0);
        gbc.writeMem(0x5402, { 0xcb, 0xa6 });
        gbc.writeMem(0x71d4, { 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x9e86, gbc.sp());
        EXPECT(0x5404, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 0391
        gbc.setState(0x14a1, 0x5e6, 0x3b20, 0x708c, 0x273f, 0x8dce, 0x0, 0x0);
        gbc.writeMem(0x14a1, { 0xcb, 0xa6 });
        gbc.writeMem(0x8dce, { 0xe });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x5e6, gbc.sp());
        EXPECT(0x14a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0x8dce));
        // CB A6 0392
        gbc.setState(0x1762, 0x70c9, 0x3a40, 0x21b7, 0x61fd, 0x3931, 0x1, 0x0);
        gbc.writeMem(0x1762, { 0xcb, 0xa6 });
        gbc.writeMem(0x3931, { 0xc1 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x70c9, gbc.sp());
        EXPECT(0x1764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0393
        gbc.setState(0x5cae, 0x6cc6, 0x9ea0, 0x8a9b, 0xf16, 0x4d2b, 0x1, 0x0);
        gbc.writeMem(0x4d2b, { 0x1 });
        gbc.writeMem(0x5cae, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6cc6, gbc.sp());
        EXPECT(0x5cb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 0394
        gbc.setState(0xd34b, 0x9e0b, 0x3400, 0x6e08, 0x90fc, 0x3bd4, 0x1, 0x0);
        gbc.writeMem(0x3bd4, { 0x48 });
        gbc.writeMem(0xd34b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x9e0b, gbc.sp());
        EXPECT(0xd34d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd34b));
        EXPECT(0xa6, gbc.readMem(0xd34c));
        // CB A6 0395
        gbc.setState(0xee49, 0x8bc, 0x1e70, 0x5fdf, 0x694b, 0x55a1, 0x0, 0x0);
        gbc.writeMem(0x55a1, { 0x23 });
        gbc.writeMem(0xee49, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x8bc, gbc.sp());
        EXPECT(0xee4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee49));
        EXPECT(0xa6, gbc.readMem(0xee4a));
        // CB A6 0398
        gbc.setState(0xe278, 0x34e3, 0x67d0, 0x1806, 0xe50c, 0x29e4, 0x1, 0x1);
        gbc.writeMem(0x29e4, { 0x2 });
        gbc.writeMem(0xe278, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x34e3, gbc.sp());
        EXPECT(0xe27a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe278));
        EXPECT(0xa6, gbc.readMem(0xe279));
        // CB A6 039A
        gbc.setState(0x9cf1, 0xee07, 0x92d0, 0xf8d1, 0xc0ba, 0xf117, 0x0, 0x1);
        gbc.writeMem(0x9cf1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf117, { 0x71 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xee07, gbc.sp());
        EXPECT(0x9cf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cf1));
        EXPECT(0xa6, gbc.readMem(0x9cf2));
        EXPECT(0x61, gbc.readMem(0xf117));
        // CB A6 039C
        gbc.setState(0x5d26, 0x5db3, 0x40c0, 0x49b3, 0x6645, 0x9dcb, 0x1, 0x0);
        gbc.writeMem(0x5d26, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dcb, { 0xf6 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5db3, gbc.sp());
        EXPECT(0x5d28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0x9dcb));
        // CB A6 039D
        gbc.setState(0x145e, 0x53f5, 0x850, 0x7e4, 0x928, 0x9196, 0x1, 0x0);
        gbc.writeMem(0x145e, { 0xcb, 0xa6 });
        gbc.writeMem(0x9196, { 0x40 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x53f5, gbc.sp());
        EXPECT(0x1460, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0x9196));
        // CB A6 039E
        gbc.setState(0x7585, 0xe888, 0x2cf0, 0x72b, 0x2a28, 0xd828, 0x0, 0x1);
        gbc.writeMem(0x7585, { 0xcb, 0xa6 });
        gbc.writeMem(0xd828, { 0x57 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xe888, gbc.sp());
        EXPECT(0x7587, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x47, gbc.readMem(0xd828));
        // CB A6 039F
        gbc.setState(0xe15a, 0x23c, 0x3d10, 0x592a, 0x7f9b, 0x29a6, 0x1, 0x1);
        gbc.writeMem(0x29a6, { 0xcf });
        gbc.writeMem(0xe15a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x23c, gbc.sp());
        EXPECT(0xe15c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe15a));
        EXPECT(0xa6, gbc.readMem(0xe15b));
        // CB A6 03A0
        gbc.setState(0x3a96, 0x913, 0x3fc0, 0xd014, 0xaa8c, 0x9e28, 0x0, 0x1);
        gbc.writeMem(0x3a96, { 0xcb, 0xa6 });
        gbc.writeMem(0x9e28, { 0x84 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x913, gbc.sp());
        EXPECT(0x3a98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x9e28));
        // CB A6 03A1
        gbc.setState(0x8ca9, 0x5649, 0xeec0, 0x8542, 0x17f0, 0x84da, 0x0, 0x0);
        gbc.writeMem(0x84da, { 0x7c });
        gbc.writeMem(0x8ca9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x5649, gbc.sp());
        EXPECT(0x8cab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0x84da));
        EXPECT(0xcb, gbc.readMem(0x8ca9));
        EXPECT(0xa6, gbc.readMem(0x8caa));
        // CB A6 03A2
        gbc.setState(0xe737, 0xfc44, 0x1790, 0x2299, 0xbf88, 0x9885, 0x0, 0x1);
        gbc.writeMem(0x9885, { 0xd1 });
        gbc.writeMem(0xe737, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xfc44, gbc.sp());
        EXPECT(0xe739, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0x9885));
        EXPECT(0xcb, gbc.readMem(0xe737));
        EXPECT(0xa6, gbc.readMem(0xe738));
        // CB A6 03A4
        gbc.setState(0x7a99, 0x2fe, 0xf8b0, 0x39cf, 0x1d5, 0x8504, 0x1, 0x1);
        gbc.writeMem(0x7a99, { 0xcb, 0xa6 });
        gbc.writeMem(0x8504, { 0x7 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x2fe, gbc.sp());
        EXPECT(0x7a9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0x8504));
        // CB A6 03A5
        gbc.setState(0xd48b, 0x766f, 0x11a0, 0xe5a2, 0x4cbc, 0xc738, 0x0, 0x0);
        gbc.writeMem(0xc738, { 0x1d });
        gbc.writeMem(0xd48b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x766f, gbc.sp());
        EXPECT(0xd48d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xc738));
        EXPECT(0xcb, gbc.readMem(0xd48b));
        EXPECT(0xa6, gbc.readMem(0xd48c));
        // CB A6 03A7
        gbc.setState(0x6159, 0x8f8f, 0x750, 0x23d3, 0x4137, 0xd1e6, 0x0, 0x1);
        gbc.writeMem(0x6159, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1e6, { 0x5 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8f8f, gbc.sp());
        EXPECT(0x615b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xd1e6));
        // CB A6 03A8
        gbc.setState(0x921, 0xeff5, 0x4d20, 0xada9, 0x7f30, 0xbbcd, 0x0, 0x1);
        gbc.writeMem(0x921, { 0xcb, 0xa6 });
        gbc.writeMem(0xbbcd, { 0xcd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xeff5, gbc.sp());
        EXPECT(0x923, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcd, gbc.readMem(0xbbcd));
        // CB A6 03A9
        gbc.setState(0x1ed0, 0x4a15, 0x8000, 0xb0dc, 0x21a8, 0x9fa6, 0x0, 0x0);
        gbc.writeMem(0x1ed0, { 0xcb, 0xa6 });
        gbc.writeMem(0x9fa6, { 0xff });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x4a15, gbc.sp());
        EXPECT(0x1ed2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9fa6));
        // CB A6 03AA
        gbc.setState(0x4a36, 0xdd1d, 0x8310, 0x5857, 0x89d9, 0xc11c, 0x1, 0x1);
        gbc.writeMem(0x4a36, { 0xcb, 0xa6 });
        gbc.writeMem(0xc11c, { 0xe5 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xdd1d, gbc.sp());
        EXPECT(0x4a38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xc11c));
        // CB A6 03AC
        gbc.setState(0xc469, 0xd813, 0x4230, 0x1481, 0x1550, 0xbb4e, 0x1, 0x0);
        gbc.writeMem(0xbb4e, { 0xd });
        gbc.writeMem(0xc469, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xd813, gbc.sp());
        EXPECT(0xc46b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xbb4e));
        EXPECT(0xcb, gbc.readMem(0xc469));
        EXPECT(0xa6, gbc.readMem(0xc46a));
        // CB A6 03AE
        gbc.setState(0xa73c, 0x811f, 0x9a30, 0xe75d, 0x58c7, 0x38d3, 0x0, 0x0);
        gbc.writeMem(0x38d3, { 0x86 });
        gbc.writeMem(0xa73c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x811f, gbc.sp());
        EXPECT(0xa73e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa73c));
        EXPECT(0xa6, gbc.readMem(0xa73d));
        // CB A6 03AF
        gbc.setState(0xc8ca, 0xbd0d, 0x3940, 0x55a9, 0x213e, 0xb450, 0x1, 0x1);
        gbc.writeMem(0xb450, { 0xc4 });
        gbc.writeMem(0xc8ca, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xbd0d, gbc.sp());
        EXPECT(0xc8cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xb450));
        EXPECT(0xcb, gbc.readMem(0xc8ca));
        EXPECT(0xa6, gbc.readMem(0xc8cb));
        // CB A6 03B1
        gbc.setState(0xe668, 0x37b2, 0x1c50, 0xea45, 0x9e2, 0xd130, 0x1, 0x1);
        gbc.writeMem(0xd130, { 0xc8 });
        gbc.writeMem(0xe668, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x37b2, gbc.sp());
        EXPECT(0xe66a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc8, gbc.readMem(0xd130));
        EXPECT(0xcb, gbc.readMem(0xe668));
        EXPECT(0xa6, gbc.readMem(0xe669));
        // CB A6 03B2
        gbc.setState(0xd19d, 0xd063, 0xbdf0, 0xdb8e, 0x78e0, 0xb5d1, 0x0, 0x1);
        gbc.writeMem(0xb5d1, { 0x0 });
        gbc.writeMem(0xd19d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd063, gbc.sp());
        EXPECT(0xd19f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xb5d1));
        EXPECT(0xcb, gbc.readMem(0xd19d));
        EXPECT(0xa6, gbc.readMem(0xd19e));
        // CB A6 03B3
        gbc.setState(0x77f8, 0xf7f0, 0x8c60, 0xa331, 0x16b9, 0xbf0a, 0x0, 0x0);
        gbc.writeMem(0x77f8, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf0a, { 0xa4 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xf7f0, gbc.sp());
        EXPECT(0x77fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xbf0a));
        // CB A6 03B4
        gbc.setState(0x482a, 0x4d46, 0x7830, 0xac3e, 0x1db8, 0x89e4, 0x0, 0x0);
        gbc.writeMem(0x482a, { 0xcb, 0xa6 });
        gbc.writeMem(0x89e4, { 0x4c });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x4d46, gbc.sp());
        EXPECT(0x482c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4c, gbc.readMem(0x89e4));
        // CB A6 03B7
        gbc.setState(0x7f42, 0x33a, 0x5eb0, 0x9b6b, 0x1020, 0x3ee9, 0x0, 0x1);
        gbc.writeMem(0x3ee9, { 0xc7 });
        gbc.writeMem(0x7f42, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x33a, gbc.sp());
        EXPECT(0x7f44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 03B8
        gbc.setState(0x5c76, 0x40a, 0x9d70, 0x3565, 0x129e, 0xa609, 0x0, 0x1);
        gbc.writeMem(0x5c76, { 0xcb, 0xa6 });
        gbc.writeMem(0xa609, { 0xe });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x40a, gbc.sp());
        EXPECT(0x5c78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xa609));
        // CB A6 03B9
        gbc.setState(0xd8b6, 0x390c, 0x24d0, 0x51e1, 0x9970, 0x9e75, 0x0, 0x0);
        gbc.writeMem(0x9e75, { 0xee });
        gbc.writeMem(0xd8b6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x390c, gbc.sp());
        EXPECT(0xd8b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0x9e75));
        EXPECT(0xcb, gbc.readMem(0xd8b6));
        EXPECT(0xa6, gbc.readMem(0xd8b7));
        // CB A6 03BA
        gbc.setState(0x1780, 0xec0f, 0xd610, 0x9454, 0x6e05, 0x8f06, 0x1, 0x0);
        gbc.writeMem(0x1780, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f06, { 0xb4 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xec0f, gbc.sp());
        EXPECT(0x1782, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0x8f06));
        // CB A6 03BB
        gbc.setState(0x2666, 0x58fe, 0xced0, 0xc8d7, 0x69f4, 0xbdf7, 0x1, 0x1);
        gbc.writeMem(0x2666, { 0xcb, 0xa6 });
        gbc.writeMem(0xbdf7, { 0xc8 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x58fe, gbc.sp());
        EXPECT(0x2668, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc8, gbc.readMem(0xbdf7));
        // CB A6 03BC
        gbc.setState(0x149e, 0xb931, 0xe110, 0xe41d, 0xf318, 0x82d5, 0x1, 0x0);
        gbc.writeMem(0x149e, { 0xcb, 0xa6 });
        gbc.writeMem(0x82d5, { 0x8d });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xb931, gbc.sp());
        EXPECT(0x14a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0x82d5));
        // CB A6 03BD
        gbc.setState(0x24d0, 0xc0bc, 0xe040, 0x57bb, 0x2c05, 0xe9f4, 0x1, 0x1);
        gbc.writeMem(0x24d0, { 0xcb, 0xa6 });
        gbc.writeMem(0xe9f4, { 0xcf });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xc0bc, gbc.sp());
        EXPECT(0x24d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0xe9f4));
        // CB A6 03BE
        gbc.setState(0x4d7c, 0x7ddb, 0xc180, 0xfa6f, 0x3c02, 0x4a98, 0x0, 0x1);
        gbc.writeMem(0x4a98, { 0x22 });
        gbc.writeMem(0x4d7c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7ddb, gbc.sp());
        EXPECT(0x4d7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 03BF
        gbc.setState(0xd8f5, 0xa5cc, 0x730, 0x8fd8, 0x233c, 0xd4df, 0x0, 0x1);
        gbc.writeMem(0xd4df, { 0xdc });
        gbc.writeMem(0xd8f5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xa5cc, gbc.sp());
        EXPECT(0xd8f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xd4df));
        EXPECT(0xcb, gbc.readMem(0xd8f5));
        EXPECT(0xa6, gbc.readMem(0xd8f6));
        // CB A6 03C3
        gbc.setState(0xeed5, 0x603e, 0xc940, 0xe5d3, 0x1a4a, 0xc001, 0x0, 0x0);
        gbc.writeMem(0xc001, { 0x7e });
        gbc.writeMem(0xeed5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x603e, gbc.sp());
        EXPECT(0xeed7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0xc001));
        EXPECT(0xcb, gbc.readMem(0xeed5));
        EXPECT(0xa6, gbc.readMem(0xeed6));
        // CB A6 03C4
        gbc.setState(0xe143, 0x6a5e, 0xf820, 0x78fe, 0x3cb5, 0x6d1d, 0x0, 0x0);
        gbc.writeMem(0x6d1d, { 0x88 });
        gbc.writeMem(0xe143, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x6a5e, gbc.sp());
        EXPECT(0xe145, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe143));
        EXPECT(0xa6, gbc.readMem(0xe144));
        // CB A6 03C6
        gbc.setState(0xc23e, 0x1c0e, 0x2e70, 0x848a, 0xdc94, 0x3ee9, 0x0, 0x1);
        gbc.writeMem(0x3ee9, { 0xc7 });
        gbc.writeMem(0xc23e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x1c0e, gbc.sp());
        EXPECT(0xc240, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc23e));
        EXPECT(0xa6, gbc.readMem(0xc23f));
        // CB A6 03C7
        gbc.setState(0x1c14, 0x1088, 0x78e0, 0xbdb4, 0x6df8, 0xa08, 0x1, 0x0);
        gbc.writeMem(0xa08, { 0x26 });
        gbc.writeMem(0x1c14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x1088, gbc.sp());
        EXPECT(0x1c16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 03C8
        gbc.setState(0xdd2f, 0x7327, 0x1190, 0x19c0, 0x5e70, 0xe292, 0x0, 0x0);
        gbc.writeMem(0xdd2f, { 0xcb, 0xa6 });
        gbc.writeMem(0xe292, { 0x81 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x7327, gbc.sp());
        EXPECT(0xdd31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd2f));
        EXPECT(0xa6, gbc.readMem(0xdd30));
        EXPECT(0x81, gbc.readMem(0xe292));
        // CB A6 03C9
        gbc.setState(0x4775, 0x31cc, 0xcd10, 0x7ee1, 0x2852, 0xfc8a, 0x1, 0x1);
        gbc.writeMem(0x4775, { 0xcb, 0xa6 });
        gbc.writeMem(0xfc8a, { 0x9b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x31cc, gbc.sp());
        EXPECT(0x4777, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0xfc8a));
        // CB A6 03CA
        gbc.setState(0xa454, 0xe4c8, 0xce70, 0x5aef, 0xb4d2, 0x513a, 0x1, 0x0);
        gbc.writeMem(0x513a, { 0x83 });
        gbc.writeMem(0xa454, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xe4c8, gbc.sp());
        EXPECT(0xa456, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa454));
        EXPECT(0xa6, gbc.readMem(0xa455));
        // CB A6 03CD
        gbc.setState(0x340, 0xdfc0, 0xccd0, 0xf0d0, 0x4006, 0x4a0d, 0x1, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0xa6 });
        gbc.writeMem(0x4a0d, { 0x40 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xdfc0, gbc.sp());
        EXPECT(0x342, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB A6 03CE
        gbc.setState(0x562d, 0x3b00, 0xc140, 0x5f89, 0x76d3, 0xb207, 0x1, 0x1);
        gbc.writeMem(0x562d, { 0xcb, 0xa6 });
        gbc.writeMem(0xb207, { 0x2a });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x3b00, gbc.sp());
        EXPECT(0x562f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xb207));
        // CB A6 03CF
        gbc.setState(0x6447, 0xad32, 0x9050, 0x8d26, 0x2c8a, 0xcb56, 0x0, 0x1);
        gbc.writeMem(0x6447, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb56, { 0x32 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xad32, gbc.sp());
        EXPECT(0x6449, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xcb56));
        // CB A6 03D0
        gbc.setState(0x5dea, 0xe3e1, 0xeb90, 0x9c32, 0x254e, 0xf5ba, 0x0, 0x0);
        gbc.writeMem(0x5dea, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5ba, { 0x51 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xe3e1, gbc.sp());
        EXPECT(0x5dec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0xf5ba));
        // CB A6 03D3
        gbc.setState(0x4893, 0x36a5, 0x7680, 0x38e3, 0x41b4, 0x43b2, 0x0, 0x0);
        gbc.writeMem(0x43b2, { 0x8a });
        gbc.writeMem(0x4893, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x36a5, gbc.sp());
        EXPECT(0x4895, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 03D4
        gbc.setState(0xa901, 0x6da9, 0x1f20, 0x6376, 0xdf3b, 0x26a2, 0x0, 0x1);
        gbc.writeMem(0x26a2, { 0x8e });
        gbc.writeMem(0xa901, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x6da9, gbc.sp());
        EXPECT(0xa903, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa901));
        EXPECT(0xa6, gbc.readMem(0xa902));
        // CB A6 03D5
        gbc.setState(0xee24, 0x2f4b, 0xcf50, 0x26c5, 0x78d6, 0x9daf, 0x1, 0x0);
        gbc.writeMem(0x9daf, { 0xd4 });
        gbc.writeMem(0xee24, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2f4b, gbc.sp());
        EXPECT(0xee26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0x9daf));
        EXPECT(0xcb, gbc.readMem(0xee24));
        EXPECT(0xa6, gbc.readMem(0xee25));
        // CB A6 03D7
        gbc.setState(0xce2, 0x3208, 0x50d0, 0xbbe9, 0x82f0, 0xbda3, 0x1, 0x0);
        gbc.writeMem(0xce2, { 0xcb, 0xa6 });
        gbc.writeMem(0xbda3, { 0xa9 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x3208, gbc.sp());
        EXPECT(0xce4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa9, gbc.readMem(0xbda3));
        // CB A6 03D9
        gbc.setState(0x4cbe, 0x94f3, 0x60a0, 0xdbd8, 0xd71e, 0xab79, 0x1, 0x1);
        gbc.writeMem(0x4cbe, { 0xcb, 0xa6 });
        gbc.writeMem(0xab79, { 0x14 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x94f3, gbc.sp());
        EXPECT(0x4cc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xab79));
        // CB A6 03DB
        gbc.setState(0xa89e, 0xed34, 0x8fe0, 0xa1a6, 0xacb0, 0xb51a, 0x1, 0x1);
        gbc.writeMem(0xa89e, { 0xcb, 0xa6 });
        gbc.writeMem(0xb51a, { 0x38 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xed34, gbc.sp());
        EXPECT(0xa8a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa89e));
        EXPECT(0xa6, gbc.readMem(0xa89f));
        EXPECT(0x28, gbc.readMem(0xb51a));
        // CB A6 03DC
        gbc.setState(0x955, 0x19ed, 0x76c0, 0x51f, 0xc6f6, 0xb22b, 0x0, 0x0);
        gbc.writeMem(0x955, { 0xcb, 0xa6 });
        gbc.writeMem(0xb22b, { 0xc9 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x19ed, gbc.sp());
        EXPECT(0x957, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc9, gbc.readMem(0xb22b));
        // CB A6 03DD
        gbc.setState(0x510b, 0x84db, 0xf720, 0x9e3e, 0x89ae, 0x15e7, 0x1, 0x0);
        gbc.writeMem(0x15e7, { 0x2f });
        gbc.writeMem(0x510b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x84db, gbc.sp());
        EXPECT(0x510d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB A6 03DF
        gbc.setState(0xa335, 0x3984, 0x5d00, 0x7655, 0x1814, 0xc22a, 0x0, 0x0);
        gbc.writeMem(0xa335, { 0xcb, 0xa6 });
        gbc.writeMem(0xc22a, { 0xc5 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x3984, gbc.sp());
        EXPECT(0xa337, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa335));
        EXPECT(0xa6, gbc.readMem(0xa336));
        EXPECT(0xc5, gbc.readMem(0xc22a));
        // CB A6 03E1
        gbc.setState(0xe4ae, 0x72cc, 0x4380, 0x4c79, 0x154b, 0xb707, 0x1, 0x0);
        gbc.writeMem(0xb707, { 0x0 });
        gbc.writeMem(0xe4ae, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x72cc, gbc.sp());
        EXPECT(0xe4b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xb707));
        EXPECT(0xcb, gbc.readMem(0xe4ae));
        EXPECT(0xa6, gbc.readMem(0xe4af));
        // CB A6 03E2
        gbc.setState(0xa032, 0x217a, 0x9e70, 0x44f3, 0xdb30, 0x8025, 0x1, 0x0);
        gbc.writeMem(0x8025, { 0x67 });
        gbc.writeMem(0xa032, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x217a, gbc.sp());
        EXPECT(0xa034, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0x8025));
        EXPECT(0xcb, gbc.readMem(0xa032));
        EXPECT(0xa6, gbc.readMem(0xa033));
        // CB A6 03E3
        gbc.setState(0xad1a, 0xcf90, 0xa880, 0xd3c9, 0x3878, 0x3948, 0x0, 0x0);
        gbc.writeMem(0x3948, { 0xc8 });
        gbc.writeMem(0xad1a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xcf90, gbc.sp());
        EXPECT(0xad1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad1a));
        EXPECT(0xa6, gbc.readMem(0xad1b));
        // CB A6 03E5
        gbc.setState(0xa5bb, 0xb5c8, 0xa350, 0xf7ac, 0xd8d5, 0xfbfe, 0x1, 0x0);
        gbc.writeMem(0xa5bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xfbfe, { 0x81 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xb5c8, gbc.sp());
        EXPECT(0xa5bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5bb));
        EXPECT(0xa6, gbc.readMem(0xa5bc));
        EXPECT(0x81, gbc.readMem(0xfbfe));
        // CB A6 03E6
        gbc.setState(0x380c, 0x70de, 0xf0d0, 0x9e7, 0x3911, 0x7cf, 0x0, 0x0);
        gbc.writeMem(0x7cf, { 0x2c });
        gbc.writeMem(0x380c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x70de, gbc.sp());
        EXPECT(0x380e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
    }
