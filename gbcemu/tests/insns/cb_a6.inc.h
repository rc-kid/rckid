    TEST(gbcemu, opcode_cb_a6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB A6 0001
        gbc.setState(0xc58, 0x79f8, 0x5490, 0xebf3, 0xb688, 0x9d96, 0x1, 0x0);
        gbc.writeMem(0xc58, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d96, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x79f8);
        EXPECT(gbc.pc(), 0xc5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d96), 0xa3);
        // CB A6 0002
        gbc.setState(0x3f95, 0xb0d0, 0xe520, 0x73f8, 0xdcdc, 0xd337, 0x1, 0x0);
        gbc.writeMem(0x3f95, { 0xcb, 0xa6 });
        gbc.writeMem(0xd337, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb0d0);
        EXPECT(gbc.pc(), 0x3f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd337), 0x44);
        // CB A6 0003
        gbc.setState(0xadcb, 0xe5c7, 0x2620, 0x98ff, 0x9f1, 0xbd20, 0x1, 0x1);
        gbc.writeMem(0xadcb, { 0xcb, 0xa6 });
        gbc.writeMem(0xbd20, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe5c7);
        EXPECT(gbc.pc(), 0xadcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadcb), 0xcb);
        EXPECT(gbc.readMem(0xadcc), 0xa6);
        EXPECT(gbc.readMem(0xbd20), 0xc1);
        // CB A6 0004
        gbc.setState(0x7403, 0xfe9, 0x560, 0x65e8, 0x5e54, 0x4277, 0x1, 0x0);
        gbc.writeMem(0x4277, { 0x27 });
        gbc.writeMem(0x7403, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfe9);
        EXPECT(gbc.pc(), 0x7405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0005
        gbc.setState(0xe987, 0xa1bf, 0x63f0, 0x6415, 0xe7e5, 0xce8d, 0x0, 0x1);
        gbc.writeMem(0xce8d, { 0x6a });
        gbc.writeMem(0xe987, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa1bf);
        EXPECT(gbc.pc(), 0xe989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce8d), 0x6a);
        EXPECT(gbc.readMem(0xe987), 0xcb);
        EXPECT(gbc.readMem(0xe988), 0xa6);
        // CB A6 0006
        gbc.setState(0xdad1, 0x2a50, 0x68f0, 0x4a75, 0x3ea7, 0xdab1, 0x0, 0x0);
        gbc.writeMem(0xdab1, { 0xa4 });
        gbc.writeMem(0xdad1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2a50);
        EXPECT(gbc.pc(), 0xdad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdab1), 0xa4);
        EXPECT(gbc.readMem(0xdad1), 0xcb);
        EXPECT(gbc.readMem(0xdad2), 0xa6);
        // CB A6 0007
        gbc.setState(0x7006, 0xf8f, 0x51c0, 0x8f1a, 0xaef3, 0xf8a8, 0x0, 0x0);
        gbc.writeMem(0x7006, { 0xcb, 0xa6 });
        gbc.writeMem(0xf8a8, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf8f);
        EXPECT(gbc.pc(), 0x7008);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8a8), 0x65);
        // CB A6 0008
        gbc.setState(0xcc8b, 0xe32e, 0x34e0, 0x63d2, 0xdcbd, 0x61d8, 0x1, 0x1);
        gbc.writeMem(0x61d8, { 0x6c });
        gbc.writeMem(0xcc8b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe32e);
        EXPECT(gbc.pc(), 0xcc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8b), 0xcb);
        EXPECT(gbc.readMem(0xcc8c), 0xa6);
        // CB A6 0009
        gbc.setState(0x94f, 0x8b54, 0xcfb0, 0x3c45, 0x8186, 0x6e88, 0x0, 0x0);
        gbc.writeMem(0x94f, { 0xcb, 0xa6 });
        gbc.writeMem(0x6e88, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8b54);
        EXPECT(gbc.pc(), 0x951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 000A
        gbc.setState(0x4165, 0x81c7, 0xe1c0, 0xe3ca, 0x4a1b, 0xd161, 0x1, 0x0);
        gbc.writeMem(0x4165, { 0xcb, 0xa6 });
        gbc.writeMem(0xd161, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x81c7);
        EXPECT(gbc.pc(), 0x4167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd161), 0xc4);
        // CB A6 000B
        gbc.setState(0x20ad, 0x8c13, 0xedc0, 0x2a49, 0x5782, 0xc165, 0x0, 0x0);
        gbc.writeMem(0x20ad, { 0xcb, 0xa6 });
        gbc.writeMem(0xc165, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8c13);
        EXPECT(gbc.pc(), 0x20af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc165), 0x69);
        // CB A6 000D
        gbc.setState(0x390b, 0x8d1c, 0x82b0, 0x5753, 0xadba, 0x8c09, 0x0, 0x1);
        gbc.writeMem(0x390b, { 0xcb, 0xa6 });
        gbc.writeMem(0x8c09, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8d1c);
        EXPECT(gbc.pc(), 0x390d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c09), 0x6);
        // CB A6 000E
        gbc.setState(0xc5cb, 0x97aa, 0x3a30, 0x548a, 0x731a, 0x534d, 0x1, 0x1);
        gbc.writeMem(0x534d, { 0xec });
        gbc.writeMem(0xc5cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x97aa);
        EXPECT(gbc.pc(), 0xc5cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5cb), 0xcb);
        EXPECT(gbc.readMem(0xc5cc), 0xa6);
        // CB A6 000F
        gbc.setState(0xae2e, 0x5201, 0x9ad0, 0x5a9e, 0xe0f8, 0xe315, 0x1, 0x1);
        gbc.writeMem(0xae2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xe315, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5201);
        EXPECT(gbc.pc(), 0xae30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae2e), 0xcb);
        EXPECT(gbc.readMem(0xae2f), 0xa6);
        EXPECT(gbc.readMem(0xe315), 0x80);
        // CB A6 0010
        gbc.setState(0x3957, 0xc4a6, 0xc0a0, 0x5e9c, 0x90cd, 0x9267, 0x1, 0x1);
        gbc.writeMem(0x3957, { 0xcb, 0xa6 });
        gbc.writeMem(0x9267, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc4a6);
        EXPECT(gbc.pc(), 0x3959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9267), 0x63);
        // CB A6 0011
        gbc.setState(0xc24e, 0x9a2e, 0x3fc0, 0xd3d5, 0x4943, 0x642b, 0x1, 0x0);
        gbc.writeMem(0x642b, { 0xe });
        gbc.writeMem(0xc24e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9a2e);
        EXPECT(gbc.pc(), 0xc250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24e), 0xcb);
        EXPECT(gbc.readMem(0xc24f), 0xa6);
        // CB A6 0012
        gbc.setState(0x6fc0, 0x7e19, 0x98f0, 0xfeba, 0xa7bd, 0x21f8, 0x0, 0x0);
        gbc.writeMem(0x21f8, { 0x1 });
        gbc.writeMem(0x6fc0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7e19);
        EXPECT(gbc.pc(), 0x6fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0013
        gbc.setState(0x224a, 0x63d9, 0xc020, 0xb8be, 0x5c3a, 0x7004, 0x1, 0x1);
        gbc.writeMem(0x224a, { 0xcb, 0xa6 });
        gbc.writeMem(0x7004, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x63d9);
        EXPECT(gbc.pc(), 0x224c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0014
        gbc.setState(0xc00e, 0xbd, 0x160, 0x176d, 0x5307, 0x5e3a, 0x1, 0x1);
        gbc.writeMem(0x5e3a, { 0x20 });
        gbc.writeMem(0xc00e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbd);
        EXPECT(gbc.pc(), 0xc010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc00e), 0xcb);
        EXPECT(gbc.readMem(0xc00f), 0xa6);
        // CB A6 0016
        gbc.setState(0x9a0c, 0x1555, 0x5a50, 0x6f4f, 0x746d, 0x9f8b, 0x0, 0x0);
        gbc.writeMem(0x9a0c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9f8b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1555);
        EXPECT(gbc.pc(), 0x9a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0c), 0xcb);
        EXPECT(gbc.readMem(0x9a0d), 0xa6);
        EXPECT(gbc.readMem(0x9f8b), 0xaa);
        // CB A6 0017
        gbc.setState(0xacb1, 0xbf59, 0x2650, 0x4a68, 0x3a78, 0xd526, 0x0, 0x0);
        gbc.writeMem(0xacb1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd526, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbf59);
        EXPECT(gbc.pc(), 0xacb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb1), 0xcb);
        EXPECT(gbc.readMem(0xacb2), 0xa6);
        EXPECT(gbc.readMem(0xd526), 0x29);
        // CB A6 0018
        gbc.setState(0x28c6, 0xa3df, 0x1e30, 0xc7f, 0xd75, 0xb544, 0x0, 0x0);
        gbc.writeMem(0x28c6, { 0xcb, 0xa6 });
        gbc.writeMem(0xb544, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa3df);
        EXPECT(gbc.pc(), 0x28c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb544), 0x24);
        // CB A6 0019
        gbc.setState(0x4205, 0x3221, 0x5420, 0x6d54, 0x4651, 0x44ba, 0x0, 0x0);
        gbc.writeMem(0x4205, { 0xcb, 0xa6 });
        gbc.writeMem(0x44ba, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3221);
        EXPECT(gbc.pc(), 0x4207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 001A
        gbc.setState(0x9eb0, 0xcd18, 0xe370, 0x2ebb, 0x69ec, 0xd18b, 0x0, 0x0);
        gbc.writeMem(0x9eb0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd18b, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xcd18);
        EXPECT(gbc.pc(), 0x9eb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eb0), 0xcb);
        EXPECT(gbc.readMem(0x9eb1), 0xa6);
        EXPECT(gbc.readMem(0xd18b), 0x8b);
        // CB A6 001B
        gbc.setState(0xeef, 0x2cd8, 0x6240, 0x41f9, 0x5254, 0x635, 0x0, 0x1);
        gbc.writeMem(0x635, { 0xc5 });
        gbc.writeMem(0xeef, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2cd8);
        EXPECT(gbc.pc(), 0xef1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 001D
        gbc.setState(0x62, 0xaefa, 0x6610, 0xf9c6, 0x4e9a, 0xa56b, 0x0, 0x1);
        gbc.writeMem(0x62, { 0xcb, 0xa6 });
        gbc.writeMem(0xa56b, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xaefa);
        EXPECT(gbc.pc(), 0x64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56b), 0x29);
        // CB A6 001E
        gbc.setState(0x8902, 0x80c5, 0xc3d0, 0x1111, 0x178c, 0x63e0, 0x1, 0x1);
        gbc.writeMem(0x63e0, { 0x21 });
        gbc.writeMem(0x8902, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x80c5);
        EXPECT(gbc.pc(), 0x8904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8902), 0xcb);
        EXPECT(gbc.readMem(0x8903), 0xa6);
        // CB A6 001F
        gbc.setState(0x213a, 0x7e39, 0xc60, 0x5fb, 0x1db0, 0xb2f2, 0x1, 0x0);
        gbc.writeMem(0x213a, { 0xcb, 0xa6 });
        gbc.writeMem(0xb2f2, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7e39);
        EXPECT(gbc.pc(), 0x213c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f2), 0x27);
        // CB A6 0021
        gbc.setState(0x98de, 0x2f78, 0x5ab0, 0x7ad8, 0x4ae, 0xd964, 0x1, 0x1);
        gbc.writeMem(0x98de, { 0xcb, 0xa6 });
        gbc.writeMem(0xd964, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2f78);
        EXPECT(gbc.pc(), 0x98e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98de), 0xcb);
        EXPECT(gbc.readMem(0x98df), 0xa6);
        EXPECT(gbc.readMem(0xd964), 0x6a);
        // CB A6 0022
        gbc.setState(0x2fa7, 0xb348, 0xa350, 0x25df, 0x2311, 0xe177, 0x0, 0x0);
        gbc.writeMem(0x2fa7, { 0xcb, 0xa6 });
        gbc.writeMem(0xe177, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb348);
        EXPECT(gbc.pc(), 0x2fa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe177), 0x45);
        // CB A6 0023
        gbc.setState(0xacb, 0xf9ae, 0xed00, 0x5acb, 0xd312, 0xde04, 0x1, 0x0);
        gbc.writeMem(0xacb, { 0xcb, 0xa6 });
        gbc.writeMem(0xde04, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf9ae);
        EXPECT(gbc.pc(), 0xacd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde04), 0xa);
        // CB A6 0024
        gbc.setState(0x5884, 0xfd92, 0x2710, 0x7966, 0x19af, 0xf123, 0x1, 0x0);
        gbc.writeMem(0x5884, { 0xcb, 0xa6 });
        gbc.writeMem(0xf123, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfd92);
        EXPECT(gbc.pc(), 0x5886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf123), 0xe5);
        // CB A6 0025
        gbc.setState(0xed04, 0x9977, 0xdd40, 0x2859, 0x257b, 0x5812, 0x0, 0x1);
        gbc.writeMem(0x5812, { 0x4c });
        gbc.writeMem(0xed04, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9977);
        EXPECT(gbc.pc(), 0xed06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed04), 0xcb);
        EXPECT(gbc.readMem(0xed05), 0xa6);
        // CB A6 0026
        gbc.setState(0x66cb, 0x8e8, 0x7f90, 0x4dc8, 0xed88, 0x1199, 0x1, 0x1);
        gbc.writeMem(0x1199, { 0x8e });
        gbc.writeMem(0x66cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8e8);
        EXPECT(gbc.pc(), 0x66cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0028
        gbc.setState(0x77e2, 0x2222, 0x91c0, 0x19f1, 0x5e6, 0xf7fb, 0x0, 0x0);
        gbc.writeMem(0x77e2, { 0xcb, 0xa6 });
        gbc.writeMem(0xf7fb, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2222);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7fb), 0xf);
        // CB A6 0029
        gbc.setState(0x87f7, 0x1807, 0xf630, 0x2d61, 0x936, 0xfd43, 0x0, 0x0);
        gbc.writeMem(0x87f7, { 0xcb, 0xa6 });
        gbc.writeMem(0xfd43, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1807);
        EXPECT(gbc.pc(), 0x87f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f7), 0xcb);
        EXPECT(gbc.readMem(0x87f8), 0xa6);
        EXPECT(gbc.readMem(0xfd43), 0xa8);
        // CB A6 002B
        gbc.setState(0x8b3d, 0x2c82, 0x2290, 0x7648, 0xb69d, 0xee41, 0x1, 0x0);
        gbc.writeMem(0x8b3d, { 0xcb, 0xa6 });
        gbc.writeMem(0xee41, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2c82);
        EXPECT(gbc.pc(), 0x8b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3d), 0xcb);
        EXPECT(gbc.readMem(0x8b3e), 0xa6);
        EXPECT(gbc.readMem(0xee41), 0xf);
        // CB A6 002C
        gbc.setState(0x7500, 0x4477, 0x3d0, 0x562d, 0x75ec, 0xccb2, 0x0, 0x1);
        gbc.writeMem(0x7500, { 0xcb, 0xa6 });
        gbc.writeMem(0xccb2, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4477);
        EXPECT(gbc.pc(), 0x7502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb2), 0xc2);
        // CB A6 002D
        gbc.setState(0x56da, 0x19a3, 0xa780, 0x743b, 0x2267, 0xe4b8, 0x1, 0x0);
        gbc.writeMem(0x56da, { 0xcb, 0xa6 });
        gbc.writeMem(0xe4b8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x19a3);
        EXPECT(gbc.pc(), 0x56dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b8), 0xa9);
        // CB A6 002E
        gbc.setState(0x161d, 0xc38e, 0xcea0, 0x46b4, 0x7ea4, 0xa437, 0x1, 0x1);
        gbc.writeMem(0x161d, { 0xcb, 0xa6 });
        gbc.writeMem(0xa437, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0x161f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa437), 0xa2);
        // CB A6 002F
        gbc.setState(0x8f0b, 0xd87d, 0xa8c0, 0x8029, 0xa91d, 0xcea4, 0x1, 0x1);
        gbc.writeMem(0x8f0b, { 0xcb, 0xa6 });
        gbc.writeMem(0xcea4, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd87d);
        EXPECT(gbc.pc(), 0x8f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0b), 0xcb);
        EXPECT(gbc.readMem(0x8f0c), 0xa6);
        EXPECT(gbc.readMem(0xcea4), 0x9);
        // CB A6 0031
        gbc.setState(0x9b79, 0xbd, 0x4370, 0x33, 0x80f6, 0xe25d, 0x0, 0x1);
        gbc.writeMem(0x9b79, { 0xcb, 0xa6 });
        gbc.writeMem(0xe25d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbd);
        EXPECT(gbc.pc(), 0x9b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b79), 0xcb);
        EXPECT(gbc.readMem(0x9b7a), 0xa6);
        EXPECT(gbc.readMem(0xe25d), 0x22);
        // CB A6 0032
        gbc.setState(0xd68a, 0x7c3c, 0x7220, 0x811f, 0xfb9a, 0xd26c, 0x0, 0x1);
        gbc.writeMem(0xd26c, { 0xd0 });
        gbc.writeMem(0xd68a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7c3c);
        EXPECT(gbc.pc(), 0xd68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26c), 0xc0);
        EXPECT(gbc.readMem(0xd68a), 0xcb);
        EXPECT(gbc.readMem(0xd68b), 0xa6);
        // CB A6 0033
        gbc.setState(0xd98c, 0x279a, 0x74f0, 0x33fc, 0xafb2, 0x19b4, 0x1, 0x0);
        gbc.writeMem(0x19b4, { 0x62 });
        gbc.writeMem(0xd98c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x279a);
        EXPECT(gbc.pc(), 0xd98e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd98c), 0xcb);
        EXPECT(gbc.readMem(0xd98d), 0xa6);
        // CB A6 0034
        gbc.setState(0xdf3a, 0xe38e, 0x9b80, 0xe372, 0x1e91, 0xf246, 0x1, 0x1);
        gbc.writeMem(0xdf3a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf246, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe38e);
        EXPECT(gbc.pc(), 0xdf3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf3a), 0xcb);
        EXPECT(gbc.readMem(0xdf3b), 0xa6);
        EXPECT(gbc.readMem(0xf246), 0xac);
        // CB A6 0036
        gbc.setState(0x6154, 0x9510, 0x4e60, 0xebe3, 0x6f46, 0x82a4, 0x0, 0x0);
        gbc.writeMem(0x6154, { 0xcb, 0xa6 });
        gbc.writeMem(0x82a4, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9510);
        EXPECT(gbc.pc(), 0x6156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a4), 0x6e);
        // CB A6 0037
        gbc.setState(0x9ad7, 0x8f5a, 0xe830, 0x96ad, 0xc677, 0xaf16, 0x1, 0x0);
        gbc.writeMem(0x9ad7, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf16, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8f5a);
        EXPECT(gbc.pc(), 0x9ad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad7), 0xcb);
        EXPECT(gbc.readMem(0x9ad8), 0xa6);
        EXPECT(gbc.readMem(0xaf16), 0x62);
        // CB A6 0038
        gbc.setState(0x8c98, 0xbe80, 0xcd80, 0x6e98, 0xe647, 0xecc, 0x1, 0x0);
        gbc.writeMem(0xecc, { 0x6e });
        gbc.writeMem(0x8c98, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbe80);
        EXPECT(gbc.pc(), 0x8c9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c98), 0xcb);
        EXPECT(gbc.readMem(0x8c99), 0xa6);
        // CB A6 0039
        gbc.setState(0x3de7, 0x27b3, 0x89c0, 0x422, 0xadbd, 0xe8e4, 0x0, 0x0);
        gbc.writeMem(0x3de7, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8e4, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x27b3);
        EXPECT(gbc.pc(), 0x3de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e4), 0xcc);
        // CB A6 003A
        gbc.setState(0x5c59, 0xa897, 0xd910, 0x1cfa, 0x246, 0xaed4, 0x1, 0x1);
        gbc.writeMem(0x5c59, { 0xcb, 0xa6 });
        gbc.writeMem(0xaed4, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa897);
        EXPECT(gbc.pc(), 0x5c5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed4), 0xa2);
        // CB A6 003D
        gbc.setState(0x1347, 0xd9ae, 0x7a00, 0x2f0d, 0x71af, 0x55ad, 0x0, 0x1);
        gbc.writeMem(0x1347, { 0xcb, 0xa6 });
        gbc.writeMem(0x55ad, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd9ae);
        EXPECT(gbc.pc(), 0x1349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 003F
        gbc.setState(0xb0a4, 0xbc6d, 0x6f50, 0x780e, 0x7511, 0x150b, 0x0, 0x1);
        gbc.writeMem(0x150b, { 0xc2 });
        gbc.writeMem(0xb0a4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xbc6d);
        EXPECT(gbc.pc(), 0xb0a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a4), 0xcb);
        EXPECT(gbc.readMem(0xb0a5), 0xa6);
        // CB A6 0040
        gbc.setState(0x8e8d, 0x7f9c, 0xe80, 0x7aa, 0xaa70, 0xbca6, 0x1, 0x0);
        gbc.writeMem(0x8e8d, { 0xcb, 0xa6 });
        gbc.writeMem(0xbca6, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7f9c);
        EXPECT(gbc.pc(), 0x8e8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e8d), 0xcb);
        EXPECT(gbc.readMem(0x8e8e), 0xa6);
        EXPECT(gbc.readMem(0xbca6), 0x8d);
        // CB A6 0041
        gbc.setState(0x5419, 0xfcf6, 0xa130, 0x8e2f, 0x544d, 0x9217, 0x1, 0x0);
        gbc.writeMem(0x5419, { 0xcb, 0xa6 });
        gbc.writeMem(0x9217, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfcf6);
        EXPECT(gbc.pc(), 0x541b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9217), 0x82);
        // CB A6 0043
        gbc.setState(0x8594, 0xcc5e, 0x9260, 0x18b2, 0x6421, 0xa4fc, 0x0, 0x1);
        gbc.writeMem(0x8594, { 0xcb, 0xa6 });
        gbc.writeMem(0xa4fc, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcc5e);
        EXPECT(gbc.pc(), 0x8596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8594), 0xcb);
        EXPECT(gbc.readMem(0x8595), 0xa6);
        EXPECT(gbc.readMem(0xa4fc), 0xc1);
        // CB A6 0044
        gbc.setState(0x898b, 0xb885, 0x9f90, 0xc5b0, 0xe29, 0xd3b7, 0x1, 0x0);
        gbc.writeMem(0x898b, { 0xcb, 0xa6 });
        gbc.writeMem(0xd3b7, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb885);
        EXPECT(gbc.pc(), 0x898d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898b), 0xcb);
        EXPECT(gbc.readMem(0x898c), 0xa6);
        EXPECT(gbc.readMem(0xd3b7), 0xe4);
        // CB A6 0045
        gbc.setState(0xa03b, 0x9dd3, 0xe6e0, 0x2a00, 0x1390, 0xabb8, 0x0, 0x0);
        gbc.writeMem(0xa03b, { 0xcb, 0xa6 });
        gbc.writeMem(0xabb8, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9dd3);
        EXPECT(gbc.pc(), 0xa03d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03b), 0xcb);
        EXPECT(gbc.readMem(0xa03c), 0xa6);
        EXPECT(gbc.readMem(0xabb8), 0xa4);
        // CB A6 0046
        gbc.setState(0xd9f9, 0x9933, 0x4d30, 0xb195, 0xd9f1, 0xfdad, 0x0, 0x0);
        gbc.writeMem(0xd9f9, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdad, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9933);
        EXPECT(gbc.pc(), 0xd9fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9f9), 0xcb);
        EXPECT(gbc.readMem(0xd9fa), 0xa6);
        EXPECT(gbc.readMem(0xfdad), 0x4b);
        // CB A6 0048
        gbc.setState(0x2992, 0x6818, 0x30b0, 0x2f32, 0x1fea, 0x213b, 0x1, 0x0);
        gbc.writeMem(0x213b, { 0xe8 });
        gbc.writeMem(0x2992, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6818);
        EXPECT(gbc.pc(), 0x2994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0049
        gbc.setState(0x9e5b, 0xa8b, 0xb4b0, 0xf940, 0xd920, 0xb220, 0x0, 0x0);
        gbc.writeMem(0x9e5b, { 0xcb, 0xa6 });
        gbc.writeMem(0xb220, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa8b);
        EXPECT(gbc.pc(), 0x9e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5b), 0xcb);
        EXPECT(gbc.readMem(0x9e5c), 0xa6);
        EXPECT(gbc.readMem(0xb220), 0xe9);
        // CB A6 004A
        gbc.setState(0xe8cb, 0x20be, 0x5f00, 0x61e, 0xa772, 0x2a35, 0x0, 0x0);
        gbc.writeMem(0x2a35, { 0xf });
        gbc.writeMem(0xe8cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x20be);
        EXPECT(gbc.pc(), 0xe8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cb), 0xcb);
        EXPECT(gbc.readMem(0xe8cc), 0xa6);
        // CB A6 004B
        gbc.setState(0x6e9d, 0x1b4b, 0xa500, 0xa9fa, 0xcd12, 0x9a94, 0x1, 0x0);
        gbc.writeMem(0x6e9d, { 0xcb, 0xa6 });
        gbc.writeMem(0x9a94, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1b4b);
        EXPECT(gbc.pc(), 0x6e9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a94), 0xa0);
        // CB A6 004C
        gbc.setState(0x1a2a, 0xb7cb, 0xbe0, 0x8a9, 0x2f9b, 0xfee5, 0x1, 0x0);
        gbc.writeMem(0x1a2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xfee5, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb7cb);
        EXPECT(gbc.pc(), 0x1a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfee5), 0xec);
        // CB A6 004D
        gbc.setState(0x3049, 0x9a46, 0x7090, 0x9563, 0xc9fc, 0xf247, 0x1, 0x0);
        gbc.writeMem(0x3049, { 0xcb, 0xa6 });
        gbc.writeMem(0xf247, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9a46);
        EXPECT(gbc.pc(), 0x304b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf247), 0xae);
        // CB A6 004E
        gbc.setState(0xab08, 0xc667, 0xe880, 0x6196, 0x4092, 0xbd68, 0x0, 0x0);
        gbc.writeMem(0xab08, { 0xcb, 0xa6 });
        gbc.writeMem(0xbd68, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc667);
        EXPECT(gbc.pc(), 0xab0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab08), 0xcb);
        EXPECT(gbc.readMem(0xab09), 0xa6);
        EXPECT(gbc.readMem(0xbd68), 0xaa);
        // CB A6 004F
        gbc.setState(0xa73, 0x6bf2, 0xcb00, 0x583c, 0x8639, 0xaf8d, 0x1, 0x1);
        gbc.writeMem(0xa73, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf8d, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6bf2);
        EXPECT(gbc.pc(), 0xa75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf8d), 0xb);
        // CB A6 0051
        gbc.setState(0xab2a, 0x903d, 0x180, 0x9761, 0x54e2, 0xf558, 0x0, 0x1);
        gbc.writeMem(0xab2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf558, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x903d);
        EXPECT(gbc.pc(), 0xab2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2a), 0xcb);
        EXPECT(gbc.readMem(0xab2b), 0xa6);
        EXPECT(gbc.readMem(0xf558), 0x8c);
        // CB A6 0052
        gbc.setState(0x28a2, 0xec07, 0x25b0, 0xdb4d, 0x93dd, 0xa45f, 0x0, 0x1);
        gbc.writeMem(0x28a2, { 0xcb, 0xa6 });
        gbc.writeMem(0xa45f, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xec07);
        EXPECT(gbc.pc(), 0x28a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa45f), 0x2a);
        // CB A6 0053
        gbc.setState(0x48bb, 0xf01b, 0x8d20, 0x3472, 0x6bd3, 0xbf92, 0x0, 0x1);
        gbc.writeMem(0x48bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf92, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf01b);
        EXPECT(gbc.pc(), 0x48bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf92), 0x6);
        // CB A6 0054
        gbc.setState(0x608b, 0x46fc, 0x1d40, 0xa731, 0x751, 0xc8a8, 0x0, 0x1);
        gbc.writeMem(0x608b, { 0xcb, 0xa6 });
        gbc.writeMem(0xc8a8, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x46fc);
        EXPECT(gbc.pc(), 0x608d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a8), 0x6e);
        // CB A6 0058
        gbc.setState(0x5ad1, 0x5483, 0xcf90, 0x3c9, 0x688a, 0xd31f, 0x0, 0x0);
        gbc.writeMem(0x5ad1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd31f, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5483);
        EXPECT(gbc.pc(), 0x5ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd31f), 0x21);
        // CB A6 005B
        gbc.setState(0x3077, 0xc287, 0x4940, 0xe587, 0xc1ed, 0x7973, 0x1, 0x1);
        gbc.writeMem(0x3077, { 0xcb, 0xa6 });
        gbc.writeMem(0x7973, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc287);
        EXPECT(gbc.pc(), 0x3079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 005C
        gbc.setState(0xbd14, 0xf222, 0x8570, 0x82d2, 0xca7f, 0x26f2, 0x1, 0x0);
        gbc.writeMem(0x26f2, { 0x89 });
        gbc.writeMem(0xbd14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf222);
        EXPECT(gbc.pc(), 0xbd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd14), 0xcb);
        EXPECT(gbc.readMem(0xbd15), 0xa6);
        // CB A6 005D
        gbc.setState(0x309e, 0x9a77, 0xedd0, 0x34e4, 0xb95f, 0xb27e, 0x1, 0x1);
        gbc.writeMem(0x309e, { 0xcb, 0xa6 });
        gbc.writeMem(0xb27e, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9a77);
        EXPECT(gbc.pc(), 0x30a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb27e), 0xe2);
        // CB A6 005E
        gbc.setState(0x5799, 0xbfd6, 0x41d0, 0x2131, 0x9e84, 0x80aa, 0x1, 0x1);
        gbc.writeMem(0x5799, { 0xcb, 0xa6 });
        gbc.writeMem(0x80aa, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbfd6);
        EXPECT(gbc.pc(), 0x579b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80aa), 0x60);
        // CB A6 005F
        gbc.setState(0x2521, 0x2555, 0x4560, 0x3afc, 0xdbab, 0x883a, 0x0, 0x0);
        gbc.writeMem(0x2521, { 0xcb, 0xa6 });
        gbc.writeMem(0x883a, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2555);
        EXPECT(gbc.pc(), 0x2523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x883a), 0x44);
        // CB A6 0060
        gbc.setState(0x1c4b, 0xa88c, 0xb750, 0x4b05, 0x20e4, 0xaf00, 0x0, 0x0);
        gbc.writeMem(0x1c4b, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf00, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa88c);
        EXPECT(gbc.pc(), 0x1c4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf00), 0x22);
        // CB A6 0061
        gbc.setState(0x5c90, 0x9289, 0xbed0, 0xa49c, 0x3dfd, 0x8bb0, 0x1, 0x1);
        gbc.writeMem(0x5c90, { 0xcb, 0xa6 });
        gbc.writeMem(0x8bb0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9289);
        EXPECT(gbc.pc(), 0x5c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb0), 0xe5);
        // CB A6 0062
        gbc.setState(0x4e93, 0x9588, 0x2740, 0xbed2, 0xad93, 0x9894, 0x1, 0x1);
        gbc.writeMem(0x4e93, { 0xcb, 0xa6 });
        gbc.writeMem(0x9894, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9588);
        EXPECT(gbc.pc(), 0x4e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9894), 0x64);
        // CB A6 0063
        gbc.setState(0x83aa, 0x2d4c, 0xc250, 0xf342, 0x6989, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x6aab, { 0x8d });
        gbc.writeMem(0x83aa, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2d4c);
        EXPECT(gbc.pc(), 0x83ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83aa), 0xcb);
        EXPECT(gbc.readMem(0x83ab), 0xa6);
        // CB A6 0064
        gbc.setState(0xdc3a, 0xe1, 0xbea0, 0x29d7, 0x3608, 0xc07d, 0x1, 0x0);
        gbc.writeMem(0xc07d, { 0x19 });
        gbc.writeMem(0xdc3a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe1);
        EXPECT(gbc.pc(), 0xdc3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07d), 0x9);
        EXPECT(gbc.readMem(0xdc3a), 0xcb);
        EXPECT(gbc.readMem(0xdc3b), 0xa6);
        // CB A6 0065
        gbc.setState(0xc374, 0x4564, 0x1880, 0xaeff, 0xbb20, 0xdba7, 0x0, 0x0);
        gbc.writeMem(0xc374, { 0xcb, 0xa6 });
        gbc.writeMem(0xdba7, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4564);
        EXPECT(gbc.pc(), 0xc376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc374), 0xcb);
        EXPECT(gbc.readMem(0xc375), 0xa6);
        EXPECT(gbc.readMem(0xdba7), 0xef);
        // CB A6 0066
        gbc.setState(0xcf27, 0x2c7d, 0x86f0, 0xc6a4, 0x9c04, 0x9ba6, 0x1, 0x0);
        gbc.writeMem(0x9ba6, { 0xc0 });
        gbc.writeMem(0xcf27, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2c7d);
        EXPECT(gbc.pc(), 0xcf29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba6), 0xc0);
        EXPECT(gbc.readMem(0xcf27), 0xcb);
        EXPECT(gbc.readMem(0xcf28), 0xa6);
        // CB A6 0067
        gbc.setState(0x3cc5, 0x5e1c, 0x1130, 0x9cd, 0x6, 0xf38c, 0x0, 0x1);
        gbc.writeMem(0x3cc5, { 0xcb, 0xa6 });
        gbc.writeMem(0xf38c, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5e1c);
        EXPECT(gbc.pc(), 0x3cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf38c), 0xc5);
        // CB A6 0068
        gbc.setState(0xeeb0, 0xd608, 0x3520, 0xe8be, 0x995e, 0xf48e, 0x0, 0x1);
        gbc.writeMem(0xeeb0, { 0xcb, 0xa6 });
        gbc.writeMem(0xf48e, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd608);
        EXPECT(gbc.pc(), 0xeeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb0), 0xcb);
        EXPECT(gbc.readMem(0xeeb1), 0xa6);
        EXPECT(gbc.readMem(0xf48e), 0x27);
        // CB A6 006A
        gbc.setState(0x9c17, 0xb941, 0xa540, 0x5374, 0x3c01, 0x49f7, 0x1, 0x1);
        gbc.writeMem(0x49f7, { 0xc1 });
        gbc.writeMem(0x9c17, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb941);
        EXPECT(gbc.pc(), 0x9c19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c17), 0xcb);
        EXPECT(gbc.readMem(0x9c18), 0xa6);
        // CB A6 006B
        gbc.setState(0x4d71, 0x9110, 0x22b0, 0x9e3, 0xa06d, 0xbebe, 0x0, 0x0);
        gbc.writeMem(0x4d71, { 0xcb, 0xa6 });
        gbc.writeMem(0xbebe, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9110);
        EXPECT(gbc.pc(), 0x4d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbebe), 0x8d);
        // CB A6 006C
        gbc.setState(0x42de, 0x3a5, 0xef80, 0x8cfc, 0xc62c, 0x715a, 0x0, 0x0);
        gbc.writeMem(0x42de, { 0xcb, 0xa6 });
        gbc.writeMem(0x715a, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3a5);
        EXPECT(gbc.pc(), 0x42e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 006D
        gbc.setState(0x3c0d, 0x800a, 0xd290, 0xaffb, 0x3bcf, 0x3ca6, 0x0, 0x0);
        gbc.writeMem(0x3c0d, { 0xcb, 0xa6 });
        gbc.writeMem(0x3ca6, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x800a);
        EXPECT(gbc.pc(), 0x3c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 006E
        gbc.setState(0x412c, 0x4a3b, 0x530, 0x92a3, 0x9932, 0x361, 0x0, 0x1);
        gbc.writeMem(0x361, { 0xac });
        gbc.writeMem(0x412c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4a3b);
        EXPECT(gbc.pc(), 0x412e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 006F
        gbc.setState(0x8cce, 0x1270, 0x14c0, 0x379b, 0xbe41, 0xaa86, 0x1, 0x0);
        gbc.writeMem(0x8cce, { 0xcb, 0xa6 });
        gbc.writeMem(0xaa86, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1270);
        EXPECT(gbc.pc(), 0x8cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cce), 0xcb);
        EXPECT(gbc.readMem(0x8ccf), 0xa6);
        EXPECT(gbc.readMem(0xaa86), 0x85);
        // CB A6 0070
        gbc.setState(0x2324, 0x7eb, 0x180, 0xb5ab, 0x5adf, 0xaed7, 0x0, 0x0);
        gbc.writeMem(0x2324, { 0xcb, 0xa6 });
        gbc.writeMem(0xaed7, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7eb);
        EXPECT(gbc.pc(), 0x2326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed7), 0xe4);
        // CB A6 0071
        gbc.setState(0x4e2b, 0x2c6e, 0xa6d0, 0xae90, 0xc0ff, 0x1ada, 0x1, 0x1);
        gbc.writeMem(0x1ada, { 0xcd });
        gbc.writeMem(0x4e2b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2c6e);
        EXPECT(gbc.pc(), 0x4e2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0072
        gbc.setState(0x5e9, 0x6468, 0x74a0, 0x27f0, 0xda39, 0x9a88, 0x1, 0x1);
        gbc.writeMem(0x5e9, { 0xcb, 0xa6 });
        gbc.writeMem(0x9a88, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6468);
        EXPECT(gbc.pc(), 0x5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a88), 0x45);
        // CB A6 0073
        gbc.setState(0x2ec1, 0xcce7, 0x31d0, 0xf479, 0xe668, 0x8ef4, 0x1, 0x1);
        gbc.writeMem(0x2ec1, { 0xcb, 0xa6 });
        gbc.writeMem(0x8ef4, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcce7);
        EXPECT(gbc.pc(), 0x2ec3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef4), 0x4b);
        // CB A6 0074
        gbc.setState(0x5d1c, 0xc936, 0xd8c0, 0xc628, 0x5e59, 0xda1c, 0x1, 0x0);
        gbc.writeMem(0x5d1c, { 0xcb, 0xa6 });
        gbc.writeMem(0xda1c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc936);
        EXPECT(gbc.pc(), 0x5d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda1c), 0xcf);
        // CB A6 0075
        gbc.setState(0xaff3, 0x7349, 0xc000, 0x1519, 0x4d19, 0xa0f4, 0x0, 0x1);
        gbc.writeMem(0xa0f4, { 0x4a });
        gbc.writeMem(0xaff3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7349);
        EXPECT(gbc.pc(), 0xaff5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f4), 0x4a);
        EXPECT(gbc.readMem(0xaff3), 0xcb);
        EXPECT(gbc.readMem(0xaff4), 0xa6);
        // CB A6 0077
        gbc.setState(0x483, 0xb016, 0x4bb0, 0xee88, 0xef9e, 0x8660, 0x1, 0x0);
        gbc.writeMem(0x483, { 0xcb, 0xa6 });
        gbc.writeMem(0x8660, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb016);
        EXPECT(gbc.pc(), 0x485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8660), 0xe8);
        // CB A6 0078
        gbc.setState(0x1d2, 0xae3d, 0x61b0, 0x63a8, 0xbeca, 0xfbe3, 0x1, 0x1);
        gbc.writeMem(0x1d2, { 0xcb, 0xa6 });
        gbc.writeMem(0xfbe3, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xae3d);
        EXPECT(gbc.pc(), 0x1d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbe3), 0xaf);
        // CB A6 0079
        gbc.setState(0xe4a4, 0xfc34, 0x4130, 0x3c27, 0x8c33, 0xa892, 0x0, 0x1);
        gbc.writeMem(0xa892, { 0x5 });
        gbc.writeMem(0xe4a4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfc34);
        EXPECT(gbc.pc(), 0xe4a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa892), 0x5);
        EXPECT(gbc.readMem(0xe4a4), 0xcb);
        EXPECT(gbc.readMem(0xe4a5), 0xa6);
        // CB A6 007B
        gbc.setState(0x60bb, 0x57fa, 0x1500, 0x35f8, 0x36c5, 0xa3d8, 0x1, 0x0);
        gbc.writeMem(0x60bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xa3d8, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x57fa);
        EXPECT(gbc.pc(), 0x60bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d8), 0x8);
        // CB A6 007C
        gbc.setState(0xe670, 0x5bf, 0x480, 0x9b9c, 0x790b, 0x4ca8, 0x0, 0x0);
        gbc.writeMem(0x4ca8, { 0x82 });
        gbc.writeMem(0xe670, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5bf);
        EXPECT(gbc.pc(), 0xe672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe670), 0xcb);
        EXPECT(gbc.readMem(0xe671), 0xa6);
        // CB A6 007D
        gbc.setState(0x70ba, 0x8553, 0x7ea0, 0x477a, 0x4578, 0xcb46, 0x0, 0x0);
        gbc.writeMem(0x70ba, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb46, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8553);
        EXPECT(gbc.pc(), 0x70bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb46), 0x1);
        // CB A6 007E
        gbc.setState(0xbf2b, 0x301d, 0xa2d0, 0x5cdb, 0xfba7, 0x6dd2, 0x1, 0x1);
        gbc.writeMem(0x6dd2, { 0x8e });
        gbc.writeMem(0xbf2b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x301d);
        EXPECT(gbc.pc(), 0xbf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf2b), 0xcb);
        EXPECT(gbc.readMem(0xbf2c), 0xa6);
        // CB A6 0080
        gbc.setState(0xaa11, 0x5730, 0xaf90, 0x2955, 0xa55b, 0xe5c1, 0x1, 0x1);
        gbc.writeMem(0xaa11, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5c1, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5730);
        EXPECT(gbc.pc(), 0xaa13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa11), 0xcb);
        EXPECT(gbc.readMem(0xaa12), 0xa6);
        EXPECT(gbc.readMem(0xe5c1), 0x5);
        // CB A6 0081
        gbc.setState(0x2eb2, 0xf4, 0x4800, 0xfdad, 0x50dd, 0x88ad, 0x1, 0x0);
        gbc.writeMem(0x2eb2, { 0xcb, 0xa6 });
        gbc.writeMem(0x88ad, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf4);
        EXPECT(gbc.pc(), 0x2eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ad), 0x6);
        // CB A6 0084
        gbc.setState(0xb8e4, 0x7fd1, 0x9af0, 0x6db8, 0x29b8, 0x2646, 0x1, 0x1);
        gbc.writeMem(0x2646, { 0x3 });
        gbc.writeMem(0xb8e4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7fd1);
        EXPECT(gbc.pc(), 0xb8e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e4), 0xcb);
        EXPECT(gbc.readMem(0xb8e5), 0xa6);
        // CB A6 0086
        gbc.setState(0x6d2e, 0x55a7, 0x6240, 0xaf0b, 0x785b, 0xf5cb, 0x0, 0x1);
        gbc.writeMem(0x6d2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5cb, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x55a7);
        EXPECT(gbc.pc(), 0x6d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5cb), 0x5);
        // CB A6 0087
        gbc.setState(0xd0fc, 0x3b80, 0x5740, 0xca0d, 0x43a0, 0x8a94, 0x0, 0x0);
        gbc.writeMem(0x8a94, { 0x12 });
        gbc.writeMem(0xd0fc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3b80);
        EXPECT(gbc.pc(), 0xd0fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a94), 0x2);
        EXPECT(gbc.readMem(0xd0fc), 0xcb);
        EXPECT(gbc.readMem(0xd0fd), 0xa6);
        // CB A6 0088
        gbc.setState(0x7255, 0xb641, 0x970, 0xdf1c, 0x45f8, 0x5e5f, 0x0, 0x1);
        gbc.writeMem(0x5e5f, { 0x2e });
        gbc.writeMem(0x7255, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb641);
        EXPECT(gbc.pc(), 0x7257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 008A
        gbc.setState(0xd203, 0x11e7, 0x7190, 0x1595, 0xdd0f, 0x3c3, 0x0, 0x1);
        gbc.writeMem(0x3c3, { 0x2b });
        gbc.writeMem(0xd203, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x11e7);
        EXPECT(gbc.pc(), 0xd205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd203), 0xcb);
        EXPECT(gbc.readMem(0xd204), 0xa6);
        // CB A6 008C
        gbc.setState(0x541, 0xdb32, 0xe10, 0xbe9e, 0x17f3, 0x2eed, 0x1, 0x1);
        gbc.writeMem(0x541, { 0xcb, 0xa6 });
        gbc.writeMem(0x2eed, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdb32);
        EXPECT(gbc.pc(), 0x543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 008E
        gbc.setState(0xa46a, 0x4fdc, 0x8c60, 0xae97, 0x58f3, 0x85fe, 0x0, 0x0);
        gbc.writeMem(0x85fe, { 0x74 });
        gbc.writeMem(0xa46a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4fdc);
        EXPECT(gbc.pc(), 0xa46c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85fe), 0x64);
        EXPECT(gbc.readMem(0xa46a), 0xcb);
        EXPECT(gbc.readMem(0xa46b), 0xa6);
        // CB A6 0090
        gbc.setState(0x1a55, 0xf37, 0xe2f0, 0xc44d, 0xcfe2, 0xa60b, 0x1, 0x1);
        gbc.writeMem(0x1a55, { 0xcb, 0xa6 });
        gbc.writeMem(0xa60b, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf37);
        EXPECT(gbc.pc(), 0x1a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa60b), 0xec);
        // CB A6 0091
        gbc.setState(0xbbea, 0x23f0, 0x9df0, 0x9398, 0x5962, 0xa7ca, 0x1, 0x0);
        gbc.writeMem(0xa7ca, { 0x46 });
        gbc.writeMem(0xbbea, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x23f0);
        EXPECT(gbc.pc(), 0xbbec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ca), 0x46);
        EXPECT(gbc.readMem(0xbbea), 0xcb);
        EXPECT(gbc.readMem(0xbbeb), 0xa6);
        // CB A6 0094
        gbc.setState(0xe413, 0x1b28, 0x12a0, 0x627d, 0x8166, 0xafc0, 0x0, 0x1);
        gbc.writeMem(0xafc0, { 0xe2 });
        gbc.writeMem(0xe413, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1b28);
        EXPECT(gbc.pc(), 0xe415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc0), 0xe2);
        EXPECT(gbc.readMem(0xe413), 0xcb);
        EXPECT(gbc.readMem(0xe414), 0xa6);
        // CB A6 0096
        gbc.setState(0x2be5, 0x173d, 0xb270, 0x34bd, 0x181d, 0xb285, 0x1, 0x1);
        gbc.writeMem(0x2be5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb285, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x173d);
        EXPECT(gbc.pc(), 0x2be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb285), 0xcf);
        // CB A6 0098
        gbc.setState(0x735d, 0x414c, 0xcb0, 0x2a86, 0x9b76, 0xf4c2, 0x1, 0x0);
        gbc.writeMem(0x735d, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4c2, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x414c);
        EXPECT(gbc.pc(), 0x735f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4c2), 0x42);
        // CB A6 0099
        gbc.setState(0x97ed, 0xb1e6, 0xf0, 0xdd8a, 0x270b, 0x9299, 0x0, 0x0);
        gbc.writeMem(0x9299, { 0xcc });
        gbc.writeMem(0x97ed, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb1e6);
        EXPECT(gbc.pc(), 0x97ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9299), 0xcc);
        EXPECT(gbc.readMem(0x97ed), 0xcb);
        EXPECT(gbc.readMem(0x97ee), 0xa6);
        // CB A6 009A
        gbc.setState(0x8de5, 0xcc61, 0x800, 0xe657, 0xca94, 0xe921, 0x0, 0x0);
        gbc.writeMem(0x8de5, { 0xcb, 0xa6 });
        gbc.writeMem(0xe921, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcc61);
        EXPECT(gbc.pc(), 0x8de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de5), 0xcb);
        EXPECT(gbc.readMem(0x8de6), 0xa6);
        EXPECT(gbc.readMem(0xe921), 0x4a);
        // CB A6 009B
        gbc.setState(0x200c, 0x735a, 0x4560, 0xb9e2, 0x6764, 0x9b4c, 0x1, 0x1);
        gbc.writeMem(0x200c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9b4c, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x735a);
        EXPECT(gbc.pc(), 0x200e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4c), 0xc4);
        // CB A6 009C
        gbc.setState(0x5f40, 0x9044, 0x7940, 0xe3dc, 0x36, 0xb403, 0x0, 0x1);
        gbc.writeMem(0x5f40, { 0xcb, 0xa6 });
        gbc.writeMem(0xb403, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9044);
        EXPECT(gbc.pc(), 0x5f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb403), 0x63);
        // CB A6 009D
        gbc.setState(0x9720, 0x4040, 0xae00, 0xda5f, 0x6a96, 0xd567, 0x0, 0x0);
        gbc.writeMem(0x9720, { 0xcb, 0xa6 });
        gbc.writeMem(0xd567, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4040);
        EXPECT(gbc.pc(), 0x9722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9720), 0xcb);
        EXPECT(gbc.readMem(0x9721), 0xa6);
        EXPECT(gbc.readMem(0xd567), 0x28);
        // CB A6 00A1
        gbc.setState(0x52b0, 0xc4d9, 0x30e0, 0x68f3, 0x88f0, 0x75e2, 0x1, 0x0);
        gbc.writeMem(0x52b0, { 0xcb, 0xa6 });
        gbc.writeMem(0x75e2, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc4d9);
        EXPECT(gbc.pc(), 0x52b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00A5
        gbc.setState(0x861, 0x49cf, 0x4f20, 0xb47d, 0x9518, 0xdb50, 0x0, 0x0);
        gbc.writeMem(0x861, { 0xcb, 0xa6 });
        gbc.writeMem(0xdb50, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x49cf);
        EXPECT(gbc.pc(), 0x863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb50), 0xae);
        // CB A6 00A7
        gbc.setState(0x9be4, 0x65b5, 0x5fa0, 0xd555, 0xd55e, 0x1c71, 0x1, 0x0);
        gbc.writeMem(0x1c71, { 0x8e });
        gbc.writeMem(0x9be4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x65b5);
        EXPECT(gbc.pc(), 0x9be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be4), 0xcb);
        EXPECT(gbc.readMem(0x9be5), 0xa6);
        // CB A6 00A9
        gbc.setState(0x1e06, 0xd40e, 0xa480, 0x1312, 0x8178, 0xf2f6, 0x1, 0x1);
        gbc.writeMem(0x1e06, { 0xcb, 0xa6 });
        gbc.writeMem(0xf2f6, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd40e);
        EXPECT(gbc.pc(), 0x1e08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2f6), 0xc7);
        // CB A6 00AB
        gbc.setState(0xa720, 0x2ff0, 0x1240, 0x5982, 0x530a, 0x215d, 0x0, 0x1);
        gbc.writeMem(0x215d, { 0xc5 });
        gbc.writeMem(0xa720, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2ff0);
        EXPECT(gbc.pc(), 0xa722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa720), 0xcb);
        EXPECT(gbc.readMem(0xa721), 0xa6);
        // CB A6 00AE
        gbc.setState(0xc594, 0x2c71, 0x2010, 0x1b9e, 0x4ac2, 0xa646, 0x1, 0x1);
        gbc.writeMem(0xa646, { 0xa });
        gbc.writeMem(0xc594, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2c71);
        EXPECT(gbc.pc(), 0xc596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa646), 0xa);
        EXPECT(gbc.readMem(0xc594), 0xcb);
        EXPECT(gbc.readMem(0xc595), 0xa6);
        // CB A6 00AF
        gbc.setState(0xd2e3, 0xc9af, 0x5780, 0x71c, 0x7af, 0x2eed, 0x1, 0x1);
        gbc.writeMem(0x2eed, { 0x85 });
        gbc.writeMem(0xd2e3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc9af);
        EXPECT(gbc.pc(), 0xd2e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e3), 0xcb);
        EXPECT(gbc.readMem(0xd2e4), 0xa6);
        // CB A6 00B1
        gbc.setState(0x9bba, 0x7c42, 0x92c0, 0x1f1c, 0x1750, 0x6b03, 0x0, 0x1);
        gbc.writeMem(0x6b03, { 0xe });
        gbc.writeMem(0x9bba, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7c42);
        EXPECT(gbc.pc(), 0x9bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bba), 0xcb);
        EXPECT(gbc.readMem(0x9bbb), 0xa6);
        // CB A6 00B2
        gbc.setState(0x27eb, 0x647b, 0x6840, 0x81fe, 0xdcf1, 0xc96, 0x1, 0x0);
        gbc.writeMem(0xc96, { 0xc8 });
        gbc.writeMem(0x27eb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x647b);
        EXPECT(gbc.pc(), 0x27ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00B4
        gbc.setState(0x7244, 0x870, 0x5540, 0x739, 0xca32, 0x53b5, 0x0, 0x0);
        gbc.writeMem(0x53b5, { 0x8 });
        gbc.writeMem(0x7244, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x870);
        EXPECT(gbc.pc(), 0x7246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00B5
        gbc.setState(0x3b30, 0x20e, 0xde00, 0x5df1, 0x8d72, 0xfa71, 0x1, 0x0);
        gbc.writeMem(0x3b30, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa71, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x20e);
        EXPECT(gbc.pc(), 0x3b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa71), 0x6e);
        // CB A6 00B7
        gbc.setState(0xbc97, 0x9646, 0x9b60, 0x8b0b, 0x81b9, 0x5822, 0x1, 0x0);
        gbc.writeMem(0x5822, { 0xe4 });
        gbc.writeMem(0xbc97, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9646);
        EXPECT(gbc.pc(), 0xbc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc97), 0xcb);
        EXPECT(gbc.readMem(0xbc98), 0xa6);
        // CB A6 00B9
        gbc.setState(0xa17, 0x19a6, 0x2c00, 0x7968, 0xa64e, 0x2f18, 0x1, 0x1);
        gbc.writeMem(0xa17, { 0xcb, 0xa6 });
        gbc.writeMem(0x2f18, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x19a6);
        EXPECT(gbc.pc(), 0xa19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00BB
        gbc.setState(0x5a99, 0x66b3, 0xf660, 0xcd99, 0xbcc9, 0xa2ff, 0x1, 0x1);
        gbc.writeMem(0x5a99, { 0xcb, 0xa6 });
        gbc.writeMem(0xa2ff, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x66b3);
        EXPECT(gbc.pc(), 0x5a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ff), 0x66);
        // CB A6 00BD
        gbc.setState(0x390f, 0xd124, 0xd620, 0x1dca, 0x1ce0, 0x1489, 0x1, 0x0);
        gbc.writeMem(0x1489, { 0x46 });
        gbc.writeMem(0x390f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd124);
        EXPECT(gbc.pc(), 0x3911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00BE
        gbc.setState(0xac96, 0x2876, 0x17c0, 0x9781, 0x115, 0xe9ce, 0x0, 0x1);
        gbc.writeMem(0xac96, { 0xcb, 0xa6 });
        gbc.writeMem(0xe9ce, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2876);
        EXPECT(gbc.pc(), 0xac98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac96), 0xcb);
        EXPECT(gbc.readMem(0xac97), 0xa6);
        EXPECT(gbc.readMem(0xe9ce), 0x8c);
        // CB A6 00C0
        gbc.setState(0xa09f, 0x56a, 0xda60, 0x7a02, 0x3c71, 0x2854, 0x1, 0x0);
        gbc.writeMem(0x2854, { 0x23 });
        gbc.writeMem(0xa09f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x56a);
        EXPECT(gbc.pc(), 0xa0a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa09f), 0xcb);
        EXPECT(gbc.readMem(0xa0a0), 0xa6);
        // CB A6 00C1
        gbc.setState(0x62fe, 0xe5f5, 0xaed0, 0xf435, 0x3fed, 0x87b1, 0x1, 0x0);
        gbc.writeMem(0x62fe, { 0xcb, 0xa6 });
        gbc.writeMem(0x87b1, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe5f5);
        EXPECT(gbc.pc(), 0x6300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b1), 0x8);
        // CB A6 00C2
        gbc.setState(0x8205, 0xfb3e, 0x3c20, 0x13eb, 0xd6ea, 0x2b35, 0x0, 0x1);
        gbc.writeMem(0x2b35, { 0x2a });
        gbc.writeMem(0x8205, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfb3e);
        EXPECT(gbc.pc(), 0x8207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8205), 0xcb);
        EXPECT(gbc.readMem(0x8206), 0xa6);
        // CB A6 00C4
        gbc.setState(0x5a54, 0x6e1d, 0x8270, 0xb44, 0x9946, 0xeaf7, 0x0, 0x1);
        gbc.writeMem(0x5a54, { 0xcb, 0xa6 });
        gbc.writeMem(0xeaf7, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6e1d);
        EXPECT(gbc.pc(), 0x5a56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf7), 0xc1);
        // CB A6 00C5
        gbc.setState(0xbcb1, 0x636d, 0x9760, 0xb640, 0x894c, 0xdae8, 0x1, 0x0);
        gbc.writeMem(0xbcb1, { 0xcb, 0xa6 });
        gbc.writeMem(0xdae8, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x636d);
        EXPECT(gbc.pc(), 0xbcb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb1), 0xcb);
        EXPECT(gbc.readMem(0xbcb2), 0xa6);
        EXPECT(gbc.readMem(0xdae8), 0x60);
        // CB A6 00C6
        gbc.setState(0x41a9, 0x22c8, 0x40e0, 0xcbb2, 0x6ec, 0x85ef, 0x0, 0x0);
        gbc.writeMem(0x41a9, { 0xcb, 0xa6 });
        gbc.writeMem(0x85ef, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x22c8);
        EXPECT(gbc.pc(), 0x41ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ef), 0xc3);
        // CB A6 00C7
        gbc.setState(0x17e6, 0x95cc, 0xe4d0, 0xe9e2, 0xda5f, 0x78ad, 0x1, 0x1);
        gbc.writeMem(0x17e6, { 0xcb, 0xa6 });
        gbc.writeMem(0x78ad, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x95cc);
        EXPECT(gbc.pc(), 0x17e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00C8
        gbc.setState(0x2657, 0x4cc4, 0xc240, 0x843f, 0xf062, 0x6247, 0x1, 0x1);
        gbc.writeMem(0x2657, { 0xcb, 0xa6 });
        gbc.writeMem(0x6247, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4cc4);
        EXPECT(gbc.pc(), 0x2659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00C9
        gbc.setState(0x9c21, 0x5602, 0xaf20, 0x7fa7, 0x490a, 0x9a03, 0x0, 0x0);
        gbc.writeMem(0x9a03, { 0x7f });
        gbc.writeMem(0x9c21, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5602);
        EXPECT(gbc.pc(), 0x9c23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a03), 0x6f);
        EXPECT(gbc.readMem(0x9c21), 0xcb);
        EXPECT(gbc.readMem(0x9c22), 0xa6);
        // CB A6 00CB
        gbc.setState(0xbf11, 0x67a1, 0x35a0, 0x39b1, 0xd323, 0xa816, 0x1, 0x0);
        gbc.writeMem(0xa816, { 0x5e });
        gbc.writeMem(0xbf11, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x67a1);
        EXPECT(gbc.pc(), 0xbf13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa816), 0x4e);
        EXPECT(gbc.readMem(0xbf11), 0xcb);
        EXPECT(gbc.readMem(0xbf12), 0xa6);
        // CB A6 00CC
        gbc.setState(0x8a07, 0x2466, 0xdea0, 0x34da, 0xfec4, 0xbf27, 0x0, 0x0);
        gbc.writeMem(0x8a07, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf27, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2466);
        EXPECT(gbc.pc(), 0x8a09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a07), 0xcb);
        EXPECT(gbc.readMem(0x8a08), 0xa6);
        EXPECT(gbc.readMem(0xbf27), 0xce);
        // CB A6 00CD
        gbc.setState(0x11e1, 0x29fc, 0xeb30, 0x6a4c, 0x3244, 0x4af3, 0x0, 0x0);
        gbc.writeMem(0x11e1, { 0xcb, 0xa6 });
        gbc.writeMem(0x4af3, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x29fc);
        EXPECT(gbc.pc(), 0x11e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00CE
        gbc.setState(0x7385, 0xe592, 0x8840, 0xdd83, 0x7748, 0x969, 0x0, 0x1);
        gbc.writeMem(0x969, { 0x62 });
        gbc.writeMem(0x7385, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe592);
        EXPECT(gbc.pc(), 0x7387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00D0
        gbc.setState(0x9f90, 0x933f, 0xe790, 0x8b31, 0xc2bc, 0xf436, 0x1, 0x0);
        gbc.writeMem(0x9f90, { 0xcb, 0xa6 });
        gbc.writeMem(0xf436, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x933f);
        EXPECT(gbc.pc(), 0x9f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f90), 0xcb);
        EXPECT(gbc.readMem(0x9f91), 0xa6);
        EXPECT(gbc.readMem(0xf436), 0xc7);
        // CB A6 00D1
        gbc.setState(0x7745, 0x30db, 0x89b0, 0x7d2, 0x109b, 0xd007, 0x0, 0x1);
        gbc.writeMem(0x7745, { 0xcb, 0xa6 });
        gbc.writeMem(0xd007, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x30db);
        EXPECT(gbc.pc(), 0x7747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd007), 0x42);
        // CB A6 00D2
        gbc.setState(0xd209, 0x2843, 0x3040, 0xc476, 0xc90f, 0xdd99, 0x0, 0x1);
        gbc.writeMem(0xd209, { 0xcb, 0xa6 });
        gbc.writeMem(0xdd99, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2843);
        EXPECT(gbc.pc(), 0xd20b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd209), 0xcb);
        EXPECT(gbc.readMem(0xd20a), 0xa6);
        EXPECT(gbc.readMem(0xdd99), 0xc3);
        // CB A6 00D4
        gbc.setState(0x89c8, 0xfc89, 0x4cb0, 0x2ccb, 0xd9f9, 0x876a, 0x1, 0x0);
        gbc.writeMem(0x876a, { 0x24 });
        gbc.writeMem(0x89c8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfc89);
        EXPECT(gbc.pc(), 0x89ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x876a), 0x24);
        EXPECT(gbc.readMem(0x89c8), 0xcb);
        EXPECT(gbc.readMem(0x89c9), 0xa6);
        // CB A6 00D5
        gbc.setState(0xd15a, 0x921c, 0xd0f0, 0x4780, 0x40a2, 0xdd3b, 0x1, 0x1);
        gbc.writeMem(0xd15a, { 0xcb, 0xa6 });
        gbc.writeMem(0xdd3b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x921c);
        EXPECT(gbc.pc(), 0xd15c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd15a), 0xcb);
        EXPECT(gbc.readMem(0xd15b), 0xa6);
        EXPECT(gbc.readMem(0xdd3b), 0x23);
        // CB A6 00D6
        gbc.setState(0x40b0, 0xaa40, 0x41e0, 0x6d23, 0xf8de, 0x36af, 0x0, 0x1);
        gbc.writeMem(0x36af, { 0x6c });
        gbc.writeMem(0x40b0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xaa40);
        EXPECT(gbc.pc(), 0x40b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00D7
        gbc.setState(0xdd79, 0x2882, 0xfae0, 0x66d9, 0xea15, 0xa074, 0x0, 0x1);
        gbc.writeMem(0xa074, { 0x6c });
        gbc.writeMem(0xdd79, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2882);
        EXPECT(gbc.pc(), 0xdd7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa074), 0x6c);
        EXPECT(gbc.readMem(0xdd79), 0xcb);
        EXPECT(gbc.readMem(0xdd7a), 0xa6);
        // CB A6 00D8
        gbc.setState(0x38d7, 0x77d3, 0x24e0, 0x573b, 0x1fc4, 0xc34b, 0x0, 0x0);
        gbc.writeMem(0x38d7, { 0xcb, 0xa6 });
        gbc.writeMem(0xc34b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x77d3);
        EXPECT(gbc.pc(), 0x38d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34b), 0x6f);
        // CB A6 00D9
        gbc.setState(0x911a, 0x9124, 0x1ef0, 0x285c, 0x984e, 0x8e02, 0x0, 0x0);
        gbc.writeMem(0x8e02, { 0xb7 });
        gbc.writeMem(0x911a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9124);
        EXPECT(gbc.pc(), 0x911c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e02), 0xa7);
        EXPECT(gbc.readMem(0x911a), 0xcb);
        EXPECT(gbc.readMem(0x911b), 0xa6);
        // CB A6 00DA
        gbc.setState(0xb843, 0x8b1e, 0x5f90, 0xe3e7, 0x69cf, 0xd4d9, 0x0, 0x0);
        gbc.writeMem(0xb843, { 0xcb, 0xa6 });
        gbc.writeMem(0xd4d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8b1e);
        EXPECT(gbc.pc(), 0xb845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb843), 0xcb);
        EXPECT(gbc.readMem(0xb844), 0xa6);
        EXPECT(gbc.readMem(0xd4d9), 0xa4);
        // CB A6 00DB
        gbc.setState(0xceaf, 0x3a1f, 0x7ba0, 0xe31d, 0xf558, 0xc58c, 0x0, 0x0);
        gbc.writeMem(0xc58c, { 0xc });
        gbc.writeMem(0xceaf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3a1f);
        EXPECT(gbc.pc(), 0xceb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58c), 0xc);
        EXPECT(gbc.readMem(0xceaf), 0xcb);
        EXPECT(gbc.readMem(0xceb0), 0xa6);
        // CB A6 00DC
        gbc.setState(0xecd6, 0x7a7c, 0xc4d0, 0xeb62, 0x4cf9, 0xbe7c, 0x0, 0x1);
        gbc.writeMem(0xbe7c, { 0x1d });
        gbc.writeMem(0xecd6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7a7c);
        EXPECT(gbc.pc(), 0xecd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe7c), 0xd);
        EXPECT(gbc.readMem(0xecd6), 0xcb);
        EXPECT(gbc.readMem(0xecd7), 0xa6);
        // CB A6 00DD
        gbc.setState(0x6829, 0xc4da, 0x73a0, 0x62b9, 0x7b4f, 0xf75e, 0x0, 0x0);
        gbc.writeMem(0x6829, { 0xcb, 0xa6 });
        gbc.writeMem(0xf75e, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc4da);
        EXPECT(gbc.pc(), 0x682b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf75e), 0x1);
        // CB A6 00DE
        gbc.setState(0x7159, 0xb088, 0xa650, 0xc082, 0x29db, 0x7cbf, 0x0, 0x0);
        gbc.writeMem(0x7159, { 0xcb, 0xa6 });
        gbc.writeMem(0x7cbf, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb088);
        EXPECT(gbc.pc(), 0x715b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00E0
        gbc.setState(0x3e97, 0xfc22, 0x6590, 0x47a0, 0xa67a, 0x3688, 0x0, 0x0);
        gbc.writeMem(0x3688, { 0xeb });
        gbc.writeMem(0x3e97, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfc22);
        EXPECT(gbc.pc(), 0x3e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00E2
        gbc.setState(0xbe41, 0x1a0, 0xfb60, 0x310d, 0x7cf, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x6634, { 0x6d });
        gbc.writeMem(0xbe41, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1a0);
        EXPECT(gbc.pc(), 0xbe43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe41), 0xcb);
        EXPECT(gbc.readMem(0xbe42), 0xa6);
        // CB A6 00E3
        gbc.setState(0x868d, 0x278a, 0xee40, 0x3b5e, 0xb1aa, 0xcb13, 0x1, 0x1);
        gbc.writeMem(0x868d, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb13, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x278a);
        EXPECT(gbc.pc(), 0x868f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868d), 0xcb);
        EXPECT(gbc.readMem(0x868e), 0xa6);
        EXPECT(gbc.readMem(0xcb13), 0x86);
        // CB A6 00E4
        gbc.setState(0x73f0, 0x52f7, 0x1a40, 0x87df, 0xdbf6, 0xd1da, 0x1, 0x1);
        gbc.writeMem(0x73f0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1da, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x52f7);
        EXPECT(gbc.pc(), 0x73f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1da), 0xe6);
        // CB A6 00E5
        gbc.setState(0x6702, 0x946d, 0x3e0, 0x9dc4, 0x280c, 0x2032, 0x0, 0x0);
        gbc.writeMem(0x2032, { 0x2f });
        gbc.writeMem(0x6702, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0x6704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00E6
        gbc.setState(0xe4ac, 0x276, 0x10c0, 0x950f, 0xfcdb, 0x8074, 0x1, 0x0);
        gbc.writeMem(0x8074, { 0xb0 });
        gbc.writeMem(0xe4ac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x276);
        EXPECT(gbc.pc(), 0xe4ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8074), 0xa0);
        EXPECT(gbc.readMem(0xe4ac), 0xcb);
        EXPECT(gbc.readMem(0xe4ad), 0xa6);
        // CB A6 00E7
        gbc.setState(0x5823, 0x31f3, 0xb750, 0x491a, 0xb6d1, 0xfed0, 0x0, 0x0);
        gbc.writeMem(0x5823, { 0xcb, 0xa6 });
        gbc.writeMem(0xfed0, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x31f3);
        EXPECT(gbc.pc(), 0x5825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfed0), 0xea);
        // CB A6 00E9
        gbc.setState(0x66b, 0x95a4, 0xa550, 0x14e1, 0xb498, 0x8301, 0x0, 0x1);
        gbc.writeMem(0x66b, { 0xcb, 0xa6 });
        gbc.writeMem(0x8301, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x95a4);
        EXPECT(gbc.pc(), 0x66d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8301), 0x41);
        // CB A6 00EA
        gbc.setState(0x5d9d, 0x9663, 0x6660, 0x4868, 0x4a77, 0xfc47, 0x0, 0x0);
        gbc.writeMem(0x5d9d, { 0xcb, 0xa6 });
        gbc.writeMem(0xfc47, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9663);
        EXPECT(gbc.pc(), 0x5d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc47), 0x27);
        // CB A6 00EB
        gbc.setState(0xad39, 0x3c5f, 0xa320, 0xd557, 0xccdd, 0xfec5, 0x0, 0x1);
        gbc.writeMem(0xad39, { 0xcb, 0xa6 });
        gbc.writeMem(0xfec5, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3c5f);
        EXPECT(gbc.pc(), 0xad3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad39), 0xcb);
        EXPECT(gbc.readMem(0xad3a), 0xa6);
        EXPECT(gbc.readMem(0xfec5), 0x64);
        // CB A6 00EC
        gbc.setState(0xb823, 0xe9c7, 0x1b70, 0x6926, 0x9427, 0xcaa8, 0x1, 0x0);
        gbc.writeMem(0xb823, { 0xcb, 0xa6 });
        gbc.writeMem(0xcaa8, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe9c7);
        EXPECT(gbc.pc(), 0xb825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb823), 0xcb);
        EXPECT(gbc.readMem(0xb824), 0xa6);
        EXPECT(gbc.readMem(0xcaa8), 0xa9);
        // CB A6 00ED
        gbc.setState(0x149b, 0xf150, 0x83a0, 0x8557, 0x16a5, 0x3736, 0x0, 0x0);
        gbc.writeMem(0x149b, { 0xcb, 0xa6 });
        gbc.writeMem(0x3736, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf150);
        EXPECT(gbc.pc(), 0x149d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00EE
        gbc.setState(0x7bee, 0x9264, 0x3050, 0xecc5, 0xd15e, 0x949d, 0x1, 0x0);
        gbc.writeMem(0x7bee, { 0xcb, 0xa6 });
        gbc.writeMem(0x949d, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9264);
        EXPECT(gbc.pc(), 0x7bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949d), 0x62);
        // CB A6 00F0
        gbc.setState(0x731, 0xd3fa, 0xe930, 0x7087, 0x9945, 0x3d63, 0x0, 0x0);
        gbc.writeMem(0x731, { 0xcb, 0xa6 });
        gbc.writeMem(0x3d63, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0x733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00F1
        gbc.setState(0x50d9, 0x3139, 0x3860, 0xbb6f, 0xbf48, 0x2d0c, 0x0, 0x0);
        gbc.writeMem(0x2d0c, { 0x47 });
        gbc.writeMem(0x50d9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3139);
        EXPECT(gbc.pc(), 0x50db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 00F2
        gbc.setState(0xc770, 0x2354, 0x1860, 0xaca5, 0x11e9, 0x9703, 0x0, 0x1);
        gbc.writeMem(0x9703, { 0x64 });
        gbc.writeMem(0xc770, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2354);
        EXPECT(gbc.pc(), 0xc772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9703), 0x64);
        EXPECT(gbc.readMem(0xc770), 0xcb);
        EXPECT(gbc.readMem(0xc771), 0xa6);
        // CB A6 00F5
        gbc.setState(0xe087, 0x499b, 0xafc0, 0x4a02, 0x26eb, 0x6da6, 0x0, 0x0);
        gbc.writeMem(0x6da6, { 0xe2 });
        gbc.writeMem(0xe087, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x499b);
        EXPECT(gbc.pc(), 0xe089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe087), 0xcb);
        EXPECT(gbc.readMem(0xe088), 0xa6);
        // CB A6 00F6
        gbc.setState(0x1b68, 0x78a6, 0xb7f0, 0xa59f, 0xf4ab, 0x3c16, 0x0, 0x0);
        gbc.writeMem(0x1b68, { 0xcb, 0xa6 });
        gbc.writeMem(0x3c16, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x78a6);
        EXPECT(gbc.pc(), 0x1b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 00F7
        gbc.setState(0xc0e2, 0x6fa0, 0x7650, 0x68e2, 0x52e5, 0xbe32, 0x0, 0x1);
        gbc.writeMem(0xbe32, { 0x9e });
        gbc.writeMem(0xc0e2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6fa0);
        EXPECT(gbc.pc(), 0xc0e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe32), 0x8e);
        EXPECT(gbc.readMem(0xc0e2), 0xcb);
        EXPECT(gbc.readMem(0xc0e3), 0xa6);
        // CB A6 00FA
        gbc.setState(0xc297, 0x5ecd, 0x5910, 0x4645, 0x5f2b, 0x14b, 0x0, 0x1);
        gbc.writeMem(0x14b, { 0xc9 });
        gbc.writeMem(0xc297, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5ecd);
        EXPECT(gbc.pc(), 0xc299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc297), 0xcb);
        EXPECT(gbc.readMem(0xc298), 0xa6);
        // CB A6 00FC
        gbc.setState(0x926b, 0x5d7a, 0x35c0, 0x5882, 0xf83, 0xc3e4, 0x1, 0x1);
        gbc.writeMem(0x926b, { 0xcb, 0xa6 });
        gbc.writeMem(0xc3e4, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5d7a);
        EXPECT(gbc.pc(), 0x926d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x926b), 0xcb);
        EXPECT(gbc.readMem(0x926c), 0xa6);
        EXPECT(gbc.readMem(0xc3e4), 0xab);
        // CB A6 00FD
        gbc.setState(0x5702, 0xdfbf, 0x9500, 0xf0d6, 0x8554, 0x5f73, 0x0, 0x1);
        gbc.writeMem(0x5702, { 0xcb, 0xa6 });
        gbc.writeMem(0x5f73, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdfbf);
        EXPECT(gbc.pc(), 0x5704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0102
        gbc.setState(0xac79, 0x8055, 0xc40, 0xaed8, 0x9034, 0x680b, 0x1, 0x0);
        gbc.writeMem(0x680b, { 0x2c });
        gbc.writeMem(0xac79, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8055);
        EXPECT(gbc.pc(), 0xac7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac79), 0xcb);
        EXPECT(gbc.readMem(0xac7a), 0xa6);
        // CB A6 0103
        gbc.setState(0xbc4, 0xb9eb, 0x5f10, 0x68ff, 0x6a63, 0xa5c1, 0x0, 0x0);
        gbc.writeMem(0xbc4, { 0xcb, 0xa6 });
        gbc.writeMem(0xa5c1, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb9eb);
        EXPECT(gbc.pc(), 0xbc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c1), 0x6);
        // CB A6 0104
        gbc.setState(0xaf7e, 0x16c8, 0xc1b0, 0xe4e4, 0xcff4, 0x1a3a, 0x0, 0x1);
        gbc.writeMem(0x1a3a, { 0xc6 });
        gbc.writeMem(0xaf7e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x16c8);
        EXPECT(gbc.pc(), 0xaf80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf7e), 0xcb);
        EXPECT(gbc.readMem(0xaf7f), 0xa6);
        // CB A6 0105
        gbc.setState(0x7b30, 0x2215, 0xe560, 0x2ad9, 0xb86f, 0x1bc4, 0x0, 0x0);
        gbc.writeMem(0x1bc4, { 0xc });
        gbc.writeMem(0x7b30, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2215);
        EXPECT(gbc.pc(), 0x7b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0106
        gbc.setState(0xb7cf, 0x14a5, 0x9d30, 0x5e1d, 0xdac6, 0x9c9b, 0x1, 0x0);
        gbc.writeMem(0x9c9b, { 0xa5 });
        gbc.writeMem(0xb7cf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x14a5);
        EXPECT(gbc.pc(), 0xb7d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c9b), 0xa5);
        EXPECT(gbc.readMem(0xb7cf), 0xcb);
        EXPECT(gbc.readMem(0xb7d0), 0xa6);
        // CB A6 0107
        gbc.setState(0xd250, 0xa38e, 0xf530, 0x5f6d, 0xf15b, 0xa5f6, 0x0, 0x0);
        gbc.writeMem(0xa5f6, { 0x9 });
        gbc.writeMem(0xd250, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa38e);
        EXPECT(gbc.pc(), 0xd252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f6), 0x9);
        EXPECT(gbc.readMem(0xd250), 0xcb);
        EXPECT(gbc.readMem(0xd251), 0xa6);
        // CB A6 0108
        gbc.setState(0xba87, 0x49ef, 0xc2d0, 0xbf20, 0x6257, 0x399b, 0x0, 0x1);
        gbc.writeMem(0x399b, { 0x62 });
        gbc.writeMem(0xba87, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x49ef);
        EXPECT(gbc.pc(), 0xba89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba87), 0xcb);
        EXPECT(gbc.readMem(0xba88), 0xa6);
        // CB A6 0109
        gbc.setState(0x74e1, 0x64a8, 0x8a40, 0x40cc, 0xfe60, 0x9c41, 0x1, 0x1);
        gbc.writeMem(0x74e1, { 0xcb, 0xa6 });
        gbc.writeMem(0x9c41, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x64a8);
        EXPECT(gbc.pc(), 0x74e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c41), 0xc8);
        // CB A6 010A
        gbc.setState(0xcfd0, 0x5d11, 0xc570, 0x791a, 0xb1de, 0xd514, 0x1, 0x0);
        gbc.writeMem(0xcfd0, { 0xcb, 0xa6 });
        gbc.writeMem(0xd514, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5d11);
        EXPECT(gbc.pc(), 0xcfd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd0), 0xcb);
        EXPECT(gbc.readMem(0xcfd1), 0xa6);
        EXPECT(gbc.readMem(0xd514), 0xc0);
        // CB A6 010B
        gbc.setState(0x4219, 0x4e68, 0xbdc0, 0xfe99, 0xcd36, 0xd90b, 0x1, 0x1);
        gbc.writeMem(0x4219, { 0xcb, 0xa6 });
        gbc.writeMem(0xd90b, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4e68);
        EXPECT(gbc.pc(), 0x421b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90b), 0xe6);
        // CB A6 010F
        gbc.setState(0x4572, 0x9b9f, 0xc20, 0x9946, 0xa909, 0xc101, 0x1, 0x0);
        gbc.writeMem(0x4572, { 0xcb, 0xa6 });
        gbc.writeMem(0xc101, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9b9f);
        EXPECT(gbc.pc(), 0x4574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc101), 0x69);
        // CB A6 0110
        gbc.setState(0x4b08, 0xf651, 0x55c0, 0xa218, 0xc0be, 0xb942, 0x0, 0x1);
        gbc.writeMem(0x4b08, { 0xcb, 0xa6 });
        gbc.writeMem(0xb942, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf651);
        EXPECT(gbc.pc(), 0x4b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb942), 0x2);
        // CB A6 0111
        gbc.setState(0x2db9, 0x24cb, 0x63e0, 0x91d0, 0x5a50, 0x7c49, 0x1, 0x0);
        gbc.writeMem(0x2db9, { 0xcb, 0xa6 });
        gbc.writeMem(0x7c49, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x24cb);
        EXPECT(gbc.pc(), 0x2dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0113
        gbc.setState(0xc323, 0xcff7, 0x3ec0, 0xb9ec, 0x724f, 0x8653, 0x1, 0x0);
        gbc.writeMem(0x8653, { 0xc6 });
        gbc.writeMem(0xc323, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xcff7);
        EXPECT(gbc.pc(), 0xc325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8653), 0xc6);
        EXPECT(gbc.readMem(0xc323), 0xcb);
        EXPECT(gbc.readMem(0xc324), 0xa6);
        // CB A6 0114
        gbc.setState(0x6655, 0x4aee, 0x9fa0, 0xdd8a, 0x4041, 0x5abb, 0x0, 0x0);
        gbc.writeMem(0x5abb, { 0x25 });
        gbc.writeMem(0x6655, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4aee);
        EXPECT(gbc.pc(), 0x6657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0115
        gbc.setState(0xeb56, 0xda, 0x1480, 0x5e99, 0xc4bb, 0xc905, 0x1, 0x0);
        gbc.writeMem(0xc905, { 0xcf });
        gbc.writeMem(0xeb56, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xda);
        EXPECT(gbc.pc(), 0xeb58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc905), 0xcf);
        EXPECT(gbc.readMem(0xeb56), 0xcb);
        EXPECT(gbc.readMem(0xeb57), 0xa6);
        // CB A6 0116
        gbc.setState(0x8c2e, 0x9c3c, 0x61f0, 0xf49e, 0x1c9b, 0xfa2b, 0x1, 0x1);
        gbc.writeMem(0x8c2e, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa2b, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9c3c);
        EXPECT(gbc.pc(), 0x8c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2e), 0xcb);
        EXPECT(gbc.readMem(0x8c2f), 0xa6);
        EXPECT(gbc.readMem(0xfa2b), 0x2d);
        // CB A6 0117
        gbc.setState(0x5574, 0x3805, 0x8340, 0x603d, 0x8dc7, 0xa2bf, 0x1, 0x0);
        gbc.writeMem(0x5574, { 0xcb, 0xa6 });
        gbc.writeMem(0xa2bf, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3805);
        EXPECT(gbc.pc(), 0x5576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bf), 0x8d);
        // CB A6 0118
        gbc.setState(0xb4e5, 0x79ba, 0x9d90, 0x6df, 0x7123, 0xe067, 0x1, 0x0);
        gbc.writeMem(0xb4e5, { 0xcb, 0xa6 });
        gbc.writeMem(0xe067, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x79ba);
        EXPECT(gbc.pc(), 0xb4e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4e5), 0xcb);
        EXPECT(gbc.readMem(0xb4e6), 0xa6);
        EXPECT(gbc.readMem(0xe067), 0x6a);
        // CB A6 011A
        gbc.setState(0xe221, 0x2f1b, 0xf490, 0x564d, 0xa635, 0xcaf3, 0x0, 0x0);
        gbc.writeMem(0xcaf3, { 0x71 });
        gbc.writeMem(0xe221, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2f1b);
        EXPECT(gbc.pc(), 0xe223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf3), 0x61);
        EXPECT(gbc.readMem(0xe221), 0xcb);
        EXPECT(gbc.readMem(0xe222), 0xa6);
        // CB A6 011C
        gbc.setState(0xefc7, 0x54b2, 0xaa30, 0x127c, 0x2354, 0xc756, 0x0, 0x0);
        gbc.writeMem(0xc756, { 0x96 });
        gbc.writeMem(0xefc7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x54b2);
        EXPECT(gbc.pc(), 0xefc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc756), 0x86);
        EXPECT(gbc.readMem(0xefc7), 0xcb);
        EXPECT(gbc.readMem(0xefc8), 0xa6);
        // CB A6 011F
        gbc.setState(0xd668, 0x6fc6, 0x2260, 0xaf91, 0x7f43, 0x2b49, 0x0, 0x0);
        gbc.writeMem(0x2b49, { 0xcf });
        gbc.writeMem(0xd668, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6fc6);
        EXPECT(gbc.pc(), 0xd66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd668), 0xcb);
        EXPECT(gbc.readMem(0xd669), 0xa6);
        // CB A6 0120
        gbc.setState(0xff5, 0x7721, 0xfa50, 0x5261, 0x1a86, 0xd1f7, 0x1, 0x1);
        gbc.writeMem(0xff5, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1f7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7721);
        EXPECT(gbc.pc(), 0xff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1f7), 0x29);
        // CB A6 0121
        gbc.setState(0x9936, 0xe896, 0x9650, 0x2b61, 0x21a7, 0x83ae, 0x0, 0x0);
        gbc.writeMem(0x83ae, { 0x8d });
        gbc.writeMem(0x9936, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe896);
        EXPECT(gbc.pc(), 0x9938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ae), 0x8d);
        EXPECT(gbc.readMem(0x9936), 0xcb);
        EXPECT(gbc.readMem(0x9937), 0xa6);
        // CB A6 0122
        gbc.setState(0x10b9, 0x12c9, 0x4e80, 0x2f95, 0x31fc, 0xae06, 0x1, 0x1);
        gbc.writeMem(0x10b9, { 0xcb, 0xa6 });
        gbc.writeMem(0xae06, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x12c9);
        EXPECT(gbc.pc(), 0x10bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae06), 0x3);
        // CB A6 0123
        gbc.setState(0xdab2, 0xea33, 0x65f0, 0x1698, 0xbd6b, 0xc598, 0x1, 0x1);
        gbc.writeMem(0xc598, { 0xdb });
        gbc.writeMem(0xdab2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xea33);
        EXPECT(gbc.pc(), 0xdab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc598), 0xcb);
        EXPECT(gbc.readMem(0xdab2), 0xcb);
        EXPECT(gbc.readMem(0xdab3), 0xa6);
        // CB A6 0125
        gbc.setState(0xdb20, 0x6d2b, 0xb7a0, 0xcefd, 0xa43e, 0xc220, 0x1, 0x0);
        gbc.writeMem(0xc220, { 0x8a });
        gbc.writeMem(0xdb20, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6d2b);
        EXPECT(gbc.pc(), 0xdb22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc220), 0x8a);
        EXPECT(gbc.readMem(0xdb20), 0xcb);
        EXPECT(gbc.readMem(0xdb21), 0xa6);
        // CB A6 0126
        gbc.setState(0x717e, 0x89eb, 0x8c0, 0xbcf5, 0x5ddd, 0xe404, 0x1, 0x1);
        gbc.writeMem(0x717e, { 0xcb, 0xa6 });
        gbc.writeMem(0xe404, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x89eb);
        EXPECT(gbc.pc(), 0x7180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe404), 0x8d);
        // CB A6 0127
        gbc.setState(0xab01, 0x7a0c, 0xe440, 0x4750, 0xa3b1, 0x94b3, 0x0, 0x0);
        gbc.writeMem(0x94b3, { 0xf3 });
        gbc.writeMem(0xab01, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0xab03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b3), 0xe3);
        EXPECT(gbc.readMem(0xab01), 0xcb);
        EXPECT(gbc.readMem(0xab02), 0xa6);
        // CB A6 0129
        gbc.setState(0x5f42, 0xd4fa, 0x4bc0, 0x914d, 0xe3f8, 0xbe4b, 0x1, 0x0);
        gbc.writeMem(0x5f42, { 0xcb, 0xa6 });
        gbc.writeMem(0xbe4b, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd4fa);
        EXPECT(gbc.pc(), 0x5f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4b), 0xea);
        // CB A6 012A
        gbc.setState(0x5a9c, 0xe0a0, 0x9250, 0x60e1, 0x290a, 0x6469, 0x0, 0x0);
        gbc.writeMem(0x5a9c, { 0xcb, 0xa6 });
        gbc.writeMem(0x6469, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe0a0);
        EXPECT(gbc.pc(), 0x5a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 012B
        gbc.setState(0x8f89, 0x664f, 0x9b20, 0x808b, 0x9374, 0xca2f, 0x1, 0x1);
        gbc.writeMem(0x8f89, { 0xcb, 0xa6 });
        gbc.writeMem(0xca2f, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x664f);
        EXPECT(gbc.pc(), 0x8f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f89), 0xcb);
        EXPECT(gbc.readMem(0x8f8a), 0xa6);
        EXPECT(gbc.readMem(0xca2f), 0x8a);
        // CB A6 012D
        gbc.setState(0x13a5, 0x8d80, 0x78b0, 0x54f0, 0xe9eb, 0x8f44, 0x1, 0x0);
        gbc.writeMem(0x13a5, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f44, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8d80);
        EXPECT(gbc.pc(), 0x13a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f44), 0x64);
        // CB A6 012E
        gbc.setState(0x7389, 0x64f, 0x9190, 0x7052, 0xd633, 0x9d59, 0x1, 0x1);
        gbc.writeMem(0x7389, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d59, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x64f);
        EXPECT(gbc.pc(), 0x738b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d59), 0xa5);
        // CB A6 012F
        gbc.setState(0x32b3, 0xa028, 0x5310, 0x6063, 0xd90d, 0x19c5, 0x0, 0x1);
        gbc.writeMem(0x19c5, { 0xc });
        gbc.writeMem(0x32b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa028);
        EXPECT(gbc.pc(), 0x32b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0131
        gbc.setState(0xe807, 0x84f8, 0x47a0, 0x6e7b, 0x53f, 0x84d4, 0x1, 0x1);
        gbc.writeMem(0x84d4, { 0x7d });
        gbc.writeMem(0xe807, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x84f8);
        EXPECT(gbc.pc(), 0xe809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d4), 0x6d);
        EXPECT(gbc.readMem(0xe807), 0xcb);
        EXPECT(gbc.readMem(0xe808), 0xa6);
        // CB A6 0133
        gbc.setState(0xe538, 0x23ac, 0x91a0, 0xb47, 0x3541, 0xc3b6, 0x0, 0x1);
        gbc.writeMem(0xc3b6, { 0x1d });
        gbc.writeMem(0xe538, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x23ac);
        EXPECT(gbc.pc(), 0xe53a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b6), 0xd);
        EXPECT(gbc.readMem(0xe538), 0xcb);
        EXPECT(gbc.readMem(0xe539), 0xa6);
        // CB A6 0135
        gbc.setState(0x18e7, 0xca7f, 0xec90, 0xfaa9, 0x97f9, 0x7565, 0x0, 0x1);
        gbc.writeMem(0x18e7, { 0xcb, 0xa6 });
        gbc.writeMem(0x7565, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xca7f);
        EXPECT(gbc.pc(), 0x18e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0136
        gbc.setState(0x2d29, 0xad27, 0x1a30, 0xb42, 0xd100, 0x83bb, 0x0, 0x0);
        gbc.writeMem(0x2d29, { 0xcb, 0xa6 });
        gbc.writeMem(0x83bb, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xad27);
        EXPECT(gbc.pc(), 0x2d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83bb), 0xc9);
        // CB A6 0137
        gbc.setState(0x78c1, 0x4641, 0x3c30, 0xcdcc, 0xf51f, 0xbfe1, 0x1, 0x0);
        gbc.writeMem(0x78c1, { 0xcb, 0xa6 });
        gbc.writeMem(0xbfe1, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4641);
        EXPECT(gbc.pc(), 0x78c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe1), 0xcd);
        // CB A6 0138
        gbc.setState(0x105, 0x4dd1, 0x5c40, 0xef87, 0x9fc0, 0x224c, 0x1, 0x1);
        gbc.writeMem(0x105, { 0xcb, 0xa6 });
        gbc.writeMem(0x224c, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4dd1);
        EXPECT(gbc.pc(), 0x107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 013A
        gbc.setState(0x12b7, 0xbae2, 0x5c50, 0xbf13, 0x7105, 0x5b8e, 0x1, 0x1);
        gbc.writeMem(0x12b7, { 0xcb, 0xa6 });
        gbc.writeMem(0x5b8e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbae2);
        EXPECT(gbc.pc(), 0x12b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 013B
        gbc.setState(0xbd57, 0x349d, 0x8260, 0xcc73, 0xc522, 0xfaa6, 0x0, 0x0);
        gbc.writeMem(0xbd57, { 0xcb, 0xa6 });
        gbc.writeMem(0xfaa6, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x349d);
        EXPECT(gbc.pc(), 0xbd59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd57), 0xcb);
        EXPECT(gbc.readMem(0xbd58), 0xa6);
        EXPECT(gbc.readMem(0xfaa6), 0x5);
        // CB A6 013C
        gbc.setState(0xf95, 0x8393, 0xa2c0, 0x69d1, 0x9464, 0x4d17, 0x0, 0x1);
        gbc.writeMem(0xf95, { 0xcb, 0xa6 });
        gbc.writeMem(0x4d17, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8393);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 013D
        gbc.setState(0x29cd, 0x8454, 0xbdc0, 0x1324, 0x90ec, 0xc57d, 0x1, 0x0);
        gbc.writeMem(0x29cd, { 0xcb, 0xa6 });
        gbc.writeMem(0xc57d, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8454);
        EXPECT(gbc.pc(), 0x29cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57d), 0x20);
        // CB A6 013F
        gbc.setState(0xb23b, 0x5cc6, 0xc9e0, 0xb37f, 0xfb40, 0x3f91, 0x0, 0x1);
        gbc.writeMem(0x3f91, { 0x6e });
        gbc.writeMem(0xb23b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5cc6);
        EXPECT(gbc.pc(), 0xb23d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb23b), 0xcb);
        EXPECT(gbc.readMem(0xb23c), 0xa6);
        // CB A6 0140
        gbc.setState(0xbaa1, 0x33fb, 0x8cc0, 0x4f62, 0x290f, 0x411f, 0x1, 0x1);
        gbc.writeMem(0x411f, { 0x80 });
        gbc.writeMem(0xbaa1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x33fb);
        EXPECT(gbc.pc(), 0xbaa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa1), 0xcb);
        EXPECT(gbc.readMem(0xbaa2), 0xa6);
        // CB A6 0141
        gbc.setState(0x8f0a, 0x7034, 0x530, 0x5a12, 0xbbf1, 0x11e1, 0x1, 0x1);
        gbc.writeMem(0x11e1, { 0x6d });
        gbc.writeMem(0x8f0a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7034);
        EXPECT(gbc.pc(), 0x8f0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f0a), 0xcb);
        EXPECT(gbc.readMem(0x8f0b), 0xa6);
        // CB A6 0143
        gbc.setState(0xbdc2, 0x54fd, 0x3790, 0x5c7f, 0x8b2e, 0x9593, 0x0, 0x1);
        gbc.writeMem(0x9593, { 0xda });
        gbc.writeMem(0xbdc2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x54fd);
        EXPECT(gbc.pc(), 0xbdc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9593), 0xca);
        EXPECT(gbc.readMem(0xbdc2), 0xcb);
        EXPECT(gbc.readMem(0xbdc3), 0xa6);
        // CB A6 0146
        gbc.setState(0x61b6, 0x6c55, 0x2d70, 0x6f3a, 0x8ac4, 0x3323, 0x1, 0x1);
        gbc.writeMem(0x3323, { 0xa2 });
        gbc.writeMem(0x61b6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6c55);
        EXPECT(gbc.pc(), 0x61b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0148
        gbc.setState(0x95f1, 0xee80, 0xcbc0, 0xe572, 0x51f3, 0xa1e5, 0x1, 0x1);
        gbc.writeMem(0x95f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xa1e5, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xee80);
        EXPECT(gbc.pc(), 0x95f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f1), 0xcb);
        EXPECT(gbc.readMem(0x95f2), 0xa6);
        EXPECT(gbc.readMem(0xa1e5), 0x65);
        // CB A6 014A
        gbc.setState(0xabad, 0x961b, 0x5db0, 0xee4e, 0xeffa, 0xc007, 0x1, 0x1);
        gbc.writeMem(0xabad, { 0xcb, 0xa6 });
        gbc.writeMem(0xc007, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x961b);
        EXPECT(gbc.pc(), 0xabaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabad), 0xcb);
        EXPECT(gbc.readMem(0xabae), 0xa6);
        EXPECT(gbc.readMem(0xc007), 0x8e);
        // CB A6 014B
        gbc.setState(0x9c4, 0xd5ce, 0x5b30, 0x61b, 0xde6d, 0xeae6, 0x0, 0x0);
        gbc.writeMem(0x9c4, { 0xcb, 0xa6 });
        gbc.writeMem(0xeae6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd5ce);
        EXPECT(gbc.pc(), 0x9c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae6), 0x47);
        // CB A6 014C
        gbc.setState(0x7ec0, 0xf31f, 0x6200, 0x33e4, 0xe6b1, 0xa29c, 0x1, 0x1);
        gbc.writeMem(0x7ec0, { 0xcb, 0xa6 });
        gbc.writeMem(0xa29c, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf31f);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa29c), 0x6a);
        // CB A6 014D
        gbc.setState(0x6f09, 0x333, 0xdf0, 0xa02d, 0x496d, 0x55c7, 0x1, 0x1);
        gbc.writeMem(0x55c7, { 0xc3 });
        gbc.writeMem(0x6f09, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x333);
        EXPECT(gbc.pc(), 0x6f0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 014F
        gbc.setState(0x9684, 0x7532, 0x4fa0, 0xbfaf, 0xdbcd, 0xe5ee, 0x1, 0x1);
        gbc.writeMem(0x9684, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5ee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0x9686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9684), 0xcb);
        EXPECT(gbc.readMem(0x9685), 0xa6);
        EXPECT(gbc.readMem(0xe5ee), 0x4f);
        // CB A6 0150
        gbc.setState(0x655b, 0xaf31, 0x4f80, 0x9bd2, 0x766b, 0x621, 0x1, 0x1);
        gbc.writeMem(0x621, { 0x63 });
        gbc.writeMem(0x655b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xaf31);
        EXPECT(gbc.pc(), 0x655d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0153
        gbc.setState(0xdf0c, 0x46b, 0xd2f0, 0x5edf, 0x2ecc, 0xa6fa, 0x0, 0x0);
        gbc.writeMem(0xa6fa, { 0x53 });
        gbc.writeMem(0xdf0c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x46b);
        EXPECT(gbc.pc(), 0xdf0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6fa), 0x43);
        EXPECT(gbc.readMem(0xdf0c), 0xcb);
        EXPECT(gbc.readMem(0xdf0d), 0xa6);
        // CB A6 0154
        gbc.setState(0x64c2, 0xfa93, 0x3d40, 0x5034, 0x83fe, 0xc633, 0x0, 0x0);
        gbc.writeMem(0x64c2, { 0xcb, 0xa6 });
        gbc.writeMem(0xc633, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfa93);
        EXPECT(gbc.pc(), 0x64c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc633), 0x63);
        // CB A6 0155
        gbc.setState(0x6bda, 0xba7e, 0xddd0, 0x79cc, 0xe745, 0x9f0a, 0x0, 0x0);
        gbc.writeMem(0x6bda, { 0xcb, 0xa6 });
        gbc.writeMem(0x9f0a, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xba7e);
        EXPECT(gbc.pc(), 0x6bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0a), 0xc5);
        // CB A6 0156
        gbc.setState(0x8040, 0x7a8a, 0xbc70, 0x19fa, 0xd755, 0xe15f, 0x1, 0x1);
        gbc.writeMem(0x8040, { 0xcb, 0xa6 });
        gbc.writeMem(0xe15f, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7a8a);
        EXPECT(gbc.pc(), 0x8042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8040), 0xcb);
        EXPECT(gbc.readMem(0x8041), 0xa6);
        EXPECT(gbc.readMem(0xe15f), 0x66);
        // CB A6 0157
        gbc.setState(0xcb6b, 0x1467, 0xdb30, 0x1ee0, 0xb823, 0xffb8, 0x0, 0x0);
        gbc.writeMem(0xcb6b, { 0xcb, 0xa6 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1467);
        EXPECT(gbc.pc(), 0xcb6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb6b), 0xcb);
        EXPECT(gbc.readMem(0xcb6c), 0xa6);
        EXPECT(gbc.readMem(0xffb8), 0x0);
        // CB A6 0158
        gbc.setState(0x58e4, 0x5dee, 0xc670, 0x1f00, 0xac89, 0xeb2d, 0x1, 0x0);
        gbc.writeMem(0x58e4, { 0xcb, 0xa6 });
        gbc.writeMem(0xeb2d, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5dee);
        EXPECT(gbc.pc(), 0x58e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb2d), 0x89);
        // CB A6 0159
        gbc.setState(0xc8fb, 0xbe40, 0x55a0, 0x64bf, 0xb7aa, 0x309d, 0x1, 0x1);
        gbc.writeMem(0x309d, { 0x2f });
        gbc.writeMem(0xc8fb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xbe40);
        EXPECT(gbc.pc(), 0xc8fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fb), 0xcb);
        EXPECT(gbc.readMem(0xc8fc), 0xa6);
        // CB A6 015A
        gbc.setState(0x8e0d, 0x97ba, 0xa5d0, 0xc4d1, 0xf308, 0x8421, 0x1, 0x1);
        gbc.writeMem(0x8421, { 0x8b });
        gbc.writeMem(0x8e0d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x97ba);
        EXPECT(gbc.pc(), 0x8e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8421), 0x8b);
        EXPECT(gbc.readMem(0x8e0d), 0xcb);
        EXPECT(gbc.readMem(0x8e0e), 0xa6);
        // CB A6 015B
        gbc.setState(0xb127, 0x4f39, 0xdce0, 0x8bf3, 0xbd72, 0x59d9, 0x1, 0x0);
        gbc.writeMem(0x59d9, { 0xe0 });
        gbc.writeMem(0xb127, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4f39);
        EXPECT(gbc.pc(), 0xb129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb127), 0xcb);
        EXPECT(gbc.readMem(0xb128), 0xa6);
        // CB A6 015D
        gbc.setState(0xcdab, 0x9419, 0xb450, 0xcd9a, 0x2d91, 0xde48, 0x1, 0x0);
        gbc.writeMem(0xcdab, { 0xcb, 0xa6 });
        gbc.writeMem(0xde48, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9419);
        EXPECT(gbc.pc(), 0xcdad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdab), 0xcb);
        EXPECT(gbc.readMem(0xcdac), 0xa6);
        EXPECT(gbc.readMem(0xde48), 0x8b);
        // CB A6 015E
        gbc.setState(0xc287, 0x8235, 0xbf70, 0x9497, 0xfa84, 0xb5a6, 0x1, 0x1);
        gbc.writeMem(0xb5a6, { 0x33 });
        gbc.writeMem(0xc287, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8235);
        EXPECT(gbc.pc(), 0xc289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a6), 0x23);
        EXPECT(gbc.readMem(0xc287), 0xcb);
        EXPECT(gbc.readMem(0xc288), 0xa6);
        // CB A6 0160
        gbc.setState(0x621a, 0x6c2c, 0xb090, 0x2ed2, 0x99aa, 0xbbfe, 0x1, 0x0);
        gbc.writeMem(0x621a, { 0xcb, 0xa6 });
        gbc.writeMem(0xbbfe, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6c2c);
        EXPECT(gbc.pc(), 0x621c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfe), 0x82);
        // CB A6 0161
        gbc.setState(0xc6fd, 0xd3fc, 0xe2c0, 0xbd64, 0x907e, 0xae7f, 0x0, 0x0);
        gbc.writeMem(0xae7f, { 0x54 });
        gbc.writeMem(0xc6fd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd3fc);
        EXPECT(gbc.pc(), 0xc6ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7f), 0x44);
        EXPECT(gbc.readMem(0xc6fd), 0xcb);
        EXPECT(gbc.readMem(0xc6fe), 0xa6);
        // CB A6 0162
        gbc.setState(0x388a, 0xa0a1, 0x4910, 0xd640, 0x17a6, 0xb11b, 0x1, 0x0);
        gbc.writeMem(0x388a, { 0xcb, 0xa6 });
        gbc.writeMem(0xb11b, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa0a1);
        EXPECT(gbc.pc(), 0x388c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb11b), 0x85);
        // CB A6 0164
        gbc.setState(0x9c2a, 0x54a8, 0xe070, 0x2bdd, 0x6e7a, 0xf30d, 0x0, 0x1);
        gbc.writeMem(0x9c2a, { 0xcb, 0xa6 });
        gbc.writeMem(0xf30d, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x54a8);
        EXPECT(gbc.pc(), 0x9c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2a), 0xcb);
        EXPECT(gbc.readMem(0x9c2b), 0xa6);
        EXPECT(gbc.readMem(0xf30d), 0x81);
        // CB A6 0165
        gbc.setState(0xd6ad, 0x7c48, 0x14e0, 0xc61d, 0x4438, 0x462a, 0x0, 0x0);
        gbc.writeMem(0x462a, { 0x26 });
        gbc.writeMem(0xd6ad, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7c48);
        EXPECT(gbc.pc(), 0xd6af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ad), 0xcb);
        EXPECT(gbc.readMem(0xd6ae), 0xa6);
        // CB A6 0168
        gbc.setState(0x4e7f, 0xe8a4, 0x5930, 0x5e2c, 0x4381, 0xe49, 0x1, 0x1);
        gbc.writeMem(0xe49, { 0x2c });
        gbc.writeMem(0x4e7f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe8a4);
        EXPECT(gbc.pc(), 0x4e81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0169
        gbc.setState(0xc740, 0x90ca, 0x6de0, 0x3804, 0x4b29, 0x8f31, 0x0, 0x1);
        gbc.writeMem(0x8f31, { 0xcf });
        gbc.writeMem(0xc740, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x90ca);
        EXPECT(gbc.pc(), 0xc742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f31), 0xcf);
        EXPECT(gbc.readMem(0xc740), 0xcb);
        EXPECT(gbc.readMem(0xc741), 0xa6);
        // CB A6 016A
        gbc.setState(0x66fd, 0xcd9, 0x3a00, 0xd9fb, 0x800e, 0xde8c, 0x1, 0x1);
        gbc.writeMem(0x66fd, { 0xcb, 0xa6 });
        gbc.writeMem(0xde8c, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcd9);
        EXPECT(gbc.pc(), 0x66ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde8c), 0x87);
        // CB A6 016B
        gbc.setState(0x682c, 0x57e1, 0x9400, 0x5ae4, 0xe9f7, 0x9b21, 0x1, 0x1);
        gbc.writeMem(0x682c, { 0xcb, 0xa6 });
        gbc.writeMem(0x9b21, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x57e1);
        EXPECT(gbc.pc(), 0x682e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b21), 0xcc);
        // CB A6 016C
        gbc.setState(0x5588, 0xe334, 0x95e0, 0xb4a3, 0x981b, 0xbda6, 0x0, 0x0);
        gbc.writeMem(0x5588, { 0xcb, 0xa6 });
        gbc.writeMem(0xbda6, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe334);
        EXPECT(gbc.pc(), 0x558a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda6), 0x24);
        // CB A6 016D
        gbc.setState(0x98c1, 0x378b, 0x2510, 0x5685, 0x55ab, 0x9846, 0x0, 0x1);
        gbc.writeMem(0x9846, { 0x90 });
        gbc.writeMem(0x98c1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x378b);
        EXPECT(gbc.pc(), 0x98c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9846), 0x80);
        EXPECT(gbc.readMem(0x98c1), 0xcb);
        EXPECT(gbc.readMem(0x98c2), 0xa6);
        // CB A6 016E
        gbc.setState(0xa5ee, 0x72b0, 0xd0f0, 0x1f64, 0xb37f, 0x3d50, 0x1, 0x0);
        gbc.writeMem(0x3d50, { 0x64 });
        gbc.writeMem(0xa5ee, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x72b0);
        EXPECT(gbc.pc(), 0xa5f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ee), 0xcb);
        EXPECT(gbc.readMem(0xa5ef), 0xa6);
        // CB A6 0170
        gbc.setState(0x6a7e, 0x6c8d, 0xef60, 0x902b, 0x36d0, 0x844, 0x0, 0x0);
        gbc.writeMem(0x844, { 0x66 });
        gbc.writeMem(0x6a7e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6c8d);
        EXPECT(gbc.pc(), 0x6a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0171
        gbc.setState(0x5e8c, 0x19e6, 0xe840, 0x528f, 0x22c8, 0xfb00, 0x1, 0x0);
        gbc.writeMem(0x5e8c, { 0xcb, 0xa6 });
        gbc.writeMem(0xfb00, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x19e6);
        EXPECT(gbc.pc(), 0x5e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb00), 0x42);
        // CB A6 0172
        gbc.setState(0x59cb, 0x32bf, 0xe5d0, 0x3577, 0xd49b, 0x84cf, 0x1, 0x0);
        gbc.writeMem(0x59cb, { 0xcb, 0xa6 });
        gbc.writeMem(0x84cf, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x32bf);
        EXPECT(gbc.pc(), 0x59cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cf), 0xa5);
        // CB A6 0173
        gbc.setState(0x6c5d, 0xd618, 0x7ff0, 0xba85, 0x4a8c, 0xfdc1, 0x1, 0x0);
        gbc.writeMem(0x6c5d, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdc1, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd618);
        EXPECT(gbc.pc(), 0x6c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfdc1), 0xe8);
        // CB A6 0175
        gbc.setState(0x8685, 0xdc1, 0x350, 0x8e78, 0x7e5e, 0xa163, 0x0, 0x1);
        gbc.writeMem(0x8685, { 0xcb, 0xa6 });
        gbc.writeMem(0xa163, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xdc1);
        EXPECT(gbc.pc(), 0x8687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8685), 0xcb);
        EXPECT(gbc.readMem(0x8686), 0xa6);
        EXPECT(gbc.readMem(0xa163), 0x87);
        // CB A6 0176
        gbc.setState(0x9a82, 0xbfa5, 0x20d0, 0xae01, 0x8f6c, 0xac7a, 0x0, 0x1);
        gbc.writeMem(0x9a82, { 0xcb, 0xa6 });
        gbc.writeMem(0xac7a, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xbfa5);
        EXPECT(gbc.pc(), 0x9a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a82), 0xcb);
        EXPECT(gbc.readMem(0x9a83), 0xa6);
        EXPECT(gbc.readMem(0xac7a), 0xad);
        // CB A6 0177
        gbc.setState(0x4e3e, 0xc20a, 0x9480, 0xad2c, 0xaa3e, 0x39ff, 0x0, 0x1);
        gbc.writeMem(0x39ff, { 0x0 });
        gbc.writeMem(0x4e3e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc20a);
        EXPECT(gbc.pc(), 0x4e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0178
        gbc.setState(0x283e, 0xa569, 0xc0a0, 0x8416, 0x74ab, 0x943d, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xcb, 0xa6 });
        gbc.writeMem(0x943d, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa569);
        EXPECT(gbc.pc(), 0x2840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x943d), 0x26);
        // CB A6 0179
        gbc.setState(0xc48a, 0x5742, 0x3170, 0xaebd, 0xbf29, 0x395b, 0x0, 0x1);
        gbc.writeMem(0x395b, { 0x69 });
        gbc.writeMem(0xc48a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5742);
        EXPECT(gbc.pc(), 0xc48c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48a), 0xcb);
        EXPECT(gbc.readMem(0xc48b), 0xa6);
        // CB A6 017B
        gbc.setState(0xc6c4, 0x7385, 0x8820, 0x1b8b, 0x129a, 0x3003, 0x1, 0x1);
        gbc.writeMem(0x3003, { 0x2d });
        gbc.writeMem(0xc6c4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0xc6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c4), 0xcb);
        EXPECT(gbc.readMem(0xc6c5), 0xa6);
        // CB A6 017D
        gbc.setState(0x4abf, 0x7f6f, 0x4000, 0x8d7f, 0xd86a, 0xc0b6, 0x1, 0x1);
        gbc.writeMem(0x4abf, { 0xcb, 0xa6 });
        gbc.writeMem(0xc0b6, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7f6f);
        EXPECT(gbc.pc(), 0x4ac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b6), 0xc5);
        // CB A6 017E
        gbc.setState(0xb864, 0xd096, 0x5410, 0xef16, 0x957a, 0x5070, 0x1, 0x0);
        gbc.writeMem(0x5070, { 0x64 });
        gbc.writeMem(0xb864, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd096);
        EXPECT(gbc.pc(), 0xb866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb864), 0xcb);
        EXPECT(gbc.readMem(0xb865), 0xa6);
        // CB A6 017F
        gbc.setState(0x68f1, 0x609d, 0x9f00, 0xa6c0, 0xa54d, 0xd5ab, 0x0, 0x0);
        gbc.writeMem(0x68f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xd5ab, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x609d);
        EXPECT(gbc.pc(), 0x68f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ab), 0x83);
        // CB A6 0180
        gbc.setState(0xabbf, 0x2261, 0xf360, 0x5d43, 0x38af, 0xa997, 0x1, 0x0);
        gbc.writeMem(0xa997, { 0x29 });
        gbc.writeMem(0xabbf, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2261);
        EXPECT(gbc.pc(), 0xabc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa997), 0x29);
        EXPECT(gbc.readMem(0xabbf), 0xcb);
        EXPECT(gbc.readMem(0xabc0), 0xa6);
        // CB A6 0182
        gbc.setState(0x5dcb, 0xcc7e, 0xed20, 0x2ea, 0xa64d, 0xfae9, 0x0, 0x1);
        gbc.writeMem(0x5dcb, { 0xcb, 0xa6 });
        gbc.writeMem(0xfae9, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x5dcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfae9), 0x43);
        // CB A6 0186
        gbc.setState(0xac2d, 0xbf5b, 0x5d90, 0xd48a, 0x736e, 0x93d7, 0x1, 0x0);
        gbc.writeMem(0x93d7, { 0x5a });
        gbc.writeMem(0xac2d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xbf5b);
        EXPECT(gbc.pc(), 0xac2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d7), 0x4a);
        EXPECT(gbc.readMem(0xac2d), 0xcb);
        EXPECT(gbc.readMem(0xac2e), 0xa6);
        // CB A6 0187
        gbc.setState(0xa4f9, 0xf6dc, 0xb050, 0x30e7, 0xae87, 0x2099, 0x0, 0x0);
        gbc.writeMem(0x2099, { 0xce });
        gbc.writeMem(0xa4f9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf6dc);
        EXPECT(gbc.pc(), 0xa4fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f9), 0xcb);
        EXPECT(gbc.readMem(0xa4fa), 0xa6);
        // CB A6 0188
        gbc.setState(0x3e66, 0x4c0f, 0x1240, 0xb827, 0xa3d6, 0xc48c, 0x1, 0x0);
        gbc.writeMem(0x3e66, { 0xcb, 0xa6 });
        gbc.writeMem(0xc48c, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4c0f);
        EXPECT(gbc.pc(), 0x3e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc48c), 0x22);
        // CB A6 018A
        gbc.setState(0x58b5, 0xfc2e, 0x2420, 0xfca2, 0x2c53, 0xb214, 0x0, 0x1);
        gbc.writeMem(0x58b5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb214, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfc2e);
        EXPECT(gbc.pc(), 0x58b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb214), 0x7);
        // CB A6 018C
        gbc.setState(0xa03c, 0xe23c, 0x6f30, 0xb870, 0xfa7a, 0xdc4a, 0x1, 0x1);
        gbc.writeMem(0xa03c, { 0xcb, 0xa6 });
        gbc.writeMem(0xdc4a, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe23c);
        EXPECT(gbc.pc(), 0xa03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03c), 0xcb);
        EXPECT(gbc.readMem(0xa03d), 0xa6);
        EXPECT(gbc.readMem(0xdc4a), 0x25);
        // CB A6 018D
        gbc.setState(0x59e, 0x23f6, 0x2360, 0xa780, 0x9ab4, 0xdc03, 0x0, 0x1);
        gbc.writeMem(0x59e, { 0xcb, 0xa6 });
        gbc.writeMem(0xdc03, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x23f6);
        EXPECT(gbc.pc(), 0x5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc03), 0x84);
        // CB A6 018F
        gbc.setState(0x44e5, 0xa38a, 0x4b0, 0x16c2, 0xe705, 0xb5e0, 0x1, 0x1);
        gbc.writeMem(0x44e5, { 0xcb, 0xa6 });
        gbc.writeMem(0xb5e0, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa38a);
        EXPECT(gbc.pc(), 0x44e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5e0), 0x6b);
        // CB A6 0190
        gbc.setState(0xa9fa, 0x940e, 0x5480, 0xa87a, 0xb18b, 0x1731, 0x1, 0x1);
        gbc.writeMem(0x1731, { 0xcf });
        gbc.writeMem(0xa9fa, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x940e);
        EXPECT(gbc.pc(), 0xa9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fa), 0xcb);
        EXPECT(gbc.readMem(0xa9fb), 0xa6);
        // CB A6 0191
        gbc.setState(0x83c7, 0x1a6c, 0xd010, 0x471a, 0xe35, 0xa03, 0x0, 0x0);
        gbc.writeMem(0xa03, { 0x6c });
        gbc.writeMem(0x83c7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1a6c);
        EXPECT(gbc.pc(), 0x83c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c7), 0xcb);
        EXPECT(gbc.readMem(0x83c8), 0xa6);
        // CB A6 0192
        gbc.setState(0x491c, 0xa659, 0xd4e0, 0x79e0, 0xaf0c, 0x1129, 0x0, 0x1);
        gbc.writeMem(0x1129, { 0xc6 });
        gbc.writeMem(0x491c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa659);
        EXPECT(gbc.pc(), 0x491e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0193
        gbc.setState(0xdd90, 0x932b, 0x7390, 0x97a5, 0xff09, 0xba61, 0x1, 0x1);
        gbc.writeMem(0xba61, { 0xb2 });
        gbc.writeMem(0xdd90, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x932b);
        EXPECT(gbc.pc(), 0xdd92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba61), 0xa2);
        EXPECT(gbc.readMem(0xdd90), 0xcb);
        EXPECT(gbc.readMem(0xdd91), 0xa6);
        // CB A6 0194
        gbc.setState(0xd2df, 0x69a0, 0x85b0, 0x33c4, 0x2237, 0x9b62, 0x0, 0x1);
        gbc.writeMem(0x9b62, { 0x95 });
        gbc.writeMem(0xd2df, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x69a0);
        EXPECT(gbc.pc(), 0xd2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b62), 0x85);
        EXPECT(gbc.readMem(0xd2df), 0xcb);
        EXPECT(gbc.readMem(0xd2e0), 0xa6);
        // CB A6 0195
        gbc.setState(0x18f2, 0x9418, 0xc550, 0xc50d, 0x58a7, 0xc2e1, 0x1, 0x1);
        gbc.writeMem(0x18f2, { 0xcb, 0xa6 });
        gbc.writeMem(0xc2e1, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9418);
        EXPECT(gbc.pc(), 0x18f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e1), 0x8);
        // CB A6 0196
        gbc.setState(0xd6f3, 0x54bb, 0x36b0, 0xc619, 0x1843, 0xf042, 0x1, 0x0);
        gbc.writeMem(0xd6f3, { 0xcb, 0xa6 });
        gbc.writeMem(0xf042, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x54bb);
        EXPECT(gbc.pc(), 0xd6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f3), 0xcb);
        EXPECT(gbc.readMem(0xd6f4), 0xa6);
        EXPECT(gbc.readMem(0xf042), 0xa1);
        // CB A6 0198
        gbc.setState(0xdee7, 0x834c, 0xfa70, 0x8141, 0xe6a7, 0x2e28, 0x1, 0x0);
        gbc.writeMem(0x2e28, { 0x66 });
        gbc.writeMem(0xdee7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x834c);
        EXPECT(gbc.pc(), 0xdee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdee7), 0xcb);
        EXPECT(gbc.readMem(0xdee8), 0xa6);
        // CB A6 0199
        gbc.setState(0x304e, 0x2ac4, 0x9a10, 0x4e80, 0xcc34, 0xab36, 0x0, 0x0);
        gbc.writeMem(0x304e, { 0xcb, 0xa6 });
        gbc.writeMem(0xab36, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2ac4);
        EXPECT(gbc.pc(), 0x3050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab36), 0xa4);
        // CB A6 019B
        gbc.setState(0xab3f, 0x1755, 0xe830, 0xe343, 0x285, 0xf187, 0x1, 0x0);
        gbc.writeMem(0xab3f, { 0xcb, 0xa6 });
        gbc.writeMem(0xf187, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1755);
        EXPECT(gbc.pc(), 0xab41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab3f), 0xcb);
        EXPECT(gbc.readMem(0xab40), 0xa6);
        EXPECT(gbc.readMem(0xf187), 0x29);
        // CB A6 019C
        gbc.setState(0xecfb, 0xdf12, 0x3430, 0x4eac, 0xa6b7, 0x1948, 0x1, 0x1);
        gbc.writeMem(0x1948, { 0x89 });
        gbc.writeMem(0xecfb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdf12);
        EXPECT(gbc.pc(), 0xecfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecfb), 0xcb);
        EXPECT(gbc.readMem(0xecfc), 0xa6);
        // CB A6 019D
        gbc.setState(0xb47d, 0x7490, 0xb4e0, 0x431b, 0x4b8c, 0x8257, 0x0, 0x0);
        gbc.writeMem(0x8257, { 0xda });
        gbc.writeMem(0xb47d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7490);
        EXPECT(gbc.pc(), 0xb47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8257), 0xca);
        EXPECT(gbc.readMem(0xb47d), 0xcb);
        EXPECT(gbc.readMem(0xb47e), 0xa6);
        // CB A6 019E
        gbc.setState(0x1901, 0x4a25, 0x6a90, 0xe02b, 0x3e85, 0x942c, 0x0, 0x0);
        gbc.writeMem(0x1901, { 0xcb, 0xa6 });
        gbc.writeMem(0x942c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4a25);
        EXPECT(gbc.pc(), 0x1903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x942c), 0xa1);
        // CB A6 019F
        gbc.setState(0x64fb, 0xbb50, 0x3bc0, 0x8f0c, 0x4401, 0x63dd, 0x0, 0x1);
        gbc.writeMem(0x63dd, { 0xc8 });
        gbc.writeMem(0x64fb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbb50);
        EXPECT(gbc.pc(), 0x64fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 01A0
        gbc.setState(0x4ceb, 0xd0de, 0x3ef0, 0xd6a, 0x80cc, 0xa109, 0x1, 0x0);
        gbc.writeMem(0x4ceb, { 0xcb, 0xa6 });
        gbc.writeMem(0xa109, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd0de);
        EXPECT(gbc.pc(), 0x4ced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa109), 0xe3);
        // CB A6 01A1
        gbc.setState(0x26c3, 0x8f99, 0x7b0, 0x8d68, 0xbf1a, 0x59f0, 0x0, 0x1);
        gbc.writeMem(0x26c3, { 0xcb, 0xa6 });
        gbc.writeMem(0x59f0, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8f99);
        EXPECT(gbc.pc(), 0x26c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01A2
        gbc.setState(0xb328, 0x892b, 0xc580, 0x5e29, 0xa550, 0xf6d4, 0x0, 0x0);
        gbc.writeMem(0xb328, { 0xcb, 0xa6 });
        gbc.writeMem(0xf6d4, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x892b);
        EXPECT(gbc.pc(), 0xb32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb328), 0xcb);
        EXPECT(gbc.readMem(0xb329), 0xa6);
        EXPECT(gbc.readMem(0xf6d4), 0x2c);
        // CB A6 01A3
        gbc.setState(0xabb, 0xfc21, 0xa450, 0x49a2, 0xbc44, 0xd423, 0x0, 0x1);
        gbc.writeMem(0xabb, { 0xcb, 0xa6 });
        gbc.writeMem(0xd423, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfc21);
        EXPECT(gbc.pc(), 0xabd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd423), 0xf);
        // CB A6 01A4
        gbc.setState(0x1c93, 0xcfa3, 0xb5d0, 0xbd0f, 0x44cb, 0xc002, 0x1, 0x1);
        gbc.writeMem(0x1c93, { 0xcb, 0xa6 });
        gbc.writeMem(0xc002, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcfa3);
        EXPECT(gbc.pc(), 0x1c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc002), 0x40);
        // CB A6 01A9
        gbc.setState(0x8a81, 0x4864, 0x8670, 0xe89, 0xd88e, 0x4a6b, 0x1, 0x0);
        gbc.writeMem(0x4a6b, { 0x29 });
        gbc.writeMem(0x8a81, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4864);
        EXPECT(gbc.pc(), 0x8a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a81), 0xcb);
        EXPECT(gbc.readMem(0x8a82), 0xa6);
        // CB A6 01AA
        gbc.setState(0x6d0f, 0x26e6, 0xf70, 0x9b68, 0x9206, 0xc358, 0x1, 0x0);
        gbc.writeMem(0x6d0f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc358, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x26e6);
        EXPECT(gbc.pc(), 0x6d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc358), 0xa0);
        // CB A6 01AB
        gbc.setState(0xcc7, 0x6406, 0x99c0, 0xb189, 0x6a82, 0xf476, 0x0, 0x0);
        gbc.writeMem(0xcc7, { 0xcb, 0xa6 });
        gbc.writeMem(0xf476, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6406);
        EXPECT(gbc.pc(), 0xcc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf476), 0x6c);
        // CB A6 01AC
        gbc.setState(0x4a31, 0x8eb3, 0x8d80, 0x8492, 0x8d12, 0x1287, 0x0, 0x1);
        gbc.writeMem(0x1287, { 0x6a });
        gbc.writeMem(0x4a31, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8eb3);
        EXPECT(gbc.pc(), 0x4a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 01AD
        gbc.setState(0xdcf7, 0x67fe, 0x12a0, 0x1125, 0xf60f, 0x889f, 0x0, 0x1);
        gbc.writeMem(0x889f, { 0x7a });
        gbc.writeMem(0xdcf7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x67fe);
        EXPECT(gbc.pc(), 0xdcf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889f), 0x6a);
        EXPECT(gbc.readMem(0xdcf7), 0xcb);
        EXPECT(gbc.readMem(0xdcf8), 0xa6);
        // CB A6 01AE
        gbc.setState(0x7861, 0x7e50, 0x2700, 0xacc2, 0x6cc6, 0x88e1, 0x0, 0x0);
        gbc.writeMem(0x7861, { 0xcb, 0xa6 });
        gbc.writeMem(0x88e1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7e50);
        EXPECT(gbc.pc(), 0x7863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e1), 0x46);
        // CB A6 01AF
        gbc.setState(0xb2a2, 0x3f6d, 0x2ad0, 0x6ff0, 0x2fea, 0x174e, 0x1, 0x1);
        gbc.writeMem(0x174e, { 0x4 });
        gbc.writeMem(0xb2a2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3f6d);
        EXPECT(gbc.pc(), 0xb2a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a2), 0xcb);
        EXPECT(gbc.readMem(0xb2a3), 0xa6);
        // CB A6 01B0
        gbc.setState(0x2e85, 0x143b, 0xd400, 0x9418, 0x919, 0x125b, 0x0, 0x0);
        gbc.writeMem(0x125b, { 0xae });
        gbc.writeMem(0x2e85, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x143b);
        EXPECT(gbc.pc(), 0x2e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 01B1
        gbc.setState(0x97a5, 0xb512, 0x6530, 0x6f3d, 0x8e27, 0xff0c, 0x0, 0x0);
        gbc.writeMem(0x97a5, { 0xcb, 0xa6 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb512);
        EXPECT(gbc.pc(), 0x97a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a5), 0xcb);
        EXPECT(gbc.readMem(0x97a6), 0xa6);
        EXPECT(gbc.readMem(0xff0c), 0x84);
        // CB A6 01B3
        gbc.setState(0x97c0, 0xd0cc, 0x5140, 0x212e, 0xd453, 0x7b57, 0x0, 0x0);
        gbc.writeMem(0x7b57, { 0xc0 });
        gbc.writeMem(0x97c0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd0cc);
        EXPECT(gbc.pc(), 0x97c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c0), 0xcb);
        EXPECT(gbc.readMem(0x97c1), 0xa6);
        // CB A6 01B4
        gbc.setState(0x6903, 0x45a4, 0xad50, 0xa391, 0xc22c, 0xe1c7, 0x0, 0x1);
        gbc.writeMem(0x6903, { 0xcb, 0xa6 });
        gbc.writeMem(0xe1c7, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x45a4);
        EXPECT(gbc.pc(), 0x6905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c7), 0x6d);
        // CB A6 01B5
        gbc.setState(0xcb8d, 0xfb02, 0x6ec0, 0xc2aa, 0x73b7, 0x8ed8, 0x0, 0x1);
        gbc.writeMem(0x8ed8, { 0xf });
        gbc.writeMem(0xcb8d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfb02);
        EXPECT(gbc.pc(), 0xcb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed8), 0xf);
        EXPECT(gbc.readMem(0xcb8d), 0xcb);
        EXPECT(gbc.readMem(0xcb8e), 0xa6);
        // CB A6 01B7
        gbc.setState(0x3f4c, 0x64a6, 0x5b10, 0xa710, 0xad30, 0x8e50, 0x1, 0x0);
        gbc.writeMem(0x3f4c, { 0xcb, 0xa6 });
        gbc.writeMem(0x8e50, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x64a6);
        EXPECT(gbc.pc(), 0x3f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e50), 0x29);
        // CB A6 01B9
        gbc.setState(0xa8c0, 0x20f4, 0xf490, 0x74b9, 0x77b0, 0xef73, 0x0, 0x1);
        gbc.writeMem(0xa8c0, { 0xcb, 0xa6 });
        gbc.writeMem(0xef73, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x20f4);
        EXPECT(gbc.pc(), 0xa8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c0), 0xcb);
        EXPECT(gbc.readMem(0xa8c1), 0xa6);
        EXPECT(gbc.readMem(0xef73), 0xee);
        // CB A6 01BA
        gbc.setState(0x43a1, 0x7555, 0x7e50, 0x2a95, 0xb2c5, 0xb1cd, 0x0, 0x1);
        gbc.writeMem(0x43a1, { 0xcb, 0xa6 });
        gbc.writeMem(0xb1cd, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7555);
        EXPECT(gbc.pc(), 0x43a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1cd), 0xa8);
        // CB A6 01BC
        gbc.setState(0x307e, 0xf3d4, 0x1ab0, 0x40dd, 0x32e3, 0x8315, 0x1, 0x1);
        gbc.writeMem(0x307e, { 0xcb, 0xa6 });
        gbc.writeMem(0x8315, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf3d4);
        EXPECT(gbc.pc(), 0x3080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8315), 0x8b);
        // CB A6 01BD
        gbc.setState(0xde58, 0x8ab7, 0xb90, 0x6e15, 0x506c, 0xc74d, 0x1, 0x1);
        gbc.writeMem(0xc74d, { 0xc2 });
        gbc.writeMem(0xde58, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8ab7);
        EXPECT(gbc.pc(), 0xde5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc74d), 0xc2);
        EXPECT(gbc.readMem(0xde58), 0xcb);
        EXPECT(gbc.readMem(0xde59), 0xa6);
        // CB A6 01BE
        gbc.setState(0x529, 0x87ef, 0x2f0, 0xaeff, 0x39a5, 0x1ac4, 0x1, 0x0);
        gbc.writeMem(0x529, { 0xcb, 0xa6 });
        gbc.writeMem(0x1ac4, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x87ef);
        EXPECT(gbc.pc(), 0x52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01C0
        gbc.setState(0xe7b1, 0x12b0, 0xc10, 0x98a4, 0x98e5, 0xc202, 0x0, 0x1);
        gbc.writeMem(0xc202, { 0xb8 });
        gbc.writeMem(0xe7b1, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x12b0);
        EXPECT(gbc.pc(), 0xe7b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc202), 0xa8);
        EXPECT(gbc.readMem(0xe7b1), 0xcb);
        EXPECT(gbc.readMem(0xe7b2), 0xa6);
        // CB A6 01C1
        gbc.setState(0xd6cb, 0xea55, 0xc560, 0xb211, 0x8500, 0x43d1, 0x1, 0x0);
        gbc.writeMem(0x43d1, { 0x0 });
        gbc.writeMem(0xd6cb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xea55);
        EXPECT(gbc.pc(), 0xd6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6cb), 0xcb);
        EXPECT(gbc.readMem(0xd6cc), 0xa6);
        // CB A6 01C2
        gbc.setState(0xcc5f, 0x252e, 0xd560, 0xaff1, 0x559d, 0x6992, 0x1, 0x1);
        gbc.writeMem(0x6992, { 0xed });
        gbc.writeMem(0xcc5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x252e);
        EXPECT(gbc.pc(), 0xcc61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5f), 0xcb);
        EXPECT(gbc.readMem(0xcc60), 0xa6);
        // CB A6 01C3
        gbc.setState(0xd016, 0xc2c3, 0x3b90, 0xe974, 0xcbe, 0xc332, 0x0, 0x0);
        gbc.writeMem(0xc332, { 0x61 });
        gbc.writeMem(0xd016, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc2c3);
        EXPECT(gbc.pc(), 0xd018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc332), 0x61);
        EXPECT(gbc.readMem(0xd016), 0xcb);
        EXPECT(gbc.readMem(0xd017), 0xa6);
        // CB A6 01C4
        gbc.setState(0x2701, 0xf730, 0x160, 0x1040, 0xbad9, 0xa00c, 0x1, 0x0);
        gbc.writeMem(0x2701, { 0xcb, 0xa6 });
        gbc.writeMem(0xa00c, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf730);
        EXPECT(gbc.pc(), 0x2703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00c), 0x80);
        // CB A6 01C5
        gbc.setState(0x7d53, 0xee00, 0x9380, 0x3000, 0x4bfe, 0xc324, 0x0, 0x1);
        gbc.writeMem(0x7d53, { 0xcb, 0xa6 });
        gbc.writeMem(0xc324, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xee00);
        EXPECT(gbc.pc(), 0x7d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc324), 0x6a);
        // CB A6 01C7
        gbc.setState(0x71ed, 0xdf4e, 0xcd50, 0xf736, 0x3bf, 0x8eff, 0x0, 0x1);
        gbc.writeMem(0x71ed, { 0xcb, 0xa6 });
        gbc.writeMem(0x8eff, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdf4e);
        EXPECT(gbc.pc(), 0x71ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eff), 0xce);
        // CB A6 01C8
        gbc.setState(0x80e3, 0xa80d, 0x2010, 0x800d, 0x477f, 0xf30a, 0x1, 0x1);
        gbc.writeMem(0x80e3, { 0xcb, 0xa6 });
        gbc.writeMem(0xf30a, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa80d);
        EXPECT(gbc.pc(), 0x80e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e3), 0xcb);
        EXPECT(gbc.readMem(0x80e4), 0xa6);
        EXPECT(gbc.readMem(0xf30a), 0x8);
        // CB A6 01C9
        gbc.setState(0xbc96, 0x974, 0x4920, 0xaf31, 0x9be1, 0xa5ed, 0x1, 0x0);
        gbc.writeMem(0xa5ed, { 0xce });
        gbc.writeMem(0xbc96, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x974);
        EXPECT(gbc.pc(), 0xbc98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ed), 0xce);
        EXPECT(gbc.readMem(0xbc96), 0xcb);
        EXPECT(gbc.readMem(0xbc97), 0xa6);
        // CB A6 01CA
        gbc.setState(0xd5d5, 0xacc7, 0x94e0, 0x38db, 0x7b0f, 0x9344, 0x0, 0x0);
        gbc.writeMem(0x9344, { 0x9 });
        gbc.writeMem(0xd5d5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xacc7);
        EXPECT(gbc.pc(), 0xd5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9344), 0x9);
        EXPECT(gbc.readMem(0xd5d5), 0xcb);
        EXPECT(gbc.readMem(0xd5d6), 0xa6);
        // CB A6 01CB
        gbc.setState(0x4bb8, 0x4f3e, 0x220, 0xb609, 0x7d77, 0x39e3, 0x0, 0x0);
        gbc.writeMem(0x39e3, { 0x8 });
        gbc.writeMem(0x4bb8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4f3e);
        EXPECT(gbc.pc(), 0x4bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 01CE
        gbc.setState(0xc085, 0x30bd, 0x8d40, 0xf4bb, 0x2f74, 0x6e8f, 0x0, 0x0);
        gbc.writeMem(0x6e8f, { 0x6a });
        gbc.writeMem(0xc085, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x30bd);
        EXPECT(gbc.pc(), 0xc087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc085), 0xcb);
        EXPECT(gbc.readMem(0xc086), 0xa6);
        // CB A6 01D2
        gbc.setState(0xabd6, 0xeb18, 0x2c00, 0x137d, 0x230d, 0xd436, 0x1, 0x1);
        gbc.writeMem(0xabd6, { 0xcb, 0xa6 });
        gbc.writeMem(0xd436, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xeb18);
        EXPECT(gbc.pc(), 0xabd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd6), 0xcb);
        EXPECT(gbc.readMem(0xabd7), 0xa6);
        EXPECT(gbc.readMem(0xd436), 0xec);
        // CB A6 01D3
        gbc.setState(0x4862, 0xb660, 0x47e0, 0x7b88, 0x3a08, 0xbcb6, 0x0, 0x0);
        gbc.writeMem(0x4862, { 0xcb, 0xa6 });
        gbc.writeMem(0xbcb6, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb660);
        EXPECT(gbc.pc(), 0x4864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb6), 0xa4);
        // CB A6 01D4
        gbc.setState(0xe7b2, 0x11f5, 0x6c90, 0x6578, 0x25d, 0xdfb, 0x1, 0x0);
        gbc.writeMem(0xdfb, { 0x88 });
        gbc.writeMem(0xe7b2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x11f5);
        EXPECT(gbc.pc(), 0xe7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b2), 0xcb);
        EXPECT(gbc.readMem(0xe7b3), 0xa6);
        // CB A6 01D5
        gbc.setState(0xb679, 0x2e97, 0xb4f0, 0xf6b8, 0x66db, 0x1da9, 0x1, 0x1);
        gbc.writeMem(0x1da9, { 0xaa });
        gbc.writeMem(0xb679, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2e97);
        EXPECT(gbc.pc(), 0xb67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb679), 0xcb);
        EXPECT(gbc.readMem(0xb67a), 0xa6);
        // CB A6 01D6
        gbc.setState(0x6846, 0xb46f, 0xf520, 0x49a7, 0x9d53, 0xb87f, 0x1, 0x0);
        gbc.writeMem(0x6846, { 0xcb, 0xa6 });
        gbc.writeMem(0xb87f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb46f);
        EXPECT(gbc.pc(), 0x6848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87f), 0x81);
        // CB A6 01D7
        gbc.setState(0xccd7, 0xca08, 0x56c0, 0x9c63, 0x6dc6, 0xac8f, 0x1, 0x0);
        gbc.writeMem(0xac8f, { 0xc1 });
        gbc.writeMem(0xccd7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xca08);
        EXPECT(gbc.pc(), 0xccd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac8f), 0xc1);
        EXPECT(gbc.readMem(0xccd7), 0xcb);
        EXPECT(gbc.readMem(0xccd8), 0xa6);
        // CB A6 01D9
        gbc.setState(0x2c87, 0x6400, 0xdd80, 0xa163, 0xd057, 0xf379, 0x1, 0x1);
        gbc.writeMem(0x2c87, { 0xcb, 0xa6 });
        gbc.writeMem(0xf379, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6400);
        EXPECT(gbc.pc(), 0x2c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf379), 0x6b);
        // CB A6 01DA
        gbc.setState(0x9745, 0x87a6, 0x92c0, 0xc2df, 0x4ca0, 0xce7f, 0x1, 0x1);
        gbc.writeMem(0x9745, { 0xcb, 0xa6 });
        gbc.writeMem(0xce7f, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x87a6);
        EXPECT(gbc.pc(), 0x9747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9745), 0xcb);
        EXPECT(gbc.readMem(0x9746), 0xa6);
        EXPECT(gbc.readMem(0xce7f), 0x27);
        // CB A6 01DB
        gbc.setState(0xef78, 0xdd90, 0xc990, 0x334d, 0x6b1e, 0x1f47, 0x0, 0x0);
        gbc.writeMem(0x1f47, { 0x40 });
        gbc.writeMem(0xef78, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdd90);
        EXPECT(gbc.pc(), 0xef7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef78), 0xcb);
        EXPECT(gbc.readMem(0xef79), 0xa6);
        // CB A6 01DC
        gbc.setState(0xe519, 0xcd0c, 0x4490, 0xd1db, 0xcf9e, 0x2f42, 0x0, 0x0);
        gbc.writeMem(0x2f42, { 0x49 });
        gbc.writeMem(0xe519, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcd0c);
        EXPECT(gbc.pc(), 0xe51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe519), 0xcb);
        EXPECT(gbc.readMem(0xe51a), 0xa6);
        // CB A6 01DE
        gbc.setState(0x663a, 0x1f72, 0x88e0, 0x7a3d, 0x5bc, 0x1898, 0x1, 0x0);
        gbc.writeMem(0x1898, { 0x2 });
        gbc.writeMem(0x663a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1f72);
        EXPECT(gbc.pc(), 0x663c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 01E1
        gbc.setState(0x3b37, 0xcc2e, 0x44d0, 0xbad9, 0x5e92, 0x29fe, 0x0, 0x0);
        gbc.writeMem(0x29fe, { 0xc3 });
        gbc.writeMem(0x3b37, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xcc2e);
        EXPECT(gbc.pc(), 0x3b39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01E2
        gbc.setState(0xaf85, 0xc264, 0xd820, 0x452c, 0xb4f8, 0xdee6, 0x0, 0x1);
        gbc.writeMem(0xaf85, { 0xcb, 0xa6 });
        gbc.writeMem(0xdee6, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc264);
        EXPECT(gbc.pc(), 0xaf87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf85), 0xcb);
        EXPECT(gbc.readMem(0xaf86), 0xa6);
        EXPECT(gbc.readMem(0xdee6), 0x5);
        // CB A6 01E3
        gbc.setState(0x2534, 0x1cea, 0xdc50, 0x5249, 0x116e, 0x8363, 0x0, 0x0);
        gbc.writeMem(0x2534, { 0xcb, 0xa6 });
        gbc.writeMem(0x8363, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1cea);
        EXPECT(gbc.pc(), 0x2536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8363), 0x21);
        // CB A6 01E5
        gbc.setState(0xc5ca, 0x6e48, 0x1630, 0x5038, 0xa8a9, 0xd98c, 0x1, 0x1);
        gbc.writeMem(0xc5ca, { 0xcb, 0xa6 });
        gbc.writeMem(0xd98c, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6e48);
        EXPECT(gbc.pc(), 0xc5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ca), 0xcb);
        EXPECT(gbc.readMem(0xc5cb), 0xa6);
        EXPECT(gbc.readMem(0xd98c), 0x9);
        // CB A6 01E6
        gbc.setState(0x1777, 0xfa07, 0x6aa0, 0x1508, 0x51ac, 0xde0c, 0x1, 0x0);
        gbc.writeMem(0x1777, { 0xcb, 0xa6 });
        gbc.writeMem(0xde0c, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfa07);
        EXPECT(gbc.pc(), 0x1779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0c), 0xf);
        // CB A6 01E8
        gbc.setState(0x34ca, 0x2696, 0x25a0, 0xce71, 0xa65d, 0x8193, 0x1, 0x0);
        gbc.writeMem(0x34ca, { 0xcb, 0xa6 });
        gbc.writeMem(0x8193, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2696);
        EXPECT(gbc.pc(), 0x34cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8193), 0x6e);
        // CB A6 01E9
        gbc.setState(0x1c51, 0x7ebf, 0x9c60, 0x4c4e, 0x526a, 0xa78d, 0x1, 0x0);
        gbc.writeMem(0x1c51, { 0xcb, 0xa6 });
        gbc.writeMem(0xa78d, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7ebf);
        EXPECT(gbc.pc(), 0x1c53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa78d), 0x60);
        // CB A6 01EA
        gbc.setState(0x3ec5, 0x2f15, 0xd550, 0x84c5, 0xf191, 0xc7c0, 0x1, 0x0);
        gbc.writeMem(0x3ec5, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7c0, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2f15);
        EXPECT(gbc.pc(), 0x3ec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c0), 0x8e);
        // CB A6 01EB
        gbc.setState(0x81d3, 0xb140, 0xd170, 0xd834, 0xd0b4, 0x2571, 0x0, 0x0);
        gbc.writeMem(0x2571, { 0x2b });
        gbc.writeMem(0x81d3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb140);
        EXPECT(gbc.pc(), 0x81d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d3), 0xcb);
        EXPECT(gbc.readMem(0x81d4), 0xa6);
        // CB A6 01EC
        gbc.setState(0xd149, 0x45aa, 0xb620, 0xf95c, 0x32c, 0xb442, 0x1, 0x1);
        gbc.writeMem(0xb442, { 0x76 });
        gbc.writeMem(0xd149, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x45aa);
        EXPECT(gbc.pc(), 0xd14b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb442), 0x66);
        EXPECT(gbc.readMem(0xd149), 0xcb);
        EXPECT(gbc.readMem(0xd14a), 0xa6);
        // CB A6 01ED
        gbc.setState(0xa106, 0x6302, 0xfa70, 0xb2c1, 0x6e1, 0xcca, 0x0, 0x1);
        gbc.writeMem(0xcca, { 0x8e });
        gbc.writeMem(0xa106, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6302);
        EXPECT(gbc.pc(), 0xa108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa106), 0xcb);
        EXPECT(gbc.readMem(0xa107), 0xa6);
        // CB A6 01EE
        gbc.setState(0x75b5, 0x6c37, 0x6230, 0xfe2, 0x4e57, 0x6d9d, 0x1, 0x1);
        gbc.writeMem(0x6d9d, { 0x4c });
        gbc.writeMem(0x75b5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6c37);
        EXPECT(gbc.pc(), 0x75b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01EF
        gbc.setState(0x3f53, 0xa832, 0x17f0, 0xbdef, 0xfc19, 0xa403, 0x0, 0x1);
        gbc.writeMem(0x3f53, { 0xcb, 0xa6 });
        gbc.writeMem(0xa403, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa832);
        EXPECT(gbc.pc(), 0x3f55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa403), 0x60);
        // CB A6 01F0
        gbc.setState(0xee71, 0x9495, 0x82f0, 0x1d50, 0x235, 0x58fd, 0x1, 0x0);
        gbc.writeMem(0x58fd, { 0x6f });
        gbc.writeMem(0xee71, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9495);
        EXPECT(gbc.pc(), 0xee73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee71), 0xcb);
        EXPECT(gbc.readMem(0xee72), 0xa6);
        // CB A6 01F1
        gbc.setState(0x1c9, 0x14fc, 0x950, 0xb561, 0xfdd0, 0xddc1, 0x0, 0x0);
        gbc.writeMem(0x1c9, { 0xcb, 0xa6 });
        gbc.writeMem(0xddc1, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x14fc);
        EXPECT(gbc.pc(), 0x1cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc1), 0xa8);
        // CB A6 01F2
        gbc.setState(0x7816, 0xaa7d, 0xd6e0, 0xdc8e, 0x3e90, 0xd3b8, 0x1, 0x1);
        gbc.writeMem(0x7816, { 0xcb, 0xa6 });
        gbc.writeMem(0xd3b8, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xaa7d);
        EXPECT(gbc.pc(), 0x7818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b8), 0x67);
        // CB A6 01F3
        gbc.setState(0x5c6b, 0x7279, 0xac30, 0x3d33, 0x3456, 0x2ec4, 0x1, 0x1);
        gbc.writeMem(0x2ec4, { 0xaf });
        gbc.writeMem(0x5c6b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7279);
        EXPECT(gbc.pc(), 0x5c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01F4
        gbc.setState(0x1a80, 0xfe28, 0xc780, 0x417d, 0x941e, 0xe58a, 0x0, 0x1);
        gbc.writeMem(0x1a80, { 0xcb, 0xa6 });
        gbc.writeMem(0xe58a, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfe28);
        EXPECT(gbc.pc(), 0x1a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe58a), 0x63);
        // CB A6 01F5
        gbc.setState(0xd8cb, 0x50fb, 0xf020, 0xf634, 0x41aa, 0xecea, 0x0, 0x0);
        gbc.writeMem(0xd8cb, { 0xcb, 0xa6 });
        gbc.writeMem(0xecea, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x50fb);
        EXPECT(gbc.pc(), 0xd8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8cb), 0xcb);
        EXPECT(gbc.readMem(0xd8cc), 0xa6);
        EXPECT(gbc.readMem(0xecea), 0xc3);
        // CB A6 01F6
        gbc.setState(0x64bb, 0x9c2b, 0x34c0, 0x905c, 0x2c34, 0xf821, 0x0, 0x0);
        gbc.writeMem(0x64bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xf821, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9c2b);
        EXPECT(gbc.pc(), 0x64bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf821), 0x83);
        // CB A6 01F7
        gbc.setState(0x3837, 0xf6f6, 0xc5d0, 0xf36a, 0x46b8, 0xee83, 0x0, 0x0);
        gbc.writeMem(0x3837, { 0xcb, 0xa6 });
        gbc.writeMem(0xee83, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf6f6);
        EXPECT(gbc.pc(), 0x3839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee83), 0xa0);
        // CB A6 01FA
        gbc.setState(0x545d, 0x2c6, 0x1f30, 0xdddb, 0xfa61, 0xf4c6, 0x1, 0x1);
        gbc.writeMem(0x545d, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4c6, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2c6);
        EXPECT(gbc.pc(), 0x545f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4c6), 0x7);
        // CB A6 01FC
        gbc.setState(0x3737, 0x6cc7, 0x8080, 0x6c1f, 0x7a86, 0xb98a, 0x0, 0x0);
        gbc.writeMem(0x3737, { 0xcb, 0xa6 });
        gbc.writeMem(0xb98a, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6cc7);
        EXPECT(gbc.pc(), 0x3739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98a), 0xc6);
        // CB A6 01FD
        gbc.setState(0x4cc0, 0xee9a, 0x4110, 0xfacd, 0xa0f7, 0x63ac, 0x1, 0x0);
        gbc.writeMem(0x4cc0, { 0xcb, 0xa6 });
        gbc.writeMem(0x63ac, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xee9a);
        EXPECT(gbc.pc(), 0x4cc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 01FE
        gbc.setState(0xba7c, 0xb1ec, 0xf8d0, 0xacf2, 0x3201, 0x8301, 0x1, 0x0);
        gbc.writeMem(0x8301, { 0x41 });
        gbc.writeMem(0xba7c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb1ec);
        EXPECT(gbc.pc(), 0xba7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8301), 0x41);
        EXPECT(gbc.readMem(0xba7c), 0xcb);
        EXPECT(gbc.readMem(0xba7d), 0xa6);
        // CB A6 01FF
        gbc.setState(0xe3c2, 0xb3c, 0xca60, 0x59e9, 0xf1f2, 0x820b, 0x0, 0x0);
        gbc.writeMem(0x820b, { 0x3c });
        gbc.writeMem(0xe3c2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb3c);
        EXPECT(gbc.pc(), 0xe3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x820b), 0x2c);
        EXPECT(gbc.readMem(0xe3c2), 0xcb);
        EXPECT(gbc.readMem(0xe3c3), 0xa6);
        // CB A6 0200
        gbc.setState(0x5ff, 0xb3bf, 0x8010, 0x7e, 0xa6c7, 0xcd00, 0x0, 0x0);
        gbc.writeMem(0x5ff, { 0xcb, 0xa6 });
        gbc.writeMem(0xcd00, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb3bf);
        EXPECT(gbc.pc(), 0x601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd00), 0xae);
        // CB A6 0202
        gbc.setState(0x6ea, 0x1847, 0xdce0, 0xb13f, 0x6bdb, 0xf9e4, 0x0, 0x0);
        gbc.writeMem(0x6ea, { 0xcb, 0xa6 });
        gbc.writeMem(0xf9e4, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1847);
        EXPECT(gbc.pc(), 0x6ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9e4), 0x21);
        // CB A6 0203
        gbc.setState(0xeb4f, 0xccab, 0x4ef0, 0xab34, 0xc99d, 0x9e06, 0x1, 0x0);
        gbc.writeMem(0x9e06, { 0x0 });
        gbc.writeMem(0xeb4f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xccab);
        EXPECT(gbc.pc(), 0xeb51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e06), 0x0);
        EXPECT(gbc.readMem(0xeb4f), 0xcb);
        EXPECT(gbc.readMem(0xeb50), 0xa6);
        // CB A6 0204
        gbc.setState(0x8c62, 0x5cbd, 0xfdc0, 0x2457, 0x5864, 0x9018, 0x0, 0x0);
        gbc.writeMem(0x8c62, { 0xcb, 0xa6 });
        gbc.writeMem(0x9018, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5cbd);
        EXPECT(gbc.pc(), 0x8c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c62), 0xcb);
        EXPECT(gbc.readMem(0x8c63), 0xa6);
        EXPECT(gbc.readMem(0x9018), 0x88);
        // CB A6 0205
        gbc.setState(0xb3a7, 0xbdf8, 0xb050, 0x4013, 0x3f29, 0x7f0, 0x1, 0x0);
        gbc.writeMem(0x7f0, { 0xd });
        gbc.writeMem(0xb3a7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbdf8);
        EXPECT(gbc.pc(), 0xb3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a7), 0xcb);
        EXPECT(gbc.readMem(0xb3a8), 0xa6);
        // CB A6 0206
        gbc.setState(0x1301, 0x7bf0, 0x9600, 0x3bdb, 0xd710, 0x1b96, 0x0, 0x1);
        gbc.writeMem(0x1301, { 0xcb, 0xa6 });
        gbc.writeMem(0x1b96, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7bf0);
        EXPECT(gbc.pc(), 0x1303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0207
        gbc.setState(0x3741, 0x6430, 0xcdb0, 0xb192, 0xe69b, 0x8980, 0x0, 0x1);
        gbc.writeMem(0x3741, { 0xcb, 0xa6 });
        gbc.writeMem(0x8980, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6430);
        EXPECT(gbc.pc(), 0x3743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8980), 0x8a);
        // CB A6 0208
        gbc.setState(0x5060, 0x5caa, 0xb250, 0xc334, 0x3616, 0x81de, 0x0, 0x1);
        gbc.writeMem(0x5060, { 0xcb, 0xa6 });
        gbc.writeMem(0x81de, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5caa);
        EXPECT(gbc.pc(), 0x5062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81de), 0xb);
        // CB A6 0209
        gbc.setState(0x4761, 0x3943, 0x1750, 0xaadb, 0x8b7, 0xbeb2, 0x1, 0x1);
        gbc.writeMem(0x4761, { 0xcb, 0xa6 });
        gbc.writeMem(0xbeb2, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3943);
        EXPECT(gbc.pc(), 0x4763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb2), 0xe5);
        // CB A6 020C
        gbc.setState(0xefc9, 0x1bf9, 0x1e40, 0x7e72, 0x2a35, 0x4f95, 0x1, 0x0);
        gbc.writeMem(0x4f95, { 0xf });
        gbc.writeMem(0xefc9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1bf9);
        EXPECT(gbc.pc(), 0xefcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc9), 0xcb);
        EXPECT(gbc.readMem(0xefca), 0xa6);
        // CB A6 020D
        gbc.setState(0x4e6e, 0x3e6c, 0x10e0, 0xccfb, 0x6417, 0x2cb8, 0x0, 0x0);
        gbc.writeMem(0x2cb8, { 0x2e });
        gbc.writeMem(0x4e6e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3e6c);
        EXPECT(gbc.pc(), 0x4e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0212
        gbc.setState(0x454c, 0xb27b, 0x5930, 0x13a7, 0xf4f0, 0x7e63, 0x0, 0x0);
        gbc.writeMem(0x454c, { 0xcb, 0xa6 });
        gbc.writeMem(0x7e63, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb27b);
        EXPECT(gbc.pc(), 0x454e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0213
        gbc.setState(0x84cf, 0x6742, 0xecf0, 0xbccf, 0xea39, 0xb22a, 0x1, 0x0);
        gbc.writeMem(0x84cf, { 0xcb, 0xa6 });
        gbc.writeMem(0xb22a, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6742);
        EXPECT(gbc.pc(), 0x84d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cf), 0xcb);
        EXPECT(gbc.readMem(0x84d0), 0xa6);
        EXPECT(gbc.readMem(0xb22a), 0x40);
        // CB A6 0214
        gbc.setState(0xbaf1, 0xa2c5, 0xd330, 0x2dca, 0x7fb2, 0xf54d, 0x1, 0x0);
        gbc.writeMem(0xbaf1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf54d, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa2c5);
        EXPECT(gbc.pc(), 0xbaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf1), 0xcb);
        EXPECT(gbc.readMem(0xbaf2), 0xa6);
        EXPECT(gbc.readMem(0xf54d), 0xaf);
        // CB A6 0216
        gbc.setState(0x6ffa, 0x1384, 0xf7a0, 0x8a7e, 0x2c3a, 0xc066, 0x1, 0x0);
        gbc.writeMem(0x6ffa, { 0xcb, 0xa6 });
        gbc.writeMem(0xc066, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1384);
        EXPECT(gbc.pc(), 0x6ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc066), 0x4b);
        // CB A6 0217
        gbc.setState(0x8aee, 0xc56f, 0xebc0, 0x85fa, 0x8c9a, 0xf4f3, 0x0, 0x0);
        gbc.writeMem(0x8aee, { 0xcb, 0xa6 });
        gbc.writeMem(0xf4f3, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc56f);
        EXPECT(gbc.pc(), 0x8af0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aee), 0xcb);
        EXPECT(gbc.readMem(0x8aef), 0xa6);
        EXPECT(gbc.readMem(0xf4f3), 0x60);
        // CB A6 0218
        gbc.setState(0x6088, 0xb90f, 0x8040, 0x9c97, 0xc10a, 0x75aa, 0x1, 0x0);
        gbc.writeMem(0x6088, { 0xcb, 0xa6 });
        gbc.writeMem(0x75aa, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb90f);
        EXPECT(gbc.pc(), 0x608a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 021A
        gbc.setState(0x4620, 0xe4c5, 0xe040, 0x22a1, 0x5936, 0xfa60, 0x1, 0x1);
        gbc.writeMem(0x4620, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa60, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe4c5);
        EXPECT(gbc.pc(), 0x4622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa60), 0xaa);
        // CB A6 021B
        gbc.setState(0x98dc, 0x7160, 0xf4c0, 0xd3fa, 0x20c1, 0xd456, 0x0, 0x1);
        gbc.writeMem(0x98dc, { 0xcb, 0xa6 });
        gbc.writeMem(0xd456, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7160);
        EXPECT(gbc.pc(), 0x98de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98dc), 0xcb);
        EXPECT(gbc.readMem(0x98dd), 0xa6);
        EXPECT(gbc.readMem(0xd456), 0xca);
        // CB A6 021C
        gbc.setState(0xad8b, 0x94c9, 0x7fe0, 0xe60, 0xe3e8, 0xb407, 0x0, 0x1);
        gbc.writeMem(0xad8b, { 0xcb, 0xa6 });
        gbc.writeMem(0xb407, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x94c9);
        EXPECT(gbc.pc(), 0xad8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8b), 0xcb);
        EXPECT(gbc.readMem(0xad8c), 0xa6);
        EXPECT(gbc.readMem(0xb407), 0xc3);
        // CB A6 021E
        gbc.setState(0x87cc, 0xb2cb, 0x7f00, 0x616b, 0xb08d, 0x9d1a, 0x1, 0x0);
        gbc.writeMem(0x87cc, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d1a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb2cb);
        EXPECT(gbc.pc(), 0x87ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87cc), 0xcb);
        EXPECT(gbc.readMem(0x87cd), 0xa6);
        EXPECT(gbc.readMem(0x9d1a), 0xe0);
        // CB A6 021F
        gbc.setState(0xbafd, 0xf52c, 0x99c0, 0x4c66, 0xbf8, 0xc921, 0x1, 0x1);
        gbc.writeMem(0xbafd, { 0xcb, 0xa6 });
        gbc.writeMem(0xc921, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf52c);
        EXPECT(gbc.pc(), 0xbaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbafd), 0xcb);
        EXPECT(gbc.readMem(0xbafe), 0xa6);
        EXPECT(gbc.readMem(0xc921), 0x42);
        // CB A6 0221
        gbc.setState(0x7693, 0x3b9b, 0x63c0, 0x5723, 0x14da, 0xab7c, 0x0, 0x1);
        gbc.writeMem(0x7693, { 0xcb, 0xa6 });
        gbc.writeMem(0xab7c, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3b9b);
        EXPECT(gbc.pc(), 0x7695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab7c), 0xce);
        // CB A6 0224
        gbc.setState(0xb1a6, 0xdd59, 0x7270, 0xf0a5, 0x1a8c, 0xd514, 0x1, 0x1);
        gbc.writeMem(0xb1a6, { 0xcb, 0xa6 });
        gbc.writeMem(0xd514, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdd59);
        EXPECT(gbc.pc(), 0xb1a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a6), 0xcb);
        EXPECT(gbc.readMem(0xb1a7), 0xa6);
        EXPECT(gbc.readMem(0xd514), 0xc0);
        // CB A6 0225
        gbc.setState(0x3b6f, 0xaf90, 0x890, 0x2dd1, 0xe9fa, 0x7373, 0x1, 0x0);
        gbc.writeMem(0x3b6f, { 0xcb, 0xa6 });
        gbc.writeMem(0x7373, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaf90);
        EXPECT(gbc.pc(), 0x3b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0227
        gbc.setState(0x9405, 0x86e4, 0x940, 0x60bb, 0xcf34, 0xfaed, 0x1, 0x0);
        gbc.writeMem(0x9405, { 0xcb, 0xa6 });
        gbc.writeMem(0xfaed, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x86e4);
        EXPECT(gbc.pc(), 0x9407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9405), 0xcb);
        EXPECT(gbc.readMem(0x9406), 0xa6);
        EXPECT(gbc.readMem(0xfaed), 0x41);
        // CB A6 0228
        gbc.setState(0x5fc4, 0x58e7, 0x2990, 0x572e, 0x3cf9, 0x68ef, 0x1, 0x1);
        gbc.writeMem(0x5fc4, { 0xcb, 0xa6 });
        gbc.writeMem(0x68ef, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x58e7);
        EXPECT(gbc.pc(), 0x5fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0229
        gbc.setState(0xac9a, 0xa10c, 0xcea0, 0x1b17, 0xf467, 0xfdc4, 0x0, 0x1);
        gbc.writeMem(0xac9a, { 0xcb, 0xa6 });
        gbc.writeMem(0xfdc4, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa10c);
        EXPECT(gbc.pc(), 0xac9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac9a), 0xcb);
        EXPECT(gbc.readMem(0xac9b), 0xa6);
        EXPECT(gbc.readMem(0xfdc4), 0x1);
        // CB A6 022A
        gbc.setState(0x4fc9, 0x94aa, 0x99e0, 0x8b83, 0x166e, 0xe46f, 0x1, 0x1);
        gbc.writeMem(0x4fc9, { 0xcb, 0xa6 });
        gbc.writeMem(0xe46f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x94aa);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46f), 0xaa);
        // CB A6 022B
        gbc.setState(0x235f, 0xa2ef, 0x60b0, 0xb748, 0xa30b, 0xefac, 0x1, 0x0);
        gbc.writeMem(0x235f, { 0xcb, 0xa6 });
        gbc.writeMem(0xefac, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa2ef);
        EXPECT(gbc.pc(), 0x2361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefac), 0xa);
        // CB A6 022C
        gbc.setState(0x1d0a, 0x989f, 0xce50, 0x3f79, 0x8328, 0x9dfd, 0x1, 0x0);
        gbc.writeMem(0x1d0a, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dfd, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x989f);
        EXPECT(gbc.pc(), 0x1d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dfd), 0xc5);
        // CB A6 022E
        gbc.setState(0xcd8e, 0x11e8, 0xfbd0, 0x226a, 0x6536, 0xb217, 0x0, 0x0);
        gbc.writeMem(0xb217, { 0xb });
        gbc.writeMem(0xcd8e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x11e8);
        EXPECT(gbc.pc(), 0xcd90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb217), 0xb);
        EXPECT(gbc.readMem(0xcd8e), 0xcb);
        EXPECT(gbc.readMem(0xcd8f), 0xa6);
        // CB A6 022F
        gbc.setState(0x4844, 0x7aa0, 0x4120, 0x7031, 0x8494, 0xa77d, 0x1, 0x0);
        gbc.writeMem(0x4844, { 0xcb, 0xa6 });
        gbc.writeMem(0xa77d, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7aa0);
        EXPECT(gbc.pc(), 0x4846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77d), 0x66);
        // CB A6 0231
        gbc.setState(0xcdee, 0x2488, 0x41f0, 0x5308, 0x27ab, 0xd353, 0x1, 0x1);
        gbc.writeMem(0xcdee, { 0xcb, 0xa6 });
        gbc.writeMem(0xd353, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0xcdf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdee), 0xcb);
        EXPECT(gbc.readMem(0xcdef), 0xa6);
        EXPECT(gbc.readMem(0xd353), 0x1);
        // CB A6 0232
        gbc.setState(0xa4e0, 0xf8b6, 0x5610, 0x2a0c, 0x3a58, 0xad7c, 0x1, 0x1);
        gbc.writeMem(0xa4e0, { 0xcb, 0xa6 });
        gbc.writeMem(0xad7c, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf8b6);
        EXPECT(gbc.pc(), 0xa4e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e0), 0xcb);
        EXPECT(gbc.readMem(0xa4e1), 0xa6);
        EXPECT(gbc.readMem(0xad7c), 0xaa);
        // CB A6 0233
        gbc.setState(0x18ce, 0xf185, 0x3ef0, 0x42e8, 0x6ef3, 0xa485, 0x1, 0x0);
        gbc.writeMem(0x18ce, { 0xcb, 0xa6 });
        gbc.writeMem(0xa485, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf185);
        EXPECT(gbc.pc(), 0x18d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa485), 0x63);
        // CB A6 0234
        gbc.setState(0xd126, 0x8a8, 0x3160, 0x37cb, 0x6994, 0x4b10, 0x0, 0x0);
        gbc.writeMem(0x4b10, { 0xf });
        gbc.writeMem(0xd126, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8a8);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd126), 0xcb);
        EXPECT(gbc.readMem(0xd127), 0xa6);
        // CB A6 0236
        gbc.setState(0xd313, 0x5291, 0xe310, 0x53d, 0xa398, 0xc8f5, 0x0, 0x1);
        gbc.writeMem(0xc8f5, { 0x14 });
        gbc.writeMem(0xd313, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5291);
        EXPECT(gbc.pc(), 0xd315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8f5), 0x4);
        EXPECT(gbc.readMem(0xd313), 0xcb);
        EXPECT(gbc.readMem(0xd314), 0xa6);
        // CB A6 0238
        gbc.setState(0x52a8, 0x4173, 0x9b50, 0x27f0, 0x5e78, 0x8cf9, 0x0, 0x1);
        gbc.writeMem(0x52a8, { 0xcb, 0xa6 });
        gbc.writeMem(0x8cf9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4173);
        EXPECT(gbc.pc(), 0x52aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf9), 0x84);
        // CB A6 0239
        gbc.setState(0xc6df, 0xf88b, 0x3e70, 0x521e, 0xaa0e, 0xc8ba, 0x0, 0x0);
        gbc.writeMem(0xc6df, { 0xcb, 0xa6 });
        gbc.writeMem(0xc8ba, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf88b);
        EXPECT(gbc.pc(), 0xc6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6df), 0xcb);
        EXPECT(gbc.readMem(0xc6e0), 0xa6);
        EXPECT(gbc.readMem(0xc8ba), 0xa1);
        // CB A6 023A
        gbc.setState(0x17af, 0x1516, 0x5b90, 0xe5e6, 0x8816, 0xcdb6, 0x1, 0x0);
        gbc.writeMem(0x17af, { 0xcb, 0xa6 });
        gbc.writeMem(0xcdb6, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1516);
        EXPECT(gbc.pc(), 0x17b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdb6), 0x2c);
        // CB A6 023B
        gbc.setState(0xc754, 0x916, 0xa220, 0x6414, 0x33a7, 0x1c60, 0x0, 0x0);
        gbc.writeMem(0x1c60, { 0x4b });
        gbc.writeMem(0xc754, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x916);
        EXPECT(gbc.pc(), 0xc756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc754), 0xcb);
        EXPECT(gbc.readMem(0xc755), 0xa6);
        // CB A6 023C
        gbc.setState(0x39df, 0x2ec5, 0xaef0, 0x1622, 0x2bf8, 0xd4fb, 0x1, 0x1);
        gbc.writeMem(0x39df, { 0xcb, 0xa6 });
        gbc.writeMem(0xd4fb, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2ec5);
        EXPECT(gbc.pc(), 0x39e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fb), 0xc4);
        // CB A6 023D
        gbc.setState(0xb270, 0x873e, 0x7ca0, 0x1425, 0x2295, 0x20b8, 0x0, 0x0);
        gbc.writeMem(0x20b8, { 0x7 });
        gbc.writeMem(0xb270, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x873e);
        EXPECT(gbc.pc(), 0xb272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb270), 0xcb);
        EXPECT(gbc.readMem(0xb271), 0xa6);
        // CB A6 023F
        gbc.setState(0x6fe8, 0xf3db, 0x130, 0x93f9, 0x70a6, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x1522, { 0xc5 });
        gbc.writeMem(0x6fe8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf3db);
        EXPECT(gbc.pc(), 0x6fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0240
        gbc.setState(0x9361, 0x87ae, 0x4cc0, 0x8c0b, 0x74bf, 0xb4c5, 0x0, 0x0);
        gbc.writeMem(0x9361, { 0xcb, 0xa6 });
        gbc.writeMem(0xb4c5, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x87ae);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9361), 0xcb);
        EXPECT(gbc.readMem(0x9362), 0xa6);
        EXPECT(gbc.readMem(0xb4c5), 0xe6);
        // CB A6 0241
        gbc.setState(0x9722, 0x93ad, 0xbd90, 0xcc3d, 0xca27, 0x3d45, 0x0, 0x1);
        gbc.writeMem(0x3d45, { 0x63 });
        gbc.writeMem(0x9722, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x93ad);
        EXPECT(gbc.pc(), 0x9724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9722), 0xcb);
        EXPECT(gbc.readMem(0x9723), 0xa6);
        // CB A6 0242
        gbc.setState(0xccd7, 0x901c, 0x9ed0, 0x59f4, 0x7c7, 0x76c9, 0x1, 0x0);
        gbc.writeMem(0x76c9, { 0xa5 });
        gbc.writeMem(0xccd7, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x901c);
        EXPECT(gbc.pc(), 0xccd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd7), 0xcb);
        EXPECT(gbc.readMem(0xccd8), 0xa6);
        // CB A6 0243
        gbc.setState(0xb05f, 0xf9e7, 0x8150, 0xfb17, 0x917a, 0xc0e4, 0x1, 0x1);
        gbc.writeMem(0xb05f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc0e4, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf9e7);
        EXPECT(gbc.pc(), 0xb061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb05f), 0xcb);
        EXPECT(gbc.readMem(0xb060), 0xa6);
        EXPECT(gbc.readMem(0xc0e4), 0x2c);
        // CB A6 0244
        gbc.setState(0x4647, 0xe747, 0x4350, 0xe1f7, 0x5840, 0x25d, 0x1, 0x0);
        gbc.writeMem(0x25d, { 0x68 });
        gbc.writeMem(0x4647, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe747);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0245
        gbc.setState(0x6145, 0x84f6, 0xc130, 0x1720, 0xd561, 0x4973, 0x1, 0x1);
        gbc.writeMem(0x4973, { 0xa6 });
        gbc.writeMem(0x6145, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x84f6);
        EXPECT(gbc.pc(), 0x6147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0246
        gbc.setState(0x366b, 0x80fe, 0x2a50, 0xaa70, 0x8ca9, 0x3432, 0x0, 0x0);
        gbc.writeMem(0x3432, { 0x2 });
        gbc.writeMem(0x366b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x80fe);
        EXPECT(gbc.pc(), 0x366d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0248
        gbc.setState(0x21cd, 0x8f90, 0xb0c0, 0xbd76, 0x6d64, 0x9d2d, 0x0, 0x1);
        gbc.writeMem(0x21cd, { 0xcb, 0xa6 });
        gbc.writeMem(0x9d2d, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8f90);
        EXPECT(gbc.pc(), 0x21cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2d), 0xe4);
        // CB A6 0249
        gbc.setState(0x5bc5, 0xfc01, 0xffe0, 0x36ff, 0xbee1, 0xf172, 0x1, 0x0);
        gbc.writeMem(0x5bc5, { 0xcb, 0xa6 });
        gbc.writeMem(0xf172, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xfc01);
        EXPECT(gbc.pc(), 0x5bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf172), 0xe0);
        // CB A6 024A
        gbc.setState(0x23a8, 0xf347, 0x6e60, 0xf5c, 0x4f84, 0x4b95, 0x0, 0x1);
        gbc.writeMem(0x23a8, { 0xcb, 0xa6 });
        gbc.writeMem(0x4b95, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf347);
        EXPECT(gbc.pc(), 0x23aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 024C
        gbc.setState(0x43eb, 0xa27b, 0xf100, 0xa440, 0x566d, 0xe20c, 0x1, 0x1);
        gbc.writeMem(0x43eb, { 0xcb, 0xa6 });
        gbc.writeMem(0xe20c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa27b);
        EXPECT(gbc.pc(), 0x43ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20c), 0x84);
        // CB A6 0250
        gbc.setState(0x93f8, 0x4bc4, 0x7050, 0x29fd, 0x8921, 0x6e1f, 0x1, 0x0);
        gbc.writeMem(0x6e1f, { 0xc0 });
        gbc.writeMem(0x93f8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4bc4);
        EXPECT(gbc.pc(), 0x93fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f8), 0xcb);
        EXPECT(gbc.readMem(0x93f9), 0xa6);
        // CB A6 0252
        gbc.setState(0xa383, 0xe358, 0x4730, 0x3ef9, 0xa2b9, 0xac93, 0x0, 0x1);
        gbc.writeMem(0xa383, { 0xcb, 0xa6 });
        gbc.writeMem(0xac93, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe358);
        EXPECT(gbc.pc(), 0xa385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa383), 0xcb);
        EXPECT(gbc.readMem(0xa384), 0xa6);
        EXPECT(gbc.readMem(0xac93), 0x2);
        // CB A6 0254
        gbc.setState(0x66f5, 0x88da, 0xdd10, 0xeef8, 0xfb9b, 0x2bc8, 0x1, 0x1);
        gbc.writeMem(0x2bc8, { 0xe2 });
        gbc.writeMem(0x66f5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x88da);
        EXPECT(gbc.pc(), 0x66f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0255
        gbc.setState(0x3858, 0x15e, 0x7d20, 0x1597, 0x3317, 0x5141, 0x1, 0x0);
        gbc.writeMem(0x3858, { 0xcb, 0xa6 });
        gbc.writeMem(0x5141, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x15e);
        EXPECT(gbc.pc(), 0x385a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0256
        gbc.setState(0x35c, 0xeabd, 0x3300, 0x5058, 0x25af, 0xb695, 0x0, 0x1);
        gbc.writeMem(0x35c, { 0xcb, 0xa6 });
        gbc.writeMem(0xb695, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xeabd);
        EXPECT(gbc.pc(), 0x35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb695), 0xa6);
        // CB A6 0257
        gbc.setState(0x76e6, 0xa6ac, 0x8530, 0xc164, 0xc003, 0x6c24, 0x0, 0x1);
        gbc.writeMem(0x6c24, { 0xaf });
        gbc.writeMem(0x76e6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa6ac);
        EXPECT(gbc.pc(), 0x76e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0259
        gbc.setState(0x9aea, 0xe89f, 0x92e0, 0x23a, 0x4b29, 0xc312, 0x1, 0x1);
        gbc.writeMem(0x9aea, { 0xcb, 0xa6 });
        gbc.writeMem(0xc312, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe89f);
        EXPECT(gbc.pc(), 0x9aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aea), 0xcb);
        EXPECT(gbc.readMem(0x9aeb), 0xa6);
        EXPECT(gbc.readMem(0xc312), 0x25);
        // CB A6 025A
        gbc.setState(0x3f92, 0xd7ca, 0xd910, 0x5c5f, 0xbb5e, 0xfe3d, 0x1, 0x1);
        gbc.writeMem(0x3f92, { 0xcb, 0xa6 });
        gbc.writeMem(0xfe3d, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd7ca);
        EXPECT(gbc.pc(), 0x3f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe3d), 0xc0);
        // CB A6 025B
        gbc.setState(0xb482, 0xce10, 0x3bc0, 0x1233, 0xb3aa, 0x68ed, 0x0, 0x1);
        gbc.writeMem(0x68ed, { 0x4e });
        gbc.writeMem(0xb482, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xce10);
        EXPECT(gbc.pc(), 0xb484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb482), 0xcb);
        EXPECT(gbc.readMem(0xb483), 0xa6);
        // CB A6 025C
        gbc.setState(0x9413, 0x4ac5, 0x3050, 0x5a54, 0x63c, 0xa990, 0x0, 0x0);
        gbc.writeMem(0x9413, { 0xcb, 0xa6 });
        gbc.writeMem(0xa990, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4ac5);
        EXPECT(gbc.pc(), 0x9415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9413), 0xcb);
        EXPECT(gbc.readMem(0x9414), 0xa6);
        EXPECT(gbc.readMem(0xa990), 0xa1);
        // CB A6 025D
        gbc.setState(0x48dc, 0xe7a1, 0x4640, 0xa864, 0x350e, 0x1d7d, 0x0, 0x1);
        gbc.writeMem(0x1d7d, { 0xc0 });
        gbc.writeMem(0x48dc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe7a1);
        EXPECT(gbc.pc(), 0x48de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 025E
        gbc.setState(0x923f, 0xd630, 0xf190, 0xa76d, 0x2f1f, 0xeeeb, 0x1, 0x0);
        gbc.writeMem(0x923f, { 0xcb, 0xa6 });
        gbc.writeMem(0xeeeb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd630);
        EXPECT(gbc.pc(), 0x9241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x923f), 0xcb);
        EXPECT(gbc.readMem(0x9240), 0xa6);
        EXPECT(gbc.readMem(0xeeeb), 0x64);
        // CB A6 0261
        gbc.setState(0xea14, 0x3b95, 0xd260, 0xd4e2, 0xfc97, 0xc73b, 0x1, 0x1);
        gbc.writeMem(0xc73b, { 0x7f });
        gbc.writeMem(0xea14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3b95);
        EXPECT(gbc.pc(), 0xea16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73b), 0x6f);
        EXPECT(gbc.readMem(0xea14), 0xcb);
        EXPECT(gbc.readMem(0xea15), 0xa6);
        // CB A6 0265
        gbc.setState(0x4ff8, 0xd67, 0x5b80, 0xd410, 0x38a, 0x4b70, 0x1, 0x0);
        gbc.writeMem(0x4b70, { 0xa3 });
        gbc.writeMem(0x4ff8, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd67);
        EXPECT(gbc.pc(), 0x4ffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0266
        gbc.setState(0x9230, 0x4bb3, 0xa540, 0x3cc7, 0x1159, 0xe077, 0x1, 0x0);
        gbc.writeMem(0x9230, { 0xcb, 0xa6 });
        gbc.writeMem(0xe077, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4bb3);
        EXPECT(gbc.pc(), 0x9232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9230), 0xcb);
        EXPECT(gbc.readMem(0x9231), 0xa6);
        EXPECT(gbc.readMem(0xe077), 0x40);
        // CB A6 0267
        gbc.setState(0xd191, 0xc4cd, 0xd610, 0xd8cf, 0x4849, 0x817d, 0x1, 0x0);
        gbc.writeMem(0x817d, { 0xee });
        gbc.writeMem(0xd191, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc4cd);
        EXPECT(gbc.pc(), 0xd193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817d), 0xee);
        EXPECT(gbc.readMem(0xd191), 0xcb);
        EXPECT(gbc.readMem(0xd192), 0xa6);
        // CB A6 0268
        gbc.setState(0x96a7, 0x19c0, 0x72c0, 0x9851, 0x6a9f, 0xaa49, 0x0, 0x1);
        gbc.writeMem(0x96a7, { 0xcb, 0xa6 });
        gbc.writeMem(0xaa49, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x19c0);
        EXPECT(gbc.pc(), 0x96a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a7), 0xcb);
        EXPECT(gbc.readMem(0x96a8), 0xa6);
        EXPECT(gbc.readMem(0xaa49), 0xd);
        // CB A6 0269
        gbc.setState(0x9f72, 0x1983, 0x1010, 0x71d0, 0xdd29, 0xf2fc, 0x0, 0x1);
        gbc.writeMem(0x9f72, { 0xcb, 0xa6 });
        gbc.writeMem(0xf2fc, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1983);
        EXPECT(gbc.pc(), 0x9f74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f72), 0xcb);
        EXPECT(gbc.readMem(0x9f73), 0xa6);
        EXPECT(gbc.readMem(0xf2fc), 0x24);
        // CB A6 026A
        gbc.setState(0xe1e5, 0x4f90, 0x3590, 0x7a1c, 0x87d0, 0x9cb8, 0x1, 0x1);
        gbc.writeMem(0x9cb8, { 0xd4 });
        gbc.writeMem(0xe1e5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4f90);
        EXPECT(gbc.pc(), 0xe1e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb8), 0xc4);
        EXPECT(gbc.readMem(0xe1e5), 0xcb);
        EXPECT(gbc.readMem(0xe1e6), 0xa6);
        // CB A6 026B
        gbc.setState(0x2f07, 0x725f, 0x5aa0, 0x498c, 0xc5aa, 0xbf88, 0x0, 0x0);
        gbc.writeMem(0x2f07, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf88, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x725f);
        EXPECT(gbc.pc(), 0x2f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf88), 0x25);
        // CB A6 026C
        gbc.setState(0xea08, 0x2942, 0xa7e0, 0x8894, 0x8c22, 0x8351, 0x1, 0x1);
        gbc.writeMem(0x8351, { 0xe7 });
        gbc.writeMem(0xea08, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2942);
        EXPECT(gbc.pc(), 0xea0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8351), 0xe7);
        EXPECT(gbc.readMem(0xea08), 0xcb);
        EXPECT(gbc.readMem(0xea09), 0xa6);
        // CB A6 026D
        gbc.setState(0x760, 0xd3aa, 0xb270, 0x71dc, 0x8256, 0xe2dc, 0x1, 0x1);
        gbc.writeMem(0x760, { 0xcb, 0xa6 });
        gbc.writeMem(0xe2dc, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd3aa);
        EXPECT(gbc.pc(), 0x762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2dc), 0xed);
        // CB A6 026F
        gbc.setState(0x55b0, 0x8de3, 0x2e30, 0xc9b7, 0x6fb9, 0xb2a2, 0x1, 0x1);
        gbc.writeMem(0x55b0, { 0xcb, 0xa6 });
        gbc.writeMem(0xb2a2, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0x55b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a2), 0x64);
        // CB A6 0276
        gbc.setState(0xbb5f, 0x3ecb, 0xecf0, 0xa53d, 0xcf01, 0x796c, 0x0, 0x0);
        gbc.writeMem(0x796c, { 0xe2 });
        gbc.writeMem(0xbb5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3ecb);
        EXPECT(gbc.pc(), 0xbb61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb5f), 0xcb);
        EXPECT(gbc.readMem(0xbb60), 0xa6);
        // CB A6 0278
        gbc.setState(0x48c6, 0x4ed3, 0x4dc0, 0x38fc, 0x6a54, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0x48c6, { 0xcb, 0xa6 });
        gbc.writeMem(0xce8f, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4ed3);
        EXPECT(gbc.pc(), 0x48c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8f), 0x5);
        // CB A6 0279
        gbc.setState(0xc4d, 0x9e56, 0xbd0, 0x8afd, 0x2271, 0xc75a, 0x0, 0x0);
        gbc.writeMem(0xc4d, { 0xcb, 0xa6 });
        gbc.writeMem(0xc75a, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9e56);
        EXPECT(gbc.pc(), 0xc4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc75a), 0xa5);
        // CB A6 027A
        gbc.setState(0x9390, 0x62c9, 0x2c00, 0x54c, 0x476a, 0x8df5, 0x1, 0x1);
        gbc.writeMem(0x8df5, { 0xa6 });
        gbc.writeMem(0x9390, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x62c9);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df5), 0xa6);
        EXPECT(gbc.readMem(0x9390), 0xcb);
        EXPECT(gbc.readMem(0x9391), 0xa6);
        // CB A6 027B
        gbc.setState(0xebd4, 0x47dc, 0x450, 0xc1b1, 0x5f7f, 0xc615, 0x0, 0x0);
        gbc.writeMem(0xc615, { 0x7b });
        gbc.writeMem(0xebd4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x47dc);
        EXPECT(gbc.pc(), 0xebd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc615), 0x6b);
        EXPECT(gbc.readMem(0xebd4), 0xcb);
        EXPECT(gbc.readMem(0xebd5), 0xa6);
        // CB A6 027D
        gbc.setState(0x461b, 0x5eb8, 0xc870, 0xe443, 0xfd2e, 0xfe6a, 0x0, 0x0);
        gbc.writeMem(0x461b, { 0xcb, 0xa6 });
        gbc.writeMem(0xfe6a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5eb8);
        EXPECT(gbc.pc(), 0x461d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe6a), 0xe5);
        // CB A6 027F
        gbc.setState(0x5fe, 0x3e54, 0xc800, 0x1e83, 0xf40e, 0xb448, 0x0, 0x0);
        gbc.writeMem(0x5fe, { 0xcb, 0xa6 });
        gbc.writeMem(0xb448, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3e54);
        EXPECT(gbc.pc(), 0x600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb448), 0xeb);
        // CB A6 0280
        gbc.setState(0x2215, 0xfe0b, 0x8cf0, 0xc723, 0x5ced, 0xcb1f, 0x1, 0x0);
        gbc.writeMem(0x2215, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb1f, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xfe0b);
        EXPECT(gbc.pc(), 0x2217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb1f), 0xee);
        // CB A6 0283
        gbc.setState(0x94e8, 0xcb9b, 0x58a0, 0x5fb9, 0x4f4e, 0xb4a7, 0x1, 0x0);
        gbc.writeMem(0x94e8, { 0xcb, 0xa6 });
        gbc.writeMem(0xb4a7, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcb9b);
        EXPECT(gbc.pc(), 0x94ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e8), 0xcb);
        EXPECT(gbc.readMem(0x94e9), 0xa6);
        EXPECT(gbc.readMem(0xb4a7), 0x69);
        // CB A6 0284
        gbc.setState(0x9ba5, 0xd909, 0xe050, 0xdc8a, 0xe5d6, 0x9ec0, 0x0, 0x1);
        gbc.writeMem(0x9ba5, { 0xcb, 0xa6 });
        gbc.writeMem(0x9ec0, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd909);
        EXPECT(gbc.pc(), 0x9ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba5), 0xcb);
        EXPECT(gbc.readMem(0x9ba6), 0xa6);
        EXPECT(gbc.readMem(0x9ec0), 0x4a);
        // CB A6 0285
        gbc.setState(0xaecb, 0xfe76, 0xd400, 0x92f1, 0xee5d, 0xd0f7, 0x0, 0x0);
        gbc.writeMem(0xaecb, { 0xcb, 0xa6 });
        gbc.writeMem(0xd0f7, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfe76);
        EXPECT(gbc.pc(), 0xaecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaecb), 0xcb);
        EXPECT(gbc.readMem(0xaecc), 0xa6);
        EXPECT(gbc.readMem(0xd0f7), 0x24);
        // CB A6 0287
        gbc.setState(0xd270, 0x286b, 0x8320, 0x2e88, 0x5b68, 0x783c, 0x1, 0x1);
        gbc.writeMem(0x783c, { 0xc9 });
        gbc.writeMem(0xd270, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x286b);
        EXPECT(gbc.pc(), 0xd272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd270), 0xcb);
        EXPECT(gbc.readMem(0xd271), 0xa6);
        // CB A6 0288
        gbc.setState(0x8e94, 0x4814, 0xf8c0, 0x2fa6, 0xe33f, 0x9fee, 0x1, 0x0);
        gbc.writeMem(0x8e94, { 0xcb, 0xa6 });
        gbc.writeMem(0x9fee, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4814);
        EXPECT(gbc.pc(), 0x8e96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e94), 0xcb);
        EXPECT(gbc.readMem(0x8e95), 0xa6);
        EXPECT(gbc.readMem(0x9fee), 0x8b);
        // CB A6 0289
        gbc.setState(0xe53c, 0xc10b, 0x9190, 0x8301, 0xf833, 0xd040, 0x0, 0x1);
        gbc.writeMem(0xd040, { 0xb6 });
        gbc.writeMem(0xe53c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc10b);
        EXPECT(gbc.pc(), 0xe53e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd040), 0xa6);
        EXPECT(gbc.readMem(0xe53c), 0xcb);
        EXPECT(gbc.readMem(0xe53d), 0xa6);
        // CB A6 028A
        gbc.setState(0xa43d, 0xd8f5, 0xb590, 0x1243, 0xc259, 0xab66, 0x1, 0x0);
        gbc.writeMem(0xa43d, { 0xcb, 0xa6 });
        gbc.writeMem(0xab66, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd8f5);
        EXPECT(gbc.pc(), 0xa43f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43d), 0xcb);
        EXPECT(gbc.readMem(0xa43e), 0xa6);
        EXPECT(gbc.readMem(0xab66), 0x40);
        // CB A6 028B
        gbc.setState(0xaf3b, 0x9362, 0x9e10, 0x3a3e, 0x2154, 0xdf5d, 0x0, 0x0);
        gbc.writeMem(0xaf3b, { 0xcb, 0xa6 });
        gbc.writeMem(0xdf5d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9362);
        EXPECT(gbc.pc(), 0xaf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf3b), 0xcb);
        EXPECT(gbc.readMem(0xaf3c), 0xa6);
        EXPECT(gbc.readMem(0xdf5d), 0x47);
        // CB A6 0290
        gbc.setState(0xe9b3, 0x962f, 0x42b0, 0xfe5a, 0xfae0, 0xada6, 0x1, 0x1);
        gbc.writeMem(0xada6, { 0x4a });
        gbc.writeMem(0xe9b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x962f);
        EXPECT(gbc.pc(), 0xe9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada6), 0x4a);
        EXPECT(gbc.readMem(0xe9b3), 0xcb);
        EXPECT(gbc.readMem(0xe9b4), 0xa6);
        // CB A6 0292
        gbc.setState(0xb889, 0xf4ca, 0xdef0, 0x22ac, 0x1f9b, 0xcfeb, 0x0, 0x0);
        gbc.writeMem(0xb889, { 0xcb, 0xa6 });
        gbc.writeMem(0xcfeb, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf4ca);
        EXPECT(gbc.pc(), 0xb88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb889), 0xcb);
        EXPECT(gbc.readMem(0xb88a), 0xa6);
        EXPECT(gbc.readMem(0xcfeb), 0x20);
        // CB A6 0293
        gbc.setState(0x5685, 0x269e, 0x3810, 0xaa32, 0x8e1c, 0xa86b, 0x0, 0x0);
        gbc.writeMem(0x5685, { 0xcb, 0xa6 });
        gbc.writeMem(0xa86b, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x269e);
        EXPECT(gbc.pc(), 0x5687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa86b), 0xc5);
        // CB A6 0294
        gbc.setState(0x9841, 0x7c76, 0xb540, 0x143a, 0xb94b, 0x4035, 0x0, 0x0);
        gbc.writeMem(0x4035, { 0xc1 });
        gbc.writeMem(0x9841, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7c76);
        EXPECT(gbc.pc(), 0x9843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9841), 0xcb);
        EXPECT(gbc.readMem(0x9842), 0xa6);
        // CB A6 0295
        gbc.setState(0x14c0, 0x6d49, 0x9710, 0xec65, 0x760f, 0xe5f7, 0x1, 0x1);
        gbc.writeMem(0x14c0, { 0xcb, 0xa6 });
        gbc.writeMem(0xe5f7, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6d49);
        EXPECT(gbc.pc(), 0x14c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5f7), 0x6d);
        // CB A6 0296
        gbc.setState(0x2218, 0x8aeb, 0x30d0, 0xb108, 0x1c0a, 0x3e00, 0x1, 0x0);
        gbc.writeMem(0x2218, { 0xcb, 0xa6 });
        gbc.writeMem(0x3e00, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8aeb);
        EXPECT(gbc.pc(), 0x221a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0297
        gbc.setState(0x9bfd, 0x34da, 0xb040, 0x6dde, 0x1b36, 0x3f7c, 0x0, 0x0);
        gbc.writeMem(0x3f7c, { 0x84 });
        gbc.writeMem(0x9bfd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x34da);
        EXPECT(gbc.pc(), 0x9bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bfd), 0xcb);
        EXPECT(gbc.readMem(0x9bfe), 0xa6);
        // CB A6 0298
        gbc.setState(0x9695, 0x5dd1, 0x1650, 0xfb33, 0xe0ec, 0x64e3, 0x1, 0x1);
        gbc.writeMem(0x64e3, { 0xa8 });
        gbc.writeMem(0x9695, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5dd1);
        EXPECT(gbc.pc(), 0x9697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9695), 0xcb);
        EXPECT(gbc.readMem(0x9696), 0xa6);
        // CB A6 0299
        gbc.setState(0x7431, 0x6cfb, 0xa560, 0x7884, 0x1bcb, 0xb29e, 0x1, 0x1);
        gbc.writeMem(0x7431, { 0xcb, 0xa6 });
        gbc.writeMem(0xb29e, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6cfb);
        EXPECT(gbc.pc(), 0x7433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb29e), 0xc2);
        // CB A6 029B
        gbc.setState(0xaedc, 0x5200, 0xf920, 0x882b, 0x87ba, 0x67e4, 0x1, 0x1);
        gbc.writeMem(0x67e4, { 0x6f });
        gbc.writeMem(0xaedc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5200);
        EXPECT(gbc.pc(), 0xaede);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaedc), 0xcb);
        EXPECT(gbc.readMem(0xaedd), 0xa6);
        // CB A6 029D
        gbc.setState(0x8a47, 0x7512, 0xcfe0, 0x374b, 0x8d0a, 0xe8e1, 0x0, 0x0);
        gbc.writeMem(0x8a47, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8e1, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7512);
        EXPECT(gbc.pc(), 0x8a49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a47), 0xcb);
        EXPECT(gbc.readMem(0x8a48), 0xa6);
        EXPECT(gbc.readMem(0xe8e1), 0xa1);
        // CB A6 02A0
        gbc.setState(0x13c7, 0xd061, 0xf6e0, 0xf5f, 0x357, 0x51c9, 0x0, 0x0);
        gbc.writeMem(0x13c7, { 0xcb, 0xa6 });
        gbc.writeMem(0x51c9, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd061);
        EXPECT(gbc.pc(), 0x13c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 02A2
        gbc.setState(0xe3b3, 0xb0d1, 0x9200, 0x8457, 0x125c, 0x5b18, 0x0, 0x0);
        gbc.writeMem(0x5b18, { 0xcb });
        gbc.writeMem(0xe3b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb0d1);
        EXPECT(gbc.pc(), 0xe3b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b3), 0xcb);
        EXPECT(gbc.readMem(0xe3b4), 0xa6);
        // CB A6 02A4
        gbc.setState(0x41f6, 0xa72b, 0x33a0, 0xa59e, 0x1e77, 0x761e, 0x0, 0x0);
        gbc.writeMem(0x41f6, { 0xcb, 0xa6 });
        gbc.writeMem(0x761e, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa72b);
        EXPECT(gbc.pc(), 0x41f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 02A5
        gbc.setState(0xeaff, 0x808c, 0xf360, 0x65e0, 0xc69a, 0x407, 0x0, 0x0);
        gbc.writeMem(0x407, { 0xae });
        gbc.writeMem(0xeaff, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x808c);
        EXPECT(gbc.pc(), 0xeb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaff), 0xcb);
        EXPECT(gbc.readMem(0xeb00), 0xa6);
        // CB A6 02A6
        gbc.setState(0x8c9b, 0x7df7, 0x1cf0, 0xe254, 0x3163, 0xdafc, 0x0, 0x0);
        gbc.writeMem(0x8c9b, { 0xcb, 0xa6 });
        gbc.writeMem(0xdafc, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7df7);
        EXPECT(gbc.pc(), 0x8c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9b), 0xcb);
        EXPECT(gbc.readMem(0x8c9c), 0xa6);
        EXPECT(gbc.readMem(0xdafc), 0x67);
        // CB A6 02A7
        gbc.setState(0xbb09, 0x7b9b, 0xa310, 0xd5af, 0x9255, 0xd860, 0x0, 0x0);
        gbc.writeMem(0xbb09, { 0xcb, 0xa6 });
        gbc.writeMem(0xd860, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7b9b);
        EXPECT(gbc.pc(), 0xbb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb09), 0xcb);
        EXPECT(gbc.readMem(0xbb0a), 0xa6);
        EXPECT(gbc.readMem(0xd860), 0xab);
        // CB A6 02A8
        gbc.setState(0x9f92, 0xfd69, 0x6300, 0x3462, 0xc627, 0xc7bc, 0x1, 0x0);
        gbc.writeMem(0x9f92, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7bc, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfd69);
        EXPECT(gbc.pc(), 0x9f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f92), 0xcb);
        EXPECT(gbc.readMem(0x9f93), 0xa6);
        EXPECT(gbc.readMem(0xc7bc), 0x6);
        // CB A6 02A9
        gbc.setState(0xe273, 0x64a0, 0x27b0, 0x9041, 0x749a, 0xebcd, 0x1, 0x1);
        gbc.writeMem(0xe273, { 0xcb, 0xa6 });
        gbc.writeMem(0xebcd, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x64a0);
        EXPECT(gbc.pc(), 0xe275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe273), 0xcb);
        EXPECT(gbc.readMem(0xe274), 0xa6);
        EXPECT(gbc.readMem(0xebcd), 0x6f);
        // CB A6 02AA
        gbc.setState(0x92e0, 0x3c44, 0xaca0, 0x41, 0xae3, 0xcec4, 0x0, 0x1);
        gbc.writeMem(0x92e0, { 0xcb, 0xa6 });
        gbc.writeMem(0xcec4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0x92e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e0), 0xcb);
        EXPECT(gbc.readMem(0x92e1), 0xa6);
        EXPECT(gbc.readMem(0xcec4), 0x46);
        // CB A6 02AB
        gbc.setState(0xbf69, 0x18a9, 0x8f40, 0x5b3d, 0x11fb, 0x2436, 0x1, 0x0);
        gbc.writeMem(0x2436, { 0x44 });
        gbc.writeMem(0xbf69, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x18a9);
        EXPECT(gbc.pc(), 0xbf6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf69), 0xcb);
        EXPECT(gbc.readMem(0xbf6a), 0xa6);
        // CB A6 02AF
        gbc.setState(0xcf17, 0x437d, 0x560, 0xcf4c, 0x3831, 0xdbd, 0x0, 0x0);
        gbc.writeMem(0xdbd, { 0xaf });
        gbc.writeMem(0xcf17, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x437d);
        EXPECT(gbc.pc(), 0xcf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf17), 0xcb);
        EXPECT(gbc.readMem(0xcf18), 0xa6);
        // CB A6 02B0
        gbc.setState(0xba28, 0x9c78, 0x8a00, 0xfe36, 0x6fc9, 0xb1a7, 0x0, 0x1);
        gbc.writeMem(0xb1a7, { 0x73 });
        gbc.writeMem(0xba28, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9c78);
        EXPECT(gbc.pc(), 0xba2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a7), 0x63);
        EXPECT(gbc.readMem(0xba28), 0xcb);
        EXPECT(gbc.readMem(0xba29), 0xa6);
        // CB A6 02B2
        gbc.setState(0x9fbb, 0x89be, 0x8b80, 0xab68, 0x50ed, 0x53d5, 0x1, 0x1);
        gbc.writeMem(0x53d5, { 0x23 });
        gbc.writeMem(0x9fbb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x89be);
        EXPECT(gbc.pc(), 0x9fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fbb), 0xcb);
        EXPECT(gbc.readMem(0x9fbc), 0xa6);
        // CB A6 02B4
        gbc.setState(0x8c47, 0xf011, 0x5c30, 0xadc3, 0x2e00, 0xb7fc, 0x1, 0x1);
        gbc.writeMem(0x8c47, { 0xcb, 0xa6 });
        gbc.writeMem(0xb7fc, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf011);
        EXPECT(gbc.pc(), 0x8c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c47), 0xcb);
        EXPECT(gbc.readMem(0x8c48), 0xa6);
        EXPECT(gbc.readMem(0xb7fc), 0x62);
        // CB A6 02B6
        gbc.setState(0x2746, 0x4203, 0x8a20, 0x6ef2, 0x70de, 0xff73, 0x0, 0x0);
        gbc.writeMem(0x2746, { 0xcb, 0xa6 });
        gbc.writeMem(0xff73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4203);
        EXPECT(gbc.pc(), 0x2748);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff73), 0x29);
        // CB A6 02B9
        gbc.setState(0x3272, 0x7a26, 0x8f20, 0x7188, 0x6195, 0x3410, 0x1, 0x0);
        gbc.writeMem(0x3272, { 0xcb, 0xa6 });
        gbc.writeMem(0x3410, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7a26);
        EXPECT(gbc.pc(), 0x3274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 02BA
        gbc.setState(0x586f, 0xad7b, 0x8ad0, 0xd85c, 0x2a58, 0x1d89, 0x1, 0x1);
        gbc.writeMem(0x1d89, { 0x47 });
        gbc.writeMem(0x586f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xad7b);
        EXPECT(gbc.pc(), 0x5871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 02BB
        gbc.setState(0x9f11, 0xf7be, 0x4db0, 0x3600, 0x77f5, 0x7109, 0x1, 0x0);
        gbc.writeMem(0x7109, { 0xb });
        gbc.writeMem(0x9f11, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf7be);
        EXPECT(gbc.pc(), 0x9f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f11), 0xcb);
        EXPECT(gbc.readMem(0x9f12), 0xa6);
        // CB A6 02BC
        gbc.setState(0xac3a, 0x4b5e, 0xed00, 0x1733, 0xb0ae, 0xd9b9, 0x0, 0x0);
        gbc.writeMem(0xac3a, { 0xcb, 0xa6 });
        gbc.writeMem(0xd9b9, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4b5e);
        EXPECT(gbc.pc(), 0xac3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3a), 0xcb);
        EXPECT(gbc.readMem(0xac3b), 0xa6);
        EXPECT(gbc.readMem(0xd9b9), 0x2d);
        // CB A6 02BD
        gbc.setState(0x8a4, 0x321a, 0xaad0, 0xb76c, 0x7f12, 0x90a9, 0x1, 0x1);
        gbc.writeMem(0x8a4, { 0xcb, 0xa6 });
        gbc.writeMem(0x90a9, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x321a);
        EXPECT(gbc.pc(), 0x8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90a9), 0x43);
        // CB A6 02BF
        gbc.setState(0xde8c, 0xbdd2, 0x37c0, 0xd5da, 0x7701, 0x35a6, 0x1, 0x0);
        gbc.writeMem(0x35a6, { 0xe8 });
        gbc.writeMem(0xde8c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbdd2);
        EXPECT(gbc.pc(), 0xde8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde8c), 0xcb);
        EXPECT(gbc.readMem(0xde8d), 0xa6);
        // CB A6 02C0
        gbc.setState(0x2138, 0x4fb5, 0x2a20, 0x53, 0x963a, 0xbf5e, 0x1, 0x0);
        gbc.writeMem(0x2138, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf5e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4fb5);
        EXPECT(gbc.pc(), 0x213a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5e), 0x8b);
        // CB A6 02C1
        gbc.setState(0x612f, 0xc8e1, 0x21d0, 0x37c8, 0x59a6, 0xa644, 0x0, 0x0);
        gbc.writeMem(0x612f, { 0xcb, 0xa6 });
        gbc.writeMem(0xa644, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc8e1);
        EXPECT(gbc.pc(), 0x6131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa644), 0x46);
        // CB A6 02C2
        gbc.setState(0x8db0, 0xdb8f, 0xfc70, 0x2365, 0xe130, 0xf8a0, 0x1, 0x1);
        gbc.writeMem(0x8db0, { 0xcb, 0xa6 });
        gbc.writeMem(0xf8a0, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdb8f);
        EXPECT(gbc.pc(), 0x8db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db0), 0xcb);
        EXPECT(gbc.readMem(0x8db1), 0xa6);
        EXPECT(gbc.readMem(0xf8a0), 0xe8);
        // CB A6 02C4
        gbc.setState(0x500b, 0xdd0a, 0x7df0, 0xe377, 0x2987, 0x9478, 0x0, 0x1);
        gbc.writeMem(0x500b, { 0xcb, 0xa6 });
        gbc.writeMem(0x9478, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdd0a);
        EXPECT(gbc.pc(), 0x500d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9478), 0x5);
        // CB A6 02C5
        gbc.setState(0x474d, 0xa997, 0x7e10, 0xc2a7, 0x9de, 0x25c5, 0x0, 0x0);
        gbc.writeMem(0x25c5, { 0xec });
        gbc.writeMem(0x474d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa997);
        EXPECT(gbc.pc(), 0x474f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 02C7
        gbc.setState(0xc36d, 0x8cbc, 0x6760, 0x51d0, 0x45fd, 0xb8fe, 0x0, 0x0);
        gbc.writeMem(0xb8fe, { 0x9f });
        gbc.writeMem(0xc36d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8cbc);
        EXPECT(gbc.pc(), 0xc36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fe), 0x8f);
        EXPECT(gbc.readMem(0xc36d), 0xcb);
        EXPECT(gbc.readMem(0xc36e), 0xa6);
        // CB A6 02CA
        gbc.setState(0x89bd, 0x26a7, 0x7330, 0x8fdc, 0x65df, 0xa359, 0x1, 0x1);
        gbc.writeMem(0x89bd, { 0xcb, 0xa6 });
        gbc.writeMem(0xa359, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x26a7);
        EXPECT(gbc.pc(), 0x89bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89bd), 0xcb);
        EXPECT(gbc.readMem(0x89be), 0xa6);
        EXPECT(gbc.readMem(0xa359), 0xee);
        // CB A6 02CE
        gbc.setState(0xcce9, 0x7d9, 0x8670, 0x30ef, 0x31df, 0x9e81, 0x0, 0x1);
        gbc.writeMem(0x9e81, { 0x96 });
        gbc.writeMem(0xcce9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7d9);
        EXPECT(gbc.pc(), 0xcceb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e81), 0x86);
        EXPECT(gbc.readMem(0xcce9), 0xcb);
        EXPECT(gbc.readMem(0xccea), 0xa6);
        // CB A6 02D0
        gbc.setState(0x36d8, 0xb1c, 0x93c0, 0x8533, 0xa754, 0x8a35, 0x0, 0x1);
        gbc.writeMem(0x36d8, { 0xcb, 0xa6 });
        gbc.writeMem(0x8a35, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb1c);
        EXPECT(gbc.pc(), 0x36da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a35), 0xc3);
        // CB A6 02D2
        gbc.setState(0xcaed, 0xc34d, 0x87a0, 0x61db, 0x3409, 0x2ff8, 0x1, 0x1);
        gbc.writeMem(0x2ff8, { 0x61 });
        gbc.writeMem(0xcaed, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xc34d);
        EXPECT(gbc.pc(), 0xcaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaed), 0xcb);
        EXPECT(gbc.readMem(0xcaee), 0xa6);
        // CB A6 02D7
        gbc.setState(0x6895, 0xd6c9, 0x4050, 0x90c7, 0xcabf, 0x46a0, 0x0, 0x1);
        gbc.writeMem(0x46a0, { 0x4e });
        gbc.writeMem(0x6895, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd6c9);
        EXPECT(gbc.pc(), 0x6897);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 02D9
        gbc.setState(0x2ae5, 0xc15, 0x8450, 0xdd4c, 0xcbd, 0x788, 0x0, 0x1);
        gbc.writeMem(0x788, { 0x6d });
        gbc.writeMem(0x2ae5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc15);
        EXPECT(gbc.pc(), 0x2ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 02DB
        gbc.setState(0x5f27, 0x4b44, 0x3a0, 0x201c, 0xfa41, 0x6748, 0x1, 0x0);
        gbc.writeMem(0x5f27, { 0xcb, 0xa6 });
        gbc.writeMem(0x6748, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4b44);
        EXPECT(gbc.pc(), 0x5f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 02DC
        gbc.setState(0x2182, 0xb24c, 0x1d40, 0x49a2, 0xbb72, 0x8eef, 0x1, 0x0);
        gbc.writeMem(0x2182, { 0xcb, 0xa6 });
        gbc.writeMem(0x8eef, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0x2184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eef), 0x21);
        // CB A6 02DD
        gbc.setState(0x63c3, 0x66ad, 0xbcc0, 0xb0ea, 0x942c, 0xc096, 0x1, 0x0);
        gbc.writeMem(0x63c3, { 0xcb, 0xa6 });
        gbc.writeMem(0xc096, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x66ad);
        EXPECT(gbc.pc(), 0x63c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc096), 0x8b);
        // CB A6 02DF
        gbc.setState(0xe7b9, 0x5dea, 0xfd20, 0x7ef, 0x71dd, 0x70c5, 0x1, 0x1);
        gbc.writeMem(0x70c5, { 0xed });
        gbc.writeMem(0xe7b9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5dea);
        EXPECT(gbc.pc(), 0xe7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b9), 0xcb);
        EXPECT(gbc.readMem(0xe7ba), 0xa6);
        // CB A6 02E1
        gbc.setState(0x2a98, 0x1c6e, 0x2c0, 0x3db8, 0x2d76, 0xec36, 0x0, 0x0);
        gbc.writeMem(0x2a98, { 0xcb, 0xa6 });
        gbc.writeMem(0xec36, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1c6e);
        EXPECT(gbc.pc(), 0x2a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec36), 0x68);
        // CB A6 02E2
        gbc.setState(0x9d75, 0x5d97, 0xaff0, 0x65a8, 0xe1e2, 0xde13, 0x0, 0x0);
        gbc.writeMem(0x9d75, { 0xcb, 0xa6 });
        gbc.writeMem(0xde13, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5d97);
        EXPECT(gbc.pc(), 0x9d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d75), 0xcb);
        EXPECT(gbc.readMem(0x9d76), 0xa6);
        EXPECT(gbc.readMem(0xde13), 0xa5);
        // CB A6 02E3
        gbc.setState(0x5a80, 0x6deb, 0x81f0, 0xd3cd, 0x6e38, 0xfedb, 0x1, 0x0);
        gbc.writeMem(0x5a80, { 0xcb, 0xa6 });
        gbc.writeMem(0xfedb, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6deb);
        EXPECT(gbc.pc(), 0x5a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfedb), 0x21);
        // CB A6 02E4
        gbc.setState(0x9e65, 0x17fb, 0x7ff0, 0xf930, 0x45eb, 0xb57f, 0x0, 0x0);
        gbc.writeMem(0x9e65, { 0xcb, 0xa6 });
        gbc.writeMem(0xb57f, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x17fb);
        EXPECT(gbc.pc(), 0x9e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e65), 0xcb);
        EXPECT(gbc.readMem(0x9e66), 0xa6);
        EXPECT(gbc.readMem(0xb57f), 0xc6);
        // CB A6 02E5
        gbc.setState(0x1c0e, 0xc2f3, 0x6ec0, 0x535f, 0xb16a, 0xad65, 0x1, 0x1);
        gbc.writeMem(0x1c0e, { 0xcb, 0xa6 });
        gbc.writeMem(0xad65, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc2f3);
        EXPECT(gbc.pc(), 0x1c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad65), 0xa4);
        // CB A6 02E7
        gbc.setState(0x2c5f, 0xb57e, 0x4f60, 0x8ef6, 0x993a, 0xa0b8, 0x1, 0x1);
        gbc.writeMem(0x2c5f, { 0xcb, 0xa6 });
        gbc.writeMem(0xa0b8, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb57e);
        EXPECT(gbc.pc(), 0x2c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b8), 0xe3);
        // CB A6 02E9
        gbc.setState(0x325e, 0x53e1, 0xdf70, 0xcf30, 0x6d1, 0x934f, 0x0, 0x1);
        gbc.writeMem(0x325e, { 0xcb, 0xa6 });
        gbc.writeMem(0x934f, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x53e1);
        EXPECT(gbc.pc(), 0x3260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x934f), 0x9);
        // CB A6 02EC
        gbc.setState(0x7a78, 0x3cd, 0x4d30, 0x638a, 0x2ff2, 0xa5f4, 0x1, 0x1);
        gbc.writeMem(0x7a78, { 0xcb, 0xa6 });
        gbc.writeMem(0xa5f4, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3cd);
        EXPECT(gbc.pc(), 0x7a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f4), 0x63);
        // CB A6 02ED
        gbc.setState(0xbff4, 0xaa45, 0xa020, 0x6e55, 0x12f, 0x7d1e, 0x0, 0x0);
        gbc.writeMem(0x7d1e, { 0x67 });
        gbc.writeMem(0xbff4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xaa45);
        EXPECT(gbc.pc(), 0xbff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff4), 0xcb);
        EXPECT(gbc.readMem(0xbff5), 0xa6);
        // CB A6 02EE
        gbc.setState(0x851, 0xb0e2, 0x8e10, 0xf86, 0xbf5, 0xbece, 0x1, 0x1);
        gbc.writeMem(0x851, { 0xcb, 0xa6 });
        gbc.writeMem(0xbece, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb0e2);
        EXPECT(gbc.pc(), 0x853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbece), 0x4);
        // CB A6 02EF
        gbc.setState(0xed98, 0x1257, 0xedb0, 0x4aac, 0x3f56, 0xd4a0, 0x1, 0x1);
        gbc.writeMem(0xd4a0, { 0x7a });
        gbc.writeMem(0xed98, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1257);
        EXPECT(gbc.pc(), 0xed9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4a0), 0x6a);
        EXPECT(gbc.readMem(0xed98), 0xcb);
        EXPECT(gbc.readMem(0xed99), 0xa6);
        // CB A6 02F0
        gbc.setState(0xe05c, 0x1193, 0x740, 0x24d1, 0x222, 0x1445, 0x0, 0x1);
        gbc.writeMem(0x1445, { 0xb });
        gbc.writeMem(0xe05c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1193);
        EXPECT(gbc.pc(), 0xe05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe05c), 0xcb);
        EXPECT(gbc.readMem(0xe05d), 0xa6);
        // CB A6 02F1
        gbc.setState(0x2710, 0x71c8, 0x5bd0, 0x25db, 0x2cba, 0xa52e, 0x1, 0x0);
        gbc.writeMem(0x2710, { 0xcb, 0xa6 });
        gbc.writeMem(0xa52e, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x71c8);
        EXPECT(gbc.pc(), 0x2712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52e), 0x6a);
        // CB A6 02F2
        gbc.setState(0xa59d, 0xdda8, 0xac40, 0x7f54, 0x4239, 0x9ec2, 0x0, 0x1);
        gbc.writeMem(0x9ec2, { 0xda });
        gbc.writeMem(0xa59d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdda8);
        EXPECT(gbc.pc(), 0xa59f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec2), 0xca);
        EXPECT(gbc.readMem(0xa59d), 0xcb);
        EXPECT(gbc.readMem(0xa59e), 0xa6);
        // CB A6 02F3
        gbc.setState(0xee84, 0x860d, 0x1f00, 0xe4d5, 0x2fe9, 0x8595, 0x0, 0x1);
        gbc.writeMem(0x8595, { 0xab });
        gbc.writeMem(0xee84, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x860d);
        EXPECT(gbc.pc(), 0xee86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8595), 0xab);
        EXPECT(gbc.readMem(0xee84), 0xcb);
        EXPECT(gbc.readMem(0xee85), 0xa6);
        // CB A6 02F4
        gbc.setState(0x63c9, 0x12e6, 0x2020, 0x531f, 0x1fa8, 0xd0eb, 0x0, 0x1);
        gbc.writeMem(0x63c9, { 0xcb, 0xa6 });
        gbc.writeMem(0xd0eb, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x12e6);
        EXPECT(gbc.pc(), 0x63cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0eb), 0xeb);
        // CB A6 02F5
        gbc.setState(0x484f, 0x2e6c, 0x3400, 0x71be, 0x480c, 0x66f1, 0x0, 0x0);
        gbc.writeMem(0x484f, { 0xcb, 0xa6 });
        gbc.writeMem(0x66f1, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2e6c);
        EXPECT(gbc.pc(), 0x4851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 02F7
        gbc.setState(0x2dc2, 0x4cdd, 0x65e0, 0xcfa, 0xe8e6, 0xaf62, 0x1, 0x0);
        gbc.writeMem(0x2dc2, { 0xcb, 0xa6 });
        gbc.writeMem(0xaf62, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4cdd);
        EXPECT(gbc.pc(), 0x2dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf62), 0xef);
        // CB A6 02F8
        gbc.setState(0x8b3a, 0xe6d9, 0x6d80, 0xae29, 0x3a8d, 0x4442, 0x1, 0x1);
        gbc.writeMem(0x4442, { 0x29 });
        gbc.writeMem(0x8b3a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe6d9);
        EXPECT(gbc.pc(), 0x8b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3a), 0xcb);
        EXPECT(gbc.readMem(0x8b3b), 0xa6);
        // CB A6 02F9
        gbc.setState(0x569c, 0x4f3a, 0xfc30, 0xada2, 0x4fc8, 0xef71, 0x1, 0x1);
        gbc.writeMem(0x569c, { 0xcb, 0xa6 });
        gbc.writeMem(0xef71, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4f3a);
        EXPECT(gbc.pc(), 0x569e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef71), 0xc6);
        // CB A6 02FA
        gbc.setState(0xe834, 0xcdf6, 0x16e0, 0xa858, 0x290f, 0xe79, 0x0, 0x0);
        gbc.writeMem(0xe79, { 0x9 });
        gbc.writeMem(0xe834, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcdf6);
        EXPECT(gbc.pc(), 0xe836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe834), 0xcb);
        EXPECT(gbc.readMem(0xe835), 0xa6);
        // CB A6 02FB
        gbc.setState(0x82c7, 0xe9fc, 0x8440, 0x9b8c, 0xeef5, 0x9db7, 0x0, 0x1);
        gbc.writeMem(0x82c7, { 0xcb, 0xa6 });
        gbc.writeMem(0x9db7, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe9fc);
        EXPECT(gbc.pc(), 0x82c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c7), 0xcb);
        EXPECT(gbc.readMem(0x82c8), 0xa6);
        EXPECT(gbc.readMem(0x9db7), 0x63);
        // CB A6 02FC
        gbc.setState(0x9c6a, 0x9893, 0xfa80, 0x3786, 0xf35d, 0xd762, 0x1, 0x0);
        gbc.writeMem(0x9c6a, { 0xcb, 0xa6 });
        gbc.writeMem(0xd762, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9893);
        EXPECT(gbc.pc(), 0x9c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c6a), 0xcb);
        EXPECT(gbc.readMem(0x9c6b), 0xa6);
        EXPECT(gbc.readMem(0xd762), 0xa);
        // CB A6 02FD
        gbc.setState(0xdfcd, 0x1c71, 0x2050, 0x5f1f, 0xd6a6, 0x6ae6, 0x1, 0x1);
        gbc.writeMem(0x6ae6, { 0xa });
        gbc.writeMem(0xdfcd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1c71);
        EXPECT(gbc.pc(), 0xdfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfcd), 0xcb);
        EXPECT(gbc.readMem(0xdfce), 0xa6);
        // CB A6 02FE
        gbc.setState(0x5b5, 0x9b00, 0x45b0, 0x6ea1, 0x8959, 0xd9f4, 0x1, 0x0);
        gbc.writeMem(0x5b5, { 0xcb, 0xa6 });
        gbc.writeMem(0xd9f4, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9b00);
        EXPECT(gbc.pc(), 0x5b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9f4), 0xe4);
        // CB A6 02FF
        gbc.setState(0xae47, 0x5ae9, 0x9360, 0xdeca, 0x6ee8, 0x6620, 0x1, 0x0);
        gbc.writeMem(0x6620, { 0x6d });
        gbc.writeMem(0xae47, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5ae9);
        EXPECT(gbc.pc(), 0xae49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae47), 0xcb);
        EXPECT(gbc.readMem(0xae48), 0xa6);
        // CB A6 0300
        gbc.setState(0xef65, 0x228d, 0x7910, 0xcd70, 0xf974, 0xc740, 0x0, 0x1);
        gbc.writeMem(0xc740, { 0xca });
        gbc.writeMem(0xef65, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x228d);
        EXPECT(gbc.pc(), 0xef67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc740), 0xca);
        EXPECT(gbc.readMem(0xef65), 0xcb);
        EXPECT(gbc.readMem(0xef66), 0xa6);
        // CB A6 0301
        gbc.setState(0xc884, 0xa9d3, 0xe8b0, 0x173a, 0x6c1f, 0x651a, 0x1, 0x0);
        gbc.writeMem(0x651a, { 0xe0 });
        gbc.writeMem(0xc884, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa9d3);
        EXPECT(gbc.pc(), 0xc886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc884), 0xcb);
        EXPECT(gbc.readMem(0xc885), 0xa6);
        // CB A6 0303
        gbc.setState(0xe33f, 0x7c40, 0x2480, 0x5ef, 0x9571, 0xc756, 0x1, 0x1);
        gbc.writeMem(0xc756, { 0x96 });
        gbc.writeMem(0xe33f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7c40);
        EXPECT(gbc.pc(), 0xe341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc756), 0x86);
        EXPECT(gbc.readMem(0xe33f), 0xcb);
        EXPECT(gbc.readMem(0xe340), 0xa6);
        // CB A6 0305
        gbc.setState(0xcb96, 0xe47e, 0xa480, 0x5255, 0x46d, 0x88b4, 0x1, 0x0);
        gbc.writeMem(0x88b4, { 0x74 });
        gbc.writeMem(0xcb96, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe47e);
        EXPECT(gbc.pc(), 0xcb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b4), 0x64);
        EXPECT(gbc.readMem(0xcb96), 0xcb);
        EXPECT(gbc.readMem(0xcb97), 0xa6);
        // CB A6 0307
        gbc.setState(0x2f, 0xa61b, 0xb050, 0xc079, 0xc035, 0x274d, 0x0, 0x0);
        gbc.writeMem(0x2f, { 0xcb, 0xa6 });
        gbc.writeMem(0x274d, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa61b);
        EXPECT(gbc.pc(), 0x31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0308
        gbc.setState(0xbe13, 0x33fe, 0xa240, 0xdc10, 0xf46, 0x77bb, 0x0, 0x1);
        gbc.writeMem(0x77bb, { 0x49 });
        gbc.writeMem(0xbe13, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x33fe);
        EXPECT(gbc.pc(), 0xbe15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe13), 0xcb);
        EXPECT(gbc.readMem(0xbe14), 0xa6);
        // CB A6 0309
        gbc.setState(0x64b2, 0xe644, 0x4aa0, 0x7ba0, 0x3047, 0x247b, 0x0, 0x0);
        gbc.writeMem(0x247b, { 0x25 });
        gbc.writeMem(0x64b2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe644);
        EXPECT(gbc.pc(), 0x64b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 030A
        gbc.setState(0x3d31, 0x7f5a, 0xc680, 0x1f3f, 0x4379, 0x8226, 0x0, 0x0);
        gbc.writeMem(0x3d31, { 0xcb, 0xa6 });
        gbc.writeMem(0x8226, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7f5a);
        EXPECT(gbc.pc(), 0x3d33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8226), 0xa1);
        // CB A6 030B
        gbc.setState(0xb28a, 0x1615, 0x9b40, 0xb64b, 0xa74c, 0xc78a, 0x1, 0x1);
        gbc.writeMem(0xb28a, { 0xcb, 0xa6 });
        gbc.writeMem(0xc78a, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1615);
        EXPECT(gbc.pc(), 0xb28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28a), 0xcb);
        EXPECT(gbc.readMem(0xb28b), 0xa6);
        EXPECT(gbc.readMem(0xc78a), 0xef);
        // CB A6 030C
        gbc.setState(0xce80, 0x6e21, 0xef40, 0xd524, 0xa987, 0x9145, 0x1, 0x0);
        gbc.writeMem(0x9145, { 0xfd });
        gbc.writeMem(0xce80, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6e21);
        EXPECT(gbc.pc(), 0xce82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9145), 0xed);
        EXPECT(gbc.readMem(0xce80), 0xcb);
        EXPECT(gbc.readMem(0xce81), 0xa6);
        // CB A6 030D
        gbc.setState(0x4104, 0x358c, 0x9a00, 0x6504, 0x34e1, 0xeaba, 0x1, 0x1);
        gbc.writeMem(0x4104, { 0xcb, 0xa6 });
        gbc.writeMem(0xeaba, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x358c);
        EXPECT(gbc.pc(), 0x4106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaba), 0x7);
        // CB A6 030E
        gbc.setState(0xd9d3, 0xdcb4, 0xf940, 0x4c6b, 0xb023, 0x11af, 0x1, 0x1);
        gbc.writeMem(0x11af, { 0xc4 });
        gbc.writeMem(0xd9d3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdcb4);
        EXPECT(gbc.pc(), 0xd9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d3), 0xcb);
        EXPECT(gbc.readMem(0xd9d4), 0xa6);
        // CB A6 030F
        gbc.setState(0x5652, 0x15a7, 0x4aa0, 0x202, 0x2838, 0x3046, 0x1, 0x0);
        gbc.writeMem(0x3046, { 0x28 });
        gbc.writeMem(0x5652, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x15a7);
        EXPECT(gbc.pc(), 0x5654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0310
        gbc.setState(0x396a, 0xee27, 0xb850, 0x2b1, 0xb89c, 0x4295, 0x0, 0x1);
        gbc.writeMem(0x396a, { 0xcb, 0xa6 });
        gbc.writeMem(0x4295, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xee27);
        EXPECT(gbc.pc(), 0x396c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0311
        gbc.setState(0x21af, 0x3c27, 0xc700, 0x61b3, 0x5714, 0xd17f, 0x1, 0x0);
        gbc.writeMem(0x21af, { 0xcb, 0xa6 });
        gbc.writeMem(0xd17f, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3c27);
        EXPECT(gbc.pc(), 0x21b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17f), 0x8a);
        // CB A6 0317
        gbc.setState(0x43a9, 0xee5e, 0xa40, 0x2ce7, 0x2897, 0x49f9, 0x0, 0x0);
        gbc.writeMem(0x43a9, { 0xcb, 0xa6 });
        gbc.writeMem(0x49f9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xee5e);
        EXPECT(gbc.pc(), 0x43ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0318
        gbc.setState(0x7431, 0x509d, 0x4f10, 0x4049, 0x9e71, 0xd25f, 0x1, 0x0);
        gbc.writeMem(0x7431, { 0xcb, 0xa6 });
        gbc.writeMem(0xd25f, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x509d);
        EXPECT(gbc.pc(), 0x7433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd25f), 0x26);
        // CB A6 0319
        gbc.setState(0x312, 0x860d, 0x3af0, 0x1cbb, 0x6f41, 0xe211, 0x1, 0x0);
        gbc.writeMem(0x312, { 0xcb, 0xa6 });
        gbc.writeMem(0xe211, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x860d);
        EXPECT(gbc.pc(), 0x314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe211), 0xb);
        // CB A6 031A
        gbc.setState(0x5c75, 0x7753, 0x9940, 0xe3e5, 0xe6eb, 0x4883, 0x0, 0x0);
        gbc.writeMem(0x4883, { 0x7 });
        gbc.writeMem(0x5c75, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7753);
        EXPECT(gbc.pc(), 0x5c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 031C
        gbc.setState(0x52ea, 0x6def, 0x97f0, 0x8273, 0xf2d6, 0xb665, 0x0, 0x0);
        gbc.writeMem(0x52ea, { 0xcb, 0xa6 });
        gbc.writeMem(0xb665, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6def);
        EXPECT(gbc.pc(), 0x52ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb665), 0x8a);
        // CB A6 031D
        gbc.setState(0xa1cd, 0x8cad, 0x44c0, 0x4881, 0xc305, 0x85cc, 0x0, 0x1);
        gbc.writeMem(0x85cc, { 0x27 });
        gbc.writeMem(0xa1cd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8cad);
        EXPECT(gbc.pc(), 0xa1cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85cc), 0x27);
        EXPECT(gbc.readMem(0xa1cd), 0xcb);
        EXPECT(gbc.readMem(0xa1ce), 0xa6);
        // CB A6 031E
        gbc.setState(0x9ccf, 0xcf89, 0x36f0, 0x1483, 0x496, 0xcf71, 0x1, 0x1);
        gbc.writeMem(0x9ccf, { 0xcb, 0xa6 });
        gbc.writeMem(0xcf71, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xcf89);
        EXPECT(gbc.pc(), 0x9cd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccf), 0xcb);
        EXPECT(gbc.readMem(0x9cd0), 0xa6);
        EXPECT(gbc.readMem(0xcf71), 0xa8);
        // CB A6 031F
        gbc.setState(0x2667, 0x6647, 0x760, 0x3215, 0x4208, 0x1aa5, 0x0, 0x1);
        gbc.writeMem(0x1aa5, { 0xc9 });
        gbc.writeMem(0x2667, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6647);
        EXPECT(gbc.pc(), 0x2669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0320
        gbc.setState(0xe63, 0x4b5c, 0x5600, 0x4abc, 0x2e5b, 0x51dd, 0x0, 0x0);
        gbc.writeMem(0xe63, { 0xcb, 0xa6 });
        gbc.writeMem(0x51dd, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4b5c);
        EXPECT(gbc.pc(), 0xe65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0322
        gbc.setState(0xe12f, 0xf2b7, 0x3170, 0x4fa5, 0x6e65, 0xfa6f, 0x0, 0x0);
        gbc.writeMem(0xe12f, { 0xcb, 0xa6 });
        gbc.writeMem(0xfa6f, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf2b7);
        EXPECT(gbc.pc(), 0xe131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe12f), 0xcb);
        EXPECT(gbc.readMem(0xe130), 0xa6);
        EXPECT(gbc.readMem(0xfa6f), 0xea);
        // CB A6 0323
        gbc.setState(0x49f1, 0x26ef, 0x9080, 0xc8ef, 0x8cbe, 0xe0ed, 0x0, 0x0);
        gbc.writeMem(0x49f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xe0ed, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x26ef);
        EXPECT(gbc.pc(), 0x49f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ed), 0x6d);
        // CB A6 0324
        gbc.setState(0xe2b3, 0xcbef, 0x9de0, 0xbc95, 0x4f3e, 0x4adb, 0x0, 0x1);
        gbc.writeMem(0x4adb, { 0xe0 });
        gbc.writeMem(0xe2b3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcbef);
        EXPECT(gbc.pc(), 0xe2b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b3), 0xcb);
        EXPECT(gbc.readMem(0xe2b4), 0xa6);
        // CB A6 0325
        gbc.setState(0x6142, 0xa59, 0x980, 0x77e6, 0x5e2d, 0x3742, 0x0, 0x1);
        gbc.writeMem(0x3742, { 0x23 });
        gbc.writeMem(0x6142, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa59);
        EXPECT(gbc.pc(), 0x6144);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0327
        gbc.setState(0x425b, 0xe2ec, 0xf0c0, 0x265a, 0xb5b, 0x2aed, 0x0, 0x0);
        gbc.writeMem(0x2aed, { 0x26 });
        gbc.writeMem(0x425b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe2ec);
        EXPECT(gbc.pc(), 0x425d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0328
        gbc.setState(0x3b7f, 0x4aae, 0xdd00, 0xc0ae, 0xf821, 0x934d, 0x1, 0x0);
        gbc.writeMem(0x3b7f, { 0xcb, 0xa6 });
        gbc.writeMem(0x934d, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4aae);
        EXPECT(gbc.pc(), 0x3b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x934d), 0x9);
        // CB A6 0329
        gbc.setState(0x6159, 0xd8bd, 0x5900, 0x6004, 0x92f9, 0xd6e8, 0x0, 0x0);
        gbc.writeMem(0x6159, { 0xcb, 0xa6 });
        gbc.writeMem(0xd6e8, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd8bd);
        EXPECT(gbc.pc(), 0x615b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e8), 0xea);
        // CB A6 032A
        gbc.setState(0x6dce, 0x38d8, 0x36c0, 0xe320, 0x4dd1, 0x42d1, 0x1, 0x0);
        gbc.writeMem(0x42d1, { 0x28 });
        gbc.writeMem(0x6dce, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x38d8);
        EXPECT(gbc.pc(), 0x6dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 032B
        gbc.setState(0xceac, 0x1232, 0xac0, 0x36e2, 0xd26, 0x9e99, 0x1, 0x1);
        gbc.writeMem(0x9e99, { 0x39 });
        gbc.writeMem(0xceac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1232);
        EXPECT(gbc.pc(), 0xceae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e99), 0x29);
        EXPECT(gbc.readMem(0xceac), 0xcb);
        EXPECT(gbc.readMem(0xcead), 0xa6);
        // CB A6 032F
        gbc.setState(0x22d, 0x9e48, 0x2830, 0xf13e, 0x2e10, 0x9dc2, 0x0, 0x1);
        gbc.writeMem(0x22d, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dc2, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9e48);
        EXPECT(gbc.pc(), 0x22f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc2), 0x5);
        // CB A6 0330
        gbc.setState(0x8ff0, 0xd06b, 0x7f50, 0x4002, 0xfb67, 0x8d5c, 0x1, 0x0);
        gbc.writeMem(0x8d5c, { 0xac });
        gbc.writeMem(0x8ff0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd06b);
        EXPECT(gbc.pc(), 0x8ff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5c), 0xac);
        EXPECT(gbc.readMem(0x8ff0), 0xcb);
        EXPECT(gbc.readMem(0x8ff1), 0xa6);
        // CB A6 0331
        gbc.setState(0x358, 0x6be1, 0xcb40, 0xea1d, 0x28db, 0x866f, 0x0, 0x0);
        gbc.writeMem(0x358, { 0xcb, 0xa6 });
        gbc.writeMem(0x866f, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6be1);
        EXPECT(gbc.pc(), 0x35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866f), 0x8c);
        // CB A6 0332
        gbc.setState(0xd294, 0x3ccf, 0x6040, 0x9c54, 0x8020, 0xbab6, 0x0, 0x0);
        gbc.writeMem(0xbab6, { 0x6a });
        gbc.writeMem(0xd294, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3ccf);
        EXPECT(gbc.pc(), 0xd296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab6), 0x6a);
        EXPECT(gbc.readMem(0xd294), 0xcb);
        EXPECT(gbc.readMem(0xd295), 0xa6);
        // CB A6 0333
        gbc.setState(0x31c2, 0x5a06, 0x8610, 0x638d, 0x122, 0xebfa, 0x0, 0x1);
        gbc.writeMem(0x31c2, { 0xcb, 0xa6 });
        gbc.writeMem(0xebfa, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5a06);
        EXPECT(gbc.pc(), 0x31c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebfa), 0x23);
        // CB A6 0334
        gbc.setState(0x139a, 0xea0f, 0x7b60, 0xf853, 0x6444, 0xe8d9, 0x1, 0x1);
        gbc.writeMem(0x139a, { 0xcb, 0xa6 });
        gbc.writeMem(0xe8d9, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xea0f);
        EXPECT(gbc.pc(), 0x139c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d9), 0x64);
        // CB A6 0335
        gbc.setState(0x9478, 0x7d5d, 0xdfe0, 0x2cea, 0xf068, 0x4b5a, 0x0, 0x1);
        gbc.writeMem(0x4b5a, { 0x8 });
        gbc.writeMem(0x9478, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7d5d);
        EXPECT(gbc.pc(), 0x947a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9478), 0xcb);
        EXPECT(gbc.readMem(0x9479), 0xa6);
        // CB A6 0337
        gbc.setState(0xa070, 0x85e5, 0xb000, 0xa1d9, 0xb30f, 0xae59, 0x1, 0x1);
        gbc.writeMem(0xa070, { 0xcb, 0xa6 });
        gbc.writeMem(0xae59, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0xa072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa070), 0xcb);
        EXPECT(gbc.readMem(0xa071), 0xa6);
        EXPECT(gbc.readMem(0xae59), 0xe7);
        // CB A6 0338
        gbc.setState(0x3da5, 0xb487, 0x5410, 0x520e, 0x3c0, 0x8859, 0x1, 0x0);
        gbc.writeMem(0x3da5, { 0xcb, 0xa6 });
        gbc.writeMem(0x8859, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb487);
        EXPECT(gbc.pc(), 0x3da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8859), 0xaa);
        // CB A6 0339
        gbc.setState(0x627c, 0x1d6e, 0xd560, 0xe1f0, 0x1f1a, 0x1cf9, 0x0, 0x0);
        gbc.writeMem(0x1cf9, { 0xf });
        gbc.writeMem(0x627c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1d6e);
        EXPECT(gbc.pc(), 0x627e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 033A
        gbc.setState(0xba8c, 0xc3cc, 0xdf70, 0xa40f, 0xd34a, 0x5599, 0x1, 0x0);
        gbc.writeMem(0x5599, { 0xae });
        gbc.writeMem(0xba8c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc3cc);
        EXPECT(gbc.pc(), 0xba8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba8c), 0xcb);
        EXPECT(gbc.readMem(0xba8d), 0xa6);
        // CB A6 033B
        gbc.setState(0x73d3, 0xda6d, 0x760, 0x4aa8, 0x3aa0, 0xcb4f, 0x1, 0x1);
        gbc.writeMem(0x73d3, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb4f, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xda6d);
        EXPECT(gbc.pc(), 0x73d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4f), 0x23);
        // CB A6 033C
        gbc.setState(0x4b3d, 0x4ac7, 0x81f0, 0x1cdd, 0x5e8a, 0x2dc, 0x1, 0x0);
        gbc.writeMem(0x2dc, { 0x4b });
        gbc.writeMem(0x4b3d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4ac7);
        EXPECT(gbc.pc(), 0x4b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 033D
        gbc.setState(0xab, 0x2fad, 0xcfe0, 0xeb92, 0x269, 0xdcff, 0x1, 0x1);
        gbc.writeMem(0xab, { 0xcb, 0xa6 });
        gbc.writeMem(0xdcff, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2fad);
        EXPECT(gbc.pc(), 0xad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcff), 0xf);
        // CB A6 033E
        gbc.setState(0x7f41, 0x1a1d, 0x99d0, 0xc0ae, 0xc7, 0xd51b, 0x0, 0x0);
        gbc.writeMem(0x7f41, { 0xcb, 0xa6 });
        gbc.writeMem(0xd51b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1a1d);
        EXPECT(gbc.pc(), 0x7f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51b), 0xa2);
        // CB A6 033F
        gbc.setState(0x8192, 0x7826, 0xb580, 0x3504, 0x5bbc, 0x7e54, 0x1, 0x0);
        gbc.writeMem(0x7e54, { 0xec });
        gbc.writeMem(0x8192, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7826);
        EXPECT(gbc.pc(), 0x8194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8192), 0xcb);
        EXPECT(gbc.readMem(0x8193), 0xa6);
        // CB A6 0342
        gbc.setState(0xcfd5, 0xfc5, 0x2730, 0xe097, 0x1f01, 0xa425, 0x1, 0x0);
        gbc.writeMem(0xa425, { 0xa7 });
        gbc.writeMem(0xcfd5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfc5);
        EXPECT(gbc.pc(), 0xcfd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa425), 0xa7);
        EXPECT(gbc.readMem(0xcfd5), 0xcb);
        EXPECT(gbc.readMem(0xcfd6), 0xa6);
        // CB A6 0344
        gbc.setState(0xbb47, 0x88a3, 0x2080, 0x105b, 0x6b00, 0xcd73, 0x0, 0x0);
        gbc.writeMem(0xbb47, { 0xcb, 0xa6 });
        gbc.writeMem(0xcd73, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x88a3);
        EXPECT(gbc.pc(), 0xbb49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb47), 0xcb);
        EXPECT(gbc.readMem(0xbb48), 0xa6);
        EXPECT(gbc.readMem(0xcd73), 0x88);
        // CB A6 0345
        gbc.setState(0xcde6, 0xf78d, 0x1ea0, 0x9ef4, 0x77b8, 0xb2cb, 0x1, 0x1);
        gbc.writeMem(0xb2cb, { 0x24 });
        gbc.writeMem(0xcde6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf78d);
        EXPECT(gbc.pc(), 0xcde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cb), 0x24);
        EXPECT(gbc.readMem(0xcde6), 0xcb);
        EXPECT(gbc.readMem(0xcde7), 0xa6);
        // CB A6 0346
        gbc.setState(0xe9cd, 0xd530, 0x7660, 0x6931, 0x8542, 0x49de, 0x1, 0x1);
        gbc.writeMem(0x49de, { 0xc0 });
        gbc.writeMem(0xe9cd, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd530);
        EXPECT(gbc.pc(), 0xe9cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9cd), 0xcb);
        EXPECT(gbc.readMem(0xe9ce), 0xa6);
        // CB A6 0348
        gbc.setState(0x35ac, 0xa308, 0x7410, 0x66fd, 0xb2d0, 0x737, 0x1, 0x0);
        gbc.writeMem(0x737, { 0x6 });
        gbc.writeMem(0x35ac, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa308);
        EXPECT(gbc.pc(), 0x35ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0349
        gbc.setState(0x6c31, 0x961d, 0xba40, 0x7bd2, 0x85d0, 0xdea2, 0x0, 0x0);
        gbc.writeMem(0x6c31, { 0xcb, 0xa6 });
        gbc.writeMem(0xdea2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x961d);
        EXPECT(gbc.pc(), 0x6c33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea2), 0xce);
        // CB A6 034C
        gbc.setState(0xd207, 0x6e17, 0xa550, 0x4739, 0xb052, 0x7485, 0x0, 0x0);
        gbc.writeMem(0x7485, { 0x28 });
        gbc.writeMem(0xd207, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6e17);
        EXPECT(gbc.pc(), 0xd209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd207), 0xcb);
        EXPECT(gbc.readMem(0xd208), 0xa6);
        // CB A6 0350
        gbc.setState(0xb5bb, 0x4c37, 0x22b0, 0x57bf, 0x8917, 0xf399, 0x0, 0x1);
        gbc.writeMem(0xb5bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xf399, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4c37);
        EXPECT(gbc.pc(), 0xb5bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5bb), 0xcb);
        EXPECT(gbc.readMem(0xb5bc), 0xa6);
        EXPECT(gbc.readMem(0xf399), 0xe2);
        // CB A6 0351
        gbc.setState(0xac46, 0x2b4a, 0x9ed0, 0xb2a0, 0xc3e7, 0xc789, 0x1, 0x1);
        gbc.writeMem(0xac46, { 0xcb, 0xa6 });
        gbc.writeMem(0xc789, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2b4a);
        EXPECT(gbc.pc(), 0xac48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac46), 0xcb);
        EXPECT(gbc.readMem(0xac47), 0xa6);
        EXPECT(gbc.readMem(0xc789), 0xe0);
        // CB A6 0353
        gbc.setState(0xadd5, 0x7aad, 0x95a0, 0x72f8, 0xffd5, 0x38da, 0x1, 0x1);
        gbc.writeMem(0x38da, { 0xe2 });
        gbc.writeMem(0xadd5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7aad);
        EXPECT(gbc.pc(), 0xadd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd5), 0xcb);
        EXPECT(gbc.readMem(0xadd6), 0xa6);
        // CB A6 0354
        gbc.setState(0xd55e, 0x7c1e, 0x68a0, 0xdaea, 0x1f18, 0xd6f2, 0x1, 0x1);
        gbc.writeMem(0xd55e, { 0xcb, 0xa6 });
        gbc.writeMem(0xd6f2, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7c1e);
        EXPECT(gbc.pc(), 0xd560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55e), 0xcb);
        EXPECT(gbc.readMem(0xd55f), 0xa6);
        EXPECT(gbc.readMem(0xd6f2), 0x47);
        // CB A6 0355
        gbc.setState(0x82ab, 0xe657, 0xe2e0, 0x4907, 0xde93, 0x9892, 0x1, 0x1);
        gbc.writeMem(0x82ab, { 0xcb, 0xa6 });
        gbc.writeMem(0x9892, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe657);
        EXPECT(gbc.pc(), 0x82ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ab), 0xcb);
        EXPECT(gbc.readMem(0x82ac), 0xa6);
        EXPECT(gbc.readMem(0x9892), 0x81);
        // CB A6 0356
        gbc.setState(0x65ab, 0x63e3, 0x17e0, 0xb155, 0x120f, 0xdef1, 0x0, 0x0);
        gbc.writeMem(0x65ab, { 0xcb, 0xa6 });
        gbc.writeMem(0xdef1, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x63e3);
        EXPECT(gbc.pc(), 0x65ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef1), 0xe7);
        // CB A6 0357
        gbc.setState(0xd5ad, 0x43bf, 0xc200, 0x4614, 0x5b1e, 0x5d4b, 0x0, 0x1);
        gbc.writeMem(0x5d4b, { 0xb });
        gbc.writeMem(0xd5ad, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x43bf);
        EXPECT(gbc.pc(), 0xd5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ad), 0xcb);
        EXPECT(gbc.readMem(0xd5ae), 0xa6);
        // CB A6 0358
        gbc.setState(0x5804, 0x7bc5, 0x110, 0x7092, 0x9e01, 0x8f9d, 0x1, 0x0);
        gbc.writeMem(0x5804, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f9d, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7bc5);
        EXPECT(gbc.pc(), 0x5806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f9d), 0x86);
        // CB A6 0359
        gbc.setState(0xb228, 0x7075, 0xe870, 0x32ce, 0x1214, 0x2e73, 0x1, 0x0);
        gbc.writeMem(0x2e73, { 0x45 });
        gbc.writeMem(0xb228, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7075);
        EXPECT(gbc.pc(), 0xb22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb228), 0xcb);
        EXPECT(gbc.readMem(0xb229), 0xa6);
        // CB A6 035A
        gbc.setState(0xaf80, 0x6aa2, 0x8bd0, 0x9a7b, 0xbe2b, 0x8432, 0x1, 0x1);
        gbc.writeMem(0x8432, { 0x12 });
        gbc.writeMem(0xaf80, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6aa2);
        EXPECT(gbc.pc(), 0xaf82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8432), 0x2);
        EXPECT(gbc.readMem(0xaf80), 0xcb);
        EXPECT(gbc.readMem(0xaf81), 0xa6);
        // CB A6 035B
        gbc.setState(0x4a0d, 0x2ec8, 0x2a0, 0xf21b, 0xc735, 0xcc1c, 0x1, 0x1);
        gbc.writeMem(0x4a0d, { 0xcb, 0xa6 });
        gbc.writeMem(0xcc1c, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2ec8);
        EXPECT(gbc.pc(), 0x4a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc1c), 0xcd);
        // CB A6 035C
        gbc.setState(0x59d2, 0x4cd8, 0x7af0, 0xc847, 0xe436, 0xeeee, 0x1, 0x1);
        gbc.writeMem(0x59d2, { 0xcb, 0xa6 });
        gbc.writeMem(0xeeee, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4cd8);
        EXPECT(gbc.pc(), 0x59d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeee), 0x2b);
        // CB A6 035D
        gbc.setState(0xb729, 0x9fc8, 0xfae0, 0x7e6d, 0xe732, 0xf328, 0x1, 0x1);
        gbc.writeMem(0xb729, { 0xcb, 0xa6 });
        gbc.writeMem(0xf328, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9fc8);
        EXPECT(gbc.pc(), 0xb72b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb729), 0xcb);
        EXPECT(gbc.readMem(0xb72a), 0xa6);
        EXPECT(gbc.readMem(0xf328), 0xeb);
        // CB A6 035E
        gbc.setState(0x41c3, 0xba6d, 0x8ed0, 0x4087, 0x5f93, 0x1b54, 0x1, 0x0);
        gbc.writeMem(0x1b54, { 0x43 });
        gbc.writeMem(0x41c3, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xba6d);
        EXPECT(gbc.pc(), 0x41c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 035F
        gbc.setState(0xdc93, 0xd146, 0xc4c0, 0x51e8, 0x515a, 0xf5bf, 0x0, 0x1);
        gbc.writeMem(0xdc93, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5bf, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd146);
        EXPECT(gbc.pc(), 0xdc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc93), 0xcb);
        EXPECT(gbc.readMem(0xdc94), 0xa6);
        EXPECT(gbc.readMem(0xf5bf), 0x60);
        // CB A6 0360
        gbc.setState(0x9092, 0x888c, 0x36e0, 0x9c58, 0x8141, 0x549c, 0x0, 0x1);
        gbc.writeMem(0x549c, { 0xa6 });
        gbc.writeMem(0x9092, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x888c);
        EXPECT(gbc.pc(), 0x9094);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9092), 0xcb);
        EXPECT(gbc.readMem(0x9093), 0xa6);
        // CB A6 0361
        gbc.setState(0xd3a2, 0x448, 0xe4f0, 0x7273, 0xedfe, 0x7b4f, 0x0, 0x0);
        gbc.writeMem(0x7b4f, { 0xaa });
        gbc.writeMem(0xd3a2, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x448);
        EXPECT(gbc.pc(), 0xd3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a2), 0xcb);
        EXPECT(gbc.readMem(0xd3a3), 0xa6);
        // CB A6 0362
        gbc.setState(0x1828, 0x75c4, 0xb210, 0x94d7, 0xd818, 0x1ccb, 0x0, 0x0);
        gbc.writeMem(0x1828, { 0xcb, 0xa6 });
        gbc.writeMem(0x1ccb, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x75c4);
        EXPECT(gbc.pc(), 0x182a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0363
        gbc.setState(0x17c1, 0x46da, 0x72b0, 0x3720, 0xb9a5, 0x9c52, 0x0, 0x0);
        gbc.writeMem(0x17c1, { 0xcb, 0xa6 });
        gbc.writeMem(0x9c52, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x46da);
        EXPECT(gbc.pc(), 0x17c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c52), 0xaa);
        // CB A6 0364
        gbc.setState(0x956e, 0xb00f, 0x5110, 0x4b22, 0xd154, 0x472e, 0x0, 0x0);
        gbc.writeMem(0x472e, { 0xec });
        gbc.writeMem(0x956e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb00f);
        EXPECT(gbc.pc(), 0x9570);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x956e), 0xcb);
        EXPECT(gbc.readMem(0x956f), 0xa6);
        // CB A6 0365
        gbc.setState(0x9336, 0x68dc, 0x1880, 0xd30c, 0xf86b, 0xb244, 0x0, 0x1);
        gbc.writeMem(0x9336, { 0xcb, 0xa6 });
        gbc.writeMem(0xb244, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x68dc);
        EXPECT(gbc.pc(), 0x9338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9336), 0xcb);
        EXPECT(gbc.readMem(0x9337), 0xa6);
        EXPECT(gbc.readMem(0xb244), 0x20);
        // CB A6 0367
        gbc.setState(0xebf0, 0x2b77, 0xb750, 0xc085, 0xc364, 0xcd82, 0x0, 0x0);
        gbc.writeMem(0xcd82, { 0x3d });
        gbc.writeMem(0xebf0, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2b77);
        EXPECT(gbc.pc(), 0xebf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd82), 0x2d);
        EXPECT(gbc.readMem(0xebf0), 0xcb);
        EXPECT(gbc.readMem(0xebf1), 0xa6);
        // CB A6 0368
        gbc.setState(0x163, 0xb1fc, 0x5010, 0x643e, 0xef9c, 0x808a, 0x0, 0x1);
        gbc.writeMem(0x163, { 0xcb, 0xa6 });
        gbc.writeMem(0x808a, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb1fc);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808a), 0xaa);
        // CB A6 0369
        gbc.setState(0x1f1, 0x8c3d, 0x130, 0x22de, 0xaf81, 0xf641, 0x1, 0x1);
        gbc.writeMem(0x1f1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf641, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8c3d);
        EXPECT(gbc.pc(), 0x1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf641), 0xcb);
        // CB A6 036A
        gbc.setState(0x3465, 0xfa41, 0x4430, 0xa876, 0x7a85, 0x895f, 0x1, 0x0);
        gbc.writeMem(0x3465, { 0xcb, 0xa6 });
        gbc.writeMem(0x895f, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfa41);
        EXPECT(gbc.pc(), 0x3467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895f), 0x68);
        // CB A6 036B
        gbc.setState(0xc48d, 0x65d4, 0x9ef0, 0x4488, 0xe498, 0xefef, 0x0, 0x1);
        gbc.writeMem(0xc48d, { 0xcb, 0xa6 });
        gbc.writeMem(0xefef, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x65d4);
        EXPECT(gbc.pc(), 0xc48f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48d), 0xcb);
        EXPECT(gbc.readMem(0xc48e), 0xa6);
        EXPECT(gbc.readMem(0xefef), 0x22);
        // CB A6 036C
        gbc.setState(0xc2c4, 0x5f56, 0x3ac0, 0x1d9b, 0xa9f3, 0x170b, 0x1, 0x0);
        gbc.writeMem(0x170b, { 0xe9 });
        gbc.writeMem(0xc2c4, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5f56);
        EXPECT(gbc.pc(), 0xc2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c4), 0xcb);
        EXPECT(gbc.readMem(0xc2c5), 0xa6);
        // CB A6 036D
        gbc.setState(0x4e88, 0x9c8d, 0x7de0, 0xf40b, 0x6c45, 0x5b98, 0x1, 0x0);
        gbc.writeMem(0x4e88, { 0xcb, 0xa6 });
        gbc.writeMem(0x5b98, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9c8d);
        EXPECT(gbc.pc(), 0x4e8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 036E
        gbc.setState(0xcb5d, 0x2eb0, 0x5340, 0x8960, 0xaae9, 0xb034, 0x1, 0x0);
        gbc.writeMem(0xb034, { 0xb4 });
        gbc.writeMem(0xcb5d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2eb0);
        EXPECT(gbc.pc(), 0xcb5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb034), 0xa4);
        EXPECT(gbc.readMem(0xcb5d), 0xcb);
        EXPECT(gbc.readMem(0xcb5e), 0xa6);
        // CB A6 0370
        gbc.setState(0xa79d, 0x3ab4, 0xc570, 0x980a, 0x6e4e, 0xa676, 0x0, 0x0);
        gbc.writeMem(0xa676, { 0x40 });
        gbc.writeMem(0xa79d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3ab4);
        EXPECT(gbc.pc(), 0xa79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa676), 0x40);
        EXPECT(gbc.readMem(0xa79d), 0xcb);
        EXPECT(gbc.readMem(0xa79e), 0xa6);
        // CB A6 0371
        gbc.setState(0x560e, 0x9b4e, 0x77f0, 0xe058, 0xb270, 0x3f61, 0x0, 0x0);
        gbc.writeMem(0x3f61, { 0xe9 });
        gbc.writeMem(0x560e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9b4e);
        EXPECT(gbc.pc(), 0x5610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0372
        gbc.setState(0xe986, 0xcb05, 0xb060, 0xa5db, 0x1409, 0x8660, 0x0, 0x1);
        gbc.writeMem(0x8660, { 0xf8 });
        gbc.writeMem(0xe986, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcb05);
        EXPECT(gbc.pc(), 0xe988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8660), 0xe8);
        EXPECT(gbc.readMem(0xe986), 0xcb);
        EXPECT(gbc.readMem(0xe987), 0xa6);
        // CB A6 0373
        gbc.setState(0x213a, 0x64e7, 0x94a0, 0x2f13, 0x8a37, 0x933e, 0x0, 0x0);
        gbc.writeMem(0x213a, { 0xcb, 0xa6 });
        gbc.writeMem(0x933e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x64e7);
        EXPECT(gbc.pc(), 0x213c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x933e), 0xa4);
        // CB A6 0374
        gbc.setState(0x8947, 0xb3e3, 0xe810, 0xdefd, 0x8264, 0x6231, 0x0, 0x1);
        gbc.writeMem(0x6231, { 0xce });
        gbc.writeMem(0x8947, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb3e3);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8947), 0xcb);
        EXPECT(gbc.readMem(0x8948), 0xa6);
        // CB A6 0375
        gbc.setState(0xc812, 0x7a68, 0x3e0, 0x5471, 0x1ef6, 0x82ee, 0x0, 0x0);
        gbc.writeMem(0x82ee, { 0x5d });
        gbc.writeMem(0xc812, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7a68);
        EXPECT(gbc.pc(), 0xc814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ee), 0x4d);
        EXPECT(gbc.readMem(0xc812), 0xcb);
        EXPECT(gbc.readMem(0xc813), 0xa6);
        // CB A6 0378
        gbc.setState(0xb31, 0xbe6e, 0xc370, 0xd3dc, 0xcbe8, 0xd80c, 0x1, 0x1);
        gbc.writeMem(0xb31, { 0xcb, 0xa6 });
        gbc.writeMem(0xd80c, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbe6e);
        EXPECT(gbc.pc(), 0xb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80c), 0xa);
        // CB A6 0379
        gbc.setState(0x3f5f, 0x6ca6, 0xe8d0, 0x9f01, 0x7e69, 0x3d8f, 0x0, 0x1);
        gbc.writeMem(0x3d8f, { 0xa1 });
        gbc.writeMem(0x3f5f, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6ca6);
        EXPECT(gbc.pc(), 0x3f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 037A
        gbc.setState(0xe74b, 0x5646, 0xde70, 0x5943, 0x7a0f, 0x9cce, 0x1, 0x1);
        gbc.writeMem(0x9cce, { 0x1e });
        gbc.writeMem(0xe74b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5646);
        EXPECT(gbc.pc(), 0xe74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cce), 0xe);
        EXPECT(gbc.readMem(0xe74b), 0xcb);
        EXPECT(gbc.readMem(0xe74c), 0xa6);
        // CB A6 037B
        gbc.setState(0x752c, 0x47b6, 0xf8b0, 0xdfa2, 0x7861, 0xb939, 0x1, 0x0);
        gbc.writeMem(0x752c, { 0xcb, 0xa6 });
        gbc.writeMem(0xb939, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x47b6);
        EXPECT(gbc.pc(), 0x752e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb939), 0x6b);
        // CB A6 037D
        gbc.setState(0x3cc9, 0x43a, 0x2c70, 0xba3d, 0x54dc, 0x8340, 0x0, 0x1);
        gbc.writeMem(0x3cc9, { 0xcb, 0xa6 });
        gbc.writeMem(0x8340, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x43a);
        EXPECT(gbc.pc(), 0x3ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8340), 0xc);
        // CB A6 037F
        gbc.setState(0x1dd7, 0xfb00, 0x2ad0, 0x2c23, 0xdc32, 0xc9d1, 0x1, 0x0);
        gbc.writeMem(0x1dd7, { 0xcb, 0xa6 });
        gbc.writeMem(0xc9d1, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xfb00);
        EXPECT(gbc.pc(), 0x1dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9d1), 0x2);
        // CB A6 0380
        gbc.setState(0xd1dc, 0xb2a, 0xee40, 0xc69f, 0x9293, 0x94c7, 0x0, 0x1);
        gbc.writeMem(0x94c7, { 0x63 });
        gbc.writeMem(0xd1dc, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb2a);
        EXPECT(gbc.pc(), 0xd1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c7), 0x63);
        EXPECT(gbc.readMem(0xd1dc), 0xcb);
        EXPECT(gbc.readMem(0xd1dd), 0xa6);
        // CB A6 0382
        gbc.setState(0xe24a, 0x9ccc, 0xcb00, 0x20f2, 0xed63, 0x15cf, 0x1, 0x0);
        gbc.writeMem(0x15cf, { 0xe5 });
        gbc.writeMem(0xe24a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9ccc);
        EXPECT(gbc.pc(), 0xe24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe24a), 0xcb);
        EXPECT(gbc.readMem(0xe24b), 0xa6);
        // CB A6 0384
        gbc.setState(0xa91c, 0x6f1f, 0xda20, 0x2c7f, 0x9878, 0xf28f, 0x0, 0x0);
        gbc.writeMem(0xa91c, { 0xcb, 0xa6 });
        gbc.writeMem(0xf28f, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6f1f);
        EXPECT(gbc.pc(), 0xa91e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa91c), 0xcb);
        EXPECT(gbc.readMem(0xa91d), 0xa6);
        EXPECT(gbc.readMem(0xf28f), 0x6a);
        // CB A6 0385
        gbc.setState(0x2496, 0x7721, 0x74e0, 0x3b5c, 0xf3b1, 0xcad3, 0x0, 0x0);
        gbc.writeMem(0x2496, { 0xcb, 0xa6 });
        gbc.writeMem(0xcad3, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7721);
        EXPECT(gbc.pc(), 0x2498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad3), 0xe);
        // CB A6 0386
        gbc.setState(0x1d16, 0xb512, 0xe2b0, 0xfd0d, 0xe175, 0x5ab9, 0x0, 0x0);
        gbc.writeMem(0x1d16, { 0xcb, 0xa6 });
        gbc.writeMem(0x5ab9, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb512);
        EXPECT(gbc.pc(), 0x1d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0387
        gbc.setState(0x4f80, 0xdba2, 0x7760, 0x2cd7, 0xb696, 0x6143, 0x1, 0x0);
        gbc.writeMem(0x4f80, { 0xcb, 0xa6 });
        gbc.writeMem(0x6143, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdba2);
        EXPECT(gbc.pc(), 0x4f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0389
        gbc.setState(0x8ddb, 0x870f, 0x1f90, 0xea71, 0x93e6, 0x48ad, 0x1, 0x0);
        gbc.writeMem(0x48ad, { 0xa });
        gbc.writeMem(0x8ddb, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x870f);
        EXPECT(gbc.pc(), 0x8ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ddb), 0xcb);
        EXPECT(gbc.readMem(0x8ddc), 0xa6);
        // CB A6 038A
        gbc.setState(0x194a, 0xe5ec, 0xe8a0, 0x98d3, 0xfe24, 0x6508, 0x1, 0x1);
        gbc.writeMem(0x194a, { 0xcb, 0xa6 });
        gbc.writeMem(0x6508, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe5ec);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 038B
        gbc.setState(0xf3f, 0x6d24, 0x66f0, 0x3f1c, 0xbb7c, 0xc356, 0x0, 0x0);
        gbc.writeMem(0xf3f, { 0xcb, 0xa6 });
        gbc.writeMem(0xc356, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6d24);
        EXPECT(gbc.pc(), 0xf41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc356), 0xa0);
        // CB A6 038D
        gbc.setState(0x7a90, 0x48ea, 0xeaa0, 0xd859, 0xa102, 0xcfea, 0x0, 0x1);
        gbc.writeMem(0x7a90, { 0xcb, 0xa6 });
        gbc.writeMem(0xcfea, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x48ea);
        EXPECT(gbc.pc(), 0x7a92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfea), 0x8d);
        // CB A6 038E
        gbc.setState(0xa7d3, 0x727d, 0x70a0, 0x8cc0, 0xd9c3, 0xc7b0, 0x1, 0x1);
        gbc.writeMem(0xa7d3, { 0xcb, 0xa6 });
        gbc.writeMem(0xc7b0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x727d);
        EXPECT(gbc.pc(), 0xa7d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d3), 0xcb);
        EXPECT(gbc.readMem(0xa7d4), 0xa6);
        EXPECT(gbc.readMem(0xc7b0), 0x40);
        // CB A6 0390
        gbc.setState(0x5402, 0x9e86, 0x9270, 0xe58f, 0xe4df, 0x71d4, 0x0, 0x0);
        gbc.writeMem(0x5402, { 0xcb, 0xa6 });
        gbc.writeMem(0x71d4, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9e86);
        EXPECT(gbc.pc(), 0x5404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 0391
        gbc.setState(0x14a1, 0x5e6, 0x3b20, 0x708c, 0x273f, 0x8dce, 0x0, 0x0);
        gbc.writeMem(0x14a1, { 0xcb, 0xa6 });
        gbc.writeMem(0x8dce, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5e6);
        EXPECT(gbc.pc(), 0x14a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dce), 0xe);
        // CB A6 0392
        gbc.setState(0x1762, 0x70c9, 0x3a40, 0x21b7, 0x61fd, 0x3931, 0x1, 0x0);
        gbc.writeMem(0x1762, { 0xcb, 0xa6 });
        gbc.writeMem(0x3931, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x70c9);
        EXPECT(gbc.pc(), 0x1764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0393
        gbc.setState(0x5cae, 0x6cc6, 0x9ea0, 0x8a9b, 0xf16, 0x4d2b, 0x1, 0x0);
        gbc.writeMem(0x4d2b, { 0x1 });
        gbc.writeMem(0x5cae, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6cc6);
        EXPECT(gbc.pc(), 0x5cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 0394
        gbc.setState(0xd34b, 0x9e0b, 0x3400, 0x6e08, 0x90fc, 0x3bd4, 0x1, 0x0);
        gbc.writeMem(0x3bd4, { 0x48 });
        gbc.writeMem(0xd34b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9e0b);
        EXPECT(gbc.pc(), 0xd34d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34b), 0xcb);
        EXPECT(gbc.readMem(0xd34c), 0xa6);
        // CB A6 0395
        gbc.setState(0xee49, 0x8bc, 0x1e70, 0x5fdf, 0x694b, 0x55a1, 0x0, 0x0);
        gbc.writeMem(0x55a1, { 0x23 });
        gbc.writeMem(0xee49, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8bc);
        EXPECT(gbc.pc(), 0xee4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee49), 0xcb);
        EXPECT(gbc.readMem(0xee4a), 0xa6);
        // CB A6 0398
        gbc.setState(0xe278, 0x34e3, 0x67d0, 0x1806, 0xe50c, 0x29e4, 0x1, 0x1);
        gbc.writeMem(0x29e4, { 0x2 });
        gbc.writeMem(0xe278, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x34e3);
        EXPECT(gbc.pc(), 0xe27a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe278), 0xcb);
        EXPECT(gbc.readMem(0xe279), 0xa6);
        // CB A6 039A
        gbc.setState(0x9cf1, 0xee07, 0x92d0, 0xf8d1, 0xc0ba, 0xf117, 0x0, 0x1);
        gbc.writeMem(0x9cf1, { 0xcb, 0xa6 });
        gbc.writeMem(0xf117, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xee07);
        EXPECT(gbc.pc(), 0x9cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf1), 0xcb);
        EXPECT(gbc.readMem(0x9cf2), 0xa6);
        EXPECT(gbc.readMem(0xf117), 0x61);
        // CB A6 039C
        gbc.setState(0x5d26, 0x5db3, 0x40c0, 0x49b3, 0x6645, 0x9dcb, 0x1, 0x0);
        gbc.writeMem(0x5d26, { 0xcb, 0xa6 });
        gbc.writeMem(0x9dcb, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5db3);
        EXPECT(gbc.pc(), 0x5d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dcb), 0xe6);
        // CB A6 039D
        gbc.setState(0x145e, 0x53f5, 0x850, 0x7e4, 0x928, 0x9196, 0x1, 0x0);
        gbc.writeMem(0x145e, { 0xcb, 0xa6 });
        gbc.writeMem(0x9196, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x53f5);
        EXPECT(gbc.pc(), 0x1460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9196), 0x40);
        // CB A6 039E
        gbc.setState(0x7585, 0xe888, 0x2cf0, 0x72b, 0x2a28, 0xd828, 0x0, 0x1);
        gbc.writeMem(0x7585, { 0xcb, 0xa6 });
        gbc.writeMem(0xd828, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe888);
        EXPECT(gbc.pc(), 0x7587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd828), 0x47);
        // CB A6 039F
        gbc.setState(0xe15a, 0x23c, 0x3d10, 0x592a, 0x7f9b, 0x29a6, 0x1, 0x1);
        gbc.writeMem(0x29a6, { 0xcf });
        gbc.writeMem(0xe15a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x23c);
        EXPECT(gbc.pc(), 0xe15c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe15a), 0xcb);
        EXPECT(gbc.readMem(0xe15b), 0xa6);
        // CB A6 03A0
        gbc.setState(0x3a96, 0x913, 0x3fc0, 0xd014, 0xaa8c, 0x9e28, 0x0, 0x1);
        gbc.writeMem(0x3a96, { 0xcb, 0xa6 });
        gbc.writeMem(0x9e28, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x913);
        EXPECT(gbc.pc(), 0x3a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e28), 0x84);
        // CB A6 03A1
        gbc.setState(0x8ca9, 0x5649, 0xeec0, 0x8542, 0x17f0, 0x84da, 0x0, 0x0);
        gbc.writeMem(0x84da, { 0x7c });
        gbc.writeMem(0x8ca9, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5649);
        EXPECT(gbc.pc(), 0x8cab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84da), 0x6c);
        EXPECT(gbc.readMem(0x8ca9), 0xcb);
        EXPECT(gbc.readMem(0x8caa), 0xa6);
        // CB A6 03A2
        gbc.setState(0xe737, 0xfc44, 0x1790, 0x2299, 0xbf88, 0x9885, 0x0, 0x1);
        gbc.writeMem(0x9885, { 0xd1 });
        gbc.writeMem(0xe737, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfc44);
        EXPECT(gbc.pc(), 0xe739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9885), 0xc1);
        EXPECT(gbc.readMem(0xe737), 0xcb);
        EXPECT(gbc.readMem(0xe738), 0xa6);
        // CB A6 03A4
        gbc.setState(0x7a99, 0x2fe, 0xf8b0, 0x39cf, 0x1d5, 0x8504, 0x1, 0x1);
        gbc.writeMem(0x7a99, { 0xcb, 0xa6 });
        gbc.writeMem(0x8504, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2fe);
        EXPECT(gbc.pc(), 0x7a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8504), 0x7);
        // CB A6 03A5
        gbc.setState(0xd48b, 0x766f, 0x11a0, 0xe5a2, 0x4cbc, 0xc738, 0x0, 0x0);
        gbc.writeMem(0xc738, { 0x1d });
        gbc.writeMem(0xd48b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x766f);
        EXPECT(gbc.pc(), 0xd48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc738), 0xd);
        EXPECT(gbc.readMem(0xd48b), 0xcb);
        EXPECT(gbc.readMem(0xd48c), 0xa6);
        // CB A6 03A7
        gbc.setState(0x6159, 0x8f8f, 0x750, 0x23d3, 0x4137, 0xd1e6, 0x0, 0x1);
        gbc.writeMem(0x6159, { 0xcb, 0xa6 });
        gbc.writeMem(0xd1e6, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8f8f);
        EXPECT(gbc.pc(), 0x615b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e6), 0x5);
        // CB A6 03A8
        gbc.setState(0x921, 0xeff5, 0x4d20, 0xada9, 0x7f30, 0xbbcd, 0x0, 0x1);
        gbc.writeMem(0x921, { 0xcb, 0xa6 });
        gbc.writeMem(0xbbcd, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeff5);
        EXPECT(gbc.pc(), 0x923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbcd), 0xcd);
        // CB A6 03A9
        gbc.setState(0x1ed0, 0x4a15, 0x8000, 0xb0dc, 0x21a8, 0x9fa6, 0x0, 0x0);
        gbc.writeMem(0x1ed0, { 0xcb, 0xa6 });
        gbc.writeMem(0x9fa6, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4a15);
        EXPECT(gbc.pc(), 0x1ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa6), 0xef);
        // CB A6 03AA
        gbc.setState(0x4a36, 0xdd1d, 0x8310, 0x5857, 0x89d9, 0xc11c, 0x1, 0x1);
        gbc.writeMem(0x4a36, { 0xcb, 0xa6 });
        gbc.writeMem(0xc11c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdd1d);
        EXPECT(gbc.pc(), 0x4a38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11c), 0xe5);
        // CB A6 03AC
        gbc.setState(0xc469, 0xd813, 0x4230, 0x1481, 0x1550, 0xbb4e, 0x1, 0x0);
        gbc.writeMem(0xbb4e, { 0xd });
        gbc.writeMem(0xc469, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd813);
        EXPECT(gbc.pc(), 0xc46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb4e), 0xd);
        EXPECT(gbc.readMem(0xc469), 0xcb);
        EXPECT(gbc.readMem(0xc46a), 0xa6);
        // CB A6 03AE
        gbc.setState(0xa73c, 0x811f, 0x9a30, 0xe75d, 0x58c7, 0x38d3, 0x0, 0x0);
        gbc.writeMem(0x38d3, { 0x86 });
        gbc.writeMem(0xa73c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x811f);
        EXPECT(gbc.pc(), 0xa73e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa73c), 0xcb);
        EXPECT(gbc.readMem(0xa73d), 0xa6);
        // CB A6 03AF
        gbc.setState(0xc8ca, 0xbd0d, 0x3940, 0x55a9, 0x213e, 0xb450, 0x1, 0x1);
        gbc.writeMem(0xb450, { 0xc4 });
        gbc.writeMem(0xc8ca, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbd0d);
        EXPECT(gbc.pc(), 0xc8cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb450), 0xc4);
        EXPECT(gbc.readMem(0xc8ca), 0xcb);
        EXPECT(gbc.readMem(0xc8cb), 0xa6);
        // CB A6 03B1
        gbc.setState(0xe668, 0x37b2, 0x1c50, 0xea45, 0x9e2, 0xd130, 0x1, 0x1);
        gbc.writeMem(0xd130, { 0xc8 });
        gbc.writeMem(0xe668, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x37b2);
        EXPECT(gbc.pc(), 0xe66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd130), 0xc8);
        EXPECT(gbc.readMem(0xe668), 0xcb);
        EXPECT(gbc.readMem(0xe669), 0xa6);
        // CB A6 03B2
        gbc.setState(0xd19d, 0xd063, 0xbdf0, 0xdb8e, 0x78e0, 0xb5d1, 0x0, 0x1);
        gbc.writeMem(0xb5d1, { 0x0 });
        gbc.writeMem(0xd19d, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd063);
        EXPECT(gbc.pc(), 0xd19f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d1), 0x0);
        EXPECT(gbc.readMem(0xd19d), 0xcb);
        EXPECT(gbc.readMem(0xd19e), 0xa6);
        // CB A6 03B3
        gbc.setState(0x77f8, 0xf7f0, 0x8c60, 0xa331, 0x16b9, 0xbf0a, 0x0, 0x0);
        gbc.writeMem(0x77f8, { 0xcb, 0xa6 });
        gbc.writeMem(0xbf0a, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf7f0);
        EXPECT(gbc.pc(), 0x77fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0a), 0xa4);
        // CB A6 03B4
        gbc.setState(0x482a, 0x4d46, 0x7830, 0xac3e, 0x1db8, 0x89e4, 0x0, 0x0);
        gbc.writeMem(0x482a, { 0xcb, 0xa6 });
        gbc.writeMem(0x89e4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4d46);
        EXPECT(gbc.pc(), 0x482c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e4), 0x4c);
        // CB A6 03B7
        gbc.setState(0x7f42, 0x33a, 0x5eb0, 0x9b6b, 0x1020, 0x3ee9, 0x0, 0x1);
        gbc.writeMem(0x3ee9, { 0xc7 });
        gbc.writeMem(0x7f42, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x33a);
        EXPECT(gbc.pc(), 0x7f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A6 03B8
        gbc.setState(0x5c76, 0x40a, 0x9d70, 0x3565, 0x129e, 0xa609, 0x0, 0x1);
        gbc.writeMem(0x5c76, { 0xcb, 0xa6 });
        gbc.writeMem(0xa609, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x40a);
        EXPECT(gbc.pc(), 0x5c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa609), 0xe);
        // CB A6 03B9
        gbc.setState(0xd8b6, 0x390c, 0x24d0, 0x51e1, 0x9970, 0x9e75, 0x0, 0x0);
        gbc.writeMem(0x9e75, { 0xee });
        gbc.writeMem(0xd8b6, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x390c);
        EXPECT(gbc.pc(), 0xd8b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e75), 0xee);
        EXPECT(gbc.readMem(0xd8b6), 0xcb);
        EXPECT(gbc.readMem(0xd8b7), 0xa6);
        // CB A6 03BA
        gbc.setState(0x1780, 0xec0f, 0xd610, 0x9454, 0x6e05, 0x8f06, 0x1, 0x0);
        gbc.writeMem(0x1780, { 0xcb, 0xa6 });
        gbc.writeMem(0x8f06, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xec0f);
        EXPECT(gbc.pc(), 0x1782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f06), 0xa4);
        // CB A6 03BB
        gbc.setState(0x2666, 0x58fe, 0xced0, 0xc8d7, 0x69f4, 0xbdf7, 0x1, 0x1);
        gbc.writeMem(0x2666, { 0xcb, 0xa6 });
        gbc.writeMem(0xbdf7, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x58fe);
        EXPECT(gbc.pc(), 0x2668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf7), 0xc8);
        // CB A6 03BC
        gbc.setState(0x149e, 0xb931, 0xe110, 0xe41d, 0xf318, 0x82d5, 0x1, 0x0);
        gbc.writeMem(0x149e, { 0xcb, 0xa6 });
        gbc.writeMem(0x82d5, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb931);
        EXPECT(gbc.pc(), 0x14a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d5), 0x8d);
        // CB A6 03BD
        gbc.setState(0x24d0, 0xc0bc, 0xe040, 0x57bb, 0x2c05, 0xe9f4, 0x1, 0x1);
        gbc.writeMem(0x24d0, { 0xcb, 0xa6 });
        gbc.writeMem(0xe9f4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc0bc);
        EXPECT(gbc.pc(), 0x24d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f4), 0xcf);
        // CB A6 03BE
        gbc.setState(0x4d7c, 0x7ddb, 0xc180, 0xfa6f, 0x3c02, 0x4a98, 0x0, 0x1);
        gbc.writeMem(0x4a98, { 0x22 });
        gbc.writeMem(0x4d7c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7ddb);
        EXPECT(gbc.pc(), 0x4d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 03BF
        gbc.setState(0xd8f5, 0xa5cc, 0x730, 0x8fd8, 0x233c, 0xd4df, 0x0, 0x1);
        gbc.writeMem(0xd4df, { 0xdc });
        gbc.writeMem(0xd8f5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa5cc);
        EXPECT(gbc.pc(), 0xd8f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4df), 0xcc);
        EXPECT(gbc.readMem(0xd8f5), 0xcb);
        EXPECT(gbc.readMem(0xd8f6), 0xa6);
        // CB A6 03C3
        gbc.setState(0xeed5, 0x603e, 0xc940, 0xe5d3, 0x1a4a, 0xc001, 0x0, 0x0);
        gbc.writeMem(0xc001, { 0x7e });
        gbc.writeMem(0xeed5, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x603e);
        EXPECT(gbc.pc(), 0xeed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc001), 0x6e);
        EXPECT(gbc.readMem(0xeed5), 0xcb);
        EXPECT(gbc.readMem(0xeed6), 0xa6);
        // CB A6 03C4
        gbc.setState(0xe143, 0x6a5e, 0xf820, 0x78fe, 0x3cb5, 0x6d1d, 0x0, 0x0);
        gbc.writeMem(0x6d1d, { 0x88 });
        gbc.writeMem(0xe143, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6a5e);
        EXPECT(gbc.pc(), 0xe145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe143), 0xcb);
        EXPECT(gbc.readMem(0xe144), 0xa6);
        // CB A6 03C6
        gbc.setState(0xc23e, 0x1c0e, 0x2e70, 0x848a, 0xdc94, 0x3ee9, 0x0, 0x1);
        gbc.writeMem(0x3ee9, { 0xc7 });
        gbc.writeMem(0xc23e, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1c0e);
        EXPECT(gbc.pc(), 0xc240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23e), 0xcb);
        EXPECT(gbc.readMem(0xc23f), 0xa6);
        // CB A6 03C7
        gbc.setState(0x1c14, 0x1088, 0x78e0, 0xbdb4, 0x6df8, 0xa08, 0x1, 0x0);
        gbc.writeMem(0xa08, { 0x26 });
        gbc.writeMem(0x1c14, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1088);
        EXPECT(gbc.pc(), 0x1c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 03C8
        gbc.setState(0xdd2f, 0x7327, 0x1190, 0x19c0, 0x5e70, 0xe292, 0x0, 0x0);
        gbc.writeMem(0xdd2f, { 0xcb, 0xa6 });
        gbc.writeMem(0xe292, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7327);
        EXPECT(gbc.pc(), 0xdd31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd2f), 0xcb);
        EXPECT(gbc.readMem(0xdd30), 0xa6);
        EXPECT(gbc.readMem(0xe292), 0x81);
        // CB A6 03C9
        gbc.setState(0x4775, 0x31cc, 0xcd10, 0x7ee1, 0x2852, 0xfc8a, 0x1, 0x1);
        gbc.writeMem(0x4775, { 0xcb, 0xa6 });
        gbc.writeMem(0xfc8a, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x31cc);
        EXPECT(gbc.pc(), 0x4777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc8a), 0x8b);
        // CB A6 03CA
        gbc.setState(0xa454, 0xe4c8, 0xce70, 0x5aef, 0xb4d2, 0x513a, 0x1, 0x0);
        gbc.writeMem(0x513a, { 0x83 });
        gbc.writeMem(0xa454, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe4c8);
        EXPECT(gbc.pc(), 0xa456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa454), 0xcb);
        EXPECT(gbc.readMem(0xa455), 0xa6);
        // CB A6 03CD
        gbc.setState(0x340, 0xdfc0, 0xccd0, 0xf0d0, 0x4006, 0x4a0d, 0x1, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0xa6 });
        gbc.writeMem(0x4a0d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdfc0);
        EXPECT(gbc.pc(), 0x342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A6 03CE
        gbc.setState(0x562d, 0x3b00, 0xc140, 0x5f89, 0x76d3, 0xb207, 0x1, 0x1);
        gbc.writeMem(0x562d, { 0xcb, 0xa6 });
        gbc.writeMem(0xb207, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3b00);
        EXPECT(gbc.pc(), 0x562f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb207), 0x2a);
        // CB A6 03CF
        gbc.setState(0x6447, 0xad32, 0x9050, 0x8d26, 0x2c8a, 0xcb56, 0x0, 0x1);
        gbc.writeMem(0x6447, { 0xcb, 0xa6 });
        gbc.writeMem(0xcb56, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xad32);
        EXPECT(gbc.pc(), 0x6449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb56), 0x22);
        // CB A6 03D0
        gbc.setState(0x5dea, 0xe3e1, 0xeb90, 0x9c32, 0x254e, 0xf5ba, 0x0, 0x0);
        gbc.writeMem(0x5dea, { 0xcb, 0xa6 });
        gbc.writeMem(0xf5ba, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe3e1);
        EXPECT(gbc.pc(), 0x5dec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5ba), 0x41);
        // CB A6 03D3
        gbc.setState(0x4893, 0x36a5, 0x7680, 0x38e3, 0x41b4, 0x43b2, 0x0, 0x0);
        gbc.writeMem(0x43b2, { 0x8a });
        gbc.writeMem(0x4893, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x36a5);
        EXPECT(gbc.pc(), 0x4895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A6 03D4
        gbc.setState(0xa901, 0x6da9, 0x1f20, 0x6376, 0xdf3b, 0x26a2, 0x0, 0x1);
        gbc.writeMem(0x26a2, { 0x8e });
        gbc.writeMem(0xa901, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6da9);
        EXPECT(gbc.pc(), 0xa903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa901), 0xcb);
        EXPECT(gbc.readMem(0xa902), 0xa6);
        // CB A6 03D5
        gbc.setState(0xee24, 0x2f4b, 0xcf50, 0x26c5, 0x78d6, 0x9daf, 0x1, 0x0);
        gbc.writeMem(0x9daf, { 0xd4 });
        gbc.writeMem(0xee24, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2f4b);
        EXPECT(gbc.pc(), 0xee26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9daf), 0xc4);
        EXPECT(gbc.readMem(0xee24), 0xcb);
        EXPECT(gbc.readMem(0xee25), 0xa6);
        // CB A6 03D7
        gbc.setState(0xce2, 0x3208, 0x50d0, 0xbbe9, 0x82f0, 0xbda3, 0x1, 0x0);
        gbc.writeMem(0xce2, { 0xcb, 0xa6 });
        gbc.writeMem(0xbda3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3208);
        EXPECT(gbc.pc(), 0xce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda3), 0xa9);
        // CB A6 03D9
        gbc.setState(0x4cbe, 0x94f3, 0x60a0, 0xdbd8, 0xd71e, 0xab79, 0x1, 0x1);
        gbc.writeMem(0x4cbe, { 0xcb, 0xa6 });
        gbc.writeMem(0xab79, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x94f3);
        EXPECT(gbc.pc(), 0x4cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab79), 0x4);
        // CB A6 03DB
        gbc.setState(0xa89e, 0xed34, 0x8fe0, 0xa1a6, 0xacb0, 0xb51a, 0x1, 0x1);
        gbc.writeMem(0xa89e, { 0xcb, 0xa6 });
        gbc.writeMem(0xb51a, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xed34);
        EXPECT(gbc.pc(), 0xa8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89e), 0xcb);
        EXPECT(gbc.readMem(0xa89f), 0xa6);
        EXPECT(gbc.readMem(0xb51a), 0x28);
        // CB A6 03DC
        gbc.setState(0x955, 0x19ed, 0x76c0, 0x51f, 0xc6f6, 0xb22b, 0x0, 0x0);
        gbc.writeMem(0x955, { 0xcb, 0xa6 });
        gbc.writeMem(0xb22b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x19ed);
        EXPECT(gbc.pc(), 0x957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22b), 0xc9);
        // CB A6 03DD
        gbc.setState(0x510b, 0x84db, 0xf720, 0x9e3e, 0x89ae, 0x15e7, 0x1, 0x0);
        gbc.writeMem(0x15e7, { 0x2f });
        gbc.writeMem(0x510b, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x84db);
        EXPECT(gbc.pc(), 0x510d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A6 03DF
        gbc.setState(0xa335, 0x3984, 0x5d00, 0x7655, 0x1814, 0xc22a, 0x0, 0x0);
        gbc.writeMem(0xa335, { 0xcb, 0xa6 });
        gbc.writeMem(0xc22a, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3984);
        EXPECT(gbc.pc(), 0xa337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa335), 0xcb);
        EXPECT(gbc.readMem(0xa336), 0xa6);
        EXPECT(gbc.readMem(0xc22a), 0xc5);
        // CB A6 03E1
        gbc.setState(0xe4ae, 0x72cc, 0x4380, 0x4c79, 0x154b, 0xb707, 0x1, 0x0);
        gbc.writeMem(0xb707, { 0x0 });
        gbc.writeMem(0xe4ae, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x72cc);
        EXPECT(gbc.pc(), 0xe4b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb707), 0x0);
        EXPECT(gbc.readMem(0xe4ae), 0xcb);
        EXPECT(gbc.readMem(0xe4af), 0xa6);
        // CB A6 03E2
        gbc.setState(0xa032, 0x217a, 0x9e70, 0x44f3, 0xdb30, 0x8025, 0x1, 0x0);
        gbc.writeMem(0x8025, { 0x67 });
        gbc.writeMem(0xa032, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x217a);
        EXPECT(gbc.pc(), 0xa034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8025), 0x67);
        EXPECT(gbc.readMem(0xa032), 0xcb);
        EXPECT(gbc.readMem(0xa033), 0xa6);
        // CB A6 03E3
        gbc.setState(0xad1a, 0xcf90, 0xa880, 0xd3c9, 0x3878, 0x3948, 0x0, 0x0);
        gbc.writeMem(0x3948, { 0xc8 });
        gbc.writeMem(0xad1a, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcf90);
        EXPECT(gbc.pc(), 0xad1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1a), 0xcb);
        EXPECT(gbc.readMem(0xad1b), 0xa6);
        // CB A6 03E5
        gbc.setState(0xa5bb, 0xb5c8, 0xa350, 0xf7ac, 0xd8d5, 0xfbfe, 0x1, 0x0);
        gbc.writeMem(0xa5bb, { 0xcb, 0xa6 });
        gbc.writeMem(0xfbfe, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb5c8);
        EXPECT(gbc.pc(), 0xa5bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5bb), 0xcb);
        EXPECT(gbc.readMem(0xa5bc), 0xa6);
        EXPECT(gbc.readMem(0xfbfe), 0x81);
        // CB A6 03E6
        gbc.setState(0x380c, 0x70de, 0xf0d0, 0x9e7, 0x3911, 0x7cf, 0x0, 0x0);
        gbc.writeMem(0x7cf, { 0x2c });
        gbc.writeMem(0x380c, { 0xcb, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x70de);
        EXPECT(gbc.pc(), 0x380e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
