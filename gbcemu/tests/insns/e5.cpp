#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_e5)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_e5) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // E5 0000
        gbc.setState(0xb24a, 0xd5b1, 0x1910, 0x193, 0x4c2c, 0xb9c8, 0x0, 0x0);
        gbc.writeMem(0xb24a, { 0xe5 });
        gbc.writeMem(0xd5af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd5af);
        EXPECT(gbc.pc(), 0xb24b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24a), 0xe5);
        EXPECT(gbc.readMem(0xd5af), 0xc8);
        EXPECT(gbc.readMem(0xd5b0), 0xb9);
        // E5 0002
        gbc.setState(0xc1a6, 0xa9e1, 0x80b0, 0x4123, 0x6548, 0x2b71, 0x0, 0x1);
        gbc.writeMem(0xa9df, { 0x0, 0x0 });
        gbc.writeMem(0xc1a6, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa9df);
        EXPECT(gbc.pc(), 0xc1a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9df), 0x71);
        EXPECT(gbc.readMem(0xa9e0), 0x2b);
        EXPECT(gbc.readMem(0xc1a6), 0xe5);
        // E5 0005
        gbc.setState(0x424b, 0x8e10, 0xb8b0, 0x170e, 0xd05f, 0x1090, 0x0, 0x1);
        gbc.writeMem(0x424b, { 0xe5 });
        gbc.writeMem(0x8e0e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8e0e);
        EXPECT(gbc.pc(), 0x424c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e0e), 0x90);
        EXPECT(gbc.readMem(0x8e0f), 0x10);
        // E5 0006
        gbc.setState(0x158f, 0xe89f, 0xfc20, 0xaef8, 0xc4e0, 0xf4cd, 0x0, 0x0);
        gbc.writeMem(0x158f, { 0xe5 });
        gbc.writeMem(0xe89d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe89d);
        EXPECT(gbc.pc(), 0x1590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89d), 0xcd);
        EXPECT(gbc.readMem(0xe89e), 0xf4);
        // E5 0007
        gbc.setState(0x42e9, 0xe304, 0xc0c0, 0x44f3, 0x3ce0, 0xc9a, 0x0, 0x0);
        gbc.writeMem(0x42e9, { 0xe5 });
        gbc.writeMem(0xe302, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe302);
        EXPECT(gbc.pc(), 0x42ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe302), 0x9a);
        EXPECT(gbc.readMem(0xe303), 0xc);
        // E5 0008
        gbc.setState(0x5d44, 0xdc81, 0x9490, 0xd36f, 0x1ead, 0x868d, 0x0, 0x0);
        gbc.writeMem(0x5d44, { 0xe5 });
        gbc.writeMem(0xdc7f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdc7f);
        EXPECT(gbc.pc(), 0x5d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc7f), 0x8d);
        EXPECT(gbc.readMem(0xdc80), 0x86);
        // E5 0009
        gbc.setState(0xa4f9, 0x95f0, 0xc800, 0xfc54, 0x532e, 0xc6ec, 0x1, 0x0);
        gbc.writeMem(0x95ee, { 0x0, 0x0 });
        gbc.writeMem(0xa4f9, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x95ee);
        EXPECT(gbc.pc(), 0xa4fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ee), 0xec);
        EXPECT(gbc.readMem(0x95ef), 0xc6);
        EXPECT(gbc.readMem(0xa4f9), 0xe5);
        // E5 000A
        gbc.setState(0x87b0, 0xf386, 0x5720, 0x784b, 0x94e5, 0xda07, 0x1, 0x0);
        gbc.writeMem(0x87b0, { 0xe5 });
        gbc.writeMem(0xf384, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf384);
        EXPECT(gbc.pc(), 0x87b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b0), 0xe5);
        EXPECT(gbc.readMem(0xf384), 0x7);
        EXPECT(gbc.readMem(0xf385), 0xda);
        // E5 000B
        gbc.setState(0x9aa6, 0xd908, 0xc100, 0x6009, 0xefa5, 0x1295, 0x0, 0x0);
        gbc.writeMem(0x9aa6, { 0xe5 });
        gbc.writeMem(0xd906, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd906);
        EXPECT(gbc.pc(), 0x9aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa6), 0xe5);
        EXPECT(gbc.readMem(0xd906), 0x95);
        EXPECT(gbc.readMem(0xd907), 0x12);
        // E5 000E
        gbc.setState(0x1b2b, 0xac0f, 0xe6e0, 0xf33f, 0xcde8, 0x8140, 0x1, 0x1);
        gbc.writeMem(0x1b2b, { 0xe5 });
        gbc.writeMem(0xac0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xac0d);
        EXPECT(gbc.pc(), 0x1b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac0d), 0x40);
        EXPECT(gbc.readMem(0xac0e), 0x81);
        // E5 0010
        gbc.setState(0x6afb, 0xe03f, 0x3890, 0xa5fe, 0xe533, 0x916b, 0x0, 0x1);
        gbc.writeMem(0x6afb, { 0xe5 });
        gbc.writeMem(0xe03d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe03d);
        EXPECT(gbc.pc(), 0x6afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe03d), 0x6b);
        EXPECT(gbc.readMem(0xe03e), 0x91);
        // E5 0013
        gbc.setState(0xec11, 0xc0f1, 0xf910, 0xe737, 0xcbdd, 0xb6c7, 0x0, 0x0);
        gbc.writeMem(0xc0ef, { 0x0, 0x0 });
        gbc.writeMem(0xec11, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0xec12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ef), 0xc7);
        EXPECT(gbc.readMem(0xc0f0), 0xb6);
        EXPECT(gbc.readMem(0xec11), 0xe5);
        // E5 0014
        gbc.setState(0x5902, 0xb0fe, 0x87a0, 0x1362, 0x7af7, 0x28d4, 0x1, 0x0);
        gbc.writeMem(0x5902, { 0xe5 });
        gbc.writeMem(0xb0fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb0fc);
        EXPECT(gbc.pc(), 0x5903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0fc), 0xd4);
        EXPECT(gbc.readMem(0xb0fd), 0x28);
        // E5 0015
        gbc.setState(0x9ecb, 0x9c6c, 0xa170, 0x313c, 0x477a, 0x33b5, 0x1, 0x0);
        gbc.writeMem(0x9c6a, { 0x0, 0x0 });
        gbc.writeMem(0x9ecb, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9c6a);
        EXPECT(gbc.pc(), 0x9ecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6a), 0xb5);
        EXPECT(gbc.readMem(0x9c6b), 0x33);
        EXPECT(gbc.readMem(0x9ecb), 0xe5);
        // E5 0016
        gbc.setState(0x5099, 0xb710, 0x4570, 0x88b8, 0xe939, 0x8595, 0x0, 0x1);
        gbc.writeMem(0x5099, { 0xe5 });
        gbc.writeMem(0xb70e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb70e);
        EXPECT(gbc.pc(), 0x509a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb70e), 0x95);
        EXPECT(gbc.readMem(0xb70f), 0x85);
        // E5 001B
        gbc.setState(0xca8a, 0xee99, 0x7c0, 0x318, 0x222f, 0xc5ce, 0x0, 0x1);
        gbc.writeMem(0xca8a, { 0xe5 });
        gbc.writeMem(0xee97, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xee97);
        EXPECT(gbc.pc(), 0xca8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8a), 0xe5);
        EXPECT(gbc.readMem(0xee97), 0xce);
        EXPECT(gbc.readMem(0xee98), 0xc5);
        // E5 001C
        gbc.setState(0x59e6, 0xb89a, 0x5a40, 0x1de6, 0xf086, 0x34f5, 0x1, 0x1);
        gbc.writeMem(0x59e6, { 0xe5 });
        gbc.writeMem(0xb898, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb898);
        EXPECT(gbc.pc(), 0x59e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb898), 0xf5);
        EXPECT(gbc.readMem(0xb899), 0x34);
        // E5 0020
        gbc.setState(0x7a87, 0xbb32, 0x9470, 0x734a, 0xf83a, 0x7c11, 0x0, 0x1);
        gbc.writeMem(0x7a87, { 0xe5 });
        gbc.writeMem(0xbb30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbb30);
        EXPECT(gbc.pc(), 0x7a88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb30), 0x11);
        EXPECT(gbc.readMem(0xbb31), 0x7c);
        // E5 0023
        gbc.setState(0x4906, 0x8c98, 0x12f0, 0x570d, 0x6e9a, 0x1824, 0x1, 0x0);
        gbc.writeMem(0x4906, { 0xe5 });
        gbc.writeMem(0x8c96, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8c96);
        EXPECT(gbc.pc(), 0x4907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c96), 0x24);
        EXPECT(gbc.readMem(0x8c97), 0x18);
        // E5 0024
        gbc.setState(0x6c90, 0xcb1c, 0xf470, 0x35c4, 0xdbab, 0x69e5, 0x1, 0x1);
        gbc.writeMem(0x6c90, { 0xe5 });
        gbc.writeMem(0xcb1a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcb1a);
        EXPECT(gbc.pc(), 0x6c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb1a), 0xe5);
        EXPECT(gbc.readMem(0xcb1b), 0x69);
        // E5 0025
        gbc.setState(0x31c5, 0x88ac, 0xfa00, 0x9e7b, 0xc5a3, 0xfe53, 0x1, 0x0);
        gbc.writeMem(0x31c5, { 0xe5 });
        gbc.writeMem(0x88aa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0x31c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88aa), 0x53);
        EXPECT(gbc.readMem(0x88ab), 0xfe);
        // E5 0026
        gbc.setState(0x2f6b, 0xd34f, 0xc0c0, 0x6249, 0x8a64, 0x40e6, 0x0, 0x1);
        gbc.writeMem(0x2f6b, { 0xe5 });
        gbc.writeMem(0xd34d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd34d);
        EXPECT(gbc.pc(), 0x2f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34d), 0xe6);
        EXPECT(gbc.readMem(0xd34e), 0x40);
        // E5 0027
        gbc.setState(0xd6dd, 0xed74, 0x6c00, 0xb3e4, 0x5bd, 0x7a67, 0x0, 0x0);
        gbc.writeMem(0xd6dd, { 0xe5 });
        gbc.writeMem(0xed72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xed72);
        EXPECT(gbc.pc(), 0xd6de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6dd), 0xe5);
        EXPECT(gbc.readMem(0xed72), 0x67);
        EXPECT(gbc.readMem(0xed73), 0x7a);
        // E5 0028
        gbc.setState(0xeb0c, 0x904a, 0xfde0, 0xdb40, 0x9504, 0x6770, 0x1, 0x0);
        gbc.writeMem(0x9048, { 0x0, 0x0 });
        gbc.writeMem(0xeb0c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9048);
        EXPECT(gbc.pc(), 0xeb0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9048), 0x70);
        EXPECT(gbc.readMem(0x9049), 0x67);
        EXPECT(gbc.readMem(0xeb0c), 0xe5);
        // E5 002B
        gbc.setState(0x61a1, 0xc115, 0xbee0, 0xb494, 0x2822, 0x9f17, 0x1, 0x1);
        gbc.writeMem(0x61a1, { 0xe5 });
        gbc.writeMem(0xc113, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc113);
        EXPECT(gbc.pc(), 0x61a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc113), 0x17);
        EXPECT(gbc.readMem(0xc114), 0x9f);
        // E5 002D
        gbc.setState(0x7bf8, 0xd71b, 0xdc00, 0xab38, 0x3ac0, 0x89d3, 0x0, 0x1);
        gbc.writeMem(0x7bf8, { 0xe5 });
        gbc.writeMem(0xd719, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd719);
        EXPECT(gbc.pc(), 0x7bf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd719), 0xd3);
        EXPECT(gbc.readMem(0xd71a), 0x89);
        // E5 002E
        gbc.setState(0x8a8e, 0xbdec, 0xca20, 0x54a4, 0x1ba4, 0xb536, 0x1, 0x1);
        gbc.writeMem(0x8a8e, { 0xe5 });
        gbc.writeMem(0xbdea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbdea);
        EXPECT(gbc.pc(), 0x8a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8e), 0xe5);
        EXPECT(gbc.readMem(0xbdea), 0x36);
        EXPECT(gbc.readMem(0xbdeb), 0xb5);
        // E5 0033
        gbc.setState(0xd66a, 0xab58, 0x4f80, 0xc78f, 0x6d42, 0x175c, 0x1, 0x0);
        gbc.writeMem(0xab56, { 0x0, 0x0 });
        gbc.writeMem(0xd66a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xab56);
        EXPECT(gbc.pc(), 0xd66b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab56), 0x5c);
        EXPECT(gbc.readMem(0xab57), 0x17);
        EXPECT(gbc.readMem(0xd66a), 0xe5);
        // E5 003B
        gbc.setState(0xeb49, 0xe7dd, 0xaec0, 0x74e9, 0x7a80, 0xa8fd, 0x1, 0x1);
        gbc.writeMem(0xe7db, { 0x0, 0x0 });
        gbc.writeMem(0xeb49, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe7db);
        EXPECT(gbc.pc(), 0xeb4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7db), 0xfd);
        EXPECT(gbc.readMem(0xe7dc), 0xa8);
        EXPECT(gbc.readMem(0xeb49), 0xe5);
        // E5 003C
        gbc.setState(0xb714, 0x98f3, 0xf250, 0x1351, 0x75b0, 0x7b40, 0x1, 0x1);
        gbc.writeMem(0x98f1, { 0x0, 0x0 });
        gbc.writeMem(0xb714, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x98f1);
        EXPECT(gbc.pc(), 0xb715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f1), 0x40);
        EXPECT(gbc.readMem(0x98f2), 0x7b);
        EXPECT(gbc.readMem(0xb714), 0xe5);
        // E5 0043
        gbc.setState(0xdb5c, 0xff14, 0x7af0, 0xc3f0, 0x160f, 0xaa2c, 0x1, 0x1);
        gbc.writeMem(0xdb5c, { 0xe5 });
        gbc.writeMem(0xff12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xff12);
        EXPECT(gbc.pc(), 0xdb5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5c), 0xe5);
        EXPECT(gbc.readMem(0xff12), 0x2c);
        EXPECT(gbc.readMem(0xff13), 0xaa);
        // E5 0044
        gbc.setState(0x3d5e, 0xc536, 0x5780, 0xb090, 0x33cb, 0x6fd9, 0x0, 0x1);
        gbc.writeMem(0x3d5e, { 0xe5 });
        gbc.writeMem(0xc534, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc534);
        EXPECT(gbc.pc(), 0x3d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc534), 0xd9);
        EXPECT(gbc.readMem(0xc535), 0x6f);
        // E5 0045
        gbc.setState(0x6972, 0x9d36, 0x6b80, 0xca12, 0xefaf, 0xd025, 0x1, 0x0);
        gbc.writeMem(0x6972, { 0xe5 });
        gbc.writeMem(0x9d34, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9d34);
        EXPECT(gbc.pc(), 0x6973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d34), 0x25);
        EXPECT(gbc.readMem(0x9d35), 0xd0);
        // E5 004D
        gbc.setState(0xc91c, 0xbe3b, 0x76b0, 0x24de, 0x72db, 0x1ecf, 0x1, 0x0);
        gbc.writeMem(0xbe39, { 0x0, 0x0 });
        gbc.writeMem(0xc91c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbe39);
        EXPECT(gbc.pc(), 0xc91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe39), 0xcf);
        EXPECT(gbc.readMem(0xbe3a), 0x1e);
        EXPECT(gbc.readMem(0xc91c), 0xe5);
        // E5 004E
        gbc.setState(0xa444, 0xc3ee, 0xef00, 0x5f0a, 0x79a2, 0xbe9b, 0x0, 0x0);
        gbc.writeMem(0xa444, { 0xe5 });
        gbc.writeMem(0xc3ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc3ec);
        EXPECT(gbc.pc(), 0xa445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa444), 0xe5);
        EXPECT(gbc.readMem(0xc3ec), 0x9b);
        EXPECT(gbc.readMem(0xc3ed), 0xbe);
        // E5 004F
        gbc.setState(0x9dac, 0x9534, 0x4630, 0x2008, 0x11f9, 0x93fd, 0x0, 0x0);
        gbc.writeMem(0x9532, { 0x0, 0x0 });
        gbc.writeMem(0x9dac, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9532);
        EXPECT(gbc.pc(), 0x9dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9532), 0xfd);
        EXPECT(gbc.readMem(0x9533), 0x93);
        EXPECT(gbc.readMem(0x9dac), 0xe5);
        // E5 0053
        gbc.setState(0x341f, 0x9793, 0x17d0, 0x5448, 0x6fa2, 0x82c2, 0x1, 0x0);
        gbc.writeMem(0x341f, { 0xe5 });
        gbc.writeMem(0x9791, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9791);
        EXPECT(gbc.pc(), 0x3420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9791), 0xc2);
        EXPECT(gbc.readMem(0x9792), 0x82);
        // E5 0057
        gbc.setState(0x6309, 0xdc09, 0x6df0, 0xceb7, 0x291e, 0xbba3, 0x0, 0x0);
        gbc.writeMem(0x6309, { 0xe5 });
        gbc.writeMem(0xdc07, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xdc07);
        EXPECT(gbc.pc(), 0x630a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc07), 0xa3);
        EXPECT(gbc.readMem(0xdc08), 0xbb);
        // E5 0058
        gbc.setState(0x9354, 0xbc9b, 0x61b0, 0xf419, 0x4f4, 0x5095, 0x1, 0x1);
        gbc.writeMem(0x9354, { 0xe5 });
        gbc.writeMem(0xbc99, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbc99);
        EXPECT(gbc.pc(), 0x9355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9354), 0xe5);
        EXPECT(gbc.readMem(0xbc99), 0x95);
        EXPECT(gbc.readMem(0xbc9a), 0x50);
        // E5 005B
        gbc.setState(0xa685, 0x9b3b, 0xec00, 0x41d5, 0x3ae5, 0xed77, 0x0, 0x0);
        gbc.writeMem(0x9b39, { 0x0, 0x0 });
        gbc.writeMem(0xa685, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9b39);
        EXPECT(gbc.pc(), 0xa686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b39), 0x77);
        EXPECT(gbc.readMem(0x9b3a), 0xed);
        EXPECT(gbc.readMem(0xa685), 0xe5);
        // E5 005F
        gbc.setState(0x9540, 0xe9e1, 0x4e40, 0x786b, 0x517a, 0xac41, 0x0, 0x1);
        gbc.writeMem(0x9540, { 0xe5 });
        gbc.writeMem(0xe9df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe9df);
        EXPECT(gbc.pc(), 0x9541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9540), 0xe5);
        EXPECT(gbc.readMem(0xe9df), 0x41);
        EXPECT(gbc.readMem(0xe9e0), 0xac);
        // E5 0061
        gbc.setState(0x9da3, 0xe085, 0xb140, 0x27b4, 0x5e36, 0xeeec, 0x1, 0x1);
        gbc.writeMem(0x9da3, { 0xe5 });
        gbc.writeMem(0xe083, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe083);
        EXPECT(gbc.pc(), 0x9da4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da3), 0xe5);
        EXPECT(gbc.readMem(0xe083), 0xec);
        EXPECT(gbc.readMem(0xe084), 0xee);
        // E5 0062
        gbc.setState(0x51c4, 0xfa05, 0x1bf0, 0x4a90, 0xf212, 0xb263, 0x1, 0x0);
        gbc.writeMem(0x51c4, { 0xe5 });
        gbc.writeMem(0xfa03, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xfa03);
        EXPECT(gbc.pc(), 0x51c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa03), 0x63);
        EXPECT(gbc.readMem(0xfa04), 0xb2);
        // E5 0064
        gbc.setState(0x6ec8, 0xd4df, 0xfd50, 0xe0c1, 0x7ae7, 0x21ae, 0x1, 0x0);
        gbc.writeMem(0x6ec8, { 0xe5 });
        gbc.writeMem(0xd4dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd4dd);
        EXPECT(gbc.pc(), 0x6ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4dd), 0xae);
        EXPECT(gbc.readMem(0xd4de), 0x21);
        // E5 0068
        gbc.setState(0xd6cd, 0xa05c, 0x80a0, 0xf0f6, 0xd738, 0x7272, 0x1, 0x0);
        gbc.writeMem(0xa05a, { 0x0, 0x0 });
        gbc.writeMem(0xd6cd, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa05a);
        EXPECT(gbc.pc(), 0xd6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05a), 0x72);
        EXPECT(gbc.readMem(0xa05b), 0x72);
        EXPECT(gbc.readMem(0xd6cd), 0xe5);
        // E5 0069
        gbc.setState(0x1ea4, 0xe45c, 0xf870, 0x468e, 0x39c8, 0x8928, 0x0, 0x0);
        gbc.writeMem(0x1ea4, { 0xe5 });
        gbc.writeMem(0xe45a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe45a);
        EXPECT(gbc.pc(), 0x1ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45a), 0x28);
        EXPECT(gbc.readMem(0xe45b), 0x89);
        // E5 006A
        gbc.setState(0xd702, 0xab54, 0x8450, 0x4006, 0x7649, 0x2bec, 0x0, 0x1);
        gbc.writeMem(0xab52, { 0x0, 0x0 });
        gbc.writeMem(0xd702, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xab52);
        EXPECT(gbc.pc(), 0xd703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab52), 0xec);
        EXPECT(gbc.readMem(0xab53), 0x2b);
        EXPECT(gbc.readMem(0xd702), 0xe5);
        // E5 006B
        gbc.setState(0x1f42, 0xd540, 0xeb0, 0x53c, 0xa2ba, 0x591a, 0x0, 0x0);
        gbc.writeMem(0x1f42, { 0xe5 });
        gbc.writeMem(0xd53e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd53e);
        EXPECT(gbc.pc(), 0x1f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd53e), 0x1a);
        EXPECT(gbc.readMem(0xd53f), 0x59);
        // E5 006C
        gbc.setState(0xce7a, 0xd3e3, 0xe80, 0xcfd1, 0x1ed2, 0xe626, 0x0, 0x0);
        gbc.writeMem(0xce7a, { 0xe5 });
        gbc.writeMem(0xd3e1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd3e1);
        EXPECT(gbc.pc(), 0xce7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7a), 0xe5);
        EXPECT(gbc.readMem(0xd3e1), 0x26);
        EXPECT(gbc.readMem(0xd3e2), 0xe6);
        // E5 006D
        gbc.setState(0xd5b, 0x8685, 0xa440, 0x9dc2, 0x5068, 0x5a52, 0x1, 0x1);
        gbc.writeMem(0xd5b, { 0xe5 });
        gbc.writeMem(0x8683, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8683);
        EXPECT(gbc.pc(), 0xd5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8683), 0x52);
        EXPECT(gbc.readMem(0x8684), 0x5a);
        // E5 006E
        gbc.setState(0xc4d6, 0xccf7, 0xeb70, 0x1589, 0x5f07, 0x16bb, 0x0, 0x1);
        gbc.writeMem(0xc4d6, { 0xe5 });
        gbc.writeMem(0xccf5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xccf5);
        EXPECT(gbc.pc(), 0xc4d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d6), 0xe5);
        EXPECT(gbc.readMem(0xccf5), 0xbb);
        EXPECT(gbc.readMem(0xccf6), 0x16);
        // E5 0071
        gbc.setState(0x9455, 0xd6ff, 0x6e50, 0x76f2, 0x4410, 0xd99a, 0x0, 0x0);
        gbc.writeMem(0x9455, { 0xe5 });
        gbc.writeMem(0xd6fd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd6fd);
        EXPECT(gbc.pc(), 0x9456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9455), 0xe5);
        EXPECT(gbc.readMem(0xd6fd), 0x9a);
        EXPECT(gbc.readMem(0xd6fe), 0xd9);
        // E5 0072
        gbc.setState(0x9306, 0xb4b6, 0xf950, 0x7376, 0x7322, 0x28d2, 0x1, 0x0);
        gbc.writeMem(0x9306, { 0xe5 });
        gbc.writeMem(0xb4b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb4b4);
        EXPECT(gbc.pc(), 0x9307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9306), 0xe5);
        EXPECT(gbc.readMem(0xb4b4), 0xd2);
        EXPECT(gbc.readMem(0xb4b5), 0x28);
        // E5 0074
        gbc.setState(0x9ad2, 0xdad1, 0x9310, 0xa091, 0x56b8, 0x95b9, 0x0, 0x1);
        gbc.writeMem(0x9ad2, { 0xe5 });
        gbc.writeMem(0xdacf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xdacf);
        EXPECT(gbc.pc(), 0x9ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad2), 0xe5);
        EXPECT(gbc.readMem(0xdacf), 0xb9);
        EXPECT(gbc.readMem(0xdad0), 0x95);
        // E5 0076
        gbc.setState(0x585b, 0xc06a, 0x5e00, 0xa45, 0x4968, 0xb7fe, 0x1, 0x0);
        gbc.writeMem(0x585b, { 0xe5 });
        gbc.writeMem(0xc068, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc068);
        EXPECT(gbc.pc(), 0x585c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc068), 0xfe);
        EXPECT(gbc.readMem(0xc069), 0xb7);
        // E5 007A
        gbc.setState(0x40a8, 0xc0f1, 0x7080, 0x9300, 0xa7ad, 0x2ab0, 0x1, 0x1);
        gbc.writeMem(0x40a8, { 0xe5 });
        gbc.writeMem(0xc0ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0x40a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ef), 0xb0);
        EXPECT(gbc.readMem(0xc0f0), 0x2a);
        // E5 007C
        gbc.setState(0xb4e8, 0xe28f, 0x37c0, 0x60b5, 0xfb97, 0x367e, 0x0, 0x1);
        gbc.writeMem(0xb4e8, { 0xe5 });
        gbc.writeMem(0xe28d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe28d);
        EXPECT(gbc.pc(), 0xb4e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e8), 0xe5);
        EXPECT(gbc.readMem(0xe28d), 0x7e);
        EXPECT(gbc.readMem(0xe28e), 0x36);
        // E5 007D
        gbc.setState(0xabbc, 0xdc76, 0xe1c0, 0x5cbd, 0x329c, 0xad99, 0x0, 0x0);
        gbc.writeMem(0xabbc, { 0xe5 });
        gbc.writeMem(0xdc74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xdc74);
        EXPECT(gbc.pc(), 0xabbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbc), 0xe5);
        EXPECT(gbc.readMem(0xdc74), 0x99);
        EXPECT(gbc.readMem(0xdc75), 0xad);
        // E5 007E
        gbc.setState(0x6b98, 0xb290, 0x2ee0, 0xe1d4, 0x3a47, 0x7da7, 0x1, 0x0);
        gbc.writeMem(0x6b98, { 0xe5 });
        gbc.writeMem(0xb28e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb28e);
        EXPECT(gbc.pc(), 0x6b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28e), 0xa7);
        EXPECT(gbc.readMem(0xb28f), 0x7d);
        // E5 0084
        gbc.setState(0x744d, 0xe041, 0xcc50, 0x8fb3, 0x1928, 0x42d9, 0x1, 0x0);
        gbc.writeMem(0x744d, { 0xe5 });
        gbc.writeMem(0xe03f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe03f);
        EXPECT(gbc.pc(), 0x744e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe03f), 0xd9);
        EXPECT(gbc.readMem(0xe040), 0x42);
        // E5 0086
        gbc.setState(0xcfe2, 0xd03f, 0xd70, 0x3fb7, 0x94db, 0xecb1, 0x1, 0x0);
        gbc.writeMem(0xcfe2, { 0xe5 });
        gbc.writeMem(0xd03d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd03d);
        EXPECT(gbc.pc(), 0xcfe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe2), 0xe5);
        EXPECT(gbc.readMem(0xd03d), 0xb1);
        EXPECT(gbc.readMem(0xd03e), 0xec);
        // E5 0088
        gbc.setState(0x7683, 0xc97d, 0xdcb0, 0x8adc, 0x3855, 0xf6f1, 0x1, 0x1);
        gbc.writeMem(0x7683, { 0xe5 });
        gbc.writeMem(0xc97b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc97b);
        EXPECT(gbc.pc(), 0x7684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc97b), 0xf1);
        EXPECT(gbc.readMem(0xc97c), 0xf6);
        // E5 008B
        gbc.setState(0x9ccd, 0xf81a, 0xf320, 0xa0dc, 0x5908, 0x916, 0x0, 0x0);
        gbc.writeMem(0x9ccd, { 0xe5 });
        gbc.writeMem(0xf818, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf818);
        EXPECT(gbc.pc(), 0x9cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0xe5);
        EXPECT(gbc.readMem(0xf818), 0x16);
        EXPECT(gbc.readMem(0xf819), 0x9);
        // E5 008C
        gbc.setState(0xec09, 0xb573, 0x8d90, 0xc42e, 0xc179, 0x6b0f, 0x0, 0x0);
        gbc.writeMem(0xb571, { 0x0, 0x0 });
        gbc.writeMem(0xec09, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb571);
        EXPECT(gbc.pc(), 0xec0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb571), 0xf);
        EXPECT(gbc.readMem(0xb572), 0x6b);
        EXPECT(gbc.readMem(0xec09), 0xe5);
        // E5 0094
        gbc.setState(0xa745, 0xd714, 0xbaa0, 0x464a, 0x6a06, 0xb4c1, 0x1, 0x1);
        gbc.writeMem(0xa745, { 0xe5 });
        gbc.writeMem(0xd712, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd712);
        EXPECT(gbc.pc(), 0xa746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa745), 0xe5);
        EXPECT(gbc.readMem(0xd712), 0xc1);
        EXPECT(gbc.readMem(0xd713), 0xb4);
        // E5 0096
        gbc.setState(0xde76, 0xfb70, 0x3fe0, 0xc517, 0x7f87, 0x7c47, 0x1, 0x1);
        gbc.writeMem(0xde76, { 0xe5 });
        gbc.writeMem(0xfb6e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xfb6e);
        EXPECT(gbc.pc(), 0xde77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde76), 0xe5);
        EXPECT(gbc.readMem(0xfb6e), 0x47);
        EXPECT(gbc.readMem(0xfb6f), 0x7c);
        // E5 0098
        gbc.setState(0xbbe3, 0xbd7b, 0x9110, 0x7806, 0x3b1, 0xe324, 0x0, 0x1);
        gbc.writeMem(0xbbe3, { 0xe5 });
        gbc.writeMem(0xbd79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbd79);
        EXPECT(gbc.pc(), 0xbbe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe3), 0xe5);
        EXPECT(gbc.readMem(0xbd79), 0x24);
        EXPECT(gbc.readMem(0xbd7a), 0xe3);
        // E5 009B
        gbc.setState(0x5e1f, 0xaf5c, 0x2a0, 0xc21b, 0x77c1, 0x3ebc, 0x0, 0x1);
        gbc.writeMem(0x5e1f, { 0xe5 });
        gbc.writeMem(0xaf5a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xaf5a);
        EXPECT(gbc.pc(), 0x5e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf5a), 0xbc);
        EXPECT(gbc.readMem(0xaf5b), 0x3e);
        // E5 009F
        gbc.setState(0x1f8f, 0xe2d2, 0x3930, 0xc9ee, 0x253a, 0x518b, 0x1, 0x0);
        gbc.writeMem(0x1f8f, { 0xe5 });
        gbc.writeMem(0xe2d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe2d0);
        EXPECT(gbc.pc(), 0x1f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2d0), 0x8b);
        EXPECT(gbc.readMem(0xe2d1), 0x51);
        // E5 00A2
        gbc.setState(0xb70, 0xe20d, 0x22a0, 0x38da, 0x9913, 0x89c3, 0x0, 0x0);
        gbc.writeMem(0xb70, { 0xe5 });
        gbc.writeMem(0xe20b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe20b);
        EXPECT(gbc.pc(), 0xb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20b), 0xc3);
        EXPECT(gbc.readMem(0xe20c), 0x89);
        // E5 00A3
        gbc.setState(0x7360, 0xcc11, 0x85c0, 0x71ee, 0x6adc, 0xf93f, 0x0, 0x1);
        gbc.writeMem(0x7360, { 0xe5 });
        gbc.writeMem(0xcc0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xcc0f);
        EXPECT(gbc.pc(), 0x7361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc0f), 0x3f);
        EXPECT(gbc.readMem(0xcc10), 0xf9);
        // E5 00A9
        gbc.setState(0x159c, 0xb275, 0xd0, 0x969b, 0xff34, 0xcbf7, 0x1, 0x0);
        gbc.writeMem(0x159c, { 0xe5 });
        gbc.writeMem(0xb273, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb273);
        EXPECT(gbc.pc(), 0x159d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb273), 0xf7);
        EXPECT(gbc.readMem(0xb274), 0xcb);
        // E5 00AC
        gbc.setState(0x2be, 0xa61e, 0xfb0, 0x89a7, 0x72fd, 0x2d1f, 0x0, 0x1);
        gbc.writeMem(0x2be, { 0xe5 });
        gbc.writeMem(0xa61c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa61c);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa61c), 0x1f);
        EXPECT(gbc.readMem(0xa61d), 0x2d);
        // E5 00AE
        gbc.setState(0x6747, 0xced4, 0x6f30, 0x86db, 0x3e82, 0x4405, 0x1, 0x1);
        gbc.writeMem(0x6747, { 0xe5 });
        gbc.writeMem(0xced2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xced2);
        EXPECT(gbc.pc(), 0x6748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced2), 0x5);
        EXPECT(gbc.readMem(0xced3), 0x44);
        // E5 00AF
        gbc.setState(0x2cdc, 0x9f1a, 0x4dd0, 0xd397, 0xe8f5, 0x1df, 0x0, 0x0);
        gbc.writeMem(0x2cdc, { 0xe5 });
        gbc.writeMem(0x9f18, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9f18);
        EXPECT(gbc.pc(), 0x2cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f18), 0xdf);
        EXPECT(gbc.readMem(0x9f19), 0x1);
        // E5 00B2
        gbc.setState(0x98ad, 0x91e3, 0xd70, 0xe1e0, 0x99cf, 0x1970, 0x0, 0x1);
        gbc.writeMem(0x91e1, { 0x0, 0x0 });
        gbc.writeMem(0x98ad, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x91e1);
        EXPECT(gbc.pc(), 0x98ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91e1), 0x70);
        EXPECT(gbc.readMem(0x91e2), 0x19);
        EXPECT(gbc.readMem(0x98ad), 0xe5);
        // E5 00B4
        gbc.setState(0xe309, 0xdf7f, 0x9110, 0xccfe, 0xf6d4, 0x4b5f, 0x1, 0x1);
        gbc.writeMem(0xdf7d, { 0x0, 0x0 });
        gbc.writeMem(0xe309, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdf7d);
        EXPECT(gbc.pc(), 0xe30a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf7d), 0x5f);
        EXPECT(gbc.readMem(0xdf7e), 0x4b);
        EXPECT(gbc.readMem(0xe309), 0xe5);
        // E5 00B5
        gbc.setState(0xb2f3, 0xab9c, 0x2ca0, 0x9850, 0x707c, 0x3895, 0x0, 0x1);
        gbc.writeMem(0xab9a, { 0x0, 0x0 });
        gbc.writeMem(0xb2f3, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xab9a);
        EXPECT(gbc.pc(), 0xb2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9a), 0x95);
        EXPECT(gbc.readMem(0xab9b), 0x38);
        EXPECT(gbc.readMem(0xb2f3), 0xe5);
        // E5 00B6
        gbc.setState(0x2934, 0xb8ff, 0x4b70, 0x3e8b, 0x9d8d, 0x9b77, 0x1, 0x1);
        gbc.writeMem(0x2934, { 0xe5 });
        gbc.writeMem(0xb8fd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0x2935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8fd), 0x77);
        EXPECT(gbc.readMem(0xb8fe), 0x9b);
        // E5 00B8
        gbc.setState(0x4bf0, 0xe7bf, 0xb4f0, 0x67ad, 0xb5c1, 0x509b, 0x0, 0x1);
        gbc.writeMem(0x4bf0, { 0xe5 });
        gbc.writeMem(0xe7bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe7bd);
        EXPECT(gbc.pc(), 0x4bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bd), 0x9b);
        EXPECT(gbc.readMem(0xe7be), 0x50);
        // E5 00BA
        gbc.setState(0x4ca1, 0xd6c3, 0xb810, 0xa4e7, 0xed87, 0x4f10, 0x0, 0x0);
        gbc.writeMem(0x4ca1, { 0xe5 });
        gbc.writeMem(0xd6c1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd6c1);
        EXPECT(gbc.pc(), 0x4ca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c1), 0x10);
        EXPECT(gbc.readMem(0xd6c2), 0x4f);
        // E5 00C1
        gbc.setState(0x7b55, 0xd3aa, 0xfb20, 0x82cc, 0x7954, 0x86ef, 0x0, 0x1);
        gbc.writeMem(0x7b55, { 0xe5 });
        gbc.writeMem(0xd3a8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd3a8);
        EXPECT(gbc.pc(), 0x7b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a8), 0xef);
        EXPECT(gbc.readMem(0xd3a9), 0x86);
        // E5 00C2
        gbc.setState(0xc77b, 0xd20b, 0x21d0, 0x8a50, 0xe2e9, 0x2ad8, 0x0, 0x1);
        gbc.writeMem(0xc77b, { 0xe5 });
        gbc.writeMem(0xd209, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd209);
        EXPECT(gbc.pc(), 0xc77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc77b), 0xe5);
        EXPECT(gbc.readMem(0xd209), 0xd8);
        EXPECT(gbc.readMem(0xd20a), 0x2a);
        // E5 00C3
        gbc.setState(0xc36b, 0xf35c, 0x5350, 0xe8fe, 0xed15, 0x3bb3, 0x1, 0x0);
        gbc.writeMem(0xc36b, { 0xe5 });
        gbc.writeMem(0xf35a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf35a);
        EXPECT(gbc.pc(), 0xc36c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36b), 0xe5);
        EXPECT(gbc.readMem(0xf35a), 0xb3);
        EXPECT(gbc.readMem(0xf35b), 0x3b);
        // E5 00C4
        gbc.setState(0xa487, 0x89a2, 0x96e0, 0x4400, 0x3a28, 0xd29a, 0x0, 0x1);
        gbc.writeMem(0x89a0, { 0x0, 0x0 });
        gbc.writeMem(0xa487, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x89a0);
        EXPECT(gbc.pc(), 0xa488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89a0), 0x9a);
        EXPECT(gbc.readMem(0x89a1), 0xd2);
        EXPECT(gbc.readMem(0xa487), 0xe5);
        // E5 00C5
        gbc.setState(0xe095, 0x9755, 0xb7b0, 0x82d9, 0x5187, 0x2f06, 0x1, 0x1);
        gbc.writeMem(0x9753, { 0x0, 0x0 });
        gbc.writeMem(0xe095, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9753);
        EXPECT(gbc.pc(), 0xe096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9753), 0x6);
        EXPECT(gbc.readMem(0x9754), 0x2f);
        EXPECT(gbc.readMem(0xe095), 0xe5);
        // E5 00C7
        gbc.setState(0x85aa, 0xe75f, 0x1060, 0xc9c, 0x97ab, 0x542b, 0x0, 0x1);
        gbc.writeMem(0x85aa, { 0xe5 });
        gbc.writeMem(0xe75d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe75d);
        EXPECT(gbc.pc(), 0x85ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85aa), 0xe5);
        EXPECT(gbc.readMem(0xe75d), 0x2b);
        EXPECT(gbc.readMem(0xe75e), 0x54);
        // E5 00C8
        gbc.setState(0xaa96, 0xcdd9, 0xed90, 0x4c3c, 0x58bb, 0x60b, 0x0, 0x0);
        gbc.writeMem(0xaa96, { 0xe5 });
        gbc.writeMem(0xcdd7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcdd7);
        EXPECT(gbc.pc(), 0xaa97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa96), 0xe5);
        EXPECT(gbc.readMem(0xcdd7), 0xb);
        EXPECT(gbc.readMem(0xcdd8), 0x6);
        // E5 00CA
        gbc.setState(0xebc9, 0xbb1d, 0xa1f0, 0x387f, 0x2c26, 0xdf45, 0x1, 0x1);
        gbc.writeMem(0xbb1b, { 0x0, 0x0 });
        gbc.writeMem(0xebc9, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbb1b);
        EXPECT(gbc.pc(), 0xebca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb1b), 0x45);
        EXPECT(gbc.readMem(0xbb1c), 0xdf);
        EXPECT(gbc.readMem(0xebc9), 0xe5);
        // E5 00CB
        gbc.setState(0x62fc, 0xe67c, 0xf000, 0x265, 0xe466, 0x999f, 0x1, 0x1);
        gbc.writeMem(0x62fc, { 0xe5 });
        gbc.writeMem(0xe67a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe67a);
        EXPECT(gbc.pc(), 0x62fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67a), 0x9f);
        EXPECT(gbc.readMem(0xe67b), 0x99);
        // E5 00CC
        gbc.setState(0x41e5, 0xf90d, 0x3d00, 0xf8b, 0x2cef, 0x3fd, 0x0, 0x0);
        gbc.writeMem(0x41e5, { 0xe5 });
        gbc.writeMem(0xf90b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf90b);
        EXPECT(gbc.pc(), 0x41e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf90b), 0xfd);
        EXPECT(gbc.readMem(0xf90c), 0x3);
        // E5 00D1
        gbc.setState(0xc13, 0xd637, 0x730, 0xd472, 0xad5a, 0xf93e, 0x1, 0x1);
        gbc.writeMem(0xc13, { 0xe5 });
        gbc.writeMem(0xd635, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd635);
        EXPECT(gbc.pc(), 0xc14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd635), 0x3e);
        EXPECT(gbc.readMem(0xd636), 0xf9);
        // E5 00D2
        gbc.setState(0x3ded, 0xdb24, 0x6900, 0x33ad, 0x8687, 0x20fc, 0x1, 0x0);
        gbc.writeMem(0x3ded, { 0xe5 });
        gbc.writeMem(0xdb22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdb22);
        EXPECT(gbc.pc(), 0x3dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb22), 0xfc);
        EXPECT(gbc.readMem(0xdb23), 0x20);
        // E5 00D4
        gbc.setState(0x25c6, 0xc927, 0x56d0, 0x581c, 0xc9ca, 0xc2fb, 0x1, 0x0);
        gbc.writeMem(0x25c6, { 0xe5 });
        gbc.writeMem(0xc925, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc925);
        EXPECT(gbc.pc(), 0x25c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc925), 0xfb);
        EXPECT(gbc.readMem(0xc926), 0xc2);
        // E5 00D5
        gbc.setState(0xae73, 0xc6e0, 0xd260, 0xe08b, 0x979f, 0x2f86, 0x1, 0x1);
        gbc.writeMem(0xae73, { 0xe5 });
        gbc.writeMem(0xc6de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc6de);
        EXPECT(gbc.pc(), 0xae74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae73), 0xe5);
        EXPECT(gbc.readMem(0xc6de), 0x86);
        EXPECT(gbc.readMem(0xc6df), 0x2f);
        // E5 00D6
        gbc.setState(0x8e0a, 0xd08a, 0x3fc0, 0x67f6, 0x10f, 0xc8e4, 0x0, 0x0);
        gbc.writeMem(0x8e0a, { 0xe5 });
        gbc.writeMem(0xd088, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd088);
        EXPECT(gbc.pc(), 0x8e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e0a), 0xe5);
        EXPECT(gbc.readMem(0xd088), 0xe4);
        EXPECT(gbc.readMem(0xd089), 0xc8);
        // E5 00D9
        gbc.setState(0x36f7, 0x8d4a, 0x49d0, 0xa5fe, 0x98a6, 0xd284, 0x0, 0x0);
        gbc.writeMem(0x36f7, { 0xe5 });
        gbc.writeMem(0x8d48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8d48);
        EXPECT(gbc.pc(), 0x36f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d48), 0x84);
        EXPECT(gbc.readMem(0x8d49), 0xd2);
        // E5 00DB
        gbc.setState(0x88e2, 0xf35f, 0xdb00, 0x8bbd, 0x6be4, 0xed6b, 0x1, 0x0);
        gbc.writeMem(0x88e2, { 0xe5 });
        gbc.writeMem(0xf35d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf35d);
        EXPECT(gbc.pc(), 0x88e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e2), 0xe5);
        EXPECT(gbc.readMem(0xf35d), 0x6b);
        EXPECT(gbc.readMem(0xf35e), 0xed);
        // E5 00DC
        gbc.setState(0x6b91, 0xa2fe, 0xb610, 0xa998, 0x895f, 0x4aff, 0x1, 0x1);
        gbc.writeMem(0x6b91, { 0xe5 });
        gbc.writeMem(0xa2fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa2fc);
        EXPECT(gbc.pc(), 0x6b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2fc), 0xff);
        EXPECT(gbc.readMem(0xa2fd), 0x4a);
        // E5 00DD
        gbc.setState(0x79c9, 0xad7a, 0x4390, 0xb00f, 0xbb8b, 0xaf17, 0x1, 0x0);
        gbc.writeMem(0x79c9, { 0xe5 });
        gbc.writeMem(0xad78, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xad78);
        EXPECT(gbc.pc(), 0x79ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad78), 0x17);
        EXPECT(gbc.readMem(0xad79), 0xaf);
        // E5 00E0
        gbc.setState(0xbabd, 0xbed3, 0xea00, 0xabba, 0x8be9, 0xc819, 0x1, 0x0);
        gbc.writeMem(0xbabd, { 0xe5 });
        gbc.writeMem(0xbed1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbed1);
        EXPECT(gbc.pc(), 0xbabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbabd), 0xe5);
        EXPECT(gbc.readMem(0xbed1), 0x19);
        EXPECT(gbc.readMem(0xbed2), 0xc8);
        // E5 00E1
        gbc.setState(0xfd2, 0xf8fc, 0x5150, 0x3bac, 0x21c1, 0xab7a, 0x1, 0x0);
        gbc.writeMem(0xfd2, { 0xe5 });
        gbc.writeMem(0xf8fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf8fa);
        EXPECT(gbc.pc(), 0xfd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8fa), 0x7a);
        EXPECT(gbc.readMem(0xf8fb), 0xab);
        // E5 00E2
        gbc.setState(0x5a82, 0xd581, 0x4080, 0xd5ad, 0x5a5f, 0x91b5, 0x0, 0x0);
        gbc.writeMem(0x5a82, { 0xe5 });
        gbc.writeMem(0xd57f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd57f);
        EXPECT(gbc.pc(), 0x5a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57f), 0xb5);
        EXPECT(gbc.readMem(0xd580), 0x91);
        // E5 00E3
        gbc.setState(0xe7da, 0xb591, 0x5ce0, 0xfd0a, 0xd71a, 0x4c75, 0x0, 0x1);
        gbc.writeMem(0xb58f, { 0x0, 0x0 });
        gbc.writeMem(0xe7da, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb58f);
        EXPECT(gbc.pc(), 0xe7db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58f), 0x75);
        EXPECT(gbc.readMem(0xb590), 0x4c);
        EXPECT(gbc.readMem(0xe7da), 0xe5);
        // E5 00E5
        gbc.setState(0x7f76, 0xc069, 0xc1b0, 0xcd23, 0x407c, 0x9e80, 0x0, 0x1);
        gbc.writeMem(0x7f76, { 0xe5 });
        gbc.writeMem(0xc067, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc067);
        EXPECT(gbc.pc(), 0x7f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc067), 0x80);
        EXPECT(gbc.readMem(0xc068), 0x9e);
        // E5 00E7
        gbc.setState(0x5cc1, 0xb800, 0x53b0, 0xa3df, 0x8c0b, 0x9ba9, 0x0, 0x0);
        gbc.writeMem(0x5cc1, { 0xe5 });
        gbc.writeMem(0xb7fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb7fe);
        EXPECT(gbc.pc(), 0x5cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7fe), 0xa9);
        EXPECT(gbc.readMem(0xb7ff), 0x9b);
        // E5 00E9
        gbc.setState(0x74a7, 0x9649, 0x34d0, 0x9b23, 0x4499, 0x9f45, 0x1, 0x1);
        gbc.writeMem(0x74a7, { 0xe5 });
        gbc.writeMem(0x9647, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9647);
        EXPECT(gbc.pc(), 0x74a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9647), 0x45);
        EXPECT(gbc.readMem(0x9648), 0x9f);
        // E5 00F0
        gbc.setState(0x1709, 0xab30, 0xed00, 0xf832, 0x39b6, 0x876, 0x1, 0x1);
        gbc.writeMem(0x1709, { 0xe5 });
        gbc.writeMem(0xab2e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xab2e);
        EXPECT(gbc.pc(), 0x170a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2e), 0x76);
        EXPECT(gbc.readMem(0xab2f), 0x8);
        // E5 00F4
        gbc.setState(0x4143, 0xbd73, 0xf7a0, 0x6858, 0xdb28, 0x4a45, 0x1, 0x0);
        gbc.writeMem(0x4143, { 0xe5 });
        gbc.writeMem(0xbd71, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbd71);
        EXPECT(gbc.pc(), 0x4144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd71), 0x45);
        EXPECT(gbc.readMem(0xbd72), 0x4a);
        // E5 00F5
        gbc.setState(0xaaed, 0xe427, 0x80, 0x1ba6, 0x7ff1, 0xd1c7, 0x1, 0x1);
        gbc.writeMem(0xaaed, { 0xe5 });
        gbc.writeMem(0xe425, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe425);
        EXPECT(gbc.pc(), 0xaaee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaed), 0xe5);
        EXPECT(gbc.readMem(0xe425), 0xc7);
        EXPECT(gbc.readMem(0xe426), 0xd1);
        // E5 00F6
        gbc.setState(0xddfe, 0xabad, 0x3140, 0x969a, 0x865c, 0xbd02, 0x0, 0x0);
        gbc.writeMem(0xabab, { 0x0, 0x0 });
        gbc.writeMem(0xddfe, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xabab);
        EXPECT(gbc.pc(), 0xddff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabab), 0x2);
        EXPECT(gbc.readMem(0xabac), 0xbd);
        EXPECT(gbc.readMem(0xddfe), 0xe5);
        // E5 00FB
        gbc.setState(0xd60c, 0xa021, 0x3cd0, 0x2201, 0x62b5, 0x8b41, 0x1, 0x1);
        gbc.writeMem(0xa01f, { 0x0, 0x0 });
        gbc.writeMem(0xd60c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa01f);
        EXPECT(gbc.pc(), 0xd60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa01f), 0x41);
        EXPECT(gbc.readMem(0xa020), 0x8b);
        EXPECT(gbc.readMem(0xd60c), 0xe5);
        // E5 00FD
        gbc.setState(0xaf22, 0x80c8, 0x9e10, 0x705d, 0xa0ed, 0x549d, 0x0, 0x0);
        gbc.writeMem(0x80c6, { 0x0, 0x0 });
        gbc.writeMem(0xaf22, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x80c6);
        EXPECT(gbc.pc(), 0xaf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c6), 0x9d);
        EXPECT(gbc.readMem(0x80c7), 0x54);
        EXPECT(gbc.readMem(0xaf22), 0xe5);
        // E5 00FF
        gbc.setState(0xda7b, 0xd95b, 0x3100, 0xdd38, 0xf93, 0x938d, 0x0, 0x0);
        gbc.writeMem(0xd959, { 0x0, 0x0 });
        gbc.writeMem(0xda7b, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd959);
        EXPECT(gbc.pc(), 0xda7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd959), 0x8d);
        EXPECT(gbc.readMem(0xd95a), 0x93);
        EXPECT(gbc.readMem(0xda7b), 0xe5);
        // E5 0101
        gbc.setState(0xba31, 0xaef7, 0x8350, 0x5dca, 0x14ff, 0x30e5, 0x1, 0x0);
        gbc.writeMem(0xaef5, { 0x0, 0x0 });
        gbc.writeMem(0xba31, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xaef5);
        EXPECT(gbc.pc(), 0xba32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef5), 0xe5);
        EXPECT(gbc.readMem(0xaef6), 0x30);
        EXPECT(gbc.readMem(0xba31), 0xe5);
        // E5 0104
        gbc.setState(0xc6e8, 0xc7dc, 0x2b80, 0xb092, 0x462c, 0x770c, 0x1, 0x0);
        gbc.writeMem(0xc6e8, { 0xe5 });
        gbc.writeMem(0xc7da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc7da);
        EXPECT(gbc.pc(), 0xc6e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e8), 0xe5);
        EXPECT(gbc.readMem(0xc7da), 0xc);
        EXPECT(gbc.readMem(0xc7db), 0x77);
        // E5 0107
        gbc.setState(0x4d9a, 0xb1ba, 0x7d90, 0xdb67, 0xa881, 0x88ef, 0x0, 0x0);
        gbc.writeMem(0x4d9a, { 0xe5 });
        gbc.writeMem(0xb1b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb1b8);
        EXPECT(gbc.pc(), 0x4d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b8), 0xef);
        EXPECT(gbc.readMem(0xb1b9), 0x88);
        // E5 010A
        gbc.setState(0x8d32, 0xac8d, 0x9750, 0x7e2f, 0x7c61, 0x3909, 0x0, 0x1);
        gbc.writeMem(0x8d32, { 0xe5 });
        gbc.writeMem(0xac8b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xac8b);
        EXPECT(gbc.pc(), 0x8d33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d32), 0xe5);
        EXPECT(gbc.readMem(0xac8b), 0x9);
        EXPECT(gbc.readMem(0xac8c), 0x39);
        // E5 010B
        gbc.setState(0x30a9, 0xbda4, 0x4850, 0x140e, 0x8a73, 0xd595, 0x0, 0x0);
        gbc.writeMem(0x30a9, { 0xe5 });
        gbc.writeMem(0xbda2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbda2);
        EXPECT(gbc.pc(), 0x30aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda2), 0x95);
        EXPECT(gbc.readMem(0xbda3), 0xd5);
        // E5 010C
        gbc.setState(0x482d, 0xff5e, 0xa7f0, 0xa5f5, 0x7c7e, 0xf531, 0x0, 0x0);
        gbc.writeMem(0x482d, { 0xe5 });
        gbc.writeMem(0xff5c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xff5c);
        EXPECT(gbc.pc(), 0x482e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5c), 0x31);
        EXPECT(gbc.readMem(0xff5d), 0xf5);
        // E5 010D
        gbc.setState(0xe527, 0xb792, 0xac50, 0x1a13, 0xd9db, 0x433, 0x1, 0x0);
        gbc.writeMem(0xb790, { 0x0, 0x0 });
        gbc.writeMem(0xe527, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb790);
        EXPECT(gbc.pc(), 0xe528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb790), 0x33);
        EXPECT(gbc.readMem(0xb791), 0x4);
        EXPECT(gbc.readMem(0xe527), 0xe5);
        // E5 010F
        gbc.setState(0x6312, 0xff52, 0x6740, 0x7b9f, 0x2d11, 0xf3fc, 0x1, 0x1);
        gbc.writeMem(0x6312, { 0xe5 });
        gbc.writeMem(0xff50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xff50);
        EXPECT(gbc.pc(), 0x6313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff50), 0xfc);
        EXPECT(gbc.readMem(0xff51), 0xf3);
        // E5 0111
        gbc.setState(0xe0be, 0xf5b9, 0xb5b0, 0xfc4c, 0x4a99, 0x2de9, 0x0, 0x0);
        gbc.writeMem(0xe0be, { 0xe5 });
        gbc.writeMem(0xf5b7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf5b7);
        EXPECT(gbc.pc(), 0xe0bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0be), 0xe5);
        EXPECT(gbc.readMem(0xf5b7), 0xe9);
        EXPECT(gbc.readMem(0xf5b8), 0x2d);
        // E5 0113
        gbc.setState(0x51ed, 0xdb67, 0x2380, 0x44c9, 0xa62f, 0xfee7, 0x0, 0x0);
        gbc.writeMem(0x51ed, { 0xe5 });
        gbc.writeMem(0xdb65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdb65);
        EXPECT(gbc.pc(), 0x51ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb65), 0xe7);
        EXPECT(gbc.readMem(0xdb66), 0xfe);
        // E5 0114
        gbc.setState(0x482a, 0xaf7d, 0xcd40, 0x7838, 0x862d, 0x562, 0x1, 0x1);
        gbc.writeMem(0x482a, { 0xe5 });
        gbc.writeMem(0xaf7b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaf7b);
        EXPECT(gbc.pc(), 0x482b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7b), 0x62);
        EXPECT(gbc.readMem(0xaf7c), 0x5);
        // E5 0115
        gbc.setState(0xdc08, 0xd896, 0xb70, 0x957d, 0x83a5, 0x2642, 0x1, 0x0);
        gbc.writeMem(0xd894, { 0x0, 0x0 });
        gbc.writeMem(0xdc08, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd894);
        EXPECT(gbc.pc(), 0xdc09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd894), 0x42);
        EXPECT(gbc.readMem(0xd895), 0x26);
        EXPECT(gbc.readMem(0xdc08), 0xe5);
        // E5 0116
        gbc.setState(0x6597, 0xe419, 0x1ab0, 0xcbf7, 0xb890, 0xbaf4, 0x0, 0x1);
        gbc.writeMem(0x6597, { 0xe5 });
        gbc.writeMem(0xe417, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe417);
        EXPECT(gbc.pc(), 0x6598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe417), 0xf4);
        EXPECT(gbc.readMem(0xe418), 0xba);
        // E5 0117
        gbc.setState(0x7d99, 0xce08, 0x7ac0, 0xb9a2, 0xcfba, 0x3a69, 0x0, 0x1);
        gbc.writeMem(0x7d99, { 0xe5 });
        gbc.writeMem(0xce06, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xce06);
        EXPECT(gbc.pc(), 0x7d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce06), 0x69);
        EXPECT(gbc.readMem(0xce07), 0x3a);
        // E5 0119
        gbc.setState(0x137f, 0xa4a5, 0x2210, 0xe483, 0x8911, 0x313b, 0x1, 0x1);
        gbc.writeMem(0x137f, { 0xe5 });
        gbc.writeMem(0xa4a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa4a3);
        EXPECT(gbc.pc(), 0x1380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4a3), 0x3b);
        EXPECT(gbc.readMem(0xa4a4), 0x31);
        // E5 011B
        gbc.setState(0x233c, 0xaac0, 0xae80, 0x5971, 0xfe9c, 0x7c00, 0x0, 0x1);
        gbc.writeMem(0x233c, { 0xe5 });
        gbc.writeMem(0xaabe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xaabe);
        EXPECT(gbc.pc(), 0x233d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaabe), 0x0);
        EXPECT(gbc.readMem(0xaabf), 0x7c);
        // E5 011C
        gbc.setState(0x13ea, 0xe113, 0x4dd0, 0x8e9d, 0xc876, 0x8b2c, 0x1, 0x0);
        gbc.writeMem(0x13ea, { 0xe5 });
        gbc.writeMem(0xe111, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe111);
        EXPECT(gbc.pc(), 0x13eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe111), 0x2c);
        EXPECT(gbc.readMem(0xe112), 0x8b);
        // E5 011D
        gbc.setState(0xcc7a, 0xeda9, 0x9f50, 0xc87c, 0xafd6, 0x1a6b, 0x1, 0x0);
        gbc.writeMem(0xcc7a, { 0xe5 });
        gbc.writeMem(0xeda7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xeda7);
        EXPECT(gbc.pc(), 0xcc7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7a), 0xe5);
        EXPECT(gbc.readMem(0xeda7), 0x6b);
        EXPECT(gbc.readMem(0xeda8), 0x1a);
        // E5 011E
        gbc.setState(0xdff2, 0xd2b7, 0x6070, 0x3813, 0x49a8, 0x4166, 0x1, 0x1);
        gbc.writeMem(0xd2b5, { 0x0, 0x0 });
        gbc.writeMem(0xdff2, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0xdff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b5), 0x66);
        EXPECT(gbc.readMem(0xd2b6), 0x41);
        EXPECT(gbc.readMem(0xdff2), 0xe5);
        // E5 0123
        gbc.setState(0x3ebd, 0xa873, 0x8bd0, 0x3ed1, 0x41a1, 0xccb7, 0x1, 0x1);
        gbc.writeMem(0x3ebd, { 0xe5 });
        gbc.writeMem(0xa871, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa871);
        EXPECT(gbc.pc(), 0x3ebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa871), 0xb7);
        EXPECT(gbc.readMem(0xa872), 0xcc);
        // E5 0124
        gbc.setState(0x38b0, 0xd887, 0x6440, 0x3eb5, 0xc2d4, 0xf379, 0x1, 0x0);
        gbc.writeMem(0x38b0, { 0xe5 });
        gbc.writeMem(0xd885, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd885);
        EXPECT(gbc.pc(), 0x38b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd885), 0x79);
        EXPECT(gbc.readMem(0xd886), 0xf3);
        // E5 0125
        gbc.setState(0x6f03, 0xa0cb, 0x3970, 0x447c, 0x8bdd, 0xfc67, 0x0, 0x1);
        gbc.writeMem(0x6f03, { 0xe5 });
        gbc.writeMem(0xa0c9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa0c9);
        EXPECT(gbc.pc(), 0x6f04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c9), 0x67);
        EXPECT(gbc.readMem(0xa0ca), 0xfc);
        // E5 0126
        gbc.setState(0x826, 0xbf47, 0x5820, 0x5a59, 0x506b, 0x5518, 0x1, 0x1);
        gbc.writeMem(0x826, { 0xe5 });
        gbc.writeMem(0xbf45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xbf45);
        EXPECT(gbc.pc(), 0x827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf45), 0x18);
        EXPECT(gbc.readMem(0xbf46), 0x55);
        // E5 0127
        gbc.setState(0xa711, 0xed24, 0x8660, 0x3b4b, 0x9185, 0x10a0, 0x1, 0x1);
        gbc.writeMem(0xa711, { 0xe5 });
        gbc.writeMem(0xed22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0xa712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa711), 0xe5);
        EXPECT(gbc.readMem(0xed22), 0xa0);
        EXPECT(gbc.readMem(0xed23), 0x10);
        // E5 0128
        gbc.setState(0x7238, 0xc7db, 0x74d0, 0xe40c, 0x8c57, 0xdedc, 0x1, 0x0);
        gbc.writeMem(0x7238, { 0xe5 });
        gbc.writeMem(0xc7d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc7d9);
        EXPECT(gbc.pc(), 0x7239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d9), 0xdc);
        EXPECT(gbc.readMem(0xc7da), 0xde);
        // E5 012A
        gbc.setState(0xde51, 0x9339, 0x17d0, 0x2ed7, 0xc6e2, 0xefd, 0x0, 0x1);
        gbc.writeMem(0x9337, { 0x0, 0x0 });
        gbc.writeMem(0xde51, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9337);
        EXPECT(gbc.pc(), 0xde52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9337), 0xfd);
        EXPECT(gbc.readMem(0x9338), 0xe);
        EXPECT(gbc.readMem(0xde51), 0xe5);
        // E5 012B
        gbc.setState(0x7b46, 0x88f1, 0xc50, 0x130, 0xaa60, 0x2e1c, 0x0, 0x1);
        gbc.writeMem(0x7b46, { 0xe5 });
        gbc.writeMem(0x88ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x88ef);
        EXPECT(gbc.pc(), 0x7b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ef), 0x1c);
        EXPECT(gbc.readMem(0x88f0), 0x2e);
        // E5 012C
        gbc.setState(0x547d, 0xd1b6, 0x3aa0, 0xab8c, 0x31c0, 0x7fbb, 0x0, 0x1);
        gbc.writeMem(0x547d, { 0xe5 });
        gbc.writeMem(0xd1b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd1b4);
        EXPECT(gbc.pc(), 0x547e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b4), 0xbb);
        EXPECT(gbc.readMem(0xd1b5), 0x7f);
        // E5 012E
        gbc.setState(0xb16a, 0xb789, 0x9a0, 0x6101, 0x32f1, 0xbf2f, 0x1, 0x0);
        gbc.writeMem(0xb16a, { 0xe5 });
        gbc.writeMem(0xb787, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb787);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb16a), 0xe5);
        EXPECT(gbc.readMem(0xb787), 0x2f);
        EXPECT(gbc.readMem(0xb788), 0xbf);
        // E5 0135
        gbc.setState(0x4795, 0x834b, 0xddc0, 0xb587, 0x62a1, 0xf460, 0x0, 0x0);
        gbc.writeMem(0x4795, { 0xe5 });
        gbc.writeMem(0x8349, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8349);
        EXPECT(gbc.pc(), 0x4796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8349), 0x60);
        EXPECT(gbc.readMem(0x834a), 0xf4);
        // E5 0137
        gbc.setState(0x8067, 0xd7ba, 0x19f0, 0x28f3, 0xeb48, 0xa7b1, 0x0, 0x0);
        gbc.writeMem(0x8067, { 0xe5 });
        gbc.writeMem(0xd7b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd7b8);
        EXPECT(gbc.pc(), 0x8068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8067), 0xe5);
        EXPECT(gbc.readMem(0xd7b8), 0xb1);
        EXPECT(gbc.readMem(0xd7b9), 0xa7);
        // E5 0138
        gbc.setState(0xd836, 0x9d80, 0x5c00, 0xfeb5, 0xcde1, 0xa00d, 0x1, 0x1);
        gbc.writeMem(0x9d7e, { 0x0, 0x0 });
        gbc.writeMem(0xd836, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9d7e);
        EXPECT(gbc.pc(), 0xd837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7e), 0xd);
        EXPECT(gbc.readMem(0x9d7f), 0xa0);
        EXPECT(gbc.readMem(0xd836), 0xe5);
        // E5 013B
        gbc.setState(0xd65a, 0x9108, 0x5e30, 0xbd4a, 0x292f, 0xb933, 0x1, 0x1);
        gbc.writeMem(0x9106, { 0x0, 0x0 });
        gbc.writeMem(0xd65a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9106);
        EXPECT(gbc.pc(), 0xd65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9106), 0x33);
        EXPECT(gbc.readMem(0x9107), 0xb9);
        EXPECT(gbc.readMem(0xd65a), 0xe5);
        // E5 013D
        gbc.setState(0xa498, 0x9469, 0x6880, 0x9e1f, 0x22ed, 0xbe8b, 0x1, 0x1);
        gbc.writeMem(0x9467, { 0x0, 0x0 });
        gbc.writeMem(0xa498, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9467);
        EXPECT(gbc.pc(), 0xa499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9467), 0x8b);
        EXPECT(gbc.readMem(0x9468), 0xbe);
        EXPECT(gbc.readMem(0xa498), 0xe5);
        // E5 013E
        gbc.setState(0xd438, 0xe12b, 0x77e0, 0xbb37, 0xaf23, 0xefd4, 0x1, 0x1);
        gbc.writeMem(0xd438, { 0xe5 });
        gbc.writeMem(0xe129, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe129);
        EXPECT(gbc.pc(), 0xd439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd438), 0xe5);
        EXPECT(gbc.readMem(0xe129), 0xd4);
        EXPECT(gbc.readMem(0xe12a), 0xef);
        // E5 013F
        gbc.setState(0xd072, 0xfbcc, 0x8720, 0xe495, 0xe6e0, 0x9e41, 0x0, 0x0);
        gbc.writeMem(0xd072, { 0xe5 });
        gbc.writeMem(0xfbca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xfbca);
        EXPECT(gbc.pc(), 0xd073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd072), 0xe5);
        EXPECT(gbc.readMem(0xfbca), 0x41);
        EXPECT(gbc.readMem(0xfbcb), 0x9e);
        // E5 0140
        gbc.setState(0x4a10, 0xaf16, 0xfe00, 0xa61a, 0xb869, 0x980b, 0x0, 0x1);
        gbc.writeMem(0x4a10, { 0xe5 });
        gbc.writeMem(0xaf14, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xaf14);
        EXPECT(gbc.pc(), 0x4a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf14), 0xb);
        EXPECT(gbc.readMem(0xaf15), 0x98);
        // E5 0143
        gbc.setState(0x6549, 0xa0e8, 0x25a0, 0x4c66, 0xe2eb, 0x1e82, 0x0, 0x1);
        gbc.writeMem(0x6549, { 0xe5 });
        gbc.writeMem(0xa0e6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa0e6);
        EXPECT(gbc.pc(), 0x654a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e6), 0x82);
        EXPECT(gbc.readMem(0xa0e7), 0x1e);
        // E5 0147
        gbc.setState(0x6f42, 0x88b0, 0xf6c0, 0x93c4, 0x36d1, 0x49ca, 0x0, 0x1);
        gbc.writeMem(0x6f42, { 0xe5 });
        gbc.writeMem(0x88ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x88ae);
        EXPECT(gbc.pc(), 0x6f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ae), 0xca);
        EXPECT(gbc.readMem(0x88af), 0x49);
        // E5 0148
        gbc.setState(0x4717, 0xb1a1, 0x9870, 0x459c, 0x512f, 0x6635, 0x0, 0x0);
        gbc.writeMem(0x4717, { 0xe5 });
        gbc.writeMem(0xb19f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb19f);
        EXPECT(gbc.pc(), 0x4718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19f), 0x35);
        EXPECT(gbc.readMem(0xb1a0), 0x66);
        // E5 0149
        gbc.setState(0xa017, 0x85cd, 0xdfd0, 0x56ae, 0xc780, 0xa7e9, 0x0, 0x1);
        gbc.writeMem(0x85cb, { 0x0, 0x0 });
        gbc.writeMem(0xa017, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x85cb);
        EXPECT(gbc.pc(), 0xa018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cb), 0xe9);
        EXPECT(gbc.readMem(0x85cc), 0xa7);
        EXPECT(gbc.readMem(0xa017), 0xe5);
        // E5 014A
        gbc.setState(0x67c7, 0xd228, 0x5320, 0x919b, 0xa6a0, 0xe1f0, 0x0, 0x0);
        gbc.writeMem(0x67c7, { 0xe5 });
        gbc.writeMem(0xd226, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd226);
        EXPECT(gbc.pc(), 0x67c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd226), 0xf0);
        EXPECT(gbc.readMem(0xd227), 0xe1);
        // E5 014C
        gbc.setState(0x3296, 0x8fe8, 0xff40, 0xad53, 0xe803, 0x5da5, 0x0, 0x0);
        gbc.writeMem(0x3296, { 0xe5 });
        gbc.writeMem(0x8fe6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8fe6);
        EXPECT(gbc.pc(), 0x3297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe6), 0xa5);
        EXPECT(gbc.readMem(0x8fe7), 0x5d);
        // E5 014D
        gbc.setState(0x9f16, 0xe10d, 0xadf0, 0x5afb, 0x3397, 0x5ddc, 0x0, 0x1);
        gbc.writeMem(0x9f16, { 0xe5 });
        gbc.writeMem(0xe10b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe10b);
        EXPECT(gbc.pc(), 0x9f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f16), 0xe5);
        EXPECT(gbc.readMem(0xe10b), 0xdc);
        EXPECT(gbc.readMem(0xe10c), 0x5d);
        // E5 014E
        gbc.setState(0x2960, 0xe2cb, 0xbfe0, 0x28cf, 0x6c0e, 0x6a5b, 0x0, 0x0);
        gbc.writeMem(0x2960, { 0xe5 });
        gbc.writeMem(0xe2c9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe2c9);
        EXPECT(gbc.pc(), 0x2961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c9), 0x5b);
        EXPECT(gbc.readMem(0xe2ca), 0x6a);
        // E5 0153
        gbc.setState(0x85a, 0xcf10, 0x3430, 0x290d, 0x44ce, 0x5e0c, 0x0, 0x0);
        gbc.writeMem(0x85a, { 0xe5 });
        gbc.writeMem(0xcf0e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xcf0e);
        EXPECT(gbc.pc(), 0x85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf0e), 0xc);
        EXPECT(gbc.readMem(0xcf0f), 0x5e);
        // E5 0155
        gbc.setState(0x468b, 0xe0d9, 0xdc0, 0xcb24, 0x5ed1, 0x38cd, 0x0, 0x1);
        gbc.writeMem(0x468b, { 0xe5 });
        gbc.writeMem(0xe0d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe0d7);
        EXPECT(gbc.pc(), 0x468c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d7), 0xcd);
        EXPECT(gbc.readMem(0xe0d8), 0x38);
        // E5 0156
        gbc.setState(0x77f7, 0xd53c, 0x87d0, 0xe033, 0x88e8, 0x5036, 0x1, 0x0);
        gbc.writeMem(0x77f7, { 0xe5 });
        gbc.writeMem(0xd53a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd53a);
        EXPECT(gbc.pc(), 0x77f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd53a), 0x36);
        EXPECT(gbc.readMem(0xd53b), 0x50);
        // E5 0157
        gbc.setState(0xa477, 0xa5df, 0xb760, 0x8548, 0xfb95, 0x94af, 0x1, 0x1);
        gbc.writeMem(0xa477, { 0xe5 });
        gbc.writeMem(0xa5dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa5dd);
        EXPECT(gbc.pc(), 0xa478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa477), 0xe5);
        EXPECT(gbc.readMem(0xa5dd), 0xaf);
        EXPECT(gbc.readMem(0xa5de), 0x94);
        // E5 0159
        gbc.setState(0x7643, 0xdf5f, 0xe5b0, 0x3942, 0xd7fc, 0x74ad, 0x0, 0x1);
        gbc.writeMem(0x7643, { 0xe5 });
        gbc.writeMem(0xdf5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xdf5d);
        EXPECT(gbc.pc(), 0x7644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5d), 0xad);
        EXPECT(gbc.readMem(0xdf5e), 0x74);
        // E5 015A
        gbc.setState(0x826f, 0xc62e, 0xb950, 0x93ef, 0xaf9f, 0x2e52, 0x0, 0x1);
        gbc.writeMem(0x826f, { 0xe5 });
        gbc.writeMem(0xc62c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc62c);
        EXPECT(gbc.pc(), 0x8270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826f), 0xe5);
        EXPECT(gbc.readMem(0xc62c), 0x52);
        EXPECT(gbc.readMem(0xc62d), 0x2e);
        // E5 015B
        gbc.setState(0x1f7b, 0xfc7f, 0x1000, 0x1138, 0x1abd, 0xca5a, 0x1, 0x0);
        gbc.writeMem(0x1f7b, { 0xe5 });
        gbc.writeMem(0xfc7d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfc7d);
        EXPECT(gbc.pc(), 0x1f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc7d), 0x5a);
        EXPECT(gbc.readMem(0xfc7e), 0xca);
        // E5 015C
        gbc.setState(0xee33, 0xa01a, 0x4a80, 0xead5, 0xba3, 0x17c8, 0x0, 0x1);
        gbc.writeMem(0xa018, { 0x0, 0x0 });
        gbc.writeMem(0xee33, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa018);
        EXPECT(gbc.pc(), 0xee34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa018), 0xc8);
        EXPECT(gbc.readMem(0xa019), 0x17);
        EXPECT(gbc.readMem(0xee33), 0xe5);
        // E5 015F
        gbc.setState(0x21e6, 0xdf7d, 0x2400, 0xf6a1, 0x583b, 0x4bc5, 0x0, 0x0);
        gbc.writeMem(0x21e6, { 0xe5 });
        gbc.writeMem(0xdf7b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0x21e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf7b), 0xc5);
        EXPECT(gbc.readMem(0xdf7c), 0x4b);
        // E5 0160
        gbc.setState(0x3f30, 0xc12a, 0xb120, 0x2e3c, 0x3ca4, 0xf041, 0x1, 0x1);
        gbc.writeMem(0x3f30, { 0xe5 });
        gbc.writeMem(0xc128, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc128);
        EXPECT(gbc.pc(), 0x3f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc128), 0x41);
        EXPECT(gbc.readMem(0xc129), 0xf0);
        // E5 0163
        gbc.setState(0xe38b, 0xb692, 0xd190, 0x5697, 0xac12, 0xa63d, 0x1, 0x0);
        gbc.writeMem(0xb690, { 0x0, 0x0 });
        gbc.writeMem(0xe38b, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb690);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb690), 0x3d);
        EXPECT(gbc.readMem(0xb691), 0xa6);
        EXPECT(gbc.readMem(0xe38b), 0xe5);
        // E5 0164
        gbc.setState(0x7fbd, 0xfad0, 0x1ff0, 0xa0ea, 0xe90d, 0x6a7d, 0x1, 0x0);
        gbc.writeMem(0x7fbd, { 0xe5 });
        gbc.writeMem(0xface, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xface);
        EXPECT(gbc.pc(), 0x7fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xface), 0x7d);
        EXPECT(gbc.readMem(0xfacf), 0x6a);
        // E5 0166
        gbc.setState(0xe0d0, 0xbed8, 0xf680, 0xf8b4, 0x8370, 0x262d, 0x1, 0x1);
        gbc.writeMem(0xbed6, { 0x0, 0x0 });
        gbc.writeMem(0xe0d0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbed6);
        EXPECT(gbc.pc(), 0xe0d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed6), 0x2d);
        EXPECT(gbc.readMem(0xbed7), 0x26);
        EXPECT(gbc.readMem(0xe0d0), 0xe5);
        // E5 016F
        gbc.setState(0x9918, 0xfd6c, 0xf9c0, 0xb7fe, 0x884f, 0x6959, 0x0, 0x0);
        gbc.writeMem(0x9918, { 0xe5 });
        gbc.writeMem(0xfd6a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfd6a);
        EXPECT(gbc.pc(), 0x9919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9918), 0xe5);
        EXPECT(gbc.readMem(0xfd6a), 0x59);
        EXPECT(gbc.readMem(0xfd6b), 0x69);
        // E5 0170
        gbc.setState(0xe3bf, 0xa025, 0x7140, 0xed61, 0x1e62, 0x3500, 0x1, 0x1);
        gbc.writeMem(0xa023, { 0x0, 0x0 });
        gbc.writeMem(0xe3bf, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa023);
        EXPECT(gbc.pc(), 0xe3c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa023), 0x0);
        EXPECT(gbc.readMem(0xa024), 0x35);
        EXPECT(gbc.readMem(0xe3bf), 0xe5);
        // E5 0176
        gbc.setState(0xed98, 0xac26, 0xc290, 0x924a, 0xd697, 0x9876, 0x1, 0x1);
        gbc.writeMem(0xac24, { 0x0, 0x0 });
        gbc.writeMem(0xed98, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xac24);
        EXPECT(gbc.pc(), 0xed99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac24), 0x76);
        EXPECT(gbc.readMem(0xac25), 0x98);
        EXPECT(gbc.readMem(0xed98), 0xe5);
        // E5 0177
        gbc.setState(0x89cf, 0xe8d5, 0x8e40, 0x63d1, 0xa399, 0x8b95, 0x0, 0x0);
        gbc.writeMem(0x89cf, { 0xe5 });
        gbc.writeMem(0xe8d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe8d3);
        EXPECT(gbc.pc(), 0x89d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cf), 0xe5);
        EXPECT(gbc.readMem(0xe8d3), 0x95);
        EXPECT(gbc.readMem(0xe8d4), 0x8b);
        // E5 017B
        gbc.setState(0x96e0, 0x8494, 0xca20, 0x2d4e, 0xa194, 0xceb6, 0x0, 0x0);
        gbc.writeMem(0x8492, { 0x0, 0x0 });
        gbc.writeMem(0x96e0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0x96e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8492), 0xb6);
        EXPECT(gbc.readMem(0x8493), 0xce);
        EXPECT(gbc.readMem(0x96e0), 0xe5);
        // E5 017F
        gbc.setState(0xb503, 0xaa22, 0xe150, 0x3497, 0xc3c4, 0xf3fc, 0x1, 0x1);
        gbc.writeMem(0xaa20, { 0x0, 0x0 });
        gbc.writeMem(0xb503, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaa20);
        EXPECT(gbc.pc(), 0xb504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa20), 0xfc);
        EXPECT(gbc.readMem(0xaa21), 0xf3);
        EXPECT(gbc.readMem(0xb503), 0xe5);
        // E5 0180
        gbc.setState(0x9593, 0xf1c5, 0x4260, 0x364, 0x200e, 0x71a4, 0x1, 0x1);
        gbc.writeMem(0x9593, { 0xe5 });
        gbc.writeMem(0xf1c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf1c3);
        EXPECT(gbc.pc(), 0x9594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9593), 0xe5);
        EXPECT(gbc.readMem(0xf1c3), 0xa4);
        EXPECT(gbc.readMem(0xf1c4), 0x71);
        // E5 0183
        gbc.setState(0x4d61, 0xab37, 0x4c30, 0x3212, 0xb193, 0x198b, 0x1, 0x0);
        gbc.writeMem(0x4d61, { 0xe5 });
        gbc.writeMem(0xab35, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xab35);
        EXPECT(gbc.pc(), 0x4d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab35), 0x8b);
        EXPECT(gbc.readMem(0xab36), 0x19);
        // E5 0185
        gbc.setState(0x9172, 0xcc7c, 0xbea0, 0x59f6, 0xad0, 0x310a, 0x1, 0x0);
        gbc.writeMem(0x9172, { 0xe5 });
        gbc.writeMem(0xcc7a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcc7a);
        EXPECT(gbc.pc(), 0x9173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9172), 0xe5);
        EXPECT(gbc.readMem(0xcc7a), 0xa);
        EXPECT(gbc.readMem(0xcc7b), 0x31);
        // E5 0186
        gbc.setState(0xdb72, 0xef1b, 0x35c0, 0x8c34, 0xf194, 0xf1e, 0x0, 0x1);
        gbc.writeMem(0xdb72, { 0xe5 });
        gbc.writeMem(0xef19, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xef19);
        EXPECT(gbc.pc(), 0xdb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb72), 0xe5);
        EXPECT(gbc.readMem(0xef19), 0x1e);
        EXPECT(gbc.readMem(0xef1a), 0xf);
        // E5 018A
        gbc.setState(0x6851, 0xaca9, 0xae0, 0x123e, 0x6d80, 0x1ab4, 0x0, 0x0);
        gbc.writeMem(0x6851, { 0xe5 });
        gbc.writeMem(0xaca7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xaca7);
        EXPECT(gbc.pc(), 0x6852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca7), 0xb4);
        EXPECT(gbc.readMem(0xaca8), 0x1a);
        // E5 018D
        gbc.setState(0xd18f, 0x9fac, 0x8710, 0xd53b, 0x3aa, 0x4e45, 0x1, 0x0);
        gbc.writeMem(0x9faa, { 0x0, 0x0 });
        gbc.writeMem(0xd18f, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9faa);
        EXPECT(gbc.pc(), 0xd190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9faa), 0x45);
        EXPECT(gbc.readMem(0x9fab), 0x4e);
        EXPECT(gbc.readMem(0xd18f), 0xe5);
        // E5 018E
        gbc.setState(0x2e04, 0xd32c, 0x1a50, 0x1323, 0x4996, 0x6cb0, 0x1, 0x1);
        gbc.writeMem(0x2e04, { 0xe5 });
        gbc.writeMem(0xd32a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd32a);
        EXPECT(gbc.pc(), 0x2e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd32a), 0xb0);
        EXPECT(gbc.readMem(0xd32b), 0x6c);
        // E5 0191
        gbc.setState(0x3d46, 0x84c2, 0x25f0, 0xbaba, 0xe9d2, 0x5235, 0x0, 0x0);
        gbc.writeMem(0x3d46, { 0xe5 });
        gbc.writeMem(0x84c0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x84c0);
        EXPECT(gbc.pc(), 0x3d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c0), 0x35);
        EXPECT(gbc.readMem(0x84c1), 0x52);
        // E5 0193
        gbc.setState(0xad97, 0xed91, 0x2cb0, 0xe0d6, 0x1d6c, 0xc072, 0x0, 0x1);
        gbc.writeMem(0xad97, { 0xe5 });
        gbc.writeMem(0xed8f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xed8f);
        EXPECT(gbc.pc(), 0xad98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad97), 0xe5);
        EXPECT(gbc.readMem(0xed8f), 0x72);
        EXPECT(gbc.readMem(0xed90), 0xc0);
        // E5 0196
        gbc.setState(0x327c, 0x8c29, 0xa350, 0x4c9a, 0xfd3c, 0x42cc, 0x1, 0x1);
        gbc.writeMem(0x327c, { 0xe5 });
        gbc.writeMem(0x8c27, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8c27);
        EXPECT(gbc.pc(), 0x327d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c27), 0xcc);
        EXPECT(gbc.readMem(0x8c28), 0x42);
        // E5 0197
        gbc.setState(0x196f, 0xbdc0, 0xbc0, 0xa45c, 0xfeb1, 0x14ff, 0x0, 0x0);
        gbc.writeMem(0x196f, { 0xe5 });
        gbc.writeMem(0xbdbe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbdbe);
        EXPECT(gbc.pc(), 0x1970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdbe), 0xff);
        EXPECT(gbc.readMem(0xbdbf), 0x14);
        // E5 0198
        gbc.setState(0xd192, 0x8d18, 0xdd50, 0x46fd, 0xf49e, 0x2845, 0x0, 0x1);
        gbc.writeMem(0x8d16, { 0x0, 0x0 });
        gbc.writeMem(0xd192, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8d16);
        EXPECT(gbc.pc(), 0xd193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d16), 0x45);
        EXPECT(gbc.readMem(0x8d17), 0x28);
        EXPECT(gbc.readMem(0xd192), 0xe5);
        // E5 0199
        gbc.setState(0xbf71, 0x9c96, 0x3710, 0xcabe, 0x282b, 0x54c3, 0x0, 0x1);
        gbc.writeMem(0x9c94, { 0x0, 0x0 });
        gbc.writeMem(0xbf71, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9c94);
        EXPECT(gbc.pc(), 0xbf72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c94), 0xc3);
        EXPECT(gbc.readMem(0x9c95), 0x54);
        EXPECT(gbc.readMem(0xbf71), 0xe5);
        // E5 019A
        gbc.setState(0x5531, 0xeb5b, 0xae10, 0x607c, 0xd04a, 0xc408, 0x0, 0x1);
        gbc.writeMem(0x5531, { 0xe5 });
        gbc.writeMem(0xeb59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xeb59);
        EXPECT(gbc.pc(), 0x5532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb59), 0x8);
        EXPECT(gbc.readMem(0xeb5a), 0xc4);
        // E5 019C
        gbc.setState(0xca20, 0xd89c, 0xaea0, 0x38f6, 0x4196, 0xc59e, 0x0, 0x0);
        gbc.writeMem(0xca20, { 0xe5 });
        gbc.writeMem(0xd89a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd89a);
        EXPECT(gbc.pc(), 0xca21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca20), 0xe5);
        EXPECT(gbc.readMem(0xd89a), 0x9e);
        EXPECT(gbc.readMem(0xd89b), 0xc5);
        // E5 019D
        gbc.setState(0x5819, 0xc4ce, 0x8480, 0xac0d, 0x6510, 0x69e, 0x1, 0x0);
        gbc.writeMem(0x5819, { 0xe5 });
        gbc.writeMem(0xc4cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc4cc);
        EXPECT(gbc.pc(), 0x581a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cc), 0x9e);
        EXPECT(gbc.readMem(0xc4cd), 0x6);
        // E5 019F
        gbc.setState(0x7879, 0x93d6, 0x8830, 0x84df, 0xa4c3, 0xbcff, 0x0, 0x0);
        gbc.writeMem(0x7879, { 0xe5 });
        gbc.writeMem(0x93d4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x93d4);
        EXPECT(gbc.pc(), 0x787a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d4), 0xff);
        EXPECT(gbc.readMem(0x93d5), 0xbc);
        // E5 01A1
        gbc.setState(0xe95c, 0xf709, 0x1220, 0xd3d9, 0xf586, 0xac0e, 0x0, 0x1);
        gbc.writeMem(0xe95c, { 0xe5 });
        gbc.writeMem(0xf707, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf707);
        EXPECT(gbc.pc(), 0xe95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95c), 0xe5);
        EXPECT(gbc.readMem(0xf707), 0xe);
        EXPECT(gbc.readMem(0xf708), 0xac);
        // E5 01A2
        gbc.setState(0xcb3e, 0x957e, 0x4510, 0x20a2, 0xdc08, 0x751a, 0x1, 0x0);
        gbc.writeMem(0x957c, { 0x0, 0x0 });
        gbc.writeMem(0xcb3e, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x957c);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957c), 0x1a);
        EXPECT(gbc.readMem(0x957d), 0x75);
        EXPECT(gbc.readMem(0xcb3e), 0xe5);
        // E5 01A3
        gbc.setState(0x444c, 0xe656, 0x620, 0xfecf, 0x6909, 0x4fda, 0x1, 0x1);
        gbc.writeMem(0x444c, { 0xe5 });
        gbc.writeMem(0xe654, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe654);
        EXPECT(gbc.pc(), 0x444d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe654), 0xda);
        EXPECT(gbc.readMem(0xe655), 0x4f);
        // E5 01A4
        gbc.setState(0x931c, 0xd760, 0x8230, 0x7efa, 0xb746, 0x9779, 0x0, 0x0);
        gbc.writeMem(0x931c, { 0xe5 });
        gbc.writeMem(0xd75e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd75e);
        EXPECT(gbc.pc(), 0x931d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931c), 0xe5);
        EXPECT(gbc.readMem(0xd75e), 0x79);
        EXPECT(gbc.readMem(0xd75f), 0x97);
        // E5 01A5
        gbc.setState(0x453, 0x80eb, 0xc830, 0xb064, 0x77d9, 0x7789, 0x0, 0x0);
        gbc.writeMem(0x453, { 0xe5 });
        gbc.writeMem(0x80e9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x80e9);
        EXPECT(gbc.pc(), 0x454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e9), 0x89);
        EXPECT(gbc.readMem(0x80ea), 0x77);
        // E5 01A7
        gbc.setState(0x8d6f, 0x93dc, 0x45e0, 0x7b56, 0xa11b, 0x7d42, 0x0, 0x0);
        gbc.writeMem(0x8d6f, { 0xe5 });
        gbc.writeMem(0x93da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x93da);
        EXPECT(gbc.pc(), 0x8d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6f), 0xe5);
        EXPECT(gbc.readMem(0x93da), 0x42);
        EXPECT(gbc.readMem(0x93db), 0x7d);
        // E5 01A9
        gbc.setState(0x5a71, 0xa58a, 0xd820, 0x9bc, 0x2afb, 0x43e0, 0x0, 0x1);
        gbc.writeMem(0x5a71, { 0xe5 });
        gbc.writeMem(0xa588, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa588);
        EXPECT(gbc.pc(), 0x5a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa588), 0xe0);
        EXPECT(gbc.readMem(0xa589), 0x43);
        // E5 01AB
        gbc.setState(0xa689, 0xb7c8, 0x570, 0x1f75, 0xe37a, 0x88f5, 0x1, 0x0);
        gbc.writeMem(0xa689, { 0xe5 });
        gbc.writeMem(0xb7c6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb7c6);
        EXPECT(gbc.pc(), 0xa68a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa689), 0xe5);
        EXPECT(gbc.readMem(0xb7c6), 0xf5);
        EXPECT(gbc.readMem(0xb7c7), 0x88);
        // E5 01AE
        gbc.setState(0x945d, 0xeb19, 0x5080, 0x52e7, 0x7aec, 0x65fa, 0x1, 0x0);
        gbc.writeMem(0x945d, { 0xe5 });
        gbc.writeMem(0xeb17, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xeb17);
        EXPECT(gbc.pc(), 0x945e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945d), 0xe5);
        EXPECT(gbc.readMem(0xeb17), 0xfa);
        EXPECT(gbc.readMem(0xeb18), 0x65);
        // E5 01B0
        gbc.setState(0x41b5, 0xc27d, 0xf20, 0x8cff, 0x6bb4, 0xf4ca, 0x0, 0x0);
        gbc.writeMem(0x41b5, { 0xe5 });
        gbc.writeMem(0xc27b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc27b);
        EXPECT(gbc.pc(), 0x41b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27b), 0xca);
        EXPECT(gbc.readMem(0xc27c), 0xf4);
        // E5 01B3
        gbc.setState(0x6bed, 0xf5e2, 0x8e40, 0xf225, 0x116e, 0x5c99, 0x1, 0x1);
        gbc.writeMem(0x6bed, { 0xe5 });
        gbc.writeMem(0xf5e0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf5e0);
        EXPECT(gbc.pc(), 0x6bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5e0), 0x99);
        EXPECT(gbc.readMem(0xf5e1), 0x5c);
        // E5 01B4
        gbc.setState(0xa2c2, 0xe0fe, 0x44d0, 0xf861, 0x447b, 0x7392, 0x0, 0x1);
        gbc.writeMem(0xa2c2, { 0xe5 });
        gbc.writeMem(0xe0fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe0fc);
        EXPECT(gbc.pc(), 0xa2c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c2), 0xe5);
        EXPECT(gbc.readMem(0xe0fc), 0x92);
        EXPECT(gbc.readMem(0xe0fd), 0x73);
        // E5 01B5
        gbc.setState(0x7887, 0xaeb0, 0x8c20, 0x49d4, 0x161a, 0xe5aa, 0x1, 0x1);
        gbc.writeMem(0x7887, { 0xe5 });
        gbc.writeMem(0xaeae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xaeae);
        EXPECT(gbc.pc(), 0x7888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeae), 0xaa);
        EXPECT(gbc.readMem(0xaeaf), 0xe5);
        // E5 01B6
        gbc.setState(0xc8b7, 0xe625, 0x6e40, 0x583, 0x5866, 0x6338, 0x0, 0x0);
        gbc.writeMem(0xc8b7, { 0xe5 });
        gbc.writeMem(0xe623, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe623);
        EXPECT(gbc.pc(), 0xc8b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b7), 0xe5);
        EXPECT(gbc.readMem(0xe623), 0x38);
        EXPECT(gbc.readMem(0xe624), 0x63);
        // E5 01B9
        gbc.setState(0xb93a, 0xa811, 0x6320, 0x34e7, 0x47ac, 0xef30, 0x1, 0x1);
        gbc.writeMem(0xa80f, { 0x0, 0x0 });
        gbc.writeMem(0xb93a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa80f);
        EXPECT(gbc.pc(), 0xb93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa80f), 0x30);
        EXPECT(gbc.readMem(0xa810), 0xef);
        EXPECT(gbc.readMem(0xb93a), 0xe5);
        // E5 01BA
        gbc.setState(0x1390, 0xcfd7, 0xc420, 0xb552, 0x728, 0x9db0, 0x0, 0x0);
        gbc.writeMem(0x1390, { 0xe5 });
        gbc.writeMem(0xcfd5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcfd5);
        EXPECT(gbc.pc(), 0x1391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd5), 0xb0);
        EXPECT(gbc.readMem(0xcfd6), 0x9d);
        // E5 01BB
        gbc.setState(0x238b, 0x8d2f, 0x5f70, 0x1a1a, 0x95e8, 0x88c, 0x1, 0x0);
        gbc.writeMem(0x238b, { 0xe5 });
        gbc.writeMem(0x8d2d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8d2d);
        EXPECT(gbc.pc(), 0x238c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2d), 0x8c);
        EXPECT(gbc.readMem(0x8d2e), 0x8);
        // E5 01BD
        gbc.setState(0x450c, 0xefb0, 0xf5d0, 0xe535, 0x313d, 0x87cd, 0x0, 0x1);
        gbc.writeMem(0x450c, { 0xe5 });
        gbc.writeMem(0xefae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xefae);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefae), 0xcd);
        EXPECT(gbc.readMem(0xefaf), 0x87);
        // E5 01BF
        gbc.setState(0xd0a4, 0xad26, 0xbb90, 0x565e, 0xd6b4, 0x5b26, 0x1, 0x0);
        gbc.writeMem(0xad24, { 0x0, 0x0 });
        gbc.writeMem(0xd0a4, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xad24);
        EXPECT(gbc.pc(), 0xd0a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad24), 0x26);
        EXPECT(gbc.readMem(0xad25), 0x5b);
        EXPECT(gbc.readMem(0xd0a4), 0xe5);
        // E5 01C4
        gbc.setState(0xabbf, 0xf3d4, 0xffb0, 0xc8a6, 0xed10, 0x5fa4, 0x0, 0x0);
        gbc.writeMem(0xabbf, { 0xe5 });
        gbc.writeMem(0xf3d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf3d2);
        EXPECT(gbc.pc(), 0xabc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbf), 0xe5);
        EXPECT(gbc.readMem(0xf3d2), 0xa4);
        EXPECT(gbc.readMem(0xf3d3), 0x5f);
        // E5 01C5
        gbc.setState(0xd98a, 0xb6f9, 0xc670, 0x6274, 0x8f23, 0x3ff7, 0x0, 0x1);
        gbc.writeMem(0xb6f7, { 0x0, 0x0 });
        gbc.writeMem(0xd98a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb6f7);
        EXPECT(gbc.pc(), 0xd98b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f7), 0xf7);
        EXPECT(gbc.readMem(0xb6f8), 0x3f);
        EXPECT(gbc.readMem(0xd98a), 0xe5);
        // E5 01C6
        gbc.setState(0x4222, 0xa46a, 0x23b0, 0x4ba1, 0xf4ee, 0x1145, 0x1, 0x1);
        gbc.writeMem(0x4222, { 0xe5 });
        gbc.writeMem(0xa468, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa468);
        EXPECT(gbc.pc(), 0x4223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa468), 0x45);
        EXPECT(gbc.readMem(0xa469), 0x11);
        // E5 01C7
        gbc.setState(0x97ff, 0xdf67, 0x1710, 0x1ac6, 0x37e9, 0x2b5b, 0x0, 0x1);
        gbc.writeMem(0x97ff, { 0xe5 });
        gbc.writeMem(0xdf65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xdf65);
        EXPECT(gbc.pc(), 0x9800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ff), 0xe5);
        EXPECT(gbc.readMem(0xdf65), 0x5b);
        EXPECT(gbc.readMem(0xdf66), 0x2b);
        // E5 01C8
        gbc.setState(0xcbf5, 0xa210, 0x7640, 0xe382, 0xad18, 0x959c, 0x1, 0x1);
        gbc.writeMem(0xa20e, { 0x0, 0x0 });
        gbc.writeMem(0xcbf5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa20e);
        EXPECT(gbc.pc(), 0xcbf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20e), 0x9c);
        EXPECT(gbc.readMem(0xa20f), 0x95);
        EXPECT(gbc.readMem(0xcbf5), 0xe5);
        // E5 01C9
        gbc.setState(0x1f76, 0xe2f6, 0x9ec0, 0x25fb, 0xf29, 0x2211, 0x1, 0x1);
        gbc.writeMem(0x1f76, { 0xe5 });
        gbc.writeMem(0xe2f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe2f4);
        EXPECT(gbc.pc(), 0x1f77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f4), 0x11);
        EXPECT(gbc.readMem(0xe2f5), 0x22);
        // E5 01CA
        gbc.setState(0x56f, 0xa173, 0x5ce0, 0xfd39, 0x1535, 0x1c0b, 0x0, 0x1);
        gbc.writeMem(0x56f, { 0xe5 });
        gbc.writeMem(0xa171, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa171);
        EXPECT(gbc.pc(), 0x570);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa171), 0xb);
        EXPECT(gbc.readMem(0xa172), 0x1c);
        // E5 01CB
        gbc.setState(0x7bed, 0xa42e, 0x5600, 0x39f7, 0x27b3, 0xb4b4, 0x0, 0x0);
        gbc.writeMem(0x7bed, { 0xe5 });
        gbc.writeMem(0xa42c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa42c);
        EXPECT(gbc.pc(), 0x7bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42c), 0xb4);
        EXPECT(gbc.readMem(0xa42d), 0xb4);
        // E5 01CF
        gbc.setState(0x2727, 0xd387, 0x3430, 0xda01, 0x45ef, 0x62c5, 0x1, 0x1);
        gbc.writeMem(0x2727, { 0xe5 });
        gbc.writeMem(0xd385, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd385);
        EXPECT(gbc.pc(), 0x2728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd385), 0xc5);
        EXPECT(gbc.readMem(0xd386), 0x62);
        // E5 01D0
        gbc.setState(0x7140, 0x82c6, 0x5260, 0x56f1, 0x2533, 0xbc86, 0x1, 0x0);
        gbc.writeMem(0x7140, { 0xe5 });
        gbc.writeMem(0x82c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x82c4);
        EXPECT(gbc.pc(), 0x7141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c4), 0x86);
        EXPECT(gbc.readMem(0x82c5), 0xbc);
        // E5 01D1
        gbc.setState(0x5535, 0xad90, 0x1d10, 0x3a62, 0x2f51, 0x1cf1, 0x0, 0x1);
        gbc.writeMem(0x5535, { 0xe5 });
        gbc.writeMem(0xad8e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xad8e);
        EXPECT(gbc.pc(), 0x5536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad8e), 0xf1);
        EXPECT(gbc.readMem(0xad8f), 0x1c);
        // E5 01D3
        gbc.setState(0x41f1, 0x8cc1, 0xe1c0, 0x89e0, 0x85b, 0x6bba, 0x0, 0x0);
        gbc.writeMem(0x41f1, { 0xe5 });
        gbc.writeMem(0x8cbf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8cbf);
        EXPECT(gbc.pc(), 0x41f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cbf), 0xba);
        EXPECT(gbc.readMem(0x8cc0), 0x6b);
        // E5 01D5
        gbc.setState(0x6a2a, 0xfbbc, 0xe0a0, 0xf5ea, 0xf818, 0x8dbc, 0x1, 0x0);
        gbc.writeMem(0x6a2a, { 0xe5 });
        gbc.writeMem(0xfbba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfbba);
        EXPECT(gbc.pc(), 0x6a2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbba), 0xbc);
        EXPECT(gbc.readMem(0xfbbb), 0x8d);
        // E5 01D6
        gbc.setState(0xb228, 0x89c8, 0x1c00, 0x3b76, 0x8977, 0xbd90, 0x0, 0x0);
        gbc.writeMem(0x89c6, { 0x0, 0x0 });
        gbc.writeMem(0xb228, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x89c6);
        EXPECT(gbc.pc(), 0xb229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c6), 0x90);
        EXPECT(gbc.readMem(0x89c7), 0xbd);
        EXPECT(gbc.readMem(0xb228), 0xe5);
        // E5 01D7
        gbc.setState(0x6c35, 0xa950, 0xb0f0, 0xaf16, 0xd4b3, 0xd4b3, 0x1, 0x0);
        gbc.writeMem(0x6c35, { 0xe5 });
        gbc.writeMem(0xa94e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa94e);
        EXPECT(gbc.pc(), 0x6c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94e), 0xb3);
        EXPECT(gbc.readMem(0xa94f), 0xd4);
        // E5 01D8
        gbc.setState(0x6323, 0xd260, 0x81b0, 0x6961, 0xcf2d, 0xc2b, 0x0, 0x0);
        gbc.writeMem(0x6323, { 0xe5 });
        gbc.writeMem(0xd25e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd25e);
        EXPECT(gbc.pc(), 0x6324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd25e), 0x2b);
        EXPECT(gbc.readMem(0xd25f), 0xc);
        // E5 01D9
        gbc.setState(0xbd6, 0xf9fc, 0xb040, 0xe9af, 0x26ae, 0xe471, 0x0, 0x0);
        gbc.writeMem(0xbd6, { 0xe5 });
        gbc.writeMem(0xf9fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf9fa);
        EXPECT(gbc.pc(), 0xbd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9fa), 0x71);
        EXPECT(gbc.readMem(0xf9fb), 0xe4);
        // E5 01DB
        gbc.setState(0x39d8, 0x9fb9, 0x7f0, 0x3656, 0xec8f, 0x786e, 0x1, 0x1);
        gbc.writeMem(0x39d8, { 0xe5 });
        gbc.writeMem(0x9fb7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9fb7);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb7), 0x6e);
        EXPECT(gbc.readMem(0x9fb8), 0x78);
        // E5 01DC
        gbc.setState(0x4748, 0xd967, 0xdc00, 0xd1d7, 0x3133, 0xbf13, 0x0, 0x1);
        gbc.writeMem(0x4748, { 0xe5 });
        gbc.writeMem(0xd965, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd965);
        EXPECT(gbc.pc(), 0x4749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd965), 0x13);
        EXPECT(gbc.readMem(0xd966), 0xbf);
        // E5 01DD
        gbc.setState(0x49ae, 0xd150, 0x7250, 0x349b, 0x88ae, 0x57b1, 0x1, 0x1);
        gbc.writeMem(0x49ae, { 0xe5 });
        gbc.writeMem(0xd14e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd14e);
        EXPECT(gbc.pc(), 0x49af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd14e), 0xb1);
        EXPECT(gbc.readMem(0xd14f), 0x57);
        // E5 01DE
        gbc.setState(0xb722, 0xfbb9, 0x4a00, 0xa824, 0x5749, 0x7bf1, 0x0, 0x0);
        gbc.writeMem(0xb722, { 0xe5 });
        gbc.writeMem(0xfbb7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfbb7);
        EXPECT(gbc.pc(), 0xb723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb722), 0xe5);
        EXPECT(gbc.readMem(0xfbb7), 0xf1);
        EXPECT(gbc.readMem(0xfbb8), 0x7b);
        // E5 01DF
        gbc.setState(0x3ca9, 0xb970, 0xd910, 0x38e5, 0xe4bd, 0x513e, 0x0, 0x0);
        gbc.writeMem(0x3ca9, { 0xe5 });
        gbc.writeMem(0xb96e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb96e);
        EXPECT(gbc.pc(), 0x3caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96e), 0x3e);
        EXPECT(gbc.readMem(0xb96f), 0x51);
        // E5 01E1
        gbc.setState(0x4af7, 0xba7c, 0xdd00, 0x2af2, 0xd70e, 0xad1a, 0x0, 0x1);
        gbc.writeMem(0x4af7, { 0xe5 });
        gbc.writeMem(0xba7a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xba7a);
        EXPECT(gbc.pc(), 0x4af8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7a), 0x1a);
        EXPECT(gbc.readMem(0xba7b), 0xad);
        // E5 01E3
        gbc.setState(0xe3f5, 0xcddf, 0xdf50, 0xbb9c, 0x92bb, 0xd07c, 0x1, 0x0);
        gbc.writeMem(0xcddd, { 0x0, 0x0 });
        gbc.writeMem(0xe3f5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcddd);
        EXPECT(gbc.pc(), 0xe3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcddd), 0x7c);
        EXPECT(gbc.readMem(0xcdde), 0xd0);
        EXPECT(gbc.readMem(0xe3f5), 0xe5);
        // E5 01E9
        gbc.setState(0xb857, 0xc902, 0x2150, 0x3773, 0x94e, 0xd85a, 0x0, 0x1);
        gbc.writeMem(0xb857, { 0xe5 });
        gbc.writeMem(0xc900, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc900);
        EXPECT(gbc.pc(), 0xb858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb857), 0xe5);
        EXPECT(gbc.readMem(0xc900), 0x5a);
        EXPECT(gbc.readMem(0xc901), 0xd8);
        // E5 01EA
        gbc.setState(0xebaa, 0x9eed, 0x2d50, 0x9ca6, 0xb69, 0x2ab7, 0x1, 0x1);
        gbc.writeMem(0x9eeb, { 0x0, 0x0 });
        gbc.writeMem(0xebaa, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9eeb);
        EXPECT(gbc.pc(), 0xebab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eeb), 0xb7);
        EXPECT(gbc.readMem(0x9eec), 0x2a);
        EXPECT(gbc.readMem(0xebaa), 0xe5);
        // E5 01EE
        gbc.setState(0x3d4e, 0x9b4c, 0x6040, 0x7135, 0x7391, 0x226f, 0x1, 0x1);
        gbc.writeMem(0x3d4e, { 0xe5 });
        gbc.writeMem(0x9b4a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9b4a);
        EXPECT(gbc.pc(), 0x3d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4a), 0x6f);
        EXPECT(gbc.readMem(0x9b4b), 0x22);
        // E5 01EF
        gbc.setState(0x62fd, 0x9133, 0x6b20, 0x450e, 0x9eb6, 0xaa9f, 0x1, 0x1);
        gbc.writeMem(0x62fd, { 0xe5 });
        gbc.writeMem(0x9131, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9131);
        EXPECT(gbc.pc(), 0x62fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9131), 0x9f);
        EXPECT(gbc.readMem(0x9132), 0xaa);
        // E5 01F1
        gbc.setState(0x2be9, 0xc202, 0xcd50, 0xd24b, 0xa4b0, 0x807d, 0x0, 0x1);
        gbc.writeMem(0x2be9, { 0xe5 });
        gbc.writeMem(0xc200, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc200);
        EXPECT(gbc.pc(), 0x2bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc200), 0x7d);
        EXPECT(gbc.readMem(0xc201), 0x80);
        // E5 01F4
        gbc.setState(0x6c2b, 0xac7b, 0x2e40, 0x4d26, 0x2e82, 0x4364, 0x0, 0x1);
        gbc.writeMem(0x6c2b, { 0xe5 });
        gbc.writeMem(0xac79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xac79);
        EXPECT(gbc.pc(), 0x6c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac79), 0x64);
        EXPECT(gbc.readMem(0xac7a), 0x43);
        // E5 01F5
        gbc.setState(0x3392, 0xe1e9, 0x2b20, 0x4603, 0x9069, 0xc426, 0x1, 0x1);
        gbc.writeMem(0x3392, { 0xe5 });
        gbc.writeMem(0xe1e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe1e7);
        EXPECT(gbc.pc(), 0x3393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e7), 0x26);
        EXPECT(gbc.readMem(0xe1e8), 0xc4);
        // E5 01F6
        gbc.setState(0x9f24, 0x8a76, 0x14c0, 0xa757, 0x4f2e, 0xbebd, 0x1, 0x0);
        gbc.writeMem(0x8a74, { 0x0, 0x0 });
        gbc.writeMem(0x9f24, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8a74);
        EXPECT(gbc.pc(), 0x9f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a74), 0xbd);
        EXPECT(gbc.readMem(0x8a75), 0xbe);
        EXPECT(gbc.readMem(0x9f24), 0xe5);
        // E5 01F8
        gbc.setState(0x445c, 0xb1fc, 0xc250, 0x4339, 0xc01c, 0x810b, 0x1, 0x1);
        gbc.writeMem(0x445c, { 0xe5 });
        gbc.writeMem(0xb1fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb1fa);
        EXPECT(gbc.pc(), 0x445d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fa), 0xb);
        EXPECT(gbc.readMem(0xb1fb), 0x81);
        // E5 01F9
        gbc.setState(0xd5a0, 0xb9c0, 0x81b0, 0x5c86, 0xaa0f, 0xc236, 0x0, 0x1);
        gbc.writeMem(0xb9be, { 0x0, 0x0 });
        gbc.writeMem(0xd5a0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb9be);
        EXPECT(gbc.pc(), 0xd5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9be), 0x36);
        EXPECT(gbc.readMem(0xb9bf), 0xc2);
        EXPECT(gbc.readMem(0xd5a0), 0xe5);
        // E5 01FA
        gbc.setState(0x3ab8, 0xc6ef, 0xc720, 0x6af8, 0xe8e3, 0x1235, 0x1, 0x0);
        gbc.writeMem(0x3ab8, { 0xe5 });
        gbc.writeMem(0xc6ed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc6ed);
        EXPECT(gbc.pc(), 0x3ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ed), 0x35);
        EXPECT(gbc.readMem(0xc6ee), 0x12);
        // E5 01FC
        gbc.setState(0x3ca3, 0xfdef, 0xddd0, 0x7e93, 0xca7d, 0xc1a5, 0x0, 0x0);
        gbc.writeMem(0x3ca3, { 0xe5 });
        gbc.writeMem(0xfded, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfded);
        EXPECT(gbc.pc(), 0x3ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfded), 0xa5);
        EXPECT(gbc.readMem(0xfdee), 0xc1);
        // E5 01FE
        gbc.setState(0xb36c, 0xbcb8, 0xf1d0, 0x602f, 0xc093, 0xbaa1, 0x1, 0x1);
        gbc.writeMem(0xb36c, { 0xe5 });
        gbc.writeMem(0xbcb6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbcb6);
        EXPECT(gbc.pc(), 0xb36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36c), 0xe5);
        EXPECT(gbc.readMem(0xbcb6), 0xa1);
        EXPECT(gbc.readMem(0xbcb7), 0xba);
        // E5 0200
        gbc.setState(0xaa1, 0xb612, 0x3dd0, 0x683f, 0x8b47, 0x9215, 0x0, 0x0);
        gbc.writeMem(0xaa1, { 0xe5 });
        gbc.writeMem(0xb610, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb610);
        EXPECT(gbc.pc(), 0xaa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb610), 0x15);
        EXPECT(gbc.readMem(0xb611), 0x92);
        // E5 0201
        gbc.setState(0xc76f, 0xfca3, 0x4910, 0x1e26, 0x18ae, 0xb36b, 0x1, 0x0);
        gbc.writeMem(0xc76f, { 0xe5 });
        gbc.writeMem(0xfca1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfca1);
        EXPECT(gbc.pc(), 0xc770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc76f), 0xe5);
        EXPECT(gbc.readMem(0xfca1), 0x6b);
        EXPECT(gbc.readMem(0xfca2), 0xb3);
        // E5 0202
        gbc.setState(0x94e8, 0x83dd, 0x1f80, 0xbb71, 0xa943, 0xe861, 0x1, 0x1);
        gbc.writeMem(0x83db, { 0x0, 0x0 });
        gbc.writeMem(0x94e8, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x83db);
        EXPECT(gbc.pc(), 0x94e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83db), 0x61);
        EXPECT(gbc.readMem(0x83dc), 0xe8);
        EXPECT(gbc.readMem(0x94e8), 0xe5);
        // E5 0203
        gbc.setState(0x2a6d, 0x93a2, 0x5440, 0x29a0, 0x7ae1, 0xe334, 0x1, 0x0);
        gbc.writeMem(0x2a6d, { 0xe5 });
        gbc.writeMem(0x93a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x93a0);
        EXPECT(gbc.pc(), 0x2a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a0), 0x34);
        EXPECT(gbc.readMem(0x93a1), 0xe3);
        // E5 0206
        gbc.setState(0xeed1, 0xd177, 0xda50, 0xc7d7, 0x3b4, 0xe0fa, 0x0, 0x1);
        gbc.writeMem(0xd175, { 0x0, 0x0 });
        gbc.writeMem(0xeed1, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd175);
        EXPECT(gbc.pc(), 0xeed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd175), 0xfa);
        EXPECT(gbc.readMem(0xd176), 0xe0);
        EXPECT(gbc.readMem(0xeed1), 0xe5);
        // E5 0207
        gbc.setState(0xd4d0, 0xcbde, 0xaf20, 0x9688, 0xccbd, 0xbf08, 0x0, 0x1);
        gbc.writeMem(0xcbdc, { 0x0, 0x0 });
        gbc.writeMem(0xd4d0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcbdc);
        EXPECT(gbc.pc(), 0xd4d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbdc), 0x8);
        EXPECT(gbc.readMem(0xcbdd), 0xbf);
        EXPECT(gbc.readMem(0xd4d0), 0xe5);
        // E5 0209
        gbc.setState(0x11ba, 0xaf3e, 0x5a50, 0xf0c0, 0xdc9f, 0x867, 0x1, 0x1);
        gbc.writeMem(0x11ba, { 0xe5 });
        gbc.writeMem(0xaf3c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xaf3c);
        EXPECT(gbc.pc(), 0x11bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf3c), 0x67);
        EXPECT(gbc.readMem(0xaf3d), 0x8);
        // E5 020A
        gbc.setState(0xedeb, 0xca7f, 0x7160, 0xa6a5, 0x6639, 0xf4f6, 0x1, 0x0);
        gbc.writeMem(0xca7d, { 0x0, 0x0 });
        gbc.writeMem(0xedeb, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xca7d);
        EXPECT(gbc.pc(), 0xedec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca7d), 0xf6);
        EXPECT(gbc.readMem(0xca7e), 0xf4);
        EXPECT(gbc.readMem(0xedeb), 0xe5);
        // E5 020C
        gbc.setState(0xab52, 0xf6c1, 0x2c60, 0x822c, 0x5402, 0x16cf, 0x0, 0x1);
        gbc.writeMem(0xab52, { 0xe5 });
        gbc.writeMem(0xf6bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf6bf);
        EXPECT(gbc.pc(), 0xab53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab52), 0xe5);
        EXPECT(gbc.readMem(0xf6bf), 0xcf);
        EXPECT(gbc.readMem(0xf6c0), 0x16);
        // E5 020D
        gbc.setState(0x6b2, 0xc482, 0x36a0, 0x6035, 0x24fe, 0x8452, 0x0, 0x0);
        gbc.writeMem(0x6b2, { 0xe5 });
        gbc.writeMem(0xc480, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc480);
        EXPECT(gbc.pc(), 0x6b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc480), 0x52);
        EXPECT(gbc.readMem(0xc481), 0x84);
        // E5 020F
        gbc.setState(0xe6d5, 0xe3ce, 0xeaf0, 0x2910, 0xf127, 0x1908, 0x0, 0x0);
        gbc.writeMem(0xe3cc, { 0x0, 0x0 });
        gbc.writeMem(0xe6d5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe3cc);
        EXPECT(gbc.pc(), 0xe6d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3cc), 0x8);
        EXPECT(gbc.readMem(0xe3cd), 0x19);
        EXPECT(gbc.readMem(0xe6d5), 0xe5);
        // E5 0211
        gbc.setState(0x373d, 0x81c1, 0xaf20, 0xb677, 0x135a, 0x87d1, 0x1, 0x0);
        gbc.writeMem(0x373d, { 0xe5 });
        gbc.writeMem(0x81bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x81bf);
        EXPECT(gbc.pc(), 0x373e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bf), 0xd1);
        EXPECT(gbc.readMem(0x81c0), 0x87);
        // E5 0212
        gbc.setState(0x5d79, 0xaf8d, 0x5b50, 0xbe16, 0x753, 0xe677, 0x0, 0x1);
        gbc.writeMem(0x5d79, { 0xe5 });
        gbc.writeMem(0xaf8b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xaf8b);
        EXPECT(gbc.pc(), 0x5d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf8b), 0x77);
        EXPECT(gbc.readMem(0xaf8c), 0xe6);
        // E5 0215
        gbc.setState(0xcd39, 0xada2, 0xcd70, 0x89c2, 0x9cff, 0x60b1, 0x0, 0x0);
        gbc.writeMem(0xada0, { 0x0, 0x0 });
        gbc.writeMem(0xcd39, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xada0);
        EXPECT(gbc.pc(), 0xcd3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada0), 0xb1);
        EXPECT(gbc.readMem(0xada1), 0x60);
        EXPECT(gbc.readMem(0xcd39), 0xe5);
        // E5 0216
        gbc.setState(0x515a, 0xece1, 0x7f50, 0xefbf, 0x987f, 0xcab7, 0x0, 0x0);
        gbc.writeMem(0x515a, { 0xe5 });
        gbc.writeMem(0xecdf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xecdf);
        EXPECT(gbc.pc(), 0x515b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecdf), 0xb7);
        EXPECT(gbc.readMem(0xece0), 0xca);
        // E5 0217
        gbc.setState(0x6447, 0xb6d0, 0xbd80, 0x55ca, 0x9a83, 0x9f7, 0x1, 0x0);
        gbc.writeMem(0x6447, { 0xe5 });
        gbc.writeMem(0xb6ce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb6ce);
        EXPECT(gbc.pc(), 0x6448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ce), 0xf7);
        EXPECT(gbc.readMem(0xb6cf), 0x9);
        // E5 0219
        gbc.setState(0xd66, 0xaaa4, 0x4790, 0x12a2, 0x58f6, 0xa016, 0x1, 0x0);
        gbc.writeMem(0xd66, { 0xe5 });
        gbc.writeMem(0xaaa2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xaaa2);
        EXPECT(gbc.pc(), 0xd67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaa2), 0x16);
        EXPECT(gbc.readMem(0xaaa3), 0xa0);
        // E5 021B
        gbc.setState(0xc2dd, 0xadc6, 0xb450, 0xd79, 0x84b9, 0x33fe, 0x0, 0x1);
        gbc.writeMem(0xadc4, { 0x0, 0x0 });
        gbc.writeMem(0xc2dd, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xadc4);
        EXPECT(gbc.pc(), 0xc2de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc4), 0xfe);
        EXPECT(gbc.readMem(0xadc5), 0x33);
        EXPECT(gbc.readMem(0xc2dd), 0xe5);
        // E5 021F
        gbc.setState(0xccff, 0xa052, 0xb80, 0x96fe, 0xf84e, 0xdc1c, 0x1, 0x1);
        gbc.writeMem(0xa050, { 0x0, 0x0 });
        gbc.writeMem(0xccff, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa050);
        EXPECT(gbc.pc(), 0xcd00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa050), 0x1c);
        EXPECT(gbc.readMem(0xa051), 0xdc);
        EXPECT(gbc.readMem(0xccff), 0xe5);
        // E5 0220
        gbc.setState(0xe66d, 0xa694, 0x190, 0x464f, 0x12b3, 0x18ed, 0x0, 0x0);
        gbc.writeMem(0xa692, { 0x0, 0x0 });
        gbc.writeMem(0xe66d, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa692);
        EXPECT(gbc.pc(), 0xe66e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa692), 0xed);
        EXPECT(gbc.readMem(0xa693), 0x18);
        EXPECT(gbc.readMem(0xe66d), 0xe5);
        // E5 0221
        gbc.setState(0x2ff7, 0xdf70, 0xca60, 0xbac, 0x8692, 0xd7ee, 0x0, 0x0);
        gbc.writeMem(0x2ff7, { 0xe5 });
        gbc.writeMem(0xdf6e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdf6e);
        EXPECT(gbc.pc(), 0x2ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf6e), 0xee);
        EXPECT(gbc.readMem(0xdf6f), 0xd7);
        // E5 0227
        gbc.setState(0x3601, 0xb218, 0x3740, 0xc09, 0x89c6, 0x4942, 0x1, 0x0);
        gbc.writeMem(0x3601, { 0xe5 });
        gbc.writeMem(0xb216, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb216);
        EXPECT(gbc.pc(), 0x3602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb216), 0x42);
        EXPECT(gbc.readMem(0xb217), 0x49);
        // E5 022A
        gbc.setState(0xe616, 0xef29, 0x9ee0, 0x648c, 0x717d, 0x2905, 0x1, 0x1);
        gbc.writeMem(0xe616, { 0xe5 });
        gbc.writeMem(0xef27, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xef27);
        EXPECT(gbc.pc(), 0xe617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe616), 0xe5);
        EXPECT(gbc.readMem(0xef27), 0x5);
        EXPECT(gbc.readMem(0xef28), 0x29);
        // E5 022B
        gbc.setState(0xa58e, 0xbbc4, 0x5070, 0x2f20, 0x25cc, 0x8ccd, 0x0, 0x0);
        gbc.writeMem(0xa58e, { 0xe5 });
        gbc.writeMem(0xbbc2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbbc2);
        EXPECT(gbc.pc(), 0xa58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa58e), 0xe5);
        EXPECT(gbc.readMem(0xbbc2), 0xcd);
        EXPECT(gbc.readMem(0xbbc3), 0x8c);
        // E5 022E
        gbc.setState(0xca3f, 0x9e1c, 0xf610, 0xe36a, 0xaef1, 0x93da, 0x1, 0x0);
        gbc.writeMem(0x9e1a, { 0x0, 0x0 });
        gbc.writeMem(0xca3f, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9e1a);
        EXPECT(gbc.pc(), 0xca40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e1a), 0xda);
        EXPECT(gbc.readMem(0x9e1b), 0x93);
        EXPECT(gbc.readMem(0xca3f), 0xe5);
        // E5 022F
        gbc.setState(0xc70e, 0xae49, 0x6bf0, 0x750e, 0x2ff4, 0xafa2, 0x1, 0x1);
        gbc.writeMem(0xae47, { 0x0, 0x0 });
        gbc.writeMem(0xc70e, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xae47);
        EXPECT(gbc.pc(), 0xc70f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae47), 0xa2);
        EXPECT(gbc.readMem(0xae48), 0xaf);
        EXPECT(gbc.readMem(0xc70e), 0xe5);
        // E5 0236
        gbc.setState(0x5b62, 0x85ee, 0xef50, 0xa83d, 0xf0a8, 0x9c4e, 0x0, 0x0);
        gbc.writeMem(0x5b62, { 0xe5 });
        gbc.writeMem(0x85ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x85ec);
        EXPECT(gbc.pc(), 0x5b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ec), 0x4e);
        EXPECT(gbc.readMem(0x85ed), 0x9c);
        // E5 0237
        gbc.setState(0x73e, 0xfc0f, 0x97c0, 0x7d60, 0x7e93, 0xbbe6, 0x1, 0x1);
        gbc.writeMem(0x73e, { 0xe5 });
        gbc.writeMem(0xfc0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfc0d);
        EXPECT(gbc.pc(), 0x73f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc0d), 0xe6);
        EXPECT(gbc.readMem(0xfc0e), 0xbb);
        // E5 023A
        gbc.setState(0xa136, 0xaf47, 0x6760, 0x1301, 0xd692, 0x190b, 0x1, 0x0);
        gbc.writeMem(0xa136, { 0xe5 });
        gbc.writeMem(0xaf45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xaf45);
        EXPECT(gbc.pc(), 0xa137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa136), 0xe5);
        EXPECT(gbc.readMem(0xaf45), 0xb);
        EXPECT(gbc.readMem(0xaf46), 0x19);
        // E5 023B
        gbc.setState(0x590d, 0xe490, 0x4930, 0x7d7c, 0x34f2, 0x368b, 0x0, 0x1);
        gbc.writeMem(0x590d, { 0xe5 });
        gbc.writeMem(0xe48e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe48e);
        EXPECT(gbc.pc(), 0x590e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe48e), 0x8b);
        EXPECT(gbc.readMem(0xe48f), 0x36);
        // E5 023C
        gbc.setState(0x472a, 0xf766, 0xb760, 0x653f, 0x6639, 0x383b, 0x1, 0x1);
        gbc.writeMem(0x472a, { 0xe5 });
        gbc.writeMem(0xf764, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf764);
        EXPECT(gbc.pc(), 0x472b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf764), 0x3b);
        EXPECT(gbc.readMem(0xf765), 0x38);
        // E5 023D
        gbc.setState(0x5b86, 0xce7a, 0x8000, 0xaf90, 0xd04a, 0xaf6e, 0x0, 0x0);
        gbc.writeMem(0x5b86, { 0xe5 });
        gbc.writeMem(0xce78, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xce78);
        EXPECT(gbc.pc(), 0x5b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce78), 0x6e);
        EXPECT(gbc.readMem(0xce79), 0xaf);
        // E5 0242
        gbc.setState(0xe724, 0x9f97, 0x84a0, 0xd2fe, 0x61b8, 0xff21, 0x1, 0x0);
        gbc.writeMem(0x9f95, { 0x0, 0x0 });
        gbc.writeMem(0xe724, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9f95);
        EXPECT(gbc.pc(), 0xe725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f95), 0x21);
        EXPECT(gbc.readMem(0x9f96), 0xff);
        EXPECT(gbc.readMem(0xe724), 0xe5);
        // E5 0245
        gbc.setState(0x7506, 0xfb49, 0xb3e0, 0x2da5, 0xb762, 0x92dd, 0x1, 0x1);
        gbc.writeMem(0x7506, { 0xe5 });
        gbc.writeMem(0xfb47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfb47);
        EXPECT(gbc.pc(), 0x7507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb47), 0xdd);
        EXPECT(gbc.readMem(0xfb48), 0x92);
        // E5 0246
        gbc.setState(0xebf7, 0xdc84, 0xd950, 0x5ace, 0xaa73, 0x25bd, 0x0, 0x1);
        gbc.writeMem(0xdc82, { 0x0, 0x0 });
        gbc.writeMem(0xebf7, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xdc82);
        EXPECT(gbc.pc(), 0xebf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc82), 0xbd);
        EXPECT(gbc.readMem(0xdc83), 0x25);
        EXPECT(gbc.readMem(0xebf7), 0xe5);
        // E5 0247
        gbc.setState(0x373, 0xac74, 0x2970, 0x5939, 0x7637, 0xc5e7, 0x0, 0x0);
        gbc.writeMem(0x373, { 0xe5 });
        gbc.writeMem(0xac72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xac72);
        EXPECT(gbc.pc(), 0x374);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac72), 0xe7);
        EXPECT(gbc.readMem(0xac73), 0xc5);
        // E5 0249
        gbc.setState(0x67f0, 0x86aa, 0xd840, 0xa298, 0x2b7f, 0xcc09, 0x1, 0x0);
        gbc.writeMem(0x67f0, { 0xe5 });
        gbc.writeMem(0x86a8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x86a8);
        EXPECT(gbc.pc(), 0x67f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a8), 0x9);
        EXPECT(gbc.readMem(0x86a9), 0xcc);
        // E5 024A
        gbc.setState(0x416a, 0xd44b, 0x7e30, 0x9a18, 0x899c, 0xcc7d, 0x1, 0x1);
        gbc.writeMem(0x416a, { 0xe5 });
        gbc.writeMem(0xd449, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd449);
        EXPECT(gbc.pc(), 0x416b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd449), 0x7d);
        EXPECT(gbc.readMem(0xd44a), 0xcc);
        // E5 024D
        gbc.setState(0x9036, 0xf148, 0x9f90, 0xee8b, 0x6b14, 0x99d0, 0x1, 0x0);
        gbc.writeMem(0x9036, { 0xe5 });
        gbc.writeMem(0xf146, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf146);
        EXPECT(gbc.pc(), 0x9037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9036), 0xe5);
        EXPECT(gbc.readMem(0xf146), 0xd0);
        EXPECT(gbc.readMem(0xf147), 0x99);
        // E5 024F
        gbc.setState(0x2066, 0xf830, 0xbce0, 0x678f, 0xa5c0, 0xdae, 0x0, 0x1);
        gbc.writeMem(0x2066, { 0xe5 });
        gbc.writeMem(0xf82e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf82e);
        EXPECT(gbc.pc(), 0x2067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf82e), 0xae);
        EXPECT(gbc.readMem(0xf82f), 0xd);
        // E5 0252
        gbc.setState(0x2f0e, 0xd274, 0x1f80, 0x964e, 0xdd67, 0xf4ec, 0x0, 0x0);
        gbc.writeMem(0x2f0e, { 0xe5 });
        gbc.writeMem(0xd272, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd272);
        EXPECT(gbc.pc(), 0x2f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd272), 0xec);
        EXPECT(gbc.readMem(0xd273), 0xf4);
        // E5 0255
        gbc.setState(0x24b5, 0x956f, 0x4ac0, 0x7737, 0x1e92, 0x571f, 0x0, 0x1);
        gbc.writeMem(0x24b5, { 0xe5 });
        gbc.writeMem(0x956d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x956d);
        EXPECT(gbc.pc(), 0x24b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x956d), 0x1f);
        EXPECT(gbc.readMem(0x956e), 0x57);
        // E5 0256
        gbc.setState(0xa56a, 0xdfb8, 0xd5b0, 0x434, 0x614e, 0xe717, 0x0, 0x0);
        gbc.writeMem(0xa56a, { 0xe5 });
        gbc.writeMem(0xdfb6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdfb6);
        EXPECT(gbc.pc(), 0xa56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56a), 0xe5);
        EXPECT(gbc.readMem(0xdfb6), 0x17);
        EXPECT(gbc.readMem(0xdfb7), 0xe7);
        // E5 0258
        gbc.setState(0xcf75, 0xaf13, 0x1560, 0x166f, 0x21ce, 0x7254, 0x1, 0x0);
        gbc.writeMem(0xaf11, { 0x0, 0x0 });
        gbc.writeMem(0xcf75, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xaf11);
        EXPECT(gbc.pc(), 0xcf76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf11), 0x54);
        EXPECT(gbc.readMem(0xaf12), 0x72);
        EXPECT(gbc.readMem(0xcf75), 0xe5);
        // E5 0259
        gbc.setState(0x4bb, 0xf983, 0x1870, 0xa8c7, 0x384f, 0x9697, 0x1, 0x0);
        gbc.writeMem(0x4bb, { 0xe5 });
        gbc.writeMem(0xf981, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf981);
        EXPECT(gbc.pc(), 0x4bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf981), 0x97);
        EXPECT(gbc.readMem(0xf982), 0x96);
        // E5 025A
        gbc.setState(0xeb24, 0xb4d3, 0x9ce0, 0xd108, 0xfe7b, 0xfe42, 0x1, 0x1);
        gbc.writeMem(0xb4d1, { 0x0, 0x0 });
        gbc.writeMem(0xeb24, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb4d1);
        EXPECT(gbc.pc(), 0xeb25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d1), 0x42);
        EXPECT(gbc.readMem(0xb4d2), 0xfe);
        EXPECT(gbc.readMem(0xeb24), 0xe5);
        // E5 025D
        gbc.setState(0xef0d, 0xd70a, 0x2be0, 0x464e, 0x733, 0xd14c, 0x1, 0x1);
        gbc.writeMem(0xd708, { 0x0, 0x0 });
        gbc.writeMem(0xef0d, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd708);
        EXPECT(gbc.pc(), 0xef0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd708), 0x4c);
        EXPECT(gbc.readMem(0xd709), 0xd1);
        EXPECT(gbc.readMem(0xef0d), 0xe5);
        // E5 025E
        gbc.setState(0x6559, 0xe526, 0xac00, 0x3909, 0xf6b9, 0x7e33, 0x0, 0x1);
        gbc.writeMem(0x6559, { 0xe5 });
        gbc.writeMem(0xe524, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe524);
        EXPECT(gbc.pc(), 0x655a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe524), 0x33);
        EXPECT(gbc.readMem(0xe525), 0x7e);
        // E5 025F
        gbc.setState(0xd997, 0xe3fb, 0x5a20, 0x6026, 0x1b76, 0x1007, 0x0, 0x0);
        gbc.writeMem(0xd997, { 0xe5 });
        gbc.writeMem(0xe3f9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe3f9);
        EXPECT(gbc.pc(), 0xd998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd997), 0xe5);
        EXPECT(gbc.readMem(0xe3f9), 0x7);
        EXPECT(gbc.readMem(0xe3fa), 0x10);
        // E5 0261
        gbc.setState(0x4ee0, 0xac6a, 0xf3c0, 0xa41b, 0x37c5, 0x66cd, 0x0, 0x0);
        gbc.writeMem(0x4ee0, { 0xe5 });
        gbc.writeMem(0xac68, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xac68);
        EXPECT(gbc.pc(), 0x4ee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac68), 0xcd);
        EXPECT(gbc.readMem(0xac69), 0x66);
        // E5 0262
        gbc.setState(0x9c63, 0xba23, 0xdb20, 0xbd07, 0xc0a7, 0xc016, 0x0, 0x1);
        gbc.writeMem(0x9c63, { 0xe5 });
        gbc.writeMem(0xba21, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xba21);
        EXPECT(gbc.pc(), 0x9c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c63), 0xe5);
        EXPECT(gbc.readMem(0xba21), 0x16);
        EXPECT(gbc.readMem(0xba22), 0xc0);
        // E5 0263
        gbc.setState(0x4ead, 0xb58a, 0xd980, 0xa40e, 0x50fc, 0x62f1, 0x0, 0x1);
        gbc.writeMem(0x4ead, { 0xe5 });
        gbc.writeMem(0xb588, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb588);
        EXPECT(gbc.pc(), 0x4eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb588), 0xf1);
        EXPECT(gbc.readMem(0xb589), 0x62);
        // E5 0264
        gbc.setState(0xae6d, 0xc9fa, 0x1e50, 0xf458, 0xd58e, 0xea8f, 0x0, 0x1);
        gbc.writeMem(0xae6d, { 0xe5 });
        gbc.writeMem(0xc9f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc9f8);
        EXPECT(gbc.pc(), 0xae6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae6d), 0xe5);
        EXPECT(gbc.readMem(0xc9f8), 0x8f);
        EXPECT(gbc.readMem(0xc9f9), 0xea);
        // E5 0267
        gbc.setState(0xa349, 0xb6e3, 0xdd60, 0x6f88, 0xb74d, 0xa65b, 0x0, 0x1);
        gbc.writeMem(0xa349, { 0xe5 });
        gbc.writeMem(0xb6e1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb6e1);
        EXPECT(gbc.pc(), 0xa34a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa349), 0xe5);
        EXPECT(gbc.readMem(0xb6e1), 0x5b);
        EXPECT(gbc.readMem(0xb6e2), 0xa6);
        // E5 026A
        gbc.setState(0x66d2, 0xbbd3, 0x7c90, 0x7928, 0x5fca, 0x4d93, 0x1, 0x1);
        gbc.writeMem(0x66d2, { 0xe5 });
        gbc.writeMem(0xbbd1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbbd1);
        EXPECT(gbc.pc(), 0x66d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd1), 0x93);
        EXPECT(gbc.readMem(0xbbd2), 0x4d);
        // E5 026B
        gbc.setState(0xa8a3, 0x8c66, 0x21e0, 0x8ead, 0xaa4a, 0xc360, 0x0, 0x1);
        gbc.writeMem(0x8c64, { 0x0, 0x0 });
        gbc.writeMem(0xa8a3, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8c64);
        EXPECT(gbc.pc(), 0xa8a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c64), 0x60);
        EXPECT(gbc.readMem(0x8c65), 0xc3);
        EXPECT(gbc.readMem(0xa8a3), 0xe5);
        // E5 026D
        gbc.setState(0x888b, 0x98d0, 0x5dc0, 0x2584, 0x8ef0, 0xa24f, 0x0, 0x1);
        gbc.writeMem(0x888b, { 0xe5 });
        gbc.writeMem(0x98ce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x98ce);
        EXPECT(gbc.pc(), 0x888c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x888b), 0xe5);
        EXPECT(gbc.readMem(0x98ce), 0x4f);
        EXPECT(gbc.readMem(0x98cf), 0xa2);
        // E5 0271
        gbc.setState(0x4a82, 0xdcd6, 0xc580, 0x77c5, 0x207e, 0xeb79, 0x0, 0x1);
        gbc.writeMem(0x4a82, { 0xe5 });
        gbc.writeMem(0xdcd4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdcd4);
        EXPECT(gbc.pc(), 0x4a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd4), 0x79);
        EXPECT(gbc.readMem(0xdcd5), 0xeb);
        // E5 0272
        gbc.setState(0xe2bf, 0x8cf9, 0xe1f0, 0xa24d, 0x83f5, 0x787b, 0x0, 0x1);
        gbc.writeMem(0x8cf7, { 0x0, 0x0 });
        gbc.writeMem(0xe2bf, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8cf7);
        EXPECT(gbc.pc(), 0xe2c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf7), 0x7b);
        EXPECT(gbc.readMem(0x8cf8), 0x78);
        EXPECT(gbc.readMem(0xe2bf), 0xe5);
        // E5 0273
        gbc.setState(0xce75, 0xb692, 0x6aa0, 0x56db, 0x8546, 0xb8ad, 0x1, 0x1);
        gbc.writeMem(0xb690, { 0x0, 0x0 });
        gbc.writeMem(0xce75, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb690);
        EXPECT(gbc.pc(), 0xce76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb690), 0xad);
        EXPECT(gbc.readMem(0xb691), 0xb8);
        EXPECT(gbc.readMem(0xce75), 0xe5);
        // E5 0274
        gbc.setState(0xc569, 0x9b7b, 0xb7b0, 0x2a39, 0x5ef6, 0x4920, 0x1, 0x1);
        gbc.writeMem(0x9b79, { 0x0, 0x0 });
        gbc.writeMem(0xc569, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9b79);
        EXPECT(gbc.pc(), 0xc56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b79), 0x20);
        EXPECT(gbc.readMem(0x9b7a), 0x49);
        EXPECT(gbc.readMem(0xc569), 0xe5);
        // E5 0276
        gbc.setState(0x67bf, 0x99e8, 0x8a60, 0xc068, 0xeb7e, 0x5e4e, 0x1, 0x1);
        gbc.writeMem(0x67bf, { 0xe5 });
        gbc.writeMem(0x99e6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x99e6);
        EXPECT(gbc.pc(), 0x67c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e6), 0x4e);
        EXPECT(gbc.readMem(0x99e7), 0x5e);
        // E5 0279
        gbc.setState(0xd280, 0xc323, 0xf370, 0x4927, 0xe30b, 0x8d9e, 0x0, 0x1);
        gbc.writeMem(0xc321, { 0x0, 0x0 });
        gbc.writeMem(0xd280, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc321);
        EXPECT(gbc.pc(), 0xd281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc321), 0x9e);
        EXPECT(gbc.readMem(0xc322), 0x8d);
        EXPECT(gbc.readMem(0xd280), 0xe5);
        // E5 027C
        gbc.setState(0x8497, 0x9ddb, 0x8e40, 0x7d80, 0x82a1, 0xa1f4, 0x0, 0x0);
        gbc.writeMem(0x8497, { 0xe5 });
        gbc.writeMem(0x9dd9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9dd9);
        EXPECT(gbc.pc(), 0x8498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8497), 0xe5);
        EXPECT(gbc.readMem(0x9dd9), 0xf4);
        EXPECT(gbc.readMem(0x9dda), 0xa1);
        // E5 027E
        gbc.setState(0x5167, 0xc629, 0xe960, 0xa79f, 0xe334, 0xecb0, 0x0, 0x0);
        gbc.writeMem(0x5167, { 0xe5 });
        gbc.writeMem(0xc627, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc627);
        EXPECT(gbc.pc(), 0x5168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc627), 0xb0);
        EXPECT(gbc.readMem(0xc628), 0xec);
        // E5 027F
        gbc.setState(0x30b6, 0xd25a, 0x6410, 0x25fe, 0xff9c, 0x8214, 0x0, 0x0);
        gbc.writeMem(0x30b6, { 0xe5 });
        gbc.writeMem(0xd258, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd258);
        EXPECT(gbc.pc(), 0x30b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd258), 0x14);
        EXPECT(gbc.readMem(0xd259), 0x82);
        // E5 0280
        gbc.setState(0xe1d8, 0xa7d8, 0x1420, 0xb512, 0x1a40, 0xb894, 0x0, 0x0);
        gbc.writeMem(0xa7d6, { 0x0, 0x0 });
        gbc.writeMem(0xe1d8, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa7d6);
        EXPECT(gbc.pc(), 0xe1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d6), 0x94);
        EXPECT(gbc.readMem(0xa7d7), 0xb8);
        EXPECT(gbc.readMem(0xe1d8), 0xe5);
        // E5 0282
        gbc.setState(0x3d30, 0x9433, 0x7100, 0x8f2b, 0x68c0, 0xe05d, 0x1, 0x1);
        gbc.writeMem(0x3d30, { 0xe5 });
        gbc.writeMem(0x9431, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9431);
        EXPECT(gbc.pc(), 0x3d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9431), 0x5d);
        EXPECT(gbc.readMem(0x9432), 0xe0);
        // E5 0284
        gbc.setState(0x12b7, 0xa0b6, 0x49b0, 0xc54b, 0x6218, 0xeca7, 0x1, 0x0);
        gbc.writeMem(0x12b7, { 0xe5 });
        gbc.writeMem(0xa0b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa0b4);
        EXPECT(gbc.pc(), 0x12b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b4), 0xa7);
        EXPECT(gbc.readMem(0xa0b5), 0xec);
        // E5 0286
        gbc.setState(0x2c1e, 0x9d52, 0xfb00, 0x65b2, 0x756a, 0xfbcf, 0x0, 0x1);
        gbc.writeMem(0x2c1e, { 0xe5 });
        gbc.writeMem(0x9d50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9d50);
        EXPECT(gbc.pc(), 0x2c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d50), 0xcf);
        EXPECT(gbc.readMem(0x9d51), 0xfb);
        // E5 0287
        gbc.setState(0x494d, 0xe344, 0x8b90, 0x744a, 0xda3f, 0xc759, 0x0, 0x1);
        gbc.writeMem(0x494d, { 0xe5 });
        gbc.writeMem(0xe342, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe342);
        EXPECT(gbc.pc(), 0x494e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe342), 0x59);
        EXPECT(gbc.readMem(0xe343), 0xc7);
        // E5 0288
        gbc.setState(0xd9bc, 0xea58, 0x370, 0xd635, 0xf7c1, 0x9f80, 0x0, 0x0);
        gbc.writeMem(0xd9bc, { 0xe5 });
        gbc.writeMem(0xea56, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xea56);
        EXPECT(gbc.pc(), 0xd9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9bc), 0xe5);
        EXPECT(gbc.readMem(0xea56), 0x80);
        EXPECT(gbc.readMem(0xea57), 0x9f);
        // E5 0289
        gbc.setState(0xb3a3, 0xd487, 0x6320, 0x940a, 0x13ce, 0xda36, 0x1, 0x1);
        gbc.writeMem(0xb3a3, { 0xe5 });
        gbc.writeMem(0xd485, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd485);
        EXPECT(gbc.pc(), 0xb3a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a3), 0xe5);
        EXPECT(gbc.readMem(0xd485), 0x36);
        EXPECT(gbc.readMem(0xd486), 0xda);
        // E5 028B
        gbc.setState(0xdc43, 0xf327, 0x9260, 0xa494, 0xdf6b, 0x4bf9, 0x0, 0x0);
        gbc.writeMem(0xdc43, { 0xe5 });
        gbc.writeMem(0xf325, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf325);
        EXPECT(gbc.pc(), 0xdc44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc43), 0xe5);
        EXPECT(gbc.readMem(0xf325), 0xf9);
        EXPECT(gbc.readMem(0xf326), 0x4b);
        // E5 028C
        gbc.setState(0x45fd, 0xd968, 0xdbe0, 0x95e7, 0x7808, 0x84ab, 0x1, 0x1);
        gbc.writeMem(0x45fd, { 0xe5 });
        gbc.writeMem(0xd966, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd966);
        EXPECT(gbc.pc(), 0x45fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd966), 0xab);
        EXPECT(gbc.readMem(0xd967), 0x84);
        // E5 028D
        gbc.setState(0xbd3c, 0xd908, 0x3e50, 0xc7f1, 0xe1da, 0x287f, 0x0, 0x1);
        gbc.writeMem(0xbd3c, { 0xe5 });
        gbc.writeMem(0xd906, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd906);
        EXPECT(gbc.pc(), 0xbd3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd3c), 0xe5);
        EXPECT(gbc.readMem(0xd906), 0x7f);
        EXPECT(gbc.readMem(0xd907), 0x28);
        // E5 028E
        gbc.setState(0x99e1, 0xc904, 0x8ca0, 0xb3f4, 0xf15d, 0xc8d6, 0x1, 0x1);
        gbc.writeMem(0x99e1, { 0xe5 });
        gbc.writeMem(0xc902, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc902);
        EXPECT(gbc.pc(), 0x99e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e1), 0xe5);
        EXPECT(gbc.readMem(0xc902), 0xd6);
        EXPECT(gbc.readMem(0xc903), 0xc8);
        // E5 028F
        gbc.setState(0x4368, 0xfbba, 0xfb70, 0x7590, 0x8e91, 0xf5ed, 0x0, 0x0);
        gbc.writeMem(0x4368, { 0xe5 });
        gbc.writeMem(0xfbb8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfbb8);
        EXPECT(gbc.pc(), 0x4369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbb8), 0xed);
        EXPECT(gbc.readMem(0xfbb9), 0xf5);
        // E5 0293
        gbc.setState(0xd9c5, 0xb028, 0xb850, 0x1e3d, 0x44c2, 0x1663, 0x0, 0x1);
        gbc.writeMem(0xb026, { 0x0, 0x0 });
        gbc.writeMem(0xd9c5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb026);
        EXPECT(gbc.pc(), 0xd9c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb026), 0x63);
        EXPECT(gbc.readMem(0xb027), 0x16);
        EXPECT(gbc.readMem(0xd9c5), 0xe5);
        // E5 0295
        gbc.setState(0xda2b, 0xfd04, 0x2ec0, 0xc48f, 0x4b51, 0xddde, 0x0, 0x0);
        gbc.writeMem(0xda2b, { 0xe5 });
        gbc.writeMem(0xfd02, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfd02);
        EXPECT(gbc.pc(), 0xda2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda2b), 0xe5);
        EXPECT(gbc.readMem(0xfd02), 0xde);
        EXPECT(gbc.readMem(0xfd03), 0xdd);
        // E5 0296
        gbc.setState(0xab2d, 0x9402, 0x1de0, 0xc28e, 0xc262, 0xaf71, 0x1, 0x1);
        gbc.writeMem(0x9400, { 0x0, 0x0 });
        gbc.writeMem(0xab2d, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9400);
        EXPECT(gbc.pc(), 0xab2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9400), 0x71);
        EXPECT(gbc.readMem(0x9401), 0xaf);
        EXPECT(gbc.readMem(0xab2d), 0xe5);
        // E5 029A
        gbc.setState(0x385c, 0xff19, 0xaa60, 0xa0f2, 0x94c3, 0x96e4, 0x1, 0x1);
        gbc.writeMem(0x385c, { 0xe5 });
        gbc.writeMem(0xff17, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xff17);
        EXPECT(gbc.pc(), 0x385d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff17), 0xe4);
        EXPECT(gbc.readMem(0xff18), 0x96);
        // E5 029C
        gbc.setState(0xa032, 0xd136, 0x7330, 0x4531, 0x68cb, 0x3ede, 0x0, 0x0);
        gbc.writeMem(0xa032, { 0xe5 });
        gbc.writeMem(0xd134, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd134);
        EXPECT(gbc.pc(), 0xa033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa032), 0xe5);
        EXPECT(gbc.readMem(0xd134), 0xde);
        EXPECT(gbc.readMem(0xd135), 0x3e);
        // E5 029E
        gbc.setState(0x844e, 0x8a57, 0xfd90, 0x7186, 0x21ab, 0x2e94, 0x0, 0x0);
        gbc.writeMem(0x844e, { 0xe5 });
        gbc.writeMem(0x8a55, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8a55);
        EXPECT(gbc.pc(), 0x844f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x844e), 0xe5);
        EXPECT(gbc.readMem(0x8a55), 0x94);
        EXPECT(gbc.readMem(0x8a56), 0x2e);
        // E5 029F
        gbc.setState(0xc7db, 0xbd8a, 0xc320, 0x938a, 0xb58f, 0x46ec, 0x1, 0x1);
        gbc.writeMem(0xbd88, { 0x0, 0x0 });
        gbc.writeMem(0xc7db, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbd88);
        EXPECT(gbc.pc(), 0xc7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd88), 0xec);
        EXPECT(gbc.readMem(0xbd89), 0x46);
        EXPECT(gbc.readMem(0xc7db), 0xe5);
        // E5 02A1
        gbc.setState(0x17a3, 0xa773, 0x2500, 0x480f, 0x1f33, 0x7d31, 0x0, 0x1);
        gbc.writeMem(0x17a3, { 0xe5 });
        gbc.writeMem(0xa771, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa771);
        EXPECT(gbc.pc(), 0x17a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa771), 0x31);
        EXPECT(gbc.readMem(0xa772), 0x7d);
        // E5 02A2
        gbc.setState(0x520e, 0xd8d7, 0xe7d0, 0x6e48, 0x85fb, 0xa9c8, 0x0, 0x0);
        gbc.writeMem(0x520e, { 0xe5 });
        gbc.writeMem(0xd8d5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd8d5);
        EXPECT(gbc.pc(), 0x520f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8d5), 0xc8);
        EXPECT(gbc.readMem(0xd8d6), 0xa9);
        // E5 02A3
        gbc.setState(0xd34a, 0xb6e2, 0x510, 0xe7b0, 0x46d5, 0xeedc, 0x0, 0x1);
        gbc.writeMem(0xb6e0, { 0x0, 0x0 });
        gbc.writeMem(0xd34a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb6e0);
        EXPECT(gbc.pc(), 0xd34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e0), 0xdc);
        EXPECT(gbc.readMem(0xb6e1), 0xee);
        EXPECT(gbc.readMem(0xd34a), 0xe5);
        // E5 02A4
        gbc.setState(0x6412, 0xd554, 0xcf0, 0xe9d0, 0x843d, 0xb6be, 0x1, 0x0);
        gbc.writeMem(0x6412, { 0xe5 });
        gbc.writeMem(0xd552, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd552);
        EXPECT(gbc.pc(), 0x6413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd552), 0xbe);
        EXPECT(gbc.readMem(0xd553), 0xb6);
        // E5 02A6
        gbc.setState(0x57be, 0xbe49, 0x2770, 0x45a4, 0x781d, 0xaf1f, 0x0, 0x0);
        gbc.writeMem(0x57be, { 0xe5 });
        gbc.writeMem(0xbe47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbe47);
        EXPECT(gbc.pc(), 0x57bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe47), 0x1f);
        EXPECT(gbc.readMem(0xbe48), 0xaf);
        // E5 02A7
        gbc.setState(0x900a, 0xe35e, 0x5480, 0xf2c1, 0x6c9a, 0x15d6, 0x1, 0x0);
        gbc.writeMem(0x900a, { 0xe5 });
        gbc.writeMem(0xe35c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe35c);
        EXPECT(gbc.pc(), 0x900b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900a), 0xe5);
        EXPECT(gbc.readMem(0xe35c), 0xd6);
        EXPECT(gbc.readMem(0xe35d), 0x15);
        // E5 02AD
        gbc.setState(0x61e5, 0xec45, 0xba60, 0xa101, 0x77e0, 0x2371, 0x1, 0x1);
        gbc.writeMem(0x61e5, { 0xe5 });
        gbc.writeMem(0xec43, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xec43);
        EXPECT(gbc.pc(), 0x61e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec43), 0x71);
        EXPECT(gbc.readMem(0xec44), 0x23);
        // E5 02AE
        gbc.setState(0x4d1d, 0x8b10, 0x6d60, 0xbb6f, 0x7a91, 0x5f99, 0x0, 0x1);
        gbc.writeMem(0x4d1d, { 0xe5 });
        gbc.writeMem(0x8b0e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8b0e);
        EXPECT(gbc.pc(), 0x4d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0e), 0x99);
        EXPECT(gbc.readMem(0x8b0f), 0x5f);
        // E5 02AF
        gbc.setState(0xb104, 0x9589, 0x9ad0, 0x53fc, 0x1308, 0x2a6e, 0x1, 0x0);
        gbc.writeMem(0x9587, { 0x0, 0x0 });
        gbc.writeMem(0xb104, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9587);
        EXPECT(gbc.pc(), 0xb105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9587), 0x6e);
        EXPECT(gbc.readMem(0x9588), 0x2a);
        EXPECT(gbc.readMem(0xb104), 0xe5);
        // E5 02B0
        gbc.setState(0x9e8c, 0xbd86, 0x8a10, 0x11a2, 0xaca1, 0xdf03, 0x1, 0x0);
        gbc.writeMem(0x9e8c, { 0xe5 });
        gbc.writeMem(0xbd84, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbd84);
        EXPECT(gbc.pc(), 0x9e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8c), 0xe5);
        EXPECT(gbc.readMem(0xbd84), 0x3);
        EXPECT(gbc.readMem(0xbd85), 0xdf);
        // E5 02B2
        gbc.setState(0x21eb, 0xc24a, 0x140, 0xb810, 0x86a9, 0xf93e, 0x1, 0x0);
        gbc.writeMem(0x21eb, { 0xe5 });
        gbc.writeMem(0xc248, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc248);
        EXPECT(gbc.pc(), 0x21ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc248), 0x3e);
        EXPECT(gbc.readMem(0xc249), 0xf9);
        // E5 02B7
        gbc.setState(0x87dd, 0xd92d, 0xe220, 0xdd86, 0x5157, 0xe095, 0x1, 0x1);
        gbc.writeMem(0x87dd, { 0xe5 });
        gbc.writeMem(0xd92b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd92b);
        EXPECT(gbc.pc(), 0x87de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87dd), 0xe5);
        EXPECT(gbc.readMem(0xd92b), 0x95);
        EXPECT(gbc.readMem(0xd92c), 0xe0);
        // E5 02B8
        gbc.setState(0x9195, 0xd6c1, 0xa500, 0xda69, 0x2677, 0x9984, 0x0, 0x1);
        gbc.writeMem(0x9195, { 0xe5 });
        gbc.writeMem(0xd6bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd6bf);
        EXPECT(gbc.pc(), 0x9196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9195), 0xe5);
        EXPECT(gbc.readMem(0xd6bf), 0x84);
        EXPECT(gbc.readMem(0xd6c0), 0x99);
        // E5 02BD
        gbc.setState(0x893b, 0xb408, 0xf840, 0x161a, 0x57a, 0xa1ea, 0x0, 0x1);
        gbc.writeMem(0x893b, { 0xe5 });
        gbc.writeMem(0xb406, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb406);
        EXPECT(gbc.pc(), 0x893c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x893b), 0xe5);
        EXPECT(gbc.readMem(0xb406), 0xea);
        EXPECT(gbc.readMem(0xb407), 0xa1);
        // E5 02C2
        gbc.setState(0xe54b, 0xb4b6, 0x1b0, 0xf4cb, 0x6f9c, 0x1e1d, 0x1, 0x0);
        gbc.writeMem(0xb4b4, { 0x0, 0x0 });
        gbc.writeMem(0xe54b, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb4b4);
        EXPECT(gbc.pc(), 0xe54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4b4), 0x1d);
        EXPECT(gbc.readMem(0xb4b5), 0x1e);
        EXPECT(gbc.readMem(0xe54b), 0xe5);
        // E5 02C3
        gbc.setState(0x26db, 0xba73, 0x4d00, 0x21d4, 0x858a, 0xd0f, 0x1, 0x0);
        gbc.writeMem(0x26db, { 0xe5 });
        gbc.writeMem(0xba71, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xba71);
        EXPECT(gbc.pc(), 0x26dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba71), 0xf);
        EXPECT(gbc.readMem(0xba72), 0xd);
        // E5 02C5
        gbc.setState(0x8393, 0xc2f0, 0xd900, 0x48a6, 0x683f, 0xbe0e, 0x1, 0x0);
        gbc.writeMem(0x8393, { 0xe5 });
        gbc.writeMem(0xc2ee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc2ee);
        EXPECT(gbc.pc(), 0x8394);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8393), 0xe5);
        EXPECT(gbc.readMem(0xc2ee), 0xe);
        EXPECT(gbc.readMem(0xc2ef), 0xbe);
        // E5 02C6
        gbc.setState(0x11bf, 0x8677, 0xb0b0, 0x2ba9, 0xfc94, 0x46f6, 0x1, 0x1);
        gbc.writeMem(0x11bf, { 0xe5 });
        gbc.writeMem(0x8675, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8675);
        EXPECT(gbc.pc(), 0x11c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8675), 0xf6);
        EXPECT(gbc.readMem(0x8676), 0x46);
        // E5 02C8
        gbc.setState(0xde84, 0xc58b, 0x5340, 0x4f42, 0xf29, 0xe5a5, 0x1, 0x0);
        gbc.writeMem(0xc589, { 0x0, 0x0 });
        gbc.writeMem(0xde84, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc589);
        EXPECT(gbc.pc(), 0xde85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc589), 0xa5);
        EXPECT(gbc.readMem(0xc58a), 0xe5);
        EXPECT(gbc.readMem(0xde84), 0xe5);
        // E5 02CA
        gbc.setState(0x792c, 0x85b9, 0x4d00, 0x1fa4, 0x31db, 0x515e, 0x1, 0x0);
        gbc.writeMem(0x792c, { 0xe5 });
        gbc.writeMem(0x85b7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x85b7);
        EXPECT(gbc.pc(), 0x792d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b7), 0x5e);
        EXPECT(gbc.readMem(0x85b8), 0x51);
        // E5 02D0
        gbc.setState(0xeaf6, 0xf0da, 0x35e0, 0xabca, 0xa3b1, 0x9dee, 0x1, 0x1);
        gbc.writeMem(0xeaf6, { 0xe5 });
        gbc.writeMem(0xf0d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf0d8);
        EXPECT(gbc.pc(), 0xeaf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf6), 0xe5);
        EXPECT(gbc.readMem(0xf0d8), 0xee);
        EXPECT(gbc.readMem(0xf0d9), 0x9d);
        // E5 02D3
        gbc.setState(0xc047, 0xd045, 0xf180, 0xb97c, 0x4529, 0x7b36, 0x1, 0x0);
        gbc.writeMem(0xc047, { 0xe5 });
        gbc.writeMem(0xd043, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd043);
        EXPECT(gbc.pc(), 0xc048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc047), 0xe5);
        EXPECT(gbc.readMem(0xd043), 0x36);
        EXPECT(gbc.readMem(0xd044), 0x7b);
        // E5 02D4
        gbc.setState(0xa9d, 0xfed1, 0x5680, 0xf8fd, 0xacc9, 0xdc8b, 0x1, 0x0);
        gbc.writeMem(0xa9d, { 0xe5 });
        gbc.writeMem(0xfecf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xfecf);
        EXPECT(gbc.pc(), 0xa9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfecf), 0x8b);
        EXPECT(gbc.readMem(0xfed0), 0xdc);
        // E5 02DA
        gbc.setState(0xb0b8, 0xb54b, 0xb00, 0x26f9, 0x46b4, 0xde68, 0x0, 0x1);
        gbc.writeMem(0xb0b8, { 0xe5 });
        gbc.writeMem(0xb549, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb549);
        EXPECT(gbc.pc(), 0xb0b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b8), 0xe5);
        EXPECT(gbc.readMem(0xb549), 0x68);
        EXPECT(gbc.readMem(0xb54a), 0xde);
        // E5 02DD
        gbc.setState(0x7ace, 0xcbe4, 0x2610, 0x6c6b, 0x6ad3, 0x1803, 0x0, 0x0);
        gbc.writeMem(0x7ace, { 0xe5 });
        gbc.writeMem(0xcbe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcbe2);
        EXPECT(gbc.pc(), 0x7acf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe2), 0x3);
        EXPECT(gbc.readMem(0xcbe3), 0x18);
        // E5 02DE
        gbc.setState(0x1457, 0xb77e, 0x8720, 0xa403, 0xd678, 0xe053, 0x0, 0x1);
        gbc.writeMem(0x1457, { 0xe5 });
        gbc.writeMem(0xb77c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb77c);
        EXPECT(gbc.pc(), 0x1458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb77c), 0x53);
        EXPECT(gbc.readMem(0xb77d), 0xe0);
        // E5 02E0
        gbc.setState(0xbad8, 0x9419, 0x4b0, 0x6598, 0x58ea, 0x25c1, 0x1, 0x0);
        gbc.writeMem(0x9417, { 0x0, 0x0 });
        gbc.writeMem(0xbad8, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9417);
        EXPECT(gbc.pc(), 0xbad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9417), 0xc1);
        EXPECT(gbc.readMem(0x9418), 0x25);
        EXPECT(gbc.readMem(0xbad8), 0xe5);
        // E5 02E1
        gbc.setState(0x4de3, 0xc38a, 0x31e0, 0x2519, 0xb00a, 0x2e06, 0x0, 0x0);
        gbc.writeMem(0x4de3, { 0xe5 });
        gbc.writeMem(0xc388, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc388);
        EXPECT(gbc.pc(), 0x4de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc388), 0x6);
        EXPECT(gbc.readMem(0xc389), 0x2e);
        // E5 02E3
        gbc.setState(0x1fea, 0x96f3, 0x850, 0x85e9, 0x1e70, 0xa079, 0x1, 0x0);
        gbc.writeMem(0x1fea, { 0xe5 });
        gbc.writeMem(0x96f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x96f1);
        EXPECT(gbc.pc(), 0x1feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f1), 0x79);
        EXPECT(gbc.readMem(0x96f2), 0xa0);
        // E5 02E4
        gbc.setState(0x8882, 0xb724, 0xe8b0, 0xa684, 0x2d78, 0xdf5e, 0x1, 0x1);
        gbc.writeMem(0x8882, { 0xe5 });
        gbc.writeMem(0xb722, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb722);
        EXPECT(gbc.pc(), 0x8883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8882), 0xe5);
        EXPECT(gbc.readMem(0xb722), 0x5e);
        EXPECT(gbc.readMem(0xb723), 0xdf);
        // E5 02E6
        gbc.setState(0x6472, 0xb081, 0xc450, 0xec9f, 0x68c8, 0x50ee, 0x0, 0x0);
        gbc.writeMem(0x6472, { 0xe5 });
        gbc.writeMem(0xb07f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb07f);
        EXPECT(gbc.pc(), 0x6473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb07f), 0xee);
        EXPECT(gbc.readMem(0xb080), 0x50);
        // E5 02E7
        gbc.setState(0xa196, 0x8da8, 0xef0, 0x7772, 0x9b80, 0x9f7, 0x0, 0x1);
        gbc.writeMem(0x8da6, { 0x0, 0x0 });
        gbc.writeMem(0xa196, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8da6);
        EXPECT(gbc.pc(), 0xa197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da6), 0xf7);
        EXPECT(gbc.readMem(0x8da7), 0x9);
        EXPECT(gbc.readMem(0xa196), 0xe5);
        // E5 02E9
        gbc.setState(0x4b74, 0xd5ef, 0x4590, 0xd155, 0xd4, 0xc8d8, 0x0, 0x0);
        gbc.writeMem(0x4b74, { 0xe5 });
        gbc.writeMem(0xd5ed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd5ed);
        EXPECT(gbc.pc(), 0x4b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ed), 0xd8);
        EXPECT(gbc.readMem(0xd5ee), 0xc8);
        // E5 02ED
        gbc.setState(0x2314, 0x9159, 0x4540, 0xdbe5, 0x6e4e, 0x747b, 0x0, 0x1);
        gbc.writeMem(0x2314, { 0xe5 });
        gbc.writeMem(0x9157, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9157);
        EXPECT(gbc.pc(), 0x2315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9157), 0x7b);
        EXPECT(gbc.readMem(0x9158), 0x74);
        // E5 02EE
        gbc.setState(0x4a64, 0xbf4d, 0x4850, 0xac88, 0x21b, 0x5a56, 0x0, 0x0);
        gbc.writeMem(0x4a64, { 0xe5 });
        gbc.writeMem(0xbf4b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbf4b);
        EXPECT(gbc.pc(), 0x4a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf4b), 0x56);
        EXPECT(gbc.readMem(0xbf4c), 0x5a);
        // E5 02EF
        gbc.setState(0x853e, 0xd4bd, 0x3550, 0x8abb, 0xd754, 0xad1d, 0x0, 0x1);
        gbc.writeMem(0x853e, { 0xe5 });
        gbc.writeMem(0xd4bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd4bb);
        EXPECT(gbc.pc(), 0x853f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853e), 0xe5);
        EXPECT(gbc.readMem(0xd4bb), 0x1d);
        EXPECT(gbc.readMem(0xd4bc), 0xad);
        // E5 02F0
        gbc.setState(0xe66b, 0xfdb2, 0x32d0, 0x18b9, 0x4eb8, 0x7766, 0x0, 0x0);
        gbc.writeMem(0xe66b, { 0xe5 });
        gbc.writeMem(0xfdb0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xfdb0);
        EXPECT(gbc.pc(), 0xe66c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66b), 0xe5);
        EXPECT(gbc.readMem(0xfdb0), 0x66);
        EXPECT(gbc.readMem(0xfdb1), 0x77);
        // E5 02F2
        gbc.setState(0x2789, 0xb1b7, 0xfc20, 0x19a5, 0x5b14, 0x344e, 0x0, 0x0);
        gbc.writeMem(0x2789, { 0xe5 });
        gbc.writeMem(0xb1b5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb1b5);
        EXPECT(gbc.pc(), 0x278a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b5), 0x4e);
        EXPECT(gbc.readMem(0xb1b6), 0x34);
        // E5 02F3
        gbc.setState(0x898d, 0x9a7b, 0xa150, 0x7dff, 0x8ddb, 0x61e9, 0x1, 0x1);
        gbc.writeMem(0x898d, { 0xe5 });
        gbc.writeMem(0x9a79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9a79);
        EXPECT(gbc.pc(), 0x898e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898d), 0xe5);
        EXPECT(gbc.readMem(0x9a79), 0xe9);
        EXPECT(gbc.readMem(0x9a7a), 0x61);
        // E5 02F4
        gbc.setState(0x20ef, 0xb450, 0x1950, 0xf5af, 0x31e2, 0x23b1, 0x0, 0x0);
        gbc.writeMem(0x20ef, { 0xe5 });
        gbc.writeMem(0xb44e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb44e);
        EXPECT(gbc.pc(), 0x20f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44e), 0xb1);
        EXPECT(gbc.readMem(0xb44f), 0x23);
        // E5 02F5
        gbc.setState(0xa68e, 0xccda, 0x22c0, 0xf629, 0x7bea, 0x9290, 0x1, 0x1);
        gbc.writeMem(0xa68e, { 0xe5 });
        gbc.writeMem(0xccd8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xccd8);
        EXPECT(gbc.pc(), 0xa68f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68e), 0xe5);
        EXPECT(gbc.readMem(0xccd8), 0x90);
        EXPECT(gbc.readMem(0xccd9), 0x92);
        // E5 02F6
        gbc.setState(0x5aef, 0x9ffe, 0xba60, 0x4d6b, 0xbb00, 0x60c1, 0x0, 0x0);
        gbc.writeMem(0x5aef, { 0xe5 });
        gbc.writeMem(0x9ffc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9ffc);
        EXPECT(gbc.pc(), 0x5af0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffc), 0xc1);
        EXPECT(gbc.readMem(0x9ffd), 0x60);
        // E5 02F8
        gbc.setState(0x21c6, 0xbebf, 0x6ba0, 0x9ef4, 0x90c, 0x2ee9, 0x1, 0x1);
        gbc.writeMem(0x21c6, { 0xe5 });
        gbc.writeMem(0xbebd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbebd);
        EXPECT(gbc.pc(), 0x21c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbebd), 0xe9);
        EXPECT(gbc.readMem(0xbebe), 0x2e);
        // E5 02F9
        gbc.setState(0x1964, 0xeb25, 0x7550, 0xfa0b, 0xa343, 0x1287, 0x1, 0x0);
        gbc.writeMem(0x1964, { 0xe5 });
        gbc.writeMem(0xeb23, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xeb23);
        EXPECT(gbc.pc(), 0x1965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb23), 0x87);
        EXPECT(gbc.readMem(0xeb24), 0x12);
        // E5 02FC
        gbc.setState(0x807d, 0xbb0e, 0x9640, 0x3933, 0xeaa4, 0xffb1, 0x1, 0x0);
        gbc.writeMem(0x807d, { 0xe5 });
        gbc.writeMem(0xbb0c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbb0c);
        EXPECT(gbc.pc(), 0x807e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807d), 0xe5);
        EXPECT(gbc.readMem(0xbb0c), 0xb1);
        EXPECT(gbc.readMem(0xbb0d), 0xff);
        // E5 02FD
        gbc.setState(0x26df, 0xf23e, 0x7d70, 0xc0fa, 0x47e2, 0xf203, 0x1, 0x1);
        gbc.writeMem(0x26df, { 0xe5 });
        gbc.writeMem(0xf23c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf23c);
        EXPECT(gbc.pc(), 0x26e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf23c), 0x3);
        EXPECT(gbc.readMem(0xf23d), 0xf2);
        // E5 02FF
        gbc.setState(0x7a4f, 0xfd53, 0x7b00, 0x1f85, 0xc8dd, 0x7ce0, 0x0, 0x0);
        gbc.writeMem(0x7a4f, { 0xe5 });
        gbc.writeMem(0xfd51, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfd51);
        EXPECT(gbc.pc(), 0x7a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd51), 0xe0);
        EXPECT(gbc.readMem(0xfd52), 0x7c);
        // E5 0300
        gbc.setState(0x62e2, 0xd1a1, 0x75e0, 0x6c18, 0xb1fb, 0x8f4f, 0x0, 0x0);
        gbc.writeMem(0x62e2, { 0xe5 });
        gbc.writeMem(0xd19f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd19f);
        EXPECT(gbc.pc(), 0x62e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19f), 0x4f);
        EXPECT(gbc.readMem(0xd1a0), 0x8f);
        // E5 0302
        gbc.setState(0xb13a, 0x89d8, 0xb380, 0x16fe, 0x8afb, 0x9f31, 0x0, 0x1);
        gbc.writeMem(0x89d6, { 0x0, 0x0 });
        gbc.writeMem(0xb13a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x89d6);
        EXPECT(gbc.pc(), 0xb13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d6), 0x31);
        EXPECT(gbc.readMem(0x89d7), 0x9f);
        EXPECT(gbc.readMem(0xb13a), 0xe5);
        // E5 0305
        gbc.setState(0x6f3b, 0xccee, 0xa0b0, 0x4590, 0x2e62, 0xe634, 0x0, 0x0);
        gbc.writeMem(0x6f3b, { 0xe5 });
        gbc.writeMem(0xccec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0x6f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccec), 0x34);
        EXPECT(gbc.readMem(0xcced), 0xe6);
        // E5 0306
        gbc.setState(0xa35f, 0xbedb, 0x7dc0, 0xee03, 0x5e03, 0x78ed, 0x1, 0x1);
        gbc.writeMem(0xa35f, { 0xe5 });
        gbc.writeMem(0xbed9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbed9);
        EXPECT(gbc.pc(), 0xa360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35f), 0xe5);
        EXPECT(gbc.readMem(0xbed9), 0xed);
        EXPECT(gbc.readMem(0xbeda), 0x78);
        // E5 0307
        gbc.setState(0x87d0, 0x9c93, 0xdf00, 0x9733, 0x72b6, 0x230f, 0x1, 0x1);
        gbc.writeMem(0x87d0, { 0xe5 });
        gbc.writeMem(0x9c91, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9c91);
        EXPECT(gbc.pc(), 0x87d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d0), 0xe5);
        EXPECT(gbc.readMem(0x9c91), 0xf);
        EXPECT(gbc.readMem(0x9c92), 0x23);
        // E5 0308
        gbc.setState(0x5e75, 0xfca7, 0x1190, 0xfe4d, 0x2c17, 0xf0ff, 0x0, 0x1);
        gbc.writeMem(0x5e75, { 0xe5 });
        gbc.writeMem(0xfca5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfca5);
        EXPECT(gbc.pc(), 0x5e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfca5), 0xff);
        EXPECT(gbc.readMem(0xfca6), 0xf0);
        // E5 030C
        gbc.setState(0x87a4, 0xc29f, 0x87f0, 0x121c, 0xb316, 0xefe8, 0x1, 0x0);
        gbc.writeMem(0x87a4, { 0xe5 });
        gbc.writeMem(0xc29d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc29d);
        EXPECT(gbc.pc(), 0x87a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a4), 0xe5);
        EXPECT(gbc.readMem(0xc29d), 0xe8);
        EXPECT(gbc.readMem(0xc29e), 0xef);
        // E5 030E
        gbc.setState(0x3ded, 0x9654, 0x29c0, 0xe315, 0x1b78, 0x6958, 0x1, 0x0);
        gbc.writeMem(0x3ded, { 0xe5 });
        gbc.writeMem(0x9652, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9652);
        EXPECT(gbc.pc(), 0x3dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9652), 0x58);
        EXPECT(gbc.readMem(0x9653), 0x69);
        // E5 030F
        gbc.setState(0x63a2, 0xf9be, 0x3d90, 0xdba9, 0xd977, 0x190b, 0x0, 0x1);
        gbc.writeMem(0x63a2, { 0xe5 });
        gbc.writeMem(0xf9bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf9bc);
        EXPECT(gbc.pc(), 0x63a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9bc), 0xb);
        EXPECT(gbc.readMem(0xf9bd), 0x19);
        // E5 0311
        gbc.setState(0x23e, 0xfa1d, 0x9aa0, 0x23df, 0x13c8, 0xc63d, 0x1, 0x0);
        gbc.writeMem(0x23e, { 0xe5 });
        gbc.writeMem(0xfa1b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0x23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa1b), 0x3d);
        EXPECT(gbc.readMem(0xfa1c), 0xc6);
        // E5 0318
        gbc.setState(0x7369, 0x8155, 0xd870, 0xa30e, 0xf2d5, 0x1027, 0x1, 0x1);
        gbc.writeMem(0x7369, { 0xe5 });
        gbc.writeMem(0x8153, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8153);
        EXPECT(gbc.pc(), 0x736a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8153), 0x27);
        EXPECT(gbc.readMem(0x8154), 0x10);
        // E5 031A
        gbc.setState(0x3b26, 0xfb7d, 0x6760, 0xab3b, 0x9d21, 0x74cf, 0x1, 0x1);
        gbc.writeMem(0x3b26, { 0xe5 });
        gbc.writeMem(0xfb7b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfb7b);
        EXPECT(gbc.pc(), 0x3b27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb7b), 0xcf);
        EXPECT(gbc.readMem(0xfb7c), 0x74);
        // E5 031B
        gbc.setState(0x57fb, 0xce4c, 0xccf0, 0x74ba, 0x8aef, 0x46cb, 0x0, 0x1);
        gbc.writeMem(0x57fb, { 0xe5 });
        gbc.writeMem(0xce4a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xce4a);
        EXPECT(gbc.pc(), 0x57fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4a), 0xcb);
        EXPECT(gbc.readMem(0xce4b), 0x46);
        // E5 031D
        gbc.setState(0xa51a, 0x971c, 0x91c0, 0xf1bb, 0x46b0, 0x8110, 0x0, 0x0);
        gbc.writeMem(0x971a, { 0x0, 0x0 });
        gbc.writeMem(0xa51a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x971a);
        EXPECT(gbc.pc(), 0xa51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971a), 0x10);
        EXPECT(gbc.readMem(0x971b), 0x81);
        EXPECT(gbc.readMem(0xa51a), 0xe5);
        // E5 0320
        gbc.setState(0x4882, 0xc875, 0x2110, 0x9534, 0x71bc, 0x19a3, 0x1, 0x0);
        gbc.writeMem(0x4882, { 0xe5 });
        gbc.writeMem(0xc873, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc873);
        EXPECT(gbc.pc(), 0x4883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc873), 0xa3);
        EXPECT(gbc.readMem(0xc874), 0x19);
        // E5 0326
        gbc.setState(0xc83e, 0xeaf5, 0xe3c0, 0x5d3e, 0xcf01, 0x88d3, 0x1, 0x1);
        gbc.writeMem(0xc83e, { 0xe5 });
        gbc.writeMem(0xeaf3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xeaf3);
        EXPECT(gbc.pc(), 0xc83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83e), 0xe5);
        EXPECT(gbc.readMem(0xeaf3), 0xd3);
        EXPECT(gbc.readMem(0xeaf4), 0x88);
        // E5 0327
        gbc.setState(0xe00a, 0x9b35, 0x2cd0, 0xde0f, 0x9463, 0x7998, 0x1, 0x0);
        gbc.writeMem(0x9b33, { 0x0, 0x0 });
        gbc.writeMem(0xe00a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9b33);
        EXPECT(gbc.pc(), 0xe00b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b33), 0x98);
        EXPECT(gbc.readMem(0x9b34), 0x79);
        EXPECT(gbc.readMem(0xe00a), 0xe5);
        // E5 0329
        gbc.setState(0xbf55, 0x9416, 0x9280, 0x2a9b, 0x2b40, 0xdb4d, 0x1, 0x1);
        gbc.writeMem(0x9414, { 0x0, 0x0 });
        gbc.writeMem(0xbf55, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9414);
        EXPECT(gbc.pc(), 0xbf56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9414), 0x4d);
        EXPECT(gbc.readMem(0x9415), 0xdb);
        EXPECT(gbc.readMem(0xbf55), 0xe5);
        // E5 032D
        gbc.setState(0x4f97, 0x96ec, 0xc0e0, 0x65eb, 0x95bc, 0xda82, 0x1, 0x1);
        gbc.writeMem(0x4f97, { 0xe5 });
        gbc.writeMem(0x96ea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x96ea);
        EXPECT(gbc.pc(), 0x4f98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ea), 0x82);
        EXPECT(gbc.readMem(0x96eb), 0xda);
        // E5 032E
        gbc.setState(0xcf1c, 0xf8e7, 0x9010, 0xa572, 0xdcaa, 0x20e4, 0x0, 0x1);
        gbc.writeMem(0xcf1c, { 0xe5 });
        gbc.writeMem(0xf8e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf8e5);
        EXPECT(gbc.pc(), 0xcf1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf1c), 0xe5);
        EXPECT(gbc.readMem(0xf8e5), 0xe4);
        EXPECT(gbc.readMem(0xf8e6), 0x20);
        // E5 0334
        gbc.setState(0x5663, 0x802d, 0xbd60, 0x4002, 0x96fc, 0xfe9d, 0x1, 0x0);
        gbc.writeMem(0x5663, { 0xe5 });
        gbc.writeMem(0x802b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x802b);
        EXPECT(gbc.pc(), 0x5664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802b), 0x9d);
        EXPECT(gbc.readMem(0x802c), 0xfe);
        // E5 0335
        gbc.setState(0x7bf9, 0xea04, 0xda00, 0x1e89, 0xf496, 0x3a11, 0x0, 0x1);
        gbc.writeMem(0x7bf9, { 0xe5 });
        gbc.writeMem(0xea02, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xea02);
        EXPECT(gbc.pc(), 0x7bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea02), 0x11);
        EXPECT(gbc.readMem(0xea03), 0x3a);
        // E5 0336
        gbc.setState(0x9db2, 0xf018, 0x54b0, 0xf296, 0xc448, 0xb2b2, 0x1, 0x0);
        gbc.writeMem(0x9db2, { 0xe5 });
        gbc.writeMem(0xf016, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf016);
        EXPECT(gbc.pc(), 0x9db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9db2), 0xe5);
        EXPECT(gbc.readMem(0xf016), 0xb2);
        EXPECT(gbc.readMem(0xf017), 0xb2);
        // E5 0337
        gbc.setState(0xa062, 0xd3fa, 0x8700, 0x9d9a, 0x380c, 0xd6d4, 0x1, 0x0);
        gbc.writeMem(0xa062, { 0xe5 });
        gbc.writeMem(0xd3f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd3f8);
        EXPECT(gbc.pc(), 0xa063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa062), 0xe5);
        EXPECT(gbc.readMem(0xd3f8), 0xd4);
        EXPECT(gbc.readMem(0xd3f9), 0xd6);
        // E5 0338
        gbc.setState(0xb183, 0xba87, 0xc050, 0xc570, 0x2705, 0xdae5, 0x1, 0x1);
        gbc.writeMem(0xb183, { 0xe5 });
        gbc.writeMem(0xba85, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xba85);
        EXPECT(gbc.pc(), 0xb184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb183), 0xe5);
        EXPECT(gbc.readMem(0xba85), 0xe5);
        EXPECT(gbc.readMem(0xba86), 0xda);
        // E5 0339
        gbc.setState(0x74bf, 0xc401, 0xb380, 0x5c71, 0x65cb, 0xd694, 0x0, 0x0);
        gbc.writeMem(0x74bf, { 0xe5 });
        gbc.writeMem(0xc3ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc3ff);
        EXPECT(gbc.pc(), 0x74c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ff), 0x94);
        EXPECT(gbc.readMem(0xc400), 0xd6);
        // E5 033A
        gbc.setState(0xd7c, 0x92dd, 0xd5c0, 0x55a6, 0xd312, 0xbb49, 0x0, 0x1);
        gbc.writeMem(0xd7c, { 0xe5 });
        gbc.writeMem(0x92db, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x92db);
        EXPECT(gbc.pc(), 0xd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92db), 0x49);
        EXPECT(gbc.readMem(0x92dc), 0xbb);
        // E5 033B
        gbc.setState(0xa353, 0xa986, 0xfad0, 0x1cef, 0xce0c, 0x91b3, 0x0, 0x0);
        gbc.writeMem(0xa353, { 0xe5 });
        gbc.writeMem(0xa984, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa984);
        EXPECT(gbc.pc(), 0xa354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa353), 0xe5);
        EXPECT(gbc.readMem(0xa984), 0xb3);
        EXPECT(gbc.readMem(0xa985), 0x91);
        // E5 033D
        gbc.setState(0x195f, 0xaab1, 0x2110, 0xb185, 0x9cb6, 0x8434, 0x1, 0x0);
        gbc.writeMem(0x195f, { 0xe5 });
        gbc.writeMem(0xaaaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xaaaf);
        EXPECT(gbc.pc(), 0x1960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaaf), 0x34);
        EXPECT(gbc.readMem(0xaab0), 0x84);
        // E5 033E
        gbc.setState(0xdc08, 0xa825, 0x6c90, 0x60c5, 0x972e, 0xc794, 0x1, 0x0);
        gbc.writeMem(0xa823, { 0x0, 0x0 });
        gbc.writeMem(0xdc08, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa823);
        EXPECT(gbc.pc(), 0xdc09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa823), 0x94);
        EXPECT(gbc.readMem(0xa824), 0xc7);
        EXPECT(gbc.readMem(0xdc08), 0xe5);
        // E5 0340
        gbc.setState(0x55c6, 0x9907, 0xeb0, 0xebd7, 0x1451, 0xe518, 0x1, 0x0);
        gbc.writeMem(0x55c6, { 0xe5 });
        gbc.writeMem(0x9905, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9905);
        EXPECT(gbc.pc(), 0x55c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9905), 0x18);
        EXPECT(gbc.readMem(0x9906), 0xe5);
        // E5 0341
        gbc.setState(0xd38c, 0xbb22, 0x4a70, 0xf89b, 0x9b71, 0x3f3e, 0x1, 0x0);
        gbc.writeMem(0xbb20, { 0x0, 0x0 });
        gbc.writeMem(0xd38c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbb20);
        EXPECT(gbc.pc(), 0xd38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb20), 0x3e);
        EXPECT(gbc.readMem(0xbb21), 0x3f);
        EXPECT(gbc.readMem(0xd38c), 0xe5);
        // E5 0342
        gbc.setState(0x9d1d, 0xff9a, 0xd5e0, 0xcb43, 0xb5d5, 0xc087, 0x1, 0x0);
        gbc.writeMem(0x9d1d, { 0xe5 });
        gbc.writeMem(0xff98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xff98);
        EXPECT(gbc.pc(), 0x9d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1d), 0xe5);
        EXPECT(gbc.readMem(0xff98), 0x87);
        EXPECT(gbc.readMem(0xff99), 0xc0);
        // E5 0343
        gbc.setState(0xecbe, 0xcf2f, 0xffb0, 0x653e, 0x5c2d, 0x4844, 0x0, 0x1);
        gbc.writeMem(0xcf2d, { 0x0, 0x0 });
        gbc.writeMem(0xecbe, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcf2d);
        EXPECT(gbc.pc(), 0xecbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2d), 0x44);
        EXPECT(gbc.readMem(0xcf2e), 0x48);
        EXPECT(gbc.readMem(0xecbe), 0xe5);
        // E5 0345
        gbc.setState(0x2985, 0xe2bd, 0xfc00, 0x1f56, 0x44f4, 0xacf3, 0x0, 0x0);
        gbc.writeMem(0x2985, { 0xe5 });
        gbc.writeMem(0xe2bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe2bb);
        EXPECT(gbc.pc(), 0x2986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2bb), 0xf3);
        EXPECT(gbc.readMem(0xe2bc), 0xac);
        // E5 0346
        gbc.setState(0x9f8d, 0xb0c6, 0xc80, 0x4448, 0x945b, 0xeb8c, 0x1, 0x1);
        gbc.writeMem(0x9f8d, { 0xe5 });
        gbc.writeMem(0xb0c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb0c4);
        EXPECT(gbc.pc(), 0x9f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f8d), 0xe5);
        EXPECT(gbc.readMem(0xb0c4), 0x8c);
        EXPECT(gbc.readMem(0xb0c5), 0xeb);
        // E5 0347
        gbc.setState(0x88ab, 0xac49, 0xe400, 0x9e23, 0xf69f, 0x8081, 0x1, 0x1);
        gbc.writeMem(0x88ab, { 0xe5 });
        gbc.writeMem(0xac47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xac47);
        EXPECT(gbc.pc(), 0x88ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ab), 0xe5);
        EXPECT(gbc.readMem(0xac47), 0x81);
        EXPECT(gbc.readMem(0xac48), 0x80);
        // E5 0349
        gbc.setState(0x5d48, 0xe9df, 0x92f0, 0x72d5, 0xc513, 0xd60c, 0x1, 0x0);
        gbc.writeMem(0x5d48, { 0xe5 });
        gbc.writeMem(0xe9dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe9dd);
        EXPECT(gbc.pc(), 0x5d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9dd), 0xc);
        EXPECT(gbc.readMem(0xe9de), 0xd6);
        // E5 034C
        gbc.setState(0x9e43, 0xfaf9, 0xe3c0, 0xe7af, 0xa252, 0x94ee, 0x1, 0x1);
        gbc.writeMem(0x9e43, { 0xe5 });
        gbc.writeMem(0xfaf7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfaf7);
        EXPECT(gbc.pc(), 0x9e44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e43), 0xe5);
        EXPECT(gbc.readMem(0xfaf7), 0xee);
        EXPECT(gbc.readMem(0xfaf8), 0x94);
        // E5 034D
        gbc.setState(0x20bb, 0x9b5b, 0x4540, 0xfeac, 0x286c, 0x6ad9, 0x0, 0x1);
        gbc.writeMem(0x20bb, { 0xe5 });
        gbc.writeMem(0x9b59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9b59);
        EXPECT(gbc.pc(), 0x20bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b59), 0xd9);
        EXPECT(gbc.readMem(0x9b5a), 0x6a);
        // E5 034E
        gbc.setState(0xe5f1, 0xd42a, 0x8920, 0x51d1, 0x8d2c, 0xe639, 0x0, 0x0);
        gbc.writeMem(0xd428, { 0x0, 0x0 });
        gbc.writeMem(0xe5f1, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd428);
        EXPECT(gbc.pc(), 0xe5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd428), 0x39);
        EXPECT(gbc.readMem(0xd429), 0xe6);
        EXPECT(gbc.readMem(0xe5f1), 0xe5);
        // E5 034F
        gbc.setState(0x758c, 0xba0a, 0xea60, 0x6c6f, 0x9f63, 0xa72c, 0x1, 0x0);
        gbc.writeMem(0x758c, { 0xe5 });
        gbc.writeMem(0xba08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xba08);
        EXPECT(gbc.pc(), 0x758d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba08), 0x2c);
        EXPECT(gbc.readMem(0xba09), 0xa7);
        // E5 0352
        gbc.setState(0xa148, 0xc323, 0x7c40, 0xc3, 0x6bdb, 0xc8da, 0x0, 0x1);
        gbc.writeMem(0xa148, { 0xe5 });
        gbc.writeMem(0xc321, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc321);
        EXPECT(gbc.pc(), 0xa149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa148), 0xe5);
        EXPECT(gbc.readMem(0xc321), 0xda);
        EXPECT(gbc.readMem(0xc322), 0xc8);
        // E5 0354
        gbc.setState(0xe38e, 0xedb6, 0xd310, 0xa7a5, 0xfce9, 0xcd35, 0x1, 0x0);
        gbc.writeMem(0xe38e, { 0xe5 });
        gbc.writeMem(0xedb4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xedb4);
        EXPECT(gbc.pc(), 0xe38f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38e), 0xe5);
        EXPECT(gbc.readMem(0xedb4), 0x35);
        EXPECT(gbc.readMem(0xedb5), 0xcd);
        // E5 0355
        gbc.setState(0x2784, 0xb54f, 0xbaa0, 0x43b5, 0x3dd4, 0x88d6, 0x0, 0x0);
        gbc.writeMem(0x2784, { 0xe5 });
        gbc.writeMem(0xb54d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb54d);
        EXPECT(gbc.pc(), 0x2785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb54d), 0xd6);
        EXPECT(gbc.readMem(0xb54e), 0x88);
        // E5 0356
        gbc.setState(0x28af, 0xe5df, 0x79a0, 0x3b19, 0x320f, 0xc5a8, 0x0, 0x0);
        gbc.writeMem(0x28af, { 0xe5 });
        gbc.writeMem(0xe5dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe5dd);
        EXPECT(gbc.pc(), 0x28b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5dd), 0xa8);
        EXPECT(gbc.readMem(0xe5de), 0xc5);
        // E5 0357
        gbc.setState(0x0, 0xd259, 0x5e20, 0x8b76, 0x3c63, 0x62c7, 0x0, 0x0);
        gbc.writeMem(0x0, { 0xe5 });
        gbc.writeMem(0xd257, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd257), 0xc7);
        EXPECT(gbc.readMem(0xd258), 0x62);
        // E5 035C
        gbc.setState(0x80d, 0xd24a, 0x1400, 0x5ea7, 0xbc3d, 0x1c5c, 0x1, 0x0);
        gbc.writeMem(0x80d, { 0xe5 });
        gbc.writeMem(0xd248, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd248);
        EXPECT(gbc.pc(), 0x80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd248), 0x5c);
        EXPECT(gbc.readMem(0xd249), 0x1c);
        // E5 035E
        gbc.setState(0xe053, 0xc99b, 0x4be0, 0x4d01, 0x613e, 0x6a81, 0x1, 0x1);
        gbc.writeMem(0xc999, { 0x0, 0x0 });
        gbc.writeMem(0xe053, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc999);
        EXPECT(gbc.pc(), 0xe054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc999), 0x81);
        EXPECT(gbc.readMem(0xc99a), 0x6a);
        EXPECT(gbc.readMem(0xe053), 0xe5);
        // E5 0366
        gbc.setState(0xd0ce, 0xde92, 0xde0, 0x9f0a, 0xc3c3, 0xe8d9, 0x0, 0x0);
        gbc.writeMem(0xd0ce, { 0xe5 });
        gbc.writeMem(0xde90, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xde90);
        EXPECT(gbc.pc(), 0xd0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ce), 0xe5);
        EXPECT(gbc.readMem(0xde90), 0xd9);
        EXPECT(gbc.readMem(0xde91), 0xe8);
        // E5 0367
        gbc.setState(0x9f38, 0xfc29, 0x9410, 0x2dd4, 0x353b, 0x4aa1, 0x0, 0x1);
        gbc.writeMem(0x9f38, { 0xe5 });
        gbc.writeMem(0xfc27, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xfc27);
        EXPECT(gbc.pc(), 0x9f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f38), 0xe5);
        EXPECT(gbc.readMem(0xfc27), 0xa1);
        EXPECT(gbc.readMem(0xfc28), 0x4a);
        // E5 0369
        gbc.setState(0xefad, 0xc2d1, 0x4510, 0xf2ca, 0x7f84, 0xb22a, 0x0, 0x1);
        gbc.writeMem(0xc2cf, { 0x0, 0x0 });
        gbc.writeMem(0xefad, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc2cf);
        EXPECT(gbc.pc(), 0xefae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2cf), 0x2a);
        EXPECT(gbc.readMem(0xc2d0), 0xb2);
        EXPECT(gbc.readMem(0xefad), 0xe5);
        // E5 036D
        gbc.setState(0x4aa6, 0x8058, 0x810, 0x292c, 0xca53, 0x625b, 0x1, 0x1);
        gbc.writeMem(0x4aa6, { 0xe5 });
        gbc.writeMem(0x8056, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8056);
        EXPECT(gbc.pc(), 0x4aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8056), 0x5b);
        EXPECT(gbc.readMem(0x8057), 0x62);
        // E5 0370
        gbc.setState(0xeffc, 0xfc5e, 0x6320, 0xa615, 0xdf43, 0xf23b, 0x1, 0x0);
        gbc.writeMem(0xeffc, { 0xe5 });
        gbc.writeMem(0xfc5c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfc5c);
        EXPECT(gbc.pc(), 0xeffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeffc), 0xe5);
        EXPECT(gbc.readMem(0xfc5c), 0x3b);
        EXPECT(gbc.readMem(0xfc5d), 0xf2);
        // E5 0373
        gbc.setState(0xbbf0, 0xc523, 0xb4e0, 0x773a, 0x91cd, 0x2566, 0x1, 0x1);
        gbc.writeMem(0xbbf0, { 0xe5 });
        gbc.writeMem(0xc521, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc521);
        EXPECT(gbc.pc(), 0xbbf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf0), 0xe5);
        EXPECT(gbc.readMem(0xc521), 0x66);
        EXPECT(gbc.readMem(0xc522), 0x25);
        // E5 0374
        gbc.setState(0xd114, 0xec12, 0xc7d0, 0x3a5b, 0x39a9, 0x794e, 0x1, 0x0);
        gbc.writeMem(0xd114, { 0xe5 });
        gbc.writeMem(0xec10, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xec10);
        EXPECT(gbc.pc(), 0xd115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd114), 0xe5);
        EXPECT(gbc.readMem(0xec10), 0x4e);
        EXPECT(gbc.readMem(0xec11), 0x79);
        // E5 0375
        gbc.setState(0x4121, 0xff97, 0x670, 0xd57, 0x973, 0x1a76, 0x0, 0x1);
        gbc.writeMem(0x4121, { 0xe5 });
        gbc.writeMem(0xff95, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xff95);
        EXPECT(gbc.pc(), 0x4122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff95), 0x76);
        EXPECT(gbc.readMem(0xff96), 0x1a);
        // E5 0378
        gbc.setState(0xbd42, 0xf5f6, 0x35b0, 0xbd8d, 0x56ec, 0xfcf, 0x1, 0x0);
        gbc.writeMem(0xbd42, { 0xe5 });
        gbc.writeMem(0xf5f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf5f4);
        EXPECT(gbc.pc(), 0xbd43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd42), 0xe5);
        EXPECT(gbc.readMem(0xf5f4), 0xcf);
        EXPECT(gbc.readMem(0xf5f5), 0xf);
        // E5 0379
        gbc.setState(0x1a29, 0x99cc, 0x5560, 0x773d, 0xe791, 0xc50b, 0x0, 0x0);
        gbc.writeMem(0x1a29, { 0xe5 });
        gbc.writeMem(0x99ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x99ca);
        EXPECT(gbc.pc(), 0x1a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ca), 0xb);
        EXPECT(gbc.readMem(0x99cb), 0xc5);
        // E5 037A
        gbc.setState(0x485b, 0x8bad, 0x9280, 0xbefc, 0xd66e, 0x50f0, 0x0, 0x1);
        gbc.writeMem(0x485b, { 0xe5 });
        gbc.writeMem(0x8bab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8bab);
        EXPECT(gbc.pc(), 0x485c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bab), 0xf0);
        EXPECT(gbc.readMem(0x8bac), 0x50);
        // E5 037B
        gbc.setState(0xa237, 0xddd3, 0x4110, 0x52b3, 0x14e4, 0x40eb, 0x1, 0x1);
        gbc.writeMem(0xa237, { 0xe5 });
        gbc.writeMem(0xddd1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xddd1);
        EXPECT(gbc.pc(), 0xa238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa237), 0xe5);
        EXPECT(gbc.readMem(0xddd1), 0xeb);
        EXPECT(gbc.readMem(0xddd2), 0x40);
        // E5 037D
        gbc.setState(0xe6b9, 0xd3f4, 0x1360, 0x1b1a, 0x6866, 0xd9d7, 0x1, 0x1);
        gbc.writeMem(0xd3f2, { 0x0, 0x0 });
        gbc.writeMem(0xe6b9, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd3f2);
        EXPECT(gbc.pc(), 0xe6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f2), 0xd7);
        EXPECT(gbc.readMem(0xd3f3), 0xd9);
        EXPECT(gbc.readMem(0xe6b9), 0xe5);
        // E5 037E
        gbc.setState(0xc497, 0xf3b6, 0x56d0, 0xb252, 0xb25e, 0xcd36, 0x0, 0x1);
        gbc.writeMem(0xc497, { 0xe5 });
        gbc.writeMem(0xf3b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf3b4);
        EXPECT(gbc.pc(), 0xc498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc497), 0xe5);
        EXPECT(gbc.readMem(0xf3b4), 0x36);
        EXPECT(gbc.readMem(0xf3b5), 0xcd);
        // E5 037F
        gbc.setState(0x33fc, 0xe86a, 0x2800, 0xdc6, 0xbcd8, 0x3582, 0x0, 0x1);
        gbc.writeMem(0x33fc, { 0xe5 });
        gbc.writeMem(0xe868, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe868);
        EXPECT(gbc.pc(), 0x33fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe868), 0x82);
        EXPECT(gbc.readMem(0xe869), 0x35);
        // E5 0381
        gbc.setState(0xec45, 0xc672, 0x8120, 0x2ff0, 0x6510, 0xff30, 0x1, 0x0);
        gbc.writeMem(0xc670, { 0x0, 0x0 });
        gbc.writeMem(0xec45, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc670);
        EXPECT(gbc.pc(), 0xec46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc670), 0x30);
        EXPECT(gbc.readMem(0xc671), 0xff);
        EXPECT(gbc.readMem(0xec45), 0xe5);
        // E5 0382
        gbc.setState(0x49c3, 0xbcf5, 0x93d0, 0x9fce, 0xaaf, 0x7cb6, 0x0, 0x1);
        gbc.writeMem(0x49c3, { 0xe5 });
        gbc.writeMem(0xbcf3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbcf3);
        EXPECT(gbc.pc(), 0x49c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf3), 0xb6);
        EXPECT(gbc.readMem(0xbcf4), 0x7c);
        // E5 0387
        gbc.setState(0xa322, 0xf86c, 0x9b70, 0x71a1, 0xfb9, 0x12ba, 0x0, 0x0);
        gbc.writeMem(0xa322, { 0xe5 });
        gbc.writeMem(0xf86a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf86a);
        EXPECT(gbc.pc(), 0xa323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa322), 0xe5);
        EXPECT(gbc.readMem(0xf86a), 0xba);
        EXPECT(gbc.readMem(0xf86b), 0x12);
        // E5 0389
        gbc.setState(0xc316, 0x9e7a, 0xa410, 0xb95f, 0xc003, 0xd58c, 0x0, 0x1);
        gbc.writeMem(0x9e78, { 0x0, 0x0 });
        gbc.writeMem(0xc316, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9e78);
        EXPECT(gbc.pc(), 0xc317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e78), 0x8c);
        EXPECT(gbc.readMem(0x9e79), 0xd5);
        EXPECT(gbc.readMem(0xc316), 0xe5);
        // E5 038B
        gbc.setState(0x479e, 0xc17c, 0x8dd0, 0x6ea1, 0x839b, 0x733a, 0x0, 0x1);
        gbc.writeMem(0x479e, { 0xe5 });
        gbc.writeMem(0xc17a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc17a);
        EXPECT(gbc.pc(), 0x479f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc17a), 0x3a);
        EXPECT(gbc.readMem(0xc17b), 0x73);
        // E5 038D
        gbc.setState(0x224, 0xa3ff, 0x9dd0, 0x125d, 0xa31, 0x6f65, 0x1, 0x0);
        gbc.writeMem(0x224, { 0xe5 });
        gbc.writeMem(0xa3fd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa3fd);
        EXPECT(gbc.pc(), 0x225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fd), 0x65);
        EXPECT(gbc.readMem(0xa3fe), 0x6f);
        // E5 038F
        gbc.setState(0xabe5, 0xad15, 0x3110, 0x66e1, 0x1464, 0xa0a, 0x1, 0x1);
        gbc.writeMem(0xabe5, { 0xe5 });
        gbc.writeMem(0xad13, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xad13);
        EXPECT(gbc.pc(), 0xabe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe5), 0xe5);
        EXPECT(gbc.readMem(0xad13), 0xa);
        EXPECT(gbc.readMem(0xad14), 0xa);
        // E5 0391
        gbc.setState(0x8128, 0xf09e, 0x76b0, 0x1b6e, 0x90f7, 0xd3a8, 0x1, 0x0);
        gbc.writeMem(0x8128, { 0xe5 });
        gbc.writeMem(0xf09c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf09c);
        EXPECT(gbc.pc(), 0x8129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8128), 0xe5);
        EXPECT(gbc.readMem(0xf09c), 0xa8);
        EXPECT(gbc.readMem(0xf09d), 0xd3);
        // E5 0392
        gbc.setState(0x8236, 0xc8bb, 0xc740, 0xb5ce, 0xa47e, 0x950c, 0x0, 0x0);
        gbc.writeMem(0x8236, { 0xe5 });
        gbc.writeMem(0xc8b9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0x8237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8236), 0xe5);
        EXPECT(gbc.readMem(0xc8b9), 0xc);
        EXPECT(gbc.readMem(0xc8ba), 0x95);
        // E5 0398
        gbc.setState(0x1a60, 0xd727, 0x2df0, 0xf7e3, 0x4ddd, 0xef35, 0x1, 0x1);
        gbc.writeMem(0x1a60, { 0xe5 });
        gbc.writeMem(0xd725, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd725);
        EXPECT(gbc.pc(), 0x1a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd725), 0x35);
        EXPECT(gbc.readMem(0xd726), 0xef);
        // E5 0399
        gbc.setState(0x937d, 0xe71d, 0x5900, 0x3fa1, 0x72b, 0x80b9, 0x0, 0x1);
        gbc.writeMem(0x937d, { 0xe5 });
        gbc.writeMem(0xe71b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe71b);
        EXPECT(gbc.pc(), 0x937e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937d), 0xe5);
        EXPECT(gbc.readMem(0xe71b), 0xb9);
        EXPECT(gbc.readMem(0xe71c), 0x80);
        // E5 039A
        gbc.setState(0x9c88, 0xddaa, 0xf8f0, 0x8809, 0xf3f7, 0xbe3a, 0x1, 0x0);
        gbc.writeMem(0x9c88, { 0xe5 });
        gbc.writeMem(0xdda8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdda8);
        EXPECT(gbc.pc(), 0x9c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c88), 0xe5);
        EXPECT(gbc.readMem(0xdda8), 0x3a);
        EXPECT(gbc.readMem(0xdda9), 0xbe);
        // E5 039D
        gbc.setState(0x4d50, 0xae23, 0x2720, 0x36d3, 0x3052, 0xec69, 0x1, 0x1);
        gbc.writeMem(0x4d50, { 0xe5 });
        gbc.writeMem(0xae21, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xae21);
        EXPECT(gbc.pc(), 0x4d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae21), 0x69);
        EXPECT(gbc.readMem(0xae22), 0xec);
        // E5 039E
        gbc.setState(0x5c26, 0xc0a4, 0xef80, 0xe812, 0x4b6f, 0x4cf9, 0x1, 0x0);
        gbc.writeMem(0x5c26, { 0xe5 });
        gbc.writeMem(0xc0a2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc0a2);
        EXPECT(gbc.pc(), 0x5c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a2), 0xf9);
        EXPECT(gbc.readMem(0xc0a3), 0x4c);
        // E5 03A1
        gbc.setState(0xbf5c, 0x94d0, 0x1840, 0xf3c1, 0xa06d, 0xa169, 0x1, 0x0);
        gbc.writeMem(0x94ce, { 0x0, 0x0 });
        gbc.writeMem(0xbf5c, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x94ce);
        EXPECT(gbc.pc(), 0xbf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ce), 0x69);
        EXPECT(gbc.readMem(0x94cf), 0xa1);
        EXPECT(gbc.readMem(0xbf5c), 0xe5);
        // E5 03A3
        gbc.setState(0xe24e, 0xe78a, 0xc6d0, 0x6377, 0x9074, 0x68d9, 0x0, 0x0);
        gbc.writeMem(0xe24e, { 0xe5 });
        gbc.writeMem(0xe788, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe788);
        EXPECT(gbc.pc(), 0xe24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe24e), 0xe5);
        EXPECT(gbc.readMem(0xe788), 0xd9);
        EXPECT(gbc.readMem(0xe789), 0x68);
        // E5 03A4
        gbc.setState(0xd2c6, 0xce76, 0x9f00, 0xc965, 0xa98f, 0xf119, 0x0, 0x1);
        gbc.writeMem(0xce74, { 0x0, 0x0 });
        gbc.writeMem(0xd2c6, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xce74);
        EXPECT(gbc.pc(), 0xd2c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce74), 0x19);
        EXPECT(gbc.readMem(0xce75), 0xf1);
        EXPECT(gbc.readMem(0xd2c6), 0xe5);
        // E5 03A7
        gbc.setState(0x4f45, 0x9469, 0xe3c0, 0xfe6d, 0x56e2, 0xc367, 0x1, 0x1);
        gbc.writeMem(0x4f45, { 0xe5 });
        gbc.writeMem(0x9467, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9467);
        EXPECT(gbc.pc(), 0x4f46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9467), 0x67);
        EXPECT(gbc.readMem(0x9468), 0xc3);
        // E5 03A8
        gbc.setState(0x9f73, 0xf676, 0xb050, 0x9c21, 0x3a50, 0x8d22, 0x1, 0x0);
        gbc.writeMem(0x9f73, { 0xe5 });
        gbc.writeMem(0xf674, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf674);
        EXPECT(gbc.pc(), 0x9f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f73), 0xe5);
        EXPECT(gbc.readMem(0xf674), 0x22);
        EXPECT(gbc.readMem(0xf675), 0x8d);
        // E5 03AC
        gbc.setState(0x6580, 0xb170, 0x1f0, 0xe36d, 0x465a, 0xb3e6, 0x1, 0x1);
        gbc.writeMem(0x6580, { 0xe5 });
        gbc.writeMem(0xb16e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb16e);
        EXPECT(gbc.pc(), 0x6581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16e), 0xe6);
        EXPECT(gbc.readMem(0xb16f), 0xb3);
        // E5 03AF
        gbc.setState(0x502a, 0xf3e1, 0x48f0, 0x295e, 0x758f, 0x9105, 0x1, 0x1);
        gbc.writeMem(0x502a, { 0xe5 });
        gbc.writeMem(0xf3df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf3df);
        EXPECT(gbc.pc(), 0x502b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf3df), 0x5);
        EXPECT(gbc.readMem(0xf3e0), 0x91);
        // E5 03B0
        gbc.setState(0xea4, 0xe2a8, 0xc370, 0x7f0a, 0x1f23, 0x1422, 0x0, 0x1);
        gbc.writeMem(0xea4, { 0xe5 });
        gbc.writeMem(0xe2a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe2a6);
        EXPECT(gbc.pc(), 0xea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a6), 0x22);
        EXPECT(gbc.readMem(0xe2a7), 0x14);
        // E5 03B3
        gbc.setState(0xe42d, 0xa6e0, 0x7b80, 0x6c5d, 0x3fba, 0x76f7, 0x0, 0x0);
        gbc.writeMem(0xa6de, { 0x0, 0x0 });
        gbc.writeMem(0xe42d, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa6de);
        EXPECT(gbc.pc(), 0xe42e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6de), 0xf7);
        EXPECT(gbc.readMem(0xa6df), 0x76);
        EXPECT(gbc.readMem(0xe42d), 0xe5);
        // E5 03B8
        gbc.setState(0x8e52, 0xdbbe, 0xbdd0, 0x9498, 0x7291, 0xcb44, 0x1, 0x1);
        gbc.writeMem(0x8e52, { 0xe5 });
        gbc.writeMem(0xdbbc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xdbbc);
        EXPECT(gbc.pc(), 0x8e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e52), 0xe5);
        EXPECT(gbc.readMem(0xdbbc), 0x44);
        EXPECT(gbc.readMem(0xdbbd), 0xcb);
        // E5 03BA
        gbc.setState(0x2020, 0xe227, 0xe70, 0x38f9, 0xb143, 0xc5e1, 0x0, 0x0);
        gbc.writeMem(0x2020, { 0xe5 });
        gbc.writeMem(0xe225, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe225);
        EXPECT(gbc.pc(), 0x2021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe225), 0xe1);
        EXPECT(gbc.readMem(0xe226), 0xc5);
        // E5 03BB
        gbc.setState(0xe5c0, 0xe232, 0x9690, 0x54c4, 0x627e, 0x892e, 0x1, 0x0);
        gbc.writeMem(0xe230, { 0x0, 0x0 });
        gbc.writeMem(0xe5c0, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe230);
        EXPECT(gbc.pc(), 0xe5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe230), 0x2e);
        EXPECT(gbc.readMem(0xe231), 0x89);
        EXPECT(gbc.readMem(0xe5c0), 0xe5);
        // E5 03BC
        gbc.setState(0x7745, 0xa9d1, 0xace0, 0x8cca, 0x7d80, 0xf37a, 0x1, 0x0);
        gbc.writeMem(0x7745, { 0xe5 });
        gbc.writeMem(0xa9cf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa9cf);
        EXPECT(gbc.pc(), 0x7746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9cf), 0x7a);
        EXPECT(gbc.readMem(0xa9d0), 0xf3);
        // E5 03C1
        gbc.setState(0x30ec, 0xe70f, 0xd600, 0x85a, 0xfb4e, 0xfd01, 0x1, 0x0);
        gbc.writeMem(0x30ec, { 0xe5 });
        gbc.writeMem(0xe70d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe70d);
        EXPECT(gbc.pc(), 0x30ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70d), 0x1);
        EXPECT(gbc.readMem(0xe70e), 0xfd);
        // E5 03C2
        gbc.setState(0xd89a, 0x8b7b, 0x58d0, 0x5205, 0x4e22, 0xdb73, 0x0, 0x0);
        gbc.writeMem(0x8b79, { 0x0, 0x0 });
        gbc.writeMem(0xd89a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8b79);
        EXPECT(gbc.pc(), 0xd89b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b79), 0x73);
        EXPECT(gbc.readMem(0x8b7a), 0xdb);
        EXPECT(gbc.readMem(0xd89a), 0xe5);
        // E5 03C3
        gbc.setState(0xecc1, 0xa363, 0xf120, 0x8b1e, 0x4ae5, 0x8ba1, 0x0, 0x0);
        gbc.writeMem(0xa361, { 0x0, 0x0 });
        gbc.writeMem(0xecc1, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa361);
        EXPECT(gbc.pc(), 0xecc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa361), 0xa1);
        EXPECT(gbc.readMem(0xa362), 0x8b);
        EXPECT(gbc.readMem(0xecc1), 0xe5);
        // E5 03C5
        gbc.setState(0xce12, 0x98ca, 0x74d0, 0xbc81, 0xb706, 0x7af4, 0x0, 0x1);
        gbc.writeMem(0x98c8, { 0x0, 0x0 });
        gbc.writeMem(0xce12, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x98c8);
        EXPECT(gbc.pc(), 0xce13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c8), 0xf4);
        EXPECT(gbc.readMem(0x98c9), 0x7a);
        EXPECT(gbc.readMem(0xce12), 0xe5);
        // E5 03C6
        gbc.setState(0x1e40, 0xa729, 0x3840, 0xfe30, 0x3f10, 0x22a4, 0x0, 0x1);
        gbc.writeMem(0x1e40, { 0xe5 });
        gbc.writeMem(0xa727, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa727);
        EXPECT(gbc.pc(), 0x1e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa727), 0xa4);
        EXPECT(gbc.readMem(0xa728), 0x22);
        // E5 03C8
        gbc.setState(0x6f95, 0x88b7, 0xf090, 0x2548, 0x596e, 0xc9a5, 0x0, 0x0);
        gbc.writeMem(0x6f95, { 0xe5 });
        gbc.writeMem(0x88b5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x88b5);
        EXPECT(gbc.pc(), 0x6f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b5), 0xa5);
        EXPECT(gbc.readMem(0x88b6), 0xc9);
        // E5 03C9
        gbc.setState(0xb1f1, 0x9c1a, 0x41b0, 0x3d65, 0x34b0, 0xa3a, 0x0, 0x0);
        gbc.writeMem(0x9c18, { 0x0, 0x0 });
        gbc.writeMem(0xb1f1, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9c18);
        EXPECT(gbc.pc(), 0xb1f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c18), 0x3a);
        EXPECT(gbc.readMem(0x9c19), 0xa);
        EXPECT(gbc.readMem(0xb1f1), 0xe5);
        // E5 03CB
        gbc.setState(0xab52, 0xad49, 0xafb0, 0xab79, 0xef63, 0xed78, 0x1, 0x0);
        gbc.writeMem(0xab52, { 0xe5 });
        gbc.writeMem(0xad47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xad47);
        EXPECT(gbc.pc(), 0xab53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab52), 0xe5);
        EXPECT(gbc.readMem(0xad47), 0x78);
        EXPECT(gbc.readMem(0xad48), 0xed);
        // E5 03CD
        gbc.setState(0x6dc9, 0xa185, 0x7de0, 0x2883, 0xe007, 0xc7df, 0x0, 0x1);
        gbc.writeMem(0x6dc9, { 0xe5 });
        gbc.writeMem(0xa183, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa183);
        EXPECT(gbc.pc(), 0x6dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa183), 0xdf);
        EXPECT(gbc.readMem(0xa184), 0xc7);
        // E5 03CE
        gbc.setState(0x297c, 0xb6d4, 0x4b30, 0xdeab, 0xd161, 0xe1f2, 0x0, 0x0);
        gbc.writeMem(0x297c, { 0xe5 });
        gbc.writeMem(0xb6d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb6d2);
        EXPECT(gbc.pc(), 0x297d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d2), 0xf2);
        EXPECT(gbc.readMem(0xb6d3), 0xe1);
        // E5 03D1
        gbc.setState(0x8ec, 0xe17f, 0xd70, 0xe1ee, 0x6ebf, 0x883, 0x0, 0x1);
        gbc.writeMem(0x8ec, { 0xe5 });
        gbc.writeMem(0xe17d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe17d);
        EXPECT(gbc.pc(), 0x8ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe17d), 0x83);
        EXPECT(gbc.readMem(0xe17e), 0x8);
        // E5 03D2
        gbc.setState(0x7d69, 0x8f4a, 0x3cb0, 0x2294, 0x8d8, 0x74f1, 0x1, 0x1);
        gbc.writeMem(0x7d69, { 0xe5 });
        gbc.writeMem(0x8f48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8f48);
        EXPECT(gbc.pc(), 0x7d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f48), 0xf1);
        EXPECT(gbc.readMem(0x8f49), 0x74);
        // E5 03D3
        gbc.setState(0x194e, 0xfe3c, 0xe040, 0x22f, 0x22b5, 0xa9c, 0x0, 0x1);
        gbc.writeMem(0x194e, { 0xe5 });
        gbc.writeMem(0xfe3a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfe3a);
        EXPECT(gbc.pc(), 0x194f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe3a), 0x9c);
        EXPECT(gbc.readMem(0xfe3b), 0xa);
        // E5 03DE
        gbc.setState(0x77f1, 0x9077, 0xaa60, 0x1546, 0x8e43, 0x5cea, 0x0, 0x1);
        gbc.writeMem(0x77f1, { 0xe5 });
        gbc.writeMem(0x9075, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9075);
        EXPECT(gbc.pc(), 0x77f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9075), 0xea);
        EXPECT(gbc.readMem(0x9076), 0x5c);
        // E5 03DF
        gbc.setState(0xd4b5, 0xcb16, 0xffe0, 0x1eca, 0xb67, 0x3473, 0x0, 0x1);
        gbc.writeMem(0xcb14, { 0x0, 0x0 });
        gbc.writeMem(0xd4b5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xcb14);
        EXPECT(gbc.pc(), 0xd4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb14), 0x73);
        EXPECT(gbc.readMem(0xcb15), 0x34);
        EXPECT(gbc.readMem(0xd4b5), 0xe5);
        // E5 03E4
        gbc.setState(0xe6b6, 0x8a48, 0x55b0, 0x4b5, 0xb496, 0xa966, 0x0, 0x1);
        gbc.writeMem(0x8a46, { 0x0, 0x0 });
        gbc.writeMem(0xe6b6, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8a46);
        EXPECT(gbc.pc(), 0xe6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a46), 0x66);
        EXPECT(gbc.readMem(0x8a47), 0xa9);
        EXPECT(gbc.readMem(0xe6b6), 0xe5);
        // E5 03E5
        gbc.setState(0xeac6, 0xbe09, 0x8660, 0xe1f5, 0xe885, 0x50e8, 0x0, 0x1);
        gbc.writeMem(0xbe07, { 0x0, 0x0 });
        gbc.writeMem(0xeac6, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xbe07);
        EXPECT(gbc.pc(), 0xeac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe07), 0xe8);
        EXPECT(gbc.readMem(0xbe08), 0x50);
        EXPECT(gbc.readMem(0xeac6), 0xe5);
    }
}
#endif
