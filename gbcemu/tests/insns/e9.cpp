#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_e9)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_e9) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // E9 0000
        gbc.setState(0xe49e, 0xe08a, 0xe60, 0xd38c, 0xa139, 0xbc84, 0x0, 0x0);
        gbc.writeMem(0xe49e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe08a);
        EXPECT(gbc.pc(), 0xbc84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49e), 0xe9);
        // E9 0001
        gbc.setState(0x8f3a, 0x161b, 0xf0c0, 0x970b, 0x8539, 0x8f7c, 0x0, 0x1);
        gbc.writeMem(0x8f3a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x161b);
        EXPECT(gbc.pc(), 0x8f7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f3a), 0xe9);
        // E9 0002
        gbc.setState(0x9aa, 0xdbae, 0xef50, 0x7a8b, 0x1f79, 0x684f, 0x1, 0x1);
        gbc.writeMem(0x9aa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xdbae);
        EXPECT(gbc.pc(), 0x684f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0003
        gbc.setState(0x2f2, 0x988b, 0xad10, 0x14aa, 0xd29d, 0x7be2, 0x0, 0x1);
        gbc.writeMem(0x2f2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x988b);
        EXPECT(gbc.pc(), 0x7be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0004
        gbc.setState(0xdb81, 0x52f7, 0x8a20, 0x1f23, 0x1bdf, 0xd6f5, 0x1, 0x1);
        gbc.writeMem(0xdb81, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x52f7);
        EXPECT(gbc.pc(), 0xd6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb81), 0xe9);
        // E9 0005
        gbc.setState(0xa00, 0xb747, 0x7970, 0x29d1, 0x2ac8, 0xe2f5, 0x1, 0x1);
        gbc.writeMem(0xa00, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb747);
        EXPECT(gbc.pc(), 0xe2f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0007
        gbc.setState(0xa3a2, 0x34f1, 0xc090, 0x282a, 0x629a, 0x8dcc, 0x1, 0x1);
        gbc.writeMem(0xa3a2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x34f1);
        EXPECT(gbc.pc(), 0x8dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a2), 0xe9);
        // E9 0008
        gbc.setState(0x6df6, 0xe9d4, 0xfd70, 0x9e37, 0xa084, 0xf699, 0x0, 0x1);
        gbc.writeMem(0x6df6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe9d4);
        EXPECT(gbc.pc(), 0xf699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0009
        gbc.setState(0xdb9d, 0xe61f, 0x26c0, 0x549a, 0x9485, 0xf634, 0x0, 0x1);
        gbc.writeMem(0xdb9d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe61f);
        EXPECT(gbc.pc(), 0xf634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9d), 0xe9);
        // E9 000A
        gbc.setState(0xb592, 0xe7, 0xa80, 0x38a0, 0x366d, 0x9712, 0x1, 0x0);
        gbc.writeMem(0xb592, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe7);
        EXPECT(gbc.pc(), 0x9712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb592), 0xe9);
        // E9 000B
        gbc.setState(0xa0ed, 0x1007, 0xa310, 0x8d4d, 0x1f24, 0x7927, 0x0, 0x0);
        gbc.writeMem(0xa0ed, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1007);
        EXPECT(gbc.pc(), 0x7927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ed), 0xe9);
        // E9 000C
        gbc.setState(0xb799, 0x2ee3, 0x3e90, 0xe73b, 0xfb36, 0xac92, 0x1, 0x1);
        gbc.writeMem(0xb799, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2ee3);
        EXPECT(gbc.pc(), 0xac92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb799), 0xe9);
        // E9 000D
        gbc.setState(0x2e0f, 0x3fab, 0x7b90, 0xe6d4, 0x7e4a, 0xd586, 0x0, 0x0);
        gbc.writeMem(0x2e0f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3fab);
        EXPECT(gbc.pc(), 0xd586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 000E
        gbc.setState(0x3601, 0x611a, 0xbbc0, 0xc24e, 0x4756, 0x8768, 0x1, 0x0);
        gbc.writeMem(0x3601, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x611a);
        EXPECT(gbc.pc(), 0x8768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 000F
        gbc.setState(0x6ee9, 0xff6d, 0x1c50, 0x8698, 0x680c, 0x5798, 0x1, 0x1);
        gbc.writeMem(0x6ee9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xff6d);
        EXPECT(gbc.pc(), 0x5798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0010
        gbc.setState(0xe6, 0x7773, 0xa610, 0x8cbb, 0x9335, 0xad02, 0x0, 0x1);
        gbc.writeMem(0xe6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7773);
        EXPECT(gbc.pc(), 0xad02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0011
        gbc.setState(0x45c6, 0x4585, 0x1900, 0x3169, 0x288a, 0xdd46, 0x0, 0x1);
        gbc.writeMem(0x45c6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4585);
        EXPECT(gbc.pc(), 0xdd46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0012
        gbc.setState(0x7f06, 0xc67d, 0xe060, 0x1ea3, 0x8baf, 0xa3e4, 0x0, 0x1);
        gbc.writeMem(0x7f06, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc67d);
        EXPECT(gbc.pc(), 0xa3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0013
        gbc.setState(0x856e, 0xea01, 0xfa40, 0x493c, 0x4070, 0xd52, 0x1, 0x1);
        gbc.writeMem(0x856e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xea01);
        EXPECT(gbc.pc(), 0xd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856e), 0xe9);
        // E9 0014
        gbc.setState(0x5c24, 0x8e7, 0x2ee0, 0x3d6f, 0x3cd7, 0x670a, 0x0, 0x1);
        gbc.writeMem(0x5c24, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8e7);
        EXPECT(gbc.pc(), 0x670a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0015
        gbc.setState(0x5c02, 0x1ce5, 0x4ae0, 0xec95, 0x60ed, 0x2886, 0x1, 0x1);
        gbc.writeMem(0x5c02, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1ce5);
        EXPECT(gbc.pc(), 0x2886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0016
        gbc.setState(0xc659, 0x94b6, 0xbd30, 0x631b, 0xd989, 0xfdb9, 0x1, 0x1);
        gbc.writeMem(0xc659, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x94b6);
        EXPECT(gbc.pc(), 0xfdb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc659), 0xe9);
        // E9 0017
        gbc.setState(0x19a6, 0x3a6f, 0x66c0, 0x9d07, 0xb2a7, 0x34ec, 0x1, 0x0);
        gbc.writeMem(0x19a6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3a6f);
        EXPECT(gbc.pc(), 0x34ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0018
        gbc.setState(0x11fe, 0x5bb, 0x34e0, 0xe96, 0x751, 0x706c, 0x0, 0x0);
        gbc.writeMem(0x11fe, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5bb);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0019
        gbc.setState(0xcdbd, 0x3e4e, 0xaf90, 0x2b4, 0x1b16, 0xdf7d, 0x1, 0x0);
        gbc.writeMem(0xcdbd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3e4e);
        EXPECT(gbc.pc(), 0xdf7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdbd), 0xe9);
        // E9 001A
        gbc.setState(0xbaba, 0x16, 0x48b0, 0x99db, 0xeec4, 0x9c7b, 0x1, 0x0);
        gbc.writeMem(0xbaba, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x16);
        EXPECT(gbc.pc(), 0x9c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaba), 0xe9);
        // E9 001B
        gbc.setState(0xc385, 0xf8f8, 0x7fa0, 0x8c08, 0x3853, 0x623b, 0x0, 0x1);
        gbc.writeMem(0xc385, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf8f8);
        EXPECT(gbc.pc(), 0x623b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc385), 0xe9);
        // E9 001C
        gbc.setState(0x1c7a, 0x5bb0, 0x27f0, 0xeb78, 0x6ad4, 0xfb9b, 0x1, 0x0);
        gbc.writeMem(0x1c7a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5bb0);
        EXPECT(gbc.pc(), 0xfb9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 001D
        gbc.setState(0x9cac, 0xefec, 0x5310, 0x3b59, 0x7968, 0x8a45, 0x1, 0x1);
        gbc.writeMem(0x9cac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xefec);
        EXPECT(gbc.pc(), 0x8a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cac), 0xe9);
        // E9 001E
        gbc.setState(0x6e7c, 0x303c, 0x38f0, 0x90b2, 0x30d, 0x4297, 0x0, 0x0);
        gbc.writeMem(0x6e7c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x303c);
        EXPECT(gbc.pc(), 0x4297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 001F
        gbc.setState(0xd2bb, 0xd994, 0xcf90, 0x3dd9, 0xae0e, 0x6041, 0x0, 0x0);
        gbc.writeMem(0xd2bb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd994);
        EXPECT(gbc.pc(), 0x6041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2bb), 0xe9);
        // E9 0020
        gbc.setState(0xd5f2, 0xb62f, 0xf040, 0xbb99, 0xeb61, 0x94e4, 0x0, 0x1);
        gbc.writeMem(0xd5f2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb62f);
        EXPECT(gbc.pc(), 0x94e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f2), 0xe9);
        // E9 0021
        gbc.setState(0xebd8, 0xf908, 0xcd70, 0xbe5a, 0x1971, 0x635f, 0x0, 0x1);
        gbc.writeMem(0xebd8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf908);
        EXPECT(gbc.pc(), 0x635f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebd8), 0xe9);
        // E9 0022
        gbc.setState(0x683, 0x5a1c, 0x8ec0, 0x3dfe, 0x66bf, 0x8743, 0x0, 0x1);
        gbc.writeMem(0x683, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5a1c);
        EXPECT(gbc.pc(), 0x8743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0024
        gbc.setState(0x8f0a, 0x733c, 0xfc80, 0xf2e1, 0xe860, 0x2c52, 0x1, 0x0);
        gbc.writeMem(0x8f0a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x733c);
        EXPECT(gbc.pc(), 0x2c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0a), 0xe9);
        // E9 0025
        gbc.setState(0x6e44, 0xd720, 0x72c0, 0xfe2d, 0x2796, 0x45d, 0x0, 0x0);
        gbc.writeMem(0x6e44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd720);
        EXPECT(gbc.pc(), 0x45d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0026
        gbc.setState(0x4d3d, 0xce3e, 0x31f0, 0x586f, 0x6574, 0xd509, 0x0, 0x1);
        gbc.writeMem(0x4d3d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xce3e);
        EXPECT(gbc.pc(), 0xd509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0027
        gbc.setState(0x2ccb, 0x63de, 0x2a60, 0x304e, 0x79c8, 0x9202, 0x1, 0x0);
        gbc.writeMem(0x2ccb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x63de);
        EXPECT(gbc.pc(), 0x9202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0028
        gbc.setState(0x4149, 0x3d74, 0x6e50, 0x917f, 0xfcec, 0xc714, 0x0, 0x0);
        gbc.writeMem(0x4149, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3d74);
        EXPECT(gbc.pc(), 0xc714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0029
        gbc.setState(0x1a6e, 0x2dd8, 0xdd30, 0xeb4e, 0x6698, 0xdfc3, 0x1, 0x1);
        gbc.writeMem(0x1a6e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2dd8);
        EXPECT(gbc.pc(), 0xdfc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 002A
        gbc.setState(0x4b44, 0x2bd6, 0xe680, 0xb6a0, 0x35a2, 0x54b0, 0x1, 0x0);
        gbc.writeMem(0x4b44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2bd6);
        EXPECT(gbc.pc(), 0x54b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 002B
        gbc.setState(0x25ef, 0xd6e, 0x12b0, 0x5c54, 0xa4a, 0x6aed, 0x1, 0x1);
        gbc.writeMem(0x25ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd6e);
        EXPECT(gbc.pc(), 0x6aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 002C
        gbc.setState(0xd399, 0x84e9, 0xcda0, 0xa4ac, 0x63c, 0x85b1, 0x1, 0x0);
        gbc.writeMem(0xd399, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x84e9);
        EXPECT(gbc.pc(), 0x85b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd399), 0xe9);
        // E9 002D
        gbc.setState(0x2faf, 0xf79e, 0x5930, 0x199b, 0xb5b5, 0x774e, 0x1, 0x1);
        gbc.writeMem(0x2faf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf79e);
        EXPECT(gbc.pc(), 0x774e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 002E
        gbc.setState(0xca76, 0x51f8, 0xdc0, 0xc65d, 0xd98f, 0xf83b, 0x0, 0x0);
        gbc.writeMem(0xca76, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x51f8);
        EXPECT(gbc.pc(), 0xf83b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca76), 0xe9);
        // E9 002F
        gbc.setState(0x56f7, 0xaa03, 0xe4c0, 0x28a2, 0x7351, 0x2817, 0x1, 0x0);
        gbc.writeMem(0x56f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xaa03);
        EXPECT(gbc.pc(), 0x2817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0030
        gbc.setState(0xb6c3, 0x131b, 0xc120, 0x1730, 0x9c9c, 0x7df8, 0x0, 0x0);
        gbc.writeMem(0xb6c3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x131b);
        EXPECT(gbc.pc(), 0x7df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c3), 0xe9);
        // E9 0031
        gbc.setState(0x3908, 0x7202, 0x7c20, 0x8e80, 0x5fee, 0xa022, 0x0, 0x0);
        gbc.writeMem(0x3908, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7202);
        EXPECT(gbc.pc(), 0xa022);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0032
        gbc.setState(0x8f27, 0xfde4, 0x5540, 0xfdd, 0x7682, 0x7289, 0x0, 0x1);
        gbc.writeMem(0x8f27, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfde4);
        EXPECT(gbc.pc(), 0x7289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f27), 0xe9);
        // E9 0033
        gbc.setState(0xabbb, 0xca2, 0x8090, 0xda25, 0x9188, 0x2534, 0x1, 0x0);
        gbc.writeMem(0xabbb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xca2);
        EXPECT(gbc.pc(), 0x2534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbb), 0xe9);
        // E9 0034
        gbc.setState(0xd727, 0x4cb3, 0x6a70, 0xa22, 0x5d7f, 0xad28, 0x1, 0x1);
        gbc.writeMem(0xd727, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4cb3);
        EXPECT(gbc.pc(), 0xad28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd727), 0xe9);
        // E9 0035
        gbc.setState(0xd6c, 0x8354, 0x24b0, 0x635, 0xe2dd, 0xf243, 0x0, 0x1);
        gbc.writeMem(0xd6c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8354);
        EXPECT(gbc.pc(), 0xf243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0036
        gbc.setState(0x901a, 0xd337, 0xe840, 0xe52f, 0xa6c7, 0xca99, 0x1, 0x0);
        gbc.writeMem(0x901a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd337);
        EXPECT(gbc.pc(), 0xca99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x901a), 0xe9);
        // E9 0037
        gbc.setState(0xa306, 0x1090, 0xf460, 0x2654, 0x2994, 0x1384, 0x1, 0x0);
        gbc.writeMem(0xa306, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1090);
        EXPECT(gbc.pc(), 0x1384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa306), 0xe9);
        // E9 0038
        gbc.setState(0xcfbc, 0x6f4c, 0xd2d0, 0xd22c, 0x1ee4, 0x57dd, 0x0, 0x0);
        gbc.writeMem(0xcfbc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6f4c);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfbc), 0xe9);
        // E9 0039
        gbc.setState(0xe479, 0x1594, 0x67c0, 0x9502, 0xa57b, 0xa272, 0x0, 0x1);
        gbc.writeMem(0xe479, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1594);
        EXPECT(gbc.pc(), 0xa272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe479), 0xe9);
        // E9 003A
        gbc.setState(0xe6e6, 0x58e2, 0xa630, 0xe51b, 0xbc4c, 0xf536, 0x1, 0x0);
        gbc.writeMem(0xe6e6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x58e2);
        EXPECT(gbc.pc(), 0xf536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e6), 0xe9);
        // E9 003B
        gbc.setState(0xc332, 0x2b61, 0x6a0, 0x2254, 0x229e, 0xe1b1, 0x0, 0x0);
        gbc.writeMem(0xc332, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2b61);
        EXPECT(gbc.pc(), 0xe1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc332), 0xe9);
        // E9 003C
        gbc.setState(0xa7df, 0x926, 0x6110, 0x7046, 0xd006, 0x9af, 0x0, 0x0);
        gbc.writeMem(0xa7df, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x926);
        EXPECT(gbc.pc(), 0x9af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7df), 0xe9);
        // E9 003D
        gbc.setState(0x9ffb, 0x74dd, 0xbec0, 0x1c06, 0x2d84, 0xd1bf, 0x0, 0x0);
        gbc.writeMem(0x9ffb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x74dd);
        EXPECT(gbc.pc(), 0xd1bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffb), 0xe9);
        // E9 003E
        gbc.setState(0x78d, 0x7be7, 0xc7d0, 0xd717, 0x7c02, 0x935b, 0x1, 0x0);
        gbc.writeMem(0x78d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7be7);
        EXPECT(gbc.pc(), 0x935b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 003F
        gbc.setState(0x27fd, 0xc0f2, 0xeaf0, 0x55f5, 0xef08, 0x67eb, 0x0, 0x0);
        gbc.writeMem(0x27fd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc0f2);
        EXPECT(gbc.pc(), 0x67eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0040
        gbc.setState(0xb5ac, 0x47c0, 0x5b90, 0x2da6, 0x5da4, 0xdadf, 0x1, 0x0);
        gbc.writeMem(0xb5ac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x47c0);
        EXPECT(gbc.pc(), 0xdadf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ac), 0xe9);
        // E9 0041
        gbc.setState(0xb849, 0xaca7, 0x7af0, 0xad55, 0x70bb, 0x9161, 0x1, 0x1);
        gbc.writeMem(0xb849, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xaca7);
        EXPECT(gbc.pc(), 0x9161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb849), 0xe9);
        // E9 0043
        gbc.setState(0x964d, 0x5487, 0xcc90, 0xf9a4, 0xa775, 0xdb43, 0x1, 0x0);
        gbc.writeMem(0x964d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5487);
        EXPECT(gbc.pc(), 0xdb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x964d), 0xe9);
        // E9 0044
        gbc.setState(0xb3fb, 0x8afc, 0xe410, 0x4831, 0x9675, 0x7930, 0x0, 0x0);
        gbc.writeMem(0xb3fb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8afc);
        EXPECT(gbc.pc(), 0x7930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3fb), 0xe9);
        // E9 0045
        gbc.setState(0xbeee, 0x1c68, 0xc4a0, 0xddc8, 0x93a4, 0xf13a, 0x1, 0x0);
        gbc.writeMem(0xbeee, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1c68);
        EXPECT(gbc.pc(), 0xf13a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeee), 0xe9);
        // E9 0047
        gbc.setState(0x2a9d, 0xa8e6, 0xed30, 0x15bb, 0x49a, 0x42ba, 0x1, 0x0);
        gbc.writeMem(0x2a9d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa8e6);
        EXPECT(gbc.pc(), 0x42ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0048
        gbc.setState(0x35e7, 0x144b, 0xff10, 0xb9f1, 0x1ef5, 0xe1a5, 0x0, 0x0);
        gbc.writeMem(0x35e7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x144b);
        EXPECT(gbc.pc(), 0xe1a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0049
        gbc.setState(0x63ab, 0x435c, 0xdb00, 0x2c53, 0x7333, 0x2ae2, 0x0, 0x0);
        gbc.writeMem(0x63ab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x435c);
        EXPECT(gbc.pc(), 0x2ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 004A
        gbc.setState(0xadb5, 0x9cde, 0xffe0, 0xbbdb, 0x124b, 0x3c94, 0x0, 0x0);
        gbc.writeMem(0xadb5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9cde);
        EXPECT(gbc.pc(), 0x3c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb5), 0xe9);
        // E9 004B
        gbc.setState(0x54d4, 0x30d8, 0xaba0, 0x9455, 0x5e27, 0xaa11, 0x1, 0x0);
        gbc.writeMem(0x54d4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x30d8);
        EXPECT(gbc.pc(), 0xaa11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 004C
        gbc.setState(0xa408, 0x92b2, 0x5630, 0x8d4e, 0x3795, 0xfac2, 0x0, 0x0);
        gbc.writeMem(0xa408, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x92b2);
        EXPECT(gbc.pc(), 0xfac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa408), 0xe9);
        // E9 004D
        gbc.setState(0x763f, 0x8190, 0x7a40, 0x34fa, 0x34a8, 0xa58c, 0x1, 0x1);
        gbc.writeMem(0x763f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8190);
        EXPECT(gbc.pc(), 0xa58c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 004E
        gbc.setState(0x2caa, 0x3354, 0x4720, 0xce8, 0xeed4, 0x6d4c, 0x0, 0x0);
        gbc.writeMem(0x2caa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3354);
        EXPECT(gbc.pc(), 0x6d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 004F
        gbc.setState(0x6e5c, 0x6ded, 0x4ff0, 0x997b, 0xaa6c, 0x469f, 0x0, 0x0);
        gbc.writeMem(0x6e5c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6ded);
        EXPECT(gbc.pc(), 0x469f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0050
        gbc.setState(0xd7ae, 0xc84c, 0x7460, 0xd1ea, 0xa7fd, 0xd5bc, 0x0, 0x1);
        gbc.writeMem(0xd7ae, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc84c);
        EXPECT(gbc.pc(), 0xd5bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ae), 0xe9);
        // E9 0051
        gbc.setState(0x69b5, 0xece9, 0xc860, 0xc7f4, 0x5ad8, 0xf319, 0x0, 0x0);
        gbc.writeMem(0x69b5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xece9);
        EXPECT(gbc.pc(), 0xf319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0052
        gbc.setState(0xa214, 0xbc61, 0x2a50, 0xefe6, 0xc932, 0x8c2e, 0x1, 0x1);
        gbc.writeMem(0xa214, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbc61);
        EXPECT(gbc.pc(), 0x8c2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa214), 0xe9);
        // E9 0053
        gbc.setState(0x4e2e, 0xbf00, 0xa720, 0x1fa6, 0x3fc4, 0xde90, 0x0, 0x1);
        gbc.writeMem(0x4e2e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xbf00);
        EXPECT(gbc.pc(), 0xde90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0054
        gbc.setState(0xce74, 0xf575, 0xbf70, 0x8e2, 0xedd, 0xf04d, 0x0, 0x0);
        gbc.writeMem(0xce74, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf575);
        EXPECT(gbc.pc(), 0xf04d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce74), 0xe9);
        // E9 0055
        gbc.setState(0x405e, 0xaa3f, 0xd5f0, 0xde61, 0x74e7, 0x5145, 0x0, 0x1);
        gbc.writeMem(0x405e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xaa3f);
        EXPECT(gbc.pc(), 0x5145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0056
        gbc.setState(0x6e18, 0x8a5, 0xc6c0, 0x837, 0x3695, 0xcf19, 0x0, 0x0);
        gbc.writeMem(0x6e18, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8a5);
        EXPECT(gbc.pc(), 0xcf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0057
        gbc.setState(0xbf0a, 0x219, 0x87e0, 0xf19d, 0x721e, 0x98c9, 0x1, 0x0);
        gbc.writeMem(0xbf0a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x219);
        EXPECT(gbc.pc(), 0x98c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0a), 0xe9);
        // E9 0058
        gbc.setState(0x49dc, 0xbeab, 0x3210, 0x2628, 0xe975, 0x305a, 0x0, 0x1);
        gbc.writeMem(0x49dc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbeab);
        EXPECT(gbc.pc(), 0x305a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0059
        gbc.setState(0x9347, 0xd82, 0xa4e0, 0xe8b7, 0x6d40, 0xe39c, 0x1, 0x1);
        gbc.writeMem(0x9347, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0xe39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9347), 0xe9);
        // E9 005A
        gbc.setState(0xa9c5, 0xf480, 0x2a50, 0x7b25, 0xf30d, 0x64d5, 0x1, 0x0);
        gbc.writeMem(0xa9c5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf480);
        EXPECT(gbc.pc(), 0x64d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9c5), 0xe9);
        // E9 005B
        gbc.setState(0xb28e, 0xfc94, 0xe00, 0x50a, 0xc13a, 0x54dd, 0x0, 0x0);
        gbc.writeMem(0xb28e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfc94);
        EXPECT(gbc.pc(), 0x54dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28e), 0xe9);
        // E9 005C
        gbc.setState(0x8e78, 0xd7bb, 0x7990, 0x7c34, 0x361f, 0x229b, 0x1, 0x0);
        gbc.writeMem(0x8e78, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd7bb);
        EXPECT(gbc.pc(), 0x229b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e78), 0xe9);
        // E9 005D
        gbc.setState(0xd39c, 0xe712, 0x5260, 0xdaaf, 0x8b56, 0x860d, 0x1, 0x0);
        gbc.writeMem(0xd39c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe712);
        EXPECT(gbc.pc(), 0x860d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39c), 0xe9);
        // E9 005E
        gbc.setState(0x684b, 0xedfa, 0x6e30, 0xeb75, 0x8c95, 0xd30e, 0x0, 0x1);
        gbc.writeMem(0x684b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xedfa);
        EXPECT(gbc.pc(), 0xd30e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 005F
        gbc.setState(0xbb9c, 0x7f0a, 0x9660, 0x9a49, 0xd271, 0xa991, 0x0, 0x1);
        gbc.writeMem(0xbb9c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7f0a);
        EXPECT(gbc.pc(), 0xa991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9c), 0xe9);
        // E9 0060
        gbc.setState(0x32dc, 0x8bb7, 0x7950, 0xbd20, 0x3447, 0x5dfa, 0x1, 0x1);
        gbc.writeMem(0x32dc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8bb7);
        EXPECT(gbc.pc(), 0x5dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0062
        gbc.setState(0xc21a, 0x4374, 0x56d0, 0x3a93, 0x3778, 0xf58d, 0x1, 0x1);
        gbc.writeMem(0xc21a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4374);
        EXPECT(gbc.pc(), 0xf58d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc21a), 0xe9);
        // E9 0063
        gbc.setState(0xda28, 0x5c2d, 0xd420, 0xf626, 0x2ae2, 0xee5f, 0x1, 0x0);
        gbc.writeMem(0xda28, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5c2d);
        EXPECT(gbc.pc(), 0xee5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda28), 0xe9);
        // E9 0064
        gbc.setState(0x4e32, 0x90bc, 0xdbb0, 0x6aa7, 0x39c5, 0xc9f3, 0x1, 0x0);
        gbc.writeMem(0x4e32, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x90bc);
        EXPECT(gbc.pc(), 0xc9f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0065
        gbc.setState(0x9ecb, 0xffa9, 0x65f0, 0xb3bf, 0xa03b, 0x9cb9, 0x1, 0x1);
        gbc.writeMem(0x9ecb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xffa9);
        EXPECT(gbc.pc(), 0x9cb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ecb), 0xe9);
        // E9 0066
        gbc.setState(0x692e, 0xd73e, 0x2bb0, 0x44ac, 0xfcb4, 0xbc1d, 0x1, 0x0);
        gbc.writeMem(0x692e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd73e);
        EXPECT(gbc.pc(), 0xbc1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0067
        gbc.setState(0x51a1, 0x6b3d, 0x9420, 0xc358, 0x916c, 0x437b, 0x0, 0x0);
        gbc.writeMem(0x51a1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6b3d);
        EXPECT(gbc.pc(), 0x437b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0068
        gbc.setState(0xb855, 0x9610, 0x94e0, 0xf17a, 0x817a, 0x2a16, 0x0, 0x0);
        gbc.writeMem(0xb855, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9610);
        EXPECT(gbc.pc(), 0x2a16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb855), 0xe9);
        // E9 0069
        gbc.setState(0xb13b, 0x6866, 0xe930, 0x1a4b, 0x8799, 0x3a3, 0x0, 0x0);
        gbc.writeMem(0xb13b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6866);
        EXPECT(gbc.pc(), 0x3a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb13b), 0xe9);
        // E9 006A
        gbc.setState(0xd970, 0xff68, 0xa450, 0x9548, 0xac5c, 0xb83f, 0x0, 0x0);
        gbc.writeMem(0xd970, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xff68);
        EXPECT(gbc.pc(), 0xb83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd970), 0xe9);
        // E9 006B
        gbc.setState(0x57f7, 0x2396, 0xdc30, 0xbb8, 0x51a1, 0x1ec8, 0x1, 0x1);
        gbc.writeMem(0x57f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2396);
        EXPECT(gbc.pc(), 0x1ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 006D
        gbc.setState(0x45cd, 0x53d8, 0x6d80, 0xce11, 0x26ff, 0x3055, 0x0, 0x1);
        gbc.writeMem(0x45cd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x53d8);
        EXPECT(gbc.pc(), 0x3055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 006F
        gbc.setState(0x6a78, 0xfb46, 0xc2f0, 0x39ef, 0xdf38, 0x7788, 0x0, 0x1);
        gbc.writeMem(0x6a78, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfb46);
        EXPECT(gbc.pc(), 0x7788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0070
        gbc.setState(0xd5eb, 0x558, 0x6460, 0xa7e4, 0x9e06, 0x6d42, 0x0, 0x0);
        gbc.writeMem(0xd5eb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x558);
        EXPECT(gbc.pc(), 0x6d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5eb), 0xe9);
        // E9 0071
        gbc.setState(0xc636, 0x712, 0x1060, 0x556b, 0xd56a, 0x538, 0x0, 0x0);
        gbc.writeMem(0xc636, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x712);
        EXPECT(gbc.pc(), 0x538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc636), 0xe9);
        // E9 0072
        gbc.setState(0x6626, 0x38c6, 0x8700, 0xb125, 0xe1c8, 0x2ccc, 0x1, 0x0);
        gbc.writeMem(0x6626, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x38c6);
        EXPECT(gbc.pc(), 0x2ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0073
        gbc.setState(0x4dbe, 0xb258, 0x62f0, 0x4462, 0x17e1, 0xd9d0, 0x0, 0x0);
        gbc.writeMem(0x4dbe, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb258);
        EXPECT(gbc.pc(), 0xd9d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0074
        gbc.setState(0xeb54, 0xbece, 0xf4c0, 0x177c, 0xe92f, 0x9962, 0x0, 0x1);
        gbc.writeMem(0xeb54, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbece);
        EXPECT(gbc.pc(), 0x9962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb54), 0xe9);
        // E9 0075
        gbc.setState(0xc535, 0x3c0e, 0x7f30, 0xe564, 0xff14, 0x804, 0x1, 0x0);
        gbc.writeMem(0xc535, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3c0e);
        EXPECT(gbc.pc(), 0x804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc535), 0xe9);
        // E9 0076
        gbc.setState(0x7a55, 0x1a7e, 0x7930, 0xe6a6, 0xaa65, 0x9b8c, 0x1, 0x0);
        gbc.writeMem(0x7a55, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1a7e);
        EXPECT(gbc.pc(), 0x9b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0077
        gbc.setState(0x6d17, 0x9401, 0xdc50, 0xb7a5, 0x19d8, 0xb572, 0x0, 0x1);
        gbc.writeMem(0x6d17, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9401);
        EXPECT(gbc.pc(), 0xb572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0078
        gbc.setState(0xd94c, 0x9ac2, 0x7440, 0xf010, 0x31f, 0xbe09, 0x1, 0x1);
        gbc.writeMem(0xd94c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9ac2);
        EXPECT(gbc.pc(), 0xbe09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94c), 0xe9);
        // E9 0079
        gbc.setState(0x82dc, 0x4558, 0xa680, 0x6ac7, 0x970b, 0xa04f, 0x1, 0x0);
        gbc.writeMem(0x82dc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4558);
        EXPECT(gbc.pc(), 0xa04f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82dc), 0xe9);
        // E9 007A
        gbc.setState(0x53cb, 0xea1, 0xdd30, 0xa599, 0x86c6, 0x761c, 0x1, 0x1);
        gbc.writeMem(0x53cb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xea1);
        EXPECT(gbc.pc(), 0x761c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 007B
        gbc.setState(0xb7b9, 0xa9bd, 0x6060, 0xe7e, 0x5552, 0xf858, 0x1, 0x0);
        gbc.writeMem(0xb7b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa9bd);
        EXPECT(gbc.pc(), 0xf858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b9), 0xe9);
        // E9 007C
        gbc.setState(0xd773, 0xd9c0, 0xab60, 0xf563, 0x23f5, 0x6d2f, 0x0, 0x1);
        gbc.writeMem(0xd773, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd9c0);
        EXPECT(gbc.pc(), 0x6d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd773), 0xe9);
        // E9 007D
        gbc.setState(0x9488, 0x1bb0, 0xa150, 0xeac4, 0x285a, 0xd4a6, 0x0, 0x1);
        gbc.writeMem(0x9488, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1bb0);
        EXPECT(gbc.pc(), 0xd4a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9488), 0xe9);
        // E9 007E
        gbc.setState(0x34aa, 0xc59f, 0xf050, 0x50c4, 0xea5e, 0xe32f, 0x0, 0x1);
        gbc.writeMem(0x34aa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc59f);
        EXPECT(gbc.pc(), 0xe32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 007F
        gbc.setState(0xa201, 0x2326, 0xe9b0, 0x2e8, 0x31d, 0x9dab, 0x0, 0x0);
        gbc.writeMem(0xa201, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2326);
        EXPECT(gbc.pc(), 0x9dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa201), 0xe9);
        // E9 0080
        gbc.setState(0x5900, 0x4b87, 0x3a40, 0x2b96, 0xe35a, 0x7afe, 0x0, 0x0);
        gbc.writeMem(0x5900, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4b87);
        EXPECT(gbc.pc(), 0x7afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0081
        gbc.setState(0x67c9, 0xbff8, 0xbcc0, 0x1dc9, 0xaa1a, 0x73c4, 0x1, 0x1);
        gbc.writeMem(0x67c9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbff8);
        EXPECT(gbc.pc(), 0x73c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0082
        gbc.setState(0x4237, 0x626d, 0xd620, 0xdf2e, 0x14d, 0x378e, 0x1, 0x1);
        gbc.writeMem(0x4237, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x626d);
        EXPECT(gbc.pc(), 0x378e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0083
        gbc.setState(0x1051, 0xfb1d, 0x3220, 0xb559, 0x87fb, 0x8fa4, 0x1, 0x0);
        gbc.writeMem(0x1051, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xfb1d);
        EXPECT(gbc.pc(), 0x8fa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0085
        gbc.setState(0x3e85, 0x1b9e, 0x500, 0x5063, 0x1cfa, 0x754f, 0x1, 0x1);
        gbc.writeMem(0x3e85, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1b9e);
        EXPECT(gbc.pc(), 0x754f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0086
        gbc.setState(0x27e3, 0xfc84, 0x8330, 0x5aa0, 0x57e5, 0x4b4c, 0x0, 0x1);
        gbc.writeMem(0x27e3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfc84);
        EXPECT(gbc.pc(), 0x4b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0087
        gbc.setState(0xe4d, 0x5ffb, 0x26e0, 0x87cb, 0x8e6a, 0xe747, 0x1, 0x0);
        gbc.writeMem(0xe4d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5ffb);
        EXPECT(gbc.pc(), 0xe747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0088
        gbc.setState(0x6e59, 0x211f, 0x16b0, 0xb8c2, 0xc797, 0x87bc, 0x1, 0x1);
        gbc.writeMem(0x6e59, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x211f);
        EXPECT(gbc.pc(), 0x87bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0089
        gbc.setState(0x2ce0, 0x75ec, 0xc350, 0x8e06, 0x7fc2, 0x27e8, 0x1, 0x0);
        gbc.writeMem(0x2ce0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x75ec);
        EXPECT(gbc.pc(), 0x27e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 008A
        gbc.setState(0xa347, 0x93c6, 0x8a90, 0xee6f, 0xba77, 0x38b0, 0x1, 0x0);
        gbc.writeMem(0xa347, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x93c6);
        EXPECT(gbc.pc(), 0x38b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa347), 0xe9);
        // E9 008B
        gbc.setState(0x443d, 0x69bf, 0x95a0, 0xc726, 0xb41f, 0x363d, 0x0, 0x0);
        gbc.writeMem(0x443d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x69bf);
        EXPECT(gbc.pc(), 0x363d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 008C
        gbc.setState(0x6a31, 0x79c4, 0x12e0, 0x7e72, 0xe9f1, 0x6939, 0x1, 0x0);
        gbc.writeMem(0x6a31, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x79c4);
        EXPECT(gbc.pc(), 0x6939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 008D
        gbc.setState(0xeea2, 0xd367, 0x3870, 0x88d0, 0x98e2, 0x6ab4, 0x0, 0x0);
        gbc.writeMem(0xeea2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd367);
        EXPECT(gbc.pc(), 0x6ab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea2), 0xe9);
        // E9 008E
        gbc.setState(0x64ee, 0xe364, 0x75b0, 0x73dd, 0xf0e5, 0x64a9, 0x0, 0x0);
        gbc.writeMem(0x64ee, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe364);
        EXPECT(gbc.pc(), 0x64a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 008F
        gbc.setState(0xaac1, 0xe669, 0xaea0, 0xc933, 0xec2e, 0xf452, 0x1, 0x0);
        gbc.writeMem(0xaac1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe669);
        EXPECT(gbc.pc(), 0xf452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac1), 0xe9);
        // E9 0090
        gbc.setState(0x785, 0xd239, 0x260, 0xf348, 0x9e31, 0x2771, 0x1, 0x1);
        gbc.writeMem(0x785, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd239);
        EXPECT(gbc.pc(), 0x2771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0091
        gbc.setState(0x7857, 0xc158, 0x3970, 0x9bdf, 0xec48, 0xc122, 0x1, 0x1);
        gbc.writeMem(0x7857, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc158);
        EXPECT(gbc.pc(), 0xc122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0092
        gbc.setState(0x7cf7, 0x23b5, 0xcfb0, 0xd3f5, 0xed7c, 0xc50e, 0x0, 0x1);
        gbc.writeMem(0x7cf7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x23b5);
        EXPECT(gbc.pc(), 0xc50e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0093
        gbc.setState(0x3fdb, 0x34, 0x5b50, 0xf06e, 0xee72, 0xc0ee, 0x0, 0x1);
        gbc.writeMem(0x3fdb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x34);
        EXPECT(gbc.pc(), 0xc0ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0094
        gbc.setState(0xe183, 0x283c, 0x7260, 0xa046, 0x4130, 0xbb0b, 0x0, 0x0);
        gbc.writeMem(0xe183, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x283c);
        EXPECT(gbc.pc(), 0xbb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe183), 0xe9);
        // E9 0097
        gbc.setState(0x3ec, 0xfa8, 0xc220, 0xb45a, 0x7cfa, 0xa70c, 0x1, 0x0);
        gbc.writeMem(0x3ec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfa8);
        EXPECT(gbc.pc(), 0xa70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0098
        gbc.setState(0xef2a, 0x186b, 0x6e70, 0x4f1b, 0x42d8, 0xb704, 0x0, 0x0);
        gbc.writeMem(0xef2a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x186b);
        EXPECT(gbc.pc(), 0xb704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef2a), 0xe9);
        // E9 0099
        gbc.setState(0xc68c, 0x3820, 0x4eb0, 0x21b7, 0xfd4a, 0xddd1, 0x0, 0x1);
        gbc.writeMem(0xc68c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3820);
        EXPECT(gbc.pc(), 0xddd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc68c), 0xe9);
        // E9 009A
        gbc.setState(0xe2bc, 0xc6dd, 0xee0, 0x4cd6, 0x4379, 0x2c1a, 0x0, 0x0);
        gbc.writeMem(0xe2bc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc6dd);
        EXPECT(gbc.pc(), 0x2c1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2bc), 0xe9);
        // E9 009B
        gbc.setState(0x437b, 0x1911, 0x1730, 0xcfbc, 0x524b, 0x9fb8, 0x1, 0x0);
        gbc.writeMem(0x437b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1911);
        EXPECT(gbc.pc(), 0x9fb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 009C
        gbc.setState(0x5b9f, 0x413b, 0x9e40, 0xf3e2, 0x8a1, 0x4a2a, 0x0, 0x1);
        gbc.writeMem(0x5b9f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x413b);
        EXPECT(gbc.pc(), 0x4a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 009D
        gbc.setState(0x751, 0x9690, 0x8f60, 0xdff5, 0x182, 0x9ec7, 0x0, 0x1);
        gbc.writeMem(0x751, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9690);
        EXPECT(gbc.pc(), 0x9ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 009E
        gbc.setState(0x14ef, 0x9439, 0x4150, 0xb12b, 0x8d83, 0x98ed, 0x1, 0x1);
        gbc.writeMem(0x14ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9439);
        EXPECT(gbc.pc(), 0x98ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 009F
        gbc.setState(0xb9f2, 0x31c0, 0x33b0, 0x6b21, 0x8267, 0xda23, 0x0, 0x1);
        gbc.writeMem(0xb9f2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x31c0);
        EXPECT(gbc.pc(), 0xda23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f2), 0xe9);
        // E9 00A0
        gbc.setState(0xb19b, 0xe2b4, 0x8c10, 0x2762, 0x91bd, 0xf542, 0x0, 0x1);
        gbc.writeMem(0xb19b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe2b4);
        EXPECT(gbc.pc(), 0xf542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19b), 0xe9);
        // E9 00A1
        gbc.setState(0x894a, 0x5592, 0x4b0, 0xe38c, 0x5307, 0xd4e5, 0x1, 0x1);
        gbc.writeMem(0x894a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5592);
        EXPECT(gbc.pc(), 0xd4e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x894a), 0xe9);
        // E9 00A2
        gbc.setState(0x852b, 0x9218, 0xf0e0, 0x9b82, 0xc549, 0xdb2b, 0x1, 0x1);
        gbc.writeMem(0x852b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9218);
        EXPECT(gbc.pc(), 0xdb2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852b), 0xe9);
        // E9 00A3
        gbc.setState(0x9541, 0xea25, 0x1e30, 0x6f79, 0xc853, 0x328, 0x1, 0x0);
        gbc.writeMem(0x9541, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xea25);
        EXPECT(gbc.pc(), 0x328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9541), 0xe9);
        // E9 00A4
        gbc.setState(0x9669, 0xbeed, 0xaf40, 0x23e, 0xc4af, 0x70c5, 0x0, 0x1);
        gbc.writeMem(0x9669, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbeed);
        EXPECT(gbc.pc(), 0x70c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9669), 0xe9);
        // E9 00A5
        gbc.setState(0x4662, 0x9dec, 0x3210, 0x57c, 0x27eb, 0x1665, 0x1, 0x0);
        gbc.writeMem(0x4662, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9dec);
        EXPECT(gbc.pc(), 0x1665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00A6
        gbc.setState(0x6813, 0x509e, 0x7120, 0x8480, 0x8f02, 0xf2f, 0x0, 0x1);
        gbc.writeMem(0x6813, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x509e);
        EXPECT(gbc.pc(), 0xf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00A7
        gbc.setState(0xc4a3, 0xa94e, 0x9a80, 0x83b4, 0xe4dd, 0x39, 0x1, 0x1);
        gbc.writeMem(0xc4a3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa94e);
        EXPECT(gbc.pc(), 0x39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a3), 0xe9);
        // E9 00A8
        gbc.setState(0xed7f, 0x8d, 0xa020, 0xf12a, 0x92ba, 0x81a1, 0x0, 0x0);
        gbc.writeMem(0xed7f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d);
        EXPECT(gbc.pc(), 0x81a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed7f), 0xe9);
        // E9 00A9
        gbc.setState(0x7772, 0x417b, 0xa870, 0x4ee, 0xe175, 0xbc6f, 0x1, 0x1);
        gbc.writeMem(0x7772, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x417b);
        EXPECT(gbc.pc(), 0xbc6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00AA
        gbc.setState(0xa768, 0x78fa, 0xcde0, 0xd710, 0x9a9a, 0xd3c0, 0x0, 0x1);
        gbc.writeMem(0xa768, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x78fa);
        EXPECT(gbc.pc(), 0xd3c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa768), 0xe9);
        // E9 00AB
        gbc.setState(0xc37b, 0xbddb, 0x4110, 0x58a3, 0x46b9, 0x10d8, 0x0, 0x0);
        gbc.writeMem(0xc37b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbddb);
        EXPECT(gbc.pc(), 0x10d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc37b), 0xe9);
        // E9 00AC
        gbc.setState(0x1533, 0x3b44, 0xb6b0, 0xc36e, 0x7336, 0x3913, 0x1, 0x0);
        gbc.writeMem(0x1533, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3b44);
        EXPECT(gbc.pc(), 0x3913);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00AD
        gbc.setState(0xed8f, 0xe780, 0xe1b0, 0x6964, 0x42a6, 0xf8e8, 0x0, 0x1);
        gbc.writeMem(0xed8f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe780);
        EXPECT(gbc.pc(), 0xf8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed8f), 0xe9);
        // E9 00AE
        gbc.setState(0x455c, 0x628c, 0x5900, 0xd4df, 0xfeb8, 0xc81c, 0x1, 0x1);
        gbc.writeMem(0x455c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x628c);
        EXPECT(gbc.pc(), 0xc81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00AF
        gbc.setState(0xdf47, 0x78de, 0x9c10, 0xb938, 0x87db, 0x8489, 0x0, 0x1);
        gbc.writeMem(0xdf47, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x78de);
        EXPECT(gbc.pc(), 0x8489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf47), 0xe9);
        // E9 00B0
        gbc.setState(0xcc58, 0x12b5, 0x9580, 0x1808, 0x6ffd, 0x443b, 0x1, 0x1);
        gbc.writeMem(0xcc58, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x12b5);
        EXPECT(gbc.pc(), 0x443b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc58), 0xe9);
        // E9 00B1
        gbc.setState(0xcbc2, 0xb25d, 0x290, 0x1c08, 0x2e1d, 0x56d6, 0x1, 0x0);
        gbc.writeMem(0xcbc2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb25d);
        EXPECT(gbc.pc(), 0x56d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc2), 0xe9);
        // E9 00B2
        gbc.setState(0x3d5b, 0xc220, 0xd6d0, 0xda34, 0x89c6, 0xcfe4, 0x1, 0x1);
        gbc.writeMem(0x3d5b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc220);
        EXPECT(gbc.pc(), 0xcfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00B3
        gbc.setState(0xb379, 0x8e2b, 0xfdd0, 0x5f88, 0x28d6, 0x8c6b, 0x1, 0x1);
        gbc.writeMem(0xb379, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8e2b);
        EXPECT(gbc.pc(), 0x8c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb379), 0xe9);
        // E9 00B4
        gbc.setState(0xa630, 0x2557, 0x3ae0, 0x5681, 0xebfc, 0x8b4e, 0x1, 0x0);
        gbc.writeMem(0xa630, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2557);
        EXPECT(gbc.pc(), 0x8b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa630), 0xe9);
        // E9 00B5
        gbc.setState(0xfed, 0x7cfd, 0x8810, 0xb87e, 0x2f6c, 0xe703, 0x0, 0x1);
        gbc.writeMem(0xfed, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7cfd);
        EXPECT(gbc.pc(), 0xe703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00B6
        gbc.setState(0xcef4, 0x4029, 0x2100, 0xd51d, 0x1a8c, 0x8135, 0x1, 0x1);
        gbc.writeMem(0xcef4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4029);
        EXPECT(gbc.pc(), 0x8135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef4), 0xe9);
        // E9 00B7
        gbc.setState(0xdd5d, 0x2a37, 0xd3e0, 0x5e16, 0x794b, 0xb457, 0x1, 0x1);
        gbc.writeMem(0xdd5d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2a37);
        EXPECT(gbc.pc(), 0xb457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd5d), 0xe9);
        // E9 00B8
        gbc.setState(0xd4cc, 0x50cc, 0x8fe0, 0xbfea, 0xa8eb, 0x9adf, 0x1, 0x1);
        gbc.writeMem(0xd4cc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x50cc);
        EXPECT(gbc.pc(), 0x9adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4cc), 0xe9);
        // E9 00B9
        gbc.setState(0x9dfa, 0x9056, 0xebf0, 0xd7c8, 0xbe28, 0x2428, 0x0, 0x0);
        gbc.writeMem(0x9dfa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9056);
        EXPECT(gbc.pc(), 0x2428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dfa), 0xe9);
        // E9 00BA
        gbc.setState(0xac68, 0x35a1, 0x1410, 0xb76b, 0x9cd0, 0xbe4d, 0x1, 0x0);
        gbc.writeMem(0xac68, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x35a1);
        EXPECT(gbc.pc(), 0xbe4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac68), 0xe9);
        // E9 00BB
        gbc.setState(0x39ca, 0xd229, 0x1df0, 0x9288, 0x2c45, 0xadcd, 0x1, 0x1);
        gbc.writeMem(0x39ca, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd229);
        EXPECT(gbc.pc(), 0xadcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00BC
        gbc.setState(0x13b4, 0x8bf4, 0x1a20, 0x20d7, 0x5ad9, 0xe624, 0x0, 0x1);
        gbc.writeMem(0x13b4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8bf4);
        EXPECT(gbc.pc(), 0xe624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00BD
        gbc.setState(0x1ce1, 0x3a5b, 0x51e0, 0xbe42, 0xbda, 0x51d2, 0x0, 0x0);
        gbc.writeMem(0x1ce1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3a5b);
        EXPECT(gbc.pc(), 0x51d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00BE
        gbc.setState(0x40c0, 0x8204, 0x6190, 0xf835, 0x1f87, 0x5732, 0x0, 0x0);
        gbc.writeMem(0x40c0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8204);
        EXPECT(gbc.pc(), 0x5732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00BF
        gbc.setState(0x7084, 0xcce1, 0x9e30, 0xed31, 0x7d9, 0x157e, 0x0, 0x0);
        gbc.writeMem(0x7084, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcce1);
        EXPECT(gbc.pc(), 0x157e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00C0
        gbc.setState(0x533, 0x2714, 0xaf0, 0xc205, 0x7c35, 0x675c, 0x0, 0x1);
        gbc.writeMem(0x533, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2714);
        EXPECT(gbc.pc(), 0x675c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00C1
        gbc.setState(0x1909, 0x2b68, 0xe380, 0x34ee, 0xede1, 0x96e8, 0x1, 0x1);
        gbc.writeMem(0x1909, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2b68);
        EXPECT(gbc.pc(), 0x96e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00C2
        gbc.setState(0xe5bd, 0xda25, 0x2d40, 0x5bd4, 0xe3ce, 0xeb56, 0x1, 0x0);
        gbc.writeMem(0xe5bd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xda25);
        EXPECT(gbc.pc(), 0xeb56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5bd), 0xe9);
        // E9 00C3
        gbc.setState(0xc3e9, 0xc357, 0xa1c0, 0x1a67, 0x83f3, 0xa771, 0x0, 0x1);
        gbc.writeMem(0xc3e9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc357);
        EXPECT(gbc.pc(), 0xa771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e9), 0xe9);
        // E9 00C4
        gbc.setState(0xcf2f, 0x2d5b, 0x7af0, 0x1576, 0xc1c4, 0xc327, 0x1, 0x0);
        gbc.writeMem(0xcf2f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2d5b);
        EXPECT(gbc.pc(), 0xc327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2f), 0xe9);
        // E9 00C5
        gbc.setState(0x183a, 0x56e0, 0x6dc0, 0x6970, 0xd5cc, 0x859, 0x0, 0x1);
        gbc.writeMem(0x183a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x56e0);
        EXPECT(gbc.pc(), 0x859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00C6
        gbc.setState(0x557b, 0x6f35, 0x3800, 0xeb7e, 0xf914, 0xe3e, 0x0, 0x1);
        gbc.writeMem(0x557b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6f35);
        EXPECT(gbc.pc(), 0xe3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00C7
        gbc.setState(0x3ef, 0x5860, 0x9630, 0xc7da, 0x341b, 0x601e, 0x0, 0x1);
        gbc.writeMem(0x3ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5860);
        EXPECT(gbc.pc(), 0x601e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00C8
        gbc.setState(0xa43, 0x6640, 0x3c80, 0x8b23, 0x79a7, 0xfa5c, 0x1, 0x1);
        gbc.writeMem(0xa43, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6640);
        EXPECT(gbc.pc(), 0xfa5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00C9
        gbc.setState(0x717d, 0x6ced, 0x9910, 0xf49f, 0x69, 0x21a1, 0x0, 0x0);
        gbc.writeMem(0x717d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6ced);
        EXPECT(gbc.pc(), 0x21a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00CA
        gbc.setState(0x2088, 0x178a, 0x8360, 0x4bf0, 0x9d98, 0x6bdf, 0x0, 0x0);
        gbc.writeMem(0x2088, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x178a);
        EXPECT(gbc.pc(), 0x6bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00CB
        gbc.setState(0x16dd, 0x649b, 0x4510, 0xc3ce, 0xea4, 0xf189, 0x0, 0x0);
        gbc.writeMem(0x16dd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x649b);
        EXPECT(gbc.pc(), 0xf189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00CC
        gbc.setState(0x65b2, 0x7f00, 0x76c0, 0xc70e, 0x1dbf, 0x650b, 0x0, 0x1);
        gbc.writeMem(0x65b2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7f00);
        EXPECT(gbc.pc(), 0x650b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00CD
        gbc.setState(0xa9f7, 0x7350, 0xa010, 0x73e4, 0x89b2, 0x6fcb, 0x0, 0x0);
        gbc.writeMem(0xa9f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7350);
        EXPECT(gbc.pc(), 0x6fcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f7), 0xe9);
        // E9 00CF
        gbc.setState(0xdfe7, 0xb3d0, 0x1ac0, 0x6147, 0x4433, 0x5b09, 0x1, 0x0);
        gbc.writeMem(0xdfe7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb3d0);
        EXPECT(gbc.pc(), 0x5b09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe7), 0xe9);
        // E9 00D1
        gbc.setState(0x877b, 0x6a1c, 0x9b60, 0xa152, 0x6569, 0xcd83, 0x1, 0x1);
        gbc.writeMem(0x877b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6a1c);
        EXPECT(gbc.pc(), 0xcd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877b), 0xe9);
        // E9 00D2
        gbc.setState(0x61c7, 0x18f6, 0x7990, 0x8fb8, 0xb6a7, 0xbdc4, 0x0, 0x0);
        gbc.writeMem(0x61c7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x18f6);
        EXPECT(gbc.pc(), 0xbdc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00D3
        gbc.setState(0xa1ca, 0xfafc, 0x97e0, 0xe123, 0x6c5a, 0x9923, 0x1, 0x0);
        gbc.writeMem(0xa1ca, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfafc);
        EXPECT(gbc.pc(), 0x9923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ca), 0xe9);
        // E9 00D4
        gbc.setState(0x3614, 0x583b, 0xf470, 0x8892, 0xf152, 0x9565, 0x0, 0x1);
        gbc.writeMem(0x3614, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x583b);
        EXPECT(gbc.pc(), 0x9565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00D5
        gbc.setState(0xb118, 0x5837, 0x220, 0x6cf8, 0x74b2, 0xd9cb, 0x0, 0x0);
        gbc.writeMem(0xb118, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5837);
        EXPECT(gbc.pc(), 0xd9cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb118), 0xe9);
        // E9 00D7
        gbc.setState(0x3022, 0xad3e, 0x19c0, 0x8c4e, 0xd404, 0x3f36, 0x0, 0x1);
        gbc.writeMem(0x3022, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xad3e);
        EXPECT(gbc.pc(), 0x3f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00D8
        gbc.setState(0x8c86, 0x34d0, 0x41b0, 0xd79, 0x73c, 0x6efe, 0x0, 0x1);
        gbc.writeMem(0x8c86, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x34d0);
        EXPECT(gbc.pc(), 0x6efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c86), 0xe9);
        // E9 00D9
        gbc.setState(0x55ed, 0x9d6a, 0x5240, 0x53f, 0x3c93, 0x3252, 0x1, 0x0);
        gbc.writeMem(0x55ed, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9d6a);
        EXPECT(gbc.pc(), 0x3252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00DB
        gbc.setState(0xb775, 0x9608, 0x8250, 0x13db, 0x2cd8, 0xe500, 0x0, 0x1);
        gbc.writeMem(0xb775, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9608);
        EXPECT(gbc.pc(), 0xe500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb775), 0xe9);
        // E9 00DC
        gbc.setState(0xdc66, 0x4936, 0x9ad0, 0xd949, 0xe976, 0x291f, 0x0, 0x0);
        gbc.writeMem(0xdc66, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4936);
        EXPECT(gbc.pc(), 0x291f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc66), 0xe9);
        // E9 00DD
        gbc.setState(0x616, 0xfd75, 0xf0c0, 0x639d, 0x8da8, 0x8dc5, 0x1, 0x1);
        gbc.writeMem(0x616, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xfd75);
        EXPECT(gbc.pc(), 0x8dc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00DE
        gbc.setState(0x2e97, 0xf03c, 0xb6b0, 0xa7a5, 0xde9d, 0x6ebc, 0x1, 0x0);
        gbc.writeMem(0x2e97, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf03c);
        EXPECT(gbc.pc(), 0x6ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00DF
        gbc.setState(0x8f60, 0xa728, 0xd20, 0xf60b, 0x262b, 0xbdb2, 0x0, 0x1);
        gbc.writeMem(0x8f60, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa728);
        EXPECT(gbc.pc(), 0xbdb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f60), 0xe9);
        // E9 00E0
        gbc.setState(0xbd50, 0xe857, 0x7b60, 0x3cd4, 0x5169, 0xe7a8, 0x1, 0x1);
        gbc.writeMem(0xbd50, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe857);
        EXPECT(gbc.pc(), 0xe7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd50), 0xe9);
        // E9 00E2
        gbc.setState(0xe29e, 0x8670, 0xc0a0, 0xa35f, 0xb467, 0xbfd4, 0x0, 0x0);
        gbc.writeMem(0xe29e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8670);
        EXPECT(gbc.pc(), 0xbfd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe29e), 0xe9);
        // E9 00E3
        gbc.setState(0xecb1, 0x3988, 0xfd00, 0x4907, 0xbc4b, 0x5ce4, 0x1, 0x1);
        gbc.writeMem(0xecb1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3988);
        EXPECT(gbc.pc(), 0x5ce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb1), 0xe9);
        // E9 00E4
        gbc.setState(0xc713, 0xb0d9, 0xd210, 0x571c, 0x5b42, 0xef1f, 0x1, 0x0);
        gbc.writeMem(0xc713, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb0d9);
        EXPECT(gbc.pc(), 0xef1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc713), 0xe9);
        // E9 00E5
        gbc.setState(0x256f, 0xb88d, 0x8c10, 0x9b1, 0xfd05, 0x4a00, 0x0, 0x1);
        gbc.writeMem(0x256f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb88d);
        EXPECT(gbc.pc(), 0x4a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00E6
        gbc.setState(0xb375, 0x5abb, 0xabb0, 0x3df6, 0xe88, 0x4a4, 0x0, 0x1);
        gbc.writeMem(0xb375, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5abb);
        EXPECT(gbc.pc(), 0x4a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb375), 0xe9);
        // E9 00E7
        gbc.setState(0xb540, 0xaf43, 0x8c60, 0x3d17, 0x7327, 0xeb35, 0x0, 0x0);
        gbc.writeMem(0xb540, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaf43);
        EXPECT(gbc.pc(), 0xeb35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb540), 0xe9);
        // E9 00E8
        gbc.setState(0xd579, 0x5017, 0xe7d0, 0xe2dd, 0x17c8, 0x588c, 0x0, 0x1);
        gbc.writeMem(0xd579, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5017);
        EXPECT(gbc.pc(), 0x588c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd579), 0xe9);
        // E9 00E9
        gbc.setState(0xca84, 0xd196, 0x2020, 0x8bef, 0xc86e, 0x2c80, 0x0, 0x0);
        gbc.writeMem(0xca84, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd196);
        EXPECT(gbc.pc(), 0x2c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca84), 0xe9);
        // E9 00EA
        gbc.setState(0x748, 0xda9, 0xd480, 0xda2f, 0xd3a0, 0x1f63, 0x1, 0x0);
        gbc.writeMem(0x748, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xda9);
        EXPECT(gbc.pc(), 0x1f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00EB
        gbc.setState(0x8a9f, 0x3e19, 0xae30, 0xd3b8, 0x6a91, 0x3928, 0x0, 0x0);
        gbc.writeMem(0x8a9f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3e19);
        EXPECT(gbc.pc(), 0x3928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9f), 0xe9);
        // E9 00EC
        gbc.setState(0x426d, 0x33a0, 0x23d0, 0x5105, 0x9100, 0xb66a, 0x1, 0x1);
        gbc.writeMem(0x426d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x33a0);
        EXPECT(gbc.pc(), 0xb66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00ED
        gbc.setState(0x8a0, 0x78c4, 0x62e0, 0xa536, 0xe7c0, 0x4196, 0x1, 0x1);
        gbc.writeMem(0x8a0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x78c4);
        EXPECT(gbc.pc(), 0x4196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00EE
        gbc.setState(0xc797, 0x448c, 0x3e30, 0x67bd, 0x23a, 0xe1ce, 0x0, 0x0);
        gbc.writeMem(0xc797, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x448c);
        EXPECT(gbc.pc(), 0xe1ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc797), 0xe9);
        // E9 00EF
        gbc.setState(0x359d, 0x77dd, 0x4380, 0xbc21, 0xf632, 0x4eae, 0x1, 0x1);
        gbc.writeMem(0x359d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x77dd);
        EXPECT(gbc.pc(), 0x4eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 00F1
        gbc.setState(0xbf8d, 0x470b, 0xf550, 0xfa70, 0x609, 0x70f8, 0x1, 0x0);
        gbc.writeMem(0xbf8d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x470b);
        EXPECT(gbc.pc(), 0x70f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf8d), 0xe9);
        // E9 00F2
        gbc.setState(0xe3bc, 0xec39, 0xcb70, 0x5a51, 0xfaa8, 0xd16e, 0x1, 0x1);
        gbc.writeMem(0xe3bc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xec39);
        EXPECT(gbc.pc(), 0xd16e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3bc), 0xe9);
        // E9 00F3
        gbc.setState(0xd3ed, 0x6484, 0x9110, 0xe6eb, 0x774d, 0xd3f3, 0x0, 0x0);
        gbc.writeMem(0xd3ed, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6484);
        EXPECT(gbc.pc(), 0xd3f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ed), 0xe9);
        // E9 00F5
        gbc.setState(0x8aa1, 0x7ce3, 0xf0d0, 0xdf87, 0x638d, 0x59eb, 0x0, 0x1);
        gbc.writeMem(0x8aa1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7ce3);
        EXPECT(gbc.pc(), 0x59eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa1), 0xe9);
        // E9 00F6
        gbc.setState(0x3f44, 0x8b2c, 0x4520, 0x47dd, 0x3a31, 0x4175, 0x0, 0x1);
        gbc.writeMem(0x3f44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8b2c);
        EXPECT(gbc.pc(), 0x4175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 00F7
        gbc.setState(0x9dda, 0x8890, 0xfb50, 0xab67, 0x1aa8, 0xd748, 0x1, 0x1);
        gbc.writeMem(0x9dda, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8890);
        EXPECT(gbc.pc(), 0xd748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dda), 0xe9);
        // E9 00F8
        gbc.setState(0x8f0d, 0x9b2d, 0x2160, 0x5d4e, 0xd5a7, 0x94ce, 0x0, 0x0);
        gbc.writeMem(0x8f0d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9b2d);
        EXPECT(gbc.pc(), 0x94ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0d), 0xe9);
        // E9 00F9
        gbc.setState(0x601a, 0xc3dc, 0x5a90, 0xb10, 0x4324, 0x4097, 0x1, 0x1);
        gbc.writeMem(0x601a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc3dc);
        EXPECT(gbc.pc(), 0x4097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00FA
        gbc.setState(0xb843, 0xd1c4, 0xa730, 0xffff, 0x4f16, 0x2273, 0x0, 0x1);
        gbc.writeMem(0xb843, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd1c4);
        EXPECT(gbc.pc(), 0x2273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb843), 0xe9);
        // E9 00FB
        gbc.setState(0x1a06, 0x32a8, 0x95f0, 0x78c9, 0x6158, 0x41cd, 0x1, 0x1);
        gbc.writeMem(0x1a06, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x32a8);
        EXPECT(gbc.pc(), 0x41cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 00FC
        gbc.setState(0x93, 0x6535, 0x7150, 0x8507, 0x134b, 0x3d41, 0x0, 0x0);
        gbc.writeMem(0x93, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6535);
        EXPECT(gbc.pc(), 0x3d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 00FD
        gbc.setState(0x9969, 0x954c, 0x6e90, 0x8cd6, 0x8ff5, 0xb6ed, 0x1, 0x0);
        gbc.writeMem(0x9969, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x954c);
        EXPECT(gbc.pc(), 0xb6ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9969), 0xe9);
        // E9 00FE
        gbc.setState(0x595d, 0xaddd, 0xf050, 0xa7f4, 0x71c2, 0x78a8, 0x0, 0x0);
        gbc.writeMem(0x595d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xaddd);
        EXPECT(gbc.pc(), 0x78a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0100
        gbc.setState(0x7d69, 0xfea7, 0x3610, 0xbfa3, 0x85ae, 0x9ed1, 0x0, 0x1);
        gbc.writeMem(0x7d69, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xfea7);
        EXPECT(gbc.pc(), 0x9ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0101
        gbc.setState(0x5eec, 0xa03d, 0x7940, 0xac7, 0x42ce, 0xb713, 0x0, 0x0);
        gbc.writeMem(0x5eec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa03d);
        EXPECT(gbc.pc(), 0xb713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0102
        gbc.setState(0xbc48, 0xdcf6, 0x6e10, 0x7012, 0x95ce, 0x6bc3, 0x1, 0x0);
        gbc.writeMem(0xbc48, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdcf6);
        EXPECT(gbc.pc(), 0x6bc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc48), 0xe9);
        // E9 0103
        gbc.setState(0x2d5d, 0x26c1, 0x7a70, 0xfb81, 0xddc, 0xe19e, 0x0, 0x1);
        gbc.writeMem(0x2d5d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x26c1);
        EXPECT(gbc.pc(), 0xe19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0104
        gbc.setState(0x116d, 0x3, 0xb300, 0x29b0, 0x3319, 0xaca6, 0x1, 0x0);
        gbc.writeMem(0x116d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3);
        EXPECT(gbc.pc(), 0xaca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0105
        gbc.setState(0x9ab3, 0x301a, 0xbe80, 0x3b21, 0x2e12, 0x1372, 0x0, 0x0);
        gbc.writeMem(0x9ab3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x301a);
        EXPECT(gbc.pc(), 0x1372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab3), 0xe9);
        // E9 0106
        gbc.setState(0xd262, 0xb6b0, 0xbc20, 0xc3ea, 0xe2fa, 0x2c36, 0x1, 0x0);
        gbc.writeMem(0xd262, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb6b0);
        EXPECT(gbc.pc(), 0x2c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd262), 0xe9);
        // E9 0107
        gbc.setState(0xb74e, 0xda35, 0xc5c0, 0xff2, 0x96f6, 0x2029, 0x1, 0x1);
        gbc.writeMem(0xb74e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xda35);
        EXPECT(gbc.pc(), 0x2029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb74e), 0xe9);
        // E9 0108
        gbc.setState(0x6dd7, 0x1db1, 0xb3f0, 0xc90a, 0x82c7, 0x8b8b, 0x1, 0x0);
        gbc.writeMem(0x6dd7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1db1);
        EXPECT(gbc.pc(), 0x8b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0109
        gbc.setState(0xb3f6, 0xc28f, 0x7f60, 0x5d1c, 0xeeea, 0xd402, 0x0, 0x1);
        gbc.writeMem(0xb3f6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc28f);
        EXPECT(gbc.pc(), 0xd402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f6), 0xe9);
        // E9 010A
        gbc.setState(0x7575, 0xfc73, 0x3210, 0x7b4b, 0xd6f9, 0x2f3, 0x0, 0x1);
        gbc.writeMem(0x7575, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfc73);
        EXPECT(gbc.pc(), 0x2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 010B
        gbc.setState(0xcf5b, 0xc091, 0x5b30, 0xef2d, 0xcc0d, 0x94da, 0x0, 0x0);
        gbc.writeMem(0xcf5b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc091);
        EXPECT(gbc.pc(), 0x94da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5b), 0xe9);
        // E9 010C
        gbc.setState(0xe21f, 0xca1c, 0x4650, 0x7e4c, 0xf103, 0xf14c, 0x0, 0x0);
        gbc.writeMem(0xe21f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xca1c);
        EXPECT(gbc.pc(), 0xf14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe21f), 0xe9);
        // E9 010E
        gbc.setState(0xc1d6, 0x5edc, 0x1820, 0x85a6, 0xd2ea, 0xb464, 0x0, 0x0);
        gbc.writeMem(0xc1d6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5edc);
        EXPECT(gbc.pc(), 0xb464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d6), 0xe9);
        // E9 010F
        gbc.setState(0x483b, 0xdb51, 0xa0e0, 0xc03c, 0xfb05, 0x5dc9, 0x1, 0x1);
        gbc.writeMem(0x483b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdb51);
        EXPECT(gbc.pc(), 0x5dc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0111
        gbc.setState(0x8edc, 0xf4c2, 0x6a90, 0x4297, 0xe062, 0xf3ed, 0x0, 0x1);
        gbc.writeMem(0x8edc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf4c2);
        EXPECT(gbc.pc(), 0xf3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8edc), 0xe9);
        // E9 0112
        gbc.setState(0xe5ac, 0xc698, 0x9300, 0xb5c2, 0x2564, 0x39fb, 0x1, 0x0);
        gbc.writeMem(0xe5ac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc698);
        EXPECT(gbc.pc(), 0x39fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ac), 0xe9);
        // E9 0113
        gbc.setState(0x7cd5, 0xb67a, 0xaee0, 0x6750, 0x281c, 0xff53, 0x0, 0x0);
        gbc.writeMem(0x7cd5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb67a);
        EXPECT(gbc.pc(), 0xff53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0114
        gbc.setState(0x9f75, 0xbabe, 0x7e80, 0x65ef, 0x616c, 0x406b, 0x0, 0x1);
        gbc.writeMem(0x9f75, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbabe);
        EXPECT(gbc.pc(), 0x406b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f75), 0xe9);
        // E9 0115
        gbc.setState(0xa9ab, 0x76dc, 0x9350, 0xc112, 0xae82, 0xe12b, 0x0, 0x0);
        gbc.writeMem(0xa9ab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x76dc);
        EXPECT(gbc.pc(), 0xe12b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ab), 0xe9);
        // E9 0116
        gbc.setState(0x4cd0, 0xa675, 0xba70, 0x54d3, 0xff66, 0x2950, 0x1, 0x0);
        gbc.writeMem(0x4cd0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa675);
        EXPECT(gbc.pc(), 0x2950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0117
        gbc.setState(0x6469, 0xe2c6, 0x3420, 0x6ed3, 0x7d58, 0x600e, 0x1, 0x1);
        gbc.writeMem(0x6469, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe2c6);
        EXPECT(gbc.pc(), 0x600e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0118
        gbc.setState(0x890f, 0xeb29, 0x2d90, 0xfc98, 0x4672, 0x4364, 0x0, 0x1);
        gbc.writeMem(0x890f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xeb29);
        EXPECT(gbc.pc(), 0x4364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x890f), 0xe9);
        // E9 0119
        gbc.setState(0x325c, 0xe3c2, 0x2c30, 0x5448, 0xf22f, 0xd305, 0x0, 0x0);
        gbc.writeMem(0x325c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe3c2);
        EXPECT(gbc.pc(), 0xd305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 011A
        gbc.setState(0xe887, 0x109f, 0x1b20, 0x17f2, 0x8ad9, 0x10d1, 0x0, 0x0);
        gbc.writeMem(0xe887, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x109f);
        EXPECT(gbc.pc(), 0x10d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe887), 0xe9);
        // E9 011B
        gbc.setState(0x1606, 0x3b22, 0x74d0, 0x72fa, 0x2d1e, 0xc097, 0x0, 0x1);
        gbc.writeMem(0x1606, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3b22);
        EXPECT(gbc.pc(), 0xc097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 011C
        gbc.setState(0xb46, 0x29bf, 0x22f0, 0x4557, 0x3c59, 0x89d6, 0x1, 0x0);
        gbc.writeMem(0xb46, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x29bf);
        EXPECT(gbc.pc(), 0x89d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 011D
        gbc.setState(0xc057, 0xa9ff, 0x4920, 0xf38a, 0xaa28, 0x3ac1, 0x1, 0x1);
        gbc.writeMem(0xc057, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa9ff);
        EXPECT(gbc.pc(), 0x3ac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc057), 0xe9);
        // E9 011E
        gbc.setState(0x6a31, 0xb373, 0xe6e0, 0xc33c, 0xcf79, 0x671f, 0x0, 0x0);
        gbc.writeMem(0x6a31, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb373);
        EXPECT(gbc.pc(), 0x671f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 011F
        gbc.setState(0x4f9f, 0x504b, 0xbba0, 0xd79a, 0x59b2, 0xed2b, 0x0, 0x0);
        gbc.writeMem(0x4f9f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x504b);
        EXPECT(gbc.pc(), 0xed2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0120
        gbc.setState(0x31d8, 0xd83b, 0xc6d0, 0x42fb, 0x8d3f, 0xa3a0, 0x0, 0x1);
        gbc.writeMem(0x31d8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd83b);
        EXPECT(gbc.pc(), 0xa3a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0121
        gbc.setState(0x721d, 0x77f7, 0x8d20, 0xc4fe, 0xcd3d, 0x1790, 0x1, 0x0);
        gbc.writeMem(0x721d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x77f7);
        EXPECT(gbc.pc(), 0x1790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0122
        gbc.setState(0xe6e0, 0x1aa4, 0x7180, 0x9d5e, 0xe862, 0x7124, 0x1, 0x1);
        gbc.writeMem(0xe6e0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1aa4);
        EXPECT(gbc.pc(), 0x7124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e0), 0xe9);
        // E9 0123
        gbc.setState(0xac0b, 0x6875, 0x1a50, 0x6e1, 0x8f6, 0x9150, 0x0, 0x1);
        gbc.writeMem(0xac0b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6875);
        EXPECT(gbc.pc(), 0x9150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac0b), 0xe9);
        // E9 0124
        gbc.setState(0xb9c2, 0xfa5b, 0x7f50, 0x6c, 0x59de, 0xa953, 0x1, 0x1);
        gbc.writeMem(0xb9c2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfa5b);
        EXPECT(gbc.pc(), 0xa953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c2), 0xe9);
        // E9 0125
        gbc.setState(0xaed6, 0xdc16, 0x7df0, 0xd96, 0xee19, 0xe3f0, 0x1, 0x1);
        gbc.writeMem(0xaed6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdc16);
        EXPECT(gbc.pc(), 0xe3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed6), 0xe9);
        // E9 0127
        gbc.setState(0x45fe, 0x5cf9, 0x1100, 0x4d98, 0x436d, 0xcfaf, 0x0, 0x1);
        gbc.writeMem(0x45fe, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5cf9);
        EXPECT(gbc.pc(), 0xcfaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0128
        gbc.setState(0x6777, 0x5e01, 0x1660, 0x6f69, 0x21f9, 0xb979, 0x1, 0x0);
        gbc.writeMem(0x6777, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5e01);
        EXPECT(gbc.pc(), 0xb979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0129
        gbc.setState(0x9f97, 0x4738, 0x7ef0, 0x6748, 0x423e, 0xb94c, 0x0, 0x1);
        gbc.writeMem(0x9f97, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4738);
        EXPECT(gbc.pc(), 0xb94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f97), 0xe9);
        // E9 012A
        gbc.setState(0x5be1, 0xed39, 0x4dd0, 0x9cdd, 0xe7de, 0xad0b, 0x1, 0x1);
        gbc.writeMem(0x5be1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xed39);
        EXPECT(gbc.pc(), 0xad0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 012B
        gbc.setState(0xe15a, 0xea58, 0x890, 0x109d, 0x3292, 0x3dd3, 0x0, 0x1);
        gbc.writeMem(0xe15a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xea58);
        EXPECT(gbc.pc(), 0x3dd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe15a), 0xe9);
        // E9 012C
        gbc.setState(0x2b8d, 0x4738, 0x63a0, 0x37b4, 0x5a9f, 0xb2fe, 0x0, 0x0);
        gbc.writeMem(0x2b8d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4738);
        EXPECT(gbc.pc(), 0xb2fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 012D
        gbc.setState(0xacfd, 0xe254, 0x2f90, 0x1ae5, 0xb0b0, 0x6ece, 0x1, 0x1);
        gbc.writeMem(0xacfd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe254);
        EXPECT(gbc.pc(), 0x6ece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacfd), 0xe9);
        // E9 012E
        gbc.setState(0x89cd, 0x5028, 0x5c20, 0x2e17, 0x2290, 0xb14d, 0x0, 0x0);
        gbc.writeMem(0x89cd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5028);
        EXPECT(gbc.pc(), 0xb14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cd), 0xe9);
        // E9 012F
        gbc.setState(0x819, 0x5726, 0x8f20, 0x4948, 0x35f0, 0xdb85, 0x1, 0x1);
        gbc.writeMem(0x819, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5726);
        EXPECT(gbc.pc(), 0xdb85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0130
        gbc.setState(0xa165, 0x28a2, 0xc160, 0xebaa, 0x2e3c, 0xd196, 0x1, 0x1);
        gbc.writeMem(0xa165, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x28a2);
        EXPECT(gbc.pc(), 0xd196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa165), 0xe9);
        // E9 0131
        gbc.setState(0x4e49, 0x844, 0x75a0, 0x1810, 0x337a, 0xe3be, 0x1, 0x1);
        gbc.writeMem(0x4e49, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x844);
        EXPECT(gbc.pc(), 0xe3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0132
        gbc.setState(0x4805, 0x6a2c, 0x9970, 0xf033, 0x385b, 0x5685, 0x1, 0x0);
        gbc.writeMem(0x4805, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6a2c);
        EXPECT(gbc.pc(), 0x5685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0133
        gbc.setState(0xae4d, 0x661d, 0x2f30, 0xe5d3, 0x8aaa, 0x82ea, 0x1, 0x1);
        gbc.writeMem(0xae4d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x661d);
        EXPECT(gbc.pc(), 0x82ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae4d), 0xe9);
        // E9 0134
        gbc.setState(0x9a44, 0x8a64, 0x49f0, 0x545a, 0x2f7a, 0xafc9, 0x0, 0x0);
        gbc.writeMem(0x9a44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8a64);
        EXPECT(gbc.pc(), 0xafc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a44), 0xe9);
        // E9 0135
        gbc.setState(0x95c3, 0xf9b6, 0x1630, 0x6f8, 0xdeb8, 0xc211, 0x0, 0x1);
        gbc.writeMem(0x95c3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf9b6);
        EXPECT(gbc.pc(), 0xc211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95c3), 0xe9);
        // E9 0136
        gbc.setState(0x6cc5, 0xd938, 0x11d0, 0x3937, 0x7f45, 0xe29f, 0x0, 0x1);
        gbc.writeMem(0x6cc5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd938);
        EXPECT(gbc.pc(), 0xe29f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0137
        gbc.setState(0xb3dc, 0x2d38, 0xfbe0, 0x3e4, 0x3309, 0x2abd, 0x1, 0x0);
        gbc.writeMem(0xb3dc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2d38);
        EXPECT(gbc.pc(), 0x2abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3dc), 0xe9);
        // E9 0138
        gbc.setState(0xd030, 0x39ee, 0x9a50, 0xcf36, 0xc3b1, 0xda6a, 0x1, 0x0);
        gbc.writeMem(0xd030, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x39ee);
        EXPECT(gbc.pc(), 0xda6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd030), 0xe9);
        // E9 0139
        gbc.setState(0xe837, 0x748d, 0xfc00, 0x6b5c, 0x220, 0x97b0, 0x1, 0x1);
        gbc.writeMem(0xe837, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x748d);
        EXPECT(gbc.pc(), 0x97b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe837), 0xe9);
        // E9 013A
        gbc.setState(0xca09, 0xbbdb, 0xb130, 0xf1d5, 0xcfbb, 0xfb60, 0x0, 0x1);
        gbc.writeMem(0xca09, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbbdb);
        EXPECT(gbc.pc(), 0xfb60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca09), 0xe9);
        // E9 013B
        gbc.setState(0x2259, 0x6991, 0x3d80, 0x50c7, 0x6f59, 0x2790, 0x0, 0x1);
        gbc.writeMem(0x2259, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6991);
        EXPECT(gbc.pc(), 0x2790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 013C
        gbc.setState(0x5974, 0x195e, 0x9680, 0x7347, 0xc15, 0x1e25, 0x0, 0x0);
        gbc.writeMem(0x5974, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x195e);
        EXPECT(gbc.pc(), 0x1e25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 013D
        gbc.setState(0x8489, 0x582a, 0xc8f0, 0x21ec, 0x3b4b, 0xc9db, 0x0, 0x1);
        gbc.writeMem(0x8489, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x582a);
        EXPECT(gbc.pc(), 0xc9db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8489), 0xe9);
        // E9 013E
        gbc.setState(0x2156, 0x32fe, 0xbdc0, 0x8c54, 0xc5f8, 0xd91, 0x0, 0x0);
        gbc.writeMem(0x2156, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x32fe);
        EXPECT(gbc.pc(), 0xd91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 013F
        gbc.setState(0x161e, 0x5586, 0x52a0, 0x1bb0, 0x64e2, 0xdc08, 0x0, 0x0);
        gbc.writeMem(0x161e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5586);
        EXPECT(gbc.pc(), 0xdc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0140
        gbc.setState(0x229c, 0x4cec, 0xd740, 0x5718, 0xc6d6, 0x893e, 0x1, 0x0);
        gbc.writeMem(0x229c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4cec);
        EXPECT(gbc.pc(), 0x893e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0141
        gbc.setState(0x8780, 0x58b3, 0x6370, 0xef8, 0xb1d5, 0x99a0, 0x0, 0x1);
        gbc.writeMem(0x8780, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x58b3);
        EXPECT(gbc.pc(), 0x99a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8780), 0xe9);
        // E9 0142
        gbc.setState(0xd0bf, 0x6e38, 0x1e0, 0xfebc, 0x7bd3, 0xf38f, 0x1, 0x0);
        gbc.writeMem(0xd0bf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6e38);
        EXPECT(gbc.pc(), 0xf38f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0bf), 0xe9);
        // E9 0143
        gbc.setState(0x4c25, 0xc881, 0xd770, 0x9a15, 0xa02e, 0x7cfa, 0x1, 0x0);
        gbc.writeMem(0x4c25, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc881);
        EXPECT(gbc.pc(), 0x7cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0144
        gbc.setState(0x5e85, 0xf3f0, 0x4490, 0x498d, 0x5d54, 0xca6a, 0x0, 0x0);
        gbc.writeMem(0x5e85, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf3f0);
        EXPECT(gbc.pc(), 0xca6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0145
        gbc.setState(0x8af7, 0x1bc6, 0xa200, 0x2dbc, 0x5565, 0x3f75, 0x0, 0x1);
        gbc.writeMem(0x8af7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1bc6);
        EXPECT(gbc.pc(), 0x3f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af7), 0xe9);
        // E9 0146
        gbc.setState(0xbdaf, 0x1f9b, 0xa6e0, 0xc523, 0xe8d, 0xbada, 0x0, 0x0);
        gbc.writeMem(0xbdaf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1f9b);
        EXPECT(gbc.pc(), 0xbada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdaf), 0xe9);
        // E9 0147
        gbc.setState(0xee12, 0xaa92, 0x3e30, 0x9713, 0x90de, 0xf285, 0x0, 0x1);
        gbc.writeMem(0xee12, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xaa92);
        EXPECT(gbc.pc(), 0xf285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee12), 0xe9);
        // E9 0148
        gbc.setState(0x597a, 0x3a7, 0xf60, 0xc50e, 0xe1f2, 0xa0b5, 0x0, 0x1);
        gbc.writeMem(0x597a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3a7);
        EXPECT(gbc.pc(), 0xa0b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0149
        gbc.setState(0xb026, 0x6e1f, 0x50b0, 0xab16, 0xa7ec, 0x42c8, 0x0, 0x1);
        gbc.writeMem(0xb026, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6e1f);
        EXPECT(gbc.pc(), 0x42c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb026), 0xe9);
        // E9 014A
        gbc.setState(0x9970, 0x753, 0x2660, 0xb511, 0xb19d, 0xf6de, 0x1, 0x0);
        gbc.writeMem(0x9970, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x753);
        EXPECT(gbc.pc(), 0xf6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9970), 0xe9);
        // E9 014B
        gbc.setState(0x3b6a, 0x3066, 0x3ca0, 0x6081, 0x69b, 0x3726, 0x0, 0x1);
        gbc.writeMem(0x3b6a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3066);
        EXPECT(gbc.pc(), 0x3726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 014C
        gbc.setState(0x23c3, 0x5efb, 0xd690, 0xf5bd, 0xf9f1, 0x3ed, 0x0, 0x0);
        gbc.writeMem(0x23c3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5efb);
        EXPECT(gbc.pc(), 0x3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 014D
        gbc.setState(0xe77a, 0xd235, 0x8710, 0x787, 0x774f, 0x6400, 0x0, 0x1);
        gbc.writeMem(0xe77a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd235);
        EXPECT(gbc.pc(), 0x6400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe77a), 0xe9);
        // E9 014E
        gbc.setState(0x86a0, 0xa42e, 0x5790, 0xce98, 0xcc1, 0xea87, 0x0, 0x0);
        gbc.writeMem(0x86a0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa42e);
        EXPECT(gbc.pc(), 0xea87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a0), 0xe9);
        // E9 014F
        gbc.setState(0xa1f5, 0xe7bd, 0x4270, 0x7ffe, 0x6c2, 0x97ed, 0x1, 0x1);
        gbc.writeMem(0xa1f5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe7bd);
        EXPECT(gbc.pc(), 0x97ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f5), 0xe9);
        // E9 0150
        gbc.setState(0x3bf7, 0x6aa3, 0x6040, 0x6f70, 0xb7ca, 0xe182, 0x0, 0x0);
        gbc.writeMem(0x3bf7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6aa3);
        EXPECT(gbc.pc(), 0xe182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0151
        gbc.setState(0x93c1, 0xf156, 0x12b0, 0x2727, 0xf9f3, 0xe441, 0x0, 0x0);
        gbc.writeMem(0x93c1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf156);
        EXPECT(gbc.pc(), 0xe441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c1), 0xe9);
        // E9 0152
        gbc.setState(0x91ab, 0xa548, 0x4a70, 0x53bb, 0x52ec, 0x1e05, 0x0, 0x0);
        gbc.writeMem(0x91ab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa548);
        EXPECT(gbc.pc(), 0x1e05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ab), 0xe9);
        // E9 0153
        gbc.setState(0x3ae6, 0xcf75, 0x2170, 0x5c71, 0x5e9b, 0x9be2, 0x1, 0x1);
        gbc.writeMem(0x3ae6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcf75);
        EXPECT(gbc.pc(), 0x9be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0154
        gbc.setState(0xe0dd, 0xf25a, 0xa010, 0xba6e, 0x21e6, 0x49fe, 0x0, 0x1);
        gbc.writeMem(0xe0dd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf25a);
        EXPECT(gbc.pc(), 0x49fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0dd), 0xe9);
        // E9 0155
        gbc.setState(0x5dbc, 0x1d53, 0x3390, 0xb027, 0xd49d, 0xcd5c, 0x0, 0x0);
        gbc.writeMem(0x5dbc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1d53);
        EXPECT(gbc.pc(), 0xcd5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0156
        gbc.setState(0x8dc9, 0x8263, 0x1f0, 0xdf0f, 0x23e5, 0xa24a, 0x0, 0x0);
        gbc.writeMem(0x8dc9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8263);
        EXPECT(gbc.pc(), 0xa24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc9), 0xe9);
        // E9 0158
        gbc.setState(0x8b72, 0x254b, 0xf3d0, 0x7608, 0x7fcc, 0xc125, 0x1, 0x1);
        gbc.writeMem(0x8b72, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x254b);
        EXPECT(gbc.pc(), 0xc125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b72), 0xe9);
        // E9 0159
        gbc.setState(0x75eb, 0x2f88, 0x58a0, 0xbdfd, 0x72f9, 0x3073, 0x1, 0x1);
        gbc.writeMem(0x75eb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2f88);
        EXPECT(gbc.pc(), 0x3073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 015A
        gbc.setState(0xde0f, 0xb707, 0x2f70, 0xdcfc, 0x67f9, 0xe3e9, 0x1, 0x1);
        gbc.writeMem(0xde0f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb707);
        EXPECT(gbc.pc(), 0xe3e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde0f), 0xe9);
        // E9 015B
        gbc.setState(0x246c, 0x4c41, 0x79b0, 0xa939, 0xbaeb, 0x22a7, 0x1, 0x1);
        gbc.writeMem(0x246c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4c41);
        EXPECT(gbc.pc(), 0x22a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 015D
        gbc.setState(0xc097, 0x2e63, 0xf90, 0x395b, 0xba84, 0x90d7, 0x0, 0x1);
        gbc.writeMem(0xc097, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2e63);
        EXPECT(gbc.pc(), 0x90d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc097), 0xe9);
        // E9 015E
        gbc.setState(0x32e3, 0xe784, 0x8660, 0x94bd, 0x1c9e, 0xd74b, 0x0, 0x1);
        gbc.writeMem(0x32e3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe784);
        EXPECT(gbc.pc(), 0xd74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 015F
        gbc.setState(0x5831, 0x5db8, 0xe070, 0x18ec, 0x50a6, 0x546a, 0x0, 0x1);
        gbc.writeMem(0x5831, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5db8);
        EXPECT(gbc.pc(), 0x546a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0160
        gbc.setState(0xa42a, 0x7e37, 0x1a40, 0xa8b6, 0x16c5, 0x4720, 0x0, 0x1);
        gbc.writeMem(0xa42a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7e37);
        EXPECT(gbc.pc(), 0x4720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42a), 0xe9);
        // E9 0161
        gbc.setState(0xcb7, 0x5a6e, 0x9c70, 0xfd49, 0x4ac, 0x130e, 0x0, 0x1);
        gbc.writeMem(0xcb7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5a6e);
        EXPECT(gbc.pc(), 0x130e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0162
        gbc.setState(0xe684, 0x1159, 0x3640, 0x97c0, 0xda6d, 0x8827, 0x1, 0x0);
        gbc.writeMem(0xe684, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1159);
        EXPECT(gbc.pc(), 0x8827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe684), 0xe9);
        // E9 0163
        gbc.setState(0x5a37, 0xab94, 0x6b60, 0x593a, 0x680c, 0xf35a, 0x0, 0x1);
        gbc.writeMem(0x5a37, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xab94);
        EXPECT(gbc.pc(), 0xf35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0164
        gbc.setState(0x5a91, 0xb899, 0x1790, 0xf69b, 0xe9c1, 0x902c, 0x1, 0x1);
        gbc.writeMem(0x5a91, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb899);
        EXPECT(gbc.pc(), 0x902c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0165
        gbc.setState(0xce05, 0x538, 0x26c0, 0xa096, 0x4109, 0x37e7, 0x0, 0x1);
        gbc.writeMem(0xce05, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x538);
        EXPECT(gbc.pc(), 0x37e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce05), 0xe9);
        // E9 0166
        gbc.setState(0xe0e7, 0xf0d8, 0x2960, 0x1ded, 0x2e39, 0xc02e, 0x0, 0x0);
        gbc.writeMem(0xe0e7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf0d8);
        EXPECT(gbc.pc(), 0xc02e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e7), 0xe9);
        // E9 0167
        gbc.setState(0xee2c, 0xef6a, 0xb3d0, 0x69f3, 0x9980, 0x6083, 0x1, 0x1);
        gbc.writeMem(0xee2c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xef6a);
        EXPECT(gbc.pc(), 0x6083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee2c), 0xe9);
        // E9 0168
        gbc.setState(0x57d9, 0xb074, 0x6d0, 0xf883, 0xb53d, 0xf9f9, 0x0, 0x0);
        gbc.writeMem(0x57d9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb074);
        EXPECT(gbc.pc(), 0xf9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0169
        gbc.setState(0x781a, 0x4325, 0xb4a0, 0xff1, 0x7006, 0xccb5, 0x1, 0x1);
        gbc.writeMem(0x781a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4325);
        EXPECT(gbc.pc(), 0xccb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 016B
        gbc.setState(0xd411, 0xd873, 0x77a0, 0x7d12, 0x8063, 0xb421, 0x1, 0x1);
        gbc.writeMem(0xd411, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd873);
        EXPECT(gbc.pc(), 0xb421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd411), 0xe9);
        // E9 016C
        gbc.setState(0x53d8, 0x4aca, 0x5350, 0xc160, 0x6b5e, 0x8eb7, 0x0, 0x0);
        gbc.writeMem(0x53d8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4aca);
        EXPECT(gbc.pc(), 0x8eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 016D
        gbc.setState(0x379d, 0x5f0a, 0x710, 0xb914, 0x8fe3, 0xab02, 0x1, 0x0);
        gbc.writeMem(0x379d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5f0a);
        EXPECT(gbc.pc(), 0xab02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 016E
        gbc.setState(0x50e0, 0x9024, 0x9110, 0x1162, 0xa79f, 0x34c6, 0x0, 0x0);
        gbc.writeMem(0x50e0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9024);
        EXPECT(gbc.pc(), 0x34c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 016F
        gbc.setState(0xbdae, 0x726, 0xd070, 0x3394, 0x97d1, 0x1eb7, 0x0, 0x1);
        gbc.writeMem(0xbdae, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x726);
        EXPECT(gbc.pc(), 0x1eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdae), 0xe9);
        // E9 0170
        gbc.setState(0x4376, 0xe09a, 0x6b60, 0xa13, 0x34f5, 0x86e7, 0x0, 0x0);
        gbc.writeMem(0x4376, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe09a);
        EXPECT(gbc.pc(), 0x86e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0171
        gbc.setState(0x60f6, 0x1254, 0x3500, 0x61f2, 0x7d20, 0xcf70, 0x1, 0x1);
        gbc.writeMem(0x60f6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1254);
        EXPECT(gbc.pc(), 0xcf70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0172
        gbc.setState(0x8bc1, 0x53c3, 0x1020, 0xb679, 0x5df8, 0xdd9b, 0x1, 0x1);
        gbc.writeMem(0x8bc1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x53c3);
        EXPECT(gbc.pc(), 0xdd9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc1), 0xe9);
        // E9 0173
        gbc.setState(0xa941, 0xa0c6, 0xe940, 0xbf60, 0x493, 0x7a4e, 0x0, 0x1);
        gbc.writeMem(0xa941, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa0c6);
        EXPECT(gbc.pc(), 0x7a4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa941), 0xe9);
        // E9 0174
        gbc.setState(0x6c26, 0xfcf4, 0xb730, 0x38d9, 0xe322, 0xabd6, 0x1, 0x0);
        gbc.writeMem(0x6c26, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfcf4);
        EXPECT(gbc.pc(), 0xabd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0175
        gbc.setState(0xc183, 0x17ad, 0x7c50, 0x2575, 0xa002, 0x4f39, 0x0, 0x0);
        gbc.writeMem(0xc183, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x17ad);
        EXPECT(gbc.pc(), 0x4f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc183), 0xe9);
        // E9 0176
        gbc.setState(0x6c20, 0x8e32, 0x370, 0x19b, 0x9286, 0xbb34, 0x1, 0x1);
        gbc.writeMem(0x6c20, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8e32);
        EXPECT(gbc.pc(), 0xbb34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0177
        gbc.setState(0xc939, 0x5cd3, 0x1d60, 0x4583, 0xb3de, 0x7cf, 0x0, 0x0);
        gbc.writeMem(0xc939, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5cd3);
        EXPECT(gbc.pc(), 0x7cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc939), 0xe9);
        // E9 0178
        gbc.setState(0x83a5, 0x57df, 0x7a10, 0x8078, 0x8f66, 0xe3ee, 0x0, 0x0);
        gbc.writeMem(0x83a5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x57df);
        EXPECT(gbc.pc(), 0xe3ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a5), 0xe9);
        // E9 0179
        gbc.setState(0xc151, 0xc53e, 0x56a0, 0x8666, 0x6810, 0xfe08, 0x1, 0x0);
        gbc.writeMem(0xc151, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc53e);
        EXPECT(gbc.pc(), 0xfe08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc151), 0xe9);
        // E9 017A
        gbc.setState(0x8173, 0xed40, 0x2ee0, 0x32b0, 0x3cec, 0xf30d, 0x0, 0x0);
        gbc.writeMem(0x8173, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xed40);
        EXPECT(gbc.pc(), 0xf30d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8173), 0xe9);
        // E9 017B
        gbc.setState(0xa55f, 0xd8b6, 0xfd40, 0x6885, 0x432b, 0x34f8, 0x0, 0x1);
        gbc.writeMem(0xa55f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd8b6);
        EXPECT(gbc.pc(), 0x34f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55f), 0xe9);
        // E9 017C
        gbc.setState(0xe6ad, 0xac36, 0xf4d0, 0x74d4, 0xa950, 0x2008, 0x0, 0x0);
        gbc.writeMem(0xe6ad, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xac36);
        EXPECT(gbc.pc(), 0x2008);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ad), 0xe9);
        // E9 017D
        gbc.setState(0xff9, 0x3f70, 0x5c00, 0xecbc, 0xcf1a, 0xf68b, 0x1, 0x1);
        gbc.writeMem(0xff9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3f70);
        EXPECT(gbc.pc(), 0xf68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 017F
        gbc.setState(0x585f, 0x89ce, 0x8f0, 0xf6cb, 0xf10b, 0x192d, 0x0, 0x1);
        gbc.writeMem(0x585f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x89ce);
        EXPECT(gbc.pc(), 0x192d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0180
        gbc.setState(0x9353, 0x437c, 0x3930, 0x5961, 0x98af, 0x5220, 0x0, 0x0);
        gbc.writeMem(0x9353, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x437c);
        EXPECT(gbc.pc(), 0x5220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9353), 0xe9);
        // E9 0181
        gbc.setState(0x2aac, 0xc8c6, 0x7130, 0x9bb, 0xa588, 0xae40, 0x0, 0x1);
        gbc.writeMem(0x2aac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc8c6);
        EXPECT(gbc.pc(), 0xae40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0182
        gbc.setState(0xccf1, 0x917f, 0x1b40, 0x7a70, 0x4239, 0xf9c, 0x0, 0x1);
        gbc.writeMem(0xccf1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x917f);
        EXPECT(gbc.pc(), 0xf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf1), 0xe9);
        // E9 0183
        gbc.setState(0x8dc9, 0x55a8, 0xdad0, 0x5abd, 0xf3ef, 0x8a8c, 0x0, 0x0);
        gbc.writeMem(0x8dc9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x55a8);
        EXPECT(gbc.pc(), 0x8a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc9), 0xe9);
        // E9 0185
        gbc.setState(0x3dc1, 0x6cab, 0x96c0, 0x7941, 0x5515, 0x60c0, 0x1, 0x0);
        gbc.writeMem(0x3dc1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6cab);
        EXPECT(gbc.pc(), 0x60c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0186
        gbc.setState(0xb7ce, 0x7266, 0xa770, 0x830a, 0x9e97, 0x100, 0x0, 0x0);
        gbc.writeMem(0xb7ce, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7266);
        EXPECT(gbc.pc(), 0x100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ce), 0xe9);
        // E9 0187
        gbc.setState(0xd35f, 0xeedd, 0x11e0, 0x58d2, 0xa4d5, 0xb563, 0x1, 0x0);
        gbc.writeMem(0xd35f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xeedd);
        EXPECT(gbc.pc(), 0xb563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35f), 0xe9);
        // E9 0188
        gbc.setState(0x2ed7, 0x5d7d, 0xcc40, 0xb994, 0x75a3, 0x3bea, 0x1, 0x0);
        gbc.writeMem(0x2ed7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5d7d);
        EXPECT(gbc.pc(), 0x3bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0189
        gbc.setState(0xe9ce, 0xa2d6, 0xd5e0, 0x8c01, 0x17fd, 0x6208, 0x1, 0x1);
        gbc.writeMem(0xe9ce, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa2d6);
        EXPECT(gbc.pc(), 0x6208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ce), 0xe9);
        // E9 018A
        gbc.setState(0x237a, 0x2ec4, 0xcd60, 0x357b, 0xca0e, 0xe583, 0x1, 0x1);
        gbc.writeMem(0x237a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2ec4);
        EXPECT(gbc.pc(), 0xe583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 018B
        gbc.setState(0xdf28, 0xed8, 0x2870, 0xc361, 0x9c63, 0x57d1, 0x0, 0x0);
        gbc.writeMem(0xdf28, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xed8);
        EXPECT(gbc.pc(), 0x57d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf28), 0xe9);
        // E9 018C
        gbc.setState(0x2e8f, 0x5aa9, 0xf5d0, 0x257b, 0x946d, 0x6cef, 0x0, 0x0);
        gbc.writeMem(0x2e8f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5aa9);
        EXPECT(gbc.pc(), 0x6cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 018D
        gbc.setState(0x5f49, 0x82d2, 0x7170, 0x877, 0x2517, 0xd962, 0x0, 0x0);
        gbc.writeMem(0x5f49, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x82d2);
        EXPECT(gbc.pc(), 0xd962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 018E
        gbc.setState(0x588b, 0x7257, 0x2040, 0x4821, 0xf9f4, 0x4c13, 0x1, 0x0);
        gbc.writeMem(0x588b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7257);
        EXPECT(gbc.pc(), 0x4c13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 018F
        gbc.setState(0xca00, 0x347e, 0x5120, 0x6dd2, 0xda07, 0x85ab, 0x1, 0x0);
        gbc.writeMem(0xca00, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x347e);
        EXPECT(gbc.pc(), 0x85ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca00), 0xe9);
        // E9 0190
        gbc.setState(0xa8d, 0x8830, 0x9760, 0x59cb, 0x6dd3, 0x24b5, 0x0, 0x0);
        gbc.writeMem(0xa8d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8830);
        EXPECT(gbc.pc(), 0x24b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0191
        gbc.setState(0x3194, 0xb999, 0x6350, 0xd369, 0xf5e0, 0x9d60, 0x0, 0x0);
        gbc.writeMem(0x3194, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb999);
        EXPECT(gbc.pc(), 0x9d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0192
        gbc.setState(0x1014, 0xd9cc, 0x7460, 0x1440, 0x2c22, 0x54a0, 0x1, 0x0);
        gbc.writeMem(0x1014, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd9cc);
        EXPECT(gbc.pc(), 0x54a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0194
        gbc.setState(0x8ceb, 0x8023, 0x90b0, 0x85b1, 0x7ab2, 0x46e4, 0x0, 0x0);
        gbc.writeMem(0x8ceb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8023);
        EXPECT(gbc.pc(), 0x46e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ceb), 0xe9);
        // E9 0195
        gbc.setState(0x6699, 0x624c, 0x84c0, 0xff31, 0x9874, 0x20b8, 0x1, 0x1);
        gbc.writeMem(0x6699, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x624c);
        EXPECT(gbc.pc(), 0x20b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0197
        gbc.setState(0x19f7, 0xa04e, 0x7010, 0xa2cf, 0x29cc, 0xd94f, 0x0, 0x1);
        gbc.writeMem(0x19f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa04e);
        EXPECT(gbc.pc(), 0xd94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0198
        gbc.setState(0x4f3a, 0x743, 0x9140, 0x7e80, 0x5e33, 0xdea, 0x0, 0x1);
        gbc.writeMem(0x4f3a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x743);
        EXPECT(gbc.pc(), 0xdea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0199
        gbc.setState(0x3f23, 0x9348, 0xd210, 0x9d3c, 0x7d83, 0xfa4a, 0x0, 0x1);
        gbc.writeMem(0x3f23, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9348);
        EXPECT(gbc.pc(), 0xfa4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 019A
        gbc.setState(0x63b2, 0x486a, 0x47f0, 0xb5bb, 0xa7b9, 0xf33, 0x0, 0x1);
        gbc.writeMem(0x63b2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x486a);
        EXPECT(gbc.pc(), 0xf33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 019B
        gbc.setState(0xb697, 0x1c63, 0xc10, 0x8621, 0x964f, 0xcc6f, 0x0, 0x1);
        gbc.writeMem(0xb697, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1c63);
        EXPECT(gbc.pc(), 0xcc6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb697), 0xe9);
        // E9 019C
        gbc.setState(0x764a, 0x9d9e, 0x2350, 0x3cd6, 0xf1db, 0xd0c9, 0x0, 0x0);
        gbc.writeMem(0x764a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9d9e);
        EXPECT(gbc.pc(), 0xd0c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 019D
        gbc.setState(0xb475, 0x99af, 0xb880, 0x54c1, 0x6bb5, 0x4218, 0x1, 0x1);
        gbc.writeMem(0xb475, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x99af);
        EXPECT(gbc.pc(), 0x4218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb475), 0xe9);
        // E9 019E
        gbc.setState(0xaed3, 0x9c4, 0xa0f0, 0xa7f4, 0x85f3, 0x31de, 0x1, 0x0);
        gbc.writeMem(0xaed3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9c4);
        EXPECT(gbc.pc(), 0x31de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed3), 0xe9);
        // E9 01A0
        gbc.setState(0x5ef5, 0xb88f, 0x4600, 0x4793, 0xbbbe, 0x29af, 0x0, 0x0);
        gbc.writeMem(0x5ef5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb88f);
        EXPECT(gbc.pc(), 0x29af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01A1
        gbc.setState(0x9b8f, 0x20cd, 0xc1d0, 0x479, 0x9a63, 0x6839, 0x0, 0x0);
        gbc.writeMem(0x9b8f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x20cd);
        EXPECT(gbc.pc(), 0x6839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b8f), 0xe9);
        // E9 01A2
        gbc.setState(0x3cc7, 0xba1e, 0x3150, 0x8d7a, 0xbd45, 0x1cc5, 0x0, 0x1);
        gbc.writeMem(0x3cc7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xba1e);
        EXPECT(gbc.pc(), 0x1cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01A3
        gbc.setState(0x2512, 0x4cf0, 0x40d0, 0x6206, 0xfd49, 0x76c5, 0x0, 0x0);
        gbc.writeMem(0x2512, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4cf0);
        EXPECT(gbc.pc(), 0x76c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01A4
        gbc.setState(0x6f04, 0x49e, 0x1350, 0xc4a2, 0x1247, 0xe35a, 0x1, 0x0);
        gbc.writeMem(0x6f04, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x49e);
        EXPECT(gbc.pc(), 0xe35a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01A5
        gbc.setState(0x1bc4, 0x3dae, 0xbb50, 0xfca1, 0x7505, 0x1073, 0x1, 0x0);
        gbc.writeMem(0x1bc4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3dae);
        EXPECT(gbc.pc(), 0x1073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01A6
        gbc.setState(0xdeb8, 0x1333, 0x3ef0, 0xb861, 0x8472, 0xd0ee, 0x1, 0x0);
        gbc.writeMem(0xdeb8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1333);
        EXPECT(gbc.pc(), 0xd0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb8), 0xe9);
        // E9 01A7
        gbc.setState(0x4c29, 0x4982, 0x1b30, 0xed9d, 0xdeb5, 0x38a1, 0x1, 0x1);
        gbc.writeMem(0x4c29, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4982);
        EXPECT(gbc.pc(), 0x38a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01A8
        gbc.setState(0x515b, 0xdbb1, 0xde10, 0x7393, 0x1571, 0x9e9e, 0x1, 0x1);
        gbc.writeMem(0x515b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdbb1);
        EXPECT(gbc.pc(), 0x9e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01A9
        gbc.setState(0x1f05, 0xdbee, 0xb370, 0xf1e2, 0xec48, 0x56d5, 0x0, 0x0);
        gbc.writeMem(0x1f05, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdbee);
        EXPECT(gbc.pc(), 0x56d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01AA
        gbc.setState(0xc1da, 0x9f40, 0x13c0, 0xd2d5, 0x3729, 0xc5b3, 0x0, 0x1);
        gbc.writeMem(0xc1da, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9f40);
        EXPECT(gbc.pc(), 0xc5b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1da), 0xe9);
        // E9 01AB
        gbc.setState(0x91b4, 0x4151, 0x6cb0, 0xce0c, 0x81af, 0xc78b, 0x0, 0x0);
        gbc.writeMem(0x91b4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4151);
        EXPECT(gbc.pc(), 0xc78b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b4), 0xe9);
        // E9 01AC
        gbc.setState(0x5301, 0x706c, 0xb240, 0xf3a4, 0x323e, 0x5a2a, 0x0, 0x1);
        gbc.writeMem(0x5301, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x706c);
        EXPECT(gbc.pc(), 0x5a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01AD
        gbc.setState(0x3fc7, 0xd78c, 0x23e0, 0xbfdd, 0xf944, 0x5095, 0x1, 0x1);
        gbc.writeMem(0x3fc7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd78c);
        EXPECT(gbc.pc(), 0x5095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01AE
        gbc.setState(0xd979, 0x56a6, 0x1590, 0x8e19, 0x1abd, 0x4336, 0x1, 0x0);
        gbc.writeMem(0xd979, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x56a6);
        EXPECT(gbc.pc(), 0x4336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd979), 0xe9);
        // E9 01AF
        gbc.setState(0x525e, 0xf0d0, 0xad20, 0x8f08, 0xd942, 0x35fe, 0x0, 0x0);
        gbc.writeMem(0x525e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf0d0);
        EXPECT(gbc.pc(), 0x35fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01B0
        gbc.setState(0xd2f8, 0xfaf6, 0xb930, 0x9dd7, 0x7c5e, 0xd4a9, 0x1, 0x1);
        gbc.writeMem(0xd2f8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfaf6);
        EXPECT(gbc.pc(), 0xd4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f8), 0xe9);
        // E9 01B1
        gbc.setState(0xa034, 0xa986, 0xc2d0, 0x94fb, 0x8814, 0xd75f, 0x1, 0x1);
        gbc.writeMem(0xa034, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa986);
        EXPECT(gbc.pc(), 0xd75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa034), 0xe9);
        // E9 01B2
        gbc.setState(0xa4f, 0xe82c, 0x8d70, 0x2a24, 0xefe5, 0x57dd, 0x1, 0x0);
        gbc.writeMem(0xa4f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe82c);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01B3
        gbc.setState(0x6635, 0x20df, 0x8210, 0xe4e6, 0xcc40, 0x8c2f, 0x0, 0x0);
        gbc.writeMem(0x6635, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x20df);
        EXPECT(gbc.pc(), 0x8c2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01B4
        gbc.setState(0x237b, 0xe06e, 0xe700, 0x60ee, 0xe3d7, 0x3b69, 0x0, 0x0);
        gbc.writeMem(0x237b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe06e);
        EXPECT(gbc.pc(), 0x3b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01B5
        gbc.setState(0x6c61, 0x743d, 0xaa10, 0x4f55, 0x3121, 0xd14e, 0x1, 0x1);
        gbc.writeMem(0x6c61, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x743d);
        EXPECT(gbc.pc(), 0xd14e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01B6
        gbc.setState(0x13be, 0x4c60, 0xe3d0, 0xed3d, 0x62bf, 0x35e2, 0x1, 0x0);
        gbc.writeMem(0x13be, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4c60);
        EXPECT(gbc.pc(), 0x35e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01B7
        gbc.setState(0x6ea9, 0x2e81, 0x4930, 0xf527, 0xe1ad, 0x95ad, 0x0, 0x0);
        gbc.writeMem(0x6ea9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2e81);
        EXPECT(gbc.pc(), 0x95ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01B8
        gbc.setState(0xcf7b, 0x86b2, 0x66b0, 0xb99b, 0x157e, 0xd30b, 0x0, 0x0);
        gbc.writeMem(0xcf7b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x86b2);
        EXPECT(gbc.pc(), 0xd30b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf7b), 0xe9);
        // E9 01B9
        gbc.setState(0x52df, 0xc90d, 0xdf40, 0x777c, 0x5180, 0xdc9, 0x1, 0x0);
        gbc.writeMem(0x52df, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc90d);
        EXPECT(gbc.pc(), 0xdc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01BA
        gbc.setState(0x1614, 0xc766, 0x99d0, 0x80bc, 0x4965, 0x94fd, 0x0, 0x0);
        gbc.writeMem(0x1614, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc766);
        EXPECT(gbc.pc(), 0x94fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01BB
        gbc.setState(0x1cb3, 0xd532, 0x3450, 0x84cd, 0x91b2, 0x833c, 0x0, 0x0);
        gbc.writeMem(0x1cb3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd532);
        EXPECT(gbc.pc(), 0x833c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01BC
        gbc.setState(0x2671, 0xd363, 0xc730, 0x90, 0xbcd5, 0x7df9, 0x1, 0x1);
        gbc.writeMem(0x2671, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd363);
        EXPECT(gbc.pc(), 0x7df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01BD
        gbc.setState(0x2556, 0xa9d4, 0x48d0, 0x576f, 0xb073, 0xb4f6, 0x1, 0x1);
        gbc.writeMem(0x2556, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa9d4);
        EXPECT(gbc.pc(), 0xb4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01BE
        gbc.setState(0xb393, 0xc173, 0x9640, 0xdfdd, 0xed7, 0x56c, 0x0, 0x0);
        gbc.writeMem(0xb393, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc173);
        EXPECT(gbc.pc(), 0x56c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb393), 0xe9);
        // E9 01BF
        gbc.setState(0x944e, 0x5a81, 0xc6d0, 0x1c1c, 0xb866, 0xa8c5, 0x0, 0x1);
        gbc.writeMem(0x944e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5a81);
        EXPECT(gbc.pc(), 0xa8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x944e), 0xe9);
        // E9 01C0
        gbc.setState(0xd8ac, 0xd18a, 0xec70, 0xddaa, 0x9909, 0x79c, 0x0, 0x1);
        gbc.writeMem(0xd8ac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd18a);
        EXPECT(gbc.pc(), 0x79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ac), 0xe9);
        // E9 01C1
        gbc.setState(0xdc04, 0x1af1, 0x9760, 0x1c4c, 0x99f2, 0x90e3, 0x1, 0x1);
        gbc.writeMem(0xdc04, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1af1);
        EXPECT(gbc.pc(), 0x90e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc04), 0xe9);
        // E9 01C2
        gbc.setState(0x58de, 0x548a, 0x48c0, 0xb145, 0x7ea1, 0xfe0f, 0x0, 0x0);
        gbc.writeMem(0x58de, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x548a);
        EXPECT(gbc.pc(), 0xfe0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01C3
        gbc.setState(0x7b6f, 0x5404, 0xf700, 0x4855, 0x5fe6, 0x95f8, 0x1, 0x1);
        gbc.writeMem(0x7b6f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5404);
        EXPECT(gbc.pc(), 0x95f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01C4
        gbc.setState(0xa5d1, 0x66fb, 0x17b0, 0xbf6f, 0xed6, 0xeab0, 0x1, 0x1);
        gbc.writeMem(0xa5d1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x66fb);
        EXPECT(gbc.pc(), 0xeab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d1), 0xe9);
        // E9 01C5
        gbc.setState(0x95cc, 0xe66b, 0xfe50, 0xed9e, 0xeb40, 0x149c, 0x1, 0x1);
        gbc.writeMem(0x95cc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe66b);
        EXPECT(gbc.pc(), 0x149c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95cc), 0xe9);
        // E9 01C6
        gbc.setState(0x29ae, 0x8de1, 0x4290, 0xeec3, 0xcba5, 0xc8f0, 0x0, 0x0);
        gbc.writeMem(0x29ae, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8de1);
        EXPECT(gbc.pc(), 0xc8f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01C7
        gbc.setState(0x52a6, 0xeb9, 0x3540, 0x9d73, 0xeebe, 0xd05a, 0x0, 0x0);
        gbc.writeMem(0x52a6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xeb9);
        EXPECT(gbc.pc(), 0xd05a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01C8
        gbc.setState(0x2eab, 0xcbe6, 0x58f0, 0x2775, 0xc568, 0x5335, 0x0, 0x0);
        gbc.writeMem(0x2eab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcbe6);
        EXPECT(gbc.pc(), 0x5335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01C9
        gbc.setState(0xe3ee, 0xe324, 0xc8f0, 0x6e83, 0x45c4, 0x560c, 0x1, 0x1);
        gbc.writeMem(0xe3ee, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe324);
        EXPECT(gbc.pc(), 0x560c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ee), 0xe9);
        // E9 01CA
        gbc.setState(0xe076, 0x1b05, 0x7cf0, 0x39, 0x571d, 0xf88d, 0x1, 0x0);
        gbc.writeMem(0xe076, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1b05);
        EXPECT(gbc.pc(), 0xf88d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe076), 0xe9);
        // E9 01CB
        gbc.setState(0x9564, 0xda46, 0x5dd0, 0xbaa4, 0x9a20, 0x8157, 0x1, 0x1);
        gbc.writeMem(0x9564, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xda46);
        EXPECT(gbc.pc(), 0x8157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9564), 0xe9);
        // E9 01CC
        gbc.setState(0xb501, 0x6dfe, 0xa760, 0x6579, 0xe1ed, 0x2c14, 0x0, 0x0);
        gbc.writeMem(0xb501, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6dfe);
        EXPECT(gbc.pc(), 0x2c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb501), 0xe9);
        // E9 01CD
        gbc.setState(0x68b6, 0x9229, 0x9dd0, 0x9df9, 0xcb96, 0xf838, 0x0, 0x1);
        gbc.writeMem(0x68b6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9229);
        EXPECT(gbc.pc(), 0xf838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01CE
        gbc.setState(0x22ce, 0x6040, 0x9a00, 0x799e, 0x8e45, 0x5a3d, 0x1, 0x0);
        gbc.writeMem(0x22ce, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6040);
        EXPECT(gbc.pc(), 0x5a3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01CF
        gbc.setState(0x5dfe, 0x470, 0x60c0, 0xa962, 0x2c4c, 0xbd24, 0x0, 0x1);
        gbc.writeMem(0x5dfe, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x470);
        EXPECT(gbc.pc(), 0xbd24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01D0
        gbc.setState(0x2e6c, 0xddea, 0x28d0, 0x312e, 0xe0ba, 0x10bf, 0x1, 0x0);
        gbc.writeMem(0x2e6c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xddea);
        EXPECT(gbc.pc(), 0x10bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01D1
        gbc.setState(0xd7f3, 0x148c, 0x59f0, 0x4039, 0x42dd, 0x1b35, 0x0, 0x0);
        gbc.writeMem(0xd7f3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x148c);
        EXPECT(gbc.pc(), 0x1b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f3), 0xe9);
        // E9 01D2
        gbc.setState(0x9717, 0xc943, 0xe570, 0xa652, 0x6af0, 0xf66c, 0x1, 0x1);
        gbc.writeMem(0x9717, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc943);
        EXPECT(gbc.pc(), 0xf66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9717), 0xe9);
        // E9 01D3
        gbc.setState(0x7cef, 0x2da6, 0xae70, 0x7523, 0x3915, 0x9b24, 0x1, 0x0);
        gbc.writeMem(0x7cef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2da6);
        EXPECT(gbc.pc(), 0x9b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01D4
        gbc.setState(0x9782, 0x280d, 0x51e0, 0x2236, 0xe2c8, 0x7ab0, 0x1, 0x0);
        gbc.writeMem(0x9782, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x280d);
        EXPECT(gbc.pc(), 0x7ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9782), 0xe9);
        // E9 01D5
        gbc.setState(0x3b64, 0xb367, 0x7fb0, 0xd735, 0x1205, 0xe0b7, 0x1, 0x0);
        gbc.writeMem(0x3b64, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb367);
        EXPECT(gbc.pc(), 0xe0b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01D6
        gbc.setState(0xbca3, 0x48b6, 0xe50, 0x1215, 0x9595, 0x514b, 0x0, 0x1);
        gbc.writeMem(0xbca3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x48b6);
        EXPECT(gbc.pc(), 0x514b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbca3), 0xe9);
        // E9 01D7
        gbc.setState(0x151a, 0xe300, 0xf1b0, 0xa83b, 0xc887, 0x49e1, 0x0, 0x0);
        gbc.writeMem(0x151a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe300);
        EXPECT(gbc.pc(), 0x49e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01D8
        gbc.setState(0x2fe6, 0x9603, 0x3790, 0x6c9a, 0x2b49, 0xba6f, 0x0, 0x0);
        gbc.writeMem(0x2fe6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0xba6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01D9
        gbc.setState(0x3eeb, 0x4262, 0xcfb0, 0x660f, 0xfc46, 0xb13, 0x1, 0x1);
        gbc.writeMem(0x3eeb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4262);
        EXPECT(gbc.pc(), 0xb13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01DA
        gbc.setState(0xe804, 0xe16, 0x2940, 0xec0c, 0x699, 0x996c, 0x0, 0x0);
        gbc.writeMem(0xe804, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe16);
        EXPECT(gbc.pc(), 0x996c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe804), 0xe9);
        // E9 01DB
        gbc.setState(0x95c9, 0x6541, 0xb2a0, 0x1369, 0xc854, 0xf8df, 0x0, 0x0);
        gbc.writeMem(0x95c9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6541);
        EXPECT(gbc.pc(), 0xf8df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c9), 0xe9);
        // E9 01DC
        gbc.setState(0x61c1, 0xb26d, 0x2ed0, 0x9166, 0xb7a8, 0x4c1e, 0x1, 0x0);
        gbc.writeMem(0x61c1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb26d);
        EXPECT(gbc.pc(), 0x4c1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01DD
        gbc.setState(0x6544, 0xe66a, 0xff70, 0xee47, 0xb7b8, 0xc6fa, 0x1, 0x1);
        gbc.writeMem(0x6544, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe66a);
        EXPECT(gbc.pc(), 0xc6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01DE
        gbc.setState(0x7988, 0x12bb, 0xb580, 0xa0fa, 0x10c4, 0xdb42, 0x0, 0x1);
        gbc.writeMem(0x7988, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x12bb);
        EXPECT(gbc.pc(), 0xdb42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01DF
        gbc.setState(0x5889, 0xb471, 0x8ac0, 0x3095, 0x20ef, 0x405f, 0x1, 0x1);
        gbc.writeMem(0x5889, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb471);
        EXPECT(gbc.pc(), 0x405f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01E0
        gbc.setState(0x2ac2, 0x7521, 0x8f40, 0xa6d4, 0x8280, 0x89d, 0x0, 0x0);
        gbc.writeMem(0x2ac2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7521);
        EXPECT(gbc.pc(), 0x89d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01E1
        gbc.setState(0x7004, 0xc493, 0x9da0, 0xd25e, 0x9ce1, 0x6dac, 0x1, 0x1);
        gbc.writeMem(0x7004, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc493);
        EXPECT(gbc.pc(), 0x6dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01E2
        gbc.setState(0x24d5, 0xc5aa, 0x30e0, 0x8f14, 0x8715, 0x972c, 0x0, 0x1);
        gbc.writeMem(0x24d5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc5aa);
        EXPECT(gbc.pc(), 0x972c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01E3
        gbc.setState(0x282e, 0xe31d, 0x82f0, 0x48e0, 0x3080, 0xc22b, 0x1, 0x1);
        gbc.writeMem(0x282e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe31d);
        EXPECT(gbc.pc(), 0xc22b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01E4
        gbc.setState(0x4650, 0x3b55, 0xced0, 0x243c, 0x5c29, 0x2051, 0x0, 0x0);
        gbc.writeMem(0x4650, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3b55);
        EXPECT(gbc.pc(), 0x2051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01E5
        gbc.setState(0xc167, 0xfa4d, 0xfa30, 0x3d99, 0xb243, 0xa4cc, 0x1, 0x0);
        gbc.writeMem(0xc167, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfa4d);
        EXPECT(gbc.pc(), 0xa4cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc167), 0xe9);
        // E9 01E6
        gbc.setState(0x112e, 0xfb84, 0x2860, 0x26c0, 0x3cd3, 0x24e4, 0x1, 0x1);
        gbc.writeMem(0x112e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfb84);
        EXPECT(gbc.pc(), 0x24e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01E7
        gbc.setState(0xd1fa, 0xffd7, 0x7a80, 0x6155, 0x9714, 0xcb4b, 0x1, 0x0);
        gbc.writeMem(0xd1fa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xffd7);
        EXPECT(gbc.pc(), 0xcb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fa), 0xe9);
        // E9 01E8
        gbc.setState(0xb14b, 0x9e22, 0x7f30, 0x3ea5, 0xeab7, 0x3bb2, 0x1, 0x1);
        gbc.writeMem(0xb14b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9e22);
        EXPECT(gbc.pc(), 0x3bb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14b), 0xe9);
        // E9 01E9
        gbc.setState(0xce96, 0xb122, 0xe8e0, 0xda90, 0x54db, 0x3a12, 0x0, 0x0);
        gbc.writeMem(0xce96, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb122);
        EXPECT(gbc.pc(), 0x3a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce96), 0xe9);
        // E9 01EA
        gbc.setState(0x7b98, 0xcc1f, 0xa880, 0xa7, 0x5490, 0x26e9, 0x1, 0x0);
        gbc.writeMem(0x7b98, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcc1f);
        EXPECT(gbc.pc(), 0x26e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01EB
        gbc.setState(0x2f46, 0xe9a7, 0x0, 0x946, 0xb1aa, 0xef6, 0x0, 0x1);
        gbc.writeMem(0x2f46, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe9a7);
        EXPECT(gbc.pc(), 0xef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01EC
        gbc.setState(0x4402, 0xa329, 0x62c0, 0xca7c, 0x736, 0xc1aa, 0x1, 0x1);
        gbc.writeMem(0x4402, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa329);
        EXPECT(gbc.pc(), 0xc1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01EE
        gbc.setState(0x7152, 0xe068, 0x9b80, 0xb83f, 0x8277, 0xc040, 0x1, 0x1);
        gbc.writeMem(0x7152, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe068);
        EXPECT(gbc.pc(), 0xc040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01EF
        gbc.setState(0x29ab, 0x4c0f, 0x9a70, 0xc137, 0x2283, 0xfc4c, 0x1, 0x1);
        gbc.writeMem(0x29ab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4c0f);
        EXPECT(gbc.pc(), 0xfc4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01F0
        gbc.setState(0xd60, 0x6603, 0xa630, 0x11d2, 0x7d95, 0xa79c, 0x1, 0x1);
        gbc.writeMem(0xd60, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6603);
        EXPECT(gbc.pc(), 0xa79c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01F1
        gbc.setState(0x8458, 0x2d13, 0xa0a0, 0x4103, 0x1eaf, 0x2475, 0x1, 0x0);
        gbc.writeMem(0x8458, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2d13);
        EXPECT(gbc.pc(), 0x2475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8458), 0xe9);
        // E9 01F2
        gbc.setState(0x55a4, 0xec0b, 0x3d70, 0x6ddf, 0xa833, 0xa0d6, 0x1, 0x1);
        gbc.writeMem(0x55a4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xec0b);
        EXPECT(gbc.pc(), 0xa0d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 01F3
        gbc.setState(0x992a, 0x5ae7, 0xae90, 0xc43d, 0x7097, 0x3b43, 0x1, 0x1);
        gbc.writeMem(0x992a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5ae7);
        EXPECT(gbc.pc(), 0x3b43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992a), 0xe9);
        // E9 01F4
        gbc.setState(0xa0bf, 0xa1d9, 0x58e0, 0x61c7, 0x39ec, 0x5f62, 0x1, 0x0);
        gbc.writeMem(0xa0bf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa1d9);
        EXPECT(gbc.pc(), 0x5f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0bf), 0xe9);
        // E9 01F5
        gbc.setState(0x3344, 0x8e18, 0xadc0, 0x4497, 0xc897, 0xb063, 0x1, 0x1);
        gbc.writeMem(0x3344, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8e18);
        EXPECT(gbc.pc(), 0xb063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01F6
        gbc.setState(0x887a, 0x3d83, 0x9d30, 0x72ce, 0x3c9a, 0x6ed5, 0x0, 0x0);
        gbc.writeMem(0x887a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3d83);
        EXPECT(gbc.pc(), 0x6ed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887a), 0xe9);
        // E9 01F7
        gbc.setState(0x96c2, 0xbb07, 0xb8a0, 0x572e, 0x293f, 0xd86d, 0x0, 0x0);
        gbc.writeMem(0x96c2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbb07);
        EXPECT(gbc.pc(), 0xd86d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c2), 0xe9);
        // E9 01F8
        gbc.setState(0xeefd, 0xb051, 0x37e0, 0xff01, 0x866c, 0x83e5, 0x0, 0x1);
        gbc.writeMem(0xeefd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb051);
        EXPECT(gbc.pc(), 0x83e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeefd), 0xe9);
        // E9 01F9
        gbc.setState(0x3f18, 0x965, 0x2780, 0x4ab4, 0xb84e, 0x3385, 0x0, 0x0);
        gbc.writeMem(0x3f18, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x965);
        EXPECT(gbc.pc(), 0x3385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 01FA
        gbc.setState(0xd57c, 0xf603, 0xa410, 0x2eda, 0xb30f, 0x541d, 0x0, 0x1);
        gbc.writeMem(0xd57c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf603);
        EXPECT(gbc.pc(), 0x541d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd57c), 0xe9);
        // E9 01FB
        gbc.setState(0x1f8e, 0x9581, 0xc2d0, 0x58b8, 0x1c78, 0x4f68, 0x0, 0x0);
        gbc.writeMem(0x1f8e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9581);
        EXPECT(gbc.pc(), 0x4f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 01FC
        gbc.setState(0xb3b1, 0x27ab, 0xfa00, 0xf16a, 0xb7f6, 0x577b, 0x1, 0x0);
        gbc.writeMem(0xb3b1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x27ab);
        EXPECT(gbc.pc(), 0x577b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b1), 0xe9);
        // E9 01FD
        gbc.setState(0xa8a1, 0xa13c, 0xd20, 0x3859, 0xaf2, 0x8b7, 0x0, 0x1);
        gbc.writeMem(0xa8a1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa13c);
        EXPECT(gbc.pc(), 0x8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a1), 0xe9);
        // E9 01FE
        gbc.setState(0x4de4, 0x694c, 0x3a20, 0x119f, 0x612, 0x9e3c, 0x1, 0x1);
        gbc.writeMem(0x4de4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x694c);
        EXPECT(gbc.pc(), 0x9e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 01FF
        gbc.setState(0x887f, 0xcea, 0x99b0, 0x2ec2, 0x3e87, 0xf94a, 0x0, 0x0);
        gbc.writeMem(0x887f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcea);
        EXPECT(gbc.pc(), 0xf94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887f), 0xe9);
        // E9 0200
        gbc.setState(0xebfa, 0x7257, 0x8830, 0x23f0, 0x22d8, 0xa4b0, 0x1, 0x1);
        gbc.writeMem(0xebfa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7257);
        EXPECT(gbc.pc(), 0xa4b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebfa), 0xe9);
        // E9 0201
        gbc.setState(0x6437, 0xa010, 0x3190, 0x4a6b, 0xc74a, 0x6d7a, 0x1, 0x1);
        gbc.writeMem(0x6437, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa010);
        EXPECT(gbc.pc(), 0x6d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0202
        gbc.setState(0xc3ad, 0x1aca, 0x7490, 0x476b, 0x8272, 0xd8e9, 0x0, 0x1);
        gbc.writeMem(0xc3ad, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1aca);
        EXPECT(gbc.pc(), 0xd8e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ad), 0xe9);
        // E9 0203
        gbc.setState(0x1e0b, 0x6016, 0x4800, 0xfb29, 0xbfe4, 0xb7, 0x0, 0x0);
        gbc.writeMem(0x1e0b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6016);
        EXPECT(gbc.pc(), 0xb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0204
        gbc.setState(0x399a, 0x15b0, 0x3720, 0x5baf, 0x938f, 0x1b30, 0x0, 0x1);
        gbc.writeMem(0x399a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x15b0);
        EXPECT(gbc.pc(), 0x1b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0205
        gbc.setState(0x55b9, 0x41f7, 0x7fd0, 0x17e0, 0xea29, 0xde2d, 0x0, 0x0);
        gbc.writeMem(0x55b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x41f7);
        EXPECT(gbc.pc(), 0xde2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0206
        gbc.setState(0x151c, 0x28cd, 0x4fb0, 0x3649, 0x4b6c, 0x1e45, 0x0, 0x1);
        gbc.writeMem(0x151c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x28cd);
        EXPECT(gbc.pc(), 0x1e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0208
        gbc.setState(0x4fba, 0x3e53, 0xcf60, 0xcb9, 0x523b, 0xb333, 0x1, 0x0);
        gbc.writeMem(0x4fba, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3e53);
        EXPECT(gbc.pc(), 0xb333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0209
        gbc.setState(0x2a9e, 0x4f43, 0x3d80, 0x5946, 0x52e6, 0xce0c, 0x1, 0x0);
        gbc.writeMem(0x2a9e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4f43);
        EXPECT(gbc.pc(), 0xce0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 020A
        gbc.setState(0x76, 0x400b, 0xdf40, 0x1449, 0xe4a4, 0x1638, 0x1, 0x0);
        gbc.writeMem(0x76, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x400b);
        EXPECT(gbc.pc(), 0x1638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 020B
        gbc.setState(0xaae, 0x7e09, 0x3e30, 0x4bb9, 0x8d28, 0xd51c, 0x0, 0x1);
        gbc.writeMem(0xaae, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7e09);
        EXPECT(gbc.pc(), 0xd51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 020C
        gbc.setState(0x6396, 0xe7a6, 0x180, 0x29c, 0x7a20, 0xf0d5, 0x0, 0x1);
        gbc.writeMem(0x6396, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe7a6);
        EXPECT(gbc.pc(), 0xf0d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 020D
        gbc.setState(0xaf9e, 0x9a3a, 0x1ea0, 0xab21, 0x7071, 0x7607, 0x0, 0x0);
        gbc.writeMem(0xaf9e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9a3a);
        EXPECT(gbc.pc(), 0x7607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9e), 0xe9);
        // E9 020E
        gbc.setState(0xe13e, 0x54ff, 0xa900, 0xe607, 0xe4c0, 0x3e0f, 0x1, 0x1);
        gbc.writeMem(0xe13e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x54ff);
        EXPECT(gbc.pc(), 0x3e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe13e), 0xe9);
        // E9 020F
        gbc.setState(0x6a7b, 0x787b, 0x1560, 0x7975, 0xa9fe, 0x952c, 0x1, 0x1);
        gbc.writeMem(0x6a7b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x787b);
        EXPECT(gbc.pc(), 0x952c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0210
        gbc.setState(0x17a9, 0xefd7, 0x1e20, 0x7cd7, 0x932, 0x63d7, 0x0, 0x0);
        gbc.writeMem(0x17a9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xefd7);
        EXPECT(gbc.pc(), 0x63d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0211
        gbc.setState(0x9cf6, 0xb52a, 0xb8a0, 0x68b, 0x4d92, 0x6678, 0x1, 0x0);
        gbc.writeMem(0x9cf6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb52a);
        EXPECT(gbc.pc(), 0x6678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf6), 0xe9);
        // E9 0212
        gbc.setState(0xee09, 0x373f, 0x3460, 0xa259, 0x369a, 0x2025, 0x0, 0x1);
        gbc.writeMem(0xee09, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x373f);
        EXPECT(gbc.pc(), 0x2025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee09), 0xe9);
        // E9 0213
        gbc.setState(0x866f, 0xf2be, 0x7eb0, 0xea8a, 0xf707, 0xdb70, 0x1, 0x0);
        gbc.writeMem(0x866f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf2be);
        EXPECT(gbc.pc(), 0xdb70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866f), 0xe9);
        // E9 0214
        gbc.setState(0x91bd, 0xfca1, 0x8160, 0x39d7, 0xcece, 0x754a, 0x0, 0x0);
        gbc.writeMem(0x91bd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfca1);
        EXPECT(gbc.pc(), 0x754a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91bd), 0xe9);
        // E9 0215
        gbc.setState(0xb1a7, 0xf9ac, 0x9b10, 0x4d61, 0x3234, 0x242e, 0x1, 0x1);
        gbc.writeMem(0xb1a7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf9ac);
        EXPECT(gbc.pc(), 0x242e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a7), 0xe9);
        // E9 0216
        gbc.setState(0x61e9, 0xb65c, 0x1cc0, 0x85a0, 0xb0b0, 0x3b58, 0x1, 0x0);
        gbc.writeMem(0x61e9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb65c);
        EXPECT(gbc.pc(), 0x3b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0217
        gbc.setState(0x2fb8, 0x936a, 0x3650, 0x9836, 0xcd14, 0x34d0, 0x0, 0x1);
        gbc.writeMem(0x2fb8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x936a);
        EXPECT(gbc.pc(), 0x34d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0218
        gbc.setState(0xeac2, 0xec8f, 0x7ed0, 0x391, 0x74cf, 0x3acb, 0x0, 0x0);
        gbc.writeMem(0xeac2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xec8f);
        EXPECT(gbc.pc(), 0x3acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac2), 0xe9);
        // E9 0219
        gbc.setState(0x3aac, 0x350f, 0x4160, 0x25b1, 0x3129, 0x1419, 0x0, 0x1);
        gbc.writeMem(0x3aac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x350f);
        EXPECT(gbc.pc(), 0x1419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 021A
        gbc.setState(0x5d2c, 0x6ab6, 0xc8f0, 0x955e, 0x99c4, 0xe064, 0x1, 0x1);
        gbc.writeMem(0x5d2c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6ab6);
        EXPECT(gbc.pc(), 0xe064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 021B
        gbc.setState(0x58e, 0x2fe1, 0xc00, 0xf210, 0xa0fb, 0xde3, 0x0, 0x1);
        gbc.writeMem(0x58e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2fe1);
        EXPECT(gbc.pc(), 0xde3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 021C
        gbc.setState(0x66a, 0x925b, 0x5790, 0x1ace, 0x44c1, 0x46d1, 0x1, 0x1);
        gbc.writeMem(0x66a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x925b);
        EXPECT(gbc.pc(), 0x46d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 021D
        gbc.setState(0x1a7e, 0xd166, 0x7840, 0xc8ee, 0x1793, 0x9a92, 0x0, 0x0);
        gbc.writeMem(0x1a7e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd166);
        EXPECT(gbc.pc(), 0x9a92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 021E
        gbc.setState(0x54f6, 0xc4d8, 0x8e0, 0x16e, 0x1c16, 0x34d2, 0x0, 0x1);
        gbc.writeMem(0x54f6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc4d8);
        EXPECT(gbc.pc(), 0x34d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 021F
        gbc.setState(0xb72a, 0x8a08, 0x3900, 0x6a3, 0x1042, 0xd3a1, 0x1, 0x1);
        gbc.writeMem(0xb72a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8a08);
        EXPECT(gbc.pc(), 0xd3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72a), 0xe9);
        // E9 0220
        gbc.setState(0x4713, 0xbf8c, 0xc2f0, 0x9fe5, 0x64e3, 0x57fa, 0x1, 0x1);
        gbc.writeMem(0x4713, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbf8c);
        EXPECT(gbc.pc(), 0x57fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0221
        gbc.setState(0x168e, 0x3e40, 0x4ef0, 0x4b3c, 0x5374, 0x1ca7, 0x0, 0x0);
        gbc.writeMem(0x168e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3e40);
        EXPECT(gbc.pc(), 0x1ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0222
        gbc.setState(0xa240, 0x80e, 0x6d40, 0xaf49, 0x595, 0xbdd7, 0x0, 0x1);
        gbc.writeMem(0xa240, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x80e);
        EXPECT(gbc.pc(), 0xbdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa240), 0xe9);
        // E9 0223
        gbc.setState(0x827d, 0x600, 0x2380, 0xcee1, 0xd684, 0x4b30, 0x0, 0x0);
        gbc.writeMem(0x827d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x600);
        EXPECT(gbc.pc(), 0x4b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x827d), 0xe9);
        // E9 0224
        gbc.setState(0x2ecb, 0x23ea, 0xc240, 0x84cd, 0x8fc6, 0xb197, 0x0, 0x1);
        gbc.writeMem(0x2ecb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x23ea);
        EXPECT(gbc.pc(), 0xb197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0225
        gbc.setState(0x8225, 0x8c3, 0x6ff0, 0x66f6, 0xa0fd, 0x53fd, 0x1, 0x0);
        gbc.writeMem(0x8225, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8c3);
        EXPECT(gbc.pc(), 0x53fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8225), 0xe9);
        // E9 0226
        gbc.setState(0xe11, 0x6af3, 0x2f40, 0x25ef, 0x2419, 0x3402, 0x1, 0x0);
        gbc.writeMem(0xe11, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6af3);
        EXPECT(gbc.pc(), 0x3402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0227
        gbc.setState(0xd369, 0x9bca, 0xa440, 0x3720, 0x6c6a, 0x6dce, 0x1, 0x0);
        gbc.writeMem(0xd369, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9bca);
        EXPECT(gbc.pc(), 0x6dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd369), 0xe9);
        // E9 0228
        gbc.setState(0xca62, 0x3103, 0xdd70, 0x4fdd, 0x64e5, 0xf5a9, 0x1, 0x1);
        gbc.writeMem(0xca62, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3103);
        EXPECT(gbc.pc(), 0xf5a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca62), 0xe9);
        // E9 0229
        gbc.setState(0xdb5c, 0x116c, 0x5890, 0x2b35, 0x3a5b, 0xb7b8, 0x1, 0x0);
        gbc.writeMem(0xdb5c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x116c);
        EXPECT(gbc.pc(), 0xb7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5c), 0xe9);
        // E9 022A
        gbc.setState(0x4593, 0x28d4, 0x1ce0, 0xa41b, 0x6f72, 0xdc1b, 0x0, 0x0);
        gbc.writeMem(0x4593, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x28d4);
        EXPECT(gbc.pc(), 0xdc1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 022B
        gbc.setState(0xc867, 0xaf80, 0x97e0, 0xd8b, 0x2ece, 0xcd7, 0x0, 0x0);
        gbc.writeMem(0xc867, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xaf80);
        EXPECT(gbc.pc(), 0xcd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc867), 0xe9);
        // E9 022C
        gbc.setState(0xbd95, 0x4bb, 0xb0b0, 0x48cf, 0x48a, 0xfcea, 0x1, 0x1);
        gbc.writeMem(0xbd95, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4bb);
        EXPECT(gbc.pc(), 0xfcea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd95), 0xe9);
        // E9 022D
        gbc.setState(0x6a7e, 0xae38, 0x8e90, 0xafd6, 0x38e7, 0x4305, 0x0, 0x1);
        gbc.writeMem(0x6a7e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xae38);
        EXPECT(gbc.pc(), 0x4305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 022E
        gbc.setState(0x3a44, 0x1e27, 0x6ff0, 0x401a, 0xee15, 0x67cd, 0x1, 0x1);
        gbc.writeMem(0x3a44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1e27);
        EXPECT(gbc.pc(), 0x67cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 022F
        gbc.setState(0xebf2, 0x84d2, 0xd240, 0x13b3, 0x6bdf, 0x6cc3, 0x1, 0x1);
        gbc.writeMem(0xebf2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x84d2);
        EXPECT(gbc.pc(), 0x6cc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf2), 0xe9);
        // E9 0230
        gbc.setState(0xab3d, 0x200c, 0xaff0, 0x807e, 0x475f, 0x54d8, 0x0, 0x0);
        gbc.writeMem(0xab3d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x200c);
        EXPECT(gbc.pc(), 0x54d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab3d), 0xe9);
        // E9 0231
        gbc.setState(0xe385, 0xa95, 0x1540, 0x55bc, 0x48b3, 0x646f, 0x1, 0x1);
        gbc.writeMem(0xe385, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa95);
        EXPECT(gbc.pc(), 0x646f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe385), 0xe9);
        // E9 0232
        gbc.setState(0x787, 0x4005, 0x6bd0, 0x5f65, 0xdec, 0x2ea4, 0x1, 0x0);
        gbc.writeMem(0x787, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4005);
        EXPECT(gbc.pc(), 0x2ea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0233
        gbc.setState(0xae19, 0xa3d8, 0xc1a0, 0xdfde, 0xc1d5, 0xa033, 0x0, 0x0);
        gbc.writeMem(0xae19, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa3d8);
        EXPECT(gbc.pc(), 0xa033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae19), 0xe9);
        // E9 0234
        gbc.setState(0x3d00, 0xfdd9, 0x43b0, 0xceea, 0x4ffe, 0x791c, 0x1, 0x1);
        gbc.writeMem(0x3d00, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xfdd9);
        EXPECT(gbc.pc(), 0x791c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0235
        gbc.setState(0xe2b9, 0x8372, 0x21d0, 0x4264, 0x25de, 0x6223, 0x0, 0x0);
        gbc.writeMem(0xe2b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8372);
        EXPECT(gbc.pc(), 0x6223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b9), 0xe9);
        // E9 0236
        gbc.setState(0x9d20, 0x9b16, 0x1ea0, 0x4684, 0x1866, 0xe503, 0x0, 0x0);
        gbc.writeMem(0x9d20, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9b16);
        EXPECT(gbc.pc(), 0xe503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d20), 0xe9);
        // E9 0237
        gbc.setState(0x2d6b, 0xaa90, 0x620, 0x4dfb, 0x75c5, 0xac42, 0x1, 0x0);
        gbc.writeMem(0x2d6b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaa90);
        EXPECT(gbc.pc(), 0xac42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0238
        gbc.setState(0x3dc5, 0x19cc, 0x9d70, 0x251, 0x6fad, 0xb549, 0x0, 0x0);
        gbc.writeMem(0x3dc5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x19cc);
        EXPECT(gbc.pc(), 0xb549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0239
        gbc.setState(0x295c, 0x6566, 0x7d30, 0xb41, 0x1e23, 0x4f7e, 0x1, 0x0);
        gbc.writeMem(0x295c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0x4f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 023A
        gbc.setState(0x6b20, 0x4fff, 0xa60, 0x5346, 0x3cf7, 0xc5ae, 0x1, 0x0);
        gbc.writeMem(0x6b20, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4fff);
        EXPECT(gbc.pc(), 0xc5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 023B
        gbc.setState(0x33b9, 0xfcd0, 0xe540, 0xed2e, 0x897, 0x7a40, 0x0, 0x1);
        gbc.writeMem(0x33b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfcd0);
        EXPECT(gbc.pc(), 0x7a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 023C
        gbc.setState(0x262a, 0xfa76, 0xc360, 0x7d84, 0xc8d1, 0xb106, 0x1, 0x0);
        gbc.writeMem(0x262a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfa76);
        EXPECT(gbc.pc(), 0xb106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 023D
        gbc.setState(0x4669, 0x224, 0xe290, 0xb380, 0xdaa8, 0xb71e, 0x0, 0x1);
        gbc.writeMem(0x4669, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x224);
        EXPECT(gbc.pc(), 0xb71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 023E
        gbc.setState(0x6b5b, 0x4c11, 0xb4b0, 0xd036, 0x12d6, 0x3526, 0x1, 0x0);
        gbc.writeMem(0x6b5b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4c11);
        EXPECT(gbc.pc(), 0x3526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0240
        gbc.setState(0x91b, 0xad0c, 0x4d0, 0x434a, 0x97f, 0xa80f, 0x1, 0x1);
        gbc.writeMem(0x91b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xad0c);
        EXPECT(gbc.pc(), 0xa80f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0241
        gbc.setState(0xb050, 0xe32f, 0x83b0, 0xe12c, 0x5ae2, 0x2cd5, 0x1, 0x0);
        gbc.writeMem(0xb050, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe32f);
        EXPECT(gbc.pc(), 0x2cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb050), 0xe9);
        // E9 0242
        gbc.setState(0x33d, 0x9742, 0xa0, 0xcc6e, 0x8783, 0x4e8d, 0x1, 0x1);
        gbc.writeMem(0x33d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9742);
        EXPECT(gbc.pc(), 0x4e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0243
        gbc.setState(0x4356, 0x196d, 0x1f50, 0x5243, 0x49ca, 0x52a3, 0x0, 0x0);
        gbc.writeMem(0x4356, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x196d);
        EXPECT(gbc.pc(), 0x52a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0244
        gbc.setState(0x3100, 0xe029, 0xbdc0, 0x1531, 0xc104, 0xf211, 0x0, 0x0);
        gbc.writeMem(0x3100, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe029);
        EXPECT(gbc.pc(), 0xf211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0245
        gbc.setState(0x87c5, 0x97e1, 0x570, 0xb24f, 0x7bc9, 0x215, 0x1, 0x1);
        gbc.writeMem(0x87c5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x97e1);
        EXPECT(gbc.pc(), 0x215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c5), 0xe9);
        // E9 0246
        gbc.setState(0x76b, 0x6678, 0x3440, 0xc800, 0x516c, 0xe55, 0x0, 0x0);
        gbc.writeMem(0x76b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6678);
        EXPECT(gbc.pc(), 0xe55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0247
        gbc.setState(0x2a60, 0x2a30, 0xf200, 0xf74d, 0x2c8b, 0x2c97, 0x1, 0x0);
        gbc.writeMem(0x2a60, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2a30);
        EXPECT(gbc.pc(), 0x2c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0248
        gbc.setState(0x1ed6, 0xf156, 0x8d60, 0x1137, 0xe361, 0x44d4, 0x0, 0x0);
        gbc.writeMem(0x1ed6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf156);
        EXPECT(gbc.pc(), 0x44d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0249
        gbc.setState(0x7d60, 0xed0f, 0x8420, 0xe1b8, 0x3c37, 0x14ff, 0x0, 0x0);
        gbc.writeMem(0x7d60, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xed0f);
        EXPECT(gbc.pc(), 0x14ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 024A
        gbc.setState(0x7bf2, 0xa999, 0xb0c0, 0x4b8, 0x2b92, 0x2579, 0x1, 0x0);
        gbc.writeMem(0x7bf2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa999);
        EXPECT(gbc.pc(), 0x2579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 024B
        gbc.setState(0x1e2e, 0xa7d4, 0x9620, 0x1d63, 0x88a8, 0xba52, 0x1, 0x1);
        gbc.writeMem(0x1e2e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa7d4);
        EXPECT(gbc.pc(), 0xba52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 024C
        gbc.setState(0xd197, 0x51a8, 0x9550, 0x2950, 0xeeb, 0x98ce, 0x1, 0x0);
        gbc.writeMem(0xd197, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x51a8);
        EXPECT(gbc.pc(), 0x98ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd197), 0xe9);
        // E9 024D
        gbc.setState(0x6d0d, 0x2b59, 0xa5e0, 0x546b, 0x2f29, 0xdc84, 0x0, 0x0);
        gbc.writeMem(0x6d0d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2b59);
        EXPECT(gbc.pc(), 0xdc84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 024F
        gbc.setState(0x4a44, 0x6a0e, 0x3180, 0x8dd9, 0x8e68, 0x79a8, 0x1, 0x1);
        gbc.writeMem(0x4a44, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6a0e);
        EXPECT(gbc.pc(), 0x79a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0250
        gbc.setState(0xa370, 0xab3, 0x5400, 0xa443, 0x4890, 0xd6c5, 0x1, 0x1);
        gbc.writeMem(0xa370, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xab3);
        EXPECT(gbc.pc(), 0xd6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa370), 0xe9);
        // E9 0251
        gbc.setState(0xa52c, 0xdaf0, 0xa470, 0x6819, 0xb802, 0x5de5, 0x1, 0x0);
        gbc.writeMem(0xa52c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdaf0);
        EXPECT(gbc.pc(), 0x5de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52c), 0xe9);
        // E9 0252
        gbc.setState(0x74da, 0x3790, 0xc140, 0xea0f, 0xacc1, 0x55fa, 0x1, 0x1);
        gbc.writeMem(0x74da, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3790);
        EXPECT(gbc.pc(), 0x55fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0253
        gbc.setState(0x62f4, 0x111f, 0x2d50, 0xe8e8, 0xc2f6, 0xc4d3, 0x0, 0x0);
        gbc.writeMem(0x62f4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x111f);
        EXPECT(gbc.pc(), 0xc4d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0254
        gbc.setState(0x2789, 0xd2e, 0x40b0, 0xd5bb, 0xa41b, 0xabe, 0x0, 0x1);
        gbc.writeMem(0x2789, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd2e);
        EXPECT(gbc.pc(), 0xabe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0255
        gbc.setState(0xa7b1, 0x10c6, 0xf4f0, 0xd45f, 0xc9d9, 0x940b, 0x0, 0x1);
        gbc.writeMem(0xa7b1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x10c6);
        EXPECT(gbc.pc(), 0x940b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7b1), 0xe9);
        // E9 0256
        gbc.setState(0x47cd, 0x1c63, 0xe080, 0x892d, 0x6534, 0x9230, 0x1, 0x0);
        gbc.writeMem(0x47cd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1c63);
        EXPECT(gbc.pc(), 0x9230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0257
        gbc.setState(0x271a, 0x8375, 0x61f0, 0xd3dc, 0x94d2, 0x8a4c, 0x1, 0x0);
        gbc.writeMem(0x271a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8375);
        EXPECT(gbc.pc(), 0x8a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0259
        gbc.setState(0xe876, 0xccc7, 0xd280, 0xd3bb, 0x16ec, 0x5bbe, 0x1, 0x0);
        gbc.writeMem(0xe876, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xccc7);
        EXPECT(gbc.pc(), 0x5bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe876), 0xe9);
        // E9 025A
        gbc.setState(0x54e, 0xbdb, 0xb9a0, 0x7d78, 0x58be, 0x7377, 0x0, 0x1);
        gbc.writeMem(0x54e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbdb);
        EXPECT(gbc.pc(), 0x7377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 025B
        gbc.setState(0x87d6, 0x6b89, 0xc980, 0x93fb, 0xccbf, 0x4f47, 0x1, 0x1);
        gbc.writeMem(0x87d6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6b89);
        EXPECT(gbc.pc(), 0x4f47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d6), 0xe9);
        // E9 025C
        gbc.setState(0xe7ff, 0xfe4d, 0xa930, 0x4cf0, 0x41d0, 0xf35e, 0x0, 0x0);
        gbc.writeMem(0xe7ff, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfe4d);
        EXPECT(gbc.pc(), 0xf35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ff), 0xe9);
        // E9 025D
        gbc.setState(0x97d1, 0x9b10, 0xfa70, 0xce56, 0xd6a1, 0x8444, 0x1, 0x0);
        gbc.writeMem(0x97d1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9b10);
        EXPECT(gbc.pc(), 0x8444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d1), 0xe9);
        // E9 025E
        gbc.setState(0x999a, 0x9bea, 0x8460, 0x1bc, 0xfb99, 0x123b, 0x1, 0x0);
        gbc.writeMem(0x999a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x9bea);
        EXPECT(gbc.pc(), 0x123b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999a), 0xe9);
        // E9 025F
        gbc.setState(0x9798, 0xea35, 0x2b70, 0xfdd0, 0x2ea6, 0xe441, 0x1, 0x0);
        gbc.writeMem(0x9798, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xea35);
        EXPECT(gbc.pc(), 0xe441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9798), 0xe9);
        // E9 0260
        gbc.setState(0x50da, 0x4d49, 0x9780, 0x8fdf, 0xdd19, 0xb0d3, 0x1, 0x0);
        gbc.writeMem(0x50da, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4d49);
        EXPECT(gbc.pc(), 0xb0d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0261
        gbc.setState(0x4031, 0x5aa2, 0x5960, 0xc9b, 0x3729, 0xe8d2, 0x0, 0x1);
        gbc.writeMem(0x4031, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5aa2);
        EXPECT(gbc.pc(), 0xe8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0262
        gbc.setState(0xaa5c, 0x73b7, 0x4690, 0xc297, 0x2e52, 0xe7ee, 0x1, 0x0);
        gbc.writeMem(0xaa5c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x73b7);
        EXPECT(gbc.pc(), 0xe7ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa5c), 0xe9);
        // E9 0263
        gbc.setState(0x75df, 0x204a, 0xa320, 0x9baf, 0xdb6e, 0x3100, 0x0, 0x1);
        gbc.writeMem(0x75df, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x204a);
        EXPECT(gbc.pc(), 0x3100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0264
        gbc.setState(0x1b7, 0xacb3, 0x76b0, 0x19eb, 0xa8e7, 0x34d1, 0x0, 0x0);
        gbc.writeMem(0x1b7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xacb3);
        EXPECT(gbc.pc(), 0x34d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0265
        gbc.setState(0xbd31, 0x360a, 0xa340, 0xd031, 0x865, 0x8aa9, 0x1, 0x1);
        gbc.writeMem(0xbd31, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x360a);
        EXPECT(gbc.pc(), 0x8aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd31), 0xe9);
        // E9 0266
        gbc.setState(0x3813, 0x5c17, 0xc160, 0xbeff, 0xff20, 0xc006, 0x0, 0x1);
        gbc.writeMem(0x3813, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5c17);
        EXPECT(gbc.pc(), 0xc006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0267
        gbc.setState(0x5cb3, 0xc7ad, 0x3130, 0xd85c, 0x73b0, 0x7e46, 0x0, 0x1);
        gbc.writeMem(0x5cb3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc7ad);
        EXPECT(gbc.pc(), 0x7e46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0268
        gbc.setState(0x6531, 0x5f7b, 0x8fb0, 0xbde5, 0xc0b9, 0x6937, 0x1, 0x0);
        gbc.writeMem(0x6531, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5f7b);
        EXPECT(gbc.pc(), 0x6937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0269
        gbc.setState(0x7568, 0x11fb, 0xafc0, 0xeeef, 0x6440, 0xce41, 0x1, 0x1);
        gbc.writeMem(0x7568, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x11fb);
        EXPECT(gbc.pc(), 0xce41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 026A
        gbc.setState(0x72f0, 0x9a23, 0xcad0, 0xd3c4, 0x284c, 0x31a6, 0x1, 0x1);
        gbc.writeMem(0x72f0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9a23);
        EXPECT(gbc.pc(), 0x31a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 026B
        gbc.setState(0xc824, 0x9681, 0x4d40, 0x2c44, 0x7632, 0xab34, 0x0, 0x1);
        gbc.writeMem(0xc824, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9681);
        EXPECT(gbc.pc(), 0xab34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc824), 0xe9);
        // E9 026D
        gbc.setState(0xaf12, 0xb567, 0x1840, 0xa396, 0xd4d0, 0x75ae, 0x0, 0x0);
        gbc.writeMem(0xaf12, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb567);
        EXPECT(gbc.pc(), 0x75ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf12), 0xe9);
        // E9 026E
        gbc.setState(0xb1b0, 0x8289, 0x1990, 0x4751, 0x1b89, 0x95a4, 0x1, 0x0);
        gbc.writeMem(0xb1b0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8289);
        EXPECT(gbc.pc(), 0x95a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b0), 0xe9);
        // E9 026F
        gbc.setState(0x1b0d, 0x586e, 0x1b30, 0xae90, 0x84d9, 0x7bd1, 0x0, 0x0);
        gbc.writeMem(0x1b0d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x586e);
        EXPECT(gbc.pc(), 0x7bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0270
        gbc.setState(0x9552, 0xb1a2, 0xf120, 0x7948, 0xaf9c, 0x9110, 0x0, 0x1);
        gbc.writeMem(0x9552, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb1a2);
        EXPECT(gbc.pc(), 0x9110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9552), 0xe9);
        // E9 0271
        gbc.setState(0x9129, 0x8dbd, 0x3240, 0xd416, 0x14a5, 0x7e35, 0x0, 0x1);
        gbc.writeMem(0x9129, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8dbd);
        EXPECT(gbc.pc(), 0x7e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9129), 0xe9);
        // E9 0272
        gbc.setState(0x419f, 0x4703, 0xf9b0, 0x5083, 0x9225, 0xe797, 0x1, 0x1);
        gbc.writeMem(0x419f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4703);
        EXPECT(gbc.pc(), 0xe797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0274
        gbc.setState(0x10e3, 0x7fa1, 0xb330, 0x24d, 0x97a, 0x757f, 0x1, 0x0);
        gbc.writeMem(0x10e3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7fa1);
        EXPECT(gbc.pc(), 0x757f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0275
        gbc.setState(0xa25d, 0x5ea, 0xbb30, 0xa992, 0x938f, 0x2321, 0x1, 0x1);
        gbc.writeMem(0xa25d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5ea);
        EXPECT(gbc.pc(), 0x2321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25d), 0xe9);
        // E9 0276
        gbc.setState(0xa689, 0x236b, 0x9940, 0x6b79, 0x51cc, 0x9189, 0x0, 0x0);
        gbc.writeMem(0xa689, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x236b);
        EXPECT(gbc.pc(), 0x9189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa689), 0xe9);
        // E9 0277
        gbc.setState(0x7aa, 0xef03, 0xb5f0, 0x5168, 0xe5a8, 0xdaf0, 0x0, 0x1);
        gbc.writeMem(0x7aa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xef03);
        EXPECT(gbc.pc(), 0xdaf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0278
        gbc.setState(0x7b1e, 0x6b6c, 0x8540, 0x43f0, 0xbfbd, 0x955, 0x1, 0x1);
        gbc.writeMem(0x7b1e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6b6c);
        EXPECT(gbc.pc(), 0x955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0279
        gbc.setState(0x776c, 0xe2a8, 0xb350, 0x2a89, 0xe8d5, 0xba3f, 0x0, 0x0);
        gbc.writeMem(0x776c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe2a8);
        EXPECT(gbc.pc(), 0xba3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 027A
        gbc.setState(0xedd2, 0xebd6, 0xf300, 0x39a1, 0xaf00, 0x2b1c, 0x1, 0x1);
        gbc.writeMem(0xedd2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xebd6);
        EXPECT(gbc.pc(), 0x2b1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedd2), 0xe9);
        // E9 027B
        gbc.setState(0xa537, 0x5a7c, 0x9ff0, 0x9904, 0x8d00, 0xfb99, 0x0, 0x1);
        gbc.writeMem(0xa537, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5a7c);
        EXPECT(gbc.pc(), 0xfb99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa537), 0xe9);
        // E9 027C
        gbc.setState(0xa03f, 0xfc3d, 0x6e10, 0x92ed, 0xd76a, 0x5374, 0x1, 0x0);
        gbc.writeMem(0xa03f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfc3d);
        EXPECT(gbc.pc(), 0x5374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03f), 0xe9);
        // E9 027D
        gbc.setState(0xa247, 0x48d7, 0x77f0, 0x7e1d, 0x3fa5, 0xf5ec, 0x1, 0x1);
        gbc.writeMem(0xa247, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x48d7);
        EXPECT(gbc.pc(), 0xf5ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa247), 0xe9);
        // E9 027E
        gbc.setState(0x7d14, 0x7ee5, 0xb220, 0x9cb6, 0xd293, 0x251, 0x0, 0x0);
        gbc.writeMem(0x7d14, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7ee5);
        EXPECT(gbc.pc(), 0x251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 027F
        gbc.setState(0x7651, 0x79f2, 0x73e0, 0xb8f3, 0xda92, 0x3646, 0x0, 0x0);
        gbc.writeMem(0x7651, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x79f2);
        EXPECT(gbc.pc(), 0x3646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0281
        gbc.setState(0x5518, 0x233c, 0x78f0, 0x8353, 0xb05d, 0xc83b, 0x1, 0x0);
        gbc.writeMem(0x5518, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x233c);
        EXPECT(gbc.pc(), 0xc83b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0282
        gbc.setState(0xcbb4, 0x7a7e, 0xb920, 0x23e0, 0xd0aa, 0x7092, 0x1, 0x1);
        gbc.writeMem(0xcbb4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7a7e);
        EXPECT(gbc.pc(), 0x7092);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb4), 0xe9);
        // E9 0283
        gbc.setState(0xa210, 0x2b10, 0xcdc0, 0x8ac1, 0x5165, 0x9cf4, 0x0, 0x0);
        gbc.writeMem(0xa210, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2b10);
        EXPECT(gbc.pc(), 0x9cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa210), 0xe9);
        // E9 0284
        gbc.setState(0x3ad9, 0x21f, 0x4130, 0xbaa2, 0x2271, 0xc21, 0x0, 0x0);
        gbc.writeMem(0x3ad9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x21f);
        EXPECT(gbc.pc(), 0xc21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0285
        gbc.setState(0x3175, 0x489f, 0xc1e0, 0x48e0, 0x78a5, 0x177a, 0x1, 0x0);
        gbc.writeMem(0x3175, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x489f);
        EXPECT(gbc.pc(), 0x177a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0286
        gbc.setState(0x1ee9, 0x199b, 0x3f40, 0x8430, 0x53e, 0xbc1a, 0x0, 0x0);
        gbc.writeMem(0x1ee9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x199b);
        EXPECT(gbc.pc(), 0xbc1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0287
        gbc.setState(0x980a, 0x8403, 0x3210, 0xe044, 0x3aaf, 0x9147, 0x0, 0x1);
        gbc.writeMem(0x980a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8403);
        EXPECT(gbc.pc(), 0x9147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x980a), 0xe9);
        // E9 0288
        gbc.setState(0x56b9, 0x9fca, 0x61b0, 0xe058, 0x6f8b, 0xad16, 0x0, 0x1);
        gbc.writeMem(0x56b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9fca);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0289
        gbc.setState(0xde65, 0xc6c8, 0xbc40, 0xa9d4, 0x34b4, 0xc3dd, 0x0, 0x0);
        gbc.writeMem(0xde65, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc6c8);
        EXPECT(gbc.pc(), 0xc3dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde65), 0xe9);
        // E9 028A
        gbc.setState(0x891c, 0xc8e0, 0xa200, 0xea24, 0x8ec8, 0x3aee, 0x1, 0x0);
        gbc.writeMem(0x891c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc8e0);
        EXPECT(gbc.pc(), 0x3aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891c), 0xe9);
        // E9 028B
        gbc.setState(0xbd7, 0xe767, 0x86a0, 0xfacd, 0x7412, 0x6428, 0x0, 0x1);
        gbc.writeMem(0xbd7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe767);
        EXPECT(gbc.pc(), 0x6428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 028C
        gbc.setState(0xce, 0xe169, 0x68d0, 0x86b4, 0x95f9, 0x6724, 0x0, 0x0);
        gbc.writeMem(0xce, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe169);
        EXPECT(gbc.pc(), 0x6724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 028D
        gbc.setState(0x5b31, 0x993b, 0x1370, 0xf76f, 0xa8bc, 0xa6f2, 0x0, 0x1);
        gbc.writeMem(0x5b31, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x993b);
        EXPECT(gbc.pc(), 0xa6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 028E
        gbc.setState(0xd688, 0x4285, 0xe730, 0xd500, 0x65c0, 0x5a0e, 0x0, 0x0);
        gbc.writeMem(0xd688, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4285);
        EXPECT(gbc.pc(), 0x5a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd688), 0xe9);
        // E9 028F
        gbc.setState(0x6120, 0x688e, 0x4c90, 0x3817, 0xc332, 0xda13, 0x0, 0x0);
        gbc.writeMem(0x6120, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x688e);
        EXPECT(gbc.pc(), 0xda13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0290
        gbc.setState(0xd6de, 0x7ee5, 0xd270, 0xd15d, 0x9d51, 0xb8b8, 0x1, 0x1);
        gbc.writeMem(0xd6de, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7ee5);
        EXPECT(gbc.pc(), 0xb8b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6de), 0xe9);
        // E9 0291
        gbc.setState(0x5951, 0x53a2, 0x6ef0, 0xe53e, 0xd271, 0xd704, 0x1, 0x0);
        gbc.writeMem(0x5951, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x53a2);
        EXPECT(gbc.pc(), 0xd704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0292
        gbc.setState(0x4bf, 0x2ed8, 0x3db0, 0xb875, 0x6c1, 0xfa8e, 0x1, 0x1);
        gbc.writeMem(0x4bf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2ed8);
        EXPECT(gbc.pc(), 0xfa8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0293
        gbc.setState(0x9277, 0xe340, 0xb50, 0xf086, 0x3bc8, 0x82b, 0x0, 0x1);
        gbc.writeMem(0x9277, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe340);
        EXPECT(gbc.pc(), 0x82b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9277), 0xe9);
        // E9 0294
        gbc.setState(0x622b, 0xcd09, 0x1510, 0xd, 0xa6d3, 0x7ead, 0x0, 0x1);
        gbc.writeMem(0x622b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xcd09);
        EXPECT(gbc.pc(), 0x7ead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0295
        gbc.setState(0x355d, 0x7410, 0xb800, 0xd146, 0xbc6, 0x264, 0x1, 0x1);
        gbc.writeMem(0x355d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7410);
        EXPECT(gbc.pc(), 0x264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0296
        gbc.setState(0xdaf, 0xaa31, 0x66f0, 0xf91b, 0x42b6, 0x5853, 0x0, 0x0);
        gbc.writeMem(0xdaf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xaa31);
        EXPECT(gbc.pc(), 0x5853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0297
        gbc.setState(0x3fdb, 0x9a70, 0x7290, 0xd9ed, 0x649c, 0x3725, 0x1, 0x0);
        gbc.writeMem(0x3fdb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0x3725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0298
        gbc.setState(0x403f, 0xaf50, 0x1d70, 0xe4cf, 0xf7cf, 0xe35, 0x0, 0x0);
        gbc.writeMem(0x403f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaf50);
        EXPECT(gbc.pc(), 0xe35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0299
        gbc.setState(0x9182, 0x7d94, 0x1f30, 0xd396, 0x9dbb, 0xe8cd, 0x1, 0x0);
        gbc.writeMem(0x9182, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7d94);
        EXPECT(gbc.pc(), 0xe8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9182), 0xe9);
        // E9 029A
        gbc.setState(0xcd37, 0xbf45, 0xdb0, 0x61b6, 0x5aa9, 0x6140, 0x0, 0x0);
        gbc.writeMem(0xcd37, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbf45);
        EXPECT(gbc.pc(), 0x6140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd37), 0xe9);
        // E9 029B
        gbc.setState(0x149d, 0x63f4, 0x4ee0, 0x12e9, 0xa0f8, 0xf8ac, 0x0, 0x0);
        gbc.writeMem(0x149d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x63f4);
        EXPECT(gbc.pc(), 0xf8ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 029C
        gbc.setState(0x4d3b, 0x8c74, 0xa4b0, 0xad2e, 0x5547, 0x7822, 0x0, 0x0);
        gbc.writeMem(0x4d3b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8c74);
        EXPECT(gbc.pc(), 0x7822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 029D
        gbc.setState(0x3ff, 0xe29f, 0xa010, 0x8a15, 0xeb2c, 0xcfa5, 0x1, 0x1);
        gbc.writeMem(0x3ff, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe29f);
        EXPECT(gbc.pc(), 0xcfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 029E
        gbc.setState(0xa5c6, 0xd2a, 0xc7e0, 0x2445, 0xf71e, 0x1891, 0x1, 0x0);
        gbc.writeMem(0xa5c6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd2a);
        EXPECT(gbc.pc(), 0x1891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5c6), 0xe9);
        // E9 029F
        gbc.setState(0x2e8a, 0xeebc, 0xca80, 0xf521, 0x74d3, 0x7364, 0x0, 0x1);
        gbc.writeMem(0x2e8a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xeebc);
        EXPECT(gbc.pc(), 0x7364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02A0
        gbc.setState(0x377b, 0xa107, 0xd850, 0x6f58, 0xbe33, 0x48e, 0x1, 0x1);
        gbc.writeMem(0x377b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa107);
        EXPECT(gbc.pc(), 0x48e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02A1
        gbc.setState(0x867b, 0xc248, 0x4750, 0xe1ec, 0x15a1, 0x8f97, 0x0, 0x1);
        gbc.writeMem(0x867b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc248);
        EXPECT(gbc.pc(), 0x8f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x867b), 0xe9);
        // E9 02A2
        gbc.setState(0xa4e7, 0x730a, 0x3880, 0x466f, 0xa5e6, 0x75cd, 0x0, 0x1);
        gbc.writeMem(0xa4e7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x730a);
        EXPECT(gbc.pc(), 0x75cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e7), 0xe9);
        // E9 02A3
        gbc.setState(0x2, 0xdec3, 0x38b0, 0x66e7, 0xffc4, 0x5961, 0x1, 0x0);
        gbc.writeMem(0x2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdec3);
        EXPECT(gbc.pc(), 0x5961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02A4
        gbc.setState(0xecfc, 0xeb56, 0xd400, 0x1753, 0x1740, 0x2ade, 0x1, 0x0);
        gbc.writeMem(0xecfc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xeb56);
        EXPECT(gbc.pc(), 0x2ade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfc), 0xe9);
        // E9 02A5
        gbc.setState(0x231a, 0x97ce, 0xe3b0, 0x62f4, 0x6417, 0xeeb9, 0x1, 0x1);
        gbc.writeMem(0x231a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x97ce);
        EXPECT(gbc.pc(), 0xeeb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02A6
        gbc.setState(0x2f0d, 0x51cd, 0x85b0, 0xb2a6, 0xa700, 0xed20, 0x0, 0x1);
        gbc.writeMem(0x2f0d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x51cd);
        EXPECT(gbc.pc(), 0xed20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02A7
        gbc.setState(0x69dc, 0x5b57, 0x9150, 0x801e, 0xca42, 0xd4c7, 0x0, 0x0);
        gbc.writeMem(0x69dc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5b57);
        EXPECT(gbc.pc(), 0xd4c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02A8
        gbc.setState(0x2da3, 0x6236, 0xabb0, 0xebb2, 0x741d, 0xfc84, 0x0, 0x0);
        gbc.writeMem(0x2da3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6236);
        EXPECT(gbc.pc(), 0xfc84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02A9
        gbc.setState(0x6f1b, 0x6ac7, 0x2960, 0x83e0, 0xa553, 0x9223, 0x0, 0x0);
        gbc.writeMem(0x6f1b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6ac7);
        EXPECT(gbc.pc(), 0x9223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02AA
        gbc.setState(0x3e26, 0xc5f8, 0x6280, 0xf9d3, 0x4b4a, 0xc2ba, 0x1, 0x1);
        gbc.writeMem(0x3e26, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc5f8);
        EXPECT(gbc.pc(), 0xc2ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02AB
        gbc.setState(0x8648, 0xf43f, 0x2660, 0xcbde, 0x2cb0, 0xc0af, 0x0, 0x1);
        gbc.writeMem(0x8648, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf43f);
        EXPECT(gbc.pc(), 0xc0af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8648), 0xe9);
        // E9 02AC
        gbc.setState(0xa060, 0x8812, 0x8b00, 0xd244, 0xd14b, 0xb926, 0x0, 0x1);
        gbc.writeMem(0xa060, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8812);
        EXPECT(gbc.pc(), 0xb926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa060), 0xe9);
        // E9 02AD
        gbc.setState(0xe223, 0x22fa, 0x10f0, 0xdca0, 0x9b1a, 0xa28a, 0x0, 0x0);
        gbc.writeMem(0xe223, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x22fa);
        EXPECT(gbc.pc(), 0xa28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe223), 0xe9);
        // E9 02AE
        gbc.setState(0x75eb, 0x2830, 0xd80, 0x9550, 0x8c8e, 0xcd2f, 0x0, 0x1);
        gbc.writeMem(0x75eb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2830);
        EXPECT(gbc.pc(), 0xcd2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02AF
        gbc.setState(0x2c1c, 0xf705, 0x2a30, 0x2b4f, 0x46ee, 0xb132, 0x0, 0x1);
        gbc.writeMem(0x2c1c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf705);
        EXPECT(gbc.pc(), 0xb132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02B0
        gbc.setState(0x3507, 0x1183, 0xc3d0, 0x80b4, 0xf390, 0xec94, 0x1, 0x1);
        gbc.writeMem(0x3507, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1183);
        EXPECT(gbc.pc(), 0xec94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02B1
        gbc.setState(0xa1c1, 0x4a62, 0x1e00, 0xce5d, 0xe3dc, 0x7469, 0x0, 0x0);
        gbc.writeMem(0xa1c1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4a62);
        EXPECT(gbc.pc(), 0x7469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c1), 0xe9);
        // E9 02B2
        gbc.setState(0x658a, 0x50c4, 0x1a20, 0x64ae, 0xc399, 0xc67, 0x1, 0x0);
        gbc.writeMem(0x658a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x50c4);
        EXPECT(gbc.pc(), 0xc67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02B3
        gbc.setState(0x68a3, 0x5263, 0xb510, 0xf5b0, 0x127d, 0x1b56, 0x0, 0x1);
        gbc.writeMem(0x68a3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5263);
        EXPECT(gbc.pc(), 0x1b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02B4
        gbc.setState(0x2181, 0x4ec7, 0x1000, 0xe3e6, 0x7905, 0x58c5, 0x0, 0x1);
        gbc.writeMem(0x2181, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4ec7);
        EXPECT(gbc.pc(), 0x58c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02B5
        gbc.setState(0x14bf, 0x7558, 0xde0, 0xc5c9, 0xee1b, 0x4d28, 0x0, 0x0);
        gbc.writeMem(0x14bf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7558);
        EXPECT(gbc.pc(), 0x4d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02B6
        gbc.setState(0xdcf0, 0x416a, 0x6330, 0x32d, 0x87f5, 0x968e, 0x1, 0x1);
        gbc.writeMem(0xdcf0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x416a);
        EXPECT(gbc.pc(), 0x968e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf0), 0xe9);
        // E9 02B8
        gbc.setState(0x9f41, 0x6c24, 0x2d80, 0x76bc, 0xe361, 0xea52, 0x1, 0x1);
        gbc.writeMem(0x9f41, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6c24);
        EXPECT(gbc.pc(), 0xea52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f41), 0xe9);
        // E9 02B9
        gbc.setState(0xaf9a, 0x3936, 0xd650, 0xc11a, 0x81b5, 0xfd89, 0x1, 0x1);
        gbc.writeMem(0xaf9a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3936);
        EXPECT(gbc.pc(), 0xfd89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf9a), 0xe9);
        // E9 02BA
        gbc.setState(0x7bf1, 0xf2ba, 0xf4a0, 0x1373, 0x66fe, 0xfb0, 0x1, 0x0);
        gbc.writeMem(0x7bf1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf2ba);
        EXPECT(gbc.pc(), 0xfb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02BC
        gbc.setState(0x873b, 0x1a99, 0x2750, 0x171, 0x28cf, 0x99a1, 0x1, 0x1);
        gbc.writeMem(0x873b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1a99);
        EXPECT(gbc.pc(), 0x99a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873b), 0xe9);
        // E9 02BD
        gbc.setState(0xa0a1, 0xe541, 0x6a30, 0x86c0, 0xe23e, 0xfed8, 0x1, 0x0);
        gbc.writeMem(0xa0a1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe541);
        EXPECT(gbc.pc(), 0xfed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0a1), 0xe9);
        // E9 02BE
        gbc.setState(0x3be9, 0xf5f7, 0xc670, 0x2eb8, 0xe6a3, 0x1434, 0x0, 0x0);
        gbc.writeMem(0x3be9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf5f7);
        EXPECT(gbc.pc(), 0x1434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02BF
        gbc.setState(0x5d6e, 0xcb4e, 0x9e10, 0xda58, 0xef1b, 0x728f, 0x0, 0x1);
        gbc.writeMem(0x5d6e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcb4e);
        EXPECT(gbc.pc(), 0x728f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02C0
        gbc.setState(0xbaab, 0x4969, 0xa1a0, 0x9d0a, 0x41, 0xa23, 0x0, 0x0);
        gbc.writeMem(0xbaab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4969);
        EXPECT(gbc.pc(), 0xa23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaab), 0xe9);
        // E9 02C1
        gbc.setState(0xdbc8, 0xfd72, 0x1c60, 0x618b, 0x8435, 0x198b, 0x0, 0x1);
        gbc.writeMem(0xdbc8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xfd72);
        EXPECT(gbc.pc(), 0x198b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbc8), 0xe9);
        // E9 02C2
        gbc.setState(0x2bf5, 0xa3b3, 0x26e0, 0xdad7, 0xa8b9, 0x3ba3, 0x0, 0x1);
        gbc.writeMem(0x2bf5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa3b3);
        EXPECT(gbc.pc(), 0x3ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02C3
        gbc.setState(0x733e, 0xfad8, 0xf160, 0x5191, 0x123f, 0x1e5f, 0x1, 0x0);
        gbc.writeMem(0x733e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfad8);
        EXPECT(gbc.pc(), 0x1e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02C4
        gbc.setState(0xcab4, 0x36f6, 0xae20, 0x9fb, 0x5b26, 0x1a4e, 0x1, 0x0);
        gbc.writeMem(0xcab4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x36f6);
        EXPECT(gbc.pc(), 0x1a4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab4), 0xe9);
        // E9 02C5
        gbc.setState(0xb889, 0x31e6, 0xf730, 0x181e, 0xf5eb, 0x6568, 0x0, 0x0);
        gbc.writeMem(0xb889, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x31e6);
        EXPECT(gbc.pc(), 0x6568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb889), 0xe9);
        // E9 02C6
        gbc.setState(0xe801, 0xe2f4, 0x1500, 0x6bbd, 0x2bed, 0x7187, 0x1, 0x1);
        gbc.writeMem(0xe801, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe2f4);
        EXPECT(gbc.pc(), 0x7187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe801), 0xe9);
        // E9 02C7
        gbc.setState(0x9ede, 0xe6bc, 0x50d0, 0x6ca4, 0x240f, 0xa802, 0x0, 0x1);
        gbc.writeMem(0x9ede, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe6bc);
        EXPECT(gbc.pc(), 0xa802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ede), 0xe9);
        // E9 02C8
        gbc.setState(0xac3c, 0x90fd, 0x45b0, 0x905f, 0x5181, 0x87dd, 0x0, 0x0);
        gbc.writeMem(0xac3c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x90fd);
        EXPECT(gbc.pc(), 0x87dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3c), 0xe9);
        // E9 02CA
        gbc.setState(0xb659, 0xf758, 0xb750, 0x7c16, 0x79b7, 0x228e, 0x0, 0x1);
        gbc.writeMem(0xb659, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf758);
        EXPECT(gbc.pc(), 0x228e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb659), 0xe9);
        // E9 02CB
        gbc.setState(0x711c, 0xe72b, 0xb4c0, 0x5858, 0xf317, 0x8493, 0x0, 0x1);
        gbc.writeMem(0x711c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe72b);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02CC
        gbc.setState(0x4870, 0x8e97, 0x50f0, 0x74d7, 0xa46b, 0x51f9, 0x0, 0x1);
        gbc.writeMem(0x4870, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8e97);
        EXPECT(gbc.pc(), 0x51f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02CD
        gbc.setState(0x93b, 0x1ca2, 0x98a0, 0x3b5a, 0xf0f3, 0xae9d, 0x0, 0x0);
        gbc.writeMem(0x93b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1ca2);
        EXPECT(gbc.pc(), 0xae9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02CE
        gbc.setState(0xdb9e, 0x4919, 0x8b00, 0x7f86, 0xab35, 0xbedc, 0x0, 0x1);
        gbc.writeMem(0xdb9e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4919);
        EXPECT(gbc.pc(), 0xbedc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9e), 0xe9);
        // E9 02CF
        gbc.setState(0xec5b, 0xf1c2, 0xaa20, 0x6587, 0xea21, 0xb457, 0x1, 0x1);
        gbc.writeMem(0xec5b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf1c2);
        EXPECT(gbc.pc(), 0xb457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5b), 0xe9);
        // E9 02D0
        gbc.setState(0xc9cb, 0x6976, 0xfa30, 0x56e6, 0x14c1, 0x426c, 0x1, 0x0);
        gbc.writeMem(0xc9cb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6976);
        EXPECT(gbc.pc(), 0x426c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9cb), 0xe9);
        // E9 02D1
        gbc.setState(0xc033, 0x1396, 0x7ac0, 0xd487, 0x672d, 0x9d30, 0x0, 0x1);
        gbc.writeMem(0xc033, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1396);
        EXPECT(gbc.pc(), 0x9d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc033), 0xe9);
        // E9 02D2
        gbc.setState(0x37e5, 0xbd6c, 0x4c40, 0xbb68, 0xa7fd, 0x34ba, 0x0, 0x0);
        gbc.writeMem(0x37e5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbd6c);
        EXPECT(gbc.pc(), 0x34ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02D3
        gbc.setState(0x2e4f, 0x5867, 0x5510, 0x4ce0, 0x8933, 0xce8a, 0x1, 0x0);
        gbc.writeMem(0x2e4f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5867);
        EXPECT(gbc.pc(), 0xce8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02D4
        gbc.setState(0x4ff2, 0xbc25, 0x9340, 0xc2b4, 0xb65d, 0x2131, 0x1, 0x1);
        gbc.writeMem(0x4ff2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbc25);
        EXPECT(gbc.pc(), 0x2131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02D5
        gbc.setState(0x41e0, 0x321d, 0xc370, 0x49ee, 0xd88, 0x4649, 0x0, 0x1);
        gbc.writeMem(0x41e0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x321d);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02D6
        gbc.setState(0x9869, 0x26ad, 0xd580, 0x2750, 0x41eb, 0x7697, 0x0, 0x0);
        gbc.writeMem(0x9869, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x26ad);
        EXPECT(gbc.pc(), 0x7697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9869), 0xe9);
        // E9 02D7
        gbc.setState(0xcd55, 0x5a90, 0x6f40, 0xeea8, 0x4bda, 0xa790, 0x0, 0x0);
        gbc.writeMem(0xcd55, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5a90);
        EXPECT(gbc.pc(), 0xa790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd55), 0xe9);
        // E9 02D8
        gbc.setState(0x87ad, 0xa53c, 0xa820, 0x8dac, 0xf6ab, 0x9ca5, 0x0, 0x0);
        gbc.writeMem(0x87ad, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa53c);
        EXPECT(gbc.pc(), 0x9ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ad), 0xe9);
        // E9 02D9
        gbc.setState(0x7789, 0xadcb, 0x5c60, 0x9243, 0x1a8, 0xa14d, 0x0, 0x0);
        gbc.writeMem(0x7789, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xadcb);
        EXPECT(gbc.pc(), 0xa14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02DB
        gbc.setState(0x827c, 0xdcc2, 0xf7d0, 0x5050, 0x2321, 0x3d22, 0x0, 0x1);
        gbc.writeMem(0x827c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdcc2);
        EXPECT(gbc.pc(), 0x3d22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x827c), 0xe9);
        // E9 02DC
        gbc.setState(0x8908, 0xde50, 0x9190, 0xb8f9, 0xce1f, 0x6a57, 0x1, 0x0);
        gbc.writeMem(0x8908, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xde50);
        EXPECT(gbc.pc(), 0x6a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8908), 0xe9);
        // E9 02DD
        gbc.setState(0x2caa, 0x198d, 0x2ae0, 0x88b6, 0xafd1, 0x3e49, 0x1, 0x1);
        gbc.writeMem(0x2caa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x198d);
        EXPECT(gbc.pc(), 0x3e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02DE
        gbc.setState(0xbdf1, 0x72e9, 0xd2d0, 0x826b, 0x1c7d, 0xa9ee, 0x1, 0x1);
        gbc.writeMem(0xbdf1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x72e9);
        EXPECT(gbc.pc(), 0xa9ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf1), 0xe9);
        // E9 02DF
        gbc.setState(0xbcb4, 0xeeab, 0xaa50, 0x9850, 0x8fc5, 0xd388, 0x1, 0x0);
        gbc.writeMem(0xbcb4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xeeab);
        EXPECT(gbc.pc(), 0xd388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb4), 0xe9);
        // E9 02E0
        gbc.setState(0xd50d, 0x92f6, 0x7040, 0xc9aa, 0x1bf2, 0x59ee, 0x0, 0x1);
        gbc.writeMem(0xd50d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x92f6);
        EXPECT(gbc.pc(), 0x59ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd50d), 0xe9);
        // E9 02E1
        gbc.setState(0xdb25, 0x69e5, 0xdc30, 0xab94, 0x25a5, 0xbb21, 0x1, 0x0);
        gbc.writeMem(0xdb25, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x69e5);
        EXPECT(gbc.pc(), 0xbb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb25), 0xe9);
        // E9 02E2
        gbc.setState(0xa4c5, 0x5093, 0x65a0, 0x40cf, 0xe037, 0x8b17, 0x0, 0x0);
        gbc.writeMem(0xa4c5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5093);
        EXPECT(gbc.pc(), 0x8b17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c5), 0xe9);
        // E9 02E3
        gbc.setState(0x9097, 0xb092, 0xbfb0, 0x9c8b, 0x10b0, 0x76c3, 0x1, 0x0);
        gbc.writeMem(0x9097, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb092);
        EXPECT(gbc.pc(), 0x76c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9097), 0xe9);
        // E9 02E4
        gbc.setState(0xc851, 0xe93f, 0xdd50, 0x1948, 0xcd95, 0x3398, 0x0, 0x0);
        gbc.writeMem(0xc851, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe93f);
        EXPECT(gbc.pc(), 0x3398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc851), 0xe9);
        // E9 02E5
        gbc.setState(0xdc35, 0x4b32, 0x4b00, 0xb29b, 0x7131, 0x5c8c, 0x0, 0x1);
        gbc.writeMem(0xdc35, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4b32);
        EXPECT(gbc.pc(), 0x5c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc35), 0xe9);
        // E9 02E6
        gbc.setState(0xbb4, 0x6813, 0x4c80, 0x65f7, 0x4d9a, 0x68f7, 0x0, 0x1);
        gbc.writeMem(0xbb4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6813);
        EXPECT(gbc.pc(), 0x68f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02E8
        gbc.setState(0x6aff, 0x783e, 0x8740, 0x346c, 0x1a97, 0xac24, 0x0, 0x0);
        gbc.writeMem(0x6aff, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x783e);
        EXPECT(gbc.pc(), 0xac24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02E9
        gbc.setState(0xe588, 0x2f16, 0xeef0, 0x4f17, 0x5705, 0xd1e6, 0x1, 0x0);
        gbc.writeMem(0xe588, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2f16);
        EXPECT(gbc.pc(), 0xd1e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe588), 0xe9);
        // E9 02EA
        gbc.setState(0x5cf9, 0xfa7b, 0xbbb0, 0x451f, 0xb9c5, 0xbc6c, 0x1, 0x0);
        gbc.writeMem(0x5cf9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfa7b);
        EXPECT(gbc.pc(), 0xbc6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02EB
        gbc.setState(0x2964, 0xf496, 0xa5a0, 0x6bf2, 0x7b41, 0x96c8, 0x1, 0x1);
        gbc.writeMem(0x2964, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf496);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02EC
        gbc.setState(0x6619, 0x679e, 0x10f0, 0x8c13, 0xf66d, 0xa4fb, 0x0, 0x1);
        gbc.writeMem(0x6619, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x679e);
        EXPECT(gbc.pc(), 0xa4fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02ED
        gbc.setState(0x250, 0x2db0, 0x9150, 0xfb3b, 0x23b3, 0xcd30, 0x1, 0x1);
        gbc.writeMem(0x250, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2db0);
        EXPECT(gbc.pc(), 0xcd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02EE
        gbc.setState(0xd4d8, 0x515, 0xd440, 0x85cf, 0x1cc8, 0x659d, 0x0, 0x1);
        gbc.writeMem(0xd4d8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x515);
        EXPECT(gbc.pc(), 0x659d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d8), 0xe9);
        // E9 02F0
        gbc.setState(0x7a63, 0xe4c6, 0x77a0, 0x5ada, 0xc1a, 0xcf84, 0x0, 0x0);
        gbc.writeMem(0x7a63, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe4c6);
        EXPECT(gbc.pc(), 0xcf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02F1
        gbc.setState(0xb73a, 0xcf1c, 0x35d0, 0xe4cf, 0x4303, 0xbefd, 0x1, 0x1);
        gbc.writeMem(0xb73a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xcf1c);
        EXPECT(gbc.pc(), 0xbefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb73a), 0xe9);
        // E9 02F2
        gbc.setState(0xa34d, 0xe383, 0x3d20, 0xeac9, 0xdfd, 0x8502, 0x1, 0x0);
        gbc.writeMem(0xa34d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe383);
        EXPECT(gbc.pc(), 0x8502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34d), 0xe9);
        // E9 02F3
        gbc.setState(0x2699, 0x3ba3, 0x44f0, 0xcd94, 0xd23a, 0xdb9d, 0x0, 0x0);
        gbc.writeMem(0x2699, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3ba3);
        EXPECT(gbc.pc(), 0xdb9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02F4
        gbc.setState(0x91c7, 0x89e2, 0xa20, 0xf940, 0xd746, 0xda31, 0x1, 0x0);
        gbc.writeMem(0x91c7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x89e2);
        EXPECT(gbc.pc(), 0xda31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c7), 0xe9);
        // E9 02F5
        gbc.setState(0xdb62, 0xa48b, 0xbc00, 0xe28f, 0x9996, 0xc05e, 0x1, 0x0);
        gbc.writeMem(0xdb62, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa48b);
        EXPECT(gbc.pc(), 0xc05e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb62), 0xe9);
        // E9 02F6
        gbc.setState(0x5245, 0xee49, 0x8190, 0x91cc, 0xfe60, 0x92d, 0x0, 0x1);
        gbc.writeMem(0x5245, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xee49);
        EXPECT(gbc.pc(), 0x92d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 02F7
        gbc.setState(0xa1ad, 0x6831, 0x9950, 0xfaa4, 0x78be, 0xc85a, 0x0, 0x0);
        gbc.writeMem(0xa1ad, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6831);
        EXPECT(gbc.pc(), 0xc85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ad), 0xe9);
        // E9 02F8
        gbc.setState(0x3d18, 0x9039, 0xbb30, 0xa629, 0x8d36, 0x7991, 0x1, 0x0);
        gbc.writeMem(0x3d18, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9039);
        EXPECT(gbc.pc(), 0x7991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02FA
        gbc.setState(0xcd5, 0x549d, 0xd8c0, 0x59f2, 0xa9c5, 0xd9b7, 0x0, 0x1);
        gbc.writeMem(0xcd5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x549d);
        EXPECT(gbc.pc(), 0xd9b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02FB
        gbc.setState(0x286a, 0xcda3, 0x3520, 0x4e1e, 0xc505, 0x159d, 0x1, 0x1);
        gbc.writeMem(0x286a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xcda3);
        EXPECT(gbc.pc(), 0x159d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 02FC
        gbc.setState(0x5f93, 0x7cfd, 0xbb00, 0xcb34, 0x7c, 0x33a7, 0x1, 0x0);
        gbc.writeMem(0x5f93, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7cfd);
        EXPECT(gbc.pc(), 0x33a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 02FD
        gbc.setState(0xe4b9, 0x8220, 0x280, 0x96e5, 0xf94e, 0xd895, 0x1, 0x1);
        gbc.writeMem(0xe4b9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8220);
        EXPECT(gbc.pc(), 0xd895);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b9), 0xe9);
        // E9 02FE
        gbc.setState(0x5342, 0xd347, 0xe6b0, 0xdc77, 0xe6e3, 0x4740, 0x0, 0x0);
        gbc.writeMem(0x5342, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd347);
        EXPECT(gbc.pc(), 0x4740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 02FF
        gbc.setState(0xaae7, 0xa297, 0x1d0, 0xd278, 0xcec7, 0xae45, 0x0, 0x1);
        gbc.writeMem(0xaae7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa297);
        EXPECT(gbc.pc(), 0xae45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae7), 0xe9);
        // E9 0300
        gbc.setState(0xe72d, 0xa95b, 0xf5d0, 0xe89d, 0x3c97, 0x22f6, 0x1, 0x1);
        gbc.writeMem(0xe72d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa95b);
        EXPECT(gbc.pc(), 0x22f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe72d), 0xe9);
        // E9 0301
        gbc.setState(0x5af1, 0x1df5, 0xc400, 0xa6e3, 0xb697, 0xec36, 0x0, 0x0);
        gbc.writeMem(0x5af1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1df5);
        EXPECT(gbc.pc(), 0xec36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0302
        gbc.setState(0x4b83, 0xdc6f, 0xcd40, 0xb936, 0x4958, 0x7fc1, 0x0, 0x0);
        gbc.writeMem(0x4b83, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdc6f);
        EXPECT(gbc.pc(), 0x7fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0303
        gbc.setState(0x9b68, 0x5655, 0xc20, 0x4078, 0x1317, 0x8419, 0x1, 0x0);
        gbc.writeMem(0x9b68, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5655);
        EXPECT(gbc.pc(), 0x8419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b68), 0xe9);
        // E9 0304
        gbc.setState(0x7215, 0x79f5, 0xb9e0, 0xba85, 0xdb01, 0xbe97, 0x0, 0x1);
        gbc.writeMem(0x7215, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x79f5);
        EXPECT(gbc.pc(), 0xbe97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0305
        gbc.setState(0x5701, 0xef6d, 0x18f0, 0xc3e2, 0xefb8, 0x2bec, 0x1, 0x0);
        gbc.writeMem(0x5701, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xef6d);
        EXPECT(gbc.pc(), 0x2bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0306
        gbc.setState(0xae9, 0x68c7, 0xef0, 0x867f, 0xcf8d, 0x65e5, 0x1, 0x1);
        gbc.writeMem(0xae9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x68c7);
        EXPECT(gbc.pc(), 0x65e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0307
        gbc.setState(0x3c53, 0xa081, 0x87b0, 0xa718, 0xc242, 0xbda0, 0x0, 0x1);
        gbc.writeMem(0x3c53, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa081);
        EXPECT(gbc.pc(), 0xbda0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0308
        gbc.setState(0x2475, 0xe888, 0x78b0, 0x5a02, 0x9196, 0xf339, 0x0, 0x0);
        gbc.writeMem(0x2475, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe888);
        EXPECT(gbc.pc(), 0xf339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0309
        gbc.setState(0x433c, 0xb550, 0xbb40, 0x4b51, 0x476c, 0x7c9b, 0x0, 0x0);
        gbc.writeMem(0x433c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb550);
        EXPECT(gbc.pc(), 0x7c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 030A
        gbc.setState(0x46c5, 0xa652, 0xce10, 0xbdf0, 0xc8a7, 0x9e71, 0x1, 0x1);
        gbc.writeMem(0x46c5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa652);
        EXPECT(gbc.pc(), 0x9e71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 030B
        gbc.setState(0xd220, 0xdeb0, 0x1a90, 0xc8a9, 0xfb52, 0xb076, 0x0, 0x0);
        gbc.writeMem(0xd220, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xdeb0);
        EXPECT(gbc.pc(), 0xb076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd220), 0xe9);
        // E9 030C
        gbc.setState(0x7367, 0x7a12, 0xfbe0, 0xc5f2, 0x58fb, 0x7ea, 0x0, 0x0);
        gbc.writeMem(0x7367, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7a12);
        EXPECT(gbc.pc(), 0x7ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 030D
        gbc.setState(0xcc60, 0xc87a, 0xc730, 0x9a36, 0x885a, 0xa359, 0x1, 0x0);
        gbc.writeMem(0xcc60, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc87a);
        EXPECT(gbc.pc(), 0xa359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc60), 0xe9);
        // E9 030E
        gbc.setState(0xa32f, 0xfa18, 0xef10, 0x4141, 0x5603, 0xda4e, 0x1, 0x0);
        gbc.writeMem(0xa32f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfa18);
        EXPECT(gbc.pc(), 0xda4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32f), 0xe9);
        // E9 030F
        gbc.setState(0x75f6, 0xc04e, 0x9a70, 0x585d, 0xd19d, 0xf1f0, 0x0, 0x1);
        gbc.writeMem(0x75f6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc04e);
        EXPECT(gbc.pc(), 0xf1f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0310
        gbc.setState(0x9021, 0xf915, 0xf70, 0x49e0, 0xa7a7, 0xb1c9, 0x1, 0x0);
        gbc.writeMem(0x9021, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf915);
        EXPECT(gbc.pc(), 0xb1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9021), 0xe9);
        // E9 0311
        gbc.setState(0xbee8, 0xf3df, 0xf680, 0x29c8, 0xb416, 0x5067, 0x1, 0x1);
        gbc.writeMem(0xbee8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf3df);
        EXPECT(gbc.pc(), 0x5067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee8), 0xe9);
        // E9 0312
        gbc.setState(0x74ac, 0xa0b9, 0x7370, 0x6b71, 0xed96, 0x46c6, 0x0, 0x0);
        gbc.writeMem(0x74ac, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa0b9);
        EXPECT(gbc.pc(), 0x46c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0313
        gbc.setState(0xd9f7, 0x3046, 0x1f50, 0xff9c, 0x5fd, 0xe721, 0x1, 0x1);
        gbc.writeMem(0xd9f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3046);
        EXPECT(gbc.pc(), 0xe721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9f7), 0xe9);
        // E9 0314
        gbc.setState(0xda74, 0xd87b, 0x9e70, 0x50a2, 0x9c15, 0x435e, 0x1, 0x0);
        gbc.writeMem(0xda74, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd87b);
        EXPECT(gbc.pc(), 0x435e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda74), 0xe9);
        // E9 0315
        gbc.setState(0x4e6a, 0x53d3, 0x66f0, 0x9ded, 0x11aa, 0x7d5e, 0x0, 0x0);
        gbc.writeMem(0x4e6a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x53d3);
        EXPECT(gbc.pc(), 0x7d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0316
        gbc.setState(0x1815, 0x9fb6, 0x80e0, 0x394d, 0xb2fa, 0xb7e2, 0x0, 0x0);
        gbc.writeMem(0x1815, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9fb6);
        EXPECT(gbc.pc(), 0xb7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0317
        gbc.setState(0x9ec1, 0x56c5, 0x2070, 0x29de, 0xe447, 0x2509, 0x1, 0x0);
        gbc.writeMem(0x9ec1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x56c5);
        EXPECT(gbc.pc(), 0x2509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ec1), 0xe9);
        // E9 0318
        gbc.setState(0x7afe, 0x4158, 0x6ea0, 0x8805, 0x1430, 0x8873, 0x1, 0x1);
        gbc.writeMem(0x7afe, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4158);
        EXPECT(gbc.pc(), 0x8873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0319
        gbc.setState(0xb623, 0x631f, 0xb030, 0xb203, 0xa688, 0x162b, 0x1, 0x1);
        gbc.writeMem(0xb623, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x631f);
        EXPECT(gbc.pc(), 0x162b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb623), 0xe9);
        // E9 031A
        gbc.setState(0x6f1a, 0x48b2, 0x3b00, 0xbb4d, 0x7701, 0x8a6d, 0x1, 0x1);
        gbc.writeMem(0x6f1a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x48b2);
        EXPECT(gbc.pc(), 0x8a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 031B
        gbc.setState(0x7437, 0xcca0, 0xaa70, 0xaf3b, 0x5df9, 0x8ea5, 0x1, 0x0);
        gbc.writeMem(0x7437, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcca0);
        EXPECT(gbc.pc(), 0x8ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 031C
        gbc.setState(0x6138, 0xf389, 0x5470, 0xb975, 0x1079, 0xd132, 0x0, 0x0);
        gbc.writeMem(0x6138, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf389);
        EXPECT(gbc.pc(), 0xd132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 031D
        gbc.setState(0x25e9, 0xa3e3, 0x560, 0x5fe4, 0x1ce7, 0xb992, 0x1, 0x1);
        gbc.writeMem(0x25e9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa3e3);
        EXPECT(gbc.pc(), 0xb992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 031E
        gbc.setState(0xa7de, 0x429d, 0x57a0, 0x9c9f, 0x3edf, 0xb8e5, 0x0, 0x0);
        gbc.writeMem(0xa7de, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x429d);
        EXPECT(gbc.pc(), 0xb8e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7de), 0xe9);
        // E9 031F
        gbc.setState(0x75bd, 0xf712, 0x870, 0x5680, 0x54f9, 0x2fbd, 0x1, 0x0);
        gbc.writeMem(0x75bd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf712);
        EXPECT(gbc.pc(), 0x2fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0320
        gbc.setState(0xdc8e, 0x87d0, 0x8e40, 0x2c4f, 0x6dd2, 0x6525, 0x0, 0x0);
        gbc.writeMem(0xdc8e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x87d0);
        EXPECT(gbc.pc(), 0x6525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc8e), 0xe9);
        // E9 0321
        gbc.setState(0xa234, 0x2a25, 0x79b0, 0xf20f, 0x28f0, 0xb664, 0x0, 0x1);
        gbc.writeMem(0xa234, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2a25);
        EXPECT(gbc.pc(), 0xb664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa234), 0xe9);
        // E9 0322
        gbc.setState(0x8dd8, 0x135d, 0xd3c0, 0xc4d6, 0x8b37, 0x33fc, 0x0, 0x0);
        gbc.writeMem(0x8dd8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x135d);
        EXPECT(gbc.pc(), 0x33fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd8), 0xe9);
        // E9 0323
        gbc.setState(0x17a5, 0x41b6, 0x6730, 0x9397, 0x59aa, 0x6a7c, 0x0, 0x1);
        gbc.writeMem(0x17a5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x41b6);
        EXPECT(gbc.pc(), 0x6a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0324
        gbc.setState(0xa207, 0x755d, 0xa8a0, 0x7542, 0x6fd4, 0x25a6, 0x1, 0x1);
        gbc.writeMem(0xa207, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x755d);
        EXPECT(gbc.pc(), 0x25a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa207), 0xe9);
        // E9 0325
        gbc.setState(0x642, 0xe7a0, 0xb4e0, 0xc47f, 0x239c, 0x3841, 0x0, 0x1);
        gbc.writeMem(0x642, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0x3841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0326
        gbc.setState(0xbe3f, 0xff00, 0x1bb0, 0xcd4d, 0x4850, 0xbe94, 0x1, 0x1);
        gbc.writeMem(0xbe3f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xff00);
        EXPECT(gbc.pc(), 0xbe94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe3f), 0xe9);
        // E9 0327
        gbc.setState(0x895b, 0x1639, 0x5fc0, 0xd2f7, 0x8e68, 0x9804, 0x0, 0x0);
        gbc.writeMem(0x895b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1639);
        EXPECT(gbc.pc(), 0x9804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x895b), 0xe9);
        // E9 0328
        gbc.setState(0x7ee9, 0xe647, 0xc200, 0x6e4a, 0x2a3a, 0xedaa, 0x1, 0x1);
        gbc.writeMem(0x7ee9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe647);
        EXPECT(gbc.pc(), 0xedaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0329
        gbc.setState(0x16bf, 0xf56, 0x54f0, 0x399a, 0x3b64, 0x4d45, 0x0, 0x0);
        gbc.writeMem(0x16bf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf56);
        EXPECT(gbc.pc(), 0x4d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 032A
        gbc.setState(0x316b, 0x1553, 0x7020, 0x965b, 0x1477, 0x5d0d, 0x1, 0x1);
        gbc.writeMem(0x316b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1553);
        EXPECT(gbc.pc(), 0x5d0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 032B
        gbc.setState(0x537b, 0x502a, 0xff30, 0xf024, 0x69cf, 0xc72e, 0x0, 0x0);
        gbc.writeMem(0x537b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x502a);
        EXPECT(gbc.pc(), 0xc72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 032C
        gbc.setState(0x1d3c, 0xa97, 0xa240, 0xc725, 0x6f5a, 0xa142, 0x1, 0x0);
        gbc.writeMem(0x1d3c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa97);
        EXPECT(gbc.pc(), 0xa142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 032D
        gbc.setState(0x21a2, 0x2e52, 0xc0e0, 0x34be, 0xc558, 0xb429, 0x0, 0x0);
        gbc.writeMem(0x21a2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2e52);
        EXPECT(gbc.pc(), 0xb429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 032E
        gbc.setState(0xb4e5, 0x8b4d, 0xa550, 0xc0a3, 0xfa51, 0xde1, 0x0, 0x0);
        gbc.writeMem(0xb4e5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8b4d);
        EXPECT(gbc.pc(), 0xde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4e5), 0xe9);
        // E9 032F
        gbc.setState(0x6fa9, 0x3089, 0x51a0, 0x4ab, 0x4207, 0x47ea, 0x0, 0x1);
        gbc.writeMem(0x6fa9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3089);
        EXPECT(gbc.pc(), 0x47ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0330
        gbc.setState(0xdd26, 0xcb16, 0xbfa0, 0x6fb0, 0xd3f2, 0xae29, 0x1, 0x0);
        gbc.writeMem(0xdd26, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcb16);
        EXPECT(gbc.pc(), 0xae29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd26), 0xe9);
        // E9 0331
        gbc.setState(0x4f46, 0xa1e0, 0x1ee0, 0xa01d, 0x8cf, 0x6b17, 0x1, 0x0);
        gbc.writeMem(0x4f46, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa1e0);
        EXPECT(gbc.pc(), 0x6b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0332
        gbc.setState(0x8dec, 0xd618, 0xad0, 0x683a, 0x2301, 0xa97d, 0x1, 0x1);
        gbc.writeMem(0x8dec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd618);
        EXPECT(gbc.pc(), 0xa97d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dec), 0xe9);
        // E9 0333
        gbc.setState(0xc629, 0x77f6, 0x4420, 0xb41, 0x36aa, 0xdbd3, 0x0, 0x0);
        gbc.writeMem(0xc629, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x77f6);
        EXPECT(gbc.pc(), 0xdbd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc629), 0xe9);
        // E9 0334
        gbc.setState(0xe4af, 0x7d39, 0x6690, 0x8ac1, 0xf511, 0x8b3a, 0x1, 0x1);
        gbc.writeMem(0xe4af, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7d39);
        EXPECT(gbc.pc(), 0x8b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4af), 0xe9);
        // E9 0335
        gbc.setState(0xbdf8, 0xe352, 0x2f50, 0xe97a, 0xb2b2, 0x3994, 0x1, 0x0);
        gbc.writeMem(0xbdf8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe352);
        EXPECT(gbc.pc(), 0x3994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf8), 0xe9);
        // E9 0336
        gbc.setState(0xbe14, 0x2ba3, 0x2940, 0xac9c, 0xc8e5, 0x6c0e, 0x0, 0x1);
        gbc.writeMem(0xbe14, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2ba3);
        EXPECT(gbc.pc(), 0x6c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe14), 0xe9);
        // E9 0337
        gbc.setState(0x74d0, 0xc775, 0x4c60, 0xe6a0, 0x8394, 0x26a2, 0x0, 0x0);
        gbc.writeMem(0x74d0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc775);
        EXPECT(gbc.pc(), 0x26a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0338
        gbc.setState(0x4915, 0x3819, 0x8cd0, 0x28ca, 0x1571, 0xf191, 0x0, 0x0);
        gbc.writeMem(0x4915, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3819);
        EXPECT(gbc.pc(), 0xf191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0339
        gbc.setState(0xdde8, 0x51c5, 0xf290, 0x8e52, 0x8781, 0x84a5, 0x1, 0x0);
        gbc.writeMem(0xdde8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x51c5);
        EXPECT(gbc.pc(), 0x84a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde8), 0xe9);
        // E9 033A
        gbc.setState(0x6532, 0xb3af, 0x1340, 0x4802, 0x3106, 0xfaaa, 0x0, 0x0);
        gbc.writeMem(0x6532, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb3af);
        EXPECT(gbc.pc(), 0xfaaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 033B
        gbc.setState(0xb216, 0x2036, 0x69a0, 0x199e, 0xf3f, 0x6bb1, 0x1, 0x0);
        gbc.writeMem(0xb216, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2036);
        EXPECT(gbc.pc(), 0x6bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb216), 0xe9);
        // E9 033C
        gbc.setState(0xcfe7, 0xb216, 0xfb00, 0x4aba, 0x194f, 0xb6e0, 0x0, 0x0);
        gbc.writeMem(0xcfe7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb216);
        EXPECT(gbc.pc(), 0xb6e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe7), 0xe9);
        // E9 033D
        gbc.setState(0x6143, 0xe2ae, 0x9c30, 0xb0db, 0x83e4, 0x622f, 0x1, 0x0);
        gbc.writeMem(0x6143, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe2ae);
        EXPECT(gbc.pc(), 0x622f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 033E
        gbc.setState(0xa03c, 0x4c40, 0xf8c0, 0x68ab, 0xf6b4, 0x3b00, 0x0, 0x1);
        gbc.writeMem(0xa03c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4c40);
        EXPECT(gbc.pc(), 0x3b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03c), 0xe9);
        // E9 033F
        gbc.setState(0x2249, 0x4989, 0x3f30, 0x13ec, 0x2023, 0xe2b5, 0x0, 0x1);
        gbc.writeMem(0x2249, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4989);
        EXPECT(gbc.pc(), 0xe2b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0340
        gbc.setState(0x6586, 0x4d13, 0xc740, 0x819e, 0xe882, 0xd039, 0x1, 0x0);
        gbc.writeMem(0x6586, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4d13);
        EXPECT(gbc.pc(), 0xd039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0341
        gbc.setState(0x948c, 0xd721, 0x5490, 0x54fa, 0x85f9, 0x443d, 0x1, 0x1);
        gbc.writeMem(0x948c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd721);
        EXPECT(gbc.pc(), 0x443d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x948c), 0xe9);
        // E9 0342
        gbc.setState(0xcd6a, 0x7ce2, 0x4500, 0x2444, 0xb060, 0xbf79, 0x1, 0x0);
        gbc.writeMem(0xcd6a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7ce2);
        EXPECT(gbc.pc(), 0xbf79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6a), 0xe9);
        // E9 0343
        gbc.setState(0x1e7a, 0xc9fb, 0x8a60, 0x377c, 0x8f78, 0xc93b, 0x0, 0x0);
        gbc.writeMem(0x1e7a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc9fb);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0344
        gbc.setState(0xd50c, 0x4da5, 0x7350, 0x692d, 0xa169, 0xf7f9, 0x0, 0x0);
        gbc.writeMem(0xd50c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4da5);
        EXPECT(gbc.pc(), 0xf7f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50c), 0xe9);
        // E9 0345
        gbc.setState(0x18ef, 0x2b94, 0xdc10, 0x4082, 0xf306, 0xdcbe, 0x0, 0x0);
        gbc.writeMem(0x18ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2b94);
        EXPECT(gbc.pc(), 0xdcbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0346
        gbc.setState(0x74a0, 0x4430, 0x9530, 0xbf1f, 0x6363, 0x8e9b, 0x0, 0x1);
        gbc.writeMem(0x74a0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4430);
        EXPECT(gbc.pc(), 0x8e9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0347
        gbc.setState(0x879, 0xad82, 0x85a0, 0x291e, 0xa707, 0x5d64, 0x0, 0x1);
        gbc.writeMem(0x879, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x5d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0348
        gbc.setState(0x8c2e, 0xc635, 0xa880, 0xbaba, 0x20bd, 0x867a, 0x1, 0x0);
        gbc.writeMem(0x8c2e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc635);
        EXPECT(gbc.pc(), 0x867a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c2e), 0xe9);
        // E9 0349
        gbc.setState(0x1064, 0xc36a, 0xd300, 0x5083, 0xb44b, 0xead1, 0x1, 0x0);
        gbc.writeMem(0x1064, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc36a);
        EXPECT(gbc.pc(), 0xead1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 034A
        gbc.setState(0x930b, 0x3770, 0xcdf0, 0x6317, 0x9583, 0x23e5, 0x1, 0x0);
        gbc.writeMem(0x930b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3770);
        EXPECT(gbc.pc(), 0x23e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930b), 0xe9);
        // E9 034B
        gbc.setState(0x1d39, 0x1597, 0xea50, 0x7286, 0xb72a, 0xd534, 0x1, 0x1);
        gbc.writeMem(0x1d39, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1597);
        EXPECT(gbc.pc(), 0xd534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 034C
        gbc.setState(0x1e7e, 0x30c0, 0x9af0, 0xce86, 0x21f8, 0x566, 0x1, 0x0);
        gbc.writeMem(0x1e7e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x30c0);
        EXPECT(gbc.pc(), 0x566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 034D
        gbc.setState(0xdfc9, 0x2d0d, 0xf900, 0x17a8, 0xaab0, 0x32e9, 0x1, 0x0);
        gbc.writeMem(0xdfc9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2d0d);
        EXPECT(gbc.pc(), 0x32e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc9), 0xe9);
        // E9 034E
        gbc.setState(0xb277, 0xbc21, 0xf9c0, 0x28a0, 0xae3a, 0x16c6, 0x0, 0x0);
        gbc.writeMem(0xb277, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbc21);
        EXPECT(gbc.pc(), 0x16c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb277), 0xe9);
        // E9 034F
        gbc.setState(0xa21a, 0xcd33, 0xe1d0, 0x4773, 0xb1a1, 0xce24, 0x1, 0x0);
        gbc.writeMem(0xa21a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcd33);
        EXPECT(gbc.pc(), 0xce24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa21a), 0xe9);
        // E9 0350
        gbc.setState(0x69cb, 0x86e6, 0x8450, 0x595, 0x584c, 0xf34, 0x0, 0x0);
        gbc.writeMem(0x69cb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x86e6);
        EXPECT(gbc.pc(), 0xf34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0351
        gbc.setState(0xa02e, 0xf44, 0x9640, 0x8770, 0x9f17, 0x1f71, 0x1, 0x1);
        gbc.writeMem(0xa02e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf44);
        EXPECT(gbc.pc(), 0x1f71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02e), 0xe9);
        // E9 0352
        gbc.setState(0xba20, 0xc4de, 0x2bf0, 0xfbcf, 0xfc7f, 0xda0d, 0x0, 0x1);
        gbc.writeMem(0xba20, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc4de);
        EXPECT(gbc.pc(), 0xda0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba20), 0xe9);
        // E9 0353
        gbc.setState(0xb2ef, 0x9e9b, 0xe2b0, 0x7783, 0x28b8, 0xe0d6, 0x1, 0x1);
        gbc.writeMem(0xb2ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9e9b);
        EXPECT(gbc.pc(), 0xe0d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ef), 0xe9);
        // E9 0354
        gbc.setState(0xd53e, 0xd5e6, 0x24c0, 0xc1df, 0x34cb, 0xa378, 0x0, 0x0);
        gbc.writeMem(0xd53e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd5e6);
        EXPECT(gbc.pc(), 0xa378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53e), 0xe9);
        // E9 0355
        gbc.setState(0x4336, 0x9cc8, 0x40c0, 0x7dcb, 0xcc23, 0xed86, 0x1, 0x0);
        gbc.writeMem(0x4336, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9cc8);
        EXPECT(gbc.pc(), 0xed86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0356
        gbc.setState(0x4e1e, 0xd22f, 0xb4c0, 0xf86e, 0x4fb1, 0xf79f, 0x0, 0x1);
        gbc.writeMem(0x4e1e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd22f);
        EXPECT(gbc.pc(), 0xf79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0357
        gbc.setState(0x28f7, 0xe3db, 0xf660, 0x37e2, 0x5f7b, 0xb3bb, 0x0, 0x1);
        gbc.writeMem(0x28f7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe3db);
        EXPECT(gbc.pc(), 0xb3bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0358
        gbc.setState(0x30de, 0xd8b2, 0xb010, 0x2b18, 0x3dd5, 0x93cb, 0x0, 0x0);
        gbc.writeMem(0x30de, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd8b2);
        EXPECT(gbc.pc(), 0x93cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0359
        gbc.setState(0x2e95, 0x2e17, 0xa990, 0xe637, 0x4bd8, 0x1282, 0x0, 0x1);
        gbc.writeMem(0x2e95, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2e17);
        EXPECT(gbc.pc(), 0x1282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 035A
        gbc.setState(0x5052, 0x5dea, 0x7890, 0xef17, 0x7825, 0x4693, 0x0, 0x0);
        gbc.writeMem(0x5052, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5dea);
        EXPECT(gbc.pc(), 0x4693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 035B
        gbc.setState(0xd78f, 0xb139, 0x3140, 0xf6eb, 0x83b7, 0x3df9, 0x1, 0x0);
        gbc.writeMem(0xd78f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb139);
        EXPECT(gbc.pc(), 0x3df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78f), 0xe9);
        // E9 035C
        gbc.setState(0x98a7, 0xa590, 0xb1e0, 0x9996, 0x6947, 0xf321, 0x1, 0x1);
        gbc.writeMem(0x98a7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa590);
        EXPECT(gbc.pc(), 0xf321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a7), 0xe9);
        // E9 035D
        gbc.setState(0x9053, 0xd93d, 0xfcb0, 0xb5fb, 0x56c2, 0x6b6e, 0x1, 0x0);
        gbc.writeMem(0x9053, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd93d);
        EXPECT(gbc.pc(), 0x6b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9053), 0xe9);
        // E9 035E
        gbc.setState(0x34c0, 0x2bb0, 0x5e00, 0x8f61, 0xdd2e, 0x8545, 0x1, 0x0);
        gbc.writeMem(0x34c0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2bb0);
        EXPECT(gbc.pc(), 0x8545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 035F
        gbc.setState(0x340f, 0xa9a4, 0x7150, 0x5e20, 0x95ee, 0xdc25, 0x1, 0x1);
        gbc.writeMem(0x340f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa9a4);
        EXPECT(gbc.pc(), 0xdc25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0360
        gbc.setState(0xafec, 0x4483, 0x1980, 0x3542, 0x3d4e, 0x2853, 0x1, 0x1);
        gbc.writeMem(0xafec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4483);
        EXPECT(gbc.pc(), 0x2853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafec), 0xe9);
        // E9 0361
        gbc.setState(0x3b02, 0x91d0, 0x5510, 0x77ed, 0xc6c9, 0x8716, 0x0, 0x0);
        gbc.writeMem(0x3b02, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x91d0);
        EXPECT(gbc.pc(), 0x8716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0362
        gbc.setState(0xc0f5, 0x5a77, 0x8510, 0x305a, 0x9c78, 0xe19d, 0x1, 0x1);
        gbc.writeMem(0xc0f5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5a77);
        EXPECT(gbc.pc(), 0xe19d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f5), 0xe9);
        // E9 0363
        gbc.setState(0x83eb, 0x5583, 0xfa50, 0x196e, 0xa219, 0xcc3a, 0x1, 0x1);
        gbc.writeMem(0x83eb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5583);
        EXPECT(gbc.pc(), 0xcc3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83eb), 0xe9);
        // E9 0364
        gbc.setState(0x99e, 0x8949, 0x17d0, 0x9ede, 0x37ca, 0x4028, 0x1, 0x1);
        gbc.writeMem(0x99e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8949);
        EXPECT(gbc.pc(), 0x4028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0365
        gbc.setState(0x22b4, 0x97fa, 0xbe0, 0x3adc, 0x62, 0xe6f9, 0x1, 0x1);
        gbc.writeMem(0x22b4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x97fa);
        EXPECT(gbc.pc(), 0xe6f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0366
        gbc.setState(0xaaf, 0xf943, 0x8110, 0x5237, 0xf104, 0xa9fb, 0x1, 0x0);
        gbc.writeMem(0xaaf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf943);
        EXPECT(gbc.pc(), 0xa9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0367
        gbc.setState(0xc2d2, 0x51a4, 0x3710, 0xcb7c, 0xc119, 0x4fd4, 0x0, 0x1);
        gbc.writeMem(0xc2d2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x51a4);
        EXPECT(gbc.pc(), 0x4fd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d2), 0xe9);
        // E9 0368
        gbc.setState(0x5b21, 0xaef3, 0xf280, 0x1592, 0xe4d4, 0x2d2, 0x1, 0x1);
        gbc.writeMem(0x5b21, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xaef3);
        EXPECT(gbc.pc(), 0x2d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 036A
        gbc.setState(0xe218, 0x6010, 0x56d0, 0xb204, 0xed91, 0x3261, 0x1, 0x0);
        gbc.writeMem(0xe218, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6010);
        EXPECT(gbc.pc(), 0x3261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe218), 0xe9);
        // E9 036B
        gbc.setState(0xb290, 0x6d10, 0x9f40, 0x740e, 0x6129, 0x7db2, 0x0, 0x0);
        gbc.writeMem(0xb290, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6d10);
        EXPECT(gbc.pc(), 0x7db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb290), 0xe9);
        // E9 036C
        gbc.setState(0xa0f9, 0x2d65, 0x9e70, 0x7361, 0x94ed, 0x113b, 0x1, 0x1);
        gbc.writeMem(0xa0f9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2d65);
        EXPECT(gbc.pc(), 0x113b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0f9), 0xe9);
        // E9 036D
        gbc.setState(0x9982, 0x66f3, 0xbe30, 0x81ef, 0xb43, 0x7689, 0x1, 0x1);
        gbc.writeMem(0x9982, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x66f3);
        EXPECT(gbc.pc(), 0x7689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9982), 0xe9);
        // E9 036E
        gbc.setState(0x9a02, 0x5c33, 0xf6e0, 0x73e8, 0xe66, 0xe04c, 0x1, 0x1);
        gbc.writeMem(0x9a02, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5c33);
        EXPECT(gbc.pc(), 0xe04c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a02), 0xe9);
        // E9 036F
        gbc.setState(0xa5ab, 0xf894, 0xbcf0, 0x67b7, 0xfeac, 0x7432, 0x1, 0x0);
        gbc.writeMem(0xa5ab, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf894);
        EXPECT(gbc.pc(), 0x7432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ab), 0xe9);
        // E9 0370
        gbc.setState(0xa570, 0x4b0b, 0x74f0, 0x26f5, 0x458f, 0xf281, 0x0, 0x0);
        gbc.writeMem(0xa570, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4b0b);
        EXPECT(gbc.pc(), 0xf281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa570), 0xe9);
        // E9 0371
        gbc.setState(0x7af4, 0x901c, 0xa5c0, 0x3784, 0xb75e, 0xc4cf, 0x1, 0x0);
        gbc.writeMem(0x7af4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x901c);
        EXPECT(gbc.pc(), 0xc4cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0372
        gbc.setState(0x508b, 0x3f87, 0x8ec0, 0x7db3, 0xb0e6, 0x4ef8, 0x1, 0x0);
        gbc.writeMem(0x508b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3f87);
        EXPECT(gbc.pc(), 0x4ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0373
        gbc.setState(0xe107, 0xb601, 0xf580, 0x8c, 0x45c6, 0x6a13, 0x0, 0x0);
        gbc.writeMem(0xe107, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb601);
        EXPECT(gbc.pc(), 0x6a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe107), 0xe9);
        // E9 0374
        gbc.setState(0xea33, 0xcd7e, 0x630, 0xf178, 0xc303, 0x4476, 0x0, 0x1);
        gbc.writeMem(0xea33, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcd7e);
        EXPECT(gbc.pc(), 0x4476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea33), 0xe9);
        // E9 0375
        gbc.setState(0x2c11, 0x65fc, 0x25d0, 0x9a41, 0xb11c, 0xc1f2, 0x1, 0x1);
        gbc.writeMem(0x2c11, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x65fc);
        EXPECT(gbc.pc(), 0xc1f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0376
        gbc.setState(0x9fa4, 0xebb8, 0x1ab0, 0x8aa, 0x30c4, 0xa702, 0x1, 0x0);
        gbc.writeMem(0x9fa4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xebb8);
        EXPECT(gbc.pc(), 0xa702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa4), 0xe9);
        // E9 0377
        gbc.setState(0x9344, 0xb1e2, 0x640, 0x3502, 0xf4ee, 0x2817, 0x1, 0x0);
        gbc.writeMem(0x9344, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb1e2);
        EXPECT(gbc.pc(), 0x2817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9344), 0xe9);
        // E9 0378
        gbc.setState(0x65d7, 0x4d14, 0xe890, 0xab1b, 0xea68, 0xa45b, 0x1, 0x0);
        gbc.writeMem(0x65d7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4d14);
        EXPECT(gbc.pc(), 0xa45b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0379
        gbc.setState(0x48ef, 0x59e, 0xe030, 0xb182, 0xded1, 0x378a, 0x0, 0x1);
        gbc.writeMem(0x48ef, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x59e);
        EXPECT(gbc.pc(), 0x378a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 037A
        gbc.setState(0x590b, 0x1ced, 0x580, 0xf1d, 0x207d, 0x2612, 0x0, 0x0);
        gbc.writeMem(0x590b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1ced);
        EXPECT(gbc.pc(), 0x2612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 037B
        gbc.setState(0x4209, 0x698f, 0xdda0, 0xb1da, 0x61e5, 0x83a3, 0x1, 0x1);
        gbc.writeMem(0x4209, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x698f);
        EXPECT(gbc.pc(), 0x83a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 037C
        gbc.setState(0x453c, 0x9aff, 0xdc0, 0x98cb, 0xbb2f, 0xdf02, 0x0, 0x1);
        gbc.writeMem(0x453c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9aff);
        EXPECT(gbc.pc(), 0xdf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 037D
        gbc.setState(0x3d1d, 0x42d7, 0x11d0, 0x2380, 0x5aee, 0x7bb3, 0x1, 0x1);
        gbc.writeMem(0x3d1d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x42d7);
        EXPECT(gbc.pc(), 0x7bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 037F
        gbc.setState(0x786a, 0xbe8f, 0x3840, 0x111a, 0x9da4, 0x9203, 0x1, 0x0);
        gbc.writeMem(0x786a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbe8f);
        EXPECT(gbc.pc(), 0x9203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0380
        gbc.setState(0x8edb, 0x9063, 0x5ba0, 0x3361, 0x9c3d, 0xdb07, 0x0, 0x0);
        gbc.writeMem(0x8edb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9063);
        EXPECT(gbc.pc(), 0xdb07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8edb), 0xe9);
        // E9 0381
        gbc.setState(0x4f33, 0x1dd6, 0xe330, 0x5f01, 0x3b54, 0xbfb2, 0x0, 0x0);
        gbc.writeMem(0x4f33, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1dd6);
        EXPECT(gbc.pc(), 0xbfb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0382
        gbc.setState(0x2a2b, 0x695a, 0xaf40, 0x5442, 0xbe0c, 0xf8aa, 0x1, 0x1);
        gbc.writeMem(0x2a2b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x695a);
        EXPECT(gbc.pc(), 0xf8aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0383
        gbc.setState(0xb622, 0x2be4, 0xc410, 0x155f, 0x8c8, 0xf0c2, 0x1, 0x0);
        gbc.writeMem(0xb622, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2be4);
        EXPECT(gbc.pc(), 0xf0c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb622), 0xe9);
        // E9 0384
        gbc.setState(0x3cdf, 0x7094, 0xd50, 0xc988, 0x1116, 0xb862, 0x0, 0x0);
        gbc.writeMem(0x3cdf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7094);
        EXPECT(gbc.pc(), 0xb862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0385
        gbc.setState(0x205d, 0x653e, 0x42b0, 0x4272, 0x96bf, 0x8f64, 0x1, 0x0);
        gbc.writeMem(0x205d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x653e);
        EXPECT(gbc.pc(), 0x8f64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 0386
        gbc.setState(0x4c4a, 0xd4b4, 0xf6c0, 0x4f95, 0x809d, 0xa63d, 0x1, 0x1);
        gbc.writeMem(0x4c4a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd4b4);
        EXPECT(gbc.pc(), 0xa63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0388
        gbc.setState(0x611c, 0xfdc5, 0xe1a0, 0xc3d9, 0x20ff, 0xb3d5, 0x1, 0x1);
        gbc.writeMem(0x611c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfdc5);
        EXPECT(gbc.pc(), 0xb3d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0389
        gbc.setState(0x61c4, 0x25b3, 0xfd20, 0x3c8f, 0x49c3, 0x1b89, 0x0, 0x1);
        gbc.writeMem(0x61c4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x25b3);
        EXPECT(gbc.pc(), 0x1b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 038B
        gbc.setState(0x1fc6, 0xeda9, 0xa2c0, 0x29fe, 0x138e, 0x2758, 0x0, 0x1);
        gbc.writeMem(0x1fc6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xeda9);
        EXPECT(gbc.pc(), 0x2758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 038C
        gbc.setState(0x8c16, 0x17b5, 0x7a30, 0x31b9, 0xce77, 0xf95a, 0x1, 0x0);
        gbc.writeMem(0x8c16, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x17b5);
        EXPECT(gbc.pc(), 0xf95a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c16), 0xe9);
        // E9 038D
        gbc.setState(0x694d, 0x404b, 0x7c10, 0x7423, 0x468, 0xd3e2, 0x1, 0x0);
        gbc.writeMem(0x694d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x404b);
        EXPECT(gbc.pc(), 0xd3e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 038E
        gbc.setState(0x66ed, 0xd8a5, 0x6120, 0x5566, 0xb8a4, 0xdb16, 0x0, 0x1);
        gbc.writeMem(0x66ed, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd8a5);
        EXPECT(gbc.pc(), 0xdb16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0390
        gbc.setState(0xb199, 0x9f12, 0xde20, 0x3417, 0x4639, 0xf55a, 0x0, 0x1);
        gbc.writeMem(0xb199, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9f12);
        EXPECT(gbc.pc(), 0xf55a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb199), 0xe9);
        // E9 0391
        gbc.setState(0x6b85, 0xbe7, 0xed60, 0x3e95, 0xf222, 0x5263, 0x1, 0x0);
        gbc.writeMem(0x6b85, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbe7);
        EXPECT(gbc.pc(), 0x5263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 0392
        gbc.setState(0x595a, 0x492, 0xf3d0, 0xb376, 0x5112, 0x4e0c, 0x1, 0x0);
        gbc.writeMem(0x595a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x492);
        EXPECT(gbc.pc(), 0x4e0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0393
        gbc.setState(0xd498, 0xdf3d, 0xf7b0, 0x5d72, 0x4ff8, 0x9eb4, 0x1, 0x1);
        gbc.writeMem(0xd498, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdf3d);
        EXPECT(gbc.pc(), 0x9eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0xe9);
        // E9 0394
        gbc.setState(0x8f32, 0xb78e, 0xd350, 0x8a0c, 0x4ec0, 0x527b, 0x1, 0x0);
        gbc.writeMem(0x8f32, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb78e);
        EXPECT(gbc.pc(), 0x527b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f32), 0xe9);
        // E9 0395
        gbc.setState(0x682f, 0xf8df, 0x4d0, 0xd4af, 0x1b6b, 0xf72d, 0x1, 0x1);
        gbc.writeMem(0x682f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf8df);
        EXPECT(gbc.pc(), 0xf72d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 0396
        gbc.setState(0x625c, 0x2b94, 0xfb80, 0xfd17, 0xcf3b, 0xc64b, 0x1, 0x1);
        gbc.writeMem(0x625c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2b94);
        EXPECT(gbc.pc(), 0xc64b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 0397
        gbc.setState(0x8cd0, 0x7b93, 0x2f50, 0x761f, 0xb9e9, 0xaa9, 0x0, 0x0);
        gbc.writeMem(0x8cd0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7b93);
        EXPECT(gbc.pc(), 0xaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd0), 0xe9);
        // E9 0399
        gbc.setState(0x57d8, 0x47e9, 0x7d90, 0x44fc, 0xb096, 0x3702, 0x0, 0x0);
        gbc.writeMem(0x57d8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x47e9);
        EXPECT(gbc.pc(), 0x3702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 039A
        gbc.setState(0xa107, 0x51a7, 0x7240, 0x45ba, 0x4e93, 0xec1d, 0x1, 0x1);
        gbc.writeMem(0xa107, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x51a7);
        EXPECT(gbc.pc(), 0xec1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa107), 0xe9);
        // E9 039B
        gbc.setState(0xc8b4, 0x25b0, 0xfeb0, 0x32b2, 0xd578, 0x3309, 0x0, 0x0);
        gbc.writeMem(0xc8b4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x25b0);
        EXPECT(gbc.pc(), 0x3309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b4), 0xe9);
        // E9 039C
        gbc.setState(0xedbc, 0xe323, 0x8970, 0x8124, 0xd9bb, 0x2573, 0x1, 0x1);
        gbc.writeMem(0xedbc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe323);
        EXPECT(gbc.pc(), 0x2573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedbc), 0xe9);
        // E9 039D
        gbc.setState(0xa169, 0x2d0, 0x24b0, 0x5c97, 0xaf58, 0x69fd, 0x0, 0x1);
        gbc.writeMem(0xa169, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2d0);
        EXPECT(gbc.pc(), 0x69fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa169), 0xe9);
        // E9 039E
        gbc.setState(0xb04f, 0xa069, 0xc8d0, 0xafa6, 0xb862, 0x7df7, 0x0, 0x0);
        gbc.writeMem(0xb04f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa069);
        EXPECT(gbc.pc(), 0x7df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04f), 0xe9);
        // E9 03A0
        gbc.setState(0xc894, 0x1bdc, 0x2fb0, 0x8141, 0x6062, 0x87f2, 0x0, 0x0);
        gbc.writeMem(0xc894, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1bdc);
        EXPECT(gbc.pc(), 0x87f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc894), 0xe9);
        // E9 03A1
        gbc.setState(0x96d4, 0xaa9d, 0x70, 0x3d16, 0xa959, 0x54d1, 0x1, 0x0);
        gbc.writeMem(0x96d4, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xaa9d);
        EXPECT(gbc.pc(), 0x54d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96d4), 0xe9);
        // E9 03A2
        gbc.setState(0x233f, 0x441e, 0xae80, 0x66fa, 0x7af6, 0x6ca8, 0x1, 0x1);
        gbc.writeMem(0x233f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x441e);
        EXPECT(gbc.pc(), 0x6ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03A3
        gbc.setState(0x4b00, 0xb4db, 0x8f90, 0xc3a1, 0xd112, 0x6f9b, 0x1, 0x1);
        gbc.writeMem(0x4b00, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb4db);
        EXPECT(gbc.pc(), 0x6f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03A4
        gbc.setState(0x25cf, 0xe4e, 0x8870, 0x38fa, 0xc240, 0x4371, 0x1, 0x1);
        gbc.writeMem(0x25cf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe4e);
        EXPECT(gbc.pc(), 0x4371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03A5
        gbc.setState(0xb1fa, 0xd55b, 0x7600, 0x275c, 0x3358, 0x9f5d, 0x0, 0x1);
        gbc.writeMem(0xb1fa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd55b);
        EXPECT(gbc.pc(), 0x9f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1fa), 0xe9);
        // E9 03A6
        gbc.setState(0x6eaf, 0xca6c, 0x8dc0, 0xcb61, 0xedf2, 0x3205, 0x0, 0x0);
        gbc.writeMem(0x6eaf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xca6c);
        EXPECT(gbc.pc(), 0x3205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03A7
        gbc.setState(0xe420, 0xf281, 0x31d0, 0x35f6, 0xe30, 0x7f53, 0x0, 0x1);
        gbc.writeMem(0xe420, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf281);
        EXPECT(gbc.pc(), 0x7f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe420), 0xe9);
        // E9 03A8
        gbc.setState(0x25fa, 0xe4d0, 0xa960, 0x3fc7, 0xb43b, 0xb1e9, 0x1, 0x1);
        gbc.writeMem(0x25fa, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe4d0);
        EXPECT(gbc.pc(), 0xb1e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03A9
        gbc.setState(0x88e6, 0xe22c, 0x8e50, 0xb719, 0x163a, 0x29bd, 0x1, 0x0);
        gbc.writeMem(0x88e6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe22c);
        EXPECT(gbc.pc(), 0x29bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88e6), 0xe9);
        // E9 03AA
        gbc.setState(0xa0d9, 0xfa9c, 0x3190, 0x2d7d, 0xaa5a, 0xe1a5, 0x0, 0x0);
        gbc.writeMem(0xa0d9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfa9c);
        EXPECT(gbc.pc(), 0xe1a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d9), 0xe9);
        // E9 03AB
        gbc.setState(0x45d5, 0x4f80, 0xe570, 0x98b0, 0x3309, 0x39b8, 0x1, 0x1);
        gbc.writeMem(0x45d5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4f80);
        EXPECT(gbc.pc(), 0x39b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03AC
        gbc.setState(0x44bd, 0x7dea, 0x54b0, 0xa2b6, 0xdafe, 0xc608, 0x1, 0x0);
        gbc.writeMem(0x44bd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7dea);
        EXPECT(gbc.pc(), 0xc608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03AD
        gbc.setState(0xb8df, 0x7506, 0xb3c0, 0xeb2e, 0xb746, 0xa0ed, 0x1, 0x0);
        gbc.writeMem(0xb8df, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7506);
        EXPECT(gbc.pc(), 0xa0ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8df), 0xe9);
        // E9 03AE
        gbc.setState(0xa5cd, 0xdfe4, 0x84e0, 0x6c2a, 0x36b8, 0xde90, 0x1, 0x1);
        gbc.writeMem(0xa5cd, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdfe4);
        EXPECT(gbc.pc(), 0xde90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5cd), 0xe9);
        // E9 03AF
        gbc.setState(0xee24, 0xfa38, 0x3fe0, 0x42f9, 0xb4f6, 0xaae9, 0x0, 0x0);
        gbc.writeMem(0xee24, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xfa38);
        EXPECT(gbc.pc(), 0xaae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee24), 0xe9);
        // E9 03B0
        gbc.setState(0x5ddb, 0xc51c, 0x9920, 0xdc1c, 0xa829, 0x3a5a, 0x0, 0x1);
        gbc.writeMem(0x5ddb, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc51c);
        EXPECT(gbc.pc(), 0x3a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03B1
        gbc.setState(0xe936, 0xee35, 0xfc00, 0x9053, 0x5ee8, 0x1b5e, 0x1, 0x1);
        gbc.writeMem(0xe936, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xee35);
        EXPECT(gbc.pc(), 0x1b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe936), 0xe9);
        // E9 03B2
        gbc.setState(0x2bbc, 0xac3d, 0xffb0, 0xf31b, 0x3954, 0xf40c, 0x1, 0x0);
        gbc.writeMem(0x2bbc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xac3d);
        EXPECT(gbc.pc(), 0xf40c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03B3
        gbc.setState(0x8d10, 0x9a18, 0x1130, 0x1510, 0x300f, 0x322d, 0x1, 0x0);
        gbc.writeMem(0x8d10, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9a18);
        EXPECT(gbc.pc(), 0x322d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d10), 0xe9);
        // E9 03B5
        gbc.setState(0x461c, 0xb547, 0xb0e0, 0x81ce, 0x317, 0xc69c, 0x0, 0x1);
        gbc.writeMem(0x461c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb547);
        EXPECT(gbc.pc(), 0xc69c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03B6
        gbc.setState(0xa6f3, 0x407f, 0x60f0, 0x13d5, 0x5ceb, 0x280d, 0x1, 0x0);
        gbc.writeMem(0xa6f3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x407f);
        EXPECT(gbc.pc(), 0x280d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f3), 0xe9);
        // E9 03B7
        gbc.setState(0xe2f6, 0x21f9, 0xbb20, 0xd521, 0x4db5, 0x9dab, 0x0, 0x0);
        gbc.writeMem(0xe2f6, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x21f9);
        EXPECT(gbc.pc(), 0x9dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f6), 0xe9);
        // E9 03B8
        gbc.setState(0x5a1a, 0xba34, 0x6500, 0x8454, 0x175e, 0xe545, 0x1, 0x1);
        gbc.writeMem(0x5a1a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xba34);
        EXPECT(gbc.pc(), 0xe545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03B9
        gbc.setState(0xad0a, 0x5569, 0x8dc0, 0x7acc, 0xf5ce, 0xee12, 0x1, 0x0);
        gbc.writeMem(0xad0a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5569);
        EXPECT(gbc.pc(), 0xee12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0a), 0xe9);
        // E9 03BA
        gbc.setState(0x184f, 0x3f58, 0x3f0, 0x401, 0x7e55, 0x1109, 0x1, 0x1);
        gbc.writeMem(0x184f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3f58);
        EXPECT(gbc.pc(), 0x1109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03BB
        gbc.setState(0x87c5, 0x3a31, 0x31b0, 0xd1e6, 0x6783, 0xe85, 0x0, 0x1);
        gbc.writeMem(0x87c5, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3a31);
        EXPECT(gbc.pc(), 0xe85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c5), 0xe9);
        // E9 03BC
        gbc.setState(0xa36e, 0x4920, 0x8990, 0x9bf5, 0xda14, 0xa325, 0x0, 0x0);
        gbc.writeMem(0xa36e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4920);
        EXPECT(gbc.pc(), 0xa325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa36e), 0xe9);
        // E9 03BD
        gbc.setState(0x266, 0xad78, 0x7100, 0xea49, 0xbfa4, 0x6f42, 0x0, 0x1);
        gbc.writeMem(0x266, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xad78);
        EXPECT(gbc.pc(), 0x6f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03BE
        gbc.setState(0xa6cf, 0x3c56, 0x4660, 0x2d9b, 0x6edd, 0x395a, 0x1, 0x0);
        gbc.writeMem(0xa6cf, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3c56);
        EXPECT(gbc.pc(), 0x395a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6cf), 0xe9);
        // E9 03BF
        gbc.setState(0xa8d7, 0x66c4, 0x88d0, 0xf05f, 0xcf3, 0x227f, 0x1, 0x1);
        gbc.writeMem(0xa8d7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x66c4);
        EXPECT(gbc.pc(), 0x227f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d7), 0xe9);
        // E9 03C0
        gbc.setState(0xe9f8, 0xe8e4, 0xe8e0, 0x2bd6, 0x9057, 0xe4a8, 0x1, 0x1);
        gbc.writeMem(0xe9f8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe8e4);
        EXPECT(gbc.pc(), 0xe4a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f8), 0xe9);
        // E9 03C1
        gbc.setState(0xcd69, 0x7363, 0x9dd0, 0xc383, 0xe010, 0xb094, 0x0, 0x1);
        gbc.writeMem(0xcd69, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7363);
        EXPECT(gbc.pc(), 0xb094);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd69), 0xe9);
        // E9 03C2
        gbc.setState(0xe8b1, 0x23b7, 0x5d80, 0x94d2, 0x2452, 0x18a5, 0x0, 0x1);
        gbc.writeMem(0xe8b1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x23b7);
        EXPECT(gbc.pc(), 0x18a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b1), 0xe9);
        // E9 03C3
        gbc.setState(0x6da8, 0x1688, 0x3df0, 0xc489, 0x204b, 0xb615, 0x1, 0x1);
        gbc.writeMem(0x6da8, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1688);
        EXPECT(gbc.pc(), 0xb615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03C4
        gbc.setState(0xfd3, 0x24fb, 0x390, 0x12d0, 0xa725, 0x367c, 0x0, 0x1);
        gbc.writeMem(0xfd3, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x24fb);
        EXPECT(gbc.pc(), 0x367c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03C5
        gbc.setState(0x7a34, 0x8b94, 0x98d0, 0xbf03, 0x3228, 0x94bb, 0x1, 0x0);
        gbc.writeMem(0x7a34, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8b94);
        EXPECT(gbc.pc(), 0x94bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03C6
        gbc.setState(0x2e01, 0x5a6a, 0xf4f0, 0xb9bb, 0xfe6a, 0x589a, 0x0, 0x0);
        gbc.writeMem(0x2e01, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5a6a);
        EXPECT(gbc.pc(), 0x589a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03C7
        gbc.setState(0x7563, 0x2c5e, 0x8c20, 0x245e, 0x416c, 0x4c56, 0x0, 0x0);
        gbc.writeMem(0x7563, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2c5e);
        EXPECT(gbc.pc(), 0x4c56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03C9
        gbc.setState(0xe5a2, 0x8b07, 0xb240, 0xafba, 0x9fb0, 0xb53f, 0x1, 0x0);
        gbc.writeMem(0xe5a2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8b07);
        EXPECT(gbc.pc(), 0xb53f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a2), 0xe9);
        // E9 03CA
        gbc.setState(0xba2f, 0xce4e, 0x3370, 0xa0f3, 0x78c1, 0xcba1, 0x0, 0x0);
        gbc.writeMem(0xba2f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xce4e);
        EXPECT(gbc.pc(), 0xcba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2f), 0xe9);
        // E9 03CB
        gbc.setState(0xee45, 0x92c9, 0x11f0, 0xd1c4, 0xa9a0, 0xbdac, 0x0, 0x1);
        gbc.writeMem(0xee45, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x92c9);
        EXPECT(gbc.pc(), 0xbdac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee45), 0xe9);
        // E9 03CC
        gbc.setState(0x5ed9, 0xc1b5, 0x1400, 0xb541, 0xa7ea, 0xedd, 0x0, 0x0);
        gbc.writeMem(0x5ed9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc1b5);
        EXPECT(gbc.pc(), 0xedd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03CD
        gbc.setState(0x1ee2, 0x89d1, 0x4eb0, 0x1386, 0xb9e2, 0x1dae, 0x0, 0x1);
        gbc.writeMem(0x1ee2, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x89d1);
        EXPECT(gbc.pc(), 0x1dae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03CE
        gbc.setState(0xaf55, 0xdef1, 0x1670, 0x5090, 0xd84b, 0xf8e0, 0x0, 0x0);
        gbc.writeMem(0xaf55, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdef1);
        EXPECT(gbc.pc(), 0xf8e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf55), 0xe9);
        // E9 03CF
        gbc.setState(0x1340, 0xad86, 0x82f0, 0xb857, 0xcff2, 0xc404, 0x0, 0x0);
        gbc.writeMem(0x1340, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xad86);
        EXPECT(gbc.pc(), 0xc404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03D0
        gbc.setState(0xb6c0, 0x930a, 0x64b0, 0xa99, 0x7fed, 0x37ca, 0x0, 0x0);
        gbc.writeMem(0xb6c0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x930a);
        EXPECT(gbc.pc(), 0x37ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c0), 0xe9);
        // E9 03D1
        gbc.setState(0x5b98, 0xbf7c, 0x8570, 0x6a7c, 0x8131, 0x61f, 0x1, 0x1);
        gbc.writeMem(0x5b98, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbf7c);
        EXPECT(gbc.pc(), 0x61f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03D2
        gbc.setState(0x4940, 0xe484, 0xda90, 0x32a9, 0xec21, 0x5809, 0x0, 0x0);
        gbc.writeMem(0x4940, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe484);
        EXPECT(gbc.pc(), 0x5809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03D3
        gbc.setState(0xb615, 0x5c0d, 0xb750, 0xb6ec, 0x9d, 0x62a2, 0x0, 0x0);
        gbc.writeMem(0xb615, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5c0d);
        EXPECT(gbc.pc(), 0x62a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb615), 0xe9);
        // E9 03D4
        gbc.setState(0x41f1, 0x6fbf, 0xcb90, 0xe1b4, 0xbf89, 0x9f84, 0x0, 0x1);
        gbc.writeMem(0x41f1, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6fbf);
        EXPECT(gbc.pc(), 0x9f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03D5
        gbc.setState(0x22b0, 0x3a9, 0x7390, 0xdd7, 0x9def, 0x5fc8, 0x0, 0x1);
        gbc.writeMem(0x22b0, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3a9);
        EXPECT(gbc.pc(), 0x5fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03D6
        gbc.setState(0xa06, 0xfbbc, 0x67d0, 0x3775, 0x82d5, 0x1acd, 0x1, 0x0);
        gbc.writeMem(0xa06, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfbbc);
        EXPECT(gbc.pc(), 0x1acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03D7
        gbc.setState(0xcf7a, 0x1b36, 0xded0, 0xc0a0, 0x3944, 0xaac7, 0x0, 0x1);
        gbc.writeMem(0xcf7a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1b36);
        EXPECT(gbc.pc(), 0xaac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf7a), 0xe9);
        // E9 03D8
        gbc.setState(0x21, 0xa46a, 0xf50, 0xe75c, 0xc89e, 0xa6e8, 0x0, 0x1);
        gbc.writeMem(0x21, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa46a);
        EXPECT(gbc.pc(), 0xa6e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03D9
        gbc.setState(0xdf93, 0xb1f6, 0xd870, 0x6a73, 0x6ba5, 0xaffb, 0x1, 0x0);
        gbc.writeMem(0xdf93, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb1f6);
        EXPECT(gbc.pc(), 0xaffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf93), 0xe9);
        // E9 03DA
        gbc.setState(0xa2ec, 0xc4bd, 0x12e0, 0x4f19, 0x9e2, 0x129c, 0x0, 0x0);
        gbc.writeMem(0xa2ec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc4bd);
        EXPECT(gbc.pc(), 0x129c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ec), 0xe9);
        // E9 03DB
        gbc.setState(0x58d9, 0x6778, 0x6090, 0x2836, 0x7492, 0x8c78, 0x0, 0x0);
        gbc.writeMem(0x58d9, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6778);
        EXPECT(gbc.pc(), 0x8c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03DC
        gbc.setState(0xec80, 0x218f, 0x98f0, 0x8557, 0x5d31, 0xa5f2, 0x1, 0x0);
        gbc.writeMem(0xec80, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x218f);
        EXPECT(gbc.pc(), 0xa5f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec80), 0xe9);
        // E9 03DD
        gbc.setState(0x2911, 0x9012, 0xecb0, 0xf53f, 0x12f9, 0x6e5e, 0x0, 0x1);
        gbc.writeMem(0x2911, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9012);
        EXPECT(gbc.pc(), 0x6e5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03DE
        gbc.setState(0x141a, 0xf99a, 0x39a0, 0x475, 0x2fe2, 0x3e08, 0x0, 0x0);
        gbc.writeMem(0x141a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf99a);
        EXPECT(gbc.pc(), 0x3e08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03DF
        gbc.setState(0x390f, 0xd7f7, 0x2c20, 0x8df1, 0x266c, 0x595e, 0x0, 0x0);
        gbc.writeMem(0x390f, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd7f7);
        EXPECT(gbc.pc(), 0x595e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // E9 03E1
        gbc.setState(0x5b58, 0x5147, 0x9500, 0x6201, 0xc0f6, 0xebe4, 0x1, 0x1);
        gbc.writeMem(0x5b58, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5147);
        EXPECT(gbc.pc(), 0xebe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03E2
        gbc.setState(0x6401, 0x897d, 0x8980, 0xa0d5, 0x5fb, 0xc84e, 0x0, 0x0);
        gbc.writeMem(0x6401, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x897d);
        EXPECT(gbc.pc(), 0xc84e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03E3
        gbc.setState(0x9ec, 0x1728, 0x8e90, 0x462f, 0x2d8a, 0x76a, 0x1, 0x1);
        gbc.writeMem(0x9ec, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1728);
        EXPECT(gbc.pc(), 0x76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // E9 03E4
        gbc.setState(0xda59, 0x37e4, 0x6ce0, 0x1720, 0x7b11, 0x7d1f, 0x1, 0x1);
        gbc.writeMem(0xda59, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x37e4);
        EXPECT(gbc.pc(), 0x7d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda59), 0xe9);
        // E9 03E5
        gbc.setState(0x718b, 0xb65c, 0x12f0, 0x6935, 0xae57, 0xb3e, 0x1, 0x1);
        gbc.writeMem(0x718b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb65c);
        EXPECT(gbc.pc(), 0xb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // E9 03E6
        gbc.setState(0x5e7d, 0x50a0, 0xe7c0, 0x5cd9, 0xaf68, 0x63d9, 0x1, 0x0);
        gbc.writeMem(0x5e7d, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x50a0);
        EXPECT(gbc.pc(), 0x63d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // E9 03E7
        gbc.setState(0xde30, 0xe140, 0x2460, 0xdf8, 0xb61e, 0x8d75, 0x1, 0x1);
        gbc.writeMem(0xde30, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe140);
        EXPECT(gbc.pc(), 0x8d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde30), 0xe9);
    }
}
#endif
