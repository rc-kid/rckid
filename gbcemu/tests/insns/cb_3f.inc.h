    TEST(gbcemu, opcode_cb_3f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 3F 0000
        gbc.setState(0x2c13, 0xecb1, 0x7b60, 0x8d08, 0x66d1, 0xb29, 0x1, 0x0);
        gbc.writeMem(0x2c13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xecb1);
        EXPECT(gbc.pc(), 0x2c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0001
        gbc.setState(0x6cbf, 0xe38, 0xd8e0, 0xce7e, 0x8bbb, 0xca75, 0x1, 0x0);
        gbc.writeMem(0x6cbf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe38);
        EXPECT(gbc.pc(), 0x6cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0002
        gbc.setState(0x9a04, 0x8d0f, 0xc70, 0x578c, 0xdec8, 0x74da, 0x0, 0x1);
        gbc.writeMem(0x9a04, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8d0f);
        EXPECT(gbc.pc(), 0x9a06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a04), 0xcb);
        EXPECT(gbc.readMem(0x9a05), 0x3f);
        // CB 3F 0003
        gbc.setState(0x97c, 0x1ee4, 0x7580, 0xbb5c, 0xd0ba, 0x6e41, 0x0, 0x0);
        gbc.writeMem(0x97c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1ee4);
        EXPECT(gbc.pc(), 0x97e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0004
        gbc.setState(0xaca, 0xc53f, 0x3af0, 0x3feb, 0xb00b, 0x82e4, 0x1, 0x1);
        gbc.writeMem(0xaca, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc53f);
        EXPECT(gbc.pc(), 0xacc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0005
        gbc.setState(0xbae3, 0x687b, 0x4810, 0x4327, 0xbec7, 0x8c0f, 0x1, 0x1);
        gbc.writeMem(0xbae3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x687b);
        EXPECT(gbc.pc(), 0xbae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae3), 0xcb);
        EXPECT(gbc.readMem(0xbae4), 0x3f);
        // CB 3F 0006
        gbc.setState(0xe264, 0x9713, 0xcf40, 0xf810, 0xcb1c, 0xc944, 0x1, 0x0);
        gbc.writeMem(0xe264, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9713);
        EXPECT(gbc.pc(), 0xe266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe264), 0xcb);
        EXPECT(gbc.readMem(0xe265), 0x3f);
        // CB 3F 0007
        gbc.setState(0x8ee8, 0x3cf2, 0xc350, 0xbe57, 0x1c88, 0x20e9, 0x1, 0x0);
        gbc.writeMem(0x8ee8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3cf2);
        EXPECT(gbc.pc(), 0x8eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee8), 0xcb);
        EXPECT(gbc.readMem(0x8ee9), 0x3f);
        // CB 3F 0008
        gbc.setState(0x5a6c, 0xb3a2, 0xc150, 0xe6be, 0xf54d, 0x6caa, 0x1, 0x1);
        gbc.writeMem(0x5a6c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb3a2);
        EXPECT(gbc.pc(), 0x5a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0009
        gbc.setState(0x5099, 0x65ba, 0x34c0, 0xbda4, 0xc38b, 0x9934, 0x0, 0x0);
        gbc.writeMem(0x5099, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x65ba);
        EXPECT(gbc.pc(), 0x509b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 000A
        gbc.setState(0xab6f, 0x2210, 0xc780, 0xd966, 0x778d, 0xf61e, 0x1, 0x1);
        gbc.writeMem(0xab6f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2210);
        EXPECT(gbc.pc(), 0xab71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6f), 0xcb);
        EXPECT(gbc.readMem(0xab70), 0x3f);
        // CB 3F 000B
        gbc.setState(0xe421, 0x6d91, 0x41f0, 0x2050, 0xa3a8, 0x6d97, 0x0, 0x1);
        gbc.writeMem(0xe421, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6d91);
        EXPECT(gbc.pc(), 0xe423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe421), 0xcb);
        EXPECT(gbc.readMem(0xe422), 0x3f);
        // CB 3F 000C
        gbc.setState(0xc014, 0xed04, 0xf9c0, 0x79d9, 0x1151, 0xb63e, 0x0, 0x1);
        gbc.writeMem(0xc014, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xed04);
        EXPECT(gbc.pc(), 0xc016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc014), 0xcb);
        EXPECT(gbc.readMem(0xc015), 0x3f);
        // CB 3F 000E
        gbc.setState(0xc092, 0xd882, 0x9ea0, 0xa531, 0xa659, 0xd933, 0x1, 0x1);
        gbc.writeMem(0xc092, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd882);
        EXPECT(gbc.pc(), 0xc094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc092), 0xcb);
        EXPECT(gbc.readMem(0xc093), 0x3f);
        // CB 3F 000F
        gbc.setState(0x77a2, 0xd454, 0x1610, 0xd028, 0x1ebe, 0xb413, 0x0, 0x0);
        gbc.writeMem(0x77a2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd454);
        EXPECT(gbc.pc(), 0x77a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0010
        gbc.setState(0xc9b2, 0x2b9f, 0x5670, 0xb8ae, 0xa16d, 0xd180, 0x0, 0x1);
        gbc.writeMem(0xc9b2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2b9f);
        EXPECT(gbc.pc(), 0xc9b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b2), 0xcb);
        EXPECT(gbc.readMem(0xc9b3), 0x3f);
        // CB 3F 0011
        gbc.setState(0xb431, 0xcc4f, 0xfbe0, 0x7ab0, 0x638f, 0x26ed, 0x1, 0x0);
        gbc.writeMem(0xb431, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcc4f);
        EXPECT(gbc.pc(), 0xb433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb431), 0xcb);
        EXPECT(gbc.readMem(0xb432), 0x3f);
        // CB 3F 0012
        gbc.setState(0x1231, 0x6129, 0xb9e0, 0x8724, 0x5746, 0xe6a3, 0x1, 0x0);
        gbc.writeMem(0x1231, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6129);
        EXPECT(gbc.pc(), 0x1233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0013
        gbc.setState(0x9bd4, 0x2fbe, 0xb740, 0x3919, 0x42db, 0xde1e, 0x1, 0x1);
        gbc.writeMem(0x9bd4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2fbe);
        EXPECT(gbc.pc(), 0x9bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd4), 0xcb);
        EXPECT(gbc.readMem(0x9bd5), 0x3f);
        // CB 3F 0014
        gbc.setState(0xcf37, 0xaf23, 0x63d0, 0xfba9, 0x553c, 0x156a, 0x1, 0x0);
        gbc.writeMem(0xcf37, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaf23);
        EXPECT(gbc.pc(), 0xcf39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf37), 0xcb);
        EXPECT(gbc.readMem(0xcf38), 0x3f);
        // CB 3F 0015
        gbc.setState(0x246, 0x9236, 0x54e0, 0x4a8b, 0x8c94, 0xe83c, 0x1, 0x1);
        gbc.writeMem(0x246, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9236);
        EXPECT(gbc.pc(), 0x248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0016
        gbc.setState(0xc9f8, 0xe417, 0xe70, 0x4250, 0x4cb8, 0x3925, 0x0, 0x0);
        gbc.writeMem(0xc9f8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe417);
        EXPECT(gbc.pc(), 0xc9fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f8), 0xcb);
        EXPECT(gbc.readMem(0xc9f9), 0x3f);
        // CB 3F 0017
        gbc.setState(0x7b3f, 0x73b9, 0x95a0, 0x4748, 0x1e3d, 0xd74d, 0x1, 0x1);
        gbc.writeMem(0x7b3f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x73b9);
        EXPECT(gbc.pc(), 0x7b41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0018
        gbc.setState(0xb7a8, 0x2d4, 0xb900, 0xaf91, 0xe74, 0xc6d6, 0x1, 0x0);
        gbc.writeMem(0xb7a8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2d4);
        EXPECT(gbc.pc(), 0xb7aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7a8), 0xcb);
        EXPECT(gbc.readMem(0xb7a9), 0x3f);
        // CB 3F 0019
        gbc.setState(0x7379, 0x973e, 0xcb80, 0x6080, 0x4fa7, 0x71ed, 0x1, 0x0);
        gbc.writeMem(0x7379, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x973e);
        EXPECT(gbc.pc(), 0x737b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 001A
        gbc.setState(0xcfb9, 0xdc11, 0x81a0, 0xb6b0, 0xc22d, 0x17b3, 0x1, 0x0);
        gbc.writeMem(0xcfb9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc11);
        EXPECT(gbc.pc(), 0xcfbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb9), 0xcb);
        EXPECT(gbc.readMem(0xcfba), 0x3f);
        // CB 3F 001B
        gbc.setState(0x15a6, 0xfa51, 0xc1d0, 0x9e45, 0x130d, 0x9278, 0x1, 0x0);
        gbc.writeMem(0x15a6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfa51);
        EXPECT(gbc.pc(), 0x15a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 001C
        gbc.setState(0xac8c, 0xdbfb, 0x7460, 0x5e8d, 0xb22c, 0xe1fd, 0x1, 0x1);
        gbc.writeMem(0xac8c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xdbfb);
        EXPECT(gbc.pc(), 0xac8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac8c), 0xcb);
        EXPECT(gbc.readMem(0xac8d), 0x3f);
        // CB 3F 001E
        gbc.setState(0xcc1d, 0xd5a9, 0x8560, 0x276e, 0x4442, 0x4dd6, 0x1, 0x0);
        gbc.writeMem(0xcc1d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd5a9);
        EXPECT(gbc.pc(), 0xcc1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc1d), 0xcb);
        EXPECT(gbc.readMem(0xcc1e), 0x3f);
        // CB 3F 001F
        gbc.setState(0xda13, 0xf849, 0xdad0, 0x4cc9, 0xe281, 0x2222, 0x1, 0x0);
        gbc.writeMem(0xda13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf849);
        EXPECT(gbc.pc(), 0xda15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda13), 0xcb);
        EXPECT(gbc.readMem(0xda14), 0x3f);
        // CB 3F 0020
        gbc.setState(0x5e7c, 0xc707, 0x2350, 0x55b2, 0xff5f, 0x49ec, 0x1, 0x0);
        gbc.writeMem(0x5e7c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc707);
        EXPECT(gbc.pc(), 0x5e7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0021
        gbc.setState(0x1fe0, 0x6136, 0xf7f0, 0xc65c, 0x5301, 0x4fb2, 0x1, 0x0);
        gbc.writeMem(0x1fe0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6136);
        EXPECT(gbc.pc(), 0x1fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0022
        gbc.setState(0x69b7, 0x5e43, 0x4a0, 0x2f8a, 0xc53b, 0x7d6c, 0x0, 0x0);
        gbc.writeMem(0x69b7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5e43);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0023
        gbc.setState(0x11b8, 0x341c, 0x4620, 0x3b89, 0xafb9, 0xcdc5, 0x1, 0x0);
        gbc.writeMem(0x11b8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x341c);
        EXPECT(gbc.pc(), 0x11ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0024
        gbc.setState(0xea88, 0xcebe, 0x44f0, 0x88b8, 0xda8c, 0xc36, 0x0, 0x1);
        gbc.writeMem(0xea88, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xcebe);
        EXPECT(gbc.pc(), 0xea8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea88), 0xcb);
        EXPECT(gbc.readMem(0xea89), 0x3f);
        // CB 3F 0025
        gbc.setState(0x29d3, 0xeb1, 0xeb60, 0xb145, 0x25ba, 0xa28f, 0x0, 0x0);
        gbc.writeMem(0x29d3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xeb1);
        EXPECT(gbc.pc(), 0x29d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0026
        gbc.setState(0x87f5, 0x801c, 0x900, 0xfaa3, 0x888b, 0x8eb0, 0x0, 0x0);
        gbc.writeMem(0x87f5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x801c);
        EXPECT(gbc.pc(), 0x87f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f5), 0xcb);
        EXPECT(gbc.readMem(0x87f6), 0x3f);
        // CB 3F 0027
        gbc.setState(0xcf26, 0x4651, 0xa830, 0xec68, 0xe964, 0x15ef, 0x1, 0x0);
        gbc.writeMem(0xcf26, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4651);
        EXPECT(gbc.pc(), 0xcf28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf26), 0xcb);
        EXPECT(gbc.readMem(0xcf27), 0x3f);
        // CB 3F 0028
        gbc.setState(0xaa67, 0x86eb, 0x92a0, 0x6e39, 0x7b8e, 0x46bf, 0x0, 0x1);
        gbc.writeMem(0xaa67, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x86eb);
        EXPECT(gbc.pc(), 0xaa69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa67), 0xcb);
        EXPECT(gbc.readMem(0xaa68), 0x3f);
        // CB 3F 0029
        gbc.setState(0x4578, 0xc789, 0x9280, 0x612f, 0x5e8, 0x74a8, 0x1, 0x1);
        gbc.writeMem(0x4578, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc789);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 002A
        gbc.setState(0xea35, 0xa90c, 0x5ba0, 0x3e41, 0xefc1, 0xd94f, 0x1, 0x0);
        gbc.writeMem(0xea35, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa90c);
        EXPECT(gbc.pc(), 0xea37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea35), 0xcb);
        EXPECT(gbc.readMem(0xea36), 0x3f);
        // CB 3F 002B
        gbc.setState(0xc6a7, 0xc101, 0x43c0, 0x176f, 0xb3c9, 0x8e07, 0x1, 0x0);
        gbc.writeMem(0xc6a7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc101);
        EXPECT(gbc.pc(), 0xc6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a7), 0xcb);
        EXPECT(gbc.readMem(0xc6a8), 0x3f);
        // CB 3F 002C
        gbc.setState(0x4af3, 0xe441, 0x850, 0xac9a, 0x9df, 0xb938, 0x1, 0x1);
        gbc.writeMem(0x4af3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe441);
        EXPECT(gbc.pc(), 0x4af5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 002D
        gbc.setState(0x7b52, 0x3622, 0xa490, 0xa293, 0x5337, 0x8f90, 0x0, 0x0);
        gbc.writeMem(0x7b52, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3622);
        EXPECT(gbc.pc(), 0x7b54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 002E
        gbc.setState(0xd53d, 0x4280, 0x4e80, 0xa306, 0x869f, 0x665d, 0x0, 0x1);
        gbc.writeMem(0xd53d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4280);
        EXPECT(gbc.pc(), 0xd53f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53d), 0xcb);
        EXPECT(gbc.readMem(0xd53e), 0x3f);
        // CB 3F 002F
        gbc.setState(0x19c9, 0x3376, 0x54d0, 0xd922, 0x44fe, 0xa32f, 0x1, 0x0);
        gbc.writeMem(0x19c9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3376);
        EXPECT(gbc.pc(), 0x19cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0030
        gbc.setState(0x35c4, 0x3828, 0xf7e0, 0x9747, 0x6027, 0x8e3b, 0x1, 0x1);
        gbc.writeMem(0x35c4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3828);
        EXPECT(gbc.pc(), 0x35c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0031
        gbc.setState(0x4b9, 0xb01a, 0x6af0, 0x73e2, 0x69cc, 0xde4b, 0x1, 0x0);
        gbc.writeMem(0x4b9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb01a);
        EXPECT(gbc.pc(), 0x4bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0032
        gbc.setState(0x3ef0, 0x9e0f, 0xcc30, 0xdcff, 0x532f, 0x2e23, 0x1, 0x0);
        gbc.writeMem(0x3ef0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9e0f);
        EXPECT(gbc.pc(), 0x3ef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0033
        gbc.setState(0xcdd8, 0x41c7, 0x5500, 0x431c, 0x1259, 0xeda6, 0x1, 0x1);
        gbc.writeMem(0xcdd8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x41c7);
        EXPECT(gbc.pc(), 0xcdda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd8), 0xcb);
        EXPECT(gbc.readMem(0xcdd9), 0x3f);
        // CB 3F 0035
        gbc.setState(0x847d, 0xaa78, 0xd350, 0x3d, 0xe47d, 0x3e6f, 0x1, 0x0);
        gbc.writeMem(0x847d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xaa78);
        EXPECT(gbc.pc(), 0x847f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x847d), 0xcb);
        EXPECT(gbc.readMem(0x847e), 0x3f);
        // CB 3F 0036
        gbc.setState(0xe331, 0x598a, 0xa6e0, 0xcb9e, 0x8216, 0xf3d, 0x1, 0x1);
        gbc.writeMem(0xe331, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x598a);
        EXPECT(gbc.pc(), 0xe333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe331), 0xcb);
        EXPECT(gbc.readMem(0xe332), 0x3f);
        // CB 3F 0037
        gbc.setState(0x6309, 0xae1d, 0xe840, 0x490, 0x3460, 0x2369, 0x0, 0x1);
        gbc.writeMem(0x6309, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xae1d);
        EXPECT(gbc.pc(), 0x630b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0039
        gbc.setState(0x73d7, 0xc348, 0x9010, 0xe188, 0x9c0f, 0xef1a, 0x1, 0x0);
        gbc.writeMem(0x73d7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc348);
        EXPECT(gbc.pc(), 0x73d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 003A
        gbc.setState(0x1dd9, 0xb6d4, 0x2e00, 0xd29a, 0xdd0a, 0x56dc, 0x1, 0x1);
        gbc.writeMem(0x1dd9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb6d4);
        EXPECT(gbc.pc(), 0x1ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 003B
        gbc.setState(0x88a8, 0x87c0, 0xe510, 0xe9ab, 0x44a5, 0x931b, 0x0, 0x1);
        gbc.writeMem(0x88a8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x87c0);
        EXPECT(gbc.pc(), 0x88aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a8), 0xcb);
        EXPECT(gbc.readMem(0x88a9), 0x3f);
        // CB 3F 003C
        gbc.setState(0x76ee, 0x8bd0, 0x7b20, 0x6789, 0xfefd, 0x21a9, 0x1, 0x1);
        gbc.writeMem(0x76ee, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8bd0);
        EXPECT(gbc.pc(), 0x76f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 003D
        gbc.setState(0x447, 0x8e00, 0x6440, 0xcc8, 0x63dc, 0x4912, 0x0, 0x0);
        gbc.writeMem(0x447, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8e00);
        EXPECT(gbc.pc(), 0x449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 003E
        gbc.setState(0x91cf, 0xcaaf, 0xab30, 0x8995, 0x5d04, 0xcc9c, 0x1, 0x1);
        gbc.writeMem(0x91cf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x91d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91cf), 0xcb);
        EXPECT(gbc.readMem(0x91d0), 0x3f);
        // CB 3F 003F
        gbc.setState(0xda16, 0xf77d, 0xaaf0, 0x1839, 0xf0f9, 0xa791, 0x0, 0x0);
        gbc.writeMem(0xda16, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf77d);
        EXPECT(gbc.pc(), 0xda18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda16), 0xcb);
        EXPECT(gbc.readMem(0xda17), 0x3f);
        // CB 3F 0040
        gbc.setState(0x65ed, 0xc2b5, 0x8810, 0x14b8, 0x184a, 0x8c3d, 0x0, 0x1);
        gbc.writeMem(0x65ed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc2b5);
        EXPECT(gbc.pc(), 0x65ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0041
        gbc.setState(0x5942, 0xf4a3, 0x5690, 0x7384, 0xc74b, 0xeaef, 0x1, 0x0);
        gbc.writeMem(0x5942, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf4a3);
        EXPECT(gbc.pc(), 0x5944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0042
        gbc.setState(0x2f8c, 0xa72f, 0x44a0, 0xe7b0, 0x958b, 0xa46b, 0x0, 0x0);
        gbc.writeMem(0x2f8c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa72f);
        EXPECT(gbc.pc(), 0x2f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0043
        gbc.setState(0x62b2, 0xcf1e, 0x7820, 0x3b46, 0x4ef9, 0x410, 0x0, 0x1);
        gbc.writeMem(0x62b2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcf1e);
        EXPECT(gbc.pc(), 0x62b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0044
        gbc.setState(0xbc11, 0xb7a6, 0x6230, 0x3003, 0xc1ea, 0xb738, 0x1, 0x1);
        gbc.writeMem(0xbc11, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb7a6);
        EXPECT(gbc.pc(), 0xbc13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc11), 0xcb);
        EXPECT(gbc.readMem(0xbc12), 0x3f);
        // CB 3F 0045
        gbc.setState(0x17d0, 0xde40, 0x67e0, 0xc6bd, 0x4b33, 0x49e5, 0x1, 0x0);
        gbc.writeMem(0x17d0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xde40);
        EXPECT(gbc.pc(), 0x17d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0046
        gbc.setState(0x5fe1, 0xa283, 0x9050, 0x5ba3, 0xabed, 0x99eb, 0x1, 0x0);
        gbc.writeMem(0x5fe1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa283);
        EXPECT(gbc.pc(), 0x5fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0047
        gbc.setState(0x283e, 0xc4f, 0x1260, 0xd503, 0x8960, 0xfe48, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc4f);
        EXPECT(gbc.pc(), 0x2840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0048
        gbc.setState(0xb708, 0xd486, 0x14e0, 0xf7b0, 0xeb1f, 0xdd85, 0x1, 0x0);
        gbc.writeMem(0xb708, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd486);
        EXPECT(gbc.pc(), 0xb70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb708), 0xcb);
        EXPECT(gbc.readMem(0xb709), 0x3f);
        // CB 3F 0049
        gbc.setState(0x65da, 0x5989, 0x5610, 0x9a84, 0x630a, 0xdbe7, 0x0, 0x0);
        gbc.writeMem(0x65da, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5989);
        EXPECT(gbc.pc(), 0x65dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 004A
        gbc.setState(0xc6e5, 0x3d4c, 0xa3d0, 0x5509, 0x9d58, 0x54a3, 0x1, 0x0);
        gbc.writeMem(0xc6e5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3d4c);
        EXPECT(gbc.pc(), 0xc6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6e5), 0xcb);
        EXPECT(gbc.readMem(0xc6e6), 0x3f);
        // CB 3F 004B
        gbc.setState(0xdabe, 0x2108, 0xf950, 0x72bf, 0xe20a, 0x13bf, 0x0, 0x0);
        gbc.writeMem(0xdabe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2108);
        EXPECT(gbc.pc(), 0xdac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdabe), 0xcb);
        EXPECT(gbc.readMem(0xdabf), 0x3f);
        // CB 3F 004C
        gbc.setState(0x7252, 0x4253, 0x1310, 0x65b7, 0x1e7f, 0x1125, 0x0, 0x0);
        gbc.writeMem(0x7252, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4253);
        EXPECT(gbc.pc(), 0x7254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 004D
        gbc.setState(0xade3, 0xcdea, 0xb1d0, 0x66ed, 0xa855, 0xbe4f, 0x0, 0x1);
        gbc.writeMem(0xade3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcdea);
        EXPECT(gbc.pc(), 0xade5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade3), 0xcb);
        EXPECT(gbc.readMem(0xade4), 0x3f);
        // CB 3F 004E
        gbc.setState(0x8ced, 0x71ed, 0xebc0, 0xcb6, 0xb3b5, 0xe3dc, 0x1, 0x0);
        gbc.writeMem(0x8ced, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x71ed);
        EXPECT(gbc.pc(), 0x8cef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ced), 0xcb);
        EXPECT(gbc.readMem(0x8cee), 0x3f);
        // CB 3F 004F
        gbc.setState(0x3e4e, 0xd146, 0xa420, 0xc758, 0xa608, 0x2872, 0x1, 0x1);
        gbc.writeMem(0x3e4e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd146);
        EXPECT(gbc.pc(), 0x3e50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0050
        gbc.setState(0x3acc, 0x8d1b, 0xdb50, 0x11a8, 0xe1a5, 0xc3c0, 0x0, 0x1);
        gbc.writeMem(0x3acc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8d1b);
        EXPECT(gbc.pc(), 0x3ace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0051
        gbc.setState(0xafb6, 0xb5e, 0xa4e0, 0xc0a3, 0xa827, 0x34a1, 0x1, 0x1);
        gbc.writeMem(0xafb6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb5e);
        EXPECT(gbc.pc(), 0xafb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb6), 0xcb);
        EXPECT(gbc.readMem(0xafb7), 0x3f);
        // CB 3F 0052
        gbc.setState(0x33b, 0x1d00, 0x53b0, 0x9cbd, 0x4ea8, 0xf44f, 0x0, 0x1);
        gbc.writeMem(0x33b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1d00);
        EXPECT(gbc.pc(), 0x33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0053
        gbc.setState(0x5db, 0x1faf, 0xaea0, 0x8183, 0x913d, 0xf377, 0x0, 0x0);
        gbc.writeMem(0x5db, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1faf);
        EXPECT(gbc.pc(), 0x5dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0054
        gbc.setState(0xe08b, 0x1842, 0xa530, 0xdf55, 0xd8f6, 0x5716, 0x1, 0x1);
        gbc.writeMem(0xe08b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1842);
        EXPECT(gbc.pc(), 0xe08d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe08b), 0xcb);
        EXPECT(gbc.readMem(0xe08c), 0x3f);
        // CB 3F 0055
        gbc.setState(0x1d80, 0x13ae, 0x6820, 0xf2de, 0x13ea, 0xd88f, 0x1, 0x0);
        gbc.writeMem(0x1d80, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x13ae);
        EXPECT(gbc.pc(), 0x1d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0056
        gbc.setState(0x465f, 0xa51e, 0xa3a0, 0x2748, 0xd703, 0x977c, 0x1, 0x1);
        gbc.writeMem(0x465f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa51e);
        EXPECT(gbc.pc(), 0x4661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0057
        gbc.setState(0x7b34, 0xbe93, 0xa680, 0x6df4, 0xc3cb, 0xc1ff, 0x1, 0x0);
        gbc.writeMem(0x7b34, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbe93);
        EXPECT(gbc.pc(), 0x7b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0058
        gbc.setState(0xa6b, 0x2403, 0x4030, 0x8238, 0x398e, 0x7058, 0x1, 0x0);
        gbc.writeMem(0xa6b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2403);
        EXPECT(gbc.pc(), 0xa6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0059
        gbc.setState(0xd0e3, 0xad39, 0x2b10, 0x402a, 0x5733, 0x4c6d, 0x0, 0x0);
        gbc.writeMem(0xd0e3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xad39);
        EXPECT(gbc.pc(), 0xd0e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e3), 0xcb);
        EXPECT(gbc.readMem(0xd0e4), 0x3f);
        // CB 3F 005A
        gbc.setState(0x55, 0xc592, 0xbc60, 0xb79a, 0xc391, 0xf1ff, 0x1, 0x0);
        gbc.writeMem(0x55, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc592);
        EXPECT(gbc.pc(), 0x57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 005C
        gbc.setState(0x9132, 0x1466, 0x1d70, 0x7c34, 0x1ee1, 0x3096, 0x1, 0x1);
        gbc.writeMem(0x9132, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1466);
        EXPECT(gbc.pc(), 0x9134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9132), 0xcb);
        EXPECT(gbc.readMem(0x9133), 0x3f);
        // CB 3F 005D
        gbc.setState(0xe21b, 0x4b78, 0xa890, 0x6237, 0xee35, 0x87ad, 0x0, 0x0);
        gbc.writeMem(0xe21b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4b78);
        EXPECT(gbc.pc(), 0xe21d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe21b), 0xcb);
        EXPECT(gbc.readMem(0xe21c), 0x3f);
        // CB 3F 005E
        gbc.setState(0xc104, 0x5e2e, 0xc060, 0x4103, 0xa908, 0x5735, 0x1, 0x1);
        gbc.writeMem(0xc104, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5e2e);
        EXPECT(gbc.pc(), 0xc106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc104), 0xcb);
        EXPECT(gbc.readMem(0xc105), 0x3f);
        // CB 3F 005F
        gbc.setState(0xc7ea, 0xcaab, 0x5280, 0xc052, 0xa16c, 0x2cd2, 0x0, 0x0);
        gbc.writeMem(0xc7ea, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcaab);
        EXPECT(gbc.pc(), 0xc7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ea), 0xcb);
        EXPECT(gbc.readMem(0xc7eb), 0x3f);
        // CB 3F 0061
        gbc.setState(0xe40e, 0x5bb, 0x54b0, 0xa7d3, 0x72cd, 0x7ebe, 0x0, 0x0);
        gbc.writeMem(0xe40e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5bb);
        EXPECT(gbc.pc(), 0xe410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40e), 0xcb);
        EXPECT(gbc.readMem(0xe40f), 0x3f);
        // CB 3F 0062
        gbc.setState(0x526d, 0xac90, 0x29b0, 0xa9c7, 0x1309, 0xc1b7, 0x0, 0x1);
        gbc.writeMem(0x526d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xac90);
        EXPECT(gbc.pc(), 0x526f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0063
        gbc.setState(0x6a5, 0xa4b0, 0x83d0, 0xb845, 0xc5c6, 0x80ba, 0x1, 0x0);
        gbc.writeMem(0x6a5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa4b0);
        EXPECT(gbc.pc(), 0x6a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0064
        gbc.setState(0x3575, 0xfb39, 0x8ee0, 0xdcd5, 0x6503, 0x41ed, 0x1, 0x0);
        gbc.writeMem(0x3575, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfb39);
        EXPECT(gbc.pc(), 0x3577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0065
        gbc.setState(0x8110, 0x58, 0x1070, 0xa8a3, 0xea64, 0xeb85, 0x1, 0x0);
        gbc.writeMem(0x8110, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x58);
        EXPECT(gbc.pc(), 0x8112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8110), 0xcb);
        EXPECT(gbc.readMem(0x8111), 0x3f);
        // CB 3F 0067
        gbc.setState(0x90ae, 0x6394, 0x5de0, 0x59a, 0xf9fa, 0x9cfa, 0x0, 0x0);
        gbc.writeMem(0x90ae, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6394);
        EXPECT(gbc.pc(), 0x90b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ae), 0xcb);
        EXPECT(gbc.readMem(0x90af), 0x3f);
        // CB 3F 0068
        gbc.setState(0x7352, 0x57f9, 0x75c0, 0xd118, 0x62d8, 0x6e8, 0x1, 0x1);
        gbc.writeMem(0x7352, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x57f9);
        EXPECT(gbc.pc(), 0x7354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 006A
        gbc.setState(0x71a3, 0x2d9d, 0x38f0, 0xfab4, 0x295b, 0xc627, 0x1, 0x1);
        gbc.writeMem(0x71a3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2d9d);
        EXPECT(gbc.pc(), 0x71a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 006C
        gbc.setState(0x3d03, 0x2467, 0xe410, 0x58fc, 0xfacd, 0xf23c, 0x1, 0x1);
        gbc.writeMem(0x3d03, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2467);
        EXPECT(gbc.pc(), 0x3d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 006D
        gbc.setState(0xa188, 0xee9f, 0x4ed0, 0x702c, 0x134e, 0x75b9, 0x0, 0x0);
        gbc.writeMem(0xa188, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xee9f);
        EXPECT(gbc.pc(), 0xa18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa188), 0xcb);
        EXPECT(gbc.readMem(0xa189), 0x3f);
        // CB 3F 006E
        gbc.setState(0xd727, 0xb02b, 0xbfe0, 0x7305, 0x6acc, 0xd07, 0x1, 0x0);
        gbc.writeMem(0xd727, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb02b);
        EXPECT(gbc.pc(), 0xd729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd727), 0xcb);
        EXPECT(gbc.readMem(0xd728), 0x3f);
        // CB 3F 006F
        gbc.setState(0x5151, 0x9bc, 0x6d30, 0x6cb8, 0x51e, 0xa2e8, 0x0, 0x0);
        gbc.writeMem(0x5151, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9bc);
        EXPECT(gbc.pc(), 0x5153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0070
        gbc.setState(0x18e2, 0xec5b, 0x2640, 0x4354, 0x1a0d, 0xecd0, 0x0, 0x1);
        gbc.writeMem(0x18e2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xec5b);
        EXPECT(gbc.pc(), 0x18e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0071
        gbc.setState(0x205, 0x2e2d, 0x5e0, 0x2cc8, 0xae12, 0x388b, 0x1, 0x1);
        gbc.writeMem(0x205, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2e2d);
        EXPECT(gbc.pc(), 0x207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0072
        gbc.setState(0xd75d, 0xed28, 0x4c20, 0x25d9, 0x726d, 0xbd99, 0x1, 0x1);
        gbc.writeMem(0xd75d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xed28);
        EXPECT(gbc.pc(), 0xd75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75d), 0xcb);
        EXPECT(gbc.readMem(0xd75e), 0x3f);
        // CB 3F 0073
        gbc.setState(0x3bc4, 0x1c89, 0x7b70, 0x13c, 0x2003, 0xd007, 0x1, 0x1);
        gbc.writeMem(0x3bc4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1c89);
        EXPECT(gbc.pc(), 0x3bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0074
        gbc.setState(0xbadf, 0xf8cd, 0x2010, 0x48f, 0xd6f7, 0x5af, 0x1, 0x0);
        gbc.writeMem(0xbadf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf8cd);
        EXPECT(gbc.pc(), 0xbae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbadf), 0xcb);
        EXPECT(gbc.readMem(0xbae0), 0x3f);
        // CB 3F 0075
        gbc.setState(0xc244, 0x7ab9, 0x5490, 0x4d5, 0x1b55, 0x84d5, 0x1, 0x1);
        gbc.writeMem(0xc244, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7ab9);
        EXPECT(gbc.pc(), 0xc246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc244), 0xcb);
        EXPECT(gbc.readMem(0xc245), 0x3f);
        // CB 3F 0076
        gbc.setState(0x327f, 0x96ea, 0xc4f0, 0xcfc6, 0x309d, 0xed86, 0x1, 0x1);
        gbc.writeMem(0x327f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x96ea);
        EXPECT(gbc.pc(), 0x3281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0077
        gbc.setState(0xb8a6, 0x18a3, 0xda70, 0xbae0, 0xffd1, 0x90de, 0x1, 0x0);
        gbc.writeMem(0xb8a6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x18a3);
        EXPECT(gbc.pc(), 0xb8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8a6), 0xcb);
        EXPECT(gbc.readMem(0xb8a7), 0x3f);
        // CB 3F 0078
        gbc.setState(0xe436, 0xcbe2, 0x42e0, 0x92f3, 0x3671, 0x15d7, 0x0, 0x1);
        gbc.writeMem(0xe436, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcbe2);
        EXPECT(gbc.pc(), 0xe438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe436), 0xcb);
        EXPECT(gbc.readMem(0xe437), 0x3f);
        // CB 3F 0079
        gbc.setState(0x4e40, 0xa4de, 0x61b0, 0xe008, 0xd66c, 0x3692, 0x1, 0x1);
        gbc.writeMem(0x4e40, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa4de);
        EXPECT(gbc.pc(), 0x4e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 007A
        gbc.setState(0xb182, 0x3d03, 0x9eb0, 0xfc48, 0xaf82, 0xb967, 0x1, 0x1);
        gbc.writeMem(0xb182, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3d03);
        EXPECT(gbc.pc(), 0xb184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb182), 0xcb);
        EXPECT(gbc.readMem(0xb183), 0x3f);
        // CB 3F 007B
        gbc.setState(0xae37, 0xa538, 0x2d00, 0x16ec, 0xb70, 0xd7c8, 0x0, 0x0);
        gbc.writeMem(0xae37, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa538);
        EXPECT(gbc.pc(), 0xae39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae37), 0xcb);
        EXPECT(gbc.readMem(0xae38), 0x3f);
        // CB 3F 007C
        gbc.setState(0x5360, 0xfdb6, 0x29c0, 0xed7, 0xeeda, 0xb009, 0x0, 0x0);
        gbc.writeMem(0x5360, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfdb6);
        EXPECT(gbc.pc(), 0x5362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 007D
        gbc.setState(0x25a3, 0x3734, 0x39e0, 0x5b80, 0x1942, 0x12a0, 0x1, 0x0);
        gbc.writeMem(0x25a3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3734);
        EXPECT(gbc.pc(), 0x25a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 007E
        gbc.setState(0xe5b6, 0x3f6e, 0x1f20, 0xe3df, 0x6945, 0xa8d8, 0x0, 0x0);
        gbc.writeMem(0xe5b6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3f6e);
        EXPECT(gbc.pc(), 0xe5b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b6), 0xcb);
        EXPECT(gbc.readMem(0xe5b7), 0x3f);
        // CB 3F 0080
        gbc.setState(0x2f1f, 0x6e33, 0x78f0, 0x95bd, 0x9530, 0x3d36, 0x0, 0x0);
        gbc.writeMem(0x2f1f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6e33);
        EXPECT(gbc.pc(), 0x2f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0081
        gbc.setState(0xecc5, 0x8afd, 0x1120, 0xe46a, 0x7f90, 0xf633, 0x0, 0x1);
        gbc.writeMem(0xecc5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8afd);
        EXPECT(gbc.pc(), 0xecc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc5), 0xcb);
        EXPECT(gbc.readMem(0xecc6), 0x3f);
        // CB 3F 0082
        gbc.setState(0xe1cb, 0xf2a4, 0x8420, 0x9675, 0x185f, 0xe342, 0x1, 0x1);
        gbc.writeMem(0xe1cb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf2a4);
        EXPECT(gbc.pc(), 0xe1cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1cb), 0xcb);
        EXPECT(gbc.readMem(0xe1cc), 0x3f);
        // CB 3F 0083
        gbc.setState(0xc3be, 0x750d, 0xa6d0, 0x577a, 0x77e5, 0x2ed2, 0x0, 0x1);
        gbc.writeMem(0xc3be, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x750d);
        EXPECT(gbc.pc(), 0xc3c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3be), 0xcb);
        EXPECT(gbc.readMem(0xc3bf), 0x3f);
        // CB 3F 0084
        gbc.setState(0x9688, 0x6ccb, 0xd7e0, 0x6d34, 0x1757, 0x1445, 0x1, 0x1);
        gbc.writeMem(0x9688, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6ccb);
        EXPECT(gbc.pc(), 0x968a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9688), 0xcb);
        EXPECT(gbc.readMem(0x9689), 0x3f);
        // CB 3F 0085
        gbc.setState(0x7ea1, 0xdd60, 0x9c0, 0xacaa, 0x2c39, 0x5252, 0x1, 0x0);
        gbc.writeMem(0x7ea1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdd60);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0086
        gbc.setState(0xb3f7, 0xbfbe, 0x65c0, 0xf15a, 0x80fc, 0x865a, 0x0, 0x1);
        gbc.writeMem(0xb3f7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbfbe);
        EXPECT(gbc.pc(), 0xb3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f7), 0xcb);
        EXPECT(gbc.readMem(0xb3f8), 0x3f);
        // CB 3F 0087
        gbc.setState(0x94af, 0xa37, 0x8920, 0x10c3, 0x5d07, 0x4e0c, 0x1, 0x0);
        gbc.writeMem(0x94af, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa37);
        EXPECT(gbc.pc(), 0x94b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94af), 0xcb);
        EXPECT(gbc.readMem(0x94b0), 0x3f);
        // CB 3F 0088
        gbc.setState(0x79ca, 0x1632, 0xe910, 0x7e14, 0x2bad, 0xfeca, 0x0, 0x1);
        gbc.writeMem(0x79ca, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1632);
        EXPECT(gbc.pc(), 0x79cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0089
        gbc.setState(0x452f, 0x5429, 0xc990, 0x9b74, 0x7ef5, 0x5d03, 0x0, 0x1);
        gbc.writeMem(0x452f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5429);
        EXPECT(gbc.pc(), 0x4531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 008A
        gbc.setState(0x9b93, 0x53d4, 0x6d90, 0x9128, 0x45aa, 0xe3ef, 0x1, 0x0);
        gbc.writeMem(0x9b93, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x53d4);
        EXPECT(gbc.pc(), 0x9b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b93), 0xcb);
        EXPECT(gbc.readMem(0x9b94), 0x3f);
        // CB 3F 008B
        gbc.setState(0xb645, 0xbabe, 0x6d80, 0x4576, 0xe14b, 0x8e03, 0x1, 0x0);
        gbc.writeMem(0xb645, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbabe);
        EXPECT(gbc.pc(), 0xb647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb645), 0xcb);
        EXPECT(gbc.readMem(0xb646), 0x3f);
        // CB 3F 008C
        gbc.setState(0xbfdc, 0x3f4, 0x7100, 0xaeb3, 0xff5f, 0x45e8, 0x0, 0x1);
        gbc.writeMem(0xbfdc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3f4);
        EXPECT(gbc.pc(), 0xbfde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdc), 0xcb);
        EXPECT(gbc.readMem(0xbfdd), 0x3f);
        // CB 3F 008D
        gbc.setState(0x4d01, 0x719, 0xfbb0, 0xc34b, 0xe50f, 0x7689, 0x0, 0x0);
        gbc.writeMem(0x4d01, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x719);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 008E
        gbc.setState(0x3451, 0x9f06, 0x490, 0x913d, 0xbd8e, 0x46a3, 0x1, 0x0);
        gbc.writeMem(0x3451, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9f06);
        EXPECT(gbc.pc(), 0x3453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0090
        gbc.setState(0x66c9, 0xe565, 0x4a60, 0x7b29, 0xc4f2, 0xb519, 0x1, 0x1);
        gbc.writeMem(0x66c9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe565);
        EXPECT(gbc.pc(), 0x66cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0091
        gbc.setState(0xa156, 0x4fb6, 0xc710, 0xf635, 0xf89b, 0x36c6, 0x1, 0x0);
        gbc.writeMem(0xa156, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4fb6);
        EXPECT(gbc.pc(), 0xa158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa156), 0xcb);
        EXPECT(gbc.readMem(0xa157), 0x3f);
        // CB 3F 0092
        gbc.setState(0x4bfd, 0x5a06, 0xfb40, 0xa6d6, 0x7220, 0x9195, 0x0, 0x0);
        gbc.writeMem(0x4bfd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5a06);
        EXPECT(gbc.pc(), 0x4bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0094
        gbc.setState(0x224f, 0xec9b, 0x1020, 0x7bb3, 0x9cad, 0xbb53, 0x0, 0x1);
        gbc.writeMem(0x224f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xec9b);
        EXPECT(gbc.pc(), 0x2251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0095
        gbc.setState(0x9e61, 0x5696, 0x3830, 0x48a2, 0xdfe3, 0x5c0e, 0x1, 0x1);
        gbc.writeMem(0x9e61, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5696);
        EXPECT(gbc.pc(), 0x9e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e61), 0xcb);
        EXPECT(gbc.readMem(0x9e62), 0x3f);
        // CB 3F 0096
        gbc.setState(0x12ec, 0x402e, 0x4570, 0x688b, 0xa1f6, 0x6567, 0x1, 0x1);
        gbc.writeMem(0x12ec, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x402e);
        EXPECT(gbc.pc(), 0x12ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0098
        gbc.setState(0x13e4, 0x3907, 0x4d90, 0x3e24, 0x8f3d, 0x90e0, 0x0, 0x1);
        gbc.writeMem(0x13e4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3907);
        EXPECT(gbc.pc(), 0x13e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0099
        gbc.setState(0x2dcc, 0x97d8, 0x3950, 0x3825, 0x3b68, 0x3f7, 0x0, 0x1);
        gbc.writeMem(0x2dcc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x97d8);
        EXPECT(gbc.pc(), 0x2dce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 009A
        gbc.setState(0x43ec, 0x8b62, 0x320, 0x8ef0, 0x79f9, 0x8c2d, 0x1, 0x1);
        gbc.writeMem(0x43ec, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8b62);
        EXPECT(gbc.pc(), 0x43ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 009C
        gbc.setState(0x1038, 0xb472, 0x570, 0x1b09, 0xf213, 0xbceb, 0x1, 0x1);
        gbc.writeMem(0x1038, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb472);
        EXPECT(gbc.pc(), 0x103a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 009D
        gbc.setState(0x1ef7, 0xd28b, 0xbab0, 0xa26, 0x4950, 0x3830, 0x0, 0x1);
        gbc.writeMem(0x1ef7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd28b);
        EXPECT(gbc.pc(), 0x1ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 009E
        gbc.setState(0xf95, 0x128c, 0xe7a0, 0x4b98, 0x2622, 0x7e9d, 0x0, 0x1);
        gbc.writeMem(0xf95, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x128c);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 009F
        gbc.setState(0x50ad, 0xc43e, 0x8980, 0x6661, 0xa487, 0x5f70, 0x0, 0x1);
        gbc.writeMem(0x50ad, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc43e);
        EXPECT(gbc.pc(), 0x50af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00A0
        gbc.setState(0xe33, 0x8596, 0xacb0, 0xc94, 0x3aa0, 0xccdc, 0x0, 0x1);
        gbc.writeMem(0xe33, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8596);
        EXPECT(gbc.pc(), 0xe35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00A1
        gbc.setState(0xa991, 0xe156, 0x8890, 0x4beb, 0xc3e3, 0xbdf9, 0x0, 0x0);
        gbc.writeMem(0xa991, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe156);
        EXPECT(gbc.pc(), 0xa993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa991), 0xcb);
        EXPECT(gbc.readMem(0xa992), 0x3f);
        // CB 3F 00A2
        gbc.setState(0xe3b1, 0x64e1, 0xa0, 0xb031, 0xcacc, 0x75b, 0x0, 0x0);
        gbc.writeMem(0xe3b1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x64e1);
        EXPECT(gbc.pc(), 0xe3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b1), 0xcb);
        EXPECT(gbc.readMem(0xe3b2), 0x3f);
        // CB 3F 00A3
        gbc.setState(0x9150, 0xcaf1, 0x6ba0, 0x4ddf, 0x56f6, 0xf62, 0x0, 0x1);
        gbc.writeMem(0x9150, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xcaf1);
        EXPECT(gbc.pc(), 0x9152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9150), 0xcb);
        EXPECT(gbc.readMem(0x9151), 0x3f);
        // CB 3F 00A5
        gbc.setState(0xa485, 0x5290, 0xd340, 0xa5ba, 0xd529, 0x569d, 0x0, 0x0);
        gbc.writeMem(0xa485, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5290);
        EXPECT(gbc.pc(), 0xa487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa485), 0xcb);
        EXPECT(gbc.readMem(0xa486), 0x3f);
        // CB 3F 00A6
        gbc.setState(0xc59, 0xe7fd, 0xcf60, 0xfa0d, 0x80d2, 0xe2a8, 0x0, 0x0);
        gbc.writeMem(0xc59, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe7fd);
        EXPECT(gbc.pc(), 0xc5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00A7
        gbc.setState(0x6b47, 0xcbac, 0x9df0, 0x1ddc, 0x4fcc, 0xf63, 0x1, 0x1);
        gbc.writeMem(0x6b47, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcbac);
        EXPECT(gbc.pc(), 0x6b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00A8
        gbc.setState(0xd753, 0x3a06, 0xcde0, 0x4dc, 0x3664, 0xfe42, 0x1, 0x1);
        gbc.writeMem(0xd753, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3a06);
        EXPECT(gbc.pc(), 0xd755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd753), 0xcb);
        EXPECT(gbc.readMem(0xd754), 0x3f);
        // CB 3F 00A9
        gbc.setState(0x8049, 0x391f, 0x2290, 0xe0cd, 0x63d0, 0x2d3b, 0x0, 0x1);
        gbc.writeMem(0x8049, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x391f);
        EXPECT(gbc.pc(), 0x804b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8049), 0xcb);
        EXPECT(gbc.readMem(0x804a), 0x3f);
        // CB 3F 00AA
        gbc.setState(0x7e3b, 0xce95, 0x87f0, 0x7d6e, 0x8476, 0xb5cb, 0x0, 0x1);
        gbc.writeMem(0x7e3b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xce95);
        EXPECT(gbc.pc(), 0x7e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00AB
        gbc.setState(0x109b, 0x10e5, 0xec40, 0x6113, 0xed5a, 0x7bc8, 0x0, 0x1);
        gbc.writeMem(0x109b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x10e5);
        EXPECT(gbc.pc(), 0x109d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00AC
        gbc.setState(0x462a, 0xb1a2, 0x160, 0x93ac, 0x7c2c, 0xb584, 0x1, 0x0);
        gbc.writeMem(0x462a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb1a2);
        EXPECT(gbc.pc(), 0x462c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00AD
        gbc.setState(0x24af, 0xf308, 0x71d0, 0x36dc, 0xd177, 0x583, 0x1, 0x0);
        gbc.writeMem(0x24af, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf308);
        EXPECT(gbc.pc(), 0x24b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00AF
        gbc.setState(0xbf0c, 0xe230, 0xdbe0, 0x3f0d, 0xff31, 0xf6e4, 0x1, 0x0);
        gbc.writeMem(0xbf0c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe230);
        EXPECT(gbc.pc(), 0xbf0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf0c), 0xcb);
        EXPECT(gbc.readMem(0xbf0d), 0x3f);
        // CB 3F 00B0
        gbc.setState(0x2d90, 0xd125, 0x9010, 0x50e4, 0x53fe, 0xfa06, 0x0, 0x1);
        gbc.writeMem(0x2d90, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd125);
        EXPECT(gbc.pc(), 0x2d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00B1
        gbc.setState(0xcefe, 0xb800, 0x9640, 0x8bd8, 0x2dfc, 0xb36a, 0x1, 0x1);
        gbc.writeMem(0xcefe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb800);
        EXPECT(gbc.pc(), 0xcf00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcefe), 0xcb);
        EXPECT(gbc.readMem(0xceff), 0x3f);
        // CB 3F 00B2
        gbc.setState(0xb99b, 0x44d4, 0x2530, 0xdbc2, 0x4450, 0xe402, 0x0, 0x0);
        gbc.writeMem(0xb99b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x44d4);
        EXPECT(gbc.pc(), 0xb99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb99b), 0xcb);
        EXPECT(gbc.readMem(0xb99c), 0x3f);
        // CB 3F 00B3
        gbc.setState(0x2936, 0x3e65, 0xee50, 0xee16, 0x1a23, 0x128, 0x1, 0x1);
        gbc.writeMem(0x2936, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3e65);
        EXPECT(gbc.pc(), 0x2938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00B4
        gbc.setState(0x3273, 0x6ab1, 0x1e60, 0x6854, 0x431, 0xcef2, 0x1, 0x1);
        gbc.writeMem(0x3273, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6ab1);
        EXPECT(gbc.pc(), 0x3275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00B5
        gbc.setState(0x7b5b, 0xe936, 0x4d80, 0x3036, 0x9ad5, 0x4321, 0x0, 0x0);
        gbc.writeMem(0x7b5b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe936);
        EXPECT(gbc.pc(), 0x7b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00B6
        gbc.setState(0x744, 0x8ce4, 0x6ad0, 0xfc16, 0x2dcf, 0x9a9b, 0x0, 0x1);
        gbc.writeMem(0x744, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8ce4);
        EXPECT(gbc.pc(), 0x746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00B7
        gbc.setState(0x1cf9, 0xc8da, 0x770, 0xdf4e, 0x6037, 0x5033, 0x0, 0x1);
        gbc.writeMem(0x1cf9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc8da);
        EXPECT(gbc.pc(), 0x1cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00B8
        gbc.setState(0x33e4, 0x4d79, 0x6c40, 0xebff, 0x754d, 0x7e88, 0x1, 0x1);
        gbc.writeMem(0x33e4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4d79);
        EXPECT(gbc.pc(), 0x33e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00B9
        gbc.setState(0x2512, 0xc6d0, 0x96b0, 0xa8f5, 0xd51b, 0x2125, 0x0, 0x0);
        gbc.writeMem(0x2512, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc6d0);
        EXPECT(gbc.pc(), 0x2514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00BA
        gbc.setState(0xa4a1, 0x190a, 0xb020, 0x6b8c, 0xa8ed, 0x74d8, 0x0, 0x0);
        gbc.writeMem(0xa4a1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x190a);
        EXPECT(gbc.pc(), 0xa4a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a1), 0xcb);
        EXPECT(gbc.readMem(0xa4a2), 0x3f);
        // CB 3F 00BB
        gbc.setState(0xcf64, 0xac56, 0xed20, 0x8311, 0x893, 0x7b4f, 0x0, 0x1);
        gbc.writeMem(0xcf64, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xac56);
        EXPECT(gbc.pc(), 0xcf66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf64), 0xcb);
        EXPECT(gbc.readMem(0xcf65), 0x3f);
        // CB 3F 00BC
        gbc.setState(0xa5ab, 0x1481, 0x8160, 0x4178, 0x6785, 0x47e8, 0x0, 0x1);
        gbc.writeMem(0xa5ab, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1481);
        EXPECT(gbc.pc(), 0xa5ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ab), 0xcb);
        EXPECT(gbc.readMem(0xa5ac), 0x3f);
        // CB 3F 00BD
        gbc.setState(0xa15c, 0xe775, 0x5870, 0x2abf, 0x453d, 0x274c, 0x0, 0x1);
        gbc.writeMem(0xa15c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe775);
        EXPECT(gbc.pc(), 0xa15e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15c), 0xcb);
        EXPECT(gbc.readMem(0xa15d), 0x3f);
        // CB 3F 00BE
        gbc.setState(0x1c27, 0x8719, 0xa340, 0xab9a, 0xa797, 0xa7a2, 0x0, 0x1);
        gbc.writeMem(0x1c27, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8719);
        EXPECT(gbc.pc(), 0x1c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00BF
        gbc.setState(0x2beb, 0xbeef, 0x2720, 0x187, 0xb2db, 0xa4b, 0x0, 0x0);
        gbc.writeMem(0x2beb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbeef);
        EXPECT(gbc.pc(), 0x2bed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00C0
        gbc.setState(0xaf7d, 0xb613, 0x3590, 0x512e, 0x12b0, 0x6f5e, 0x1, 0x1);
        gbc.writeMem(0xaf7d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb613);
        EXPECT(gbc.pc(), 0xaf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf7d), 0xcb);
        EXPECT(gbc.readMem(0xaf7e), 0x3f);
        // CB 3F 00C1
        gbc.setState(0xa742, 0x47d0, 0x9f40, 0x58a1, 0x68dc, 0x8514, 0x0, 0x1);
        gbc.writeMem(0xa742, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x47d0);
        EXPECT(gbc.pc(), 0xa744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa742), 0xcb);
        EXPECT(gbc.readMem(0xa743), 0x3f);
        // CB 3F 00C2
        gbc.setState(0xda30, 0x9874, 0xf3e0, 0x7f6b, 0xca56, 0x55, 0x0, 0x0);
        gbc.writeMem(0xda30, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9874);
        EXPECT(gbc.pc(), 0xda32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda30), 0xcb);
        EXPECT(gbc.readMem(0xda31), 0x3f);
        // CB 3F 00C3
        gbc.setState(0x697a, 0xed0d, 0xba60, 0x5001, 0xf7f4, 0x8811, 0x1, 0x1);
        gbc.writeMem(0x697a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xed0d);
        EXPECT(gbc.pc(), 0x697c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00C4
        gbc.setState(0x3c67, 0x4bbf, 0xc140, 0xf5b2, 0x2b1b, 0x4690, 0x0, 0x0);
        gbc.writeMem(0x3c67, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4bbf);
        EXPECT(gbc.pc(), 0x3c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00C5
        gbc.setState(0xdc99, 0x9c1f, 0x35f0, 0x5bf9, 0x3a35, 0x42d4, 0x0, 0x0);
        gbc.writeMem(0xdc99, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9c1f);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc99), 0xcb);
        EXPECT(gbc.readMem(0xdc9a), 0x3f);
        // CB 3F 00C6
        gbc.setState(0x89b4, 0xf759, 0xbda0, 0x7e07, 0x1705, 0x9900, 0x0, 0x0);
        gbc.writeMem(0x89b4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf759);
        EXPECT(gbc.pc(), 0x89b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b4), 0xcb);
        EXPECT(gbc.readMem(0x89b5), 0x3f);
        // CB 3F 00C7
        gbc.setState(0x7266, 0xa5b1, 0x63f0, 0x79bb, 0xf3e6, 0xb940, 0x1, 0x1);
        gbc.writeMem(0x7266, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa5b1);
        EXPECT(gbc.pc(), 0x7268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00C8
        gbc.setState(0xbcc1, 0x4612, 0xb100, 0xff17, 0x60ff, 0xdd40, 0x1, 0x0);
        gbc.writeMem(0xbcc1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4612);
        EXPECT(gbc.pc(), 0xbcc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc1), 0xcb);
        EXPECT(gbc.readMem(0xbcc2), 0x3f);
        // CB 3F 00C9
        gbc.setState(0x4518, 0xa08e, 0xe070, 0xdeb8, 0xbf70, 0xdca4, 0x0, 0x0);
        gbc.writeMem(0x4518, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa08e);
        EXPECT(gbc.pc(), 0x451a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00CA
        gbc.setState(0x4282, 0x5ef8, 0x7910, 0xd459, 0x854f, 0x7900, 0x1, 0x1);
        gbc.writeMem(0x4282, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5ef8);
        EXPECT(gbc.pc(), 0x4284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00CB
        gbc.setState(0x3a5a, 0x586e, 0x4440, 0x7e0f, 0x5077, 0xf1c4, 0x0, 0x1);
        gbc.writeMem(0x3a5a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x586e);
        EXPECT(gbc.pc(), 0x3a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00CC
        gbc.setState(0xa760, 0x5cc2, 0x53f0, 0x4951, 0xe3d0, 0x6a29, 0x0, 0x0);
        gbc.writeMem(0xa760, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5cc2);
        EXPECT(gbc.pc(), 0xa762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa760), 0xcb);
        EXPECT(gbc.readMem(0xa761), 0x3f);
        // CB 3F 00CD
        gbc.setState(0x34a6, 0x843c, 0x9840, 0xb457, 0xe6aa, 0x531f, 0x0, 0x1);
        gbc.writeMem(0x34a6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x843c);
        EXPECT(gbc.pc(), 0x34a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00CE
        gbc.setState(0x51e8, 0x46f4, 0xdde0, 0x76e3, 0x1d26, 0x5dbe, 0x1, 0x1);
        gbc.writeMem(0x51e8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x46f4);
        EXPECT(gbc.pc(), 0x51ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00CF
        gbc.setState(0x6587, 0x62f5, 0x2a0, 0x2bcc, 0x3e9f, 0xe8e2, 0x0, 0x1);
        gbc.writeMem(0x6587, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x62f5);
        EXPECT(gbc.pc(), 0x6589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00D0
        gbc.setState(0x7903, 0x5a8e, 0x9c70, 0x3875, 0x7c8f, 0x7543, 0x1, 0x0);
        gbc.writeMem(0x7903, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5a8e);
        EXPECT(gbc.pc(), 0x7905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00D1
        gbc.setState(0xb91e, 0x9e11, 0x89b0, 0xe877, 0xab6, 0x9d8a, 0x1, 0x0);
        gbc.writeMem(0xb91e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9e11);
        EXPECT(gbc.pc(), 0xb920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91e), 0xcb);
        EXPECT(gbc.readMem(0xb91f), 0x3f);
        // CB 3F 00D2
        gbc.setState(0xb0e8, 0xc42a, 0x8de0, 0xb18a, 0x9121, 0xb66e, 0x1, 0x1);
        gbc.writeMem(0xb0e8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0xb0ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e8), 0xcb);
        EXPECT(gbc.readMem(0xb0e9), 0x3f);
        // CB 3F 00D3
        gbc.setState(0x3d0, 0xb7db, 0xf1d0, 0xe3f0, 0x7741, 0x795d, 0x1, 0x0);
        gbc.writeMem(0x3d0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb7db);
        EXPECT(gbc.pc(), 0x3d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00D4
        gbc.setState(0x535c, 0x3b77, 0xd720, 0xfbca, 0x4924, 0xf08c, 0x0, 0x0);
        gbc.writeMem(0x535c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3b77);
        EXPECT(gbc.pc(), 0x535e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00D5
        gbc.setState(0x5633, 0x25b, 0x9990, 0x1598, 0x3abc, 0xc07, 0x0, 0x1);
        gbc.writeMem(0x5633, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x25b);
        EXPECT(gbc.pc(), 0x5635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00D6
        gbc.setState(0xb03a, 0xbc7f, 0x4060, 0xee39, 0x9052, 0x3ba5, 0x0, 0x1);
        gbc.writeMem(0xb03a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbc7f);
        EXPECT(gbc.pc(), 0xb03c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03a), 0xcb);
        EXPECT(gbc.readMem(0xb03b), 0x3f);
        // CB 3F 00D7
        gbc.setState(0xd946, 0xbcdd, 0x9850, 0xf3b5, 0x8421, 0x2df, 0x0, 0x0);
        gbc.writeMem(0xd946, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbcdd);
        EXPECT(gbc.pc(), 0xd948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd946), 0xcb);
        EXPECT(gbc.readMem(0xd947), 0x3f);
        // CB 3F 00D8
        gbc.setState(0xee9e, 0x7ef1, 0x8da0, 0xa53a, 0x2458, 0x8160, 0x0, 0x0);
        gbc.writeMem(0xee9e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7ef1);
        EXPECT(gbc.pc(), 0xeea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee9e), 0xcb);
        EXPECT(gbc.readMem(0xee9f), 0x3f);
        // CB 3F 00D9
        gbc.setState(0xa24e, 0xb2a3, 0xf310, 0xd3a9, 0x3ee8, 0x7f05, 0x1, 0x1);
        gbc.writeMem(0xa24e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb2a3);
        EXPECT(gbc.pc(), 0xa250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24e), 0xcb);
        EXPECT(gbc.readMem(0xa24f), 0x3f);
        // CB 3F 00DA
        gbc.setState(0xe6e7, 0xd259, 0x90d0, 0x9d2a, 0x40c5, 0x46f9, 0x1, 0x0);
        gbc.writeMem(0xe6e7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd259);
        EXPECT(gbc.pc(), 0xe6e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e7), 0xcb);
        EXPECT(gbc.readMem(0xe6e8), 0x3f);
        // CB 3F 00DB
        gbc.setState(0x3801, 0x9025, 0xc390, 0xf472, 0xf447, 0x95ab, 0x1, 0x1);
        gbc.writeMem(0x3801, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9025);
        EXPECT(gbc.pc(), 0x3803);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00DD
        gbc.setState(0x14b6, 0x72e1, 0x4ee0, 0x480f, 0x2f74, 0xb22f, 0x0, 0x0);
        gbc.writeMem(0x14b6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x72e1);
        EXPECT(gbc.pc(), 0x14b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00DE
        gbc.setState(0x41c7, 0xca3f, 0x32d0, 0xb695, 0xf69b, 0xe14, 0x0, 0x0);
        gbc.writeMem(0x41c7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xca3f);
        EXPECT(gbc.pc(), 0x41c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00DF
        gbc.setState(0x4b2e, 0x7ab9, 0x7740, 0xfa2, 0x37ee, 0x394e, 0x1, 0x1);
        gbc.writeMem(0x4b2e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7ab9);
        EXPECT(gbc.pc(), 0x4b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00E0
        gbc.setState(0xeb03, 0xdd56, 0xb580, 0x7ef7, 0xc79c, 0xb467, 0x1, 0x1);
        gbc.writeMem(0xeb03, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdd56);
        EXPECT(gbc.pc(), 0xeb05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb03), 0xcb);
        EXPECT(gbc.readMem(0xeb04), 0x3f);
        // CB 3F 00E1
        gbc.setState(0x39bc, 0x5955, 0x5f00, 0xaf76, 0x6d81, 0x14e2, 0x0, 0x0);
        gbc.writeMem(0x39bc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5955);
        EXPECT(gbc.pc(), 0x39be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00E2
        gbc.setState(0xc92e, 0xa9ce, 0x4190, 0xf829, 0x255b, 0x172f, 0x1, 0x0);
        gbc.writeMem(0xc92e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa9ce);
        EXPECT(gbc.pc(), 0xc930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92e), 0xcb);
        EXPECT(gbc.readMem(0xc92f), 0x3f);
        // CB 3F 00E3
        gbc.setState(0x7aa0, 0x4d0c, 0xc970, 0xe119, 0xa40, 0x3d2f, 0x1, 0x0);
        gbc.writeMem(0x7aa0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4d0c);
        EXPECT(gbc.pc(), 0x7aa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00E4
        gbc.setState(0x492e, 0xe2d7, 0xcfa0, 0x6afe, 0x20fc, 0xa5f4, 0x1, 0x1);
        gbc.writeMem(0x492e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe2d7);
        EXPECT(gbc.pc(), 0x4930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00E6
        gbc.setState(0xbf32, 0x21d1, 0x5dd0, 0xf543, 0x41d0, 0xee22, 0x0, 0x0);
        gbc.writeMem(0xbf32, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x21d1);
        EXPECT(gbc.pc(), 0xbf34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf32), 0xcb);
        EXPECT(gbc.readMem(0xbf33), 0x3f);
        // CB 3F 00E7
        gbc.setState(0xca1b, 0x1690, 0xdde0, 0x5de9, 0x5bab, 0x35b0, 0x1, 0x1);
        gbc.writeMem(0xca1b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1690);
        EXPECT(gbc.pc(), 0xca1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca1b), 0xcb);
        EXPECT(gbc.readMem(0xca1c), 0x3f);
        // CB 3F 00E9
        gbc.setState(0x5f28, 0xa0be, 0x6ff0, 0xf3b9, 0xe100, 0x47ed, 0x1, 0x1);
        gbc.writeMem(0x5f28, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa0be);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00EB
        gbc.setState(0x7c7c, 0x7eb1, 0x1820, 0xcd5e, 0xf470, 0xfd79, 0x1, 0x0);
        gbc.writeMem(0x7c7c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7eb1);
        EXPECT(gbc.pc(), 0x7c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00EC
        gbc.setState(0x1045, 0xf4c, 0x8350, 0x21b6, 0xa986, 0x97fa, 0x0, 0x0);
        gbc.writeMem(0x1045, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf4c);
        EXPECT(gbc.pc(), 0x1047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00ED
        gbc.setState(0xbe8c, 0x78af, 0x1670, 0xf4a0, 0x818b, 0x21d8, 0x0, 0x0);
        gbc.writeMem(0xbe8c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x78af);
        EXPECT(gbc.pc(), 0xbe8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8c), 0xcb);
        EXPECT(gbc.readMem(0xbe8d), 0x3f);
        // CB 3F 00EE
        gbc.setState(0x116c, 0x5e71, 0x5020, 0x10a0, 0x9ed7, 0x2108, 0x0, 0x0);
        gbc.writeMem(0x116c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5e71);
        EXPECT(gbc.pc(), 0x116e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00EF
        gbc.setState(0xc28d, 0x9cf1, 0xbb60, 0xd99a, 0xbbc8, 0x9201, 0x1, 0x1);
        gbc.writeMem(0xc28d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9cf1);
        EXPECT(gbc.pc(), 0xc28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28d), 0xcb);
        EXPECT(gbc.readMem(0xc28e), 0x3f);
        // CB 3F 00F0
        gbc.setState(0x4d24, 0xb1fd, 0x4820, 0x229a, 0xa064, 0x3af1, 0x0, 0x0);
        gbc.writeMem(0x4d24, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb1fd);
        EXPECT(gbc.pc(), 0x4d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00F1
        gbc.setState(0x5ee7, 0xffbc, 0x6650, 0x9213, 0x734e, 0x6e3b, 0x0, 0x0);
        gbc.writeMem(0x5ee7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xffbc);
        EXPECT(gbc.pc(), 0x5ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00F2
        gbc.setState(0x3b4a, 0x685, 0x9ae0, 0x6051, 0xfe8f, 0xd7a6, 0x1, 0x0);
        gbc.writeMem(0x3b4a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x685);
        EXPECT(gbc.pc(), 0x3b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00F3
        gbc.setState(0xcde2, 0x3fc7, 0xa10, 0x4ad0, 0x9fe4, 0x2b8b, 0x0, 0x1);
        gbc.writeMem(0xcde2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3fc7);
        EXPECT(gbc.pc(), 0xcde4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde2), 0xcb);
        EXPECT(gbc.readMem(0xcde3), 0x3f);
        // CB 3F 00F4
        gbc.setState(0xb4, 0xb5, 0xa620, 0x6827, 0xe9ca, 0xf48f, 0x1, 0x1);
        gbc.writeMem(0xb4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb5);
        EXPECT(gbc.pc(), 0xb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00F5
        gbc.setState(0x20eb, 0xed42, 0x82d0, 0x6290, 0x32ae, 0xd144, 0x1, 0x1);
        gbc.writeMem(0x20eb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xed42);
        EXPECT(gbc.pc(), 0x20ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00F6
        gbc.setState(0xe5fe, 0x63cd, 0x4da0, 0x44c7, 0x6a05, 0x2041, 0x1, 0x1);
        gbc.writeMem(0xe5fe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x63cd);
        EXPECT(gbc.pc(), 0xe600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5fe), 0xcb);
        EXPECT(gbc.readMem(0xe5ff), 0x3f);
        // CB 3F 00F7
        gbc.setState(0xe45a, 0x2611, 0x70b0, 0x2ef6, 0xa85e, 0xbfeb, 0x1, 0x1);
        gbc.writeMem(0xe45a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2611);
        EXPECT(gbc.pc(), 0xe45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe45a), 0xcb);
        EXPECT(gbc.readMem(0xe45b), 0x3f);
        // CB 3F 00F8
        gbc.setState(0x9df6, 0x325, 0xda0, 0xd2e8, 0x8ecb, 0xd4e, 0x1, 0x0);
        gbc.writeMem(0x9df6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x325);
        EXPECT(gbc.pc(), 0x9df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df6), 0xcb);
        EXPECT(gbc.readMem(0x9df7), 0x3f);
        // CB 3F 00F9
        gbc.setState(0x4fe6, 0x79bc, 0x7380, 0x9f5e, 0x6d04, 0x27c6, 0x1, 0x0);
        gbc.writeMem(0x4fe6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x79bc);
        EXPECT(gbc.pc(), 0x4fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00FA
        gbc.setState(0xe6d6, 0xb9ac, 0x82a0, 0x61bc, 0x4475, 0x1f22, 0x0, 0x1);
        gbc.writeMem(0xe6d6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb9ac);
        EXPECT(gbc.pc(), 0xe6d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d6), 0xcb);
        EXPECT(gbc.readMem(0xe6d7), 0x3f);
        // CB 3F 00FB
        gbc.setState(0x770d, 0x42dd, 0xf9b0, 0x7b3, 0xc83f, 0x26aa, 0x1, 0x1);
        gbc.writeMem(0x770d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x42dd);
        EXPECT(gbc.pc(), 0x770f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 00FC
        gbc.setState(0xb347, 0x750, 0x7d90, 0xb239, 0xff6b, 0x3c84, 0x0, 0x0);
        gbc.writeMem(0xb347, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x750);
        EXPECT(gbc.pc(), 0xb349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb347), 0xcb);
        EXPECT(gbc.readMem(0xb348), 0x3f);
        // CB 3F 00FD
        gbc.setState(0x1f27, 0xfa7a, 0x66a0, 0xd3, 0x1862, 0x84c3, 0x0, 0x1);
        gbc.writeMem(0x1f27, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xfa7a);
        EXPECT(gbc.pc(), 0x1f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 00FE
        gbc.setState(0xeb51, 0xbcce, 0xff50, 0xde22, 0x1d62, 0xa9dc, 0x0, 0x1);
        gbc.writeMem(0xeb51, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbcce);
        EXPECT(gbc.pc(), 0xeb53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb51), 0xcb);
        EXPECT(gbc.readMem(0xeb52), 0x3f);
        // CB 3F 00FF
        gbc.setState(0x9c93, 0x8428, 0x96f0, 0x969c, 0xfc86, 0x1869, 0x1, 0x0);
        gbc.writeMem(0x9c93, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8428);
        EXPECT(gbc.pc(), 0x9c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c93), 0xcb);
        EXPECT(gbc.readMem(0x9c94), 0x3f);
        // CB 3F 0100
        gbc.setState(0xd2f, 0xed89, 0xb640, 0x3d8b, 0x4d95, 0xd09, 0x1, 0x1);
        gbc.writeMem(0xd2f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xed89);
        EXPECT(gbc.pc(), 0xd31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0101
        gbc.setState(0xebd0, 0xbdd7, 0x2280, 0xfec6, 0x14a0, 0x94c3, 0x1, 0x0);
        gbc.writeMem(0xebd0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbdd7);
        EXPECT(gbc.pc(), 0xebd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd0), 0xcb);
        EXPECT(gbc.readMem(0xebd1), 0x3f);
        // CB 3F 0102
        gbc.setState(0xd8c, 0xc5e0, 0x3de0, 0xc89b, 0xc811, 0xe32e, 0x0, 0x0);
        gbc.writeMem(0xd8c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc5e0);
        EXPECT(gbc.pc(), 0xd8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0103
        gbc.setState(0x1fd5, 0x36, 0xa350, 0x8ebc, 0xe49b, 0x8671, 0x1, 0x1);
        gbc.writeMem(0x1fd5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x36);
        EXPECT(gbc.pc(), 0x1fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0104
        gbc.setState(0x7627, 0x741c, 0x4a40, 0x77, 0x5aaa, 0x3b14, 0x0, 0x0);
        gbc.writeMem(0x7627, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x741c);
        EXPECT(gbc.pc(), 0x7629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0106
        gbc.setState(0xe3ae, 0xd7d6, 0x3780, 0x4681, 0x5bce, 0x14c7, 0x0, 0x0);
        gbc.writeMem(0xe3ae, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd7d6);
        EXPECT(gbc.pc(), 0xe3b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ae), 0xcb);
        EXPECT(gbc.readMem(0xe3af), 0x3f);
        // CB 3F 0107
        gbc.setState(0x98be, 0x5b17, 0x9990, 0xd14a, 0xc267, 0x4004, 0x0, 0x0);
        gbc.writeMem(0x98be, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5b17);
        EXPECT(gbc.pc(), 0x98c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98be), 0xcb);
        EXPECT(gbc.readMem(0x98bf), 0x3f);
        // CB 3F 0108
        gbc.setState(0x84ca, 0x9e12, 0xba70, 0x5d5a, 0x7ae3, 0xb9a3, 0x0, 0x0);
        gbc.writeMem(0x84ca, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9e12);
        EXPECT(gbc.pc(), 0x84cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ca), 0xcb);
        EXPECT(gbc.readMem(0x84cb), 0x3f);
        // CB 3F 0109
        gbc.setState(0x6ad0, 0x39d, 0x2110, 0x85c6, 0xb35b, 0x531, 0x1, 0x1);
        gbc.writeMem(0x6ad0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x39d);
        EXPECT(gbc.pc(), 0x6ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 010A
        gbc.setState(0x23d2, 0x4026, 0x2180, 0xc5fd, 0xb558, 0x3e8b, 0x0, 0x1);
        gbc.writeMem(0x23d2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4026);
        EXPECT(gbc.pc(), 0x23d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 010B
        gbc.setState(0x178d, 0xe768, 0x6300, 0xbccc, 0xa164, 0x9905, 0x1, 0x0);
        gbc.writeMem(0x178d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe768);
        EXPECT(gbc.pc(), 0x178f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 010C
        gbc.setState(0xe47d, 0x1317, 0x6a00, 0xde0f, 0xed8c, 0x59cb, 0x0, 0x0);
        gbc.writeMem(0xe47d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1317);
        EXPECT(gbc.pc(), 0xe47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47d), 0xcb);
        EXPECT(gbc.readMem(0xe47e), 0x3f);
        // CB 3F 010F
        gbc.setState(0x88a9, 0xfb68, 0x8900, 0x6e46, 0xe95f, 0x74f9, 0x1, 0x0);
        gbc.writeMem(0x88a9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfb68);
        EXPECT(gbc.pc(), 0x88ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a9), 0xcb);
        EXPECT(gbc.readMem(0x88aa), 0x3f);
        // CB 3F 0110
        gbc.setState(0xd984, 0x89aa, 0x5ab0, 0xa471, 0xdf85, 0x45d7, 0x0, 0x1);
        gbc.writeMem(0xd984, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x89aa);
        EXPECT(gbc.pc(), 0xd986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd984), 0xcb);
        EXPECT(gbc.readMem(0xd985), 0x3f);
        // CB 3F 0111
        gbc.setState(0x79ef, 0xc50c, 0xc630, 0xfc3b, 0xdc4a, 0x2835, 0x1, 0x1);
        gbc.writeMem(0x79ef, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc50c);
        EXPECT(gbc.pc(), 0x79f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0112
        gbc.setState(0x169d, 0x4da3, 0x2590, 0x1878, 0x19b9, 0xbf7a, 0x1, 0x1);
        gbc.writeMem(0x169d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4da3);
        EXPECT(gbc.pc(), 0x169f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0113
        gbc.setState(0xdf17, 0x400a, 0x5ea0, 0x8e2e, 0xe83a, 0xe002, 0x0, 0x0);
        gbc.writeMem(0xdf17, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x400a);
        EXPECT(gbc.pc(), 0xdf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf17), 0xcb);
        EXPECT(gbc.readMem(0xdf18), 0x3f);
        // CB 3F 0114
        gbc.setState(0xf95, 0x48ac, 0xf5a0, 0x1bdc, 0x286e, 0x2f54, 0x1, 0x0);
        gbc.writeMem(0xf95, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x48ac);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0115
        gbc.setState(0x5ce1, 0xf3e5, 0x88a0, 0x5f5a, 0xd6fb, 0xb8d5, 0x1, 0x0);
        gbc.writeMem(0x5ce1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf3e5);
        EXPECT(gbc.pc(), 0x5ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0116
        gbc.setState(0xbfc9, 0x2388, 0x8260, 0xd762, 0x99ee, 0x39e7, 0x0, 0x1);
        gbc.writeMem(0xbfc9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2388);
        EXPECT(gbc.pc(), 0xbfcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc9), 0xcb);
        EXPECT(gbc.readMem(0xbfca), 0x3f);
        // CB 3F 0117
        gbc.setState(0x6ce7, 0x1863, 0xb220, 0x8cae, 0x80b4, 0xaf52, 0x1, 0x1);
        gbc.writeMem(0x6ce7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1863);
        EXPECT(gbc.pc(), 0x6ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0118
        gbc.setState(0x4164, 0xdcee, 0x43c0, 0x2681, 0xfe6e, 0xeffe, 0x0, 0x1);
        gbc.writeMem(0x4164, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdcee);
        EXPECT(gbc.pc(), 0x4166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0119
        gbc.setState(0x697b, 0x7fd5, 0xa0a0, 0x91a2, 0xe9e2, 0x33dd, 0x0, 0x0);
        gbc.writeMem(0x697b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7fd5);
        EXPECT(gbc.pc(), 0x697d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 011A
        gbc.setState(0xac2f, 0x892b, 0xc130, 0x205d, 0xd641, 0x7396, 0x0, 0x1);
        gbc.writeMem(0xac2f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x892b);
        EXPECT(gbc.pc(), 0xac31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac2f), 0xcb);
        EXPECT(gbc.readMem(0xac30), 0x3f);
        // CB 3F 011B
        gbc.setState(0x16c2, 0x867f, 0x4e10, 0xaa97, 0x6d46, 0xee0f, 0x0, 0x1);
        gbc.writeMem(0x16c2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x867f);
        EXPECT(gbc.pc(), 0x16c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 011C
        gbc.setState(0x523, 0xced9, 0x640, 0x413e, 0xca32, 0x487f, 0x0, 0x0);
        gbc.writeMem(0x523, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xced9);
        EXPECT(gbc.pc(), 0x525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 011D
        gbc.setState(0x1503, 0xcd5f, 0x4660, 0xe675, 0xde90, 0xb1b7, 0x1, 0x1);
        gbc.writeMem(0x1503, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xcd5f);
        EXPECT(gbc.pc(), 0x1505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 011E
        gbc.setState(0x64d6, 0xaad1, 0x1350, 0x7496, 0x4cd3, 0xc5d3, 0x0, 0x1);
        gbc.writeMem(0x64d6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaad1);
        EXPECT(gbc.pc(), 0x64d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 011F
        gbc.setState(0xec11, 0x1757, 0xce30, 0xd95a, 0x5523, 0xe908, 0x0, 0x0);
        gbc.writeMem(0xec11, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1757);
        EXPECT(gbc.pc(), 0xec13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec11), 0xcb);
        EXPECT(gbc.readMem(0xec12), 0x3f);
        // CB 3F 0120
        gbc.setState(0x1266, 0x4736, 0x1ad0, 0x7cb4, 0x42c0, 0x88e1, 0x0, 0x0);
        gbc.writeMem(0x1266, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4736);
        EXPECT(gbc.pc(), 0x1268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0121
        gbc.setState(0x3ad7, 0xeecc, 0x1340, 0x97d4, 0x36fc, 0x53b8, 0x0, 0x1);
        gbc.writeMem(0x3ad7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xeecc);
        EXPECT(gbc.pc(), 0x3ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0122
        gbc.setState(0x483a, 0x61d, 0x5f50, 0x5f65, 0xfa02, 0x21bb, 0x1, 0x1);
        gbc.writeMem(0x483a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x61d);
        EXPECT(gbc.pc(), 0x483c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0123
        gbc.setState(0xa116, 0xeb8e, 0x810, 0xc5e6, 0xa235, 0x5183, 0x0, 0x0);
        gbc.writeMem(0xa116, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeb8e);
        EXPECT(gbc.pc(), 0xa118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa116), 0xcb);
        EXPECT(gbc.readMem(0xa117), 0x3f);
        // CB 3F 0124
        gbc.setState(0xe00a, 0xee7e, 0x5c80, 0xbf61, 0x23f, 0x1850, 0x1, 0x1);
        gbc.writeMem(0xe00a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xee7e);
        EXPECT(gbc.pc(), 0xe00c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00a), 0xcb);
        EXPECT(gbc.readMem(0xe00b), 0x3f);
        // CB 3F 0125
        gbc.setState(0x8ce, 0xe1d4, 0x4c40, 0x79f3, 0xf8df, 0x63bb, 0x0, 0x1);
        gbc.writeMem(0x8ce, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe1d4);
        EXPECT(gbc.pc(), 0x8d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0126
        gbc.setState(0x86f9, 0x45, 0x4070, 0xbfd0, 0xbecd, 0xfac3, 0x1, 0x0);
        gbc.writeMem(0x86f9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x45);
        EXPECT(gbc.pc(), 0x86fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f9), 0xcb);
        EXPECT(gbc.readMem(0x86fa), 0x3f);
        // CB 3F 0127
        gbc.setState(0x3081, 0xc4eb, 0x6e20, 0xd1fb, 0xbd60, 0xadc4, 0x0, 0x1);
        gbc.writeMem(0x3081, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc4eb);
        EXPECT(gbc.pc(), 0x3083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0128
        gbc.setState(0xde6d, 0x61ea, 0x9fe0, 0x3cbe, 0x71ab, 0xb6c8, 0x0, 0x0);
        gbc.writeMem(0xde6d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x61ea);
        EXPECT(gbc.pc(), 0xde6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6d), 0xcb);
        EXPECT(gbc.readMem(0xde6e), 0x3f);
        // CB 3F 0129
        gbc.setState(0xa314, 0x63d4, 0xe520, 0xd427, 0xe1dd, 0xc2ce, 0x1, 0x0);
        gbc.writeMem(0xa314, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x63d4);
        EXPECT(gbc.pc(), 0xa316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa314), 0xcb);
        EXPECT(gbc.readMem(0xa315), 0x3f);
        // CB 3F 012A
        gbc.setState(0x953e, 0xf, 0xcce0, 0xf7a8, 0x7bae, 0xcc99, 0x0, 0x0);
        gbc.writeMem(0x953e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf);
        EXPECT(gbc.pc(), 0x9540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x953e), 0xcb);
        EXPECT(gbc.readMem(0x953f), 0x3f);
        // CB 3F 012C
        gbc.setState(0xa654, 0x39db, 0x31c0, 0x2792, 0xdb33, 0x8b6c, 0x1, 0x0);
        gbc.writeMem(0xa654, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x39db);
        EXPECT(gbc.pc(), 0xa656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa654), 0xcb);
        EXPECT(gbc.readMem(0xa655), 0x3f);
        // CB 3F 012D
        gbc.setState(0x6fbe, 0xd813, 0x2400, 0xe9da, 0xaa55, 0xc40d, 0x1, 0x1);
        gbc.writeMem(0x6fbe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd813);
        EXPECT(gbc.pc(), 0x6fc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 012E
        gbc.setState(0xcae3, 0xa0bc, 0x3750, 0xd7f7, 0x96bb, 0xb0fe, 0x0, 0x0);
        gbc.writeMem(0xcae3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa0bc);
        EXPECT(gbc.pc(), 0xcae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae3), 0xcb);
        EXPECT(gbc.readMem(0xcae4), 0x3f);
        // CB 3F 012F
        gbc.setState(0x4be1, 0x9621, 0x6200, 0xa5b4, 0xd23, 0xb63e, 0x1, 0x0);
        gbc.writeMem(0x4be1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9621);
        EXPECT(gbc.pc(), 0x4be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0130
        gbc.setState(0xb0ab, 0x7557, 0x7b10, 0x51b, 0x537d, 0x558f, 0x1, 0x0);
        gbc.writeMem(0xb0ab, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7557);
        EXPECT(gbc.pc(), 0xb0ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ab), 0xcb);
        EXPECT(gbc.readMem(0xb0ac), 0x3f);
        // CB 3F 0131
        gbc.setState(0x1138, 0xe166, 0x1400, 0xf603, 0x1535, 0xd4ef, 0x1, 0x1);
        gbc.writeMem(0x1138, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe166);
        EXPECT(gbc.pc(), 0x113a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0132
        gbc.setState(0xb423, 0x95d1, 0xd260, 0xc36d, 0x8b7c, 0xed7b, 0x0, 0x0);
        gbc.writeMem(0xb423, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x95d1);
        EXPECT(gbc.pc(), 0xb425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb423), 0xcb);
        EXPECT(gbc.readMem(0xb424), 0x3f);
        // CB 3F 0133
        gbc.setState(0x3732, 0xc6f0, 0xc010, 0xe852, 0xe2c2, 0x6bf4, 0x0, 0x1);
        gbc.writeMem(0x3732, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc6f0);
        EXPECT(gbc.pc(), 0x3734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0134
        gbc.setState(0x9beb, 0xfde, 0xfe80, 0xf6, 0xe027, 0xdad0, 0x1, 0x1);
        gbc.writeMem(0x9beb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfde);
        EXPECT(gbc.pc(), 0x9bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9beb), 0xcb);
        EXPECT(gbc.readMem(0x9bec), 0x3f);
        // CB 3F 0135
        gbc.setState(0x4186, 0x771d, 0x74d0, 0xc4b5, 0x3188, 0x6aed, 0x0, 0x1);
        gbc.writeMem(0x4186, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x771d);
        EXPECT(gbc.pc(), 0x4188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0136
        gbc.setState(0x2998, 0x549a, 0x8470, 0xf11, 0x34e7, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x2998, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x549a);
        EXPECT(gbc.pc(), 0x299a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0137
        gbc.setState(0x15aa, 0xe3f4, 0xedb0, 0x1a2c, 0xeb09, 0x14dc, 0x1, 0x0);
        gbc.writeMem(0x15aa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe3f4);
        EXPECT(gbc.pc(), 0x15ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0138
        gbc.setState(0xc616, 0xa87c, 0xf290, 0xbc1f, 0xa3f1, 0xf714, 0x0, 0x1);
        gbc.writeMem(0xc616, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa87c);
        EXPECT(gbc.pc(), 0xc618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc616), 0xcb);
        EXPECT(gbc.readMem(0xc617), 0x3f);
        // CB 3F 013A
        gbc.setState(0x12bb, 0x4ca0, 0x3aa0, 0x7722, 0x30d0, 0x24d0, 0x0, 0x0);
        gbc.writeMem(0x12bb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4ca0);
        EXPECT(gbc.pc(), 0x12bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 013B
        gbc.setState(0xa683, 0xea0c, 0xcfc0, 0x4e0d, 0xfbda, 0xe31e, 0x1, 0x1);
        gbc.writeMem(0xa683, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xea0c);
        EXPECT(gbc.pc(), 0xa685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa683), 0xcb);
        EXPECT(gbc.readMem(0xa684), 0x3f);
        // CB 3F 013C
        gbc.setState(0x4e62, 0x3bb6, 0x2340, 0xdf15, 0x5973, 0xa385, 0x1, 0x1);
        gbc.writeMem(0x4e62, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3bb6);
        EXPECT(gbc.pc(), 0x4e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 013D
        gbc.setState(0x1327, 0xfb9c, 0x9f70, 0xe3b5, 0x36ec, 0x1ae3, 0x1, 0x1);
        gbc.writeMem(0x1327, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfb9c);
        EXPECT(gbc.pc(), 0x1329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 013E
        gbc.setState(0x4600, 0xdcf5, 0x9190, 0x5096, 0x62b1, 0x1b99, 0x0, 0x0);
        gbc.writeMem(0x4600, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xdcf5);
        EXPECT(gbc.pc(), 0x4602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 013F
        gbc.setState(0x2627, 0xa095, 0xab40, 0x721e, 0xba9, 0xe313, 0x0, 0x0);
        gbc.writeMem(0x2627, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa095);
        EXPECT(gbc.pc(), 0x2629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0140
        gbc.setState(0xb9d0, 0x1dcb, 0xd470, 0x247a, 0xc165, 0x5c3f, 0x1, 0x1);
        gbc.writeMem(0xb9d0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1dcb);
        EXPECT(gbc.pc(), 0xb9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d0), 0xcb);
        EXPECT(gbc.readMem(0xb9d1), 0x3f);
        // CB 3F 0141
        gbc.setState(0xbc0e, 0x31e6, 0xb840, 0xebe2, 0xcd33, 0x20fc, 0x1, 0x1);
        gbc.writeMem(0xbc0e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x31e6);
        EXPECT(gbc.pc(), 0xbc10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0e), 0xcb);
        EXPECT(gbc.readMem(0xbc0f), 0x3f);
        // CB 3F 0142
        gbc.setState(0xc58b, 0x66d, 0x1060, 0xaee4, 0xbbb6, 0xe5d3, 0x0, 0x1);
        gbc.writeMem(0xc58b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x66d);
        EXPECT(gbc.pc(), 0xc58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58b), 0xcb);
        EXPECT(gbc.readMem(0xc58c), 0x3f);
        // CB 3F 0143
        gbc.setState(0x140b, 0x8c20, 0xa460, 0x45d8, 0xeede, 0xb609, 0x1, 0x1);
        gbc.writeMem(0x140b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8c20);
        EXPECT(gbc.pc(), 0x140d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0144
        gbc.setState(0x9018, 0xc117, 0x6e90, 0xd637, 0xf81e, 0x215b, 0x0, 0x1);
        gbc.writeMem(0x9018, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc117);
        EXPECT(gbc.pc(), 0x901a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9018), 0xcb);
        EXPECT(gbc.readMem(0x9019), 0x3f);
        // CB 3F 0145
        gbc.setState(0xeaf, 0xd02, 0x8740, 0x53e6, 0x27b8, 0x15e3, 0x0, 0x0);
        gbc.writeMem(0xeaf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd02);
        EXPECT(gbc.pc(), 0xeb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0146
        gbc.setState(0x1860, 0x3cec, 0xb570, 0xe696, 0x313f, 0x13a6, 0x0, 0x1);
        gbc.writeMem(0x1860, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3cec);
        EXPECT(gbc.pc(), 0x1862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0147
        gbc.setState(0xd062, 0xc314, 0x480, 0x4e8d, 0xa107, 0x9230, 0x1, 0x1);
        gbc.writeMem(0xd062, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc314);
        EXPECT(gbc.pc(), 0xd064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd062), 0xcb);
        EXPECT(gbc.readMem(0xd063), 0x3f);
        // CB 3F 0148
        gbc.setState(0xdf57, 0x4d8, 0xbba0, 0xe845, 0x8732, 0x99a7, 0x1, 0x1);
        gbc.writeMem(0xdf57, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4d8);
        EXPECT(gbc.pc(), 0xdf59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf57), 0xcb);
        EXPECT(gbc.readMem(0xdf58), 0x3f);
        // CB 3F 014A
        gbc.setState(0x140, 0xe79b, 0xa820, 0x2e82, 0x8d2d, 0xe8e5, 0x1, 0x1);
        gbc.writeMem(0x140, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe79b);
        EXPECT(gbc.pc(), 0x142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 014B
        gbc.setState(0xb49b, 0x938c, 0x4d20, 0x6845, 0x1b60, 0xa90b, 0x0, 0x0);
        gbc.writeMem(0xb49b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x938c);
        EXPECT(gbc.pc(), 0xb49d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb49b), 0xcb);
        EXPECT(gbc.readMem(0xb49c), 0x3f);
        // CB 3F 014C
        gbc.setState(0x6ba1, 0x93c3, 0x1930, 0xd4a9, 0xd9d6, 0x3f8b, 0x0, 0x0);
        gbc.writeMem(0x6ba1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x93c3);
        EXPECT(gbc.pc(), 0x6ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 014D
        gbc.setState(0x27d3, 0xed10, 0x8160, 0xf871, 0x88c6, 0xe835, 0x0, 0x0);
        gbc.writeMem(0x27d3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xed10);
        EXPECT(gbc.pc(), 0x27d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 014E
        gbc.setState(0x2e9b, 0xa3a3, 0x8b50, 0x8882, 0xb5e6, 0x142a, 0x1, 0x1);
        gbc.writeMem(0x2e9b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa3a3);
        EXPECT(gbc.pc(), 0x2e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 014F
        gbc.setState(0x35fa, 0x7b10, 0x4b00, 0xa0de, 0xcae, 0x2eb5, 0x0, 0x0);
        gbc.writeMem(0x35fa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7b10);
        EXPECT(gbc.pc(), 0x35fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0150
        gbc.setState(0xafa9, 0xa17b, 0x5c70, 0x2138, 0x1c34, 0x664e, 0x0, 0x0);
        gbc.writeMem(0xafa9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa17b);
        EXPECT(gbc.pc(), 0xafab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa9), 0xcb);
        EXPECT(gbc.readMem(0xafaa), 0x3f);
        // CB 3F 0151
        gbc.setState(0xaf78, 0xd0ac, 0xf8b0, 0xf2a8, 0xed1b, 0xa41f, 0x0, 0x1);
        gbc.writeMem(0xaf78, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd0ac);
        EXPECT(gbc.pc(), 0xaf7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf78), 0xcb);
        EXPECT(gbc.readMem(0xaf79), 0x3f);
        // CB 3F 0152
        gbc.setState(0xb145, 0x6563, 0xd4c0, 0x4144, 0x730, 0xc447, 0x0, 0x1);
        gbc.writeMem(0xb145, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6563);
        EXPECT(gbc.pc(), 0xb147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb145), 0xcb);
        EXPECT(gbc.readMem(0xb146), 0x3f);
        // CB 3F 0153
        gbc.setState(0xd3e, 0xc757, 0xe00, 0xa75e, 0x88b4, 0x1fa, 0x0, 0x1);
        gbc.writeMem(0xd3e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc757);
        EXPECT(gbc.pc(), 0xd40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0154
        gbc.setState(0xef65, 0xcf4c, 0x6270, 0xbfd2, 0x4282, 0x2f4, 0x1, 0x1);
        gbc.writeMem(0xef65, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcf4c);
        EXPECT(gbc.pc(), 0xef67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef65), 0xcb);
        EXPECT(gbc.readMem(0xef66), 0x3f);
        // CB 3F 0155
        gbc.setState(0x539a, 0x1a59, 0x8b10, 0x3046, 0xd365, 0x2896, 0x0, 0x1);
        gbc.writeMem(0x539a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1a59);
        EXPECT(gbc.pc(), 0x539c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0156
        gbc.setState(0xa065, 0x50e7, 0x1f80, 0x1ccd, 0x888c, 0x94ef, 0x0, 0x1);
        gbc.writeMem(0xa065, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x50e7);
        EXPECT(gbc.pc(), 0xa067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa065), 0xcb);
        EXPECT(gbc.readMem(0xa066), 0x3f);
        // CB 3F 0157
        gbc.setState(0x58ad, 0x5d7a, 0x5cd0, 0x7a1d, 0xeb58, 0x7fda, 0x0, 0x0);
        gbc.writeMem(0x58ad, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5d7a);
        EXPECT(gbc.pc(), 0x58af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0158
        gbc.setState(0x23fc, 0x47e0, 0x4e30, 0xef86, 0x5aff, 0x69fe, 0x0, 0x1);
        gbc.writeMem(0x23fc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x47e0);
        EXPECT(gbc.pc(), 0x23fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0159
        gbc.setState(0xc1c0, 0x387d, 0xb490, 0xb63a, 0xb683, 0x7a0d, 0x1, 0x0);
        gbc.writeMem(0xc1c0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x387d);
        EXPECT(gbc.pc(), 0xc1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c0), 0xcb);
        EXPECT(gbc.readMem(0xc1c1), 0x3f);
        // CB 3F 015A
        gbc.setState(0xb61, 0xb2a7, 0x2290, 0x6ea7, 0xb10e, 0x6c13, 0x1, 0x1);
        gbc.writeMem(0xb61, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb2a7);
        EXPECT(gbc.pc(), 0xb63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 015B
        gbc.setState(0xe68a, 0xc9d5, 0xeba0, 0x97f2, 0x6a92, 0xfd63, 0x0, 0x1);
        gbc.writeMem(0xe68a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc9d5);
        EXPECT(gbc.pc(), 0xe68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68a), 0xcb);
        EXPECT(gbc.readMem(0xe68b), 0x3f);
        // CB 3F 015C
        gbc.setState(0x1e68, 0x4779, 0x1340, 0x247b, 0x40ac, 0xd180, 0x0, 0x0);
        gbc.writeMem(0x1e68, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4779);
        EXPECT(gbc.pc(), 0x1e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 015D
        gbc.setState(0xdbcd, 0xf5e9, 0x2b80, 0x46c5, 0x9455, 0x9f68, 0x0, 0x1);
        gbc.writeMem(0xdbcd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf5e9);
        EXPECT(gbc.pc(), 0xdbcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbcd), 0xcb);
        EXPECT(gbc.readMem(0xdbce), 0x3f);
        // CB 3F 015E
        gbc.setState(0x4299, 0x50c8, 0xeb80, 0x4309, 0xebc8, 0xa98c, 0x0, 0x0);
        gbc.writeMem(0x4299, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x50c8);
        EXPECT(gbc.pc(), 0x429b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 015F
        gbc.setState(0x4d1e, 0xca71, 0xdc70, 0xb79b, 0x4bcd, 0x58be, 0x1, 0x1);
        gbc.writeMem(0x4d1e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xca71);
        EXPECT(gbc.pc(), 0x4d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0160
        gbc.setState(0x193d, 0x58d3, 0x1080, 0x8206, 0x18e9, 0xcd17, 0x0, 0x1);
        gbc.writeMem(0x193d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x58d3);
        EXPECT(gbc.pc(), 0x193f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0162
        gbc.setState(0xb6cc, 0x9e4c, 0xfaf0, 0xc160, 0x3c8f, 0x470d, 0x1, 0x1);
        gbc.writeMem(0xb6cc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9e4c);
        EXPECT(gbc.pc(), 0xb6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cc), 0xcb);
        EXPECT(gbc.readMem(0xb6cd), 0x3f);
        // CB 3F 0163
        gbc.setState(0x4214, 0xd83d, 0x5660, 0x7a11, 0x8c04, 0x2065, 0x1, 0x1);
        gbc.writeMem(0x4214, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd83d);
        EXPECT(gbc.pc(), 0x4216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0164
        gbc.setState(0x6174, 0x9e8b, 0x8630, 0x7382, 0xedf5, 0x69e5, 0x1, 0x1);
        gbc.writeMem(0x6174, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9e8b);
        EXPECT(gbc.pc(), 0x6176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0165
        gbc.setState(0xebaa, 0xe570, 0x66e0, 0xc71a, 0x7579, 0x4d64, 0x0, 0x1);
        gbc.writeMem(0xebaa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0xebac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebaa), 0xcb);
        EXPECT(gbc.readMem(0xebab), 0x3f);
        // CB 3F 0166
        gbc.setState(0x319e, 0x4d39, 0xbd90, 0x62d8, 0xe663, 0xcd5a, 0x1, 0x1);
        gbc.writeMem(0x319e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0x31a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0167
        gbc.setState(0x8491, 0x88f1, 0xcc80, 0x9b8, 0xa6a7, 0xc62, 0x0, 0x0);
        gbc.writeMem(0x8491, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x88f1);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8491), 0xcb);
        EXPECT(gbc.readMem(0x8492), 0x3f);
        // CB 3F 0168
        gbc.setState(0x6359, 0x3ab6, 0xcdf0, 0x151c, 0x6965, 0x160a, 0x1, 0x1);
        gbc.writeMem(0x6359, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3ab6);
        EXPECT(gbc.pc(), 0x635b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0169
        gbc.setState(0x59be, 0xcf3b, 0xf7c0, 0x84a6, 0x37d8, 0x3d0d, 0x1, 0x1);
        gbc.writeMem(0x59be, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcf3b);
        EXPECT(gbc.pc(), 0x59c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 016A
        gbc.setState(0x8e0d, 0x3260, 0x9540, 0x57c5, 0x27cf, 0x7701, 0x1, 0x1);
        gbc.writeMem(0x8e0d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3260);
        EXPECT(gbc.pc(), 0x8e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e0d), 0xcb);
        EXPECT(gbc.readMem(0x8e0e), 0x3f);
        // CB 3F 016B
        gbc.setState(0xe198, 0xde36, 0xe1c0, 0xbda4, 0xcfc6, 0xc1eb, 0x1, 0x0);
        gbc.writeMem(0xe198, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xde36);
        EXPECT(gbc.pc(), 0xe19a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe198), 0xcb);
        EXPECT(gbc.readMem(0xe199), 0x3f);
        // CB 3F 016C
        gbc.setState(0xd01, 0x25db, 0xc680, 0xcf54, 0xebb3, 0x2531, 0x1, 0x0);
        gbc.writeMem(0xd01, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x25db);
        EXPECT(gbc.pc(), 0xd03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 016D
        gbc.setState(0xe258, 0xe6bf, 0x43b0, 0xcb1, 0x94a2, 0x3e3c, 0x1, 0x0);
        gbc.writeMem(0xe258, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe6bf);
        EXPECT(gbc.pc(), 0xe25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe258), 0xcb);
        EXPECT(gbc.readMem(0xe259), 0x3f);
        // CB 3F 016E
        gbc.setState(0x86bd, 0xd116, 0xcf30, 0xa872, 0x5e59, 0x259c, 0x1, 0x1);
        gbc.writeMem(0x86bd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd116);
        EXPECT(gbc.pc(), 0x86bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86bd), 0xcb);
        EXPECT(gbc.readMem(0x86be), 0x3f);
        // CB 3F 016F
        gbc.setState(0x20ed, 0x3194, 0xd700, 0xa190, 0xbbed, 0xb7e1, 0x0, 0x1);
        gbc.writeMem(0x20ed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3194);
        EXPECT(gbc.pc(), 0x20ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0170
        gbc.setState(0xd7e7, 0x7ce0, 0xd990, 0x3234, 0x5337, 0x9204, 0x1, 0x1);
        gbc.writeMem(0xd7e7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7ce0);
        EXPECT(gbc.pc(), 0xd7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7e7), 0xcb);
        EXPECT(gbc.readMem(0xd7e8), 0x3f);
        // CB 3F 0171
        gbc.setState(0x4892, 0x5766, 0x6260, 0x3245, 0x6789, 0xc04a, 0x0, 0x0);
        gbc.writeMem(0x4892, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5766);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0172
        gbc.setState(0xa7eb, 0x29cf, 0xcac0, 0x734d, 0x43ae, 0xbbd0, 0x1, 0x0);
        gbc.writeMem(0xa7eb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x29cf);
        EXPECT(gbc.pc(), 0xa7ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7eb), 0xcb);
        EXPECT(gbc.readMem(0xa7ec), 0x3f);
        // CB 3F 0173
        gbc.setState(0x9e7f, 0xd528, 0x8770, 0x92c6, 0x66ef, 0x8d9c, 0x0, 0x0);
        gbc.writeMem(0x9e7f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd528);
        EXPECT(gbc.pc(), 0x9e81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e7f), 0xcb);
        EXPECT(gbc.readMem(0x9e80), 0x3f);
        // CB 3F 0174
        gbc.setState(0x265f, 0x68cc, 0x2770, 0x6207, 0x3339, 0xed1c, 0x1, 0x1);
        gbc.writeMem(0x265f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x68cc);
        EXPECT(gbc.pc(), 0x2661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0175
        gbc.setState(0x6e85, 0x4369, 0x4930, 0x4ef2, 0xa4a9, 0xb65b, 0x0, 0x0);
        gbc.writeMem(0x6e85, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4369);
        EXPECT(gbc.pc(), 0x6e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0176
        gbc.setState(0x4987, 0x19d5, 0x15c0, 0xf057, 0x5536, 0xac7c, 0x1, 0x1);
        gbc.writeMem(0x4987, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x19d5);
        EXPECT(gbc.pc(), 0x4989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0177
        gbc.setState(0xcac, 0x7e17, 0xb90, 0x271f, 0x9306, 0xe3ad, 0x1, 0x0);
        gbc.writeMem(0xcac, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7e17);
        EXPECT(gbc.pc(), 0xcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0178
        gbc.setState(0xc273, 0xafc9, 0xb690, 0xfbc1, 0x51e3, 0x6d1d, 0x0, 0x0);
        gbc.writeMem(0xc273, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xafc9);
        EXPECT(gbc.pc(), 0xc275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc273), 0xcb);
        EXPECT(gbc.readMem(0xc274), 0x3f);
        // CB 3F 0179
        gbc.setState(0xd81f, 0x3f28, 0x6a50, 0xd0c0, 0xdd1b, 0x2c8b, 0x1, 0x0);
        gbc.writeMem(0xd81f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3f28);
        EXPECT(gbc.pc(), 0xd821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81f), 0xcb);
        EXPECT(gbc.readMem(0xd820), 0x3f);
        // CB 3F 017A
        gbc.setState(0xe7c3, 0xaa6e, 0x6440, 0x69de, 0x9c17, 0xd9c, 0x0, 0x1);
        gbc.writeMem(0xe7c3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaa6e);
        EXPECT(gbc.pc(), 0xe7c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c3), 0xcb);
        EXPECT(gbc.readMem(0xe7c4), 0x3f);
        // CB 3F 017B
        gbc.setState(0x1b5e, 0x772a, 0x86c0, 0x78a0, 0x824a, 0x3145, 0x1, 0x1);
        gbc.writeMem(0x1b5e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x772a);
        EXPECT(gbc.pc(), 0x1b60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 017C
        gbc.setState(0x7f82, 0xe3d3, 0x8a80, 0x48c8, 0x9be9, 0x4698, 0x0, 0x1);
        gbc.writeMem(0x7f82, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe3d3);
        EXPECT(gbc.pc(), 0x7f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 017D
        gbc.setState(0xec49, 0xa61d, 0x9ec0, 0x8f0a, 0x4941, 0x17c8, 0x1, 0x0);
        gbc.writeMem(0xec49, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa61d);
        EXPECT(gbc.pc(), 0xec4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec49), 0xcb);
        EXPECT(gbc.readMem(0xec4a), 0x3f);
        // CB 3F 017E
        gbc.setState(0x66a, 0xb887, 0xfee0, 0x9ba9, 0x331d, 0x872d, 0x1, 0x0);
        gbc.writeMem(0x66a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb887);
        EXPECT(gbc.pc(), 0x66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 017F
        gbc.setState(0x8698, 0x2647, 0x2a70, 0x5ede, 0x5266, 0x36ab, 0x1, 0x1);
        gbc.writeMem(0x8698, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2647);
        EXPECT(gbc.pc(), 0x869a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8698), 0xcb);
        EXPECT(gbc.readMem(0x8699), 0x3f);
        // CB 3F 0180
        gbc.setState(0x30ee, 0x2638, 0xb650, 0xc1fb, 0x8776, 0x9aa4, 0x1, 0x1);
        gbc.writeMem(0x30ee, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2638);
        EXPECT(gbc.pc(), 0x30f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0181
        gbc.setState(0xc639, 0x41d0, 0xf790, 0x620e, 0x81d, 0xafdc, 0x1, 0x1);
        gbc.writeMem(0xc639, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x41d0);
        EXPECT(gbc.pc(), 0xc63b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc639), 0xcb);
        EXPECT(gbc.readMem(0xc63a), 0x3f);
        // CB 3F 0182
        gbc.setState(0x9ef5, 0x5d2f, 0x9210, 0x7b10, 0x69c1, 0x3245, 0x1, 0x1);
        gbc.writeMem(0x9ef5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5d2f);
        EXPECT(gbc.pc(), 0x9ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef5), 0xcb);
        EXPECT(gbc.readMem(0x9ef6), 0x3f);
        // CB 3F 0183
        gbc.setState(0xbd64, 0x8fb8, 0xb8d0, 0xc721, 0xb7d0, 0xa64a, 0x0, 0x0);
        gbc.writeMem(0xbd64, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8fb8);
        EXPECT(gbc.pc(), 0xbd66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd64), 0xcb);
        EXPECT(gbc.readMem(0xbd65), 0x3f);
        // CB 3F 0184
        gbc.setState(0x64ad, 0xebcf, 0x9ee0, 0xcfce, 0x7580, 0x7816, 0x0, 0x0);
        gbc.writeMem(0x64ad, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xebcf);
        EXPECT(gbc.pc(), 0x64af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0185
        gbc.setState(0xdd13, 0xd224, 0x7a10, 0x950c, 0x6751, 0x5ce9, 0x0, 0x0);
        gbc.writeMem(0xdd13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd224);
        EXPECT(gbc.pc(), 0xdd15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd13), 0xcb);
        EXPECT(gbc.readMem(0xdd14), 0x3f);
        // CB 3F 0186
        gbc.setState(0x5292, 0xf382, 0x3420, 0x41bf, 0xf31a, 0xad92, 0x0, 0x0);
        gbc.writeMem(0x5292, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf382);
        EXPECT(gbc.pc(), 0x5294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0187
        gbc.setState(0x8927, 0xfe17, 0x5e0, 0xa0f4, 0x25cf, 0xba39, 0x1, 0x1);
        gbc.writeMem(0x8927, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xfe17);
        EXPECT(gbc.pc(), 0x8929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8927), 0xcb);
        EXPECT(gbc.readMem(0x8928), 0x3f);
        // CB 3F 0189
        gbc.setState(0xaea7, 0x93b3, 0xc6e0, 0xb7eb, 0x9d8a, 0xb64d, 0x1, 0x1);
        gbc.writeMem(0xaea7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x93b3);
        EXPECT(gbc.pc(), 0xaea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea7), 0xcb);
        EXPECT(gbc.readMem(0xaea8), 0x3f);
        // CB 3F 018A
        gbc.setState(0x37fb, 0x7a2, 0x8eb0, 0x3614, 0x94bf, 0xacfd, 0x0, 0x1);
        gbc.writeMem(0x37fb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7a2);
        EXPECT(gbc.pc(), 0x37fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 018B
        gbc.setState(0x3f44, 0xcf37, 0xbbb0, 0x5bac, 0x7eee, 0xa45f, 0x0, 0x1);
        gbc.writeMem(0x3f44, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xcf37);
        EXPECT(gbc.pc(), 0x3f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 018C
        gbc.setState(0x8c5d, 0xb99, 0xb3f0, 0x2cf2, 0x177e, 0xdeb6, 0x1, 0x1);
        gbc.writeMem(0x8c5d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb99);
        EXPECT(gbc.pc(), 0x8c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5d), 0xcb);
        EXPECT(gbc.readMem(0x8c5e), 0x3f);
        // CB 3F 018D
        gbc.setState(0x14b1, 0x1396, 0xb1c0, 0xba7, 0x2434, 0x25c, 0x1, 0x0);
        gbc.writeMem(0x14b1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1396);
        EXPECT(gbc.pc(), 0x14b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 018E
        gbc.setState(0x9e37, 0xc97c, 0x6450, 0x8668, 0x5f6c, 0xb90, 0x0, 0x1);
        gbc.writeMem(0x9e37, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc97c);
        EXPECT(gbc.pc(), 0x9e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e37), 0xcb);
        EXPECT(gbc.readMem(0x9e38), 0x3f);
        // CB 3F 018F
        gbc.setState(0x4bb8, 0x4fb9, 0x5770, 0x18c3, 0xd177, 0x6784, 0x1, 0x0);
        gbc.writeMem(0x4bb8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4fb9);
        EXPECT(gbc.pc(), 0x4bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0190
        gbc.setState(0xcdb1, 0xaa84, 0xebf0, 0x1077, 0xf274, 0x7249, 0x0, 0x0);
        gbc.writeMem(0xcdb1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xaa84);
        EXPECT(gbc.pc(), 0xcdb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdb1), 0xcb);
        EXPECT(gbc.readMem(0xcdb2), 0x3f);
        // CB 3F 0191
        gbc.setState(0xcf52, 0x6930, 0x3e50, 0x6f3b, 0xcba9, 0x75cd, 0x0, 0x0);
        gbc.writeMem(0xcf52, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6930);
        EXPECT(gbc.pc(), 0xcf54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf52), 0xcb);
        EXPECT(gbc.readMem(0xcf53), 0x3f);
        // CB 3F 0192
        gbc.setState(0xbe73, 0x408a, 0xc590, 0x2a07, 0xbfc2, 0xcff, 0x1, 0x1);
        gbc.writeMem(0xbe73, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x408a);
        EXPECT(gbc.pc(), 0xbe75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe73), 0xcb);
        EXPECT(gbc.readMem(0xbe74), 0x3f);
        // CB 3F 0193
        gbc.setState(0x5c79, 0x4b98, 0x74f0, 0x33df, 0xe7f7, 0x960c, 0x1, 0x1);
        gbc.writeMem(0x5c79, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4b98);
        EXPECT(gbc.pc(), 0x5c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0194
        gbc.setState(0x3e17, 0xfd35, 0x8900, 0x7c45, 0x3175, 0x7ac6, 0x0, 0x0);
        gbc.writeMem(0x3e17, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfd35);
        EXPECT(gbc.pc(), 0x3e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0195
        gbc.setState(0x39ce, 0x650e, 0x5950, 0xb011, 0x19a5, 0xcbdb, 0x0, 0x0);
        gbc.writeMem(0x39ce, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x650e);
        EXPECT(gbc.pc(), 0x39d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0196
        gbc.setState(0x3968, 0xc410, 0x88f0, 0x2d3d, 0x70c, 0x8acf, 0x0, 0x0);
        gbc.writeMem(0x3968, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc410);
        EXPECT(gbc.pc(), 0x396a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0197
        gbc.setState(0xa511, 0xd66a, 0x21d0, 0x1975, 0x60d, 0x2c6c, 0x1, 0x0);
        gbc.writeMem(0xa511, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd66a);
        EXPECT(gbc.pc(), 0xa513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa511), 0xcb);
        EXPECT(gbc.readMem(0xa512), 0x3f);
        // CB 3F 0198
        gbc.setState(0x476a, 0x8b0b, 0x8bb0, 0x994f, 0x59a1, 0x42e6, 0x0, 0x1);
        gbc.writeMem(0x476a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8b0b);
        EXPECT(gbc.pc(), 0x476c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0199
        gbc.setState(0x6d10, 0x1100, 0x13c0, 0xd3f5, 0xe025, 0x4e5e, 0x0, 0x1);
        gbc.writeMem(0x6d10, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1100);
        EXPECT(gbc.pc(), 0x6d12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 019A
        gbc.setState(0xac19, 0x40f, 0x7510, 0x778d, 0x9782, 0xf59, 0x0, 0x1);
        gbc.writeMem(0xac19, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x40f);
        EXPECT(gbc.pc(), 0xac1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac19), 0xcb);
        EXPECT(gbc.readMem(0xac1a), 0x3f);
        // CB 3F 019B
        gbc.setState(0x823, 0x5aaa, 0x8e40, 0x970b, 0xeaa2, 0x6725, 0x1, 0x0);
        gbc.writeMem(0x823, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5aaa);
        EXPECT(gbc.pc(), 0x825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 019C
        gbc.setState(0xba1b, 0xb7ef, 0xe810, 0xd410, 0x21ad, 0xa3ad, 0x1, 0x0);
        gbc.writeMem(0xba1b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb7ef);
        EXPECT(gbc.pc(), 0xba1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1b), 0xcb);
        EXPECT(gbc.readMem(0xba1c), 0x3f);
        // CB 3F 019D
        gbc.setState(0x9e13, 0xe62a, 0x5e70, 0x7574, 0x70a8, 0xfa63, 0x0, 0x0);
        gbc.writeMem(0x9e13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe62a);
        EXPECT(gbc.pc(), 0x9e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e13), 0xcb);
        EXPECT(gbc.readMem(0x9e14), 0x3f);
        // CB 3F 019E
        gbc.setState(0x7211, 0x576a, 0x6c40, 0x7ea7, 0x3cb, 0xf39, 0x0, 0x1);
        gbc.writeMem(0x7211, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x576a);
        EXPECT(gbc.pc(), 0x7213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 019F
        gbc.setState(0x2bab, 0xd3a6, 0x4fe0, 0xfd01, 0xeef9, 0x7a25, 0x1, 0x0);
        gbc.writeMem(0x2bab, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd3a6);
        EXPECT(gbc.pc(), 0x2bad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01A0
        gbc.setState(0x5b23, 0x84f2, 0x37f0, 0xbea4, 0x28f1, 0x447d, 0x1, 0x0);
        gbc.writeMem(0x5b23, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x84f2);
        EXPECT(gbc.pc(), 0x5b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01A1
        gbc.setState(0x98c2, 0x362b, 0xc3e0, 0x994, 0xf79c, 0x34b5, 0x0, 0x1);
        gbc.writeMem(0x98c2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x362b);
        EXPECT(gbc.pc(), 0x98c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c2), 0xcb);
        EXPECT(gbc.readMem(0x98c3), 0x3f);
        // CB 3F 01A2
        gbc.setState(0x5299, 0xa381, 0x6e30, 0x6dee, 0x346e, 0xa9f0, 0x1, 0x1);
        gbc.writeMem(0x5299, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa381);
        EXPECT(gbc.pc(), 0x529b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01A3
        gbc.setState(0x22c1, 0x58f3, 0x82a0, 0x3a75, 0x606c, 0xa785, 0x0, 0x1);
        gbc.writeMem(0x22c1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x58f3);
        EXPECT(gbc.pc(), 0x22c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01A4
        gbc.setState(0xd80b, 0xeae1, 0xc930, 0x6e3d, 0x46cd, 0xa2eb, 0x1, 0x1);
        gbc.writeMem(0xd80b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeae1);
        EXPECT(gbc.pc(), 0xd80d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80b), 0xcb);
        EXPECT(gbc.readMem(0xd80c), 0x3f);
        // CB 3F 01A5
        gbc.setState(0x77dd, 0x1a8f, 0x6540, 0x71e0, 0x839c, 0x2e88, 0x1, 0x1);
        gbc.writeMem(0x77dd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1a8f);
        EXPECT(gbc.pc(), 0x77df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01A6
        gbc.setState(0x5127, 0xad82, 0xcd0, 0xe1, 0x7ab9, 0x97a1, 0x0, 0x0);
        gbc.writeMem(0x5127, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x5129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01A7
        gbc.setState(0xa197, 0xefe5, 0x8140, 0xbd6d, 0x43dd, 0x87a1, 0x1, 0x0);
        gbc.writeMem(0xa197, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xefe5);
        EXPECT(gbc.pc(), 0xa199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa197), 0xcb);
        EXPECT(gbc.readMem(0xa198), 0x3f);
        // CB 3F 01A8
        gbc.setState(0xe979, 0x3022, 0x1b00, 0x2a48, 0x5c53, 0xb73c, 0x0, 0x0);
        gbc.writeMem(0xe979, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3022);
        EXPECT(gbc.pc(), 0xe97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe979), 0xcb);
        EXPECT(gbc.readMem(0xe97a), 0x3f);
        // CB 3F 01A9
        gbc.setState(0x29c7, 0x909c, 0x770, 0xf809, 0x9189, 0x9d02, 0x0, 0x1);
        gbc.writeMem(0x29c7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x909c);
        EXPECT(gbc.pc(), 0x29c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01AA
        gbc.setState(0x8f30, 0x5bd0, 0x1d40, 0xbfcd, 0xffc3, 0xc5ec, 0x1, 0x1);
        gbc.writeMem(0x8f30, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5bd0);
        EXPECT(gbc.pc(), 0x8f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f30), 0xcb);
        EXPECT(gbc.readMem(0x8f31), 0x3f);
        // CB 3F 01AB
        gbc.setState(0xca69, 0xf4fa, 0x8c80, 0x8320, 0xa72, 0xb714, 0x1, 0x0);
        gbc.writeMem(0xca69, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf4fa);
        EXPECT(gbc.pc(), 0xca6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca69), 0xcb);
        EXPECT(gbc.readMem(0xca6a), 0x3f);
        // CB 3F 01AC
        gbc.setState(0xa6a4, 0x245e, 0xa640, 0x402f, 0x8a8d, 0xbb58, 0x0, 0x0);
        gbc.writeMem(0xa6a4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x245e);
        EXPECT(gbc.pc(), 0xa6a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a4), 0xcb);
        EXPECT(gbc.readMem(0xa6a5), 0x3f);
        // CB 3F 01AD
        gbc.setState(0x5977, 0x47ca, 0xad60, 0xcefd, 0x3f85, 0x9417, 0x0, 0x0);
        gbc.writeMem(0x5977, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x47ca);
        EXPECT(gbc.pc(), 0x5979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01AE
        gbc.setState(0x45ac, 0xd376, 0xcfc0, 0x6fdf, 0xe498, 0x8d26, 0x0, 0x0);
        gbc.writeMem(0x45ac, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd376);
        EXPECT(gbc.pc(), 0x45ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01AF
        gbc.setState(0xe8b, 0x1d8, 0x5cc0, 0xdcfb, 0xa7d0, 0xa5d0, 0x0, 0x1);
        gbc.writeMem(0xe8b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1d8);
        EXPECT(gbc.pc(), 0xe8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01B0
        gbc.setState(0x6bb3, 0xbcdb, 0x46a0, 0xe120, 0x13a, 0xd89c, 0x1, 0x0);
        gbc.writeMem(0x6bb3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbcdb);
        EXPECT(gbc.pc(), 0x6bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01B1
        gbc.setState(0x97d1, 0xbb55, 0x5de0, 0x583f, 0xb7d2, 0x4af8, 0x1, 0x1);
        gbc.writeMem(0x97d1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbb55);
        EXPECT(gbc.pc(), 0x97d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d1), 0xcb);
        EXPECT(gbc.readMem(0x97d2), 0x3f);
        // CB 3F 01B2
        gbc.setState(0x5245, 0x8586, 0xf70, 0xe553, 0x6b69, 0x9121, 0x1, 0x1);
        gbc.writeMem(0x5245, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8586);
        EXPECT(gbc.pc(), 0x5247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01B3
        gbc.setState(0x18c5, 0xf33d, 0xd690, 0x19d9, 0xa343, 0x5101, 0x1, 0x0);
        gbc.writeMem(0x18c5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf33d);
        EXPECT(gbc.pc(), 0x18c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01B4
        gbc.setState(0x9484, 0x2ed4, 0xd5d0, 0x47c3, 0xf7f6, 0xd6b1, 0x1, 0x1);
        gbc.writeMem(0x9484, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2ed4);
        EXPECT(gbc.pc(), 0x9486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9484), 0xcb);
        EXPECT(gbc.readMem(0x9485), 0x3f);
        // CB 3F 01B5
        gbc.setState(0xca6f, 0x33ef, 0xef10, 0x6b5c, 0x9a3b, 0xd3e5, 0x0, 0x1);
        gbc.writeMem(0xca6f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x33ef);
        EXPECT(gbc.pc(), 0xca71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca6f), 0xcb);
        EXPECT(gbc.readMem(0xca70), 0x3f);
        // CB 3F 01B6
        gbc.setState(0x52fa, 0xfa1b, 0xd4f0, 0xffd5, 0x9052, 0x56d4, 0x0, 0x0);
        gbc.writeMem(0x52fa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0x52fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01B8
        gbc.setState(0x57f2, 0x17ad, 0xac20, 0x4e1, 0x1dee, 0xd300, 0x1, 0x0);
        gbc.writeMem(0x57f2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x17ad);
        EXPECT(gbc.pc(), 0x57f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01B9
        gbc.setState(0x9bf4, 0x5910, 0x13f0, 0x6fe2, 0x88a6, 0x6ab0, 0x1, 0x0);
        gbc.writeMem(0x9bf4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5910);
        EXPECT(gbc.pc(), 0x9bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf4), 0xcb);
        EXPECT(gbc.readMem(0x9bf5), 0x3f);
        // CB 3F 01BA
        gbc.setState(0x883c, 0xd81, 0x7910, 0x9a7, 0x6137, 0xbc56, 0x0, 0x0);
        gbc.writeMem(0x883c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd81);
        EXPECT(gbc.pc(), 0x883e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x883c), 0xcb);
        EXPECT(gbc.readMem(0x883d), 0x3f);
        // CB 3F 01BB
        gbc.setState(0xdaa9, 0xb67d, 0x74b0, 0x6c8a, 0x5895, 0x51b4, 0x1, 0x1);
        gbc.writeMem(0xdaa9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb67d);
        EXPECT(gbc.pc(), 0xdaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa9), 0xcb);
        EXPECT(gbc.readMem(0xdaaa), 0x3f);
        // CB 3F 01BC
        gbc.setState(0xde3d, 0x4817, 0x47e0, 0xe151, 0x8918, 0x8121, 0x0, 0x1);
        gbc.writeMem(0xde3d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4817);
        EXPECT(gbc.pc(), 0xde3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3d), 0xcb);
        EXPECT(gbc.readMem(0xde3e), 0x3f);
        // CB 3F 01BD
        gbc.setState(0x9e8c, 0x3b8c, 0xe830, 0xc757, 0xe037, 0x1f0e, 0x1, 0x0);
        gbc.writeMem(0x9e8c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3b8c);
        EXPECT(gbc.pc(), 0x9e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e8c), 0xcb);
        EXPECT(gbc.readMem(0x9e8d), 0x3f);
        // CB 3F 01BE
        gbc.setState(0x16d1, 0xf385, 0xec60, 0x9bcf, 0xc984, 0x44c4, 0x1, 0x0);
        gbc.writeMem(0x16d1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf385);
        EXPECT(gbc.pc(), 0x16d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01BF
        gbc.setState(0xcfd9, 0x4cf2, 0xd360, 0x2aaf, 0x3488, 0x9e74, 0x0, 0x1);
        gbc.writeMem(0xcfd9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4cf2);
        EXPECT(gbc.pc(), 0xcfdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd9), 0xcb);
        EXPECT(gbc.readMem(0xcfda), 0x3f);
        // CB 3F 01C0
        gbc.setState(0x8c17, 0x4df1, 0xa840, 0x8386, 0xabed, 0x744c, 0x0, 0x0);
        gbc.writeMem(0x8c17, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4df1);
        EXPECT(gbc.pc(), 0x8c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c17), 0xcb);
        EXPECT(gbc.readMem(0x8c18), 0x3f);
        // CB 3F 01C1
        gbc.setState(0x2069, 0xdfe4, 0x8b90, 0xff55, 0xd21a, 0x3bab, 0x1, 0x0);
        gbc.writeMem(0x2069, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdfe4);
        EXPECT(gbc.pc(), 0x206b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01C2
        gbc.setState(0xdf59, 0xab7f, 0xbda0, 0x577c, 0xe9e4, 0xe6ee, 0x1, 0x0);
        gbc.writeMem(0xdf59, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xab7f);
        EXPECT(gbc.pc(), 0xdf5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf59), 0xcb);
        EXPECT(gbc.readMem(0xdf5a), 0x3f);
        // CB 3F 01C3
        gbc.setState(0xa120, 0x47f, 0x7320, 0xb1c7, 0x6ee1, 0xc870, 0x0, 0x1);
        gbc.writeMem(0xa120, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x47f);
        EXPECT(gbc.pc(), 0xa122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa120), 0xcb);
        EXPECT(gbc.readMem(0xa121), 0x3f);
        // CB 3F 01C4
        gbc.setState(0x8a79, 0x8dd0, 0x3f70, 0x8f6d, 0x41c, 0x3109, 0x1, 0x1);
        gbc.writeMem(0x8a79, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8dd0);
        EXPECT(gbc.pc(), 0x8a7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a79), 0xcb);
        EXPECT(gbc.readMem(0x8a7a), 0x3f);
        // CB 3F 01C5
        gbc.setState(0xb19d, 0xde3a, 0x5700, 0xd709, 0x9ab7, 0x988c, 0x1, 0x0);
        gbc.writeMem(0xb19d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xde3a);
        EXPECT(gbc.pc(), 0xb19f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19d), 0xcb);
        EXPECT(gbc.readMem(0xb19e), 0x3f);
        // CB 3F 01C6
        gbc.setState(0x7914, 0xed41, 0x6980, 0xae4, 0xf254, 0x9b8d, 0x1, 0x0);
        gbc.writeMem(0x7914, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xed41);
        EXPECT(gbc.pc(), 0x7916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01C7
        gbc.setState(0x6e9c, 0x3de2, 0x9310, 0xbbe7, 0x1012, 0xc88, 0x0, 0x1);
        gbc.writeMem(0x6e9c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3de2);
        EXPECT(gbc.pc(), 0x6e9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01C8
        gbc.setState(0x9e83, 0xc68a, 0x90, 0xb11a, 0x6070, 0x974, 0x1, 0x0);
        gbc.writeMem(0x9e83, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc68a);
        EXPECT(gbc.pc(), 0x9e85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e83), 0xcb);
        EXPECT(gbc.readMem(0x9e84), 0x3f);
        // CB 3F 01C9
        gbc.setState(0xc232, 0xa51f, 0xf350, 0x6514, 0x9482, 0x26e4, 0x0, 0x0);
        gbc.writeMem(0xc232, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa51f);
        EXPECT(gbc.pc(), 0xc234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc232), 0xcb);
        EXPECT(gbc.readMem(0xc233), 0x3f);
        // CB 3F 01CA
        gbc.setState(0xa241, 0x3ed8, 0x900, 0xa025, 0x317a, 0xacbd, 0x0, 0x1);
        gbc.writeMem(0xa241, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3ed8);
        EXPECT(gbc.pc(), 0xa243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa241), 0xcb);
        EXPECT(gbc.readMem(0xa242), 0x3f);
        // CB 3F 01CB
        gbc.setState(0x64b1, 0x3cf8, 0x8f50, 0xa87e, 0x3d9e, 0xbb8b, 0x0, 0x0);
        gbc.writeMem(0x64b1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3cf8);
        EXPECT(gbc.pc(), 0x64b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01CC
        gbc.setState(0x86f4, 0x18f, 0x73d0, 0x3b9b, 0xa2ad, 0x7676, 0x0, 0x1);
        gbc.writeMem(0x86f4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x18f);
        EXPECT(gbc.pc(), 0x86f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f4), 0xcb);
        EXPECT(gbc.readMem(0x86f5), 0x3f);
        // CB 3F 01CD
        gbc.setState(0x5084, 0x5979, 0x7d40, 0x53d8, 0x767d, 0x8d20, 0x1, 0x1);
        gbc.writeMem(0x5084, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5979);
        EXPECT(gbc.pc(), 0x5086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01CE
        gbc.setState(0xd1f5, 0x7467, 0x6e10, 0x6e0, 0xda5d, 0x4260, 0x0, 0x0);
        gbc.writeMem(0xd1f5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7467);
        EXPECT(gbc.pc(), 0xd1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f5), 0xcb);
        EXPECT(gbc.readMem(0xd1f6), 0x3f);
        // CB 3F 01CF
        gbc.setState(0x3e15, 0xceb3, 0x84f0, 0xcf45, 0xbbae, 0x3d04, 0x0, 0x1);
        gbc.writeMem(0x3e15, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xceb3);
        EXPECT(gbc.pc(), 0x3e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01D0
        gbc.setState(0x909a, 0x798f, 0x2270, 0xf043, 0x6457, 0xf15e, 0x0, 0x0);
        gbc.writeMem(0x909a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x798f);
        EXPECT(gbc.pc(), 0x909c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909a), 0xcb);
        EXPECT(gbc.readMem(0x909b), 0x3f);
        // CB 3F 01D1
        gbc.setState(0x945e, 0x4c93, 0xdb40, 0x4818, 0x4bb2, 0x608f, 0x0, 0x0);
        gbc.writeMem(0x945e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4c93);
        EXPECT(gbc.pc(), 0x9460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945e), 0xcb);
        EXPECT(gbc.readMem(0x945f), 0x3f);
        // CB 3F 01D2
        gbc.setState(0xdd97, 0xb495, 0x460, 0x9603, 0x2810, 0x88f7, 0x1, 0x1);
        gbc.writeMem(0xdd97, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb495);
        EXPECT(gbc.pc(), 0xdd99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd97), 0xcb);
        EXPECT(gbc.readMem(0xdd98), 0x3f);
        // CB 3F 01D3
        gbc.setState(0x7fc1, 0xf6fa, 0x3f70, 0x1542, 0xb93b, 0xfe7c, 0x1, 0x0);
        gbc.writeMem(0x7fc1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf6fa);
        EXPECT(gbc.pc(), 0x7fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01D4
        gbc.setState(0xb0f9, 0x9e9, 0x4380, 0x343c, 0x3c6e, 0x66ad, 0x0, 0x0);
        gbc.writeMem(0xb0f9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9e9);
        EXPECT(gbc.pc(), 0xb0fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f9), 0xcb);
        EXPECT(gbc.readMem(0xb0fa), 0x3f);
        // CB 3F 01D5
        gbc.setState(0x7c4f, 0x6afa, 0x57d0, 0x2c39, 0xb4f2, 0x6900, 0x1, 0x1);
        gbc.writeMem(0x7c4f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6afa);
        EXPECT(gbc.pc(), 0x7c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01D6
        gbc.setState(0x5288, 0xd517, 0x51a0, 0x3af9, 0x2374, 0x641a, 0x0, 0x0);
        gbc.writeMem(0x5288, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd517);
        EXPECT(gbc.pc(), 0x528a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01D7
        gbc.setState(0x1b04, 0x505c, 0xcfb0, 0x4a59, 0x52, 0x9217, 0x0, 0x1);
        gbc.writeMem(0x1b04, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x505c);
        EXPECT(gbc.pc(), 0x1b06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01D8
        gbc.setState(0x7a0a, 0x28b5, 0xc840, 0x3f3, 0x1c91, 0x4e13, 0x1, 0x1);
        gbc.writeMem(0x7a0a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x28b5);
        EXPECT(gbc.pc(), 0x7a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01D9
        gbc.setState(0x8cf9, 0xeb06, 0x20, 0x542, 0x3028, 0x1008, 0x1, 0x1);
        gbc.writeMem(0x8cf9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xeb06);
        EXPECT(gbc.pc(), 0x8cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf9), 0xcb);
        EXPECT(gbc.readMem(0x8cfa), 0x3f);
        // CB 3F 01DA
        gbc.setState(0x99ba, 0xa66b, 0x4f30, 0x11cb, 0x5b61, 0x9355, 0x0, 0x0);
        gbc.writeMem(0x99ba, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa66b);
        EXPECT(gbc.pc(), 0x99bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ba), 0xcb);
        EXPECT(gbc.readMem(0x99bb), 0x3f);
        // CB 3F 01DB
        gbc.setState(0x6b1d, 0xd231, 0x8ba0, 0xd83c, 0x4ce3, 0x9328, 0x1, 0x1);
        gbc.writeMem(0x6b1d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd231);
        EXPECT(gbc.pc(), 0x6b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01DC
        gbc.setState(0xd8b5, 0x4331, 0xe270, 0x2796, 0xb021, 0x4649, 0x1, 0x0);
        gbc.writeMem(0xd8b5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4331);
        EXPECT(gbc.pc(), 0xd8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b5), 0xcb);
        EXPECT(gbc.readMem(0xd8b6), 0x3f);
        // CB 3F 01DD
        gbc.setState(0xdba6, 0xc651, 0xeb0, 0x8ea4, 0x42aa, 0x11df, 0x0, 0x1);
        gbc.writeMem(0xdba6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc651);
        EXPECT(gbc.pc(), 0xdba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba6), 0xcb);
        EXPECT(gbc.readMem(0xdba7), 0x3f);
        // CB 3F 01DE
        gbc.setState(0x72b8, 0x4d92, 0x3530, 0x2a8b, 0x5fb3, 0x761f, 0x1, 0x1);
        gbc.writeMem(0x72b8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4d92);
        EXPECT(gbc.pc(), 0x72ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01DF
        gbc.setState(0x333e, 0xcfdd, 0x4770, 0xa40b, 0x18ee, 0xd171, 0x1, 0x1);
        gbc.writeMem(0x333e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xcfdd);
        EXPECT(gbc.pc(), 0x3340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01E0
        gbc.setState(0x9710, 0x1763, 0xdd0, 0xc34b, 0x8bde, 0x3ae9, 0x1, 0x0);
        gbc.writeMem(0x9710, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1763);
        EXPECT(gbc.pc(), 0x9712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9710), 0xcb);
        EXPECT(gbc.readMem(0x9711), 0x3f);
        // CB 3F 01E1
        gbc.setState(0x4622, 0xe2c8, 0xea90, 0xeed6, 0xd936, 0x8651, 0x0, 0x1);
        gbc.writeMem(0x4622, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe2c8);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01E2
        gbc.setState(0x7aab, 0xa259, 0xf780, 0x5d0e, 0xc257, 0x2b2c, 0x1, 0x0);
        gbc.writeMem(0x7aab, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa259);
        EXPECT(gbc.pc(), 0x7aad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01E3
        gbc.setState(0x22d1, 0x7f2e, 0xdc40, 0xfaf9, 0x1b13, 0xd60c, 0x0, 0x1);
        gbc.writeMem(0x22d1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7f2e);
        EXPECT(gbc.pc(), 0x22d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01E4
        gbc.setState(0x11f3, 0x25d9, 0x1350, 0xb0a, 0x71e0, 0x2081, 0x1, 0x0);
        gbc.writeMem(0x11f3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x25d9);
        EXPECT(gbc.pc(), 0x11f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01E5
        gbc.setState(0xdc14, 0xdc5b, 0x1b90, 0xced5, 0xbbe3, 0x62fc, 0x1, 0x1);
        gbc.writeMem(0xdc14, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdc5b);
        EXPECT(gbc.pc(), 0xdc16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc14), 0xcb);
        EXPECT(gbc.readMem(0xdc15), 0x3f);
        // CB 3F 01E6
        gbc.setState(0xb11e, 0xc002, 0x82c0, 0x435e, 0xf9f5, 0xf561, 0x1, 0x1);
        gbc.writeMem(0xb11e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc002);
        EXPECT(gbc.pc(), 0xb120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11e), 0xcb);
        EXPECT(gbc.readMem(0xb11f), 0x3f);
        // CB 3F 01E7
        gbc.setState(0xbdfd, 0x4cd7, 0x6540, 0x59b5, 0xd6f8, 0x9d, 0x0, 0x0);
        gbc.writeMem(0xbdfd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4cd7);
        EXPECT(gbc.pc(), 0xbdff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdfd), 0xcb);
        EXPECT(gbc.readMem(0xbdfe), 0x3f);
        // CB 3F 01E8
        gbc.setState(0x9aa7, 0xd8c1, 0xc290, 0xfd19, 0x9a81, 0xd780, 0x1, 0x0);
        gbc.writeMem(0x9aa7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd8c1);
        EXPECT(gbc.pc(), 0x9aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa7), 0xcb);
        EXPECT(gbc.readMem(0x9aa8), 0x3f);
        // CB 3F 01E9
        gbc.setState(0x493c, 0xf646, 0x9d10, 0x8e70, 0x9a9f, 0x181e, 0x1, 0x1);
        gbc.writeMem(0x493c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf646);
        EXPECT(gbc.pc(), 0x493e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01EA
        gbc.setState(0xaf6d, 0xf877, 0xf400, 0xd3b9, 0x5e52, 0x8207, 0x0, 0x0);
        gbc.writeMem(0xaf6d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf877);
        EXPECT(gbc.pc(), 0xaf6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6d), 0xcb);
        EXPECT(gbc.readMem(0xaf6e), 0x3f);
        // CB 3F 01EB
        gbc.setState(0x226, 0xbc74, 0x32f0, 0x4506, 0x2c00, 0x6118, 0x0, 0x0);
        gbc.writeMem(0x226, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xbc74);
        EXPECT(gbc.pc(), 0x228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01EC
        gbc.setState(0x144d, 0xd949, 0x3400, 0x2376, 0x6d9, 0xc3b, 0x1, 0x0);
        gbc.writeMem(0x144d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd949);
        EXPECT(gbc.pc(), 0x144f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01ED
        gbc.setState(0x7e2c, 0x6f8, 0xecf0, 0x2c8b, 0x9523, 0x4d04, 0x1, 0x0);
        gbc.writeMem(0x7e2c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6f8);
        EXPECT(gbc.pc(), 0x7e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01EE
        gbc.setState(0x10de, 0x3052, 0xaa0, 0x315, 0xa1de, 0x73c2, 0x0, 0x0);
        gbc.writeMem(0x10de, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3052);
        EXPECT(gbc.pc(), 0x10e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01EF
        gbc.setState(0xa44f, 0x7aa5, 0xfa00, 0x5041, 0x46ad, 0xcc71, 0x0, 0x1);
        gbc.writeMem(0xa44f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0xa451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44f), 0xcb);
        EXPECT(gbc.readMem(0xa450), 0x3f);
        // CB 3F 01F0
        gbc.setState(0x8607, 0xbb71, 0xcd60, 0x5869, 0xef13, 0xf88b, 0x1, 0x1);
        gbc.writeMem(0x8607, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbb71);
        EXPECT(gbc.pc(), 0x8609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8607), 0xcb);
        EXPECT(gbc.readMem(0x8608), 0x3f);
        // CB 3F 01F1
        gbc.setState(0xebe0, 0xdbcf, 0xd670, 0x8f83, 0x135c, 0x9351, 0x0, 0x1);
        gbc.writeMem(0xebe0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdbcf);
        EXPECT(gbc.pc(), 0xebe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe0), 0xcb);
        EXPECT(gbc.readMem(0xebe1), 0x3f);
        // CB 3F 01F2
        gbc.setState(0x4af1, 0x760, 0xc700, 0x26fb, 0xbddd, 0x43d3, 0x1, 0x0);
        gbc.writeMem(0x4af1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x760);
        EXPECT(gbc.pc(), 0x4af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01F3
        gbc.setState(0x2a7f, 0xd654, 0x3dc0, 0xd36d, 0x9a4f, 0x4a21, 0x0, 0x0);
        gbc.writeMem(0x2a7f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd654);
        EXPECT(gbc.pc(), 0x2a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01F4
        gbc.setState(0x7dea, 0xd6f8, 0xa640, 0xec4f, 0xa4dc, 0x1042, 0x1, 0x0);
        gbc.writeMem(0x7dea, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd6f8);
        EXPECT(gbc.pc(), 0x7dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01F6
        gbc.setState(0xec4d, 0x4d47, 0x6670, 0xa74b, 0x341, 0x56d8, 0x0, 0x1);
        gbc.writeMem(0xec4d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4d47);
        EXPECT(gbc.pc(), 0xec4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec4d), 0xcb);
        EXPECT(gbc.readMem(0xec4e), 0x3f);
        // CB 3F 01F7
        gbc.setState(0x3ba6, 0x10b4, 0x98f0, 0x58be, 0x226d, 0x1716, 0x0, 0x1);
        gbc.writeMem(0x3ba6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x10b4);
        EXPECT(gbc.pc(), 0x3ba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01F8
        gbc.setState(0xe391, 0xc70e, 0x3e50, 0xdc56, 0xe302, 0x1b15, 0x0, 0x1);
        gbc.writeMem(0xe391, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc70e);
        EXPECT(gbc.pc(), 0xe393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe391), 0xcb);
        EXPECT(gbc.readMem(0xe392), 0x3f);
        // CB 3F 01F9
        gbc.setState(0xa76b, 0x8b8c, 0x1d20, 0xed08, 0xbe95, 0x3312, 0x0, 0x1);
        gbc.writeMem(0xa76b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8b8c);
        EXPECT(gbc.pc(), 0xa76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76b), 0xcb);
        EXPECT(gbc.readMem(0xa76c), 0x3f);
        // CB 3F 01FA
        gbc.setState(0xa588, 0xa7ed, 0x2520, 0xe869, 0xc498, 0x816f, 0x0, 0x1);
        gbc.writeMem(0xa588, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa7ed);
        EXPECT(gbc.pc(), 0xa58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa588), 0xcb);
        EXPECT(gbc.readMem(0xa589), 0x3f);
        // CB 3F 01FB
        gbc.setState(0xc2a4, 0xa193, 0xb6c0, 0x3023, 0xc2c5, 0x96d, 0x0, 0x0);
        gbc.writeMem(0xc2a4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa193);
        EXPECT(gbc.pc(), 0xc2a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a4), 0xcb);
        EXPECT(gbc.readMem(0xc2a5), 0x3f);
        // CB 3F 01FC
        gbc.setState(0x7cfa, 0xf751, 0x88a0, 0x115c, 0x3381, 0xd601, 0x0, 0x0);
        gbc.writeMem(0x7cfa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf751);
        EXPECT(gbc.pc(), 0x7cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 01FD
        gbc.setState(0x4677, 0xd171, 0xb590, 0xd0b8, 0xd355, 0xd13d, 0x1, 0x0);
        gbc.writeMem(0x4677, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd171);
        EXPECT(gbc.pc(), 0x4679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 01FF
        gbc.setState(0x687b, 0xd8cb, 0xe0f0, 0xdf18, 0x97bc, 0xad8b, 0x0, 0x1);
        gbc.writeMem(0x687b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd8cb);
        EXPECT(gbc.pc(), 0x687d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0200
        gbc.setState(0x6095, 0x1047, 0x5000, 0xeb3b, 0x3e96, 0x61a9, 0x1, 0x0);
        gbc.writeMem(0x6095, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1047);
        EXPECT(gbc.pc(), 0x6097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0201
        gbc.setState(0x4695, 0xa073, 0x8950, 0x923c, 0x44ef, 0x90fe, 0x1, 0x0);
        gbc.writeMem(0x4695, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa073);
        EXPECT(gbc.pc(), 0x4697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0202
        gbc.setState(0xac30, 0x310a, 0x2cb0, 0x1400, 0x37de, 0x7a04, 0x1, 0x1);
        gbc.writeMem(0xac30, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x310a);
        EXPECT(gbc.pc(), 0xac32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac30), 0xcb);
        EXPECT(gbc.readMem(0xac31), 0x3f);
        // CB 3F 0203
        gbc.setState(0xdb0d, 0xe84c, 0x9f20, 0x6976, 0xee70, 0xd7fc, 0x1, 0x1);
        gbc.writeMem(0xdb0d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe84c);
        EXPECT(gbc.pc(), 0xdb0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb0d), 0xcb);
        EXPECT(gbc.readMem(0xdb0e), 0x3f);
        // CB 3F 0204
        gbc.setState(0xad8, 0x6a41, 0xfeb0, 0x73e7, 0x2d89, 0xf945, 0x1, 0x0);
        gbc.writeMem(0xad8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6a41);
        EXPECT(gbc.pc(), 0xada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0206
        gbc.setState(0x3c8d, 0x581d, 0xae10, 0x19e7, 0xa370, 0xe056, 0x0, 0x0);
        gbc.writeMem(0x3c8d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x581d);
        EXPECT(gbc.pc(), 0x3c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0207
        gbc.setState(0x8723, 0xb5a5, 0x7120, 0xb7c4, 0x3d46, 0x9089, 0x1, 0x1);
        gbc.writeMem(0x8723, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb5a5);
        EXPECT(gbc.pc(), 0x8725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8723), 0xcb);
        EXPECT(gbc.readMem(0x8724), 0x3f);
        // CB 3F 0208
        gbc.setState(0x64a, 0x7627, 0x1ee0, 0x3e7e, 0xb80d, 0x3178, 0x0, 0x0);
        gbc.writeMem(0x64a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7627);
        EXPECT(gbc.pc(), 0x64c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0209
        gbc.setState(0xadef, 0xbfdd, 0x1340, 0x8c97, 0x2d01, 0xb738, 0x0, 0x0);
        gbc.writeMem(0xadef, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xbfdd);
        EXPECT(gbc.pc(), 0xadf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadef), 0xcb);
        EXPECT(gbc.readMem(0xadf0), 0x3f);
        // CB 3F 020B
        gbc.setState(0xb5c6, 0xe86, 0xe1d0, 0xa638, 0x7995, 0x422f, 0x1, 0x1);
        gbc.writeMem(0xb5c6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe86);
        EXPECT(gbc.pc(), 0xb5c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c6), 0xcb);
        EXPECT(gbc.readMem(0xb5c7), 0x3f);
        // CB 3F 020C
        gbc.setState(0x4d80, 0xfb1a, 0x8ea0, 0xba8b, 0xe733, 0xd438, 0x0, 0x0);
        gbc.writeMem(0x4d80, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfb1a);
        EXPECT(gbc.pc(), 0x4d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 020D
        gbc.setState(0x3daf, 0x8aed, 0x79d0, 0xa0ed, 0xe3c3, 0xa684, 0x0, 0x1);
        gbc.writeMem(0x3daf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8aed);
        EXPECT(gbc.pc(), 0x3db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 020E
        gbc.setState(0xc342, 0x653f, 0xf550, 0x94a0, 0x8608, 0xabfe, 0x0, 0x1);
        gbc.writeMem(0xc342, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x653f);
        EXPECT(gbc.pc(), 0xc344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc342), 0xcb);
        EXPECT(gbc.readMem(0xc343), 0x3f);
        // CB 3F 020F
        gbc.setState(0x331, 0x1148, 0x1860, 0xce4f, 0x72ad, 0xcc5f, 0x0, 0x0);
        gbc.writeMem(0x331, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1148);
        EXPECT(gbc.pc(), 0x333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0211
        gbc.setState(0xbd02, 0x2404, 0x8d30, 0xc7ed, 0x2a21, 0xf149, 0x1, 0x0);
        gbc.writeMem(0xbd02, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2404);
        EXPECT(gbc.pc(), 0xbd04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd02), 0xcb);
        EXPECT(gbc.readMem(0xbd03), 0x3f);
        // CB 3F 0212
        gbc.setState(0x6889, 0x6197, 0x4c90, 0x9f6c, 0xb2dd, 0xc381, 0x1, 0x0);
        gbc.writeMem(0x6889, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6197);
        EXPECT(gbc.pc(), 0x688b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0213
        gbc.setState(0x4117, 0xd9b, 0x7640, 0x725d, 0xeefe, 0x7596, 0x0, 0x0);
        gbc.writeMem(0x4117, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd9b);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0215
        gbc.setState(0x3c67, 0x7cd4, 0x2bc0, 0xc6ce, 0x3b5, 0x9c3f, 0x1, 0x0);
        gbc.writeMem(0x3c67, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7cd4);
        EXPECT(gbc.pc(), 0x3c69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0216
        gbc.setState(0xdc8, 0x1238, 0xf100, 0x2b4a, 0x5558, 0x3c81, 0x1, 0x1);
        gbc.writeMem(0xdc8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1238);
        EXPECT(gbc.pc(), 0xdca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0217
        gbc.setState(0xad2f, 0x253b, 0x4780, 0x432d, 0xe468, 0x2abc, 0x1, 0x0);
        gbc.writeMem(0xad2f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x253b);
        EXPECT(gbc.pc(), 0xad31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad2f), 0xcb);
        EXPECT(gbc.readMem(0xad30), 0x3f);
        // CB 3F 0218
        gbc.setState(0x1eb9, 0x5d51, 0x7810, 0x7820, 0x1b31, 0x9d07, 0x1, 0x0);
        gbc.writeMem(0x1eb9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5d51);
        EXPECT(gbc.pc(), 0x1ebb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0219
        gbc.setState(0xc36e, 0xf290, 0x5da0, 0xeed8, 0xeb, 0x17d8, 0x1, 0x1);
        gbc.writeMem(0xc36e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf290);
        EXPECT(gbc.pc(), 0xc370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36e), 0xcb);
        EXPECT(gbc.readMem(0xc36f), 0x3f);
        // CB 3F 021A
        gbc.setState(0xbf81, 0x92da, 0x9250, 0x5668, 0xf9a7, 0x5930, 0x0, 0x0);
        gbc.writeMem(0xbf81, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x92da);
        EXPECT(gbc.pc(), 0xbf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf81), 0xcb);
        EXPECT(gbc.readMem(0xbf82), 0x3f);
        // CB 3F 021B
        gbc.setState(0xa185, 0x1b85, 0xa730, 0x7f15, 0x49d5, 0xb131, 0x1, 0x1);
        gbc.writeMem(0xa185, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1b85);
        EXPECT(gbc.pc(), 0xa187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa185), 0xcb);
        EXPECT(gbc.readMem(0xa186), 0x3f);
        // CB 3F 021C
        gbc.setState(0xb26b, 0x40e0, 0xff60, 0x8e91, 0xd43, 0x6abe, 0x0, 0x0);
        gbc.writeMem(0xb26b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x40e0);
        EXPECT(gbc.pc(), 0xb26d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb26b), 0xcb);
        EXPECT(gbc.readMem(0xb26c), 0x3f);
        // CB 3F 021D
        gbc.setState(0xa6cb, 0xfa74, 0x1620, 0x3cc6, 0x3d75, 0xdb68, 0x0, 0x1);
        gbc.writeMem(0xa6cb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfa74);
        EXPECT(gbc.pc(), 0xa6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6cb), 0xcb);
        EXPECT(gbc.readMem(0xa6cc), 0x3f);
        // CB 3F 021E
        gbc.setState(0x96f9, 0x46a9, 0xac50, 0xd5ab, 0xcb5a, 0x45fe, 0x0, 0x1);
        gbc.writeMem(0x96f9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x46a9);
        EXPECT(gbc.pc(), 0x96fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f9), 0xcb);
        EXPECT(gbc.readMem(0x96fa), 0x3f);
        // CB 3F 021F
        gbc.setState(0xa7b4, 0x6f63, 0x69f0, 0x6787, 0x7151, 0x4bed, 0x0, 0x1);
        gbc.writeMem(0xa7b4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6f63);
        EXPECT(gbc.pc(), 0xa7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7b4), 0xcb);
        EXPECT(gbc.readMem(0xa7b5), 0x3f);
        // CB 3F 0220
        gbc.setState(0x38ed, 0xb4a5, 0xd830, 0xfd09, 0xce8c, 0xb32f, 0x1, 0x1);
        gbc.writeMem(0x38ed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb4a5);
        EXPECT(gbc.pc(), 0x38ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0221
        gbc.setState(0xc52d, 0x6a9d, 0x6950, 0x2612, 0x90bc, 0x7b08, 0x1, 0x0);
        gbc.writeMem(0xc52d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6a9d);
        EXPECT(gbc.pc(), 0xc52f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52d), 0xcb);
        EXPECT(gbc.readMem(0xc52e), 0x3f);
        // CB 3F 0222
        gbc.setState(0x80a1, 0x395d, 0x1760, 0x654, 0x438f, 0xa592, 0x0, 0x0);
        gbc.writeMem(0x80a1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x395d);
        EXPECT(gbc.pc(), 0x80a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a1), 0xcb);
        EXPECT(gbc.readMem(0x80a2), 0x3f);
        // CB 3F 0223
        gbc.setState(0x628d, 0x2a2a, 0xae70, 0x9291, 0x4cc3, 0xddeb, 0x1, 0x1);
        gbc.writeMem(0x628d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2a2a);
        EXPECT(gbc.pc(), 0x628f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0224
        gbc.setState(0x3872, 0xd399, 0xca40, 0x173b, 0xd3b3, 0x8264, 0x0, 0x1);
        gbc.writeMem(0x3872, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd399);
        EXPECT(gbc.pc(), 0x3874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0225
        gbc.setState(0xcad2, 0x2fd8, 0x3820, 0x8c87, 0xf420, 0xdfd4, 0x0, 0x0);
        gbc.writeMem(0xcad2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2fd8);
        EXPECT(gbc.pc(), 0xcad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad2), 0xcb);
        EXPECT(gbc.readMem(0xcad3), 0x3f);
        // CB 3F 0226
        gbc.setState(0x545, 0xea45, 0x5f20, 0x5fce, 0x6fa8, 0x8f97, 0x0, 0x0);
        gbc.writeMem(0x545, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xea45);
        EXPECT(gbc.pc(), 0x547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0227
        gbc.setState(0xe3a2, 0x1894, 0x8280, 0x23ca, 0xa7b3, 0x1186, 0x0, 0x0);
        gbc.writeMem(0xe3a2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1894);
        EXPECT(gbc.pc(), 0xe3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a2), 0xcb);
        EXPECT(gbc.readMem(0xe3a3), 0x3f);
        // CB 3F 0228
        gbc.setState(0x79d6, 0x48c, 0xd260, 0x1a08, 0x61d7, 0x27df, 0x0, 0x1);
        gbc.writeMem(0x79d6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x48c);
        EXPECT(gbc.pc(), 0x79d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0229
        gbc.setState(0x6f41, 0xe5f7, 0x7660, 0x55da, 0x78a0, 0xbf89, 0x1, 0x0);
        gbc.writeMem(0x6f41, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe5f7);
        EXPECT(gbc.pc(), 0x6f43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 022A
        gbc.setState(0xe17c, 0xa80d, 0xcdd0, 0xc5d5, 0x7133, 0xb446, 0x1, 0x1);
        gbc.writeMem(0xe17c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa80d);
        EXPECT(gbc.pc(), 0xe17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe17c), 0xcb);
        EXPECT(gbc.readMem(0xe17d), 0x3f);
        // CB 3F 022B
        gbc.setState(0x8e0c, 0xca9, 0xfed0, 0xe2c1, 0x2400, 0x9198, 0x0, 0x1);
        gbc.writeMem(0x8e0c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xca9);
        EXPECT(gbc.pc(), 0x8e0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e0c), 0xcb);
        EXPECT(gbc.readMem(0x8e0d), 0x3f);
        // CB 3F 022C
        gbc.setState(0xb262, 0xdef0, 0xe430, 0x8636, 0xaee3, 0x5ec1, 0x0, 0x1);
        gbc.writeMem(0xb262, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdef0);
        EXPECT(gbc.pc(), 0xb264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb262), 0xcb);
        EXPECT(gbc.readMem(0xb263), 0x3f);
        // CB 3F 022D
        gbc.setState(0x4e13, 0x937d, 0x6e30, 0xc3b, 0xec39, 0x41ae, 0x1, 0x0);
        gbc.writeMem(0x4e13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x937d);
        EXPECT(gbc.pc(), 0x4e15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 022E
        gbc.setState(0x6e52, 0xb797, 0x7a90, 0xb6c6, 0xdcca, 0x398c, 0x0, 0x1);
        gbc.writeMem(0x6e52, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb797);
        EXPECT(gbc.pc(), 0x6e54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 022F
        gbc.setState(0x658b, 0x2c0e, 0x98b0, 0x9507, 0x8f34, 0x4d1b, 0x1, 0x1);
        gbc.writeMem(0x658b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2c0e);
        EXPECT(gbc.pc(), 0x658d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0231
        gbc.setState(0x31f1, 0x3d58, 0x850, 0xd243, 0x41b, 0x3063, 0x0, 0x0);
        gbc.writeMem(0x31f1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3d58);
        EXPECT(gbc.pc(), 0x31f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0233
        gbc.setState(0x3ea1, 0xc4a6, 0x43c0, 0xc1d7, 0x15c5, 0x1c46, 0x0, 0x0);
        gbc.writeMem(0x3ea1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc4a6);
        EXPECT(gbc.pc(), 0x3ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0234
        gbc.setState(0x103f, 0xdb72, 0xe1b0, 0xff5e, 0x9579, 0x1352, 0x0, 0x1);
        gbc.writeMem(0x103f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdb72);
        EXPECT(gbc.pc(), 0x1041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0235
        gbc.setState(0xd7c, 0x1943, 0xb1a0, 0x6df, 0xa223, 0x4f42, 0x1, 0x1);
        gbc.writeMem(0xd7c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1943);
        EXPECT(gbc.pc(), 0xd7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0236
        gbc.setState(0xb239, 0x28ab, 0xeb40, 0x27f5, 0xe4e0, 0xbf3b, 0x0, 0x1);
        gbc.writeMem(0xb239, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x28ab);
        EXPECT(gbc.pc(), 0xb23b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb239), 0xcb);
        EXPECT(gbc.readMem(0xb23a), 0x3f);
        // CB 3F 0237
        gbc.setState(0x4418, 0xf77c, 0x3de0, 0x2e05, 0xae51, 0xb1d8, 0x1, 0x0);
        gbc.writeMem(0x4418, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf77c);
        EXPECT(gbc.pc(), 0x441a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0238
        gbc.setState(0x2760, 0xc3c2, 0xb060, 0xe026, 0x536d, 0x3c2b, 0x1, 0x1);
        gbc.writeMem(0x2760, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc3c2);
        EXPECT(gbc.pc(), 0x2762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0239
        gbc.setState(0xb28a, 0xdc44, 0x9620, 0x4b28, 0xd7df, 0xc52e, 0x0, 0x1);
        gbc.writeMem(0xb28a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xdc44);
        EXPECT(gbc.pc(), 0xb28c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28a), 0xcb);
        EXPECT(gbc.readMem(0xb28b), 0x3f);
        // CB 3F 023A
        gbc.setState(0x7df1, 0xad91, 0x4fb0, 0xbd0d, 0x8adc, 0x554b, 0x1, 0x0);
        gbc.writeMem(0x7df1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xad91);
        EXPECT(gbc.pc(), 0x7df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 023B
        gbc.setState(0x7ea6, 0xf08c, 0xe2f0, 0x1f6a, 0x28e9, 0x642a, 0x0, 0x0);
        gbc.writeMem(0x7ea6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf08c);
        EXPECT(gbc.pc(), 0x7ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 023C
        gbc.setState(0x75d0, 0x5568, 0x8a50, 0x5c04, 0x765c, 0xeb82, 0x1, 0x0);
        gbc.writeMem(0x75d0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5568);
        EXPECT(gbc.pc(), 0x75d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 023E
        gbc.setState(0x61e4, 0x6d87, 0x1240, 0x4cce, 0x9e59, 0xf970, 0x1, 0x1);
        gbc.writeMem(0x61e4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6d87);
        EXPECT(gbc.pc(), 0x61e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 023F
        gbc.setState(0x338e, 0xd20e, 0x4770, 0xd4d7, 0x580d, 0x1a1a, 0x0, 0x0);
        gbc.writeMem(0x338e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd20e);
        EXPECT(gbc.pc(), 0x3390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0240
        gbc.setState(0x3925, 0x665c, 0x8080, 0xfc3, 0x640e, 0x2507, 0x1, 0x1);
        gbc.writeMem(0x3925, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x665c);
        EXPECT(gbc.pc(), 0x3927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0241
        gbc.setState(0xba37, 0x731a, 0xa7b0, 0x794b, 0xfc97, 0xce22, 0x1, 0x1);
        gbc.writeMem(0xba37, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x731a);
        EXPECT(gbc.pc(), 0xba39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba37), 0xcb);
        EXPECT(gbc.readMem(0xba38), 0x3f);
        // CB 3F 0242
        gbc.setState(0x4dfc, 0xfd90, 0xcd30, 0x6318, 0xcf79, 0xc1ed, 0x1, 0x0);
        gbc.writeMem(0x4dfc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfd90);
        EXPECT(gbc.pc(), 0x4dfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0243
        gbc.setState(0x6ca5, 0x6e1f, 0xf960, 0x7b0e, 0xddbe, 0xa7c3, 0x0, 0x1);
        gbc.writeMem(0x6ca5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6e1f);
        EXPECT(gbc.pc(), 0x6ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0244
        gbc.setState(0x421, 0x5cca, 0x2f0, 0x1ccf, 0xbff9, 0xfd20, 0x0, 0x0);
        gbc.writeMem(0x421, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5cca);
        EXPECT(gbc.pc(), 0x423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0245
        gbc.setState(0xd400, 0xc417, 0x9560, 0xb08f, 0xd302, 0xfdf1, 0x1, 0x1);
        gbc.writeMem(0xd400, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0xd402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd400), 0xcb);
        EXPECT(gbc.readMem(0xd401), 0x3f);
        // CB 3F 0246
        gbc.setState(0xd92e, 0x53d2, 0xc8b0, 0x9a58, 0xe76a, 0x469e, 0x0, 0x1);
        gbc.writeMem(0xd92e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x53d2);
        EXPECT(gbc.pc(), 0xd930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92e), 0xcb);
        EXPECT(gbc.readMem(0xd92f), 0x3f);
        // CB 3F 0247
        gbc.setState(0x4e29, 0x1d3a, 0xd330, 0x9df1, 0x22f3, 0xb741, 0x1, 0x1);
        gbc.writeMem(0x4e29, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1d3a);
        EXPECT(gbc.pc(), 0x4e2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0248
        gbc.setState(0x6054, 0x6285, 0x6420, 0x1a0a, 0x2f9f, 0x31a6, 0x0, 0x0);
        gbc.writeMem(0x6054, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6285);
        EXPECT(gbc.pc(), 0x6056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0249
        gbc.setState(0x2246, 0x4473, 0x7b0, 0x2f9d, 0x3caf, 0xd2c1, 0x1, 0x0);
        gbc.writeMem(0x2246, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4473);
        EXPECT(gbc.pc(), 0x2248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 024A
        gbc.setState(0x1a77, 0xdfe9, 0xa320, 0xcc8f, 0xc5e9, 0x7842, 0x0, 0x1);
        gbc.writeMem(0x1a77, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdfe9);
        EXPECT(gbc.pc(), 0x1a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 024B
        gbc.setState(0x4117, 0x2836, 0xb740, 0xd1f2, 0x7ae1, 0x7218, 0x1, 0x1);
        gbc.writeMem(0x4117, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2836);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 024C
        gbc.setState(0x340, 0x717b, 0x9400, 0x2093, 0x2f3, 0x514d, 0x1, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x717b);
        EXPECT(gbc.pc(), 0x342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 024D
        gbc.setState(0xd3ea, 0x12a3, 0x17b0, 0xab01, 0x57f0, 0x27eb, 0x1, 0x1);
        gbc.writeMem(0xd3ea, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x12a3);
        EXPECT(gbc.pc(), 0xd3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ea), 0xcb);
        EXPECT(gbc.readMem(0xd3eb), 0x3f);
        // CB 3F 024E
        gbc.setState(0xf7f, 0xde2c, 0x17d0, 0x4eeb, 0x9468, 0x2809, 0x1, 0x0);
        gbc.writeMem(0xf7f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xde2c);
        EXPECT(gbc.pc(), 0xf81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 024F
        gbc.setState(0x2965, 0x6e42, 0xd390, 0x3609, 0x3d96, 0x6d73, 0x0, 0x1);
        gbc.writeMem(0x2965, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6e42);
        EXPECT(gbc.pc(), 0x2967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0250
        gbc.setState(0xea92, 0x9d7c, 0xf780, 0xbe36, 0x8ba0, 0xefd8, 0x1, 0x0);
        gbc.writeMem(0xea92, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9d7c);
        EXPECT(gbc.pc(), 0xea94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea92), 0xcb);
        EXPECT(gbc.readMem(0xea93), 0x3f);
        // CB 3F 0251
        gbc.setState(0x200b, 0x353a, 0x1d90, 0x6a57, 0xbfce, 0x6586, 0x1, 0x0);
        gbc.writeMem(0x200b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x353a);
        EXPECT(gbc.pc(), 0x200d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0252
        gbc.setState(0x5961, 0x27f8, 0x3f20, 0x5a1a, 0x5bb2, 0x17e2, 0x1, 0x0);
        gbc.writeMem(0x5961, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x27f8);
        EXPECT(gbc.pc(), 0x5963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0253
        gbc.setState(0xba50, 0xcd61, 0x8e0, 0x2bb0, 0x8c3b, 0xc127, 0x0, 0x1);
        gbc.writeMem(0xba50, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcd61);
        EXPECT(gbc.pc(), 0xba52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba50), 0xcb);
        EXPECT(gbc.readMem(0xba51), 0x3f);
        // CB 3F 0254
        gbc.setState(0x12d7, 0xcf61, 0x3fa0, 0xd42d, 0xc060, 0xe6bf, 0x0, 0x0);
        gbc.writeMem(0x12d7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xcf61);
        EXPECT(gbc.pc(), 0x12d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0255
        gbc.setState(0x1546, 0x642a, 0x1820, 0xdc89, 0xa3f5, 0x24ee, 0x0, 0x1);
        gbc.writeMem(0x1546, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x642a);
        EXPECT(gbc.pc(), 0x1548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0256
        gbc.setState(0x307d, 0x48e3, 0x2380, 0xde2c, 0x9e91, 0x6d5, 0x1, 0x0);
        gbc.writeMem(0x307d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x48e3);
        EXPECT(gbc.pc(), 0x307f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0257
        gbc.setState(0x9d55, 0xbe7f, 0x4fb0, 0xf154, 0x24c6, 0x974c, 0x1, 0x0);
        gbc.writeMem(0x9d55, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xbe7f);
        EXPECT(gbc.pc(), 0x9d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d55), 0xcb);
        EXPECT(gbc.readMem(0x9d56), 0x3f);
        // CB 3F 0258
        gbc.setState(0x39c2, 0x2a9c, 0x2490, 0xe61a, 0xf21b, 0xb526, 0x1, 0x1);
        gbc.writeMem(0x39c2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2a9c);
        EXPECT(gbc.pc(), 0x39c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0259
        gbc.setState(0x77c6, 0xc290, 0xa630, 0x936, 0xcb40, 0x36ef, 0x1, 0x0);
        gbc.writeMem(0x77c6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc290);
        EXPECT(gbc.pc(), 0x77c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 025A
        gbc.setState(0x2544, 0xbc08, 0x1b60, 0x5484, 0x466d, 0xd9b2, 0x0, 0x0);
        gbc.writeMem(0x2544, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbc08);
        EXPECT(gbc.pc(), 0x2546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 025B
        gbc.setState(0xd6af, 0x631b, 0x9cd0, 0x8a4c, 0x8f74, 0xd4d, 0x1, 0x1);
        gbc.writeMem(0xd6af, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x631b);
        EXPECT(gbc.pc(), 0xd6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6af), 0xcb);
        EXPECT(gbc.readMem(0xd6b0), 0x3f);
        // CB 3F 025C
        gbc.setState(0x1502, 0xd13c, 0x65d0, 0xe778, 0xdcac, 0x5766, 0x1, 0x0);
        gbc.writeMem(0x1502, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd13c);
        EXPECT(gbc.pc(), 0x1504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 025D
        gbc.setState(0x8360, 0x327a, 0x8890, 0x8e28, 0x6d63, 0xe055, 0x1, 0x1);
        gbc.writeMem(0x8360, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x327a);
        EXPECT(gbc.pc(), 0x8362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8360), 0xcb);
        EXPECT(gbc.readMem(0x8361), 0x3f);
        // CB 3F 025E
        gbc.setState(0xe5c8, 0x589e, 0x8240, 0x798c, 0xb79d, 0x7f51, 0x0, 0x0);
        gbc.writeMem(0xe5c8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x589e);
        EXPECT(gbc.pc(), 0xe5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c8), 0xcb);
        EXPECT(gbc.readMem(0xe5c9), 0x3f);
        // CB 3F 025F
        gbc.setState(0xc3d4, 0xf25b, 0x730, 0x2024, 0x559, 0xd5e7, 0x0, 0x0);
        gbc.writeMem(0xc3d4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf25b);
        EXPECT(gbc.pc(), 0xc3d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d4), 0xcb);
        EXPECT(gbc.readMem(0xc3d5), 0x3f);
        // CB 3F 0260
        gbc.setState(0xd942, 0x4768, 0xf360, 0x7b1a, 0x3244, 0xa2ab, 0x1, 0x1);
        gbc.writeMem(0xd942, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4768);
        EXPECT(gbc.pc(), 0xd944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd942), 0xcb);
        EXPECT(gbc.readMem(0xd943), 0x3f);
        // CB 3F 0261
        gbc.setState(0xbcb0, 0xd812, 0xfed0, 0x7e85, 0x441f, 0xcd06, 0x0, 0x1);
        gbc.writeMem(0xbcb0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd812);
        EXPECT(gbc.pc(), 0xbcb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb0), 0xcb);
        EXPECT(gbc.readMem(0xbcb1), 0x3f);
        // CB 3F 0262
        gbc.setState(0x1094, 0xf79c, 0x7310, 0x70c7, 0xf49f, 0x527a, 0x1, 0x1);
        gbc.writeMem(0x1094, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf79c);
        EXPECT(gbc.pc(), 0x1096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0264
        gbc.setState(0x9ae, 0x79e9, 0x390, 0x2c32, 0x39ed, 0xcff6, 0x1, 0x1);
        gbc.writeMem(0x9ae, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x79e9);
        EXPECT(gbc.pc(), 0x9b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0265
        gbc.setState(0xe0ac, 0x98fa, 0x6840, 0x8a5, 0xb5c5, 0x92aa, 0x0, 0x0);
        gbc.writeMem(0xe0ac, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x98fa);
        EXPECT(gbc.pc(), 0xe0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ac), 0xcb);
        EXPECT(gbc.readMem(0xe0ad), 0x3f);
        // CB 3F 0266
        gbc.setState(0x59c5, 0x23b7, 0xccb0, 0x52b5, 0x4efa, 0x8825, 0x1, 0x1);
        gbc.writeMem(0x59c5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x23b7);
        EXPECT(gbc.pc(), 0x59c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0267
        gbc.setState(0x20e2, 0xdabe, 0x5b0, 0xe4d7, 0xef18, 0x7e85, 0x0, 0x1);
        gbc.writeMem(0x20e2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdabe);
        EXPECT(gbc.pc(), 0x20e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0268
        gbc.setState(0x5ef7, 0x94ce, 0xf0f0, 0xc9b2, 0x611f, 0x2bab, 0x1, 0x0);
        gbc.writeMem(0x5ef7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x94ce);
        EXPECT(gbc.pc(), 0x5ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0269
        gbc.setState(0x662e, 0x71bc, 0xf150, 0x30a6, 0xde59, 0x19fb, 0x1, 0x1);
        gbc.writeMem(0x662e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x71bc);
        EXPECT(gbc.pc(), 0x6630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 026A
        gbc.setState(0x8426, 0xb89c, 0xc0b0, 0x57c6, 0xda1b, 0xa49b, 0x0, 0x1);
        gbc.writeMem(0x8426, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb89c);
        EXPECT(gbc.pc(), 0x8428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8426), 0xcb);
        EXPECT(gbc.readMem(0x8427), 0x3f);
        // CB 3F 026B
        gbc.setState(0x3ed3, 0x1537, 0xfc90, 0x1fff, 0x1776, 0x67a6, 0x0, 0x0);
        gbc.writeMem(0x3ed3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1537);
        EXPECT(gbc.pc(), 0x3ed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 026C
        gbc.setState(0xdd2c, 0x2be8, 0xc8d0, 0x2dbd, 0x9e6a, 0x9720, 0x0, 0x1);
        gbc.writeMem(0xdd2c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2be8);
        EXPECT(gbc.pc(), 0xdd2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2c), 0xcb);
        EXPECT(gbc.readMem(0xdd2d), 0x3f);
        // CB 3F 026E
        gbc.setState(0x541, 0x308e, 0x75c0, 0xf9e2, 0x1027, 0xf424, 0x1, 0x1);
        gbc.writeMem(0x541, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x308e);
        EXPECT(gbc.pc(), 0x543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 026F
        gbc.setState(0x88bd, 0x8cd8, 0x4950, 0xf28e, 0x9562, 0x58d1, 0x1, 0x0);
        gbc.writeMem(0x88bd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8cd8);
        EXPECT(gbc.pc(), 0x88bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88bd), 0xcb);
        EXPECT(gbc.readMem(0x88be), 0x3f);
        // CB 3F 0270
        gbc.setState(0x65d6, 0xbfd8, 0xa430, 0x78c7, 0xd426, 0x48cd, 0x0, 0x1);
        gbc.writeMem(0x65d6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbfd8);
        EXPECT(gbc.pc(), 0x65d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0271
        gbc.setState(0xa6d6, 0x41af, 0x26a0, 0x5dd6, 0xa887, 0x1220, 0x1, 0x0);
        gbc.writeMem(0xa6d6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x41af);
        EXPECT(gbc.pc(), 0xa6d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d6), 0xcb);
        EXPECT(gbc.readMem(0xa6d7), 0x3f);
        // CB 3F 0272
        gbc.setState(0xcf4f, 0xfe5d, 0x97d0, 0x7632, 0xee16, 0x4d54, 0x0, 0x0);
        gbc.writeMem(0xcf4f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfe5d);
        EXPECT(gbc.pc(), 0xcf51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf4f), 0xcb);
        EXPECT(gbc.readMem(0xcf50), 0x3f);
        // CB 3F 0273
        gbc.setState(0xe51a, 0x46ec, 0x7d20, 0x5ced, 0xa1c1, 0xc1e2, 0x0, 0x0);
        gbc.writeMem(0xe51a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x46ec);
        EXPECT(gbc.pc(), 0xe51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51a), 0xcb);
        EXPECT(gbc.readMem(0xe51b), 0x3f);
        // CB 3F 0274
        gbc.setState(0x8d4a, 0x5db7, 0x5330, 0x3bbe, 0x385, 0x9e50, 0x0, 0x0);
        gbc.writeMem(0x8d4a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5db7);
        EXPECT(gbc.pc(), 0x8d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4a), 0xcb);
        EXPECT(gbc.readMem(0x8d4b), 0x3f);
        // CB 3F 0275
        gbc.setState(0x783e, 0xc99d, 0xfbf0, 0x85, 0x9208, 0xe4aa, 0x0, 0x1);
        gbc.writeMem(0x783e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc99d);
        EXPECT(gbc.pc(), 0x7840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0276
        gbc.setState(0x36eb, 0x48be, 0x810, 0x2271, 0xd353, 0xe204, 0x0, 0x0);
        gbc.writeMem(0x36eb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x48be);
        EXPECT(gbc.pc(), 0x36ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0277
        gbc.setState(0xdd58, 0x473c, 0x1620, 0xbfb8, 0x99a8, 0x94e0, 0x1, 0x0);
        gbc.writeMem(0xdd58, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x473c);
        EXPECT(gbc.pc(), 0xdd5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd58), 0xcb);
        EXPECT(gbc.readMem(0xdd59), 0x3f);
        // CB 3F 0278
        gbc.setState(0x60f5, 0xb1b, 0xa330, 0x6815, 0xcd8e, 0x79ec, 0x0, 0x1);
        gbc.writeMem(0x60f5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb1b);
        EXPECT(gbc.pc(), 0x60f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0279
        gbc.setState(0xecc5, 0x36ac, 0x7d30, 0xd04c, 0x12c0, 0x9b07, 0x0, 0x0);
        gbc.writeMem(0xecc5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x36ac);
        EXPECT(gbc.pc(), 0xecc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc5), 0xcb);
        EXPECT(gbc.readMem(0xecc6), 0x3f);
        // CB 3F 027A
        gbc.setState(0x343f, 0x2a52, 0x5650, 0x3ce0, 0x907f, 0x4bb0, 0x1, 0x1);
        gbc.writeMem(0x343f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2a52);
        EXPECT(gbc.pc(), 0x3441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 027B
        gbc.setState(0x32b3, 0x1d0c, 0x5d30, 0x2340, 0x28be, 0xffea, 0x0, 0x0);
        gbc.writeMem(0x32b3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1d0c);
        EXPECT(gbc.pc(), 0x32b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 027C
        gbc.setState(0x22b2, 0x15b2, 0xcff0, 0xb4aa, 0x36a4, 0x49e1, 0x1, 0x0);
        gbc.writeMem(0x22b2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x15b2);
        EXPECT(gbc.pc(), 0x22b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 027D
        gbc.setState(0x7d57, 0xcdd1, 0x4d90, 0xba6f, 0x8bcc, 0x1b8c, 0x1, 0x0);
        gbc.writeMem(0x7d57, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcdd1);
        EXPECT(gbc.pc(), 0x7d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 027E
        gbc.setState(0xdbe0, 0x4673, 0x1010, 0x3c8a, 0x9ab5, 0x5893, 0x0, 0x0);
        gbc.writeMem(0xdbe0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4673);
        EXPECT(gbc.pc(), 0xdbe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe0), 0xcb);
        EXPECT(gbc.readMem(0xdbe1), 0x3f);
        // CB 3F 027F
        gbc.setState(0xc72f, 0x3dcf, 0xe020, 0x3005, 0x408e, 0xfed, 0x0, 0x0);
        gbc.writeMem(0xc72f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3dcf);
        EXPECT(gbc.pc(), 0xc731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc72f), 0xcb);
        EXPECT(gbc.readMem(0xc730), 0x3f);
        // CB 3F 0280
        gbc.setState(0x6f5c, 0x44b6, 0x5fb0, 0x7099, 0xa64d, 0xed2, 0x1, 0x0);
        gbc.writeMem(0x6f5c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x44b6);
        EXPECT(gbc.pc(), 0x6f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0281
        gbc.setState(0x7094, 0x54d5, 0x7dd0, 0x422a, 0x589f, 0x30f2, 0x0, 0x1);
        gbc.writeMem(0x7094, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x54d5);
        EXPECT(gbc.pc(), 0x7096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0282
        gbc.setState(0x993b, 0x921a, 0x2660, 0xc028, 0xe94d, 0x13aa, 0x0, 0x1);
        gbc.writeMem(0x993b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x921a);
        EXPECT(gbc.pc(), 0x993d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993b), 0xcb);
        EXPECT(gbc.readMem(0x993c), 0x3f);
        // CB 3F 0283
        gbc.setState(0xbc65, 0x4ac5, 0xccd0, 0x1a8f, 0x987d, 0xb06e, 0x0, 0x0);
        gbc.writeMem(0xbc65, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4ac5);
        EXPECT(gbc.pc(), 0xbc67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc65), 0xcb);
        EXPECT(gbc.readMem(0xbc66), 0x3f);
        // CB 3F 0285
        gbc.setState(0x67aa, 0x9b18, 0x54e0, 0x8e36, 0xdaf1, 0x31cc, 0x0, 0x0);
        gbc.writeMem(0x67aa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9b18);
        EXPECT(gbc.pc(), 0x67ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0286
        gbc.setState(0x8d90, 0x3f93, 0x8b40, 0xa74b, 0xd485, 0x61f5, 0x0, 0x1);
        gbc.writeMem(0x8d90, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3f93);
        EXPECT(gbc.pc(), 0x8d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d90), 0xcb);
        EXPECT(gbc.readMem(0x8d91), 0x3f);
        // CB 3F 0287
        gbc.setState(0x7e92, 0x2e41, 0xbda0, 0x4475, 0xf26e, 0xfc03, 0x0, 0x0);
        gbc.writeMem(0x7e92, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2e41);
        EXPECT(gbc.pc(), 0x7e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0288
        gbc.setState(0x73ea, 0x5252, 0x9d30, 0xe90, 0xe170, 0x2141, 0x0, 0x0);
        gbc.writeMem(0x73ea, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5252);
        EXPECT(gbc.pc(), 0x73ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0289
        gbc.setState(0xdf34, 0x1de, 0xf8e0, 0xb488, 0xb57b, 0x144b, 0x1, 0x1);
        gbc.writeMem(0xdf34, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1de);
        EXPECT(gbc.pc(), 0xdf36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf34), 0xcb);
        EXPECT(gbc.readMem(0xdf35), 0x3f);
        // CB 3F 028A
        gbc.setState(0xdd29, 0xcc1b, 0x10e0, 0x5053, 0xe860, 0x58f0, 0x1, 0x1);
        gbc.writeMem(0xdd29, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcc1b);
        EXPECT(gbc.pc(), 0xdd2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd29), 0xcb);
        EXPECT(gbc.readMem(0xdd2a), 0x3f);
        // CB 3F 028B
        gbc.setState(0x1259, 0x6ed4, 0xa980, 0xf71e, 0xf032, 0x82ca, 0x1, 0x0);
        gbc.writeMem(0x1259, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6ed4);
        EXPECT(gbc.pc(), 0x125b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 028C
        gbc.setState(0xc8fb, 0x8bc6, 0xfe60, 0xdb59, 0x75e0, 0x9ac, 0x0, 0x0);
        gbc.writeMem(0xc8fb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8bc6);
        EXPECT(gbc.pc(), 0xc8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fb), 0xcb);
        EXPECT(gbc.readMem(0xc8fc), 0x3f);
        // CB 3F 028D
        gbc.setState(0x1a39, 0xe4fe, 0x9f80, 0x8aad, 0xb361, 0xae9a, 0x1, 0x1);
        gbc.writeMem(0x1a39, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe4fe);
        EXPECT(gbc.pc(), 0x1a3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 028E
        gbc.setState(0xe2b9, 0x2265, 0xb380, 0xb542, 0xa72d, 0x641d, 0x1, 0x0);
        gbc.writeMem(0xe2b9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2265);
        EXPECT(gbc.pc(), 0xe2bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b9), 0xcb);
        EXPECT(gbc.readMem(0xe2ba), 0x3f);
        // CB 3F 028F
        gbc.setState(0xd2f0, 0x93d7, 0x3d50, 0xb1b0, 0xca04, 0x6c97, 0x0, 0x0);
        gbc.writeMem(0xd2f0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x93d7);
        EXPECT(gbc.pc(), 0xd2f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f0), 0xcb);
        EXPECT(gbc.readMem(0xd2f1), 0x3f);
        // CB 3F 0290
        gbc.setState(0xaef7, 0xf82f, 0xef90, 0xbaa4, 0x3df8, 0x7b39, 0x0, 0x0);
        gbc.writeMem(0xaef7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf82f);
        EXPECT(gbc.pc(), 0xaef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef7), 0xcb);
        EXPECT(gbc.readMem(0xaef8), 0x3f);
        // CB 3F 0291
        gbc.setState(0x81e8, 0xd5f0, 0x37c0, 0xc2af, 0xc339, 0x51a9, 0x1, 0x1);
        gbc.writeMem(0x81e8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd5f0);
        EXPECT(gbc.pc(), 0x81ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e8), 0xcb);
        EXPECT(gbc.readMem(0x81e9), 0x3f);
        // CB 3F 0292
        gbc.setState(0x86d3, 0x43d8, 0x9550, 0xfdfc, 0x199c, 0x9bac, 0x1, 0x1);
        gbc.writeMem(0x86d3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x43d8);
        EXPECT(gbc.pc(), 0x86d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d3), 0xcb);
        EXPECT(gbc.readMem(0x86d4), 0x3f);
        // CB 3F 0293
        gbc.setState(0xe52b, 0x32ef, 0x6240, 0xc956, 0x891f, 0x66ac, 0x1, 0x1);
        gbc.writeMem(0xe52b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x32ef);
        EXPECT(gbc.pc(), 0xe52d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe52b), 0xcb);
        EXPECT(gbc.readMem(0xe52c), 0x3f);
        // CB 3F 0294
        gbc.setState(0x87ef, 0xf90c, 0xba40, 0x1ef6, 0x50f4, 0xc8a2, 0x0, 0x0);
        gbc.writeMem(0x87ef, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf90c);
        EXPECT(gbc.pc(), 0x87f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ef), 0xcb);
        EXPECT(gbc.readMem(0x87f0), 0x3f);
        // CB 3F 0295
        gbc.setState(0x1d41, 0x99e2, 0x1070, 0x3e2b, 0xfd35, 0x533a, 0x1, 0x0);
        gbc.writeMem(0x1d41, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x99e2);
        EXPECT(gbc.pc(), 0x1d43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0296
        gbc.setState(0x7a74, 0xb5f8, 0x2440, 0xfb47, 0xe707, 0xf5b4, 0x0, 0x1);
        gbc.writeMem(0x7a74, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb5f8);
        EXPECT(gbc.pc(), 0x7a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0297
        gbc.setState(0xb70e, 0xb998, 0x9d90, 0x741a, 0x2448, 0x6052, 0x1, 0x1);
        gbc.writeMem(0xb70e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0xb710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb70e), 0xcb);
        EXPECT(gbc.readMem(0xb70f), 0x3f);
        // CB 3F 0298
        gbc.setState(0x6e61, 0x352, 0x66a0, 0xdfb6, 0x8829, 0x2b05, 0x0, 0x1);
        gbc.writeMem(0x6e61, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x352);
        EXPECT(gbc.pc(), 0x6e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0299
        gbc.setState(0x62a2, 0x5fc2, 0x9660, 0x43ac, 0xf1ed, 0x9e75, 0x1, 0x1);
        gbc.writeMem(0x62a2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5fc2);
        EXPECT(gbc.pc(), 0x62a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 029A
        gbc.setState(0xdd88, 0xc941, 0xd2b0, 0x2d9f, 0xf38e, 0xe87e, 0x0, 0x0);
        gbc.writeMem(0xdd88, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc941);
        EXPECT(gbc.pc(), 0xdd8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd88), 0xcb);
        EXPECT(gbc.readMem(0xdd89), 0x3f);
        // CB 3F 029B
        gbc.setState(0x475b, 0xc0bf, 0x6360, 0x39f, 0x9b10, 0x4861, 0x1, 0x0);
        gbc.writeMem(0x475b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc0bf);
        EXPECT(gbc.pc(), 0x475d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 029C
        gbc.setState(0xbc9a, 0x5297, 0x6850, 0xb6b6, 0x5838, 0x6503, 0x1, 0x1);
        gbc.writeMem(0xbc9a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5297);
        EXPECT(gbc.pc(), 0xbc9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9a), 0xcb);
        EXPECT(gbc.readMem(0xbc9b), 0x3f);
        // CB 3F 029D
        gbc.setState(0x422c, 0xdd24, 0x4f40, 0x32f2, 0x8f3e, 0x8880, 0x1, 0x0);
        gbc.writeMem(0x422c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xdd24);
        EXPECT(gbc.pc(), 0x422e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 029E
        gbc.setState(0x604d, 0x8923, 0x61c0, 0x76b1, 0xaf40, 0x9ca2, 0x1, 0x1);
        gbc.writeMem(0x604d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8923);
        EXPECT(gbc.pc(), 0x604f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 029F
        gbc.setState(0x5ca5, 0x2644, 0xe1c0, 0x45e, 0xbe57, 0xdd52, 0x1, 0x1);
        gbc.writeMem(0x5ca5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2644);
        EXPECT(gbc.pc(), 0x5ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02A0
        gbc.setState(0xb882, 0xbe05, 0x7040, 0x6561, 0x8c34, 0x9aa3, 0x0, 0x1);
        gbc.writeMem(0xb882, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbe05);
        EXPECT(gbc.pc(), 0xb884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb882), 0xcb);
        EXPECT(gbc.readMem(0xb883), 0x3f);
        // CB 3F 02A1
        gbc.setState(0x362d, 0xa7e1, 0xe620, 0x7d18, 0xdf86, 0xd4f3, 0x0, 0x1);
        gbc.writeMem(0x362d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa7e1);
        EXPECT(gbc.pc(), 0x362f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02A2
        gbc.setState(0xa8b8, 0x470a, 0xb40, 0xca2f, 0xb356, 0x7a0b, 0x1, 0x1);
        gbc.writeMem(0xa8b8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x470a);
        EXPECT(gbc.pc(), 0xa8ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b8), 0xcb);
        EXPECT(gbc.readMem(0xa8b9), 0x3f);
        // CB 3F 02A3
        gbc.setState(0xedc2, 0xf5b7, 0xfa50, 0x2c1d, 0x5540, 0xcfd, 0x1, 0x0);
        gbc.writeMem(0xedc2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf5b7);
        EXPECT(gbc.pc(), 0xedc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc2), 0xcb);
        EXPECT(gbc.readMem(0xedc3), 0x3f);
        // CB 3F 02A4
        gbc.setState(0x6a15, 0xc8a8, 0x53c0, 0x191, 0xbb37, 0x511a, 0x1, 0x1);
        gbc.writeMem(0x6a15, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc8a8);
        EXPECT(gbc.pc(), 0x6a17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02A5
        gbc.setState(0x5f56, 0xb74b, 0xf9c0, 0xe7ba, 0xa9c0, 0xf0a7, 0x0, 0x0);
        gbc.writeMem(0x5f56, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb74b);
        EXPECT(gbc.pc(), 0x5f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02A6
        gbc.setState(0x1e86, 0x678, 0x5470, 0x45e4, 0x185f, 0x6861, 0x0, 0x0);
        gbc.writeMem(0x1e86, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x678);
        EXPECT(gbc.pc(), 0x1e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02A7
        gbc.setState(0x169d, 0x6eed, 0x2a20, 0x5ca1, 0x2e33, 0x592, 0x1, 0x0);
        gbc.writeMem(0x169d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6eed);
        EXPECT(gbc.pc(), 0x169f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02A8
        gbc.setState(0xe8d3, 0x55dd, 0x1980, 0xe6ef, 0x4000, 0xfa2b, 0x1, 0x1);
        gbc.writeMem(0xe8d3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x55dd);
        EXPECT(gbc.pc(), 0xe8d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8d3), 0xcb);
        EXPECT(gbc.readMem(0xe8d4), 0x3f);
        // CB 3F 02A9
        gbc.setState(0xa223, 0x41b2, 0x1f70, 0x8959, 0x14c, 0x2c0b, 0x0, 0x0);
        gbc.writeMem(0xa223, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x41b2);
        EXPECT(gbc.pc(), 0xa225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa223), 0xcb);
        EXPECT(gbc.readMem(0xa224), 0x3f);
        // CB 3F 02AA
        gbc.setState(0xb0fc, 0x1426, 0x2980, 0x3a85, 0x9921, 0xb2a7, 0x0, 0x0);
        gbc.writeMem(0xb0fc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1426);
        EXPECT(gbc.pc(), 0xb0fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fc), 0xcb);
        EXPECT(gbc.readMem(0xb0fd), 0x3f);
        // CB 3F 02AB
        gbc.setState(0x5982, 0xc527, 0x32a0, 0x566b, 0x2de3, 0xa958, 0x0, 0x1);
        gbc.writeMem(0x5982, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc527);
        EXPECT(gbc.pc(), 0x5984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02AC
        gbc.setState(0xe70b, 0x34aa, 0x65b0, 0xdfb4, 0xac9a, 0xeae6, 0x1, 0x0);
        gbc.writeMem(0xe70b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x34aa);
        EXPECT(gbc.pc(), 0xe70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70b), 0xcb);
        EXPECT(gbc.readMem(0xe70c), 0x3f);
        // CB 3F 02AD
        gbc.setState(0xd722, 0xf4d5, 0x4f50, 0xcdb9, 0x72b4, 0x2d03, 0x1, 0x1);
        gbc.writeMem(0xd722, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf4d5);
        EXPECT(gbc.pc(), 0xd724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd722), 0xcb);
        EXPECT(gbc.readMem(0xd723), 0x3f);
        // CB 3F 02AE
        gbc.setState(0x8ab6, 0x4d1f, 0x6b40, 0x6a34, 0x2824, 0x8563, 0x0, 0x1);
        gbc.writeMem(0x8ab6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4d1f);
        EXPECT(gbc.pc(), 0x8ab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab6), 0xcb);
        EXPECT(gbc.readMem(0x8ab7), 0x3f);
        // CB 3F 02AF
        gbc.setState(0xd606, 0x6265, 0xf00, 0xdd95, 0x7534, 0x8d98, 0x1, 0x0);
        gbc.writeMem(0xd606, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6265);
        EXPECT(gbc.pc(), 0xd608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd606), 0xcb);
        EXPECT(gbc.readMem(0xd607), 0x3f);
        // CB 3F 02B0
        gbc.setState(0xc121, 0x7ec, 0xb730, 0x111, 0x699f, 0x5f07, 0x1, 0x1);
        gbc.writeMem(0xc121, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7ec);
        EXPECT(gbc.pc(), 0xc123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc121), 0xcb);
        EXPECT(gbc.readMem(0xc122), 0x3f);
        // CB 3F 02B1
        gbc.setState(0x837c, 0x7364, 0x41f0, 0x21d0, 0x9535, 0x8d4c, 0x0, 0x1);
        gbc.writeMem(0x837c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7364);
        EXPECT(gbc.pc(), 0x837e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837c), 0xcb);
        EXPECT(gbc.readMem(0x837d), 0x3f);
        // CB 3F 02B2
        gbc.setState(0x1e94, 0xad86, 0x5670, 0x7eff, 0x5050, 0x8e14, 0x0, 0x1);
        gbc.writeMem(0x1e94, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xad86);
        EXPECT(gbc.pc(), 0x1e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02B3
        gbc.setState(0x6d52, 0x85, 0x5dc0, 0xdedd, 0x2ddc, 0x535d, 0x1, 0x1);
        gbc.writeMem(0x6d52, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x85);
        EXPECT(gbc.pc(), 0x6d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02B4
        gbc.setState(0x9808, 0x17e2, 0x72c0, 0xa6f9, 0xfd62, 0xef99, 0x0, 0x0);
        gbc.writeMem(0x9808, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x17e2);
        EXPECT(gbc.pc(), 0x980a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9808), 0xcb);
        EXPECT(gbc.readMem(0x9809), 0x3f);
        // CB 3F 02B5
        gbc.setState(0xca30, 0x2f77, 0x1e0, 0xbf94, 0x55a3, 0xd20, 0x1, 0x1);
        gbc.writeMem(0xca30, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2f77);
        EXPECT(gbc.pc(), 0xca32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca30), 0xcb);
        EXPECT(gbc.readMem(0xca31), 0x3f);
        // CB 3F 02B6
        gbc.setState(0x46ea, 0x6411, 0xffd0, 0x7560, 0xe39d, 0xeb31, 0x1, 0x0);
        gbc.writeMem(0x46ea, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6411);
        EXPECT(gbc.pc(), 0x46ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02B7
        gbc.setState(0xf82, 0x7ca4, 0xca0, 0xdd4f, 0x1f2a, 0x7fb9, 0x0, 0x0);
        gbc.writeMem(0xf82, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7ca4);
        EXPECT(gbc.pc(), 0xf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02B8
        gbc.setState(0x4d51, 0xe5d6, 0x4cc0, 0x281, 0x2b6c, 0x87bf, 0x0, 0x0);
        gbc.writeMem(0x4d51, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe5d6);
        EXPECT(gbc.pc(), 0x4d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02B9
        gbc.setState(0x443b, 0x6673, 0xd870, 0x4ca6, 0x9d6d, 0xe738, 0x0, 0x1);
        gbc.writeMem(0x443b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6673);
        EXPECT(gbc.pc(), 0x443d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02BA
        gbc.setState(0xc7fe, 0x28b5, 0xae20, 0x4c5, 0xacd6, 0xe441, 0x0, 0x0);
        gbc.writeMem(0xc7fe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x28b5);
        EXPECT(gbc.pc(), 0xc800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fe), 0xcb);
        EXPECT(gbc.readMem(0xc7ff), 0x3f);
        // CB 3F 02BB
        gbc.setState(0x1168, 0x72bf, 0x7110, 0xc565, 0x4838, 0x3451, 0x1, 0x0);
        gbc.writeMem(0x1168, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x72bf);
        EXPECT(gbc.pc(), 0x116a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02BC
        gbc.setState(0x2236, 0x34f2, 0xefa0, 0x9b, 0x1359, 0x472f, 0x0, 0x1);
        gbc.writeMem(0x2236, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x34f2);
        EXPECT(gbc.pc(), 0x2238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02BE
        gbc.setState(0xbe7d, 0xa347, 0x6230, 0x40c0, 0x40f3, 0xb30e, 0x1, 0x0);
        gbc.writeMem(0xbe7d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa347);
        EXPECT(gbc.pc(), 0xbe7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7d), 0xcb);
        EXPECT(gbc.readMem(0xbe7e), 0x3f);
        // CB 3F 02BF
        gbc.setState(0xb270, 0x86e7, 0x7ec0, 0x1bbd, 0x37df, 0x5412, 0x0, 0x1);
        gbc.writeMem(0xb270, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x86e7);
        EXPECT(gbc.pc(), 0xb272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb270), 0xcb);
        EXPECT(gbc.readMem(0xb271), 0x3f);
        // CB 3F 02C0
        gbc.setState(0xc2d7, 0xced, 0x4b00, 0xc930, 0x45a1, 0xaab7, 0x1, 0x1);
        gbc.writeMem(0xc2d7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xced);
        EXPECT(gbc.pc(), 0xc2d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d7), 0xcb);
        EXPECT(gbc.readMem(0xc2d8), 0x3f);
        // CB 3F 02C1
        gbc.setState(0xb157, 0x18bb, 0x3740, 0x66a1, 0xbcd2, 0xeed5, 0x0, 0x1);
        gbc.writeMem(0xb157, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x18bb);
        EXPECT(gbc.pc(), 0xb159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb157), 0xcb);
        EXPECT(gbc.readMem(0xb158), 0x3f);
        // CB 3F 02C2
        gbc.setState(0xb5ec, 0x7354, 0xacc0, 0x84b5, 0xb23b, 0x9ce2, 0x1, 0x0);
        gbc.writeMem(0xb5ec, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7354);
        EXPECT(gbc.pc(), 0xb5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ec), 0xcb);
        EXPECT(gbc.readMem(0xb5ed), 0x3f);
        // CB 3F 02C3
        gbc.setState(0x78d0, 0x54cb, 0xa500, 0xfa70, 0xfe74, 0x6c75, 0x1, 0x1);
        gbc.writeMem(0x78d0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x54cb);
        EXPECT(gbc.pc(), 0x78d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02C4
        gbc.setState(0x5df4, 0xb285, 0xb7e0, 0x1aa4, 0xd902, 0x338a, 0x0, 0x0);
        gbc.writeMem(0x5df4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb285);
        EXPECT(gbc.pc(), 0x5df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02C5
        gbc.setState(0xd546, 0x94f8, 0x7f60, 0x792e, 0xa3f9, 0xb34e, 0x1, 0x1);
        gbc.writeMem(0xd546, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x94f8);
        EXPECT(gbc.pc(), 0xd548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd546), 0xcb);
        EXPECT(gbc.readMem(0xd547), 0x3f);
        // CB 3F 02C6
        gbc.setState(0x8b06, 0x8fbf, 0x8660, 0x6f58, 0x2d44, 0x3d01, 0x0, 0x1);
        gbc.writeMem(0x8b06, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8fbf);
        EXPECT(gbc.pc(), 0x8b08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b06), 0xcb);
        EXPECT(gbc.readMem(0x8b07), 0x3f);
        // CB 3F 02C9
        gbc.setState(0x5f07, 0x28e0, 0xeda0, 0xccae, 0x63d8, 0xa954, 0x0, 0x1);
        gbc.writeMem(0x5f07, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x28e0);
        EXPECT(gbc.pc(), 0x5f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02CA
        gbc.setState(0x6ac8, 0x1b84, 0x47c0, 0x16ad, 0x7ccf, 0x4268, 0x0, 0x0);
        gbc.writeMem(0x6ac8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1b84);
        EXPECT(gbc.pc(), 0x6aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02CB
        gbc.setState(0x4746, 0x282e, 0x1c90, 0xc8c8, 0x2d8f, 0x39d2, 0x1, 0x0);
        gbc.writeMem(0x4746, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x282e);
        EXPECT(gbc.pc(), 0x4748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02CC
        gbc.setState(0x6e49, 0x455a, 0x7c00, 0x4da4, 0xa3ae, 0xa57b, 0x0, 0x1);
        gbc.writeMem(0x6e49, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x455a);
        EXPECT(gbc.pc(), 0x6e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02CE
        gbc.setState(0xeb68, 0x9f0c, 0xd8e0, 0x6634, 0x8ec0, 0x893, 0x0, 0x0);
        gbc.writeMem(0xeb68, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9f0c);
        EXPECT(gbc.pc(), 0xeb6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb68), 0xcb);
        EXPECT(gbc.readMem(0xeb69), 0x3f);
        // CB 3F 02CF
        gbc.setState(0xda7e, 0x7754, 0x3740, 0x3870, 0xd478, 0xba98, 0x0, 0x1);
        gbc.writeMem(0xda7e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7754);
        EXPECT(gbc.pc(), 0xda80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda7e), 0xcb);
        EXPECT(gbc.readMem(0xda7f), 0x3f);
        // CB 3F 02D0
        gbc.setState(0x8fb8, 0x910f, 0xb700, 0xfbec, 0xae37, 0x43f, 0x1, 0x0);
        gbc.writeMem(0x8fb8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x910f);
        EXPECT(gbc.pc(), 0x8fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb8), 0xcb);
        EXPECT(gbc.readMem(0x8fb9), 0x3f);
        // CB 3F 02D1
        gbc.setState(0xb811, 0x6881, 0x35b0, 0x4139, 0xc79b, 0xb4dd, 0x0, 0x0);
        gbc.writeMem(0xb811, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6881);
        EXPECT(gbc.pc(), 0xb813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb811), 0xcb);
        EXPECT(gbc.readMem(0xb812), 0x3f);
        // CB 3F 02D2
        gbc.setState(0xe2ba, 0xcc9d, 0xfd10, 0x36c0, 0xf1df, 0xeaa5, 0x1, 0x0);
        gbc.writeMem(0xe2ba, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcc9d);
        EXPECT(gbc.pc(), 0xe2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ba), 0xcb);
        EXPECT(gbc.readMem(0xe2bb), 0x3f);
        // CB 3F 02D3
        gbc.setState(0x851, 0x66c5, 0x1c30, 0xda7d, 0xd1f9, 0xee05, 0x1, 0x0);
        gbc.writeMem(0x851, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x66c5);
        EXPECT(gbc.pc(), 0x853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02D4
        gbc.setState(0xc24d, 0xdf22, 0x7620, 0x91e8, 0xcca0, 0xa486, 0x0, 0x1);
        gbc.writeMem(0xc24d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdf22);
        EXPECT(gbc.pc(), 0xc24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24d), 0xcb);
        EXPECT(gbc.readMem(0xc24e), 0x3f);
        // CB 3F 02D5
        gbc.setState(0x396b, 0x4f74, 0x9400, 0x4196, 0x764f, 0x147e, 0x1, 0x0);
        gbc.writeMem(0x396b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4f74);
        EXPECT(gbc.pc(), 0x396d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02D6
        gbc.setState(0x90f2, 0x941d, 0x5dc0, 0x357a, 0x68f0, 0xf16c, 0x1, 0x1);
        gbc.writeMem(0x90f2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x941d);
        EXPECT(gbc.pc(), 0x90f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f2), 0xcb);
        EXPECT(gbc.readMem(0x90f3), 0x3f);
        // CB 3F 02D7
        gbc.setState(0x3ee, 0x4ed8, 0x5f40, 0x9e8f, 0x96c6, 0x98d4, 0x1, 0x0);
        gbc.writeMem(0x3ee, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4ed8);
        EXPECT(gbc.pc(), 0x3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02D9
        gbc.setState(0x8acf, 0x9370, 0x35f0, 0x12fe, 0x29e2, 0xf592, 0x0, 0x0);
        gbc.writeMem(0x8acf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9370);
        EXPECT(gbc.pc(), 0x8ad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8acf), 0xcb);
        EXPECT(gbc.readMem(0x8ad0), 0x3f);
        // CB 3F 02DA
        gbc.setState(0x877c, 0x6b17, 0xf310, 0x924f, 0x9180, 0x9faa, 0x1, 0x1);
        gbc.writeMem(0x877c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6b17);
        EXPECT(gbc.pc(), 0x877e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877c), 0xcb);
        EXPECT(gbc.readMem(0x877d), 0x3f);
        // CB 3F 02DB
        gbc.setState(0x710f, 0x93ec, 0x4510, 0x7b27, 0x9a95, 0x92e7, 0x1, 0x0);
        gbc.writeMem(0x710f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x93ec);
        EXPECT(gbc.pc(), 0x7111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02DD
        gbc.setState(0xa849, 0xcd40, 0x6b90, 0x4559, 0x5f1b, 0x7a26, 0x1, 0x0);
        gbc.writeMem(0xa849, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcd40);
        EXPECT(gbc.pc(), 0xa84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa849), 0xcb);
        EXPECT(gbc.readMem(0xa84a), 0x3f);
        // CB 3F 02DE
        gbc.setState(0x8219, 0xeb36, 0x86c0, 0x6464, 0x2892, 0x3955, 0x0, 0x0);
        gbc.writeMem(0x8219, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeb36);
        EXPECT(gbc.pc(), 0x821b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8219), 0xcb);
        EXPECT(gbc.readMem(0x821a), 0x3f);
        // CB 3F 02DF
        gbc.setState(0xd96d, 0x3973, 0x2fb0, 0x6fbf, 0x38d2, 0x6339, 0x1, 0x0);
        gbc.writeMem(0xd96d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3973);
        EXPECT(gbc.pc(), 0xd96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd96d), 0xcb);
        EXPECT(gbc.readMem(0xd96e), 0x3f);
        // CB 3F 02E0
        gbc.setState(0x9748, 0x1385, 0x50c0, 0x2b1b, 0xc1d, 0x742a, 0x1, 0x1);
        gbc.writeMem(0x9748, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1385);
        EXPECT(gbc.pc(), 0x974a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9748), 0xcb);
        EXPECT(gbc.readMem(0x9749), 0x3f);
        // CB 3F 02E1
        gbc.setState(0x357d, 0x93c2, 0xdf10, 0xcc14, 0x9a12, 0xbe9a, 0x1, 0x0);
        gbc.writeMem(0x357d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x93c2);
        EXPECT(gbc.pc(), 0x357f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02E2
        gbc.setState(0xa0d1, 0x397b, 0x3b80, 0xd75e, 0xc798, 0xa705, 0x0, 0x1);
        gbc.writeMem(0xa0d1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x397b);
        EXPECT(gbc.pc(), 0xa0d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d1), 0xcb);
        EXPECT(gbc.readMem(0xa0d2), 0x3f);
        // CB 3F 02E3
        gbc.setState(0xa109, 0x6cc6, 0x7370, 0x2880, 0x5e89, 0xb460, 0x0, 0x1);
        gbc.writeMem(0xa109, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6cc6);
        EXPECT(gbc.pc(), 0xa10b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa109), 0xcb);
        EXPECT(gbc.readMem(0xa10a), 0x3f);
        // CB 3F 02E4
        gbc.setState(0x332c, 0x57c0, 0x2dd0, 0x4b89, 0xe3cc, 0x3fc5, 0x1, 0x0);
        gbc.writeMem(0x332c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x57c0);
        EXPECT(gbc.pc(), 0x332e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02E5
        gbc.setState(0x67ed, 0x546d, 0x2090, 0xda4b, 0x9044, 0x246b, 0x0, 0x0);
        gbc.writeMem(0x67ed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x546d);
        EXPECT(gbc.pc(), 0x67ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02E6
        gbc.setState(0xc8ff, 0xf923, 0xa4f0, 0x35af, 0x3b3b, 0x45df, 0x1, 0x1);
        gbc.writeMem(0xc8ff, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf923);
        EXPECT(gbc.pc(), 0xc901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ff), 0xcb);
        EXPECT(gbc.readMem(0xc900), 0x3f);
        // CB 3F 02E7
        gbc.setState(0x3911, 0x1db4, 0xf4c0, 0x8850, 0xbfb7, 0xef0b, 0x0, 0x1);
        gbc.writeMem(0x3911, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1db4);
        EXPECT(gbc.pc(), 0x3913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02E8
        gbc.setState(0x92eb, 0xf1f2, 0xebf0, 0x21c7, 0x96a7, 0x4635, 0x1, 0x0);
        gbc.writeMem(0x92eb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf1f2);
        EXPECT(gbc.pc(), 0x92ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92eb), 0xcb);
        EXPECT(gbc.readMem(0x92ec), 0x3f);
        // CB 3F 02E9
        gbc.setState(0xdc6d, 0x4f7b, 0xb9b0, 0xe31e, 0xd8e, 0xef20, 0x1, 0x1);
        gbc.writeMem(0xdc6d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4f7b);
        EXPECT(gbc.pc(), 0xdc6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc6d), 0xcb);
        EXPECT(gbc.readMem(0xdc6e), 0x3f);
        // CB 3F 02EA
        gbc.setState(0x8bcd, 0xf339, 0x62e0, 0x22b6, 0x4ece, 0xbd0d, 0x1, 0x1);
        gbc.writeMem(0x8bcd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf339);
        EXPECT(gbc.pc(), 0x8bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bcd), 0xcb);
        EXPECT(gbc.readMem(0x8bce), 0x3f);
        // CB 3F 02EB
        gbc.setState(0x995c, 0xfcfd, 0x8360, 0x94a6, 0xc012, 0xdd07, 0x1, 0x0);
        gbc.writeMem(0x995c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfcfd);
        EXPECT(gbc.pc(), 0x995e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x995c), 0xcb);
        EXPECT(gbc.readMem(0x995d), 0x3f);
        // CB 3F 02EC
        gbc.setState(0x3cb, 0x24ca, 0x9c80, 0x2f89, 0x4923, 0xf3d5, 0x0, 0x0);
        gbc.writeMem(0x3cb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x24ca);
        EXPECT(gbc.pc(), 0x3cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02ED
        gbc.setState(0x4215, 0x7e52, 0xb5b0, 0x72f0, 0xe221, 0x56df, 0x0, 0x1);
        gbc.writeMem(0x4215, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7e52);
        EXPECT(gbc.pc(), 0x4217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02EE
        gbc.setState(0x3d00, 0x51c6, 0xdf10, 0xe15, 0x9336, 0xed24, 0x0, 0x1);
        gbc.writeMem(0x3d00, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x51c6);
        EXPECT(gbc.pc(), 0x3d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02EF
        gbc.setState(0x34fd, 0x9dea, 0x6fe0, 0x8525, 0x7635, 0x2def, 0x0, 0x0);
        gbc.writeMem(0x34fd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9dea);
        EXPECT(gbc.pc(), 0x34ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02F0
        gbc.setState(0x555c, 0x6ceb, 0x3220, 0xa774, 0x5e4c, 0x518a, 0x0, 0x0);
        gbc.writeMem(0x555c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6ceb);
        EXPECT(gbc.pc(), 0x555e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02F1
        gbc.setState(0x6c66, 0x85b0, 0x7840, 0xa36, 0x64d0, 0x5937, 0x1, 0x0);
        gbc.writeMem(0x6c66, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x85b0);
        EXPECT(gbc.pc(), 0x6c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02F2
        gbc.setState(0x11e6, 0xc43a, 0x4940, 0xfe40, 0x289d, 0x7059, 0x0, 0x0);
        gbc.writeMem(0x11e6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc43a);
        EXPECT(gbc.pc(), 0x11e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02F4
        gbc.setState(0x13f6, 0x3fe1, 0x6890, 0x9dd8, 0xcc73, 0xa9f2, 0x1, 0x1);
        gbc.writeMem(0x13f6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3fe1);
        EXPECT(gbc.pc(), 0x13f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02F5
        gbc.setState(0xb7e5, 0x9ee7, 0x3210, 0xac46, 0x75f9, 0xe0c5, 0x1, 0x1);
        gbc.writeMem(0xb7e5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9ee7);
        EXPECT(gbc.pc(), 0xb7e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e5), 0xcb);
        EXPECT(gbc.readMem(0xb7e6), 0x3f);
        // CB 3F 02F6
        gbc.setState(0x77fe, 0xf9e7, 0xa9a0, 0x9b18, 0xd42c, 0x3024, 0x0, 0x1);
        gbc.writeMem(0x77fe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf9e7);
        EXPECT(gbc.pc(), 0x7800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02F7
        gbc.setState(0x691b, 0x8942, 0xb810, 0x8b21, 0x9a52, 0xf6ae, 0x0, 0x0);
        gbc.writeMem(0x691b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8942);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02F8
        gbc.setState(0x2770, 0x3da9, 0x4690, 0x7a, 0x3903, 0x17bc, 0x1, 0x0);
        gbc.writeMem(0x2770, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3da9);
        EXPECT(gbc.pc(), 0x2772);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02F9
        gbc.setState(0x7e64, 0x47b, 0x75a0, 0x923d, 0xb784, 0x489e, 0x0, 0x1);
        gbc.writeMem(0x7e64, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x47b);
        EXPECT(gbc.pc(), 0x7e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02FA
        gbc.setState(0x9354, 0x7be6, 0x2310, 0x870d, 0xfe71, 0x9f33, 0x0, 0x0);
        gbc.writeMem(0x9354, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7be6);
        EXPECT(gbc.pc(), 0x9356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9354), 0xcb);
        EXPECT(gbc.readMem(0x9355), 0x3f);
        // CB 3F 02FB
        gbc.setState(0x35e8, 0x708c, 0xe9a0, 0xa091, 0xf0f5, 0xd151, 0x1, 0x0);
        gbc.writeMem(0x35e8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x708c);
        EXPECT(gbc.pc(), 0x35ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 02FC
        gbc.setState(0x79cd, 0xd83a, 0x8000, 0x79b8, 0x38c4, 0x9f8c, 0x1, 0x1);
        gbc.writeMem(0x79cd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd83a);
        EXPECT(gbc.pc(), 0x79cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 02FD
        gbc.setState(0xdc6b, 0x6966, 0x2240, 0xf834, 0xa3c8, 0x7e0d, 0x0, 0x0);
        gbc.writeMem(0xdc6b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6966);
        EXPECT(gbc.pc(), 0xdc6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6b), 0xcb);
        EXPECT(gbc.readMem(0xdc6c), 0x3f);
        // CB 3F 02FF
        gbc.setState(0x9d44, 0x34b, 0xfdf0, 0x1e55, 0x9b76, 0x7a5e, 0x1, 0x1);
        gbc.writeMem(0x9d44, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x34b);
        EXPECT(gbc.pc(), 0x9d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d44), 0xcb);
        EXPECT(gbc.readMem(0x9d45), 0x3f);
        // CB 3F 0300
        gbc.setState(0x2f51, 0x1824, 0x4660, 0xddda, 0xa892, 0xec7b, 0x1, 0x1);
        gbc.writeMem(0x2f51, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1824);
        EXPECT(gbc.pc(), 0x2f53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0301
        gbc.setState(0x1620, 0x1af4, 0x16a0, 0x9a07, 0xe4bc, 0x785f, 0x1, 0x1);
        gbc.writeMem(0x1620, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1af4);
        EXPECT(gbc.pc(), 0x1622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0302
        gbc.setState(0x217a, 0xfd86, 0x6400, 0x4dfe, 0xdc19, 0x5f49, 0x0, 0x1);
        gbc.writeMem(0x217a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfd86);
        EXPECT(gbc.pc(), 0x217c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0303
        gbc.setState(0x7115, 0x7c29, 0xec80, 0x389e, 0xba8f, 0xd9be, 0x1, 0x0);
        gbc.writeMem(0x7115, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7c29);
        EXPECT(gbc.pc(), 0x7117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0304
        gbc.setState(0x4025, 0x80a0, 0x5160, 0xbdaf, 0x234a, 0x15e1, 0x0, 0x1);
        gbc.writeMem(0x4025, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x80a0);
        EXPECT(gbc.pc(), 0x4027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0305
        gbc.setState(0xa2ba, 0x1d7f, 0xd30, 0x6551, 0x650f, 0x688d, 0x1, 0x0);
        gbc.writeMem(0xa2ba, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1d7f);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ba), 0xcb);
        EXPECT(gbc.readMem(0xa2bb), 0x3f);
        // CB 3F 0306
        gbc.setState(0xb6f9, 0xd986, 0x5b30, 0xbf5, 0xdbbf, 0xa5df, 0x1, 0x0);
        gbc.writeMem(0xb6f9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd986);
        EXPECT(gbc.pc(), 0xb6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f9), 0xcb);
        EXPECT(gbc.readMem(0xb6fa), 0x3f);
        // CB 3F 0307
        gbc.setState(0xa572, 0x9f02, 0x5920, 0x8778, 0x1c9, 0xe5f0, 0x1, 0x0);
        gbc.writeMem(0xa572, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9f02);
        EXPECT(gbc.pc(), 0xa574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa572), 0xcb);
        EXPECT(gbc.readMem(0xa573), 0x3f);
        // CB 3F 0308
        gbc.setState(0x4a46, 0x2da, 0x8af0, 0x7e0, 0x1906, 0xcf6e, 0x1, 0x1);
        gbc.writeMem(0x4a46, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2da);
        EXPECT(gbc.pc(), 0x4a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0309
        gbc.setState(0x2a50, 0xbb10, 0x50d0, 0x58a7, 0x3f90, 0x373f, 0x1, 0x0);
        gbc.writeMem(0x2a50, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbb10);
        EXPECT(gbc.pc(), 0x2a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 030A
        gbc.setState(0x9a73, 0xb10b, 0x2e60, 0x8a35, 0xcff7, 0x6485, 0x0, 0x0);
        gbc.writeMem(0x9a73, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb10b);
        EXPECT(gbc.pc(), 0x9a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a73), 0xcb);
        EXPECT(gbc.readMem(0x9a74), 0x3f);
        // CB 3F 030B
        gbc.setState(0x9e58, 0x540c, 0x7ab0, 0x35de, 0x939b, 0xa3a0, 0x0, 0x0);
        gbc.writeMem(0x9e58, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x540c);
        EXPECT(gbc.pc(), 0x9e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e58), 0xcb);
        EXPECT(gbc.readMem(0x9e59), 0x3f);
        // CB 3F 030C
        gbc.setState(0xdc4d, 0x2ec5, 0x9500, 0xab70, 0xc906, 0x710d, 0x1, 0x0);
        gbc.writeMem(0xdc4d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2ec5);
        EXPECT(gbc.pc(), 0xdc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc4d), 0xcb);
        EXPECT(gbc.readMem(0xdc4e), 0x3f);
        // CB 3F 030D
        gbc.setState(0xb672, 0x11f5, 0x6600, 0xf75d, 0xa69b, 0x43a8, 0x0, 0x0);
        gbc.writeMem(0xb672, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x11f5);
        EXPECT(gbc.pc(), 0xb674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb672), 0xcb);
        EXPECT(gbc.readMem(0xb673), 0x3f);
        // CB 3F 030E
        gbc.setState(0x556, 0x65d8, 0xd520, 0xc16f, 0x731e, 0xa719, 0x0, 0x1);
        gbc.writeMem(0x556, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x65d8);
        EXPECT(gbc.pc(), 0x558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 030F
        gbc.setState(0x6b53, 0x23c2, 0x3c10, 0xe3df, 0x7a13, 0x7757, 0x0, 0x1);
        gbc.writeMem(0x6b53, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x23c2);
        EXPECT(gbc.pc(), 0x6b55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0311
        gbc.setState(0x46a4, 0x2dee, 0x37d0, 0x2c91, 0x115, 0x1a4a, 0x0, 0x1);
        gbc.writeMem(0x46a4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2dee);
        EXPECT(gbc.pc(), 0x46a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0312
        gbc.setState(0xab19, 0x3dbb, 0x4a20, 0x8c8c, 0xd7ab, 0x713d, 0x0, 0x1);
        gbc.writeMem(0xab19, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3dbb);
        EXPECT(gbc.pc(), 0xab1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab19), 0xcb);
        EXPECT(gbc.readMem(0xab1a), 0x3f);
        // CB 3F 0313
        gbc.setState(0x52fa, 0x67b6, 0xcf00, 0x602a, 0x31c4, 0xb385, 0x1, 0x1);
        gbc.writeMem(0x52fa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x67b6);
        EXPECT(gbc.pc(), 0x52fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0314
        gbc.setState(0x994d, 0x8225, 0xcb90, 0x74e2, 0x36f7, 0x5950, 0x1, 0x0);
        gbc.writeMem(0x994d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8225);
        EXPECT(gbc.pc(), 0x994f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994d), 0xcb);
        EXPECT(gbc.readMem(0x994e), 0x3f);
        // CB 3F 0315
        gbc.setState(0xda1c, 0xc772, 0x3530, 0xa5f9, 0x4caa, 0xf587, 0x1, 0x1);
        gbc.writeMem(0xda1c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc772);
        EXPECT(gbc.pc(), 0xda1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda1c), 0xcb);
        EXPECT(gbc.readMem(0xda1d), 0x3f);
        // CB 3F 0316
        gbc.setState(0x2af0, 0x88a5, 0x2100, 0xdbf2, 0xbc93, 0x38af, 0x0, 0x1);
        gbc.writeMem(0x2af0, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x88a5);
        EXPECT(gbc.pc(), 0x2af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0317
        gbc.setState(0xc487, 0x266d, 0x6c80, 0xf690, 0x701b, 0xf737, 0x0, 0x1);
        gbc.writeMem(0xc487, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x266d);
        EXPECT(gbc.pc(), 0xc489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc487), 0xcb);
        EXPECT(gbc.readMem(0xc488), 0x3f);
        // CB 3F 0318
        gbc.setState(0x199a, 0xbd65, 0xcb0, 0xff5c, 0x911c, 0x549e, 0x1, 0x1);
        gbc.writeMem(0x199a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbd65);
        EXPECT(gbc.pc(), 0x199c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0319
        gbc.setState(0x6797, 0x9ec5, 0xe610, 0x112, 0xbf48, 0x8246, 0x1, 0x0);
        gbc.writeMem(0x6797, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9ec5);
        EXPECT(gbc.pc(), 0x6799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 031A
        gbc.setState(0x33a1, 0x6b59, 0x87a0, 0xe781, 0x69e1, 0xcb08, 0x0, 0x0);
        gbc.writeMem(0x33a1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6b59);
        EXPECT(gbc.pc(), 0x33a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 031B
        gbc.setState(0xaff1, 0x8eaa, 0x1810, 0xf67c, 0xae09, 0x1c59, 0x1, 0x0);
        gbc.writeMem(0xaff1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8eaa);
        EXPECT(gbc.pc(), 0xaff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff1), 0xcb);
        EXPECT(gbc.readMem(0xaff2), 0x3f);
        // CB 3F 031C
        gbc.setState(0x4883, 0xf93f, 0xaa80, 0x26f4, 0x16fd, 0xc90b, 0x0, 0x1);
        gbc.writeMem(0x4883, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf93f);
        EXPECT(gbc.pc(), 0x4885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 031D
        gbc.setState(0x5e24, 0xaec9, 0xdf40, 0xae67, 0x896e, 0x453c, 0x0, 0x1);
        gbc.writeMem(0x5e24, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xaec9);
        EXPECT(gbc.pc(), 0x5e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 031E
        gbc.setState(0x46cf, 0xbc83, 0xd290, 0x82d9, 0xe893, 0x6ad6, 0x1, 0x1);
        gbc.writeMem(0x46cf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbc83);
        EXPECT(gbc.pc(), 0x46d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 031F
        gbc.setState(0x91af, 0x6441, 0x50, 0x5fb2, 0x1821, 0x6e0a, 0x0, 0x1);
        gbc.writeMem(0x91af, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6441);
        EXPECT(gbc.pc(), 0x91b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91af), 0xcb);
        EXPECT(gbc.readMem(0x91b0), 0x3f);
        // CB 3F 0320
        gbc.setState(0x8322, 0x6339, 0x9590, 0x923d, 0xbf6b, 0x3ecb, 0x1, 0x0);
        gbc.writeMem(0x8322, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6339);
        EXPECT(gbc.pc(), 0x8324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8322), 0xcb);
        EXPECT(gbc.readMem(0x8323), 0x3f);
        // CB 3F 0321
        gbc.setState(0xc454, 0xeab1, 0xaac0, 0x17eb, 0xf5d9, 0x69e3, 0x1, 0x0);
        gbc.writeMem(0xc454, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xeab1);
        EXPECT(gbc.pc(), 0xc456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc454), 0xcb);
        EXPECT(gbc.readMem(0xc455), 0x3f);
        // CB 3F 0322
        gbc.setState(0x2ffc, 0x556d, 0x34d0, 0x160e, 0xe6fe, 0xd36b, 0x1, 0x0);
        gbc.writeMem(0x2ffc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x556d);
        EXPECT(gbc.pc(), 0x2ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0323
        gbc.setState(0x56f1, 0x6731, 0x5090, 0x6a41, 0xe7b6, 0x7354, 0x1, 0x1);
        gbc.writeMem(0x56f1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6731);
        EXPECT(gbc.pc(), 0x56f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0324
        gbc.setState(0xa3c, 0x9e04, 0x84f0, 0x9eff, 0x7c5a, 0xc2d0, 0x0, 0x1);
        gbc.writeMem(0xa3c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9e04);
        EXPECT(gbc.pc(), 0xa3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0325
        gbc.setState(0x2b2b, 0x46cd, 0xa8c0, 0xc009, 0xcb26, 0x5b76, 0x0, 0x0);
        gbc.writeMem(0x2b2b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x46cd);
        EXPECT(gbc.pc(), 0x2b2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0326
        gbc.setState(0xd81d, 0xf437, 0x5610, 0xc2d9, 0x3e5, 0xdeb4, 0x0, 0x1);
        gbc.writeMem(0xd81d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf437);
        EXPECT(gbc.pc(), 0xd81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81d), 0xcb);
        EXPECT(gbc.readMem(0xd81e), 0x3f);
        // CB 3F 0327
        gbc.setState(0x7c8f, 0x339d, 0xd3c0, 0x1e33, 0xb7ff, 0x87ab, 0x0, 0x0);
        gbc.writeMem(0x7c8f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x339d);
        EXPECT(gbc.pc(), 0x7c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0328
        gbc.setState(0xa144, 0x8cb4, 0x3080, 0xe2d7, 0x9789, 0x6fd1, 0x0, 0x1);
        gbc.writeMem(0xa144, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8cb4);
        EXPECT(gbc.pc(), 0xa146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa144), 0xcb);
        EXPECT(gbc.readMem(0xa145), 0x3f);
        // CB 3F 0329
        gbc.setState(0xe737, 0x230b, 0xadc0, 0xb8b5, 0x94b2, 0x7e17, 0x0, 0x1);
        gbc.writeMem(0xe737, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x230b);
        EXPECT(gbc.pc(), 0xe739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe737), 0xcb);
        EXPECT(gbc.readMem(0xe738), 0x3f);
        // CB 3F 032A
        gbc.setState(0x6f82, 0x6870, 0x62b0, 0xd339, 0xa89d, 0xfc4d, 0x0, 0x0);
        gbc.writeMem(0x6f82, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6870);
        EXPECT(gbc.pc(), 0x6f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 032B
        gbc.setState(0x295d, 0x24d4, 0x79a0, 0xc7a, 0xe2b, 0xd924, 0x1, 0x0);
        gbc.writeMem(0x295d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x24d4);
        EXPECT(gbc.pc(), 0x295f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 032C
        gbc.setState(0x5350, 0xebc7, 0xf520, 0xcace, 0xb3ee, 0x4009, 0x0, 0x0);
        gbc.writeMem(0x5350, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xebc7);
        EXPECT(gbc.pc(), 0x5352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 032D
        gbc.setState(0xa59b, 0x5e66, 0xd3c0, 0x5b57, 0x2706, 0x4fe, 0x0, 0x1);
        gbc.writeMem(0xa59b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5e66);
        EXPECT(gbc.pc(), 0xa59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa59b), 0xcb);
        EXPECT(gbc.readMem(0xa59c), 0x3f);
        // CB 3F 032E
        gbc.setState(0xccb3, 0xf1f6, 0x93b0, 0x652e, 0xe524, 0x26d4, 0x1, 0x1);
        gbc.writeMem(0xccb3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf1f6);
        EXPECT(gbc.pc(), 0xccb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb3), 0xcb);
        EXPECT(gbc.readMem(0xccb4), 0x3f);
        // CB 3F 032F
        gbc.setState(0x46df, 0xdb67, 0x7e90, 0xa45d, 0x813b, 0xb395, 0x0, 0x0);
        gbc.writeMem(0x46df, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xdb67);
        EXPECT(gbc.pc(), 0x46e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0330
        gbc.setState(0xd445, 0xc0b1, 0x2970, 0xe1f8, 0x85f2, 0xac83, 0x1, 0x0);
        gbc.writeMem(0xd445, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc0b1);
        EXPECT(gbc.pc(), 0xd447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd445), 0xcb);
        EXPECT(gbc.readMem(0xd446), 0x3f);
        // CB 3F 0331
        gbc.setState(0xc83e, 0xd78, 0x4c70, 0x9cde, 0x4a8, 0x45c7, 0x0, 0x1);
        gbc.writeMem(0xc83e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd78);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83e), 0xcb);
        EXPECT(gbc.readMem(0xc83f), 0x3f);
        // CB 3F 0332
        gbc.setState(0x3254, 0x6cc6, 0x48b0, 0x70f3, 0xf2eb, 0xaca5, 0x0, 0x1);
        gbc.writeMem(0x3254, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6cc6);
        EXPECT(gbc.pc(), 0x3256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0333
        gbc.setState(0x9c2c, 0x3197, 0xbe10, 0x8ca5, 0x7b48, 0x37ae, 0x0, 0x0);
        gbc.writeMem(0x9c2c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3197);
        EXPECT(gbc.pc(), 0x9c2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2c), 0xcb);
        EXPECT(gbc.readMem(0x9c2d), 0x3f);
        // CB 3F 0334
        gbc.setState(0x576, 0xb4d6, 0xe4c0, 0xf128, 0x72ab, 0x30cc, 0x1, 0x0);
        gbc.writeMem(0x576, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb4d6);
        EXPECT(gbc.pc(), 0x578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0335
        gbc.setState(0x84c7, 0x8133, 0xb880, 0x14cd, 0x236c, 0x1ef6, 0x1, 0x1);
        gbc.writeMem(0x84c7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8133);
        EXPECT(gbc.pc(), 0x84c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c7), 0xcb);
        EXPECT(gbc.readMem(0x84c8), 0x3f);
        // CB 3F 0336
        gbc.setState(0x4d07, 0x85ea, 0xb20, 0xe269, 0xf15f, 0x9a1e, 0x0, 0x1);
        gbc.writeMem(0x4d07, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x85ea);
        EXPECT(gbc.pc(), 0x4d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0337
        gbc.setState(0x9144, 0xd393, 0xb70, 0x86c5, 0xec70, 0xae38, 0x1, 0x1);
        gbc.writeMem(0x9144, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd393);
        EXPECT(gbc.pc(), 0x9146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9144), 0xcb);
        EXPECT(gbc.readMem(0x9145), 0x3f);
        // CB 3F 0338
        gbc.setState(0xe55c, 0xc136, 0x1520, 0x422e, 0xda44, 0x507b, 0x1, 0x0);
        gbc.writeMem(0xe55c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc136);
        EXPECT(gbc.pc(), 0xe55e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe55c), 0xcb);
        EXPECT(gbc.readMem(0xe55d), 0x3f);
        // CB 3F 0339
        gbc.setState(0x432f, 0x462f, 0xbdd0, 0x978c, 0xb03a, 0x4474, 0x0, 0x0);
        gbc.writeMem(0x432f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x462f);
        EXPECT(gbc.pc(), 0x4331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 033A
        gbc.setState(0xcb36, 0xb66a, 0xc5f0, 0xaeb9, 0xcdf4, 0x414b, 0x1, 0x0);
        gbc.writeMem(0xcb36, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb66a);
        EXPECT(gbc.pc(), 0xcb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb36), 0xcb);
        EXPECT(gbc.readMem(0xcb37), 0x3f);
        // CB 3F 033B
        gbc.setState(0x97d7, 0xc1d5, 0x4160, 0x7731, 0x4838, 0x352a, 0x0, 0x1);
        gbc.writeMem(0x97d7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc1d5);
        EXPECT(gbc.pc(), 0x97d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d7), 0xcb);
        EXPECT(gbc.readMem(0x97d8), 0x3f);
        // CB 3F 033C
        gbc.setState(0xa8c3, 0x5ac8, 0x5010, 0x6832, 0xe9a9, 0x457b, 0x0, 0x1);
        gbc.writeMem(0xa8c3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5ac8);
        EXPECT(gbc.pc(), 0xa8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c3), 0xcb);
        EXPECT(gbc.readMem(0xa8c4), 0x3f);
        // CB 3F 033D
        gbc.setState(0xc94b, 0xe371, 0xb980, 0xb1a4, 0xaf84, 0xda58, 0x1, 0x0);
        gbc.writeMem(0xc94b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe371);
        EXPECT(gbc.pc(), 0xc94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc94b), 0xcb);
        EXPECT(gbc.readMem(0xc94c), 0x3f);
        // CB 3F 033E
        gbc.setState(0xe6, 0xb459, 0xc7c0, 0x2952, 0xe015, 0x51fa, 0x0, 0x1);
        gbc.writeMem(0xe6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb459);
        EXPECT(gbc.pc(), 0xe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 033F
        gbc.setState(0xa2de, 0x1af3, 0xe000, 0xd9e5, 0x2525, 0x2f9d, 0x1, 0x1);
        gbc.writeMem(0xa2de, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1af3);
        EXPECT(gbc.pc(), 0xa2e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2de), 0xcb);
        EXPECT(gbc.readMem(0xa2df), 0x3f);
        // CB 3F 0340
        gbc.setState(0x3d18, 0x8a0e, 0x21e0, 0xea02, 0x70d9, 0x287, 0x0, 0x1);
        gbc.writeMem(0x3d18, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8a0e);
        EXPECT(gbc.pc(), 0x3d1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0341
        gbc.setState(0x364a, 0x412b, 0x99e0, 0xe250, 0x13f9, 0x62fc, 0x1, 0x0);
        gbc.writeMem(0x364a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x412b);
        EXPECT(gbc.pc(), 0x364c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0342
        gbc.setState(0xee92, 0x381f, 0x50b0, 0x1325, 0x6a22, 0x8ed2, 0x1, 0x1);
        gbc.writeMem(0xee92, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x381f);
        EXPECT(gbc.pc(), 0xee94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee92), 0xcb);
        EXPECT(gbc.readMem(0xee93), 0x3f);
        // CB 3F 0343
        gbc.setState(0x14a1, 0xb567, 0x6f30, 0x3bed, 0x797e, 0xf92a, 0x1, 0x0);
        gbc.writeMem(0x14a1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb567);
        EXPECT(gbc.pc(), 0x14a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0344
        gbc.setState(0x4bb7, 0x16bd, 0x1880, 0x25de, 0xa0d2, 0xd388, 0x1, 0x0);
        gbc.writeMem(0x4bb7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x16bd);
        EXPECT(gbc.pc(), 0x4bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0345
        gbc.setState(0x163, 0x9531, 0x3bc0, 0xd2c9, 0x6b0d, 0x8890, 0x1, 0x0);
        gbc.writeMem(0x163, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9531);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0346
        gbc.setState(0x1a85, 0xda71, 0x50e0, 0x7550, 0xe8c, 0xac11, 0x0, 0x0);
        gbc.writeMem(0x1a85, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xda71);
        EXPECT(gbc.pc(), 0x1a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0347
        gbc.setState(0x57b3, 0x6a69, 0x9270, 0x3b8a, 0x446f, 0xe528, 0x0, 0x1);
        gbc.writeMem(0x57b3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6a69);
        EXPECT(gbc.pc(), 0x57b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0348
        gbc.setState(0xc853, 0xe98c, 0x6370, 0xf7b7, 0xa07c, 0xbe75, 0x0, 0x0);
        gbc.writeMem(0xc853, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe98c);
        EXPECT(gbc.pc(), 0xc855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc853), 0xcb);
        EXPECT(gbc.readMem(0xc854), 0x3f);
        // CB 3F 0349
        gbc.setState(0x9dc8, 0xd456, 0xf440, 0xd234, 0xde0c, 0x4f19, 0x0, 0x1);
        gbc.writeMem(0x9dc8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd456);
        EXPECT(gbc.pc(), 0x9dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc8), 0xcb);
        EXPECT(gbc.readMem(0x9dc9), 0x3f);
        // CB 3F 034A
        gbc.setState(0xbdc6, 0x3379, 0xb470, 0xb11a, 0x71c, 0x6bdc, 0x1, 0x0);
        gbc.writeMem(0xbdc6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3379);
        EXPECT(gbc.pc(), 0xbdc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc6), 0xcb);
        EXPECT(gbc.readMem(0xbdc7), 0x3f);
        // CB 3F 034B
        gbc.setState(0x9ee9, 0xc39b, 0x5850, 0x19be, 0xb9ef, 0xaf49, 0x0, 0x0);
        gbc.writeMem(0x9ee9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc39b);
        EXPECT(gbc.pc(), 0x9eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee9), 0xcb);
        EXPECT(gbc.readMem(0x9eea), 0x3f);
        // CB 3F 034C
        gbc.setState(0x504e, 0xdd4e, 0x130, 0xc95a, 0x5a9a, 0x9e7d, 0x0, 0x0);
        gbc.writeMem(0x504e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdd4e);
        EXPECT(gbc.pc(), 0x5050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 034D
        gbc.setState(0x8dfd, 0xbd2e, 0xf190, 0xe86b, 0x5bbb, 0x7500, 0x0, 0x1);
        gbc.writeMem(0x8dfd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbd2e);
        EXPECT(gbc.pc(), 0x8dff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dfd), 0xcb);
        EXPECT(gbc.readMem(0x8dfe), 0x3f);
        // CB 3F 034E
        gbc.setState(0xc3b, 0xd2bf, 0xc380, 0xc952, 0x7db2, 0x446, 0x0, 0x1);
        gbc.writeMem(0xc3b, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd2bf);
        EXPECT(gbc.pc(), 0xc3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 034F
        gbc.setState(0x85d9, 0x775c, 0xf220, 0x8147, 0xbf79, 0x8a63, 0x1, 0x1);
        gbc.writeMem(0x85d9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x775c);
        EXPECT(gbc.pc(), 0x85db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d9), 0xcb);
        EXPECT(gbc.readMem(0x85da), 0x3f);
        // CB 3F 0350
        gbc.setState(0xa0eb, 0xe54, 0x4fb0, 0xeae7, 0x7092, 0x62b1, 0x0, 0x0);
        gbc.writeMem(0xa0eb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe54);
        EXPECT(gbc.pc(), 0xa0ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0eb), 0xcb);
        EXPECT(gbc.readMem(0xa0ec), 0x3f);
        // CB 3F 0351
        gbc.setState(0x3ace, 0xbcfa, 0xa530, 0xb8ea, 0x196e, 0xbfea, 0x0, 0x1);
        gbc.writeMem(0x3ace, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xbcfa);
        EXPECT(gbc.pc(), 0x3ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0352
        gbc.setState(0x587f, 0xaca6, 0x7260, 0xe967, 0x748c, 0x1943, 0x0, 0x1);
        gbc.writeMem(0x587f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xaca6);
        EXPECT(gbc.pc(), 0x5881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0353
        gbc.setState(0xacfd, 0xb1a6, 0x2060, 0x9182, 0x6d4f, 0xf9c0, 0x1, 0x1);
        gbc.writeMem(0xacfd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb1a6);
        EXPECT(gbc.pc(), 0xacff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfd), 0xcb);
        EXPECT(gbc.readMem(0xacfe), 0x3f);
        // CB 3F 0354
        gbc.setState(0x7a24, 0xc04d, 0x5910, 0x7e6c, 0xd031, 0x9714, 0x0, 0x1);
        gbc.writeMem(0x7a24, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc04d);
        EXPECT(gbc.pc(), 0x7a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0355
        gbc.setState(0x7f13, 0x160b, 0xa1e0, 0xacfe, 0x86d2, 0xec3a, 0x1, 0x0);
        gbc.writeMem(0x7f13, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x160b);
        EXPECT(gbc.pc(), 0x7f15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0356
        gbc.setState(0x574, 0x3337, 0x45c0, 0xf440, 0x32d2, 0xa4c3, 0x1, 0x0);
        gbc.writeMem(0x574, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3337);
        EXPECT(gbc.pc(), 0x576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0357
        gbc.setState(0x8f71, 0x3e65, 0xc890, 0xdf77, 0xfc60, 0x89ee, 0x1, 0x0);
        gbc.writeMem(0x8f71, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3e65);
        EXPECT(gbc.pc(), 0x8f73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f71), 0xcb);
        EXPECT(gbc.readMem(0x8f72), 0x3f);
        // CB 3F 0358
        gbc.setState(0x688, 0xcae9, 0x4720, 0x2d37, 0xdd51, 0x6a6, 0x0, 0x0);
        gbc.writeMem(0x688, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xcae9);
        EXPECT(gbc.pc(), 0x68a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0359
        gbc.setState(0xddf8, 0xafdb, 0x760, 0xbded, 0xe25e, 0x298c, 0x0, 0x0);
        gbc.writeMem(0xddf8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xafdb);
        EXPECT(gbc.pc(), 0xddfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf8), 0xcb);
        EXPECT(gbc.readMem(0xddf9), 0x3f);
        // CB 3F 035A
        gbc.setState(0x97fc, 0x7613, 0x8ca0, 0xc91, 0x99e2, 0xe94f, 0x1, 0x0);
        gbc.writeMem(0x97fc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7613);
        EXPECT(gbc.pc(), 0x97fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97fc), 0xcb);
        EXPECT(gbc.readMem(0x97fd), 0x3f);
        // CB 3F 035B
        gbc.setState(0xe7a7, 0xf94, 0xab20, 0x78c6, 0x1f3c, 0x85d1, 0x1, 0x0);
        gbc.writeMem(0xe7a7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf94);
        EXPECT(gbc.pc(), 0xe7a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7a7), 0xcb);
        EXPECT(gbc.readMem(0xe7a8), 0x3f);
        // CB 3F 035C
        gbc.setState(0x73bf, 0x3b7, 0x76d0, 0x53fc, 0xdb02, 0x241, 0x0, 0x0);
        gbc.writeMem(0x73bf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3b7);
        EXPECT(gbc.pc(), 0x73c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 035D
        gbc.setState(0xeefc, 0x49d, 0xbd30, 0x6f4a, 0xe0a4, 0x399, 0x1, 0x0);
        gbc.writeMem(0xeefc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x49d);
        EXPECT(gbc.pc(), 0xeefe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeefc), 0xcb);
        EXPECT(gbc.readMem(0xeefd), 0x3f);
        // CB 3F 035E
        gbc.setState(0x86d1, 0x69e8, 0xcc10, 0xf105, 0xadd0, 0x125e, 0x1, 0x1);
        gbc.writeMem(0x86d1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x69e8);
        EXPECT(gbc.pc(), 0x86d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d1), 0xcb);
        EXPECT(gbc.readMem(0x86d2), 0x3f);
        // CB 3F 035F
        gbc.setState(0x1716, 0x240a, 0xce80, 0xe6ad, 0xc5c9, 0xee21, 0x0, 0x1);
        gbc.writeMem(0x1716, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x240a);
        EXPECT(gbc.pc(), 0x1718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0360
        gbc.setState(0xd14, 0x924c, 0x5c60, 0x24e2, 0x2001, 0xd083, 0x0, 0x1);
        gbc.writeMem(0xd14, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x924c);
        EXPECT(gbc.pc(), 0xd16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0361
        gbc.setState(0x9a04, 0x4940, 0x2110, 0xc620, 0xb5fd, 0xfe15, 0x1, 0x0);
        gbc.writeMem(0x9a04, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4940);
        EXPECT(gbc.pc(), 0x9a06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a04), 0xcb);
        EXPECT(gbc.readMem(0x9a05), 0x3f);
        // CB 3F 0362
        gbc.setState(0x80dc, 0x3035, 0x6c70, 0x174e, 0xc033, 0x3aa4, 0x1, 0x1);
        gbc.writeMem(0x80dc, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3035);
        EXPECT(gbc.pc(), 0x80de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80dc), 0xcb);
        EXPECT(gbc.readMem(0x80dd), 0x3f);
        // CB 3F 0363
        gbc.setState(0xe716, 0x6b44, 0x4f90, 0x3873, 0x7dae, 0x1423, 0x1, 0x1);
        gbc.writeMem(0xe716, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6b44);
        EXPECT(gbc.pc(), 0xe718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe716), 0xcb);
        EXPECT(gbc.readMem(0xe717), 0x3f);
        // CB 3F 0364
        gbc.setState(0xeaa1, 0x8475, 0x2620, 0xb13c, 0xf594, 0x7654, 0x0, 0x1);
        gbc.writeMem(0xeaa1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8475);
        EXPECT(gbc.pc(), 0xeaa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa1), 0xcb);
        EXPECT(gbc.readMem(0xeaa2), 0x3f);
        // CB 3F 0365
        gbc.setState(0x2de3, 0xb757, 0xcc70, 0xbdc4, 0x5c0d, 0x5650, 0x1, 0x0);
        gbc.writeMem(0x2de3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb757);
        EXPECT(gbc.pc(), 0x2de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0366
        gbc.setState(0x1ba4, 0xa7cd, 0x8c60, 0xeac, 0xf21e, 0xcd9b, 0x0, 0x0);
        gbc.writeMem(0x1ba4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa7cd);
        EXPECT(gbc.pc(), 0x1ba6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0367
        gbc.setState(0xdeae, 0xeab5, 0x6240, 0x6d0f, 0x579a, 0x3549, 0x0, 0x1);
        gbc.writeMem(0xdeae, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xeab5);
        EXPECT(gbc.pc(), 0xdeb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeae), 0xcb);
        EXPECT(gbc.readMem(0xdeaf), 0x3f);
        // CB 3F 0368
        gbc.setState(0x1400, 0x53de, 0xacc0, 0x5e95, 0x3b09, 0xc008, 0x0, 0x0);
        gbc.writeMem(0x1400, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x53de);
        EXPECT(gbc.pc(), 0x1402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0369
        gbc.setState(0x8f5e, 0xac25, 0xe090, 0x4046, 0xc9dc, 0x8141, 0x0, 0x0);
        gbc.writeMem(0x8f5e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xac25);
        EXPECT(gbc.pc(), 0x8f60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f5e), 0xcb);
        EXPECT(gbc.readMem(0x8f5f), 0x3f);
        // CB 3F 036C
        gbc.setState(0x87f7, 0x4d68, 0x3980, 0x516a, 0xd34a, 0x45a, 0x1, 0x1);
        gbc.writeMem(0x87f7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4d68);
        EXPECT(gbc.pc(), 0x87f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f7), 0xcb);
        EXPECT(gbc.readMem(0x87f8), 0x3f);
        // CB 3F 036D
        gbc.setState(0x39c8, 0x173d, 0x8cc0, 0xd5ef, 0x8239, 0xd13e, 0x1, 0x0);
        gbc.writeMem(0x39c8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x173d);
        EXPECT(gbc.pc(), 0x39ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 036E
        gbc.setState(0x90c6, 0x70d4, 0xa210, 0xaebc, 0x87e4, 0x8e99, 0x1, 0x1);
        gbc.writeMem(0x90c6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x70d4);
        EXPECT(gbc.pc(), 0x90c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c6), 0xcb);
        EXPECT(gbc.readMem(0x90c7), 0x3f);
        // CB 3F 0370
        gbc.setState(0x1608, 0x5c7, 0x1a80, 0x9e1b, 0x97f8, 0xd2bc, 0x0, 0x1);
        gbc.writeMem(0x1608, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5c7);
        EXPECT(gbc.pc(), 0x160a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0371
        gbc.setState(0x9ed6, 0x2797, 0x3c10, 0x1c70, 0x3e5a, 0x5527, 0x1, 0x1);
        gbc.writeMem(0x9ed6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2797);
        EXPECT(gbc.pc(), 0x9ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed6), 0xcb);
        EXPECT(gbc.readMem(0x9ed7), 0x3f);
        // CB 3F 0372
        gbc.setState(0xa98e, 0x489b, 0xcd40, 0xd473, 0x1907, 0xda63, 0x1, 0x0);
        gbc.writeMem(0xa98e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x489b);
        EXPECT(gbc.pc(), 0xa990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98e), 0xcb);
        EXPECT(gbc.readMem(0xa98f), 0x3f);
        // CB 3F 0373
        gbc.setState(0x7462, 0x2f28, 0x3020, 0x48b, 0xd430, 0xd7a3, 0x1, 0x1);
        gbc.writeMem(0x7462, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2f28);
        EXPECT(gbc.pc(), 0x7464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0374
        gbc.setState(0x296, 0x22fe, 0x66f0, 0x5a2d, 0xadac, 0x1480, 0x1, 0x0);
        gbc.writeMem(0x296, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x22fe);
        EXPECT(gbc.pc(), 0x298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0375
        gbc.setState(0x49, 0x9a18, 0xcb20, 0x4e2b, 0x9925, 0xc77b, 0x0, 0x1);
        gbc.writeMem(0x49, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9a18);
        EXPECT(gbc.pc(), 0x4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0376
        gbc.setState(0x9d38, 0x4a86, 0x58c0, 0xd644, 0x1fce, 0x3c0c, 0x0, 0x1);
        gbc.writeMem(0x9d38, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4a86);
        EXPECT(gbc.pc(), 0x9d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d38), 0xcb);
        EXPECT(gbc.readMem(0x9d39), 0x3f);
        // CB 3F 0377
        gbc.setState(0x2c4d, 0x348a, 0x4630, 0x2a0e, 0x6001, 0x130f, 0x1, 0x0);
        gbc.writeMem(0x2c4d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x348a);
        EXPECT(gbc.pc(), 0x2c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0378
        gbc.setState(0xe533, 0x45e0, 0x3480, 0x38b3, 0xf284, 0x72b6, 0x1, 0x0);
        gbc.writeMem(0xe533, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x45e0);
        EXPECT(gbc.pc(), 0xe535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe533), 0xcb);
        EXPECT(gbc.readMem(0xe534), 0x3f);
        // CB 3F 0379
        gbc.setState(0x92aa, 0xb214, 0xc920, 0xdd97, 0xaaa0, 0x53fd, 0x0, 0x0);
        gbc.writeMem(0x92aa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb214);
        EXPECT(gbc.pc(), 0x92ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92aa), 0xcb);
        EXPECT(gbc.readMem(0x92ab), 0x3f);
        // CB 3F 037B
        gbc.setState(0xd365, 0x4afd, 0x6100, 0x8043, 0xcc8d, 0x4fa4, 0x1, 0x0);
        gbc.writeMem(0xd365, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4afd);
        EXPECT(gbc.pc(), 0xd367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd365), 0xcb);
        EXPECT(gbc.readMem(0xd366), 0x3f);
        // CB 3F 037C
        gbc.setState(0x5fed, 0x80f6, 0x6920, 0x7b44, 0xe32d, 0x5474, 0x0, 0x0);
        gbc.writeMem(0x5fed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x80f6);
        EXPECT(gbc.pc(), 0x5fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 037D
        gbc.setState(0xc165, 0x27dd, 0xcbc0, 0x3ab8, 0x9273, 0xef48, 0x1, 0x0);
        gbc.writeMem(0xc165, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x27dd);
        EXPECT(gbc.pc(), 0xc167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc165), 0xcb);
        EXPECT(gbc.readMem(0xc166), 0x3f);
        // CB 3F 037E
        gbc.setState(0x9fa, 0xb310, 0x76e0, 0x5ec2, 0xdca3, 0x7868, 0x1, 0x0);
        gbc.writeMem(0x9fa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb310);
        EXPECT(gbc.pc(), 0x9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 037F
        gbc.setState(0xc744, 0xf86f, 0x4cf0, 0x4100, 0x10ac, 0x771d, 0x1, 0x0);
        gbc.writeMem(0xc744, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf86f);
        EXPECT(gbc.pc(), 0xc746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc744), 0xcb);
        EXPECT(gbc.readMem(0xc745), 0x3f);
        // CB 3F 0380
        gbc.setState(0x20b7, 0x15cb, 0x9a80, 0xefcd, 0xe0d3, 0x267, 0x1, 0x0);
        gbc.writeMem(0x20b7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x15cb);
        EXPECT(gbc.pc(), 0x20b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0381
        gbc.setState(0x87d5, 0x6148, 0x1100, 0x501a, 0xdd99, 0x4254, 0x1, 0x0);
        gbc.writeMem(0x87d5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6148);
        EXPECT(gbc.pc(), 0x87d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d5), 0xcb);
        EXPECT(gbc.readMem(0x87d6), 0x3f);
        // CB 3F 0382
        gbc.setState(0x9201, 0x8d6f, 0xb070, 0xf67e, 0x317e, 0xd8a1, 0x1, 0x1);
        gbc.writeMem(0x9201, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d6f);
        EXPECT(gbc.pc(), 0x9203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9201), 0xcb);
        EXPECT(gbc.readMem(0x9202), 0x3f);
        // CB 3F 0383
        gbc.setState(0x1253, 0xac06, 0xe200, 0x16a5, 0xa52a, 0x59c2, 0x1, 0x0);
        gbc.writeMem(0x1253, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xac06);
        EXPECT(gbc.pc(), 0x1255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0384
        gbc.setState(0x5a3e, 0xe17f, 0x84d0, 0xb58d, 0x3116, 0x5055, 0x0, 0x1);
        gbc.writeMem(0x5a3e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe17f);
        EXPECT(gbc.pc(), 0x5a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0385
        gbc.setState(0x1947, 0x41e3, 0xde0, 0x25d0, 0x92de, 0xc6ec, 0x1, 0x0);
        gbc.writeMem(0x1947, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x41e3);
        EXPECT(gbc.pc(), 0x1949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0386
        gbc.setState(0xed43, 0xdff6, 0x8f90, 0x1ea, 0x70a4, 0xc659, 0x1, 0x0);
        gbc.writeMem(0xed43, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdff6);
        EXPECT(gbc.pc(), 0xed45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed43), 0xcb);
        EXPECT(gbc.readMem(0xed44), 0x3f);
        // CB 3F 0388
        gbc.setState(0x2512, 0xc401, 0x1440, 0x969e, 0x99af, 0x2326, 0x1, 0x0);
        gbc.writeMem(0x2512, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc401);
        EXPECT(gbc.pc(), 0x2514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0389
        gbc.setState(0xdde9, 0xcb2a, 0x7b20, 0x4f24, 0x596a, 0xeb7c, 0x0, 0x1);
        gbc.writeMem(0xdde9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcb2a);
        EXPECT(gbc.pc(), 0xddeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde9), 0xcb);
        EXPECT(gbc.readMem(0xddea), 0x3f);
        // CB 3F 038A
        gbc.setState(0x7995, 0xd3a2, 0xb1d0, 0xaf05, 0xdb38, 0x7b25, 0x0, 0x1);
        gbc.writeMem(0x7995, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd3a2);
        EXPECT(gbc.pc(), 0x7997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 038C
        gbc.setState(0x5306, 0x5653, 0xc0, 0x65ca, 0xd1bc, 0x2376, 0x1, 0x0);
        gbc.writeMem(0x5306, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5653);
        EXPECT(gbc.pc(), 0x5308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 038D
        gbc.setState(0x8575, 0x9adc, 0x5820, 0x461e, 0x376f, 0xdc12, 0x0, 0x1);
        gbc.writeMem(0x8575, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9adc);
        EXPECT(gbc.pc(), 0x8577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8575), 0xcb);
        EXPECT(gbc.readMem(0x8576), 0x3f);
        // CB 3F 038E
        gbc.setState(0x356d, 0x9de1, 0x4120, 0x35de, 0xf3f3, 0x7bd7, 0x1, 0x1);
        gbc.writeMem(0x356d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9de1);
        EXPECT(gbc.pc(), 0x356f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 038F
        gbc.setState(0x58a1, 0x48a5, 0xcc80, 0x294e, 0xc0c8, 0x8586, 0x1, 0x0);
        gbc.writeMem(0x58a1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x48a5);
        EXPECT(gbc.pc(), 0x58a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0390
        gbc.setState(0x963a, 0xf90a, 0x310, 0x3003, 0x7386, 0x357d, 0x0, 0x1);
        gbc.writeMem(0x963a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf90a);
        EXPECT(gbc.pc(), 0x963c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x963a), 0xcb);
        EXPECT(gbc.readMem(0x963b), 0x3f);
        // CB 3F 0391
        gbc.setState(0xe7f3, 0x47a6, 0xe980, 0xbf56, 0xdca6, 0xfb8e, 0x0, 0x1);
        gbc.writeMem(0xe7f3, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x47a6);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f3), 0xcb);
        EXPECT(gbc.readMem(0xe7f4), 0x3f);
        // CB 3F 0392
        gbc.setState(0xaf37, 0x4b43, 0xade0, 0xeb71, 0x5cd6, 0x78c1, 0x0, 0x0);
        gbc.writeMem(0xaf37, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4b43);
        EXPECT(gbc.pc(), 0xaf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf37), 0xcb);
        EXPECT(gbc.readMem(0xaf38), 0x3f);
        // CB 3F 0393
        gbc.setState(0x5d8f, 0xecfe, 0x9930, 0xeb92, 0x5661, 0x146f, 0x0, 0x1);
        gbc.writeMem(0x5d8f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xecfe);
        EXPECT(gbc.pc(), 0x5d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 0394
        gbc.setState(0x866a, 0x6fe3, 0x4410, 0xdd71, 0x64be, 0xf0f, 0x1, 0x0);
        gbc.writeMem(0x866a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6fe3);
        EXPECT(gbc.pc(), 0x866c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866a), 0xcb);
        EXPECT(gbc.readMem(0x866b), 0x3f);
        // CB 3F 0395
        gbc.setState(0xeef9, 0x7c98, 0xef40, 0x6882, 0xa13b, 0xadd1, 0x1, 0x1);
        gbc.writeMem(0xeef9, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7c98);
        EXPECT(gbc.pc(), 0xeefb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef9), 0xcb);
        EXPECT(gbc.readMem(0xeefa), 0x3f);
        // CB 3F 0396
        gbc.setState(0x3aaf, 0x8e7b, 0xbe40, 0x3967, 0xd6ce, 0xaeb6, 0x1, 0x1);
        gbc.writeMem(0x3aaf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8e7b);
        EXPECT(gbc.pc(), 0x3ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0397
        gbc.setState(0x4ce4, 0xcacf, 0x6630, 0x329b, 0xb534, 0xed2e, 0x0, 0x1);
        gbc.writeMem(0x4ce4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcacf);
        EXPECT(gbc.pc(), 0x4ce6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 0398
        gbc.setState(0xdc0e, 0x83e6, 0xe360, 0x28e1, 0x52a6, 0xa31a, 0x1, 0x0);
        gbc.writeMem(0xdc0e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x83e6);
        EXPECT(gbc.pc(), 0xdc10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc0e), 0xcb);
        EXPECT(gbc.readMem(0xdc0f), 0x3f);
        // CB 3F 0399
        gbc.setState(0x8265, 0xece6, 0x6d50, 0x80a7, 0x2e4f, 0x5b0f, 0x0, 0x0);
        gbc.writeMem(0x8265, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xece6);
        EXPECT(gbc.pc(), 0x8267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8265), 0xcb);
        EXPECT(gbc.readMem(0x8266), 0x3f);
        // CB 3F 039A
        gbc.setState(0xadf4, 0xf6e1, 0x5da0, 0xd6f9, 0x693, 0xb3bc, 0x0, 0x0);
        gbc.writeMem(0xadf4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf6e1);
        EXPECT(gbc.pc(), 0xadf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf4), 0xcb);
        EXPECT(gbc.readMem(0xadf5), 0x3f);
        // CB 3F 039C
        gbc.setState(0xc873, 0xb7da, 0xcf20, 0x8279, 0xda65, 0xf3b3, 0x1, 0x0);
        gbc.writeMem(0xc873, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb7da);
        EXPECT(gbc.pc(), 0xc875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc873), 0xcb);
        EXPECT(gbc.readMem(0xc874), 0x3f);
        // CB 3F 039D
        gbc.setState(0x870d, 0x9c9f, 0x1a80, 0xd231, 0x472d, 0xee08, 0x0, 0x0);
        gbc.writeMem(0x870d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9c9f);
        EXPECT(gbc.pc(), 0x870f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870d), 0xcb);
        EXPECT(gbc.readMem(0x870e), 0x3f);
        // CB 3F 039E
        gbc.setState(0x32d5, 0x5177, 0x2680, 0x10d5, 0xf445, 0x3008, 0x0, 0x1);
        gbc.writeMem(0x32d5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5177);
        EXPECT(gbc.pc(), 0x32d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 039F
        gbc.setState(0x109a, 0xb515, 0x16f0, 0x239d, 0xd073, 0xd898, 0x1, 0x0);
        gbc.writeMem(0x109a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb515);
        EXPECT(gbc.pc(), 0x109c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03A0
        gbc.setState(0xb2f1, 0x16ad, 0xc5a0, 0x1b03, 0x9ea2, 0x201b, 0x0, 0x0);
        gbc.writeMem(0xb2f1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x16ad);
        EXPECT(gbc.pc(), 0xb2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f1), 0xcb);
        EXPECT(gbc.readMem(0xb2f2), 0x3f);
        // CB 3F 03A2
        gbc.setState(0x6aa7, 0x9ff7, 0x5eb0, 0x4a14, 0x1078, 0x97d4, 0x1, 0x0);
        gbc.writeMem(0x6aa7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9ff7);
        EXPECT(gbc.pc(), 0x6aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03A3
        gbc.setState(0x6659, 0x4f9d, 0x300, 0xa516, 0xd2f4, 0xdd5a, 0x1, 0x0);
        gbc.writeMem(0x6659, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4f9d);
        EXPECT(gbc.pc(), 0x665b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03A4
        gbc.setState(0x366e, 0xed4f, 0x1ae0, 0xd06a, 0xb5f4, 0xf10c, 0x1, 0x0);
        gbc.writeMem(0x366e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xed4f);
        EXPECT(gbc.pc(), 0x3670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03A5
        gbc.setState(0xee16, 0x505c, 0xef70, 0x4f30, 0x4f1e, 0xb8ab, 0x1, 0x0);
        gbc.writeMem(0xee16, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x505c);
        EXPECT(gbc.pc(), 0xee18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee16), 0xcb);
        EXPECT(gbc.readMem(0xee17), 0x3f);
        // CB 3F 03A6
        gbc.setState(0x8d96, 0x856c, 0x76a0, 0x909d, 0xe2dc, 0x6a06, 0x1, 0x1);
        gbc.writeMem(0x8d96, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x856c);
        EXPECT(gbc.pc(), 0x8d98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d96), 0xcb);
        EXPECT(gbc.readMem(0x8d97), 0x3f);
        // CB 3F 03A7
        gbc.setState(0xe09a, 0xad21, 0x6f00, 0x1617, 0x3488, 0xa739, 0x0, 0x1);
        gbc.writeMem(0xe09a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xad21);
        EXPECT(gbc.pc(), 0xe09c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe09a), 0xcb);
        EXPECT(gbc.readMem(0xe09b), 0x3f);
        // CB 3F 03A8
        gbc.setState(0x390f, 0x6b95, 0xcfc0, 0x841e, 0x6772, 0xade3, 0x1, 0x0);
        gbc.writeMem(0x390f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6b95);
        EXPECT(gbc.pc(), 0x3911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03A9
        gbc.setState(0xe1ad, 0x8407, 0x4fa0, 0xacaa, 0xcc21, 0x6393, 0x1, 0x1);
        gbc.writeMem(0xe1ad, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8407);
        EXPECT(gbc.pc(), 0xe1af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ad), 0xcb);
        EXPECT(gbc.readMem(0xe1ae), 0x3f);
        // CB 3F 03AA
        gbc.setState(0x6ff8, 0x3b2f, 0x2140, 0x3f62, 0x9652, 0x384d, 0x1, 0x0);
        gbc.writeMem(0x6ff8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3b2f);
        EXPECT(gbc.pc(), 0x6ffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03AB
        gbc.setState(0x7680, 0x6ecf, 0xc460, 0xd9e4, 0x8d7c, 0x1679, 0x0, 0x0);
        gbc.writeMem(0x7680, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6ecf);
        EXPECT(gbc.pc(), 0x7682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03AD
        gbc.setState(0x2bb8, 0x6502, 0x77e0, 0x7a97, 0xb8f3, 0xc712, 0x0, 0x1);
        gbc.writeMem(0x2bb8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6502);
        EXPECT(gbc.pc(), 0x2bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03AF
        gbc.setState(0xad95, 0x9233, 0xae0, 0x9c03, 0x35e9, 0x2ab4, 0x1, 0x1);
        gbc.writeMem(0xad95, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9233);
        EXPECT(gbc.pc(), 0xad97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad95), 0xcb);
        EXPECT(gbc.readMem(0xad96), 0x3f);
        // CB 3F 03B1
        gbc.setState(0xadfe, 0xb6de, 0x5d90, 0x8083, 0xefdf, 0xa39, 0x0, 0x1);
        gbc.writeMem(0xadfe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb6de);
        EXPECT(gbc.pc(), 0xae00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadfe), 0xcb);
        EXPECT(gbc.readMem(0xadff), 0x3f);
        // CB 3F 03B2
        gbc.setState(0x6c71, 0xf72a, 0x7c50, 0x3c3e, 0xef7, 0xe087, 0x0, 0x1);
        gbc.writeMem(0x6c71, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf72a);
        EXPECT(gbc.pc(), 0x6c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03B3
        gbc.setState(0x77e1, 0x6ad0, 0x74d0, 0x5628, 0xd62a, 0x2734, 0x0, 0x0);
        gbc.writeMem(0x77e1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6ad0);
        EXPECT(gbc.pc(), 0x77e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03B4
        gbc.setState(0x8a58, 0x8441, 0x3c0, 0x84fe, 0x3fb2, 0x2ffc, 0x0, 0x0);
        gbc.writeMem(0x8a58, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8441);
        EXPECT(gbc.pc(), 0x8a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a58), 0xcb);
        EXPECT(gbc.readMem(0x8a59), 0x3f);
        // CB 3F 03B5
        gbc.setState(0x20d5, 0xb5b, 0x60, 0xd6e6, 0x5556, 0x457f, 0x0, 0x0);
        gbc.writeMem(0x20d5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb5b);
        EXPECT(gbc.pc(), 0x20d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03B6
        gbc.setState(0x9afd, 0xba42, 0x7f00, 0x4818, 0x6879, 0x59e3, 0x1, 0x0);
        gbc.writeMem(0x9afd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xba42);
        EXPECT(gbc.pc(), 0x9aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9afd), 0xcb);
        EXPECT(gbc.readMem(0x9afe), 0x3f);
        // CB 3F 03B7
        gbc.setState(0x4cfb, 0x8d35, 0x730, 0x43b3, 0x278f, 0x87fa, 0x1, 0x1);
        gbc.writeMem(0x4cfb, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8d35);
        EXPECT(gbc.pc(), 0x4cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03B8
        gbc.setState(0x5dd5, 0x92ff, 0x36c0, 0x1e7d, 0x86b, 0xb14b, 0x1, 0x0);
        gbc.writeMem(0x5dd5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x92ff);
        EXPECT(gbc.pc(), 0x5dd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03B9
        gbc.setState(0xc787, 0xbff8, 0x1c00, 0xbd5a, 0xdafd, 0x7a3, 0x0, 0x0);
        gbc.writeMem(0xc787, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbff8);
        EXPECT(gbc.pc(), 0xc789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc787), 0xcb);
        EXPECT(gbc.readMem(0xc788), 0x3f);
        // CB 3F 03BA
        gbc.setState(0x8730, 0x4ad4, 0xa050, 0xea16, 0x837, 0x30c4, 0x1, 0x0);
        gbc.writeMem(0x8730, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4ad4);
        EXPECT(gbc.pc(), 0x8732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8730), 0xcb);
        EXPECT(gbc.readMem(0x8731), 0x3f);
        // CB 3F 03BB
        gbc.setState(0x7ad7, 0xf213, 0x5610, 0xc8d5, 0xb8f0, 0x4f5d, 0x0, 0x1);
        gbc.writeMem(0x7ad7, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf213);
        EXPECT(gbc.pc(), 0x7ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03BC
        gbc.setState(0xedbd, 0x163e, 0x2370, 0xabd5, 0x1f5a, 0xab2f, 0x1, 0x1);
        gbc.writeMem(0xedbd, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x163e);
        EXPECT(gbc.pc(), 0xedbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedbd), 0xcb);
        EXPECT(gbc.readMem(0xedbe), 0x3f);
        // CB 3F 03BD
        gbc.setState(0x4dd2, 0xddac, 0x3ac0, 0x3caf, 0x55, 0x3829, 0x1, 0x0);
        gbc.writeMem(0x4dd2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xddac);
        EXPECT(gbc.pc(), 0x4dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03BE
        gbc.setState(0x292f, 0x39a8, 0x1820, 0x1fd5, 0x58d6, 0x2f97, 0x1, 0x1);
        gbc.writeMem(0x292f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x39a8);
        EXPECT(gbc.pc(), 0x2931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03BF
        gbc.setState(0x809e, 0x8a1e, 0xd9d0, 0xa0a, 0x26e2, 0xdece, 0x1, 0x0);
        gbc.writeMem(0x809e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8a1e);
        EXPECT(gbc.pc(), 0x80a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809e), 0xcb);
        EXPECT(gbc.readMem(0x809f), 0x3f);
        // CB 3F 03C0
        gbc.setState(0x8c1, 0xd225, 0x85b0, 0x3b32, 0x4a49, 0x2bf0, 0x0, 0x1);
        gbc.writeMem(0x8c1, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd225);
        EXPECT(gbc.pc(), 0x8c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03C1
        gbc.setState(0x66e5, 0x697d, 0x3840, 0x56cf, 0xada7, 0x832e, 0x0, 0x1);
        gbc.writeMem(0x66e5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x697d);
        EXPECT(gbc.pc(), 0x66e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03C2
        gbc.setState(0x4309, 0xa474, 0xd5a0, 0x2c55, 0x27b7, 0x55ad, 0x1, 0x1);
        gbc.writeMem(0x4309, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa474);
        EXPECT(gbc.pc(), 0x430b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03C3
        gbc.setState(0x6751, 0xdac8, 0xc6a0, 0xf049, 0xe98c, 0xc806, 0x0, 0x0);
        gbc.writeMem(0x6751, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xdac8);
        EXPECT(gbc.pc(), 0x6753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03C4
        gbc.setState(0x1577, 0xbab9, 0x7ff0, 0x94ba, 0xbc37, 0x5154, 0x0, 0x1);
        gbc.writeMem(0x1577, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbab9);
        EXPECT(gbc.pc(), 0x1579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03C5
        gbc.setState(0xdbfe, 0x9677, 0x3ea0, 0xcba0, 0x8230, 0xef3c, 0x1, 0x1);
        gbc.writeMem(0xdbfe, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9677);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfe), 0xcb);
        EXPECT(gbc.readMem(0xdbff), 0x3f);
        // CB 3F 03C6
        gbc.setState(0xba99, 0x4d5f, 0xe940, 0x32ae, 0x3afa, 0x5e49, 0x1, 0x1);
        gbc.writeMem(0xba99, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4d5f);
        EXPECT(gbc.pc(), 0xba9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba99), 0xcb);
        EXPECT(gbc.readMem(0xba9a), 0x3f);
        // CB 3F 03C7
        gbc.setState(0x5c5d, 0xae49, 0x5f20, 0xfbe5, 0xd7e4, 0x5041, 0x1, 0x0);
        gbc.writeMem(0x5c5d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xae49);
        EXPECT(gbc.pc(), 0x5c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03C8
        gbc.setState(0xac33, 0xf1ec, 0xa540, 0xbb61, 0xa75c, 0x1491, 0x0, 0x0);
        gbc.writeMem(0xac33, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf1ec);
        EXPECT(gbc.pc(), 0xac35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac33), 0xcb);
        EXPECT(gbc.readMem(0xac34), 0x3f);
        // CB 3F 03C9
        gbc.setState(0x4f8f, 0xb770, 0x1290, 0xe36a, 0x9644, 0x83a3, 0x0, 0x1);
        gbc.writeMem(0x4f8f, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb770);
        EXPECT(gbc.pc(), 0x4f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03CA
        gbc.setState(0x314c, 0x14b3, 0x4180, 0x9f2c, 0x940e, 0x51ca, 0x1, 0x1);
        gbc.writeMem(0x314c, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x14b3);
        EXPECT(gbc.pc(), 0x314e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03CB
        gbc.setState(0xe701, 0xbe00, 0x9b30, 0x6c3, 0x9f82, 0x6013, 0x1, 0x1);
        gbc.writeMem(0xe701, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbe00);
        EXPECT(gbc.pc(), 0xe703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe701), 0xcb);
        EXPECT(gbc.readMem(0xe702), 0x3f);
        // CB 3F 03CC
        gbc.setState(0x5037, 0x9949, 0x860, 0xc8dc, 0xb3ad, 0x9725, 0x1, 0x0);
        gbc.writeMem(0x5037, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9949);
        EXPECT(gbc.pc(), 0x5039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03CD
        gbc.setState(0x6e01, 0xb12f, 0xd390, 0x8e50, 0x26a2, 0xb82e, 0x1, 0x0);
        gbc.writeMem(0x6e01, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb12f);
        EXPECT(gbc.pc(), 0x6e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03CE
        gbc.setState(0x9bb8, 0xa4cd, 0x1350, 0xb941, 0x206b, 0x1329, 0x1, 0x1);
        gbc.writeMem(0x9bb8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa4cd);
        EXPECT(gbc.pc(), 0x9bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb8), 0xcb);
        EXPECT(gbc.readMem(0x9bb9), 0x3f);
        // CB 3F 03CF
        gbc.setState(0x56ae, 0x3640, 0x19a0, 0xc734, 0xcbef, 0x7eb0, 0x1, 0x1);
        gbc.writeMem(0x56ae, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3640);
        EXPECT(gbc.pc(), 0x56b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03D0
        gbc.setState(0xe6ed, 0xe741, 0xb0d0, 0x1021, 0xbe28, 0x1b, 0x1, 0x1);
        gbc.writeMem(0xe6ed, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe741);
        EXPECT(gbc.pc(), 0xe6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ed), 0xcb);
        EXPECT(gbc.readMem(0xe6ee), 0x3f);
        // CB 3F 03D1
        gbc.setState(0x71e2, 0x86f6, 0x4770, 0xc998, 0x8210, 0x4524, 0x1, 0x0);
        gbc.writeMem(0x71e2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x86f6);
        EXPECT(gbc.pc(), 0x71e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03D2
        gbc.setState(0xc286, 0xdf41, 0x20e0, 0x8cb8, 0x8c70, 0xea91, 0x1, 0x1);
        gbc.writeMem(0xc286, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdf41);
        EXPECT(gbc.pc(), 0xc288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc286), 0xcb);
        EXPECT(gbc.readMem(0xc287), 0x3f);
        // CB 3F 03D3
        gbc.setState(0x2cd5, 0xa4f7, 0xe400, 0x71a1, 0x5c65, 0x56a0, 0x1, 0x1);
        gbc.writeMem(0x2cd5, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa4f7);
        EXPECT(gbc.pc(), 0x2cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03D4
        gbc.setState(0xe14d, 0xd8c3, 0xd460, 0x251a, 0x6483, 0x38dc, 0x1, 0x1);
        gbc.writeMem(0xe14d, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd8c3);
        EXPECT(gbc.pc(), 0xe14f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14d), 0xcb);
        EXPECT(gbc.readMem(0xe14e), 0x3f);
        // CB 3F 03D5
        gbc.setState(0x8a01, 0x38a4, 0x6840, 0xacb1, 0x572, 0xb9b, 0x0, 0x1);
        gbc.writeMem(0x8a01, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x38a4);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a01), 0xcb);
        EXPECT(gbc.readMem(0x8a02), 0x3f);
        // CB 3F 03D6
        gbc.setState(0x45e6, 0x7cda, 0x2b0, 0x5c03, 0x7b9a, 0xce45, 0x0, 0x0);
        gbc.writeMem(0x45e6, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7cda);
        EXPECT(gbc.pc(), 0x45e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03D7
        gbc.setState(0xaa, 0x2856, 0x6520, 0x963b, 0x6ac0, 0x3b87, 0x1, 0x1);
        gbc.writeMem(0xaa, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2856);
        EXPECT(gbc.pc(), 0xac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03D8
        gbc.setState(0x5fd8, 0x2caf, 0xa4e0, 0x3c1d, 0xd8b6, 0x416c, 0x1, 0x0);
        gbc.writeMem(0x5fd8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2caf);
        EXPECT(gbc.pc(), 0x5fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03D9
        gbc.setState(0x29d8, 0x63ba, 0xb920, 0x784d, 0x83a1, 0xb234, 0x0, 0x1);
        gbc.writeMem(0x29d8, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x63ba);
        EXPECT(gbc.pc(), 0x29da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03DA
        gbc.setState(0x2509, 0xae64, 0xe870, 0xa8a1, 0x9ed4, 0xd5c5, 0x0, 0x1);
        gbc.writeMem(0x2509, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xae64);
        EXPECT(gbc.pc(), 0x250b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03DB
        gbc.setState(0xd636, 0x627a, 0x9570, 0x577f, 0x8726, 0xb6a1, 0x1, 0x0);
        gbc.writeMem(0xd636, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x627a);
        EXPECT(gbc.pc(), 0xd638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd636), 0xcb);
        EXPECT(gbc.readMem(0xd637), 0x3f);
        // CB 3F 03DC
        gbc.setState(0x1d17, 0xfac9, 0xf700, 0x1e09, 0x2cb, 0x2f97, 0x1, 0x0);
        gbc.writeMem(0x1d17, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfac9);
        EXPECT(gbc.pc(), 0x1d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03DD
        gbc.setState(0xe934, 0xd0d3, 0xf370, 0xb475, 0x6452, 0xc485, 0x0, 0x0);
        gbc.writeMem(0xe934, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd0d3);
        EXPECT(gbc.pc(), 0xe936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe934), 0xcb);
        EXPECT(gbc.readMem(0xe935), 0x3f);
        // CB 3F 03DE
        gbc.setState(0x3f2a, 0x17d5, 0xdc10, 0xb26f, 0xcb8b, 0xc265, 0x1, 0x0);
        gbc.writeMem(0x3f2a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x17d5);
        EXPECT(gbc.pc(), 0x3f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03DF
        gbc.setState(0xa068, 0x4ac5, 0x7080, 0x48ad, 0x9384, 0x5314, 0x0, 0x0);
        gbc.writeMem(0xa068, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4ac5);
        EXPECT(gbc.pc(), 0xa06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa068), 0xcb);
        EXPECT(gbc.readMem(0xa069), 0x3f);
        // CB 3F 03E0
        gbc.setState(0x462a, 0x1321, 0x1930, 0x386f, 0xa65f, 0x9e65, 0x1, 0x1);
        gbc.writeMem(0x462a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1321);
        EXPECT(gbc.pc(), 0x462c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03E1
        gbc.setState(0x8bc2, 0x60bc, 0xc190, 0xcd37, 0xdca, 0x742d, 0x0, 0x1);
        gbc.writeMem(0x8bc2, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x60bc);
        EXPECT(gbc.pc(), 0x8bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bc2), 0xcb);
        EXPECT(gbc.readMem(0x8bc3), 0x3f);
        // CB 3F 03E2
        gbc.setState(0xb40, 0xc2b7, 0xf660, 0x3375, 0xcd47, 0x6ae, 0x1, 0x1);
        gbc.writeMem(0xb40, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc2b7);
        EXPECT(gbc.pc(), 0xb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3F 03E3
        gbc.setState(0xec1a, 0x78e4, 0x2e80, 0x11a0, 0xefe8, 0x6f7f, 0x1, 0x1);
        gbc.writeMem(0xec1a, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x78e4);
        EXPECT(gbc.pc(), 0xec1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec1a), 0xcb);
        EXPECT(gbc.readMem(0xec1b), 0x3f);
        // CB 3F 03E4
        gbc.setState(0xe4a4, 0xe6fa, 0xf770, 0x2c55, 0x300e, 0xf14e, 0x1, 0x0);
        gbc.writeMem(0xe4a4, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe6fa);
        EXPECT(gbc.pc(), 0xe4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a4), 0xcb);
        EXPECT(gbc.readMem(0xe4a5), 0x3f);
        // CB 3F 03E5
        gbc.setState(0x6852, 0xe25b, 0x9780, 0x158f, 0x7500, 0xbb1f, 0x0, 0x1);
        gbc.writeMem(0x6852, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe25b);
        EXPECT(gbc.pc(), 0x6854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03E6
        gbc.setState(0xb0e, 0x89d, 0x4f10, 0x79ec, 0x8e71, 0x200d, 0x0, 0x0);
        gbc.writeMem(0xb0e, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x89d);
        EXPECT(gbc.pc(), 0xb10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3F 03E7
        gbc.setState(0xebcf, 0x90df, 0x7a20, 0x10af, 0xb56f, 0x249, 0x0, 0x1);
        gbc.writeMem(0xebcf, { 0xcb, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x90df);
        EXPECT(gbc.pc(), 0xebd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebcf), 0xcb);
        EXPECT(gbc.readMem(0xebd0), 0x3f);
    }
